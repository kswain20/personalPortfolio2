$(document).ready((function(){window.addEventListener?window.addEventListener("storage",(function(){var e=localStorage.getItem("closeReminder");if(e){localStorage.removeItem("closeReminder");var t=e.split("_")[1];"object"==typeof Events&&Events.closeReminderPop(t,!0)}}),!1):window.attachEvent("onstorage",(function(){var e=localStorage.getItem("closeReminder");if(e){localStorage.removeItem("closeReminder");var t=e.split("_")[1];"object"==typeof Events&&Events.closeReminderPop(t,!0)}}),!1),document.addEventListener("click",popUpListener,!0);for(var e=0;e<document.forms.length;e++)document.forms[e].submitted=!0;"object"==typeof Crm&&(Crm.massOperationWorkflowLimit||(Crm.massOperationWorkflowLimit=1e3),Crm.massOperationUserThreadLimit=501,Crm.massOperationTotalLimit||(Crm.massOperationTotalLimit=5e4)),scrollConst=125,Math.sign||(Math.sign=function(e){return(e>0)-(e<0)||+e})}));var wfForm={wf_chosen_open:void 0,currElemFoc:void 0,elem:void 0,checkMultiSelVal:function(e){var t=$(e).find(".chosen-results");function a(t){t.show(),$(e).find(".dvnoprof").remove(),0===t.find("li.active-result").length&&t.hide().parent().append($("<div/>").addClass("crm-font-regular aligncenter dvnoprof boxsizeBB").text("No results found"))}$(e).find(".search-field input").off("keydown").on("keydown",(function(){a($(this).find(".chosen-results"))})),a(t)},inputfieldFocus:function(){$(".wf_form_focus").find("tr:eq(0) td:eq(1) input").focus()},initFormClick:function(){var e=$(".wf_form_focus");e.find("textarea").each((function(){!function(e){var t=e.outerWidth(),a=18,n=$("#span_tarea");if(n.length<=0){var i=$("<span>"),l=e.css("font-size");i.attr({id:"span_tarea",class:"dIB newgraybtn"}).css({visiblity:"hidden","font-size":l,"word-break":"break-word"}),$("body").append(i),n=i}n.text(e.val());var s=parseInt(n.outerHeight()/18)*a;n.css({width:t}),s>72?e.css({height:"72px"}):e.css({height:s})}($(this))})),e.find("input, textarea, select").on("focus",(function(e){renderingUtils.stopEvent(e);var t=$(this),a=t.outerWidth()+10;if(t.closest("div").hasClass("chosen-search"))return!1;if(!t.closest("tr").hasClass("wf_no_focus")){var n=t.css("font-size");$(".wf_form_focus").find("tr").find("td").removeClass("wf_setFocus");var i=t.closest("td");if(i.hasClass("wf_setFocus")&&i.removeClass("wf_setFocus").removeAttr("onblur"),"textarea"===t.prop("tagName").toLowerCase()){var l=$("#span_tarea");if(0==l.length){var s=$("<span>");s.attr({id:"span_tarea",class:"dIB newgraybtn"}).css({visiblity:"hidden","font-size":n}),$("body").append(s),l.css({visibility:"hidden"}),l.css("width",a)}t.off("keypress paste").on("paste keypress",(function(e){var t=$(this);if("keypress"==e.type){var a=$("#span_tarea");a.text(t.val());var n=18*parseInt(a.outerHeight()/18);n>72?t.css({height:"72px"}):t.css({height:n})}else"paste"==e.type&&t.css({height:"72px"})}))}i.addClass("wf_setFocus"),t.hasClass("qcInputModulation")||t.attr("onblur","wfForm.removeFocus(this,'form')")}})),e.find("tr").off("click").on("click",(function(e){var t,a=$(this);if(a.hasClass("wf_foc_cb")){var n=a.data("cbtd");(r=a.find("td").eq(n).find("input:checkbox")).triggerHandler("click"),r.is(":checked")?r.prop("checked",!1):r.prop("checked",!0)}else if(!a.hasClass("wf_no_focus")){t=a.find("td").eq(1);var i=renderingUtils.getTargetElem(e),l=$(i).hasClass("wf_requiredMark")||$(i).hasClass("wf_form_lab"),s="TD"==$(i).prop("tagName");if(!t.hasClass("wf_moreInp")&&(l||s))for(var r,o=(r=t.find("input,textarea,.newSelect")).length,c=0;c<o;c++){var d=r.prop("tagName"),m=r.attr("type");if(!r.eq(c).is(":disabled")&&"INPUT"==d&&"hidden"!=m)return void(r=r.eq(c)).focus();if(!r.eq(c).is(":disabled")&&"TEXTAREA"==d)return void(r=r.eq(c)).focus();if(r.eq(c).hasClass("newSelect")&&!r.eq(c).find("select").is(":disabled"))return r=r.eq(c),$("body").trigger("click"),sE(),void r.find("select").select2("open")}}}))},removeFocus:function(e,t){var a=$(e);"criteria"===t?a.removeAttr("onblur").closest("td").removeClass("wf_setFocus"):($(".wf_form_focus").find("tr").find("td").removeClass("wf_setFocus").removeAttr("onblur"),"textarea"===a.prop("tagName").toLowerCase()&&(0==a.val().length&&a.css({height:18}),$("#span_tarea").remove()))},chosen_show:function(e){null!=e?thirdPartyUtils.bindSelect2($("#"+e).find(".newSelect").find("select")):(thirdPartyUtils.bindSelect2($(".newSelect").find("select")),thirdPartyUtils.bindSelect2($(".wf_chosen_ui").find("select"))),thirdPartyUtils.bindSelect2($(".zcrm-modal").find("select"))},setSltVal:function(e){var t=0;t=$(e).attr("data-chosenlen")?$(e).data("chosenlen"):35;var a=$(e).find("option:selected"),n=a.data("val"),i=$(e).closest(".wf_chosen_ui"),l=i.find(".sltSetVal");void 0===n&&(n=a.text()),l.text(n),"None"===n||"HH"===n||"MM"===n?l.addClass("color_None"):l.removeClass("color_None"),n.length>t?i.addClass("wf_chosen_hover"):i.removeClass("wf_chosen_hover");var s=$("#pb_transitionAction_form").length>0,r=$("#aPfldUpdate").length>0,o=$(e),c=o.children("option:selected").eq(0),d=c.attr("data-colorcode")?c.attr("data-colorcode"):"",m=o.data("from"),u="";if(s){u="selectWFupdatecolorcode";var p=$("#selectWFupdatecolorcode")}else if(r)if(u="selectWFupdatecolorcode",e.id.startsWith("Approval"))p=$("#ApprovalfieldLabletd"+e.id.slice(19)).find("#selectWFupdatecolorcode");else p=$("#fieldLabletd"+e.id.slice(11)).find("#selectWFupdatecolorcode");else if("leadConvert"===m){u="selectColorComponent-"+o.data("fieldid");p=$("#"+u)}else{p=$("#selectWFupdatecolorcode");u="selectWFupdatecolorcode"}if(d){p.remove();var g=null;o.data("colorcode",d),(h=o.parent().parent()).addClass("colorEnabledPicklist"),"-None-"===a.value||""===a.value?h.addClass("colorEnabledPKNone"):(h.removeClass("colorEnabledPKNone"),g=s?$('<span class="dIB activitesColor" data-zcqa="colorcode_selectWFupdatecolorcode" id="selectWFupdatecolorcode" style="background:'+d+'"></span>'):$('<span class="dIB activitesColor" data-zcqa="wfform_colorcode_'+o.data("fieldid")+'" id="'+u+'" style="background:'+d+'"></span>')),null!==g&&g.insertBefore(o)}else if(p&&p.length>0){var h;p.remove(),(h=o.parent().parent()).addClass("colorEnabledPKNone")}else{var f=$(e).parent(),v=void 0!==f?f.parent():void 0;void 0!==v&&v.removeClass("colorEnabledPicklist")}},setOprSel:function(e,t,a,n){renderingUtils.stopEvent();var i=$(e).find(".cus_cb_inp");if(a&&"and"==n&&i.is(":checked"))Search.patternConditionChangedValue="";else if(!a||"or"!=n||i.is(":checked")){var l=$("#match"+t);if(l.find("option").prop("selected",!1),i.is(":checked")?(l.find("[value='or']").prop("selected","selected"),a&&$("#condition_inp"+t).prop("checked",!1)):(l.find("[value='and']").prop("selected","selected"),a&&$("#condition_inp"+t).prop("checked",!0)),!a){var s="";-1!=t.indexOf("_")&&(s=t.substring(t.indexOf("_"))),Search.changeOprValPattern("match"+t,s)}}else Search.patternConditionChangedValue=""},setOprSel_new:function(e,t,a,n){window.event&&renderingUtils.stopEvent();var i=$(e).find(".cus_cb_inp"),l=i.is(":checked");if(!(a&&"and"==n&&l||"or"==n&&!l)){var s=l?"or":"and",r=$(e).parent().find(".searchMatch");r.val(s),a?i.prop("checked",!l):Search.changeOprValPattern_new(r,t)}},focusInp:function(e,t,a){$("#"+t+a).focus().attr("onblur","wfForm.removeFocus(this,'criteria')"),$("#searchcriteria"+a).find("#wf_field_type_td").addClass("wf_setFocus")}};function reInviteAlert(e){if(e)return getObj("email").value!=getObj("oldEmail").value?getObj("reInvite").value=!0:getObj("reInvite").value=!1,!0}function showFreezeMessage(e){if("crm.store.thanks"==e.trim()&&(e="<fmt:message key='crm.store.thanks'/>"),""!=e.trim()){freezeBackground(),$(getObj("freezeMessageContiner")).empty(),getObj("freezeMessageContiner").innerHTML=e;var t=getObj("freezeMessageDiv");t.style.top="381px",t.style.position="absolute",t.style.zIndex="30",t.style.display="block",mailsetCenter("freezeMessageDiv")}}function addArrElem(e,t,a){if(a){var n=!1;for(i=0;i<e.length;i++)if(e[i]==t){n=!0;break}n||(e[e.length]=t)}else e[e.length]=t}function removeArrElem(e,t){for(i=0;i<e.length;i++)if(e[i]==t){e.splice(i,1);break}}function arrayContains(e,t,a){if(e)for(var n=0;n<e.length;n++)if("id"==a){if(e[n].id===t)return!0}else if(e[n]===t)return!0;return!1}function showURLinPopup(e,t,a,n,i,l,s,r,o,c,d){var m=$("#popUpDIV");if((m.addClass("ppTop"),s)&&!window.confirm(I18n.getMsg("crm.image.delete.confirm")))return!1;e.includes("wfDelugePop")&&m.addClass("wfFuncConfig");var u=getElemById("wfDelugeLoadDIV");u&&(u.style.display=""),void 0===t&&(t="600px"),void 0===a&&(a="400px");var p=void 0,g=void 0;$("#wfModule").length>0?(p=wfActions.getActionModuleForSection(wfNew.createElemSuffix),wfNew.editedActionId||(g=wfActions.getRelatedModuleForAction(wfNew.createElemSuffix))):$("#Orchbuilder").length>0?(p=Lyte.registeredMixins.orchestration_action.getCurrentModuleName(AutomationActionsHelper.currenctActionInstance.isTransition),g=store.peekRecord("module",Lyte.registeredMixins.orchestration_action.getProcessData().id).module_name):p=$("#createProcessContainer").length>0?ProcessBuilder.Process.Module:document.querySelector("crm-wizard-builder")?wizardTransitionHandler.Transition.Module:$("#module").val();var h=Lyte.Router.getRouteInstance().parent.routeName;"undefined"!=typeof wfdeluge&&wfdeluge&&wfdeluge.isAutomationFeatureRoute(h)&&(customFunctionsObj.category=customFunctionsObj.isFrom="automation"),"review-process"===h&&(p=$L("crm-reviewprocess-createconfig").e[0].getData("tabName")),customFunctionsObj.module=p,customFunctionsObj.relatedModule=g,"undefined"!=typeof wfmergefield&&wfmergefield.setActionType("Deluge");var f=null;d&&(f=d),o&&(f?f+="&"+csrfParamName+"="+encodeURIComponent(csrfToken):f=csrfParamName+"="+encodeURIComponent(csrfToken)),p&&""!=p&&moduleRecordMapping[p]&&(f?f+="&module="+p+"&reqType=ajax":f="module="+p+"&reqType=ajax",g&&(f+="&relatedModule="+g)),"newRelatedListPopUpDiv"===c&&($(c).removeClass("p30"),$(c).css({padding:"0px"}));var v=c?getElemById(c):getElemById("popUpDIV"),C=new getHTTPObject;C.open("POST",e,!0),C.setRequestHeader("Content-type","application/x-www-form-urlencoded"),C.onreadystatechange=function(){if(4==C.readyState){var n=$("#crl_customfunction_list");if(C.status==crmConstants.errorStatusCode)return void renderingUtils.displayPermissionDenied(C);$(v).empty(),v.innerHTML=C.responseText,n.is(":visible")&&(n.find(".wf_form_UI").addClass("wf_form_focus"),select2ChangesInFields(n),wfForm.initFormClick()),v.style.width=t,v.style.height=a,-1!=e.search("viewFuncCode")&&(v.style.maxWidth="1200px"),$("#postYrReq").length>0&&(v.style.height="",v.style.maxHeight=a),getObj("wfModule"),crmui.showPopup({id:"popUpDIV",escToClose:!1}),manipulateScriptElems(v),e.indexOf(Crm.getCrmBasePath()+"/WorkFlowDeluge.do?step=createCustomFunctionInZohoCreator")>-1&&"true"==CustomButtonJSObjectInit.isDRE&&CustomButtonJSObjectInit.setDelugeDivHeight("true"),"undefined"!=typeof zossearch&&zossearch.disbaleGSShortCutKey(!1),r&&(getElemById("publishSuccMsg").style.display="",$("#publishSuccMsg").fadeOut(4e3)),document.title=I18n.getMsg("crm.title.general",[I18n.getMsg(I18n.getMsg("crm.inactive.prewarning.custom.functions"),Crm.partnerName),Crm.partnerName])}},C.send(f)}function closeURLPopup(){var e=$("#popUpDIV");"block"===$("#popUpDIV").css("display")?(crmui.hidePopup("popUpDIV"),crmui.transSupport?$("#popUpDIV").on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",(function(e){$("#popUpDIV").removeClass("ppTop wfFuncConfig"),$("#popUpDIV").empty(),$("#popUpDIV").off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend")})):(removeFreezeLayer(),e.removeClass("ppTop wfFuncConfig"),$("#popUpDIV").empty())):crmui.hidePopup("newRelatedListPopUpDiv"),(getObj("isapproval")||getObj("wfModule")||$(".pb_associated_deluge").length>0||getObj("rpFunctionsList"))&&"undefined"!=typeof delugepopupId&&delugepopupId&&(crmui.showPopup(delugepopupId),delugepopupId=null),"undefined"!=typeof zossearch&&zossearch.disbaleGSShortCutKey(!1)}function createApprovalProcess(e,t){var a=$("#modOpt option:selected").val();loadUrl(e,t+"&module="+a)}function statusChange(e){var t=csrfParamName+"="+encodeURIComponent(csrfToken);if($(e).hasClass("Act")){var a=Crm.getCrmBasePath()+"/approvalProcess.do?action=isAPAssociated&processId="+$(e).closest("tr").attr("id");mR(a,(function(a){var n=(a=JSON.parse(a)).orchestration_used;if(n)showAPDeleteDenyPopUp(n);else{var i=I18n.getMsg(a.record_used?"crm.confirm.deactivate.approval.processes1":"crm.confirm.deactivate.approval.processes");confirmDeactivePopForAP(e,i,"doDeactivateAP","doDeactivateAP",[!0,e,t],[!1,e,t])}}))}else{var n=Crm.getCrmBasePath()+"/approvalProcess.do?action=updateStatus&processId="+$(e).closest("tr").attr("id")+"&status=active";mR(n,(function(t){"limitExceeded"==(t=JSON.parse(t)).status?alert(I18n.getMsg("crm.approval.process.active.limit",t.limitCnt)):($(e).find(".InactiveStatus").hide(),$(e).find(".activeStatus").show(),$(e).removeClass("inAct"),$(e).addClass("Act"))}),t)}}function confirmDeactivePopForAP(e,t,a,n,i,l){var s=$("#deactivePopup");if(s.removeClass("popInListView popInDetailView"),$(e).closest("div").data("sch"))return crmui.showPopup("deActivateWarnDIV"),void $(e).closest("tr").addClass("wf_activeRow");if(Crm.userDetails.RTL_ENABLED){var r=crmui.getOffset(e);r.left=r.left-$(e).outerWidth()/2-40,freezeBackground(),$("#FreezeLayer").css({opacity:"0.15"}).show(),s.css({position:"absolute",left:r.left,top:r.top+33}).addClass("scalePopOne").show()}else{var o=crmui.getOffset(e),c=$("#setup_new_ContentDiv").scrollTop(),d=s.outerHeight();renderingUtils.windowHeight-(o.top+55)<d?(s.addClass("shownTop"),o.left=$(window).width()-o.left-$(e).outerWidth()/2-s.outerWidth()/4,freezeBackground(),$("#FreezeLayer").css({opacity:"0.15"}).show(),s.css({position:"absolute",right:o.left,top:o.top+c-d-60,left:""}).addClass("scalePopOne popInListView").show()):(s.removeClass("shownTop"),o.left=$(window).width()-o.left-$(e).outerWidth()/2-s.outerWidth()/4,freezeBackground(),$("#FreezeLayer").css({opacity:"0.15"}).show(),s.css({position:"absolute",right:o.left,top:o.top+c-15,left:""}).addClass("scalePopOne popInListView").show())}s.find(".f14.color_3.proxima.vam.infoCont").html(t),$("#wfDeactivateBtn").off("click").click((function(){executeFunctionByName(a,window,i),closeDeactivePopForAP(s)})),$("#wfDeactivateCancelBtn").off("click").click((function(){executeFunctionByName(n,window,l),closeDeactivePopForAP(s)})),$("#wfDeactivateBtnDiv").addClass("alignright"),$(e).closest("tr").addClass("wf_activeRow")}function closeDeactivePopForAP(e){e.hide().removeClass("scalePopOne"),removeFreezeLayer(),e.hide()}function executeFunctionByName(e,t,a){for(var n=e.split("."),i=n.pop(),l=0;l<n.length;l++)t=t[n[l]];return t[i].apply(t,a)}function doDeactivateAP(e,t,a){if(renderingUtils.stopEvent(),1==e){$(t).find(".activeStatus").hide(),$(t).find(".InactiveStatus").show(),$(t).removeClass("Act"),$(t).addClass("inAct");var n=Crm.getCrmBasePath()+"/approvalProcess.do?action=updateStatus&processId="+$(t).closest("tr").attr("id")+"&status=deactive";mR(n,(function(e){}),a)}else $(t).find(".InactiveStatus").hide(),$(t).find(".activeStatus").show(),$(t).removeClass("inAct"),$(t).addClass("Act");$(t).closest("tr").removeClass("wf_activeRow")}function showAPDeleteDenyPopUp(e){var t=Handlebars.templates.deleteFieldWarningPopup();$("#deleteFieldWarning").html(t),renderAutomationDenyPopComp(e,void 0,void 0,"#automationdiv"),$("#delfldhd").html(I18n.getMsg("crm.automation.cannot.delete.text",[I18n.getMsg("crm.mass.actions.approval.process")])),$("#deleteInfo1").html(I18n.getMsg("crm.ap.webform.delete.info",[I18n.getMsg("crm.mass.actions.approval.process")])),crmui.showPopup("deletefield")}function deleteApprovalProcess(e){var t=csrfParamName+"="+encodeURIComponent(csrfToken),a=Crm.getCrmBasePath()+"/approvalProcess.do?action=isAPAssociated&processId="+e;mR(a,(function(a){var n=null,i=(a=JSON.parse(a)).orchestration_used;i?showAPDeleteDenyPopUp(i):(n=1==a.record_used?I18n.getMsg("crm.confirm.delete.approval.processes1"):I18n.getMsg("crm.confirm.delete.approval.processes"),showDeletePopup(n,"crm.button.yes.delete","","",""),$("#deletepopup").find("#deleteButton").click((function(){hideAnimatePopup("deletepopup");var a=Crm.getCrmBasePath()+"/approvalProcess.do?action=deleteApprovalProcess&processId="+e;mR(a,(function(t){$("#"+e).remove(),$("#approvalListDIV tr").size()<=1&&$("#approvalProcess").length>0&&$("#approvalProcess")[0].click(),removeFreezeLayer()}),t)})))}))}function selArwHov(e){$(e).prev().find("i").css("background-position","-246px -397px")}function selArwOut(e){$(e).prev().find("i").css("background-position","-246px -385px")}function applyMasterToolTip(){$(".masterTooltip").hover((function(){var e=$(this).attr("title");$(this).data("tipText",e).removeAttr("title"),$('<p class="mstooltip"></p>').text(e).appendTo("body").fadeIn("300")}),(function(){$(this).attr("title",$(this).data("tipText")),$(".mstooltip").remove()})).mousemove((function(e){var t=e.pageX+5,a=e.pageY+5;$(".mstooltip").css({top:a,left:t})}))}function setZiaVisionPageHeight(){var e,t,a,n,i=$("#setup_new_ContentDiv"),l=i.height(),s=$(".setupleftmenutable");if($("crm-ziavision-viewpage").length)e="auto",n=!1;else if($("crm-ziavision-creationpage").length)e="hidden",a=$(".newValidationRulePage"),t=l,n=!1;else if($("crm-ziavision-summarypage").length)e="hidden",a=$(".imgValidationSummaryPage"),t=l,n=!1;else if($("crm-ziavision-image-validationpage").length){e="hidden",a=$(".trainingPageContainer .imgValidatorCont"),t=l-($(".validationPageHeader").outerHeight()+$(".trainingPageHeader").outerHeight()+$(".validatorInfo").outerHeight())-22,n=!0}i.css("overflow",e),null!=a&&a.css("height",t),n?s.addClass("visionApprovalTable"):s.removeClass("visionApprovalTable")}$.fn.moreOption=function(){this.click((function(){sE()})),this.mouseover((function(){sE();var e=$(this),t=(crmui.getOffset(e),$(e).position().top),a=$(e).position().left;e.addClass("showMoreHvr");var n=e.closest("td").find(".more-opt-list");n.on("mouseenter",(function(){var t;t=e,$(t).addClass("showMoreHvr")})),n.on("mouseleave",(function(){!function(e,t){$(e).hide(),$(t).removeClass("showMoreHvr")}(this,e)})),n.find("li").on("click",(function(){$("#more-opt-list").hide()})),Crm.userDetails.RTL_ENABLED?n.css({right:a+35,top:t-10}).show():n.css({left:a+35,top:t-10}).show()})),this.mouseout((function(){$(this).removeClass("showMoreHvr"),setTimeout((function(){$(".more-opt-list").hide()}),100)}))};var mP={saveNewStage:function(e){e.disabled=!0,0!=$(".activePipeline").length?document.querySelector("crm-multipipelines").component.executeMethod("saveNewStage",e):document.querySelector("crm-create-pipeline").component.executeMethod("saveNewStage",e)},closeStageProbMap:function(){crmui.hidePopup("pA_state_picklistpopup"),Crm.client_tracking("Stage - Cancel Click"),0==$(".activePipeline").length&&$("#createNewPipelinePop")[0].ltProp("show",!0)}},CrmTags=CrmTags||{};CrmTags.previousname="",CrmTags.mergeTagid="",CrmTags.deleteTagId="",CrmTags.mergedTagid="",CrmTags.mergeTagOldName="",CrmTags.mergeTagName="",CrmTags.mergeTagMainName="",CrmTags.usedNames=[],CrmTags.newTags=[],CrmTags.moduleName="",CrmTags.isTagsCreated=!1,CrmTags.recordCount="-1",CrmTags.month=["January","February","March","April","May","June","July","August","September","October","November","December"],CrmTags.shortMonth=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],CrmTags.configuredArea={},CrmTags.updatedName="",CrmTags.tableObj={Leads:"CrmLeadDetails",Contacts:"CrmContactDetails",Accounts:"CrmAccount",Potentials:"CrmPotential",Deals:"CrmPotential",Quotes:"CrmQuote",Calls:"CrmActivity",Events:"CrmActivity",Tasks:"CrmActivity",Campaigns:"CrmCampaign",Cases:"CrmCase",PriceBooks:"CrmPriceBooks",Vendors:"CrmVendors",Products:"CrmProducts",Solutions:"CrmSolution",SalesOrders:"CrmSalesOrder",PurchaseOrders:"CrmPurchaseOrder",Invoices:"CrmInvoice",Services:"CrmServiceDetails",Appointments:"CrmAppointmentDetails"},CrmTags.usedTagCount=0,CrmTags.editionLimit=0,CrmTags.currentModule=null,CrmTags.editTagTr=null,CrmTags.isFromActivityModule=null,CrmTags.init=function(){CrmTags.previousname="",CrmTags.mergeTagid="",CrmTags.deleteTagId="",CrmTags.mergedTagid="",CrmTags.mergeTagOldName="",CrmTags.mergeTagMainName="",CrmTags.moduleName="",CrmTags.mergeTagName="",CrmTags.recordCount="-1",CrmTags.updatedName="",Crm.isActivitySplitDone&&CrmTags.tableObj&&(CrmTags.tableObj.Tasks="CrmTask",CrmTags.tableObj.Calls="CrmCall",CrmTags.tableObj.Events="CrmEvent"),null!==CrmTags.editTagTr&&(CrmTags.editTagTr=null)},CrmTags.handleCancel=function(e){crmui.hidePopup(e),CrmTags.init()},CrmTags.showPopup=function(e){Crm.trackSpotLightAction("Tagging - Manage Tags Add New Tag Click",{Module:CrmTags.currentModule}),crmui.showPop(e);var t=$("#"+e);$("#addTag").val("").focus(),$("#addedElements").empty(),t.find(".addedTags").click((function(){$("#addTag").focus()}))},CrmTags.handleManagePopup=function(e){switch(e){case"cancel":crmui.hidePopup("addtagManagePop"),CrmTags.newTags=[],$("#addTag").val(""),$("#addedElements").html(""),Crm.trackSpotLightAction("Tagging - Manage Tags Cancel");break;case"save":var t=$("#addedElements .createdTag"),a=$("#addtagManagePop .addTag"),n=a.val(),i=CrmTags.editionLimit,l=CrmTags.usedNames.length+CrmTags.newTags.length;if(l>i)return renderingUtils.showCustomAlert(I18n.getMsg("crm.tag.edition.limit.exceeded"),I18n.getMsg("crm.label.small.tags"),!1),a.focus(),!1;if(0===t.length&&(!n||""===n))return renderingUtils.showCustomAlert(I18n.getMsg("crm.tag.enter.one.name"),I18n.getMsg("crm.label.small.tags"),!1),a.focus(),!1;if(""!==n){if((n=n.trim()).length<1)return renderingUtils.showCustomAlert(I18n.getMsg("crm.tag.invalid.tag.name"),"",!1),a.focus(),!1;if(!CrmTags.checkCharacter(n))return a.focus(),!1;if(n.length>25)return renderingUtils.showCustomAlert(I18n.getMsg("crm.tag.max.len.reached"),I18n.getMsg("crm.label.small.tags"),!1),a.focus(),!1;if(!CrmTags.checkNames(n))return renderingUtils.showCustomAlert(I18n.getMsg("crm.label.tag.exists"),I18n.getMsg("crm.label.small.tags"),!1),a.focus(),!1;if(l+1>i||CrmTags.newTags.length+1>100)return renderingUtils.showCustomAlert(I18n.getMsg("crm.tag.edition.limit.exceeded"),I18n.getMsg("crm.label.small.tags"),!1),a.focus(),!1}var s=[],r={},o=CrmTags.currentModule;if(t&&t.length>0)for(var c=t.length,d=0;d<c;d++){var m=t.eq(d).text();if(m.length>25)return renderingUtils.showCustomAlert(I18n.getMsg("crm.tag.max.len.reached"),I18n.getMsg("crm.label.small.tags"),!1),!1;(r={}).name=m,s.push(r)}n&&""!==n&&((r={}).name=n,s.push(r));var u={};u.tags=s;JSON.stringify(u);var p=new crmRequestPool,g={"X-ZCSRF-TOKEN":csrfParamName+"="+csrfToken};p.initiate({action:"/crm/v2/settings/tags?module="+moduleRecordMapping[o].api_name+"&manage="+!0,type:"post",data:JSON.stringify(u),headers:g,success:function(e){store.unloadAll("tag"),crmui.hidePopup("addtagManagePop"),$("#addTag").val(""),$("#addedElements").html(""),CrmTags.moduleName=o,CrmTags.validateSymbol(e),CrmTags.showSuccessMsgAndContructRows(e),CrmTags.init(),CrmTags.newTags=[],crmTab.deleteFromCache(o)},error:function(){crmui.hidePopup("addtagManagePop"),renderingUtils.showCustomAlert(I18n.getMsg("crm.tag.unable.to.process"),I18n.getMsg("crm.label.small.tags"),!1),CrmTags.init(),CrmTags.newTags=[]}}),Crm.trackSpotLightAction("Tagging - Manage Tags Save",{Module:o,Count:s.length})}},CrmTags.saveNewTags=function(e){var t=$("#addTag"),a=t.val(),n=e.keyCode;if(a&&a.length>25)return setTimeout((function(){renderingUtils.showCustomAlert(I18n.getMsg("crm.tag.max.length"),I18n.getMsg("crm.label.small.tags"),!1)}),100),!1;if((188===n&&"<"===e.key||190===n&&">"===e.key)&&e.preventDefault(),a||188!==n||e.preventDefault(),13!==n&&188!==n||""===a){if(188===n&&""===a)e.preventDefault();else if(8===n&&""===a){var i=$("#addedElements .createdTag").last();t.val(i.attr("data-id")).focus(),i.find("b").trigger("click")}}else{if(a=a.trim(),!CrmTags.checkCharacter(a))return setTimeout((function(){t.val(a).focus()}),100),!1;if(a.length<1)return setTimeout((function(){renderingUtils.showCustomAlert(I18n.getMsg("crm.tag.invalid.tag.name"),"",!1)}),100),e.preventDefault(),!1;var l=CrmTags.editionLimit;if(CrmTags.usedNames.length+CrmTags.newTags.length>=l||CrmTags.newTags.length>=100)return setTimeout((function(){renderingUtils.showCustomAlert(I18n.getMsg("crm.tag.edition.limit.exceeded"),I18n.getMsg("crm.label.small.tags"),!1)}),100),e.preventDefault(),!1;if(CrmTags.checkNames(a)){t.val("").focus();var s=$("#addedElements"),r=$("<span></span",{class:"createdTag fL f12 dIB pT1 pR5 pB1 pL5 greyBorder bR2 mT7 mL5 col5","data-id":a,text:a}).appendTo(s);$("<b></b>",{class:"ico-close-small dIB cP m0 mL4 svgIcons",onClick:"CrmTags.closeThis(this)"}).appendTo(r),s.removeClass("dN"),CrmTags.newTags.push(a)}else setTimeout((function(){renderingUtils.showCustomAlert(I18n.getMsg("crm.label.tag.exists"),"",!1)}),100);e.preventDefault()}},CrmTags.checkNames=function(e){for(var t=CrmTags.newTags.length,a=0;a<t;a++)if(CrmTags.newTags[a].toLowerCase()===e.toLowerCase())return!1;t=CrmTags.usedNames.length;for(a=0;a<t;a++)if(CrmTags.usedNames[a].toLowerCase()===e.toLowerCase())return!1;return!0},CrmTags.showSuccessMsgAndContructRows=function(e){for(var t=e.tags,a=!1,n=!1,i=!1,l=0,s={},r=t.length,o=$("#tableRow tbody"),c=0;c<r;c++)"symbols are not allowed"===t[c].message&&(i=!0),t[c].message.indexOf("tags created successfully")>-1?((s={}).details=CrmTags.processData(t[c].details),s.details.modulename=CrmTags.moduleName,s.addClass=!0,o.append(Handlebars.templates.manageTags(s)),l++):t[c].code.indexOf("LICENSE_LIMIT_EXCEEDED")>-1?(n=!0,a=!0):a=!0;if(a)i||renderingUtils.showCustomAlert(I18n.getMsg("crm.tags.add.unsuccessful"),"",!1),n&&$("#custom_alert_button").unbind("click").one("click",(function(){hideAnimatePopup("custom_alert_popup"),Utils.windowLocationReload()}));else{crmui.showMsgBand("success",I18n.getMsg("crm.tags.manage.page.added.successfully"),"4000","");var d=$(".tagline");d.is(":visible")||($("#blank_state").hide(),$(".tagline_blank").hide(),d.show(),$(".setupsearchicon").parent("div").show(),$("#customLinkFirstBtn").parent("div").show(),$("#tableRow").show())}var m=$("#usedTagCountLabel"),u=parseInt(m.text())+l;CrmTags.usedTagCount=u,m.text(u),CrmTags.bindorUnbindEvents("add"),CrmTags.scrollTable(),CrmTags.scrollToNewTag()},CrmTags.scrollToNewTag=function(){var e=$("#manageTagsBody").find(".indiTag").first().offset().top;$("#tableContent").animate({scrollTop:e},1e3),setTimeout((function(){$("#manageTagsBody .indiTag").removeClass("newTr")}),1e3)},CrmTags.bindorUnbindEvents=function(e){var t=parseInt(CrmTags.editionLimit),a=parseInt(CrmTags.usedTagCount),n=$("#customLinkFirstBtn");"add"===e||"show"===e?a>=t?n.addClass("disableTag").on("mouseover",(function(){crmui.showTooltip(I18n.getMsg("crm.tag.edition.limit.exceeded"),!1,"right",$(this))})).on("mouseout",(function(){crmui.hideTooltip()})).removeAttr("onclick"):n.hasClass("disableTag")&&(n.removeClass("disableTag").on("click",(function(){CrmTags.showPopup("addtagManagePop")})),n.off("mouseover").off("mouseout")):"delete"===e&&a<t&&(n.removeClass("disableTag").on("click",(function(){CrmTags.showPopup("addtagManagePop")})),n.off("mouseover").off("mouseout"))},CrmTags.updateTagRow=function(e,t){var a=e.tags;if(a[0].message.indexOf("tags updated successfully")>-1||a[0].message.indexOf("tags merged successfully")>-1){var n=a[0].details;n.name=void 0!==t?CrmTags.updatedName:CrmTags.mergeTagMainName,n=CrmTags.processData(n);var i=null;void 0===t?(i=$("tr#"+CrmTags.mergedTagid),CrmTags.usedNames.contains(CrmTags.mergeTagOldName)&&CrmTags.usedNames.splice(CrmTags.usedNames.indexOf(CrmTags.mergeTagOldName),1)):(i=$(t).closest("tr"),CrmTags.usedNames.contains(CrmTags.mergeTagOldName)&&CrmTags.usedNames.splice(CrmTags.usedNames.indexOf(CrmTags.mergeTagOldName),1)),i.attr("id",n.id),i.find(".manageTagAnchor").text(n.name).show(),i.find("input").hide();var l=i.find("div.modifiedUser"),s=l.find("img");s&&s.length>0?i.find("img").attr("src",n.modified_by.img_src):($("<img>",{src:n.modified_by.img_src}).appendTo(l),l.find("i").remove());var r=i.find("td.moduleName");r.find("span.modtime").text(n.modified_time),r.find("div.toolTip span").text(n.modified_by.tooltip),i.find(".editInfo").slideUp(),i.find(".tagEditSave").removeClass("dIB").addClass("dN").attr("data-pos","0"),i.find(".tagEditDel").removeClass("dN"),a[0].message.indexOf("tags updated successfully")>-1&&crmui.showMsgBand("success",I18n.getMsg("crm.tags.manage.page.updated.successfully"),"4000","")}else renderingUtils.showCustomAlert(I18n.getMsg("crm.unable.to.process.request"),I18n.getMsg("crm.label.small.tags"),!1)},CrmTags.closeThis=function(e){var t=$(e).closest("span");CrmTags.newTags.contains(t.text())&&CrmTags.newTags.splice(CrmTags.newTags.indexOf(t.text()),1),t.remove()},CrmTags.mergeTag=function(){var e=[],t={},a={},n=CrmTags.currentModule;t.conflict_id=CrmTags.mergedTagid,e.push(t),a.tags=e;var i=new crmRequestPool,l="/crm/v2/settings/tags/"+CrmTags.mergeTagid+"/actions/merge",s={"X-ZCSRF-TOKEN":csrfParamName+"="+csrfToken};i.initiate({action:l,type:"post",headers:s,data:JSON.stringify(a),success:function(e){if("object"==typeof e)if(e.tags[0].status.indexOf("success")>-1){$("#"+CrmTags.mergeTagid).remove(),CrmTags.updateTagRow(e,void 0),crmui.hidePopup("MergeOption"),crmui.showMsgBand("success",I18n.getMsg("crm.tags.merged.successfully"),"4000","");var t=$("#usedTagCountLabel"),a=parseInt(t.text())-1;CrmTags.usedTagCount=a,t.text(a),CrmTags.bindorUnbindEvents("delete"),Crm.trackSpotLightAction("Tagging - Manage Tags Merged",{Module:CrmTags.currentModule}),store.unloadAll("tag")}else e.tags[0].code.indexOf("INVALID_DATA")>-1?(crmui.hidePopup("deleteOption"),renderingUtils.showCustomAlert(I18n.getMsg("crm.unable.to.process.request"),I18n.getMsg("crm.label.small.tags"),!1),CrmTags.init()):e.tags[0].code.indexOf("NO_PERMISSION")>-1&&(crmui.hidePopup("deleteOption"),renderingUtils.displayPermissionDenied(),freezeBackground());CrmTags.init(),crmTab.deleteFromCache(n)},error:function(){renderingUtils.showCustomAlert(I18n.getMsg("crm.unable.to.process.request"),I18n.getMsg("crm.label.small.tags"),!1),CrmTags.init()}})},CrmTags.doDelete=function(){var e=new crmRequestPool,t="/crm/v2/settings/tags/"+CrmTags.deleteTagId,a={"X-ZCSRF-TOKEN":csrfParamName+"="+csrfToken};e.initiate({action:t,type:"delete",headers:a,success:function(e){var t=e.tags[0];if(crmui.hidePopup("deleteOption"),t.status.indexOf("success")>-1){var a=$("tr#"+CrmTags.deleteTagId);CrmTags.usedNames.splice(CrmTags.usedNames.indexOf(a.find("td .manageTagAnchor").text()),1),a.hide("slow").remove();var n=$("#usedTagCountLabel"),i=parseInt(n.text())-1;CrmTags.usedTagCount=i,n.text(i),CrmTags.bindorUnbindEvents("delete"),crmui.showMsgBand("success",I18n.getMsg("crm.tags.deleted.successfully"),"2500","");var l=$(".tagline");l.is(":visible")&&"0"===i&&($("#blank_state").show(),$(".tagline_blank").show(),l.hide(),$(".setupsearchicon").parent("div").hide(),$("#customLinkFirstBtn").parent("div").hide(),tableRowObj.hide()),crmTab.deleteFromCache(CrmTags.currentModule)}else crmui.showMsgBand("error",I18n.getMsg("crm.tags.delete.unsuccessful"),"4000","");CrmTags.init(),Crm.trackSpotLightAction("Tagging - Manage Tags Deleted",{Module:CrmTags.currentModule}),store.unloadAll("tag")},error:function(e){CrmTags.deleteTagId="",crmui.hidePopup("deleteOption"),e&&e.responseJSON&&e.responseJSON.message&&e.responseJSON.message.indexOf("permission denied")>-1?(renderingUtils.displayPermissionDenied(e),freezeBackground()):renderingUtils.showCustomAlert(I18n.getMsg("crm.unable.to.process.request"),I18n.getMsg("crm.label.small.tags"),!1),CrmTags.init()}})},CrmTags.processData=function(e){var t=Crm.getUserDetailsMap();if(e.modified_by){var a=t[e.modified_by.id];a&&(e.modified_by.img_src=a.avatar)}CrmTags.usedNames.contains(e.name)||CrmTags.usedNames.push(e.name);var n,i,l,s,r=null,o=null,c=null;return(c=(o=e.modified_time).substring(o.length-6).split(":"))[0].substring(0,1),c[1]=parseInt(c[1]),n=(r=new Date(o.substr(0,o.length-6))).getMonth(),i=r.getDate(),l=r.getFullYear(),s=Utils.getTimeStringWithAmPm(r),e.modified_time=I18n.getMsg(CrmTags.month[n])+" "+i+" , "+l,"HH:mm"!==Crm.userDetails.TIME_FORMAT?e.modified_by.tooltip=I18n.getMsg("crm.label.tags.modified.tooltip2",[e.modified_by.name,I18n.getMsg(CrmTags.shortMonth[n]),i,l,s.hrs,s.mins,s.meridiem]):e.modified_by.tooltip=I18n.getMsg("crm.label.tags.modified.tooltip1",[e.modified_by.name,I18n.getMsg(CrmTags.shortMonth[n]),i,l,s.hrs,s.mins]),e},CrmTags.processUserInfo=function(e){for(var t=Crm.getUserDetailsMap(),a=null,n=null,i=null,l=null,s=null,r=null,o=null,c=e.length,d=0;d<c;d++){var m=e[d];if(m.modified_by){var u=t[m.modified_by.id];u&&(m.modified_by.img_src=u.avatar)}CrmTags.usedNames.push(m.name),m.tag_name=m.name,m.name=$ESAPI.encoder().encodeForHTML(m.name),a=new Date(m.modified_time),(o=(r=m.modified_time).substring(r.length-6).split(":"))[0].substring(0,1),o[1]=parseInt(o[1]),n=(a=new Date(r.substr(0,r.length-6))).getMonth(),i=a.getDate(),l=a.getFullYear(),s=Utils.getTimeStringWithAmPm(a),m.modified_time=I18n.getMsg(CrmTags.month[n])+" "+i+" , "+l,m.modified_by&&("HH:mm"!==Crm.userDetails.TIME_FORMAT?m.modified_by.tooltip=I18n.getMsg("crm.label.tags.modified.tooltip2",[m.modified_by.name,I18n.getMsg(CrmTags.shortMonth[n]),i,l,s.hrs,s.mins,s.meridiem.toUpperCase()]):m.modified_by.tooltip=I18n.getMsg("crm.label.tags.modified.tooltip1",[m.modified_by.name,I18n.getMsg(CrmTags.shortMonth[n]),i,l,s.hrs,s.mins]))}},CrmTags.processSelector=function(e){var t="wfAddTags"===e?"wfAddTagsDiv":"tagConfig";"bluePrint_AddtagSelect"===e?t="bluePrintAddTagsDiv":"detailViewSelect"===e&&(t="tagui");var a=I18n.getMsg("crm.tags.separate.info");"tagui"===t||"bluePrintAddTagsDiv"===t||"wfAddTagsDiv"===t?a=I18n.getMsg("crm.label.listView.add.tags.info"):"importTagFieldId"===e&&(a="");var n=$("#"+e),i=$("#"+t),l=n,s=Crm.userDetails.RTL_ENABLED?"rtl":"ltr";n.select2({dir:s,tags:!0,tokenSeparators:[","],placeholder:a,closeOnSelect:!1,createTag:function(e){var t=$(".select2-results__options");t.show();var a=$.trim(e.term);return""===a?null:(a&&(a=(a=a.substr(0,25)).replace("<",""),l.find("input.select2-search__field").val(a)),","===a?($("input.select2-search__field").val("").focus,t.hide(),null):CrmTags.checkExistingNames(a,!1,!1,!0)?{id:a,text:$ESAPI.encoder().encodeForHTML(a),tagName:a,newTag:!0}:(t.find("span.f11").hide(),null))},templateResult:function(e){return e.newTag?"<span class='color2 mR5 f11 proxmial robotoRegular'>"+I18n.getMsg("crm.label.tag.new")+"</span><span id='select2NewTagSpan'>"+e.text+"</span>":(e.tagName=e.text,$ESAPI.encoder().encodeForHTML(e.text))},escapeMarkup:function(e){return e}}).on("select2:open",(function(){$("#maindiv").css({overflow:"hidden"})})).on("select2:close",(function(){var e=$("#maindiv");e.css({overflow:"auto"}),e.off("scroll")})).on("select2:select",(function(a){var n=$("#"+t);if("tagui"===t||"wfAddTagsDiv"===t){var i=a.params.data.tagName;if(i&&i.length>25)return n.find('li.select2-selection__choice[title="'+i+'"]').find("span").trigger("click"),setTimeout((function(){n.find(".select2-search__field").val(i)}),0),!1;"tagui"===t&&($("#tagInputButtonsDiv").find(".saveButton").removeAttr("disabled").addClass("cP").removeClass("cA").css("opacity","1"),detailView.changeMarginForSelect2()),l.select2("close"),l.select2("open")}if("bluePrint_AddtagSelect"===e&&($("#bluePrintTagActionSave").removeAttr("disabled"),l.select2("close"),l.select2("open")),a.params.data.newTag&&!CrmTags.clientJSON.newlyAdded.contains(a.params.data.id)?CrmTags.clientJSON.newlyAdded.push(a.params.data.id):a.params.data.newTag||CrmTags.clientJSON.selectedIds.contains(a.params.data.id)||CrmTags.clientJSON.selectedIds.push(a.params.data.id),CrmTags.checkTagEditionAndRecordLimitCount(a.params.data.newTag,e,CrmTags.clientJSON.tagUsedCount,!1,!1,"tagui"!==t&&"bluePrintAddTagsDiv"!==t))CrmTags.checkCharacter(a.params.data.tagName)?(delete CrmTags.clientJSON.inputVal,n.find(".select2-search__field").val("").focus()):(CrmTags.clientJSON.inputVal1=CrmTags.clientJSON.inputVal,CrmTags.find(n.find("li.select2-selection__choice"),a.params.data.text).find("span").trigger("click"),CrmTags.clientJSON.inputVal=CrmTags.clientJSON.inputVal1,a.params.data.newTag&&setTimeout((function(){n.find(".select2-search__field").val(CrmTags.clientJSON.inputVal)}),0),n.find(".select2-search__field").focus());else if(CrmTags.clientJSON.inputVal1=CrmTags.clientJSON.inputVal,"tagui"!==t&&"bluePrintAddTagsDiv"!==t&&"tagConfig"!==t||!CrmTags.clientJSON.alertType)null!=CrmTags.find(n.find("li.select2-selection__choice"),a.params.data.text)&&(CrmTags.find(n.find("li.select2-selection__choice"),a.params.data.text).find("span").trigger("click"),CrmTags.clientJSON.inputVal=CrmTags.clientJSON.inputVal1,a.params.data.newTag&&setTimeout((function(){n.find(".select2-search__field").val(CrmTags.clientJSON.inputVal)}),200),n.find(".select2-search__field").focus());else if(setTimeout((function(){var e,n=$("#"+t);e="tagConfig"===t?$("li.select2-selection__choice"):n.find("li.select2-selection__choice"),CrmTags.find(e,a.params.data.text).find("span").trigger("click")}),150),"editionCount"===CrmTags.clientJSON.alertType)var s=setTimeout((function(){n.find(".select2-search__field").val(CrmTags.clientJSON.inputVal1),renderingUtils.showCustomAlert(I18n.getMsg("crm.tag.edition.limit.exceeded"),"",!1),$("#custom_alert_button").unbind("click").one("click",(function(){var e=$("#"+t);hideAnimatePopup("custom_alert_popup"),e.find(".select2-search__field").focus()})),clearTimeout(s)}),250);else s=setTimeout((function(){n.find(".select2-search__field").val(CrmTags.clientJSON.inputVal1),renderingUtils.showCustomAlert(I18n.getMsg("crm.tags.records.limit.reached",CrmTags.clientJSON.alertType.split("::")[1]),"",!1),$("#custom_alert_button").unbind("click").one("click",(function(){var e=$("#"+t);hideAnimatePopup("custom_alert_popup"),e.find(".select2-search__field").focus()})),clearTimeout(s)}),250);CrmTags.focusOutEvent(null,r),"wfAddTags"===e&&wfTags.checkTagsRemove("AddTags",l,!1)})).on("select2:unselect",(function(a){"tagui"===t&&($("#tagInputButtonsDiv").find(".saveButton").removeAttr("disabled").addClass("cP").removeClass("cA").css("opacity","1"),detailView.changeMarginForSelect2()),CrmTags.clientJSON.inputVal="","bluePrint_AddtagSelect"===e&&($("#bluePrintTagActionSave").removeAttr("disabled"),l.next("span.select2-container").find("input.select2-search__field").removeAttr("placeHolder")),"wfAddTags"===e&&wfTags.checkTagsRemove("AddTags",l,!0),CrmTags.clientJSON.newlyAdded.contains(a.params.data.tagName)?(CrmTags.clientJSON.newlyAdded.splice(CrmTags.clientJSON.newlyAdded.indexOf(a.params.data.tagName),1),CrmTags.clientJSON.inputVal=a.params.data.tagName):CrmTags.clientJSON.selectedIds.contains(a.params.data.id)&&CrmTags.clientJSON.selectedIds.splice(CrmTags.clientJSON.selectedIds.indexOf(a.params.data.id),1),l.select2("close"),l.select2("open")}));var r=l.next("span.select2-container").find("input.select2-search__field");"bluePrint_AddtagSelect"===e&&r.removeAttr("placeHolder"),r.attr({onkeydown:"CrmTags.checkTagInputVal(event,'"+t+"',false)",onkeyup:"CrmTags.onkeyupevent('"+t+"')",onfocusout:"CrmTags.focusOutEvent(event,this)",maxlength:26}),r.focusin((function(){CrmTags.clientJSON.inputVal=""})),r.addClass("mL5"),"tagConfig"===t&&r.css("width","190px"),i.find("span.select2").css("width","100px")},CrmTags.focusOutEvent=function(e,t){$(t).val(CrmTags.clientJSON.inputVal)},CrmTags.onkeyupevent=function(e){var t=$("#"+e).find("input.select2-search__field").val();CrmTags.clientJSON.inputVal=t},CrmTags.checkTagInputVal=function(e,t,a){var n=$(".detailView_tag_Select .select2-selection__rendered .select2-selection__choice").length,i=null;i=a?$(t).val():$("#"+t).find("input.select2-search__field").val();var l=e.keyCode;if((188===l&&"<"===e.key||190===l&&">"===e.key)&&e.preventDefault(),i||188!==l||e.preventDefault(),!i&&13===l&&n<=0)return e.preventDefault(),!1;if(a)188===l&&e.preventDefault();else{if(i)switch(l){case 188:CrmTags.checkCharacter(i)||e.preventDefault(),CrmTags.checkExistingNames(i,!1,!1,!0)||e.preventDefault();break;case 8:case 39:case 37:break;default:i.length>=25&&e.preventDefault()}"tagui"===t&&($("#tagInputButtonsDiv").find(".saveButton").removeAttr("disabled").addClass("cP").removeClass("cA").css("opacity","1"),13===l&&""===i&&($("#detailViewSelect").select2("close"),detailView.saveTagtoRecord(),CrmTags.clientJSON.inputVal=""))}},CrmTags.getTagValue=function(e){var t="";if(e)for(var a=e,n=a.length,i=0;i<n;i++)""!==a[i]&&(t+=0!==i&&""!==t?","+a[i]:a[i]);return t},CrmTags.getTagValue_new=function(e,t){var a="";if(e)for(var n=e,i=n.length,l=0;l<i;l++)""!==n[l]&&void 0!==t[n[l].toLowerCase()]&&(a+=0!==l&&""!==a?","+t[n[l].toLowerCase()]:t[n[l].toLowerCase()]);return a},CrmTags.checkAndPopulateNewlyAdded=function(e){var t=$("#"+e).find(".select2-search__field"),a=t.val();if(t&&""!==a){if(-1!==(a=a.trim()).indexOf(","))return renderingUtils.showCustomAlert(I18n.getMsg("crm.tag.name.invalid.char",n),"",!1),!1;if(a.length<1)return renderingUtils.showCustomAlert(I18n.getMsg("crm.tag.invalid.tag.name",n),"",!1),!1;if(!CrmTags.checkCharacter(a))return!1;var n=0;customViewObject.tagRecordLimit?n=customViewObject.tagRecordLimit:CrmTags.clientJSON.recordTagCount&&(n=parseInt(CrmTags.clientJSON.recordTagCount));var i=0;if(CrmTags.clientJSON.selectedIds&&(i=CrmTags.clientJSON.selectedIds.length),CrmTags.clientJSON.newlyAdded&&(i+=CrmTags.clientJSON.newlyAdded.length),i>=n)return renderingUtils.showCustomAlert(I18n.getMsg("crm.tags.records.limit.reached",n),"",!1),!1;if(CrmTags.checkExistingNames(a,!1,!1,!0,!0)){var l=0;CrmTags.clientJSON.names?l=CrmTags.clientJSON.names.length:CrmTags.clientJSON.tagUsedCount&&(l=parseInt(CrmTags.clientJSON.tagUsedCount)),CrmTags.clientJSON.newlyAdded&&(l+=CrmTags.clientJSON.newlyAdded.length);var s=0;if(customViewObject.tagLimit?s=customViewObject.tagLimit:CrmTags.clientJSON.editionCount&&(s=parseInt(CrmTags.clientJSON.editionCount)),l>=s)return renderingUtils.showCustomAlert(I18n.getMsg("crm.tag.edition.limit.exceeded"),"",!1),!1;CrmTags.clientJSON.newlyAdded.push(a)}else{var r=CrmTags.clientJSON.existingNameVsIdMap[a.toLowerCase()];void 0!==r&&(CrmTags.clientJSON.selectedIds.contains(r)||CrmTags.clientJSON.selectedIds.push(r))}}return!0},CrmTags.checkAndUpdateTags=function(e,t,a){var n=e?$("#tagsTableRow"):$("#tagConfig");if(CrmTags.clientJSON){if(!CrmTags.checkAndPopulateNewlyAdded(e?"tagsTableRow":"tagConfig"))return!1;var i=0;if(CrmTags.clientJSON.newlyAdded){var l=CrmTags.getTagValue(CrmTags.clientJSON.newlyAdded);""!==l&&$("<input>",{type:"hidden",id:"newTags",name:"newTags",val:l}).appendTo(n),i=CrmTags.clientJSON.newlyAdded.length}if(CrmTags.clientJSON.selectedIds){var s=CrmTags.getTagValue_new(CrmTags.clientJSON.selectedIds,CrmTags.clientJSON.existingNameVsIdMap);""!==s&&$("<input>",{type:"hidden",id:"tagmodref",name:"tagModRef",val:s}).appendTo(n),i+=CrmTags.clientJSON.selectedIds.length}return a?Crm.trackSpotLightAction("Tagging - Import Add Tags",{Module:t,Count:i}):Crm.trackSpotLightAction("Tagging - WebForms Add Tags",{Module:CrmTags.clientJSON.webformModule,Count:i}),delete CrmTags.clientJSON,!0}return!0},CrmTags.getRefIdJSONArray=function(e){var t=[],a=CrmTags.clientJSON.value,n=0,i=null,l=[];if(null!==e){var s=CrmTags.clientJSON.nameVsId;n=e.length;for(var r=0;r<n;r++)null!==s[i=e[r]&&null==e[r].id?e[r].toLowerCase():e[r].name.toLowerCase()]&&t.push(s[i])}n=a.length;for(r=0;r<n;r++)i=a[r],t.contains(i)&&l.push(i);n=t.length;for(r=0;r<n;r++)i=t[r],l.contains(i)||l.push(i);return l},CrmTags.getDBFormatValue=function(e){var t="";if(e){t="||";for(var a=e.length,n=0;n<a;n++)t+=e[n]+"||"}return t},CrmTags.scrollTable=function(){var e=renderingUtils.windowHeight,t=$("#tableContent"),a=t.offset(),n=$(".createLayout"),i=n.offset().top,l=$("#wmstoolbar"),s=l.length?l.outerHeight():28,r=e-a.top;t.css("max-height",+r-s+"px"),n.css({"max-height":e-i-s,"box-sizing":"border-box"})},CrmTags.checkPermissions=function(e){var t="Crm_Implied_Tags_";return t+="Deals"===e?"Potentials":e,!Crm.userDetails.permissions||void 0!==Crm.userDetails.permissions[t]&&(void 0===Crm.userDetails.permissions[t]||!1!==Crm.userDetails.permissions[t])},CrmTags.checkCharacter=function(e,t){if(null!==e&&-1===e.indexOf(",")&&-1===e.indexOf(">")&&-1===e.indexOf("<")){for(var a=["`","~","!","@","#","$","%","^","&","*","(",")","-","_","=","+","[","]","{","}","|","\\",'"',"'",":",";","?","/",",","."],n=e.length,i=0,l=a.length,s=0;s<l;s++)e.indexOf(a[s])>=0&&(i+=e.split(a[s]).length-1);return!(n>0&&i>=n)||(setTimeout((function(){!t&&renderingUtils.showAlertMsg(I18n.getMsg("crm.tag.splChar"))}),200),!1)}return!t&&renderingUtils.showAlertMsg(I18n.getMsg("crm.tag.splChar")),!1},CrmTags.checkExistingNames=function(e,t,a,n,i){var l=[];CrmTags.clientJSON.nameVsId?l=Object.keys(CrmTags.clientJSON.nameVsId):CrmTags.clientJSON.names&&(l=CrmTags.clientJSON.names);if((!a||n)&&e&&l){e=e.toLowerCase();for(var s=l.length,r=0;r<s;r++)if(l[r]&&l[r]===e)return t&&renderingUtils.showCustomAlert(I18n.getMsg("crm.label.tag.exists"),"",!1),!1}if(l=CrmTags.clientJSON.newlyAdded,(a||n)&&e&&l){e=e.toLowerCase();for(s=l.length,r=0;r<s;r++)if(l[r].toLowerCase()===e)return(t||i)&&renderingUtils.showCustomAlert(I18n.getMsg("crm.label.tag.exists"),"",!1),!1}return!0},CrmTags.checkTagEditionAndRecordLimitCount=function(e,t,a,n,i,l){if(n){s=0;if(CrmTags.clientJSON.newlyAdded&&(s+=CrmTags.clientJSON.newlyAdded.length),CrmTags.clientJSON.selectedIds&&(s+=CrmTags.clientJSON.selectedIds.length),s>=CrmTags.clientJSON.recordTagCount)return setTimeout((function(){renderingUtils.showCustomAlert(I18n.getMsg("crm.tags.records.limit.reached",CrmTags.clientJSON.recordTagCount),"",!1)}),200),!1;if(e){a=0;if(CrmTags.clientJSON.existingTags&&(a+=Object.keys(CrmTags.clientJSON.existingTags).length),CrmTags.clientJSON.newlyAdded&&(a+=CrmTags.clientJSON.newlyAdded.length),a>=CrmTags.clientJSON.limit)return setTimeout((function(){renderingUtils.showCustomAlert(I18n.getMsg("crm.tag.edition.limit.exceeded"),"",!1)}),200),!1}return!0}a=parseInt(a);var s=0,r=0;customViewObject.tagRecordLimit?r=customViewObject.tagRecordLimit:CrmTags.clientJSON.recordTagCount&&(r=parseInt(CrmTags.clientJSON.recordTagCount));var o=$("#"+t).val();if(o&&(s=o.length),s>r||i&&s>=r)return"importTagFieldId"==t&&s>=r?CrmTags.clientJSON.alertType="recordCount::"+r:l?setTimeout((function(){renderingUtils.showCustomAlert(I18n.getMsg("crm.tags.records.limit.reached",r),"",!1)}),200):CrmTags.clientJSON.alertType="recordCount::"+r,!1;var c=void 0!==t&&"addTagsSel"!=t&&"tagImport"!==t&&"wfAddTags"!==t&&"tagWebform"!==t&&"bluePrint_AddtagSelect"!==t&&"importTagFieldId"!=t&&"detailViewSelect"!==t;CrmTags.clientJSON.names&&c?a+=CrmTags.clientJSON.names.length:CrmTags.clientJSON.newlyAdded&&(a+=CrmTags.clientJSON.newlyAdded.length);var d=0;return customViewObject.tagLimit?d=customViewObject.tagLimit:CrmTags.clientJSON.editionCount&&(d=parseInt(CrmTags.clientJSON.editionCount)),!(c&&a>=d||!c&&a>d)||!e||(l?setTimeout((function(){renderingUtils.showCustomAlert(I18n.getMsg("crm.tag.edition.limit.exceeded"),"",!1)}),200):CrmTags.clientJSON.alertType="editionCount",!1)},CrmTags.renderTagUtilityDiv=function(){var e=$("<div></div>",{id:"tagPopups"});return e.html(Handlebars.templates.tagsPopUpUtility()),$("div#show").append(e),e},CrmTags.doListViewOperations=function(){var e=$("#maximumReach");(!e||!e.length>0)&&CrmTags.renderTagUtilityDiv(),customViewObject.isTagFieldVisible?"Activities"===customViewObject.module&&crmListView.arrangeTagActivityFilters():($("#manageTagOp").remove(),$("#manageTagsLink").remove()),customViewObject.isScrollNeeded&&!0===customViewObject.isScrollNeeded&&(customViewObject.shownTagFilter&&setTimeout((function(){$("#"+customViewObject.shownTagFilter).show(),$("#activityRelTo").show()}),50),$("#lv_filter_scroll").animate({scrollTop:0},10))},CrmTags.manageTagsRendering=function(e,t){CrmTags.usedNames=[],e.info.loadSelect="Activities"===t,e.info.moduleName=moduleRecordMapping[CrmTags.currentModule].plural_label,e.info.currentModule=CrmTags.currentModule,CrmTags.processUserInfo(e.tags);var a=e.info;CrmTags.editionLimit=a.allowed_count,CrmTags.usedTagCount=a.count,$("#show").html(Handlebars.templates.manageTags(e));var n=$("#maximumReach");if(!n||!n.length>0){var i=$("<div></div>",{id:"tagPopups"});i.html(Handlebars.templates.tagsPopUpUtility()),$("div#show").append(i)}if($("#tagmoduleList").select2({minimumResultsForSearch:-1}),CrmTags.scrollTable(),CrmTags.bindorUnbindEvents("show"),Crm.userDetails.ISROMODE){var l=$("#customLinkFirstBtn");l.css("cursor","not-allowed"),l.removeAttr("onclick")}},CrmTags.getCommaSeparatedValue=function(e){for(var t="",a=e.length,n=0;n<a;n++)t+=e[n],n<e.length-1&&(t+=",");return t},CrmTags.populateTagsObjectsForWorkFlow=function(e,t,a){CrmTags.clientJSON={},CrmTags.clientJSON.newlyAdded=[],CrmTags.clientJSON.selectedIds=[],CrmTags.clientJSON.names=[],CrmTags.clientJSON.tagIds=[],CrmTags.clientJSON.existingTags={},CrmTags.clientJSON.existingNameVsIdMap={},CrmTags.clientJSON.suffix="_1",CrmTags.clientJSON.permission=!0,CrmTags.clientJSON.recordTagCount=t,CrmTags.clientJSON.editionCount=a,CrmTags.clientJSON.tagUsedCount=e,CrmTags.clientJSON.tagCreatedCount=0,CrmTags.clientJSON.existingNames=[]},CrmTags.getTagNames=function(e){var t=CrmTags.clientJSON.existingNames,a="";if(void 0===t||0===t.length)return a;for(var n=e.length,i=0;i<n;i++)t.contains(e[i])&&(a+=e[i],i<n-1&&(a+=","));return a},CrmTags.checkAndChangeMouseEvents=function(e){var t=isSandboxAcc&&"true"==isSandboxAcc;(Crm.userDetails.ISROMODE||!CrmTags.clientJSON.permission||t)&&(t&&e.attr({onmouseover:"crmui.toolTip_show(this, 'left','"+I18n.getMsg("crm.tags.sandbox.not.supported")+"')",onmouseout:"crmui.toolTip_hide()"}),CrmTags.clientJSON.permission||CrmTags.clientJSON.isWaitingForApproval||e.attr({onmouseover:"crmui.toolTip_show(this, 'left','"+I18n.getMsg("crm.tags.detailview.create.no.permission.msg")+"')",onmouseout:"crmui.toolTip_hide()"}),CrmTags.clientJSON.isInReview&&!CrmTags.clientJSON.isWaitingForApproval&&e.attr({onmouseover:"crmui.toolTip_show(this, 'left','"+I18n.getMsg("crm.reviewprocess.detailview.create.no.permission.msg")+"')",onmouseout:"crmui.toolTip_hide()"}),Crm.userDetails.ISROMODE?e.find("a").removeAttr("onclick").css("cursor","not-allowed"):e.find("a").removeAttr("onclick"))},CrmTags.getTagsArray=function(e){if(e){for(var t=CrmTags.clientJSON.value,a=[],n=t.length,i=0;i<n;i++)null===t[i]||""===t[i]||a.contains(t[i])||a.push(t[i]);return a}},CrmTags.unbindSelectEvent=function(e){var t=$("#"+e);return t.off("select2:select").off("select2:unselect").off("paste"),t.empty(),t},CrmTags.populateOptions=function(e,t,a){for(var n={},i="",l=[],s=a.length,r=CrmTags.clientJSON.existingTags,o=0;o<s;o++){if(null!==r[i=a[o]])$("<option></option>",{text:r[i],value:r[i],id:i}).appendTo(t).attr("selected","selected"),CrmTags.clientJSON.selectedIds.push(r[i]),l.push(i)}s=e.length;for(o=0;o<s;o++)i=(n=e[o]).id,l.contains(i)||$("<option></option>",{text:n.name,value:r[i],id:i}).appendTo(t)},CrmTags.processTagValueAndGetArray=function(e,t){e=CrmTags.getTagsArray(!0);for(var a=[],n={},i=[],l=Crm.jsonSelectValues[t].TAGMODULEREFID,s=l.length,r=0;r<s;r++)i.push(l[r].id);for(var o=e.length,c=0;c<o;c++)n=e[c],i.contains(n)&&a.push(n);return CrmTags.clientJSON.value=a,a},CrmTags.getPostDataForTagsCreation=function(){for(var e=[],t={},a=CrmTags.clientJSON.newlyAdded.length,n=0;n<a;n++)null!==CrmTags.clientJSON.newlyAdded[n]&&CrmTags.clientJSON.newlyAdded[n].length>0&&((t={}).name=CrmTags.clientJSON.newlyAdded[n],e.push(t));var i={};return i.tags=e,JSON.stringify(i)},CrmTags.populateTagsObjectsAfterCreation=function(e,t){for(var a=e.tags,n=a.length,i=null,l=null,s=0;s<n;s++)if(a[s].message.indexOf("tags created successfully")>-1){var r=a[s].details;i=r.name,l=r.id,CrmTags.clientJSON.names.contains(i.toLowerCase())||(CrmTags.clientJSON.names.push(i.toLowerCase()),CrmTags.clientJSON.existingTags[l]=i,CrmTags.clientJSON.existingNameVsIdMap[i.toLowerCase()]=l,CrmTags.clientJSON.selectedIds.push(i),CrmTags.clientJSON.existingNames.push(i),t&&CrmTags.clientJSON.tagIds.push(l))}if(CrmTags.isOrchestration){var o=$L("crm-orchestration-builder").e[0].component;Crm.trackSpotLightAction("Tagging - Workflow Tags Create",{Module:o.currentStateData.module,Count:n})}else t?Crm.trackSpotLightAction("Tagging - Workflow Tags Create",{Module:module,Count:n}):Crm.trackSpotLightAction("Tagging - Blueprint Tags Create",{Module:ProcessBuilder.Transition.Module,Count:n})},CrmTags.getTagLinkUrl=function(e,t){var a={};e.tag_name=e.tag_name?e.tag_name:e.name,a=CrmTags.tableObj?CrmTags.tableObj:{Leads:"CrmLeadDetails",Contacts:"CrmContactDetails",Accounts:"CrmAccount",Potentials:"CrmPotential",Deals:"CrmPotential",Quotes:"CrmQuote",Calls:"CrmActivity",Events:"CrmActivity",Tasks:"CrmActivity",Campaigns:"CrmCampaign",Cases:"CrmCase",PriceBooks:"CrmPriceBooks",Vendors:"CrmVendors",Products:"CrmProducts",Solutions:"CrmSolution",SalesOrders:"CrmSalesOrder",PurchaseOrders:"CrmPurchaseOrder",Invoices:"CrmInvoice",Services:"CrmServiceDetails",Appointments:"CrmAppointmentDetails"},Crm.isActivitySplitDone&&(a.Tasks="CrmTask",a.Calls="CrmCall",a.Events="CrmEvent");var n={field:{}};n.field.id="",n.field.api_name="Tag",n.comparator="equal",n.value=[{id:e.tagId,name:e.tag_name}];var i,l=t;return!t||"Tasks"!==t&&"Calls"!==t&&"Events"!==t||Crm.isActivitySplitDone||(n={group_operator:"AND",group:[n,{comparator:"equal",field:{api_name:"Activity_Type"},value:t}]},t="Activities"),"Deals"===l&&(t=l="Potentials"),"Meetings"===l&&(t=l="Events"),i=void 0!==moduleRecordMapping[t].custom_view&&void 0!==moduleRecordMapping[t].custom_view.id?moduleRecordMapping[t].custom_view.id:moduleRecordMapping[t].cvid,Lyte.Router.getURL({route:"crm.tab.module.custom-view.list",dynamicParams:[t,i],queryParams:{filters:JSON.stringify(n)}})},CrmTags.getSortedTagNamesArray=function(e){var t=[];if(e)for(var a=e.length,n=0;n<a;n++)t.push(e[n]);return t},CrmTags.validateSymbol=function(e){for(var t=!1,a=e.tags.length,n=0;n<a;n++)"symbols are not allowed"===e.tags[n].message&&(t=!0);t&&renderingUtils.showCustomAlert(I18n.getMsg("crm.tag.name.invalid.emoji"),"",!1)},CrmTags.validateSymbol=function(e){for(var t=!1,a=e.tags.length,n=0;n<a;n++)"symbols are not allowed"===e.tags[n].message&&(t=!0);t&&renderingUtils.showCustomAlert(I18n.getMsg("crm.tag.name.invalid.emoji"),"",!1)},CrmTags.find=function(e,t){for(var a=e.length,n=0;n<a;n++)if(e[n].getAttribute("title")==t)return $(e[n])},CrmTags.color_number=function(e){if(void 0!==e){if(null===e)return 0;if(!e.includes("#"))return 0;var t={"#F17574":"1","#F48435":"2","#E7A826":"3","#A8C026":"4","#63C57E":"5","#1DB9B4":"6","#57B1FD":"7","#879BFC":"8","#D297EE":"9","#FD87BD":"10","#969696":"11","#658BA8":"12","#B88562":"13",null:"0","#noFill":"0"};return t[e]?t[e]:0}},CrmTags.gettagname=function(e,t){var a=e.lastIndexOf("#");return-1===a&&"tagname"===t?e.replace("null",""):"tagname"===t?e.substring(0,a):e.substring(a)},CrmTags.tooltip_tagcc=function(e){if(void 0===e)return"";var t="";if(!(e.includes(",")||Array.isArray(e)))return e;for(var a,n=(a=Array.isArray(e)?e:e.split(",")).length,i=0;i<n;i++)-1!==a[i].lastIndexOf("#")&&(t=""===t?a[i].substring(0,a[i].lastIndexOf("#")):t+","+a[i].substring(0,a[i].lastIndexOf("#")));return t},CrmTags.gettagsbp=function(e,t,a,n,i){n=!0===n||"true"===n,store.unloadAll("tag"),store.findAll("tag",{module:e,fromPage:"view"}).then((function(l){for(var s=l.length,r={},o={},c={},d=[],m=[],u=[],p=[],g=0;g<s;g++){if(void 0!==(N=l[g].name)){var h=l[g].color_code,f=l[g].id,v={};v.name=N,v.color_code=h,v.id=f,d.push(v),o[f]=h,c[f]=N,r[N]=f,m.push(N)}}var C=0;-1!==t.indexOf(",")?C=(t=t.split(",")).length:void 0!==t&&"null"!==t&&t.length>0&&(C=1);for(g=0;g<C;g++){var T=null,N=c[T=1===C?t:t[g]],_=o[T];void 0!==N&&p.push({name:N,color_code:_,id:T})}var I=0;-1!==a.indexOf(",")?I=(a=a.split(",")).length:void 0!==a&&"null"!==a&&a.length>0&&(I=1);for(g=0;g<I;g++){T=null,_=o[T=1!==I?a[g]:a],N=c[T],T=a[g];void 0!==N&&u.push({name:N,color_code:_,id:T})}var b=l.$.meta.record_limit,E=l.$.meta.allowed_count;Lyte.Component.render("crm-tag-bp",{module:e,tagoptions:d,tagnames:m,selectedaddtag:u,selectedremovetag:p,recordLimit:b,moduleLimit:E,tagnamevstagid:r,isOverwrite:n,disable:n},i)}))},function(){var e=Handlebars.template;(Handlebars.templates=Handlebars.templates||{}).tagsPopUpUtility=e({compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l=null!=t?t:{},s=e.escapeExpression;return' <div id="addTagsDiv" class=\'newPopup w600 p0 newPopupStyleEle\' style="min-width:400px;display:none;"> <div class="fR pR pT20 pR40"> <i class="newPopupCloseIcon svgIcons ico-close-small2 cP op08 dIB" onClick=\'crmListView.handleTagOpEvent("cancel","add")\'></i></div> <div id="addTagSub" class="pp-header">'+s(a.getI18n.call(l,"crm.label.add.tags",{name:"getI18n",hash:{},data:i}))+'</div> <div class=\'pp-content t_pop_body pLR30 pB10 pT30\'> <div class="selected cchosen dIB vam t_tag_section w100per bsbb pT0 pB0"> <select multiple name=\'tagSel\' id="addTagsSel" class="chosen-select js-example-basic-multiple js-example-programmatic-multi" style="width: 350px;"></select> </div> <div class="pT20 dIB t_options"> <label class="newCustomchkbox-md vmiddle dIB fL"> <input type="checkbox" name="overWriteRecords"><span class="chkbxIcon"></span></label> <span class="dIB fL pL5 lh18">'+s(a.getI18n.call(l,"crm.tag.record.overwrite",{name:"getI18n",hash:{},data:i}))+'</span> </div> </div> <div class="popup-model-footer pR"> <div class="footer_tagline pA f12 mT7 top10" style="color:#a4a4a4;">'+s(a.getI18n.call(l,"crm.tags.separate.info",{name:"getI18n",hash:{},data:i}))+"</div> <input type='button' class='newgraybtn globalCancel' onClick='crmListView.handleTagOpEvent(\"cancel\",\"add\")' value='"+s(a.getI18n.call(l,"crm.button.cancel",{name:"getI18n",hash:{},data:i}))+"' > <input type='button' class='newSaveBtn globalSave mR1' onClick='crmListView.handleTagOpEvent(\"save\",\"add\")' value='"+s(a.getI18n.call(l,"crm.button.save",{name:"getI18n",hash:{},data:i}))+'\' id=\'addTagButton\' > </div> </div> <div id ="removeTagsDiv" class=\'newPopup w600 p0 newPopupStyleEle\' style="display:none;"> <div class="fR pR pT20 pR40"><i class="newPopupCloseIcon svgIcons ico-close-small2 cP op08 dIB" onClick=\'crmListView.handleTagOpEvent("cancel","remove")\'></i></div> <div id="" class="pp-header">'+s(a.getI18n.call(l,"crm.label.remove.tags",{name:"getI18n",hash:{},data:i}))+'</div> <div class="pp-content t_pop_body pLR30 pB10 pT30"> <div class="cchosen customSelectFrm dIB vam t_tag_section w100per bsbb newBradius"> <select multiple name=\'tagSel\' id="removeTagsSel" class="chosen-select" style="width: 275px;"></select> </div> <p class="pT20">'+s(a.getI18n.call(l,"crm.remove.tag.info",{name:"getI18n",hash:{},data:i}))+"</p> </div> <div class=\"popup-model-footer\"> <input type='button' class='newgraybtn' onClick='crmListView.handleTagOpEvent(\"cancel\",\"remove\")' value='"+s(a.getI18n.call(l,"crm.button.cancel",{name:"getI18n",hash:{},data:i}))+"' > <input type='button' class='redbtn mR1' onClick='crmListView.handleTagOpEvent(\"save\",\"remove\")' value='"+s(a.getI18n.call(l,"crm.button.remove",{name:"getI18n",hash:{},data:i}))+'\' id=\'removeTagButton\' > </div> </div> <div id="maximumReach" class=\'newPopup w600 p0\'> <div class="pA pR pT10 pR10" style="top:0;right:0;" ><i class="newPopupCloseIcon svgIcons ico-close-small2 cP op08 dIB" onclick="crmui.hidePopup(\'maximumReach\')"></i></div> <div class=\'pp-content reached_maximum aligncenter\'> <p id=\'firstMsg\' class="f14 pT5 pB5"></p> <p id=\'secondMsg\' class="f14 pT5 pB5"></p> <input type="submit" class="btn primarybtn mR0 mT10" value="'+s(a.getI18n.call(l,"crm.button.ok",{name:"getI18n",hash:{},data:i}))+'" onclick="crmui.hidePopup(\'maximumReach\')"> </div> </div>   <div class="newPopup w40per p0 newPopupStyleEle" id="addtagManagePop" style="height: auto; overflow: auto; max-height: 700px;"> <div class="fR pR pT20 pR40"><i class="newPopupCloseIcon svgIcons ico-close-small2 cP op08 dIB" onclick="CrmTags.handleManagePopup(\'cancel\')"></i></div> <div class="pp-header">'+s(a.getI18n.call(l,"crm.label.add.tags",{name:"getI18n",hash:{},data:i}))+'</div> <input type=\'hidden\' value=\'\'  id=\'addModule\'></input> <div class="pp-content" style="overflow:auto;padding:5px 40px 5px 30px !important;"> <div class="selected cchosen dIB vam addedTags newBoderStyle newBradius w100per bsbb focusEleFielEnable"> <label id=\'addedElements\' class="addedElements dN"></label> <input type="text" id=\'addTag\' class="addTag mt5 nobdr f12 pL5 pR5 h25 lght24" placeholder=\''+s(a.getI18n.call(l,"crm.label.enter.tag",{name:"getI18n",hash:{},data:i}))+'\' onkeydown="CrmTags.saveNewTags(event)" maxlength="25" onfocus="crmTemplate.applyFocusInputBox(this, event)" onblur="crmTemplate.applyFocusInputBox(this, event)"></input> </div> </div> <div id="createtabGroupFooter" class="pp-footer" style="padding:15px 40px 20px 30px;"> <div class="footer_tagline pA f12" style="color:#a4a4a4;">'+s(a.getI18n.call(l,"crm.tags.separate.info",{name:"getI18n",hash:{},data:i}))+'</div> <input data-zcqa="btn_tab_cancel" type="button" class="newgraybtn" name="Cancel" value=\''+s(a.getI18n.call(l,"crm.button.cancel",{name:"getI18n",hash:{},data:i}))+'\' onclick="CrmTags.handleManagePopup(\'cancel\')"> <input data-zcqa="btn_tab_save" type="submit" class="primarybtn" value=\''+s(a.getI18n.call(l,"crm.button.save",{name:"getI18n",hash:{},data:i}))+'\' onclick="CrmTags.handleManagePopup(\'save\')"> </div> </div> <div class="newPopup w40per p0" id="MergeOption" style="box-sizing:border-box; height:auto;"> <div class="p20 aligncenter dIB"> <div id="tagname"></div> <div class="dIB w100per pT25 pB25"><span>'+s(a.getI18n.call(l,"crm.label.tag.merge.confirm",{name:"getI18n",hash:{},data:i}))+'</span></div> <div class="dIB w100per mB15" id="options"> <span class="newgraybtn" onclick="CrmTags.handleCancel(\'MergeOption\')">'+s(a.getI18n.call(l,"crm.button.cancel",{name:"getI18n",hash:{},data:i}))+'</span> <span class="primarybtn fromDeletePopup" onclick="CrmTags.mergeTag()">'+s(a.getI18n.call(l,"crm.button.tag.merge.proceed",{name:"getI18n",hash:{},data:i}))+'</span> </div> </div> </div> <div class="newPopup w40per newPopupStyleEle" id="deleteOption" style="box-sizing:border-box; height:auto;"> <div class="p20 aligncenter dIB"> <div id="tagname"></div> <div class="dIB pT25 pB25 w100per" id=\'deleteInfo\'></div> <div class="dIB w100per" id="Doptions"> <span class="newgraybtn dIB" onclick="CrmTags.handleCancel(\'deleteOption\')">'+s(a.getI18n.call(l,"crm.button.cancel",{name:"getI18n",hash:{},data:i}))+"</span> <span class=\"redbtn fromDeletePopup dIB\" onclick='CrmTags.doDelete()'>"+s(a.getI18n.call(l,"crm.button.yes.delete",{name:"getI18n",hash:{},data:i}))+'</span> </div> </div> </div> <div class="newPopup ppTop p0" id="tagDelete" style="width:450px;z-index:1000;display:none;position:absolute;"> <div class="formBldPopHd" id="delfldhd">'+s(a.getI18n.call(l,"crm.tag.deletion.pop.heading",{name:"getI18n",hash:{},data:i}))+'</div> <div class="p30"> <span id="deleteInfo1" class="crm-font-regular fontSmooth f13 color_7 dIB"></span> <div id=\'deleteDetails\' class="mT20 bdre5e5e5 bgf7f7f7 p15" style="overflow:auto;height:200px;"> <div id="wfTrighead" style="display:none;" class="denyHead crm-font-regular">'+s(a.getI18n.call(l,"crm.workflow.rules",{name:"getI18n",hash:{},data:i}))+" ( "+s(a.getI18n.call(l,"crm.workflow.rule.rule.trigger",{name:"getI18n",hash:{},data:i}))+' )</div> <div id="wfTrigdiv" class="ncff" style="display:none;"></div> <div id="wfCrihead" style="display:none;" class="denyHead crm-font-regular">'+s(a.getI18n.call(l,"crm.workflow.rules",{name:"getI18n",hash:{},data:i}))+" ( "+s(a.getI18n.call(l,"crm.workflow.rule.criteria",{name:"getI18n",hash:{},data:i}))+' )</div> <div id="wfCridiv" class="ncff" style="display:none;"></div> <div id="wfFUhead" style="display:none;" class="denyHead crm-font-regular">'+s(a.getI18n.call(l,"crm.workflow.field.update",{name:"getI18n",hash:{},data:i}))+'</div> <div id="wfFUdiv" class="ncff" style="display:none;"></div> <div id="wftagActionhead" style="display:none;" class="denyHead crm-font-regular">'+s(a.getI18n.call(l,"crm.tag.deletion.pop.tag.action.content",{name:"getI18n",hash:{},data:i}))+'</div> <div id="wftagActiondiv" class="ncff" style="display:none;"></div> <div id="cvhead" style="display:none;" class="denyHead crm-font-regular" >'+s(a.getI18n.call(l,"crm.fielddelete.customview",{name:"getI18n",hash:{},data:i}))+'</div> <div id="cvdiv" class="ncff" style="display:none;"> </div> <div id="territoryhead" style="display:none;"  class="crm-font-regular denyHead" >'+s(a.getI18n.call(l,"crm.territory.territories",{name:"getI18n",hash:{},data:i}))+'</div> <div id="territorydiv" class="ncff" style="display:none;"> </div> <div id="autofollowhead" style="display:none;"  class="crm-font-regular denyHead" >'+s(a.getI18n.call(l,"crm.label.automate.followup",{name:"getI18n",hash:{},data:i}))+'</div> <div id="autofollowdiv" class="ncff" style="display:none;"> </div> <div id="approvalRuleCrihead" class="denyHead crm-font-regular" style="display:none;" >'+s(a.getI18n.call(l,"crm.label.approvalProcess",{name:"getI18n",hash:{},data:i}))+'</div> <div id="approvalRuleCridiv" class="ncff" style="display:none;"></div> <div id="assRuleHead" class="denyHead crm-font-regular" style="display:none;" >'+s(a.getI18n.call(l,"crm.common.menu.assignmentRules",{name:"getI18n",hash:{},data:i}))+'</div> <div id="assRuleDiv" class="ncff" style="display:none;"></div> <div id="assRestHead" class="denyHead crm-font-regular" style="display:none;" >'+s(a.getI18n.call(l,"crm.label.assignment.restrictions",{name:"getI18n",hash:{},data:i}))+'</div> <div id="assRestDiv" class="ncff" style="display:none;"></div> <div id="caseHead" class="denyHead crm-font-regular" style="display:none;" >'+s(a.getI18n.call(l,"crm.pricing.case.escalation.rules",{name:"getI18n",hash:{},data:i}))+'</div> <div id="caseEscDiv" class="ncff" style="display:none;"></div> <div id="bPRulehead" class="denyHead crm-font-regular" style="display:none;" >'+s(a.getI18n.call(l,"crm.tags.delete.popup.blue.print.criteria",{name:"getI18n",hash:{},data:i}))+'</div> <div id="bPRulediv" class="ncff" style="display:none;"></div> <div id="bPTransRulehead" class="denyHead crm-font-regular" style="display:none;" >'+s(a.getI18n.call(l,"crm.tags.delete.popup.blue.print.transition.criteria",{name:"getI18n",hash:{},data:i}))+'</div> <div id="bPTransRulediv" class="ncff" style="display:none;"></div> <div id="bPTransActionhead" class="denyHead crm-font-regular" style="display:none;" >'+s(a.getI18n.call(l,"crm.tags.delete.popup.blue.print.transition.action",{name:"getI18n",hash:{},data:i}))+'</div> <div id="bPTransActiondiv" class="ncff" style="display:none;"></div> <div id="orchTransRulehead" class="denyHead crm-font-regular" style="display:none;" >'+s(a.getI18n.call(l,"crm.orchestration.tag.delete.transition.criteria",{name:"getI18n",hash:{},data:i}))+'</div> <div id="orchTransRulediv" class="ncff" style="display:none;"></div> <div id="scoringRulehead" class="denyHead crm-font-regular" style="display:none;" ></div> <div id="scoringRulediv" class="ncff" style="display:none;"></div> <div id="scoringRuleNewhead" class="denyHead crm-font-regular" style="display:none;" >'+s(a.getI18n.call(l,"crm.label.scoring.rules",{name:"getI18n",hash:{},data:i}))+'</div> <div id="scoringRuleNewdiv" class="ncff" style="display:none;"></div> <div id="automationdiv" class="ncff" style="display:none;"></div> <div id="canvasrulehead" class="denyHead crm-font-regular" style="display:none;">'+s(a.getI18n.call(l,"crm.canvas.rule.title","Canvas",{name:"getI18n",hash:{},data:i}))+'</div> <div id="canvasruledeldiv" class="ncff" style="display:none;"> </div> <div id="reportshead" class="denyHead crm-font-regular" style="display:none;">'+s(a.getI18n.call(l,"crm.report.reports",{name:"getI18n",hash:{},data:i}))+'</div> <div id="reportsdiv" class="ncff" style="display:none;"> </div> <div id="abmConfighead" class="denyHead crm-font-regular mL10 mT10" style="display:none;" >'+s(a.getI18n.call(l,"crm.abm.configuration",{name:"getI18n",hash:{},data:i}))+'</div> <div id="abmConfigdiv" class="ncff" style="display:none;"></div> <div id="abmSegmenthead" class="denyHead crm-font-regular mL10 mT10" style="display:none;" >'+s(a.getI18n.call(l,"crm.abm.segments",{name:"getI18n",hash:{},data:i}))+'</div> <div id="abmSegmentdiv" class="ncff" style="display:none;"></div> <div id="vochead" style="display:none;" class="denyHead crm-font-regular">'+s(a.getI18n.call(l,a.getDisplayModuleName.call(l,"Voice Of Customer",!1,{name:"getDisplayModuleName",hash:{},data:i}),{name:"getI18n",hash:{},data:i}))+'</div> <div id="lookupFilterhead" style="display:none;" class="denyHead crm-font-regular">'+s(a.getI18n.call(l,"crm.label.lookup.fields",{name:"getI18n",hash:{},data:i}))+" ("+s(a.getI18n.call(l,"criteria",{name:"getI18n",hash:{},data:i}))+')</div> <div id="lookupFilterdiv" class="ncff" style="display:none;"></div> <div id="vocdiv" class="ncff" style="display:none;"></div> <div id="sharingRuleshead" style="display:none;" class="denyHead crm-font-regular" >'+s(a.getI18n.call(l,"crm.security.sharing.rules.used.heading",{name:"getI18n",hash:{},data:i}))+'</div> <div id="sharingRulesdiv" class="ncff" style="display:none;"></div> </div> <div id="deleteInfo2" class="crm-font-regular fontSmooth f13 color_7 dIB mT20">'+s(a.getI18n.call(l,"crm.tags.delete.popup.info",{name:"getI18n",hash:{},data:i}))+'</div> </div> <div class="popup-model-footer aligncenter tgl pT0"> <input id="btnclos"  type="button" value="'+s(a.getI18n.call(l,"crm.button.ok",{name:"getI18n",hash:{},data:i}))+'" class="newSaveBtn"  onClick="CrmTags.handleCancel(\'tagDelete\')"></input> </div> </div>   <div class="newPopup w600 p0 newPopupStyleEle" id="wfAddTagsDiv"> <div class="fR pR pT20 pR40"> <i class="newPopupCloseIcon svgIcons ico-close-small2 cP op08 dIB" onclick="wfTags.showHideTaggingOption(\'cancel\',\'add\')"></i> </div> <div class="pp-header"> <p>'+s(a.getI18n.call(l,"crm.label.add.tags",{name:"getI18n",hash:{},data:i}))+'</p> </div> <div class="pp-content" style="padding:0px 30px 30px 30px;overflow: hidden;"> <div class="selected cchosen dIB vam wf_addTag w100per bdr1px"> <select id=\'wfAddTags\' class="js-example-basic-multiple js-example-tags js-example-programmatic-multi dIB addtags" multiple tabindex="-1" aria-hidden="true"></select> </div> <div class="pT20 dIB t_options"> <label class="newCustomchkbox-md vmiddle dIB fL"> <input type="checkbox" name="overWriteRecords" id="wfTagOverWriteRecords" onClick="wfTags.showOrHideOverwriteInfo();"> <span class="chkbxIcon"></span> </label> <span class="dIB fL pL5 f13">'+s(a.getI18n.call(l,"crm.tags.wf.overwrite.content",{name:"getI18n",hash:{},data:i}))+'</span> <span class="fL pL20 dN crm-font-regular color_7 f11" id="wfOverWrite_span" style="padding-top:2px;">'+s(a.getI18n.call(l,"crm.tags.overwrite.workflow.info",{name:"getI18n",hash:{},data:i}))+'</span> </div> </div> <div class="pp-footer">  <input type="button" id="cancelAddTags" class="newgraybtn" value="'+s(a.getI18n.call(l,"crm.button.cancel",{name:"getI18n",hash:{},data:i}))+'" onclick="wfTags.showHideTaggingOption(\'cancel\',\'add\')"> <input type="button" id="saveAddTags" class="primarybtn" value="'+s(a.getI18n.call(l,"crm.button.save",{name:"getI18n",hash:{},data:i}))+'" onclick="wfTags.showHideTaggingOption(\'save\',\'add\')"> </div> </div> <div class="newPopup w600 p0 newPopupStyleEle" id="wfRemoveTagsDiv" style="min-width:720px;"> <div class="fR pR pT20 pR20"><i class="newPopupCloseIcon svgIcons ico-close-small2 cP op08 dIB" onclick="wfTags.showHideTaggingOption(\'cancel\',\'remove\')"></i></div> <div class="pp-header"> <p>'+s(a.getI18n.call(l,"crm.label.remove.tags",{name:"getI18n",hash:{},data:i}))+'</p> </div> <div class="pp-content" style=\'overflow: hidden;\'> <div class="selected cchosen dIB vam wf_removeTag w100per bdr1px"> <select id=\'wfRemoveTags\' class="js-example-basic-multiple js-example-tags js-example-programmatic-multi dIB" multiple tabindex="-1" aria-hidden="true"></select> </div> </div> <div class="pp-footer"> <input type="button" id="cancelRemoveTags" class="newgraybtn" value="'+s(a.getI18n.call(l,"crm.button.cancel",{name:"getI18n",hash:{},data:i}))+'" onclick="wfTags.showHideTaggingOption(\'cancel\',\'remove\')"> <input type="button" id="saveRemoveTags" class="primarybtn" value="'+s(a.getI18n.call(l,"crm.button.save",{name:"getI18n",hash:{},data:i}))+"\" onclick=\"wfTags.showHideTaggingOption('save','remove')\"> </div> </div>  "},useData:!0})}();var rightPanelObj={entityId:"",currentModule:"",rpCachedList:null,activeRightPanel:null,url:Crm.getCrmBasePath()+"/KanbanViewEntity.do",rpTabOrder:null,rpParentContainer:"kso_rightPanel_Card",rpSearchEmailAddr:null,caller:null,featureName:null,outlookNewWindow:null,rightPanelBaseUrl:null,publicDomainList:null,fromPotential:null,potentialId:null,newSocial:!1,loadSocial:!0,isMailAppsUser:!1,isMailAppsEnabledOrg:!1,rightPanelSource:"crm",loadEmailDetailView:null,isStorageLimitReached:Crm.userDetails.isStorageLimitReached,rpTabNameVsId:{conversation:"krp_Conversation_Container",info:"krp_Rightpanel_InfoContainer",timeline:"krp_Rightpanel_TimelineContainer"},rpTabNameVsInnerContainerId:{conversation:"krp_Conversation_InnerContainer",info:"krp_Rightpanel_InfoInnerContainer",timeline:"krp_Rightpanel_TimelineInnerContainer"},rpTabNameVsI18NKey:{conversation:"crm.kanbanview.rightpanel.title.conversation",info:"crm.kanbanview.rightpanel.title.info",timeline:"crm.kanbanview.rightpanel.title.timeline"},rpTabNameVsAction:{conversation:"get_conversation",info:"get_entity_info",timeline:"get_timeline"},rpTabVsTemplateName:{conversation:"Conversation",info:"EntityInfo",timeline:"Timeline"},conversationsOrder:["social","mail","supportOrCases","messages"],conversationsVsDivId:{social:"krp_social_conversation",mail:"krp_mail_conversation",supportOrCases:"krp_support_or_cases_conversation",messages:"krp_message_conversation"},registerPartials:function(){Handlebars.registerPartial("heading",Handlebars.templates.heading),Handlebars.registerPartial("body",Handlebars.templates.body),Handlebars.registerPartial("navigateByRecords",Handlebars.templates.navigateByRecords),Handlebars.registerPartial("noRecordsFound",Handlebars.templates.noRecordsFound)},detailRightPanel:function(e,t,a,n,i){if("Projects"!==$$rightPanel.currentModule||Handlebars.templates.ProjectsRightPanel)if($(".commonRightPanel").length)$$rightPanel.detailRightPanelKV(e,t,a,n);else{var l=!1,s=$("#"+this.rpParentContainer+" #"+e),r=s.attr("cursor");if(s.removeAttr("cursor"),void 0!==r?$(crmSocial.timeLineViewMore).html("<img src='"+networkUtils.getImageUrl("moreloading_90b33f4_.gif",ResourceConstants.CRM)+"'>"):void 0===a||void 0!==a&&!a?l=$$rightPanel.showEntityDetailsIfAlreadFetched(e,t):void 0!==a&&a&&this.prerequisitesSettings(),!l){var o=this.getParams(t);void 0!==r&&(o+="&cursor="+r),null!==this.caller&&(o+="&caller="+this.caller),("undefined"==typeof crmSocialUtil||void 0===crmSocialUtil.perm||objectUtils.getLength(crmSocialUtil.perm)<1)&&("undefined"==typeof zsoTab||void 0===zsoTab.accounts||objectUtils.getLength(zsoTab.accounts)<1)&&(o+="&perm=false"),"rp_parent"!==this.rpParentContainer&&"task_rightpanel_container"!==this.rpParentContainer||(o+="&isNeedNotes=false"),$("#"+this.rpParentContainer+" .krp_tabs").removeClass("sel"),$("#"+this.rpParentContainer+" #"+e).addClass("sel"),void 0===r&&$("#"+this.rpParentContainer+" #krp_loading_div").css({height:$$rightPanel.windowHt-85}).show(),mR($$rightPanel.url,(function(e){i?(i.responseData=e,i.dummyPromise.then((function(e){$$rightPanel.resolveTimeLine(e,r,t,n,i)}))):$$rightPanel.resolveTimeLine(e,r,t,n,i)}),o,(function(e){if(555===e.status){var t=e.responseText?e.responseText:I18n.getMsg("crm.security.error");t=$ESAPI.encoder().encodeForHTML(t),$("#"+$$rightPanel.rpParentContainer+" #kso_social_rightpanel").html("<br><br><div class='noDataDiv' align='center'><span></span><h4>"+t+"</h4></div>"),$("#"+$$rightPanel.rpParentContainer+" #krp_loading_div").hide()}$(".outlookqCreate").length&&$$rightPanel.bindClickEventForOutlook()}),"false")}}else networkUtils.loadFeatureScripts(["zohocrm_projectrightpaneltemplate.js"],(function(){$$rightPanel.detailRightPanel(e,t,a,n)}))},afterRender:function(){var e="undefined"!=typeof socialKanbanView&&socialKanbanView.windowHeight?socialKanbanView.windowHeight-76:renderingUtils.windowHeight-85;if("undefined"==typeof socialKanbanView){var t=0,a=$("#rPSelect"),n=$("#cvpadding"),i=$("#wmstoolbar");a.is(":visible")&&(t=a.parent().outerHeight()),n.is(":visible")&&(t+=n.outerHeight()),i.is(":visible")&&(t+=i.outerHeight()),e-=t}$("#"+this.rpParentContainer+" #krp_Conversation_Container").css("height",e)},detailRightPanelKV:function(e,t,a,n){var i=!1,l=$("#"+e),s=l.attr("cursor");if(l.removeAttr("cursor"),void 0!==s?$(crmSocial.timeLineViewMore).html("<img src='"+networkUtils.getImageUrl("moreloading_90b33f4_.gif",ResourceConstants.CRM)+"'>"):void 0===a||void 0!==a&&!a?i=$$rightPanel.showEntityDetailsIfAlreadFetched(e,t):void 0!==a&&a&&this.prerequisitesSettings(),!i){var r=this.getParams(t);void 0!==s&&(r+="&cursor="+s),null!==this.caller&&(r+="&caller="+this.caller),("undefined"==typeof crmSocialUtil||void 0===crmSocialUtil.perm||objectUtils.getLength(crmSocialUtil.perm)<1)&&("undefined"==typeof zsoTab||void 0===zsoTab.accounts||objectUtils.getLength(zsoTab.accounts)<1)&&(r+="&perm=false"),"rp_parent"!==this.rpParentContainer&&"task_rightpanel_container"!==this.rpParentContainer||(r+="&isNeedNotes=false"),$(".krp_tabs").removeClass("sel"),$("#"+e).addClass("sel"),void 0===s&&$("#krp_loading_div").css({height:$$rightPanel.windowHt-85}).show(),s&&(r+="&cursor="+s),a&&(r+="&firsttime=true"),mR($$rightPanel.url,(function(i){try{var l=JSON.parse(i);l.mailRange&&($$rightPanel.mailRange=l.mailRange),l.new_social?networkUtils.loadFeatureScripts(["zcrm_zsoInteg.js",networkUtils.getI18nJSUrl("social")],(function(){void 0===s&&$$rightPanel.postDetailRightPanelKV(l,t,n,e),$$rightPanel.afterRenderKV(i,a),void 0!==l.interactions&&zsoTab.processRightPanel(l)})):networkUtils.loadFeatureScripts(["zohocrm_zsocial.js","zohocrm_zsocialinteg.js",networkUtils.getI18nJSUrl("social")],(function(){Handlebars.registerPartial("SocialConversations",Handlebars.templates.SocialConversations),Handlebars.registerPartial("PostTemplate",Handlebars.templates.PostTemplate),Handlebars.registerPartial("twPost",Handlebars.templates.twPost),void 0!==l.permissions&&crmSocialUtil.processPermissions(l),void 0!==l.social_timeline&&(l.social_timeline=crmSocialUtil.processPostForKanbanView(l.social_timeline)),void 0!==s?($(crmSocial.timeLineViewMore).parent().remove(),$("#krpSocTimeline").append(Handlebars.templates.PostTemplate(l.social_timeline))):void 0!==l.interactions&&(Handlebars.registerPartial("twPostActions",Handlebars.templates.twPostActions),Handlebars.registerPartial("fbPostActions",Handlebars.templates.fbPostActions),l.interactions=crmSocialUtil.processPostForKanbanView(l.interactions)),void 0===s&&$$rightPanel.postDetailRightPanelKV(l,t,n,e),$$rightPanel.afterRenderKV(i)}))}catch(e){console.error(e),$("#"+$$rightPanel.rpParentContainer).html(i),$("#krp_loading_div").hide();var r=$("#notAccessibleMsgContainer");r.removeClass("leadbox"),r.css("padding-left","30px"),$(".kso_CautionLeft,.kso_CautionRight").attr("style",""),$(".kso_CautionRight").find("h2").css({"margin-top":"15px","text-align":"center","line-height":"28px"}),$(".kso_CautionLeft").parent("div").css("margin","0 auto")}}),r,(function(e){var t=$(".outlookqCreate").length;switch(e.status){case 555:var a=e.responseText?e.responseText:I18n.getMsg("crm.security.error");$("#kso_social_rightpanel").html("<br><br><div class='noDataDiv' align='center'><span></span><h4>"+a+"</h4></div>"),$("#krp_loading_div").hide();break;case 556:$("#kso_social_rightpanel").html("<br><br><div class='noDataDiv' align='center'><span></span><h4>"+I18n.getMsg("crm.convert.lead.converted.already",moduleRecordMapping[EmailSendingUtil.LEADS].singular_label)+"</h4></div>"),$("#krp_loading_div").hide();break;case 554:$("#kso_social_rightpanel").html("<br><br><div class='noDataDiv' align='center'><span></span><h4>"+I18n.getMsg("crm.label.lead.view.converted",I18n.getMsg("Lead"))+"</h4></div>"),$("#krp_loading_div").hide();break;case 553:$("#kso_social_rightpanel").html("<br><br><div class='noDataDiv' align='center'><span></span><h4>"+I18n.getMsg("crm.rightpanel.record.delete")+"</h4></div>"),$("#krp_loading_div").hide();break;case 552:var n=t?I18n.getMsg("crm.outlook.record.delete.message",[Crm.getCrmBasePath()]):I18n.getMsg("crm.record.delete.message",[Crm.getCrmBasePath()]);$("#kso_social_rightpanel").html("<br><br><div class='noDataDiv' align='center'><span></span><h4>"+n+"</h4></div>"),$("#krp_loading_div").hide();break;case 560:$("#kso_social_rightpanel").html("<br><br><div class='noDataDiv' align='center'><span></span><h4>"+I18n.getMsg("crm.record.zia.not.approved")+"</h4></div>"),$("#krp_loading_div").hide()}t.length&&$$rightPanel.bindClickEventForOutlook()}),"false")}},afterRenderKV:function(e,t){if(t)if($("#social_parent_div").length)$("#kso_rightPanel_Card").after(e);else{var a=$("#rp_parent"),n=$("#feedsFollowUpDetails");a&&!n?a.html(e):n?n.after(e):$("#kso_rightPanel_Card").after(e)}else{n=$("#feedsFollowUpDetails");$("#social_parent_div").length?$("#kso_rightPanel_Card").after(e):n?n.after(e):$("#kso_rightpanel_title").after(e)}$("#krp_loading_div").hide(),$(".outlookqCreate").length&&$$rightPanel.bindClickEventForOutlook()},getParams:function(e){var t="action="+this.rpTabNameVsAction[e]+"&module="+$$rightPanel.currentModule;return!this.loadSocial&&this.conversationsOrder.contains("social")&&this.conversationsOrder.splice(0,1),"conversation"===e&&(t+="&requiredConversations="+this.conversationsOrder.join()),"timeline"===e&&$("#social_parent_div").length>0&&this.loadSocial&&(t+="&social=true"),"Colleagues"===$$rightPanel.currentModule||"UnMatched"===$$rightPanel.currentModule?t+="&emailid="+$$rightPanel.rpSearchEmailAddr:t+="&entityId="+$$rightPanel.entityId,$(".outlookqCreate").length&&(t+="&isfromOutlookRightPanel=true"),Crm.isFromSalesInbox&&(t+="&isFromSalesInbox=true"),t},showEntityDetailsIfAlreadFetched:function(e,t){if(this.rpCachedList&&-1===$.inArray(this.activeRightPanel,this.rpCachedList)&&this.rpCachedList.push(this.activeRightPanel),this.rpCachedList&&$.inArray(t,this.rpCachedList)>-1)return this.activeRightPanel=t,$("#"+this.rpParentContainer+" .krp_containers").hide(),$("#"+this.rpParentContainer+" .krp_tabs").removeClass("sel"),$("#"+this.rpParentContainer+" #"+e).addClass("sel"),$("#"+this.rpParentContainer+" #"+this.rpTabNameVsId[t]).show(),!0},loadMore:function(e,t){var a="action="+t;if(a+="&module="+$$rightPanel.currentModule,a+="&index="+$(e).attr("index"),"load_more_mails"===t)if("Colleagues"===$$rightPanel.currentModule||"UnMatched"===$$rightPanel.currentModule)if($$rightPanel.isMailAppsEnabledOrg||$$rightPanel.isMailAppsUser){var n=$("#curr_selected_view"),i=n.attr("userId");if("-2"===i){var l=n.attr("mailType");if("imap_all"===l?a+="&mailAppsmailType=1":"pop_all"===l?a+="&mailAppsmailType=2":"all_mail"===l&&(a+="&mailAppsmailType=4"),$$rightPanel.mailRange)a+="&mmRange="+(s=$$rightPanel.mailRange).mmRange,a+="&mailapiRange="+s.mailapiRange}else a+="-1"===i?"&mailAppsmailType=0":"&mailAppsmailType=3";a+="&mailsOwnerId="+$(e).attr("mailsOwnerId")}else{var s;if(a+="&mailsOwnerId="+$(e).attr("mailsOwnerId"),$$rightPanel.mailRange)a+="&cassRangeEnd="+(s=$$rightPanel.mailRange).cassRangeEnd,a+="&lastMailTime="+s.lastMailTime}else a+="&mailsOwnerId="+$(e).attr("mailsOwnerId");"Colleagues"===$$rightPanel.currentModule||"UnMatched"===$$rightPanel.currentModule?a+="&emailid="+$$rightPanel.rpSearchEmailAddr:a+="&entityId="+$$rightPanel.entityId,$(".outlookqCreate").length&&(a+="&isfromOutlookRightPanel=true"),mR($$rightPanel.url,(function(e){e=JSON.parse(e),$$rightPanel.postLoadMore(e,$$rightPanel.getCorrespondingKeys(t))}),a,"","false")},postLoadMore:function(e,t){e.mailRange&&($$rightPanel.mailRange=e.mailRange),$("#"+t.containerId).append(Handlebars.templates[t.template](e));var a=$("#"+t.loadMoreId);e[t.limit]===e[t.count]?(a.parent().show(),a.attr("index",e[t.index])):a.parent().hide(),$$rightPanel.setPerfectScrollBar(this.rpTabNameVsId[this.activeRightPanel],this.rpTabNameVsInnerContainerId[this.activeRightPanel],!0),$(".outlookqCreate").length&&$$rightPanel.bindClickEventForOutlook()},getCorrespondingKeys:function(e){var t={};return"load_more_mails"===e||"get_mails"===e?(t.index="mailConversationsIndex",t.limit="mailConversationsLimit",t.count="mailConversationsCount",t.containerId="kso_mails_list",t.loadMoreId="kso_mails_view_more",t.template="MailConversations"):"load_more_cases"===e?(t.index="supportOrCasesIndex",t.limit="supportOrCasesLimit",t.count="supportOrCasesCount",t.containerId="kso_cases_list",t.loadMoreId="kso_cases_view_more",t.template="Cases"):"refreshNotesOnCreatingNew"===e?(t.index="notesIndex",t.limit="notesLimit",t.count="notesCount",t.containerId="kso_notes_list",t.loadMoreId="kso_notes_view_more",t.template="Notes"):"load_more_activities"===e||"refreshActivitiesOnCreatingNew"===e?(t.index="activitiesIndex",t.limit="activitiesLimit",t.count="activitiesCount",t.containerId="kso_activities_list",t.loadMoreId="kso_activities_view_more",t.template="Activities"):"load_more_potentials"!==e&&"refreshPotentialOnCreatingNew"!==e||(t.index="potentialsIndex",t.limit="potentialsLimit",t.count="potentialsCount",t.containerId="kso_potentials_list",t.loadMoreId="kso_potentials_view_more",t.template="Potentials"),t},prerequisitesSettings:function(){if(Handlebars.registerPartial("MailConversations",Handlebars.templates.MailConversations),Handlebars.registerPartial("Cases",Handlebars.templates.Cases),Handlebars.templates.PostTemplate&&(Handlebars.registerPartial("SocialConversations",Handlebars.templates.SocialConversations),Handlebars.registerPartial("PostTemplate",Handlebars.templates.PostTemplate),Handlebars.registerPartial("twPost",Handlebars.templates.twPost)),Notes.registerPartial(),$(".commonRightPanel").length?Handlebars.registerPartial("Notes",Handlebars.templates.CrmNotes_RightPanel):Handlebars.registerPartial("Notes",Handlebars.templates.CrmNotes_DetailsPage),Handlebars.registerPartial("Potentials",Handlebars.templates.Potentials),Handlebars.registerPartial("Activities",Handlebars.templates.Activities),"social_parent"!==this.rpParentContainer&&$("#"+this.rpParentContainer).html(Handlebars.templates.RightPanels()),$("#"+this.rpParentContainer+" .krp_tabs").addClass("hide"),null!==this.rpTabOrder&&this.rpTabOrder.length>=1)for(var e=this.rpTabOrder.length,t=0;t<e;t++){var a="#"+this.rpParentContainer+" #krp_tab"+(t+1);$(a).html(I18n.getMsg(this.rpTabNameVsI18NKey[this.rpTabOrder[t]])),$(a).attr("tabName",this.rpTabOrder[t]),$(a).removeClass("hide")}},get_contactid_by_potentialid:function(e){var t="action=get_contactid_by_potentialid&entityId="+e,a=null;return mR($$rightPanel.url,(function(e){a=$.trim(e)}),t,"","false",!0),a},postDetailRightPanelKV:function(e,t,a,n){var i="rp_parent"===this.rpParentContainer,l=$("#"+this.rpTabNameVsId[t]),s=i&&(l+":visible").length?renderingUtils.windowHeight-l.offset().top:$$rightPanel.windowHt-85,r=renderingUtils.windowHeight,o=this.rpTabVsTemplateName[t],c=l.offset().top,d=$(".krp_tabMenu"),m=d.outerHeight(),u=d.width(),p=$("#socialTimeline").width(),g=l.closest("#ldKanbanPop").offset().top;$(".krp_containers").hide(),void 0!==deskInteg&&deskInteg.populateIntegDetails(e.supportObj),Notes.addRightPanelClass(e);var h=Handlebars.templates[o](e);if(this.rpTabOrder[0]===t)$("#kso_rightpanel_title").after(h);else if(this.rpTabOrder[1]===t){$("#"+this.rpTabNameVsId[this.rpTabOrder[0]]).after(h);var f=$("#krp_sel_mail_user");if("MailClient"===this.featureName&&"Conversation"===o){var v=f.attr("userId"),C=$("#krp_mail_users").find("a");$(C).each((function(){$(this).attr("userId")===v&&(f.html($(this).html().trim()),$(this).addClass("krp_sel_user_mark"))}))}}else if(this.rpTabOrder[2]===t){var T=$("#"+this.rpTabNameVsId[this.rpTabOrder[1]]);T.length>0?T.after(h):$("#"+this.rpTabNameVsId[this.rpTabOrder[0]]).after(h)}this.alignConversations(t),this.activeRightPanel=t,$("#"+this.rpTabNameVsId[t]).css({height:s,overflow:"auto"}),$$rightPanel.setPerfectScrollBar(this.rpTabNameVsId[this.activeRightPanel],this.rpTabNameVsInnerContainerId[this.activeRightPanel],!0);var N=$("#feedsFollowUpDetails"),_=$("#visits_parent_div").length;if(N.length>0&&N.is(":visible")||_>0){if(_.length>0)var I=r-(g+m);else I=r-c;l.attr("style","height:"+I+"px !important;"),$("#"+this.rpTabNameVsInnerContainerId[this.activeRightPanel]).css({height:"auto"}),l.perfectScrollbar("destroy"),l.perfectScrollbar({wheelSpeed:1,wheelPropagation:!0,suppressScrollX:!1}).addClass("oH");var b=$(".krp_tabMenu a:visible");$(".krp_tabMenu").find("a")&&2===b.length&&b.width(u/2-1)}if("timeline"===t&&void 0!==e.social_timeline){$$rightPanel.setPerfectScrollBar("krp_socialTimelineContainer","krp_socialTimelineInner");var E=p;$("#crmTimeline").css({left:E})}if("info"===t&&e.activitiesLimit&&e.activitiesLimit===e.activitiesCount){var S=$("#kso_activities_view_more");S.parent().show(),S.attr("index",e.activitiesIndex)}$("#krp_loading_div").hide(),$("#"+t).show(),i&&"info"===t?$("#krp_Rightpanel_InfoContainer").find("#noteDetails").remove():"info"===t&&e.isNotesRLPresent&&(Notes.processNotes(),Notes.initNote("open")),void 0!==a&&a(),$$rightPanel.showEntityDetailsIfAlreadFetched(n,t),$$rightPanel.setPerfectScrollBar($$rightPanel.rpTabNameVsId[$$rightPanel.activeRightPanel],$$rightPanel.rpTabNameVsInnerContainerId[$$rightPanel.activeRightPanel],!0)},postDetailRightPanel:function(e,t,a){var n="rp_parent"===this.rpParentContainer,i=n&&$("#"+this.rpTabNameVsId[t]+":visible").length?renderingUtils.windowHeight-$("#"+this.rpTabNameVsId[t]).offset().top:renderingUtils.windowHeight-105,l=renderingUtils.windowHeight,s=$("#"+this.rpTabNameVsId[t]),r=s.offset().top,o=s.closest("#ldKanbanPop").offset().top,c=$(".krp_tabMenu").outerHeight(),d=$("#socialTimeline").width(),m=$("#krp_loading_div").offset().top,u=$("#taskDetailsPart");u.length&&(m=u.position().top+70);var p=renderingUtils.windowHeight-m;if(0==m)p=renderingUtils.windowHeight-190;$("#"+$$rightPanel.rpParentContainer+" .krp_containers").hide(),e.supportObj&&void 0!==deskInteg&&deskInteg.populateIntegDetails(e.supportObj);var g=this.rpTabVsTemplateName[t];Notes.addRightPanelClass(e);var h=Handlebars.templates[g](e);if(this.rpTabOrder[0]===t)$("#"+$$rightPanel.rpParentContainer+" #kso_rightpanel_title").after(h);else if(this.rpTabOrder[1]===t)$("#"+this.rpParentContainer+" #"+this.rpTabNameVsId[this.rpTabOrder[0]]).after(h);else if(this.rpTabOrder[2]===t){var f=$("#"+this.rpParentContainer+" #"+this.rpTabNameVsId[this.rpTabOrder[1]]);f.length>0?f.after(h):$("#"+this.rpParentContainer+" #"+this.rpTabNameVsId[this.rpTabOrder[0]]).after(h)}this.alignConversations(t),this.activeRightPanel=t,1==Crm.userDetails.detailView_newUI&&null!=Crm.userDetails.detailView_newUI?Crm.isActivitySplitDone?$("#"+this.rpTabNameVsId[t]).css({height:p-28,overflow:"auto"}):$("#"+this.rpParentContainer+" #"+this.rpTabNameVsId[t]).css({height:p-28,overflow:"auto"}):$("#"+this.rpParentContainer+" #"+this.rpTabNameVsId[t]).css({height:i,overflow:"auto"}),"info"===t&&$("#crmEmailOuterContainerDiv").is(":visible")||Crm.isActivitySplitDone||$$rightPanel.setPerfectScrollBar(this.rpTabNameVsId[this.activeRightPanel],this.rpTabNameVsInnerContainerId[this.activeRightPanel],!0);var v=$("#feedsFollowUpDetails"),C=$("#visits_parent_div");if(v.length>0&&v.is(":visible")||C.length>0){if(C.length>0)var T=l-(o+c);else T=l-r;$("#"+this.rpParentContainer+" #"+this.rpTabNameVsId[t]).attr("style","height:"+T+"px !important;"),$("#"+this.rpParentContainer+" #"+this.rpTabNameVsInnerContainerId[this.activeRightPanel]).css({height:"auto"}),thirdPartyUtils.unbindPerfectScroll("#"+this.rpParentContainer+" #"+this.rpTabNameVsId[t]),thirdPartyUtils.bindPerfectScroll("#"+this.rpParentContainer+" #"+this.rpTabNameVsId[t],{wheelSpeed:1,wheelPropagation:!1,suppressScrollX:!1})}if("timeline"===t&&void 0!==e.social_timeline){var N=d;$("#crmTimeline").css({left:N})}if(n&&"info"===t&&e.activitiesLimit&&e.activitiesLimit===e.activitiesCount){var _=$("#kso_activities_view_more");_.parent().show(),_.attr("index",e.activitiesIndex)}if($("#"+this.rpParentContainer+" #krp_loading_div").hide(),$("#"+this.rpParentContainer+" #"+t).show(),n&&"info"===t?$("#krp_Rightpanel_InfoContainer").find("#noteDetails").remove():"info"===t&&(Notes.processNotes(),""===Notes.noteFullSection&&(Notes.noteFullSection=$("#note_parent_td").html())),"info"===t&&crmBstTime.isSupportedModule($$rightPanel.currentModule)){var I={};I.id=$$rightPanel.entityId,I.relModule=$$rightPanel.currentModule,crmBstTime.detailsViewShow(null,I,crmBstTime.showBestTimeOnRightPanelNew)}if(void 0!==a&&a(),e.messages){var b={};b.entityId=$$rightPanel.entityId,b.module=e.module,b.messages=e.messages,Lyte.Component.render("crm-msg-right-panel",b,"#krp_message_conversation")}},alignConversations:function(e){if("conversation"===e){for(var t=$("#"+this.rpTabNameVsInnerContainerId.conversation),a="",n=this.conversationsOrder.length,i=0;i<n;i++)a+=$("#"+this.conversationsVsDivId[this.conversationsOrder[i].trim()])[0].outerHTML;$(t).html(a),this.sortMailAddOnUsers()}},sortMailAddOnUsers:function(){if(1===$("#krp_mail_users").length){$.each(["krp_not_conversed_list","krp_imap_users"],(function(e,t){var a=$("#"+t);if(1===a.length){var n=a.find("a").sort((function(e,t){return e.innerHTML.toLowerCase()>t.innerHTML.toLowerCase()?1:-1}));a.html(n)}}))}},setPerfectScrollBar:function(e,t,a){if(!1===$("#feedsFollowUpDetails").is(":visible")||0===$("#visits_parent_div").length){var n=$("#"+t),i=$("#"+e);if(i[0]){var l=i[0].scrollHeight;thirdPartyUtils.unbindPerfectScroll("#"+e),n.css({height:"1px"}),n.css({height:"auto"}),void 0===a&&i.css({height:$$rightPanel.windowHt-83}),n.css({height:l}),i.css({overflow:"hidden"}),$("#feedParentDiv").is(":visible")||thirdPartyUtils.bindPerfectScroll("#"+e,{wheelSpeed:1,wheelPropagation:!0,suppressScrollX:!1})}}},getMails:function(e){var t=$(e.target).closest("a"),a=$(t).attr("userId"),n=$("#krp_sel_mail_user").attr("userId"),i=$.trim($(t).attr("username")),l=!1;$$rightPanel.isMailAppsEnabledOrg||$$rightPanel.isMailAppsUser?"-2"===a?t.attr("mailType")===$("#curr_selected_view").attr("mailType")&&(l=!0):n===a&&(l=!0):n===a&&(l=!0);if(l)return $("#krp_mail_users").hide(),!1;var s="entityId="+$$rightPanel.entityId;if(s+="&module="+$$rightPanel.currentModule,s+="&action=get_mails",s+="&mailsOwnerId="+a,$$rightPanel.isMailAppsEnabledOrg||$$rightPanel.isMailAppsUser){var r=$("#curr_selected_view");if("-2"===a){var o=t.attr("mailType");"imap_all"===o?s+="&mailAppsmailType=1":"pop_all"===o?s+="&mailAppsmailType=2":"all_mail"===o&&(s+="&mailAppsmailType=4"),r.attr("mailType",o)}else s+="-1"===a?"&mailAppsmailType=0":"&mailAppsmailType=3";r.attr("userId",a)}mR($$rightPanel.url,(function(e){e=JSON.parse(e),$$rightPanel.postGetMails(e,$$rightPanel.getCorrespondingKeys("get_mails"),a,i)}),s,"","false")},showDropDown:function(e){var t=$(e).position().top,a=renderingUtils.windowWidth-($(e).offset().left+$(e).outerWidth()-10),n=$("#krp_mail_users");$(".krp_sel_user_mark").removeClass("krp_sel_user_mark");var i=$("#krp_sel_mail_user").attr("userId"),l=n.find("a");if($$rightPanel.isMailAppsEnabledOrg||$$rightPanel.isMailAppsUser){var s=$("#curr_selected_view");if("-2"===s.attr("userId")){var r=s.attr("mailType");l.each((function(){$(this).attr("mailType")===r&&$(this).addClass("krp_sel_user_mark")}))}else $(l).each((function(){$(this).attr("userId")===i&&$(this).addClass("krp_sel_user_mark")}))}else l.each((function(){$(this).attr("userId")===i&&$(this).addClass("krp_sel_user_mark")}));n.css({top:t+16,right:a}),n.show()},postGetMails:function(e,t,a,n){$("#"+t.containerId).html(Handlebars.templates[t.template](e));var i=$("#"+t.loadMoreId);e[t.limit]===e[t.count]?(i.parent().show(),i.attr("index",e[t.index])):i.parent().hide(),$$rightPanel.setPerfectScrollBar(this.rpTabNameVsId[this.activeRightPanel],this.rpTabNameVsInnerContainerId[this.activeRightPanel],!0),i.attr("mailsOwnerId",a);var l=$("#krp_sel_mail_user");l.attr("userId",a),l.text(n),$("#krp_mail_users").hide()},refreshOnCreatingNewEntity:function(e,t){var a=null;if("Potentials"===e?a=$$rightPanel.getCorrespondingKeys("refreshPotentialOnCreatingNew"):"Activities"===e?($("#krp_activities_create_new").hide(),a=$$rightPanel.getCorrespondingKeys("refreshActivitiesOnCreatingNew")):"Notes"===e&&(a=$$rightPanel.getCorrespondingKeys("refreshNotesOnCreatingNew")),Crm.isActivitySplitDone&&"Activities"===e||"Tasks"===e||"Events"===e||"Calls"===e){var n=$L("crm-activity-right-panel")[0],i="Appointments"===t.module?"Open_Appointments__s":t.module;n.getData("entity_id")===t.entityId&&n.setData(i,t.right_panel_data[i])}if(null!==a){$("#"+a.containerId).html(Handlebars.templates[a.template](t));var l=$("#"+a.loadMoreId);t[a.limit]===t[a.count]?(l.parent().show(),l.attr("index",t[a.index])):l.parent().hide(),$$rightPanel.setPerfectScrollBar(this.rpTabNameVsId[this.activeRightPanel],this.rpTabNameVsInnerContainerId[this.activeRightPanel],!0)}$(".outlookqCreate").length&&$$rightPanel.bindClickEventForOutlook()},showCreateActivitiesLabels:function(e){var t=$(e).position(),a=$("#krp_activities_create_new").width();$(".commonRightPanel").length||(a+=30);var n=$("#krp_activities_create_new"),i=n.find(".qcpopuparrow");Crm.userDetails.RTL_ENABLED&&0==$(".kanbanTaskDetailRightContainer").length?(n.css({left:t.left+47,top:t.top-4,border:"1px solid #ddd"}),i.css({left:"-11px",right:"inherit"})):(n.css({left:t.left-(a-9),top:t.top-10,border:"1px solid #ddd"}),i.css({right:"-11px"})),n.show(),$(".outlookqCreate").length&&$$rightPanel.setFocusForOutlookCustomPane()},getFeed:function(e,t,a){e=$(e),$("#krp_Conversation_InnerContainer").find(".krp_old_conversation > #response").html("").css("display","none"),e.parents("#krp_social_conversation").find(".kso_action_Layer").attr("style","visibility: hidden !important");var n=e.siblings();n.removeClass("graybgf3f3 socreply_bg"),e.parents("#kso_interactions_list").siblings(".krp_old_conversation").removeClass("graybgf3f3"),e.siblings("#kso_interactions_list").find(".krp_old_conversation").removeClass("graybgf3f3");var i=e.attr("b_id");if(a&&"facebook"!==t)var l=e.attr("t_id");else{l=e.attr("p_id");if(a)var s=e.attr("t_id")}$("#feed_detail_outer_div").addClass("highlight"),setTimeout((function(){$("#feed_detail_outer_div").removeClass("highlight")}),1500);var r="action=get_feed&brid="+i+"&feedid="+l+"&network="+t+"&bio=true";if("twitter"===t){var o=e.attr("f_cnt"),c=e.attr("re_cnt");void 0!==o&&""!==o&&(r+="&favorite_count="+o),void 0!==c&&""!==c&&(r+="&retweet_count="+c),void 0!==(d=e.attr("c_cnt"))&&""!==d&&(r+="&reply_count="+d)}else{var d,m=e.attr("l_cnt");void 0!==m&&""!==m&&(r+="&like_count="+m),void 0!==(d=e.attr("c_cnt"))&&""!==d&&(r+="&comment_count="+d)}n.removeClass("graybgf3f3"),e.addClass("graybgf3f3"),a&&(r+="&message=true");var u=e.attr("e_id");""!==u&&(r+="&entity_id="+u);var p=$(".outlookqCreate").length;p&&(r+="&isfromOutlookRightPanel=true"),1===$(".kanbansocialrightcontainer").length&&$("#kso_rightPanel_Card").css({"z-index":"22"}),p?$$rightPanel.openNewWindowFromOutlook(crmSocial.url+"?"+r,662,700):mR(crmSocial.url,(function(e){"MailClient"===$$rightPanel.featureName&&(Handlebars.registerPartial("CommentTemplate",Handlebars.templates.CommentTemplate),Handlebars.registerPartial("ReplyList",Handlebars.templates.ReplyList),Handlebars.registerPartial("twReply",Handlebars.templates.twReply),Handlebars.registerPartial("ReplyToComment",Handlebars.templates.ReplyToComment),Handlebars.registerPartial("ConvoTemplate",Handlebars.templates.ConvoTemplate),Handlebars.registerPartial("fbPostDetail",Handlebars.templates.fbPostDetail),Handlebars.registerPartial("twPostDetail",Handlebars.templates.twPostDetail),Handlebars.registerPartial("gpPostDetail",Handlebars.templates.gpPostDetail));var n=$.parseJSON(e);n.thread_id=a&&"facebook"===t?l:s,n=crmSocialUtil.processPostForDetailView(n);var i=$("#social_main").outerHeight(),r=$("#feed_detail_inner_div").children().eq(1).outerHeight(),o=$("#kso_feed_hd"),c=o.outerHeight(),d=(b=$("#feed_detail_inner_div #response")).width(),m=b.find(".imgwth").outerWidth(!0),u=b.find(".btnwth").outerWidth(),p=$("#feed_detail_head").height(),g=$("#feed_detail_head_outer"),h=$("#kso_social_rightpanel").outerWidth(),f=$("#kanbanViewSkeletonContainer").outerHeight(),v=$("#feed_detail_outer_div"),C=$("#feed_detail_outer_div #response").outerHeight(),T=$("#emailClientMenubar"),N=T.offset().top,_=T.outerHeight();if("twitter"===t){c+=o.next().outerHeight();var I=$("#kso_feed_hd .followArrow");I.length>0&&$("#folwHandle").css("left",I.position().left-97)}v.html(Handlebars.templates.PostDetail(n)),$("#feed_detail_close").show().addClass("addClose"),$("#kso_rightpanel_freezelayer").hide(),g.css("height",i-r-c-24),thirdPartyUtils.unbindPerfectScroll("#feed_detail_head_outer"),$$rightPanel.setPerfectScrollBar("feed_detail_head_outer","feed_detail_head",!0);var b=$("#feed_detail_inner_div #response");if("MailClient"===$$rightPanel.featureName){$("#social_interaction_container, #feed_detail_outer_div").show(),$("#socialConversationFreeze").css({width:EmailTabHomeUtil.ViewPortWidth-h,height:EmailTabHomeUtil.ViewPortHeight,"z-index":"20",display:"block"}),v.css({top:N+_,right:h,height:f}),g.css("height",f-c-C-60),$("#etleftNavContainer, .sbLogo").addClass("ptrNone");var E=d-m-u-10;$(".txtwth").css("width",E)}void 0!==n.data&&void 0!==n.data[0]&&"message"===n.data[0].type&&g.scrollTop(p)}),r,"","false")},bindScrollForMailUsers:function(){var e=$("#krp_mail_users"),t=$("#kso_social_rightpanel");if(e.height()>t.height()){var a=$("#krp_mail_users")[0].scrollHeight,n=t.height();$("#krp_mail_users_inner").css({height:a}),e.css({overflow:"hidden",height:n-200}),thirdPartyUtils.bindPerfectScroll("#krp_mail_users",{wheelSpeed:1,wheelPropagation:!1})}},setPopupPosition:function(e){var t=renderingUtils.windowHeight,a=$("#qCreate").outerHeight();$("#qCreate").hasClass("outlookqCreate")?setTimeout((function(){$("select.select[name='property(saltName)']").attr("id","saltNms");var a=$("#rightNewPopup .qcFields");a.css({"max-height":t-150}),"krp_activities_create_new"===$(e).attr("id")&&$("#eventCreatePopup").css("top","50px"),a.perfectScrollbar({wheelSpeed:1,wheelPropagation:!0}).addClass("oH pR"),$$rightPanel.bindEventsForoutlookpanel()}),30):setTimeout((function(){var n=$(e).offset(),i=$("#qCreate"),l=i.offset(),s=l.top-(a+l.top+50-t);$(".qcpopuparrow,.arrwLeft").hide(),a+l.top+26>t&&(i.css("top",s),$("#qCreate .qcpopuparrow").css({position:"fixed",top:n.top-4,left:n.left-17}),$("#rightNewPopup .qcFields").css({"max-height":t-120}),s<0&&i.css("top","0px"))}),500)},loadMoreDescription:function(e,t){"projects"===t&&($("#projectDesc").removeAttr("style"),$("#kso_projDesc_view_more").hide())},bindClickEventForOutlook:function(){if($(".outlookqCreate").length){var e=$(".newWindowLink,.proflink");e.unbind("click"),e.click((function(e){e.preventDefault(),e.stopPropagation(),$$rightPanel.openNewWindowFromOutlook(this.href,800,1200)}))}},openNewWindowFromOutlook:function(e,t,a){try{$$rightPanel.outlookNewWindow&&!$$rightPanel.outlookNewWindow.closed?($$rightPanel.outlookNewWindow.resizeTo(a,t+52),$$rightPanel.outlookNewWindow.focus(),$$rightPanel.outlookNewWindow.location.replace(Crm.getOrgSpecificURL(e))):($$rightPanel.outlookNewWindow=window.open(Crm.getOrgSpecificURL(e),"_blank","location=no,toolbar=no,statusbar=no,menubar=no,directories=no,scrollbars=yes,menubar=no,resizable=no,left=0,top=0,width="+a+",height="+t),$$rightPanel.outlookNewWindow.isFromOutlookPlugin=!0)}catch(n){$$rightPanel.outlookNewWindow=window.open(Crm.getOrgSpecificURL(e),"_blank","location=no,toolbar=no,statusbar=no,menubar=no,directories=no,scrollbars=yes,menubar=no,resizable=no,left=0,top=0,width="+a+",height="+t),$$rightPanel.outlookNewWindow.isFromOutlookPlugin=!0}},bindEventsForoutlookpanel:function(){var e=$("#leContModSel,#modsel").parents(".tabDivCreate");e.find(".quicklabel").addClass("hide"),e.find(".labelValCreate").addClass("w100p");var t=$("#timeClearLink");t.parents(".labelValCreate").find("input").css("font-size","13px");var a=$("#compCalDiv");a.find(".newtimefrmt,input").css("font-size","13px"),a.find("input[maxlength=120]").css("width","70px"),a.parents(".tabDivCreate").addClass("compcalpar"),$("#timerButtonDiv").find("span").css("display","none"),$("#recurringDiv").find("table").first().addClass("wf_form_UI wf_form_focus w100p").css("border-collapse","collapse"),$("#RemindAtdiv").find("table").first().addClass("wf_form_UI wf_form_focus w100p").css("border-collapse","collapse"),$("#RemindAtdiv").find("table").find("td br").remove(),$("#daily1,#weekly1,#monthly1,#yearly1").addClass("mT10").removeClass("pL5");var n=$(".uSelN").parents(".quicklabel.labelTabCreate");n.addClass("w100p"),n.next(".labelValCreate").remove();var i=t.parents(".tabDivCreate");i.find(".quicklabel").css({width:"30%"}),i.find(".quicklabel").next(".labelValCreate").css({width:"70%"}),a.find(".quicklabel").css({width:"30%"}),a.find("input").unbind("blur"),$(".cancelRemindAt").click((function(){"300px"===$("#quickRemindAt").css("left")&&$("#task_subject").focus()})),$(".newtimefrmt,.newtimefrmt input").click((function(){$("#timesData").find("#sdiv").show().css({left:$(this).offset().left,top:$(this).offset().top+20})}));var l=$("#leContModSel").closest("form").prop("name"),s=getElm(l,"leContModSel");"Contacts"===$(s).val()?$(getElm(l,"modsel")).closest(".tabDivCreate").show():$(getElm(l,"modsel")).closest(".tabDivCreate").hide(),$(s).change((function(){"Leads"===$(this).val()?$(getElm(l,"modsel")).closest(".tabDivCreate").hide():$(getElm(l,"modsel")).closest(".tabDivCreate").show()})),$(".qAmorearrow").text("");var r=$("#whichCallDiv").find("tbody"),o="";r.find("td").each((function(){o=o+"<tr><td>"+$(this).html()+"</td></tr>"})),$("#Crm_Events_ENDDATETIME_TimeOption").on("click",(function(){$("#Crm_Events_ENDDATETIME_TimeOption_List").css("left",parseInt($("#Crm_Events_ENDDATETIME_TimeOption_List").css("left"))-40)})),$('input[placeholder="MM/dd/yyyy"]').each((function(){""===$(this).val()&&$(this).parent().find(".plHld").show()})),$("#Calendar").on("click",".cdate",(function(){$('input[placeholder="MM/dd/yyyy"]').each((function(){""===$(this).val()&&$(this).parent().find(".plHld").show()}))})),$(".plHld").click((function(e){$(this).hide(),renderingUtils.triggerEvent("click",$(this).next("input")),sE(e)})),$("#quickRecurring").click((function(){$('input[placeholder="MM/dd/yyyy"]').each((function(){""===$(this).val()&&$(this).parent().find(".plHld").show()}))})),$('input[placeholder="MM/dd/yyyy"]').each((function(){$(this).attr("oninput","$$rightPanel.inputElementValueChanged(this)")})),$('input[placeholder="MM/dd/yyyy"]').on("input",(function(){var e=$(this).parent().find(".plHld");""===$(this).val()?e.show():e.hide()})),r.html("").append(o)},inputElementValueChanged:function(e){$(e).parent().find(".plHld").hide()},autoPopulateEntityInformation:function(e){var t="",a="",n="",i="",l="",s=$("#qCreate"),r=$("#"+EmailTabHomeUtil.detailViewParent).find("iframe").contents().find("#"+EmailTabHomeUtil.currentThreadMailDetailContainer);if(Q.entityInfo)t=Q.entityInfo.email,a=Q.entityInfo.name,n=Q.entityInfo.account?Q.entityInfo.account:"",i=Q.entityInfo.phone?Q.entityInfo.phone:"";else if($(r).find(".fromAddr")||$(r).find(".toAddr")){t=$("#unknownConvertbuttonDiv").attr("convertemail");var o=$(r).find(".etMailerNameFromHeader").val();a=o||$(r).find(".etSignLastname").val(),n=$(r).find(".etSignAccount").val(),i=$(r).find(".etSignPhone").val()}if(""!==t&&null!==t){if(a&&"null"!==a||(a=t.substring(0,t.indexOf("@"))),(!n||"null"===n)&&null!==(n=t.substring(t.indexOf("@")+1,t.lastIndexOf(".")))&&""!==n&&-1!==n.indexOf(".")){var c=n.substring(n.lastIndexOf(".")+1);null!==c&&""!==c&&"co"===c&&(n=n.substring(0,n.lastIndexOf(".")))}if(l=-1!==t.indexOf("@")?t.split("@")[1]:"","Leads"===e)if(null===$$rightPanel.publicDomainList){jQuery.ajax({type:"GET",url:Crm.getCrmBasePath()+"/View.do",data:"action=get_publicdomain_list",success:function(r){$$rightPanel.publicDomainList=$.parseJSON(r),n=$$rightPanel.publicDomainList.hasOwnProperty(l)?"":n,$$rightPanel.setVariablesForAutoPopulateEntityInformation(s,t,i,e,n,a)}})}else n=$$rightPanel.publicDomainList.hasOwnProperty(l)?"":n,$$rightPanel.setVariablesForAutoPopulateEntityInformation(s,t,i,e,n,a);else $$rightPanel.setVariablesForAutoPopulateEntityInformation(s,t,i,e,n,a)}},setVariablesForAutoPopulateEntityInformation:function(e,t,a,n,i,l){if(e.find('input[name="property(Email)"]').val(t),e.find('input[name="property(Phone)"]').val(a),"Leads"===n)e.find('input[name="property(Company)"]').val(i);else{var s=e.find('input[name="property(Account Name)"]');s.val(i),i&&$$rightPanel.showCreateAccountIfNotExists(i,s)}e.find('input[name="property(Last Name)"]').val(l)},showCreateAccountIfNotExists:function(e,t){var a="/crm/v2/Accounts/search?criteria=(Account_Name:equals:"+e+")",n={};networkUtils.setCsrfParam(n);var i={"X-CRM-ORG":Crm.userDetails.ZGID};(new crmRequestPool).initiate({action:a,type:"GET",data:n,headers:i,success:function(a){var n=t.parent();if(!a){var i=n.closest("form").prop("name").toString();$("[id='Account Name']").after('<span class="cP dIB ico-close-small2 mR5 svgIcons vam clearAccountName" onclick="$$rightPanel.clearAutoSuggestedAccount();"></span>');var l='<div id="sIlookFieldSrcWrap" class="sIlookFieldSrcWrap"><div id="sIlookupFieldAddNew" class="lookupFieldAddNew p10 whiteBg zi29 pR bT cP"><span class="link1 pL10 dIB" onclick="$$rightPanel.createNewAccount(&quot;'+i+"&quot;, undefined, &quot;"+e+'&quot;);">+ '+I18n.getMsg("crm.quickcreate.account.new")+"</span></div></div>";n.append(l)}}})},postionInfoDiv:function(){var e=$(".ac_noteWidth"),t=$("#Contacts_fldRow_ACCOUNTID .labelValCreate"),a=t.innerHeight(),n=t.offset();e.appendTo("body"),e.css({top:n.top+a,left:n.left})},clearAutoSuggestedAccount:function(){$("[id='Account Name']").val(""),$("#sIlookFieldSrcWrap").remove(),$(".clearAccountName").remove()},createNewAccount:function(e,t,a){t=null==t?"":t;var n="",i=$("[id='Account Name']").data("fieldid"),l=$("#qCreate").find("[name=layoutId]").val();e&&(n=Crm.getCrmBasePath()+"/QuickCreateAction.do?targetForm=createEntityForm0&module=Accounts&searchmodule=Accounts&layoutId="+t+"&fldName=Account+Name&fldId=property%28actName%3AAccount+Name%29&fldLabel=Account+Name&folLookupFieldId="+i+"&folLayoutId="+l+"&isAutoSuggestionFromEmail=true"),$(".outlookqCreate").length&&(n+="&isfromOutlookRightPanel=true",$$rightPanel.outlookNewWindow=window.open(Crm.getOrgSpecificURL(n),"_blank","location=no,toolbar=no,statusbar=no,menubar=no,directories=no,scrollbars=yes,menubar=no,resizable=no,left=0,top=0,width=800,height=1200"),setTimeout((function(){$$rightPanel.outlookNewWindow.$("#Crm_Accounts_ACCOUNTNAME").val(a)}),3e3)),Crm.isFromSalesInbox&&commonUtils.openCustomLookup(n,[],"topBandPopup",null,null,null,null,null,(function(){""!=t&&(showFreezeLayer(),$("#freezeBackGround").css("z-index","30")),$("#topBandPopup").css("z-index","249"),$("#Crm_Accounts_ACCOUNTNAME").val(a)}))},getRightPanel:function(e){"outlook"===e.rightPanelSource&&($("#module").attr("value",a),$("#entityId").attr("value",t)),void 0!==e.isMailAppsUser&&($$rightPanel.isMailAppsUser=e.isMailAppsUser,$$rightPanel.isMailAppsEnabledOrg=e.isMailAppsUser);var t=e.entityId?e.entityId:null,a=e.module?e.module:null,n=e.relEntityId?e.relEntityId:null,i=e.fromAddr?e.fromAddr:null,l=e.toAddr?e.toAddr:null,s="outlook"===e.rightPanelSource?e.fromAddr:EmailTabHomeUtil.getEmailToCreateEntity(i,l);$$rightPanel.fromPotential=null,$$rightPanel.potentialId=null,$$rightPanel.fromPotential="Potentials"===a||null,$$rightPanel.potentialId="Potentials"===a?t:null,t="Potentials"===a?n:t,a="Potentials"===a?"Contacts":a,delete $$rightPanel.rpCachedList,$$rightPanel.rpCachedList=new Array,delete $$rightPanel.rpTabOrder,"Colleagues"===a||"UnMatched"===a?($$rightPanel.rpSearchEmailAddr=encodeURIComponent(s),$$rightPanel.rpTabOrder=["conversation"],$$rightPanel.conversationsOrder=["mail"]):($$rightPanel.rpTabOrder=["info","conversation","timeline"],$$rightPanel.conversationsOrder=["mail","supportOrCases","social"]),$$rightPanel.currentModule=a,$$rightPanel.entityId=t,$$rightPanel.rpParentContainer="entityInfoOuterDiv",$$rightPanel.featureName="MailClient",Crm.isFromSalesInbox&&($$rightPanel.caller="salesinbox"),"UnMatched"===a?$$rightPanel.detailRightPanel("krp_tab1",$$rightPanel.rpTabOrder[0],!0,EmailTabHomeUtil.appendCreateEntityAfterMailFetch(i,l)):"Colleagues"===a?$$rightPanel.detailRightPanel("krp_tab1",$$rightPanel.rpTabOrder[0],!0,EmailTabHomeUtil.adjustRightpanelTab):$$rightPanel.detailRightPanel("krp_tab1",$$rightPanel.rpTabOrder[0],!0)},showLinkedInInfo:function(e,t){var a=Crm.getCrmBasePath()+"/SalesNavigator.do",n={action:"get_widgets"};n.module=t,n.entity_id=e;var i=$("#linked_in_container");($("#krp_Rightpanel_InfoInnerContainer").hide(),i.removeClass("dN"),void 0===i.attr("added"))&&(new crmRequestPool).initiate({action:a,data:n,success:function(e){e=JSON.parse(e);var t=RebrandLinkUtil.getProperty("LINKEDIN_URL"),a="";if(e.entity_linkedin_id){var n=$("#subvalue_EMAIL").text(),l=$(".krp_commonlink").text();a=t+"profile-matching/?from=crm&apiKey=750hg7mkzhryiz&profile=lead&crmSourceType=ZOHO&crmOrganizationId="+Crm.userDetails.ZGID+"&crmRecordId="+e.entity_linkedin_id,1===l.split(" ").length?a+="&firstName="+encodeURIComponent(l.split(" ")[0]):2===l.split(" ").length&&(a+="&firstName="+encodeURIComponent(l.split(" ")[0])+"&lastName="+encodeURIComponent(l.split(" ")[1])),void 0!==n&&""!==n&&(a+="&email="+encodeURIComponent(n))}if(e.entity_linkedin_id){var s=Math.floor(i.width()+17);i.css("height","640px"),e.entity_url=a;var r='<iframe src="'+e.entity_url+'" width="'+s+'" height="640px" frameborder="0" type="text/html"></iframe>';$("#iframeForLinkedin").html(r),i.attr("added",!0),$$rightPanel.linkedinPanelLoaded=!0}}})},showCrmInfo:function(){$("#linked_in_container").addClass("dN"),$("#krp_Rightpanel_InfoInnerContainer").show()},setFocusForOutlookCustomPane:function(){window&&window.external&&void 0!==window.external.focus&&window.external.focus()},showFollowers:function(e,t){var a=$(".flrs").offset().top-$("#krp_Rightpanel_InfoContainer").offset().top,n=$(".followers");a>150&&n.height()>150&&"150px"!==n.css("max-height")&&n.css("max-height","150px"),$("."+t).show()},init:function(e){if(e){window.isSandboxAcc=e.isSandboxAcc,window.InfoForPartialLoad=e.InfoForPartialLoad,Crm.isFromSalesInbox=e.isFromSalesInbox,Crm.env={},Crm.env.isDevelopment=e.isDevelopment,Crm.env.corsParams=e.corsParams,crmConstants.jsStaticDomain=e.jsStaticDomain,crmConstants.cssStaticDomain=e.cssStaticDomain,crmConstants.imgStaticDomain=e.imgStaticDomain,crmConstants.jsStaticPath=e.jsStaticPath,crmConstants.imgStaticPath=e.imgStaticPath,crmConstants.cssStaticPath=e.cssStaticPath,crmConstants.fp_imgStaticPath=e.fp_imgStaticPath,crmConstants.fp_jsStaticPath=e.fp_jsStaticPath,crmConstants.fp_cssStaticPath=e.fp_cssStaticPath,crmConstants.cdn_jsStaticPath=e.cdn_jsStaticPath,crmConstants.cdn_cssStaticPath=e.cdn_cssStaticPath,crmConstants.cdn_imgStaticPath=e.cdn_imgStaticPath,crmConstants.cdn_jsStaticPathForLyte=e.cdn_jsStaticPathForLyte,crmConstants.cdn_cssStaticPathForLyte=e.cdn_cssStaticPathForLyte,crmConstants.cdn_imagesStaticPathForLyte=e.cdn_imagesStaticPathForLyte,crmConstants.jsStaticPathForLyte=e.jsStaticPathForLyte,crmConstants.cssStaticPathForLyte=e.cssStaticPathForLyte,crmConstants.imagesStaticPathForLyte=e.imagesStaticPathForLyte,crmConstants.fp_imagesStaticPathForLyte=e.fp_imagesStaticPathForLyte,crmConstants.fp_jsStaticPathForLyte=e.fp_jsStaticPathForLyte,crmConstants.fp_cssStaticPathForLyte=e.fp_cssStaticPathForLyte,crmConstants.contactsPhotoURL=e.contactsPhotoURL,crmConstants.staticVersion=e.staticVersion,crmConstants.buildId=e.buildId,crmConstants.subVersion=e.subVersion,crmConstants.compression=e.compression,Crm.partnerName=e.partnerName,Crm.brandName=e.brandName,Crm.isApache=e.isApache,Crm.isCompression=e.isCompression,Crm.baiduAvailable=e.baiduAvailable,Crm.baiduUrl=e.baiduUrl,Crm.calPreferences=e.calPreferences,Crm.userDetails=e.userDetails,Crm.userDetails.jsLocation="China"===Crm.userDetails.DEPLOYMENT?"china/":"",Crm.userDetails.MODULE_LIST="object"!=typeof Crm.userDetails.MODULE_LIST?JSON.parse(Crm.userDetails.MODULE_LIST):Crm.userDetails.MODULE_LIST,Crm.moduleInfo=Crm.userDetails.MODULE_LIST,Crm.userDetails.data_storage=e.data_storage,Crm.userDetails.isStorageLimitReached=e.isStorageLimitReached,Notes.noteChk=e.noteChk,$$rightPanel.rightPanelBaseUrl=e.rightPanelBaseUrl,$$rightPanel.crmStaticPath=e.jsStaticPath,e.rightPanelSource&&($$rightPanel.rightPanelSource=e.rightPanelSource,Q.source=e.rightPanelSource),window.moduleApiMapping={},window.idModuleMapping={},window.moduleRecordMapping={};var t=e.tabs;crmTab.tabList=JSON.parse(t),timeFormat=Crm.userDetails.TIME_FORMAT;var a=e.moduleDetailedInfo;store.pushPayload("module",a.modules),window.Appointments&&void 0===window.Appointments.setStatus&&(window.Appointments=void 0,window.Appointments=Crm.getModuleObj("Appointments")),window.Tasks=void 0,window.Tasks=Crm.getModuleObj("Tasks"),Crm.bindDocumentEvents(),crmCalendar.init(),Events.init(),org.owasp.esapi.ESAPI.initialize(),RebrandLinkUtil.setProperties(e.rebrandClientProperties),EmailTabHomeUtil.getViewPort(),"Mozilla"===$L.userAgent.browser&&(Events.reminderNotificationImgUrl="/event_reminder_feed_firefox_e346c5c_.png"),$$rightPanel.registerPartials()}},resolveTimeLine:function(e,t,a,n,i){try{var l=JSON.parse(e);if(l.mailRange&&($$rightPanel.mailRange=l.mailRange),l.messages){var s=networkUtils.returnDependencyFiles(["crm-msg-utils.js"],crmConstants.jsStaticPathForLyte),r=networkUtils.returnDependencyFiles(["crm-msg-right-panel.js"],crmConstants.jsStaticPathForLyte),o=networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("bmrelatedlist")],null);Lyte.injectResources(r.concat(s).concat(o))}if(void 0!==l.isMailAppsEnabledOrg&&($$rightPanel.isMailAppsEnabledOrg=l.isMailAppsEnabledOrg),void 0!==l.isMailAppsUser&&($$rightPanel.isMailAppsUser=l.isMailAppsUser),"Projects"===l.module){var c=Handlebars.templates.ProjectsRightPanel(l);return $("#krp_loading_div").hide(),$("#kso_rightpanel_title").after(c),void $("#krp_Rightpanel_InfoContainer").show()}l.new_social&&(this.newSocial=!0),this.newSocial?networkUtils.loadFeatureScripts(["zcrm_zsoInteg.js",networkUtils.getI18nJSUrl("social")],(function(){void 0===t&&($("#krp_loading_div").css({height:$$rightPanel.windowHt-85}).show(),$$rightPanel.postDetailRightPanel(l,a,n),$$rightPanel.afterRender(),$$rightPanel.renderSplitActivity(l,a)),void 0!==l.interactions&&zsoTab.processRightPanel(l),Crm.bindEventForUserBCView()}),"undefined"!=typeof zsoTab):networkUtils.loadFeatureScripts(["zohocrm_zsocial.js","zohocrm_zsocialinteg.js",networkUtils.getI18nJSUrl("social")],(function(){Handlebars.registerPartial("SocialConversations",Handlebars.templates.SocialConversations),Handlebars.registerPartial("PostTemplate",Handlebars.templates.PostTemplate),Handlebars.registerPartial("twPost",Handlebars.templates.twPost),void 0!==l.permissions&&crmSocialUtil.processPermissions(l),void 0!==l.social_timeline&&(l.social_timeline=crmSocialUtil.processPostForKanbanView(l.social_timeline)),void 0!==t?($(crmSocial.timeLineViewMore).parent().remove(),$("#krpSocTimeline").append(Handlebars.templates.PostTemplate(l.social_timeline))):(void 0!==l.interactions&&(Handlebars.registerPartial("twPostActions",Handlebars.templates.twPostActions),Handlebars.registerPartial("fbPostActions",Handlebars.templates.fbPostActions),l.interactions=crmSocialUtil.processPostForKanbanView(l.interactions)),$("#"+this.rpParentContainer+" #krp_loading_div").css({height:$$rightPanel.windowHt-85}).show(),$$rightPanel.postDetailRightPanel(l,a,n),$$rightPanel.afterRender(),$$rightPanel.renderSplitActivity(l,a))}),"undefined"!=typeof crmSocial),Crm.bindEventForUserBCView()}catch(t){$$rightPanel.rejectTimeLine(e)}$(".outlookqCreate").length&&$$rightPanel.bindClickEventForOutlook()},rejectTimeLine:function(e){$("#"+$$rightPanel.rpParentContainer).html(e),$("#"+this.rpParentContainer+" #krp_loading_div").hide();var t=$("#notAccessibleMsgContainer");t.removeClass("leadbox"),t.css("padding-left","30px"),$(".kso_CautionLeft,.kso_CautionRight").attr("style",""),$(".kso_CautionRight").find("h2").css({"margin-top":"15px","text-align":"center","line-height":"28px"}),$(".kso_CautionLeft").parent("div").css("margin","0 auto")},renderSplitActivity:function(e,t){var a=networkUtils.returnDependencyFiles(["crm-activity-right-panel.js"],crmConstants.jsStaticPathForLyte),n=networkUtils.returnDependencyFiles(["crm-activity-right-panel.css"],crmConstants.cssStaticPathForLyte);a=a.concat(n),Lyte.injectResources(a,(function(e){"error"===e.type&&crmui.showMsgBand("error",I18n.getMsg("crm.zes.mobile.error.internal"),5e3)}),(function(){Crm.isActivitySplitDone&&e&&e.right_panel_data&&"timeline"!==t&&(e.right_panel_data.entity_id=e.entityId,e.right_panel_data.rel_module=e.module,$L("#activity_right_panel_new")[0].setAttribute("id","activity_right_panel_new_1"),Lyte.Component.render("crm-activity-right-panel",e.right_panel_data,"#activity_right_panel_new_1"))}))},hideElemOnMouseOut:function(e){setTimeout((function(){$("#"+e).hide()}),500)}};$(document).ready((function(){rightPanelObj.windowHt=renderingUtils.windowHeight}));var $$rightPanel="object"==typeof $$rightPanel?$.extend(rightPanelObj,$$rightPanel):rightPanelObj;Handlebars.registerHelper("getFormattedPhoneNo",(function(e){var t=e;return t&&t.length&&"en_US"==Crm.userDetails.COUNTRY_LOCALE&&t.match(/[0-9]/)&&(t="(",10==e.length?t+=e.substring(0,3)+") "+e.substring(3,6)+"-"+e.substring(6,10):9==e.length?t+=e.substring(0,5)+")-"+e.substring(5,9):t=e),t})),window.onresize=function(){$$rightPanel.windowHt=renderingUtils.windowHeight},function(){var e=Handlebars.template,t=Handlebars.templates=Handlebars.templates||{};t.Activities=e({1:function(e,t,a,n,i){var l,s=null!=t?t:{};return" "+(null!=(l=a.ifEquals.call(s,null!=t?t.activityType:t,"Events",{name:"ifEquals",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i}))?l:"")+" "+(null!=(l=a.ifEquals.call(s,null!=t?t.activityType:t,"Tasks",{name:"ifEquals",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))?l:"")+" "+(null!=(l=a.ifEquals.call(s,null!=t?t.activityType:t,"Calls",{name:"ifEquals",hash:{},fn:e.program(7,i,0),inverse:e.noop,data:i}))?l:"")+" "},2:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression,o=e.lambda;return' <tr>  <td class="w25 vat"><span class="op5 mT3"><crmutil-icon icon-name="events" icon-class="zcicn-events crmBaseIcon "></crmutil-icon></span></td> <td class="PickListColTd"> <div class="f13 fontSmoothAntialiased pR"> '+(null!=(l=a.ifNotEquals.call(s,null!=t?t.colorcode:t,"",{name:"ifNotEquals",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))?l:"")+' <a href="'+r(a.getCrmBasePath.call(s,{name:"getCrmBasePath",hash:{},data:i}))+"/EntityInfo.do?id="+r(o(null!=t?t.activityId:t,t))+"&module="+r(o(null!=t?t.activityType:t,t))+'" class="krp_link f15 feedsfontsemibold mB5" target="_blank">'+r(o(null!=t?t.subject:t,t))+'</a> </div> <div class="fontSmoothAntialiased"> <span class="f13 feedsGrayclr">'+r(o(null!=t?t.startDate:t,t))+'</span> <span class="pLR10 f13 feedsGrayclr">-</span> <span class="f13 feedsGrayclr">'+r(o(null!=t?t.endDate:t,t))+"</span> </div> </td> </tr> "},3:function(e,t,a,n,i){var l=e.lambda,s=e.escapeExpression;return' <span class="evtPickColdot"  style="width: 8px;height: 8px;border-radius: 9px;background: '+s(l(null!=t?t.colorcode:t,t))+';top: 5px;left: -10px;display: inline-block;position:absolute;" data-zcqa="rightPanel_color_'+s(l(null!=t?t.subject:t,t))+'"></span> '},5:function(e,t,a,n,i){var l=e.escapeExpression,s=e.lambda;return' <tr>  <td class="w20"><span class="op5 mT3"><crmutil-icon icon-name="tasks" icon-class="zcicn-tasks crmBaseIcon "></crmutil-icon></span></td> <td class="vtop"> <div class="f13 fontSmoothAntialiased"> <a href="'+l(a.getCrmBasePath.call(null!=t?t:{},{name:"getCrmBasePath",hash:{},data:i}))+"/EntityInfo.do?id="+l(s(null!=t?t.activityId:t,t))+"&module="+l(s(null!=t?t.activityType:t,t))+'" class="krp_link f15 feedsfontsemibold mB5" target="_blank">'+l(s(null!=t?t.subject:t,t))+'</a> &nbsp; <small class="f13 feedsGrayclr">'+l(s(null!=t?t.endDate:t,t))+"</small></div> </td> </tr> "},7:function(e,t,a,n,i){var l=e.escapeExpression,s=e.lambda;return' <tr>  <td class="w20"><span class="op5 mT3"><crmutil-icon icon-name="calls" icon-class="zcicn-calls crmBaseIcon "></crmutil-icon></span></td> <td class="vtop"> <div class="f13 fontSmoothAntialiased"> <a href="'+l(a.getCrmBasePath.call(null!=t?t:{},{name:"getCrmBasePath",hash:{},data:i}))+"/EntityInfo.do?id="+l(s(null!=t?t.activityId:t,t))+"&module="+l(s(null!=t?t.activityType:t,t))+'" class="krp_link f15 feedsfontsemibold mB5" target="_blank">'+l(s(null!=t?t.subject:t,t))+'</a> &nbsp; <small class="f13 feedsGrayclr">'+l(s(null!=t?t.endDate:t,t))+"</small></div> </td> </tr> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l;return" "+(null!=(l=a.each.call(null!=t?t:{},null!=t?t.activities:t,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?l:"")+" "},useData:!0}),t.Cases=e({1:function(e,t,a,n,i,l,s){var r,o=e.lambda,c=e.escapeExpression,d=null!=t?t:{};return' <div class="krp_each_mail_container" onclick="$(this).find(\'.krp_support_cases_link\')[0].click();sE(event);"> <span class="krp_mail_sender_info_container"> <div class="krp_mail_sender_info"> <div class="krp_mail_date" title="'+c(o(null!=t?t.SENTTIME_ToolTip:t,t))+'">'+c(o(null!=t?t.SENTTIME:t,t))+"</div> "+(null!=(r=a.ifEquals.call(d,null!=s[1]?s[1].supportOrCasesClue:s[1],"support",{name:"ifEquals",hash:{},fn:e.program(2,i,0,l,s),inverse:e.program(4,i,0,l,s),data:i}))?r:"")+' </div> <div class="krp_mail_sub_att_container"> <div class="krp_mail_subject"> <span class="krp_mail_sender1">'+c(o(null!=(r=null!=t?t.agent:t)?r.lastName:r,t))+'</span> <span class="pLR10">&middot;</span> '+(null!=(r=a.if.call(d,null!=t?t.threadCount:t,{name:"if",hash:{},fn:e.program(6,i,0,l,s),inverse:e.noop,data:i}))?r:"")+" "+c(o(null!=t?t.ticketNumber:t,t))+" </div> </div> </span> </div> "},2:function(e,t,a,n,i){var l=e.escapeExpression;return' <a class="krp_support_cases_link whois" href="javascript:deskInteg.showDeskPopupForWidgets(\''+l(a.encodeJS.call(null!=t?t:{},null!=t?t.encryptedId:t,{name:"encodeJS",hash:{},data:i}))+'\')" onclick="sE(event)"> '+l(e.lambda(null!=t?t.subject:t,t))+" </a> "},4:function(e,t,a,n,i){var l=e.escapeExpression,s=e.lambda;return' <a href="'+l(a.getCrmBasePath.call(null!=t?t:{},{name:"getCrmBasePath",hash:{},data:i}))+"/EntityInfo.do?module=Cases&id="+l(s(null!=t?t.caseid:t,t))+'" class="krp_support_cases_link krp_link whois" target="_blank" onclick="sE(event)">'+l(s(null!=t?t.subject:t,t))+"</a> "},6:function(e,t,a,n,i){var l=e.escapeExpression;return" "+l(e.lambda(null!=t?t.threadCount:t,t))+" "+l(a.getI18n.call(null!=t?t:{},"crm.social.one.or.many.threads",{name:"getI18n",hash:{},data:i}))+'<span class="pLR10">&middot;</span> '},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i,l,s){var r;return" "+(null!=(r=a.each.call(null!=t?t:{},null!=t?t.supportOrCases:t,{name:"each",hash:{},fn:e.program(1,i,0,l,s),inverse:e.noop,data:i}))?r:"")+" "},useData:!0,useDepths:!0}),t.Conversation=e({1:function(e,t,a,n,i){var l,s=null!=t?t:{};return' <div id="krp_social_conversation" class="p20"> '+(null!=(l=a.if.call(s,null!=t?t.new_social:t,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i}))?l:"")+' <div class="bb0"> <div class="krp_right_heading bb0">'+e.escapeExpression(a.getI18n.call(s,"crm.label.social.convo",{name:"getI18n",hash:{},data:i}))+'</div> </div> <div id="kso_interactions_list" class="socInteractionDetAll p0"> '+(null!=(l=a.if.call(s,null!=t?t.interactions:t,{name:"if",hash:{},fn:e.program(6,i,0),inverse:e.program(11,i,0),data:i}))?l:"")+" </div> </div> "},2:function(e,t,a,n,i){var l;return' <div class="socFilDropDown profileIds mB20" ids=""> <span class="dIB vam f13 color_6">Brand:</span> <div class="newSelect dIB vam mL10"> <select id="socFilterByBrands" class="socFilterByBrands f13" tabindex="-1" aria-hidden="true" onchange="zsoTab.connectionBrandChange(\'right_panel\')"> '+(null!=(l=a.each.call(null!=t?t:{},null!=t?t.brands:t,{name:"each",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))?l:"")+" </select> </div> </div> "},3:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression;return' <option value="'+r(s(null!=t?t.id:t,t))+'" '+(null!=(l=a.if_eq.call(null!=t?t:{},i&&i.index,0,{name:"if_eq",hash:{},fn:e.program(4,i,0),inverse:e.noop,data:i}))?l:"")+" >"+r(s(null!=t?t.name:t,t))+"</option> "},4:function(e,t,a,n,i){return"selected"},6:function(e,t,a,n,i){var l;return" "+(null!=(l=a.if.call(null!=t?t:{},null!=t?t.new_social:t,{name:"if",hash:{},fn:e.program(7,i,0),inverse:e.program(9,i,0),data:i}))?l:"")+" "},7:function(e,t,a,n,i){return" "},9:function(e,t,a,n,i){var l;return" "+(null!=(l=e.invokePartial(n.SocialConversations,t,{name:"SocialConversations",data:i,helpers:a,partials:n,decorators:e.decorators}))?l:"")+" "},11:function(e,t,a,n,i){return' <div class="lightgray">'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.nsocial.no.interactions",{name:"getI18n",hash:{},data:i}))+"</div> "},13:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression,o=e.lambda;return' <div class="bb0"> '+(null!=(l=a.ifEquals.call(s,null!=t?t.isMailAddonActive:t,"true",{name:"ifEquals",hash:{},fn:e.program(14,i,0),inverse:e.program(16,i,0),data:i}))?l:"")+" "+(null!=(l=a.ifEquals.call(s,null!=t?t.isMailAddonActive:t,"true",{name:"ifEquals",hash:{},fn:e.program(21,i,0),inverse:e.noop,data:i}))?l:"")+' </div> <div id="kso_mails_list" onclick="sE(event)"> '+(null!=(l=e.invokePartial(n.MailConversations,t,{name:"MailConversations",data:i,helpers:a,partials:n,decorators:e.decorators}))?l:"")+' </div> <div class="aligncenter pR '+r(a.ifEqualsGetStyle.call(s,null!=t?t.mailConversationsCount:t,null!=t?t.mailConversationsLimit:t,"showViewMore",{name:"ifEqualsGetStyle",hash:{},data:i}))+'" style=" height:0px;"> <a id="kso_mails_view_more" href="javascript:;" onclick="$$rightPanel.loadMore(this, \'load_more_mails\')" class="krp_graylink krp_morearrow" mailsOwnerId="'+r(o(null!=t?t.mailsOwnerId:t,t))+'" index="'+r(o(null!=t?t.mailConversationsIndex:t,t))+'" > '+r(a.getI18n.call(s,"crm.nsocial.tab.view.more",{name:"getI18n",hash:{},data:i}))+" </a> </div> "},14:function(e,t,a,n,i){var l=e.escapeExpression,s=e.lambda;return' <div class="krp_right_heading bb0"> '+l(a.getI18n.call(null!=t?t:{},"crm.zcampaign.mail",{name:"getI18n",hash:{},data:i}))+' <div class="fR f12 cP" onclick="$(\'#krp_mail_users\').show(); sE(event)"> <span class="dArw"></span> <span class="fR krp_black_txt f12" userId="'+l(s(null!=t?t.currentUserId:t,t))+'" id="krp_sel_mail_user"> '+l(s(null!=t?t.currentUserName:t,t))+" </span> </div> </div> "},16:function(e,t,a,n,i){var l;return" "+(null!=(l=a.if.call(null!=t?t:{},null!=t?t.showMailConversationTitle:t,{name:"if",hash:{},fn:e.program(17,i,0),inverse:e.program(19,i,0),data:i}))?l:"")+" "},17:function(e,t,a,n,i){return' <div class="krp_right_heading bb0"> '+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.zcampaign.mail",{name:"getI18n",hash:{},data:i}))+" </div> "},19:function(e,t,a,n,i){return' <div class="krp_right_heading bb0"> '+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.label.all.sent",{name:"getI18n",hash:{},data:i}))+" </div> "},21:function(e,t,a,n,i){var l,s=null!=t?t:{};return' <div style="right:12px;" class="krp_ddM pA dN zI10" id="krp_mail_users" data-close="true" onclick="$$rightPanel.getMails(event);$$rightPanel.bindScrollForMailUsers()"> <div id="krp_mail_users_inner"> <input type="hidden" name="curr_selected_view" id="curr_selected_view" userId="'+e.escapeExpression(e.lambda(null!=t?t.currentUserId:t,t))+'" mailType="" /> '+(null!=(l=a.if.call(s,null!=t?t.isMailAppsUser:t,{name:"if",hash:{},fn:e.program(22,i,0),inverse:e.program(29,i,0),data:i}))?l:"")+" "+(null!=(l=a.if.call(s,null!=t?t.conversedWith:t,{name:"if",hash:{},fn:e.program(31,i,0),inverse:e.noop,data:i}))?l:"")+" "+(null!=(l=a.each.call(s,null!=t?t.conversedWith:t,{name:"each",hash:{},fn:e.program(33,i,0),inverse:e.noop,data:i}))?l:"")+" "+(null!=(l=a.if.call(s,null!=t?t.notConversedWith:t,{name:"if",hash:{},fn:e.program(35,i,0),inverse:e.noop,data:i}))?l:"")+" "+(null!=(l=a.each.call(s,null!=t?t.notConversedWith:t,{name:"each",hash:{},fn:e.program(37,i,0),inverse:e.noop,data:i}))?l:"")+" "+(null!=(l=a.if.call(s,null!=t?t.notConversedWith:t,{name:"if",hash:{},fn:e.program(39,i,0),inverse:e.noop,data:i}))?l:"")+" "+(null!=(l=a.if.call(s,null!=t?t.imapPublicUsers:t,{name:"if",hash:{},fn:e.program(41,i,0),inverse:e.noop,data:i}))?l:"")+" "+(null!=(l=a.each.call(s,null!=t?t.imapPublicUsers:t,{name:"each",hash:{},fn:e.program(43,i,0),inverse:e.noop,data:i}))?l:"")+" "+(null!=(l=a.if.call(s,null!=t?t.imapPublicUsers:t,{name:"if",hash:{},fn:e.program(39,i,0),inverse:e.noop,data:i}))?l:"")+" </div> </div> "},22:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression;return' <a href="javascript:;" userId="-1" username="'+r(a.getI18n.call(s,"crm.label.all.sent",{name:"getI18n",hash:{},data:i}))+'"> '+r(a.getI18n.call(s,"crm.label.all.sent",{name:"getI18n",hash:{},data:i}))+" </a> "+(null!=(l=a.if.call(s,null!=t?t.isALLOptOnly:t,{name:"if",hash:{},fn:e.program(23,i,0),inverse:e.noop,data:i}))?l:"")+" "+(null!=(l=a.if.call(s,null!=t?t.isAllImapPresent:t,{name:"if",hash:{},fn:e.program(25,i,0),inverse:e.noop,data:i}))?l:"")+" "+(null!=(l=a.if.call(s,null!=t?t.isAllPopPresent:t,{name:"if",hash:{},fn:e.program(27,i,0),inverse:e.noop,data:i}))?l:"")+" "},23:function(e,t,a,n,i){var l=e.lambda,s=e.escapeExpression;return' <a href="javascript:;" userId="-2" mailType="all_mail" data-zcqa="emc_User_'+s(l(null!=t?t.ALL_MAIL_VIEW:t,t))+'" username="'+s(l(null!=t?t.ALL_MAIL_VIEW:t,t))+'"> '+s(l(null!=t?t.ALL_MAIL_VIEW:t,t))+" </a> "},25:function(e,t,a,n,i){var l=e.lambda,s=e.escapeExpression;return' <a href="javascript:;" userId="-2" mailType="imap_all" data-zcqa="emc_User_'+s(l(null!=t?t.IMAP_ALL:t,t))+'" username="'+s(l(null!=t?t.IMAP_ALL:t,t))+'"> '+s(l(null!=t?t.IMAP_ALL:t,t))+" </a> "},27:function(e,t,a,n,i){var l=e.lambda,s=e.escapeExpression;return' <a href="javascript:;" userId="-2" mailType="pop_all" data-zcqa="emc_User_'+s(l(null!=t?t.POP_ALL:t,t))+'" username="'+s(l(null!=t?t.POP_ALL:t,t))+'"> '+s(l(null!=t?t.POP_ALL:t,t))+" </a> "},29:function(e,t,a,n,i){var l=null!=t?t:{},s=e.escapeExpression;return' <a href="javascript:;" userId="-1"  username="'+s(a.getI18n.call(l,"crm.label.all.sent",{name:"getI18n",hash:{},data:i}))+'"> '+s(a.getI18n.call(l,"crm.label.all.sent",{name:"getI18n",hash:{},data:i}))+" </a> "},31:function(e,t,a,n,i){return' <span class="lightgray">'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.zmail.public.users",null!=t?t.brandName:t,{name:"getI18n",hash:{},data:i}))+"</span> "},33:function(e,t,a,n,i){var l=e.lambda,s=e.escapeExpression;return' <a href="javascript:;" userId="'+s(l(null!=t?t.userId:t,t))+'" username="'+s(l(null!=t?t.userName:t,t))+'">'+s(l(null!=t?t.userName:t,t))+"*</a> "},35:function(e,t,a,n,i){return' <span class="f10 lightgray">----------</span> <span id="krp_not_conversed_list" class="p0"> '},37:function(e,t,a,n,i){var l=e.lambda,s=e.escapeExpression;return' <a href="javascript:;" userId="'+s(l(null!=t?t.userId:t,t))+'" username="'+s(l(null!=t?t.userName:t,t))+'">'+s(l(null!=t?t.userName:t,t))+"</a> "},39:function(e,t,a,n,i){return" </span> "},41:function(e,t,a,n,i){return' <span class="lightgray">'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"IMAP Shared Users",{name:"getI18n",hash:{},data:i}))+'</span> <span id="krp_imap_users" class="p0"> '},43:function(e,t,a,n,i){var l=e.lambda,s=e.escapeExpression;return' <a href="javascript:;"  userId="'+s(l(null!=t?t.userId:t,t))+'" username="'+s(l(null!=t?t.userName:t,t))+'">'+s(l(null!=t?t.userName:t,t))+"</a> "},45:function(e,t,a,n,i){var l;return" "+(null!=(l=a.if.call(null!=t?t:{},null!=t?t.supportOrCasesClue:t,{name:"if",hash:{},fn:e.program(46,i,0),inverse:e.noop,data:i}))?l:"")+" "},46:function(e,t,a,n,i){var l,s=null!=t?t:{};return" "+(null!=(l=a.ifEquals.call(s,null!=t?t.supportOrCasesClue:t,"support",{name:"ifEquals",hash:{},fn:e.program(47,i,0),inverse:e.program(49,i,0),data:i}))?l:"")+' <div id="kso_cases_list" class="cB"> '+(null!=(l=a.if.call(s,null!=t?t.supportOrCases:t,{name:"if",hash:{},fn:e.program(52,i,0),inverse:e.program(54,i,0),data:i}))?l:"")+" </div> "+(null!=(l=a.ifEquals.call(s,null!=t?t.supportOrCasesCount:t,null!=t?t.supportOrCasesLimit:t,{name:"ifEquals",hash:{},fn:e.program(62,i,0),inverse:e.noop,data:i}))?l:"")+" "},47:function(e,t,a,n,i){return' <div class="krp_right_heading bb0">'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.social.open.support",{name:"getI18n",hash:{},data:i}))+"</div> "},49:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression;return' <div class="krp_right_heading bb0 fL">'+r(a.getI18n.call(s,"Open",{name:"getI18n",hash:{},data:i}))+" "+r(e.lambda(null!=t?t.casesDispName:t,t))+"</div> "+(null!=(l=a.unless.call(s,null!=t?t.supportOrCasesViewPermi:t,{name:"unless",hash:{},fn:e.program(50,i,0),inverse:e.noop,data:i}))?l:"")+" "},50:function(e,t,a,n,i){return' <span class="krp_warning_icon fL mL5 mT4"></span> '},52:function(e,t,a,n,i){var l;return" "+(null!=(l=e.invokePartial(n.Cases,t,{name:"Cases",data:i,helpers:a,partials:n,decorators:e.decorators}))?l:"")+" "},54:function(e,t,a,n,i){var l;return" "+(null!=(l=a.ifEquals.call(null!=t?t:{},null!=t?t.supportOrCasesClue:t,"support",{name:"ifEquals",hash:{},fn:e.program(55,i,0),inverse:e.program(57,i,0),data:i}))?l:"")+" "},55:function(e,t,a,n,i){return' <div class="lightgray">'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.social.empty.support",{name:"getI18n",hash:{},data:i}))+"</div> "},57:function(e,t,a,n,i){var l;return" "+(null!=(l=a.if.call(null!=t?t:{},null!=t?t.supportOrCasesViewPermi:t,{name:"if",hash:{},fn:e.program(58,i,0),inverse:e.program(60,i,0),data:i}))?l:"")+" "},58:function(e,t,a,n,i){return' <div class="lightgray">'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.social.empty.cases","cases",{name:"getI18n",hash:{},data:i}))+"</div> "},60:function(e,t,a,n,i){return' <div class="lightgray mB20 mT8 fL">'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.krp.insufficient.permission",null!=t?t.casesDispName:t,{name:"getI18n",hash:{},data:i}))+"</div> "},62:function(e,t,a,n,i){var l=e.escapeExpression;return' <div class="mT10 aligncenter pR" style="height:0px;"> <a href="javascript:;" id="kso_cases_view_more" onclick="$$rightPanel.loadMore(this, \'load_more_cases\')" index="'+l(e.lambda(null!=t?t.supportOrCasesIndex:t,t))+'" class="krp_graylink krp_morearrow"> '+l(a.getI18n.call(null!=t?t:{},"crm.nsocial.tab.view.more",{name:"getI18n",hash:{},data:i}))+" </a> </div> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l,s=null!=t?t:{};return' <div id="krp_Conversation_Container" class="pR krp_containers"> <div id="krp_Conversation_InnerContainer">  '+(null!=(l=a.unless.call(s,null!=t?t.hideSocial:t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?l:"")+'   <div id="krp_mail_conversation" class="pT20 p20 boxBB"> <input id="isNewMailRLEnabled" value="'+e.escapeExpression(e.lambda(null!=t?t.isNewMailRLEnabled:t,t))+'" class="hide"/> '+(null!=(l=a.if.call(s,null!=t?t.isMailAddonActive:t,{name:"if",hash:{},fn:e.program(13,i,0),inverse:e.noop,data:i}))?l:"")+' </div>   <div id="krp_support_or_cases_conversation" class="p20"> '+(null!=(l=a.ifEquals.call(s,null!=t?t.module:t,"Contacts",{name:"ifEquals",hash:{},fn:e.program(45,i,0),inverse:e.noop,data:i}))?l:"")+' </div>  <div id="krp_message_conversation" class="p20"> </div> </div> </div>  '},usePartial:!0,useData:!0}),t.EntityInfo=e({1:function(e,t,a,n,i){var l,s=null!=t?t:{};return' <td width="48" class="pR10 vtop" valign="top"> <div data-id="online-entity-'+(null!=(l=e.lambda(null!=t?t.entityId:t,t))?l:"")+'" class="krp-profile-pic '+(null!=(l=a.addOnlineClass.call(s,null!=t?t.module:t,null!=t?t.entityId:t,{name:"addOnlineClass",hash:{},data:i}))?l:"")+'"> '+(null!=(l=a.if.call(s,null!=(l=null!=t?t.info:t)?l.photo_id:l,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.program(4,i,0),data:i}))?l:"")+" </div> </td> "},2:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression;return' <img src="'+r(a.getCrmBasePath.call(s,{name:"getCrmBasePath",hash:{},data:i}))+"/EntityImageAttach.do?action_module="+r(a.encodeURL.call(s,null!=t?t.module:t,{name:"encodeURL",hash:{},data:i}))+"&entityId="+r(e.lambda(null!=t?t.entityId:t,t))+"&actionName=readImage&fileId="+r(a.encodeURL.call(s,null!=(l=null!=t?t.info:t)?l.photo_id:l,{name:"encodeURL",hash:{},data:i}))+'" /> '},4:function(e,t,a,n,i){return' <img src="'+e.escapeExpression(a.img_link.call(null!=t?t:{},{name:"img_link",hash:{},data:i}))+'/nophoto_80ea3af_.png"> '},6:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression;return' <link-to lt-prop-route="crm.tab.module.entity.detail" lt-prop-dp=\'["Activities","'+r(s(null!=t?t.entityId:t,t))+'"]\' lt-prop-qp =\'{"sub_module" : "'+r(s(null!=t?t.module:t,t))+'"}\' lt-prop-class="krp_commonlink f15 feedsInfoUserName" lt-prop-target="_blank">'+r(s(null!=(l=null!=t?t.info:t)?l.full_name:l,t))+"</link-to> "},8:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression;return' <link-to lt-prop-route="crm.tab.module.entity.detail" lt-prop-dp=\'["'+r(s(null!=t?t.module:t,t))+'","'+r(s(null!=t?t.entityId:t,t))+'"]\' lt-prop-class="krp_commonlink f15 feedsInfoUserName" lt-prop-target="_blank">'+r(s(null!=(l=null!=t?t.info:t)?l.full_name:l,t))+"</link-to> "},10:function(e,t,a,n,i){return' <span class="feedsmoduleName f13">'+e.escapeExpression(a.getI18n.call(null!=t?t:{},null!=t?t.moduleSingularName:t,{name:"getI18n",hash:{},data:i}))+"</span> "},12:function(e,t,a,n,i){return' <span class="feedsmoduleName f13">'+e.escapeExpression(e.lambda(null!=t?t.moduleSingularName:t,t))+"</span> "},14:function(e,t,a,n,i){var l;return" "+(null!=(l=a.unless.call(null!=t?t:{},null!=t?t.isSendMailLocked:t,{name:"unless",hash:{},fn:e.program(15,i,0),inverse:e.noop,data:i}))?l:"")+" "},15:function(e,t,a,n,i){var l;return" "+(null!=(l=a.if.call(null!=t?t:{},null!=(l=null!=t?t.info:t)?l.email:l,{name:"if",hash:{},fn:e.program(16,i,0),inverse:e.noop,data:i}))?l:"")+" "},16:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression,o=e.lambda;return' <input href="javascript:;" onclick="sE(event);EntSendMail(\''+r(a.encodeJS.call(s,null!=t?t.module:t,{name:"encodeJS",hash:{},data:i}))+"','"+r(o(null!=t?t.entityId:t,t))+"','','','true');\" type=\"button\" value=\""+r(a.getI18n.call(s,"crm.button.license.sendMail",{name:"getI18n",hash:{},data:i}))+'" class="newbutton primarybtn bt-smallprimarybtn dIB cursorPointer m10 mL0"> <span class="hide" id="subvalue_EMAIL" name="subvalue_Email">'+r(o(null!=(l=null!=t?t.info:t)?l.email:l,t))+'</span> <input type="hidden" value="'+r(o(null!=t?t.module:t,t))+'" name="whoidmodule" id="whoidmodule"> '},18:function(e,t,a,n,i){return' <tr > <td class="w20" valign="middle"><div class="blockedImageSec dIB vat"> <span class="lockedInfoIco_dv dIB pR5"></span> </div> </td> <td><div class="dIB vat"> <p class="redText f13">'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.privacy.listview.consent.locked",{name:"getI18n",hash:{},data:i}))+"</p> </div> </td> </tr> "},20:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression,o=e.lambda;return' <div class="feedsInfoInnerEle"> <table cellspacing="0" cellpadding="0" class="contactInfo" width="100%"> <tr> <td class="w20" valign="top"><div class="kanbanviewImages cName"></div></td> '+(null!=(l=a.if.call(s,null!=(l=null!=t?t.info:t)?l.accountId:l,{name:"if",hash:{},fn:e.program(21,i,0),inverse:e.program(23,i,0),data:i}))?l:"")+' </tr> <tr> <td class="w20"><div class="kanbanviewImages lPhone"></div></td> <td><div class="f14 grayTxt color_14161D">'+r(a.getFormattedPhoneNo.call(s,null!=(l=null!=t?t.info:t)?l.phone:l,{name:"getFormattedPhoneNo",hash:{},data:i}))+'</div></td> </tr> <tr> <td class="w20"><div class="kanbanviewImages mPhone"></div></td> <td><div class="f14 grayTxt color_14161D">'+r(a.getFormattedPhoneNo.call(s,null!=(l=null!=t?t.info:t)?l.mobile:l,{name:"getFormattedPhoneNo",hash:{},data:i}))+'</div></td> </tr> <tr> <td class="w20"><div class="kanbanviewImages mailId"></div></td> <td><div class="f14 grayTxt color_14161D"><a class="link dvemaillink" href="mailto:'+r(o(null!=(l=null!=t?t.info:t)?l.email:l,t))+'">'+r(o(null!=(l=null!=t?t.info:t)?l.email:l,t))+'</a></div></td> </tr> </table> <input id="entityName" type="hidden" name="entityName" value="'+r(o(null!=(l=null!=t?t.info:t)?l.full_name:l,t))+'"> </div> '},21:function(e,t,a,n,i){var l,s=e.escapeExpression,r=e.lambda;return' <td> <div class="f14 grayTxt color_14161D"> <a href="'+s(a.getCrmBasePath.call(null!=t?t:{},{name:"getCrmBasePath",hash:{},data:i}))+"/EntityInfo.do?id="+s(r(null!=(l=null!=t?t.info:t)?l.accountId:l,t))+'&module=Accounts" class="krp_link krp_graylink1" target="_blank"> '+s(r(null!=(l=null!=t?t.info:t)?l.account_name:l,t))+' </a> <input id="accountId" type="hidden" name="accountId" value="'+s(r(null!=(l=null!=t?t.info:t)?l.accountId:l,t))+'"> <input id="accountName" type="hidden" name="accountName" value="'+s(r(null!=(l=null!=t?t.info:t)?l.account_name:l,t))+'"> </div> </td> '},23:function(e,t,a,n,i){var l;return' <td><div class="f14 grayTxt color_14161D">'+e.escapeExpression(e.lambda(null!=(l=null!=t?t.info:t)?l.account_name:l,t))+"</div></td> "},25:function(e,t,a,n,i){var l;return' <div class="feedsInfoEle boxBB w100per pB15"> <table cellspacing="0" cellpadding="0" class="contactInfo" width="100%"> '+(null!=(l=a.each.call(null!=t?t:{},null!=(l=null!=t?t.info:t)?l.bcDetails:l,{name:"each",hash:{},fn:e.program(26,i,0),inverse:e.noop,data:i}))?l:"")+' </table> <input id="entityName" type="hidden" name="entityName" value="'+e.escapeExpression(e.lambda(null!=(l=null!=t?t.info:t)?l.full_name:l,t))+'"> </div> '},26:function(e,t,a,n,i){var l;return' <tr> <td><div class="f15 feedsTextclr">'+e.escapeExpression(e.lambda(null!=t?t.labelName:t,t))+'</div></td> <td><div class="f15 feedsTextclr"> '+(null!=(l=a.if.call(null!=t?t:{},null!=t?t.colorCode:t,{name:"if",hash:{},fn:e.program(27,i,0),inverse:e.program(29,i,0),data:i}))?l:"")+" </div></td> </tr> "},27:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression;return' <span data-zcqa="colorcode_'+r(s(null!=t?t.labelName:t,t))+'" class="colorAppliedPicklist" style="'+r(a.getPLStyleObj.call(null!=t?t:{},null!=t?t.colorCode:t,null!=t?t.labelValue:t,{name:"getPLStyleObj",hash:{},data:i}))+'">'+(null!=(l=s(null!=t?t.labelValue:t,t))?l:"")+"</span> "},29:function(e,t,a,n,i){var l;return" "+(null!=(l=e.lambda(null!=t?t.labelValue:t,t))?l:"")+" "},31:function(e,t,a,n,i){return' <li class="p5 pL10 pR10">'+e.escapeExpression(e.lambda(t,t))+"</li> "},33:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression;return' <div class="fontSmoothAntialiased mt5 bb0"> '+(null!=(l=a.if.call(s,null!=t?t.showCreatePotentials:t,{name:"if",hash:{},fn:e.program(34,i,0),inverse:e.noop,data:i}))?l:"")+' <span class="fL krp_right_heading bb0"> '+r(a.getI18n.call(s,null!=t?t.potentialsSingularName:t,{name:"getI18n",hash:{},data:i}))+" "+r(a.getI18n.call(s,"crm.label.summary",{name:"getI18n",hash:{},data:i}))+" </span> "+(null!=(l=a.unless.call(s,null!=t?t.potentialsViewPermi:t,{name:"unless",hash:{},fn:e.program(36,i,0),inverse:e.noop,data:i}))?l:"")+" </div> "+(null!=(l=a.if.call(s,null!=t?t.potentialsViewPermi:t,{name:"if",hash:{},fn:e.program(38,i,0),inverse:e.program(45,i,0),data:i}))?l:"")+" "},34:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression,o=null!=t?t:{};return' <a href="#" class="fR krp_graylink mt5" \n\t\t\t\tid="krp_potential_create_new"  style="font-style: normal;" onclick="Q.createPotentialForContact(\''+r(s(null!=t?t.entityId:t,t))+"','"+r(a.encodeJS.call(o,null!=(l=null!=t?t.info:t)?l.full_name:l,{name:"encodeJS",hash:{},data:i}))+"','"+r(s(null!=(l=null!=t?t.info:t)?l.accountId:l,t))+"','"+r(a.encodeJS.call(o,null!=(l=null!=t?t.info:t)?l.account_name:l,{name:"encodeJS",hash:{},data:i}))+"', 'krp');\"> + "+r(a.getI18n.call(o,"crm.label.new",{name:"getI18n",hash:{},data:i}))+" </a> "},36:function(e,t,a,n,i){return' <span class="krp_warning_icon fL mL5 mT4"></span> '},38:function(e,t,a,n,i){var l,s=null!=t?t:{};return' <div class="pB10 mT8 fL cB w100per" id="kso_potentials_list" onclick="sE(event)"> '+(null!=(l=a.if.call(s,null!=t?t.potentials:t,{name:"if",hash:{},fn:e.program(39,i,0),inverse:e.program(41,i,0),data:i}))?l:"")+" </div> "+(null!=(l=a.ifEquals.call(s,null!=t?t.potentialsCount:t,null!=t?t.potentialsLimit:t,{name:"ifEquals",hash:{},fn:e.program(43,i,0),inverse:e.noop,data:i}))?l:"")+" "},39:function(e,t,a,n,i){var l;return" "+(null!=(l=e.invokePartial(n.Potentials,t,{name:"Potentials",data:i,helpers:a,partials:n,decorators:e.decorators}))?l:"")+" "},41:function(e,t,a,n,i){return' <div class="feedsGrayclr aligncenter w100per">'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.krp.no.records.found",null!=t?t.potentialsDispName:t,{name:"getI18n",hash:{},data:i}))+"</div> "},43:function(e,t,a,n,i){var l=e.escapeExpression;return' <div class="aligncenter pR cB mB10" style=" /*height:0px;*/"> <a href="javascript:;" onclick="$$rightPanel.loadMore(this, \'load_more_potentials\')" id="kso_potentials_view_more" class="krp_morearrow krp_graylink" index=\''+l(e.lambda(null!=t?t.potentialsIndex:t,t))+"' > "+l(a.getI18n.call(null!=t?t:{},"crm.nsocial.tab.view.more",{name:"getI18n",hash:{},data:i}))+" </a> </div> "},45:function(e,t,a,n,i){return' <div class="lightgray cB mB20 mT8 fL"> '+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.krp.insufficient.permission",null!=t?t.potentialsDispName:t,{name:"getI18n",hash:{},data:i}))+" </div> "},47:function(e,t,a,n,i){var l,s=null!=t?t:{};return"  "+(null!=(l=a.if.call(s,a.isActivitySplitNotDone.call(s,{name:"isActivitySplitNotDone",hash:{},data:i}),{name:"if",hash:{},fn:e.program(48,i,0),inverse:e.noop,data:i}))?l:"")+"  "},48:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression,o=e.lambda;return' <div class="fontSmoothAntialiased mt5 bb0 pR pL20 pR20"> <a href="javascript:;" id="rightPanelCreateActLabel" class="fR krp_graylink mt5" style="font-style: normal;" onclick="sE(event); $$rightPanel.showCreateActivitiesLabels(this)"> + '+r(a.getI18n.call(s,"crm.label.new",{name:"getI18n",hash:{},data:i}))+' </a> <span class="fL krp_right_heading bb0"> '+r(a.getI18n.call(s,"crm.mapMarker.lable.openactivities",null!=t?t.activitiesDispName:t,{name:"getI18n",hash:{},data:i}))+" </span> "+(null!=(l=a.unless.call(s,null!=t?t.activitiesViewPermi:t,{name:"unless",hash:{},fn:e.program(36,i,0),inverse:e.noop,data:i}))?l:"")+' <div id="krp_activities_create_new" class="quickCreateLink fR zI1" onclick="sE(event)" data-close="true"> <div style="right: -11px; top: 7px;" class="qcpopuparrow qcRight"></div> '+(null!=(l=a.ifEquals.call(s,a.getUserDetail.call(s,"TaskPopup",{name:"getUserDetail",hash:{},data:i}),!0,{name:"ifEquals",hash:{},fn:e.program(49,i,0),inverse:e.program(51,i,0),data:i}))?l:"")+' <a class="addnewListOpt brdrbox cP" href="javascript:;" onclick="Events.globalCreate(event,\'krp\', this)"> '+r(a.getI18n.call(s,a.getModuleDisplayName.call(s,!1,!0,{name:"getModuleDisplayName",hash:{},data:i}),{name:"getI18n",hash:{},data:i}))+' </a><br> <a class="addnewListOpt brdrbox cP" href="javascript:;" onclick="Q.selectAction(\'NewCall\', this,\''+r(o(null!=t?t.module:t,t))+"' ,'"+r(o(null!=t?t.entityId:t,t))+"', 'krp', null, null, this, event); \"> "+r(a.getI18n.call(s,"Calls",{name:"getI18n",hash:{},data:i}))+" </a> </div> </div> "+(null!=(l=a.if.call(s,null!=t?t.activitiesViewPermi:t,{name:"if",hash:{},fn:e.program(53,i,0),inverse:e.program(58,i,0),data:i}))?l:"")+' <div class="krp_sep cB"></div> '},49:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression;return' <a class="addnewListOpt brdrbox cP" href="javascript:;" onclick="crmRelatedList.relTaskCreate(this,\''+r(a.encodeJS.call(s,null!=t?t.entityId:t,{name:"encodeJS",hash:{},data:i}))+"','"+r(a.encodeJS.call(s,null!=(l=null!=t?t.info:t)?l.full_name:l,{name:"encodeJS",hash:{},data:i}))+"','"+r(a.encodeJS.call(s,null!=t?t.module:t,{name:"encodeJS",hash:{},data:i}))+"')\"  > "+r(a.getI18n.call(s,"Tasks",{name:"getI18n",hash:{},data:i}))+" </a> <br/> "},51:function(e,t,a,n,i){var l=e.lambda,s=e.escapeExpression;return' <a class="addnewListOpt brdrbox cP" href="javascript:;" onclick="Q.selectAction(\'NewTask\', this,\''+s(l(null!=t?t.module:t,t))+"' ,'"+s(l(null!=t?t.entityId:t,t))+"', 'krp');\"> "+s(a.getI18n.call(null!=t?t:{},"Tasks",{name:"getI18n",hash:{},data:i}))+" </a> <br/> "},53:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression;return' <div class="mB20 mt5 cB fL pL20 pR20" onclick="sE(event)"> <table cellspacing="0" id="kso_activities_list" cellpadding="0" class="contactInfo"> '+(null!=(l=a.if.call(s,null!=t?t.activities:t,{name:"if",hash:{},fn:e.program(54,i,0),inverse:e.program(56,i,0),data:i}))?l:"")+' </table> </div> <div class="aligncenter pR cB mB10" style="display:none;"> <a href="javascript:;" onclick="$$rightPanel.loadMore(this, \'load_more_activities\')" id="kso_activities_view_more" class="krp_morearrow krp_graylink" index=\''+r(e.lambda(null!=t?t.activitiesIndex:t,t))+"' > "+r(a.getI18n.call(s,"crm.nsocial.tab.view.more",{name:"getI18n",hash:{},data:i}))+" </a> </div> "},54:function(e,t,a,n,i){var l;return" "+(null!=(l=e.invokePartial(n.Activities,t,{name:"Activities",data:i,helpers:a,partials:n,decorators:e.decorators}))?l:"")+" "},56:function(e,t,a,n,i){return' <tr class="mT10 lightgray"> <td>'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.krp.no.records.found",null!=t?t.activitiesDispName:t,{name:"getI18n",hash:{},data:i}))+"</td> </tr> "},58:function(e,t,a,n,i){return' <div class="lightgray cB mB20 mT8 fL">'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.krp.insufficient.permission",null!=t?t.activitiesDispName:t,{name:"getI18n",hash:{},data:i}))+"</div> "},60:function(e,t,a,n,i){var l,s=null!=t?t:{};return" "+(null!=(l=a.if.call(s,a.isActivitySplitDone.call(s,{name:"isActivitySplitDone",hash:{},data:i}),{name:"if",hash:{},fn:e.program(61,i,0),inverse:e.noop,data:i}))?l:"")+" "},61:function(e,t,a,n,i){return' <div id="activity_right_panel_new" class="w100per pR0 pL0 p20 boxBB"> </div> '},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression,o=null!=t?t:{};return' <input type="hidden" name="id" id="id" value="'+r(s(null!=t?t.entityId:t,t))+'">  <div id="krp_Rightpanel_InfoContainer" class="pR krp_containers"> <div> <div class="feedsInfoDetails"> <table cellspacing="0" cellpadding="0" width="100%" class="feedsinfoTableUserEle"> <tr> '+(null!=(l=a.ifCondLogic.call(o,null!=t?t.module:t,"=","Leads","||",null!=t?t.module:t,"=","Contacts",{name:"ifCondLogic",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?l:"")+' <td> <div class="feedsInfoUserWraper w100per"> '+(null!=(l=a.ifAnyMatch.call(o,null!=t?t.module:t,"=","Events",null!=t?t.module:t,"=","Tasks",null!=t?t.module:t,"=","Calls",{name:"ifAnyMatch",hash:{},fn:e.program(6,i,0),inverse:e.program(8,i,0),data:i}))?l:"")+" "+(null!=(l=a.isNotCustomizedSystemModule.call(o,null!=t?t.module:t,{name:"isNotCustomizedSystemModule",hash:{},fn:e.program(10,i,0),inverse:e.program(12,i,0),data:i}))?l:"")+" </div>  "+(null!=(l=a.unless.call(o,null!=t?t.isRecordLocked:t,{name:"unless",hash:{},fn:e.program(14,i,0),inverse:e.noop,data:i}))?l:"")+" </td> </tr> "+(null!=(l=a.if.call(o,null!=t?t.isRecordLocked:t,{name:"if",hash:{},fn:e.program(18,i,0),inverse:e.noop,data:i}))?l:"")+" </table> "+(null!=(l=a.if.call(o,null!=t?t.isDisplayCustomerBC:t,{name:"if",hash:{},fn:e.program(20,i,0),inverse:e.program(25,i,0),data:i}))?l:"")+' <div class="feedsInfoFollow"> <span class="fblink dIB cP pR flrs feedsfollowEle" onmouseover="$$rightPanel.showFollowers(this,\'followers\')" onmouseout="$$rightPanel.hideElemOnMouseOut(\'krp_followers\');"> '+r(s(null!=(l=null!=t?t.info:t)?l.followCount:l,t))+" "+r(a.getI18n.call(o,"crm.ln.lable.followers",{name:"getI18n",hash:{},data:i}))+' <div id="krp_followers" class="followers pA zI10 oA" onmouseover="disablePerfectScroll(\'krp_Rightpanel_InfoContainer\');" onmouseout="enablePerfectScroll(\'krp_Rightpanel_InfoContainer\')" > <ul class="m0 p0"> '+(null!=(l=a.each.call(o,null!=(l=null!=t?t.info:t)?l.followUsers:l,{name:"each",hash:{},fn:e.program(31,i,0),inverse:e.noop,data:i}))?l:"")+' </ul> </div> </span> <div class="alignright"> <a href="'+r(a.getCrmBasePath.call(o,{name:"getCrmBasePath",hash:{},data:i}))+"/EntityInfo.do?id="+r(s(null!=t?t.entityId:t,t))+"&module="+r(a.encodeURL.call(o,null!=t?t.module:t,{name:"encodeURL",hash:{},data:i}))+'" class="krp_graylink vat feedsfollowEle" target="_blank">'+r(a.getI18n.call(o,"crm.label.moreinfo",{name:"getI18n",hash:{},data:i}))+'</a> </div> </div> <div id="bestTimeRP"></div>  <div class="bestTimebgWrapper"> '+(null!=(l=a.ifEquals.call(o,null!=t?t.module:t,"Contacts",{name:"ifEquals",hash:{},fn:e.program(33,i,0),inverse:e.noop,data:i}))?l:"")+" </div> "+(null!=(l=a.isDisplayActivitiesSection.call(o,null!=t?t.module:t,{name:"isDisplayActivitiesSection",hash:{},fn:e.program(47,i,0),inverse:e.noop,data:i}))?l:"")+'  <div id="noteDetails" class="pR p20 pB20 feedsbdrB dIB w100per boxBB pT0" name="noteDetails"> '+(null!=(l=e.invokePartial(n.Notes,t,{name:"Notes",data:i,helpers:a,partials:n,decorators:e.decorators}))?l:"")+' </div> <div class="cB"></div>  </div> </div> '+(null!=(l=a.isDisplayActivitiesSection.call(o,null!=t?t.module:t,{name:"isDisplayActivitiesSection",hash:{},fn:e.program(60,i,0),inverse:e.noop,data:i}))?l:"")+" </div>  "},usePartial:!0,useData:!0}),t.MailConversations=e({1:function(e,t,a,n,i){var l;return" "+(null!=(l=a.each.call(null!=t?t:{},null!=t?t.mailConversations:t,{name:"each",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i}))?l:"")+" "},2:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression,o=null!=t?t:{};return'  <div data-isunread="'+r(s(null!=t?t.isUnread:t,t))+'" class="kso_eachMailContainer krp_old_conversation kso_mail_read_status" \n             onclick="viewMail(\''+r(s(null!=t?t.encryptedMessageId:t,t))+"','"+r(s(null!=t?t.mailType:t,t))+"','"+r(a.getI18n.call(o,"crm.button.close",{name:"getI18n",hash:{},data:i}))+"','"+r(a.getMailSentOrReceived.call(o,null!=t?t.FN:t,{name:"getMailSentOrReceived",hash:{},data:i}))+"',false,undefined, "+r(s(null!=t?t.isUnread:t,t))+", '"+r(a.encodeJS.call(o,null!=t?t.userid:t,{name:"encodeJS",hash:{},data:i}))+"', this)\"> "+(null!=(l=a.ifEquals.call(o,null!=t?t.MailStatus:t,"Scheduled",{name:"ifEquals",hash:{},fn:e.program(3,i,0),inverse:e.program(5,i,0),data:i}))?l:"")+' <span class="krp_mail_sender_info_container"> <div class="krp_mail_sender_info"> <div class="krp_mail_date lightgray" title="'+r(s(null!=t?t.SENTTIME_ToolTip:t,t))+'">'+r(s(null!=t?t.SENTTIME:t,t))+'</div> <div class="krp_link kso_email_read'+r(s(null!=t?t.S:t,t))+' whois mW160 tOE oH">'+r(s(null!=t?t.SN:t,t))+'</div> </div> <div class="krp_mail_sub_att_container"> '+(null!=(l=a.if.call(o,null!=t?t.A:t,{name:"if",hash:{},fn:e.program(13,i,0),inverse:e.noop,data:i}))?l:"")+' <div class="krp_mail_subject">'+r(s(null!=t?t.SB:t,t))+'</div> </div> </span> <div class="cB"></div> </div> '},3:function(e,t,a,n,i){return' <span class="krp_mail_status_container krp_scheduled" onclick="sE(event)"></span> '},5:function(e,t,a,n,i){var l;return" "+(null!=(l=a.ifEquals.call(null!=t?t:{},null!=t?t.MailStatus:t,"Failed",{name:"ifEquals",hash:{},fn:e.program(6,i,0),inverse:e.program(8,i,0),data:i}))?l:"")+" "},6:function(e,t,a,n,i){return' <span class="krp_mail_status_container krp_failed" onclick="sE(event)"></span> '},8:function(e,t,a,n,i){var l;return" "+(null!=(l=a.ifEquals.call(null!=t?t:{},null!=t?t.FN:t,"Sent",{name:"ifEquals",hash:{},fn:e.program(9,i,0),inverse:e.program(11,i,0),data:i}))?l:"")+" "},9:function(e,t,a,n,i){return' <span class="krp_mail_status_container krp_outgoing" onclick="sE(event)"></span> '},11:function(e,t,a,n,i){return' <span class="krp_mail_status_container krp_incoming" onclick="sE(event)"></span> '},13:function(e,t,a,n,i){return' <div class="krp_mail_attachment"></div> '},15:function(e,t,a,n,i){var l;return" "+(null!=(l=a.unless.call(null!=t?t:{},null!=t?t.dontShowMailEmptyMessage:t,{name:"unless",hash:{},fn:e.program(16,i,0),inverse:e.noop,data:i}))?l:"")+" "},16:function(e,t,a,n,i){return' <div class="lightgray">'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.social.empty.mail.conversations",{name:"getI18n",hash:{},data:i}))+"</div> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l;return" "+(null!=(l=a.if.call(null!=t?t:{},null!=t?t.mailConversations:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(15,i,0),data:i}))?l:"")+" "},useData:!0}),t.Potentials=e({1:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression,o=e.lambda;return' <div class="mB15"> <div class="f13 '+r(a.getClass.call(s,null!=t?t.forecastType:t,{name:"getClass",hash:{},data:i}))+' "> <a href="'+r(a.getCrmBasePath.call(s,{name:"getCrmBasePath",hash:{},data:i}))+"/EntityInfo.do?id="+r(o(null!=t?t.potentialId:t,t))+'&module=Potentials" class="krp_link" target="_blank">'+r(o(null!=t?t.potentialName:t,t))+"</a> "+(null!=(l=a.ifCondLogic.call(s,null!=t?t.amount:t,"!=",void 0,"&&",null!=t?t.amount:t,"!=","null",{name:"ifCondLogic",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i}))?l:"")+' </div> <div class="mT2 f13 pL25 fontSmoothAntialiased"> '+(null!=(l=a.if.call(s,null!=t?t.stage:t,{name:"if",hash:{},fn:e.program(7,i,0),inverse:e.noop,data:i}))?l:"")+" "+(null!=(l=a.if.call(s,null!=t?t.closingDate:t,{name:"if",hash:{},fn:e.program(12,i,0),inverse:e.noop,data:i}))?l:"")+" </div> </div> "},2:function(e,t,a,n,i){var l;return' <span class="lightgray">&middot;</span> '+(null!=(l=a.if.call(null!=t?t:{},null!=t?t.symbolNAmt:t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.program(5,i,0),data:i}))?l:"")+" "},3:function(e,t,a,n,i){return' <span class="red1 f13">'+e.escapeExpression(e.lambda(null!=t?t.symbolNAmt:t,t))+"</span> "},5:function(e,t,a,n,i){return' <span class="red1 f13">'+e.escapeExpression(a.formatCurrencyValue.call(null!=t?t:{},null!=t?t.amount:t,null!=t?t.currencyisocode:t,{name:"formatCurrencyValue",hash:{},data:i}))+"</span> "},7:function(e,t,a,n,i){var l;return" "+(null!=(l=a.ifEquals.call(null!=t?t:{},null!=(l=null!=t?t.stage:t)?l.colorcode_enabled:l,!0,{name:"ifEquals",hash:{},fn:e.program(8,i,0),inverse:e.program(10,i,0),data:i}))?l:"")+" "},8:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression;return' <span data-zcqa="colorcode_'+r(s(null!=(l=null!=t?t.stage:t)?l.stage:l,t))+'" class="graytxt f13 colorAppliedPicklist" style="'+r(a.getPLStyleObj.call(null!=t?t:{},null!=(l=null!=t?t.stage:t)?l.colorCode:l,{name:"getPLStyleObj",hash:{},data:i}))+'">'+r(s(null!=(l=null!=t?t.stage:t)?l.stage:l,t))+"</span> "},10:function(e,t,a,n,i){var l;return' <span class="graytxt f13">'+e.escapeExpression(e.lambda(null!=(l=null!=t?t.stage:t)?l.stage:l,t))+"</span> "},12:function(e,t,a,n,i){return' <span class="graytxt">&middot;</span> <span class="graytxt f13">'+e.escapeExpression(e.lambda(null!=t?t.closingDate:t,t))+"</span> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l;return" "+(null!=(l=a.each.call(null!=t?t:{},null!=t?t.potentials:t,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?l:"")},useData:!0}),t.RightPanelBestTime=e({1:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression,o=e.lambda;return' <div class="fontSmoothAntialiased mt5 bb0 dB"> <span class="krp_right_heading bb0 w100p dIB f15 feedsTextclr">'+r(a.getI18n.call(s,"crm.best.time.next.best.time",{name:"getI18n",hash:{},data:i}))+'</span> </div> <div class="mB10"> <span class="crm-font-bold diRightpanelBTimTime pR mB5 fL pL20 mR5 '+r(o(null!=t?t.nextImmediateTimelevel:t,t))+'" >'+r(o(null!=t?t.nextImmediateTime:t,t))+'</span> <span class="crm-font-regular  diRightpanelBTremTime fL" >('+r(o(null!=t?t.nextImmediateTimeInNL:t,t))+")</span> "+(null!=(l=a.if.call(s,null!=t?t.showRightpanelRemTime:t,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i}))?l:"")+' <div class="cB"></div> </div> '},2:function(e,t,a,n,i){return' <span class="dIIconTime fL mT5 mL5 cP" onclick="crmBstTime.showRightpanelRemTime(this)"></span> '},4:function(e,t,a,n,i){return' <span class="crm-font-regular f14 fL mR5 bestTimeTag pL20 pR sepBrdr timeDi cD  mT5 ">'+e.escapeExpression(e.lambda(null!=t?t.oldTime:t,t))+"</span> "},6:function(e,t,a,n,i){var l=e.lambda,s=e.escapeExpression;return' <span class="crm-font-regular f14 fL mR5 bestTimeTag pL20 pR sepBrdr timeDi cD mT5 '+s(l(null!=t?t.bestTimeLevel:t,t))+'">'+s(l(null!=t?t.bestTime:t,t))+"</span> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l,s=null!=t?t:{};return' <div class="bestTimebgWrapper"> '+(null!=(l=a.if.call(s,null!=t?t.nextImmediateTime:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?l:"")+' <div class="fL  mB5 w100p dIrightPanelTags"> '+(null!=(l=a.if.call(s,null!=t?t.oldTime:t,{name:"if",hash:{},fn:e.program(4,i,0),inverse:e.noop,data:i}))?l:"")+" "+(null!=(l=a.each.call(s,null!=t?t.nextTimes:t,{name:"each",hash:{},fn:e.program(6,i,0),inverse:e.noop,data:i}))?l:"")+" </div> </div>"},useData:!0}),t.RightPanels=e({compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){return'<div class="social_rightpanel pR" id="kso_social_rightpanel">  <div class="brdrbox tb_newmenu w100p" id="kso_rightpanel_title"> <a id="krp_tab1" class="krp_tabs sel" href="javascript:;" onclick="$$rightPanel.detailRightPanel(this.id, $(this).attr(\'tabName\'))"></a> <a id="krp_tab2" class="krp_tabs" href="javascript:;" onclick="$$rightPanel.detailRightPanel(this.id, $(this).attr(\'tabName\'))"></a> <a id="krp_tab3" class="krp_tabs last" href="javascript:;" onclick="$$rightPanel.detailRightPanel(this.id, $(this).attr(\'tabName\'))"></a> <div class="cB"></div> </div>   <div id="krp_loading_div" class="pA"> <div class="ks_loading_new pA" style="top:30%"></div> </div> </div> '},useData:!0}),t.SocialConversations=e({1:function(e,t,a,n,i){var l,s=null!=t?t:{};return" "+(null!=(l=a.each.call(s,null!=(l=null!=t?t.interactions:t)?l.data:l,{name:"each",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i}))?l:"")+" "+(null!=(l=a.if.call(s,null!=(l=null!=t?t.interactions:t)?l.cursor:l,{name:"if",hash:{},fn:e.program(32,i,0),inverse:e.noop,data:i}))?l:"")+" "},2:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression,o=e.lambda;return" "+(null!=(l=a.if_eq.call(s,null!=t?t.network:t,"twitter",{name:"if_eq",hash:{},fn:e.program(3,i,0),inverse:e.program(5,i,0),data:i}))?l:"")+' <div class="pA"> <img src="'+(null!=(l=a.img_link.call(s,{name:"img_link",hash:{},data:i}))?l:"")+'/spacer_e17b417_.gif" class="'+r(a.getClass.call(s,null!=t?t.network:t,{name:"getClass",hash:{},data:i}))+' gs" vspace="3"> </div> <div class="fR lightgray" title="'+r(o(null!=t?t.title_time:t,t))+'">'+r(o(null!=t?t.disp_time:t,t))+'</div> <div class="pRL42"> <div class="krp_mail_sender mB5"> '+(null!=(l=a.if_eq.call(s,null!=t?t.network:t,"twitter",{name:"if_eq",hash:{},fn:e.program(11,i,0),inverse:e.program(13,i,0),data:i}))?l:"")+' </div> </div> <div class="kso_from_text1 mB5">'+(null!=(l=o(null!=t?t.action:t,t))?l:"")+"</div> "+(null!=(l=a.if_eq.call(s,null!=t?t.network:t,"twitter",{name:"if_eq",hash:{},fn:e.program(19,i,0),inverse:e.program(21,i,0),data:i}))?l:"")+" "+(null!=(l=a.if_eq.call(s,null!=t?t.network:t,"twitter",{name:"if_eq",hash:{},fn:e.program(27,i,0),inverse:e.program(29,i,0),data:i}))?l:"")+" </div> "},3:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression;return" <div class=\"krp_old_conversation kso_li\" onclick=\"sE(event); $$rightPanel.getFeed(this, 'twitter', '"+r(s(null!=t?t.convo:t,t))+'\');" p_id="'+r(s(null!=t?t.id_str:t,t))+'" c_id="'+r(s(null!=t?t.comment_id:t,t))+'" t_id="'+r(s(null!=t?t.thread_id:t,t))+'" b_id="'+r(s(null!=t?t.brid:t,t))+'" pro_id="'+r(s(null!=(l=null!=t?t.user:t)?l.id_str:l,t))+'" m_name="'+r(s(null!=(l=null!=t?t.user:t)?l.module:l,t))+'" e_id="'+r(s(null!=(l=null!=t?t.user:t)?l.entityid:l,t))+'" u_name="'+r(s(null!=(l=null!=t?t.user:t)?l.screen_name:l,t))+'" u_id="'+r(s(null!=(l=null!=t?t.user:t)?l.id_str:l,t))+'" f_cnt="'+r(s(null!=t?t.favoriters_count:t,t))+'" re_cnt="'+r(s(null!=t?t.retweet_count:t,t))+'" c_cnt="'+r(s(null!=t?t.repliers_count:t,t))+'" b_img="'+r(s(null!=t?t.br_img:t,t))+'" b_name="'+r(s(null!=t?t.br_name:t,t))+'"> '},5:function(e,t,a,n,i){var l;return" "+(null!=(l=a.if_eq.call(null!=t?t:{},null!=t?t.network:t,"facebook",{name:"if_eq",hash:{},fn:e.program(6,i,0),inverse:e.program(8,i,0),data:i}))?l:"")+" "},6:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression;return" <div class=\"krp_old_conversation kso_li\" onclick=\"sE(event); $$rightPanel.getFeed(this, 'facebook', '"+r(s(null!=t?t.convo:t,t))+'\');" p_id="'+r(s(null!=t?t.id:t,t))+'" c_id="'+r(s(null!=t?t.comment_id:t,t))+'" t_id="'+r(s(null!=t?t.thread_id:t,t))+'" b_id="'+r(s(null!=t?t.brid:t,t))+'" pro_id="'+r(s(null!=(l=null!=t?t.from:t)?l.id:l,t))+'" m_name="'+r(s(null!=(l=null!=t?t.from:t)?l.module:l,t))+'" e_id="'+r(s(null!=(l=null!=t?t.from:t)?l.entityid:l,t))+'" l_cnt="'+r(s(null!=t?t.likes_count:t,t))+'" c_cnt="'+r(s(null!=t?t.comments_count:t,t))+'" b_img="'+r(s(null!=t?t.br_img:t,t))+'" b_name="'+r(s(null!=t?t.br_name:t,t))+'"> '},8:function(e,t,a,n,i){var l;return" "+(null!=(l=a.if_eq.call(null!=t?t:{},null!=t?t.network:t,"googleplus",{name:"if_eq",hash:{},fn:e.program(9,i,0),inverse:e.noop,data:i}))?l:"")+" "},9:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression;return" <div class=\"krp_old_conversation kso_li\" onclick=\"sE(event); $$rightPanel.getFeed(this, 'googleplus', '"+r(s(null!=t?t.convo:t,t))+'\');" p_id="'+r(s(null!=t?t.id:t,t))+'" c_id="'+r(s(null!=t?t.comment_id:t,t))+'" t_id="'+r(s(null!=t?t.thread_id:t,t))+'" b_id="'+r(s(null!=t?t.brid:t,t))+'" pro_id="'+r(s(null!=(l=null!=t?t.actor:t)?l.id:l,t))+'" m_name="'+r(s(null!=(l=null!=t?t.actor:t)?l.module:l,t))+'" e_id="'+r(s(null!=(l=null!=t?t.actor:t)?l.entityid:l,t))+'" l_cnt="'+r(s(null!=(l=null!=(l=null!=t?t.object:t)?l.plusoners:l)?l.totalItems:l,t))+'" c_cnt="'+r(s(null!=(l=null!=(l=null!=t?t.object:t)?l.replies:l)?l.totalItems:l,t))+'" b_img="'+r(s(null!=t?t.br_img:t,t))+'" b_name="'+r(s(null!=t?t.br_name:t,t))+'"> '},11:function(e,t,a,n,i){var l,s=e.escapeExpression,r=e.lambda;return' <a href="'+s(a.getRebrandKey.call(null!=t?t:{},"TW_URL",{name:"getRebrandKey",hash:{},data:i}))+"/"+s(r(null!=(l=null!=t?t.user:t)?l.screen_name:l,t))+'" class="whois krp_link" target="_blank"  onclick="sE(event)">'+s(r(null!=(l=null!=t?t.user:t)?l.name:l,t))+"</a> "},13:function(e,t,a,n,i){var l;return" "+(null!=(l=a.if_eq.call(null!=t?t:{},null!=t?t.network:t,"facebook",{name:"if_eq",hash:{},fn:e.program(14,i,0),inverse:e.program(16,i,0),data:i}))?l:"")+" "},14:function(e,t,a,n,i){var l,s=e.escapeExpression,r=e.lambda;return' <a href="'+s(a.getRebrandKey.call(null!=t?t:{},"FB_URL",{name:"getRebrandKey",hash:{},data:i}))+"/"+s(r(null!=(l=null!=t?t.from:t)?l.id:l,t))+'" target="_blank" class="whois krp_link" onclick="sE(event)">'+s(r(null!=(l=null!=t?t.from:t)?l.name:l,t))+"</a> "},16:function(e,t,a,n,i){var l;return" "+(null!=(l=a.if_eq.call(null!=t?t:{},null!=t?t.network:t,"googleplus",{name:"if_eq",hash:{},fn:e.program(17,i,0),inverse:e.noop,data:i}))?l:"")+" "},17:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression;return' <a href="'+r(s(null!=(l=null!=t?t.actor:t)?l.url:l,t))+'" target="_blank" class="whois krp_link" onclick="sE(event)">'+r(s(null!=(l=null!=t?t.actor:t)?l.displayName:l,t))+"</a> "},19:function(e,t,a,n,i){var l;return' <div class="krp_mail_subject">'+(null!=(l=e.lambda(null!=t?t.text:t,t))?l:"")+"</div> "},21:function(e,t,a,n,i){var l;return" "+(null!=(l=a.if_eq.call(null!=t?t:{},null!=t?t.network:t,"facebook",{name:"if_eq",hash:{},fn:e.program(22,i,0),inverse:e.program(24,i,0),data:i}))?l:"")+" "},22:function(e,t,a,n,i){var l;return' <div class="krp_mail_subject">'+(null!=(l=e.lambda(null!=t?t.message:t,t))?l:"")+"</div> "},24:function(e,t,a,n,i){var l;return" "+(null!=(l=a.if_eq.call(null!=t?t:{},null!=t?t.network:t,"googleplus",{name:"if_eq",hash:{},fn:e.program(25,i,0),inverse:e.noop,data:i}))?l:"")+" "},25:function(e,t,a,n,i){var l;return' <div class="krp_mail_subject">'+(null!=(l=e.lambda(null!=t?t.title:t,t))?l:"")+"</div> "},27:function(e,t,a,n,i){var l;return" "+(null!=(l=e.invokePartial(n.twPostActions,t,{name:"twPostActions",data:i,helpers:a,partials:n,decorators:e.decorators}))?l:"")+" "},29:function(e,t,a,n,i){var l;return" "+(null!=(l=a.if_eq.call(null!=t?t:{},null!=t?t.network:t,"facebook",{name:"if_eq",hash:{},fn:e.program(30,i,0),inverse:e.noop,data:i}))?l:"")+" "},30:function(e,t,a,n,i){var l;return" "+(null!=(l=e.invokePartial(n.fbPostActions,t,{name:"fbPostActions",data:i,helpers:a,partials:n,decorators:e.decorators}))?l:"")+" "},32:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression,o=null!=t?t:{};return" <div id='social_int_cursor' class='aligncenter pT5'> <a id=\"social_int_more\" onclick=\"crmSocialInteraction.fetchSocialInteractions('all','"+r(s(null!=(l=null!=t?t.interactions:t)?l.entityid:l,t))+"', '"+r(s(null!=(l=null!=t?t.interactions:t)?l.cursor:l,t))+'\');" class="f11" href="javascript:void(0);"> '+r(a.getI18n.call(o,"crm.nsocial.tab.show.more",{name:"getI18n",hash:{},data:i}))+' </a> <img id="social_int_more_loading" class="dN pL30" src="'+(null!=(l=a.img_link.call(o,{name:"img_link",hash:{},data:i}))?l:"")+'/social_loading_599c9b1_.gif" style="display: none;"> </div> '},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l;return" "+(null!=(l=a.if.call(null!=t?t:{},null!=(l=null!=t?t.interactions:t)?l.data:l,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?l:"")+" "},usePartial:!0,useData:!0}),t.Timeline=e({1:function(e,t,a,n,i){return' <div class="timeline_tab_hed" id="kso_rightpanel_title"> <a id="krp_timeline_tab1" class="timeline_tab bgwit" href="javascript:;" onclick="crmSocial.timelineTab(this);" tabname="twitter">Twitter</a> <a id="krp_timeline_tab2" class="timeline_tab" href="javascript:;" onclick="crmSocial.timelineTab(this);" tabname="pulse">CRM</a> </div> '},3:function(e,t,a,n,i){var l;return' <div id="socialTabTimeline" class="pR w100per"> <div id="socialTimeline" class="pA w100per"> <div id="krp_socialTimelineContainer" class="pR"> <div id="krp_socialTimelineInner"> <ul id="krpSocTimeline" class="m0 p0 twitTimeline pA" style="width:100%"> '+(null!=(l=e.invokePartial(n.PostTemplate,null!=t?t.social_timeline:t,{name:"PostTemplate",data:i,helpers:a,partials:n,decorators:e.decorators}))?l:"")+' </ul> </div> </div> </div> <div id="crmTimeline" class="pA w100per"> <div id="krp_Rightpanel_TimelineInnerContainer">  <div id="userTimeline" class="pA w100per"> '+(null!=(l=a.each.call(null!=t?t:{},null!=t?t.user_timeline:t,{name:"each",hash:{},fn:e.program(4,i,0),inverse:e.program(6,i,0),data:i}))?l:"")+" </div> </div> </div> </div> "},4:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression;return' <div class="krp_entity_timeline_item"> <div class="krp_timeline_time cP" title="'+r(s(null!=t?t.SENTTIME_ToolTip:t,t))+'">'+r(s(null!=t?t.SENTTIME:t,t))+'</div> <div class="krp_entity_timeline_item_content"> <div class="krp_timeline_arrow"></div> <div class="krp_entity_timeline_subject">'+(null!=(l=s(null!=t?t.displayContent:t,t))?l:"")+"</div> </div> </div> "},6:function(e,t,a,n,i){return' <div class="p20 feedslableclr">'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.label.no.last.activity.done",{name:"getI18n",hash:{},data:i}))+"</div> "},8:function(e,t,a,n,i){var l;return'  <div id="krp_Rightpanel_TimelineInnerContainer"> '+(null!=(l=a.each.call(null!=t?t:{},t,{name:"each",hash:{},fn:e.program(4,i,0),inverse:e.program(6,i,0),data:i}))?l:"")+" </div> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l,s=null!=t?t:{};return' <div id="krp_Rightpanel_TimelineContainer" class="pR krp_containers"> '+(null!=(l=a.if.call(s,null!=t?t.social_timeline:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?l:"")+" "+(null!=(l=a.if.call(s,null!=t?t.social_timeline:t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.program(8,i,0),data:i}))?l:"")+" </div>"},usePartial:!0,useData:!0})}();var SalesSignals=SalesSignals||{};SalesSignals.page=0,SalesSignals.lastIndex=0,SalesSignals.signalsData={},SalesSignals.moreSignalsData={},SalesSignals.moreNotifications=0,SalesSignals.minimumToggleWidth=1280,signalWindow=$(window),$(document).ready((function(){SalesSignals.windowSize={wwidth:signalWindow.width(),wheight:signalWindow.height()}})),SalesSignals.loadNotificationsContainer=function(e){SalesSignalsWrapper.clearNotificationCountInCache(),SalesSignalsWrapper.isSignalIFrameOpen=!0,Handlebars.registerPartial("cvNotificationShowMore",Handlebars.templates.cvNotificationShowMore),Handlebars.registerPartial("notificationGroups",Handlebars.templates.notificationGroups),Handlebars.registerPartial("notificationGroup",Handlebars.templates.notificationGroup),Handlebars.registerPartial("signalBusinessCard",Handlebars.templates.signalBusinessCard),Handlebars.registerPartial("signalBusinessCardContent",Handlebars.templates.signalBusinessCardContent),Handlebars.registerPartial("signalDetailViewTemplate",Handlebars.templates.signalDetailViewTemplate),Handlebars.registerPartial("uiTypeTemplate",Handlebars.templates.uiTypeTemplate);var t=null,a=new crmRequestPool;SalesSignals.page=1;var n="/crm/v2/signals/notifications?page="+SalesSignals.page,i={"X-ZCSRF-TOKEN":csrfParamName+"="+csrfToken,"X-CRM-ORG":e};a.initiate({action:n,headers:i,data:"",type:"GET",success:function(e){if(void 0!==e)if((e=crmNTCGlobal.convert(e)).global=!0,crmNTCGlobal.isCrmNotificationCenterEmpty=e.info.is_empty,e.group_notifications&&e.group_notifications.length>0){e.group_notifications=crmNTC.sortByAuditTime(e.group_notifications),SalesSignals.moreNotifications=e.info.more_notifications,t=Handlebars.templates.globalSignal(e),$("#handlebarReplacement").html(t),$("#notificationGroupList").find(".ntc-unread").find(".notificationgrpListRow").css("background-color","white");var a=Handlebars.templates.cvNotificationShowMore(e);$("#globalNotificationShowMore").html(a)}else t=Handlebars.templates.emptySignalNotification(),$("#handlebarReplacement").html(t);window.parent.SalesSignalsWrapper.setHeightForNotificationBox()}})},SalesSignals.getTotalCount=function(){if("99+"===SalesSignals.live_global_notifications_count)return"99+";var e=parseInt(SalesSignals.live_global_notifications_count);return SalesSignals.roundCount(e)},SalesSignals.roundCount=function(e){return e>99?"99+":e},SalesSignals.resetSignalsCount=function(){var e=$("#SalesSignals.signals_count");SalesSignals.signals_count&&parseInt(SalesSignals.signals_count)>0?e.show().text(SalesSignals.signals_count):e.hide()},SalesSignals.ntcShowMore=function(e){var t=$(e).closest(".ntc-detailv-detail"),a=parseInt(t.find(".ntc-detailv-para")[0].scrollHeight);t.find(".ntc-detailv-para").css({height:SalesSignals.maxShowMoreHt}),t.removeClass("ntc-detailv-wrap").addClass("ntc-detailv-expanded"),t.find(".ntc-detailv-para").css({height:a}),t.find(".ntc-det-more").hide()},SalesSignals.showSignalSidePopup=function(e,t,a){Handlebars.registerPartial("signalIframeDetailView",Handlebars.templates.signalIframeDetailView);var n=Handlebars.templates.signalBusinessCard({entityObj:a});$("#signalBusinessCard").html(n),Handlebars.registerPartial("signalDetailViewTemplate",Handlebars.templates.signalDetailViewTemplate);var i=Handlebars.templates.signalDetailView({entityObj:a,notificationObjs:t});$("#ntcDivContent").html(i)},SalesSignals.globalNotificationScroll=function(){SalesSignals.globalScrollFlag=!0;var e=$("#handlebarReplacement"),t=e[0].scrollHeight,a=e.scrollTop();if(e.height()==t-a){var n=$("#notificationGrpList"),i=$("#globalNotificationShowMore button"),l=n.outerHeight()+n.offset().top;if(i.length)l+15>i.offset().top&&renderingUtils.triggerEvent("click",i)}},SalesSignals.handleMessage=function(e){var t=e.notification;SalesSignals.prependGlobalNotification(t)},SalesSignals.prependGlobalNotification=function(e){var t=crmNTCGlobal.convert(e);if(0!=$("#notificationGroupList").length){Handlebars.registerPartial("notificationGroup",Handlebars.templates.notificationGroup);var a=Handlebars.templates.notificationGroups(t);$(a).hide().prependTo("#notificationGroupList").slideDown("slow")}else $("#notificationList").html(Handlebars.templates.globalSignal(t)).removeClass("pR oH");$("#notificationGroupList").find(".ntc-unread").find(".notificationgrpListRow").css("background-color","white")},SalesSignals.showIframeDetailView=function(){var e=$("#showSignalPopIframe"),t=$("#handlebarReplacement"),a=$("#signalsMainContainer");Crm.userDetails.RTL_ENABLED?e.css({left:"360px"}):e.css({right:"360px"}),t.addClass("signal-notification-open"),a.addClass("signal-showdetail-open"),$("#freezeBackGround").on("click",(function(){$("#qCreate").is(":empty")&&"none"===$("#eventCreatePopup").css("display")&&!SalesSignalsWrapper.isSignalDetailViewPopup&&SalesSignals.closeIframeDetailView()}))},SalesSignals.closeIframeDetailView=function(){$("#notificationGroupList").find(".ntc-entity-active").find(".notificationgrpListRow").css("background-color","##f5f5f5");var e=$(document.getElementById("showSignalPopIframe")),t=$("#signalsMainContainer"),a=e.outerWidth();Crm.userDetails.RTL_ENABLED?e.css({left:"-"+a+"px"}):e.css({right:"-"+a+"px"}),t.hasClass("signal-showdetail-open")||t.removeClass("signal-showdetail-open"),t.find(".ntc-entity-group").removeClass("ntc-entity-active")},SalesSignals.closeGlobalNotifications=function(){SalesSignalsWrapper.isSignalIFrameOpen=!1,SalesSignals.closeIframeDetailView(),SalesSignalsWrapper.closeNotificationView()};var SalesSignalsWrapper=SalesSignalsWrapper||{};SalesSignalsWrapper.loadSignalIframeView=function(e,t){SalesSignalsWrapper.isSignalIFrameOpen=!0;t=Crm.getCrmBasePath()+"/SalesSignalsComponent.do?actionname=LoadSalesSignalsComponent";var a=$("#tabLayer"),n=a.offset().top+parseInt(a.innerHeight())+28;crmNTCGlobal.signalIframeHeight=renderingUtils.windowHeight-n;var i=$("<iframe>",{name:"signalsIframe",src:t,id:"crmNTCDetailIframe",frameborder:0,scrolling:"no",height:crmNTCGlobal.signalIframeHeight,width:"100%",sandbox:"allow-same-origin allow-scripts allow-popups allow-forms",load:function(){$("#loadMsg").hide();var e=window.signalsIframe.$("#freezeBackGround");e.addClass("tbFreezelayer").fadeIn(),SalesSignalsWrapper.setHeightForNotificationBox(),SalesSignalsWrapper.initEventListenerFromParent(),e.on("click",(function(){window.signalsIframe.$("#signalsMainContainer").hasClass("signal-showdetail-open")||SalesSignalsWrapper.closeNotificationView()}))}});$("#freezeBackGround").fadeIn();var l=$("#showSignalIframeContent");l.html('<div class="pR" style=""><div class="SocialArrow newSettingsArrow" style="left: auto; right: 186px;"></div> <span onclick="crmNTCDetailView.hideSignalIframePopup(); sE(event)" style="float:right;display:none;right: 80px;top: 25px;z-index:1;text-align:center;" class="newPopupCloseIcon svgIcons ico-close-small2 cP op08 pA"></span> </div> <div id=signalIframeContainer class="signal-iframe-container"> <div id="loadMsg" class="aligncenter signal-iframe-loading"><div class="dIB"><span class="ntc-loader" style="display:block"></span></div></div> <div id="signalDummyContent" class="signalPopupInnerDiv pR" style="display: block;"></div> </div>'),$("#signalDummyContent").html(i);var s=$("#showSignalIframePop");l.find("#loadMsg").hide(),l.show(),s.length&&s.is(":visible")&&l.css({top:s.css("top")}),l.find(".popup-model-content").removeClass("signal-popup-error")},SalesSignalsWrapper.setHeightForNotificationBox=function(){var e=$("#showSignalIframeContent"),t=e.find("iframe"),a=e.find("iframe").contents(),n=a.find("#signalsMainContainer"),i=a.find("#signalsInnerContainer"),l=a.find("#showSignalPopIframe"),s=a.find("#handlebarReplacement"),r=a.find("#notificationGrpList"),o=renderingUtils.windowWidth,c=parseInt(.25*o),d=parseInt(.65*o),m=s.find(".ntc-notification-head").outerHeight(),u=$("#tabLayer"),p=u.offset().top+parseInt(u.innerHeight())+28;crmNTCGlobal.signalIframeHeight=renderingUtils.windowHeight-p;var g=crmNTCGlobal.signalIframeHeight-(30+m);t.css({height:crmNTCGlobal.signalIframeHeight}),i.css({width:o}),n.css({width:c}),l.css({width:d}),n.addClass("signal-wrapper-active"),r.css({height:g}),thirdPartyUtils.bindPerfectScroll(r,{wheelSpeed:1,wheelPropagation:!1,suppressScrollX:!0})},SalesSignalsWrapper.updateSignalsCount=function(e){},SalesSignalsWrapper.closeNotificationView=function(){$("#showSignalIframeContent").removeClass("signal-iframe-active"),SalesSignalsWrapper.isSignalIFrameOpen=!1,SalesSignalsWrapper.triggerFunctionFromIframeParent("closeSignalsNotificationOuterContainer")},SalesSignalsWrapper.clearNotificationCountInRedis=function(){SalesSignalsWrapper.isSignalIFrameOpen=!1,SalesSignalsWrapper.triggerFunctionFromIframeParent("clearNotificationCountInRedis")},SalesSignalsWrapper.triggerFunctionFromIframeParent=function(e,t){var a=null;a=""==t||null==t?window.location.protocol.toString()+"//"+window.location.href.toString().split("/")[2]:t.sourceUrl,top.postMessage(e,a)},SalesSignalsWrapper.receiveMessage=function(e){var t=window.location.protocol.toString()+"//"+window.location.href.toString().split("/")[2];if(e.origin===t)switch(e.data){case"closeSignalsNotificationOuterContainer":SalesSignalsWrapper.closeSignalsNotificationOuterContainer();break;case"clearNotificationCountInRedis":SalesSignalsWrapper.clearNotificationCountInCache()}},SalesSignalsWrapper.initEventListenerFromParent=function(){window.addEventListener("message",SalesSignalsWrapper.receiveMessage,!1)},SalesSignalsWrapper.closeSignalsNotificationOuterContainer=function(){SalesSignalsWrapper.isSignalIFrameOpen=!1,$("#showSignalIframeContent").removeClass("signal-iframe-open").hide(),window.removeEventListener("message",SalesSignalsWrapper.receiveMessage),$("#freezeBackGroundSignals").removeClass("tbFreezelayer").fadeOut()},SalesSignalsWrapper.clearNotificationCountInCache=function(){var e=new crmRequestPool,t={action:"resetSalesSignalsCount"};t[csrfParamName]=csrfToken,e.initiate({action:Crm.getCrmBasePath()+"/NotificationCenter.do",data:t,success:function(e){e.global=!0}})};var crmNTC={};crmNTC.ntcEnabled=Crm.userDetails.NTC_ENABLED,crmNTC.isSigSerNamespaceMigCompleted=Crm.userDetails.NTC_SIG_SER_NAMESPACE_MIG_COMPLETED,crmNTC.ZOHO_EXTENSION_TYPE=2,crmNTC.ZOHO_USER_EXTENSION_TYPE=4,crmNTC.EXT_EMAILTRACKING="zoho.email",crmNTC.EXT_EMAILINSIGHTS="zoho.emailinsight",crmNTC.EXT_TELEPHONY="zoho.telephony",crmNTC.EXT_SURVEY="zoho.survey",crmNTC.EXT_CAMPAIGNS="zoho.campaign",crmNTC.EXT_SALESIQ="zoho.livedesk",crmNTC.EXT_SUPPORT="zoho.support",crmNTC.EXT_FACEBOOK="Facebook",crmNTC.EXT_TWITTER="Twitter",crmNTC.EXT_BACKSTAGE="zoho.backstage",crmNTC.EXT_WEBINAR="zoho.webinar",crmNTC.EXT_MESSAGE="Message",crmNTC.EXT_EMAILTRACKING_NEW="Email",crmNTC.EXT_EMAILINSIGHTS_NEW="EmailInsight",crmNTC.EXT_TELEPHONY_NEW="Telephony",crmNTC.EXT_SURVEY_NEW="Survey",crmNTC.EXT_CAMPAIGNS_NEW="Campaign",crmNTC.EXT_SALESIQ_NEW="Livedesk",crmNTC.EXT_SUPPORT_NEW="Support",crmNTC.EXT_FACEBOOK_NEW="Facebook",crmNTC.EXT_TWITTER_NEW="Twitter",crmNTC.EXT_BACKSTAGE_NEW="Backstage",crmNTC.EXT_WEBINAR_NEW="Webinar",crmNTC.MAIL_INCOMING="zoho.email.incoming",crmNTC.MAIL_INCOMING_COMPETITORS_ALERT="zoho.email.incoming.competitors",crmNTC.SURVEY_RESPONDED="zoho.survey.responded",crmNTC.SURVEY_VISITED="zoho.survey.visited",crmNTC.MAILTRACKING_OPEN="zoho.emailinsight.open",crmNTC.MAILTRACKING_CLICK="zoho.emailinsight.click",crmNTC.MAILTRACKING_BOUNCE="zoho.emailinsight.bounce",crmNTC.CAMPAIGN_OPEN="zoho.campaign.open",crmNTC.CAMPAIGN_CLICK="zoho.campaign.click",crmNTC.CAMPAIGN_BOUNCE="zoho.campaign.bounce",crmNTC.CAMPAIGN_SOFT_BOUNCE="zoho.campaign.soft.bounce",crmNTC.CALL_MISSED="zoho.telephony.missed",crmNTC.CALL_NOT_PICKUP="zoho.telephony.notpicked",crmNTC.SALESIQ_CHAT_MISSED="zoho.livedesk.missedchat",crmNTC.SALESIQ_NEW_VISIT_LEAD="zoho.livedesk.newvisit.lead",crmNTC.SALESIQ_NEW_VISIT_CONTACT="zoho.livedesk.newvisit.contact",crmNTC.SALESIQ_NEW_VISIT_POTENTIAL="zoho.livedesk.newvisit.potential",crmNTC.SALESIQ_NEW_VISIT_CUSTOMER="zoho.livedesk.newvisit.customer",crmNTC.SUPPORT_NEW_TICKET="zoho.support.newticket",crmNTC.SUPPORT_NEW_TICKET_LEAD="zoho.support.newticket.lead",crmNTC.SUPPORT_NEW_TICKET_CONTACT="zoho.support.newticket.contact",crmNTC.SUPPORT_NEW_TICKET_POTENTIAL="zoho.support.newticket.potential",crmNTC.SUPPORT_NEW_TICKET_CUSTOMER="zoho.support.newticket.customer",crmNTC.SUPPORT_TICKET_STATUS_CHANGE="zoho.support.ticket.status.change",crmNTC.SUPPORT_NEW_RATING="zoho.support.new.rating",crmNTC.SUPPORT_TICKET_PRIORITY_CHANGE="zoho.support.ticket.priority.change",crmNTC.SUPPORT_TICKET_OVERDUE="zoho.support.ticket.overdue",crmNTC.SUPPORT_TICKET_ESCALATED="zoho.support.ticket.escalated",crmNTC.SUPPORT_NEW_COMMENT_MENTION="zoho.support.newcomment.mention",crmNTC.SUPPORT_NEW_COMMENT="zoho.support.newcomment",crmNTC.SUPPORT_NEW_COMMENT_LEAD="zoho.support.newcomment.lead",crmNTC.SUPPORT_NEW_COMMENT_CONTACT="zoho.support.newcomment.contact",crmNTC.SUPPORT_NEW_COMMENT_POTENTIAL="zoho.support.newcomment.potential",crmNTC.SUPPORT_NEW_COMMENT_CUSTOMER="zoho.support.newcomment.customer",crmNTC.SUPPORT_NEW_COMMENT_SUPPORT_REP="zoho.support.newcomment.supportrep",crmNTC.SUPPORT_NEW_RESPONSE="zoho.support.newresponse",crmNTC.SUPPORT_NEW_RESPONSE_LEAD="zoho.support.newresponse.lead",crmNTC.SUPPORT_NEW_RESPONSE_CONTACT="zoho.support.newresponse.contact",crmNTC.SUPPORT_NEW_RESPONSE_POTENTIAL="zoho.support.newresponse.potential",crmNTC.SUPPORT_NEW_RESPONSE_CUSTOMER="zoho.support.newresponse.customer",crmNTC.SOCIAL_FB_NEW_POST="facebook.newpost",crmNTC.SOCIAL_FB_NEW_COMMENT="facebook.newcomment",crmNTC.SOCIAL_FB_NEW_LIKE="facebook.like",crmNTC.SOCIAL_FB_DM="facebook.message",crmNTC.SOCIAL_TW_MENTION="twitter.mention",crmNTC.SOCIAL_TW_REPLY="twitter.reply",crmNTC.SOCIAL_TW_DM="twitter.message",crmNTC.MAIL_INCOMING_NEW="Email_Incoming__s",crmNTC.MAIL_INCOMING_COMPETITORS_ALERT_NEW="Email_Incoming_Competitors__s",crmNTC.SURVEY_RESPONDED_NEW="Survey_Responded__s",crmNTC.SURVEY_VISITED_NEW="Survey_Visited__s",crmNTC.MAILTRACKING_OPEN_NEW="EmailInsight_Open__s",crmNTC.MAILTRACKING_CLICK_NEW="EmailInsight_Click__s",crmNTC.MAILTRACKING_BOUNCE_NEW="EmailInsight_Bounce__s",crmNTC.CAMPAIGN_OPEN_NEW="Campaign_Open__s",crmNTC.CAMPAIGN_CLICK_NEW="Campaign_Click__s",crmNTC.CAMPAIGN_BOUNCE_NEW="Campaign_Bounce__s",crmNTC.CAMPAIGN_SOFT_BOUNCE_NEW="Campaign_Soft_Bounce__s",crmNTC.CALL_MISSED_NEW="Telephony_Missed__s",crmNTC.SALESIQ_CHAT_MISSED_NEW="Livedesk_MissedChat__s",crmNTC.SUPPORT_NEW_TICKET_NEW="Support_NewTicket__s",crmNTC.SUPPORT_NEW_TICKET_LEAD_NEW="Support_NewTicket_Lead__s",crmNTC.SUPPORT_NEW_TICKET_CONTACT_NEW="Support_NewTicket_Contact__s",crmNTC.SUPPORT_NEW_TICKET_POTENTIAL_NEW="Support_NewTicket_Potential__s",crmNTC.SUPPORT_NEW_TICKET_CUSTOMER_NEW="Support_NewTicket_Customer__s",crmNTC.SUPPORT_TICKET_STATUS_CHANGE_NEW="Support_TicketStatusChange__s",crmNTC.SUPPORT_NEW_RATING_NEW="Support_NewRating__s",crmNTC.SUPPORT_TICKET_PRIORITY_CHANGE_NEW="Support_TicketPriorityChange__s",crmNTC.SUPPORT_TICKET_OVERDUE_NEW="Support_TicketOverdue__s",crmNTC.SUPPORT_TICKET_ESCALATED_NEW="Support_TicketEscalated__s",crmNTC.SUPPORT_NEW_COMMENT_MENTION_NEW="Support_NewComment_Mention__s",crmNTC.SUPPORT_NEW_COMMENT_NEW="Support_NewComment__s",crmNTC.SUPPORT_NEW_COMMENT_LEAD_NEW="Support_NewComment_Lead__s",crmNTC.SUPPORT_NEW_COMMENT_CONTACT_NEW="Support_NewComment_Contact__s",crmNTC.SUPPORT_NEW_COMMENT_POTENTIAL_NEW="Support_NewComment_Potential__s",crmNTC.SUPPORT_NEW_COMMENT_CUSTOMER_NEW="Support_NewComment_Customer__s",crmNTC.SUPPORT_NEW_COMMENT_SUPPORT_REP_NEW="Support_NewComment_SupportRep__s",crmNTC.SUPPORT_NEW_RESPONSE_NEW="Support_NewResponse__s",crmNTC.SUPPORT_NEW_RESPONSE_LEAD_NEW="Support_NewResponse_Lead__s",crmNTC.SUPPORT_NEW_RESPONSE_CONTACT_NEW="Support_NewResponse_Contact__s",crmNTC.SUPPORT_NEW_RESPONSE_POTENTIAL_NEW="Support_NewResponse_Potential__s",crmNTC.SUPPORT_NEW_RESPONSE_CUSTOMER_NEW="Support_NewResponse_Customer__s",crmNTC.SOCIAL_FB_NEW_POST_NEW="Facebook_NewPost__s",crmNTC.SOCIAL_FB_NEW_COMMENT_NEW="Facebook_NewComment__s",crmNTC.SOCIAL_FB_NEW_LIKE_NEW="Facebook_NewLike__s",crmNTC.SOCIAL_FB_DM_NEW="Facebook_Message__s",crmNTC.SOCIAL_TW_MENTION_NEW="Twitter_Mention__s",crmNTC.SOCIAL_TW_REPLY_NEW="Twitter_Reply__s",crmNTC.SOCIAL_TW_DM_NEW="Twitter_Message__s",crmNTC.SOCIAL_TW_RETWEET="twitter.retweet",crmNTC.SOCIAL_TW_FAVORITE="twitter.favorite",crmNTC.PLATFORM_EXTENSION_SIGNAL="platform.extension.signal",crmNTC.MESSAGE_NEWMESSAGE="Message_NewMessage__s",crmNTC.MESSAGE_READ="Message_Read__s",crmNTC.BACKSTAGE_PURCHASED="zoho.backstage.purchased",crmNTC.BACKSTAGE_CHECKEDIN="zoho.backstage.checkedin",crmNTC.BACKSTAGE_CANCELLED="zoho.backstage.cancelled",crmNTC.BACKSTAGE_PURCHASED_NEW="Backstage_Purchased__s",crmNTC.BACKSTAGE_CHECKEDIN_NEW="Backstage_Checkedin__s",crmNTC.BACKSTAGE_CANCELLED_NEW="Backstage_Cancelled__s",crmNTC.WEBINAR_REGISTERED="zoho.webinar.registered",crmNTC.WEBINAR_ATTENDED="zoho.webinar.registered",crmNTC.WEBINAR_REGISTERED_NEW="Webinar_Registered__s",crmNTC.WEBINAR_ATTENDED_NEW="Webinar_Attended__s",crmNTC.extNewVsOldNamespaceMapping={},crmNTC.extNewVsOldNamespaceMapping[crmNTC.EXT_EMAILTRACKING_NEW]=crmNTC.EXT_EMAILTRACKING,crmNTC.extNewVsOldNamespaceMapping[crmNTC.EXT_EMAILINSIGHTS_NEW]=crmNTC.EXT_EMAILINSIGHTS,crmNTC.extNewVsOldNamespaceMapping[crmNTC.EXT_TELEPHONY_NEW]=crmNTC.EXT_TELEPHONY,crmNTC.extNewVsOldNamespaceMapping[crmNTC.EXT_SURVEY_NEW]=crmNTC.EXT_SURVEY,crmNTC.extNewVsOldNamespaceMapping[crmNTC.EXT_CAMPAIGNS_NEW]=crmNTC.EXT_CAMPAIGNS,crmNTC.extNewVsOldNamespaceMapping[crmNTC.EXT_SALESIQ_NEW]=crmNTC.EXT_SALESIQ,crmNTC.extNewVsOldNamespaceMapping[crmNTC.EXT_SUPPORT_NEW]=crmNTC.EXT_SUPPORT,crmNTC.extNewVsOldNamespaceMapping[crmNTC.EXT_FACEBOOK_NEW]=crmNTC.EXT_FACEBOOK,crmNTC.extNewVsOldNamespaceMapping[crmNTC.EXT_TWITTER_NEW]=crmNTC.EXT_TWITTER,crmNTC.extNewVsOldNamespaceMapping[crmNTC.EXT_BACKSTAGE_NEW]=crmNTC.EXT_BACKSTAGE,crmNTC.extNewVsOldNamespaceMapping[crmNTC.EXT_WEBINAR_NEW]=crmNTC.EXT_WEBINAR,crmNTC.newVsOldNamespaceMapping={},crmNTC.newVsOldNamespaceMapping[crmNTC.MAIL_INCOMING_NEW]=crmNTC.MAIL_INCOMING,crmNTC.newVsOldNamespaceMapping[crmNTC.SURVEY_RESPONDED_NEW]=crmNTC.SURVEY_RESPONDED,crmNTC.newVsOldNamespaceMapping[crmNTC.SURVEY_VISITED_NEW]=crmNTC.SURVEY_VISITED,crmNTC.newVsOldNamespaceMapping[crmNTC.MAILTRACKING_OPEN_NEW]=crmNTC.MAILTRACKING_OPEN,crmNTC.newVsOldNamespaceMapping[crmNTC.MAILTRACKING_CLICK_NEW]=crmNTC.MAILTRACKING_CLICK,crmNTC.newVsOldNamespaceMapping[crmNTC.MAILTRACKING_BOUNCE_NEW]=crmNTC.MAILTRACKING_BOUNCE,crmNTC.newVsOldNamespaceMapping[crmNTC.CAMPAIGN_OPEN_NEW]=crmNTC.CAMPAIGN_OPEN,crmNTC.newVsOldNamespaceMapping[crmNTC.CAMPAIGN_CLICK_NEW]=crmNTC.CAMPAIGN_CLICK,crmNTC.newVsOldNamespaceMapping[crmNTC.CAMPAIGN_BOUNCE_NEW]=crmNTC.CAMPAIGN_BOUNCE,crmNTC.newVsOldNamespaceMapping[crmNTC.CAMPAIGN_SOFT_BOUNCE_NEW]=crmNTC.CAMPAIGN_SOFT_BOUNCE,crmNTC.newVsOldNamespaceMapping[crmNTC.CALL_MISSED_NEW]=crmNTC.CALL_MISSED,crmNTC.newVsOldNamespaceMapping[crmNTC.SALESIQ_CHAT_MISSED_NEW]=crmNTC.SALESIQ_CHAT_MISSED,crmNTC.newVsOldNamespaceMapping[crmNTC.SUPPORT_NEW_TICKET_NEW]=crmNTC.SUPPORT_NEW_TICKET,crmNTC.newVsOldNamespaceMapping[crmNTC.SUPPORT_NEW_TICKET_LEAD_NEW]=crmNTC.SUPPORT_NEW_TICKET_LEAD,crmNTC.newVsOldNamespaceMapping[crmNTC.SUPPORT_NEW_TICKET_CONTACT_NEW]=crmNTC.SUPPORT_NEW_TICKET_CONTACT,crmNTC.newVsOldNamespaceMapping[crmNTC.SUPPORT_NEW_TICKET_POTENTIAL_NEW]=crmNTC.SUPPORT_NEW_TICKET_POTENTIAL,crmNTC.newVsOldNamespaceMapping[crmNTC.SUPPORT_NEW_TICKET_CUSTOMER_NEW]=crmNTC.SUPPORT_NEW_TICKET_CUSTOMER,crmNTC.newVsOldNamespaceMapping[crmNTC.SUPPORT_TICKET_STATUS_CHANGE_NEW]=crmNTC.SUPPORT_TICKET_STATUS_CHANGE,crmNTC.newVsOldNamespaceMapping[crmNTC.SUPPORT_NEW_RATING_NEW]=crmNTC.SUPPORT_NEW_RATING,crmNTC.newVsOldNamespaceMapping[crmNTC.SUPPORT_TICKET_PRIORITY_CHANGE_NEW]=crmNTC.SUPPORT_TICKET_PRIORITY_CHANGE,crmNTC.newVsOldNamespaceMapping[crmNTC.SUPPORT_TICKET_OVERDUE_NEW]=crmNTC.SUPPORT_TICKET_OVERDUE,crmNTC.newVsOldNamespaceMapping[crmNTC.SUPPORT_TICKET_ESCALATED_NEW]=crmNTC.SUPPORT_TICKET_ESCALATED,crmNTC.newVsOldNamespaceMapping[crmNTC.SUPPORT_NEW_COMMENT_MENTION_NEW]=crmNTC.SUPPORT_NEW_COMMENT_MENTION,crmNTC.newVsOldNamespaceMapping[crmNTC.SUPPORT_NEW_COMMENT_NEW]=crmNTC.SUPPORT_NEW_COMMENT,crmNTC.newVsOldNamespaceMapping[crmNTC.SUPPORT_NEW_COMMENT_LEAD_NEW]=crmNTC.SUPPORT_NEW_COMMENT_LEAD,crmNTC.newVsOldNamespaceMapping[crmNTC.SUPPORT_NEW_COMMENT_CONTACT_NEW]=crmNTC.SUPPORT_NEW_COMMENT_CONTACT,crmNTC.newVsOldNamespaceMapping[crmNTC.SUPPORT_NEW_COMMENT_POTENTIAL_NEW]=crmNTC.SUPPORT_NEW_COMMENT_POTENTIAL,crmNTC.newVsOldNamespaceMapping[crmNTC.SUPPORT_NEW_COMMENT_CUSTOMER_NEW]=crmNTC.SUPPORT_NEW_COMMENT_CUSTOMER,crmNTC.newVsOldNamespaceMapping[crmNTC.SUPPORT_NEW_COMMENT_SUPPORT_REP_NEW]=crmNTC.SUPPORT_NEW_COMMENT_SUPPORT_REP,crmNTC.newVsOldNamespaceMapping[crmNTC.SUPPORT_NEW_RESPONSE_NEW]=crmNTC.SUPPORT_NEW_RESPONSE,crmNTC.newVsOldNamespaceMapping[crmNTC.SUPPORT_NEW_RESPONSE_LEAD_NEW]=crmNTC.SUPPORT_NEW_RESPONSE_LEAD,crmNTC.newVsOldNamespaceMapping[crmNTC.SUPPORT_NEW_RESPONSE_CONTACT_NEW]=crmNTC.SUPPORT_NEW_RESPONSE_CONTACT,crmNTC.newVsOldNamespaceMapping[crmNTC.SUPPORT_NEW_RESPONSE_POTENTIAL_NEW]=crmNTC.SUPPORT_NEW_RESPONSE_POTENTIAL,crmNTC.newVsOldNamespaceMapping[crmNTC.SUPPORT_NEW_RESPONSE_CUSTOMER_NEW]=crmNTC.SUPPORT_NEW_RESPONSE_CUSTOMER,crmNTC.newVsOldNamespaceMapping[crmNTC.SOCIAL_FB_NEW_POST_NEW]=crmNTC.SOCIAL_FB_NEW_POST,crmNTC.newVsOldNamespaceMapping[crmNTC.SOCIAL_FB_NEW_COMMENT_NEW]=crmNTC.SOCIAL_FB_NEW_COMMENT,crmNTC.newVsOldNamespaceMapping[crmNTC.SOCIAL_FB_NEW_LIKE_NEW]=crmNTC.SOCIAL_FB_NEW_LIKE,crmNTC.newVsOldNamespaceMapping[crmNTC.SOCIAL_FB_DM_NEW]=crmNTC.SOCIAL_FB_DM,crmNTC.newVsOldNamespaceMapping[crmNTC.SOCIAL_TW_MENTION_NEW]=crmNTC.SOCIAL_TW_MENTION,crmNTC.newVsOldNamespaceMapping[crmNTC.SOCIAL_TW_REPLY_NEW]=crmNTC.SOCIAL_TW_REPLY,crmNTC.newVsOldNamespaceMapping[crmNTC.SOCIAL_TW_DM_NEW]=crmNTC.SOCIAL_TW_DM,crmNTC.newVsOldNamespaceMapping[crmNTC.SOCIAL_TW_DM_NEW]=crmNTC.SOCIAL_TW_DM,crmNTC.newVsOldNamespaceMapping[crmNTC.BACKSTAGE_PURCHASED_NEW]=crmNTC.BACKSTAGE_PURCHASED,crmNTC.newVsOldNamespaceMapping[crmNTC.BACKSTAGE_CHECKEDIN_NEW]=crmNTC.BACKSTAGE_CHECKEDIN,crmNTC.newVsOldNamespaceMapping[crmNTC.BACKSTAGE_CANCELLED_NEW]=crmNTC.BACKSTAGE_CANCELLED,crmNTC.newVsOldNamespaceMapping[crmNTC.WEBINAR_REGISTERED_NEW]=crmNTC.WEBINAR_REGISTERED,crmNTC.newVsOldNamespaceMapping[crmNTC.WEBINAR_ATTENDED_NEW]=crmNTC.WEBINAR_ATTENDED,crmNTC.SUPPORT_NEW_TICKET_TYPES=[crmNTC.SUPPORT_NEW_TICKET_LEAD,crmNTC.SUPPORT_NEW_TICKET_CONTACT,crmNTC.SUPPORT_NEW_TICKET_POTENTIAL,crmNTC.SUPPORT_NEW_TICKET_CUSTOMER,crmNTC.SUPPORT_NEW_TICKET_LEAD_NEW,crmNTC.SUPPORT_NEW_TICKET_CONTACT_NEW,crmNTC.SUPPORT_NEW_TICKET_POTENTIAL_NEW,crmNTC.SUPPORT_NEW_TICKET_CUSTOMER_NEW],crmNTC.SUPPORT_NEW_COMMENT_TYPES=[crmNTC.SUPPORT_NEW_COMMENT_MENTION,crmNTC.SUPPORT_NEW_COMMENT_LEAD,crmNTC.SUPPORT_NEW_COMMENT_CONTACT,crmNTC.SUPPORT_NEW_COMMENT_POTENTIAL,crmNTC.SUPPORT_NEW_COMMENT_CUSTOMER,crmNTC.SUPPORT_NEW_COMMENT_MENTION_NEW,crmNTC.SUPPORT_NEW_COMMENT_LEAD_NEW,crmNTC.SUPPORT_NEW_COMMENT_CONTACT_NEW,crmNTC.SUPPORT_NEW_COMMENT_POTENTIAL_NEW,crmNTC.SUPPORT_NEW_COMMENT_CUSTOMER_NEW],crmNTC.SUPPORT_NEW_RESPONSE_TYPES=[crmNTC.SUPPORT_NEW_RESPONSE_LEAD,crmNTC.SUPPORT_NEW_RESPONSE_CONTACT,crmNTC.SUPPORT_NEW_RESPONSE_POTENTIAL,crmNTC.SUPPORT_NEW_RESPONSE_CUSTOMER,crmNTC.SUPPORT_NEW_RESPONSE_LEAD_NEW,crmNTC.SUPPORT_NEW_RESPONSE_CONTACT_NEW,crmNTC.SUPPORT_NEW_RESPONSE_POTENTIAL_NEW,crmNTC.SUPPORT_NEW_RESPONSE_CUSTOMER_NEW],crmNTC.SUPPORT_TYPES=[crmNTC.SUPPORT_NEW_TICKET_LEAD,crmNTC.SUPPORT_NEW_TICKET_CONTACT,crmNTC.SUPPORT_NEW_TICKET_POTENTIAL,crmNTC.SUPPORT_NEW_TICKET_CUSTOMER,crmNTC.SUPPORT_TICKET_STATUS_CHANGE,crmNTC.SUPPORT_NEW_RATING,crmNTC.SUPPORT_TICKET_PRIORITY_CHANGE,crmNTC.SUPPORT_TICKET_OVERDUE,crmNTC.SUPPORT_TICKET_ESCALATED,crmNTC.SUPPORT_NEW_COMMENT_MENTION,crmNTC.SUPPORT_NEW_COMMENT_LEAD,crmNTC.SUPPORT_NEW_COMMENT_CONTACT,crmNTC.SUPPORT_NEW_COMMENT_POTENTIAL,crmNTC.SUPPORT_NEW_COMMENT_CUSTOMER,crmNTC.SUPPORT_NEW_COMMENT_SUPPORT_REP,crmNTC.SUPPORT_NEW_RESPONSE_LEAD,crmNTC.SUPPORT_NEW_RESPONSE_CONTACT,crmNTC.SUPPORT_NEW_RESPONSE_POTENTIAL,crmNTC.SUPPORT_NEW_RESPONSE_CUSTOMER,crmNTC.SUPPORT_NEW_TICKET_LEAD_NEW,crmNTC.SUPPORT_NEW_TICKET_CONTACT_NEW,crmNTC.SUPPORT_NEW_TICKET_POTENTIAL_NEW,crmNTC.SUPPORT_NEW_TICKET_CUSTOMER_NEW,crmNTC.SUPPORT_TICKET_STATUS_CHANGE_NEW,crmNTC.SUPPORT_NEW_RATING_NEW,crmNTC.SUPPORT_TICKET_PRIORITY_CHANGE_NEW,crmNTC.SUPPORT_TICKET_OVERDUE_NEW,crmNTC.SUPPORT_TICKET_ESCALATED_NEW,crmNTC.SUPPORT_NEW_COMMENT_MENTION_NEW,crmNTC.SUPPORT_NEW_COMMENT_LEAD_NEW,crmNTC.SUPPORT_NEW_COMMENT_CONTACT_NEW,crmNTC.SUPPORT_NEW_COMMENT_POTENTIAL_NEW,crmNTC.SUPPORT_NEW_COMMENT_CUSTOMER_NEW,crmNTC.SUPPORT_NEW_COMMENT_SUPPORT_REP_NEW,crmNTC.SUPPORT_NEW_RESPONSE_LEAD_NEW,crmNTC.SUPPORT_NEW_RESPONSE_CONTACT_NEW,crmNTC.SUPPORT_NEW_RESPONSE_POTENTIAL_NEW,crmNTC.SUPPORT_NEW_RESPONSE_CUSTOMER_NEW],crmNTC.FB_TYPES=[crmNTC.SOCIAL_FB_NEW_POST,crmNTC.SOCIAL_FB_NEW_COMMENT,crmNTC.SOCIAL_FB_NEW_LIKE,crmNTC.SOCIAL_FB_DM,crmNTC.SOCIAL_FB_NEW_POST_NEW,crmNTC.SOCIAL_FB_NEW_COMMENT_NEW,crmNTC.SOCIAL_FB_NEW_LIKE_NEW,crmNTC.SOCIAL_FB_DM_NEW],crmNTC.TWITTER_TYPES=[crmNTC.SOCIAL_TW_MENTION,crmNTC.SOCIAL_TW_REPLY,crmNTC.SOCIAL_TW_DM,crmNTC.SOCIAL_TW_RETWEET,crmNTC.SOCIAL_TW_FAVORITE,crmNTC.SOCIAL_TW_MENTION_NEW,crmNTC.SOCIAL_TW_REPLY_NEW,crmNTC.SOCIAL_TW_DM_NEW],crmNTC.EMAIL_TYPES=[crmNTC.MAIL_INCOMING,crmNTC.MAIL_INCOMING_COMPETITORS_ALERT,crmNTC.MAILTRACKING_OPEN,crmNTC.MAILTRACKING_CLICK,crmNTC.MAILTRACKING_BOUNCE,crmNTC.MAIL_INCOMING_NEW,crmNTC.MAILTRACKING_OPEN_NEW,crmNTC.MAILTRACKING_CLICK_NEW,crmNTC.MAILTRACKING_BOUNCE_NEW],crmNTC.CAMPAIGN_TYPES=[crmNTC.CAMPAIGN_OPEN,crmNTC.CAMPAIGN_CLICK,crmNTC.CAMPAIGN_BOUNCE,crmNTC.CAMPAIGN_SOFT_BOUNCE,crmNTC.CAMPAIGN_OPEN_NEW,crmNTC.CAMPAIGN_CLICK_NEW,crmNTC.CAMPAIGN_BOUNCE_NEW,crmNTC.CAMPAIGN_SOFT_BOUNCE_NEW],crmNTC.SURVEY_TYPES=[crmNTC.SURVEY_RESPONDED,crmNTC.SURVEY_VISITED,crmNTC.SURVEY_RESPONDED_NEW,crmNTC.SURVEY_VISITED_NEW],crmNTC.FEATURES={SALES_SIGNALS:1,LEAD_SCORING:2,NOTIFY_VIA_CHAT:4},crmNTC.predefinedSignals=[crmNTC.MAIL_INCOMING,crmNTC.MAILTRACKING_OPEN,crmNTC.MAILTRACKING_CLICK,crmNTC.MAILTRACKING_BOUNCE,crmNTC.CALL_MISSED,crmNTC.SURVEY_RESPONDED,crmNTC.SALESIQ_CHAT_MISSED,crmNTC.CAMPAIGN_OPEN,crmNTC.CAMPAIGN_CLICK,crmNTC.CAMPAIGN_BOUNCE,crmNTC.CAMPAIGN_BOUNCE,crmNTC.SUPPORT_NEW_TICKET_LEAD,crmNTC.SUPPORT_NEW_TICKET_CONTACT,crmNTC.SUPPORT_NEW_TICKET_POTENTIAL,crmNTC.SUPPORT_NEW_TICKET_CUSTOMER,crmNTC.SUPPORT_TICKET_STATUS_CHANGE,crmNTC.SUPPORT_NEW_RATING,crmNTC.SUPPORT_TICKET_PRIORITY_CHANGE,crmNTC.SUPPORT_TICKET_OVERDUE,crmNTC.SUPPORT_TICKET_ESCALATED,crmNTC.SUPPORT_NEW_COMMENT_MENTION,crmNTC.SUPPORT_NEW_COMMENT_LEAD,crmNTC.SUPPORT_NEW_COMMENT_CONTACT,crmNTC.SUPPORT_NEW_COMMENT_POTENTIAL,crmNTC.SUPPORT_NEW_COMMENT_CUSTOMER,crmNTC.SUPPORT_NEW_COMMENT_SUPPORT_REP,crmNTC.SUPPORT_NEW_RESPONSE_LEAD,crmNTC.SUPPORT_NEW_RESPONSE_CONTACT,crmNTC.SUPPORT_NEW_RESPONSE_POTENTIAL,crmNTC.SUPPORT_NEW_RESPONSE_CUSTOMER,crmNTC.SOCIAL_FB_NEW_POST,crmNTC.SOCIAL_FB_NEW_COMMENT,crmNTC.SOCIAL_FB_NEW_LIKE,crmNTC.SOCIAL_FB_DM,crmNTC.SOCIAL_TW_MENTION,crmNTC.SOCIAL_TW_REPLY,crmNTC.SOCIAL_TW_DM,crmNTC.MAIL_INCOMING_NEW,crmNTC.MAILTRACKING_OPEN_NEW,crmNTC.MAILTRACKING_CLICK_NEW,crmNTC.MAILTRACKING_BOUNCE_NEW,crmNTC.CALL_MISSED_NEW,crmNTC.SURVEY_RESPONDED_NEW,crmNTC.SALESIQ_CHAT_MISSED_NEW,crmNTC.CAMPAIGN_OPEN_NEW,crmNTC.CAMPAIGN_CLICK_NEW,crmNTC.CAMPAIGN_BOUNCE_NEW,crmNTC.CAMPAIGN_SOFT_BOUNCE_NEW,crmNTC.SUPPORT_NEW_TICKET_LEAD_NEW,crmNTC.SUPPORT_NEW_TICKET_CONTACT_NEW,crmNTC.SUPPORT_NEW_TICKET_POTENTIAL_NEW,crmNTC.SUPPORT_NEW_TICKET_CUSTOMER_NEW,crmNTC.SUPPORT_TICKET_STATUS_CHANGE_NEW,crmNTC.SUPPORT_NEW_RATING_NEW,crmNTC.SUPPORT_TICKET_PRIORITY_CHANGE_NEW,crmNTC.SUPPORT_TICKET_OVERDUE_NEW,crmNTC.SUPPORT_TICKET_ESCALATED_NEW,crmNTC.SUPPORT_NEW_COMMENT_MENTION_NEW,crmNTC.SUPPORT_NEW_COMMENT_LEAD_NEW,crmNTC.SUPPORT_NEW_COMMENT_CONTACT_NEW,crmNTC.SUPPORT_NEW_COMMENT_POTENTIAL_NEW,crmNTC.SUPPORT_NEW_COMMENT_CUSTOMER_NEW,crmNTC.SUPPORT_NEW_COMMENT_SUPPORT_REP_NEW,crmNTC.SUPPORT_NEW_RESPONSE_LEAD_NEW,crmNTC.SUPPORT_NEW_RESPONSE_CONTACT_NEW,crmNTC.SUPPORT_NEW_RESPONSE_POTENTIAL_NEW,crmNTC.SUPPORT_NEW_RESPONSE_CUSTOMER_NEW,crmNTC.SOCIAL_FB_NEW_POST_NEW,crmNTC.SOCIAL_FB_NEW_COMMENT_NEW,crmNTC.SOCIAL_FB_NEW_LIKE_NEW,crmNTC.SOCIAL_FB_DM_NEW,crmNTC.SOCIAL_TW_MENTION_NEW,crmNTC.SOCIAL_TW_REPLY_NEW,crmNTC.SOCIAL_TW_DM_NEW,crmNTC.MESSAGE_NEWMESSAGE,crmNTC.MESSAGE_READ],crmNTC.url=Crm.getCrmBasePath()+"/NotificationCenter.do",crmNTC.globalToggleFlag=0,$(document).ready((function(){crmNTC.windowSize={wwidth:renderingUtils.windowWidth,wheight:renderingUtils.windowHeight}})),crmNTC.showFullNotifications=function(e){$(e).find(".vmore").remove(),$(e).find(".nc-rtime").show();var t=$(e).closest("li");if(crmNTC.globalToggleFlag=0,crmNTCDetailView.resetToggleClass(),!t.attr("data-ntc-isRead")){if(t.find("li").map((function(){var e=$(this),t=e.attr("data-ntcobj");if(void 0!==t&&!(t=JSON.parse(t)).ISSEEN)return e.attr("data-notification-id")})).toArray().length>0){var a=e.parentElement.dataset.ntcEntityid;crmNTC.markRead(a)}t.removeClass("cursorpointer").find(".notificationgrpListRow").addClass("ntc-visited")}},crmNTC.markRead=function(e){var t="/crm/v2/signals/notifications/actions/read?record_id="+e,a=new crmRequestPool,n={"X-ZCSRF-TOKEN":csrfParamName+"="+csrfToken};a.initiate({action:t,headers:n,data:"",type:"PUT",success:function(e,t){$("[data-ntc-entityId="+t+"]").attr("data-ntc-isread",!0);var a=e.notifications.details.count;crmNTCGlobal.signals_count=crmNTCGlobal.signals_count-a,crmNTCGlobal.live_global_notifications_count=crmNTCGlobal.live_global_notifications_count-a,crmNTCGlobal.live_global_notifications_count=crmNTCGlobal.live_global_notifications_count<=0?0:crmNTCGlobal.live_global_notifications_count,crmNTCGlobal.updateNotificationCount()}})},crmNTC.updateNotificationScroll=function(e){var t=e.closest("li.ntc-entity-group");t.offset().top<90&&$("#notificationGrpList").scrollTo(t,{duration:"fast"}),thirdPartyUtils.bindPerfectScrollUpdate("#notificationGrpList")},crmNTC.sortByAuditTime=function(e){return e.sort((function(e,t){var a=new Date(e.lastAuditedTime.replace(" ","T"));return new Date(t.lastAuditedTime.replace(" ","T"))-a}))},crmNTC.getNTCFullDateTime=function(e){e=e.replace(" ","T");var t=new Date(e),a=new Date,n=Utils.getTimeInUserFormat(t,!0),i="M d,";return t.getFullYear()!=a.getFullYear()&&(i="M d, yy"),$.datepicker.formatDate(i,t)+" "+n},crmNTC.isSignalDetailViewVisible=function(){var e=$("#showSignalPop");return!!(e.is(":visible")&&e.length>0)},crmNTC.quickCreate=function(e,t,a,n,i,l){Crm.trackSpotLightAction("CRM Signals - Quick Create Click",{Operation:e}),"NewEvent"===e?Events.globalCreate(i,t,l,"",!1,n):"NewCall"===e&&isNewCallView&&Crm.globalCreate(i,t,l,"",n),"NewAppointment"===e?Events.globalCreate(i,t,"Appointments"):Q.selectAction(e,t,a,n,t,!1,void 0,l,i)},crmNTC.positionQcreatePopup=function(){var e=$("#qCreate");(e.css({display:"block",position:"absolute",width:"475px",zIndex:"32",left:"550px",top:"100px"}),0!==e.length)&&(freezeBackground(),$("#FreezeLayer").css({opacity:".1","z-index":31}));renderingUtils.ShakeDivInfreeze("qCreate","left",20,100)},crmNTC.positionEventQcreatePopup=function(){var e=$("#eventCreatePopup");(e.css({display:"block",position:"absolute",width:"475px",zIndex:"32",left:"550px",top:"300px"}),e.attr("onclick","sE(event)"),0!==e.length)&&(freezeBackground(),$("#FreezeLayer").css({opacity:".1","z-index":31}));renderingUtils.ShakeDivInfreeze("eventCreatePopup","left",20,100)},crmNTC.positionAppointmentcreatePopup=function(){var e=$("#appointmentCreate");(e.css({zIndex:"32"}),e.attr("onclick","sE(event)"),0!==e.length)&&(freezeBackground(),$("#FreezeLayer").css({opacity:".1","z-index":31}))},crmNTC.showQuickCreateSuccessMsg=function(e){var t=e.entityId,a=e.entityModule;void 0===a&&(a=e.module);var n=a;"Events"===a&&(n=Events.getModuleName(!0,!0,!1)),"Appointments"===a&&crmui.hidePopup("appointmentCreate"),Crm.trackSpotLightAction("CRM Signals - Quick Create Success",{Operation:a}),crmui.showMsgBand("success",I18n.getMsg("crm.signal.entity.quick.create.success",[I18n.getMsg(n),t,a,Crm.getCrmBasePath()]),3e3)},crmNTC.notifyBodyEleWidth=function(){var e=$("#notificationGroupList");if(e.length&&e.is(":visible")){var t=e.find(".notificationgrpListRow").eq(0),a=parseInt(t.css("width"))-155;e.find(".notifyBodyEle .ntcTxtShort").css({width:a})}},crmNTC.getSupportedChannelsCount=function(e,t){var a=1;return e&&(a+=1),void 0!==t&&t.isSlackAvailableForSignals&&t.hasOwnProperty("selectedteam")&&void 0!==t.selectedteam&&(a+=1),a};var crmNTCGlobal=crmNTCGlobal||{};function loadZohoCustomSignalIcons(){var e=$("img.lazy"),t=e.toArray(),a=!1,n=0,i=function(){!1===a&&0==n&&(a=!0,setTimeout((function(){var e=0,l=t.length;0===t.length&&(document.removeEventListener("scroll",i),window.removeEventListener("resize",i),window.removeEventListener("orientationchange",i));for(var s=0;s<l;s++){var r=t[s];if(r.getBoundingClientRect().top<=window.innerHeight&&r.getBoundingClientRect().bottom>=0&&"none"!==getComputedStyle(r).display&&(e++,!0,r.src=r.dataset.src,r.classList.remove("lazy"),e>=5))break}t=t.filter((function(e){return $(e).hasClass("lazy")})),n+=e,a=!1}),200))};e.bind("load",(function(){n>0&&n--,0==n&&i()})).each((function(){this.complete&&$(this).trigger("load")})),document.addEventListener("scroll",i),window.addEventListener("resize",i),window.addEventListener("orientationchange",i),i()}crmNTCGlobal.page=0,crmNTCGlobal.isCrmNotificationCenterEmpty=crmNTCGlobal.isCrmNotificationCenterEmpty||!1,crmNTCGlobal.signals_count=0,crmNTCGlobal.feeds_count=0,crmNTCGlobal.new_feeds_count=0,crmNTCGlobal.live_global_notifications_count=0,crmNTCGlobal.globalScrollFlag=crmNTCGlobal.globalScrollFlag||!1,crmNTCGlobal.isGlobalScrollLoading=crmNTCGlobal.isGlobalScrollLoading||!1,crmNTCGlobal.isSocialConfigChanged=!0,crmNTCGlobal.isSocialRunning=!1,crmNTCGlobal.lastIndex=0,crmNTCGlobal.isSalesSignalsComponentOpenForCrmPlus=!1,crmNTCGlobal.end_page=0,crmNTCGlobal.lastNotificationIdInRecordTimeline="",crmNTCGlobal.temp=[],crmNTCGlobal.manageSignalNewFunc={},crmNTCGlobal.createSigBuffer={},crmNTCGlobal.updateSigBuffer={},crmNTCGlobal.getStatusOfSalesSignalsComponentInCrmPlus=function(){"object"==typeof CrmPlusImpl&&(void 0===CrmPlusLib.isInNewSalesSignalsView||0==CrmPlusLib.isInNewSalesSignalsView?crmNTCGlobal.isSalesSignalsComponentOpenForCrmPlus=!1:1==CrmPlusLib.isInNewSalesSignalsView&&(crmNTCGlobal.isSalesSignalsComponentOpenForCrmPlus=!0))},crmNTCGlobal.renderGlobalNotification=function(){("undefined"==typeof CrmPlusImpl||"undefined"!=typeof CrmPlusImpl&&!CrmPlusImpl.isLoadedInCrmplus())&&(hideMenu(),Activities.RemainderHideOnly());var e=$(window).scrollLeft(),t=$("#notificationscontainer"),a=t.css("width"),n=t.css("height"),i=$("#notificationscontainer .SocialArrow"),l=$("#feeds_notification_container .zcicn-notify-topband"),s=l.offset().left,r=l.outerWidth(),o=$("#nc-tabs-menu").outerHeight(),c=$("#feeds #notifications_inner"),d=$("#GNCSettings");$(".notifiactionIcon").addClass("notifiactionIconH");var m=Crm.userDetails.NTC_ENABLED;crmNTCGlobal.getStatusOfSalesSignalsComponentInCrmPlus(),m&&crmNTCGlobal.isSalesSignalsComponentOpenForCrmPlus&&(m=!1);var u=!1;void 0!==Crm.userDetails.MODULE_LIST.Feeds&&("undefined"==typeof CrmPlusImpl||"undefined"!=typeof CrmPlusImpl&&!CrmPlusImpl.isLoadedInCrmplus()?u=!Crm.userDetails.PERSONAL_ACCOUNT&&Crm.userDetails.MODULE_LIST.Feeds.visible:(u=!Crm.userDetails.PERSONAL_ACCOUNT&&Crm.userDetails.MODULE_LIST.Feeds.visible,"undefined"!=typeof CrmPlusImpl&&CrmPlusImpl.isLoadedInCrmplus()&&Crm.userDetails.PERSONAL_ACCOUNT&&(u=Crm.userDetails.MODULE_LIST.Feeds.visible)));var p=$("#showOneFeed");if(t.hasClass("open")||p.is(":visible"))t.removeClass("open"),crmNTCGlobal.closeGlobalNotifications(),p.css("display","none");else{var g=Handlebars.templates.centralNotifications({ntc_enabled:m,feeds_enabled:u});if($("#notifications_inner").html(g),Crm.userDetails.RTL_ENABLED){var h=s+r/2-11;i.css({right:"auto !important",left:h})}else{var f=renderingUtils.windowWidth+e-(s+r);i.css({left:"auto",right:f})}if(t.addClass("open"),crmNTC.globalToggleFlag=0,crmNTCGlobal.setNTCContainerHt(),c.css("height",renderingUtils.windowHeight-(o+3)),d.css({width:a,height:n,top:"0px",right:"0px"}),m){var v=networkUtils.returnDependencyFiles(["crm-competitor-mention-list.js"],crmConstants.jsStaticPathForLyte),C=networkUtils.returnDependencyFiles(["crm-competitor-mention-list.css"],crmConstants.cssStaticPathForLyte);Lyte.injectResources(v.concat(C),void 0,(function(){crmNTCGlobal.fetchGlobalNotifications()}))}else u&&getUNSNotificationList();t.is(":visible")&&$("html").hasClass("mac firefox")&&$("body").addClass("oH")}this.hideSidePopup();var T=$("#conditionalFieldRightSection"),N=$("#validationRuleRightSection");T.length&&T.css("right","-650px"),N.length&&N.hide()},crmNTCGlobal.hideSidePopup=function(){"block"===$("#emailalert").css("display")&&closealertMail("emailalert");var e=$("#showOneFeed"),t=$("#showSignalPop");$("#notificationGroupList li.left-Arrow-ntc").length>0&&$(".left-Arrow-ntc").hide(),e.is(":visible")&&e.hide(),t.is(":visible")&&t.hide().removeClass("signal-open"),hideFreezeLayer()},crmNTCGlobal.setNTCContainerHt=function(){var e=$("#notificationscontainer"),t=$("#tabLayer"),a=$("#wmstoolbar"),n=a.is(":visible")&&a.length?a.outerHeight():29;crmNTC.globalToggleFlag=0;var i=parseInt(t.innerHeight())+t.offset().top;$("body").hasClass("zcrmInsideCRMPlus")&&(i=0),e.css({top:i,height:renderingUtils.windowHeight-(i+n)})},crmNTCGlobal.tabAction=function(e){var t=$(e);t.addClass("sel"),t.siblings().removeClass("sel"),this.hideSidePopup()},crmNTCGlobal.setNotificationHeight=function(){var e=$("#tabLayer"),t=e.outerHeight(),a=$("#wmstoolbar"),n=a.is(":visible")&&a.length?a.outerHeight():29,i=parseInt(renderingUtils.windowHeight-(parseInt(e.innerHeight())+e.offset().top+n))-parseInt($("#nc-tabs-menu").outerHeight()+$("#notifySett").outerHeight());$("#notifications_inner #notificationGrpList").css({height:i}),thirdPartyUtils.bindPerfectScroll("#notificationGrpList",{wheelSpeed:1,wheelPropagation:!1,suppressScrollX:!0});var l=$("#GNCSettings .signalSettings_Inner_Tbl");if(l.is(":visible")&&l.length){var s=renderingUtils.windowHeight-(parseInt(t)+125);l.css("height",s).perfectScrollbar({wheelSpeed:60,wheelPropagation:!1,suppressScrollX:!0})}crmNTC.notifyBodyEleWidth()},crmNTCGlobal.getAuditedTimeForRecentNotification=function(e){for(var t=e[0].audited_time,a=e.length,n=0;n<a;n++){var i=e[n].audited_time;i>t&&(t=i)}return t},crmNTCGlobal.convert=function(e){var t={};t.info=e.info,t.group_notifications=[];var a={},n={},i=0;void 0!==e.notifications&&(i=e.notifications.length);for(var l=0;l<i;l++){var s=e.notifications[l].record;if(void 0!==s){var r=s.id,o=e.notifications[l].module,c={};c.record=s,c.module=o,void 0===n.record_id&&(n[r]=c),delete e.notifications[l].record,delete e.notifications[l].module;var d=e.notifications[l];void 0===a[r]&&(a[r]=[]),a[r].push(d)}}for(var m in n)if(n.hasOwnProperty(m)){var u={},p=n[m].record.id;u.record=n[m].record,u.module=n[m].module,u.notifications=a[p],u.lastAuditedTime=crmNTCGlobal.getAuditedTimeForRecentNotification(u.notifications),t.group_notifications.push(u)}return t},crmNTCGlobal.fetchGlobalNotifications=function(){commonUtils.showHideLoadingDiv(!0);var e=new crmRequestPool;crmNTCGlobal.page=1;var t="/crm/v2/signals/notifications?page="+crmNTCGlobal.page,a={"X-ZCSRF-TOKEN":csrfParamName+"="+csrfToken};e.initiate({action:t,headers:a,data:"",type:"GET",success:function(e){if(crmNTCGlobal.start_page=1,crmNTCGlobal.end_page=1,crmNTCGlobal.isCrmNotificationCenterEmpty=e.info.is_empty,e=crmNTCGlobal.convert(e),commonUtils.showHideLoadingDiv(),e.global=!0,crmNTC.new_social=e.info.new_social,e.group_notifications&&e.group_notifications.length>0){e.group_notifications=crmNTC.sortByAuditTime(e.group_notifications),thirdPartyUtils.unbindChildEvents("#notificationList",!0,!0,!1),$("#notificationList").html(Handlebars.templates.globalSignal(e)).removeClass("pR oH"),crmNTCGlobal.setNotificationHeight(),$("#globalNotificationShowMore").html(Handlebars.templates.cvNotificationShowMore(e)),crmNTCGlobal.globalScrollFlag=e.info.more_records||!1,crmNTCGlobal.lastIndex=e.info.last_index||0;var t=window.location.href.split("="),a=$("#notifySett .notify-setting");"notificationSettings"===t[2]?a.removeAttr("onclick").attr("onclick","crmNTCGlobal.closeGlobalNotifications();"):a.removeAttr("onclick").attr("onclick","crmNTCGlobal.showGlobalSettings();"),crmNTCGlobal.live_global_notifications_count=e.live_ntc_count||0,crmNTCGlobal.updateNotificationCount(),loadZohoCustomSignalIcons()}else $("#notificationList").html(Handlebars.templates.emptySignalNotification())}})},crmNTCGlobal.resetLiveGlobalNotificationsCount=function(e){var t=new crmRequestPool,a={action:"resetLiveGlobalNotificationsCount",signals_count:crmNTCGlobal.signals_count,feeds_count:crmNTCGlobal.feeds_count};a[csrfParamName]=csrfToken,t.initiate({action:crmNTC.url,data:a,success:function(t){crmNTCGlobal.live_global_notifications_count=t.live_ntc_count||0,e&&e()}})},crmNTCGlobal.fetchNotificationsCount=function(e){var t={"X-ZCSRF-TOKEN":csrfParamName+"="+csrfToken};(new crmRequestPool).initiate({action:"/crm/v2/signals/notifications/actions/count",headers:t,type:"GET",data:"",success:function(t){crmNTCGlobal.signals_count=t.notifications.unseen_ntc_count||0,crmNTCGlobal.live_global_notifications_count=t.notifications.live_ntc_count||0,e&&e()}})},crmNTCGlobal.setGlobalNotificationCount=function(e){e||(e=0),crmNTCGlobal.feeds_count=e,crmNTCGlobal.fetchNotificationsCount(crmNTCGlobal.updateNotificationCount)},crmNTCGlobal.roundCount=function(e){return e>99?"99+":e},crmNTCGlobal.getTotalCount=function(){if("99+"===crmNTCGlobal.live_global_notifications_count)return"99+";var e=parseInt(crmNTCGlobal.live_global_notifications_count);return crmNTCGlobal.roundCount(e)},crmNTCGlobal.updateNotificationCount=function(){var e=crmNTCGlobal.getTotalCount(),t=parseInt(crmNTCGlobal.feeds_count),a=$("#feeds_notification");t>0||parseInt(e)>0?(0==e&&(e=t),a.show().text(e)):a.hide(),crmNTCGlobal.getStatusOfSalesSignalsComponentInCrmPlus(),crmNTCGlobal.isSalesSignalsComponentOpenForCrmPlus?crmplusImplTriggerActions("setNotificationCount",["general",crmNTCGlobal.feeds_count]):crmplusImplTriggerActions("setNotificationCount",["general",e]),crmNTCGlobal.resetFeedsCount(),crmNTCGlobal.resetSignalsCount()},crmNTCGlobal.resetFeedsCount=function(){var e=$("#feeds_count");crmNTCGlobal.feeds_count&&"0"!==crmNTCGlobal.feeds_count?e.show().text(crmNTCGlobal.feeds_count):e.hide()},crmNTCGlobal.resetSignalsCount=function(){var e=$("#signals_count");crmNTCGlobal.signals_count&&parseInt(crmNTCGlobal.signals_count)>0?e.show().text(crmNTCGlobal.signals_count):e.hide()},crmNTCGlobal.incrNotificationsCount=function(){crmNTCGlobal.signals_count=crmNTCGlobal.signals_count+1,crmNTCGlobal.live_global_notifications_count=crmNTCGlobal.live_global_notifications_count+1},crmNTCGlobal.setNewFeedsCount=function(e){crmNTCGlobal.feeds_count=e,crmNTCGlobal.live_global_notifications_count=crmNTCGlobal.live_global_notifications_count+1,crmNTCGlobal.updateNotificationCount()},crmNTCGlobal.showGlobalSettings=function(){var e=new crmRequestPool,t={action:"getNotificationSettings"};t[csrfParamName]=csrfToken,e.initiate({action:crmNTCSettings.url,data:t,success:function(e){var t=$("#tabLayer").outerHeight();(e=JSON.parse(e)).global=!0;var a=$("#notificationscontainer .newPopupCloseIcon"),n=$("#GNCSettings");n.html(Handlebars.templates.NotificationSettings(e)).show(),a.removeAttr("onclick").attr("onclick","crmNTCGlobal.closeGlobalSettings(this);");var i=renderingUtils.windowHeight-(t+125);n.find(".signalSettings_Inner_Tbl").css("height",i),thirdPartyUtils.bindPerfectScroll("#GNCSettings .signalSettings_Inner_Tbl",{wheelSpeed:60,wheelPropagation:!1,suppressScrollX:!0}),thirdPartyUtils.bindSelect2(".chosenSel")}}),this.hideSidePopup(),Crm.trackSpotLightAction("CRM Signals - Signal Settings",{Place:"Bell Icon",Edition:Crm.userDetails.EDITION_NAME,Profile:Crm.userDetails.PROFILE_NAME})},crmNTCGlobal.globalNotificationScroll=function(){if(loadZohoCustomSignalIcons(),crmNTCGlobal.globalScrollFlag&&!crmNTCGlobal.isGlobalScrollLoading){var e=$("#notificationGrpList"),t=$("#globalNotificationShowMore").find(".newwhitebtn"),a=e.outerHeight()+e.offset().top;if(t.length)a+15>t.offset().top&&renderingUtils.triggerEvent("click",t)}},crmNTCGlobal.fetchMoreGlobalNotifications=function(){crmNTC.isGlobalScrollLoading=!0,crmNTCGlobal.page=crmNTCGlobal.page+1;var e=$("#globalNotificationShowMore");e.html("<img src='"+networkUtils.getImageUrl("moreloading_90b33f4_.gif",ResourceConstants.CRM)+"'>"),commonUtils.showHideLoadingDiv(!0);var t=new crmRequestPool,a="/crm/v2/signals/notifications?page="+crmNTCGlobal.page,n={"X-ZCSRF-TOKEN":csrfParamName+"="+csrfToken};t.initiate({action:a,headers:n,data:"",type:"GET",success:function(t){crmNTCGlobal.end_page=crmNTCGlobal.end_page+1,(t=crmNTCGlobal.convert(t)).global=!0,$("#notificationGrpList #notificationGroupList").append(Handlebars.templates.notificationGroups(t)),e.html(Handlebars.templates.cvNotificationShowMore(t)),thirdPartyUtils.bindPerfectScrollUpdate("#notificationGrpList"),commonUtils.showHideLoadingDiv(),crmNTCGlobal.globalScrollFlag=t.info.more_records||!1,crmNTCGlobal.lastIndex=t.info.last_index||0,crmNTC.isGlobalScrollLoading=!1,crmNTC.notifyBodyEleWidth()}})},crmNTCGlobal.closeGlobalNotifications=function(){var e=$("#notificationscontainer");e.removeClass("open"),0==e.is(":visible")&&$("html").hasClass("mac firefox")&&$("body").removeClass("oH"),$("#showSignalPop").hide().removeClass("signal-open"),Crm.menu.globalHideMenu(),hideFreezeLayer()},crmNTCGlobal.closeGlobalSettings=function(e){$("#GNCSettings").hide(),$(e).removeAttr("onclick").attr("onclick","crmNTCGlobal.closeGlobalNotifications();")},crmNTCGlobal.call=function(e,t,a,n){if(Crm.trackSpotLightAction("CRM Signals - Call"),Crm.userDetails.TELEPHONY_ENABLED)ctiApiNotifier.click2Call(e,Crm.userDetails.ZGID,Crm.userDetails.USER_ID,t,"",a,n);else if(window.ZPB&&ZPB.clickToDial.isEnabled())crmCallsNew.initiateCallViaZPB(e,t,a,n);else{var i=commonUtils.getPlainPhoneNo(e);i=0==i.indexOf("+")?i.substring(1):i,Utils.windowLocationHref("skype:+"+i+"?call")}},crmNTCGlobal.isEntityOnline=function(e,t){return"undefined"!=typeof CrmTracking&&CrmTracking.isEntityOnline(e,t)},crmNTCGlobal.getChatLink=function(e,t){return"undefined"!=typeof CrmTracking?CrmTracking.getChatLink(e,t):""},crmNTCGlobal.startChat=function(e,t){if("undefined"!=typeof CrmTracking){var a=CrmTracking.getChatLink(e,t);""!==a&&networkUtils.openUrl(a)}},crmNTCGlobal.getNTCIconClass=function(e){var t=e.signal.namespace;return t.includes(crmNTC.EXT_EMAILTRACKING+".")||t.includes(crmNTC.EXT_EMAILTRACKING_NEW+".")?"nc-mail":t.includes(crmNTC.EXT_EMAILINSIGHTS+".")||t.includes(crmNTC.EXT_EMAILINSIGHTS_NEW+".")?"nc-mailTracking":t.includes(crmNTC.EXT_SURVEY)||t.includes(crmNTC.EXT_SURVEY_NEW)?"nc-survey":t.includes(crmNTC.EXT_TELEPHONY)||t.includes(crmNTC.EXT_TELEPHONY_NEW)?"nc-call":t.includes(crmNTC.EXT_SALESIQ)||t.includes(crmNTC.EXT_SALESIQ_NEW)?"nc-chat":t.includes(crmNTC.EXT_CAMPAIGNS)||t.includes(crmNTC.EXT_CAMPAIGNS_NEW)?"nc-campaign":t.includes(crmNTC.EXT_SUPPORT)||t.includes(crmNTC.EXT_SUPPORT_NEW)?"nc-support":t.includes("facebook")||t.includes("Facebook")?"nc-fb":t.includes("twitter")||t.includes("Twitter")?"nc-twitter":t.includes(crmNTC.EXT_BACKSTAGE)||t.includes(crmNTC.EXT_BACKSTAGE_NEW)?"nc-backstage":t.includes(crmNTC.EXT_WEBINAR)||t.includes(crmNTC.EXT_WEBINAR_NEW)?"nc-webinar":t.includes(crmNTC.MESSAGE_NEWMESSAGE)||t.includes(crmNTC.MESSAGE_READ)?"nc-message":"nc-mail"},crmNTCGlobal.markAllAsRead=function(){var e=$(".notificationgrpListRow");if(e.length!==$(".ntc-visited").length){Crm.trackSpotLightAction("CRM Signals - Mark All As Read",{Edition:Crm.userDetails.EDITION_NAME,Profile:Crm.userDetails.PROFILE_NAME});var t={"X-ZCSRF-TOKEN":csrfParamName+"="+csrfToken};(new crmRequestPool).initiate({action:"/crm/v2/signals/notifications/actions/read",headers:t,data:"",type:"PUT",success:function(){if($(".ntc-entity-group").attr("data-ntc-isRead",!0),e.addClass("ntc-visited"),crmNTCGlobal.signals_count=0,crmNTCGlobal.updateNotificationCount(),SalesSignalsWrapper.isSignalIFrameOpen){var t=$("#notificationGroupList").find(".ntc-unread");t.find(".notificationgrpListRow").css("background-color","#f5f5f5"),t.find(".notiNumCount").css("color","#555").css("border","#c3c3c3"),t.find(".notC").css("border","1px #c3c3c3 solid")}crmNTCGlobal.lastIndex=0}})}},crmNTCGlobal.getCrmPrefix=function(){return Crm.getCrmBasePath()},crmNTCGlobal.openNotificationActionInPopup=function(e){networkUtils.openUrl(Crm.getOrgSpecificURL(e),"notificationAction","toolbar=no,statusbar=no,menubar=no,directories=no,scrollbars=yes,resizeable=yes,menubar=no,width=934,height=598,top=145,left=145")},crmNTCGlobal.showFreezeLayerForSignals=function(){var e=$("#FreezeLayerSignals");e.css("display","block"),e.addClass("freezeLayeroverPopupForSignals")},crmNTCGlobal.hideFreezeLayerForSignals=function(){var e=$("#FreezeLayerSignals");e.css("display","none"),e.removeClass("freezeLayeroverPopupForSignals")},crmNTCGlobal.updateCusFunCallBack=function(e,t,a){Lyte.registeredMixins.managesignals.updateFunctionSuccessCallBack(e,t,a)},crmNTCGlobal.createWidSuccessCallBack=function(e,t){Lyte.registeredMixins.managesignals.handleWidgetCreate(e,t)},crmNTCGlobal.updateWidSuccessCallBack=function(e,t){Lyte.registeredMixins.managesignals.handleWidgetUpdate(t.widgets.id,e),crmNTCGlobal.closePopupAndOpenSigPanel("CrmWidgetsForm",e)},crmNTCGlobal.closePopupAndOpenSigPanel=function(e,t){Lyte.registeredMixins.managesignals.closePopupAndOpenSigPanel(e,t)},crmNTCGlobal.getPageLoadDataForWidget=function(e,t){var a={record:{}};return a.record.id=t.entityId,a.record.module=t.module,a.record.name=t.fullName,a.record.email=t.entityEmail,a.signal={},a.signal.id=e.signal.id,a.signal.namespace=e.signal.namespace,a.data=e.metadata,a};var crmNTCDetailView=crmNTCDetailView||{};crmNTCDetailView.supportPortalName="",crmNTCDetailView.supportZgid="",crmNTCDetailView.newDesk=!1,crmNTCDetailView.maxShowMoreHt=150,crmNTCDetailView.loadUptoCount,crmNTCDetailView.lastLoadedCount,crmNTCDetailView.globalScrollFlag,crmNTCDetailView.minimumToggleWidth=1280,crmNTCDetailView.socialSignalsQueue=[],crmNTCDetailView.iframeLoadedNtcIds=[],crmNTCDetailView.showFullDetailView=function(e,t){if(SalesSignalsWrapper.isSignalIFrameOpen&&($("#notificationGroupList").find(".ntc-entity-active").find(".notificationgrpListRow").css("background-color","##f5f5f5"),SalesSignals.showIframeDetailView()),crmNTCDetailView.loadUptoCount=10,crmNTCDetailView.lastLoadedCount=10,crmNTCDetailView.globalScrollFlag=!1,$(".notifyBodyEle").removeClass("on"),t&&-1!==t&&t>=crmNTCDetailView.loadUptoCount&&(crmNTCDetailView.loadUptoCount=t+1,crmNTCDetailView.lastLoadedCount=t+1),!SalesSignalsWrapper.isSignalIFrameOpen){var a=$("#freezeBackGround");a.addClass("tbFreezelayer"),showFreezeLayer(),a.on("click",(function(){var e=$("#freezeBackGround");crmNTCDetailView.closeDetailView(),($("#showOneFeed").is(":visible")||$("#showSignalPop").is(":visible"))&&e.off("click").attr("onclick","javascript:sE(event);")}))}var n=(e=$(e)).closest(".ntc-entity-group"),i=n.data("ntc-entityobj"),l=e.find(".innerNotify li:lt("+crmNTCDetailView.loadUptoCount+")"),s=$.map(l,(function(e){e=$(e);var t=JSON.parse(e.attr("data-ntcobj"));return t.NOTIFICATIONID=e.data("notification-id"),t}));e.find(".innerNotify li").length>crmNTCDetailView.loadUptoCount&&(crmNTCDetailView.globalScrollFlag=!0),SalesSignalsWrapper.isSignalIFrameOpen&&($("#ntcDivContent").show(),$("#signalBusinessCard").show(),$("#showSignalPopIframe").fadeIn()),$(".ntc-entity-active").removeClass("ntc-entity-active"),n.addClass("ntc-entity-active");var r=n.hasClass("ntc-unread");r&&n.removeClass("ntc-unread"),SalesSignalsWrapper.isSignalIFrameOpen?SalesSignals.showSignalSidePopup(e,s,i):this.showSignalSidePopup(e,s,i);var o=i.entityId,c=i.moduleSysRefName,d=i.assosciatedModuleName,m=i.is_appointment_enabled;crmNTCDetailView.populateBusinessCard(o,c,d,m),crmNTCDetailView.populateDetailView(s,i,r),crmNTCDetailView.iframeLoadedNtcIds=[],crmNTCDetailView.loadWidgetsInViewPort(),SalesSignalsWrapper.isSignalIFrameOpen||crmNTCDetailView.SetSignalDetailHeight()},crmNTCDetailView.showMoreSignalsDetails=function(){var e=0,t=$(".ntc-entity-group.ntc-entity-active"),a=t.find("div.notificationgrpListRow"),n=t.data("ntc-entityobj"),i=a.find(".innerNotify li").length,l=a.find(".innerNotify li:gt("+(crmNTCDetailView.lastLoadedCount-1)+")"),s=$.map(l,(function(t){if(++e<=crmNTCDetailView.loadUptoCount){t=$(t);var a=JSON.parse(t.attr("data-ntcobj"));return a.NOTIFICATIONID=t.data("notification-id"),a}}));crmNTCDetailView.lastLoadedCount=parseInt(crmNTCDetailView.lastLoadedCount)+parseInt(crmNTCDetailView.loadUptoCount);var r=Handlebars.templates.signalDetailViewTemplate({notificationObjs:s});$("#ntcInnerDivContent").append(r),crmNTCDetailView.populateDetailView(s,n),crmNTCDetailView.SetSignalDetailHeight(),i<=crmNTCDetailView.lastLoadedCount&&(crmNTCDetailView.globalScrollFlag=!1)},crmNTCDetailView.closeDetailView=function(){"block"===$("#emailalert").css("display")&&closealertMail("emailalert");var e=$("#showOneFeed"),t=$("#showSignalPop");if(e.is(":visible")||t.is(":visible")){e.hide(),t.hide(),t.empty(),hideFreezeLayer(),crmNTC.globalToggleFlag=0,crmNTCDetailView.resetToggleClass(),crmNTCDetailView.iframeLoadedNtcIds=[];var a=$("#freezeBackGround");a.removeClass("tbFreezelayer"),a.removeAttr("onclick"),a.off("click").attr("onclick","javascript:sE(event);"),$("html").css({overflow:""})}},crmNTCDetailView.populateDetailView=function(e,t,a){for(var n=e.length,i=0;i<n;i++){var l=e[i];crmNTCDetailView.populateDetailViewContent(l,t,a)}crmNTCDetailView.populateSocialDetailView()},crmNTCDetailView.populateSocialDetailView=function(){0!==crmNTCDetailView.socialSignalsQueue.length&&("undefined"==typeof crmSocial?crmNTCDetailView.loadSocialJS(crmNTCDetailView.renderSocialSignalsDetails):crmNTCDetailView.renderSocialSignalsDetails())},crmNTCDetailView.populateDetailViewContent=function(e,t,a){var n=e.signal.namespace;if(n===crmNTC.MAIL_INCOMING||n===crmNTC.MAIL_INCOMING_NEW||n===crmNTC.MAIL_INCOMING_COMPETITORS_ALERT||n===crmNTC.MAIL_INCOMING_COMPETITORS_ALERT_NEW)if(!1===e.ISSEEN&&a)crmNTCDetailView.showMailContent(e,t);else{var i=networkUtils.returnDependencyFiles(["crm-competitor-mention-list.js","crm-competitors-utilities.js"],crmConstants.jsStaticPathForLyte),l=networkUtils.returnDependencyFiles(["crm-competitor-mention-list.css"],crmConstants.cssStaticPathForLyte);Lyte.injectResources(i.concat(l),void 0,(function(){crmNTCDetailView.mailDetailView(e,t)}))}else if(-1!=crmNTC.SURVEY_TYPES.indexOf(n))crmNTCDetailView.surveyDetailView(e,t);else if(-1!==[crmNTC.MAILTRACKING_OPEN,crmNTC.MAILTRACKING_CLICK,crmNTC.MAILTRACKING_BOUNCE,crmNTC.MAILTRACKING_OPEN_NEW,crmNTC.MAILTRACKING_CLICK_NEW,crmNTC.MAILTRACKING_BOUNCE_NEW].indexOf(n))crmNTCDetailView.mailDetailView(e,t);else if(n===crmNTC.SALESIQ_CHAT_MISSED||n===crmNTC.SALESIQ_CHAT_MISSED_NEW)crmNTCDetailView.missedChatDetailView(e,t);else if(-1!==[crmNTC.CAMPAIGN_OPEN,crmNTC.CAMPAIGN_CLICK,crmNTC.CAMPAIGN_BOUNCE,crmNTC.CAMPAIGN_SOFT_BOUNCE,crmNTC.CAMPAIGN_OPEN_NEW,crmNTC.CAMPAIGN_CLICK_NEW,crmNTC.CAMPAIGN_BOUNCE_NEW,crmNTC.CAMPAIGN_SOFT_BOUNCE_NEW].indexOf(n))crmNTCDetailView.campaignDetailView(e,t);else if(-1!=crmNTC.SUPPORT_TYPES.indexOf(n))crmNTCDetailView.supportDetailView(e,t);else if(-1!=crmNTC.FB_TYPES.indexOf(n)||-1!=crmNTC.TWITTER_TYPES.indexOf(n)){var s={notificationObj:e,entityObj:t};crmNTCDetailView.socialSignalsQueue.push(s)}else n===crmNTC.CALL_MISSED||n===crmNTC.CALL_MISSED_NEW?crmNTCDetailView.missedCallDetailView(e,t):e.signal.namespace===crmNTC.PLATFORM_EXTENSION_SIGNAL?crmNTCDetailView.platformExtensionSignal(e,t):e.signal.namespace===crmNTC.MESSAGE_NEWMESSAGE||e.signal.namespace===crmNTC.MESSAGE_READ?crmNTCDetailView.businessMessageDetailView(e,t):crmNTCDetailView.commonDetailView(e,t)},crmNTCDetailView.commonDetailView=function(e,t){var a=Handlebars.templates.signalCommonDetailView({notificationObj:e,entityObj:t});$("#ntc-detailv-content-"+e.id).html(a)},crmNTCDetailView.populateBusinessCard=function(e,t,a,n){var i="/crm/v2.2/"+t+"/"+e,l={"X-ZCSRF-TOKEN":csrfParamName+"="+csrfToken};(new crmRequestPool).initiate({action:i,data:"apply_fields=business_card&include=fields",type:"GET",headers:l,success:function(e){if(e){for(var i=[],l=e.fields,s=e.data[0],r=l.length,o=Crm.userDetails.TELEPHONY_ENABLED,c=0;c<r;c++){var d=l[c],m=s[d.api_name];if(d.uitype=d.ui_type,d.displaylabel=d.field_label,d.colname=d.column_name,d.forBC=!0,d.separator&&m&&(m=Search.formatNumber(m.toString())),d.defaultvalue=m,d.displayValue=m,d.outbound=o,null!==m&&"object"==typeof m&&(d.defaultid=m.id,d.defaultvalue=m.name,d.displayValue=m.name),void 0!==d.lookup.module&&void 0!==d.lookup.module.api_name)if(t===Crm.userDetails.MODULE_LIST.Visits.module_name)d.lookupmodule=a;else{var u=d.lookup.module.id,p=store.peekRecord("module",u).module_name;d.lookupmodule=p}d.fromss=!0,i.push({fieldObj:d,forBC:!0,module:t,is_appointment_enabled:n})}var g=$(Handlebars.templates.signalBusinessCardContent(i));$("#ntcBcContent").html(g),crmNTCDetailView.SetBcDivDetailHeight()}}})},crmNTCDetailView.showSignalSidePopup=function(e,t,a){var n=$("#notificationscontainer").css("top"),i=$("#wmstoolbar"),l=i.length?i.innerHeight():28,s=Handlebars.templates.signalDetailView({entityObj:a,notificationObjs:t});Handlebars.registerPartial("signalIframeDetailView",Handlebars.templates.signalIframeDetailView);var r=Handlebars.templates.signalWidgetPopupContainer();$("html").css({overflow:"hidden"}),$("#notificationDiv").append(r),$("#showSignalPop").html(s).css({top:n,display:"block",bottom:l,overflow:"initial"}).addClass("signal-open")},crmNTCDetailView.SetSignalDetailHeight=function(){var e=renderingUtils.windowHeight,t=$("#tabLayer"),a=t.innerHeight()+t.offset().top,n=$("#ntcDivContent"),i=$("#wmstoolbar"),l=i.length?i.innerHeight():28,s=parseInt(e-(a+l));crmNTC.windowSize.wwidth=renderingUtils.windowWidth,n.css({height:s}),$("#showSignalPop").css({top:a}),crmNTCDetailView.resetToggleClass()},crmNTCDetailView.resetToggleClass=function(){if(0===crmNTC.globalToggleFlag){var e=$("#showSignalPop"),t=$("#ntcDivContent"),a=e.find(".ntc-businessCard").attr("id");crmNTCDetailView.minimumToggleWidth>crmNTC.windowSize.wwidth?(e.addClass("signal-bc-hidden"),$("#"+a).addClass("oH").css({width:"0"}),t.css({"margin-left":"0",width:"auto"})):(e.removeClass("signal-bc-hidden"),t.css({"margin-left":"",width:""}),$("#"+a).removeClass("oH ntc-businessCard-toggled ntc-bc-simpletoggle").css({width:""}))}},crmNTCDetailView.SetBcDivDetailHeight=function(){var e,t,a,n,i=$(".ntc-businessCard"),l=$(".ntc-bc-header"),s=$("#wmstoolbar");e=$("#tabLayer").innerHeight(),t=s.length?s.innerHeight():28,a=parseInt(renderingUtils.windowHeight-(e+t));var r=i.css("padding-top"),o=i.css("padding-bottom"),c=l.innerHeight();i.css({height:a}),n=a-(c+parseInt(r)+parseInt(o)),$("#ntcBcContent").css({height:n}),thirdPartyUtils.bindPerfectScroll("#ntcBcContent",{wheelSpeed:1,wheelPropagation:!1,suppressScrollX:!0}),$("#freezeBackGround").css({height:"",width:""})},crmNTCDetailView.showMailContent=function(e,t){var a=e.metadata,n=e.signal.namespace,i=a.MID,l=a.USERID?a.USERID:Crm.userDetails.USER_ID,s=t.module,r=t.entityId,o="Sent",c="ALLUSERSMAILS";n!==crmNTC.MAIL_INCOMING&&n!==crmNTC.MAIL_INCOMING_NEW&&n!==crmNTC.MAIL_INCOMING_COMPETITORS_ALERT&&n!==crmNTC.MAIL_INCOMING_COMPETITORS_ALERT_NEW||(o="Received",c=a.mailType);var d=t.entityEmail,m=Crm.getCrmBasePath()+"/mailer/EntReply.do?action=viewMail",u="&msgid="+i+"&user_id="+l+"&module="+s+"&entId="+r+"&mailType="+c+"&sentOrReceived="+o+"&entEmailId="+encodeURIComponent(d)+"&flag=false&source=signalDetailView&notificationId="+e.id;"di-notification"!==e.from||n!==crmNTC.MAIL_INCOMING_COMPETITORS_ALERT&&n!==crmNTC.MAIL_INCOMING_COMPETITORS_ALERT_NEW||(u+="&isZiaNotificationsView=true"),u+="&"+csrfParamName+"="+encodeURIComponent(csrfToken);var p="viewMailForSignal('"+i+"','"+l+"','"+s+"','"+r+"','"+c+"','"+o+"','"+d+"',true";n!==crmNTC.MAIL_INCOMING_COMPETITORS_ALERT&&n!==crmNTC.MAIL_INCOMING_COMPETITORS_ALERT_NEW||("di-notification"===e.from?p+=",'"+e.id+"',true":p+=",'"+e.id+"'"),p+=")";var g=new crmRequestPool;commonUtils.showHideLoadingDiv(!0),g.initiate({action:m,data:u,success:function(t){commonUtils.showHideLoadingDiv(!1);var a="";try{a=JSON.parse(t).message}catch(e){a=""}if(""!==a){var i=$("#ntc-detailv-content-"+e.id),l=Handlebars.templates.signalErrorMessage({notificationType:n,error_message:a});i.html(l)}else{i=$("#ntc-detailv-content-"+e.id);var s=Handlebars.templates.signalEmailContent({notificationObj:e,mailPoupupLink:p});i.html(s);var r=$("#emailDetailIframeContent"+e.id);r.on("load ",(function(){setTimeout((function(){document.getElementById("emailDetailIframeContent"+e.id).contentWindow.document.write(t)}),0),i.removeClass("p20").addClass("mB20"),r.contents().find("body").css("overflow","hidden");e.id;setTimeout((function(e){var t=$("#emailDetailIframeContent"+e),a=t.contents(),n=$("#ntcEmailIframeWrap"+e);a.find("body").css("margin","0");var i=n.width(),l=a.width(),s=parseInt(a.height())+10;a.find(".emailDetailContentDivOuter").removeAttr("style","");var r=a.find("#ntcIframeEmailContentDiv");if(r.length){var o=$("#ntcInnerDivContent").width(),c=$(".ntc-emailframe").css("padding-left"),d=r[0].scrollWidth;t.css({width:l,height:s}).show();var m=parseInt(o)-parseInt(c);d>i&&(t.addClass("hasPerfectScrollbar"),r.css({width:m}),thirdPartyUtils.bindPerfectScroll(r,{wheelSpeed:1,wheelPropagation:!0,suppressScrollX:!1}))}}),200)}))}}})},crmNTCDetailView.showMailContentInner=function(e,t){var a=$("#ntc-detailv-content-"+e.NOTIFICATIONID);a.find(".ntc-foot-links").hide(),a.find(".ntc-busyBtn").show(),crmNTCDetailView.showMailContent(e,t),Crm.trackSpotLightAction("CRM Signals - View EMail")},crmNTCDetailView.mailDetailView=function(e,t){var a=Handlebars.templates.signalEmailDetailView({entityObj:t,notificationObj:e});$("#ntc-detailv-content-"+e.id).html(a)},crmNTCDetailView.surveyDetailView=function(e,t){var a=Handlebars.templates.signalSurveyDetailView({entityObj:t,notificationObj:e});$("#ntc-detailv-content-"+e.id).html(a)},crmNTCDetailView.missedChatDetailView=function(e,t){var a=Handlebars.templates.signalMissedChatDetailView({entityObj:t,notificationObj:e});$("#ntc-detailv-content-"+e.id).html(a),crmNTCDetailView.setShowMoreLink(e.id)},crmNTCDetailView.missedCallDetailView=function(e,t){var a=Handlebars.templates.signalMissedCallDetailView({entityObj:t,notificationObj:e});$("#ntc-detailv-content-"+e.id).html(a)},crmNTCDetailView.campaignDetailView=function(e,t){var a=Handlebars.templates.signalCampaignDetailView({entityObj:t,notificationObj:e});$("#ntc-detailv-content-"+e.id).html(a)},crmNTCDetailView.supportDetailView=function(e,t){var a=Handlebars.templates.signalSupportDetailView({entityObj:t,notificationObj:e});$("#ntc-detailv-content-"+e.id).html(a)},crmNTCDetailView.businessMessageDetailView=function(e,t){e.metadata.message=decodeURIComponent(e.metadata.message.replace(/\+/g,"%20")),e.metadata.message=e.metadata.message.length>200?e.metadata.message.substring(0,200)+"...":e.metadata.message;var a=Handlebars.templates.signalBusinessMessageDetailView({entityObj:t,notificationObj:e});$("#ntc-detailv-content-"+e.id).html(a)},crmNTCDetailView.socialDetailView=function(e,t){crmNTCDetailView.includeSocialBasicInfo(e),crmSocialUtil.processPostForSalesSignals(e);var a=Handlebars.templates.signalSocialDetailView({entityObj:t,notificationObj:e});$("#ntc-detailv-content-"+e.id).html(a),crmNTCDetailView.setShowMoreLink(e.id)},crmNTCDetailView.platformExtensionSignal=function(e,t){var a=Handlebars.templates.signalPlatformExtension({entityObj:t,notificationObj:e});$("#ntc-detailv-content-"+e.id).html(a)},crmNTCDetailView.includeSocialBasicInfo=function(e){var t=e.signal.namespace,a=e.metadata;-1!=crmNTC.FB_TYPES.indexOf(t)?(a.network="facebook",t!==crmNTC.SOCIAL_FB_DM&&t!==crmNTC.SOCIAL_FB_DM_NEW||(a.convo=!0)):-1!=crmNTC.TWITTER_TYPES.indexOf(t)&&(a.network="twitter",a.text=a.message,t!==crmNTC.SOCIAL_TW_DM&&t!==crmNTC.SOCIAL_TW_DM_NEW||(a.type="message"),delete a.message)},crmNTCDetailView.getSocialNetworkType=function(e){var t="twitter",a=e.NOTIFICATIONTYPE;return-1!=crmNTC.FB_TYPES.indexOf(a)&&(e.metadata.network="facebook",t=e.metadata.network),t},crmNTCDetailView.campaignDetailViewPopup=function(e,t,a,n){var i="//"+RebrandLinkUtil.getProperty("ZCAMPAIGNURL")+"/"+t+"&crmgnum="+Crm.userDetails.ZGID;if(crmNTCDetailView.loadIframeDetailView(e,i),Crm.trackSpotLightAction("CRM Signals - View Campaign"),void 0===t||""===t)crmNTCDetailView.loadCampaignPreviewUrl(e,a,n);else{i="//"+RebrandLinkUtil.getProperty("ZCAMPAIGNURL")+"/"+t+"&crmgnum="+Crm.userDetails.ZGID;crmNTCDetailView.loadIframeDetailView(e,i)}},crmNTCDetailView.supportDetailPopupView=function(e,t){if(""!==crmNTCDetailView.supportPortalName&&""!==crmNTCDetailView.supportZgid){if(null!==crmNTCDetailView.supportPortalName&&null!==crmNTCDetailView.supportZgid)if(Crm.trackSpotLightAction("CRM Signals - View Support"),crmNTCDetailView.newDesk)deskInteg.showDeskPopupForWidgets(t);else{var a=document.domain.includes("crmplus")?"CrmPlusURL":"CRMURL",n=RebrandLinkUtil.getProperty("URLPROTOCOL")+"://"+RebrandLinkUtil.getProperty(a),i="//"+RebrandLinkUtil.getProperty("ZSUPPORTURL")+"/support/"+crmNTCDetailView.supportPortalName+"/ShowEntityInfo.do?module=Cases&id="+t+"&isCrmCall=true&crmsupportzgid="+crmNTCDetailView.supportZgid+"&showThreads=true&frameorigin="+n;crmNTCDetailView.loadIframeDetailView(e,i)}}else crmNTCDetailView.populateSupportIntegDetails(crmNTCDetailView.supportDetailView,e,t)},crmNTCDetailView.surveyDetailPopupView=function(e,t,a,n){Crm.trackSpotLightAction("CRM Signals - View Survey");var i=crmNTCDetailView.processSurveyEmail(n),l="//"+RebrandLinkUtil.getProperty("ZSURVEYURL")+"/view_crm_response.do?uniqueid="+t+"&responseid="+a+"&zcrmemail="+encodeURIComponent(i)+"&sales_signal_view=true";crmNTCDetailView.loadIframeDetailView(e,l)},crmNTCDetailView.socialDetailViewPopup=function(e){Crm.trackSpotLightAction("CRM Signals - View Social",{Network:t}),e=JSON.parse(e);var t=crmNTCDetailView.getSocialNetworkType(e),a=Handlebars.templates.signalPopupDetailView(),n=$("#signalPopupViewContent");if(n.html(a),crmNTCDetailView.setDetailViewPopupHeight(),e.metadata.brand_id)if(zsoTab.registerPartials(),$("#signalPopupViewContent .popup-model-content").addClass("p0"),e.metadata.thread_id)zsoTab.getMessageDetail(void 0,e.metadata.brand_id,t,e.metadata.thread_id,void 0,e.metadata.post_id,"sales_signals");else{var i=e.metadata.tweet_id?e.metadata.tweet_id:e.metadata.post_id;zsoTab.getParentPost(e.metadata.brand_id,i,void 0,t,void 0,void 0,!1,"sales_signals")}else{var l=crmNTCDetailView.getSocialParams(e);(new crmRequestPool).initiate({action:crmSocial.url,data:l,success:function(a){var i=JSON.parse(a);if(i.error){var l=null,s=i.error;"notAdmin"===s?(l="crm.nsocial.start.denied",s="crm.signal.error.social.permission.text"):"no_data"===s?(l="crm.tw.err.admin.title",s="crm.social.integ.error.tweet.notfound"):(l="crm.signal.error.social.acc.deleted.heading.text",s="facebook"===t?"crm.signal.error.social.fb.account.removed.text":"crm.signal.error.social.tw.account.removed.text");var r=Handlebars.templates.signalErrorMessage({notificationType:"social",error_heading:l,error_message:s});n.find(".popup-model-content").addClass("signal-popup-error"),(c=$("#signalPopupInnerDiv")).html(r),n.find("#loadMsg").hide()}else{e.metadata.fb_conversation_id&&(i.thread_id=e.metadata.thread_id);var o=n.find("#feed_detail_head").outerHeight();n.find("#loadMsg").hide(),i=crmSocialUtil.processPostForDetailView(i),crmNTCDetailView.socialRegisterPartial(),i.isSignalDetailView=!0;var c=$("#signalPopupInnerDiv");n.find(".popup-model-content").removeClass("signal-popup-error"),c.html(Handlebars.templates.PostDetail(i)).find("#feed_detail_inner_div").wrap('<div id="feed_detail_outer_div"></div>'),c.find("#feed_detail_outer_div").css("overflow","hidden"),crmNTCDetailView.socialDetailViewPopupHt(),n.find("#feed_detail_head_outer").animate({scrollTop:o},800),c.find("#feed_detail_head_outer").perfectScrollbar({wheelSpeed:1,wheelPropagation:!0,suppressScrollX:!1})}}})}},crmNTCDetailView.socialDetailViewPopupHt=function(){var e,t,a=null,n=null,i=null,l=$("#signalPopupViewContent").find(".popup-model-content"),s=parseInt(l.innerHeight())-(parseInt(l.css("padding-top"))+parseInt(l.css("padding-bottom"))),r=(a=$("#signalPopupInnerDiv")).find("#response.ntcReply"),o=a.find(".kso_feed_hd").outerHeight(),c=$("#kso_feed_hd").innerHeight(),d=r.show().outerHeight();a.css({height:s}),r.show(),n=a.find("#feed_detail_outer_div"),i=a.find("#feed_detail_head_outer"),n.css({height:s}),t=parseInt(d);var m=parseInt(c),u=parseInt(o);e=parseInt(s-(t+m+u)),i.css({height:e}),thirdPartyUtils.unbindPerfectScroll("#ntcDivContent"),$("#ntcDivContent").removeClass("ps-container oH"),i.addClass("oH"),thirdPartyUtils.bindPerfectScroll("#ntcBcContent",{wheelSpeed:1,wheelPropagation:!1,suppressScrollX:!0}),setTimeout((function(){i.css({height:e})}),300)},crmNTCDetailView.loadIframeDetailView=function(e,t){var a=$("<iframe>",{src:t,id:"crmNTCDetailIframe",frameborder:0,scrolling:"auto",height:"480",width:"100%",load:function(){$("#loadMsg").hide()}}),n=Handlebars.templates.signalPopupDetailView(),i=$("#signalPopupViewContent");i.html(n),$("#signalPopupInnerDiv").html(a),crmNTCDetailView.setDetailViewPopupHeight(),i.find(".popup-model-content").removeClass("signal-popup-error")},crmNTCDetailView.setDetailViewPopupHeight=function(){var e=$("#signalPopupViewContent"),t=SalesSignalsWrapper.isSignalIFrameOpen?$("#showSignalPopIframe"):$("#showSignalPop"),a=t.css("top"),n=renderingUtils.windowOuterHeight-175,i=parseInt(t.css("width"))-60;e.find(".popup-model-content").css({"max-height":n+"px",width:i}),e.find("iframe").css({height:n-60}),e.show(),showAnimatePopup("signalPopupViewContent"),t.length&&t.is(":visible")&&e.css({top:a}),freezeBackground(),$("#FreezeLayer").css({display:"block",opacity:".1","z-index":31})},crmNTCDetailView.hideDetailViewPopup=function(){hideAnimatePopup("signalPopupViewContent"),$("#signalPopupViewContent").empty(),$("#SignalWidgetPopup").empty(),$("#FreezeLayer").fadeOut().css({"z-index":""})},crmNTCDetailView.socialRegisterPartial=function(){Handlebars.registerPartial("CommentTemplate",Handlebars.templates.CommentTemplate),Handlebars.registerPartial("ReplyList",Handlebars.templates.ReplyList),Handlebars.registerPartial("twReply",Handlebars.templates.twReply),Handlebars.registerPartial("ReplyToComment",Handlebars.templates.ReplyToComment),Handlebars.registerPartial("ConvoTemplate",Handlebars.templates.ConvoTemplate),Handlebars.registerPartial("fbPostDetail",Handlebars.templates.fbPostDetail),Handlebars.registerPartial("twPostDetail",Handlebars.templates.twPostDetail),Handlebars.registerPartial("gpPostDetail",Handlebars.templates.gpPostDetail)},crmNTCDetailView.getFbParams=function(e){var t={network:"facebook"},a=e.metadata;t.feedid=a.post_id;var n=e.NOTIFICATIONTYPE;return n!==crmNTC.SOCIAL_FB_DM&&n!==crmNTC.SOCIAL_FB_DM_NEW||(t.message=!0,t.feedid=a.fb_conversation_id),t},crmNTCDetailView.getTwParams=function(e){var t={network:"twitter"},a=e.metadata;return t.feedid=a.tweet_id,e.NOTIFICATIONTYPE===crmNTC.SOCIAL_TW_DM&&(t.message=!0,t.feedid=a.thread_id),t},crmNTCDetailView.getSocialParams=function(e){var t={},a=e.NOTIFICATIONTYPE;-1!=crmNTC.FB_TYPES.indexOf(a)?t=crmNTCDetailView.getFbParams(e):-1!=crmNTC.TWITTER_TYPES.indexOf(a)&&((t=crmNTCDetailView.getTwParams(e)).bio=!0);var n=e.metadata;return t.brid=n.brid,t.action="get_feed",t},crmNTCDetailView.populateSocialPermissions=function(e){var t={action:"get_permissions"};(new crmRequestPool).initiate({action:crmSocial.url,data:t,success:function(t){var a=JSON.parse(t);void 0!==a.permissions&&(crmSocialUtil.perm={},$.each(a.permissions,(function(e,t){crmSocialUtil.perm[e]=t}))),e()}})},crmNTCDetailView.ntcShowMore=function(e){var t=$(e).closest(".ntc-detailv-detail"),a=t.find(".ntc-detailv-para"),n=parseInt(a[0].scrollHeight);a.css({height:crmNTCDetailView.maxShowMoreHt}),t.removeClass("ntc-detailv-wrap").addClass("ntc-detailv-expanded"),a.css({height:n}),t.find(".ntc-det-more").hide()},crmNTCDetailView.populateSupportIntegDetails=function(e,t,a){var n=Crm.getCrmBasePath()+"/NotificationCenterDetailView.do?action=getSupportIntegDetails";(new crmRequestPool).initiate({action:n,data:{},success:function(n){n.supportPortalName&&n.supportZgid?(crmNTCDetailView.supportPortalName=n.supportPortalName,crmNTCDetailView.supportZgid=n.supportZgid,crmNTCDetailView.newDesk=!1):n.newDesk&&n.portalName?(crmNTCDetailView.supportPortalName=n.portalName,crmNTCDetailView.supportZgid=n.crmsupportzgid,crmNTCDetailView.newDesk=!0,deskInteg.populateIntegDetails(n)):(crmNTCDetailView.supportPortalName=null,crmNTCDetailView.supportZgid=null,crmNTCDetailView.newDesk=null),e&&e(t,a)}})},crmNTCDetailView.processSurveyEmail=function(e){return-1!==e.indexOf(":::")?e.split(":::")[1]:e},crmNTCDetailView.showDetailView=function(e){var t=null,a=$(e);$(".notifyBodyEle").removeClass("on"),a.addClass("on");var n=parseInt($("li.on").index()),i=a.data("notification-id"),l=$("#ntc-detailv-"+i);if(crmNTC.isSignalDetailViewVisible()?l.length<=0&&($("#showSignalPop").hide(),t=a.closest(".notificationgrpListRow"),crmNTCDetailView.showFullDetailView(t,n)):(t=a.closest(".notificationgrpListRow"),crmNTCDetailView.showFullDetailView(t,n)),l.length>0){var s=$(".nc-dlabel");s.removeClass("highlight-detailview"),$("#ntcDivContent").scrollTo(l,{duration:"fast"}),l.find(".nc-dlabel").addClass("highlight-detailview"),setTimeout((function(){s.removeClass("highlight-detailview")}),5e3)}},crmNTCDetailView.getDetailViewSocialParams=function(e){var t={},a=e.signal.namespace;t.NOTIFICATIONTYPE=a;var n={};return e.metadata.brand_id&&(n.brand_id=e.metadata.brand_id),-1!=crmNTC.FB_TYPES.indexOf(a)?(n.brid=e.metadata.brid,n.post_id=e.metadata.post_id,a!==crmNTC.SOCIAL_FB_DM&&a!==crmNTC.SOCIAL_FB_DM_NEW||(n.fb_conversation_id=e.metadata.fb_conversation_id,n.thread_id=e.metadata.thread_id),t.metadata=n):-1!=crmNTC.TWITTER_TYPES.indexOf(a)&&(n.brid=e.metadata.brid,n.tweet_id=e.metadata.tweet_id,a===crmNTC.SOCIAL_TW_DM&&(n.thread_id=e.metadata.thread_id),t.metadata=n),t},crmNTCDetailView.setShowMoreLink=function(e){if(crmNTC.isSignalDetailViewVisible()){var t=0,a=$("#ntc-detailv-content-"+e),n=a.find(".ntc-detailv-para");n.length&&(t=n[0].scrollHeight),t>crmNTCDetailView.maxShowMoreHt&&(a.addClass("ntc-detailv-wrap"),a.find(".ntc-foot-links").prepend('<a href="javascript:;" class="ntc-det-more f12" onclick="crmNTCDetailView.ntcShowMore(this)">See More</a>'))}},crmNTCDetailView.showSignalActivityDiv=function(e){var t=$(e),a=$("#signalsActivityDiv"),n=parseInt(t.position().left+t.outerWidth()/2-a.innerWidth()/2),i=parseInt(t.position().top+t.outerHeight());a.css({top:i,left:n}),a.slideToggle("fast")},crmNTCDetailView.loadCampaignPreviewUrl=function(e,t,a){var n="//"+RebrandLinkUtil.getProperty("ZCAMPAIGNURL")+"/api/contact/cmpinfo?contactid="+t+"&campaignid="+a+"&crmgnum="+Crm.userDetails.ZGID;(new crmRequestPool).initiate({action:n,data:{},type:"GET",crossDomain:!0,success:function(t){var a=(t=JSON.parse(t)).campaignprevirew;crmNTCDetailView.loadIframeDetailView(e,a)}})},crmNTCDetailView.showMoreSignalsDetailsOnScroll=function(){crmNTCDetailView.loadWidgetsInViewPort(),crmNTCDetailView.globalScrollFlag&&crmNTCDetailView.showMore()&&(crmNTCDetailView.showMoreSignalsDetails(),Crm.trackSpotLightAction("CRM Signals - Notf Scrolling"))},crmNTCDetailView.storeIdForLoadedIframes=function(){crmNTCDetailView.iframeLoadedNtcIds.push(event.target.id.split("_")[1])},crmNTCDetailView.loadWidgetsInViewPort=function(){for(var e=$(".ntcPlatformIframeWrap"),t=e.length,a=0;a<t;a++){var n=(r=e[a]).id.split("_")[1],i=crmNTCDetailView.iframeLoadedNtcIds.contains(n),l=renderingUtils.isElementInViewport(r);if(!i&&l){var s="ntcPlatformIframeSwitch_"+n;document.getElementById(s).click();var r,o="signalPlatformIframeContent_"+n;(r=document.getElementById(o)).onload=crmNTCDetailView.storeIdForLoadedIframes}}},crmNTCDetailView.showMore=function(){var e=$("#ntcDivContent");return e[0].scrollHeight-e.scrollTop()-15<=e.outerHeight()},crmNTCDetailView.toggleSignalBusinessCard=function(){crmNTC.globalToggleFlag=1;var e=$("#ntcDivContent"),t=$("#showSignalPop"),a=t.find(".ntc-businessCard");a.hasClass("ntc-businessCard-toggled")?(a.css({width:a.data("exp-width")}),e.css({"margin-left":"",width:""}),a.removeClass("ntc-bc-simpletoggle ntc-businessCard-toggled"),t.removeClass("signal-bc-hidden"),a.delay("1000").css({width:"",border:""})):(a.data("exp-width",parseInt(a.css("width"))-1),t.addClass("signal-bc-hidden"),a.addClass("oH ntc-businessCard-toggled ntc-bc-simpletoggle").css({width:0,border:0}),e.css({"margin-left":0,width:"99.9%"})),e.on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend ",(function(){var e=$("#ntcDivContent");crmNTCDetailView.toggleSignalBusinessresizeIframeWidth(),e.off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend ")}))},crmNTCDetailView.toggleSignalBusinessresizeIframeWidth=function(){var e=parseInt($("#ntcInnerDivContent").width())-parseInt($(".ntc-emailframe").css("padding-left"));$("#ntcInnerDivContent iframe.hasPerfectScrollbar").each((function(){var t=$(this).attr("id");$("#"+t).contents().find("#ntcIframeEmailContentDiv").css({width:e})}))},crmNTCDetailView.renderSocialSignalsDetails=function(){for(var e=crmNTCDetailView.socialSignalsQueue.length,t=0;t<e;t++){var a=crmNTCDetailView.socialSignalsQueue[t].notificationObj,n=crmNTCDetailView.socialSignalsQueue[t].entityObj;crmNTCDetailView.socialDetailView(a,n)}crmNTCDetailView.socialSignalsQueue=[]},crmNTCDetailView.loadSocialJS=function(e){crmNTC.new_social?networkUtils.loadFeatureScripts(["zcrm_zsoTab.js",networkUtils.getI18nJSUrl("social")],(function(){e()})):networkUtils.loadFeatureScripts(["zohocrm_zsocial.js"],(function(){crmNTCDetailView.populateSocialPermissions(e)}))},crmNTCDetailView.loadBMConversation=function(e){networkUtils.openUrl(Crm.getCrmBasePath()+"/tab/Messages/"+e)},function(){var e=Handlebars.template,t=Handlebars.templates=Handlebars.templates||{};t.centralNotificationMenu=e({1:function(e,t,a,n,i){return' <td class="notifyContain sel" id="#notifications" onclick="crmNTCGlobal.fetchGlobalNotifications(); crmNTCGlobal.tabAction(this);"><a class="setuplink">'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.ntc.label.listview.notificationHeading",{name:"getI18n",hash:{},data:i}))+' <span id="signals_count" class="notiNumCount" style="display:none"></span></a></td> '},3:function(e,t,a,n,i){return' <td class="notifyContain" id="#feeds" onclick="getUNSNotificationList(); crmNTCGlobal.tabAction(this);"><a class="setuplink">'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"Feeds",{name:"getI18n",hash:{},data:i}))+' <span id="feeds_count" class="notiNumCount" style="display:none"></span></a></td> '},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l,s=null!=t?t:{};return'<div class="tabClass" id="nc-tabs-menu"> <table class="commentabmenu"> <tbody> <tr> '+(null!=(l=a.if.call(s,null!=t?t.ntc_enabled:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?l:"")+" "+(null!=(l=a.if.call(s,null!=t?t.feeds_enabled:t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))?l:"")+" </tr> </tbody> </table> </div> "},useData:!0}),t.centralNotifications=e({compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l;return'<div id="nc-tabs-container"> '+(null!=(l=e.invokePartial(n.centralNotificationMenu,t,{name:"centralNotificationMenu",data:i,helpers:a,partials:n,decorators:e.decorators}))?l:"")+' <div class="alignleft pR notify-content w100p"> <div id="notificationList" class="notificationFeedsEle"></div> </div> <div class="cB"></div> </div> <div id="GNCSettings" class="GNCSettings whiteBg pA t0 r0" style="display:none;height:100%"></div> '},usePartial:!0,useData:!0}),t.cvNotificationShowMore=e({1:function(e,t,a,n,i){var l;return" "+(null!=(l=a.unless.call(null!=t?t:{},null!=t?t.global:t,{name:"unless",hash:{},fn:e.program(2,i,0),inverse:e.program(4,i,0),data:i}))?l:"")+" "},2:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression;return" <button onclick=\"crmNTC.fetchMoreModuleNotifications('"+r(a.encodeJS.call(s,null!=t?t.module:t,{name:"encodeJS",hash:{},data:i}))+"', '"+r(a.encodeJS.call(s,null!=(l=null!=t?t.info:t)?l.last_index:l,{name:"encodeJS",hash:{},data:i}))+'\')" class="newwhitebtn">'+r(a.getI18n.call(s,"crm.wf.summary.label.ShowInstantActions",{name:"getI18n",hash:{},data:i}))+"</button> "},4:function(e,t,a,n,i){return' <button onclick="crmNTCGlobal.fetchMoreGlobalNotifications()" class="newwhitebtn">'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.wf.summary.label.ShowInstantActions",{name:"getI18n",hash:{},data:i}))+"</button> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l;return" "+(null!=(l=a.if.call(null!=t?t:{},null!=(l=null!=t?t.info:t)?l.more_records:l,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?l:"")},useData:!0}),t.emptySignalNotification=e({1:function(e,t,a,n,i){return' <div class="ntc-notification-head" id="notifications"> <span class="setuplink"> SalesSignals <span id="signals_count" class="notiNumCount"></span> </span> <span onclick="SalesSignals.closeGlobalNotifications();" style="display:block;right: 16px;top: 15px;z-index:1;" class="svgIcons ico-close-small2 cP op08 pA"></span> </div> '},3:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression;return' <div class="p30 aligncenter fontsmooth"> <img class="signal-on-board-image" src="'+r(a.getCrmImageUrl.call(s,"SalesSignals_Formation_opt_7ab29c6_.gif",{name:"getCrmImageUrl",hash:{},data:i}))+'"/> <p class="crm-font-bold pT20 w90per aligncenter m0Auto pB20 signal-on-board-text"> '+r(a.getI18n.call(s,"crm.ntc.txt.onboarding",{name:"getI18n",hash:{},data:i}))+' </p> <link-to lt-prop-route="crm.settings.section.sales-signals" lt-prop-custom> <a class="crm-font-bold" data-zcqa="salesSignalsSettings" data-tooltip="'+r(a.getI18n.call(s,"crm.ntc.label.settings.notificationTitle",{name:"getI18n",hash:{},data:i}))+'" target="_blank" '+(null!=(l=a.isSignalIframeOpen.call(s,{name:"isSignalIframeOpen",hash:{},fn:e.program(4,i,0),inverse:e.noop,data:i}))?l:"")+"> "+r(a.getI18n.call(s,"crm.ntc.txt.configure",{name:"getI18n",hash:{},data:i}))+" </a> </link-to> </div>  "},4:function(e,t,a,n,i){return'href ="'+e.escapeExpression(a.getCrmBasePath.call(null!=t?t:{},{name:"getCrmBasePath",hash:{},data:i}))+'/settings/sales-signals"'},6:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression;return' <div class="p30 aligncenter fontsmooth mT30"> '+r(a.getI18n.call(s,"crm.ntc.txt.nosignals",{name:"getI18n",hash:{},data:i}))+' </div> <div id="notifySett" class="'+(null!=(l=a.isSignalIframeOpen.call(s,{name:"isSignalIframeOpen",hash:{},fn:e.program(7,i,0),inverse:e.program(9,i,0),data:i}))?l:"")+'"> <div class="fR f12"> <a class="fR ntc-help" data-zcqa="salesSignalsHelp" data-tooltip="'+r(a.getI18n.call(s,"crm.ntc.label.listview.notificationHeading",{name:"getI18n",hash:{},data:i}))+" "+r(a.getI18n.call(s,"crm.topmenu.help",{name:"getI18n",hash:{},data:i}))+"\" onclick=\"openHelp('openHelp('"+(null!=(l=a.isSignalIframeOpen.call(s,{name:"isSignalIframeOpen",hash:{},fn:e.program(11,i,0),inverse:e.program(13,i,0),data:i}))?l:"")+'\')\')" href="javascript:;">'+r(a.getI18n.call(s,"crm.label.context.help",{name:"getI18n",hash:{},data:i}))+'</a> <span class="fR pL5 pR5 lightgraytxt">|</span> <link-to lt-prop-route="crm.settings.section.sales-signals" lt-prop-custom> <a class="fR mR9 ntc-settingIcon" data-zcqa="salesSignalsSettings" data-tooltip="'+r(a.getI18n.call(s,"crm.ntc.label.settings.notificationTitle",{name:"getI18n",hash:{},data:i}))+'" target="_blank" '+(null!=(l=a.isSignalIframeOpen.call(s,{name:"isSignalIframeOpen",hash:{},fn:e.program(4,i,0),inverse:e.noop,data:i}))?l:"")+">"+r(a.getI18n.call(s,"crm.label.settings",{name:"getI18n",hash:{},data:i}))+'</a> </link-to> </div> <div class="cB"></div> </div> '},7:function(e,t,a,n,i){return"emptySignalBtmIframe"},9:function(e,t,a,n,i){return"emptySignalBtm"},11:function(e,t,a,n,i){return e.escapeExpression(a.getHelpUrlForSignalsIFrame.call(null!=t?t:{},"help.salesSignals",{name:"getHelpUrlForSignalsIFrame",hash:{},data:i}))},13:function(e,t,a,n,i){return e.escapeExpression(a.getHelpUrl.call(null!=t?t:{},"help.salesSignals",{name:"getHelpUrl",hash:{},data:i}))},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l,s=null!=t?t:{};return" "+(null!=(l=a.isSignalIframeOpen.call(s,{name:"isSignalIframeOpen",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?l:"")+" "+(null!=(l=a.ifNoSignals.call(s,{name:"ifNoSignals",hash:{},fn:e.program(3,i,0),inverse:e.program(6,i,0),data:i}))?l:"")},useData:!0}),t.globalSignal=e({1:function(e,t,a,n,i){return' <div class="ntc-notification-head" id="notifications"> <span class="setuplink"> SalesSignals <span id="signals_count" class="notiNumCount"></span> </span> <span onclick="SalesSignals.closeGlobalNotifications();" style="display:block;right: 16px;top: 15px;z-index:1;" class="svgIcons ico-close-small2 cP op08 pA"></span> </div> '},3:function(e,t,a,n,i){return"SalesSignals.globalNotificationScroll();"},5:function(e,t,a,n,i){return"crmNTCGlobal.globalNotificationScroll();"},7:function(e,t,a,n,i){return"globalSignalBtmIframe"},9:function(e,t,a,n,i){return"globalSignalBtmDiv"},11:function(e,t,a,n,i){return e.escapeExpression(a.getHelpUrlForSignalsIFrame.call(null!=t?t:{},"help.salesSignals",{name:"getHelpUrlForSignalsIFrame",hash:{},data:i}))},13:function(e,t,a,n,i){return e.escapeExpression(a.getHelpUrl.call(null!=t?t:{},"help.salesSignals",{name:"getHelpUrl",hash:{},data:i}))},15:function(e,t,a,n,i){return'href ="'+e.escapeExpression(a.getCrmBasePath.call(null!=t?t:{},{name:"getCrmBasePath",hash:{},data:i}))+'/settings/sales-signals"'},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression;return" "+(null!=(l=a.isSignalIframeOpen.call(s,{name:"isSignalIframeOpen",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?l:"")+' <div id="notificationGrpList" class="pR oH" onscroll="'+(null!=(l=a.isSignalIframeOpen.call(s,{name:"isSignalIframeOpen",hash:{},fn:e.program(3,i,0),inverse:e.program(5,i,0),data:i}))?l:"")+'"> <ul id="notificationGroupList" class="m0 p0" style="height:auto !important;"> '+(null!=(l=e.invokePartial(n.notificationGroups,t,{name:"notificationGroups",data:i,helpers:a,partials:n,decorators:e.decorators}))?l:"")+' </ul> <div id="globalNotificationShowMore" class="vpvl mT15"> '+(null!=(l=e.invokePartial(n.cvNotificationShowMore,t,{name:"cvNotificationShowMore",data:i,helpers:a,partials:n,decorators:e.decorators}))?l:"")+' </div> </div> <div id="notifySett" class="'+(null!=(l=a.isSignalIframeOpen.call(s,{name:"isSignalIframeOpen",hash:{},fn:e.program(7,i,0),inverse:e.program(9,i,0),data:i}))?l:"")+'"> <div class="fR f12"> <a class="fR ntc-help" data-zcqa="salesSignalsHelp" data-tooltip="'+r(a.getI18n.call(s,"crm.ntc.label.listview.notificationHeading",{name:"getI18n",hash:{},data:i}))+" "+r(a.getI18n.call(s,"crm.topmenu.help",{name:"getI18n",hash:{},data:i}))+'" onclick="openHelp(\''+(null!=(l=a.isSignalIframeOpen.call(s,{name:"isSignalIframeOpen",hash:{},fn:e.program(11,i,0),inverse:e.program(13,i,0),data:i}))?l:"")+'\')" href="javascript:;">'+r(a.getI18n.call(s,"crm.label.context.help",{name:"getI18n",hash:{},data:i}))+'</a> <span class="fR pL5 pR5 lightgraytxt">|</span> <link-to lt-prop-route="crm.settings.section.sales-signals" lt-prop-custom> <a class="fR mR9 ntc-settingIcon" data-zcqa="salesSignalsSettings" data-tooltip="'+r(a.getI18n.call(s,"crm.ntc.label.settings.notificationTitle",{name:"getI18n",hash:{},data:i}))+'" target="_blank" '+(null!=(l=a.isSignalIframeOpen.call(s,{name:"isSignalIframeOpen",hash:{},fn:e.program(15,i,0),inverse:e.noop,data:i}))?l:"")+">"+r(a.getI18n.call(s,"crm.label.settings",{name:"getI18n",hash:{},data:i}))+'</a> </link-to> </div> <a class="ntc-deactive-link f12 fL" data-zcqa="markAllSignalAsRead" onclick="crmNTCGlobal.markAllAsRead();" href="javascript:;">'+r(a.getI18n.call(s,"crm.ntc.label.mark.all.as.read",{name:"getI18n",hash:{},data:i}))+'</a> <div class="cB"></div> </div> <div id="signalWidget"></div> <embed src="ringcentralaudio/atment.mp3">'},usePartial:!0,useData:!0}),t.notificationGroup=e({1:function(e,t,a,n,i){return" "},3:function(e,t,a,n,i){return"ntc-unread"},5:function(e,t,a,n,i){return"true"},7:function(e,t,a,n,i){var l;return', "COMPANY": "'+e.escapeExpression(e.lambda(null!=(l=null!=t?t.record:t)?l.company:l,t))+'"'},9:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression;return', "ACCOUNTID": "'+r(s(null!=(l=null!=(l=null!=t?t.record:t)?l.account:l)?l.id:l,t))+'", "ACCOUNTNAME": "'+r(s(null!=(l=null!=(l=null!=t?t.record:t)?l.account:l)?l.name:l,t))+'"'},11:function(e,t,a,n,i){return" ntc-visited "},13:function(e,t,a,n,i){return" crmNTCDetailView.showFullDetailView(this);crmNTC.showFullNotifications(this); "},15:function(e,t,a,n,i){return" crmNTC.showFullNotifications(this); crmNTCDetailView.showFullDetailView(this) "},17:function(e,t,a,n,i){var l,s=null!=t?t:{};return' <div class="ntc-pic pR '+(null!=(l=a.ifEntityOnline.call(s,null!=(l=null!=t?t.module:t)?l.api_name:l,null!=(l=null!=t?t.record:t)?l.id:l,{name:"ifEntityOnline",hash:{},fn:e.program(18,i,0),inverse:e.noop,data:i}))?l:"")+'"> <img class="ntc-propic" src="'+e.escapeExpression(a.getRelDetailsImgUrl.call(s,null!=(l=null!=t?t.module:t)?l.api_name:l,null!=(l=null!=t?t.record:t)?l.id:l,null!=(l=null!=t?t.record:t)?l.photoFileId:l,{name:"getRelDetailsImgUrl",hash:{},data:i}))+'" ></img></div> '},18:function(e,t,a,n,i){return"ntc-online"},20:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression;return' <div class="ntc-pic pR ntc-emtpic '+(null!=(l=a.ifEntityOnline.call(s,null!=(l=null!=t?t.module:t)?l.api_name:l,null!=(l=null!=t?t.record:t)?l.id:l,{name:"ifEntityOnline",hash:{},fn:e.program(18,i,0),inverse:e.noop,data:i}))?l:"")+'" style="background-position: '+r(a.getRandomGradient.call(s,{name:"getRandomGradient",hash:{},data:i}))+';">'+r(a.getFirstChar.call(s,null!=(l=null!=t?t.record:t)?l.name:l,{name:"getFirstChar",hash:{},data:i}))+"</div> "},22:function(e,t,a,n,i){return" has-account "},24:function(e,t,a,n,i){return' <span class="dIB svgIconsImg ntc-lead" onmouseover="zctt.showtt(\''+e.escapeExpression(a.getI18n.call(null!=t?t:{},"Lead",{name:"getI18n",hash:{},data:i}))+'\')"  onmouseout="zctt.hidett()"></span> '},26:function(e,t,a,n,i){return' <span class="dIB svgIconsImg ntc-contact" onmouseover="zctt.showtt(\''+e.escapeExpression(a.getI18n.call(null!=t?t:{},"Contact",{name:"getI18n",hash:{},data:i}))+'\')"  onmouseout="zctt.hidett()"></span> '},28:function(e,t,a,n,i){var l;return" "+e.escapeExpression(e.lambda(null!=(l=null!=t?t.record:t)?l.name:l,t))+" "},30:function(e,t,a,n,i){var l;return" Deleted "+e.escapeExpression(e.lambda(null!=(l=null!=t?t.module:t)?l.api_name:l,t))+" "},32:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression;return' <span class="ntc-chat-now pR" onclick="crmNTCGlobal.startChat(\''+r(a.encodeJS.call(s,null!=(l=null!=t?t.module:t)?l.api_name:l,{name:"encodeJS",hash:{},data:i}))+"','"+r(a.encodeJS.call(s,null!=(l=null!=t?t.record:t)?l.id:l,{name:"encodeJS",hash:{},data:i}))+'\')"> <span class="onlineAvail ico-chat-green-filled svgIcons t0imp vam"></span> <span class="f14 pR mL3">Chat Now</span> </span> '},34:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression;return' <span class="ntc-chat-now pR dN" onclick="crmNTCGlobal.startChat(\''+r(a.encodeJS.call(s,null!=(l=null!=t?t.module:t)?l.api_name:l,{name:"encodeJS",hash:{},data:i}))+"','"+r(a.encodeJS.call(s,null!=(l=null!=t?t.record:t)?l.id:l,{name:"encodeJS",hash:{},data:i}))+'\')"> <span class="onlineAvail ico-chat-green-filled svgIcons t0imp vam"></span> <span class="f14 pR mL3">Chat Now</span> </span> '},36:function(e,t,a,n,i){return' <span class="ntc-chat-now compAlertnotify fR crm-font-regular">'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"zoho.email.incoming.competitors",{name:"getI18n",hash:{},data:i}))+"</span> "},38:function(e,t,a,n,i){var l;return" "+e.escapeExpression(e.lambda(null!=(l=null!=t?t.record:t)?l.company:l,t))+" "},40:function(e,t,a,n,i){var l;return" "+e.escapeExpression(e.lambda(null!=(l=null!=(l=null!=t?t.record:t)?l.account:l)?l.name:l,t))+" "},42:function(e,t,a,n,i,l,s){var r;return" "+(null!=(r=a.renderSingleNotification.call(null!=t?t:{},i&&i.index,t,null!=(r=null!=s[1]?s[1].module:s[1])?r.apiname:r,null!=(r=null!=s[1]?s[1].record:s[1])?r.id:r,{name:"renderSingleNotification",hash:{},data:i}))?r:"")+" "},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i,l,s){var r,o=null!=t?t:{},c=e.lambda,d=e.escapeExpression;return' <li class="pL0 pB0 positionRelative ntc-entity-group '+(null!=(r=a.noUnreadNotification.call(o,null!=t?t.notifications:t,{name:"noUnreadNotification",hash:{},fn:e.program(1,i,0,l,s),inverse:e.program(3,i,0,l,s),data:i}))?r:"")+'" data-ntc-isRead="'+(null!=(r=a.noUnreadNotification.call(o,null!=t?t.notifications:t,{name:"noUnreadNotification",hash:{},fn:e.program(5,i,0,l,s),inverse:e.noop,data:i}))?r:"")+"\" data-ntc-entityId='"+d(c(null!=(r=null!=t?t.record:t)?r.id:r,t))+'\' data-ntc-entityObj=\'{"entityId": "'+d(c(null!=(r=null!=t?t.record:t)?r.id:r,t))+'","is_appointment_enabled": "'+d(c(null!=(r=null!=t?t.module:t)?r.is_appointment_enabled:r,t))+'","entityEmail": "'+d(c(null!=(r=null!=t?t.record:t)?r.email:r,t))+'", "assosciatedModuleName": "'+d(c(null!=(r=null!=t?t.record:t)?r.assosciated_module:r,t))+'", "moduleSysRefName": "'+d(c(null!=(r=null!=t?t.module:t)?r.sys_ref_name:r,t))+'","module": "'+d(c(null!=(r=null!=t?t.module:t)?r.api_name:r,t))+'","fullName": "'+d(a.getEncodedName.call(o,null!=(r=null!=t?t.record:t)?r.name:r,{name:"getEncodedName",hash:{},data:i}))+'", "phoneNum": "'+d(c(null!=(r=null!=t?t.record:t)?r.phoneNum:r,t))+'" '+(null!=(r=a.ifEquals.call(o,null!=(r=null!=t?t.module:t)?r.api_name:r,"Leads",{name:"ifEquals",hash:{},fn:e.program(7,i,0,l,s),inverse:e.noop,data:i}))?r:"")+(null!=(r=a.ifEquals.call(o,null!=t?t.module:t,"Contacts",{name:"ifEquals",hash:{},fn:e.program(9,i,0,l,s),inverse:e.noop,data:i}))?r:"")+' }\'> <span class="left-Arrow-ntc" style="display:none"></span> <div class="notificationgrpListRow '+(null!=(r=a.noUnreadNotification.call(o,null!=t?t.notifications:t,{name:"noUnreadNotification",hash:{},fn:e.program(11,i,0,l,s),inverse:e.noop,data:i}))?r:"")+' " onclick="'+(null!=(r=a.isSignalIframeOpen.call(o,{name:"isSignalIframeOpen",hash:{},fn:e.program(13,i,0,l,s),inverse:e.program(15,i,0,l,s),data:i}))?r:"")+'"> <table> <tbody> <tr> <td rowspan="2" width="32" style="vertical-align: top;"> <a href="'+d(a.getEntityUrl.call(o,null!=(r=null!=t?t.record:t)?r.id:r,null!=(r=null!=t?t.module:t)?r.api_name:r,{name:"getEntityUrl",hash:{},data:i}))+'" target="_blank"> '+(null!=(r=a.ifAllTruthy.call(o,null!=(r=null!=t?t.module:t)?r.api_name:r,null!=(r=null!=t?t.record:t)?r.photoFileId:r,{name:"ifAllTruthy",hash:{},fn:e.program(17,i,0,l,s),inverse:e.program(20,i,0,l,s),data:i}))?r:"")+' </a> </td> <td class="pL10 '+(null!=(r=a.isNotValidAccount.call(o,null!=(r=null!=t?t.module:t)?r.api_name:r,null!=(r=null!=t?t.record:t)?r.company:r,null!=(r=null!=(r=null!=t?t.record:t)?r.account:r)?r.name:r,{name:"isNotValidAccount",hash:{},fn:e.program(22,i,0,l,s),inverse:e.noop,data:i}))?r:"")+'"> <div class="f15 crm-font-regular ntc-noti-head"> '+(null!=(r=a.if_eq.call(o,null!=(r=null!=t?t.module:t)?r.api_name:r,"Leads",{name:"if_eq",hash:{},fn:e.program(24,i,0,l,s),inverse:e.noop,data:i}))?r:"")+" "+(null!=(r=a.if_eq.call(o,null!=(r=null!=t?t.module:t)?r.api_name:r,"Contacts",{name:"if_eq",hash:{},fn:e.program(26,i,0,l,s),inverse:e.noop,data:i}))?r:"")+' <a href="'+d(a.getEntityUrl.call(o,null!=(r=null!=t?t.record:t)?r.id:r,null!=(r=null!=t?t.module:t)?r.api_name:r,{name:"getEntityUrl",hash:{},data:i}))+'" class="color_3 crm-font-bold ntc-name-ellipsis" target="_blank" onmouseover="zctt.showtt(\''+d(a.encodeJS.call(o,a.encodeHTML.call(o,null!=(r=null!=t?t.record:t)?r.name:r,{name:"encodeHTML",hash:{},data:i}),{name:"encodeJS",hash:{},data:i}))+'\')"  onmouseout="zctt.hidett()"> '+(null!=(r=a.if.call(o,null!=(r=null!=t?t.record:t)?r.name:r,{name:"if",hash:{},fn:e.program(28,i,0,l,s),inverse:e.program(30,i,0,l,s),data:i}))?r:"")+" </a> "+(null!=(r=a.ifEntityOnline.call(o,null!=(r=null!=t?t.module:t)?r.api_name:r,null!=(r=null!=t?t.record:t)?r.id:r,{name:"ifEntityOnline",hash:{},fn:e.program(32,i,0,l,s),inverse:e.program(34,i,0,l,s),data:i}))?r:"")+" "+(null!=(r=a.showCompetitorAlertTag.call(o,null!=t?t.notifications:t,{name:"showCompetitorAlertTag",hash:{},fn:e.program(36,i,0,l,s),inverse:e.noop,data:i}))?r:"")+' </div> <div class="f13 crm-font-regular color_6"> '+(null!=(r=a.ifEquals.call(o,null!=(r=null!=t?t.module:t)?r.api_name:r,"Leads",{name:"ifEquals",hash:{},fn:e.program(38,i,0,l,s),inverse:e.noop,data:i}))?r:"")+" "+(null!=(r=a.ifEquals.call(o,null!=(r=null!=t?t.module:t)?r.api_name:r,"Contacts",{name:"ifEquals",hash:{},fn:e.program(40,i,0,l,s),inverse:e.noop,data:i}))?r:"")+' </div> <div class="notifyBodyEle pT12">  '+(null!=(r=a.renderFirstNotification.call(o,null!=t?t.notifications:t,null!=(r=null!=t?t.module:t)?r.api_name:r,null!=(r=null!=t?t.record:t)?r.id:r,{name:"renderFirstNotification",hash:{},data:i}))?r:"")+'   <div class="innerNotify fs min-innerNotify" style="display:none"> <ul width="100%" class="pL0 m0">  '+(null!=(r=a.each.call(o,null!=t?t.notifications:t,{name:"each",hash:{},fn:e.program(42,i,0,l,s),inverse:e.noop,data:i}))?r:"")+' </ul> </div>  <div class="cB"></div> </div> </td> </tr> </tbody> </table> </div> <div style="clear:both"></div> </li> '},useData:!0,useDepths:!0}),t.notificationGroups=e({1:function(e,t,a,n,i){var l;return" "+(null!=(l=e.invokePartial(n.notificationGroup,t,{name:"notificationGroup",data:i,helpers:a,partials:n,decorators:e.decorators}))?l:"")+" "},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l;return null!=(l=a.each.call(null!=t?t:{},null!=t?t.group_notifications:t,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?l:""},usePartial:!0,useData:!0}),t.ntcDetailView=e({1:function(e,t,a,n,i,l,s){var r,o=null!=t?t:{},c=e.escapeExpression,d=e.lambda;return' <a class="'+c(a.getNTCIconClass.call(o,t,{name:"getNTCIconClass",hash:{},data:i}))+" "+(null!=(r=a.if_eq.call(o,i&&i.index,0,{name:"if_eq",hash:{},fn:e.program(2,i,0,l,s),inverse:e.noop,data:i}))?r:"")+'" id="ntcDVIcon-'+c(d(null!=t?t.NOTIFICATIONID:t,t))+'" onclick="crmNTCDetailView.scrollToNtcFrame(\''+c(d(null!=t?t.NOTIFICATIONID:t,t))+'\')" data-ntc-object="'+c(a.JSONtoString.call(o,t,{name:"JSONtoString",hash:{},data:i}))+'" data-entity-object="'+c(a.JSONtoString.call(o,null!=s[1]?s[1].entityObj:s[1],{name:"JSONtoString",hash:{},data:i}))+'"> '+c(a.getNTCTypeText.call(o,null!=t?t.CATEGORY:t,null!=t?t.SIGNALHEADING:t,{name:"getNTCTypeText",hash:{},data:i}))+" </a> "},2:function(e,t,a,n,i){return" nc-active "},4:function(e,t,a,n,i){var l=e.escapeExpression;return' <div id="ntc-detailViewContent-'+l(e.lambda(null!=t?t.NOTIFICATIONID:t,t))+'" class="ntc-detailv-content pR"> <div class="ntc-busyBtn" style="display: block;"><img height="16" src="'+l(a.img_link.call(null!=t?t:{},{name:"img_link",hash:{},data:i}))+'/moreloading_90b33f4_.gif"></div> <div class="ntc-emptyDiv" id="ntcEmptyDiv" style="display: none;"></div> </div> '},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i,l,s){var r,o=null!=t?t:{};return' <div class="signalPopContent pR oH"> '+(null!=(r=e.invokePartial(n.ntcBusinessCard,null!=t?t.entityObj:t,{name:"ntcBusinessCard",data:i,helpers:a,partials:n,decorators:e.decorators}))?r:"")+' <div class="ntc-ico-sidebar" id="ntcIcoSidebar"> <span class="ntc-slide-nav ntc-slide-lt cP" data-slide="left" onclick="crmNTCDetailView.navigateNotificationMenu(this)"> <span class="svgIconsImg ntc-slide-left cP">&laquo;</span> </span> <div class="ntc-ico-sidebar-wrap" id="ntcIcoSidebarWrap"> <div class="ntc-ico-sidebar-inner" id="ntcIcoSidebarInner" style="width:1000px;"> '+(null!=(r=a.each.call(o,null!=t?t.notificationObjs:t,{name:"each",hash:{},fn:e.program(1,i,0,l,s),inverse:e.noop,data:i}))?r:"")+' </div> </div> <span class="ntc-slide-nav ntc-slide-rt cP" data-slide="right" onclick="crmNTCDetailView.navigateNotificationMenu(this)"> <span class="svgIconsImg ntc-slide-right cP">&raquo;</span> </span> </div> <div class="ntc-div-content pR" id="ntcDivContent"> <div id="ntcInnerDivContent"> <div> '+(null!=(r=a.each.call(o,null!=t?t.notificationObjs:t,{name:"each",hash:{},fn:e.program(4,i,0,l,s),inverse:e.noop,data:i}))?r:"")+" </div> </div> </div>  </div>"},usePartial:!0,useData:!0,useDepths:!0}),t.ntcSupportSettings=e({compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l,s=null!=t?t:{};return'<tr> <td> <div class="groupItems dIB"> '+(null!=(l=a.renderNTCTopLevelSettings.call(s,"Zoho Support","Support","NTC_support_setting","",null!=(l=null!=t?t.configured_integrations:t)?l.zoho_support:l,null!=t?t.enabled_notifications:t,"[16,17,18,19,21,23,24,25,26,27,28,30,31,32,33]",{name:"renderNTCTopLevelSettings",hash:{},data:i}))?l:"")+' <div class="dIB fL NCSubOption"> <ul id="ncSupportSettings"> '+(null!=(l=a.renderNTCSecondaryLevelSettings.call(s,"NTC_support_setting","new_ticket","crm.ntc.label.settings.support.newTicket",'["Leads", "Contacts", "crm.ntc.label.settings.potentialCustomer", "crm.ntc.label.settings.customer"]',"[16,17,18,19]",null!=(l=null!=t?t.configured_integrations:t)?l.zoho_support:l,null!=t?t.enabled_notifications:t,{name:"renderNTCSecondaryLevelSettings",hash:{},data:i}))?l:"")+" "+(null!=(l=a.renderNTCSecondaryLevelSettings.call(s,"NTC_support_setting","new_comment","crm.ntc.label.settings.support.newComment",'["Leads", "Contacts", "crm.ntc.label.settings.potentialCustomer", "crm.ntc.label.settings.customer"]',"[25,26,27,28]",null!=(l=null!=t?t.configured_integrations:t)?l.zoho_support:l,null!=t?t.enabled_notifications:t,{name:"renderNTCSecondaryLevelSettings",hash:{},data:i}))?l:"")+" "+(null!=(l=a.renderNTCSecondaryLevelSettings.call(s,"NTC_support_setting","new_response","crm.ntc.label.settings.support.newResponse",'["Leads", "Contacts", "crm.ntc.label.settings.potentialCustomer", "crm.ntc.label.settings.customer"]',"[30,31,32,33]",null!=(l=null!=t?t.configured_integrations:t)?l.zoho_support:l,null!=t?t.enabled_notifications:t,{name:"renderNTCSecondaryLevelSettings",hash:{},data:i}))?l:"")+" "+(null!=(l=a.renderNTCSubSetting.call(s,"NTC_support_setting","ticket_overdue","crm.ntc.label.settings.support.ticketOverdue",23,null!=(l=null!=t?t.configured_integrations:t)?l.zoho_support:l,null!=t?t.enabled_notifications:t,{name:"renderNTCSubSetting",hash:{},data:i}))?l:"")+" "+(null!=(l=a.renderNTCSubSetting.call(s,"NTC_support_setting","ticket_escalated","crm.ntc.label.settings.support.ticketEscalated",24,null!=(l=null!=t?t.configured_integrations:t)?l.zoho_support:l,null!=t?t.enabled_notifications:t,{name:"renderNTCSubSetting",hash:{},data:i}))?l:"")+" "+(null!=(l=a.renderNTCSubSetting.call(s,"NTC_support_setting","new_rating","crm.ntc.label.settings.support.newRating",21,null!=(l=null!=t?t.configured_integrations:t)?l.zoho_support:l,null!=t?t.enabled_notifications:t,{name:"renderNTCSubSetting",hash:{},data:i}))?l:"")+' </ul> </div> <span class="cB"></span> </div> </td> </tr> '},useData:!0}),t.signalBusinessCard=e({1:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression,o=null!=t?t:{};return' <div id="ntcBusinessCard'+r(s(null!=(l=null!=t?t.entityObj:t)?l.entityId:l,t))+'" class="pT25"> <div class="ntc-bc-header pR pL25 pR25"> <div class="aligncenter"> <a href="'+r(a.getEntityUrl.call(o,null!=(l=null!=t?t.entityObj:t)?l.entityId:l,null!=(l=null!=t?t.entityObj:t)?l.module:l,{name:"getEntityUrl",hash:{},data:i}))+'" target="_blank" class="ntc-photo dIB"> '+(null!=(l=a.ifAllTruthy.call(o,null!=(l=null!=t?t.entityObj:t)?l.module:l,null!=(l=null!=t?t.entityObj:t)?l.entityId:l,null!=(l=null!=t?t.entityObj:t)?l.photoFileId:l,{name:"ifAllTruthy",hash:{},fn:e.program(2,i,0),inverse:e.program(5,i,0),data:i}))?l:"")+' </a> <div class="dvTitle f20 crm-font-regular pT10"> <a href="'+r(a.getEntityUrl.call(o,null!=(l=null!=t?t.entityObj:t)?l.entityId:l,null!=(l=null!=t?t.entityObj:t)?l.module:l,{name:"getEntityUrl",hash:{},data:i}))+'" target="_blank">'+r(s(null!=(l=null!=t?t.entityObj:t)?l.fullName:l,t))+'</a> </div> <div class="f16 crm-font-regular nc-bc-company"> '+(null!=(l=a.ifEquals.call(o,null!=t?t.module:t,"Leads",{name:"ifEquals",hash:{},fn:e.program(7,i,0),inverse:e.noop,data:i}))?l:"")+" "+(null!=(l=a.ifEquals.call(o,null!=t?t.module:t,"Contacts",{name:"ifEquals",hash:{},fn:e.program(9,i,0),inverse:e.noop,data:i}))?l:"")+' </div> <div class="f12 gray"> <span class="graytag">'+r(a.getModuleSingularLabelForIFrame.call(o,null!=(l=null!=t?t.entityObj:t)?l.module:l,{name:"getModuleSingularLabelForIFrame",hash:{},data:i}))+'</span> </div> <div class="ntc-bc-contact f14"> '+(null!=(l=a.ifEntityOnline.call(o,null!=t?t.module:t,null!=t?t.entityId:t,{name:"ifEntityOnline",hash:{},fn:e.program(11,i,0),inverse:e.program(13,i,0),data:i}))?l:"")+" "+(null!=(l=a.isNotEmpty.call(o,null!=(l=null!=t?t.entityObj:t)?l.phoneNum:l,{name:"isNotEmpty",hash:{},fn:e.program(15,i,0),inverse:e.program(17,i,0),data:i}))?l:"")+" "+(null!=(l=a.isNotEmpty.call(o,null!=(l=null!=t?t.entityObj:t)?l.entityEmail:l,{name:"isNotEmpty",hash:{},fn:e.program(19,i,0),inverse:e.program(21,i,0),data:i}))?l:"")+' </div> <div class="ntc-bc-activity" onclick="crmNTCDetailView.showSignalActivityDiv(this); sE(event)"></div> <div id="signalsActivityDiv" class="eventActionsMenu nwrp" style="display:none; z-index: 300;position: absolute;" data-options="ACTIVITYPERSONALITY" onclick="sE(event)"> <span class="pR" style="border:1px solid transparent;"><i class="ntc-bc-arrw"></i></span> <a class="dummyForLeftPanel createlink readOnlyMode" href="javascript:void(0);" onclick="crmNTC.quickCreate(\'NewTask\', \'salessignals\', \''+r(s(null!=(l=null!=t?t.entityObj:t)?l.module:l,t))+"', '"+r(s(null!=(l=null!=t?t.entityObj:t)?l.entityId:l,t))+"',event,this);\">New Task</a> <a class=\"dummyForLeftPanel createlink readOnlyMode\" href=\"javascript:void(0);\" onclick=\"crmNTC.quickCreate('NewEvent', 'salessignals', '"+r(s(null!=(l=null!=t?t.entityObj:t)?l.module:l,t))+"', '"+r(s(null!=(l=null!=t?t.entityObj:t)?l.entityId:l,t))+"',event,this)\">"+r(a.getI18n.call(o,"crm.label.newEvent",a.getModuleDisplayName.call(o,!0,!0,{name:"getModuleDisplayName",hash:{},data:i}),{name:"getI18n",hash:{},data:i}))+"</a> <a class=\"dummyForLeftPanel createlink readOnlyMode\" href=\"javascript:void(0);\" onclick=\"crmNTC.quickCreate('NewCall', 'salessignals', '"+r(s(null!=(l=null!=t?t.entityObj:t)?l.module:l,t))+"', '"+r(s(null!=(l=null!=t?t.entityObj:t)?l.entityId:l,t))+'\',event,this)">New Call</a> </div> <input type="hidden" id="ss_module" name="module" value="'+r(s(null!=(l=null!=t?t.entityObj:t)?l.module:l,t))+'"> <input type="hidden" id="ss_entityId" name="entityId" value="'+r(s(null!=(l=null!=t?t.entityObj:t)?l.entityId:l,t))+'"> <input type="hidden" id="ss_entityName" name="entityName" value="'+r(s(null!=(l=null!=t?t.entityObj:t)?l.fullName:l,t))+'"> </div> </div> <div class="ntcBcContent ntc-bc-content pR" id="ntcBcContent"> <div class="ntc-busyBtn" style="display: block;"> <span class="dIB ntc-loader"></span> </div> </div> </div> '},2:function(e,t,a,n,i){var l,s=null!=t?t:{};return' <div class="ntc-pic pR '+(null!=(l=a.ifEntityOnline.call(s,null!=(l=null!=t?t.entityObj:t)?l.module:l,null!=(l=null!=t?t.entityObj:t)?l.entityId:l,{name:"ifEntityOnline",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))?l:"")+'"> <img class="ntc-propic" src="'+e.escapeExpression(a.getRelDetailsImgUrl.call(s,null!=(l=null!=t?t.entityObj:t)?l.module:l,null!=(l=null!=t?t.entityObj:t)?l.entityId:l,null!=(l=null!=t?t.entityObj:t)?l.photoFileId:l,{name:"getRelDetailsImgUrl",hash:{},data:i}))+'" ></img> </div> '},3:function(e,t,a,n,i){return"ntc-online"},5:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression;return' <div class="ntc-pic ntc-emtpic pR '+(null!=(l=a.ifEntityOnline.call(s,null!=(l=null!=t?t.entityObj:t)?l.module:l,null!=(l=null!=t?t.entityObj:t)?l.entityId:l,{name:"ifEntityOnline",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))?l:"")+'" style="background-position: '+r(a.getRandomGradient.call(s,{name:"getRandomGradient",hash:{},data:i}))+';">'+r(a.getFirstChar.call(s,null!=(l=null!=t?t.entityObj:t)?l.fullName:l,{name:"getFirstChar",hash:{},data:i}))+" </div> "},7:function(e,t,a,n,i){var l;return" "+e.escapeExpression(e.lambda(null!=(l=null!=t?t.entityObj:t)?l.COMPANY:l,t))+" "},9:function(e,t,a,n,i){var l=e.escapeExpression;return' <a  href="'+l(a.getEntityUrl.call(null!=t?t:{},null!=t?t.ACCOUNTID:t,"Accounts",{name:"getEntityUrl",hash:{},data:i}))+'" target="_blank">'+l(e.lambda(null!=t?t.ACCOUNTNAME:t,t))+"</a> "},11:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression;return" <a target='_blank' class=\"ntc-bc-ct ntc-bc-chat active readOnlyMode\" href='"+r(a.getChatLink.call(s,null!=(l=null!=t?t.entityObj:t)?l.module:l,null!=(l=null!=t?t.entityObj:t)?l.entityId:l,{name:"getChatLink",hash:{},data:i}))+"'>"+r(a.getI18n.call(s,"Chat",{name:"getI18n",hash:{},data:i}))+"</a> "},13:function(e,t,a,n,i){var l=null!=t?t:{},s=e.escapeExpression;return' <a class="ntc-bc-ct ntc-bc-chat" onmouseover="zctt.showtt(\''+s(a.getI18n.call(l,"crm.chat.offline",{name:"getI18n",hash:{},data:i}))+'\')" onmouseout="zctt.hidett()">'+s(a.getI18n.call(l,"Chat",{name:"getI18n",hash:{},data:i}))+"</a> "},15:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression,o=e.lambda;return' <a class="ntc-bc-ct ntc-bc-call ntc-bc-sep  active readOnlyMode" onclick="crmNTCGlobal.call(\''+r(a.encodeJS.call(s,null!=(l=null!=t?t.entityObj:t)?l.phoneNum:l,{name:"encodeJS",hash:{},data:i}))+"', '"+r(o(null!=(l=null!=t?t.entityObj:t)?l.entityId:l,t))+"', '"+r(o(null!=(l=null!=t?t.entityObj:t)?l.module:l,t))+"', '"+r(a.encodeJS.call(s,null!=(l=null!=t?t.entityObj:t)?l.fullName:l,{name:"encodeJS",hash:{},data:i}))+"'); sE();\">"+r(a.getI18n.call(s,"Call",{name:"getI18n",hash:{},data:i}))+"</a> "},17:function(e,t,a,n,i){var l=null!=t?t:{},s=e.escapeExpression;return' <a class="ntc-bc-ct ntc-bc-call ntc-bc-sep" onmouseover="zctt.showtt(\''+s(a.getI18n.call(l,"crm.signal.phone.not.configured.text",{name:"getI18n",hash:{},data:i}))+'\')" onmouseout="zctt.hidett()">'+s(a.getI18n.call(l,"Call",{name:"getI18n",hash:{},data:i}))+"</a> "},19:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression,o=null!=t?t:{};return' <a class="ntc-bc-ct ntc-bc-mail active readOnlyMode" href="javascript:void(0);" onclick="EntSendMail(\''+r(s(null!=(l=null!=t?t.entityObj:t)?l.module:l,t))+"','"+r(s(null!=(l=null!=t?t.entityObj:t)?l.entityId:l,t))+"','salessignals','"+r(a.getModuleSingularLabelForIFrame.call(o,null!=(l=null!=t?t.entityObj:t)?l.module:l,{name:"getModuleSingularLabelForIFrame",hash:{},data:i}))+"')\">"+r(a.getI18n.call(o,"Email",{name:"getI18n",hash:{},data:i}))+"</a> "},21:function(e,t,a,n,i){var l=null!=t?t:{},s=e.escapeExpression;return' <a class="ntc-bc-ct ntc-bc-mail" href="javascript:void(0);" onmouseover="zctt.showtt(\''+s(a.getI18n.call(l,"crm.signal.email.not.configured.text",{name:"getI18n",hash:{},data:i}))+'\')" onmouseout="zctt.hidett()">'+s(a.getI18n.call(l,"Email",{name:"getI18n",hash:{},data:i}))+"</a> "},23:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression,o=null!=t?t:{};return' <div id="ntcBusinessCard'+r(s(null!=t?t.entityId:t,t))+'" data-maxwidth="" class="ntc-businessCard pT25 fL"> <div class="ntc-bc-header pR pL25 pR25"> <div class="aligncenter"> <a href="'+r(a.getEntityUrl.call(o,null!=t?t.entityId:t,null!=t?t.module:t,{name:"getEntityUrl",hash:{},data:i}))+'" target="_blank" class="ntc-photo dIB"> '+(null!=(l=a.ifAllTruthy.call(o,null!=t?t.module:t,null!=t?t.entityId:t,null!=t?t.photoFileId:t,{name:"ifAllTruthy",hash:{},fn:e.program(24,i,0),inverse:e.program(26,i,0),data:i}))?l:"")+' </a> <div class="dvTitle f20 crm-font-regular pT10"><a href="'+r(a.getEntityUrl.call(o,null!=t?t.entityId:t,null!=t?t.module:t,{name:"getEntityUrl",hash:{},data:i}))+'" target="_blank">'+r(s(null!=t?t.fullName:t,t))+'</a></div> <div class="f16 crm-font-regular nc-bc-company"> '+(null!=(l=a.ifEquals.call(o,null!=t?t.module:t,"Leads",{name:"ifEquals",hash:{},fn:e.program(28,i,0),inverse:e.noop,data:i}))?l:"")+" "+(null!=(l=a.ifEquals.call(o,null!=t?t.module:t,"Contacts",{name:"ifEquals",hash:{},fn:e.program(9,i,0),inverse:e.noop,data:i}))?l:"")+' </div> <div class="f12 gray"> <span class="graytag">'+r(a.getModuleSingularLabel.call(o,null!=t?t.module:t,{name:"getModuleSingularLabel",hash:{},data:i}))+'</span> </div> <div class="ntc-bc-contact f14"> '+(null!=(l=a.isLeadOrContactModule.call(o,null!=t?t.module:t,{name:"isLeadOrContactModule",hash:{},fn:e.program(30,i,0),inverse:e.program(37,i,0),data:i}))?l:"")+" </div> "+(null!=(l=a.isActivitySupportedForModule.call(o,null!=t?t.module:t,{name:"isActivitySupportedForModule",hash:{},fn:e.program(42,i,0),inverse:e.noop,data:i}))?l:"")+' </div> </div> <div class="ntcBcContent ntc-bc-content pR" id="ntcBcContent"> <div class="ntc-busyBtn" style="display: block;"> <span class="dIB ntc-loader"></span> </div> </div> </div> '},24:function(e,t,a,n,i){var l,s=null!=t?t:{};return' <div class="ntc-pic pR '+(null!=(l=a.ifEntityOnline.call(s,null!=t?t.module:t,null!=t?t.entityId:t,{name:"ifEntityOnline",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))?l:"")+'"> <img class="ntc-propic" src="'+e.escapeExpression(a.getRelDetailsImgUrl.call(s,null!=t?t.module:t,null!=t?t.entityId:t,null!=t?t.photoFileId:t,{name:"getRelDetailsImgUrl",hash:{},data:i}))+'" ></img> </div> '},26:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression;return' <div class="ntc-pic ntc-emtpic pR '+(null!=(l=a.ifEntityOnline.call(s,null!=t?t.module:t,null!=t?t.entityId:t,{name:"ifEntityOnline",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))?l:"")+'" style="background-position: '+r(a.getRandomGradient.call(s,{name:"getRandomGradient",hash:{},data:i}))+';">'+r(a.getFirstChar.call(s,null!=t?t.fullName:t,{name:"getFirstChar",hash:{},data:i}))+" </div> "},28:function(e,t,a,n,i){return" "+e.escapeExpression(e.lambda(null!=t?t.COMPANY:t,t))+" "},30:function(e,t,a,n,i){var l,s=null!=t?t:{};return"  "+(null!=(l=a.ifEntityOnline.call(s,null!=t?t.module:t,null!=t?t.entityId:t,{name:"ifEntityOnline",hash:{},fn:e.program(31,i,0),inverse:e.program(13,i,0),data:i}))?l:"")+" "+(null!=(l=a.isNotEmpty.call(s,null!=t?t.phoneNum:t,{name:"isNotEmpty",hash:{},fn:e.program(33,i,0),inverse:e.program(17,i,0),data:i}))?l:"")+" "+(null!=(l=a.isNotEmpty.call(s,null!=t?t.entityEmail:t,{name:"isNotEmpty",hash:{},fn:e.program(35,i,0),inverse:e.program(21,i,0),data:i}))?l:"")+" "},31:function(e,t,a,n,i){var l=null!=t?t:{},s=e.escapeExpression;return" <a target='_blank' class=\"ntc-bc-ct ntc-bc-chat active readOnlyMode\" href='"+s(a.getChatLink.call(l,null!=t?t.module:t,null!=t?t.entityId:t,{name:"getChatLink",hash:{},data:i}))+"'>"+s(a.getI18n.call(l,"Chat",{name:"getI18n",hash:{},data:i}))+"</a> "},33:function(e,t,a,n,i){var l=null!=t?t:{},s=e.escapeExpression,r=e.lambda;return' <a class="ntc-bc-ct ntc-bc-call ntc-bc-sep  active readOnlyMode" onclick="crmNTCGlobal.call(\''+s(a.encodeJS.call(l,null!=t?t.phoneNum:t,{name:"encodeJS",hash:{},data:i}))+"', '"+s(r(null!=t?t.entityId:t,t))+"', '"+s(r(null!=t?t.module:t,t))+"', '"+s(a.encodeJS.call(l,null!=t?t.fullName:t,{name:"encodeJS",hash:{},data:i}))+"'); sE();\">"+s(a.getI18n.call(l,"Call",{name:"getI18n",hash:{},data:i}))+"</a> "},35:function(e,t,a,n,i){var l=e.lambda,s=e.escapeExpression,r=null!=t?t:{};return' <a class="ntc-bc-ct ntc-bc-mail active readOnlyMode" href="javascript:void(0);" onclick="EntSendMail(\''+s(l(null!=t?t.module:t,t))+"','"+s(l(null!=t?t.entityId:t,t))+"','salessignals','"+s(a.getModuleSingularLabel.call(r,null!=t?t.module:t,{name:"getModuleSingularLabel",hash:{},data:i}))+"')\">"+s(a.getI18n.call(r,"Email",{name:"getI18n",hash:{},data:i}))+"</a> "},37:function(e,t,a,n,i){var l,s=null!=t?t:{};return"  "+(null!=(l=a.ifEntityOnline.call(s,null!=t?t.module:t,null!=t?t.entityId:t,{name:"ifEntityOnline",hash:{},fn:e.program(31,i,0),inverse:e.noop,data:i}))?l:"")+" "+(null!=(l=a.isNotEmpty.call(s,null!=t?t.phoneNum:t,{name:"isNotEmpty",hash:{},fn:e.program(33,i,0),inverse:e.program(38,i,0),data:i}))?l:"")+" "+(null!=(l=a.isNotEmpty.call(s,null!=t?t.entityEmail:t,{name:"isNotEmpty",hash:{},fn:e.program(35,i,0),inverse:e.program(40,i,0),data:i}))?l:"")+" "},38:function(e,t,a,n,i){var l;return" "+(null!=(l=a.isNullStr.call(null!=t?t:{},null!=t?t.phoneNum:t,{name:"isNullStr",hash:{},fn:e.program(17,i,0),inverse:e.noop,data:i}))?l:"")+" "},40:function(e,t,a,n,i){var l;return" "+(null!=(l=a.isNullStr.call(null!=t?t:{},null!=t?t.entityEmail:t,{name:"isNullStr",hash:{},fn:e.program(21,i,0),inverse:e.noop,data:i}))?l:"")+" "},42:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.lambda,o=e.escapeExpression;return' <div class="ntc-bc-activity" onclick="crmNTCDetailView.showSignalActivityDiv(this); sE(event)"></div> <div id="signalsActivityDiv" class="eventActionsMenu nwrp" style="display:none; z-index: 300;position: absolute;" data-options="ACTIVITYPERSONALITY" onclick="sE(event)"> <span class="pA"><i class="ntc-bc-arrw"></i></span> '+(null!=(l=a.ifEquals.call(s,a.getUserDetail.call(s,"TaskPopup",{name:"getUserDetail",hash:{},data:i}),!0,{name:"ifEquals",hash:{},fn:e.program(43,i,0),inverse:e.program(45,i,0),data:i}))?l:"")+" <a class=\"dummyForLeftPanel createlink readOnlyMode\" href=\"javascript:void(0);\" onclick=\"crmNTC.quickCreate('NewEvent', 'salessignals', '"+o(r(null!=t?t.module:t,t))+"', '"+o(r(null!=t?t.entityId:t,t))+"',event,this)\">"+o(a.getI18n.call(s,"crm.label.newEvent",a.getModuleDisplayName.call(s,!0,!0,{name:"getModuleDisplayName",hash:{},data:i}),{name:"getI18n",hash:{},data:i}))+"</a> <a class=\"dummyForLeftPanel createlink readOnlyMode\" href=\"javascript:void(0);\" onclick=\"crmNTC.quickCreate('NewCall', 'salessignals', '"+o(r(null!=t?t.module:t,t))+"', '"+o(r(null!=t?t.entityId:t,t))+"',event,this)\">New Call</a> "+(null!=(l=a.ifEquals.call(s,null!=t?t.is_appointment_enabled:t,!0,{name:"ifEquals",hash:{},fn:e.program(47,i,0),inverse:e.noop,data:i}))?l:"")+' </div> <input type="hidden" id="ss_module" name="module" value="'+o(r(null!=t?t.module:t,t))+'"> <input type="hidden" id="ss_entityId" name="entityId" value="'+o(r(null!=t?t.entityId:t,t))+'"> <input type="hidden" id="ss_entityName" name="entityName" value="'+o(r(null!=t?t.fullName:t,t))+'"> '},43:function(e,t,a,n,i){var l=null!=t?t:{},s=e.escapeExpression;return' <a class="dummyForLeftPanel createlink readOnlyMode" href="javascript:void(0);" onclick="crmRelatedList.relTaskCreate(this,\''+s(a.encodeJS.call(l,null!=t?t.entityId:t,{name:"encodeJS",hash:{},data:i}))+"','salessignals','"+s(a.encodeJS.call(l,null!=t?t.module:t,{name:"encodeJS",hash:{},data:i}))+"')\">New Task</a> "},45:function(e,t,a,n,i){var l=e.lambda,s=e.escapeExpression;return" <a class=\"dummyForLeftPanel createlink readOnlyMode\" href=\"javascript:void(0);\" onclick=\"crmNTC.quickCreate('NewTask', 'salessignals', '"+s(l(null!=t?t.module:t,t))+"', '"+s(l(null!=t?t.entityId:t,t))+"',event,this)\">New Task</a> "},47:function(e,t,a,n,i){var l=e.lambda,s=e.escapeExpression,r=null!=t?t:{};return" <a class=\"dummyForLeftPanel createlink readOnlyMode\" href=\"javascript:void(0);\" onclick=\"crmNTC.quickCreate('NewAppointment', 'salessignals', '"+s(l(null!=t?t.module:t,t))+"', '"+s(l(null!=t?t.entityId:t,t))+"',event,this)\">"+s(a.getI18n.call(r,"crm.label.newEvent",a.getSingleUserModMap.call(r,"Appointments",{name:"getSingleUserModMap",hash:{},data:i}),{name:"getI18n",hash:{},data:i}))+"</a> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l;return" "+(null!=(l=a.isSignalIframeOpen.call(null!=t?t:{},{name:"isSignalIframeOpen",hash:{},fn:e.program(1,i,0),inverse:e.program(23,i,0),data:i}))?l:"")+" "},useData:!0}),t.signalBusinessCardContent=e({1:function(e,t,a,n,i){var l;return" "+(null!=(l=a.isValidJsonObj.call(null!=t?t:{},t,{name:"isValidJsonObj",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i}))?l:"")+" "},2:function(e,t,a,n,i){var l;return' <div class="nt-bcrow mB25"> <span class="bcDropDownTd alignleft pR ntc-bc-label fs">'+e.escapeExpression(e.lambda(null!=(l=null!=t?t.fieldObj:t)?l.displaylabel:l,t))+' </span> <div class="ntc-bc-field ntc-bc-email pR10">'+(null!=(l=e.invokePartial(n.uiTypeTemplate,null!=t?t.fieldObj:t,{name:"uiTypeTemplate",data:i,helpers:a,partials:n,decorators:e.decorators}))?l:"")+"</div> </div> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l;return'<div id="ntcBcDiv" class="ntcBcDiv pR"> <div class="mB20"> '+(null!=(l=a.each.call(null!=t?t:{},t,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?l:"")+" </div> </div>"},usePartial:!0,useData:!0}),t.signalBusinessMessageDetailView=e({1:function(e,t,a,n,i){var l;return' <div class="ntc-detailv-para"> <div> <div class="ntc-detailv-content">'+e.escapeExpression(e.lambda(null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.message:l,t))+"</div> </div> </div> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression;return' <div class="ntc-detailv-inner pR"> '+(null!=(l=a.isNotEmpty.call(s,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.message:l,{name:"isNotEmpty",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?l:"")+' <div class="ntc-foot-links"> <a href="javascript:;" class="ntclink f12 dIB" data-id="social" data-zcqa="bm_signal_view_conv" onclick="crmNTCDetailView.loadBMConversation(\''+r(e.lambda(null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.conversation_id:l,t))+"')\">"+r(a.getI18n.call(s,"crm.signal.view.conv.link",{name:"getI18n",hash:{},data:i}))+'</a> <div class="clearB"></div> </div> </div>'},useData:!0}),t.signalCampaignDetailView=e({1:function(e,t,a,n,i){var l,s=e.escapeExpression;return' <div class="graytxt f13">  <span class="dIB ntc-camp-action ntc-camp-nowrap">'+s(a.getI18n.call(null!=t?t:{},"Last Opened",{name:"getI18n",hash:{},data:i}))+" - "+s(e.lambda(null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.LAST_OPENED_TIME:l,t))+"</span> </div> "},3:function(e,t,a,n,i){var l;return" "+(null!=(l=a.each.call(null!=t?t:{},null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.CLICKDETAILS:l,{name:"each",hash:{},fn:e.program(4,i,0),inverse:e.noop,data:i}))?l:"")+" "},4:function(e,t,a,n,i){var l=null!=t?t:{},s=e.escapeExpression,r=e.lambda;return' <div class="graytxt f13"> <span class="ntc-camp-link">'+s(a.getI18n.call(l,"crm.signal.link.text",{name:"getI18n",hash:{},data:i}))+' - <a href="'+s(r(null!=t?t.url:t,t))+'" class="link" target="_blank" onmouseover="zctt.showtt(\''+s(a.encodeJS.call(l,null!=t?t.url:t,{name:"encodeJS",hash:{},data:i}))+'\')" onmouseout="zctt.hidett()">'+s(a.removeProtocol.call(l,null!=t?t.url:t,{name:"removeProtocol",hash:{},data:i}))+'</a></span>  <span class="dIB ntc-camp-action">'+s(a.getI18n.call(l,"Last Clicked",{name:"getI18n",hash:{},data:i}))+" - "+s(r(null!=t?t.urlLastClickedTime:t,t))+'</span> <span class="ntc-camp-count">'+s(a.getI18n.call(l,"crm.label.click",{name:"getI18n",hash:{},data:i}))+" - "+s(r(null!=t?t.urlTotalClickCount:t,t))+" </span> </div> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression,o=e.lambda;return' <div class="ntc-detailv-inner pR"> <div class="ntc-detailv-para"> <div> <div class="ntc-detailv-subject crm-font-bold color_333 f18 pB5"><span class="f16 color_1 ntc-detail-head">'+r(a.getSubjectForCampaign.call(s,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.CAMPAIGNSUBJECT:l,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.CAMPAIGNNAME:l,{name:"getSubjectForCampaign",hash:{},data:i}))+'</span></div> <div class="ntc-detailv-content"> '+(null!=(l=a.isNotEmpty.call(s,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.LAST_OPENED_TIME:l,{name:"isNotEmpty",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?l:"")+" "+(null!=(l=a.isNotEmpty.call(s,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.CLICKDETAILS:l,{name:"isNotEmpty",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))?l:"")+' </div> </div> </div> <div class="ntc-foot-links"> <a href="javascript:;" class="ntclink f12 dIB" data-id="campaign" onclick="crmNTCDetailView.campaignDetailViewPopup(\''+r(o(null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.signal:l)?l.namespace:l,t))+"','"+r(o(null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.PREVIEWURL:l,t))+"','"+r(o(null!=(l=null!=t?t.entityObj:t)?l.entityId:l,t))+"','"+r(o(null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.CAMPAIGNID:l,t))+"')\">"+r(a.getI18n.call(s,"crm.signal.view.campaign.link",{name:"getI18n",hash:{},data:i}))+'</a> <div class="clearB"></div> </div> </div>'},useData:!0}),t.signalCommonDetailView=e({1:function(e,t,a,n,i){return" "},3:function(e,t,a,n,i){var l;return' <div class="ntc-detailv-para"> <div> <div class="ntc-detailv-content">'+(null!=(l=a.formatHTML.call(null!=t?t:{},null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.message:l,{name:"formatHTML",hash:{},data:i}))?l:"")+"</div> </div> </div> "},5:function(e,t,a,n,i){return"  "},7:function(e,t,a,n,i){var l;return" "+(null!=(l=a.showWidgetOption.call(null!=t?t:{},null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.signal:l)?l.type:l,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.signal:l)?l.widget:l,{name:"showWidgetOption",hash:{},fn:e.program(8,i,0),inverse:e.noop,data:i}))?l:"")+" "},8:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression;return' <a class="fR svgIconsImg newWindowIcon mB7" href="javascript:;" onclick="WidgetHandler.SalesSignals.render(WidgetHandler.getWidget(\'SalesSignals\',\''+r(s(null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.signal:l)?l.id:l,t))+"'), "+r(a.getDataForWidget.call(null!=t?t:{},null!=t?t.notificationObj:t,null!=t?t.entityObj:t,{name:"getDataForWidget",hash:{},data:i}))+", '"+r(s(null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.signal:l)?l.id:l,t))+"');\"></a> "},10:function(e,t,a,n,i){var l;return" "+(null!=(l=e.invokePartial(n.signalIframeDetailView,t,{name:"signalIframeDetailView",hash:{entityObj:null!=t?t.entityObj:t,notificationObj:null!=t?t.notificationObj:t},data:i,helpers:a,partials:n,decorators:e.decorators}))?l:"")+" "},12:function(e,t,a,n,i){var l;return" "+(null!=(l=a.getOpenTypeForNotification.call(null!=t?t:{},null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.actions:l,{name:"getOpenTypeForNotification",hash:{},fn:e.program(13,i,0),inverse:e.program(15,i,0),data:i}))?l:"")+" "},13:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression;return" <a target='_blank' href='"+r(a.getActionUrl.call(s,null!=t?t.notificationObj:t,{name:"getActionUrl",hash:{},data:i}))+'\' class="f12 mT5 dIB"><span class="ntc-start-chat"> '+r(a.getI18n.call(s,null!=(l=null!=(l=null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.actions:l)?l[0]:l)?l.display_name:l,{name:"getI18n",hash:{},data:i}))+"</span> </a> "},15:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression;return' <a href="javascript:;" onclick="crmNTCGlobal.openNotificationActionInPopup(\''+r(a.getActionUrl.call(s,null!=t?t.notificationObj:t,{name:"getActionUrl",hash:{},data:i}))+'\')" class="f12 mT5 dIB"> <span class="ntc-start-chat"> '+r(a.getI18n.call(s,null!=(l=null!=(l=null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.actions:l)?l[0]:l)?l.display_name:l,{name:"getI18n",hash:{},data:i}))+" </span> </a> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l,s=null!=t?t:{};return' <div class="ntc-detailv-inner pR"> <div class="ntc-detailv-para"> <div class="ntc-detailv-subject crm-font-bold color_333 f18 pB5"> <span class="f16 color_1 ntc-detail-head"> '+e.escapeExpression(e.lambda(null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.subject:l,t))+" </span> </div> "+(null!=(l=a.showSignalIframe.call(s,null!=(l=null!=t?t.notificationObj:t)?l.signal:l,{name:"showSignalIframe",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))?l:"")+' </div> <div class="ntc-foot-links"> '+(null!=(l=a.isSignalIframeOpen.call(s,{name:"isSignalIframeOpen",hash:{},fn:e.program(5,i,0),inverse:e.program(7,i,0),data:i}))?l:"")+" "+(null!=(l=a.showSignalIframe.call(s,null!=(l=null!=t?t.notificationObj:t)?l.signal:l,{name:"showSignalIframe",hash:{},fn:e.program(10,i,0),inverse:e.noop,data:i}))?l:"")+" "+(null!=(l=a.showDetailViewLink.call(s,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.signal:l)?l.namespace:l,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.actions:l,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.signal:l)?l.type:l,{name:"showDetailViewLink",hash:{},fn:e.program(12,i,0),inverse:e.noop,data:i}))?l:"")+" </div> </div> "},usePartial:!0,useData:!0}),t.signalDetailView=e({1:function(e,t,a,n,i){var l;return' <div id="ntcInnerDivContent" class="ntcInnerDivContent pR pR25"> '+(null!=(l=e.invokePartial(n.signalDetailViewTemplate,t,{name:"signalDetailViewTemplate",data:i,helpers:a,partials:n,decorators:e.decorators}))?l:"")+" </div> "},3:function(e,t,a,n,i){var l;return' <div class="signalPopContent pR oH"> '+(null!=(l=e.invokePartial(n.signalBusinessCard,null!=t?t.entityObj:t,{name:"signalBusinessCard",data:i,helpers:a,partials:n,decorators:e.decorators}))?l:"")+' <div class="pR"> <span id="signalDetailViewClose" style="float:right;display:block;right: 16px;top: 13px;z-index:1;" class="newPopupCloseIcon svgIcons ico-close-small2 cP op08 pA" onclick="crmNTCDetailView.closeDetailView()"></span> </div> <span class="collapse-view-sales-signals ntc-bc-toggle dIB" id="ntcCollapseView" onclick="crmNTCDetailView.toggleSignalBusinessCard(this); sE(event)" id=""> <span class="svgIcons dIB fCollapseIn"></span> </span> <div id="ntcDivContent" class="ntc-div-content pR"  onscroll="crmNTCDetailView.showMoreSignalsDetailsOnScroll()" > <div id="ntcInnerDivContent" class="ntcInnerDivContent pR pR25"> '+(null!=(l=e.invokePartial(n.signalDetailViewTemplate,t,{name:"signalDetailViewTemplate",data:i,helpers:a,partials:n,decorators:e.decorators}))?l:"")+" </div> </div> </div> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l;return" "+(null!=(l=a.isSignalIframeOpen.call(null!=t?t:{},{name:"isSignalIframeOpen",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))?l:"")},usePartial:!0,useData:!0}),t.signalDetailViewTemplate=e({1:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression,o=null!=t?t:{};return' <div id="ntc-detailv-'+r(s(null!=t?t.id:t,t))+'" class="ntc-detailv-detail pR" data-notificationtype="'+r(s(null!=(l=null!=t?t.signal:t)?l.namespace:l,t))+'"> <div class="mB10 ntc-detailv-title"> <span class="color_3 crm-font-regular f17 black mB15 '+(null!=(l=a.isZohoExtensionSignal.call(o,null!=(l=null!=t?t.signal:t)?l.namespace:l,null!=(l=null!=t?t.signal:t)?l.type:l,{name:"isZohoExtensionSignal",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i}))?l:"")+" "+(null!=(l=a.isZohoExtensionSignal.call(o,null!=(l=null!=t?t.signal:t)?l.namespace:l,null!=(l=null!=t?t.signal:t)?l.type:l,{name:"isZohoExtensionSignal",hash:{},fn:e.program(4,i,0),inverse:e.program(6,i,0),data:i}))?l:"")+' pR"> '+(null!=(l=a.isPlatformExtensionSignal.call(o,null!=(l=null!=t?t.signal:t)?l.namespace:l,{name:"isPlatformExtensionSignal",hash:{},fn:e.program(8,i,0),inverse:e.noop,data:i}))?l:"")+" "+(null!=(l=a.isUserCustomExtension.call(o,null!=(l=null!=t?t.signal:t)?l.type:l,{name:"isUserCustomExtension",hash:{},fn:e.program(10,i,0),inverse:e.program(12,i,0),data:i}))?l:"")+' </span> <span class="nc-rtime mL10 " onmouseover="zctt.showtt(\''+r(a.encodeJS.call(o,null!=(l=null!=t?t.date:t)?l.tooltip:l,{name:"encodeJS",hash:{},data:i}))+'\')" onmouseout="zctt.hidett()">'+r(s(null!=(l=null!=t?t.date:t)?l.display:l,t))+'</span> </div> <div id="ntc-detailv-content-'+r(s(null!=t?t.id:t,t))+'"> <div class="ntc-busyBtn" style="display: block;"> <span class="dIB ntc-loader"></span> </div> </div> </div> '},2:function(e,t,a,n,i){return" nc-dicon "},4:function(e,t,a,n,i){return" "+e.escapeExpression(a.getNTCIconClass.call(null!=t?t:{},t,{name:"getNTCIconClass",hash:{},data:i}))+" "},6:function(e,t,a,n,i){return" ntc-platform-icon-large "},8:function(e,t,a,n,i){var l;return' <img class="nc-platform-image" src="'+e.escapeExpression(a.getExtensionSignalIconUrl.call(null!=t?t:{},null!=(l=null!=(l=null!=t?t.signal:t)?l.icon:l)?l.id:l,null!=(l=null!=(l=null!=t?t.signal:t)?l.icon:l)?l.sand_box_zgid:l,{name:"getExtensionSignalIconUrl",hash:{},data:i}))+'"></img> '},10:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression;return' <img class="nc-platform-image" src="'+r(a.getZohoUserCustomSignalIconUrl.call(s,null!=(l=null!=t?t.signal:t)?l.icon:l,null!=(l=null!=t?t.signal:t)?l.id:l,{name:"getZohoUserCustomSignalIconUrl",hash:{},data:i}))+'"></img> <span class="nc-dlabel">'+r(a.getSignalHeading.call(s,t,{name:"getSignalHeading",hash:{},data:i}))+"</span> "},12:function(e,t,a,n,i){return' <span class="nc-dlabel">'+e.escapeExpression(a.getSignalHeading.call(null!=t?t:{},t,{name:"getSignalHeading",hash:{},data:i}))+"</span> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l;return"  "+(null!=(l=a.each.call(null!=t?t:{},null!=t?t.notificationObjs:t,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?l:"")},useData:!0}),t.signalEmailContent=e({1:function(e,t,a,n,i){return" <span class='dIB vam "+e.escapeExpression(a.getSentimentIconClass.call(null!=t?t:{},null!=t?t.notificationObj:t,{name:"getSentimentIconClass",hash:{},data:i}))+"'></span> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression;return'<div class="ntc-detailv-inner pR ntc-emailframe"> <div id="ntcEmailIframeWrap'+r(s(null!=(l=null!=t?t.notificationObj:t)?l.id:l,t))+'" class="ntcEmailIframeWrap"> <div class="ntc-detailv-subject crm-font-bold color_333 f18 pB5 pR"> '+(null!=(l=a.isSentimentAvailable.call(null!=t?t:{},null!=t?t.notificationObj:t,{name:"isSentimentAvailable",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?l:"")+' <span class="f16 color_1 ntc-detail-head pR20 w98per dIB">'+r(s(null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.SUBJECT:l,t))+'</span> <a class="link fR svgIconsImg newWindowIcon ntc-nw-open pA" style="right:0; top:0; z-index:1" href="javascript:;" onclick="'+r(s(null!=t?t.mailPoupupLink:t,t))+'"></a> </div> <iframe id="emailDetailIframeContent'+r(s(null!=(l=null!=t?t.notificationObj:t)?l.id:l,t))+'" scrolling="no" style="opacity:1; width:100%; height:100%;clear: both; " src= "/crm/html/content1.html" class="iframeHeightBasedOnMailContent" ></iframe> </div> </div> '},useData:!0}),t.signalEmailDetailView=e({1:function(e,t,a,n,i){return" <span class='dIB vam "+e.escapeExpression(a.getSentimentIconClass.call(null!=t?t:{},null!=t?t.notificationObj:t,{name:"getSentimentIconClass",hash:{},data:i}))+"'></span> "},3:function(e,t,a,n,i){var l,s=e.escapeExpression;return' <crm-competitor-mention-list data-zcqa="zComp_mentioned_tags_'+s(e.lambda(null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.SUBJECT:l,t))+'" meta-data="'+s(a.ObjToString.call(null!=t?t:{},null!=(l=null!=t?t.notificationObj:t)?l.metadata:l,{name:"ObjToString",hash:{},data:i}))+'"></crm-competitor-mention-list> '},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression;return' <div class="ntc-detailv-inner pR ntc-emailframe"> <div class="ntc-detailv-para"> <div> <div class="ntc-detailv-subject crm-font-bold color_333 f18 pB5"> '+(null!=(l=a.isSentimentAvailable.call(s,null!=t?t.notificationObj:t,{name:"isSentimentAvailable",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?l:"")+' <span class="f16 color_1 ntc-detail-head">'+r(e.lambda(null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.SUBJECT:l,t))+"</span> </div> </div> </div> "+(null!=(l=a.isCompetitorAlert.call(s,null!=t?t.notificationObj:t,{name:"isCompetitorAlert",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))?l:"")+' <div class="ntc-foot-links">  <a href="javascript:;" class="ntclink f12 dIB" data-id="survey" onclick=\'crmNTCDetailView.showMailContentInner('+r(a.JSONtoString.call(s,null!=t?t.notificationObj:t,{name:"JSONtoString",hash:{},data:i}))+","+r(a.JSONtoString.call(s,null!=t?t.entityObj:t,{name:"JSONtoString",hash:{},data:i}))+")'>"+r(a.getI18n.call(s,"crm.signal.view.email.link",{name:"getI18n",hash:{},data:i}))+'</a> <div class="clearB"></div> </div> <div class="ntc-busyBtn" style="display: none;"> <span class="dIB ntc-loader"></span> </div> </div> '},useData:!0}),t.signalErrorMessage=e({1:function(e,t,a,n,i){return' <div id="signalErrorMsg" class="aligncenter signal-detail-error"> <div class="dIB pR mT20 w80per"> <div class="f14 color_5 dIB fL alignleft"><span class="crm-error-page-icon"></span> '+e.escapeExpression(a.getI18n.call(null!=t?t:{},null!=t?t.error_message:t,{name:"getI18n",hash:{},data:i}))+"</div> </div> </div> "},3:function(e,t,a,n,i){var l=null!=t?t:{},s=e.escapeExpression;return' <div id="signalErrorMsg" class="aligncenter signal-detail-popup-error"> <div class="dIB pR mT20 w80per"> <div class="f14 color_5 mB10 mT2 dIB fL alignleft"><span class="crm-error-page-icon"></span> <div class=" f20 crm-font-regular mL10 fontSmooth">'+s(a.getI18n.call(l,null!=t?t.error_heading:t,{name:"getI18n",hash:{},data:i}))+'</div><div class="pT15 f14 pL10">'+s(a.getI18n.call(l,null!=t?t.error_message:t,{name:"getI18n",hash:{},data:i}))+"</div></div> </div> </div> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l;return null!=(l=a.isEmailNotificationType.call(null!=t?t:{},null!=t?t.notificationType:t,{name:"isEmailNotificationType",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))?l:""},useData:!0}),t.signalIframeDetailView=e({compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression,o=null!=t?t:{};return'<div class=""> <div id="ntcPlatformIframeWrap_'+r(s(null!=(l=null!=t?t.notificationObj:t)?l.id:l,t))+'" class="ntcPlatformIframeWrap"> <input type="submit" id="ntcPlatformIframeSwitch_'+r(s(null!=(l=null!=t?t.notificationObj:t)?l.id:l,t))+'" style="display:none;" onclick="WidgetHandler.SalesSignals.show('+r(a.getDataForIFrame.call(o,null!=t?t.notificationObj:t,{name:"getDataForIFrame",hash:{},data:i}))+","+r(a.getDataForIFrame.call(o,null!=t?t.entityObj:t,{name:"getDataForIFrame",hash:{},data:i}))+')" ></input> <iframe id="signalPlatformIframeContent_'+r(s(null!=(l=null!=t?t.notificationObj:t)?l.id:l,t))+'" scrolling="yes" style="" src=""></iframe> </div> </div>'},useData:!0}),t.signalMissedCallDetailView=e({1:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression,o=e.lambda;return' <span class="fL">'+r(a.getI18n.call(s,"crm.signal.telephony.missed.call.other.text",null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.missedUserName:l,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.CUSTNUMBER:l,{name:"getI18n",hash:{},data:i}))+'</span> <a href="javascript:;" class="ntc-call-outer mL15" onclick="crmNTCGlobal.call(\''+r(o(null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.CUSTNUMBER:l,t))+"', '"+r(o(null!=(l=null!=t?t.entityObj:t)?l.entityId:l,t))+"', '"+r(o(null!=(l=null!=t?t.entityObj:t)?l.module:l,t))+"', '"+r(a.encodeJS.call(s,null!=(l=null!=t?t.entityObj:t)?l.fullName:l,{name:"encodeJS",hash:{},data:i}))+'\'); sE();"><span id="calllabel1" style="display: inline;">'+r(a.getI18n.call(s,"Call",{name:"getI18n",hash:{},data:i}))+"</span></a> "},3:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression,o=e.lambda;return' <span class="fL">'+r(a.getI18n.call(s,"crm.signal.telephony.missed.call.self.text",null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.CUSTNUMBER:l,{name:"getI18n",hash:{},data:i}))+'</span><a href="javascript:;" class="ntc-call-outer mL15" onclick="crmNTCGlobal.call(\''+r(o(null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.CUSTNUMBER:l,t))+"', '"+r(o(null!=(l=null!=t?t.entityObj:t)?l.entityId:l,t))+"', '"+r(o(null!=(l=null!=t?t.entityObj:t)?l.module:l,t))+"', '"+r(a.encodeJS.call(s,null!=(l=null!=t?t.entityObj:t)?l.fullName:l,{name:"encodeJS",hash:{},data:i}))+'\'); sE();"><span id="calllabel1" style="display: inline;">'+r(a.getI18n.call(s,"Call",{name:"getI18n",hash:{},data:i}))+"</span></a> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l;return' <div class="ntc-detailv-inner pR"> <div class="ntc-detailv-para"> <div> '+(null!=(l=a.isNotEmpty.call(null!=t?t:{},null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.missedUserName:l,{name:"isNotEmpty",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))?l:"")+' <div class="clearB"></div> </div> </div> </div>'},useData:!0}),t.signalMissedChatDetailView=e({1:function(e,t,a,n,i){return"block"},3:function(e,t,a,n,i){return"none"},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression;return'<div class="ntc-detailv-inner pR"> <div class="ntc-detailv-para"> <div> <div class="ntc-detailv-content">'+r(a.safeEncodeHTML.call(s,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.chatContent:l,{name:"safeEncodeHTML",hash:{},data:i}))+'</div> </div> </div>  <div class="ntc-foot-links ntc-detail-foot-chat" style="display:'+(null!=(l=a.ifEntityOnline.call(s,null!=(l=null!=t?t.entityObj:t)?l.module:l,null!=(l=null!=t?t.entityObj:t)?l.entityId:l,{name:"ifEntityOnline",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))?l:"")+"\" > <a target='_blank' href='"+r(a.getChatLink.call(s,null!=(l=null!=t?t.entityObj:t)?l.module:l,null!=(l=null!=t?t.entityObj:t)?l.entityId:l,{name:"getChatLink",hash:{},data:i}))+'\' class="f12 mT5 dIB"><span class="ntc-start-chat">'+r(a.getI18n.call(s,"crm.ntc.txt.chat.startchat",{name:"getI18n",hash:{},data:i}))+"</span></a> </div> </div> </div>"},useData:!0}),t.signalPlatformExtension=e({1:function(e,t,a,n,i){var l;return" "+(null!=(l=a.getOpenTypeForNotification.call(null!=t?t:{},null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.actions:l,{name:"getOpenTypeForNotification",hash:{},fn:e.program(2,i,0),inverse:e.program(4,i,0),data:i}))?l:"")+" "},2:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression;return" <a target='_blank' href='"+r(a.encodeJS.call(s,a.getActionUrl.call(s,null!=t?t.notificationObj:t,{name:"getActionUrl",hash:{},data:i}),{name:"encodeJS",hash:{},data:i}))+'\' class="f12 mT5 dIB"><span class="ntc-start-chat">'+r(a.getActionDispName.call(s,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.actions:l,{name:"getActionDispName",hash:{},data:i}))+"</span></a> "},4:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression;return' <a href="javascript:;" onclick="crmNTCGlobal.openNotificationActionInPopup(\''+r(a.encodeJS.call(s,a.getActionUrl.call(s,null!=t?t.notificationObj:t,{name:"getActionUrl",hash:{},data:i}),{name:"encodeJS",hash:{},data:i}))+'\')" class="f12 mT5 dIB"><span class="ntc-start-chat">'+r(a.getActionDispName.call(s,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.actions:l,{name:"getActionDispName",hash:{},data:i}))+"</span></a> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l,s=null!=t?t:{};return'<div class="ntc-detailv-inner pR"> <div class="ntc-detailv-para"> <div> <div class="ntc-detailv-content">'+(null!=(l=a.formatHTML.call(s,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.message:l,{name:"formatHTML",hash:{},data:i}))?l:"")+'</div> </div> </div> <div class="ntc-foot-links"> '+(null!=(l=a.showDetailViewLink.call(s,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.signal:l)?l.namespace:l,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.actions:l,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.signal:l)?l.type:l,{name:"showDetailViewLink",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?l:"")+" </div> </div>"},useData:!0}),t.signalPopupDetailView=e({compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){return'<div class="pR"> <span onclick="crmNTCDetailView.hideDetailViewPopup(); sE(event)" style="float:right;display:block;right: 16px;top: 13px;z-index:1;text-align:center;" class="newPopupCloseIcon svgIcons ico-close-small2 cP op08 pA"></span> </div> <div class="zcrm-content"> <div class="popup-model-content" style="overflow:hidden;"> <div id="loadMsg" class="aligncenter"><div class="dIB"><span class="ntc-loader" style="display:block"></span></div></div> <div id="signalPopupInnerDiv" class="signalPopupInnerDiv pR" style="display: block;"></div> </div> </div>'},useData:!0}),t.signalShowMoreButton=e({compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){return'<div id="signalDetailsShowMore" class="vpvl"> <button onclick="crmNTCDetailView.showMoreSignalsDetails()" class="newwhitebtn">Show More</button> </div>'},useData:!0}),t.signalSocialDetailView=e({1:function(e,t,a,n,i){var l;return' <div class="ntc-detailv-para"> <div class="ntc-detailv-content">'+(null!=(l=e.lambda(null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.text:l,t))?l:"")+" </div> </div> "+(null!=(l=a.if.call(null!=t?t:{},null!=(l=null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.entities:l)?l.media:l,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i}))?l:"")+" "},2:function(e,t,a,n,i){var l;return' <div class="ntc-detailv-para"> '+(null!=(l=a.each.call(null!=t?t:{},null!=(l=null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.entities:l)?l.media:l,{name:"each",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))?l:"")+" </div> "},3:function(e,t,a,n,i){return' <div class="what mt10 pB15"> <img src="'+e.escapeExpression(e.lambda(null!=t?t.media_url_https:t,t))+'" class="contentimage" onload=""></img> </div> '},5:function(e,t,a,n,i){var l,s=null!=t?t:{};return' <div class="ntc-detailv-para"> <div class="ntc-detailv-content"> '+(null!=(l=e.lambda(null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.message:l,t))?l:"")+" </div> </div> "+(null!=(l=a.if.call(s,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.isPic:l,{name:"if",hash:{},fn:e.program(6,i,0),inverse:e.noop,data:i}))?l:"")+" "+(null!=(l=a.if.call(s,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.convo:l,{name:"if",hash:{},fn:e.program(8,i,0),inverse:e.noop,data:i}))?l:"")+" "},6:function(e,t,a,n,i){var l;return' <div class="ntc-detailv-media"> <div class="what mt10"> <img src="'+e.escapeExpression(e.lambda(null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.picture:l,t))+'" class="contentimage" onload=""></img> </div> </div> '},8:function(e,t,a,n,i){var l;return" "+(null!=(l=a.if.call(null!=t?t:{},null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.attachments:l,{name:"if",hash:{},fn:e.program(9,i,0),inverse:e.noop,data:i}))?l:"")+" "},9:function(e,t,a,n,i){var l;return' <div class="ntc-detailv-media"> <div class="kso_sharedlink p5 dIB pL20 pR20 mT5"> '+(null!=(l=a.each.call(null!=t?t:{},null!=(l=null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.attachments:l)?l.data:l,{name:"each",hash:{},fn:e.program(10,i,0),inverse:e.noop,data:i}))?l:"")+" </div> </div> "},10:function(e,t,a,n,i){var l;return" "+(null!=(l=a.if.call(null!=t?t:{},null!=t?t.image:t,{name:"if",hash:{},fn:e.program(11,i,0),inverse:e.program(13,i,0),data:i}))?l:"")+" <br> "},11:function(e,t,a,n,i){return' <img src="'+e.escapeExpression(e.lambda(null!=t?t.image:t,t))+'" class="contentimage" onload=""></img> '},13:function(e,t,a,n,i){var l=e.escapeExpression,s=e.lambda;return' <a href="'+l(a.getRebrandKey.call(null!=t?t:{},"FB_URL",{name:"getRebrandKey",hash:{},data:i}))+"/"+l(s(null!=t?t.link:t,t))+'" onclick="sE(event);">'+l(s(null!=t?t.name:t,t))+"</a> "},15:function(e,t,a,n,i){var l=null!=t?t:{},s=e.escapeExpression;return' <a href="javascript:;" class="ntclink f12 dIB" data-id="social" onclick="crmNTCDetailView.socialDetailViewPopup(\''+s(a.getSocialParams.call(l,null!=t?t.notificationObj:t,{name:"getSocialParams",hash:{},data:i}))+"')\">"+s(a.getI18n.call(l,"crm.signal.view.post.link",{name:"getI18n",hash:{},data:i}))+"</a> "},17:function(e,t,a,n,i){var l=null!=t?t:{},s=e.escapeExpression;return' <a href="javascript:;" class="ntclink f12 dIB" data-id="social" onclick="crmNTCDetailView.socialDetailViewPopup(\''+s(a.getSocialParams.call(l,null!=t?t.notificationObj:t,{name:"getSocialParams",hash:{},data:i}))+"')\">"+s(a.getI18n.call(l,"crm.signal.view.comment.link",{name:"getI18n",hash:{},data:i}))+"</a> "},19:function(e,t,a,n,i){var l=null!=t?t:{},s=e.escapeExpression;return' <a href="javascript:;" class="ntclink f12 dIB" data-id="social" onclick="crmNTCDetailView.socialDetailViewPopup(\''+s(a.getSocialParams.call(l,null!=t?t.notificationObj:t,{name:"getSocialParams",hash:{},data:i}))+"')\">"+s(a.getI18n.call(l,"crm.signal.view.conv.link",{name:"getI18n",hash:{},data:i}))+"</a> "},21:function(e,t,a,n,i){var l=null!=t?t:{},s=e.escapeExpression;return' <a href="javascript:;" class="ntclink f12 dIB" data-id="social" onclick="crmNTCDetailView.socialDetailViewPopup(\''+s(a.getSocialParams.call(l,null!=t?t.notificationObj:t,{name:"getSocialParams",hash:{},data:i}))+"')\">"+s(a.getI18n.call(l,"crm.signal.view.reply.link",{name:"getI18n",hash:{},data:i}))+"</a> "},23:function(e,t,a,n,i){var l=null!=t?t:{},s=e.escapeExpression;return' <a href="javascript:;" class="ntclink f12 dIB" data-id="social" onclick="crmNTCDetailView.socialDetailViewPopup(\''+s(a.getSocialParams.call(l,null!=t?t.notificationObj:t,{name:"getSocialParams",hash:{},data:i}))+"')\">"+s(a.getI18n.call(l,"crm.signal.view.tweet.link",{name:"getI18n",hash:{},data:i}))+"</a> "},25:function(e,t,a,n,i){var l=null!=t?t:{},s=e.escapeExpression;return' <a href="javascript:;" class="ntclink f12 dIB" data-id="social" onclick="crmNTCDetailView.socialDetailViewPopup(\''+s(a.getSocialParams.call(l,null!=t?t.notificationObj:t,{name:"getSocialParams",hash:{},data:i}))+"')\">"+s(a.getI18n.call(l,"crm.signal.view.message.link",{name:"getI18n",hash:{},data:i}))+"</a> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l,s=null!=t?t:{};return' <div class="ntc-detailv-inner pR"> '+(null!=(l=a.if_eq.call(s,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.network:l,"twitter",{name:"if_eq",hash:{},fn:e.program(1,i,0),inverse:e.program(5,i,0),data:i}))?l:"")+' <div class="ntc-foot-links"> '+(null!=(l=a.showViewPostLink.call(s,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.signal:l)?l.namespace:l,{name:"showViewPostLink",hash:{},fn:e.program(15,i,0),inverse:e.noop,data:i}))?l:"")+" "+(null!=(l=a.showViewCommentLink.call(s,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.signal:l)?l.namespace:l,{name:"showViewCommentLink",hash:{},fn:e.program(17,i,0),inverse:e.noop,data:i}))?l:"")+" "+(null!=(l=a.showViewConvLink.call(s,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.signal:l)?l.namespace:l,{name:"showViewConvLink",hash:{},fn:e.program(19,i,0),inverse:e.noop,data:i}))?l:"")+" "+(null!=(l=a.showViewReplyLink.call(s,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.signal:l)?l.namespace:l,{name:"showViewReplyLink",hash:{},fn:e.program(21,i,0),inverse:e.noop,data:i}))?l:"")+" "+(null!=(l=a.showViewTweetLink.call(s,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.signal:l)?l.namespace:l,{name:"showViewTweetLink",hash:{},fn:e.program(23,i,0),inverse:e.noop,data:i}))?l:"")+" "+(null!=(l=a.showViewMessageLink.call(s,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.signal:l)?l.namespace:l,{name:"showViewMessageLink",hash:{},fn:e.program(25,i,0),inverse:e.noop,data:i}))?l:"")+" "+(null!=(l=a.showViewPostLinkForLike.call(s,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.signal:l)?l.namespace:l,{name:"showViewPostLinkForLike",hash:{},fn:e.program(15,i,0),inverse:e.noop,data:i}))?l:"")+' <div class="clearB"></div> </div> </div>'},useData:!0}),t.signalSupportDetailView=e({1:function(e,t,a,n,i){var l,s=e.escapeExpression;return' <div> <span class="dIB mR5">'+s(a.getI18n.call(null!=t?t:{},"Rating",{name:"getI18n",hash:{},data:i}))+' :</span><span class="dIB ntc-bad-rating red">'+s(e.lambda(null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.rating:l,t))+"</span> </div> "},3:function(e,t,a,n,i){var l;return" "+(null!=(l=a.isNotEmpty.call(null!=t?t:{},null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.ticketOwnerName:l,{name:"isNotEmpty",hash:{},fn:e.program(4,i,0),inverse:e.program(6,i,0),data:i}))?l:"")+" "},4:function(e,t,a,n,i){var l;return' <p class="pT5 pB10"> '+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.signal.support.ticket.escalated.owner.text",null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.level:l,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.ticketOwnerName:l,{name:"getI18n",hash:{},data:i}))+" </p> "},6:function(e,t,a,n,i){var l;return" "+(null!=(l=a.ifAllTruthy.call(null!=t?t:{},null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.level:l,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.ESCALATED_BY_DAYS:l,{name:"ifAllTruthy",hash:{},fn:e.program(7,i,0),inverse:e.program(9,i,0),data:i}))?l:"")+" "},7:function(e,t,a,n,i){var l;return' <p class="pT5 pB10"> '+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.signal.support.ticket.escalated.level.with.days.text",null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.level:l,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.ESCALATED_BY_DAYS:l,{name:"getI18n",hash:{},data:i}))+" </p> "},9:function(e,t,a,n,i){var l;return" "+(null!=(l=a.isNotEmpty.call(null!=t?t:{},null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.level:l,{name:"isNotEmpty",hash:{},fn:e.program(10,i,0),inverse:e.noop,data:i}))?l:"")+" "},10:function(e,t,a,n,i){var l;return' <p class="pT5 pB10">'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.signal.support.ticket.escalated.level.text",null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.level:l,{name:"getI18n",hash:{},data:i}))+"</p> "},12:function(e,t,a,n,i){var l;return" "+(null!=(l=e.lambda(null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.commentDesc:l,t))?l:"")+" "},14:function(e,t,a,n,i){var l;return" "+(null!=(l=a.isNotEmpty.call(null!=t?t:{},null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.CONTENT:l,{name:"isNotEmpty",hash:{},fn:e.program(15,i,0),inverse:e.noop,data:i}))?l:"")+" "},15:function(e,t,a,n,i){var l;return" "+e.escapeExpression(e.lambda(null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.CONTENT:l,t))+" "},17:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression;return' <a href="javascript:;" class="ntclink f12 dIB" onclick="crmNTCDetailView.supportDetailPopupView(\''+r(s(null!=(l=null!=t?t.notificationObj:t)?l.id:l,t))+"','"+r(s(null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.encryptedTicketId:l,t))+'\')" data-id="support">'+r(a.getI18n.call(null!=t?t:{},"crm.signal.view.request.link",{name:"getI18n",hash:{},data:i}))+"</a> "},19:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression;return' <a href="javascript:;" class="ntclink f12 dIB" onclick="crmNTCDetailView.supportDetailPopupView(\''+r(s(null!=(l=null!=t?t.notificationObj:t)?l.id:l,t))+"','"+r(s(null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.encryptedTicketId:l,t))+'\')" data-id="support">'+r(a.getI18n.call(null!=t?t:{},"crm.signal.view.response.link",{name:"getI18n",hash:{},data:i}))+"</a> "},21:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression;return' <a href="javascript:;" class="ntclink f12 dIB" onclick="crmNTCDetailView.supportDetailPopupView(\''+r(s(null!=(l=null!=t?t.notificationObj:t)?l.id:l,t))+"','"+r(s(null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.encryptedTicketId:l,t))+'\')" data-id="support">'+r(a.getI18n.call(null!=t?t:{},"crm.signal.view.comment.link",{name:"getI18n",hash:{},data:i}))+"</a> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l,s=null!=t?t:{};return' <div class="ntc-detailv-inner pR"> <div class="ntc-detailv-para"> '+(null!=(l=a.showRating.call(s,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.signal:l)?l.namespace:l,{name:"showRating",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?l:"")+" "+(null!=(l=a.showEscalationLevel.call(s,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.signal:l)?l.namespace:l,{name:"showEscalationLevel",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))?l:"")+' <div> <div class="ntc-detailv-subject crm-font-bold color_333 f18 pB5"> <span class="f16 color_1 ntc-detail-head">'+(null!=(l=a.getSubject.call(s,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.subject:l,{name:"getSubject",hash:{},data:i}))?l:"")+'</span> </div> <div class="ntc-detailv-content"> '+(null!=(l=a.showCommentDesc.call(s,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.signal:l)?l.namespace:l,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.commentDesc:l,{name:"showCommentDesc",hash:{},fn:e.program(12,i,0),inverse:e.program(14,i,0),data:i}))?l:"")+' </div> </div> <div class="ntc-foot-links"> '+(null!=(l=a.showViewRequestLink.call(s,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.signal:l)?l.namespace:l,{name:"showViewRequestLink",hash:{},fn:e.program(17,i,0),inverse:e.noop,data:i}))?l:"")+" "+(null!=(l=a.showViewResponseLink.call(s,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.signal:l)?l.namespace:l,{name:"showViewResponseLink",hash:{},fn:e.program(19,i,0),inverse:e.noop,data:i}))?l:"")+" "+(null!=(l=a.showViewCommentLink.call(s,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.signal:l)?l.namespace:l,{name:"showViewCommentLink",hash:{},fn:e.program(21,i,0),inverse:e.noop,data:i}))?l:"")+' <div class="clearB"></div> </div> </div> </div>'},useData:!0}),t.signalSurveyDetailView=e({1:function(e,t,a,n,i){var l;return' <div class="ntc-detailv-para"> <div> <div class="ntc-detailv-subject crm-font-bold color_333 f18 pB5"> <span class="f16 color_1 ntc-detail-head">'+e.escapeExpression(a.safeEncodeHTML.call(null!=t?t:{},null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.SURVEYTITLE:l,{name:"safeEncodeHTML",hash:{},data:i}))+"</span> </div> </div> </div> "},3:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression;return' <a href="'+r(a.getVisitSurveyLink.call(s,null!=(l=null!=t?t.notificationObj:t)?l.metadata:l,{name:"getVisitSurveyLink",hash:{},data:i}))+'" target="_blank" class="ntclink f12 dIB" data-id="survey">'+r(a.getI18n.call(s,"crm.signal.view.survey",{name:"getI18n",hash:{},data:i}))+'</a> <div class="clearB"></div> '},5:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression,o=e.lambda;return' <a href="javascript:;" class="ntclink f12 dIB" data-id="survey" onclick="crmNTCDetailView.surveyDetailPopupView(\''+r(a.encodeJS.call(s,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.signal:l)?l.namespace:l,{name:"encodeJS",hash:{},data:i}))+"','"+r(o(null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.UNIQUEID:l,t))+"','"+r(o(null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.RESPONSEID:l,t))+"','"+r(o(null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.EMAIL:l,t))+"')\">"+r(a.getI18n.call(s,"crm.signal.view.response.link",{name:"getI18n",hash:{},data:i}))+'</a> <div class="clearB"></div> '},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l,s=null!=t?t:{};return' <div class="ntc-detailv-inner pR"> '+(null!=(l=a.if.call(s,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.SURVEYTITLE:l,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?l:"")+' <div class="ntc-foot-links"> '+(null!=(l=a.if.call(s,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.metadata:l)?l.visited:l,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.program(5,i,0),data:i}))?l:"")+" </div> </div>"},useData:!0}),t.signalWidgetPopupContainer=e({compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){return e.escapeExpression(a.log.call(null!=t?t:{},"Rendered Signal Widget Popup from New Handlebar",{name:"log",hash:{},data:i}))+' <div class="zI10 vmiddle  zI200 zcrm-modal zcrm-effect zcrm-show signalPopupContainer" id="SignalWidgetPopup" style="z-index: 35;"> <div class="signalWidgetPopup"> <div class="fR pR pT25 pR20"> <span onclick="WidgetHandler.SalesSignals.close();" class="newPopupCloseIcon svgIcons ico-close-small2 cP op08 dIB" ></span> </div> <div id="signalWidgetPopupTitle" class="popup-model-header f21"> <span id="reportName"></span> </div> <div id="SignalWidgetPopUpRespContent"></div> </div> </div>'},useData:!0}),t.singleNotification=e({1:function(e,t,a,n,i){return" "+e.escapeExpression(a.getNTCIconClass.call(null!=t?t:{},null!=t?t.notificationObj:t,{name:"getNTCIconClass",hash:{},data:i}))+" "},3:function(e,t,a,n,i){return"none"},5:function(e,t,a,n,i){return"block"},7:function(e,t,a,n,i){var l;return' <img class="nc-platform-image" src="'+e.escapeExpression(a.getExtensionSignalIconUrl.call(null!=t?t:{},null!=(l=null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.signal:l)?l.icon:l)?l.id:l,null!=(l=null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.signal:l)?l.icon:l)?l.sand_box_zgid:l,{name:"getExtensionSignalIconUrl",hash:{},data:i}))+'"></img> '},9:function(e,t,a,n,i){var l;return" "+(null!=(l=a.isSentimentAvailable.call(null!=t?t:{},null!=t?t.notificationObj:t,{name:"isSentimentAvailable",hash:{},fn:e.program(10,i,0),inverse:e.noop,data:i}))?l:"")+' <span class="ntcTxt ntcTxtShort f14 color_6 fL " onmouseover="" onmouseout="zctt.hidett()"> '},10:function(e,t,a,n,i){return" <span class='dIB vam "+e.escapeExpression(a.getSentimentIconClass.call(null!=t?t:{},null!=t?t.notificationObj:t,{name:"getSentimentIconClass",hash:{},data:i}))+"'></span> "},12:function(e,t,a,n,i){var l;return" "+(null!=(l=a.isSentimentAvailable.call(null!=t?t:{},null!=t?t.notificationObj:t,{name:"isSentimentAvailable",hash:{},fn:e.program(10,i,0),inverse:e.noop,data:i}))?l:"")+' <span class="ntcTxt ntcTxtShort f14 color_6 fL"> '},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression,o=e.lambda;return'<li class="no-incomeList pL25 pB7 defaultcursor pR '+(null!=(l=a.isZohoExtensionSignal.call(s,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.signal:l)?l.namespace:l,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.signal:l)?l.type:l,{name:"isZohoExtensionSignal",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?l:"")+'" data-ntcObj="'+r(a.JSONtoString.call(s,null!=t?t.notificationObj:t,{name:"JSONtoString",hash:{},data:i}))+'" data-notification-id="'+r(o(null!=(l=null!=t?t.notificationObj:t)?l.NOTIFICATIONID:l,t))+"\" onclick=\"crmNTCDetailView.showDetailView(this); sE(event);\" onmouseover=\"$(this).find('.callNow').css('visibility','visible');sE(event);\" onmouseout=\"$(this).find('.callNow').css('visibility','hidden');sE(event);\" style=\"display:"+(null!=(l=a.if_eq.call(s,null!=t?t.index:t,0,{name:"if_eq",hash:{},fn:e.program(3,i,0),inverse:e.program(5,i,0),data:i}))?l:"")+'"> '+(null!=(l=a.isPlatformExtensionSignal.call(s,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.signal:l)?l.type:l,{name:"isPlatformExtensionSignal",hash:{},fn:e.program(7,i,0),inverse:e.noop,data:i}))?l:"")+" "+(null!=(l=a.showTitleOnMouseover.call(s,null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.signal:l)?l.namespace:l,{name:"showTitleOnMouseover",hash:{},fn:e.program(9,i,0),inverse:e.program(12,i,0),data:i}))?l:"")+" "+r(a.getNTCText.call(s,null!=t?t.notificationObj:t,null!=t?t.module:t,null!=t?t.entityId:t,{name:"getNTCText",hash:{},data:i}))+' </span> <span class="nc-rtime fR" data-signalTime="'+r(o(null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.date:l)?l.tooltip:l,t))+'"> '+r(o(null!=(l=null!=(l=null!=t?t.notificationObj:t)?l.date:l)?l.display:l,t))+' </span> <div class="cB"></div> </li> '},useData:!0}),t.wrappedNotification=e({1:function(e,t,a,n,i){return" "+e.escapeExpression(a.getNTCIconClass.call(null!=t?t:{},null!=t?t.first_notification:t,{name:"getNTCIconClass",hash:{},data:i}))+" "},3:function(e,t,a,n,i){return" ntc-platform "},5:function(e,t,a,n,i){var l;return' <img class="nc-platform-image" src="'+e.escapeExpression(a.getExtensionSignalIconUrl.call(null!=t?t:{},null!=(l=null!=(l=null!=(l=null!=t?t.first_notification:t)?l.signal:l)?l.icon:l)?l.id:l,null!=(l=null!=(l=null!=(l=null!=t?t.first_notification:t)?l.signal:l)?l.icon:l)?l.sand_box_zgid:l,{name:"getExtensionSignalIconUrl",hash:{},data:i}))+'"></img> '},7:function(e,t,a,n,i){var l;return" "+(null!=(l=a.isSignalIframeOpen.call(null!=t?t:{},{name:"isSignalIframeOpen",hash:{},fn:e.program(8,i,0),inverse:e.program(10,i,0),data:i}))?l:"")+" "},8:function(e,t,a,n,i){var l;return' <img class="nc-platform-image" src="'+e.escapeExpression(a.getZohoUserCustomSignalIconUrl.call(null!=t?t:{},null!=(l=null!=(l=null!=t?t.first_notification:t)?l.signal:l)?l.icon:l,null!=(l=null!=(l=null!=t?t.first_notification:t)?l.signal:l)?l.id:l,{name:"getZohoUserCustomSignalIconUrl",hash:{},data:i}))+'"></img> '},10:function(e,t,a,n,i){var l;return' <img class="nc-platform-image lazy" src="" data-src="'+e.escapeExpression(a.getZohoUserCustomSignalIconUrl.call(null!=t?t:{},null!=(l=null!=(l=null!=t?t.first_notification:t)?l.signal:l)?l.icon:l,null!=(l=null!=(l=null!=t?t.first_notification:t)?l.signal:l)?l.id:l,{name:"getZohoUserCustomSignalIconUrl",hash:{},data:i}))+'"></img> '},12:function(e,t,a,n,i){var l,s=null!=t?t:{};return" "+(null!=(l=a.isSentimentAvailable.call(s,null!=t?t.first_notification:t,{name:"isSentimentAvailable",hash:{},fn:e.program(13,i,0),inverse:e.noop,data:i}))?l:"")+' <span class="ntcTxt ntcTxtShort f14 color_6 fL" onmouseover="zctt.showtt(\''+e.escapeExpression(a.encodeJS.call(s,a.getNTCTitleText.call(s,null!=(l=null!=(l=null!=t?t.first_notification:t)?l.signal:l)?l.namespace:l,null!=(l=null!=t?t.first_notification:t)?l.metadata:l,{name:"getNTCTitleText",hash:{},data:i}),{name:"encodeJS",hash:{},data:i}))+'\')" onmouseout="zctt.hidett()"> '},13:function(e,t,a,n,i){return" <span class='dIB vam "+e.escapeExpression(a.getSentimentIconClass.call(null!=t?t:{},null!=t?t.first_notification:t,{name:"getSentimentIconClass",hash:{},data:i}))+"'></span> "},15:function(e,t,a,n,i){var l;return" "+(null!=(l=a.isSentimentAvailable.call(null!=t?t:{},null!=t?t.first_notification:t,{name:"isSentimentAvailable",hash:{},fn:e.program(13,i,0),inverse:e.noop,data:i}))?l:"")+' <span class="ntcTxt ntcTxtShort f14 color_6 fL"> '},17:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression;return' <span class="vmore fR"> <span class="notC">'+r(s(null!=t?t.unseenCount:t,t))+'</span> </span> <span class="nc-rtime fR" data-signalTime="'+r(s(null!=(l=null!=(l=null!=t?t.first_notification:t)?l.date:l)?l.tooltip:l,t))+'" style="display:none"> '+r(s(null!=(l=null!=(l=null!=t?t.first_notification:t)?l.date:l)?l.display:l,t))+" </span> "},19:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression;return' <span class="nc-rtime fR" data-signalTime="'+r(s(null!=(l=null!=(l=null!=t?t.first_notification:t)?l.date:l)?l.tooltip:l,t))+'" style="display:block"> '+r(s(null!=(l=null!=(l=null!=t?t.first_notification:t)?l.date:l)?l.display:l,t))+" </span> "},21:function(e,t,a,n,i){var l,s=e.escapeExpression;return' <crm-competitor-mention-list data-zcqa="zComp_mentioned_tags_'+s(e.lambda(null!=(l=null!=(l=null!=t?t.first_notification:t)?l.metadata:l)?l.SUBJECT:l,t))+'" meta-data="'+s(a.ObjToString.call(null!=t?t:{},null!=(l=null!=t?t.first_notification:t)?l.metadata:l,{name:"ObjToString",hash:{},data:i}))+'" hide-data="true"></crm-competitor-mention-list> '},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression;return' <div class="min-innerNotifywrapped"> <ul width="100%" class="pL0 m0"> <li class="no-incomeList pL25 pB7 defaultcursor fontsmooth pR '+(null!=(l=a.isZohoExtensionSignal.call(s,null!=(l=null!=(l=null!=t?t.first_notification:t)?l.signal:l)?l.namespace:l,null!=(l=null!=(l=null!=t?t.first_notification:t)?l.signal:l)?l.type:l,{name:"isZohoExtensionSignal",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))?l:"")+'" data-notification-id="'+r(e.lambda(null!=(l=null!=t?t.first_notification:t)?l.id:l,t))+"\" onmouseover=\"sE(event);$(this).find('.callNow').css('visibility','visible');\" onmouseout=\"sE(event);$(this).find('.callNow').css('visibility','hidden');\"> "+(null!=(l=a.isPlatformExtensionSignal.call(s,null!=(l=null!=(l=null!=t?t.first_notification:t)?l.signal:l)?l.namespace:l,{name:"isPlatformExtensionSignal",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))?l:"")+" "+(null!=(l=a.isUserCustomExtension.call(s,null!=(l=null!=(l=null!=t?t.first_notification:t)?l.signal:l)?l.type:l,{name:"isUserCustomExtension",hash:{},fn:e.program(7,i,0),inverse:e.noop,data:i}))?l:"")+" "+(null!=(l=a.showTitleOnMouseover.call(s,null!=(l=null!=(l=null!=t?t.first_notification:t)?l.signal:l)?l.namespace:l,{name:"showTitleOnMouseover",hash:{},fn:e.program(12,i,0),inverse:e.program(15,i,0),data:i}))?l:"")+" "+r(a.getNTCText.call(s,null!=t?t.first_notification:t,null!=t?t.module:t,null!=t?t.entityId:t,{name:"getNTCText",hash:{},data:i}))+" </span> "+(null!=(l=a.ifGreaterOne.call(s,null!=t?t.unseenCount:t,{name:"ifGreaterOne",hash:{},fn:e.program(17,i,0),inverse:e.program(19,i,0),data:i}))?l:"")+' <div class="cB"></div> </li> '+(null!=(l=a.isCompetitorAlert.call(s,null!=t?t.first_notification:t,{name:"isCompetitorAlert",hash:{},fn:e.program(21,i,0),inverse:e.noop,data:i}))?l:"")+" </ul> </div> "},useData:!0})}();var crmNTCHelpers={name:""};Handlebars.registerHelper("getNTCIconClass",(function(e){return crmNTCGlobal.getNTCIconClass(e)})),Handlebars.registerHelper("getEntityUrl",(function(e,t){return Crm.getCrmBasePath()+"/tab/"+t+"/"+e})),Handlebars.registerHelper("noUnreadNotification",(function(e,t){for(var a=e.length,n=0;n<a;n++)if(!e[n].read)return t.inverse(this);return t.fn(this)})),Handlebars.registerHelper("getNTCText",(function(e){var t="[No Subject]";if(e.signal.namespace===crmNTC.MAIL_INCOMING||e.signal.namespace===crmNTC.MAIL_INCOMING_NEW||e.signal.namespace===crmNTC.MAIL_INCOMING_COMPETITORS_ALERT||e.signal.namespace===crmNTC.MAIL_INCOMING_COMPETITORS_ALERT_NEW){var a=Handlebars.Utils.escapeExpression(e.metadata.SUBJECT||"[No Subject]");t=I18n.getMsg("crm.ntc.txt.mail.new",[a])}else if(e.signal.namespace===crmNTC.SURVEY_RESPONDED||e.signal.namespace===crmNTC.SURVEY_RESPONDED_NEW){var n=Handlebars.Utils.escapeExpression(e.metadata.SURVEYTITLE);t=I18n.getMsg("crm.ntc.txt.survey.responded",[n])}else if(e.signal.namespace===crmNTC.SURVEY_VISITED||e.signal.namespace===crmNTC.SURVEY_VISITED_NEW){n=Handlebars.Utils.escapeExpression(e.metadata.SURVEYTITLE);t=I18n.getMsg("crm.ntc.txt.survey.visited",[n])}else if(e.signal.namespace===crmNTC.MAILTRACKING_OPEN||e.signal.namespace===crmNTC.MAILTRACKING_OPEN_NEW){a=Handlebars.Utils.escapeExpression(e.metadata.SUBJECT||"[No Subject]");t=I18n.getMsg("crm.ntc.txt.mailTracking.open",[a])}else if(e.signal.namespace===crmNTC.MAILTRACKING_CLICK||e.signal.namespace===crmNTC.MAILTRACKING_CLICK_NEW){a=Handlebars.Utils.escapeExpression(e.metadata.SUBJECT||"[No Subject]");t=I18n.getMsg("crm.ntc.txt.mailTracking.click",[a])}else if(e.signal.namespace===crmNTC.MAILTRACKING_BOUNCE||e.signal.namespace===crmNTC.MAILTRACKING_BOUNCE_NEW){a=Handlebars.Utils.escapeExpression(e.metadata.SUBJECT||"[No Subject]");t=I18n.getMsg("crm.ntc.txt.mailTracking.bounce",[a])}else if(e.signal.namespace===crmNTC.CAMPAIGN_OPEN||e.signal.namespace===crmNTC.CAMPAIGN_OPEN_NEW){var i=Handlebars.Utils.escapeExpression(e.metadata.CAMPAIGNNAME);t=I18n.getMsg("crm.ntc.txt.campaign.open",[i])}else if(e.signal.namespace===crmNTC.CAMPAIGN_CLICK||e.signal.namespace===crmNTC.CAMPAIGN_CLICK_NEW){i=Handlebars.Utils.escapeExpression(e.metadata.CAMPAIGNNAME);t=I18n.getMsg("crm.ntc.txt.campaign.click",[i])}else if(e.signal.namespace===crmNTC.CAMPAIGN_BOUNCE||e.signal.namespace===crmNTC.CAMPAIGN_BOUNCE_NEW){i=Handlebars.Utils.escapeExpression(e.metadata.CAMPAIGNNAME);t=I18n.getMsg("crm.ntc.txt.campaign.bounce",[i])}else if(e.signal.namespace===crmNTC.CAMPAIGN_SOFT_BOUNCE||e.signal.namespace===crmNTC.CAMPAIGN_SOFT_BOUNCE_NEW){i=Handlebars.Utils.escapeExpression(e.metadata.CAMPAIGNNAME);t=I18n.getMsg("crm.ntc.txt.campaign.soft.bounce",[i])}else if(e.signal.namespace===crmNTC.CALL_MISSED||e.signal.namespace===crmNTC.CALL_MISSED_NEW){var l=Handlebars.Utils.escapeExpression(e.metadata.CUSTNUMBER);t=I18n.getMsg("crm.ntc.txt.call.missed",[l])}else if(e.signal.namespace===crmNTC.SALESIQ_CHAT_MISSED||e.signal.namespace===crmNTC.SALESIQ_CHAT_MISSED_NEW){var s=Handlebars.Utils.escapeExpression(e.metadata.chatContent);t=I18n.getMsg("crm.ntc.txt.chat.missed",[s])}else if(-1!=crmNTC.SUPPORT_NEW_TICKET_TYPES.indexOf(e.signal.namespace)){var r=e.metadata.ticketNo?Handlebars.Utils.escapeExpression("#"+e.metadata.ticketNo):Handlebars.Utils.escapeExpression(e.metadata.subject);t=I18n.getMsg("crm.ntc.txt.support.newTicket",[r])}else if(e.signal.namespace===crmNTC.SUPPORT_NEW_RATING||e.signal.namespace===crmNTC.SUPPORT_NEW_RATING_NEW){r=e.metadata.ticketNo?Handlebars.Utils.escapeExpression("#"+e.metadata.ticketNo):Handlebars.Utils.escapeExpression(e.metadata.subject);t=I18n.getMsg("crm.ntc.txt.support.newRating",[r])}else if(e.signal.namespace===crmNTC.SUPPORT_TICKET_OVERDUE||e.signal.namespace===crmNTC.SUPPORT_TICKET_OVERDUE_NEW){r=e.metadata.ticketNo?Handlebars.Utils.escapeExpression("#"+e.metadata.ticketNo):Handlebars.Utils.escapeExpression(e.metadata.subject);t=I18n.getMsg("crm.ntc.txt.support.overdue",[r])}else if(e.signal.namespace===crmNTC.SUPPORT_TICKET_ESCALATED||e.signal.namespace===crmNTC.SUPPORT_TICKET_ESCALATED_NEW){r=e.metadata.ticketNo?Handlebars.Utils.escapeExpression("#"+e.metadata.ticketNo):Handlebars.Utils.escapeExpression(e.metadata.subject);t=I18n.getMsg("crm.ntc.txt.support.escalated",[r])}else if(-1!=crmNTC.SUPPORT_NEW_COMMENT_TYPES.indexOf(e.signal.namespace)){r=e.metadata.ticketNo?Handlebars.Utils.escapeExpression("#"+e.metadata.ticketNo):Handlebars.Utils.escapeExpression(e.metadata.subject);t="zoho.support.newcomment.mention"===e.signal.namespace?I18n.getMsg("crm.ntc.txt.support.newMention",[r]):I18n.getMsg("crm.ntc.txt.support.newComment",[r])}else if(-1!=crmNTC.SUPPORT_NEW_RESPONSE_TYPES.indexOf(e.signal.namespace)){r=e.metadata.ticketNo?Handlebars.Utils.escapeExpression("#"+e.metadata.ticketNo):Handlebars.Utils.escapeExpression(e.metadata.subject);t=I18n.getMsg("crm.ntc.txt.support.newResponse",[r])}else if(e.signal.namespace===crmNTC.SOCIAL_FB_NEW_POST||e.signal.namespace===crmNTC.SOCIAL_FB_NEW_POST_NEW){var o=Handlebars.Utils.escapeExpression(e.metadata.message);t=I18n.getMsg("crm.ntc.txt.fb.post",[o])}else if(e.signal.namespace===crmNTC.SOCIAL_FB_NEW_COMMENT||e.signal.namespace===crmNTC.SOCIAL_FB_NEW_COMMENT_NEW){var c=Handlebars.Utils.escapeExpression(e.metadata.message);t=I18n.getMsg("crm.ntc.txt.fb.comment",[c])}else if(e.signal.namespace===crmNTC.SOCIAL_FB_NEW_LIKE||e.signal.namespace===crmNTC.SOCIAL_FB_NEW_LIKE_NEW)t=I18n.getMsg("crm.ntc.txt.fb.like");else if(e.signal.namespace===crmNTC.SOCIAL_FB_DM||e.signal.namespace===crmNTC.SOCIAL_FB_DM_NEW)t=I18n.getMsg("crm.ntc.txt.fb.dm",[]);else if(e.signal.namespace===crmNTC.SOCIAL_TW_MENTION||e.signal.namespace===crmNTC.SOCIAL_TW_MENTION_NEW){var d=Handlebars.Utils.escapeExpression(e.metadata.message);t=I18n.getMsg("crm.ntc.txt.twitter.mention",[d])}else if(e.signal.namespace===crmNTC.SOCIAL_TW_REPLY||e.signal.namespace===crmNTC.SOCIAL_TW_REPLY_NEW){var m=Handlebars.Utils.escapeExpression(e.metadata.message);t=I18n.getMsg("crm.ntc.txt.twitter.reply",[m])}else if(e.signal.namespace===crmNTC.SOCIAL_TW_DM||e.signal.namespace===crmNTC.SOCIAL_TW_DM_NEW)t=I18n.getMsg("crm.ntc.txt.twitter.dm",[]);else if(e.signal.namespace===crmNTC.PLATFORM_EXTENSION_SIGNAL)t=Handlebars.Utils.escapeExpression(e.metadata.subject);else if(e.signal.namespace===crmNTC.MESSAGE_NEWMESSAGE){o=decodeURIComponent(e.metadata.message.replace(/\+/g,"%20"));o=Handlebars.Utils.escapeExpression(o),t=I18n.getMsg("crm.ntc.txt.message.newmessage",[o])}else t=e.signal.namespace===crmNTC.MESSAGE_READ?I18n.getMsg("crm.ntc.txt.message.read"):e.signal.namespace===crmNTC.SUPPORT_TICKET_PRIORITY_CHANGE||e.signal.namespace===crmNTC.SUPPORT_TICKET_PRIORITY_CHANGE_NEW?I18n.getMsg("crm.tasks.priority")+" "+I18n.getMsg("crm.button.change"):e.signal.namespace===crmNTC.SUPPORT_TICKET_STATUS_CHANGE||e.signal.namespace===crmNTC.SUPPORT_TICKET_STATUS_CHANGE_NEW?I18n.getMsg("crm.tasks.status")+" "+I18n.getMsg("crm.button.change"):e.signal.namespace===crmNTC.SUPPORT_NEW_COMMENT_SUPPORT_REP||e.signal.namespace===crmNTC.SUPPORT_NEW_COMMENT_SUPPORT_REP_NEW?I18n.getMsg("crm.signal.support.new.comment.text"):Handlebars.Utils.escapeExpression(e.signal.display_label)+" - "+Handlebars.Utils.escapeExpression(e.metadata.subject);return new Handlebars.SafeString(t)})),Handlebars.registerHelper("getSignalHeading",(function(e){var t="[No Heading]",a=e.signal.namespace;if(a===crmNTC.MAIL_INCOMING||a===crmNTC.MAIL_INCOMING_NEW)t=I18n.getMsg("crm.signal.incoming.heading.text");else if(a===crmNTC.MAILTRACKING_OPEN||a===crmNTC.MAILTRACKING_OPEN_NEW)t=I18n.getMsg("crm.signal.mailtracking.open.text");else if(a===crmNTC.MAILTRACKING_CLICK||a===crmNTC.MAILTRACKING_CLICK_NEW)t=I18n.getMsg("crm.signal.mailtracking.click.text");else if(a===crmNTC.MAILTRACKING_BOUNCE||a===crmNTC.MAILTRACKING_BOUNCE_NEW)t=I18n.getMsg("crm.signal.mailtracking.bounce.text");else if(a===crmNTC.SURVEY_RESPONDED||a===crmNTC.SURVEY_RESPONDED_NEW)t=I18n.getMsg("crm.signal.survey.responded.text");else if(a===crmNTC.SURVEY_VISITED||a===crmNTC.SURVEY_VISITED_NEW)t=I18n.getMsg("crm.signal.survey.visited.text");else if(a===crmNTC.CAMPAIGN_OPEN||a===crmNTC.CAMPAIGN_OPEN_NEW)t=I18n.getMsg("crm.signal.campaign.open.text");else if(a===crmNTC.CAMPAIGN_CLICK||a===crmNTC.CAMPAIGN_CLICK_NEW)t=I18n.getMsg("crm.signal.campaign.click.text");else if(a===crmNTC.CAMPAIGN_BOUNCE||a===crmNTC.CAMPAIGN_BOUNCE_NEW)t=I18n.getMsg("crm.signal.campaign.bounce.text");else if(a===crmNTC.CAMPAIGN_SOFT_BOUNCE||a===crmNTC.CAMPAIGN_SOFT_BOUNCE_NEW)t=I18n.getMsg("crm.signal.campaign.soft.bounce.text");else if(a===crmNTC.CALL_MISSED||a===crmNTC.CALL_MISSED_NEW)t=I18n.getMsg("crm.signal.telephony.missed.call.text");else if(a===crmNTC.SALESIQ_CHAT_MISSED||a===crmNTC.SALESIQ_CHAT_MISSED_NEW)t=I18n.getMsg("crm.signal.salesiq.missed.chat.text");else if(a===crmNTC.SOCIAL_FB_NEW_POST||a===crmNTC.SOCIAL_FB_NEW_POST_NEW)t=e.metadata.page_name?I18n.getMsg("crm.signal.social.fb.new.post.text",[e.metadata.page_name]):I18n.getMsg("crm.signal.social.fb.new.post.no.pagename.text");else if(a===crmNTC.SOCIAL_FB_NEW_COMMENT||a===crmNTC.SOCIAL_FB_NEW_COMMENT_NEW)t=e.metadata.page_name?I18n.getMsg("crm.signal.social.fb.new.comment.text",[e.metadata.page_name]):I18n.getMsg("crm.signal.social.fb.new.comment.no.pagename.text");else if(a===crmNTC.SOCIAL_FB_DM||a===crmNTC.SOCIAL_FB_DM_NEW)t=I18n.getMsg("crm.signal.social.fb.conversation.text");else if(a===crmNTC.SOCIAL_FB_NEW_LIKE||a===crmNTC.SOCIAL_FB_NEW_LIKE_NEW)t=I18n.getMsg("crm.signal.social.fb.like.text",[e.metadata.page_name]);else if(a===crmNTC.SOCIAL_TW_MENTION||a===crmNTC.SOCIAL_TW_MENTION_NEW)t=I18n.getMsg("crm.signal.social.tw.mention.text");else if(a===crmNTC.SOCIAL_TW_REPLY)t=I18n.getMsg("crm.signal.social.tw.reply.text");else if(a===crmNTC.SOCIAL_TW_DM)t=I18n.getMsg("crm.signal.social.tw.dm.text");else if(-1!=crmNTC.SUPPORT_NEW_TICKET_TYPES.indexOf(e.signal.namespace))t=I18n.getMsg("crm.signal.support.new.ticket.text");else if(-1!=crmNTC.SUPPORT_NEW_COMMENT_TYPES.indexOf(e.signal.namespace))if(a===crmNTC.SUPPORT_NEW_COMMENT_MENTION||a===crmNTC.SUPPORT_NEW_COMMENT_MENTION_NEW)t=t=(t=I18n.getMsg("crm.signal.social.tw.mention.text")).replace(I18n.getMsg("crm.nsocial.title.twitter"),I18n.getMsg("crm.signal.support.rating.text").split("-")[0].trim());else{var n=e.metadata.isEscalated,i=e.metadata.isOverdueTicket;t=void 0!==n&&"true"===n?I18n.getMsg("crm.signal.support.new.comment.escalated.text"):void 0!==i&&"true"===i?I18n.getMsg("crm.signal.support.new.comment.overdue.text"):I18n.getMsg("crm.signal.support.new.comment.text")}else if(-1!=crmNTC.SUPPORT_NEW_RESPONSE_TYPES.indexOf(e.signal.namespace)){n=e.metadata.isEscalated,i=e.metadata.isOverdueTicket;t=void 0!==n&&"true"===n?I18n.getMsg("crm.signal.support.new.response.escalated.text"):void 0!==i&&"true"===i?I18n.getMsg("crm.signal.support.new.response.overdue.text"):I18n.getMsg("crm.signal.support.new.response.text")}else if(a===crmNTC.SUPPORT_NEW_RATING||a===crmNTC.SUPPORT_NEW_RATING_NEW)t=I18n.getMsg("crm.signal.support.rating.text");else if(a===crmNTC.SUPPORT_TICKET_OVERDUE||a===crmNTC.SUPPORT_TICKET_OVERDUE_NEW)if(void 0!==e.metadata.overdueInfo){var l=e.metadata.overdueInfo.DATEFORDISPLAY;t=I18n.getMsg("crm.signal.support.ticket.overdue.by.text",[l])}else t=I18n.getMsg("crm.signal.support.ticket.overdue.text");else t=a===crmNTC.SUPPORT_TICKET_ESCALATED||a===crmNTC.SUPPORT_TICKET_ESCALATED_NEW?I18n.getMsg("crm.signal.support.ticket.escalated.text"):a===crmNTC.SUPPORT_TICKET_PRIORITY_CHANGE||a===crmNTC.SUPPORT_TICKET_PRIORITY_CHANGE_NEW?I18n.getMsg("crm.signal.support.ticket.status.change.text"):a===crmNTC.PLATFORM_EXTENSION_SIGNAL?I18n.getMsg(e.signal.extension.display_label)+" - "+I18n.getMsg(e.signal.display_label):a===crmNTC.MESSAGE_NEWMESSAGE||a===crmNTC.MESSAGE_READ?Handlebars.Utils.escapeExpression(e.metadata.channel_name+" - "+e.signal.display_label):a===crmNTC.SUPPORT_TICKET_PRIORITY_CHANGE||a===crmNTC.SUPPORT_TICKET_PRIORITY_CHANGE_NEW?I18n.getMsg("crm.tasks.priority")+" "+I18n.getMsg("crm.button.change"):a===crmNTC.SUPPORT_TICKET_STATUS_CHANGE||a===crmNTC.SUPPORT_TICKET_STATUS_CHANGE_NEW?I18n.getMsg("crm.tasks.status")+" "+I18n.getMsg("crm.button.change"):a===crmNTC.SUPPORT_NEW_COMMENT_SUPPORT_REP||a===crmNTC.SUPPORT_NEW_COMMENT_SUPPORT_REP_NEW?t=I18n.getMsg("crm.signal.support.new.comment.text"):I18n.getMsg(e.signal.extension.display_label)+" - "+I18n.getMsg(e.signal.display_label);return new Handlebars.SafeString(t)})),Handlebars.registerHelper("getNTCTypeText",(function(e,t){return e===crmNTC.ZOHO_EXTENSION_TYPE?I18n.getMsg(t,[]):t})),Handlebars.registerHelper("getRandomGradient",(function(){var e=["0px 0px","-34px 0px","-67px 0px","-101px 0px","-133px 0px","0px -36px","-35px -36px","-67px -36px","-101px -36px","-134px -36px"];return e[Math.floor(Math.random()*e.length)]})),Handlebars.registerHelper("getFirstChar",(function(e){return e?e.charAt(0):""})),Handlebars.registerHelper("ifGreaterOne",(function(e,t){return e>1?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("ifArrayContains",(function(e,t,a){return e&&t&&-1!=e.indexOf(t)?a.fn():a.inverse()})),Handlebars.registerHelper("ifSelected",(function(e,t,a){return e&&void 0!==t&&t<e.length&&1==e[t]?a.fn():a.inverse()})),Handlebars.registerHelper("getArrayElementByIndex",(function(e,t){return e&&void 0!==t&&t<e.length?e[t]:null})),Handlebars.registerHelper("renderFirstNotification",(function(e,t,a){for(var n=!0,i=0,l=e.length;i<l;i++)if(e[i].read){n=!1;break}return Handlebars.templates.wrappedNotification({first_notification:e[0],unseen_notifications:e,unseen_count:e.length,module:t,entityId:a,noUnreadSignals:n,unseenCount:i})})),Handlebars.registerHelper("renderSingleNotification",(function(e,t,a,n){return Handlebars.templates.singleNotification({index:e,notificationObj:t,module:a,entityId:n})})),Handlebars.registerHelper("renderNTCTopLevelSettings",(function(e,t,a,n,i,l,s){var r=!1;if(s){for(var o=(s=JSON.parse(s)).length,c=0;c<o;c++)if(-1!=l.indexOf(s[c])){r=!0;break}}else r=-1!=l.indexOf(n);return Handlebars.templates.topLevelSettings({setting_name:e,setting_label:I18n.getMsg(t),setting_id:a,notification_type:n,is_configured:i,enabled:r})})),Handlebars.registerHelper("renderNTCSubSetting",(function(e,t,a,n){return Handlebars.templates.subSettings({signalSettingObj:e,extensionid:t,is_integ_configured:a,extensionObj:n})})),Handlebars.registerHelper("renderNTCSecondaryLevelSettings",(function(e,t,a,n){return Handlebars.templates.secondaryLevelSettings({signalSettingObj:e,extensionid:t,is_integ_configured:a,extensionObj:n})})),Handlebars.registerHelper("renderNTCChatSetting",(function(e,t,a,n,i){var l={};return l.chatType=i,0==i?(l.labelSuffix="_CliqCB",l.classlabel="NTCCliqCB",l.isChecked=crmNTCSettings.getSignalStatusForChannel(e.notify_via,"cliq")):1==i?(l.labelSuffix="_SlackCB",l.classlabel="NTCSlackCB",l.isChecked=crmNTCSettings.getSignalStatusForChannel(e.notify_via,"slack")):2==i&&(l.labelSuffix="_CiscoCB",l.classlabel="NTCCiscoCB",l.isChecked=crmNTCSettings.getSignalStatusForChannel(e.notify_via,"cisco")),Handlebars.templates.ntcChatConfig({signalSettingObj:e,extensionid:t,is_integ_configured:a,extensionObj:n,chatObj:l})})),Handlebars.registerHelper("renderNTCSecondryLevelChatSetting",(function(e,t,a,n,i){var l={};return l.chatType=i,0==i?(l.labelSuffix="_CliqCB",l.classlabel="NTCCliqCB",l.isChecked=crmNTCSettings.getSignalStatusForChannel(e.notify_via,"cliq")):1==i?(l.labelSuffix="_SlackCB",l.classlabel="NTCSlackCB",l.isChecked=crmNTCSettings.getSignalStatusForChannel(e.notify_via,"slack")):(2==i||2==i)&&(l.labelSuffix="_CiscoCB",l.classlabel="NTCCiscoCB",l.isChecked=crmNTCSettings.getSignalStatusForChannel(e.notify_via,"cisco")),Handlebars.templates.ntcChatSecondaryLevelSettings({signalSettingObj:e,extensionid:t,is_integ_configured:a,extensionObj:n,chatObj:l})})),Handlebars.registerHelper("renderTeamsForSS",(function(e,t){var a=!1;return null!=t&&(a=!0),Handlebars.templates.PopulateTeams({teams:e,teamexist:a,selectedteam:t})})),Handlebars.registerHelper("campaginClicksTT",(function(e){for(var t=crmNTC.getNTCFullDateTime(e[0]),a=e.length,n=1;n<a;n++)t+=" <br> "+crmNTC.getNTCFullDateTime(e[n]);return t})),Handlebars.registerHelper("ntcDateFormat",(function(e){if(e){e=e.replace(" ","T");var t=new Date(e),a=new Date;return t.getFullYear()!=a.getFullYear()?$.datepicker.formatDate("M d, yy",t):t.getDate()!=a.getDate()||t.getMonth()!=a.getMonth()?$.datepicker.formatDate("M d",t):Utils.getTimeInUserFormat(t,!0)}})),Handlebars.registerHelper("ntcFullDateTime",(function(e){return crmNTC.getNTCFullDateTime(e)})),Handlebars.registerHelper("getNotificationIds",(function(e){return e.map((function(e){return e.NOTIFICATIONID}))})),Handlebars.registerHelper("ifObj",(function(e,t){if(null!==e)return"object"==typeof e?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("ifEntityOnline",(function(e,t,a){return crmNTCGlobal.isEntityOnline(e,t)?a.fn(this):a.inverse(this)})),Handlebars.registerHelper("isCompetitorAlert",(function(e,t){return e&&e.signal&&(e.signal.namespace===crmNTC.MAIL_INCOMING_COMPETITORS_ALERT||e.signal.namespace===crmNTC.MAIL_INCOMING_COMPETITORS_ALERT_NEW)?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("showCompetitorAlertTag",(function(e,t){return e[0].signal.namespace===crmNTC.MAIL_INCOMING_COMPETITORS_ALERT_NEW||e.filter((function(e){return e.signal.namespace===crmNTC.MAIL_INCOMING_COMPETITORS_ALERT_NEW&&!e.read})).length>0?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("getChatLink",(function(e,t){return crmNTCGlobal.getChatLink(e,t)})),Handlebars.registerHelper("ifNotEmptyObj",(function(e,t){return $.isEmptyObject(e)?t.inverse(this):t.fn(this)})),Handlebars.registerHelper("ifAllTruthy",(function(){for(var e=arguments.length-1,t=0;t<=e-1;t++)if(!arguments[t])return arguments[e].inverse(this);return arguments[e].fn(this)})),Handlebars.registerHelper("ntcSocialEnabled",(function(){return Crm.userDetails.NTC_SOCIAL_ENABLED?arguments[arguments.length-1].fn(this):arguments[arguments.length-1].inverse(this)})),Handlebars.registerHelper("numeric",(function(e){return e||0})),Handlebars.registerHelper("getIntegrationSetupLink",(function(e){var t="";return e==crmNTC.EXT_EMAILTRACKING||e==crmNTC.EXT_EMAILTRACKING_NEW?t=Crm.getCrmBasePath()+"/settings/email-settings?action=mailSelect":e==crmNTC.EXT_SURVEY||e==crmNTC.EXT_SURVEY_NEW?t=Crm.getCrmBasePath()+"/settings/extensions/zoho/survey":e==crmNTC.EXT_TELEPHONY||e==crmNTC.EXT_TELEPHONY_NEW?t=Crm.getCrmBasePath()+"/settings/telephony":e==crmNTC.EXT_CAMPAIGNS||e==crmNTC.EXT_CAMPAIGNS_NEW?t=Crm.isVertical?Crm.getCrmBasePath()+"/ShowSetup.do?tab=webInteg&subTab=zohoApps":Crm.getCrmBasePath()+"/settings/extensions/zoho/campaigns":e==crmNTC.EXT_SALESIQ||e==crmNTC.EXT_SALESIQ_NEW?t=Crm.getCrmBasePath()+"/settings/extensions/zoho/visit":e==crmNTC.EXT_TWITTER||e==crmNTC.EXT_TWITTER_NEW||e==crmNTC.EXT_FACEBOOK||e==crmNTC.EXT_FACEBOOK_NEW?t=Crm.getCrmBasePath()+"/settings/extensions/social":e==crmNTC.EXT_SUPPORT||e==crmNTC.EXT_SUPPORT_NEW?t=Crm.getCrmBasePath()+"/settings/extensions/zoho/desk":e===crmNTC.EXT_BACKSTAGE||e===crmNTC.EXT_BACKSTAGE_NEW?t=Crm.getCrmBasePath()+"/settings/extensions/zoho/backstage":e===crmNTC.EXT_WEBINAR||e===crmNTC.EXT_WEBINAR_NEW?t=Crm.getCrmBasePath()+"/settings/extensions/zoho/webinar":e===crmNTC.EXT_MESSAGE&&(t=Crm.getCrmBasePath()+"/settings/messages"),new Handlebars.SafeString(t)})),Handlebars.registerHelper("getSubjectForCampaign",(function(e,t){return e||(t||"[No Subject]")})),Handlebars.registerHelper("getSubject",(function(e,t){return void 0!==e&&""!==e?Handlebars.Utils.escapeExpression(e):void 0!==t&&""!==t?Handlebars.Utils.escapeExpression(t):"[No Subject]"})),Handlebars.registerHelper("getNTCTitleText",(function(e,t){var a="[No Subject]";return-1!=crmNTC.EMAIL_TYPES.indexOf(e)?a=t.SUBJECT:-1!=crmNTC.CAMPAIGN_TYPES.indexOf(e)?a=void 0!==t.CAMPAIGNSUBJECT&&""!==t.CAMPAIGNSUBJECT?t.CAMPAIGNSUBJECT:t.CAMPAIGNNAME:-1!=crmNTC.SUPPORT_TYPES.indexOf(e)?a=t.subject:crmNTC.SURVEY_RESPONDED===e||crmNTC.SURVEY_RESPONDED_NEW===e?a=t.SURVEYTITLE:crmNTC.SALESIQ_CHAT_MISSED!==e&&crmNTC.SALESIQ_CHAT_MISSED_NEW!==e||(a=t.chatContent),Handlebars.Utils.escapeExpression(a)})),Handlebars.registerHelper("showTitleOnMouseover",(function(e,t){return-1!=crmNTC.EMAIL_TYPES.indexOf(e)||-1!=crmNTC.CAMPAIGN_TYPES.indexOf(e)||-1!=crmNTC.SUPPORT_TYPES.indexOf(e)||crmNTC.SURVEY_RESPONDED===e||crmNTC.SALESIQ_CHAT_MISSED===e||crmNTC.SURVEY_RESPONDED_NEW===e||crmNTC.SALESIQ_CHAT_MISSED_NEW===e?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("showRating",(function(e,t){return e===crmNTC.SUPPORT_NEW_RATING?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("showEscalationLevel",(function(e,t){return e===crmNTC.SUPPORT_TICKET_ESCALATED||e===crmNTC.SUPPORT_TICKET_ESCALATED_NEW?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("showViewRequestLink",(function(e,t){return-1!=crmNTC.SUPPORT_NEW_TICKET_TYPES.indexOf(e)||e===crmNTC.SUPPORT_NEW_RATING||e===crmNTC.SUPPORT_TICKET_ESCALATED||e===crmNTC.SUPPORT_TICKET_OVERDUE||e===crmNTC.SUPPORT_NEW_RATING_NEW||e===crmNTC.SUPPORT_TICKET_ESCALATED_NEW||e===crmNTC.SUPPORT_TICKET_OVERDUE_NEW||e===crmNTC.SUPPORT_TICKET_STATUS_CHANGE||e===crmNTC.SUPPORT_TICKET_PRIORITY_CHANGE||crmNTC.SUPPORT_NEW_COMMENT_SUPPORT_REP||e===crmNTC.SUPPORT_TICKET_STATUS_CHANGE_NEW||e===crmNTC.SUPPORT_TICKET_PRIORITY_CHANGE_NEW||crmNTC.SUPPORT_NEW_COMMENT_SUPPORT_REP_NEW?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("showViewResponseLink",(function(e,t){return-1!=crmNTC.SUPPORT_NEW_RESPONSE_TYPES.indexOf(e)?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("showViewCommentLink",(function(e,t){return-1!=crmNTC.SUPPORT_NEW_COMMENT_TYPES.indexOf(e)||e===crmNTC.SOCIAL_FB_NEW_COMMENT||e===crmNTC.SOCIAL_FB_NEW_COMMENT_NEW?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("showViewPostLink",(function(e,t){return e===crmNTC.SOCIAL_FB_NEW_POST||e===crmNTC.SOCIAL_FB_NEW_POST_NEW?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("showViewConvLink",(function(e,t){return e===crmNTC.SOCIAL_FB_DM||e===crmNTC.SOCIAL_FB_DM_NEW?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("showViewReplyLink",(function(e){return e===crmNTC.SOCIAL_TW_REPLY||e===crmNTC.SOCIAL_TW_REPLY_NEW?arguments[arguments.length-1].fn(this):arguments[arguments.length-1].inverse(this)})),Handlebars.registerHelper("showViewTweetLink",(function(e,t){return e===crmNTC.SOCIAL_TW_MENTION||e===crmNTC.SOCIAL_TW_MENTION_NEW?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("showViewMessageLink",(function(e,t){return e===crmNTC.SOCIAL_TW_DM||e===crmNTC.SOCIAL_TW_DM_NEW?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("showViewPostLinkForLike",(function(e,t){return e===crmNTC.SOCIAL_FB_NEW_LIKE||e===crmNTC.SOCIAL_FB_NEW_LIKE_NEW?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("showViewBMConvLink",(function(e,t){return e===crmNTC.MESSAGE_NEWMESSAGE||e===crmNTC.MESSAGE_READ?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("removeMailContent",(function(e){var t=JSON.stringify(e),a=JSON.parse(t);return void 0!==a.METADATA.mailContent&&delete a.METADATA.mailContent,JSON.stringify(a)})),Handlebars.registerHelper("getSocialParams",(function(e){var t=crmNTCDetailView.getDetailViewSocialParams(e);return JSON.stringify(t)})),Handlebars.registerHelper("showCommentDesc",(function(e,t,a){return-1!==crmNTC.SUPPORT_NEW_COMMENT_TYPES.indexOf(e)&&validationUtils.isNotEmpty(t)?a.fn(this):a.inverse(this)})),Handlebars.registerHelper("isNotValidAccount",(function(e,t,a,n){return"Leads"===e&&validationUtils.isEmpty(t)||"Contacts"===e&&validationUtils.isEmpty(a)?n.fn(this):n.inverse(this)})),Handlebars.registerHelper("getViewEmailContentLink",(function(e,t){var a=t.metadata,n=t.signal.namespace,i=a.MID,l=Crm.userDetails.USER_ID,s=t.module.api_name,r=t.record.id,o="Sent",c="ALLUSERSMAILS";return n!==crmNTC.MAIL_INCOMING&&n!==crmNTC.MAIL_INCOMING_NEW&&n!==crmNTC.MAIL_INCOMING_COMPETITORS_ALERT&&n!==crmNTC.MAIL_INCOMING_COMPETITORS_ALERT_NEW||(o="Received",c=a.mailType),"viewMailForSignal('"+i+"','"+l+"','"+s+"','"+r+"','"+c+"','"+o+"','"+e.entityEmail+"',true)"})),Handlebars.registerHelper("isNotificationSupported",(function(e,t,a){return e&crmNTC.FEATURES.SALES_SIGNALS?a.fn(this):a.inverse(this)})),Handlebars.registerHelper("isChatNotificationSupported",(function(e,t){return e&crmNTC.FEATURES.NOTIFY_VIA_CHAT?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("showDetailViewLink",(function(e,t,a,n){return e===crmNTC.PLATFORM_EXTENSION_SIGNAL&&t&&1==t.length||a===crmNTC.ZOHO_USER_EXTENSION_TYPE&&t&&1==t.length||-1===crmNTC.predefinedSignals.indexOf(e)&&t&&1==t.length?n.fn(this):n.inverse(this)})),Handlebars.registerHelper("isZohoExtensionSignal",(function(e,t){return e!==crmNTC.PLATFORM_EXTENSION_SIGNAL&&t!==crmNTC.ZOHO_USER_EXTENSION_TYPE?arguments[arguments.length-1].fn(this):arguments[arguments.length-1].inverse(this)})),Handlebars.registerHelper("isPlatformExtensionSignal",(function(e,t){return e===crmNTC.PLATFORM_EXTENSION_SIGNAL?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("getModuleSingularLabel",(function(e){return Crm.userDetails.MODULE_LIST[e].singular_label})),Handlebars.registerHelper("getModuleSingularLabelForIFrame",(function(e){var t=JSON.parse(JSON.stringify({Leads:"Lead",Contacts:"Contact"}));return t.hasOwnProperty(e)?t[e]:""})),Handlebars.registerHelper("isEmailNotificationType",(function(e,t){return-1!=crmNTC.EMAIL_TYPES.indexOf(e)?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("isAllSignalsDisabled",(function(e,t){for(var a=e.length,n=0;n<a;n++)if(1==e[n].is_enabled)return t.inverse(this);return t.fn(this)})),Handlebars.registerHelper("getSignalHelpText",(function(e){return crmNTCSettings.signalsInfo[e][0]})),Handlebars.registerHelper("getSignalHelpUrl",(function(e){return crmNTCSettings.signalsInfo[e][1]})),Handlebars.registerHelper("signalHelpDocStatus",(function(e,t){return crmNTCSettings.signalsInfo[e][2]?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("ifExtensionHelpContentExists",(function(e,t){return e in crmNTCSettings.signalsInfo?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("getActionUrl",(function(e){if(e&&e.metadata&&e.metadata.actions&&e.metadata.actions[0]&&e.metadata.actions[0].url)return e.signal&&e.signal.type&&e.signal.type===crmNTC.ZOHO_EXTENSION_TYPE?Crm.getCrmBasePath()+e.metadata.actions[0].url:e.metadata.actions[0].url})),Handlebars.registerHelper("getActionDispName",(function(e){return e[0].display_name})),Handlebars.registerHelper("getExtensionSignalIconUrl",(function(e,t){return e&&t?"/crm/viewImage?fileId="+e+"&zgId="+Crm.currentZgid:networkUtils.getImageUrl("nophoto_80ea3af_.png",ResourceConstants.CRM)})),Handlebars.registerHelper("getOpenTypeForNotification",(function(e,t){return"tab"===e[0].open_in?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("addHTMLTags",(function(e,t,a,n){for(var i=!0;e.includes(t)&&i;)(i=e.substr(e.indexOf(t)+1,e.length).includes(t))&&(e=(e=e.replace(t,a)).replace(t,n));return e})),Handlebars.registerHelper("formatHTML",(function(e){if(!e)return"";for(var t=Handlebars.helpers.safeEncodeHTML(e).split("~br~"),a="",n=t.length,i=0;i<n;i++)t[i]=Handlebars.helpers.addHTMLTags(t[i],"*","<b>","</b>"),t[i]=Handlebars.helpers.addHTMLTags(t[i],"^","<i>","</i>"),a=a+t[i]+(0!=n?" <br/> ":"");return a})),Handlebars.registerHelper("getProductName",(function(e){return I18n.getMsg(e,[Crm.partnerName])})),Handlebars.registerHelper("getSentimentIconClass",(function(e){return e.metadata.hasOwnProperty("SENTIMENT")&&"Positive"===e.metadata.SENTIMENT?"sentimentPositive":e.metadata.hasOwnProperty("SENTIMENT")&&"Negative"===e.metadata.SENTIMENT?"sentimentNegative":e.metadata.hasOwnProperty("SENTIMENT")&&"Neutral"===e.metadata.SENTIMENT?"sentimentNeutral":e.metadata.hasOwnProperty("SENTIMENT")&&"CNS"===e.metadata.SENTIMENT?"sentimentCNSafter h20 pL30":""})),Handlebars.registerHelper("isSentimentAvailable",(function(e,t){return e.metadata.hasOwnProperty("SENTIMENT")&&("Positive"===e.metadata.SENTIMENT||"Negative"===e.metadata.SENTIMENT||"Neutral"===e.metadata.SENTIMENT)||"CNS"===e.metadata.SENTIMENT?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("isSignalIframeOpen",(function(e){return SalesSignalsWrapper.isSignalIFrameOpen?e.fn(this):e.inverse(this)})),Handlebars.registerHelper("ifNotificationUnread",(function(e,t){return 0==e.ISSEEN?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("getUnseenNotificationsCount",(function(e){for(var t=0,a=e.length;t<a&&!e[t].ISSEEN;t++);return t})),Handlebars.registerHelper("getHelpUrlForSignalsIFrame",(function(){var e=window.location.host.split("."),t=e[e.length-1].split(":")[0];"cn"===t&&(t="com.cn");return"https://www.zoho."+t+"/crm/help/salessignals/salessignals-configuration.html?src=product"})),Handlebars.registerHelper("isSignalEnabledForChannel",(function(e,t,a,n){return t="Slack"===(t="Cliq"===(t="Cisco"===t?"cisco":t)?"cliq":t)?"slack":t,crmNTCSettings.getSignalStatusForChannel(e,t,a)?n.fn(this):n.inverse(this)})),Handlebars.registerHelper("ifNoSignals",(function(e){return crmNTCGlobal.isCrmNotificationCenterEmpty?e.fn(this):e.inverse(this)})),Handlebars.registerHelper("getDisplayContentForSignalsInTimeline",(function(e){var t="";switch(e.action){case"email-bounce":t="<b>"+I18n.getMsg("Email")+" "+I18n.getMsg("Bounced")+"</b> - "+e.displayContent.subject;break;case"email-opened":t="<b>"+I18n.getMsg("Email")+" "+I18n.getMsg("Opened")+"</b> - "+e.displayContent.subject;break;case"email-clicked":t="<b>"+I18n.getMsg("Email")+" "+I18n.getMsg("Clicked")+"</b> - "+e.displayContent.subject;break;case"chat-missed":t="<b>"+I18n.getMsg("crm.signal.salesiq.missed.chat.text")+"</b> - "+e.displayContent.message;break;case"call-missed":t="<b>"+I18n.getMsg("crm.activities.call.defaultsubject.incomingmissed",e.displayContent.phone)+"</b>"}return t})),Handlebars.registerHelper("getVisitSurveyLink",(function(e){return RebrandLinkUtil.getProperties().URLPROTOCOL+"://"+RebrandLinkUtil.getProperties().ZSURVEYATTENDURL+"/zs/"+e.UNIQUEID+"?fromService=ZCRM"})),Handlebars.registerHelper("isCategoryEmpty",(function(e,t){return 0==e.length?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("getColSpanBasedOnChannels",(function(e,t,a){var n=crmNTC.getSupportedChannelsCount(e,t);return 0!=a&&(n+=1),n})),Handlebars.registerHelper("isChannel",(function(e,t,a){return e===t?a.fn(this):a.inverse(this)})),Handlebars.registerHelper("getDefaultNamespaceForManageSignalsFilter",(function(){return crmNTCSettings.getDefaultNamespaceForManageSignalsFilter()})),Handlebars.registerHelper("isUserCustomExtension",(function(e,t){return e===crmNTC.ZOHO_USER_EXTENSION_TYPE?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("getZohoUserCustomSignalIconUrl",(function(e,t){return e?crmNTCGlobal.getCrmPrefix()+"/NotificationCenter.do?action=getSignalIcon&signalId="+t+"&key="+(new Date).getTime().toString():networkUtils.getImageUrl("nophoto_80ea3af_.png",ResourceConstants.CRM)})),Handlebars.registerHelper("showWidgetOption",(function(e,t,a){return crmNTC.ZOHO_USER_EXTENSION_TYPE&&void 0!==t&&t.hasOwnProperty("id")?a.fn(this):a.inverse(this)})),Handlebars.registerHelper("getDataForWidget",(function(e,t){var a=crmNTCGlobal.getPageLoadDataForWidget(e,t);return JSON.stringify(a)})),Handlebars.registerHelper("showSignalIframe",(function(e,t){var a=e.widget;return void 0!==a&&a.hasOwnProperty("id")?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("getWidgetSrcUrl",(function(e){var t=e.id,a=WidgetHandler.WidgetConfig.SalesSignals[t];return null!=a?a.START_URL:""})),Handlebars.registerHelper("getDataForIFrame",(function(e){return JSON.stringify(e)})),Handlebars.registerHelper("isZohoCustomSignalsAvailable",(function(e){var t=store.peekAll("signal").filter(crmNTCSettings.filterOutCustomSignals),a=t.length;if(a)for(var n=0;n<a;n++)if(!t[n].$.isNew)return e.fn(this);return e.inverse(this)})),Handlebars.registerHelper("getPlatformsCount",(function(e){var t=1;return e.other_platforms&&e.other_platforms.is_chat_configured&&(t+=1),e.other_platforms.slack&&e.other_platforms.slack.isSlackAvailableForSignals&&e.other_platforms.slack.selectedteam&&(t+=1),e.other_platforms&&e.other_platforms.isCiscoTeamsConfigured&&(t+=1),t})),Handlebars.registerHelper("isNoCustomSignalAvailable",(function(e){return 0===store.peekAll("signal").filter(crmNTCSettings.filterOutCustomSignals).length?e.fn(this):e.inverse(this)})),Handlebars.registerHelper("getBrandName",(function(){return Crm.brandName})),Handlebars.registerHelper("getMaxReachedMessage",(function(){return I18n.getMsg("crm.ntc.manage.message.signal.limit.exceeded",Crm.userDetails.NTC_ZOHO_CUSTOM_SIGNALS_MAX_COUNT)})),Handlebars.registerHelper("getEncodedName",(function(e){return e&&e.includes('"entityId":')&&(e=$ESAPI.encoder().encodeForHTML(e)),e})),Handlebars.registerHelper("isCreateSignalAvailable",(function(e){return Crm.userDetails.NTC_ZOHO_CUSTOM_SIGNALS_COUNT<Crm.userDetails.NTC_ZOHO_CUSTOM_SIGNALS_MAX_COUNT?e.fn(this):e.inverse(this)})),Handlebars.registerHelper("getWidthBasedOnChannel",(function(e){var t=1;return e&&e.is_chat_configured&&(t+=1),e&&e.isCiscoTeamsConfigured&&(t+=1),e&&e.slack&&e.slack.isSlackAvailableForSignals&&e.slack.selectedteam&&(t+=1),100/t})),Handlebars.registerHelper("isSignalAvailableForChannel",(function(e,t,a){return t&&e&&(e.extension.type!==crmNTC.ZOHO_EXTENSION_TYPE||-1!==[crmNTC.MESSAGE_NEWMESSAGE,crmNTC.MESSAGE_READ].indexOf(e.namespace))?a.fn(this):a.inverse(this)})),Handlebars.registerHelper("getExtNamespaceForAutomationPlaceHolder",(function(e){return crmNTC.extNewVsOldNamespaceMapping.hasOwnProperty(e)?crmNTC.extNewVsOldNamespaceMapping[e]:e})),Handlebars.registerHelper("getNamespaceForAutomationPlaceHolder",(function(e){return crmNTC.newVsOldNamespaceMapping.hasOwnProperty(e)?crmNTC.newVsOldNamespaceMapping[e]:e})),Handlebars.registerHelper("getExtNamespaceForAutomationPlaceHolder",(function(e){return crmNTC.extNewVsOldNamespaceMapping.hasOwnProperty(e)?crmNTC.extNewVsOldNamespaceMapping[e]:e})),Handlebars.registerHelper("isNullStr",(function(e,t){return"NULL"===e?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("isLeadOrContactModule",(function(e,t){return"Leads"===e||"Contacts"===e?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("isActivitySupportedForModule",(function(e,t){return"Solutions"===e||"Visits"===e?t.inverse(this):t.fn(this)}));var Notes={attachLimit:20,fileCount:0,filesize:0,alreadyAttachSize:0,alreadyAttachCount:0,removedAttachmentsId:"",noteFullSection:"",noteChk:"",noteInEditMode:"",noteContent:"",feedsContent:"",feedCommentsContent:"",mentionedCommentIds:[],registerPartial:function(){$(".commonRightPanel").length?Handlebars.registerPartial("actnotesRightPanel",Handlebars.templates.CrmNotes_RightPanelNotesList):(Handlebars.registerPartial("actnotesDetailsPage",Handlebars.templates.CrmNotes_DetailsPageNotesList),Handlebars.registerPartial("actnotesSinglePage",Handlebars.templates.CrmNotes_DetailsPageSingleNote),Handlebars.registerPartial("addnewNotes",Handlebars.templates.CrmNotes_AddNewNotes),Handlebars.registerPartial("showMore",Handlebars.templates.CrmNotes_ShowMore))},selectBox:function(e,t){var a=$(t),n=$("#notesTypeHolder");if(!t||!a.hasClass("sel")){var i=a.text(),l=n.text();if(t&&i!==l){$(".selectTrigger").removeClass("selectTriggerbG"),n.attr("isallnotes","allNotes"===a.attr("id")),n.text(i),e&&null!=e||(e=$("#entityID").val());var s=$("#TotalNotesCount");0!=s.length&&s.remove(),Notes.loadNotes(e,void 0,$("#note_module").val(),void 0,void 0,t.id)}$(".Optionlist ").addClass("hide")}},showOptions:function(e){$(".OptionlistNotesNew").show(),$(e).addClass("selNotesDrop")},hideAttachError:function(){$("#showErrorMsg").html("")},resetFileCount:function(){Notes.fileCount=0,Notes.alreadyAttachCount=0;var e=$("#alreadyAttached");null!=e&&e.html(""),Notes.filesize=0,Notes.alreadyAttachSize=0,Notes.removedAttachmentsId="",$("#fullInfoNoteDiv").slideDown()},addNoteWithAttachment:function(e,t,a,n,l){if(!Crm.userDetails.isStorageLimitReached){if($("#note_process").removeClass("addDisable"),$("#"+t).css({background:"transparent"}),$(".note_reply_div").hide(),t||(t=$$rightPanel.entityId),n||(n=$$rightPanel.currentModule),1==$(e).find("[name='notefile']").length)return 0!=Notes.fileCount||null!=$(e).find("#alreadyAttached").find("#alreadyAttachCount")[0]&&$(e).find("#alreadyAttached").find("#alreadyAttachCount")[0].value>0?Notes.addNote(t,a,n,void 0,void 0,l,!0,Notes.removedAttachmentsId):Notes.addNote(t,a,n,void 0,void 0,l);var s=$(e).find("[name='notefile']").length;if(Notes.filesize=Notes.alreadyAttachSize,0===(s-=1)){if(""==trimBoth($(e).find("[name='notefile']")[0].value))return alert(I18n.getMsg("crm.label.no.attach.alert")),!1;if("application/x-ms-dos-executable"==(r=$(e).find("[name='notefile']")[0].files[0].type))return alert(I18n.getMsg("crm.label.invalid.attach.alert")),!1;Notes.filesize+=$(e).find("[name='notefile']")[0].files[0].size}for(i=0;i<s;i++){if(""==trimBoth($(e).find("[name='notefile']")[i].value))return alert(I18n.getMsg("crm.label.no.attach.alert")),!1;var r;if("application/x-ms-dos-executable"==(r=$(e).find("[name='notefile']")[i].files[0].type)||"application/x-msdownload"==r)return alert(I18n.getMsg("crm.label.invalid.attach.alert")),!1;Notes.filesize+=$(e).find("[name='notefile']")[i].files[0].size}return Notes.filesize>1024*Notes.attachLimit*1024?(alert(I18n.getMsg("crm.attach.restriction.relatedlist",Notes.attachLimit)),!1):(Notes.addNote(t,a,n,void 0,void 0,l,!0,Notes.removedAttachmentsId),!0)}},editFileAttach:function(e,t,a){$(e).parent().parent().remove(),Notes.fileCount--,Notes.alreadyAttachCount--,Notes.alreadyAttachSize-=a,Notes.removedAttachmentsId+=t+";",Notes.fileCount<5&&$("#note_desktop").show()},toogleNotesVersion:function(e){if(!e||!$(e).hasClass("sel")){""!==Notes.noteInEditMode&&Notes.cancelEdit(Notes.noteInEditMode);var t=new crmRequestPool,a=Crm.getCrmBasePath()+"/specific/noteattach.do?actionType=toogleNotesVersion",n={};networkUtils.setCsrfParam(n),t.initiate({action:a,data:n,success:function(e){var t=document.getElementById("relNEID"),a=document.getElementById("relParentId");Notes.loadNotes(t.value,void 0,$("#note_module").val(),a.value,e),Crm.userDetails.CUSTOMIZE_INFO.Notes_Desc="true"!=e}})}},getExtensionGroup:function(e){var t="file";if("txt"===e||"pdf"===e||"html"===e||"xml"===e)return t=e;var a={png:["jpeg","jpg","gif","png","webp","bmp","svg"],word:["doc","docx","odt","rtf"],excel:["csv","xls","xlsx","ots","xlsm","ods","numbers","fcs","bks","rdf"],ppt:["odp","pps","pot","pptx","ppt"],movie:["avi","wmv","mp4","mpeg","mpg","mov","flv","mkv","webm"],mp3:["mp3","ogg","oga","wma","m4p","m4a","au","3gp"],zip:["zip","zipx","tar","gz","z","cab","rar","bz2","lzh","7z","img","iso"]};for(var n in a)if(a.hasOwnProperty(n)){var i=a[n];if($.inArray(e,i)>=0){t=n;break}}return t},initComponent:function(e){var t,a=document.getElementById("relNEID").value,n=document.getElementById("note_module").value,i=$("#fullInfoNoteDiv");t=e?$(".notesEditModeAct"):i,i[0].dropzone&&i[0].dropzone.destroy(),t.FileUploader({previewsContainer:"#noteMoreFiles",createImageThumbnails:!1,needWMSFallback:!0,needVirusFilter:!0,virusFilter:{okMessage:function(){var e=this.getFilesWithMaliciousContents();return this.files.length===e.length?I18n.getMsg("crm.fileuploader.message.savenoteswithoutattachments"):this.files.length-e.length<2?I18n.getMsg("crm.fileuploader.message.noteattachremainingfile"):I18n.getMsg("crm.fileuploader.message.noteattachremainingfiles")}},clickable:"#note_desktop",previewTemplate:'<div class="dz-preview dz-file-preview cB"><div class="dz-details"><div class="dz-filename"><span data-dz-name></span></div><div class="dz-size"><span data-dz-size></span></div></div><div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div><div class="dz-error-message"><span class="virusAlert"></span>&nbsp;<span data-dz-errormessage></span></div><div class="dz-remove ico-close-small svgIcons" data-dz-remove></div>',uploadMethod:"zfsng",needFolderUpload:!1,maxFiles:5-Notes.alreadyAttachCount,totalFilesize:(2e7-Notes.alreadyAttachSize)/1e6,parallelUploads:1,progressRatio:.9,save:"#save_comment",cancel:"#cancel_comment",init:function(){var e,t=this;t.on("proceed",(function(e){e.preventDefault(),e.stopPropagation();var t=document.getElementById("note_subject"),a=document.getElementById("noteContentTxt");if(a&&t){var n=a.value.trim(),i=t.value.trim();if(""==n&&""==i)return a.focus(),$(a).attr("placeholder",I18n.getMsg("crm.general.addnote")),!1}Crm.trackSpotLightAction("Note Added"),Notes.addNote.call(this)})),$("#alreadyAttached").click((e=t,function(t){t.preventDefault(),t.stopPropagation(),e.options.maxFiles=5-Notes.alreadyAttachCount,e.options.totalFilesize=(2e7-Notes.alreadyAttachSize)/1e6})),t.on("error",(function(e){if(e.previewElement){e.virus&&$(e.previewElement).find(".virusAlert").css("display","inline-block");var t=e.previewElement.querySelector("[data-dz-errormessage]");t&&t.innerHTML.length>20&&$(t).attr("title",t.innerHTML),$("#save_comment").prop("disabled",!1)}})),t.on("reset",(function(){$("#save_comment").prop("disabled",!1)})),t.on("customizepreviewtemplate",(function(e){var t=$(a),a=e.previewElement.querySelector("[data-dz-name]"),n=e.name;n&&n.length>20&&t.attr("title",n);var i="";n&&""!==n&&-1!==n.lastIndexOf(".")&&(i=n.slice(n.lastIndexOf(".")+1)),(a=e.previewElement.querySelector(".dz-filename"))&&t.prepend(FileUploader.createElement('<span class="mR15 '+Notes.getExtensionGroup(i)+'-icon"></span>')),(a=e.previewElement.querySelector("[data-dz-size]"))&&(a.innerHTML="("+this.options.getFileSize(e.size)+")")}))},uploadBean:{crmHandback:{entityId:a,module:n,action:"notes"},user:{zgid:Crm.userDetails.ZGID},uploadTo:"EntityAttachments",folderId:"WS_ATTACHMENT_LIBRARY"}})},destroyMentionsComponent:function(e){var t=$L("#"+e);if(t.length>0){t.cruxMention({destroy:!0}),t.removeClass("lyteMentionsAdded");var a=Notes.mentionedCommentIds.indexOf(e);a>-1&&Notes.mentionedCommentIds.splice(a,1)}},initNote:function(e,t){var a=$(".commonRightPanel").length;if(wmsLoaded){var n=document.getElementById("dvcreatenotespan"),i=document.getElementById("note_content"),l=document.getElementById("note_subject"),s=document.getElementById("title_tr"),r=document.getElementById("noteContentTxt"),o=document.getElementById("showHideTitle"),c=document.getElementById("addTitleSpan");if("open"==e){if(i&&("none"==i.style.display||a)){a||(s.style.display="none"),$(".note_reply_div").html("");var d=$("#note_parent_td");""===Notes.noteFullSection&&(Notes.noteFullSection=d.html()),d.html(Notes.noteFullSection),i.style.display="block",Notes.noteContent="",$("#note_content").show()}var m=$("#noteContentTxt");a||m.focus(),$("#fullInfoNoteDiv").addClass("openNotes"),m.attr("placeholder",I18n.getMsg("crm.general.addnote")),Notes.initComponent(),bindMentions(this,"noteContentTxt")}else if("close"==e){if($(".feed_newpost_textarea_bg").removeClass("openNotes"),i&&(""==i.style.display||a)&&(a||(s.style.display="",i.style.display="none",$("#note_subject").hide(0),c.style.display="",$(o).slideUp(300)),n.style.display="none",$(".note_reply_div").hide(),document.getElementById("editNoteId").value="null",l.value="",r.value="",Notes.noteContent="",Notes.destroyMentionsComponent("noteContentTxt"),a?(document.getElementById("relNEID").value=$$rightPanel.entityId,document.getElementById("note_module").value=$$rightPanel.currentModule):(document.getElementById("relNEID").value=crmRelatedList.EntityId,document.getElementById("note_module").value=crmRelatedList.Module)),t){var u=$("#newNoteDivId");$("#fullInfoNoteDiv").html(u.html()),u.html("").hide(),getElemById("cancel_comment").setAttribute("onclick","initNote('close')")}a&&($("#note_content").closest(".note_edit_div").html(""),$("#note_parent_td").html(Notes.noteFullSection),setTimeout(Notes.initComponent,1e3)),$("#fullInfoNoteDiv").removeClass("openNotes"),$("#noteContentTxt").attr("placeholder",I18n.getMsg("crm.general.addnote")+"...")}else if("addtitle"==e){var p=$("#note_subject");$("#editModuleDet").is(":visible")?p.attr("onkeydown",'Notes.editNotesTitle("edit")'):p.attr("onkeydown",'Notes.editNotesTitle("add")'),a||(c.style.display="none",$(o).slideDown(300)),p.focus()}"undefined"!=typeof event&&$(event.target).closest("#krp_Rightpanel_InfoContainer").length>0&&$$rightPanel.setPerfectScrollBar("krp_Rightpanel_InfoContainer","krp_Rightpanel_InfoInnerContainer",!0)}},doReply:function(e,t){if("null"==document.getElementById("editNoteId").value){document.getElementById("relNEID").value=e,document.getElementById("note_module").value=t;var a=!1;if(FileUploader.instances){for(var n=FileUploader.instances.length,i=0;i<n;i++)FileUploader.instances[i].batchId===$("#fullInfoNoteDiv").attr("batchid")&&(document.getElementById("noteContentTxt").focus(),a=!0);0!=n&&0!=a||Notes.initNote("open")}}},addNote:function(e,t,a,n,i,l,s){if(Crm.userDetails.isStorageLimitReached)return Crm.showStorageExceedPopup(),!1;var r=$("#noteContentTxt"),o=document.getElementById("noteContentTxt"),c=$("#sharetoclient").prop("checked"),d=$("#noteContentTxtInSalesinbox");s&&"mailMagnet"===s?(r=$("#mailMagnetNoteContentTxt"),Notes.noteContent=r.val(),o=document.getElementById("mailMagnetNoteContentTxt")):s&&"fromSalesinbox"===s&&(r=d,Notes.noteContent=r.val(),o=document.getElementById("noteContentTxtInSalesinbox"));var m=document.getElementById("note_subject"),u=m.value.trim(),p=Notes.noteContent.trim();if(Crm.userDetails.CLIENT_ACCOUNT&&(c=!0),o&&o.value.length>65535)return renderingUtils.showCustomAlert(I18n.getMsg("crm.message.limit.exceed",I18n.getMsg(["65535","Content"]))),!1;var g=t||document.getElementById("curUserId").value,h=!0,f=$("#note_module");a=a||(0!=f.length&&0!=f.val().trim().length?f.val():Lyte.Router.getRouteInstance().transition.info.dynamicParams[0]);var v=!1,C=n||Notes.noteChk,T=document.getElementById("relNEID");if(T||e){var N=e||T.value;N=N||Lyte.Router.getRouteInstance().transition.info.dynamicParams[1];var _=document.getElementById("editNoteId")?document.getElementById("editNoteId").value:null,I="",b="";if(null!=_&&"null"!=_)h=!1,I="&actionType=Edit&notesid="+(b=_.split("::"))[0]+"&entityid="+b[1];else{if("true"!=C)return renderingUtils.showCustomAlert(I18n.getMsg("crm.security.error","")),!1;null!=_&&"null"!=_||(I="&actionType=create")}var E={};networkUtils.setCsrfParam(E),E.rangeValue=null,E.startIndex=null,E.endIndex=null,E.action="onlyNotes",E.returnAnchor="krp"===i?"krp":"listViewAnchor",E.subject=u,E.description=p,E.id=N,E.module=a,E.shareToClient=c,h&&(E.ownerName=null,E.ownerId=g);var S=Crm.getCrmBasePath()+"/specific/noteattach.do?cvid=null&recordNum=null"+I;if(this instanceof FileUploader&&0!==this.options.successfullyUploadedFiles.length)S+="&uploadIds="+this.getParamsFromAllContents(this.options.successfullyUploadedFiles,"uploadId"),v=!0;null!=Notes.removedAttachmentsId&&""!==Notes.removedAttachmentsId&&(E.removedAttachmentsId=Notes.removedAttachmentsId),$(".outlookqCreate").length&&(E.isfromOutlookRightPanel=!0),(new crmRequestPool).initiate({action:S,type:"POST",data:E,success:function(c){if(-1==(c=JSON.stringify(c)).indexOf("FEATURELIMIT_ERROR_403::::FEATURELIMITEXCEEDS"))if(-1==c.indexOf("CRM_ERROR_PAGE_500::::EXCEPTION")){if("{}"==c||'""'==c)return renderingUtils.showCustomAlert(I18n.getMsg("crm.security.error")),void Notes.cancelEdit(_.split("::")[0]);s&&"fromSalesinbox"===s?$("#noteContentTxtInSalesinbox").hasClass("lyteMentionsAdded")&&Notes.destroyMentionsComponent("noteContentTxtInSalesinbox"):Notes.destroyMentionsComponent("noteContentTxt"),Notes.noteContent="";var d=$("#save_comment"),u=$("#note_parent_td");r.attr("placeholder",I18n.getMsg("crm.general.addnote")),l&&(d.removeAttr("onClick"),d.attr("onClick",'Crm.trackSpotLightAction("Note Added",{"Version":"NEW UI"});return Notes.addNote()')),""===Notes.noteFullSection&&(Notes.noteFullSection=u.html()),s&&"fromSalesinbox"===s||(u.length&&($("#note_content").remove(),$("#fullInfoNoteDiv,.note_reply_div").slideUp(),$(".notesLoading").show(),$("#fullInfoNoteDiv").removeClass("openNotes")),u.html(Notes.noteFullSection)),Notes.addNoteCallBack(e,t,a,n,i,l,c,v,m,o,s)}else alert(I18n.getMsg("crm.unable.to.process.request"));else renderingUtils.showCustomAlert(I18n.getMsg("crm.newfree.limit.exceed"))},error:function(){renderingUtils.showCustomAlert(I18n.getMsg("crm.contact.hierarchy.business_card_permission_error"))}}),this instanceof FileUploader&&this.clean(),$("#note_process").attr("onClick",'Notes.initNote("open")')}},addNoteFromUpdateCallStatus:function(e,t,a,n,i,l){if(Crm.userDetails.isStorageLimitReached){var s=networkUtils.returnDependencyFiles(["datastorage.js"],crmConstants.jsStaticPathForLyte),r=networkUtils.returnDependencyFiles(["datastorage.css"],crmConstants.cssStaticPathForLyte),o=networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("datastorage")]),c=s.concat(r).concat(o);Lyte.injectResources(c,void 0,(function(){var e=Crm.userDetails.data_storage,t="count"===e.calculation_type;Lyte.Component.render("crm-data-storage-wms-msg",{rem_storage:e.total_remaining_space.toString(),allowed_storage:e.total_allowed_space,isCount:t,show:!0,errorType:"Notes_Create"},"#mics_tipDiv")}))}var d=Notes.noteChk;if(e){if("true"!=d)return renderingUtils.showCustomAlert(I18n.getMsg("crm.security.error","")),!1;var m={};networkUtils.setCsrfParam(m),m.rangeValue=null,m.startIndex=null,m.endIndex=null,m.action="onlyNotes",m.returnAnchor="krp"===i?"krp":"listViewAnchor",m.subject=a,m.description=t,m.id=e,m.module=n;var u=Crm.getCrmBasePath()+"/specific/noteattach.do?cvid=null&recordNum=null&actionType=create";(new crmRequestPool).initiate({action:u,type:"POST",data:m,success:function(t){if("listView"!=i){if("homePage"==i){var a=$("#entityID").val();if(null==a||t.whatid!=a&&t.contactid!=a&&t.mainEntId!=a)return}t=JSON.stringify(t),Notes.addNoteCallBack(e,void 0,n,void 0,i,void 0,t,!1),"relatedList"===i&&l&&"canvas"==Lyte.Router.getRouteInstance().routeName&&"entity"==Lyte.Router.getRouteInstance().parent.routeName&&(Lyte.triggerEvent("relatedList",{res:l,callActivity:!0}),store.unloadAll("note"),store.findAll("note",{},!0,!0,{module:moduleApiMapping[$L("#module")[0].value],entityId:$L("#entityId")[0].value}).then((function(e){Lyte.triggerEvent("noteAddedOrDeleted",{allNotes:e,defaultDisplayedNotesCount:3})})))}}})}},addNoteCallBack:function(e,t,a,n,i,l,s,r,o,c,d){o=document.getElementById("note_subject"),c=document.getElementById("noteContentTxt");d&&"mailMagnet"===d?c=document.getElementById("mailMagnetNoteContentTxt"):d&&"fromSalesinbox"===d&&(c=document.getElementById("noteContentTxtInSalesinbox"));var m=document.getElementById("showHideTitle"),u=document.getElementById("title_tr"),p=document.getElementById("addTitleSpan"),g=$(".commonRightPanel").length;if(0==$("#noteDetails").length||0==$("#id").length||void 0!==d&&"mailMagnet"===d||void 0!==d&&"fromSalesinbox"===d)if(n&&"krp"===i){removeFreezeLayer(),commonUtils.showHideLoadingDiv(),$("#qCreate").html("").hide();var h=JSON.parse(s);$$rightPanel.refreshOnCreatingNewEntity("Notes",h)}else n&&(1!=$("#mailhomecontainer").length?($("#noteCreation").hide(),document.getElementById("rmStatusMsgDiv").innerText=i,document.getElementById("rmStatusMsgDiv").style.display="block",setTimeout((function(){$("#rmStatusMsgDiv").fadeOut("slow")}),2e3)):(removeFreezeLayer(),$("#qCreate").html("").hide(),setTimeout((function(){$("#mailSentSuccessfullyDiv").html("").hide()}),2e3)));else{var f=$("#model"),v=null,C=null;v=$(".commonRightPanel").length?Handlebars.templates.CrmNotes_RightPanelSingleNote:Handlebars.templates.CrmNotes_DetailsPageSingleNote;try{var T;if((T="string"==typeof s?JSON.parse(s):s).setype="Notes",Notes.addNotesClass(T),C=v(T),""==Notes.noteInEditMode){0!=f.length&&f.val().indexOf("Older")>-1?$("#actnotes").prepend(C):$("#actnotes").append(C);var N=$("#TotalNotesCount"),_=$("#dispcurrentCount"),I=$("#dispTotalNotesCount"),b=parseInt(N.val())+1;N.val(b),$("#newleft_Notes").find(".numCountn").addClass("numCountVal").text(b),_.html(parseInt(_.html())+1),I.html(parseInt(I.html())+1)}else $("#"+Notes.noteInEditMode).replaceWith(C),$("#fullInfoNoteDiv").slideDown(),Notes.noteInEditMode="";var E=$(".singleNoteHighlight");E&&E.removeClass("singleNoteHighlight",3e3,void 0,(function(){$(".singleNoteBorderHighlight").removeClass("singleNoteBorderHighlight")})),Notes.processNotes(),o.value="",c.value="",$(c).attr("placeholder",I18n.getMsg("crm.general.addnote")),document.getElementById("editNoteId").value="null",$(".commonRightPanel").length||(document.getElementById("note_content").style.display="none",u.style.display="",$(m).slideUp(300),p.style.display="");var S=$("#module");0!=S.length&&refreshFollowDiv(S.val(),"Notes"),l&&l(),$(".commonRightPanel").length||(crmListView.dropCacheOnActivityCreate(detailView.currentModule,"Notes"),crmTab.deleteFromCache(detailView.currentModule))}finally{if(Notes.resetFileCount(),g)document.getElementById("relNEID").value=$$rightPanel.entityId,document.getElementById("note_module").value=$$rightPanel.currentModule,Notes.initComponent();else{var w=$(".social_rightpanel");w=w.length?w:$("#kso_social_rightpanel"),$("#module")&&"Events"==$("#module").val()?(document.getElementById("relNEID").value=$("#entityId").val(),document.getElementById("note_module").value=$("#module").val()):w.length?(w.find("#relNEID").val($$rightPanel.entityId),w.find("#note_module").val($$rightPanel.currentModule)):(document.getElementById("relNEID").value=crmRelatedList.EntityId,document.getElementById("note_module").value=crmRelatedList.Module)}}}},processNotes:function(){var e=$(".commonRightPanel").length,t=$("#actnotes").find(".singleNoteBorder");if(t&&t.length>0){var a=$(t);a.find("span[data-title]").off("hover").hover((function(){zctt.showtt($(this).attr("data-title"),void 0,void 0,void 0,void 0,"tooltipzc-small")}),(function(){zctt.hidett()})),a.off("hover").hover((function(){$("#noteOper_"+this.id).length<1||(e&&$(document.getElementById("noteOper_"+this.id)).prev().hide(),document.getElementById("noteOper_"+this.id).style.visibility="visible")}),(function(){$("#noteOper_"+this.id).length<1||(e&&$(document.getElementById("noteOper_"+this.id)).prev().show(),document.getElementById("noteOper_"+this.id).style.visibility="hidden")}))}0==FileUploader.instances.length&&(Notes.noteFullSection=e?Notes.noteFullSection:""),$("a.imageGallery").colorbox({photo:!0}),Notes.addPreTagWidth()},createMap:function(e,t,a,n){if($("#"+a).is(":visible")){maps_getStaticImage([e,t],a,17,"tiles","no_marker");var i=L.icon({iconUrl:networkUtils.getImageUrl("spacer_e17b417_.gif",ResourceConstants.CRM),iconSize:[16,16],className:"green-mp-marker"});L.marker([e,t],{icon:i}).addTo(staticMap)}else null==n?n=1:n++,n<4?setTimeout((function(){Notes.createMap(e,t,a,n)}),1e3):setTimeout((function(){Notes.createMapAfterTimeout(e,t,a)}),1e3)},createMapAfterTimeout:function(e,t,a){maps_getStaticImage([e,t],a,17,"tiles","no_marker");var n=L.icon({iconUrl:networkUtils.getImageUrl("spacer_e17b417_.gif",ResourceConstants.CRM),iconSize:[16,16],className:"green-mp-marker"});L.marker([e,t],{icon:n}).addTo(staticMap)},callLeafletForVisibleNotes:function(){$("#actnotes").children().each((function(){var e=this;"hiddenNotes"!=this.id&&networkUtils.loadFeatureScripts(["zohocrm_maps.js"],(function(){$(e).find("#checkin_latitude").each((function(){var e=$(this).attr("data-params"),t=(e=JSON.parse(e)).latitude,a=e.longitude,n="mapContainer_"+e.noteId;!$("#"+n).children().length>0&&Notes.createMap(t,a,n)}))}))}))},invokeLeafletFunctions:function(e){$("#"+e).find(".singleNoteBorder").each((function(){$(this).find("#checkin_latitude").each((function(){var e=$(this).attr("data-params"),t=(e=JSON.parse(e)).latitude,a=e.longitude,n="mapContainer_"+e.noteId;!$("#"+n).children().length>0&&Notes.createMap(t,a,n)}))}))},addRightPanelClass:function(e){1==e.isOlderNotes||1==e.isOlderVersionNotes?(e.selectValue="rightPanelOlder",e.recentSelectClass="sel"):(e.selectValue="rightPanel",e.selectClass="detailsNotesSection",e.recentClass="sel"),e.addNoteWidth="100%",e.showMoreWidth="w100p"},addNotesClass:function(e){1==e.isOlderNotes||1==e.isOlderVersionNotes?(e.selectValue="detailPanelOlder",e.recentSelectClass="sel"):(e.selectValue="detailPanel",e.selectClass="detailsNotesSection",e.recentClass="sel"),1==e.isAllNotes?(e.allnotesSelect="sel",e.isallnotes="true",e.content=I18n.getMsg("crm.label.all")):1==e.selectProjectNotes?(e.projectsSelect="sel",e.isallnotes="false",e.content=I18n.getMsg("crm.territory.label.only","Projects")):(e.contactsSelect="sel",e.isallnotes="false",e.content=I18n.getMsg("crm.territory.label.only",e.tab_label)),e.addNoteWidth="574",e.showMoreWidth="w600 dvw720"},loadNotes:function(e,t,a,n,i,l){Notes.registerPartial();var s=$("#actnotes"),r=$("#TotalNotesCount"),o=$("#showMore");if(0!=r.length)var c=r.val();var d=$("#hiddenNotes");if(t)if(c<=10){if(0!=d.length)return d.show(),o.hide(),void Notes.invokeLeafletFunctions("hiddenNotes")}else 0!=d.length&&(d.show(),Notes.invokeLeafletFunctions("hiddenNotes"));var m={};"undefined"!=typeof print_view_page&&(m.action="print");var u=Crm.getCrmBasePath()+"/specific/noteattach.do";if(m.actionType="getNotesJSON",m.entityid=e,m.module=a,0!=r.length&&null==i&&(m.TotalNotesCount=c),networkUtils.setCsrfParam(m),void 0!==n&&"null"!==n&&"undefined"!==n&&(m.actParentId=n),t){var p=document.getElementById("tIdx"),g=5;p&&(g=p.value),m.tIdx=g;var h=s.find(".singleNoteBorder").length;m.dispcurrentCount=h}getAccessibleObj("notesTypeHolder")&&"true"===getAccessibleObj("notesTypeHolder").getAttribute("isallnotes")||getAccessibleObj("Allnotes")&&getAccessibleObj("Allnotes").checked?m.isAllNotes=!0:(getObj("projectNotesOnly")&&void 0!==l&&l===getObj("projectNotesOnly").id||$("#notesTypeHolder")&&"Projects only"==$("#notesTypeHolder").text())&&(m.isProjectNotes=!0),$(".outlookqCreate").length&&(m.isfromOutlookRightPanel=!0),(new crmRequestPool).initiate({action:u,data:m,success:function(e){e=JSON.stringify(e);var t=JSON.parse(e),a=null,n=$("#model");n.val().indexOf("rightPanel")>-1&&$(".commonRightPanel").length?(a=t.isFilter&&t.isFirstTime||t.isFirstTime||t.TotalNotesCount<=3?Handlebars.templates.CrmNotes_RightPanel:Handlebars.templates.CrmNotes_RightPanelNotesList,Notes.addRightPanelClass(t)):n.val().indexOf("rightPanel")>-1?(a=t.isFilter&&t.isFirstTime||t.isFirstTime||t.TotalNotesCount<=3?Handlebars.templates.CrmNotes_DetailsPage:Handlebars.templates.CrmNotes_DetailsPageNotesList,Notes.addRightPanelClass(t)):n.val().indexOf("detailPanel")>-1&&(a=t.isFilter&&t.isFirstTime||t.isFirstTime||t.TotalNotesCount<=3?Handlebars.templates.CrmNotes_DetailsPage:Handlebars.templates.CrmNotes_DetailsPageNotesList,Notes.addNotesClass(t));var i=a(t);t.isFilter&&t.isFirstTime||t.isFirstTime||t.TotalNotesCount<=3?($("#noteDetails").empty(),getElemById("noteDetails").innerHTML=i):($("#dispcurrentCount").empty(),document.getElementById("dispcurrentCount").innerHTML=t.currentCount,$("#dispTotalNotesCount").empty(),document.getElementById("dispTotalNotesCount").innerHTML=t.TotalNotesCount,document.getElementById("currentCount").value=t.currentCount,document.getElementById("TotalNotesCount").value=t.TotalNotesCount,document.getElementById("tIdx").value=t.tIdx,n.val().indexOf("Older")>-1?s.append(i):s.prepend(i),t.isMore||o.hide()),"0"==t.TotalNotesCount?$("#newleft_Notes").find(".numCountn").removeClass("numCountVal").text(""):$("#newleft_Notes").find(".numCountn").addClass("numCountVal").text(t.TotalNotesCount),Events.eventNoteReqSent=!1,EvalInnerScript(getElemById("noteDetails")),Notes.processNotes(),Notes.callLeafletForVisibleNotes(),$(".commonRightPanel").length&&Notes.initNote("open")}})},editNote:function(e,t){var a=$(".commonRightPanel").length,n=getObj("tempNote_"+e)?$("#tempNote_"+e).parents(".askziacontainer").length:$("#ncontent_"+e).parents(".askziacontainer").length,i=$("#note_process");""!=Notes.noteInEditMode&&Notes.cancelEdit(Notes.noteInEditMode),Notes.noteInEditMode=e,getObj("tempNote_"+e)?n||(hide("tempNote_"+e),hide("ncontent_"+e)):n||hide("ncontent_"+e),$("#fullInfoNoteDiv").slideUp();var l=$("#"+e),s=!1,r=!1;null!=getObj("nsharedtoclient_"+e)&&(s=!0,null!=getObj("naddedbyclient_"+e)&&(r=!0)),n||hide("ntitle_"+e),a&&$("#"+e).find(".userName").hide(),$("#"+e+" .notesBtmDet").hide(0),l.find("#noteAttachments")&&l.find("#noteAttachments").hide();var o=$("#note_parent_td");if(""===Notes.noteFullSection&&(Notes.noteFullSection=o.html()),""===o.html()&&($(".note_reply_div").html(""),o.html(Notes.noteFullSection)),o.html(""),l.find(".note_edit_div").html(Notes.noteFullSection),l.addClass("notesEditModeAct"),a||l.stop().css({background:"#eff2f4"}),Crm.userDetails.CLIENT_ACCOUNT?$("#note_content").find("#sharetoclientdiv").addClass("dN"):($("#note_content").find("#sharetoclient").prop("checked",s),s&&r&&$("#note_content").find("#sharetoclient").prop("disabled",!0)),$("#note_content").show(),"salesinbox"==$$rightPanel.rightPanelSource){var c=$(".commonRightPanel").innerWidth()-55;$("#showHideTitle .addNotesTitle").css("max-width",c)}var d=trimBoth(document.getElementById("ntitle_"+e).innerHTML),m=trimBoth(document.getElementById("noteContWithRegex_"+e).innerHTML);Notes.noteContent=escapeToHTML(m);var u="";$L("#ncontent_"+e).contents().each((function(e,t){try{if(1===t.nodeType&&null!=t.getAttribute("href").match("javascript")){var a=t.textContent.toString(),n=a.length;a.lastIndexOf(",")==n-1&&(a=a.slice(0,n-1)+a.slice(n)),u+="@"+a}else t.nodeType,u+=t.textContent.toString()}catch(e){murphy.error("Exception in edit note "+e+"\nnote content "+t.textContent.toString()+"\nnode-Type "+t.nodeType+"\nitem-details\n"+t)}}));var p=document.getElementById("note_subject"),g=document.getElementById("noteContentTxt");if(document.getElementById("editNoteId").value=e+"::"+t,document.getElementById("relNEID").value=t,document.getElementById("note_module").value=l.data("module"),""!=d?(p.value=escapeToHTML(d).trim(),Notes.initNote("addtitle")):p.value="",$("#noteContentTxt").focus(),$("#noteContentTxt").attr("placeholder",I18n.getMsg("crm.general.addnote")),g.value=escapeToHTML(u),null!=l.find("#noteAttachments")){var h="",f=0,v=0;$.each(l.find("#noteAttachments").find(".fileTitle"),(function(e,t){f++;var a=$(t),n=a.find("#fileSize").val();v+=parseInt(n,10);var i=a.find("#attachmentId").val(),l=t.title.substring(t.title.lastIndexOf("-(")+2,t.title.lastIndexOf(")")),s=t.title.substring(0,t.title.lastIndexOf("-")-1);h+='<div class="noteFileName oH font14"><div class=\'dIB mR0 '+Notes.getExtensionGroup(s.substring(s.lastIndexOf(".")+1))+"-icon'></div><div class=\"dIB flNameSize mR0\"><div class='fL dIB notesTitleCs mR10'>"+$ESAPI.encoder().encodeForHTML(s)+"</div><div class='fL mR10 dIB' style=\"color: var(--labelColor);\">("+l+")</div><div onclick=\"Notes.editFileAttach(this,'"+i+"',"+n+')" class="dIB smalledit noteAttachedClose cursorPointer ico-close-small svgIcons"></div></div></div>'})),Notes.fileCount=f,Notes.alreadyAttachCount=f,Notes.alreadyAttachSize=v,h+='<input type="hidden" id="alreadyAttachCount" value="'+f+'">',null!=l.find("#noteAttachments").find("#totalFilesSize")[0]&&$(l.find("#noteAttachments").find("#totalFilesSize")[0]).attr("value",v),$("#alreadyAttached").html(h),Notes.fileCount>=5&&$("#note_desktop").hide()}var C=$("#cancel_comment");if(C.removeAttr("href"),C.attr("onClick",'javascript:Notes.cancelEdit("'+e+'")'),setTimeout((function(){var e=$("#note_subject"),t=$(".addedNotesList").width()-$("#editModuleDet").width()-60,a=e[0].scrollWidth;e.css({width:a,"max-width":t})}),100),$("#note_subject").attr("onkeydown",'Notes.editNotesTitle("edit")'),FileUploader.instances)for(var T=FileUploader.instances.length,N=0;N<T;N++)FileUploader.instances[N].batchId===$("#fullInfoNoteDiv").attr("batchid")&&FileUploader.instances[N].instance.clean();i.attr("onClick",'document.getElementById("noteContentTxt").focus()'),Notes.initComponent("edit"),bindMentions(this,"noteContentTxt")},cancelEdit:function(e){Notes.noteInEditMode="";var t=$(".commonRightPanel").length,a=$("#note_process");a.removeClass("addDisable"),getObj("tempNote_"+e)?show("tempNote_"+e):show("ncontent_"+e);var n=$("#"+e);$("#"+e+" .notesUserImg,#"+e+" .notesBtmDet").show(),t&&$("#"+e).find(".userName").show(),n.removeClass("notesEditModeAct"),n.css({background:"transparent"}),$("#editModuleDet").remove(),show("ntitle_"+e),$("#fullInfoNoteDiv").slideDown();var i=$("#noteOper_"+e);i.length&&(i.show(),i[0].style.visibility="hidden"),n.find("#noteAttachments")&&n.find("#noteAttachments").show(),Notes.initNote("close"),t||($("#note_parent_td").html(Notes.noteFullSection),n.find(".note_edit_div").html("")),n.find(".note_edit_div").html(""),a.attr("onClick",'Notes.initNote("open")'),$("#noteContentTxt").attr("placeholder",I18n.getMsg("crm.general.addnote")),Notes.resetFileCount()},deleteNote:function(e,t){var a=document.getElementById("note_module");if(document.getElementById("iskanbanview")&&"true"===document.getElementById("iskanbanview").value&&""===document.getElementById("note_module").value)a=document.getElementById("activitytype");var n="";if(hideAnimatePopup("deletepopup"),a){n=$("#"+e).attr("data-module");var i={},l=Crm.getCrmBasePath()+"/deletenote.do";networkUtils.setCsrfParam(i),i.type="onlyNotes",i.notesid=e,i.module=n,i.accountid=t,i.id=t,i.nextStep="relatedlist",(new crmRequestPool).initiate({action:l,type:"POST",data:i,success:function(a){if(a.indexOf("ALERTERROR:::")>-1){var i=a.split("ALERTERROR:::");renderingUtils.showCustomAlert(i[1])}else if(0!=$("#noteDetails").length){var l=document.getElementById("relParentId"),s=$("#TotalNotesCount");if(0!=s.length){var r=parseInt(s.val());r-=1,s.attr("value",r),0==r?($("#newleft_Notes").find(".numCountn").removeClass("numCountVal").text(""),crmTab.deleteFromCache(detailView.currentModule)):$("#newleft_Notes").find(".numCountn").text(r)}$("#"+e).slideUp(200,(function(){$("#"+e).remove(),$("#actnotes").children().length<=1&&0!=r&&Notes.loadNotes(t,!1,n,l.value)}));var o=$("#dispcurrentCount"),c=$("#dispTotalNotesCount");o.html(parseInt(o.html())-1),c.html(parseInt(c.html())-1)}}})}refreshFollowDiv($("#module").val(),"Notes")},addPreTagWidth:function(){var e=$("#model");(e.length>0&&"rightPanelOlder"===e.val()||e.length>0&&"rightPanel"===e.val())&&$("#noteDetails pre,#noteDetails .fdNotesTitleNew").width($(".actnotes").width()-($("#noteDetails pre").parent("td").prev("td:visible").width()+75))},editNotesTitle:function(e){var t=$("#dummyspanWidth"),a=$("#editModuleDet"),n=$("#note_subject"),i=$("#actnotes");t.text(n.val());var l=t.width()+25,s=t.width()+30+a.width();if("add"==e)a.is(":visible")?(s<=i.width()-30&&n.width(l),n.width(l)):n.width(l);else if("edit"==e){l=t.width()+15;console.log(s+","+i.width()-30),s<=i.width()-30&&n.width(l)}},notesTitleChk:function(){""==$("#note_subject").val()&&($("#showHideTitle").slideUp(300),$("#addTitleSpan").show())},showNotesTitle:function(){$("#note_subject").show().focus()},toggleNotes:function(){var e=getObj("toggleNotes");e&&("none"==e.style.display?(e.style.display="block",showToggleNote.display="block",$("#noteDetails").removeClass("dvmB40")):(e.style.display="none",showToggleNote.display="none",$("#noteDetails").addClass("dvmB40")))},showNotesDiv:function(e,t,a,n){var i="";return-1!=e.indexOf("?")&&(i=e.substring(e.indexOf("?")+1),e=e.substring(0,e.indexOf("?"))),mR(e,(function(e){var t=e;if(t.indexOf("ALERTERROR:::")>-1){var a=t.split("ALERTERROR:::");alert(a[1])}else{var i=getObj("shownotes");$(i).empty(),i.style.display="block",i.style.zIndex="21",i.style.width="650px",i.innerHTML=t,EvalInnerScript(i),mailsetCenter("shownotes"),freezeBackground(),n&&($("#notesButtonDiv").hide(),$("#shownotes").css("z-index","34")),getObj("subject")&&getObj("subject").focus()}}),i),!1},newToggleNote:function(e,t){var a=document.getElementById("noteSecondInfo"),n=document.getElementById("toggleNoteText"),i="none"==document.getElementById("noteSecondInfo").style.display;a.style.display=i?"block":"none",n.innerHTML=n.innerHTML==e?t:e},noteAttach:function(e,t,a,n){var i="";fieldname=new Array("subject"),fieldlabel=new Array("Note Title"),fielddatatype=new Array("V~M");var l=I18n.getMsg("confirmmsg");if("SmallDetailView"==a&&(fieldname=new Array("note_subject"),!formValidate()))return!1;var s=document.getElementById("subject"),r=document.getElementById("description");if(r&&s&&""==trimBoth(s.value)&&""==trimBoth(r.value))return s.value=trimBoth(s.value),r.value=trimBoth(r.value),document.getElementById("subject").focus(),!1;if(r&&s&&(s.value=trimBoth(s.value),r.value=trimBoth(r.value)),r&&r.value.length>65535)return alert(I18n.getMsg("crm.message.limit.exceed",I18n.getMsg(["65535",document.getElementById("desc_label").value]))),!1;e.substr(e.indexOf("#")+1,e.length);if("DeleteFromDetailView"==a||"DeleteFromGSearchView"==a){if(!window.confirm(l))return!1}else if(("EditFromDetail"==a||"CreateFromDetail"==a||"EditFromDetailView"==a)&&("EditFromDetail"==a&&"CreateFromDetail"==a||(e+="&isNoteUpdated=true"),getObj("ID_NOTESPERSONALITY"))){e+="&listRelationID="+getObj("ID_NOTESPERSONALITY").value;var o="sortColumnString_"+getObj("ID_NOTESPERSONALITY").value,c="sortOrderString_"+getObj("ID_NOTESPERSONALITY").value;getObj(o)&&(e+="&sortColumnString_"+getObj("ID_NOTESPERSONALITY").value+"="+getObj(o).value),getObj(c)&&(e+="&sortOrderString_"+getObj("ID_NOTESPERSONALITY").value+"="+getObj(c).value)}if("NoForm"!=t&&(i=formData2QueryString(t)),"EditFromGSearch"==a||"DeleteFromGSearchView"==a){var d=getObj("searchStr").value,m=!!getObj("userOption")&&getObj("userOption").checked,u=!1;getObj("dbSearch")&&(u=getObj("dbSearch").checked),i+="ajaxSearch=true&searchword="+encodeURIComponent(d)+"&userOption="+m+"&searchCategory=AllEntities&dbSearch="+u}else"EditFromGSearchView"==a&&(i+="&EditFromGSearch=true");return mR(e,(function(e){var t=e;if(-1!=t.indexOf("ALERTERROR:::")){var n=t.split("ALERTERROR:::");return alert(n[1]),!1}if("EditFromDetailView"==a||"EditFromGSearchView"==a)$("#shownotes").empty(),document.getElementById("shownotes").innerHTML=t,JSEvalScript(getObj("shownotes"));else if("CustomViewDetails"==a||"EditFromGSearch"==a||"DeleteFromGSearchView"==a){if("EditFromGSearch"==a||"DeleteFromGSearchView"==a){var i=$(t).find("#ajax_Notes");$("#ajax_Notes").replaceWith(i),bindGSearchHover()}commonUtils.showHideLoadingDiv(),$("#shownotes").html("").hide(),removeFreezeLayer()}else crmRelatedList.load(crmRelatedList.Module,crmRelatedList.EntityId,t),commonUtils.showHideLoadingDiv(),document.getElementById("shownotes").style.display="none",$("#shownotes").empty(),removeFreezeLayer()}),i),""!=n&&"EditFromDetailView"!=a&&"CancelFromDetailView"!=a&&"EditFromGSearchView"!=a&&($(getObj("bulkUpdateSuccess")).empty(),getObj("bulkUpdateSuccess").innerHTML=n,mailsetCenter("bulkUpdateSuccess"),setTimeout((function(){hide("bulkUpdateSuccess")}),2e3)),!1},printNoteAction:function(e,t,a,n,i){win=window.open(Crm.getCrmBasePath()+"/printnote.do?module="+t+"&id="+e+"&notesid="+a+"&ownerId="+n+"&ownerName="+encodeURIComponent(i)+"&step=print","PrintNoteInformation","top=30,left=150,menubar=yes,toolbar=no,location=no,status=yes,scrollbars=yes,resizable=yes,width=750,height=600")}};function bindMentions(e,t){var a=$L("#"+t);a.hasClass("lyteMentionsAdded")||(Notes.idForMentions=t,a.cruxMention({textboxSelector:"#"+t,queryParam:{include_lite_users:!0},cxPropContent:function(e){"transitionNotes"==Notes.idForMentions?Notes.transNoteContent=e:"noteContentTxt"==Notes.idForMentions?Notes.noteContent=e:"feed_status"==Notes.idForMentions?Notes.feedsContent=e:"CallNotes"===Notes.idForMentions?Notes.callNotesContent=e:Notes.feedCommentsContent=e}}),a.addClass("lyteMentionsAdded"),"CallNotes"===t&&$("#CallNotesDiv").find(".lyteMIWrapper").css("width","102%"),"transitionNotes"==t&&$(".lyteMentionsInnerDiv").css("color","transparent"),"noteContentTxt"!=t&&"feed_status"!=t&&Notes.mentionedCommentIds.push(t)),a.focus()}function notesactiontoggle(e){$(".notes-action-container").hide(),$(e).find("#notes-action-container").toggle()}!function(){var e=Handlebars.template,t=Handlebars.templates=Handlebars.templates||{};t.CrmNotes_AddNewNotes=e({1:function(e,t,a,n,i){var l;return" "+(null!=(l=a.if.call(null!=t?t:{},null!=t?t.isClientPortalConfigured:t,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i}))?l:"")+" "},2:function(e,t,a,n,i){return' <div id=\'sharetoclientdiv\' class="fL pL20 pT8 dvpT0"> <label class="newCustomchkbox-md oH"> <input id=\'sharetoclient\' type=\'checkbox\' value="sharetoclient" onchange="$(this).next(\'span\').toggleClass(\'customCheckBoxChecked\')"> <span class="vam chkbxIcon fL dvmT3"></span> <span class="dIB vamfL fL f12 feedsGrayclr pL5 dvmT3">'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"custmr.prtl.notes.shr.to.custmr",{name:"getI18n",hash:{},data:i}))+"</span> </label> </div> "},4:function(e,t,a,n,i){return'onclick="Crm.showStorageExceedPopup();" '},6:function(e,t,a,n,i){return" onclick=\"Crm.trackSpotLightAction('Note Added',{'Version':'NEW UI'})\" "},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression,o=null!=t?t:{};return'<div id="fullInfoNoteDiv" class="p10 fL w100per"> <div> <input type="hidden" value="'+r(s(null!=t?t.userID:t,t))+'" name="curUserId" id="curUserId" ></input> <input type="hidden" value="null" name="editNoteId" id="editNoteId" ></input> <input type="hidden" value="'+r(s(null!=t?t.related_notes_entityId:t,t))+'" name="relNEID" id="relNEID" ></input> <input type="hidden" value="'+r(s(null!=t?t.entityMap_rel_notes_entId:t,t))+'" name="relParentId" id="relParentId" ></input> <input type="hidden" value="'+r(s(null!=t?t.related_notes_module:t,t))+'" name="note_module" id="note_module" ></input> <div class="pL10 pR10" style="padding-left: 12px;" id="notes-element-parent"> <table width="'+r(s(null!=t?t.addNoteWidth:t,t))+'" cellpadding="0" cellspacing="0" border="0" style="border-spacing:0px;"> <tr id="title_tr"> <td><input onfocus="Notes.initNote(\'open\');" class="nobdr w100p p5 lineHgt20 f14" style="height:30px; box-sizing: border-box;" id="note_process" data-zcqa="notesProcess" placeholder="'+r(a.getI18n.call(o,"crm.general.addnote",{name:"getI18n",hash:{},data:i}))+'..." ></td> </tr> <tr> <td id="note_parent_td"><table width="100%" cellpadding="0" cellspacing="0" id="note_content" style="display: none;"> <tbody> <tr> <td id="notesTitleSec"><span class="dim" id="dvcreatenotespan" style="display: none;">'+r(a.getI18n.call(o,"crm.note.title",{name:"getI18n",hash:{},data:i}))+'</span> <span id="dummyspanWidth" class="f14"></span> <span id="showHideTitle" class="fL" style="display: none;"> <input type="text" value="" tabindex="1000" maxlength="120" class="addNotesTitle ellipsistext bold lh20 f14" placeholder="'+r(a.getI18n.call(o,"crm.general.addtitle",{name:"getI18n",hash:{},data:i}))+'..." name="note_subject" id="note_subject" onkeypress="if(event.keyCode==13){Notes.addNote();this.blur();}" onblur="Notes.notesTitleChk();" onkeydown="Notes.editNotesTitle(\'add\');"> </span> <div class="cB"></div> </td> </tr> <tr> <td><div class="w100per feed_newpost_textarea_bg openNotes"> <div class="notescontent-revamp w100per"> <textarea tabindex="1000" class="nobdr w100p f15 robotoRegular dvpT0" style="height:60px; overflow:auto !important; resize:vertical !important;padding: 5px;" id="noteContentTxt" data-zcqa="notesContentTxt" onclick="bindMentions(this,\'noteContentTxt\');"></textarea>  </div> <div class="notesbuttonlayer-revamp flexAlignCenter spaceBetween feedButtonLayer"> <div class="flexAlignCenter"> <a id="note_desktop" tabIndex="-1" class="attachFileNew dF alignCenter oH pR" href="javascript:;"> <input tabIndex="-1" name="notefile" class="smFile file0 h20" id="noteAttachFile" data-zcqa="notesAttachFile"> <span id=\'noteAttachMoreFiles\' class=\'hide zDattachment dIB\'></span><span id="noteAttachFiles" class="zDattachment"></span></input> <span class="f12 feedsGrayclr dvnotesgray">'+r(a.getI18n.call(o,"crm.label.attach.file",{name:"getI18n",hash:{},data:i}))+'</span> </a> <div id="addTitleSpan" class="pL7 mL7 mT1"><span class="pointer f12 feedsGrayclr" data-zcqa="notesaddTitle" onclick="Notes.initNote(\'addtitle\')">'+r(a.getI18n.call(o,"crm.general.addtitle",{name:"getI18n",hash:{},data:i}))+"</span></div> </div> "+(null!=(l=a.ifNotEquals.call(o,null!=t?t.isClientPortalUser:t,"true",{name:"ifNotEquals",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?l:"")+' <div class="dF"> <input type="button" tabindex="1002" class="newgraybtn newgraynotesbtn bt-mediumnewgraybtn" id="cancel_comment" data-zcqa="notesCancelComment" onclick="Notes.resetFileCount();Notes.initNote(\'close\');" value="'+r(a.getI18n.call(o,"crm.button.cancel",{name:"getI18n",hash:{},data:i}))+'"> <input id="save_comment" tabindex="1001" data-zcqa="notesSaveComment" type="button" class="primarybtn mR0 primarynotesbtn bt-mediumprimarybtn" value="'+r(a.getI18n.call(o,"crm.button.save",{name:"getI18n",hash:{},data:i}))+'" '+(null!=(l=a.if.call(o,a.checkStorage.call(o,{name:"checkStorage",hash:{},data:i}),{name:"if",hash:{},fn:e.program(4,i,0),inverse:e.program(6,i,0),data:i}))?l:"")+'> </div> </div> </tr> <tr> <td><div id="alreadyAttached" class="pT10 w100per"></div> </tr> <tr><td><div id="addAttachment"> <span id="showErrorMsg"></span> <div class="addAttachmentCtnNewFeeds" id="addAttachmentCtnNewFeeds"></div> <div id="noteMoreFiles" class="attachzone" ></div> </div> </td> </tr> </tbody> </table></td> </tr> </table> </div> </div> </div> <div class="cB"></div> <div id="attributionDetails">&nbsp;</div> '},useData:!0}),t.CrmNotes_DetailsPage=e({1:function(e,t,a,n,i){return' <div class="ntit f15 feedsTextclr cP" onClick="toggleNotes();"> '},3:function(e,t,a,n,i){return' <div class="ntit f15 feedsTextclr cP" onClick="Notes.toggleNotes();"> '},5:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.lambda,o=e.escapeExpression;return' <div class="dF justifyFlexEnd pR"> <div id="comboBox" class="pR" onclick="Notes.showOptions(this);sE(event)"> '+(null!=(l=a.ifEquals.call(s,"sel",null!=t?t.recentSelectClass:t,{name:"ifEquals",hash:{},fn:e.program(6,i,0),inverse:e.program(9,i,0),data:i}))?l:"")+' <span id="downArrow" data-zcqa="notesOrderChange" class="dIB crmcssBaseIcon zcicn-arrow-solid-down-sm pA"></span> </div> <div class="OptionlistNotesNew pA whiteBg  zI10 dN" style="border: 1px solid #E8E8E8;width: auto;" data-close="true"> '+(null!=(l=a.if.call(s,null!=t?t.isFilter:t,{name:"if",hash:{},fn:e.program(12,i,0),inverse:e.noop,data:i}))?l:"")+' <ul class="recentNotesList mL0 mR0 pL0 pR0 pB0 mT5 mB5"> <li class="col333 p5 pL0 pR20 cP '+o(r(null!=t?t.recentSelectClass:t,t))+'" onclick="Notes.toogleNotesVersion(this);" id="allNotes"><span class="dIB"></span>'+o(a.getI18n.call(s,"crm.note.recent.first",{name:"getI18n",hash:{},data:i}))+'</li> <li class="col333 p5 pL0 pR20 cP '+o(r(null!=t?t.recentClass:t,t))+'" onclick="Notes.toogleNotesVersion(this);" id="accountsNotesonly"><span class="dIB"></span>'+o(a.getI18n.call(s,"crm.note.recent.last",{name:"getI18n",hash:{},data:i}))+"</li> </ul> </div> </div> "},6:function(e,t,a,n,i){var l;return" "+(null!=(l=a.getUserDetail.call(null!=t?t:{},"detailView_newUI",{name:"getUserDetail",hash:{},fn:e.program(7,i,0),inverse:e.noop,data:i}))?l:"")+" "},7:function(e,t,a,n,i){return" "+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.note.recent.first",{name:"getI18n",hash:{},data:i}))+" "},9:function(e,t,a,n,i){var l;return" "+(null!=(l=a.getUserDetail.call(null!=t?t:{},"detailView_newUI",{name:"getUserDetail",hash:{},fn:e.program(10,i,0),inverse:e.noop,data:i}))?l:"")+" "},10:function(e,t,a,n,i){return" "+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.note.recent.last",{name:"getI18n",hash:{},data:i}))+" "},12:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression,o=null!=t?t:{};return' <ul class="mL0 mR0 pL0 pR0 pB5 mT5 mB5 p0 bbdd" onclick="sE(event)"> <li class="col333 p5 pL0 pR20 cP '+r(s(null!=t?t.allnotesSelect:t,t))+'" onClick="Notes.selectBox(\''+(null!=(l=s(null!=t?t.related_notes_entityId:t,t))?l:"")+'\',this);" id="allNotes"><span class="dIB"></span>'+r(a.getI18n.call(o,"crm.label.all",{name:"getI18n",hash:{},data:i}))+"</li> "+(null!=(l=a.ifEquals.call(o,!0,null!=t?t.showModuleOnlyNotes:t,{name:"ifEquals",hash:{},fn:e.program(13,i,0),inverse:e.noop,data:i}))?l:"")+" "+(null!=(l=a.ifEquals.call(o,!0,null!=t?t.showProjectNotes:t,{name:"ifEquals",hash:{},fn:e.program(15,i,0),inverse:e.noop,data:i}))?l:"")+' <li style="display:none;"><p id="notesTypeHolder" isallnotes="'+r(s(null!=t?t.isallnotes:t,t))+'" style="display:none;">'+r(s(null!=t?t.content:t,t))+"</p></li> </ul> "},13:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression;return' <li class="col333 p5 pL0 pR20 cP '+r(s(null!=t?t.contactsSelect:t,t))+'" onClick="Notes.selectBox(\''+(null!=(l=s(null!=t?t.related_notes_entityId:t,t))?l:"")+'\',this);" id="accountsNotesonly"><span class="dIB"></span>'+r(a.getI18n.call(null!=t?t:{},"crm.territory.label.only",null!=t?t.tab_label:t,{name:"getI18n",hash:{},data:i}))+"</li> "},15:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression;return' <li class="col333 p5 pL0 pR20 cP '+r(s(null!=t?t.projectsSelect:t,t))+'" onClick="Notes.selectBox(\''+(null!=(l=s(null!=t?t.related_notes_entityId:t,t))?l:"")+'\',this);" id="projectNotesOnly"><span class="dIB"></span>'+r(a.getI18n.call(null!=t?t:{},"crm.territory.label.only","Projects",{name:"getI18n",hash:{},data:i}))+' <i onmouseenter="zctt.showtt(I18n.getMsg(\'crm.project.sync.notes.info\'))" onmouseleave="zctt.hidett();" class="icon_roundinfo cP dIB mL5 vam"></i> </li> '},17:function(e,t,a,n,i){var l;return" "+(null!=(l=a.if.call(null!=t?t:{},null!=t?t.addNewNote:t,{name:"if",hash:{},fn:e.program(18,i,0),inverse:e.noop,data:i}))?l:"")+" "},18:function(e,t,a,n,i){var l;return" "+(null!=(l=e.invokePartial(n.addnewNotes,t,{name:"addnewNotes",data:i,helpers:a,partials:n,decorators:e.decorators}))?l:"")+" "},20:function(e,t,a,n,i){var l;return" "+(null!=(l=a.if.call(null!=t?t:{},null!=t?t.isMore:t,{name:"if",hash:{},fn:e.program(21,i,0),inverse:e.noop,data:i}))?l:"")+" "},21:function(e,t,a,n,i){var l;return" "+(null!=(l=e.invokePartial(n.showMore,t,{name:"showMore",data:i,helpers:a,partials:n,decorators:e.decorators}))?l:"")+" "},23:function(e,t,a,n,i){var l;return" "+(null!=(l=a.if.call(null!=t?t:{},null!=t?t.addNewNote:t,{name:"if",hash:{},fn:e.program(18,i,0),inverse:e.noop,data:i}))?l:"")+" </div> <div class='cB'></div> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression,o=null!=t?t:{};return' <input type="hidden" id="TotalNotesCount" value="'+r(s(null!=t?t.TotalNotesCount:t,t))+'" ></input> <input type="hidden" id="currentCount" value="'+r(s(null!=t?t.currentCount:t,t))+'" ></input> <table class="'+r(s(null!=t?t.showMoreWidth:t,t))+" "+r(s(null!=t?t.selectClass:t,t))+' dvnotesTable dvcompHeader" cellpadding="0" cellspacing="0"> <input type="hidden" id="model" value="'+r(s(null!=t?t.selectValue:t,t))+"\" ></input> <tbody> <tr><td class='NoteHeadtitle'> "+(null!=(l=a.ifEquals.call(o,"true",null!=t?t.isPrintAction:t,{name:"ifEquals",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))?l:"")+" "+r(a.getI18n.call(o,"crm.label.notes",{name:"getI18n",hash:{},data:i}))+" </div> </td> <td class='NoteHeadDropDown'> "+(null!=(l=a.unless.call(o,null!=t?t.isPrintAction:t,{name:"unless",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))?l:"")+' </td></tr></tbody> </table> <div id="toggleNotes" class="'+r(s(null!=t?t.showMoreWidth:t,t))+' flex-grid-skeleton mT15 mB0"> '+(null!=(l=a.ifCondLogic.call(o,null!=t?t.isOlderNotes:t,"=",!0,"||",null!=t?t.isOlderVersionNotes:t,"=",!0,{name:"ifCondLogic",hash:{},fn:e.program(17,i,0),inverse:e.program(20,i,0),data:i}))?l:"")+' <input type="hidden" name="tIdx" id="tIdx" value="'+(null!=(l=s(null!=t?t.tIdx:t,t))?l:"")+'" ></input> <div class="actnotes fL '+r(s(null!=t?t.showMoreWidth:t,t))+'" id="actnotes"> '+(null!=(l=e.invokePartial(n.actnotesDetailsPage,t,{name:"actnotesDetailsPage",data:i,helpers:a,partials:n,decorators:e.decorators}))?l:"")+" </div> "+(null!=(l=a.ifCondLogic.call(o,null!=t?t.isOlderNotes:t,"=",!0,"||",null!=t?t.isOlderVersionNotes:t,"=",!0,{name:"ifCondLogic",hash:{},fn:e.program(20,i,0),inverse:e.program(23,i,0),data:i}))?l:"")+" "},usePartial:!0,useData:!0}),t.CrmNotes_DetailsPageNotesList=e({1:function(e,t,a,n,i,l,s){var r,o=null!=t?t:{};return" "+(null!=(r=a.if.call(o,null!=s[1]?s[1].isOlderVersionNotes:s[1],{name:"if",hash:{},fn:e.program(2,i,0,l,s),inverse:e.program(6,i,0,l,s),data:i}))?r:"")+" "+(null!=(r=e.invokePartial(n.actnotesSinglePage,t,{name:"actnotesSinglePage",data:i,helpers:a,partials:n,decorators:e.decorators}))?r:"")+" "+(null!=(r=a.if.call(o,null!=s[1]?s[1].isOlderVersionNotes:s[1],{name:"if",hash:{},fn:e.program(10,i,0,l,s),inverse:e.program(14,i,0,l,s),data:i}))?r:"")+" "},2:function(e,t,a,n,i,l,s){var r;return" "+(null!=(r=a.if.call(null!=t?t:{},null!=s[1]?s[1].isFirstTime:s[1],{name:"if",hash:{},fn:e.program(3,i,0,l,s),inverse:e.noop,data:i}))?r:"")+" "},3:function(e,t,a,n,i,l,s){var r;return" "+(null!=(r=a.logicalOper.call(null!=t?t:{},i&&i.index,"==",null!=s[1]?s[1].OldHidden:s[1],{name:"logicalOper",hash:{},fn:e.program(4,i,0,l,s),inverse:e.noop,data:i}))?r:"")+" "},4:function(e,t,a,n,i){return' <div id="hiddenNotes" style="display:none;" > '},6:function(e,t,a,n,i,l,s){var r;return" "+(null!=(r=a.if.call(null!=t?t:{},null!=s[1]?s[1].isFirstTime:s[1],{name:"if",hash:{},fn:e.program(7,i,0,l,s),inverse:e.noop,data:i}))?r:"")+" "},7:function(e,t,a,n,i){var l;return" "+(null!=(l=a.if.call(null!=t?t:{},i&&i.first,{name:"if",hash:{},fn:e.program(8,i,0),inverse:e.noop,data:i}))?l:"")+" "},8:function(e,t,a,n,i){return' <div id="hiddenNotes" style="display:none;"> '},10:function(e,t,a,n,i,l,s){var r;return" "+(null!=(r=a.if.call(null!=t?t:{},null!=s[1]?s[1].isFirstTime:s[1],{name:"if",hash:{},fn:e.program(11,i,0,l,s),inverse:e.noop,data:i}))?r:"")+" "},11:function(e,t,a,n,i){var l;return" "+(null!=(l=a.if.call(null!=t?t:{},i&&i.last,{name:"if",hash:{},fn:e.program(12,i,0),inverse:e.noop,data:i}))?l:"")+" "},12:function(e,t,a,n,i){return" </div> "},14:function(e,t,a,n,i,l,s){var r;return" "+(null!=(r=a.if.call(null!=t?t:{},null!=s[1]?s[1].isFirstTime:s[1],{name:"if",hash:{},fn:e.program(15,i,0,l,s),inverse:e.noop,data:i}))?r:"")+" "},15:function(e,t,a,n,i,l,s){var r;return" "+(null!=(r=a.logicalOper.call(null!=t?t:{},i&&i.index,"==",null!=s[1]?s[1].hiddenLimit:s[1],{name:"logicalOper",hash:{},fn:e.program(12,i,0,l,s),inverse:e.noop,data:i}))?r:"")+" "},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i,l,s){var r,o=null!=t?t:{};return'  <link href="'+e.escapeExpression(a.getStaticCssPathFromHelper.call(o,"zohocrm_maps.css",{name:"getStaticCssPathFromHelper",hash:{},data:i}))+'" rel="stylesheet" type="text/css" /> '+(null!=(r=a.each.call(o,null!=t?t.notes:t,{name:"each",hash:{},fn:e.program(1,i,0,l,s),inverse:e.noop,data:i}))?r:"")+" "},usePartial:!0,useData:!0,useDepths:!0}),t.CrmNotes_DetailsPageOlder=e({1:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression;return' <div class="mT30 pR dvmT0"> <div id="comboBox" class="fR mL10 cP pR nobdr dvmR0" onclick="Notes.showOptions(this);sE(event)"> <span id="downArrow" data-zcqa="notesOrderChange" class="fR mT5 mB3 notesArrowDownNew" style="margin-left: 5px; opacity: 0.7;"></span> </div> <div class="OptionlistNotesNew pA whiteBg  zI10 hide" style="border: 1px solid #E8E8E8;width: auto;"> '+(null!=(l=a.if.call(s,null!=t?t.isFilter:t,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i}))?l:"")+' </ul> <ul class="recentNotesList mL0 mR0 pL0 pR0 pB0 mT5 mB5"> <li class="col333 p5 pL0 pR20 cP sel" onclick="Notes.toogleNotesVersion(this);" id="allNotes"><span class="dIB"></span>'+r(a.getI18n.call(s,"crm.note.recent.first",{name:"getI18n",hash:{},data:i}))+'</li> <li class="col333 p5 pL0 pR20 cP" onclick="Notes.toogleNotesVersion(this);" id="accountsNotesonly"><span class="dIB"></span>'+r(a.getI18n.call(s,"crm.note.recent.last",{name:"getI18n",hash:{},data:i}))+"</li> </ul> </div> </div> "},2:function(e,t,a,n,i){var l;return" "+(null!=(l=a.if.call(null!=t?t:{},null!=t?t.isAllNotes:t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.program(5,i,0),data:i}))?l:"")+" "},3:function(e,t,a,n,i){var l,s=e.lambda,r=null!=t?t:{},o=e.escapeExpression;return' <ul class="mL0 mR0 pL0 pR0 pB5 mT5 mB5 p0 bbdd" onclick="sE(event)"> <li class="col333 p5 pL0 pR20 cP sel" onClick="Notes.selectBox(\''+(null!=(l=s(null!=t?t.related_notes_entityId:t,t))?l:"")+'\',this);" id="allNotes"><span class="dIB"></span>'+o(a.getI18n.call(r,"crm.label.all",{name:"getI18n",hash:{},data:i}))+'</li> <li class="col333 p5 pL0 pR20 cP" onClick="Notes.selectBox(\''+(null!=(l=s(null!=t?t.related_notes_entityId:t,t))?l:"")+'\',this);" id="accountsNotesonly"><span class="dIB"></span>'+o(a.getI18n.call(r,"crm.territory.label.only",null!=t?t.tab_label:t,{name:"getI18n",hash:{},data:i}))+'</li> <li style="display:none;"><p id="notesTypeHolder" isallnotes="true" style="display:none;">'+o(a.getI18n.call(r,"crm.label.all",{name:"getI18n",hash:{},data:i}))+"</p></li> </ul> "},5:function(e,t,a,n,i){var l,s=e.lambda,r=null!=t?t:{},o=e.escapeExpression;return' <ul class="m0 p0 pB5 bbdd" onclick="sE(event)"> <li class="col333 p5 pL0 pR20 cP" onClick="Notes.selectBox(\''+(null!=(l=s(null!=t?t.related_notes_entityId:t,t))?l:"")+'\',this);" id="allNotes"><span class="dIB"></span>'+o(a.getI18n.call(r,"crm.label.all",{name:"getI18n",hash:{},data:i}))+'</li> <li class="col333 p5 pL0 pR20 cP sel" onClick="Notes.selectBox(\''+(null!=(l=s(null!=t?t.related_notes_entityId:t,t))?l:"")+'\',this);" id="accountsNotesonly"><span class="dIB"></span>'+o(a.getI18n.call(r,"crm.territory.label.only",null!=t?t.tab_label:t,{name:"getI18n",hash:{},data:i}))+'</li> <li style="display:none;"><p id="notesTypeHolder" isallnotes="false" style="display:none;">'+o(a.getI18n.call(r,"crm.territory.label.only",null!=t?t.tab_label:t,{name:"getI18n",hash:{},data:i}))+"</p></li> </li> "},7:function(e,t,a,n,i){var l,s=e.lambda,r=null!=t?t:{},o=e.escapeExpression;return' <div id="fullInfoNoteDiv" class="fL w100per mB15" style="box-sizing: border-box;background:#eff2f4"> <div> <input type="hidden" value="'+(null!=(l=s(null!=t?t.userID:t,t))?l:"")+'" name="curUserId" id="curUserId" ></input> <input type="hidden" value="null" name="editNoteId" id="editNoteId" ></input> <input type="hidden" value="'+(null!=(l=s(null!=t?t.related_notes_entityId:t,t))?l:"")+'" name="relNEID" id="relNEID" ></input> <input type="hidden" value="'+(null!=(l=s(null!=t?t.entityMap_rel_notes_entId:t,t))?l:"")+'" name="relParentId" id="relParentId" ></input> <input type="hidden" value="'+(null!=(l=s(null!=t?t.related_notes_module:t,t))?l:"")+'" name="note_module" id="note_module" ></input> \x3c!--<div class="fL cB pL10 singleNoteBorder"><div class="feedsImgHolder32"><img align="absmiddle" src="'+(null!=(l=s(null!=t?t.CONTACTSURL:t,t))?l:"")+"?ID="+(null!=(l=s(null!=t?t.zuId:t,t))?l:"")+'&amp;fs=thumb"></div></div>--\x3e <div class="fL" style="padding-left: 12px;"> <table width="574" cellpadding="0" cellspacing="0" border="0" style="border-spacing:0px;"> <tr id="title_tr"> <td><input onclick="Notes.initNote(\'open\');" class="nobdr w100p p5 lineHgt20 f14" style="height:30px; box-sizing: border-box;" id="note_process" data-zcqa="notesProcess" placeholder="'+o(a.getI18n.call(r,"crm.general.addnote",{name:"getI18n",hash:{},data:i}))+'..." ></td> </tr> <tr> <td id="note_parent_td"><table width="100%" cellpadding="0" cellspacing="0" id="note_content" style="display: none;"> <tbody> <tr> <td id="notesTitleSec"><span class="dim" id="dvcreatenotespan" style="display: none;">'+(null!=(l=a.getI18n.call(r,"crm.note.title",{name:"getI18n",hash:{},data:i}))?l:"")+'</span> <span id="dummyspanWidth" class="f14"></span> <span id="showHideTitle" class="fL" style="display: none;"> <span class="f13 notesgray fL pR10 pT3 mB5 pointer" style="display: none;" id="addtitletop" onclick="Notes.showNotesTitle()">Add title</span> <input type="text" tabindex="999" value="" maxlength="120" class="addNotesTitle ellipsistext bold lh20 f14" placeholder="'+o(a.getI18n.call(r,"crm.general.addtitle",{name:"getI18n",hash:{},data:i}))+'..." name="note_subject" id="note_subject" onkeypress="if(event.keyCode==13){Notes.addNote();this.blur();}" onblur="Notes.notesTitleChk();" onkeydown="Notes.editNotesTitle(\'add\');"></td> </span> <div class="cB"></div> </tr> <tr> <td><div class="w100p"> <div class="w100p"> <textarea tabindex="1000" class="nobdr w100p f14 lineHgt20 mT5" style="height:60px; overflow:auto !important; resize:vertical !important;padding: 5px;" id="noteContentTxt" data-zcqa="notesContentTxt" onclick="bindMentions(this,\'noteContentTxt\');"></textarea> </div> <div class="pT10"> <a id="note_desktop" tabIndex="-1" class="attachFileNew positionRelative vmiddle detailsPageAttach fL oH pT10" style="width: 100px;" href="javascript:;"> <input type="file" tabIndex="-1" name="notefile" class="smFile file0 h20" id="noteAttachFile" data-zcqa="notesAttachFile" onChange="Notes.hideAttachError();Notes.addFile(this);" style="background: none;left: 0; top: 6px;"> <span id=\'noteAttachMoreFiles\' class=\'hide zDattachment dIB\'></span><span id="noteAttachFiles" class="zDattachment dIB fL"></span></input> <span class="fL f13 notesgray pL5 pR10" style="line-height:14px;">'+(null!=(l=a.getI18n.call(r,"crm.label.attach.file",{name:"getI18n",hash:{},data:i}))?l:"")+'</span> </a> <div class="fL pL5 pT10 dvpL20" id="addTitleSpan" style="line-height:14px;"><span class="fL pointer f13 notesgray" data-zcqa="notesaddTitle" onclick="Notes.initNote(\'addtitle\')">'+o(a.getI18n.call(r,"crm.general.addtitle",{name:"getI18n",hash:{},data:i}))+'</span></div> <div class="fR"> <input type="button" tabindex="1002" class="newgraybtn newgraynotesbtn bt-mediumnewgraybtn" id="cancel_comment" data-zcqa="notesCancelComment" onclick="Notes.resetFileCount();Notes.initNote(\'close\');" value="'+o(a.getI18n.call(r,"crm.button.cancel",{name:"getI18n",hash:{},data:i}))+'"> <input id="save_comment" tabindex="1001" data-zcqa="notesSaveComment" type="button" class="primarybtn mR0 primarynotesbtn bt-mediumprimarybtn" value="'+o(a.getI18n.call(r,"crm.button.save",{name:"getI18n",hash:{},data:i}))+'" '+(null!=(l=a.if.call(r,a.checkStorage.call(r,{name:"checkStorage",hash:{},data:i}),{name:"if",hash:{},fn:e.program(8,i,0),inverse:e.program(10,i,0),data:i}))?l:"")+'> </div> <div class="cB"></div> </div> </td> </tr> <tr> <td><div id="alreadyAttached" class="pT10 w100per"></div> </tr> <tr><td><div id="addAttachment"> <span id="showErrorMsg"></span> <div class="addAttachmentCtnNewFeeds" id="addAttachmentCtnNewFeeds"></div> <div id="noteMoreFiles"></div> </div> </td> </tr> </tbody> </table></td> </tr> </table> </div> </div> </div> <div class="cB"></div> '},8:function(e,t,a,n,i){return'onclick="Crm.showStorageExceedPopup();" '},10:function(e,t,a,n,i){return" onclick=\"Crm.trackAction('Note Added');Crm.trackSpotLightAction('Note Added');return Notes.addNoteWithAttachment($(this).closest('table'))\" "},12:function(e,t,a,n,i,l,s){var r,o=null!=t?t:{},c=e.lambda;return" "+(null!=(r=a.if.call(o,null!=s[1]?s[1].isFirstTime:s[1],{name:"if",hash:{},fn:e.program(13,i,0,l,s),inverse:e.noop,data:i}))?r:"")+' <div id = "'+(null!=(r=c(null!=t?t.nId:t,t))?r:"")+'" class="singleNoteBorder addedNotesList pT7 pB7"> <table cellpadding="0" cellspacing="0" class="w100p"> <tr class="n pR w100p"> '+(null!=(r=a.unless.call(o,null!=t?t.isPrintAction:t,{name:"unless",hash:{},fn:e.program(16,i,0,l,s),inverse:e.noop,data:i}))?r:"")+' <td class=" pL10 pR10 w100p pR" > <div class="pB5 cBafter"> <div id="ntitle_'+(null!=(r=c(null!=t?t.nId:t,t))?r:"")+'" class="bold wwbw f14 dispAddNotesTitle">'+(null!=(r=c(null!=t?t.noteTitle:t,t))?r:"")+'</div> <pre id="noteContWithRegex_'+(null!=(r=c(null!=t?t.nId:t,t))?r:"")+'" style="display: none;" wrap="soft">'+(null!=(r=c(null!=t?t.noteContentWithRegex:t,t))?r:"")+"</pre> "+(null!=(r=a.ifEquals.call(o,null!=t?t.setype:t,"Notes",{name:"ifEquals",hash:{},fn:e.program(18,i,0,l,s),inverse:e.program(23,i,0,l,s),data:i}))?r:"")+" "+(null!=(r=a.if.call(o,null!=t?t.isVoiceNote:t,{name:"if",hash:{},fn:e.program(32,i,0,l,s),inverse:e.noop,data:i}))?r:"")+" "+(null!=(r=a.if.call(o,null!=t?t.haveAttachment:t,{name:"if",hash:{},fn:e.program(34,i,0,l,s),inverse:e.noop,data:i}))?r:"")+" "+(null!=(r=a.if.call(o,null!=t?t.isPrintAction:t,{name:"if",hash:{},fn:e.program(46,i,0,l,s),inverse:e.program(48,i,0,l,s),data:i}))?r:"")+" </td> </tr> </table> </div> "+(null!=(r=a.if.call(o,null!=s[1]?s[1].isFirstTime:s[1],{name:"if",hash:{},fn:e.program(60,i,0,l,s),inverse:e.noop,data:i}))?r:"")+" "},13:function(e,t,a,n,i,l,s){var r;return" "+(null!=(r=a.logicalOper.call(null!=t?t:{},i&&i.index,"==",null!=s[2]?s[2].OldHidden:s[2],{name:"logicalOper",hash:{},fn:e.program(14,i,0,l,s),inverse:e.noop,data:i}))?r:"")+" "},14:function(e,t,a,n,i){return' <div id="hiddenNotes" style="display:none;"> '},16:function(e,t,a,n,i,l,s){var r,o=e.lambda;return' <td class="aligntop notesUserImg"><span class="feedsImgHolder16 dIB mT7 pL5"><img align="absmiddle" src="'+(null!=(r=o(null!=s[2]?s[2].CONTACTSURL:s[2],t))?r:"")+"?ID="+(null!=(r=o(null!=t?t.modifiedZuid:t,t))?r:"")+'&amp;fs=thumb"></span></td> '},18:function(e,t,a,n,i){var l;return" "+(null!=(l=a.if.call(null!=t?t:{},null!=t?t.displayShortNote:t,{name:"if",hash:{},fn:e.program(19,i,0),inverse:e.program(21,i,0),data:i}))?l:"")+" "},19:function(e,t,a,n,i){var l,s=e.lambda;return' <span id="tempNote_'+(null!=(l=s(null!=t?t.nId:t,t))?l:"")+'"><pre id="tncontent_'+(null!=(l=s(null!=t?t.nId:t,t))?l:"")+'" class="pre f14 fL cB col333 p5 pT10" wrap="soft">'+(null!=(l=s(null!=t?t.tempNote:t,t))?l:"")+'... <a href="javascript:void(0)" class="notesSeemore" onclick="show(\'fullNote_'+(null!=(l=s(null!=t?t.nId:t,t))?l:"")+"'),hide('tempNote_"+(null!=(l=s(null!=t?t.nId:t,t))?l:"")+"')\">"+(null!=(l=a.getI18n.call(null!=t?t:{},"crm.label.More",{name:"getI18n",hash:{},data:i}))?l:"")+'</a></pre><span style="clear:left;"></span></span> <span id="fullNote_'+(null!=(l=s(null!=t?t.nId:t,t))?l:"")+'" style="display: none"><pre id="ncontent_'+(null!=(l=s(null!=t?t.nId:t,t))?l:"")+'" class="pre f14 fL cB col333 p5 pT10" wrap="soft">'+(null!=(l=s(null!=t?t.noteContent:t,t))?l:"")+'</pre> <span style="clear:left;"></span></span> '},21:function(e,t,a,n,i){var l,s=e.lambda;return' <pre id="ncontent_'+(null!=(l=s(null!=t?t.nId:t,t))?l:"")+'" wrap="soft" class="pre f14 fL cB col333 p5 pT10">'+(null!=(l=s(null!=t?t.noteContent:t,t))?l:"")+'</pre><span style="clear:left;"></span> '},23:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression,o=null!=t?t:{};return' <span class="map-marker-greenbg"></span> <span id="checkintitle_'+r(s(null!=t?t.nId:t,t))+'" class="color_3 vat"> <span class="vat">'+r(a.getI18n.call(o,"crm.label.checkedin",{name:"getI18n",hash:{},data:i}))+"</span> "+(null!=(l=a.if.call(o,null!=t?t.isPrimAvail:t,{name:"if",hash:{},fn:e.program(24,i,0),inverse:e.noop,data:i}))?l:"")+(null!=(l=a.if.call(o,null!=t?t.isValidCity:t,{name:"if",hash:{},fn:e.program(30,i,0),inverse:e.noop,data:i}))?l:"")+' </span> \x3c!-- <span class="notesdgray-txt vat"></span> --\x3e <div class="cB"></div> </div> <div id="checkincontent_'+r(s(null!=t?t.nId:t,t))+'" wrap="soft" class="pre lh18 cB col333">'+r(s(null!=t?t.noteContent:t,t))+'</div> <input type="hidden" id="checkin_latitude" data-params=\'{"noteId":"'+r(s(null!=t?t.nId:t,t))+'", "latitude":"'+r(s(null!=t?t.latitude:t,t))+'", "longitude":"'+r(s(null!=t?t.longitude:t,t))+'"}\'></input> <a href="https://www.google.com/maps?q='+r(s(null!=t?t.latitude:t,t))+","+r(s(null!=t?t.longitude:t,t))+'" target="_blank" title="'+r(s(null!=t?t.checkInCity:t,t))+'"><div id="mapContainer_'+r(s(null!=t?t.nId:t,t))+'" class="mapContCheckin mT15 mB10 cP"></div></a> '},24:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression,o=e.lambda;return' <a class="notesbluetxt vat" href="'+r(a.getCrmBasePath.call(s,{name:"getCrmBasePath",hash:{},data:i}))+"/EntityInfo.do?module="+r(o(null!=t?t.primModule:t,t))+"&amp;id="+r(o(null!=t?t.primEntId:t,t))+'" title="'+r(o(null!=t?t.primEntName:t,t))+'" target="_blank">'+r(o(null!=t?t.primEntName:t,t))+"</a> "+(null!=(l=a.if.call(s,null!=t?t.isSecAvail:t,{name:"if",hash:{},fn:e.program(25,i,0),inverse:e.noop,data:i}))?l:"")+" "},25:function(e,t,a,n,i){var l;return' <span class="notesbluetxt vat">(</span>'+(null!=(l=a.ifEquals.call(null!=t?t:{},null!=t?t.primModule:t,"Leads",{name:"ifEquals",hash:{},fn:e.program(26,i,0),inverse:e.program(28,i,0),data:i}))?l:"")+'<span class="notesbluetxt vat">)</span> '},26:function(e,t,a,n,i){return'<span class="notesdgray-txt vat">'+e.escapeExpression(e.lambda(null!=t?t.secEntName:t,t))+"</span>"},28:function(e,t,a,n,i){var l=e.escapeExpression,s=e.lambda;return'<a class="notesbluetxt vat" href="'+l(a.getCrmBasePath.call(null!=t?t:{},{name:"getCrmBasePath",hash:{},data:i}))+"/EntityInfo.do?module="+l(s(null!=t?t.secModule:t,t))+"&amp;id="+l(s(null!=t?t.secEntId:t,t))+'" title="'+l(s(null!=t?t.secEntName:t,t))+'" target="_blank">'+l(s(null!=t?t.secEntName:t,t))+"</a>"},30:function(e,t,a,n,i){var l=e.lambda,s=e.escapeExpression;return' <span class="notesbluetxt vat">@</span> <a class="notesbluetxt vat" href="https://www.google.com/maps?q='+s(l(null!=t?t.latitude:t,t))+","+s(l(null!=t?t.longitude:t,t))+'" target="_blank" title="'+s(l(null!=t?t.checkInCity:t,t))+'">'+s(l(null!=t?t.checkInCity:t,t))+"</a> "},32:function(e,t,a,n,i){var l,s=e.lambda,r=null!=t?t:{},o=e.escapeExpression;return' <a class="f13 dIB p5" id="voice_'+(null!=(l=s(null!=t?t.nId:t,t))?l:"")+'" href="javascript:showExportMenu(\''+o(a.getCrmBasePath.call(r,{name:"getCrmBasePath",hash:{},data:i}))+"/specific/ViewAttachment?fileId="+o(s(null!=t?t.fileId:t,t))+"&module="+(null!=(l=s(null!=t?t.relModuleName:t,t))?l:"")+"&nId="+(null!=(l=s(null!=t?t.nId:t,t))?l:"")+"&parentId="+(null!=(l=s(null!=t?t.mainEntId:t,t))?l:"")+"&creatorId="+(null!=(l=s(null!=t?t.creatorId:t,t))?l:"")+"&id="+(null!=(l=s(null!=t?t.nId:t,t))?l:"")+"&name="+o(s(null!=t?t.fileName:t,t))+"','"+(null!=(l=s(null!=t?t.fileType:t,t))?l:"")+"','voice_"+(null!=(l=s(null!=t?t.nId:t,t))?l:"")+"',undefined,'true');\"> "+o(s(null!=t?t.fileName:t,t))+' <img src="'+(null!=(l=a.img_link.call(r,{name:"img_link",hash:{},data:i}))?l:"")+'/voicefileicon_ec9b195_.png" class="" border="0" hspace="3" align="absmiddle"> </a> '},34:function(e,t,a,n,i,l,s){var r;return' <div id="noteAttachments" class="imagePreview fL cB"> <input type="hidden" name="totalFilesSize" id="totalFilesSize" value="'+(null!=(r=e.lambda(null!=t?t.totalFilesSize:t,t))?r:"")+'" ></input> '+(null!=(r=a.each.call(null!=t?t:{},null!=t?t.attachments:t,{name:"each",hash:{},fn:e.program(35,i,0,l,s),inverse:e.noop,data:i}))?r:"")+" </div> "},35:function(e,t,a,n,i,l,s){var r,o=e.lambda;return' <div class="singlePreview"> <table> <tr><td style="width:100px; height:100px"> '+(null!=(r=a.if.call(null!=t?t:{},null!=t?t.isImage:t,{name:"if",hash:{},fn:e.program(36,i,0,l,s),inverse:e.program(38,i,0,l,s),data:i}))?r:"")+' </td></tr> <tr><td class="fileTitle" title="'+(null!=(r=o(null!=t?t.attachFileName:t,t))?r:"")+" "+(null!=(r=o(null!=t?t.attachFileSize:t,t))?r:"")+'"> '+(null!=(r=o(null!=t?t.trimmedFileName:t,t))?r:"")+' <input type="hidden" name="fileSize" id="fileSize" value="'+(null!=(r=o(null!=t?t.sizeInBytes:t,t))?r:"")+'" ></input> <input type="hidden" name="attachmentId" id="attachmentId" value="'+(null!=(r=o(null!=t?t.attachmentId:t,t))?r:"")+'" ></input> </td></tr> </table> </div> '},36:function(e,t,a,n,i,l,s){var r,o=e.lambda,c=null!=t?t:{},d=e.escapeExpression;return' <a title="'+(null!=(r=o(null!=t?t.attachFileName:t,t))?r:"")+'" class="imageGallery" rel="'+(null!=(r=o(null!=s[2]?s[2].nId:s[2],t))?r:"")+'" href="'+d(a.getCrmBasePath.call(c,{name:"getCrmBasePath",hash:{},data:i}))+"/ViewImage?fileId="+(null!=(r=o(null!=t?t.attachFileId:t,t))?r:"")+"&name="+(null!=(r=o(null!=t?t.attachFileName:t,t))?r:"")+"&downLoadMode=default&creatorId="+(null!=(r=o(null!=t?t.creatorId:t,t))?r:"")+"&parentId="+(null!=(r=o(null!=s[2]?s[2].mainEntId:s[2],t))?r:"")+"&nId="+(null!=(r=o(null!=s[2]?s[2].nId:s[2],t))?r:"")+"&module="+(null!=(r=o(null!=s[2]?s[2].relModuleName:s[2],t))?r:"")+'"> <img src="'+d(a.getCrmBasePath.call(c,{name:"getCrmBasePath",hash:{},data:i}))+"/ViewImage?fileId="+(null!=(r=o(null!=t?t.attachFileId:t,t))?r:"")+"&name="+(null!=(r=o(null!=t?t.attachFileName:t,t))?r:"")+"&downLoadMode=default&creatorId="+(null!=(r=o(null!=t?t.creatorId:t,t))?r:"")+"&parentId="+(null!=(r=o(null!=s[2]?s[2].mainEntId:s[2],t))?r:"")+"&nId="+(null!=(r=o(null!=s[2]?s[2].nId:s[2],t))?r:"")+"&module="+(null!=(r=o(null!=s[2]?s[2].relModuleName:s[2],t))?r:"")+'" style="max-width:100px;max-height:100px;" title="'+(null!=(r=o(null!=t?t.attachFileName:t,t))?r:"")+'"> </a> '},38:function(e,t,a,n,i,l,s){var r;return" "+(null!=(r=a.if_nq.call(null!=t?t:{},null!=t?t.downLoadMode:t,"",{name:"if_nq",hash:{},fn:e.program(39,i,0,l,s),inverse:e.program(44,i,0,l,s),data:i}))?r:"")+" "},39:function(e,t,a,n,i,l,s){var r;return" "+(null!=(r=a.ifEquals.call(null!=t?t:{},null!=t?t.downLoadMode:t,"pdfViewPlugin",{name:"ifEquals",hash:{},fn:e.program(40,i,0,l,s),inverse:e.program(42,i,0,l,s),data:i}))?r:"")+" "},40:function(e,t,a,n,i,l,s){var r,o=e.lambda;return' <a  class="cP" onClick="javascript:openSheetForExport(\''+e.escapeExpression(a.getCrmBasePath.call(null!=t?t:{},{name:"getCrmBasePath",hash:{},data:i}))+"/specific/ViewAttachment?fileId="+(null!=(r=o(null!=t?t.attachFileId:t,t))?r:"")+"&module="+(null!=(r=o(null!=s[4]?s[4].relModuleName:s[4],t))?r:"")+"&nId="+(null!=(r=o(null!=s[4]?s[4].nId:s[4],t))?r:"")+"&parentId="+(null!=(r=o(null!=s[4]?s[4].mainEntId:s[4],t))?r:"")+"&creatorId="+(null!=(r=o(null!=t?t.creatorId:t,t))?r:"")+"&id="+(null!=(r=o(null!=t?t.attachmentId:t,t))?r:"")+"&name="+(null!=(r=o(null!=t?t.attachFileName:t,t))?r:"")+"&downLoadMode=pdfViewPlugin','pdfViewPlugin');sE(event);\"  title=\""+(null!=(r=o(null!=t?t.attachFileName:t,t))?r:"")+'"> '+(null!=(r=o(null!=t?t.trimmedFileName:t,t))?r:"")+"</a> "},42:function(e,t,a,n,i,l,s){var r,o=e.lambda;return' <a  class="cP" onClick="javascript:openSheetForExport(\''+e.escapeExpression(a.getCrmBasePath.call(null!=t?t:{},{name:"getCrmBasePath",hash:{},data:i}))+"/specific/ViewAttachment?fileId="+(null!=(r=o(null!=t?t.attachFileId:t,t))?r:"")+"&module="+(null!=(r=o(null!=s[4]?s[4].relModuleName:s[4],t))?r:"")+"&nId="+(null!=(r=o(null!=s[4]?s[4].nId:s[4],t))?r:"")+"&parentId="+(null!=(r=o(null!=s[4]?s[4].mainEntId:s[4],t))?r:"")+"&creatorId="+(null!=(r=o(null!=t?t.creatorId:t,t))?r:"")+"&id="+(null!=(r=o(null!=t?t.attachmentId:t,t))?r:"")+"&name="+(null!=(r=o(null!=t?t.attachFileName:t,t))?r:"")+"&downLoadMode="+(null!=(r=o(null!=t?t.downLoadMode:t,t))?r:"")+'\');sE(event);"  title="'+(null!=(r=o(null!=t?t.attachFileName:t,t))?r:"")+'"> '+(null!=(r=o(null!=t?t.trimmedFileName:t,t))?r:"")+"</a> "},44:function(e,t,a,n,i,l,s){var r,o=e.lambda;return' <a href="'+e.escapeExpression(a.getCrmBasePath.call(null!=t?t:{},{name:"getCrmBasePath",hash:{},data:i}))+"/specific/ViewAttachment?fileId="+(null!=(r=o(null!=t?t.attachFileId:t,t))?r:"")+"&module="+(null!=(r=o(null!=s[4]?s[4].relModuleName:s[4],t))?r:"")+"&nId="+(null!=(r=o(null!=s[4]?s[4].nId:s[4],t))?r:"")+"&parentId="+(null!=(r=o(null!=s[4]?s[4].mainEntId:s[4],t))?r:"")+"&creatorId="+(null!=(r=o(null!=t?t.creatorId:t,t))?r:"")+"&id="+(null!=(r=o(null!=t?t.attachmentId:t,t))?r:"")+"&name="+(null!=(r=o(null!=t?t.attachFileName:t,t))?r:"")+'&downLoadMode=default" title="Download"> '+(null!=(r=o(null!=t?t.trimmedFileName:t,t))?r:"")+"</a> "},46:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression;return' <span class="mT7 dB f13 gray2 fL cB pL0"><span class="fL">'+r(s(null!=t?t.dispModuleName:t,t))+'</span><span class="pL5 pR5 fL">-</span><span class="fL">'+r(s(null!=t?t.mainEntityName:t,t))+'</span><span class="fL pL10 pR10">&#x2022;</span><span class="fL pR5 pL10">'+r(s(null!=t?t.modifiedDateFull:t,t))+'</span> <span class="fL pR5 notesgray dIB">'+r(a.getI18n.call(null!=t?t:{},"crm.label.simply.by",{name:"getI18n",hash:{},data:i}))+'</span> <span class="fL pR5 notesgray dIB" data-title="'+r(s(null!=t?t.modiName:t,t))+'">'+(null!=(l=s(null!=t?t.modiName:t,t))?l:"")+"</span> </span> "},48:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression,o=null!=t?t:{};return' <span class="note_edit_div w100p dIB fL cB" style="box-sizing: border-box;"></span> <div class="mT5 dB f13 gray2 fL cB lh20 notesBtmDet"> <span class="notesModdet fL"> <span class="notesgray fL ellipsistext" style="max-width: 100px;" title="'+r(s(null!=t?t.dispModuleName:t,t))+'">'+r(s(null!=t?t.dispModuleName:t,t))+'</span> <span class="pL5 pR5 fL">-</span> <a class="f13 notesbluetxt fL smalledit ellipsistext" data-zcqa="notesModule" style="max-width: 100px;" href="'+r(a.getCrmBasePath.call(o,{name:"getCrmBasePath",hash:{},data:i}))+"/EntityInfo.do?module="+(null!=(l=s(null!=t?t.relModuleName:t,t))?l:"")+"&id="+(null!=(l=s(null!=t?t.mainEntId:t,t))?l:"")+'" target=_blanks title="'+r(s(null!=t?t.mainEntityName:t,t))+'">'+r(s(null!=t?t.mainEntityName:t,t))+'</a> </span> <span class="fL pL10 pR10 notesDot">&#x2022;</span> '+(null!=(l=a.ifEquals.call(o,null!=t?t.setype:t,"Notes",{name:"ifEquals",hash:{},fn:e.program(49,i,0),inverse:e.noop,data:i}))?l:"")+' <span class="fL pR5 notesgray dIB" data-title="'+r(s(null!=t?t.modifiedDateFull:t,t))+'"><span class="timerIcon-notes mT2 fL mR5"></span>'+r(s(null!=t?t.modifiedDate:t,t))+'</span> <span class="fL pR5 notesgray dIB">'+r(a.getI18n.call(o,"crm.label.simply.by",{name:"getI18n",hash:{},data:i}))+'</span> <span class="fL pR5 notesgray dIB" data-title="'+r(s(null!=t?t.modiName:t,t))+'"><span class="mT2 fl mR5"></span>'+(null!=(l=s(null!=t?t.modiName:t,t))?l:"")+"</span> "+(null!=(l=a.ifEquals.call(o,null!=t?t.setype:t,"Notes",{name:"ifEquals",hash:{},fn:e.program(51,i,0),inverse:e.noop,data:i}))?l:"")+' </div> <span class="note_reply_div w100p dIB fL cB mT8 p10" style="display:none;"></span> '},49:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression;return' <a href="javascript:;" class="fL smalledit notesgray ellipsistext" data-zcqa="notesAdd" style="max-width: 100px;" onclick="Notes.doReply(\''+r(s(null!=t?t.mainEntId:t,t))+"','"+(null!=(l=s(null!=t?t.mainEntityNameJS:t,t))?l:"")+"','"+r(s(null!=t?t.relModuleName:t,t))+"',this,'"+r(s(null!=t?t.i18nModName:t,t))+"')\"> "+r(a.getI18n.call(null!=t?t:{},"crm.label.add.note",{name:"getI18n",hash:{},data:i}))+'</a><span class="fL pL10 pR10 notesDot">&#x2022;</span> '},51:function(e,t,a,n,i){var l,s=null!=t?t:{};return' <span class="pA whiteBg notesActionMoreDot notes_actions_container" id="noteOper_'+(null!=(l=e.lambda(null!=t?t.nId:t,t))?l:"")+'" style="visibility: hidden;top: 10px;right: 0px"> '+(null!=(l=a.if.call(s,null!=t?t.isEditAllowed:t,{name:"if",hash:{},fn:e.program(52,i,0),inverse:e.program(54,i,0),data:i}))?l:"")+" "+(null!=(l=a.if.call(s,null!=t?t.isDelAllowed:t,{name:"if",hash:{},fn:e.program(56,i,0),inverse:e.program(58,i,0),data:i}))?l:"")+" </span> "},52:function(e,t,a,n,i){var l,s=e.lambda;return" <a href=\"javascript:Notes.editNote('"+(null!=(l=s(null!=t?t.nId:t,t))?l:"")+"','"+(null!=(l=s(null!=t?t.seId:t,t))?l:"")+"','"+(null!=(l=s(null!=t?t.relModuleName:t,t))?l:"")+'\');" class="notesActionbtn mR10" data-zcqa="notesEdit"><span class="svgIconsImg edit-Icon-new mT2 vmiddle"></span></a> '},54:function(e,t,a,n,i){return' <span class="disabled notesActionbtn mR10"><span class="svgIconsImg mT2 edit-Icon-new vmiddle" style="opacity:0.3"></span></span> '},56:function(e,t,a,n,i){var l,s=e.lambda;return' <a href="javascript:;" class="notesActionbtnDel" data-zcqa="notesDelete" data-onclick="javascript:Notes.deleteNote(\''+(null!=(l=s(null!=t?t.nId:t,t))?l:"")+"','"+(null!=(l=s(null!=t?t.mainEntId:t,t))?l:"")+"','"+e.escapeExpression(s(null!=t?t.relModuleName:t,t))+"');\" onclick=\"showDeletePopup('ntitle_"+(null!=(l=s(null!=t?t.nId:t,t))?l:"")+"', 'crm.label.yes', '', '', this, 'Notes');\"><span class=\"svgIconsImg mT2 delete-Icon-new vmiddle\"></span></a> "},58:function(e,t,a,n,i){return' <span class="disabled notesActionbtnDel"><span class="svgIconsImg mT2 delete-Icon-new vmiddle mL2" style="opacity:0.3"></span></span> '},60:function(e,t,a,n,i){var l;return" "+(null!=(l=a.if.call(null!=t?t:{},i&&i.last,{name:"if",hash:{},fn:e.program(61,i,0),inverse:e.noop,data:i}))?l:"")+" "},61:function(e,t,a,n,i){return" </div> "},63:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression,o=null!=t?t:{};return' <div id="showMore" class="fL w100per mB1" style="background: #f8f8f8;margin-top: -1px;"> <table class="w600" cellpadding="0" cellspacing="0"> <tr> <td class="vat p10"> <div class="pL10 notesbluetxt pointer f13 " onclick="Notes.loadNotes(\''+(null!=(l=s(null!=t?t.related_notes_entityId:t,t))?l:"")+"',true,'"+r(s(null!=t?t.related_notes_module:t,t))+"','"+(null!=(l=s(null!=t?t.entityMap_rel_notes_entId:t,t))?l:"")+"')\">"+r(a.getI18n.call(o,"crm.note.view.previous",{name:"getI18n",hash:{},data:i}))+'</div> </td><td  class="vat p10"> <div class="fR graytxt pR10 pointer f13"> <span id=\'dispcurrentCount\'>'+r(s(null!=t?t.currentCount:t,t))+'</span> <span class="notesgray">'+r(a.getI18n.call(o,"of",{name:"getI18n",hash:{},data:i}))+"</span> <span id='dispTotalNotesCount'>"+r(s(null!=t?t.TotalNotesCount:t,t))+"</span> </div> </td></tr> </table> </div> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i,l,s){var r,o=e.lambda,c=e.escapeExpression,d=null!=t?t:{};return'  <input type="hidden" id="TotalNotesCount" value="'+c(o(null!=t?t.TotalNotesCount:t,t))+'" ></input> <input type="hidden" id="currentCount" value="'+c(o(null!=t?t.currentCount:t,t))+'" ></input> <input type="hidden" id="model" value="detailPanelOlder"></input> <table class="w600" cellpadding="0" cellspacing="0"> <tbody> <tr><td> <div class="ntit mT15 dvmT0" onClick="toggleNotes();" style="cursor: pointer;"> '+c(a.getI18n.call(d,"crm.label.notes",{name:"getI18n",hash:{},data:i}))+" \x3c!-- "+c(a.getI18n.call(d,"crm.label.notes.modules",null!=t?t.tab_label:t,{name:"getI18n",hash:{},data:i}))+" --\x3e </div> </td> <td> "+(null!=(r=a.unless.call(d,null!=t?t.isPrintAction:t,{name:"unless",hash:{},fn:e.program(1,i,0,l,s),inverse:e.noop,data:i}))?r:"")+' </td> </tr></tbody> </table> <div id="toggleNotes" class="fL mB20 w600"> '+(null!=(r=a.if.call(d,null!=t?t.addNewNote:t,{name:"if",hash:{},fn:e.program(7,i,0,l,s),inverse:e.noop,data:i}))?r:"")+' <input type="hidden" name="tIdx" id="tIdx" value="'+(null!=(r=o(null!=t?t.tIdx:t,t))?r:"")+'" ></input> <div class="actnotes fL w600" id="actnotes"> '+(null!=(r=a.each.call(d,null!=t?t.notes:t,{name:"each",hash:{},fn:e.program(12,i,0,l,s),inverse:e.noop,data:i}))?r:"")+" </div> "+(null!=(r=a.if.call(d,null!=t?t.isMore:t,{name:"if",hash:{},fn:e.program(63,i,0,l,s),inverse:e.noop,data:i}))?r:"")+" </div> "},useData:!0,useDepths:!0}),t.CrmNotes_DetailsPageSingleNote=e({1:function(e,t,a,n,i){var l=e.escapeExpression;return' <td class="aligntop notesUserImg"><span class="feedsImgHolder16 dIB mT7 pL5"><img align="absmiddle" src="'+l(e.lambda(null!=t?t.CONTACTSURL:t,t))+"?ID="+l(a.encodeURL.call(null!=t?t:{},null!=t?t.modifiedZuid:t,{name:"encodeURL",hash:{},data:i}))+'&amp;fs=thumb"></span></td> '},3:function(e,t,a,n,i){return' <div id="ntitle_'+e.escapeExpression(e.lambda(null!=t?t.nId:t,t))+'" class="bold wwbw f14 dispAddNotesTitle" style="display:block"></div> '},5:function(e,t,a,n,i){var l,s=e.lambda;return' <div id="ntitle_'+e.escapeExpression(s(null!=t?t.nId:t,t))+'" class="bold wwbw f14 dispAddNotesTitle">'+(null!=(l=s(null!=t?t.noteTitle:t,t))?l:"")+"</div> "},7:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.lambda;return" "+(null!=(l=a.if.call(s,null!=t?t.displayShortNote:t,{name:"if",hash:{},fn:e.program(8,i,0),inverse:e.noop,data:i}))?l:"")+' <pre id="ncontent_'+e.escapeExpression(r(null!=t?t.nId:t,t))+'" wrap="soft" class="pre f14 fL cB col333 p5 pT10 '+(null!=(l=a.if.call(s,null!=t?t.displayShortNote:t,{name:"if",hash:{},fn:e.program(10,i,0),inverse:e.noop,data:i}))?l:"")+'">'+(null!=(l=r(null!=t?t.noteContent:t,t))?l:"")+'</pre><span style="clear:left;"></span> '},8:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression,o=null!=t?t:{};return' <span id="tempNote_'+r(s(null!=t?t.nId:t,t))+'"><pre id="tncontent_'+r(s(null!=t?t.nId:t,t))+'" class="pre f14 fL cB col333 p5 pT10" wrap="soft">'+(null!=(l=s(null!=t?t.tempNote:t,t))?l:"")+'... <a href="javascript:void(0)" class="notesSeemore" onclick="show(\'ncontent_'+r(a.encodeJS.call(o,null!=t?t.nId:t,{name:"encodeJS",hash:{},data:i}))+"'),hide('tempNote_"+r(a.encodeJS.call(o,null!=t?t.nId:t,{name:"encodeJS",hash:{},data:i}))+"')\">"+r(a.getI18n.call(o,"crm.label.More",{name:"getI18n",hash:{},data:i}))+'</a></pre><span style="clear:left;"></span></span> '},10:function(e,t,a,n,i){return" dN "},12:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression,o=null!=t?t:{};return' <span class="map-marker-greenbg"></span> <span id="checkintitle_'+r(s(null!=t?t.nId:t,t))+'" class="color_3 vat"> <span class="vat">'+r(a.getI18n.call(o,"crm.label.checkedin",{name:"getI18n",hash:{},data:i}))+"</span> "+(null!=(l=a.if.call(o,null!=t?t.isPrimAvail:t,{name:"if",hash:{},fn:e.program(13,i,0),inverse:e.noop,data:i}))?l:"")+(null!=(l=a.if.call(o,null!=t?t.isValidCity:t,{name:"if",hash:{},fn:e.program(19,i,0),inverse:e.noop,data:i}))?l:"")+' </span> <div class="cB"></div> </div> <div id="checkincontent_'+r(s(null!=t?t.nId:t,t))+'" wrap="soft" class="pre lh18 cB col333">'+(null!=(l=s(null!=t?t.noteContent:t,t))?l:"")+'</div> <input type="hidden" id="checkin_latitude" data-params=\'{"noteId":"'+r(s(null!=t?t.nId:t,t))+'", "latitude":"'+r(s(null!=t?t.latitude:t,t))+'", "longitude":"'+r(s(null!=t?t.longitude:t,t))+"\"}'></input> <a  onclick=\"findMap('"+r(a.encodeJS.call(o,null!=t?t.latitude:t,{name:"encodeJS",hash:{},data:i}))+","+r(a.encodeJS.call(o,null!=t?t.longitude:t,{name:"encodeJS",hash:{},data:i}))+"','','location')\"; title=\""+r(s(null!=t?t.checkInCity:t,t))+'"><div id="mapContainer_'+r(s(null!=t?t.nId:t,t))+'" class="mapContCheckin mT15 mB10 cP"></div></a> '},13:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression,o=e.lambda;return' <a class="notesbluetxt vat" href="'+r(a.getCrmBasePath.call(s,{name:"getCrmBasePath",hash:{},data:i}))+"/EntityInfo.do?module="+r(a.encodeURIComponent.call(s,null!=t?t.primModule:t,{name:"encodeURIComponent",hash:{},data:i}))+"&amp;id="+r(a.encodeURL.call(s,null!=t?t.primEntId:t,{name:"encodeURL",hash:{},data:i}))+'" title="'+r(o(null!=t?t.primEntName:t,t))+'" target="_blank">'+r(o(null!=t?t.primEntName:t,t))+"</a> "+(null!=(l=a.if.call(s,null!=t?t.isSecAvail:t,{name:"if",hash:{},fn:e.program(14,i,0),inverse:e.noop,data:i}))?l:"")+" "},14:function(e,t,a,n,i){var l;return' <span class="notesbluetxt vat">(</span>'+(null!=(l=a.ifEquals.call(null!=t?t:{},null!=t?t.primModule:t,"Leads",{name:"ifEquals",hash:{},fn:e.program(15,i,0),inverse:e.program(17,i,0),data:i}))?l:"")+'<span class="notesbluetxt vat">)</span> '},15:function(e,t,a,n,i){return'<span class="notesdgray-txt vat">'+e.escapeExpression(e.lambda(null!=t?t.secEntName:t,t))+"</span>"},17:function(e,t,a,n,i){var l=null!=t?t:{},s=e.escapeExpression,r=e.lambda;return'<a class="notesbluetxt vat" href="'+s(a.getCrmBasePath.call(l,{name:"getCrmBasePath",hash:{},data:i}))+"/EntityInfo.do?module="+s(a.encodeURIComponent.call(l,null!=t?t.secModule:t,{name:"encodeURIComponent",hash:{},data:i}))+"&amp;id="+s(a.encodeURL.call(l,null!=t?t.secEntId:t,{name:"encodeURL",hash:{},data:i}))+'" title="'+s(r(null!=t?t.secEntName:t,t))+'" target="_blank">'+s(r(null!=t?t.secEntName:t,t))+"</a>"},19:function(e,t,a,n,i){var l=null!=t?t:{},s=e.escapeExpression,r=e.lambda;return' <span class="notesbluetxt vat">@</span> <a class="notesbluetxt vat" onclick="findMap(\''+s(a.encodeJS.call(l,null!=t?t.latitude:t,{name:"encodeJS",hash:{},data:i}))+","+s(a.encodeJS.call(l,null!=t?t.longitude:t,{name:"encodeJS",hash:{},data:i}))+"','','location');\" title=\""+s(r(null!=t?t.checkInCity:t,t))+'">'+s(r(null!=t?t.checkInCity:t,t))+"</a> "},21:function(e,t,a,n,i){var l=e.lambda,s=e.escapeExpression,r=null!=t?t:{};return' <a class="f13 dIB p5" id="voice_'+s(l(null!=t?t.nId:t,t))+'" href="javascript:showExportMenu(\''+s(a.getCrmBasePath.call(r,{name:"getCrmBasePath",hash:{},data:i}))+"/specific/ViewAttachment?fileId="+s(a.encodeJS.call(r,null!=t?t.fileId:t,{name:"encodeJS",hash:{},data:i}))+"&module="+s(a.encodeJS.call(r,null!=t?t.relModuleName:t,{name:"encodeJS",hash:{},data:i}))+"&nId="+s(a.encodeJS.call(r,null!=t?t.nId:t,{name:"encodeJS",hash:{},data:i}))+"&parentId="+s(a.encodeJS.call(r,null!=t?t.mainEntId:t,{name:"encodeJS",hash:{},data:i}))+"&creatorId="+s(a.encodeJS.call(r,null!=t?t.creatorId:t,{name:"encodeJS",hash:{},data:i}))+"&id="+s(a.encodeJS.call(r,null!=t?t.nId:t,{name:"encodeJS",hash:{},data:i}))+"&name="+s(a.encodeJS.call(r,null!=t?t.fileName:t,{name:"encodeJS",hash:{},data:i}))+"','"+s(a.encodeJS.call(r,null!=t?t.fileType:t,{name:"encodeJS",hash:{},data:i}))+"','voice_"+s(a.encodeJS.call(r,null!=t?t.nId:t,{name:"encodeJS",hash:{},data:i}))+"',undefined,'true');\"> "+s(l(null!=t?t.fileName:t,t))+' <img src="'+s(a.img_link.call(r,{name:"img_link",hash:{},data:i}))+'/voicefileicon_ec9b195_.png" class="" border="0" hspace="3" align="absmiddle"> </a> <span class="cP icon_play notPlaying dIB" onclick="playAudio(this,\''+s(a.encodeJS.call(r,null!=t?t.nId:t,{name:"encodeJS",hash:{},data:i}))+'\')" style="margin-left: 10px;" onmouseover="setPlayOrPauseMessage(this);" title="Play"></span> <audio id="'+s(l(null!=t?t.nId:t,t))+'_audio" class="mt10" hidden="true" src="'+s(a.getCrmBasePath.call(r,{name:"getCrmBasePath",hash:{},data:i}))+"/specific/ViewAttachment?fileId="+s(a.encodeURL.call(r,null!=t?t.fileId:t,{name:"encodeURL",hash:{},data:i}))+"&module="+s(a.encodeURL.call(r,null!=t?t.relModuleName:t,{name:"encodeURL",hash:{},data:i}))+"&parentId="+s(a.encodeURL.call(r,null!=t?t.mainEntId:t,{name:"encodeURL",hash:{},data:i}))+"&creatorId="+s(a.encodeURL.call(r,null!=t?t.creatorId:t,{name:"encodeURL",hash:{},data:i}))+"&id="+s(a.encodeURL.call(r,null!=t?t.nId:t,{name:"encodeURL",hash:{},data:i}))+"&name="+s(a.encodeURL.call(r,null!=t?t.fileName:t,{name:"encodeURL",hash:{},data:i}))+'" controls="" preload="none"></audio> '},23:function(e,t,a,n,i,l,s){var r;return' <div id="noteAttachments" class="imagePreview fL cB"> <input type="hidden" name="totalFilesSize" id="totalFilesSize" value="'+e.escapeExpression(e.lambda(null!=t?t.totalFilesSize:t,t))+'" ></input> '+(null!=(r=a.each.call(null!=t?t:{},null!=t?t.attachments:t,{name:"each",hash:{},fn:e.program(24,i,0,l,s),inverse:e.noop,data:i}))?r:"")+" </div> "},24:function(e,t,a,n,i,l,s){var r,o=null!=t?t:{},c=e.lambda,d=e.escapeExpression;return' <div class="singlePreview"> <table> <tr class="attachmentHover"><td style="width:100px; height:100px" class="attachment-notes pR"> '+(null!=(r=a.if.call(o,null!=t?t.isImage:t,{name:"if",hash:{},fn:e.program(25,i,0,l,s),inverse:e.program(27,i,0,l,s),data:i}))?r:"")+' </td></tr> <tr><td class="fileTitle vH p0 pR" title="'+d(c(null!=t?t.attachFileName:t,t))+" "+d(c(null!=t?t.attachFileSize:t,t))+'"> <div class="NotesActionButtons vH"> <div class="footerAnimate aligncenter dB" style="position: absolute;"> '+(null!=(r=a.if.call(o,null!=t?t.isImage:t,{name:"if",hash:{},fn:e.program(32,i,0,l,s),inverse:e.program(34,i,0,l,s),data:i}))?r:"")+" <a onmouseover=\"crmui.toolTip_show(this,'center','"+d(a.getI18n.call(o,"crm.view.attachment.download",{name:"getI18n",hash:{},data:i}))+'\')" onmouseout="crmui.toolTip_hide()" class="download-icon-attachment dN" href="'+d(a.getCrmBasePath.call(o,{name:"getCrmBasePath",hash:{},data:i}))+"/specific/ViewAttachment?fileId="+d(a.encodeURL.call(o,null!=t?t.attachFileId:t,{name:"encodeURL",hash:{},data:i}))+"&module="+d(a.encodeURIComponent.call(o,null!=s[1]?s[1].relModuleName:s[1],{name:"encodeURIComponent",hash:{},data:i}))+"&nId="+d(a.encodeURL.call(o,null!=s[1]?s[1].nId:s[1],{name:"encodeURL",hash:{},data:i}))+"&parentId="+d(a.encodeURL.call(o,null!=s[1]?s[1].mainEntId:s[1],{name:"encodeURL",hash:{},data:i}))+"&creatorId="+d(a.encodeURL.call(o,null!=t?t.creatorId:t,{name:"encodeURL",hash:{},data:i}))+"&id="+d(a.encodeURL.call(o,null!=t?t.attachmentId:t,{name:"encodeURL",hash:{},data:i}))+"&name="+d(a.encodeURIComponent.call(o,null!=t?t.attachFileName:t,{name:"encodeURIComponent",hash:{},data:i}))+'&downLoadMode=default" data-zcqa="download-icon-attachment_'+d(c(null!=t?t.attachFileName:t,t))+'"></a> </div> </div> <input type="hidden" name="fileSize" id="fileSize" value="'+d(c(null!=t?t.sizeInBytes:t,t))+'" ></input> <input type="hidden" name="attachmentId" id="attachmentId" value="'+d(c(null!=t?t.attachmentId:t,t))+'" ></input> </td></tr> </table> <span class="f13 aligncenter dB p5" title="'+d(c(null!=t?t.attachFileName:t,t))+" "+d(c(null!=t?t.attachFileSize:t,t))+'">'+d(c(null!=t?t.trimmedFileName:t,t))+"</span> </div> "},25:function(e,t,a,n,i,l,s){var r=e.lambda,o=e.escapeExpression,c=null!=t?t:{};return' <a title="'+o(r(null!=t?t.attachFileName:t,t))+'" class="imageGallery" rel="'+o(r(null!=t?t.nId:t,t))+'" href="'+o(a.getCrmBasePath.call(c,{name:"getCrmBasePath",hash:{},data:i}))+"/ViewImage?fileId="+o(a.encodeURL.call(c,null!=t?t.attachFileId:t,{name:"encodeURL",hash:{},data:i}))+"&name="+o(a.encodeURIComponent.call(c,null!=t?t.attachFileName:t,{name:"encodeURIComponent",hash:{},data:i}))+"&downLoadMode=default&creatorId="+o(a.encodeURL.call(c,null!=t?t.creatorId:t,{name:"encodeURL",hash:{},data:i}))+"&parentId="+o(a.encodeURL.call(c,null!=s[1]?s[1].mainEntId:s[1],{name:"encodeURL",hash:{},data:i}))+"&nId="+o(a.encodeURL.call(c,null!=s[1]?s[1].nId:s[1],{name:"encodeURL",hash:{},data:i}))+"&module="+o(a.encodeURIComponent.call(c,null!=s[1]?s[1].relModuleName:s[1],{name:"encodeURIComponent",hash:{},data:i}))+'"> <img src="'+o(a.getCrmBasePath.call(c,{name:"getCrmBasePath",hash:{},data:i}))+"/EntityImageAttach.do?&actionName=readImage&fileId="+o(a.encodeURL.call(c,null!=t?t.encAttachFileId:t,{name:"encodeURL",hash:{},data:i}))+"&entityId="+o(a.encodeURL.call(c,null!=s[1]?s[1].mainEntId:s[1],{name:"encodeURL",hash:{},data:i}))+"&action_module="+o(a.encodeURIComponent.call(c,null!=s[1]?s[1].relModuleName:s[1],{name:"encodeURIComponent",hash:{},data:i}))+'" style="max-width:100px;max-height:100px;" title="'+o(r(null!=t?t.attachFileName:t,t))+'"> </a> '},27:function(e,t,a,n,i,l,s){var r;return" "+(null!=(r=a.if_nq.call(null!=t?t:{},null!=t?t.downLoadMode:t,"",{name:"if_nq",hash:{},fn:e.program(28,i,0,l,s),inverse:e.program(30,i,0,l,s),data:i}))?r:"")+" "},28:function(e,t,a,n,i,l,s){var r=null!=t?t:{},o=e.escapeExpression,c=e.lambda;return' <a  class="cP" onClick="javascript:openSheetForExport(\''+o(a.getCrmBasePath.call(r,{name:"getCrmBasePath",hash:{},data:i}))+"/specific/ViewAttachment?fileId="+o(a.encodeJS.call(r,null!=t?t.attachFileId:t,{name:"encodeJS",hash:{},data:i}))+"&module="+o(a.encodeJS.call(r,null!=s[1]?s[1].relModuleName:s[1],{name:"encodeJS",hash:{},data:i}))+"&nId="+o(a.encodeJS.call(r,null!=s[1]?s[1].nId:s[1],{name:"encodeJS",hash:{},data:i}))+"&parentId="+o(a.encodeJS.call(r,null!=s[1]?s[1].mainEntId:s[1],{name:"encodeJS",hash:{},data:i}))+"&creatorId="+o(a.encodeJS.call(r,null!=t?t.creatorId:t,{name:"encodeJS",hash:{},data:i}))+"&id="+o(a.encodeJS.call(r,null!=t?t.attachmentId:t,{name:"encodeJS",hash:{},data:i}))+"&name="+o(a.encodeURIComponent.call(r,null!=t?t.attachFileName:t,{name:"encodeURIComponent",hash:{},data:i}))+"&downLoadMode="+o(a.encodeJS.call(r,null!=t?t.downLoadMode:t,{name:"encodeJS",hash:{},data:i}))+"','"+o(a.encodeJS.call(r,null!=t?t.downLoadMode:t,{name:"encodeJS",hash:{},data:i}))+'\');sE(event);"  title="'+o(c(null!=t?t.attachFileName:t,t))+'"> '+o(c(null!=t?t.trimmedFileName:t,t))+"</a> "},30:function(e,t,a,n,i,l,s){var r=null!=t?t:{},o=e.escapeExpression,c=e.lambda;return' <a href="'+o(a.getCrmBasePath.call(r,{name:"getCrmBasePath",hash:{},data:i}))+"/specific/ViewAttachment?fileId="+o(a.encodeURL.call(r,null!=t?t.attachFileId:t,{name:"encodeURL",hash:{},data:i}))+"&module="+o(a.encodeURIComponent.call(r,null!=s[1]?s[1].relModuleName:s[1],{name:"encodeURIComponent",hash:{},data:i}))+"&nId="+o(a.encodeURL.call(r,null!=s[1]?s[1].nId:s[1],{name:"encodeURL",hash:{},data:i}))+"&parentId="+o(a.encodeURL.call(r,null!=s[1]?s[1].mainEntId:s[1],{name:"encodeURL",hash:{},data:i}))+"&creatorId="+o(a.encodeURL.call(r,null!=t?t.creatorId:t,{name:"encodeURL",hash:{},data:i}))+"&id="+o(a.encodeURL.call(r,null!=t?t.attachmentId:t,{name:"encodeURL",hash:{},data:i}))+"&name="+o(a.encodeURIComponent.call(r,null!=t?t.attachFileName:t,{name:"encodeURIComponent",hash:{},data:i}))+'&downLoadMode=default" title="'+o(c(null!=t?t.trimmedFileName:t,t))+'"> '+o(c(null!=t?t.trimmedFileName:t,t))+"</a> "},32:function(e,t,a,n,i,l,s){var r=e.escapeExpression,o=null!=t?t:{};return' <a data-zcqa="'+r(e.lambda(null!=t?t.attachFileName:t,t))+'_view" class="view-icon-attachment cboxElement mR10 dIB" onmouseover="crmui.toolTip_show(this,\'center\',\''+r(a.getI18n.call(o,"crm.label.view",{name:"getI18n",hash:{},data:i}))+'\')" onmouseout="crmui.toolTip_hide()" href="'+r(a.getCrmBasePath.call(o,{name:"getCrmBasePath",hash:{},data:i}))+"/ViewImage?fileId="+r(a.encodeURL.call(o,null!=t?t.attachFileId:t,{name:"encodeURL",hash:{},data:i}))+"&name="+r(a.encodeURIComponent.call(o,null!=t?t.attachFileName:t,{name:"encodeURIComponent",hash:{},data:i}))+"&downLoadMode=default&creatorId="+r(a.encodeURL.call(o,null!=t?t.creatorId:t,{name:"encodeURL",hash:{},data:i}))+"&parentId="+r(a.encodeURL.call(o,null!=s[1]?s[1].mainEntId:s[1],{name:"encodeURL",hash:{},data:i}))+"&nId="+r(a.encodeURL.call(o,null!=s[1]?s[1].nId:s[1],{name:"encodeURL",hash:{},data:i}))+"&module="+r(a.encodeURIComponent.call(o,null!=s[1]?s[1].relModuleName:s[1],{name:"encodeURIComponent",hash:{},data:i}))+'"></a> '},34:function(e,t,a,n,i,l,s){var r;return" "+(null!=(r=a.if_nq.call(null!=t?t:{},null!=t?t.downLoadMode:t,"",{name:"if_nq",hash:{},fn:e.program(35,i,0,l,s),inverse:e.program(37,i,0,l,s),data:i}))?r:"")+" "},35:function(e,t,a,n,i,l,s){var r=e.escapeExpression,o=null!=t?t:{};return' <a data-zcqa="'+r(e.lambda(null!=t?t.attachFileName:t,t))+'_view" class="view-icon-attachment cboxElement mR10 dIB" onmouseover="crmui.toolTip_show(this,\'center\',\''+r(a.getI18n.call(o,"crm.label.view",{name:"getI18n",hash:{},data:i}))+'\')" onmouseout="crmui.toolTip_hide()" onClick="javascript:openSheetForExport(\''+r(a.getCrmBasePath.call(o,{name:"getCrmBasePath",hash:{},data:i}))+"/specific/ViewAttachment?fileId="+r(a.encodeJS.call(o,null!=t?t.attachFileId:t,{name:"encodeJS",hash:{},data:i}))+"&module="+r(a.encodeJS.call(o,null!=s[1]?s[1].relModuleName:s[1],{name:"encodeJS",hash:{},data:i}))+"&nId="+r(a.encodeJS.call(o,null!=s[1]?s[1].nId:s[1],{name:"encodeJS",hash:{},data:i}))+"&parentId="+r(a.encodeJS.call(o,null!=s[1]?s[1].mainEntId:s[1],{name:"encodeJS",hash:{},data:i}))+"&creatorId="+r(a.encodeJS.call(o,null!=t?t.creatorId:t,{name:"encodeJS",hash:{},data:i}))+"&id="+r(a.encodeJS.call(o,null!=t?t.attachmentId:t,{name:"encodeJS",hash:{},data:i}))+"&name="+r(a.encodeURIComponent.call(o,null!=t?t.attachFileName:t,{name:"encodeURIComponent",hash:{},data:i}))+"&downLoadMode="+r(a.encodeJS.call(o,null!=t?t.downLoadMode:t,{name:"encodeJS",hash:{},data:i}))+"','"+r(a.encodeJS.call(o,null!=t?t.downLoadMode:t,{name:"encodeJS",hash:{},data:i}))+"');sE(event);\" ></a> "},37:function(e,t,a,n,i,l,s){var r=null!=t?t:{},o=e.escapeExpression;return' <a href="'+o(a.getCrmBasePath.call(r,{name:"getCrmBasePath",hash:{},data:i}))+"/specific/ViewAttachment?fileId="+o(a.encodeURL.call(r,null!=t?t.attachFileId:t,{name:"encodeURL",hash:{},data:i}))+"&module="+o(a.encodeURIComponent.call(r,null!=s[1]?s[1].relModuleName:s[1],{name:"encodeURIComponent",hash:{},data:i}))+"&nId="+o(a.encodeURL.call(r,null!=s[1]?s[1].nId:s[1],{name:"encodeURL",hash:{},data:i}))+"&parentId="+o(a.encodeURL.call(r,null!=s[1]?s[1].mainEntId:s[1],{name:"encodeURL",hash:{},data:i}))+"&creatorId="+o(a.encodeURL.call(r,null!=t?t.creatorId:t,{name:"encodeURL",hash:{},data:i}))+"&id="+o(a.encodeURL.call(r,null!=t?t.attachmentId:t,{name:"encodeURL",hash:{},data:i}))+"&name="+o(a.encodeURIComponent.call(r,null!=t?t.attachFileName:t,{name:"encodeURIComponent",hash:{},data:i}))+'&downLoadMode=default" title="'+o(e.lambda(null!=t?t.trimmedFileName:t,t))+'"></a> '},39:function(e,t,a,n,i){var l=e.lambda,s=e.escapeExpression,r=null!=t?t:{};return' <span class="mT7 dB f13 gray2 fL cB pL0"><span class="fL">'+s(l(null!=t?t.dispModuleName:t,t))+'</span><span class="pL5 pR5 fL">-</span><span class="fL">'+s(l(null!=t?t.mainEntityName:t,t))+'</span><span class="fL pL10 pR10">&#x2022;</span><span class="fL pR5 pL10">'+s(l(null!=t?t.modifiedDateFull:t,t))+'</span> <span class="fL pR5 notesgray dIB">'+s(a.getI18n.call(r,"crm.label.simply.by",{name:"getI18n",hash:{},data:i}))+'</span> <span class="fL pR5 notesgray dIB cD" data-title="'+s(a.encodeHTML.call(r,null!=t?t.modiName:t,{name:"encodeHTML",hash:{},data:i}))+'">'+s(l(null!=t?t.modiName:t,t))+"</span> </span> "},41:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression,o=null!=t?t:{};return' <span class="note_edit_div w100p dIB fL cB" style="box-sizing: border-box;"></span> <div class="mT5 f13 gray2 fL cB lh20 notesBtmDet"> <span class="notesModdet fL"> <span class="notesgray fL ellipsistext cD" style="max-width: 100px;" title="'+r(s(null!=t?t.dispModuleName:t,t))+'">'+r(s(null!=t?t.dispModuleName:t,t))+'</span> <span class="pL5 pR5 fL">-</span> <a class="f13 notesbluetxt fL smalledit ellipsistext" data-zcqa="notesModule" onClick="Crm.trackSpotLightAction(\'Lookup Click\',{\'Module\':\''+r(s(null!=t?t.relModuleName:t,t))+'\'});" onmouseenter="crmLookupBusinessCard.showLookupDetails(this)" onmouseout="crmui.hideTooltip()" data-params=\'{ "module":"'+r(s(null!=t?t.relModuleName:t,t))+'","id":"'+r(s(null!=t?t.mainEntId:t,t))+'" }\' style="max-width: 100px;" href="'+r(a.getCrmBasePath.call(o,{name:"getCrmBasePath",hash:{},data:i}))+"/EntityInfo.do?module="+r(a.encodeURIComponent.call(o,null!=t?t.relModuleName:t,{name:"encodeURIComponent",hash:{},data:i}))+"&id="+r(a.encodeURL.call(o,null!=t?t.mainEntId:t,{name:"encodeURL",hash:{},data:i}))+'" target=_blanks title="'+r(s(null!=t?t.mainEntityName:t,t))+'">'+r(s(null!=t?t.mainEntityName:t,t))+"</a> "+(null!=(l=a.if.call(o,null!=t?t.notes_projectName:t,{name:"if",hash:{},fn:e.program(42,i,0),inverse:e.noop,data:i}))?l:"")+' </span> <span class="fL pL10 pR10 notesDot">&#x2022;</span> '+(null!=(l=a.ifEquals.call(o,null!=t?t.setype:t,"Notes",{name:"ifEquals",hash:{},fn:e.program(44,i,0),inverse:e.noop,data:i}))?l:"")+' <span class="fL pR5 notesgray dIB" data-title="'+r(s(null!=t?t.modifiedDateFull:t,t))+'"><span class="timerIcon-notes mT2 fL mR5"></span>'+r(s(null!=t?t.modifiedDate:t,t))+'</span> <span class="fL pR5 notesgray dIB">'+r(a.getI18n.call(o,"crm.label.simply.by",{name:"getI18n",hash:{},data:i}))+'</span> <span class="fL pR5 notesgray dIB" data-title="'+r(a.encodeHTML.call(o,null!=t?t.modiName:t,{name:"encodeHTML",hash:{},data:i}))+'">'+r(s(null!=t?t.modiName:t,t))+"</span> "+(null!=(l=a.if.call(o,null!=t?t.isSharedToClient:t,{name:"if",hash:{},fn:e.program(46,i,0),inverse:e.noop,data:i}))?l:"")+" "+(null!=(l=a.ifEquals.call(o,null!=t?t.setype:t,"Notes",{name:"ifEquals",hash:{},fn:e.program(50,i,0),inverse:e.noop,data:i}))?l:"")+' </div> <span class="note_reply_div w100p dIB fL cB mT8 p10" style="display:none;"></span> '},42:function(e,t,a,n,i){var l=e.escapeExpression,s=e.lambda;return' <span class="pL5 pR5 fL">-</span> <a class="f13 notesbluetxt fL smalledit ellipsistext" style="max-width: 100px;" href="'+l(a.getCrmBasePath.call(null!=t?t:{},{name:"getCrmBasePath",hash:{},data:i}))+"/ShowTab.do?module=Projects&amp;quickcreate=true&amp;projId="+l(s(null!=t?t.notes_projectId:t,t))+'&amp;tabToShow=dashboard" target="_blanks">'+l(s(null!=t?t.notes_projectName:t,t))+"</a> "},44:function(e,t,a,n,i){var l=null!=t?t:{},s=e.escapeExpression;return' <a href="javascript:;" class="fL smalledit notesgray ellipsistext newNoteAddCls" data-zcqa="notesAdd" style="max-width: 100px;" onclick="Notes.doReply(\''+s(a.encodeJS.call(l,null!=t?t.seId:t,{name:"encodeJS",hash:{},data:i}))+"','"+s(a.encodeJS.call(l,null!=t?t.relModuleName:t,{name:"encodeJS",hash:{},data:i}))+"')\"> "+s(a.getI18n.call(l,"crm.label.add.note",{name:"getI18n",hash:{},data:i}))+'</a><span class="fL pL10 pR10 notesDot newNoteAddCls">&#x2022;</span> '},46:function(e,t,a,n,i){var l;return" "+(null!=(l=a.unless.call(null!=t?t:{},null!=t?t.isClientPortalUser:t,{name:"unless",hash:{},fn:e.program(47,i,0),inverse:e.noop,data:i}))?l:"")+" "},47:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression,o=null!=t?t:{};return' <input type="hidden" id="nsharedtoclient_'+r(s(null!=t?t.nId:t,t))+'" ></input> '+(null!=(l=a.if.call(o,null!=t?t.isAddedByClient:t,{name:"if",hash:{},fn:e.program(48,i,0),inverse:e.noop,data:i}))?l:"")+' <span class="fL pR5 notesgray dIB" id= "shared_'+r(s(null!=t?t.nId:t,t))+'">'+r(a.getI18n.call(o,"custmr.prtl.notes.shrd.with.custmr",{name:"getI18n",hash:{},data:i}))+"</span> "},48:function(e,t,a,n,i){return' <input type="hidden" id="naddedbyclient_'+e.escapeExpression(e.lambda(null!=t?t.nId:t,t))+'"> '},50:function(e,t,a,n,i){var l,s=null!=t?t:{};return' <span class="pA whiteBg notes_actions_container" id="noteOper_'+e.escapeExpression(e.lambda(null!=t?t.nId:t,t))+'"  style="visibility: hidden;top: 10px;right: 0px"> '+(null!=(l=a.if.call(s,null!=t?t.isEditAllowed:t,{name:"if",hash:{},fn:e.program(51,i,0),inverse:e.program(53,i,0),data:i}))?l:"")+" "+(null!=(l=a.if.call(s,null!=t?t.isDelAllowed:t,{name:"if",hash:{},fn:e.program(55,i,0),inverse:e.program(57,i,0),data:i}))?l:"")+" </span> "},51:function(e,t,a,n,i){var l=null!=t?t:{},s=e.escapeExpression;return" <a href=\"javascript:Notes.editNote('"+s(a.encodeJS.call(l,null!=t?t.nId:t,{name:"encodeJS",hash:{},data:i}))+"','"+s(a.encodeJS.call(l,null!=t?t.seId:t,{name:"encodeJS",hash:{},data:i}))+"','"+s(a.encodeJS.call(l,null!=t?t.relModuleName:t,{name:"encodeJS",hash:{},data:i}))+'\');" class="notesActionbtn mR10" data-zcqa="notesEdit"><span class="svgIconsImg edit-Icon-new  vmiddle"></span></a> '},53:function(e,t,a,n,i){return' <span title="'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.tooltip.note.insufficient.permission",{name:"getI18n",hash:{},data:i}))+'" class="disabled notesActionbtn mR10"><span class="svgIconsImg  edit-Icon-new vmiddle" style="opacity:0.3"></span></span> '},55:function(e,t,a,n,i){var l=null!=t?t:{},s=e.escapeExpression;return' <a href="javascript:;" class="notesActionbtnDel" data-zcqa="notesDelete" data-onclick="javascript:Notes.deleteNote(\''+s(a.encodeJS.call(l,null!=t?t.nId:t,{name:"encodeJS",hash:{},data:i}))+"','"+s(a.encodeJS.call(l,null!=t?t.mainEntId:t,{name:"encodeJS",hash:{},data:i}))+"');\" onclick=\"showDeletePopup('ntitle_"+s(a.encodeJS.call(l,null!=t?t.nId:t,{name:"encodeJS",hash:{},data:i}))+"', 'crm.label.yes', '', '', this, 'Notes');\"><span class=\"svgIconsImg  delete-Icon-new vmiddle mL2\"></span></a> "},57:function(e,t,a,n,i){return' <span title="'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.tooltip.note.insufficient.permission",{name:"getI18n",hash:{},data:i}))+'" class="disabled notesActionbtnDel"><span class="svgIconsImg  delete-Icon-new vmiddle mL2" style="opacity:0.3"></span></span> '},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i,l,s){var r,o=e.lambda,c=e.escapeExpression,d=null!=t?t:{};return' <div id = "'+c(o(null!=t?t.nId:t,t))+'"  data-module="'+c(o(null!=t?t.relModuleName:t,t))+'" class="singleNoteBorder addedNotesList pT7 pB7" name="singleNote"> <table cellpadding="0" cellspacing="0" class="w100p"> <tr class="n pR w100p pB0"> '+(null!=(r=a.unless.call(d,null!=t?t.isPrintAction:t,{name:"unless",hash:{},fn:e.program(1,i,0,l,s),inverse:e.noop,data:i}))?r:"")+' <td class=" pL10 pR10 w100p pR" > <div class="pB5 cBafter feedchatDesEle"> '+(null!=(r=a.ifEquals.call(d,null!=t?t.noteTitle:t,"null",{name:"ifEquals",hash:{},fn:e.program(3,i,0,l,s),inverse:e.program(5,i,0,l,s),data:i}))?r:"")+' <pre id="noteContWithRegex_'+c(o(null!=t?t.nId:t,t))+'" style="display: none;" wrap="soft">'+c(o(null!=t?t.noteContentWithRegex:t,t))+"</pre> "+(null!=(r=a.ifEquals.call(d,null!=t?t.setype:t,"Notes",{name:"ifEquals",hash:{},fn:e.program(7,i,0,l,s),inverse:e.program(12,i,0,l,s),data:i}))?r:"")+" "+(null!=(r=a.if.call(d,null!=t?t.isVoiceNote:t,{name:"if",hash:{},fn:e.program(21,i,0,l,s),inverse:e.noop,data:i}))?r:"")+" "+(null!=(r=a.if.call(d,null!=t?t.haveAttachment:t,{name:"if",hash:{},fn:e.program(23,i,0,l,s),inverse:e.noop,data:i}))?r:"")+" "+(null!=(r=a.if.call(d,null!=t?t.isPrintAction:t,{name:"if",hash:{},fn:e.program(39,i,0,l,s),inverse:e.program(41,i,0,l,s),data:i}))?r:"")+" </td> </tr> </table> </div> "},useData:!0,useDepths:!0}),t.CrmNotes_ShowMore=e({compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression,o=null!=t?t:{};return' <div id="showMore" class="fL w100p mB1 mT10" style="background: #f8f8f8;margin-top: -1px;"> <table class="'+r(s(null!=t?t.showMoreWidth:t,t))+' dvw720" cellpadding="0" cellspacing="0"> <tr> <td class="vat p10"> <div class="pL10 notesbluetxt pointer f13 " onclick="Notes.loadNotes(\''+(null!=(l=s(null!=t?t.related_notes_entityId:t,t))?l:"")+"',true,'"+r(a.encodeJS.call(o,null!=t?t.related_notes_module:t,{name:"encodeJS",hash:{},data:i}))+"','"+(null!=(l=s(null!=t?t.entityMap_rel_notes_entId:t,t))?l:"")+"')\">"+r(a.getI18n.call(o,"crm.note.view.previous",{name:"getI18n",hash:{},data:i}))+'</div> </td><td  class="vat p10"> <div class="fR graytxt pR10 pointer f12"> <span id=\'dispcurrentCount\'>'+r(s(null!=t?t.currentCount:t,t))+'</span> <span class="notesgray">'+r(a.getI18n.call(o,"of",{name:"getI18n",hash:{},data:i}))+"</span> <span id='dispTotalNotesCount'>"+r(s(null!=t?t.TotalNotesCount:t,t))+"</span> </div> </td></tr> </table> </div> "},useData:!0})}();var GameLoad={loadMainJsAndExecute:function(e){Gamification.isMainJSLoaded;var t=networkUtils.returnDependencyFiles(["crm-gameusercomponent.js"],crmConstants.jsStaticPathForLyte),a=networkUtils.returnDependencyFiles(["crm-gameusercomponent.css"],crmConstants.cssStaticPathForLyte),n=networkUtils.returnDependencyFiles(["zcrm_gamification_gamepage.js",networkUtils.getI18nJSUrl("gamification")]),i=t.concat(a).concat(n);Lyte.injectResources(i,void 0,e)},loadSetupJsAndExecute:function(e){networkUtils.loadFeatureScripts(["zcrm_gamification_setuppage.js",networkUtils.getI18nJSUrl("gamification")],e)},loadMainPage:function(){if(slidelt(),void 0!==Gamification.isMainJSLoaded&&$("#gamification").length)Gamification.toggleScoreBoard();else{var e=void 0===Gamification.GameParams,t=Crm.getCrmBasePath()+"/Game.do?action=fetchGamePage&isDataNeeded="+e;(new crmRequestPool).doAjax(t,(function(e){$("#gamemainpagecontainer").html(e)}))}},loadData:function(e){if(!(!Gamification.GameParams||!Gamification.GameBadges))e();else{var t=Crm.getCrmBasePath()+"/Game.do?action=init&isDataNeeded=true";(new crmRequestPool).doAjax(t,(function(t){"success"===t.status&&(Gamification.init(t.initObj),e())}),void 0)}}};if(void 0===Gamification)var Gamification={commonObj:{isGamificationEnabled:"false",gameconfig:"false",fetchLimit:20,MAX_GROUPS:5},badgeDuration:{hours:1,days:2,months:3,weeks:4}};Gamification.init=function(e){if(void 0!==e){var t="string"==typeof e?JSON.parse(e):e,a={},n=[];a.id=Crm.userDetails.USER_ID,a.type="user",a.username=Crm.userDetails.DISPLAY_NAME,a.zuid=Crm.userDetails.ZUID,n.push(a),t.user=n,void 0!==t.user&&Gamification.Users.parseUser(t.user),void 0!==t.params&&Gamification.parseParams(t.params),void 0!==t.badges&&Gamification.parseBadges(t.badges),void 0!==t.groups&&Gamification.Groups.parseGroup(t.groups),void 0!==t.gamemodules&&(Gamification.gamemodules=t.gamemodules,Gamification.moduleaction=t.moduleaction),void 0!==t.commonObj&&(Gamification.commonObj=t.commonObj)}},Gamification.parseParams=function(e){Gamification.GameParams||(Gamification.GameParams={});for(var t=e.length,a=0;a<t;a++)Gamification.GameParams[e[a].paramid]=e[a]},Gamification.parseBadges=function(e){Gamification.GameBadges||(Gamification.GameBadges={});for(var t=e.length,a=0;a<t;a++)Gamification.GameBadges[e[a].badgeid]=e[a]},Gamification.Groups={groupObj:{},parseGroup:function(e){Gamification.Groups.groupObj={};for(var t=e.length,a=0;a<t;a++){var n=e[a];if("group"===n.type){n.group="true";var i={};i.groupid=n.groupid?n.groupid:n.id,i.groupname=n.groupname?n.groupname:n.plainName,i.group="true";var l=[];if(Gamification.Groups.groupVsUser)for(var s=Gamification.Groups.groupVsUser[i.groupid],r=s.length,o=0;o<r;o++){var c=s[o],d=Gamification.Users.getUserObj(Gamification.Users.getZuidByUserId(c));d.source="group",l.push(d)}i.userlist=l,Gamification.Groups.groupObj[i.groupid]=i}}},getGroupObj:function(e){var t=Gamification.Groups.groupObj[e]||{};return objectUtils.cloneObject(t)}},Gamification.Users={userObj:{},parseUser:function(e){for(var t=e.length,a=0;a<t;a++){var n=e[a];if("user"===n.type){if("${CURRENTUSER}"===n.id)continue;var i=n.zuid,l={};l.userId=n.id,l.photoURL=commonUtils.getPhotoURL("null"!==i?i:"000000"),l.fullname=n.username,l.zuid=n.zuid,Gamification.Users.userObj["null"!==i?i:n.id]=l}}}},Gamification.showAnimateMessageDiv=function(e){Gamification.UI.gameAlertPopup(e)},Gamification.toggleCRMPage=function(e){var t="#tabLayer,.bodycontainer",a=networkUtils.parseUrl(location.href);"ShowTab"===a.action&&"Feeds"===a.params.module&&(t+=",#feedParentDiv");var n=$("#current_rank"),i=$("#gameentrancecolour");"show"===e?(Gamification.inGamePage=!1,$(".gOnboardWrap").hide(),removeFreezeLayer(),i.removeClass("zg-up-icn zg-down-icn"),n.hasClass("disable")||n.removeClass("dN"),$(t).stop().fadeIn(500,(function(){setTimeout((function(){if("undefined"!=typeof CrmPlusImpl&&CrmPlusImpl.isLoadedInCrmplus()){var e=renderingUtils.windowHeight-110,t=$("#homePageView");t.length&&t.css("height",renderingUtils.windowHeight-(t.position().top+26)),$("#cobouterdiv").css({height:renderingUtils.windowOuterHeight-28,top:"0"}),isChatEnabled&&(e-=26);var a=$("#reportIntegdiv");a.length&&(e-=a.outerHeight()),$("#dashboardList").css("height",e),thirdPartyUtils.bindPerfectScroll("#dashboardList",{wheelSpeed:1,wheelPropagation:!0,suppressScrollX:!1}),$("#repFolders").height(renderingUtils.windowHeight-86),$("#lv_filter_scroll").css({height:renderingUtils.windowHeight-(115+$("#lv_filter_submitdiv").outerHeight())})}"crm.tab.module.custom-view.list"==Lyte.Router.getRouteInstance().transition.target&&Lyte.registeredMixins["crm-view-utils"].gamificationClose()}),100)}))):"hide"===e&&(Gamification.inGamePage=!0,i.hasClass("zg-up")?i.addClass("zg-up-icn"):i.hasClass("zg-down")&&i.addClass("zg-down-icn"),n.addClass("dN"),$(t).stop().fadeOut(500))},Gamification.UI={displayCriteriaArrow:function(e){$("[name=gcarrowspan]").removeClass().addClass("dIB rightArw headerSvg"),e.find("[name=gcarrowspan]").removeClass().addClass("dIB gcdownArrow headerSvg")},highlight:function(e,t){e.length&&(e[0].scrollIntoView(t),Gamification.UI.highlightOnly(e))},highlightOnly:function(e){e.length&&(e.addClass("tempsearchcolor"),setTimeout((function(){e.removeClass("tempsearchcolor")}),3e3))},disableclick:function(e){var t=$(e).attr("id");if($("#"+t).is(":checked"))$(".overLay").css("display","none");else{var a=$("#gameconfigcontainer"),n=a.offset(),i=n.left,l=n.top,s=a.height(),r=a.width();$(".overLay").css({display:"block",height:s,width:r,left:i,top:l,"z-index":"10"})}},gameAlertPopup:function(e,t){renderingUtils.showCustomAlert(e,void 0,!1,t)},gameConfirmPopup:function(e){return confirm(e)},showInlineError:function(e){$("#"+e+"_error").fadeIn(200),$("#"+e+"_linefill").addClass("width100Imp")},setFocusClass:function(e){$("#"+e+"_error").hide(),$("#"+e+"_linefill").removeClass("width100Imp"),$("#"+e+"_focuslinefill").addClass("ghightLightBdr")},removeFocusClass:function(e){$("#"+e+"_error").hide(),$("#"+e+"_focuslinefill").removeClass("ghightLightBdr")}},Gamification.showSalesMotivatorGettingStarted=function(){Gamification.isFromWMS=!0,GameLoad.loadMainPage(),"game-settings"==Lyte.Router.getRouteInstance().routeName?(Gamification.renderMotivatorScreen(),Gamification.isFromWMS=!1):setTimeout((function(){Lyte.Router.getRouteInstance().transitionTo("crm.settings.section.game-settings")}),400)};var deskInteg=function(){var e={},t=void 0,a=void 0,n=[],i=0,l="",s=7,r={},o={},c="",d="",m="",u="",p=void 0,g=!1,h="",f=Crm.getCrmBasePath()+"/deskIntegration.do?action=",v=f+"refreshData",C=Crm.getCrmBasePath()+"/Search.do?searchmodule=Potentials",T=f+"linkToPotential",N=f+"updateTickets",_=f+"getTickets",I=f+"updateTicketFields",b=f+"deleteTickets",E=f+"getAgents",S=f+"manageStats",w=f+"getStats",P=f+"hideDeskTab",k=f+"getFieldProperties",y=f+"getMyDeskInfo",O=void 0,A=void 0,R=void 0,L=void 0,M=void 0,D=void 0,x=["EMAIL","ADDN_EMAIL"],U={get:function(e){return $(e)}};return{init:function(){n=[],i=0,l="",s=7,r={},o={},O=void 0,A=void 0,p=void 0,R=void 0,L=void 0,M=void 0,D=void 0,a=void 0},setSelectedRowId:function(e){n.push(e)},getSelectedRowId:function(){return n},intializeSelectedRowId:function(){n=[]},getModuleEmailColumns:function(){return x},getUrlUpdateTickets:function(){return N},getUrlPotentials:function(){return C},getUrlTickets:function(){return _},getUrlUpdateHeaders:function(){return I},getPortalName:function(){return u},getUrlDeleteTickets:function(){return b},getUrlRefresh:function(){return v},getdeskContactName:function(){return L},getdeskAccountName:function(){return R},getencryptedContactId:function(){return O},getencryptedAccountId:function(){return A},getdeskContactEmail:function(){return M},getdeskContactPhone:function(){return D},getdeskURL:function(){return c},getcrmURL:function(){return d},setDeskContactName:function(e){L=e},setDeskAccountName:function(e){R=e},setEncryptedContactId:function(e){O=e},setEncryptedAccountId:function(e){A=e},setDeskContactEmail:function(e){M=e},setDeskContactPhone:function(e){D=e},setSelectedRowCount:function(e){"increment"==e?i++:"decrement"==e&&0!=i?i--:(e="zero")&&(i=0)},setDetailTicketId:function(e){l=e},getDetailTicketId:function(){return l},getSelectedRowCount:function(){return i},getFieldProps:function(){return t},getCurrentTicketType:function(){var e=U.get("#ticketFilterSelect").val();return"Potentials"==crmRelatedList.Module&&("Potentials"==e?U.get("#linkToThisPotential").hide():U.get("#linkToThisPotential").show()),e},getCurrentTicketPage:function(){var e=U.get("#ticketPageTable #ticketPage").val(),t=parseInt(e);return isNaN(t)?0:t},loadDeskintegration:function(e){if(Handlebars.registerPartial("zdeskTickets",Handlebars.templates.zdeskTickets),0==Object.keys(e).length)U.get("#deskLoadingDiv div").text(I18n.getMsg("crm.new.label.no.records"));else{a=e.ticketHeadings,h=e.contactServerUrl;var t=Handlebars.templates.zdeskIntegration(e),n=U.get("#supportdiv").children("#deskIntegDiv");0==n.length&&(n=U.get("#supportdiv").children("table")),0==n.length?U.get("#supportdiv").append(t):n.replaceWith(t),s=e.tickets?e.tickets.length:0,t=Handlebars.templates.zdeskTickets(e.page),U.get("#ticketPageTable").replaceWith(t),U.get("#zdeskColumns").html(Handlebars.templates.zdeskCustomHeaders(e)),$("#zdeskColumns").find("ul").sortable({cancel:".cancelSort"}),thirdPartyUtils.bindPerfectScroll($("#menuColumnListView")),thirdPartyUtils.bindSelect2($("#ticketFilterSelect")),deskInteg.summarizeTickets(e),deskInteg.populateIntegDetails(e),deskInteg.clearSelect(),populateRLCount(U.get('div[ddname="SUPPORTPERSONALITY"]').attr("ddid")),deskInteg.handleNewTicketLink(e),U.get("#deskRefresh").show()}deskInteg.getCurrentTicketType()},handleNewTicketLink:function(e){s>0||"All"!=U.get("#ticketFilterSelect").val()?(U.get("#deskRelatedListMenu").show(),deskInteg.displayDeskWindow()&&$("[id='addNewIcP_Zoho Desk']").removeClass("dN")):(U.get("#deskRelatedListMenu").hide(),U.get("#ticketsTable #desk_tickets_thead_row").hide(),"crm.zdesk.notickets"==e.ticketError&&deskInteg.displayDeskWindow()&&(U.get("#noTicket_newTicketLink").show(),$("[id='addNewIcP_Zoho Desk']").removeClass("dN")))},displayDeskWindow:function(t){return t&&g?!(!e||!e.associatedDepartmentIds)&&e.associatedDepartmentIds.indexOf(t)>-1:g},closeDeskPopup:function(){window.removeEventListener("message",deskInteg.receiveDeskMessage,!1),closeDashletDiv("lookupdiv"),$("#lookupdiv").removeAttr("style").empty(),deskInteg.handleScroll(!1)},showDeskPopup:function(e){deskInteg.loadCurrentUserInfo((function(){freezeBackground();deskInteg.createPopup("<div id=\"ticketDetailPrev\" class='pF deskNavCircle leftNavCont' onClick=\"deskInteg.showTicketDetail(-1)\"'><span class='previous dIB vam'></span></div><div class='deskOptionHider pA'></div><div class='fR deskIframeCloseCont pA'><div class='svgIcons ico-close-small2 cP mL6 mR5 mT5 dIB' onClick=\"deskInteg.closeDeskPopup();\"></div></div><div class='cB'><div id=\"ticketDetailNext\" class='pF deskNavCircle rightNavCont' onClick=\"deskInteg.showTicketDetail(1)\"><span class='next dIB vam'></span></div></div><iframe  id='deskIframe' frameborder='0' src='' style='overflow:auto;width: 1250px; height: 620px;'></iframe>",{width:"1250px",height:"620px",overflow:"visible"}),deskInteg.changeIframeTicket(e),$(document).on("keyup.zDeskIframe",(function(e){39==e.keyCode?deskInteg.showTicketDetail(1):37==e.keyCode&&deskInteg.showTicketDetail(-1)})),window.addEventListener("message",deskInteg.receiveDeskMessage,!1),deskInteg.handleScroll(!0)}))},showDeskPopupForWidgets:function(e,t){Crm.trackSpotLightAction("ZDesk - Ticket Detail View Widget"),deskInteg.loadCurrentUserInfo((function(){deskInteg.createPopup("<div class='fR deskIframeCloseCont pA'><div class='svgIcons ico-close-small2 cP mL6 mR5  dIB vam' onClick=\"deskInteg.closeDeskPopup();\"></div></div><div class='cB'></div><iframe  id='deskIframe' frameborder='0' src='' style='overflow:auto;width: 1250px; height: 620px;'></iframe>",{width:"1250px",height:"620px",overflow:"visible"});var a=deskInteg.getUrlForTicketDetailView(e,t);$("#lookupdiv #deskIframe").attr("src",a),window.addEventListener("message",deskInteg.receiveDeskMessage,!1),deskInteg.handleScroll(!0)}))},createPopup:function(e,t){var a=$("#lookupdiv");a.html(e),freezeBackground(),a.css(t),mailsetCenter("lookupdiv")},handleScroll:function(e){var t=$("#dvinner");if(e)$("#scrollTopDiv").hide(),t.css("overflow","hidden");else{var a=t.scrollTop();t.css("overflow","auto"),t.scrollTop(a-1)}},getUrlForTicketDetailView:function(e,t){var a="//"+c+"/support/"+u+"/";return a=deskInteg.displayDeskWindow(t)?a+"ShowHomePage.do?frameorigin="+encodeURIComponent(d)+"&isDeskAddOnRequest=true#Cases/dv/"+encodeURIComponent(e)+"?isDeskAddOnRequest=true":a+"ShowEntityInfo.do?frameorigin="+encodeURIComponent(d)+"&module=Cases&id="+encodeURIComponent(e)+"&isCrmCall=true&crmsupportzgid="+encodeURIComponent(m)+"&showThreads=true"},updateDetailsForRL:function(e){e&&e.datePattern&&(p=e.datePattern,g=e.portalUser),deskInteg.displayDeskWindow()||$("#supportdiv #newTicketLink").remove(),x=e&&e.module_emailColumns?e.module_emailColumns:["EMAIL","ADDN_EMAIL"]},getDeskTickets:function(e,t,a,n){Crm.trackSpotLightAction("ZDesk - Ticket Fetch");var i={pageToken:t,ticketType:deskInteg.getCurrentTicketType(),module:crmRelatedList.Module},l=deskInteg.getKeyValueForTicketCriteria();i[l.key]=l.value,i[csrfParamName]=csrfToken,deskInteg.initiateAjaxCall(_,"POST",i,(function(t){deskInteg.populateTicketsTable(t,a),e&&e.iFramecallback&&e.iFramecallback(e.loadLast),n&&deskInteg.handleNewTicketLink(t)}))},populateTicketsTable:function(e,t){s=e.tickets?e.tickets.length:0,U.get("#ticketsTable #desk_tickets_thead_row").show(),U.get("#desk_tickets_tbody").html(Handlebars.templates.zdeskTickets(e)),U.get("#ticketPageTable").length>0?U.get("#ticketPageTable").replaceWith(Handlebars.templates.zdeskTickets(e.page)):U.get("#ticketsTable").after(Handlebars.templates.zdeskTickets(e.page)),0!=t&&populateRLCount(U.get('div[ddname="SUPPORTPERSONALITY"]').attr("ddid"),!1,t),deskInteg.clearSelect(),deskInteg.displayDeskWindow()&&$("[id='addNewIcP_Zoho Desk']").removeClass("dN")},showTicketDetail:function(e){Crm.trackSpotLightAction("ZDesk - Ticket Detail Quick Navigation");var t=l,a=null;if(1==e?a=$("#desk_tickets_tbody tr#ticket_"+t).next():-1==e&&(a=$("#desk_tickets_tbody tr#ticket_"+t).prev()),a)if(1==a.length)t=a.attr("id").replace("ticket_",""),deskInteg.changeIframeTicket(t);else{var n={type:"click",iFramecallback:function(e){var t=(e?U.get("#desk_tickets_tbody tr").last():U.get("#desk_tickets_tbody tr").eq(0)).attr("id");t?(t=t.replace("ticket_",""),deskInteg.changeIframeTicket(t)):deskInteg.closeDeskPopup()}};1==e?U.get("#ticketPageTable #ticketNext a").trigger(n):(n.loadLast=!0,U.get("#ticketPageTable #ticketPrev a").trigger(n))}},changeIframeTicket:function(e){var t=$("#desk_tickets_tbody tr#ticket_"+e),a=U.get("#desk_tickets_tbody tr").index(t),n=t.find("td.mainTicketDetail").attr("data-caseId"),i=t.attr("data-dept"),r=deskInteg.getUrlForTicketDetailView(n,i);$("#lookupdiv #deskIframe").attr("src",r);var o=deskInteg.getCurrentTicketPage();0==a&&o<1?$("#ticketDetailPrev").hide():$("#ticketDetailPrev").show(),a<s-1||U.get("#ticketNext a").length>0?$("#ticketDetailNext").show():$("#ticketDetailNext").hide(),l=e,Crm.trackSpotLightAction("ZDesk - Ticket Detail View")},getKeyValueForTicketCriteria:function(){var e={},t="",a=null,n=crmRelatedList.Module;if("Accounts"==n||"Potentials"==n)a=crmRelatedList.EntityId;else if(x)for(var i=x.length,l=0;l<i;l++){var s=$("#subvalue_"+x[l]).text();(s=s?s.trim():s)&&validationUtils.isValidEmail(s)&&(t=t?t+","+s:s)}return t.length>0?(e.key="email",e.value=t):a&&(e.key="moduleId",e.value=a),e},showColList:function(){$("#zdeskColumns").show()},saveColModify:function(){Crm.trackSpotLightAction("ZDesk - Ticket Columns Update"),deskCache.clear(crmRelatedList.EntityId);var e=[];U.get("#zdeskColumns").find("#columnListId input:checked").each((function(){e.push($(this).attr("id").split("_")[1])}));var t={ticketType:deskInteg.getCurrentTicketType(),module:crmRelatedList.Module,moduleId:crmRelatedList.EntityId,deskstats:"true"};t.pageToken=deskInteg.getCurrentTicketPage(),t.fields=JSON.stringify(e);var a=deskInteg.getKeyValueForTicketCriteria();t[a.key]=a.value,t[csrfParamName]=csrfToken,deskInteg.initiateAjaxCall(I,"POST",t,(function(e){deskInteg.loadDeskintegration(e)})),U.get("#zdeskColumns").hide()},cancelColModify:function(){$("#zdeskColumns").hide()},showTktFldUpdPop:function(){var e=U.get("#tktFldPop").find("#updateFieldName option"),n=U.get("#tktFldPop").find("#updateFieldName");0==e.length?deskInteg.loadFieldProperties((function(){for(var e={},i=a.length,l=0;l<i;l++){var s=a[l];t[s.name]&&(e[s.name]=t[s.name])}var r={updateableFields:e,datePattern:p},o=Handlebars.templates.zdeskUpdateTickets(r);U.get("#deskIntegDiv").append(o),populateTimeVal($("#dateText .ddTime"));var c=U.get("#tktFldPop").find("#updateFieldName option");thirdPartyUtils.bindSelect2(U.get("#tktFldPop select")),(n=U.get("#tktFldPop").find("#updateFieldName")).val(c.eq(0).val()),n.val(n.val()).trigger("change"),deskInteg.showHideAssigneeUpdate(),mailsetCenter("tktFldPop"),U.get("#tktFldPop").css("position","fixed"),freezeBackground()})):(n.val(n.val()).trigger("change"),mailsetCenter("tktFldPop"),U.get("#tktFldPop").css("position","fixed"),deskInteg.showHideAssigneeUpdate(),freezeBackground()),Crm.trackSpotLightAction("ZDesk - Update Ticket Popup ")},showHideAssigneeUpdate:function(){var e=U.get("#tktFldPop").find("#updateFieldName"),t=e.find('option[value="assigneeId"]');if(t.length>0){var a=t.is(":disabled");if(1==i&&a||i>1&&!a){t.prop("disabled",!a),thirdPartyUtils.bindSelect2(U.get("#tktFldPop select"));var n=e.find("option");e.val(n.eq(0).val()),e.val(e.val()).trigger("change")}}},loadFieldProperties:function(e){t?e&&e():deskInteg.initiateAjaxCall(k,"GET",void 0,(function(a){t={};for(var n=a.field_properties,i=n.length,l=0;l<i;l++){var s=n[l];t[s.name]=s}e&&e()}))},loadCurrentUserInfo:function(t){g&&$.isEmptyObject(e)?deskInteg.initiateAjaxCall(y,"GET",void 0,(function(a){e=a,t&&t()}),(function(){t&&t()})):t&&t()},updateNewValueField:function(e){var a=$(e).find("option:selected").val(),n=t[a];U.get("#tktFldPop  #errorMsg_TicketField").hide();var i="crm.zdesk.update.choose";if("assigneeId"==n.name)deskInteg.showAgentsForDepartment();else if("Picklist"==n.type||"Boolean"==n.type){var l=U.get("#tktFldPop").find("#fieldUpdSelect");l.empty(),"Boolean"!=n.type||n.allowedValues||(n.allowedValues.push({value:!0}),n.allowedValues.push({value:!1}));for(var s=n.allowedValues.length,r=0;r<s;r++){var o=n.allowedValues[r].value;l.append("<option  value='"+o+"'>"+o+"</option>")}l.val(n.allowedValues[0].value).trigger("change"),U.get("#tktFldPop #fieldUpdTextOption").hide(),U.get("#tktFldPop #fieldUpdSelectOption").show()}else if("DateTime"==n.type)U.get("#fieldUpdSelectOption").hide(),U.get("#tktFldPop #fieldUpdTextOption").show(),U.get("#tktFldPop #fieldUpdTextOption").find("#plainText").hide(),U.get("#tktFldPop #fieldUpdTextOption").find("#dateText").show();else{U.get("#fieldUpdSelectOption").hide();var c="Phone"==n.type?"Number":n.type;U.get("#tktFldPop #fieldUpdTextOption").find(".newinputText").empty(),U.get("#tktFldPop #fieldUpdTextOption").prop("type",c),U.get("#tktFldPop #fieldUpdTextOption").prop("maxlength",n.maxLength),U.get("#tktFldPop #fieldUpdTextOption").show(),U.get("#tktFldPop #fieldUpdTextOption").find("#plainText").show(),U.get("#tktFldPop #fieldUpdTextOption").find("#dateText").hide(),i="crm.zdesk.update.enter"}U.get("#tktFldPop #deskupdateFieldMsg").text(I18n.getMsg(i,n.i18NLabel))},updateFields:function(e,a){Crm.trackSpotLightAction("ZDesk - Ticket Update");var i={isCustomField:!1};if(!e){e=U.get("#tktFldPop  select#updateFieldName").val(),i=t[e];var l=U.get("#tktFldPop  #errorMsg_TicketField"),s=!0;switch(a=U.get("#tktFldPop #fieldUpdTextOption input").val(),i.type){case"Phone":case"Number":s=validationUtils.isValidInteger(a);break;case"Email":s=validationUtils.isValidEmail(a);break;case"Text":s=""!=a&&a.length<=i.maxLength;break;case"LookUp":case"Picklist":a=U.get("#tktFldPop  select#fieldUpdSelect").val();break;case"DateTime":var r=U.get("#tktFldPop  #fieldUpdTextOption #dateText"),o=r.find("#deskDate").val(),c=r.find("#deskTime").val();a=o+" "+c+" "+r.find("#ticket_date_ampmSpan").text(),s=o&&c}if(!s)return l.html(I18n.getMsg("crm.field.valid.check",i.i18NLabel)),void l.show()}var d={fieldName:e,fieldValue:a,isCustomField:i.isCustomField,fieldType:i.type};d.ids=n;var m={ticketType:deskInteg.getCurrentTicketType(),module:crmRelatedList.Module,moduleId:crmRelatedList.EntityId};m.pageToken=deskInteg.getCurrentTicketPage();var u=deskInteg.getKeyValueForTicketCriteria();m[u.key]=u.value,m.ticketJson=JSON.stringify(d),m[csrfParamName]=csrfToken;var p=d.ids;deskInteg.initiateAjaxCall(N,"POST",m,(function(e){deskInteg.populateTicketsTable(e,!1),deskInteg.closeTicketUpdatePop();for(var t=U.get("#ticketsTable"),a=p.length,n=0;n<a;n++){t.find("tr#ticket_"+p[n]).addClass("deskBgAnim")}setTimeout((function(){deskInteg.removeAnimClass(p)}),2e3)}),(function(){deskInteg.closeTicketUpdatePop()}))},deleteTickets:function(){Crm.trackSpotLightAction("ZDesk - Ticket Delete");var e={ticketType:deskInteg.getCurrentTicketType(),module:crmRelatedList.Module,moduleId:crmRelatedList.EntityId};e.pageToken=deskInteg.getCurrentTicketPage();var t=deskInteg.getKeyValueForTicketCriteria();e[t.key]=t.value;var a={ids:n};e.ticketJson=JSON.stringify(a),e[csrfParamName]=csrfToken,deskInteg.initiateAjaxCall(b,"POST",e,(function(e){hideAnimatePopup("deleteDeskTicketConfirmation"),deskInteg.populateTicketsTable(e,!1)}),(function(){hideAnimatePopup("deleteDeskTicketConfirmation")}))},toggleStats:function(e){var t=U.get("#deskTicketsSummary").is(":hidden"),a={viewStats:t};a[csrfParamName]=csrfToken;var n=$(e);t?(U.get("#deskTicketsSummary").slideDown(),n.text(I18n.getMsg("crm.zdesk.hidestats"))):(U.get("#deskTicketsSummary").slideUp(),n.text(I18n.getMsg("crm.zdesk.showstats"))),deskInteg.initiateAjaxCall(S,"POST",a)},summarizeTickets:function(e){0==deskCache.get(crmRelatedList.EntityId)&&deskCache.set(crmRelatedList.EntityId,e.ticketStats,36e5);var t=deskCache.get(crmRelatedList.EntityId);if(t){deskInteg.updateTicketStats(t),O=t.encryptedContactId,A=t.encryptedAccountId;var a=t.contactId;if(e.tickets&&a)for(var n=e.tickets.length,i=0;i<n;i++){var l=e.tickets[i];if(l.contactId==a){var s=l.contact;if(s){(L=s.lastName)&&s.firstName&&(L=s.firstName+" "+L),M=s.email,D=s.phone,R=s.account?s.account.accountName:void 0;break}}}var r=deskInteg.getKeyValueForTicketCriteria();if("email"==r.key&&t.statsEmail){var o=r.value.split(",");if((o=o.filter((function(e,t,a){return t==a.indexOf(e)}))).length>1){var c=$("#deskTicketsSummary #select_deskstats"),d="",m=o.length,u=$ESAPI.encoder();for(i=0;i<m;i++)d+='<option value="'+u.encodeForHTMLAttribute(o[i])+'">'+u.encodeForHTML(o[i])+"</option>";c.append(d),c.val(t.statsEmail),thirdPartyUtils.bindSelect2(c),$("#deskTicketsSummary #deskstatsEmail").show()}else t.totalTickets<1&&deskInteg.hideStatsSection()}else t.totalTickets<1&&deskInteg.hideStatsSection()}else deskInteg.hideStatsSection()},hideStatsSection:function(){U.get("#ticketStatLink").remove(),U.get("#deskTicketsSummary").hide()},updateTicketStats:function(e){var t=$("#deskTicketsSummary"),a=t.find("#cusHapRate,#happiness_smiley"),n=t.find("#no_happinessrating");if(e){var i=e.customerHappiness;if(t.find("#totalTickets").text(e.totalTickets),t.find("#overdueTickets").text(e.overdueTickets),t.find("#avgSolTime").find("span").eq(0).text(e.resolutionTime),t.find("#avgResTime").find("span").eq(0).text(e.responseTime),i){var l=parseInt(i.okCount)+parseInt(i.goodCount)+parseInt(i.badCount);if(l>0){var s=parseInt(i.goodPercentage)/l*100;s=deskInteg.roundOff(s,0),t.find("#cusHapRate").text(s+"%");var r=$("#happiness_smiley");return s>70?(r.removeClass("sadSmiley confusedSmiley"),r.addClass("happySmiley")):s>35?(r.removeClass("happySmiley sadSmiley"),r.addClass("confusedSmiley")):(r.removeClass("happySmiley confusedSmiley"),r.addClass("sadSmiley")),a.show(),void n.hide()}}}else t.find("#totalTickets").text("0"),t.find("#overdueTickets").text("0"),t.find("#avgSolTime").find("span").eq(0).text("00:00"),t.find("#avgResTime").find("span").eq(0).text("00:00");a.hide(),n.show()},getTicketStats:function(){Crm.trackSpotLightAction("ZDesk - Ticket Stats Fetch");var e={module:crmRelatedList.Module,moduleId:crmRelatedList.EntityId};e.email=U.get("#select_deskstats").val(),e[csrfParamName]=csrfToken,deskInteg.initiateAjaxCall(w,"POST",e,(function(e){deskInteg.updateTicketStats(e.ticketStats)}))},getAgentsDepartments:function(e,t){if(o[e])t&&t(e);else{var a={departmentId:e};deskInteg.initiateAjaxCall(E,"GET",a,(function(a){o[a.departmentId]=a.departmentAgents;for(var n=a.departmentAgents.length,i=0;i<n;i++){var l=a.departmentAgents[i];r[l]=a.agents[l]}t&&t(e)}))}},showAgentsForDepartment:function(){for(var e=$L("#ticketsTable"),t=null,a=n.length,i=0;i<a;i++){var l=n[i];t=e.find("tr#ticket_"+l).attr("data-dept");break}deskInteg.getAgentsDepartments(t,(function(e){var t=o[e],n=$L("#fieldUpdSelect"),i="<option  value=''>Unassigned</option>";a=t.length;for(var l=$ESAPI.encoder(),s=0;s<a;s++){var c=t[s],d=r[c];if(d){var m=d.firstName?d.firstName+" "+d.lastName:d.lastName;i=i+"<option  value='"+l.encodeForHTMLAttribute(d.id+"")+"'>"+l.encodeForHTML(m)+"</option>"}}n.html(i),n.val("").trigger("change"),$L("#fieldUpdTextOption").hide(),$L("#fieldUpdSelectOption").show()}))},closeTicketUpdatePop:function(){U.get("#tktFldPop").hide(),removeFreezeLayer()},updatePotentialValue:function(e){e.stopImmediatePropagation();var t,a=$(this),n=a.get(0).tagName;"A"!=n&&"a"!=n||(a=a.closest("tr").find("input:radio"));var i=a.attr("id");t=i.substring(i.indexOf("_")+1),hideAnimatePopup("topBandPopup",!0);var l=document.querySelector("crm-zdesk-rl-body").component;l.actions.linkToPotential.bind(l)(t)},linkToPotential:function(e){var t=document.querySelector("crm-zdeskbody-rl").component,a=document.querySelector("crm-zdeskaction-rl").component;if(Crm.trackSpotLightAction("ZDesk - Ticket Link Potential"),!e){var i=$("crm-zdeskbody-rl")[0].component;if("Potentials"!==i.getData("module"))return;e=i.getData("entityId")}freezeBackground();var l={potentialId:e};l.ticketIds=JSON.stringify(n),l[csrfParamName]=csrfToken,deskInteg.initiateAjaxCall(T,"POST",l,(function(e){if("success"==e.status){var n=e.linkedTickets,i=n.length,l={},s={};s.potentialId=e.potentialId,s.potential=e.potentialName;var r=t.data.ticketPotentials;if(Object.keys(t.data.ticketPotentials).length>0){l=r;for(var o=0;o<i;o++)Lyte.objectUtils(r,"add",n[o],s)}else{for(o=0;o<i;o++)l[n[o]]=s;t.setData("ticketPotentials",l)}a.methods.getDeskTickets.bind(a)(void 0,a.getCurrentTicketPage(),!1,!0,a.data.module,a.data.entityId,a.data.email),a.actions.clearSelect.call(a),crmui.showMsgBand("success",I18n.getMsg(e.message),3e3),deskInteg.clearSelect()}else crmui.showMsgBand("error",I18n.getMsg(e.message),3e3);removeFreezeLayer()}))},removeAnimClass:function(e){for(var t=e.length,a=U.get("#ticketsTable"),n=0;n<t;n++){var i=e[n];a.find("tr#ticket_"+i).removeClass("deskBgAnim")}},unlinkTickets:function(){var e={potentialId:0};e.ticketIds=JSON.stringify(n);var t=n,a=n.length;e[csrfParamName]=csrfToken;var i=document.querySelector("crm-zdeskbody-rl").component,l=document.querySelector("crm-zdeskaction-rl").component;deskInteg.initiateAjaxCall(T,"POST",e,(function(e){if("success"==e.status){for(var n=i.data.ticketPotentials,s=0;s<a;s++)Lyte.objectUtils(n,"delete",t[s]);l.actions.clearSelect.call(l),deskInteg.clearSelect(),crmui.showMsgBand("success",I18n.getMsg(e.message),3e3)}else crmui.showMsgBand("error",I18n.getMsg(e.message),3e3)}),(function(){crmui.showMsgBand("error",I18n.getMsg("crm.zdesk.err.unlink"),3e3)}))},showCreateTicketPopup:function(){var e="//"+c+"/support/"+u+"/ShowHomePage.do?frameorigin="+encodeURIComponent(d);e+="&isDeskAddOnRequest=true#Cases/new?isDeskAddOnRequest=true";var t="Potentials"==crmRelatedList.Module;if(Crm.trackSpotLightAction("ZDesk - Create Ticket",{Module:crmRelatedList.Module}),!M)if(t){var a=$("#associatedContEmail").val();M=a&&validationUtils.isValidEmail(a)?a:M}else{var n=deskInteg.getKeyValueForTicketCriteria();"email"==n.key&&(M=n.value.split(",")[0])}L||"Accounts"==crmRelatedList.Module||(L=t?$("#associatedContName").val():$("#subvalue_LASTNAME").text())||$("[id=entity_name]").each((function(){return!(L=$(this).val())})),R||(R="Accounts"==crmRelatedList.Module?$("#subvalue_ACCOUNTNAME").text():$("#subvalue_ACCOUNTID").text()),L&&(e=e+"&"+encodeURIComponent("property(Contact Name)")+"="+encodeURIComponent(L)),O&&(e=e+"&"+encodeURIComponent("property(whoName:Contact Name)")+"="+O),A&&(e=e+"&"+encodeURIComponent("property(actName:Account Name)")+"="+A),M&&(e=e+"&"+encodeURIComponent("property(Email)")+"="+encodeURIComponent(M)),D&&(e=e+"&"+encodeURIComponent("property(Phone)")+"="+encodeURIComponent(D)),R&&(e=e+"&"+encodeURIComponent("property(Account Name)")+"="+encodeURIComponent(R));deskInteg.createPopup("<div class='fR deskIframeCloseCont pA'><div class='svgIcons ico-close-small2 cP mL6 mR5 mT5 dIB' onClick=\"deskInteg.hideCreateTicketPopup();\"></div></div><div class='cB'></div><span id='loadMsg'><center>Loading New Ticket Page ....</center></span><iframe onload=\"document.getElementById('loadMsg').style.display='none';\" class='oA' id='createTicketIframe' frameborder='0' src='' style='width: 1250px; height: 590px;'></iframe>",{width:"1250px",height:"590px",overflow:"visible"}),deskInteg.handleScroll(!0),$("#lookupdiv #createTicketIframe").attr("src",e)},hideCreateTicketPopup:function(){closeDashletDiv("lookupdiv"),$("#lookupdiv").removeAttr("style").empty(),deskInteg.handleScroll(!1),deskInteg.getDeskTickets(void 0,deskInteg.getCurrentTicketPage(),!1,!0)},populatePotentialPopup:function(){var e=C;"Accounts"==crmRelatedList.Module?e=e+"&accountId="+crmRelatedList.EntityId:"Contacts"==crmRelatedList.Module&&(e=e+"&productId="+crmRelatedList.EntityId),e+="&newModel=true",e+="&fromzdesk=true",commonUtils.openCustomLookup(e,void 0,"topBandPopup",renderingUtils.windowWidth-300,void 0,void 0,void 0,!0)},editPotentialLookUp:function(e,t){e.html(t),e.find("#contactDiv").hide(),e.find("table input:radio").unbind("click").on("click",deskInteg.updatePotentialValue);var a=e.find("table td a");a.each((function(){$(this).prop("onclick",null)})),a.on("click",deskInteg.updatePotentialValue),e.find("#newEntityButton").hide()},freezeLayerClickListener:function(){deskInteg.closeTicketsSummary()},initiateAjaxCall:function(e,t,a,n,i,l,s){commonUtils.showHideLoadingDiv(!0);var r=function(e,t){i&&i(e,t),commonUtils.showHideLoadingDiv(!1)};(new crmRequestPool).initiate({action:e,type:t,headers:s,data:a,success:function(e,t){e&&"object"==typeof e?function(e,t){n&&n(e,t),commonUtils.showHideLoadingDiv(!1)}(e,t):l?(l.html(e),l.show(),commonUtils.showHideLoadingDiv(!1)):r(e,t)},error:function(e,t){r(e,t)}})},updateRowSelection:function(e){var t=$(e),a=t.prop("checked"),l=t.parents("tr").eq(0).attr("id").replace("ticket_",""),s=t.parents(".flipCard");if(a)n.push(l),i++,s.addClass("flipped");else{var r=n.indexOf(l);n.splice(r,1),i--,s.removeClass("flipped")}deskInteg.ticketActionDisplay()},ticketActionDisplay:function(){U.get("#selectedTicketCount").text(i),0==i?(U.get(".ticket_noselect").show(),U.get(".ticket_select").hide()):(U.get(".ticket_noselect").hide(),U.get(".ticket_select").show())},clearSelect:function(){U.get("#desk_tickets_tbody tr .rowSelectorCkbox").prop("checked",!1),U.get("#desk_tickets_tbody tr .flipCard").removeClass("flipped"),n=[],i=0,deskInteg.ticketActionDisplay()},showSubjectTooltip:function(e){var t=$(e).text();e.scrollWidth>e.offsetWidth&&crmui.toolTip_show(e,"left",t)},showHideAgentInfoBC:function(e,t){if(e){var a=$(t),n=a.offset(),i=JSON.parse(a.parents("td").eq(0).attr("data-params"));U.get("#deskTicketBC").addClass("userbcpopup");var l=U.get("#deskTicketBC").find(".emailicon");l.text(i.emailId),l.attr("href","mailto:"+i.emailId);var s=h+"/file?ID="+i.zuid+"&fs=thumb";U.get("#deskTicketBC").find("#agentImg").attr("src",s),U.get("#deskTicketBC").find("#bcAgentName").text(i.firstName+" "+i.lastName),U.get("#deskTicketBC").css({top:n.top+30,left:n.left-200}).show()}else"deskTicketBC"!=$(t.relatedTarget).attr("id")&&(U.get("#deskTicketBC").removeClass("userbcpopup"),U.get("#deskTicketBC").hide())},populateIntegDetails:function(e){if(e){var t=RebrandLinkUtil.getProperty("ZSUPPORTURL");"https:"==location.protocol&&(t=(t=t.replace("9090","9443")).replace("8080","8443")),c=t;var a=document.domain.includes("crmplus")?"CrmPlusURL":document.domain.includes("zcrm.zoho.com")?"ZCRMURL":"CRMURL";d=RebrandLinkUtil.getProperty("URLPROTOCOL")+"://"+RebrandLinkUtil.getProperty(a),m=e.crmsupportzgid,u=e.portalName,void 0!==e.portalUser&&(g=e.portalUser)}},receiveDeskMessage:function(e){e.origin==location.protocol+"//"+c&&(Crm.trackSpotLightAction("ZDesk - Ticket Comment"),e.source.postMessage(Crm.userDetails.ZUID,e.origin))},refreshData:function(){if(Crm.trackSpotLightAction("ZDesk - Ticket Refresh"),deskCache.clear(crmRelatedList.EntityId),p){U.get("#deskRefresh").removeClass("ref_complete").addClass("ref_loading");var e=deskInteg.getCurrentTicketType(),a={pageToken:0,ticketType:e,module:crmRelatedList.Module,moduleId:crmRelatedList.EntityId,deskstats:"true"},n=deskInteg.getKeyValueForTicketCriteria();$.isEmptyObject(n)?U.get("#deskRefresh").removeClass("ref_loading").addClass("ref_complete"):(a[n.key]=n.value,a[csrfParamName]=csrfToken,deskInteg.initiateAjaxCall(v,"POST",a,(function(a){if(Object.keys(a).length>1){deskInteg.init(),t=void 0;var n=Handlebars.templates.zdeskActions(a);U.get("#supportdiv").html(n),deskInteg.updateDetailsForRL(a.SupportObj),deskInteg.loadDeskintegration(a),U.get("#ticketFilterSelect").val(e)}U.get("#deskRefresh").removeClass("ref_loading").addClass("ref_complete op05 eventNone")})))}},roundOff:function(e,t){return Number(Math.round(e+"e"+t)+"e-"+t)},getUserImage:function(e){return e?h+"/file?ID="+e+"&fs=thumb":null},hideDeskTab:function(){var e={};e[csrfParamName]=csrfToken,deskInteg.initiateAjaxCall(P,"POST",e,(function(){setTimeout(crmTab.reloadTabMenu,2e3),$("#tab_Home").trigger("click")}))}}}(),deskCache={cacheData:{},get:function(e){return!(!deskCache.cacheData.hasOwnProperty(e)||!deskCache.cacheData[e])&&deskCache.cacheData[e].val},set:function(e,t,a){deskCache.clear(e);var n=!1;a&&parseInt(a)>0&&(n=setTimeout((function(){deskCache.clear(e)}),parseInt(a))),deskCache.cacheData[e]={expiry:a,val:t,timeout:n}},clear:function(e){return!!deskCache.cacheData.hasOwnProperty(e)&&(deskCache.cacheData[e]&&deskCache.cacheData[e].timeout&&clearTimeout(deskCache.cacheData[e].timeout),delete deskCache.cacheData[e],!0)}};!function(){var e=Handlebars.template,t=Handlebars.templates=Handlebars.templates||{};t.zdeskActions=e({1:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression;return' <div class="mB10" id="deskRelatedListMenu" style="display:none"> <div class="mB20 dvmB0"> <div id="deskTicketsSummary" class="dvmB20 p20 pL0 deskStatsSummary pR" '+(null!=(l=a.if.call(s,null!=(l=null!=t?t.SupportObj:t)?l.showStats:l,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.program(4,i,0),data:i}))?l:"")+' > <div id="deskstatsEmail" class="createSelect newChosenSel crm-font-bold mB20" style=\'display:none\'> <select id=\'select_deskstats\' onchange="deskInteg.getTicketStats()" > </select> </div> <table class="w100per deskRelStatTable" cellpadding="0" cellspacing="0"> <tbody> <tr> <td class="statTd"> <p class="statDesc">'+r(a.getI18n.call(s,"crm.zdesk.stats.overall",{name:"getI18n",hash:{},data:i}))+'</p> <p id="totalTickets" class="statVal">0</p> </td> <td class="statTd"> <p class="statDesc">'+r(a.getI18n.call(s,"crm.zdesk.stats.overdue",{name:"getI18n",hash:{},data:i}))+'</p> <p id="overdueTickets" class="statVal">0</p> </td> <td class="statTd"> <p class="statDesc">'+r(a.getI18n.call(s,"crm.zdesk.stats.response",{name:"getI18n",hash:{},data:i}))+'</p> <p id="avgResTime" class="statVal dIB" onmouseenter="crmui.toolTip_show(this, \'center\', \''+r(a.getI18n.call(s,"crm.zdesk.stats.msg",{name:"getI18n",hash:{},data:i}))+'\')" onmouseleave="crmui.toolTip_hide()"> <span>00:00</span><span class="statSubtleText mL5">'+r(a.getI18n.call(s,"crm.workflow.scheduler.hours",{name:"getI18n",hash:{},data:i}))+'</span> </p> </td> <td class="statTd"> <p class="statDesc">'+r(a.getI18n.call(s,"crm.zdesk.stats.resolution",{name:"getI18n",hash:{},data:i}))+'</p> <p id="avgSolTime" class="statVal dIB" onmouseenter="crmui.toolTip_show(this, \'center\', \''+r(a.getI18n.call(s,"crm.zdesk.stats.msg",{name:"getI18n",hash:{},data:i}))+'\')" onmouseleave="crmui.toolTip_hide()"> <span>00:00</span><span class="statSubtleText mL5">'+r(a.getI18n.call(s,"crm.workflow.scheduler.hours",{name:"getI18n",hash:{},data:i}))+'</span> </p> </td> <td class="statTd"> <p class="statDesc">'+r(a.getI18n.call(s,"crm.zdesk.stats.happiness",{name:"getI18n",hash:{},data:i}))+'</p> <p class="statVal"> <span id="cusHapRate" class="vam">0%</span> <span id="happiness_smiley" class="happySmiley vam mB1"></span> <span id="no_happinessrating" class="color_9 f14">'+r(a.getI18n.call(s,"crm.zdesk.noratings",{name:"getI18n",hash:{},data:i}))+'</span> </p> </td> </tr> </tbody> </table> </div> </div> <div class="pT5 fL"> <div class="dIB ticket_select" id="selectedTicketInfo" style="display: none;"> <div class="dIB"> <span id="selectedTicketCount" class="bold f13">0</span> <span class="color_7 f13">'+r(a.getI18n.call(s,"crm.zdesk.ticketselect",{name:"getI18n",hash:{},data:i}))+'</span> </div> <a class="cP mL10 f12" onClick="deskInteg.clearSelect();">'+r(a.getI18n.call(s,"crm.zdesk.clear",{name:"getI18n",hash:{},data:i}))+'</a> </div> <div class="newSelect ticket_noselect" id="deskTicketFilter"> <select id="ticketFilterSelect" data-zcqa="desk_ticketfilter" onChange="deskInteg.getDeskTickets(\'\',0);"> <option selected value="All">All Tickets</option> '+(null!=(l=a.if.call(s,null!=(l=null!=t?t.SupportObj:t)?l.potentialModule:l,{name:"if",hash:{},fn:e.program(6,i,0),inverse:e.noop,data:i}))?l:"")+" "+(null!=(l=a.each.call(s,null!=(l=null!=t?t.SupportObj:t)?l.ticketTypes:l,{name:"each",hash:{},fn:e.program(9,i,0),inverse:e.noop,data:i}))?l:"")+' <option value="Overdue">Overdue Tickets</option> <option value="High">High Priority Tickets</option> </select> </div> <div id="ticketOperations" class="dIB mL20 ticket_select" style="display: none;"> '+(null!=(l=a.if.call(s,null!=(l=null!=t?t.SupportObj:t)?l.portalUser:l,{name:"if",hash:{},fn:e.program(11,i,0),inverse:e.program(13,i,0),data:i}))?l:"")+" "+(null!=(l=a.if.call(s,null!=(l=null!=t?t.SupportObj:t)?l.potentialModule:l,{name:"if",hash:{},fn:e.program(15,i,0),inverse:e.program(17,i,0),data:i}))?l:"")+" "+(null!=(l=a.if.call(s,null!=(l=null!=t?t.SupportObj:t)?l.showPotential:l,{name:"if",hash:{},fn:e.program(20,i,0),inverse:e.program(25,i,0),data:i}))?l:"")+' </div> </div> <div class="fR pR pT5"> <a id=\'ticketStatLink\' data-zcqa="desk_togglestats" class="cP dIB vam ticket_noselect showHideStatLink" onClick="deskInteg.toggleStats(this)"> '+(null!=(l=a.if.call(s,null!=(l=null!=t?t.SupportObj:t)?l.showStats:l,{name:"if",hash:{},fn:e.program(30,i,0),inverse:e.program(32,i,0),data:i}))?l:"")+" </a> "+(null!=(l=a.if.call(s,null!=(l=null!=t?t.SupportObj:t)?l.portalUser:l,{name:"if",hash:{},fn:e.program(34,i,0),inverse:e.noop,data:i}))?l:"")+" "+(null!=(l=a.if.call(s,null!=(l=null!=t?t.SupportObj:t)?l.crmAdmin:l,{name:"if",hash:{},fn:e.program(36,i,0),inverse:e.noop,data:i}))?l:"")+' </div> <div class="cB"></div> </div> <div id="deleteDeskTicketConfirmation" class="zcrm-modal zcrm-effect zcrm-show" style="display: none;"> <div id="" class="zcrm-content"> <form> <div class="popup-model-content noBoxShadow fontsmooth" style="width: 700px;overflow:hidden;"> <div class="color_3"> <div class="crm-font-regular f18 content aligncenter">'+r(a.getI18n.call(s,"crm.zdesk.delete.ticket",{name:"getI18n",hash:{},data:i}))+'</div> </div> <div class="aligncenter mT25"> <input type="button" class="redbtn"  data-zcqa="desk_deleleticketconfirm" value="'+r(a.getI18n.call(s,"crm.label.delete",{name:"getI18n",hash:{},data:i}))+'" onclick="deskInteg.deleteTickets()"> <input name="cancel" class="newgraybtn" type="button" value="'+r(a.getI18n.call(s,"crm.label.no",{name:"getI18n",hash:{},data:i}))+'" onclick="hideAnimatePopup(\'deleteDeskTicketConfirmation\')"> </div> </div> </form> </div> </div> '},2:function(e,t,a,n,i){return' style="border-bottom: 1px solid #e7e7e7;" '},4:function(e,t,a,n,i){return' style="border-bottom: 1px solid #e7e7e7; display: none;" '},6:function(e,t,a,n,i){var l,s=null!=t?t:{};return" <option "+(null!=(l=a.if_gt.call(s,null!=(l=null!=t?t.SupportObj:t)?l.potentialTickets:l,"0",{name:"if_gt",hash:{},fn:e.program(7,i,0),inverse:e.noop,data:i}))?l:"")+' value="Potentials">'+e.escapeExpression(a.getI18n.call(s,"crm.zdesk.potentialticket",null!=(l=null!=t?t.SupportObj:t)?l.potentialSingular:l,{name:"getI18n",hash:{},data:i}))+"</option> "},7:function(e,t,a,n,i){return" selected "},9:function(e,t,a,n,i){var l=e.lambda,s=e.escapeExpression;return' <option value="'+s(l(null!=t?t.value:t,t))+'">'+s(l(null!=t?t.value:t,t))+" Tickets</option> "},11:function(e,t,a,n,i){var l=null!=t?t:{},s=e.escapeExpression;return' <input type="button" class="newwhitebtn dIB" id="tktFldUpdBtn" data-zcqa="desk_updateticket"\n\t\t\t\tonClick="deskInteg.showTktFldUpdPop()" value="'+s(a.getI18n.call(l,"crm.zdesk.updatefield",{name:"getI18n",hash:{},data:i}))+'"> <input type="button" class="newwhitebtn dIB" id="ticketCloseBtn" data-zcqa="desk_closeticket"\n\t\t\t\tonClick="deskInteg.updateFields(\'status\', \'Closed\')" value="'+s(a.getI18n.call(l,"crm.button.close",{name:"getI18n",hash:{},data:i}))+'"> '},13:function(e,t,a,n,i){var l=null!=t?t:{},s=e.escapeExpression;return' <div class="dIB ticketDisabledButton" onmouseenter="crmui.showTooltip(\''+s(a.getI18n.call(l,"crm.zdesk.user.needportal.brandchange",a.getIntegrationName.call(l,"ZOHO_DESK",{name:"getIntegrationName",hash:{},data:i}),{name:"getI18n",hash:{},data:i}))+'\', \'false\', \'left\')" onmouseleave="crmui.hideTooltip()"> <input type="button" class="newwhitebtn dIB eventNone" id="tktFldUpdBtn" value="'+s(a.getI18n.call(l,"crm.zdesk.updatefield",{name:"getI18n",hash:{},data:i}))+'"> </div> <div class="dIB ticketDisabledButton" onmouseenter="crmui.showTooltip(\''+s(a.getI18n.call(l,"crm.zdesk.user.needportal.brandchange",a.getIntegrationName.call(l,"ZOHO_DESK",{name:"getIntegrationName",hash:{},data:i}),{name:"getI18n",hash:{},data:i}))+'\', \'false\', \'left\')" onmouseleave="crmui.hideTooltip()"> <input type="button" class="newwhitebtn dIB eventNone" id="ticketCloseBtn" value="'+s(a.getI18n.call(l,"crm.button.close",{name:"getI18n",hash:{},data:i}))+'"> </div> '},15:function(e,t,a,n,i){var l;return' <input type="button" class="newwhitebtn dIB" id="linkToThisPotential" data-zcqa="desk_linkthispotential"\n\t\t\t\t\tonClick="deskInteg.linkToPotential();" value="'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.zdesk.thispotential",null!=(l=null!=t?t.SupportObj:t)?l.potentialSingular:l,{name:"getI18n",hash:{},data:i}))+'"> '},17:function(e,t,a,n,i){var l;return" "+(null!=(l=a.if.call(null!=t?t:{},null!=(l=null!=t?t.SupportObj:t)?l.showPotential:l,{name:"if",hash:{},fn:e.program(18,i,0),inverse:e.noop,data:i}))?l:"")+" "},18:function(e,t,a,n,i){var l;return' <input type="button" class="newwhitebtn dIB" id="linkToPotential" data-zcqa="desk_linkpotential"\n\t\t\t\t\tonClick="deskInteg.populatePotentialPopup()" value="'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.zdesk.linkpotential",null!=(l=null!=t?t.SupportObj:t)?l.potentialLabel:l,{name:"getI18n",hash:{},data:i}))+'"> '},20:function(e,t,a,n,i){var l,s=null!=t?t:{};return' <div class="dIB"> <div class="pR"> <span class="newbutton mL5 newwhitebtn moredot_h2_35 moredotparentBtn" onClick="sE(event);$(this).next().show()"></span> <div class="ddM mL5" data-close="true" style="top: 35px; z-index: 10; display: none;"> <ul> <li> '+(null!=(l=a.if.call(s,null!=(l=null!=t?t.SupportObj:t)?l.portalUser:l,{name:"if",hash:{},fn:e.program(21,i,0),inverse:e.program(23,i,0),data:i}))?l:"")+' </li> <li> <a class="dIB" id="linkToPotential" data-zcqa="desk_unlink"\n\t\t\t\t\t\t\t\t\tonClick="deskInteg.unlinkTickets()">'+e.escapeExpression(a.getI18n.call(s,"crm.zdesk.unlink",null!=(l=null!=t?t.SupportObj:t)?l.potentialLabel:l,{name:"getI18n",hash:{},data:i}))+"</a> </li> </ul> </div> </div> </div> "},21:function(e,t,a,n,i){return' <a class="dIB" id="tktDelBtn" data-zcqa="desk_deleteticket"\n\t\t\t\t\t\t\t\t\tonClick="showAnimatePopup(\'deleteDeskTicketConfirmation\')">'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.button.delete",{name:"getI18n",hash:{},data:i}))+"</a> "},23:function(e,t,a,n,i){var l=null!=t?t:{},s=e.escapeExpression;return' <div class="dIB ticketDisabledButton" onmouseenter="crmui.showTooltip(\''+s(a.getI18n.call(l,"crm.zdesk.user.needportal.brandchange",a.getIntegrationName.call(l,"ZOHO_DESK",{name:"getIntegrationName",hash:{},data:i}),{name:"getI18n",hash:{},data:i}))+"', 'false', 'center')\" onmouseleave=\" $('#wf_tooltip').hide()\"> <a class=\"dIB eventNone\" id=\"tktDelBtn\">"+s(a.getI18n.call(l,"crm.button.delete",{name:"getI18n",hash:{},data:i}))+"</a> </div> "},25:function(e,t,a,n,i){var l;return" "+(null!=(l=a.if.call(null!=t?t:{},null!=(l=null!=t?t.SupportObj:t)?l.portalUser:l,{name:"if",hash:{},fn:e.program(26,i,0),inverse:e.program(28,i,0),data:i}))?l:"")+" "},26:function(e,t,a,n,i){return' <input type="button" class="newwhitebtn dIB" id="tktDelBtn" data-zcqa="desk_ticketdelete"\n\t\t\t\t\t\t\t\t\tonClick="showAnimatePopup(\'deleteDeskTicketConfirmation\')" value="'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.button.delete",{name:"getI18n",hash:{},data:i}))+'"> '},28:function(e,t,a,n,i){var l=null!=t?t:{},s=e.escapeExpression;return' <div class="dIB ticketDisabledButton" onmouseenter="crmui.showTooltip(\''+s(a.getI18n.call(l,"crm.zdesk.user.needportal.brandchange",a.getIntegrationName.call(l,"ZOHO_DESK",{name:"getIntegrationName",hash:{},data:i}),{name:"getI18n",hash:{},data:i}))+'\', \'false\', \'left\')" onmouseleave="crmui.hideTooltip()"> <input type="button" class="newwhitebtn dIB eventNone" id="tktDelBtn" value="'+s(a.getI18n.call(l,"crm.button.delete",{name:"getI18n",hash:{},data:i}))+'"> </div> '},30:function(e,t,a,n,i){return" "+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.zdesk.hidestats",{name:"getI18n",hash:{},data:i}))+" "},32:function(e,t,a,n,i){return" "+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.zdesk.showstats",{name:"getI18n",hash:{},data:i}))+" "},34:function(e,t,a,n,i){return' <a id="newTicketLink" data-zcqa="desk_createticket" class="cP dIB vam ticket_noselect createlink"\n\t\t\tonClick="deskInteg.showCreateTicketPopup()"> '+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.zdesk.newticket",{name:"getI18n",hash:{},data:i}))+"</a> "},36:function(e,t,a,n,i){var l=null!=t?t:{},s=e.escapeExpression;return' <div class="newRlEdit dIB vam ticket_noselect" data-zcqa="desk_colchange" style="visibility: visible;"\n\t\t\tonClick="deskInteg.showColList(); sE(event)"></div> <div class="ddMenus pT0 pB0 boxShadowMask mB30 pA r0" id="zdeskColumns"\n\t\t\tdata-close="true" onClick="sE(event)"\n\t\t\tstyle="min-width: 200px; top: 0px; right: 0px; display: none;"> <div class="pR"> <span class="setupsearchicon" style="left: 10px;"></span> <input\n\t\t\t\t\ttype="text" class="setupsearch" style="width: 100%;"> </div> <div class="menuDiv"> <div id="menuColumnListView"> <ul id="relateList"\n\t\t\t\t\t\tclass="sortable m0 p10 relateListCheck ui-sortable"> </ul> </div> <div class="columnListBtn"> <input type="button" class="primarybtn" data-zcqa="desk_colchangedone" value="'+s(a.getI18n.call(l,"crm.button.save",{name:"getI18n",hash:{},data:i}))+'"\n\t\t\t\t\t\tonClick="deskInteg.saveColModify()"> <input type="button"\n\t\t\t\t\t\tclass="newwhitebtn" value="'+s(a.getI18n.call(l,"crm.button.cancel",{name:"getI18n",hash:{},data:i}))+'"\n\t\t\t\t\t\tonClick="deskInteg.cancelColModify()"> </div> </div> </div> '},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l;return(null!=(l=a.if.call(null!=t?t:{},null!=(l=null!=t?t.SupportObj:t)?l.datePattern:l,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?l:"")+" "},useData:!0}),t.zdeskCustomHeaders=e({1:function(e,t,a,n,i){var l;return" "+(null!=(l=a.if.call(null!=t?t:{},null!=t?t.isDisabledinCRM:t,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.program(4,i,0),data:i}))?l:"")+" "},2:function(e,t,a,n,i){var l=e.lambda,s=e.escapeExpression;return' <li class="ccNotSelected cancelSort op05"\n\t\t\t\tid="desklist_'+s(l(null!=t?t.name:t,t))+'"><label> <input id="deskcheck_'+s(l(null!=t?t.name:t,t))+'"\n\t\t\t\t\ttype="checkbox" disabled checked> <span></span> <span id="deskspan_'+s(l(null!=t?t.name:t,t))+'">'+s(l(null!=t?t.i18NLabel:t,t))+'</span> <span\n\t\t\t\t\tclass="mandatoryColor">*</span> </label></li> '},4:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression;return' <li class="ccNotSelected" id="desklist_'+r(s(null!=t?t.name:t,t))+'"> <label> <input id="deskcheck_'+r(s(null!=t?t.name:t,t))+'" type="checkbox" '+(null!=(l=a.if.call(null!=t?t:{},null!=t?t.isVisibleinCRM:t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))?l:"")+' > <span></span> <span id="deskspan_'+r(s(null!=t?t.name:t,t))+'">'+r(s(null!=t?t.i18NLabel:t,t))+"</span> </label> </li> "},5:function(e,t,a,n,i){return" checked "},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression;return'<div class="pR"> <span class="setupsearchicon" style="left: 10px;"></span> \x3c!-- <input\n\t\ttype="text" class="setupsearch" style="width: 100%;"> --\x3e <input type="text" id="columnlistsearch" data-zcqa="columnlistsearch"\n\t\tautocomplete="off" class="setupsearch"\n\t\tstyle="font-size:1.4rem; padding: 8px 10px 8px 30px; width: 100%;"\n\t\tplaceholder="Search"\n\t\tonkeyup="searchColumnList(\'columnListId\', event, this.value)"> </div> <div class="menuDiv"> <div id="menuColumnListView"\n\t\tclass="pR oH"\n\t\tstyle="max-height: 418px;"> <ul id="columnListId"\n\t\t\tclass="m0 p10 relateListCheck deskRelCheckList"\n\t\t\tstyle="min-height: 0px !important; height: auto !important; max-height: none !important;"> '+(null!=(l=a.each.call(s,null!=t?t.ticketFields:t,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?l:"")+' </ul> </div> <div class="columnListBtn"> <input type="button" class="primarybtn" value="'+r(a.getI18n.call(s,"crm.button.save",{name:"getI18n",hash:{},data:i}))+'"\n\t\t\tonclick="deskInteg.saveColModify()"> <input type="button"\n\t\t\tclass="newwhitebtn" value="'+r(a.getI18n.call(s,"crm.button.cancel",{name:"getI18n",hash:{},data:i}))+'"\n\t\t\tonclick="deskInteg.cancelColModify()"> </div> </div>'},useData:!0}),t.zdeskIntegration=e({1:function(e,t,a,n,i){return' <table border="0" width="100%" cellspacing="0" cellpadding="0"\n\t\talign="center" class="norec pR30 italic fontsmooth"> <tr> <td valign="top" id="supportDiv"> <div class="pR30 italic fontsmooth mR5">'+e.escapeExpression(a.getI18n.call(null!=t?t:{},null!=t?t.deskError:t,{name:"getI18n",hash:{},data:i}))+"</div> </td> </tr> </table> "},3:function(e,t,a,n,i){var l;return' <div class="mB30 mT20"> <table id="ticketsTable" cellpadding="0" cellspacing="0"\n\t\t\tclass="w100per pR"> <thead> <tr id="desk_tickets_thead_row" class="relList_headrow"> <th class="relList_headele firstCol"><label class="vh"> <span\n\t\t\t\t\t\t\tid="deskTktSelectAll" class="customCheckBox"></span> </label></th> '+(null!=(l=a.each.call(null!=t?t:{},null!=t?t.ticketHeadings:t,{name:"each",hash:{},fn:e.program(4,i,0),inverse:e.noop,data:i}))?l:"")+' </tr> </thead> <tbody id="desk_tickets_tbody">'+(null!=(l=e.invokePartial(n.zdeskTickets,t,{name:"zdeskTickets",data:i,helpers:a,partials:n,decorators:e.decorators}))?l:"")+' </tbody> </table> <div class="mB30 mT10"> <div class="fR"> <table id="ticketPageTable"></table> </div> <div class="cB"></div> </div> </div> '},4:function(e,t,a,n,i){return' <th class="relList_headele">'+e.escapeExpression(e.lambda(null!=t?t.i18NLabel:t,t))+"</th> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l;return'<div id="deskIntegDiv"> '+(null!=(l=a.if.call(null!=t?t:{},null!=t?t.deskError:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))?l:"")+' <div id="deskTicketBC" onmouseleave="deskInteg.showHideAgentInfoBC(false, event)" class="" style="display: none;"> <div class="pR"> <div class="up_space pA"> <img id="agentImg" class="up_size fL" src=""> </div> <div class="userbc_info"> <div class="crm-font-bold f15 pT10 pB5 userinfoMax"> <span id="bcAgentName" class="dIB" style="max-width: 350px;"> </span> </div> <a class="emailicon lh24 black dB" href="mailto:"></a> </div> <div id="actionLayer" class="aligncenter"></div> </div> </div> <div id="linkToPotentDiv"> </div> </div> '},usePartial:!0,useData:!0}),t.zdeskTickets=e({1:function(e,t,a,n,i,l,s){var r;return" "+(null!=(r=a.each.call(null!=t?t:{},null!=t?t.tickets:t,{name:"each",hash:{},fn:e.program(2,i,0,l,s),inverse:e.noop,data:i,blockParams:l}))?r:"")+" "},2:function(e,t,a,n,i,l,s){var r,o=e.lambda,c=e.escapeExpression;return' <tr class="relList_datarow topband_dv_row" id="ticket_'+c(o(null!=t?t.id:t,t))+'" data-dept="'+c(o(null!=t?t.departmentId:t,t))+'"> <td class="relList_dataele  firstCol"> <div class="flipContainer"> <div class="flipCard"> <div class="flipFront flipper"> <div class="ticketSourceIconCont"> <div class="ticketSourceIcon '+c(o(null!=t?t.channel:t,t))+'_Icon"></div> </div> </div> <div class="flipBack flipper"> <div class="deskRelCkBoxCont"> <div class="mAuto"> <div class="ckBoxCont"> <label class="label_ckbox"> <input type="checkbox" class="desk_hidden_ckbox rowSelectorCkbox" onClick="deskInteg.updateRowSelection(this)"> <span class="span_ckbox"></span> </label> </div> </div> </div> </div> </div> </div> </td> '+(null!=(r=a.each.call(null!=t?t:{},null!=s[1]?s[1].ticketKeys:s[1],{name:"each",hash:{},fn:e.program(3,i,0,l,s),inverse:e.noop,data:i,blockParams:l}))?r:"")+" </tr> "},3:function(e,t,a,n,i,l,s){var r;return" "+(null!=(r=a.if.call(null!=t?t:{},null!=t?t.mainTicketDetail:t,{name:"if",hash:{},fn:e.program(4,i,0,l,s),inverse:e.program(14,i,0,l,s),data:i,blockParams:l}))?r:"")+" "},4:function(e,t,a,n,i,l,s){var r,o=e.lambda,c=e.escapeExpression,d=null!=t?t:{};return' <td class="relList_dataele mainTicketDetail cP" data-caseId="'+c(o(null!=s[1]?s[1].encryptedId:s[1],t))+'" onClick="javascript:deskInteg.showDeskPopup(\''+c(a.encodeJS.call(d,null!=s[1]?s[1].id:s[1],{name:"encodeJS",hash:{},data:i,blockParams:l}))+"')\" onmouseenter=\"$(this).parent().css('background-color', '#f9f9f9')\" onmouseleave=\"$(this).parent().css('background-color', '')\"> \x3c!-- <div class=\"dIB vat mR10 mT5\"> <div class=\"ticketSourceIcon "+c(o(null!=s[1]?s[1].channel:s[1],t))+'_Icon"></div> </div> --\x3e <div class="dIB mL5"> <div class="mB5"> <span class="ticket_id dIB f14 vam crm-font-bold">#'+c(o(null!=s[1]?s[1].ticketNumber:s[1],t))+"</span> "+(null!=(r=a.isOverDue.call(d,null!=s[1]?s[1].status:s[1],null!=s[1]?s[1].dueDate:s[1],{name:"isOverDue",hash:{},fn:e.program(5,i,2,l,s),inverse:e.noop,data:i,blockParams:l}))?r:"")+" </div> "+(null!=(r=a.if.call(d,null!=s[2]?s[2].ticketPotentials:s[2],{name:"if",hash:{},fn:e.program(7,i,0,l,s),inverse:e.noop,data:i,blockParams:l}))?r:"")+' <p class="ticket_subject f13 tOE oH crm-font-regular dIB vam" style="max-width: 300px;"\n\t\t\t\tonmouseenter="deskInteg.showSubjectTooltip(this)"\n\t\t\t\tonmouseleave="crmui.toolTip_hide()">'+c(o(null!=s[1]?s[1].subject:s[1],t))+'</p> <div class="dIB vam mL10"> <div class="conversationThreadIcon op03"> </div> </div> <div class="dIB pR mR5"> <span class="dIB pA ticketThreadCount aligncenter">'+c(o(null!=s[1]?s[1].threadCount:s[1],t))+'</span> </div> </div> <div class="dIB fR vam"> <div class="commentIcon mT13 cP op05" > </div> <div class="pR mR30 '+(null!=(r=a.lessThan.call(d,null!=s[1]?s[1].commentCount:s[1],1,{name:"lessThan",hash:{},fn:e.program(12,i,0,l,s),inverse:e.noop,data:i,blockParams:l}))?r:"")+'"> <span class="dIB pA whiteBg commentCountCircle aligncenter">'+c(o(null!=s[1]?s[1].commentCount:s[1],t))+'</span> </div> </div> <div class="cB"></div> </td> '},5:function(e,t,a,n,i,l){var s=e.escapeExpression;return' <span\n\t\t\t\t\tclass="ticket_status h_duedate h_overdue mL10"\n\t\t\t\t\tonmouseover="crmui.showTooltip(\''+s(a.encodeJS.call(null!=t?t:{},l[0][1],{name:"encodeJS",hash:{},data:i,blockParams:l}))+"',false,'left',this )\"\n\t\t\t\t\tonmouseout=\"crmui.hideTooltip()\">"+s(e.lambda(l[0][0],t))+"</span> "},7:function(e,t,a,n,i,l,s){var r,o=null!=t?t:{};return' <div class="linkToPotImg mT1 dIB vam" '+(null!=(r=a.if.call(o,a.getObjectByKey.call(o,null!=s[2]?s[2].ticketPotentials:s[2],null!=s[1]?s[1].id:s[1],{name:"getObjectByKey",hash:{},data:i}),{name:"if",hash:{},fn:e.program(8,i,0,l,s),inverse:e.program(10,i,0,l,s),data:i}))?r:"")+'> <span id="deskPotentialImg" class="Potentials-small mR5 vam" style="margin-left: 0px;"></span> </div> '},8:function(e,t,a,n,i){return" "},10:function(e,t,a,n,i){return' style="display:none" '},12:function(e,t,a,n,i){return" vh "},14:function(e,t,a,n,i,l,s){var r;return" "+(null!=(r=a.if.call(null!=t?t:{},null!=t?t.assigneeDetail:t,{name:"if",hash:{},fn:e.program(15,i,0,l,s),inverse:e.program(20,i,0,l,s),data:i,blockParams:l}))?r:"")+" "},15:function(e,t,a,n,i,l,s){var r;return" "+(null!=(r=a.if.call(null!=t?t:{},null!=s[1]?s[1].agent:s[1],{name:"if",hash:{},fn:e.program(16,i,0,l,s),inverse:e.program(18,i,0,l,s),data:i}))?r:"")+" "},16:function(e,t,a,n,i,l,s){var r,o=null!=t?t:{},c=e.escapeExpression,d=e.lambda;return' <td class="relList_dataele assigneeTd" data-params="'+c(a.ObjToString.call(o,null!=s[1]?s[1].agent:s[1],{name:"ObjToString",hash:{},data:i}))+'" onmouseleave="deskInteg.showHideAgentInfoBC(false, event);"> <div class="dIB vam mR10"> <img class="assigneeImage circle_30"\n\t\t\t\t\t\tsrc="'+c(a.getUserImg.call(o,null!=(r=null!=s[1]?s[1].agent:s[1])?r.zuid:r,{name:"getUserImg",hash:{},data:i}))+'"> </div> <div class="dIB vam cP" onmouseenter="deskInteg.showHideAgentInfoBC(true, this);"> <span class="assigneeName">'+c(d(null!=(r=null!=s[1]?s[1].agent:s[1])?r.firstName:r,t))+" "+c(d(null!=(r=null!=s[1]?s[1].agent:s[1])?r.lastName:r,t))+"</span> </div> </td> "},18:function(e,t,a,n,i){return' <td class="relList_dataele assigneeTd" data-params=""> </td> '},20:function(e,t,a,n,i,l,s){var r;return" "+(null!=(r=a.if.call(null!=t?t:{},null!=t?t.isCustomField:t,{name:"if",hash:{},fn:e.program(21,i,0,l,s),inverse:e.program(27,i,0,l,s),data:i,blockParams:l}))?r:"")+" "},21:function(e,t,a,n,i,l,s){var r;return" "+(null!=(r=a.if.call(null!=t?t:{},null!=t?t.isDateField:t,{name:"if",hash:{},fn:e.program(22,i,0,l,s),inverse:e.program(25,i,0,l,s),data:i,blockParams:l}))?r:"")+" "},22:function(e,t,a,n,i,l,s){var r,o=null!=t?t:{};return' <td class="relList_dataele dateDetail"> '+(null!=(r=a.getTimeInUserTZ.call(o,a.getObjectByKey.call(o,null!=s[1]?s[1].customFields:s[1],null!=t?t.name:t,{name:"getObjectByKey",hash:{},data:i,blockParams:l}),null!=t?t.name:t,{name:"getTimeInUserTZ",hash:{},fn:e.program(23,i,2,l,s),inverse:e.noop,data:i,blockParams:l}))?r:"")+" </td> "},23:function(e,t,a,n,i,l){var s=e.lambda,r=e.escapeExpression;return' <span class="defaultcursor" onmouseover="crmui.showTooltip(\''+r(s(l[0][1],t))+"',false,'center',this)\" onmouseout=\"crmui.hideTooltip()\">"+r(s(l[0][0],t))+"</span> "},25:function(e,t,a,n,i,l,s){return' <td class="relList_dataele" id="ticket_status">'+e.escapeExpression(a.getObjectByKey.call(null!=t?t:{},null!=s[1]?s[1].customFields:s[1],null!=t?t.name:t,{name:"getObjectByKey",hash:{},data:i}))+" </td> "},27:function(e,t,a,n,i,l,s){var r;return" "+(null!=(r=a.if.call(null!=t?t:{},null!=t?t.isDateField:t,{name:"if",hash:{},fn:e.program(28,i,0,l,s),inverse:e.program(30,i,0,l,s),data:i,blockParams:l}))?r:"")},28:function(e,t,a,n,i,l,s){var r,o=null!=t?t:{};return' <td class="relList_dataele dateDetail"> '+(null!=(r=a.getTimeInUserTZ.call(o,a.getObjectByKey.call(o,s[1],null!=t?t.name:t,{name:"getObjectByKey",hash:{},data:i}),null!=t?t.name:t,{name:"getTimeInUserTZ",hash:{},fn:e.program(23,i,2,l,s),inverse:e.noop,data:i}))?r:"")+" </td> "},30:function(e,t,a,n,i,l,s){var r;return" "+(null!=(r=a.if.call(null!=t?t:{},null!=t?t.crmContact:t,{name:"if",hash:{},fn:e.program(31,i,0,l,s),inverse:e.program(34,i,0,l,s),data:i,blockParams:l}))?r:"")+" "},31:function(e,t,a,n,i,l,s){var r;return' <td class="relList_dataele"> '+(null!=(r=a.executeIfObjPresent.call(null!=t?t:{},null!=s[2]?s[2].emailContacts:s[2],null!=(r=null!=s[1]?s[1].contact:s[1])?r.email:r,{name:"executeIfObjPresent",hash:{},fn:e.program(32,i,1,l,s),inverse:e.noop,data:i,blockParams:l}))?r:"")+" </td> "},32:function(e,t,a,n,i,l){var s,r=e.lambda,o=e.escapeExpression;return' <link-to lt-prop-route="crm.tab.module.entity.detail" lt-prop-dp=\'["Contacts","'+o(r(null!=(s=l[0][0])?s.contactId:s,t))+'"]\' lt-prop-target="blank"> '+o(r(null!=(s=l[0][0])?s.contact:s,t))+" </link-to> "},34:function(e,t,a,n,i,l,s){var r;return" "+(null!=(r=a.if.call(null!=t?t:{},null!=t?t.crmPotential:t,{name:"if",hash:{},fn:e.program(35,i,0,l,s),inverse:e.program(38,i,0,l,s),data:i,blockParams:l}))?r:"")+" "},35:function(e,t,a,n,i,l,s){var r;return' <td id="deskPotentialtd" class="relList_dataele"> '+(null!=(r=a.executeIfObjPresent.call(null!=t?t:{},null!=s[2]?s[2].ticketPotentials:s[2],null!=s[1]?s[1].id:s[1],{name:"executeIfObjPresent",hash:{},fn:e.program(36,i,1,l,s),inverse:e.noop,data:i,blockParams:l}))?r:"")+" </td> "},36:function(e,t,a,n,i,l){var s,r=e.lambda,o=e.escapeExpression;return' <link-to lt-prop-route="crm.tab.module.entity.detail" lt-prop-dp=\'["Potentials","'+o(r(null!=(s=l[0][0])?s.potentialId:s,t))+'"]\' lt-prop-target="blank"> '+o(r(null!=(s=l[0][0])?s.potential:s,t))+" </link-to> "},38:function(e,t,a,n,i,l,s){var r,o=null!=t?t:{};return' <td class="relList_dataele '+(null!=(r=a.ifEquals.call(o,null!=t?t.name:t,"status",{name:"ifEquals",hash:{},fn:e.program(39,i,0,l,s),inverse:e.noop,data:i}))?r:"")+'"  id="ticket_status">'+e.escapeExpression(a.getObjectByKey.call(o,s[1],null!=t?t.name:t,{name:"getObjectByKey",hash:{},data:i}))+"</td> "},39:function(e,t,a,n,i,l,s){return" status_"+e.escapeExpression(e.lambda(null!=s[1]?s[1].status:s[1],t))+" "},41:function(e,t,a,n,i){var l;return" "+(null!=(l=a.if.call(null!=t?t:{},null!=t?t.ticketError:t,{name:"if",hash:{},fn:e.program(42,i,0),inverse:e.program(44,i,0),data:i}))?l:"")+" "},42:function(e,t,a,n,i){var l=null!=t?t:{},s=e.escapeExpression;return' <tr> <td valign="top" id="supportDiv" colspan="15"> <div class="norec pR30  fontsmooth">'+s(a.getI18n.call(l,null!=t?t.ticketError:t,{name:"getI18n",hash:{},data:i}))+' <a style="display:none"  id="noTicket_newTicketLink" class="cP dIB vam createlink" onclick="deskInteg.showCreateTicketPopup()" >'+s(a.getI18n.call(l,"crm.zdesk.newticket",{name:"getI18n",hash:{},data:i}))+"</a> </div> </td> </tr> "},44:function(e,t,a,n,i){var l;return' <table id="ticketPageTable"> '+(null!=(l=a.ifCondLogic.call(null!=t?t:{},null!=t?t.next:t,"=","true","||",null!=t?t.pageNum:t,">","0",{name:"ifCondLogic",hash:{},fn:e.program(45,i,0),inverse:e.noop,data:i}))?l:"")+" </table> "},45:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.lambda,o=e.escapeExpression;return' <tbody> <tr> <td id="ticketPrev"> '+(null!=(l=a.if_gt.call(s,null!=t?t.pageNum:t,0,{name:"if_gt",hash:{},fn:e.program(46,i,0),inverse:e.program(48,i,0),data:i}))?l:"")+' </td> <input type="hidden" id="ticketPage" value="'+o(r(null!=t?t.pageNum:t,t))+'" > <td class="vam" ><b>'+o(r(null!=t?t.from:t,t))+" to "+o(r(null!=t?t.to:t,t))+' </b> </td> <td id="ticketNext"> '+(null!=(l=a.if_eq.call(s,null!=t?t.next:t,"true",{name:"if_eq",hash:{},fn:e.program(50,i,0),inverse:e.program(52,i,0),data:i}))?l:"")+" </td> </tr> </tbody> "},46:function(e,t,a,n,i){return' <a class="link dIB vam" data-zcqa="desk_prevpage"\tonClick=\'deskInteg.getDeskTickets(event,'+e.escapeExpression(a.arithResult.call(null!=t?t:{},null!=t?t.pageNum:t,"-",1,{name:"arithResult",hash:{},data:i}))+',false)\'> <span class="previous dIB"></span> </a> '},48:function(e,t,a,n,i){return' <span class="previous_disabled dIB vam"></span> '},50:function(e,t,a,n,i){return' <a class="link dIB vam" data-zcqa="desk_nextpage" onClick=\'deskInteg.getDeskTickets(event,'+e.escapeExpression(a.arithResult.call(null!=t?t:{},null!=t?t.pageNum:t,"+",1,{name:"arithResult",hash:{},data:i}))+',true);\'> <span class="next dIB"></span> </a> '},52:function(e,t,a,n,i){return' <span class="nextDisabled dIB vam"></span> '},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i,l,s){var r;return" "+(null!=(r=a.if.call(null!=t?t:{},null!=t?t.tickets:t,{name:"if",hash:{},fn:e.program(1,i,0,l,s),inverse:e.program(41,i,0,l,s),data:i,blockParams:l}))?r:"")+" "},useData:!0,useDepths:!0,useBlockParams:!0}),t.zdeskUpdateTickets=e({1:function(e,t,a,n,i){var l=e.lambda,s=e.escapeExpression;return' <option value="'+s(l(null!=t?t.name:t,t))+'">'+s(l(null!=t?t.i18NLabel:t,t))+"</option> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l,s=null!=t?t:{},r=e.escapeExpression;return' <div id="tktFldPop"\n\tstyle="min-width: 600px; display: block; left: 720px; top: 143px; margin-left: -220px; margin-top: -133px; position: fixed;"\n\tclass="gBdr3 curv3px whiteBg zI31"> <p class="tktFldPopHead crm-font-bold">'+r(a.getI18n.call(s,"crm.label.updateField",{name:"getI18n",hash:{},data:i}))+'</p> <div class="pLR30"> <div class="tabDivCreate"> <div class="labelTabCreate pL5 pR fL">'+r(a.getI18n.call(s,"crm.zdesk.update.sel",{name:"getI18n",hash:{},data:i}))+'</div> <div class="labelValCreate fL"> <div class="createSelect newChosenSel"> <select id="updateFieldName" data-zcqa="desk_fieldselect" onchange="deskInteg.updateNewValueField(this)"> '+(null!=(l=a.each.call(s,null!=t?t.updateableFields:t,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?l:"")+' </select> </div> </div> <div class="cB"></div> </div> <div class="tabDivCreate"> <div id="deskupdateFieldMsg" class="labelTabCreate pL5 pR fL">'+r(a.getI18n.call(s,"crm.zdesk.update.enter",{name:"getI18n",hash:{},data:i}))+'</div> <div class="labelValCreate fL"> <div id="fieldUpdNewValDiv"> <div class="createSelect newChosenSel" id="fieldUpdSelectOption"> <select id="fieldUpdSelect" data-zcqa="desk_picklistfield"></select> </div> <div id="fieldUpdTextOption" class="" style="display: none;"> <div id="plainText" data-zcqa="desk_textfield" style="display: none;"> <input type="text" class="textField"> </div> <div id="dateText"> <input id="deskDate" data-zcqa="desk_datefield" type="text" class="textField fL" style="width: 85px;" placeholder="'+r(e.lambda(null!=t?t.datePattern:t,t))+'" onClick="crmCalendar.showCalendar(event)"> <span> <input id="deskTime" type="text" class="textField ddTime" fldlabel="ticket_date" isproperty="true" placeholder="hh:mm" style="padding: 0px 5px !important;"> <span id="ticket_date_ampmSpan" class="fL ampmSpan" style="padding-top: 0px;"></span> <input type="hidden" name="property(ticket_dateampm)" value="AM"> </span> <div class="cB"></div> </div> <span class="errMsg errorMsgDesc" id="errorMsg_TicketField" style="clear: both; color: rgb(221, 0, 0); font-size:1.1rem; display: block;"></span> </div> </div> </div> <div class="cB"></div> </div> </div> <div class="p20 alignright"> <input type="button" class="newwhitebtn mR20" value="'+r(a.getI18n.call(s,"crm.button.cancel",{name:"getI18n",hash:{},data:i}))+'" data-zcqa="desk_updatecancel"\n\t\t\tonclick="deskInteg.closeTicketUpdatePop()"> <input type="button" data-zcqa="desk_ticketupdate"\n\t\t\tclass="primarybtn" value="'+r(a.getI18n.call(s,"crm.button.update",{name:"getI18n",hash:{},data:i}))+'" onclick="deskInteg.updateFields()"> </div> </div>'},useData:!0})}(),function(){var e=Handlebars.template,t=Handlebars.templates=Handlebars.templates||{};t.createnewNotes=e({1:function(e,t,a,n,i){return"active"},3:function(e,t,a,n,i){return"sticky-remainder-alert"},5:function(e,t,a,n,i){return e.escapeExpression(a.getTextWithRawHtml.call(null!=t?t:{},null!=t?t.content:t,{name:"getTextWithRawHtml",hash:{},data:i}))},7:function(e,t,a,n,i){return"sticky-maximize-icon"},9:function(e,t,a,n,i){return"sticky-minimize-icon"},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l,s=e.lambda,r=e.escapeExpression,o=null!=t?t:{};return' <div class="sticky-notes-wrapper '+r(s(null!=(l=null!=t?t.properties:t)?l.dataCollapse:l,t))+" "+r(s(null!=(l=null!=t?t.properties:t)?l.color:l,t))+" "+(null!=(l=a.ifEquals.call(o,null!=t?t.last_modified:t,"true",{name:"ifEquals",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?l:"")+" "+(null!=(l=a.ifEquals.call(o,null!=t?t.hasReminderAlert:t,"true",{name:"ifEquals",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))?l:"")+'" data-height="'+r(s(null!=(l=null!=t?t.properties:t)?l.heightParent:l,t))+'" data-collapse="'+r(s(null!=(l=null!=t?t.properties:t)?l.dataCollapse:l,t))+'" data-width="'+r(s(null!=(l=null!=t?t.properties:t)?l.widthParent:l,t))+'" sticky-id="'+r(s(null!=t?t.stickyId:t,t))+'" id="sticky_main_'+r(s(null!=t?t.stickyId:t,t))+'" note-color="'+r(s(null!=(l=null!=t?t.properties:t)?l.color:l,t))+'" onclick="crmStickies.stickyNotesActive(this);sE(event);" style="left:'+r(s(null!=(l=null!=t?t.properties:t)?l.leftPos:l,t))+"px;top:"+r(s(null!=(l=null!=t?t.properties:t)?l.topPos:l,t))+"px;width:"+r(s(null!=(l=null!=t?t.properties:t)?l.widthParent:l,t))+"px;height:"+r(s(null!=(l=null!=t?t.properties:t)?l.heightParent:l,t))+'px;"  data-zcqa="stickies_wrapper_'+r(s(null!=t?t.stickyId:t,t))+'"> <div class="sticky-notes-header" ondblclick="crmStickies.toggleNotesEditor(this);sE(event);" data-zcqa="stickies_header_'+r(s(null!=t?t.stickyId:t,t))+'"> <div class="sticky-notes-header-action"> <span class="sticky-notes-header-text">'+(null!=(l=a.ifEquals.call(o,null!=(l=null!=t?t.properties:t)?l.dataCollapse:l,"sncollapseIn",{name:"ifEquals",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))?l:"")+'</span> <span class="sticky-remainder-icon sn-icon cP" onclick="crmStickies.remainder(this);sE(event);" title="'+r(a.getI18n.call(o,"crm.sticky.reminder",{name:"getI18n",hash:{},data:i}))+'" data-zcqa="stickies_reminder_'+r(s(null!=t?t.stickyId:t,t))+'"></span> <span class="sticky-notes-color-picker cP" onclick="crmStickies.colorPicker(this);sE(event);" title="'+r(a.getI18n.call(o,"crm.sticky.backgroundColor",{name:"getI18n",hash:{},data:i}))+'" data-zcqa="stickies_colorpicker_'+r(s(null!=t?t.stickyId:t,t))+'"> <div class="pA colorPickerDropdown dN"> <ul> <li class="blue" onclick="crmStickies.colorPickerChange(this);sE(event);" data-zcqa="stickies_colorpicker_blue_'+r(s(null!=t?t.stickyId:t,t))+'"></li> <li class="green" onclick="crmStickies.colorPickerChange(this);sE(event);" data-zcqa="stickies_colorpicker_green_'+r(s(null!=t?t.stickyId:t,t))+'"></li> <li class="ping" onclick="crmStickies.colorPickerChange(this);sE(event);" data-zcqa="stickies_colorpicker_ping_'+r(s(null!=t?t.stickyId:t,t))+'"></li> <li class="yellow" onclick="crmStickies.colorPickerChange(this);sE(event);" data-zcqa="stickies_colorpicker_yellow_'+r(s(null!=t?t.stickyId:t,t))+'"></li> </ul> </div> </span> <span class="'+(null!=(l=a.ifEquals.call(o,null!=(l=null!=t?t.properties:t)?l.dataCollapse:l,"sncollapseIn",{name:"ifEquals",hash:{},fn:e.program(7,i,0),inverse:e.program(9,i,0),data:i}))?l:"")+' sn-icon cP" onclick="crmStickies.toggleNotesEditor($(this).parents(\'.sticky-notes-header\'));sE(event);" title="'+r(a.getI18n.call(o,"crm.sticky.minimize",{name:"getI18n",hash:{},data:i}))+'" data-zcqa="stickies_minimize_'+r(s(null!=t?t.stickyId:t,t))+'"></span> <span class="sticky-close-mail-icon sn-icon cP" onclick="crmStickies.destroy(this);sE(event);" title="'+r(a.getI18n.call(o,"crm.sticky.delete",{name:"getI18n",hash:{},data:i}))+'"  data-zcqa="stickies_delete_'+r(s(null!=t?t.stickyId:t,t))+'"></span> </div> </div> <div class="sticky-notes-toolbar" onmouseenter="crmStickies.hoverToolbar();"  data-zcqa="stickies_toolbar_'+r(s(null!=t?t.stickyId:t,t))+"\"> <ul class=\"p0 m0\" onclick='crmStickies.clearStikcyValue();'> <li class=\" pR font-size-sticky dd\" onclick='sE(event);' id='sticky-font-size-"+r(s(null!=t?t.stickyId:t,t))+"'   data-zcqa=\"stickies_toolbar_unorderedList_"+r(s(null!=t?t.stickyId:t,t))+'"> <lyte-menu lt-prop-yield="true"  lt-prop-event=\'click\'  lt-prop-query="#sticky-font-size-'+r(s(null!=t?t.stickyId:t,t))+"\" id='sticky-fs-"+r(s(null!=t?t.stickyId:t,t))+"'> <template is=\"registerYield\" yield-name=\"yield\"> <lyte-menu-body> <lyte-menu-item data-value='1' class='sticky-font-typelist'> <lyte-menu-label class='stikcyfxs'> "+r(a.getI18n.call(o,"zc.editor.small",{name:"getI18n",hash:{},data:i}))+" </lyte-menu-label> </lyte-menu-item> <lyte-menu-item data-value='2' class='sticky-font-typelist'> <lyte-menu-label class='stikcyfns'> "+r(a.getI18n.call(o,"crm.label.private.sensitive.low",{name:"getI18n",hash:{},data:i}))+" </lyte-menu-label> </lyte-menu-item> <lyte-menu-item data-value='4' class='sticky-font-typelist'> <lyte-menu-label class='stikcyfl' > "+r(a.getI18n.call(o,"zc.editor.large",{name:"getI18n",hash:{},data:i}))+" </lyte-menu-label> </lyte-menu-item> <lyte-menu-item data-value='6' class='sticky-font-typelist'> <lyte-menu-label class='stikcyfxl'> "+r(a.getI18n.call(o,"crm.sticky.font.huge",{name:"getI18n",hash:{},data:i}))+' </lyte-menu-label> </lyte-menu-item> </lyte-menu-body> </template> </lyte-menu> </li> <li class="sticky-notes-bold-icon sn-icon" title="'+r(a.getI18n.call(o,"crm.sticky.bold",{name:"getI18n",hash:{},data:i}))+'" command="bold" onclick="sE(event);crmStickies.toolbar(this);sE(event);" data-zcqa="stickies_toolbar_bold_'+r(s(null!=t?t.stickyId:t,t))+'"></li> <li class="sticky-notes-italic-icon sn-icon" title="'+r(a.getI18n.call(o,"crm.sticky.italic",{name:"getI18n",hash:{},data:i}))+'" command="italic" onclick="sE(event);crmStickies.toolbar(this);sE(event);" data-zcqa="stickies_toolbar_italic_'+r(s(null!=t?t.stickyId:t,t))+'"></li> <li class="sticky-notes-underline-icon sn-icon" title="'+r(a.getI18n.call(o,"crm.sticky.underline",{name:"getI18n",hash:{},data:i}))+'" command="underline" onclick="sE(event);crmStickies.toolbar(this);sE(event);" data-zcqa="stickies_toolbar_underline_'+r(s(null!=t?t.stickyId:t,t))+'"></li> <li class="sticky-notes-strikeThrough-icon sn-icon" title="'+r(a.getI18n.call(o,"crm.sticky.strikeThrough",{name:"getI18n",hash:{},data:i}))+'" command="strikeThrough" onclick="sE(event);crmStickies.toolbar(this);sE(event);" data-zcqa="stickies_toolbar_strikeThrough_'+r(s(null!=t?t.stickyId:t,t))+'"></li> <li id="stickyFRColorPickerButton'+r(s(null!=t?t.stickyId:t,t))+'" onclick="sE(event);crmStickies.showColorPicker(this.id, \'zc.editor.font.color\');sE(event);" class="sticky-notes-list-icon pR font-color-sticky mR2" data-zcqa="stickies_toolbar_fontColor_'+r(s(null!=t?t.stickyId:t,t))+'"><lyte-colorpicker id="stickyFRColorPicker'+r(s(null!=t?t.stickyId:t,t))+'" lt-prop-wrapper-class="colorFRPicker'+r(s(null!=t?t.stickyId:t,t))+'"  class=\'stickyFRColorPicker\' lt-prop-basic-color-picker="true" lt-prop-no-fill-button="true"></lyte-colorpicker></li> <li id="stickyBGColorPickerButton'+r(s(null!=t?t.stickyId:t,t))+'" onclick="sE(event);crmStickies.showColorPicker(this.id, \'zc.editor.background.color\');sE(event);" class="sticky-notes-list-icon pR bg-color-sticky" data-zcqa="stickies_toolbar_bgColor_'+r(s(null!=t?t.stickyId:t,t))+'"><lyte-colorpicker id="stickyBGColorPicker'+r(s(null!=t?t.stickyId:t,t))+'" lt-prop-wrapper-class="colorBGPicker'+r(s(null!=t?t.stickyId:t,t))+'"  class=\'stickyBGColorPicker\' lt-prop-basic-color-picker="true" lt-prop-no-fill-button="true"></lyte-colorpicker></li> <li class="sticky-notes-list-icon sn-icon mR3" title="'+r(a.getI18n.call(o,"crm.sticky.insertUnorderedList",{name:"getI18n",hash:{},data:i}))+'" command="insertUnorderedList" onclick="sE(event);crmStickies.toolbar(this);sE(event);" data-zcqa="stickies_toolbar_unorderedList_'+r(s(null!=t?t.stickyId:t,t))+'"></li> <li class="sticky-notes-orderlist-icon sn-icon"  command="insertOrderedList" onclick="sE(event);crmStickies.toolbar(this);sE(event);" data-zcqa="stickies_toolbar_numberingList_'+r(s(null!=t?t.stickyId:t,t))+'"></li> </ul> </div> <div class="sticky-notes-contenteditable" contenteditable="true" id="'+r(s(null!=t?t.stickyId:t,t))+'" data-input-length="2000" data-zcqa="stickies_content_'+r(s(null!=t?t.stickyId:t,t))+'">'+(null!=(l=s(null!=t?t.content:t,t))?l:"")+"</div> </div> "},useData:!0}),t.stickyNotesDeletePopup=e({compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l=null!=t?t:{},s=e.escapeExpression;return'<div class="zcrm-modal zcrm-effect" style="top: 0px; display: block;" id="sticky-delete-warning-popup"> <div class="zcrm-content w650"> <div style="padding:60px; text-align:center;" class="f21"> <span id="warningMsg">'+s(a.getI18n.call(l,"crm.sticky.delete.confirm",{name:"getI18n",hash:{},data:i}))+'</span> <div class="pT30 aligncenter"> <input type="button" value="'+s(a.getI18n.call(l,"crm.button.cancel",{name:"getI18n",hash:{},data:i}))+'" class="newgraybtn" onclick="crmStickies.stdeleteCancel();" data-zcqa="stickies_delete_cancel"> <input type="button" value="'+s(a.getI18n.call(l,"crm.label.yes",{name:"getI18n",hash:{},data:i}))+'" class="redbtn fromDeletePopup" onclick="crmStickies.stdeleteSubmit();" data-zcqa="stickies_delete_submit"> </div> </div> </div> </div>'},useData:!0}),t.stickyNotesMain=e({compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){return'<div class="stNotes" id="stNotes"> <div id="scrollTopDiv" style="display: block;"> <a href="javascript:;" onclick="crmStickies.createStickyNewNote();sE(event);" class="zc-scrollTop active" style="right: 40px;" title="'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.sticky.createNew",{name:"getI18n",hash:{},data:i}))+'"  data-zcqa="stickies_createNew"> <div class="zc-scrollTopIcon"></div> </a> </div> </div>'},useData:!0}),t.stickyNotesReminderPopup=e({compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l=null!=t?t:{},s=e.escapeExpression;return'<div class="zcrm-modal zcrm-effect" id="sticky-remainder-popup"> <div class="zcrm-content"> <div class="popup-model-content" style="overflow: inherit;"><div class="f20 fs crm-font-bold">'+s(a.getI18n.call(l,"crm.sticky.reminder.add",{name:"getI18n",hash:{},data:i}))+'</div> <div class="sticky-date-time-remainder mT10"> <input type="text" onclick="crmStickies.clearReminderErrMsg();showCalen(\'property(Remind At)\',this.value,undefined,undefined,event)" placeholder="MM/dd/yyyy" autocomplete="off" maxlength="100" style="width:110px" class="textField fL mR5" id="stickyremindAtDate"  data-zcqa="stickies_reminder_date"> <span class="fL lh24">at</span> <span class="newtimefrmt h12"> <input type="text" isproperty="true" fldlabel="Remind At" onclick="crmStickies.clearReminderErrMsg();sE(event)" "="" id="stickyremindAtTime" class="textField ddTime" value="09:00" autocomplete="off" onblur="wfForm.removeFocus(this,\'form\')" time="09:00:AM"  data-zcqa="stickies_reminder_time"> <span id="Remind At_ampmSpan" class="ampmSpan pT5 stickyremindAtAMPM" ampm="AM" >AM</span> </span> </div> <div id="stickyReminderErrMsg" class="fL f13 m30 sticky-reminder-error-message" style="margin-left:0px"></div> </div> <div class="popup-model-footer"> <div id="addUserBTN"> <input type="button" class="newgraybtn" value="'+s(a.getI18n.call(l,"crm.button.cancel",{name:"getI18n",hash:{},data:i}))+'" onclick="crmStickies.remainderClose();"  data-zcqa="stickies_reminder_cancel"> <input type="button" name="save" class="primarybtn" value="'+s(a.getI18n.call(l,"crm.button.save",{name:"getI18n",hash:{},data:i}))+'" onclick="crmStickies.remainderSubmit();"  data-zcqa="stickies_reminder_submit"> </div> </div> </div> </div>'},useData:!0}),t.viewNotes=e({1:function(e,t,a,n,i){var l;return" "+(null!=(l=a.createNewNotes.call(null!=t?t:{},t,{name:"createNewNotes",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i}))?l:"")+" "},2:function(e,t,a,n,i){return""},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var l;return(null!=(l=a.each.call(null!=t?t:{},null!=t?t.viewdata:t,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?l:"")+" "},useData:!0})}();var AudioControls={autoPlaytime:null,initialiseAudioControl:function(){$(".rangeSlideIcon").draggable({containment:"parent",axis:"x",drag:function(){AudioControls.pauseAllSongs();var e=AudioControls.getPassedSecondsFromRanger(),t=AudioControls.getAudioInfoDetails("duration")-e;t*=-1,AudioControls.desideAndShowTimerDisplay(e,t)},stop:function(){var e=AudioControls.getPassedSecondsFromRanger();AudioControls.changeAudioPosition(e)}}),null!=AudioControls.autoPlaytime&&(clearInterval(AudioControls.autoPlaytime),AudioControls.autoPlaytime=null),AudioControls.createNewAudioInfo()},onLoadedEventForEachAudio:function(e){var t=e.duration,a=AudioControls.getAudioInfoDetails("duration")+t,n=AudioControls.getAudioInfJson();n.duration=a,AudioControls.setAudioInfJson(n),AudioControls.changeAudioPosition(n.passedTime)},onEndedEventForEachAudio:function(e){var t=e.target,a=$(t).nextAll("audio");if(a.length)a.eq(0).trigger("play");else{var n=$("#audiocntrl");null!=AudioControls.autoPlaytime&&(clearInterval(AudioControls.autoPlaytime),AudioControls.autoPlaytime=null),n.attr("data-attr","play"),n.removeClass("pause"),AudioControls.changeAudioPosition(0)}},moveOnclick:function(e){var t=$(".rangeBar");AudioControls.pauseAllSongs();var a=e.pageX-t.offset().left,n=t.width()-2;if(a>=n)var i=n;else if(a>=0)i=a;else i=0;$(".rangeSlideIcon").css("left",i);var l=AudioControls.getPassedSecondsFromRanger();AudioControls.changeAudioPosition(l)},toggle_PlayPause:function(e){var t=$(e);"play"==t.attr("data-attr")?(t.attr("data-attr","pause"),t.addClass("pause"),AudioControls.changeAudioPosition()):(t.attr("data-attr","play"),t.removeClass("pause"),AudioControls.pauseAllSongs())},toggle_MuteUnmute:function(e){var t=$(e);if("mute"==t.attr("data-attr")){t.attr("data-attr","unmute"),t.removeClass("playerVolumeIcon_mute");for(var a=(l=$("#audioSec").children("audio")).length,n=0;n<a;n++)l[n].muted=!1;var i=l[0].volume;i*=10,$("#volumeAdjust").val(i)}else{t.attr("data-attr","mute"),t.addClass("playerVolumeIcon_mute");var l;for(a=(l=$("#audioSec").children("audio")).length,n=0;n<a;n++)l[n].muted=!0;$("#volumeAdjust").val(0)}},toggle_displayTime:function(){var e=AudioControls.getAudioInfJson(),t=e.currentDisplay;if("outstandingTime"==t)e.currentDisplay="elapsedTime";else if("elapsedTime"==t){if(e.duration==1/0)return;e.currentDisplay="outstandingTime"}AudioControls.desideAndShowTimerDisplay()},setVolume:function(e){for(var t=e/10,a=$("#audioSec").children("audio"),n=a.length,i=0;i<n;i++)a[i].volume=t,1==a[i].muted&&a[i].muted;var l=$(".playerVolumeIcon");0==e?(l.attr("data-attr","mute"),l.addClass("playerVolumeIcon_mute")):"mute"==l.attr("data-attr")&&(l.attr("data-attr","unmute"),l.removeClass("playerVolumeIcon_mute"))},pauseAllSongs:function(){null!=AudioControls.autoPlaytime&&(clearInterval(AudioControls.autoPlaytime),AudioControls.autoPlaytime=null);for(var e=$("#audioSec").children("audio"),t=e.length,a=0;a<t;a++)e[a].pause()},download:function(){var e=$("#audioSec").children("audio"),t=e.length,a=$("#subvalue_SUBJECT").text();if(a=(a=(a=validationUtils.isNotEmpty(a)?a:$("#id").val()).replace(/ /g,"_")).replace(/,/g,"_"),1==t)networkUtils.openUrl(e[0].firstElementChild.src);else if(t>1){for(var n=new JSZip,i=".mp3",l=0;l<t;l++){var s=e[l].firstElementChild.src,r=s.split("."),o=r[r.length-1];o=o&&o.length<5?o:i,n.file("Recording - "+l+i,AudioControls.urlToPromise(s),{binary:!0,base64:!0})}AudioControls.saveZipFile(n,a)}},changeAudioPosition:function(e){validationUtils.isEmpty(e)&&(e=$("#customAudioplayer").data().passedTime);var t=AudioControls.changePositionInAudioInfo(e);if(AudioControls.changePositionInAudioUI(),"pause"==$("#audiocntrl").attr("data-attr")){t.play();AudioControls.getAudioInfJson();AudioControls.startAudioTimer()}else t.pause()},changePositionInAudioInfo:function(e){for(var t=0,a=0,n=$("#audioSec").children("audio"),i=n.length,l=n[0],s=0;s<i;s++){var r=n[s];if(t=(a=t)+r.duration,0==e&&0==s||e<=t&&e>a){var o=e-a;o=$.isNumeric(o)?o:0,r.currentTime=o;var c=a+r.currentTime;AudioControls.setPassedTimeInAudioInfo(c),l=r}else r.currentTime=0,r.pause()}return l},changePositionInAudioUI:function(){var e=AudioControls.getAudioInfoDetails("passedTime");validationUtils.isNotEmpty(e)&&(AudioControls.setPassedSecondsToRanger(e),AudioControls.desideAndShowTimerDisplay(e))},startAudioTimer:function(){AudioControls.autoPlaytime=setInterval((function(){var e=$("#customAudioplayer");if(!e.length)return clearInterval(AudioControls.autoPlaytime),void(AudioControls.autoPlaytime=null);var t=e.data(),a=t.passedTime+1;AudioControls.setPassedTimeInAudioInfo(a),AudioControls.changePositionInAudioUI();var n=t.duration;return a<0||a>n?(clearInterval(AudioControls.autoPlaytime),void(AudioControls.autoPlaytime=null)):void 0}),1e3)},desideAndShowTimerDisplay:function(e,t){var a=AudioControls.getAudioInfJson();e=validationUtils.isEmpty(e)?a.passedTime:e,t=validationUtils.isEmpty(t)?a.remainingTime:t;var n=a.currentDisplay,i=a.duration;"elapsedTime"==n?AudioControls.setSecondsToTimer(e):$.isNumeric(t)&&i!=1/0?AudioControls.setSecondsToTimer(t):(a.currentDisplay="elapsedTime",AudioControls.setAudioInfJson(a),AudioControls.setSecondsToTimer(e))},getPassedSecondsFromRanger:function(){var e=AudioControls.getAudioInfoDetails("duration"),t=$(".rangeSlideIcon").position().left,a=$(".rangeBar").width()-2;return t=parseInt(t),a=parseInt(a),Math.round(e*t/a)},setPassedSecondsToRanger:function(e){var t=AudioControls.getAudioInfoDetails("duration");if(validationUtils.isNotEmpty(t)&&t!=1/0){var a=$(".rangeBar").width()-2,n=(a=parseInt(a))*e/t;n<a&&$(".rangeSlideIcon").css("left",n)}},setSecondsToTimer:function(e){var t=!0;e<0&&(e*=-1,t=!1);var a=Math.floor(AudioControls.getAudioInfoDetails("duration"));if(!((e=Math.floor(e))<0||e>a)){var n=Math.floor(e/60);return n=n>=10?n:""+n,n=t?n:"-"+n,e=(e=Math.floor(e%60))>=10?e:"0"+e,$("#audioTime").text(n+":"+e),n+":"+e}},setPassedTimeInAudioInfo:function(e){e=parseInt(e);var t=AudioControls.getAudioInfJson();t.passedTime=e;var a=parseInt(t.duration)-e;t.remainingTime=-1*a,AudioControls.setAudioInfJson(t)},createNewAudioInfo:function(){var e={currentDisplay:"outstandingTime",passedTime:0,remainingTime:1/0,duration:0};return AudioControls.setAudioInfJson(e),e},setAudioInfJson:function(e){$("#customAudioplayer").data(e)},getAudioInfJson:function(){var e=$("#customAudioplayer").data();return validationUtils.isEmpty(e)&&(e=AudioControls.createNewAudioInfo()),e},getAudioInfoDetails:function(e){var t=$("#customAudioplayer").data();return validationUtils.isNotEmpty(t)&&validationUtils.isNotEmpty(t[e])?t[e]:null},urlToPromise:function(e){return new Promise((function(t,a){JSZipUtils.getBinaryContent(e,(function(e,n){e?a(e):t(n)}))}))},saveZipFile:function(e,t){var a=!1;try{a=!!new Blob}catch(e){}a?e.generateAsync({type:"blob"}).then((function(e){saveAs(e,t)})):e.generateAsync({type:"base64"}).then((function(e){location.href="data:application/zip;base64,"+e}))}},dsNotificationScheduler={fiveSecondsMinimize:null,initProgressDiv:function(){var e=$("#wmsstatusbar"),t=$("#dsProgressIcon"),a=e.find("tr");if(a.find(t).length<=0){a.prepend('<td id="dsProgressIcon" class="pR dN"><div class="cP pR crm-wms-icon pT5 w40" onclick="dsNotificationScheduler.hideInSchedularBar(this);"><span class="svgIcons rls-progress-icon dIB"></span></div></td>')}},minimizeSchedular:function(){dsNotificationScheduler.fiveSecondsMinimize=setTimeout((function(){$("#dsSchNotificationPopup").removeClass("schedularOpen"),$("#dsProgressIcon").find(".crm-wms-icon").addClass("insideBar")}),5e3)},initSchDiv:function(e){if(0===$("#dsSchNotificationPopup").length){var t='<div id="dsSchNotificationPopup" class="pF schedularProgress-pop schedularOpen"><div class="schedularPop-Header"><h2 class="f17 pR10">';t+=I18n.getMsg(e),t+='<a href="javascript:;" id="dsTitle" class="dB fR minimizeSchedularPop pR mT5" onclick="dsNotificationScheduler.minimizeSchedularPopup();"></a></h2></div><ul class="m0 pL20 pR20 tduScheduledList"></ul>',$("body").append(t)}},minimizeSchedularPopup:function(){$("#dsSchNotificationPopup").removeClass("schedularOpen"),$("#dsProgressIcon").find(".crm-wms-icon").addClass("insideBar"),dsNotificationScheduler.permenentRemovePop()},hideInSchedularBar:function(e){var t=$(e);t.hasClass("insideBar")?($("#dsSchNotificationPopup").addClass("schedularOpen"),t.removeClass("insideBar")):($("#dsSchNotificationPopup").removeClass("schedularOpen"),t.addClass("insideBar"),dsNotificationScheduler.permenentRemovePop()),clearTimeout(dsNotificationScheduler.fiveSecondsMinimize)},permenentRemovePop:function(){0===$(".progressBarAnime").length&&($("#dsSchNotificationPopup").removeClass("schedularOpen",(function(){var e=$("#dsSchNotificationPopup");e.find("ul.tduScheduledList").empty(),e.remove()})),$("#dsProgressIcon").addClass("dN"))},addOrUpdateSchedulerStatus:function(e,t,a){this.initProgressDiv(),$("#dsProgressIcon").removeClass("dN"),this.initSchDiv(t);var n=$("#picklist_pop_"+e.id),i=$("#dsSchNotificationPopup"),l=i.find("ul.tduScheduledList");"progress"===e.status?dsNotificationScheduler.minimizeSchedular():clearTimeout(dsNotificationScheduler.fiveSecondsMinimize),0===n.length?(dsNotificationScheduler.minimizeSchedular(),l.append('<li class="m0 p20 tduScheduledList scheduledDataList picklistReplaceList" id ="picklist_pop_'+e.id+'">'),n=$("#picklist_pop_"+e.id),i.addClass("schedularOpen")):n.empty();var s=networkUtils.returnDependencyFiles(["crm-datasharing-notification.js"],crmConstants.jsStaticPathForLyte);Lyte.injectResources(s,void 0,(function(){if("progress"===e.status||"success"===e.status||"error"===e.status){var t=[],n=[];a&&a.length>0&&("success"===e.status?(n=a.filter((e=>e.isSkipped)),0===(t=a.filter((e=>!1===e.isSkipped))).length&&(e.status="skipped")):n=a),Lyte.Component.render("crm-datasharing-notification",{title:e.title,message:e.message,skippedMessage:e.skippedMessage,status:e.status,jobId:e.id,successRules:t,failedRules:n,module:e.module},"#picklist_pop_"+e.id)}if(dsNotificationScheduler.updateIconInTitleBar(),i.addClass("schedularOpen"),i.find("li").length>3){var s=renderingUtils.windowHeight/4*3;l.css("max-height",s).addClass("oA")}}))},updateIconInTitleBar:function(){0===$(".progressBarAnime").length?$("#dsTitle").removeClass("minimizeSchedularPop").addClass("closeSchedularPop"):$("#dsTitle").removeClass("closeSchedularPop").addClass("minimizeSchedularPop")}},automationActionsNotificationScheduler={singleRecordOffloadTimeout:null,initProgressDiv:function(){var e=$("#wmsstatusbar"),t=$("#wfActionsProgressIcon"),a=e.find("tr");if(a.find(t).length<=0){a.prepend('<td id="wfActionsProgressIcon" class="pR dN"><div class="cP pR crm-wms-icon pT5 w40" onclick="automationActionsNotificationScheduler.hideInSchedularBar();"><span class="svgIcons rls-progress-icon dIB"></span></div></td>')}},initSchDiv:function(e){if(0===$("#automationSchNotificationPopup").length){var t='<div id="automationSchNotificationPopup" class="pF schedularProgress-pop"><div class="schedularPop-Header"><h2 class="f17 pR10">';t+=e,t+='<a href="javascript:;" class="dB fR minimizeSchedularPop pR mT5" onclick="automationActionsNotificationScheduler.minimizeSchedularPopup();"></a></h2></div><ul class="m0 pL20 pR20 tduScheduledList"></ul>',$("body").append(t)}},minimizeSchedularPopup:function(){$("#automationSchNotificationPopup").removeClass("schedularOpen"),$("#wfActionsProgressIcon").find(".crm-wms-icon").addClass("insideBar")},hideInSchedularBar:function(){var e=$("#automationSchNotificationPopup");e.hasClass("schedularOpen")?e.removeClass("schedularOpen"):e.addClass("schedularOpen")},addOrUpdateWFPopupStatus:function(e,t){this.initProgressDiv(),$("#wfActionsProgressIcon").removeClass("dN"),this.initSchDiv(t);var a=$("#wfActions_"),n=$("#automationSchNotificationPopup"),i=n.find("ul.tduScheduledList");0===a.length?(i.append('<li class="m0 p20 tduScheduledList scheduledDataList picklistReplaceList" id ="wfActions_'+e.id+'">'),a=$("#wfActions_"+e.id)):a.empty();var l=networkUtils.returnDependencyFiles(["crm-datasharing-notification.js"],crmConstants.jsStaticPathForLyte);l=l.concat(networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("automationActionsNotification")])),Lyte.injectResources(l,void 0,(function(){if("progress"!==e.status&&"success"!==e.status&&"error"!==e.status||Lyte.Component.render("crm-datasharing-notification",{title:e.title,message:e.message,status:e.status,jobId:e.id},"#wfActions_"+e.id),$(".schedularMsg").find("p").removeClass("succesIcoSchedular"),n.addClass("schedularOpen"),n.find("li").length>3){var t=renderingUtils.windowHeight/4*3;i.css("max-height",t).addClass("oA")}}))},showAutomationSchNotificationProgress:function(){$("#automationSchNotificationPopup").remove();var e=networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("automationActionsNotification")]);Lyte.injectResources(e,void 0,(function(){var e={};e.message=I18n.getMsg("crm.automation.workflow.notification.inprogress.message"),e.status="success",automationActionsNotificationScheduler.addOrUpdateWFPopupStatus(e,I18n.getMsg("crm.automation.workflow.notification.inprogress.title"))}))},showNotificationInProgress:function(e,t){var a={};a.jobId=e,refreshPageForBulkWorkFlowScheduler(a),null!=t&&t.remove(),automationActionsNotificationScheduler.showAutomationSchNotificationProgress()},setTimeoutForAutomationActionsOffload:function(e){var t;return 1==e?t=8e3:e>1&&e<10?t=1e4:e>=10&&e<100?t=15e3:e>=100&&e<250?t=2e4:e>=250&&(t=25e3),t}};