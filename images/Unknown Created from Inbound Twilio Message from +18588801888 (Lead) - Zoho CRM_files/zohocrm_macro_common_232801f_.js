var Macro={module:null,closeFromSuggest:null,currentLength:null,SelCounter:0,canShowAutoSuggest:!1,autoSuggestHandler:null,rotationCircle:null,clickHandler:function(e,a,r){var t=r;if("showMacro"===t){var n=$(a),l=n.attr("data-params");return l||(l={}),"string"==typeof l&&(l=JSON.parse(l)),l.clickId=t,n.attr("data-params",JSON.stringify(l)),Crm.lyteTransition(e,a),!1}return!0},showMacroOptions:function(e,a,r,t,n,l,o,c,s,i,d){e=e||renderingUtils.getTargetElem(a);void 0===l&&(l=""),(new crmRequestPool).initiate({action:Crm.getCrmBasePath()+"/Macro.do",type:"POST",data:"step=showMacroOptions&module="+r+(t?"&entityId="+t:""),success:function(t){var n=$("#divMacro"+l),o=Handlebars.templates.MacroOptions,c=Object.keys(t.MacroListMap).length,s=Object.keys(t.sharedMacroListMap).length;Macro.module=r,t.totalMacroListMapLength=c+s,t.MacroListMapLength=c,t.sharedMacroListMapLength=s,t.reqFrom=d;var i=o(t);n.html(i),n.hide(),Macro.perfectScrollbinder("#macroListDIV");var u=$("#macroSugstBox"),m=$("#macroListDIV");u.length>0?m.length>0&&m.css({height:"240px",overflow:"hidden"}):m.length>0&&m.css({height:"",overflow:"hidden"});var p=!0;"detailView"===d&&(p=!1),setTimeout((function(){manipulateScriptElems(n[0])}),0),Crm.menu.createMenu(a,{id:"divMacro",setDefaultPos:p},e);var g=$(e),h=parseInt(g.offset().top),f=parseInt(g.offset().left),v=h+g.outerHeight(),w=f+parseInt(g.css("border-left-width"));$("#divMacro").on("onBeforeShow",(function(){var e=$(this);if(Crm.userDetails.RTL_ENABLED)if("detailView"===d)w+=parseInt(g.innerWidth()),e.css({left:w+"px",top:h+"px"});else{var a=$("#runMacro"),r=renderingUtils.windowWidth-(parseInt(a.offset().left)+parseInt(a.outerWidth()));e.css({left:"initial",right:r+"px",top:v+"px"})}else"detailView"===d?(w=f-(parseInt(e.css("width"))+2),e.css({left:w+"px",top:h+"px"})):e.css({left:w+"px",top:v+"px"})})).on("onBeforeClose",(function(e,a){var r=renderingUtils.getTargetElem(a);if(r&&"macroSugstBox"===r.id)return!1;$(this).off("onBeforeClose").off("onBeforeShow")}))}})},showMacroExecDialog:function(e,a,r,t){if(Macro.circleDraw=100,"detailView"===t&&(r=$("#id").val()),""!==r){freezeBackground();var n="module="+a+"&ruleId="+e+(void 0!==t?"&reqFrom="+t:"")+("detailView"===t||"campView"===t?"&idlist="+r:"");(new crmRequestPool).initiate({action:Crm.getCrmBasePath()+"/Macro.do?step=showMacroExecDialog",type:"POST",data:n,success:function(e){if("error"==e.status&&"401"==e.code){var a=e.details.details;a=a.substring(16,a.length);var r=$("#shownotes");return r.addClass("newPopup p30"),r.html(a),getElemById("shownotes").style.zIndex=21,getElemById("shownotes").style.width="600px",getElemById("shownotes").style.position="absolute",$("#shownotes :button").click((function(){removeFreezeLayer();var e=$("#shownotes");e.html(""),e.hide()})),freezeBackground(),r.show(),mailsetCenter("shownotes"),!1}var t=$("#divMacro"),n=t.css("display"),l=$("#popupnew"),o=Handlebars.templates.MacroExecute;e.runAnyWay=e.emailPerm&&e.alertsListSize>0&&e.mailCount<e.limitCount||e.taskPerm&&e.tasksListSize>0||e.updatePerm&&e.updatesListSize>0;var c=o(e);l.html(c).removeClass().addClass("newPopup newInputStyleEle").css({zIndex:30,width:"800px"}),mailsetCenter("popupnew"),t.length&&"block"===n&&(t.hide(),$("#customizedd").hide())},error:function(){if(Lyte.Router.getRouteInstance().transition.target.includes("newForecasts")){setTimeout((function(){_cruxUtils.showCustomAlert({params:{ltPropPrimaryMessage:I18n.getMsg("crm.migration.general.error"),ltPropWrapperClass:"forecastAlertWrap"}})}),100);var e=document.querySelector("crm-macro");e&&e.component.setData("flag",!1);var a=$("#FreezeLayer");a.length>0&&a.remove()}}})}else renderingUtils.showCustomAlert(I18n.getMsg("crm.macro.alert.selectRecords"))},executeMacro:function(e,a,r,t){var n=crmListView.getObject().cvId;if(customViewObject&&customViewObject.isForecast&&(n=customViewObject.cvid),$("#macExecRunBtn").prop("disabled",!0),$("#macExecCancelBtn").prop("disabled",!0),"null"===r&&crmListView.getObject()&&"potentialpipeline"!==t)r=crmListView.getObject().selectedIds.join(";");else if("null"===r&&void 0!==document.TransferWizardForm.chk){var l=document.TransferWizardForm.chk.length;if(r="",void 0===l){if(!document.TransferWizardForm.chk.checked)return renderingUtils.showCustomAlert('<fmt:message key="crm.alert.select.one"/>'),!1;r=document.TransferWizardForm.chk.value}else if(0!==l){if(0===getNoOfChecked())return renderingUtils.showCustomAlert('<fmt:message key="crm.alert.select.one"/>'),!1;for(var o=0;o<l;o++)document.TransferWizardForm.chk[o].checked&&(r=""===r?document.TransferWizardForm.chk[o].value:r+";"+document.TransferWizardForm.chk[o].value)}}Macro.loadCircle(),Macro.doMacroExecution(e,a,decodeURIComponent(r).split(";"),t,n)},doMacroExecution:function(e,a,r,t,n){var l;l=isWFSchedulerUser()&&"detailView"!==t?r.splice(0,r.length):r.splice(0,crmConstants.maxRecOperCnt);var o=csrfParamName+"="+encodeURIComponent(csrfToken);o+="&module="+a+"&idlist="+l.join(";")+"&ruleId="+e+"&cvId="+n;var c=$("#mailRest");c.length>0&&(o+="&mailRest="+c.val()),(new crmRequestPool).initiate({action:Crm.getCrmBasePath()+"/Macro.do?step=executeMacro",type:"POST",data:o,success:function(l){if(1===r.length&&""===r[0]||r.length<=0){if(isWFSchedulerUser()&&$("#macroFieldUpdate").length>0&&"detailView"!==t&&l.isWFScheduler){var o=Lyte.Router.getRouteInstance().transition.target;if(o&&o.includes("newForecasts")){var c=document.querySelector("crm-forecast-deals-modal");if(c){clearInterval(Macro.rotationCircle),$(".loadingCircle").fadeOut(100),Macro.circleDraw=100,Macro.drawCir(1),setTimeout((function(){c.component.executeMethod("refresh")}),100);var s=$("#FreezeLayer");s.length>0&&s.remove(),hide("popupnew"),clearInterval(Macro.rotation),clearInterval(Macro.drawCircle)}}var i=l.offloadedRecordsCnt,d=l.wfOffloadedJobid;detailView.currWFOffloadingJobIds.push(d);var u=automationActionsNotificationScheduler.setTimeoutForAutomationActionsOffload(i);return void setTimeout((function(){var e=$("#macroFieldUpdate");e.length>0&&automationActionsNotificationScheduler.showNotificationInProgress(d,e)}),u)}crmTab.deleteFromCache(a),clearInterval(Macro.rotationCircle),$(".loadingCircle").fadeOut(100),Macro.circleDraw=100,Macro.drawCir(1),setTimeout((function(){var e=Lyte.Router.getRouteInstance().routeName,r=Lyte.Router.getRouteInstance().transition.target;if("detailView"==t&&"canvas"==e)Lyte.Router.getRouteInstance().refresh();else if(void 0!==t&&"dropDown"!==t&&""!==t&&"potentialpipeline"!==t&&"adwordCampSummary"!==t&&"adwordGroupSummary"!==t)reloadCurrentEntityView();else if("adwordCampSummary"===t||"adwordGroupSummary"===t)removeFreezeLayer(),$("#popupnew").hide();else if(r.includes("newForecasts")){var n=document.querySelector("crm-forecast-deals-modal");n&&n.component.executeMethod("refresh")}else"list"==e||"canvas"==e||"kanban"==e?crmListView.reloadCurrentListView():""===currCVId&&RefreshDetailsAction(a);var l=$("#FreezeLayer");l.length>0&&l.remove(),hide("popupnew"),clearInterval(Macro.rotation),clearInterval(Macro.drawCircle)}),4500)}else Macro.doMacroExecution(e,a,r,t,n)},error:function(){if(Lyte.Router.getRouteInstance().transition.target.includes("newForecasts")){clearInterval(Macro.rotationCircle),$(".loadingCircle").fadeOut(100),Macro.circleDraw=100,Macro.drawCir(1);var e=document.querySelector("crm-forecast-deals-modal");setTimeout((function(){e&&(e.component.executeMethod("refresh"),_cruxUtils.showCustomAlert({params:{ltPropPrimaryMessage:I18n.getMsg("crm.migration.general.error"),ltPropWrapperClass:"forecastAlertWrap"}}))}),100);var a=$("#FreezeLayer");a.length>0&&a.remove(),hide("popupnew"),clearInterval(Macro.rotation),clearInterval(Macro.drawCircle)}}})},macroSearchFocus:function(e){(e=$(e)).val()===I18n.getMsg("crm.globalsearch.search.title")&&e.val("").css("color","#333")},macroSearchBlur:function(e){""===(e=$(e)).val()&&e.val(I18n.getMsg("crm.globalsearch.search.title")).css("color","#ccc")},bindPerfectScroll:function(){var e=$(".Macro_thisiscontainer").find(".users_listul");e.perfectScrollbar("destroy"),e.perfectScrollbar({wheelSpeed:1,wheelPropagation:!0,suppressScrollX:!0})},perfectScrollbinder:function(e){thirdPartyUtils.unbindPerfectScroll(e),thirdPartyUtils.bindPerfectScroll(e,{wheelSpeed:1,wheelPropagation:!0,suppressScrollX:!1}),setTimeout((function(){thirdPartyUtils.bindPerfectScrollUpdate(e)}),200)},loadCircle:function(){var e=-75;$(".runmacro-tickwrap").removeClass("dN"),Macro.rotationCircle=setInterval((function(){var a=e;$(".loadingCircle").css({display:"block"}),$(".circle").css({"-ms-transform":"rotate("+a+"deg)","-webkit-transform":"rotate("+a+"deg)",transform:"rotate("+a+"deg)"}),e+=10}),30)},circleDraw:100};Macro.rotation,Macro.drawCircle,Macro.drawCir=function(e){clearInterval(Macro.rotationCircle);var a=$("#macCir"+e);a&&(Macro.drawCircle=setInterval((function(){var r=parseFloat(150);if(Macro.circleDraw>r)return a.find(".check").attr("class","check checked"),clearInterval(Macro.drawCircle),e<=3&&(Macro.circleDraw=100,Macro.drawCir(e+1)),!1;a.find(".fill").css({"stroke-dasharray":parseFloat(Macro.circleDraw)}),Macro.circleDraw=Macro.circleDraw+parseFloat(.5)}),8))},Macro.showMacroSuggest=function(e,a,r,t,n,l,o,c,s,i,d,u,m){e=$(e);var p=$("#optionsHolder"),g=p.css("display"),h=$("#divMacro"),f=h.css("display"),v=p.length?p.find(".othersView"):$("#cv_"+$("#cvModule_Selector").val()).find(".othersView");if(v.length&&v.find(".othersdownicon").hasClass("ico-arrow-down-solid-small")&&v.trigger("click"),void 0!==l){var w=$("#"+l);if(w.length>0){var M=-1;if(window.event?M=window.event.keyCode:a&&(M=a.which),27===M)return void w.hide()}}var x=r.split(","),C=$("#"+o),y=e.val().trim().toLowerCase(),k=$("#"+n),S=$("#"+x[0]+",#"+x[1]).find(t),L=0;if(S.each((function(e,a){if(a=$(a),void 0!==i&&null==a.attr(i))return!0;var r=void 0!==i&&null!=a.attr(i)?a.attr(i).toLowerCase():u?a.text().toLowerCase():a.html().toLowerCase();if(""==y||-1!=r.indexOf(y)){if(m?a.closest(m).css("display",""):a.css("display","").parent().parent().css("display",""),null!=a.attr("event_row_idx")){var t=currElem.getAttribute("event_row_idx"),n=parseInt(t)-Events.totalUsersCount;$("tr[event_row_idx='"+n+"']").next().css("display","")}k.length>0&&k.hide(),L++,r.trim()===y&&0}else if(m?a.closest(m).hide():a.hide(),null!=a.attr("event_row_idx")){t=currElem.getAttribute("event_row_idx"),n=parseInt(t)-Events.totalUsersCount;$("tr[event_row_idx='"+n+"']").next().css("display","none")}})),d&&"false"!=d){var I=$("#"+x[0]),b=$("#"+x[1]);0===I.find("li:visible").length&&I.parent().hide(),0===b.find("li:visible").length&&b.parent().hide()}0===L?(k.length>0&&k.css("display","inline-block"),void 0!==s&&getElemById(s)&&(getElemById(s).style.display="none")):void 0!==s&&getElemById(s)&&(getElemById(s).style.display=""),C.length>0&&(L<12?C.css({height:"",overflow:"hidden"}):C.css({height:c,overflow:"hidden"})),p.length&&"block"===g&&$("#divMacro #macroListDIV,#cvlist").scrollTop(1),"lv_left_filter"===r&&$("#lv_filter_scroll").scrollTop(1),h.length&&"block"===f&&$("#macroListDIV").scrollTop(1)},Macro.setMacroName=function(e){var a=null;if(window.event?a=window.event.keyCode:e&&(a=e.which),27!==a&&13!==a){var r=$("#createMacroBtn"),t=$("#macroSugstBox").val().trim();""!==t&&0===currSechExtMatCnt?r.html(I18n.getMsg("crm.macro.label.create.macro")+' "'+$ESAPI.encoder().encodeForHTML(t)+'"'):r.html(I18n.getMsg("crm.macro.label.create.macro"))}},Macro.autoSuggest=function(e){e&&featuresAvailable.Macros_Suggest&&Macro.isMacroSupportedModule(e)&&(Macro.canShowAutoSuggest=!0,null!==Macro.autoSuggestHandler&&clearTimeout(Macro.autoSuggestHandler),Macro.autoSuggestHandler=setTimeout((function(){Macro.canShowAutoSuggest=!1}),1e4))},Macro.showSuggest=function(e,a,r){var t,n=networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("macrosuggestion")],crmConstants.jsStaticPath),l=networkUtils.returnDependencyFiles(["macro-suggestion-components.js"],crmConstants.jsStaticPathForLyte),o=networkUtils.returnDependencyFiles(["macro-suggestion-common.js"],crmConstants.jsStaticPathForLyte);t=!0===Crm.userDetails.RTL_ENABLED?networkUtils.returnDependencyFiles(["crm-macrosuggestions-listview-rtl.css","crm-macrosuggestions-listview.css"],crmConstants.cssStaticPathForLyte):networkUtils.returnDependencyFiles(["crm-macrosuggestions-listview.css"],crmConstants.cssStaticPathForLyte);var c=n.concat(l).concat(o).concat(t);Lyte.injectResources(c,void 0,(function(){store.findAll("macro_suggestion",{module:moduleRecordMapping[r].api_name,macro_already_available:!1,include_inner_details:"module.display_label,field_updates.field.field_label,field_updates.field.ui_type"}).then((function(t){var n=t?t.length:0;if(n<=0)crmui.showMsgBand("error",I18n.getMsg("crm.security.error.add.user"),1500);else{for(var l=0;l<n;l++){var o=t[l];o.savErrorMsg="",o.isMacroNameValid=!1,o.macroName=""}var c,s=$("#macroSuggestPopup");s.length||(s=$('<div id="macroSuggestPopup" style="display:none;"></div>').appendTo("#show")),c=!!$(a).hasClass("suggestedMacro-btn");var i=document.createElement("crm-macrosuggestions-listview");i.setData({macroSuggestionsList:t,autoSuggest:e,closeFromSuggest:c,module:r}),s.html(i)}}),(function(){crmui.showMsgBand("error",I18n.getMsg("crm.security.error.add.user"),1500)}))})),Crm.trackSpotLightAction("MacroAutoSuggest - Suggestion Macros OnClick")},Macro.slectCrtMacro=function(e){Crm.trackSpotLightAction("MacroAutoSuggest - Create Macro Click",{Place:"Write My Own1"}),$("#createMacroPopup").hide(),Lyte.Router.transitionTo({route:"crm.settings.section.macro.create",queryParams:{module:e}})},Macro.hideRunMacroPopupDiv=function(){hideAnimatePopup("runMacroPopupDiv"),removeFreezeLayer(),Crm.trackSpotLightAction("MacroAutoSuggest - Shared Own Macros Ok")},Macro.macrobtn=function(e){var a=new crmRequestPool,r={module:e};a.initiate({action:Crm.getCrmBasePath()+"/Macro.do?step=macroChoice",type:"GET",data:r,success:function(a){if(a.macroLength>0){Crm.trackSpotLightAction("MacroAutoSuggest - Create Macro Click",{Place:"List View"}),$("#show").append('<div class="" id="macroSuggestPopup" style="display:none;"></div>');var r=Handlebars.templates.MacroCreatePopup(a),t=$("#macroSuggestPopup");t.html(r),t.show().find(".zcrm-modal").addClass("zcrm-show"),freezeBackground()}else{document.querySelector("crm-forecast-deals-modal")?$L(".fcMacro")[0].click():Lyte.Router.transitionTo({route:"crm.settings.section.macro.create",queryParams:{module:e}})}}})},Macro.discardRemindMacro=function(e,a){var r={};r.module=a,r.ruleId=e;var t={module:r.module,ruleId:r.ruleId};networkUtils.setCsrfParam(t),(new crmRequestPool).initiate({action:Crm.getCrmBasePath()+"/Macro.do?step=discardMacroFromRemind",type:"POST",data:t,success:function(){hideAnimatePopup("runMacroPopupDiv"),removeFreezeLayer()}}),Crm.trackSpotLightAction("MacroAutoSuggest - Shared Own Macros Discard")},Macro.redirect=function(e){e=e||crmListView.getObject().module,$("#createMacroPopup").hide(),Lyte.Router.transitionTo({route:"crm.settings.section.macro.index",queryParams:{module:e}})},Macro.cancelMacro=function(){$("#createMacroPopup").removeClass("zcrm-show"),removeFreezeLayer()},Macro.isMacroSupportedModule=function(e){return"Leads"===e||"Contacts"===e||"Potentials"===e||0===e.indexOf("CustomModule")&&parseInt(e.replace("CustomModule",""))<5e3},function(){var e=Handlebars.template,a=Handlebars.templates=Handlebars.templates||{};a.MacroCreatePopup=e({compiler:[7,">= 4.0.0"],main:function(e,a,r,t,n){var l=null!=a?a:{},o=e.escapeExpression;return'<div class="zcrm-modal zcrm-effect" id="createMacroPopup"> <div class="zcrm-content"> <div data-zcqa="macro_newpopup_closeicon" class="fR pR pT25 pR20"> <span class="newPopupCloseIcon svgIcons ico-close-small2 cP op08 dIB" onclick="Macro.cancelMacro()"></span> </div> <div class="popup-model-header f21 crm-font-regular">'+o(r.getI18n.call(l,"crm.macro.suggest.createnew.popup.header",{name:"getI18n",hash:{},data:n}))+'</div> <div class="popup-model-content w600" style="max-height:800px"> <div class="crtMacroIn aligncenter mT20"> <div class="dIB"> <div class="fL aligncenter mw200"> <i data-zcqa="shw_suggested_MacroBtn" class="icon_suggestion"  onclick="Macro.showSuggest(\'false\',\'true\',\''+o(r.encodeJS.call(l,null!=a?a.module:a,{name:"encodeJS",hash:{},data:n}))+'\');"></i> <label data-zcqa="shw_suggested_macro_label" class="dB pT10">'+o(r.getI18n.call(l,"crm.macro.suggest.button.suggested.macro",{name:"getI18n",hash:{},data:n}))+'</label> </div> <div class="fL orLine" style="height:120px"> <span>Or</span> </div> <div class="fL aligncenter mw200"> <i data-zcqa="createMacroBtn" class="createMacroBtn icon_fromown" onclick="Macro.slectCrtMacro(\''+o(r.encodeJS.call(l,null!=a?a.module:a,{name:"encodeJS",hash:{},data:n}))+'\')"></i> <label data-zcqa="write_my_own_label" class="dB pT10">'+o(r.getI18n.call(l,"crm.macro.suggest.label.writemyown.macro",{name:"getI18n",hash:{},data:n}))+"</label> </div> </div>  </div> </div> </div> </div>"},useData:!0}),a.MacroExecute=e({1:function(e,a,r,t,n){var l;return' <div id="macroFieldUpdate" class="pB10"> <div class="fL runmacro-tickwrap pR" id="macCir1"> <div class="circle"> <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" x="0px" y="0px" viewBox="0, 0, 18, 18"> <g transform=""> <circle class="bgfill" fill="none" stroke="#c9c8c8" stroke-width="0.5" stroke-miterlimit="10" cx="9" cy="9" r="8"></circle> <circle class="loadingCircle" fill="none" stroke="#1ECD97" stroke-width="1" stroke-miterlimit="10" cx="9" cy="9" r="8"></circle> </g> </svg> </div> <div class="checkmark pA" style="width:25px;"> <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" x="0px" y="0px" viewBox="0, 0, 18, 18"> <g transform=""> <circle class="fill" fill="none" stroke="#1ECD97" stroke-width="1.25" stroke-miterlimit="10" cx="9" cy="9" r="8"></circle> <polyline class="check" fill="none" stroke="#1ECD97" stroke-width="1" stroke-linecap="round" stroke-miterlimit="10" points="11,13, 6,8, 8,6"></polyline> </g> </svg> </div> </div> <div class="lh24 floatL pL10 color_3 f15 w80per crm-font-regular"> '+(null!=(l=e.lambda(null!=a?a.updatesAlertStr:a,a))?l:"")+' </div> <div class="clearB"></div> </div> '},3:function(e,a,r,t,n){var l;return' <div id="macroAlert" class="pB10"> <div class="fL runmacro-tickwrap pR" id="macCir2"> <div class="circle"> <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" x="0px" y="0px" viewBox="0, 0, 18, 18"> <g transform=""> <circle class="bgfill" fill="none" stroke="#c9c8c8" stroke-width="0.5" stroke-miterlimit="10" cx="9" cy="9" r="8"></circle> <circle class="loadingCircle" fill="none" stroke="#1ECD97" stroke-width="1" stroke-miterlimit="10" cx="9" cy="9" r="8"></circle> </g> </svg> </div> <div class="checkmark pA" style="width:25px;"> <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" x="0px" y="0px" viewBox="0, 0, 18, 18"> <g transform=""> <circle class="fill" fill="none" stroke="#1ECD97" stroke-width="1.25" stroke-miterlimit="10" cx="9" cy="9" r="8"></circle> <polyline class="check" fill="none" stroke="#1ECD97" stroke-width="1" stroke-linecap="round" stroke-miterlimit="10" points="11,13, 6,8, 8,6"></polyline> </g> </svg> </div> </div> <div class="floatL pL10 lh24 color_3 f15 w80per crm-font-regular"> '+(null!=(l=r.getI18n.call(null!=a?a:{},"crm.macro.execute.sendOneEmail",null!=a?a.alertsAlertStr:a,{name:"getI18n",hash:{},data:n}))?l:"")+' </div> <div class="clearB"></div> </div> '},5:function(e,a,r,t,n){var l,o=null!=a?a:{};return' <div id="macroTask" class="pB10"> <div class="fL runmacro-tickwrap pR" id="macCir3"> <div class="circle"> <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" x="0px" y="0px" viewBox="0, 0, 18, 18"> <g transform=""> <circle class="bgfill" fill="none" stroke="#c9c8c8" stroke-width="0.5" stroke-miterlimit="10" cx="9" cy="9" r="8"></circle> <circle class="loadingCircle" fill="none" stroke="#1ECD97" stroke-width="1" stroke-miterlimit="10" cx="9" cy="9" r="8"></circle> </g> </svg> </div> <div class="checkmark pA" style="width:25px;"> <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" x="0px" y="0px" viewBox="0, 0, 18, 18"> <g transform=""> <circle class="fill" fill="none" stroke="#1ECD97" stroke-width="1.25" stroke-miterlimit="10" cx="9" cy="9" r="8"></circle> <polyline class="check" fill="none" stroke="#1ECD97" stroke-width="1" stroke-linecap="round" stroke-miterlimit="10" points="11,13, 6,8, 8,6"></polyline> </g> </svg> </div> </div> <div class="lh24 floatL pL10 color_3 f15 w80per crm-font-regular"> '+(null!=(l=r.if.call(o,r.checkStorage.call(o,{name:"checkStorage",hash:{},data:n}),{name:"if",hash:{},fn:e.program(6,n,0),inverse:e.program(11,n,0),data:n}))?l:"")+' </div> <div class="clearB"></div> </div> '},6:function(e,a,r,t,n){var l;return" "+(null!=(l=r.ifCond.call(null!=a?a:{},null!=a?a.tasksListSize:a,">",1,{name:"ifCond",hash:{},fn:e.program(7,n,0),inverse:e.program(9,n,0),data:n}))?l:"")+" "},7:function(e,a,r,t,n){var l;return" "+(null!=(l=r.getI18n.call(null!=a?a:{},"crm.macro.execute.storage.assignManyTasks",null!=a?a.tasksAlertStr:a,null!=a?a.tasksAlertStr1:a,{name:"getI18n",hash:{},data:n}))?l:"")+" "},9:function(e,a,r,t,n){var l;return" "+(null!=(l=r.getI18n.call(null!=a?a:{},"crm.macro.execute.storage.assignOneTask",null!=a?a.tasksAlertStr:a,{name:"getI18n",hash:{},data:n}))?l:"")+" "},11:function(e,a,r,t,n){var l;return" "+(null!=(l=r.ifCond.call(null!=a?a:{},null!=a?a.tasksListSize:a,">",1,{name:"ifCond",hash:{},fn:e.program(12,n,0),inverse:e.program(14,n,0),data:n}))?l:"")+" "},12:function(e,a,r,t,n){var l;return" "+(null!=(l=r.getI18n.call(null!=a?a:{},"crm.macro.execute.assignManyTasks",null!=a?a.tasksAlertStr:a,null!=a?a.tasksAlertStr1:a,{name:"getI18n",hash:{},data:n}))?l:"")+" "},14:function(e,a,r,t,n){var l;return" "+(null!=(l=r.getI18n.call(null!=a?a:{},"crm.macro.execute.assignOneTask",null!=a?a.tasksAlertStr:a,{name:"getI18n",hash:{},data:n}))?l:"")+" "},16:function(e,a,r,t,n){var l;return' <div id="macroWarning" class="pB10"> '+(null!=(l=r.each.call(null!=a?a:{},null!=a?a.warningList:a,{name:"each",hash:{},fn:e.program(17,n,0),inverse:e.noop,data:n}))?l:"")+" </div> "},17:function(e,a,r,t,n){return' <div class="svgIcons warning_icon ico-warning-filled dIB fL"></div> <div class="floatL pL10 lh24 color_3 f15 w80per crm-font-regular"> '+e.escapeExpression(e.lambda(a,a))+' </div> <div class="clearB"></div> '},19:function(e,a,r,t,n){var l,o=null!=a?a:{},c=e.escapeExpression;return' <input type="button" data-zcqa="btn_wf_cancel" id="macExecCancelBtn" class="newgraybtn" onclick="closeMacroDialog();" value="'+c(r.getI18n.call(o,"crm.creator.cancelbutton",{name:"getI18n",hash:{},data:n}))+'"</input> <input '+(null!=(l=r.if.call(o,r.checkStorage.call(o,{name:"checkStorage",hash:{},data:n}),{name:"if",hash:{},fn:e.program(20,n,0),inverse:e.noop,data:n}))?l:"")+' data-zcqa="btn_wf_run" type="button" id="macExecRunBtn" value="'+c(r.getI18n.call(o,"crm.button.run",{name:"getI18n",hash:{},data:n}))+'" class="primarybtn mR0" onclick=\'Macro.executeMacro("'+c(r.encodeJS.call(o,null!=(l=null!=a?a.ruleDetails:a)?l[0]:l,{name:"encodeJS",hash:{},data:n}))+'", "'+c(r.encodeJS.call(o,null!=a?a.module:a,{name:"encodeJS",hash:{},data:n}))+'", "'+(null!=(l=r.ifCond.call(o,null!=a?a.idsList:a,"==",null,{name:"ifCond",hash:{},fn:e.program(23,n,0),inverse:e.program(25,n,0),data:n}))?l:"")+'", "'+(null!=(l=r.ifCond.call(o,null!=a?a.reqFrom:a,"==",null,{name:"ifCond",hash:{},fn:e.program(27,n,0),inverse:e.program(29,n,0),data:n}))?l:"")+"\");'/> "},20:function(e,a,r,t,n){var l;return null!=(l=r.ifAllMatch.call(null!=a?a:{},null!=a?a.updatesListSize:a,"<",1,null!=a?a.alertsListSize:a,"<",1,{name:"ifAllMatch",hash:{},fn:e.program(21,n,0),inverse:e.noop,data:n}))?l:""},21:function(e,a,r,t,n){return"disabled"},23:function(e,a,r,t,n){return"null"},25:function(e,a,r,t,n){return e.escapeExpression(e.lambda(null!=a?a.idsList:a,a))},27:function(e,a,r,t,n){return""},29:function(e,a,r,t,n){return e.escapeExpression(e.lambda(null!=a?a.reqFrom:a,a))},31:function(e,a,r,t,n){return' <input type="button" data-zcqa="btn_wf_cancel" id="macExecCancelBtn" class="newgraybtn dIB f14" onclick="closeMacroDialog();" value="'+e.escapeExpression(r.getI18n.call(null!=a?a:{},"crm.nsocial.okay",{name:"getI18n",hash:{},data:n}))+'"</input> '},compiler:[7,">= 4.0.0"],main:function(e,a,r,t,n){var l,o=null!=a?a:{},c=e.escapeExpression;return' <div class="dim pL30 pR40"> <div class="f20 crm-font-bold black mB0 pT20 macropopTitle">'+(null!=(l=r.getI18n.call(o,"crm.macro.execute.label.header",null!=(l=null!=a?a.ruleDetails:a)?l[1]:l,{name:"getI18n",hash:{},data:n}))?l:"")+'<br ></br></div> <div class=" pB0"> <div class="curv5px p10 pL0 pT8"> '+(null!=(l=r.ifCondLogic.call(o,null!=a?a.updatesListSize:a,">",0,"&&",null!=a?a.updatePerm:a,"=",!0,{name:"ifCondLogic",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?l:"")+" "+(null!=(l=r.ifCondLogic.call(o,null!=a?a.alertsListSize:a,">",0,"&&",null!=a?a.emailPerm:a,"=",!0,{name:"ifCondLogic",hash:{},fn:e.program(3,n,0),inverse:e.noop,data:n}))?l:"")+" "+(null!=(l=r.ifCondLogic.call(o,null!=a?a.tasksListSize:a,">",0,"&&",null!=a?a.taskPerm:a,"=",!0,{name:"ifCondLogic",hash:{},fn:e.program(5,n,0),inverse:e.noop,data:n}))?l:"")+" "+(null!=(l=r.ifCond.call(o,null!=a?a.warningListSize:a,">",0,{name:"ifCond",hash:{},fn:e.program(16,n,0),inverse:e.noop,data:n}))?l:"")+' </div> </div> </div> <div align="right" class="pT10 pB30 pL30 pR40" id="macroExecuteBtnLayer"> '+(null!=(l=r.ifAnyMatch.call(o,null!=a?a.updatesListSize:a,"!=",0,null!=a?a.tasksListSize:a,"!=",0,null!=a?a.alertsListSize:a,"!=",0,{name:"ifAnyMatch",hash:{},fn:e.program(19,n,0),inverse:e.noop,data:n}))?l:"")+" "+(null!=(l=r.ifAllMatch.call(o,null!=a?a.updatesListSize:a,"=",0,null!=a?a.tasksListSize:a,"=",0,null!=a?a.alertsListSize:a,"=",0,{name:"ifAllMatch",hash:{},fn:e.program(31,n,0),inverse:e.noop,data:n}))?l:"")+' </div> <div id="macroExecutingBtnLayer" align="center" class="mT10 dN mB20"><img src="'+c(r.img_link.call(o,{name:"img_link",hash:{},data:n}))+'/zoho-busy_36265df_.gif" alt="" /> '+c(r.getI18n.call(o,"crm.macro.execute.status.executing",{name:"getI18n",hash:{},data:n}))+' </div> <div id="macroExecutedBtnLayer" class="f14 mT10 greenColor pB10 pT5 mB5 dN h20" align="center"> <img src="'+c(r.img_link.call(o,{name:"img_link",hash:{},data:n}))+'/right_plan_e1b46fe_.gif" alt="" class="pR" style="right:5px;" />'+c(r.getI18n.call(o,"crm.macro.execute.status.executedSuccessfully",{name:"getI18n",hash:{},data:n}))+" </div> "},useData:!0}),a.MacroOptions=e({1:function(e,a,r,t,n,l,o){var c,s=null!=a?a:{};return" "+(null!=(c=r.ifCond.call(s,null!=a?a.totalMacroListMapLength:a,">",10,{name:"ifCond",hash:{},fn:e.program(2,n,0,l,o),inverse:e.noop,data:n}))?c:"")+' <div id="macroListDIV" class="pR" style="max-width: 200px;"> <div class=" w100p dIB"> <div id="noMatchMacroElem" class="pL10 pT5 pB5 dN color_6 noMatchMacro">'+e.escapeExpression(r.getI18n.call(s,"crm.macro.label.noMacroFoundForTheModule",{name:"getI18n",hash:{},data:n}))+'</div> <ul class="p0 m0"> <li class="Macro_dropListMacroSection Macro_HeaderGroup p0"> <ul class="p0 m0" id="ownedmacrosList"> '+(null!=(c=r.each.call(s,null!=a?a.MacroListMap:a,{name:"each",hash:{},fn:e.program(4,n,0,l,o),inverse:e.noop,data:n}))?c:"")+' </ul> </li> </ul> </div> </div> <div class="bT mt5 mB5"></div> '},2:function(e,a,r,t,n){var l=null!=a?a:{},o=e.escapeExpression;return' <div class="grayBdr w180 mB5 mT10 mL10 colorCCC" style="border-top:1px solid #ccc;"> <div class="pR w100p"> <input data-zcqa="txt_wf_searchTitle" maxlength="50" type="text" id="macroSugstBox" onkeyup="Macro.showMacroSuggest(this, event, \'ownedmacrosList,sharedmacrosList\', \'li\', \'noMatchMacroElem\', \'divMacro\', \'macroListDIV\', \'250px\', \'mngMacroBtn\'); Macro.setMacroName(event);" class="nobdr fL pL10 h25 colorCCC" onblur="Macro.macroSearchBlur(this);" onfocus="Macro.macroSearchFocus(this);" style="width:85%;" value="'+o(r.getI18n.call(l,"crm.globalsearch.search.title",{name:"getI18n",hash:{},data:n}))+'"></input> <img src="'+o(r.getCrmImageUrl.call(l,"sear_Ic_76207a9_.png",{name:"getCrmImageUrl",hash:{},data:n}))+'" alt="" class="mT5 pA"/> <div class="clearB"></div> </div> </div> '},4:function(e,a,r,t,n,l,o){var c;return" "+(null!=(c=r.if.call(null!=a?a:{},null!=o[1]?o[1].reqFromCond:o[1],{name:"if",hash:{},fn:e.program(5,n,0,l,o),inverse:e.program(8,n,0,l,o),data:n}))?c:"")+" "},5:function(e,a,r,t,n,l,o){var c;return" "+(null!=(c=r.each.call(null!=a?a:{},a,{name:"each",hash:{},fn:e.program(6,n,0,l,o),inverse:e.noop,data:n}))?c:"")+" "},6:function(e,a,r,t,n,l,o){var c=e.lambda,s=e.escapeExpression;return' <li  data-zcqa="macroExec_'+s(c(null!=a?a[0]:a,a))+'" title="'+s(c(null!=a?a[0]:a,a))+'" class="aa ellipsistext" onclick="massAction(\'executeMacro\', undefined, \''+s(c(n&&n.key,a))+"', '"+s(c(null!=o[2]?o[2].module:o[2],a))+"','','','','','','',$(this).closest('form'));\">"+s(c(null!=a?a[0]:a,a))+"</li> "},8:function(e,a,r,t,n,l,o){var c;return" "+(null!=(c=r.each.call(null!=a?a:{},a,{name:"each",hash:{},fn:e.program(9,n,0,l,o),inverse:e.noop,data:n}))?c:"")+" "},9:function(e,a,r,t,n,l,o){var c,s=e.lambda,i=e.escapeExpression;return' <li data-zcqa="macroExec_'+i(s(null!=a?a[0]:a,a))+'" title="'+i(s(null!=a?a[0]:a,a))+'" class="aa ellipsistext" onclick="'+(null!=(c=r.ifCond.call(null!=a?a:{},null!=o[2]?o[2].entityId:o[2],"=","",{name:"ifCond",hash:{},fn:e.program(10,n,0,l,o),inverse:e.program(19,n,0,l,o),data:n}))?c:"")+'">'+i(s(null!=a?a[0]:a,a))+"</li> "},10:function(e,a,r,t,n,l,o){var c,s=e.lambda,i=e.escapeExpression,d=null!=a?a:{};return"massAction('executeMacro', undefined, '"+i(s(n&&n.key,a))+"', '"+i(s(null!=o[2]?o[2].module:o[2],a))+"','','','','','','',"+(null!=(c=r.ifEquals.call(d,null!=o[2]?o[2].reqFrom:o[2],"campView",{name:"ifEquals",hash:{},fn:e.program(11,n,0,l,o),inverse:e.program(13,n,0,l,o),data:n}))?c:"")+", "+(null!=(c=r.contains.call(d,'["potentialpipeline","campView"]',null!=o[2]?o[2].reqFrom:o[2],{name:"contains",hash:{},fn:e.program(15,n,0,l,o),inverse:e.program(17,n,0,l,o),data:n}))?c:"")+"); "},11:function(e,a,r,t,n){return"$('#runMacro').closest('form')"},13:function(e,a,r,t,n){return"$(this).closest('form')"},15:function(e,a,r,t,n,l,o){return"'"+e.escapeExpression(e.lambda(null!=o[2]?o[2].reqFrom:o[2],a))+"'"},17:function(e,a,r,t,n){return"''"},19:function(e,a,r,t,n,l,o){var c=e.lambda,s=e.escapeExpression;return"Macro.showMacroExecDialog('"+s(c(n&&n.key,a))+"', '"+s(c(null!=o[2]?o[2].module:o[2],a))+"', '"+s(c(null!=o[2]?o[2].entityId:o[2],a))+"', 'detailView');"},21:function(e,a,r,t,n){var l,o=null!=a?a:{};return' <ul style="padding-top: 2px !important;"> '+(null!=(l=r.ifCond.call(o,null!=a?a.permissions:a,"==",!0,{name:"ifCond",hash:{},fn:e.program(22,n,0),inverse:e.noop,data:n}))?l:"")+" "+(null!=(l=r.ifCond.call(o,null!=a?a.totalMacroListMapLength:a,">",0,{name:"ifCond",hash:{},fn:e.program(24,n,0),inverse:e.noop,data:n}))?l:"")+" </ul> "},22:function(e,a,r,t,n){var l=null!=a?a:{},o=e.escapeExpression;return' <li id="createMacroBtn" data-zcqa="createMacroBtn" class="oA" onclick="Macro.macrobtn(\''+o(r.encodeJS.call(l,null!=a?a.module:a,{name:"encodeJS",hash:{},data:n}))+"');\">"+o(r.getI18n.call(l,"crm.macro.label.create.macro",{name:"getI18n",hash:{},data:n}))+"</li> "},24:function(e,a,r,t,n){var l=e.lambda,o=e.escapeExpression;return' <li id="mngMacroBtn" data-zcqa="mngMacroBtn" data-cid="showMacro" data-params=\'{"module":"'+o(l(null!=a?a.module:a,a))+'","reqFrom":"'+o(l(null!=a?a.reqFromVal:a,a))+"\"}' >"+o(r.getI18n.call(null!=a?a:{},"crm.macro.label.manage.macro",{name:"getI18n",hash:{},data:n}))+"</li> "},26:function(e,a,r,t,n){return' <div id="noMatchMacroElem" data-zcqa="noMatchMacroElem" class="pT5 pB5 color_6 noMatchMacro">'+e.escapeExpression(r.getI18n.call(null!=a?a:{},"crm.macro.label.noMacroFoundForTheModule",{name:"getI18n",hash:{},data:n}))+"</div> "},compiler:[7,">= 4.0.0"],main:function(e,a,r,t,n,l,o){var c,s=null!=a?a:{};return(null!=(c=r.ifCond.call(s,null!=a?a.totalMacroListMapLength:a,">",0,{name:"ifCond",hash:{},fn:e.program(1,n,0,l,o),inverse:e.noop,data:n}))?c:"")+" "+(null!=(c=r.ifAnyMatch.call(s,null!=a?a.permissions:a,"==",!0,null!=a?a.totalMacroListMapLength:a,">",0,{name:"ifAnyMatch",hash:{},fn:e.program(21,n,0,l,o),inverse:e.noop,data:n}))?c:"")+" "+(null!=(c=r.ifAllMatch.call(s,null!=a?a.permissions:a,"!=",!0,null!=a?a.totalMacroListMapLength:a,"<=",0,{name:"ifAllMatch",hash:{},fn:e.program(26,n,0,l,o),inverse:e.noop,data:n}))?c:"")},useData:!0,useDepths:!0})}();