var userlist=function(){"use strict";function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function r(t,e,n){return(r=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),1}catch(t){return}}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);r=new(Function.bind.apply(t,r));return n&&o(r,n.prototype),r}).apply(null,arguments)}var i={};!function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(t,e){return t(e={exports:{}},e.exports),e.exports}var u=e(function(e){e=function(s){var a,t=Object.prototype,u=t.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",o=e.toStringTag||"@@toStringTag";function c(t,e,n,r){var o,i,s,c,e=e&&e.prototype instanceof v?e:v,e=Object.create(e.prototype),r=new S(r||[]);return e._invoke=(o=t,i=n,s=r,c=f,function(t,e){if(c===h)throw new Error("Generator is already running");if(c===d){if("throw"===t)throw e;return O()}for(s.method=t,s.arg=e;;){var n=s.delegate;if(n){var r=function t(e,n){var r=e.iterator[n.method];if(r===a){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=a,t(e,n),"throw"===n.method))return y;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var r=l(r,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,y;r=r.arg;if(!r)return n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y;{if(!r.done)return r;n[e.resultName]=r.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=a)}n.delegate=null;return y}(n,s);if(r){if(r===y)continue;return r}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(c===f)throw c=d,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);c=h;r=l(o,i,s);if("normal"===r.type){if(c=s.done?d:p,r.arg!==y)return{value:r.arg,done:s.done}}else"throw"===r.type&&(c=d,s.method="throw",s.arg=r.arg)}}),e}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}s.wrap=c;var f="suspendedStart",p="suspendedYield",h="executing",d="completed",y={};function v(){}function i(){}function m(){}var g={};g[r]=function(){return this};e=Object.getPrototypeOf,e=e&&e(e(P([])));e&&e!==t&&u.call(e,r)&&(g=e);var b=m.prototype=v.prototype=Object.create(g);function w(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function k(s,c){var e;this._invoke=function(n,r){function t(){return new c(function(t,e){!function e(t,n,r,o){t=l(s[t],s,n);if("throw"!==t.type){var i=t.arg;return(n=i.value)&&"object"==typeof n&&u.call(n,"__await")?c.resolve(n.__await).then(function(t){e("next",t,r,o)},function(t){e("throw",t,r,o)}):c.resolve(n).then(function(t){i.value=t,r(i)},function(t){return e("throw",t,r,o)})}o(t.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function P(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,t=function t(){for(;++n<e.length;)if(u.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=a,t.done=!0,t};return t.next=t}}return{next:O}}function O(){return{value:a,done:!0}}return(i.prototype=b.constructor=m).constructor=i,m[o]=i.displayName="GeneratorFunction",s.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},s.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,o in t||(t[o]="GeneratorFunction")),t.prototype=Object.create(b),t},s.awrap=function(t){return{__await:t}},w(k.prototype),k.prototype[n]=function(){return this},s.AsyncIterator=k,s.async=function(t,e,n,r,o){void 0===o&&(o=Promise);var i=new k(c(t,e,n,r),o);return s.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},w(b),b[o]="Generator",b[r]=function(){return this},b.toString=function(){return"[object Generator]"},s.keys=function(n){var t,r=[];for(t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},s.values=P,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&u.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=a)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return i.type="throw",i.arg=n,r.next=t,e&&(r.method="next",r.arg=a),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var o=this.tryEntries[e],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var s=u.call(o,"catchLoc"),c=u.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}var i=(o=o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc?null:o)?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r,o=n.completion;return"throw"===o.type&&(r=o.arg,_(n)),r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:P(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=a),y}},s}(e.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}});function a(t,e,n,r,o,i,s){try{var c=t[i](s),a=c.value}catch(t){return void n(t)}c.done?e(a):Promise.resolve(a).then(r,o)}var l=function(c){return function(){var t=this,s=arguments;return new Promise(function(e,n){var r=c.apply(t,s);function o(t){a(r,e,n,o,i,"next",t)}function i(t){a(r,e,n,o,i,"throw",t)}o(void 0)})}},s=e(function(e){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(t){return typeof t}:e.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}e.exports=n});var f=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var p=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};var n=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t};var o=function(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?n(t):e},i=e(function(e){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(t)}e.exports=n}),c=e(function(n){function r(t,e){return n.exports=r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},r(t,e)}n.exports=r});var h=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)};function d(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(t){if("string"==typeof t)return y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(t,e):void 0}}(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,i=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return i=t.done,t},e:function(t){s=!0,o=t},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var v=function(){function t(){f(this,t),this._callbacks={}}return p(t,[{key:"on",value:function(t,e){this._callbacks[t]||(this._callbacks[t]=[]),this._callbacks[t].push(e)}},{key:"emit",value:function(t){t=this._callbacks[t];if(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var o,i=d(t);try{for(i.s();!(o=i.n()).done;)o.value.apply(void 0,n)}catch(t){i.e(t)}finally{i.f()}}}}]),t}();function m(n){return function(){var t,e=i(n);return e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?(t=i(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),o(this,e)}}var g=function(){h(s,v);var t,e,n,r,o,i=m(s);function s(){return f(this,s),i.apply(this,arguments)}return p(s,[{key:"identify",value:(o=l(u.mark(function t(){return u.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t)})),function(){return o.apply(this,arguments)})},{key:"track",value:(r=l(u.mark(function t(){return u.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t)})),function(){return r.apply(this,arguments)})},{key:"openMessage",value:(n=l(u.mark(function t(){return u.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t)})),function(){return n.apply(this,arguments)})},{key:"closeMessage",value:(e=l(u.mark(function t(){return u.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t)})),function(){return e.apply(this,arguments)})},{key:"clickMessage",value:(t=l(u.mark(function t(){return u.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t)})),function(){return t.apply(this,arguments)})},{key:"close",value:function(){}}]),s}();var b=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t};function w(t){return"string"==typeof t?t:"object"===s(t)&&(t.id||t.data.id)||void 0}var k,x=e(function(t,e){!function(t){var i={logger:self.console,WebSocket:self.WebSocket},c={log:function t(){if(this.enabled){var e;for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];r.push(Date.now());(e=i.logger).log.apply(e,["[ActionCable]"].concat(r))}}},s=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},n=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(t,r.key,r)}}return function(t,e,n){if(e)r(t.prototype,e);if(n)r(t,n);return t}}(),r=function t(){return(new Date).getTime()},a=function t(e){return(r()-e)/1e3},u=function t(e,n,r){return Math.max(n,Math.min(r,e))},l=function(){function e(t){o(this,e);this.visibilityDidChange=this.visibilityDidChange.bind(this);this.connection=t;this.reconnectAttempts=0}e.prototype.start=function t(){if(!this.isRunning()){this.startedAt=r();delete this.stoppedAt;this.startPolling();addEventListener("visibilitychange",this.visibilityDidChange);c.log("ConnectionMonitor started. pollInterval = "+this.getPollInterval()+" ms")}};e.prototype.stop=function t(){if(this.isRunning()){this.stoppedAt=r();this.stopPolling();removeEventListener("visibilitychange",this.visibilityDidChange);c.log("ConnectionMonitor stopped")}};e.prototype.isRunning=function t(){return this.startedAt&&!this.stoppedAt};e.prototype.recordPing=function t(){this.pingedAt=r()};e.prototype.recordConnect=function t(){this.reconnectAttempts=0;this.recordPing();delete this.disconnectedAt;c.log("ConnectionMonitor recorded connect")};e.prototype.recordDisconnect=function t(){this.disconnectedAt=r();c.log("ConnectionMonitor recorded disconnect")};e.prototype.startPolling=function t(){this.stopPolling();this.poll()};e.prototype.stopPolling=function t(){clearTimeout(this.pollTimeout)};e.prototype.poll=function t(){var e=this;this.pollTimeout=setTimeout(function(){e.reconnectIfStale();e.poll()},this.getPollInterval())};e.prototype.getPollInterval=function t(){var e=this.constructor.pollInterval,n=e.min,r=e.max,o=e.multiplier;var i=o*Math.log(this.reconnectAttempts+1);return Math.round(u(i,n,r)*1e3)};e.prototype.reconnectIfStale=function t(){if(this.connectionIsStale()){c.log("ConnectionMonitor detected stale connection. reconnectAttempts = "+this.reconnectAttempts+", pollInterval = "+this.getPollInterval()+" ms, time disconnected = "+a(this.disconnectedAt)+" s, stale threshold = "+this.constructor.staleThreshold+" s");this.reconnectAttempts++;if(this.disconnectedRecently())c.log("ConnectionMonitor skipping reopening recent disconnect");else{c.log("ConnectionMonitor reopening");this.connection.reopen()}}};e.prototype.connectionIsStale=function t(){return a(this.pingedAt?this.pingedAt:this.startedAt)>this.constructor.staleThreshold};e.prototype.disconnectedRecently=function t(){return this.disconnectedAt&&a(this.disconnectedAt)<this.constructor.staleThreshold};e.prototype.visibilityDidChange=function t(){var e=this;if(document.visibilityState==="visible")setTimeout(function(){if(e.connectionIsStale()||!e.connection.isOpen()){c.log("ConnectionMonitor reopening stale connection on visibilitychange. visbilityState = "+document.visibilityState);e.connection.reopen()}},200)};return e}();l.pollInterval={min:3,max:30,multiplier:5},l.staleThreshold=6;var e={message_types:{welcome:"welcome",disconnect:"disconnect",ping:"ping",confirmation:"confirm_subscription",rejection:"reject_subscription"},disconnect_reasons:{unauthorized:"unauthorized",invalid_request:"invalid_request",server_restart:"server_restart"},default_mount_path:"/cable",protocols:["actioncable-v1-json","actioncable-unsupported"]},f=e.message_types,p=e.protocols,h=p.slice(0,p.length-1),d=[].indexOf,y=function(){function e(t){o(this,e);this.open=this.open.bind(this);this.consumer=t;this.subscriptions=this.consumer.subscriptions;this.monitor=new l(this);this.disconnected=true}e.prototype.send=function t(e){if(this.isOpen()){this.webSocket.send(JSON.stringify(e));return true}else return false};e.prototype.open=function t(){if(this.isActive()){c.log("Attempted to open WebSocket, but existing socket is "+this.getState());return false}else{c.log("Opening WebSocket, current state is "+this.getState()+", subprotocols: "+p);if(this.webSocket)this.uninstallEventHandlers();this.webSocket=new i.WebSocket(this.consumer.url,p);this.installEventHandlers();this.monitor.start();return true}};e.prototype.close=function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{allowReconnect:true},n=e.allowReconnect;if(!n)this.monitor.stop();if(this.isActive())return this.webSocket.close()};e.prototype.reopen=function t(){c.log("Reopening WebSocket, current state is "+this.getState());if(this.isActive())try{return this.close()}catch(t){c.log("Failed to reopen WebSocket",t)}finally{c.log("Reopening WebSocket in "+this.constructor.reopenDelay+"ms");setTimeout(this.open,this.constructor.reopenDelay)}else return this.open()};e.prototype.getProtocol=function t(){if(this.webSocket)return this.webSocket.protocol};e.prototype.isOpen=function t(){return this.isState("open")};e.prototype.isActive=function t(){return this.isState("open","connecting")};e.prototype.isProtocolSupported=function t(){return d.call(h,this.getProtocol())>=0};e.prototype.isState=function t(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return d.call(n,this.getState())>=0};e.prototype.getState=function t(){if(this.webSocket)for(var e in i.WebSocket)if(i.WebSocket[e]===this.webSocket.readyState)return e.toLowerCase();return null};e.prototype.installEventHandlers=function t(){for(var e in this.events){var n=this.events[e].bind(this);this.webSocket["on"+e]=n}};e.prototype.uninstallEventHandlers=function t(){for(var e in this.events)this.webSocket["on"+e]=function(){}};return e}();y.reopenDelay=500,y.prototype.events={message:function t(e){if(!this.isProtocolSupported())return;var n=JSON.parse(e.data),r=n.identifier,t=n.message,o=n.reason,i=n.reconnect,s=n.type;switch(s){case f.welcome:this.monitor.recordConnect();return this.subscriptions.reload();case f.disconnect:c.log("Disconnecting. Reason: "+o);return this.close({allowReconnect:i});case f.ping:return this.monitor.recordPing();case f.confirmation:return this.subscriptions.notify(r,"connected");case f.rejection:return this.subscriptions.reject(r);default:return this.subscriptions.notify(r,"received",t)}},open:function t(){c.log("WebSocket onopen event, using '"+this.getProtocol()+"' subprotocol");this.disconnected=false;if(!this.isProtocolSupported()){c.log("Protocol is unsupported. Stopping monitor and disconnecting.");return this.close({allowReconnect:false})}},close:function t(e){c.log("WebSocket onclose event");if(this.disconnected)return;this.disconnected=true;this.monitor.recordDisconnect();return this.subscriptions.notifyAll("disconnected",{willAttemptReconnect:this.monitor.isRunning()})},error:function t(){c.log("WebSocket onerror event")}};var v=function t(e,n){if(n!=null)for(var r in n){var o=n[r];e[r]=o}return e},m=function(){function r(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=arguments[2];o(this,r);this.consumer=t;this.identifier=JSON.stringify(e);v(this,n)}r.prototype.perform=function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};n.action=e;return this.send(n)};r.prototype.send=function t(e){return this.consumer.send({command:"message",identifier:this.identifier,data:JSON.stringify(e)})};r.prototype.unsubscribe=function t(){return this.consumer.subscriptions.remove(this)};return r}(),g=function(){function e(t){o(this,e);this.consumer=t;this.subscriptions=[]}e.prototype.create=function t(e,n){var r=e;var o=(typeof r==="undefined"?"undefined":s(r))==="object"?r:{channel:r};var i=new m(this.consumer,o,n);return this.add(i)};e.prototype.add=function t(e){this.subscriptions.push(e);this.consumer.ensureActiveConnection();this.notify(e,"initialized");this.sendCommand(e,"subscribe");return e};e.prototype.remove=function t(e){this.forget(e);if(!this.findAll(e.identifier).length)this.sendCommand(e,"unsubscribe");return e};e.prototype.reject=function t(e){var n=this;return this.findAll(e).map(function(t){n.forget(t);n.notify(t,"rejected");return t})};e.prototype.forget=function t(e){this.subscriptions=this.subscriptions.filter(function(t){return t!==e});return e};e.prototype.findAll=function t(e){return this.subscriptions.filter(function(t){return t.identifier===e})};e.prototype.reload=function t(){var e=this;return this.subscriptions.map(function(t){return e.sendCommand(t,"subscribe")})};e.prototype.notifyAll=function t(e){var n=this;for(var r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return this.subscriptions.map(function(t){return n.notify.apply(n,[t,e].concat(o))})};e.prototype.notify=function t(e,n){for(var r=arguments.length,o=Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];var s=void 0;if(typeof e==="string")s=this.findAll(e);else s=[e];return s.map(function(t){return typeof t[n]==="function"?t[n].apply(t,o):undefined})};e.prototype.sendCommand=function t(e,n){var r=e.identifier;return this.consumer.send({command:n,identifier:r})};return e}(),b=function(){function e(t){o(this,e);this._url=t;this.subscriptions=new g(this);this.connection=new y(this)}e.prototype.send=function t(e){return this.connection.send(e)};e.prototype.connect=function t(){return this.connection.open()};e.prototype.disconnect=function t(){return this.connection.close({allowReconnect:false})};e.prototype.ensureActiveConnection=function t(){if(!this.connection.isActive())return this.connection.open()};n(e,[{key:"url",get:function t(){return w(this._url)}}]);return e}();function w(t){if(typeof t==="function")t=t();if(t&&!/^wss?:/i.test(t)){var e=document.createElement("a");e.href=t;e.href=e.href;e.protocol=e.protocol.replace("http","ws");return e.href}else return t}function k(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:x("url")||e.default_mount_path;return new b(t)}function x(t){var e=document.head.querySelector("meta[name='action-cable-"+t+"']");if(e)return e.getAttribute("content")}t.Connection=y,t.ConnectionMonitor=l,t.Consumer=b,t.INTERNAL=e,t.Subscription=m,t.Subscriptions=g,t.adapters=i,t.createWebSocketURL=w,t.logger=c,t.createConsumer=k,t.getConfig=x,Object.defineProperty(t,"__esModule",{value:true})}(e)});(k=x)&&k.__esModule&&Object.prototype.hasOwnProperty.call(k,"default")&&k.default;var _=x.createConsumer;function S(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function P(n){return function(){var t,e=i(n);return e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?(t=i(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),o(this,e)}}var O=function(){h(c,v);var n,r,e,o,i,t,s=P(c);function c(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"wss://api.widget.userlist.com/cable";return f(this,c),(e=s.call(this))._tokenProvider=t,e._queue=[],e._consumer=_(n),e._connection=e._consumer.connection,e._createSubscription(),e}return p(c,[{key:"identify",value:(t=l(u.mark(function t(){var e,n=arguments;return u.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=0<n.length&&void 0!==n[0]?n[0]:{},this._perform("identify",e);case 2:case"end":return t.stop()}},t,this)})),function(){return t.apply(this,arguments)})},{key:"track",value:(i=l(u.mark(function t(e){var n,r=arguments;return u.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=1<r.length&&void 0!==r[1]?r[1]:{},this._perform("track",{properties:n,name:e});case 2:case"end":return t.stop()}},t,this)})),function(t){return i.apply(this,arguments)})},{key:"openMessage",value:(o=l(u.mark(function t(e){return u.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this._perform("open_message",{message_id:w(e)});case 1:case"end":return t.stop()}},t,this)})),function(t){return o.apply(this,arguments)})},{key:"closeMessage",value:(e=l(u.mark(function t(e){return u.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this._perform("close_message",{message_id:w(e)});case 1:case"end":return t.stop()}},t,this)})),function(t){return e.apply(this,arguments)})},{key:"clickMessage",value:(r=l(u.mark(function t(e,n){return u.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this._perform("click_message",{message_id:w(e),url:n});case 1:case"end":return t.stop()}},t,this)})),function(t,e){return r.apply(this,arguments)})},{key:"close",value:function(){this._connection.close({allowReconnect:!1})}},{key:"_createSubscription",value:function(){var i=this;return this._subscription=this._subscription||l(u.mark(function t(){var e,n,r,o;return u.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=i._consumer,n=i._queue,r=i,t.next=5,i._tokenProvider.receiveToken();case 5:return t.t0=t.sent,o={channel:"Widget::MessagingChannel",token:t.t0},o=e.subscriptions.create(o,{connected:function(){for(;0<n.length;)this.send(n.shift())},received:function(t){var e=t&&t.data&&t.data.type;"messages"===e?r.emit("message",t):"configurations"===e?r.emit("config",t):r.emit("data",t)}}),t.abrupt("return",o);case 9:case"end":return t.stop()}},t)}))()}},{key:"_perform",value:(n=l(u.mark(function t(e,n){var r;return u.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._createSubscription();case 2:r=t.sent,this._connection.isOpen()?r.perform(e,n):this._queue.push(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach(function(t){b(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n,{action:e}));case 4:case"end":return t.stop()}},t,this)})),function(t,e){return n.apply(this,arguments)})}]),c}();function A(n){return function(){var t,e=i(n);return e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?(t=i(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),o(this,e)}}var j=function(){h(a,v);var n,r,e,o,i,s,c=A(a);function a(t){var e;return f(this,a),(e=c.call(this)).widget=t,e}return p(a,[{key:"identify",value:(s=l(u.mark(function t(e){return u.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this._perform("identify",[e]);case 1:case"end":return t.stop()}},t,this)})),function(t){return s.apply(this,arguments)})},{key:"track",value:(i=l(u.mark(function t(e,n){return u.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this._perform("track",[e,n]);case 1:case"end":return t.stop()}},t,this)})),function(t,e){return i.apply(this,arguments)})},{key:"openMessage",value:(o=l(u.mark(function t(e){return u.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this._perform("open_message",{message_id:w(e)});case 1:case"end":return t.stop()}},t,this)})),function(t){return o.apply(this,arguments)})},{key:"closeMessage",value:(e=l(u.mark(function t(e){return u.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this._perform("close_message",{message_id:w(e)});case 1:case"end":return t.stop()}},t,this)})),function(t){return e.apply(this,arguments)})},{key:"clickMessage",value:(r=l(u.mark(function t(e,n){return u.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this._perform("click_message",{message_id:w(e),url:n});case 1:case"end":return t.stop()}},t,this)})),function(t,e){return r.apply(this,arguments)})},{key:"close",value:function(){}},{key:"_perform",value:(n=l(u.mark(function t(e,n){return u.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.widget.connectChannel();case 2:t.sent.postMessage(e,n);case 4:case"end":return t.stop()}},t,this)})),function(t,e){return n.apply(this,arguments)})}]),a}(),C=function(){function e(t){f(this,e),this._token=t}var t;return p(e,[{key:"receiveToken",value:(t=l(u.mark(function t(){return u.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._token);case 1:case"end":return t.stop()}},t,this)})),function(){return t.apply(this,arguments)})}]),e}(),E=function(){function e(t){f(this,e),this._promise=t}var t;return p(e,[{key:"receiveToken",value:(t=l(u.mark(function t(){return u.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._promise;case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)})),function(){return t.apply(this,arguments)})}]),e}();var R=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var M=function(t,e,n){return e&&L(t.prototype,e),n&&L(t,n),t};function T(t,e){return t(e={exports:{}},e.exports),e.exports}var D=T(function(e){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(t){return typeof t}:e.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}e.exports=n});var I=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t};var W=function(t,e){return!e||"object"!==D(e)&&"function"!=typeof e?I(t):e},N=T(function(e){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(t)}e.exports=n}),z=T(function(n){function r(t,e){return n.exports=r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},r(t,e)}n.exports=r});var q=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&z(t,e)};function F(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(t){if("string"==typeof t)return G(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(t,e):void 0}}(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,i=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return i=t.done,t},e:function(t){s=!0,o=t},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function G(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var U=function(){function t(){R(this,t),this._callbacks={}}return M(t,[{key:"on",value:function(t,e){this._callbacks[t]||(this._callbacks[t]=[]),this._callbacks[t].push(e)}},{key:"emit",value:function(t){t=this._callbacks[t];if(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var o,i=F(t);try{for(i.s();!(o=i.n()).done;)o.value.apply(void 0,n)}catch(t){i.e(t)}finally{i.f()}}}}]),t}();function H(n){return function(){var t,e=N(n);return e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?(t=N(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),W(this,e)}}var J="userlist/init",Y=function(){q(o,U);var e=H(o);function o(t){var n;return R(this,o),((n=e.call(this)).port=t).addEventListener("message",function(t){var e=t.data,t=e.type,e=e.payload;n.emit(t,e)}),t.start(),n.postMessage("connect"),n}return M(o,null,[{key:"connect",value:function(r){return new Promise(function(t){var e=new MessageChannel,n=new o(e.port1);n.on("connect",function(){return t(n)}),r.postMessage(J,"*",[e.port2])})}},{key:"listen",value:function(t){return new Promise(function(n){t.addEventListener("message",function(t){var e;t.data===J&&(e=new o(t.ports[0])).on("connect",function(){return n(e)})})})}}]),M(o,[{key:"postMessage",value:function(t,e){return this.port.postMessage({type:t,payload:e})}},{key:"close",value:function(){this.port.close()}}]),o}(),B=".userlist-container{animation:none 0s ease 0s 1 normal none running;backface-visibility:visible;background:transparent none repeat 0 0/auto auto padding-box border-box scroll;border:none;border-collapse:separate;border-image:none;border-radius:0;border-spacing:0;bottom:auto;box-shadow:none;box-sizing:content-box;caption-side:top;clear:none;clip:auto;color:#000;column-fill:balance;column-gap:normal;column-rule:medium none currentColor;column-span:1;columns:auto;content:normal;counter-increment:none;counter-reset:none;cursor:auto;direction:ltr;display:inline;empty-cells:show;float:none;font-family:serif;font-size:medium;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;line-height:normal;height:auto;hyphens:none;left:auto;letter-spacing:normal;list-style:disc outside none;margin:0;max-height:none;max-width:none;min-height:0;min-width:0;opacity:1;orphans:2;outline:medium none invert;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;perspective:none;perspective-origin:50% 50%;position:static;right:auto;tab-size:8;table-layout:auto;text-align:left;text-align-last:auto;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;top:auto;transform:none;transform-origin:50% 50% 0;transform-style:flat;transition:none 0s ease 0s;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:2;width:auto;word-spacing:normal;z-index:auto;all:initial;position:fixed;z-index:10000000;height:0;width:400px;max-height:calc(100vh - 100px);border-radius:20px;box-shadow:0 4px 30px rgba(0,0,0,.15);opacity:0;transform:translateY(100px);transition:opacity .2s,transform .2s,height .2s;overflow:hidden}.userlist-container.userlist-open{opacity:1;transform:translateY(0)}.userlist-container.userlist-top-right{top:30px;right:30px}.userlist-container.userlist-bottom-right{bottom:30px;right:30px}.userlist-container.userlist-bottom-left{bottom:30px;left:30px}.userlist-container.userlist-top-left{top:30px;left:30px}.userlist-container iframe{width:100%;height:100%;border:none}@media only screen and (max-width:460px){.userlist-container{bottom:0!important;left:0!important;right:0!important;top:auto!important;border-radius:0;max-width:none;width:100%!important}}";var $=function(){function s(t){var e,n,r,o=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"https://widget.userlist.com";R(this,s),this.tokenProvider=t,this.connectChannel().then(function(t){t.on("resize",function(t){0<t.height?(o.resize(t),o.open()):o.close()}),t.on("reposition",function(t){o.reposition(t)})}),this.element=(e=i,n=document.body,r=window.document.createElement("style"),t=window.document.createElement("div"),(i=window.document.createElement("iframe")).src=e,t.appendChild(r),t.appendChild(i),t.classList.add("userlist-container"),t.classList.add("userlist-bottom-right"),n.appendChild(t),r.type="text/css",r.appendChild(document.createTextNode(B)),t)}return M(s,[{key:"connectChannel",value:function(){var t=this;return this._connectChannel=this._connectChannel||Y.listen(window).then(function(e){return t.tokenProvider.receiveToken().then(function(t){return e.postMessage("init",{token:t}),e})})}},{key:"resize",value:function(t){t=t.height;this.element.style.height="".concat(t,"px")}},{key:"reposition",value:function(t){var e=this.element.classList;e.remove("userlist-top-right"),e.remove("userlist-top-left"),e.remove("userlist-bottom-right"),e.remove("userlist-bottom-left"),e.add("userlist-".concat(t))}},{key:"open",value:function(){this.element.classList.add("userlist-open"),this.element.classList.remove("userlist-closed")}},{key:"close",value:function(){this.element.classList.add("userlist-closed"),this.element.classList.remove("userlist-open"),this.resize({height:0})}},{key:"destroy",value:function(){this._connectChannel&&this.connectChannel().then(function(t){return t.close()}),this.element.remove()}}]),s}(),K=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};f(this,e),"string"==typeof t?t={tokenProvider:new C(t)}:"function"==typeof t.then?t={tokenProvider:new E(t)}:"object"===s(t)&&"string"==typeof t.token&&(t.tokenProvider=new C(t.token)),this.tokenProvider=t.tokenProvider,!1!==t.widget?("string"==typeof t.widget||"object"===s(t.widget)?this.widget=new $(this.tokenProvider,t.widget):this.widget=new $(this.tokenProvider),this.transport=t.transport||new j(this.widget)):this.transport=t.transport||new O(this.tokenProvider)}var t,n,r,o,i;return p(e,[{key:"identify",value:(i=l(u.mark(function t(){var e,n=arguments;return u.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:(e=this.transport).identify.apply(e,n);case 1:case"end":return t.stop()}},t,this)})),function(){return i.apply(this,arguments)})},{key:"track",value:(o=l(u.mark(function t(){var e,n=arguments;return u.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:(e=this.transport).track.apply(e,n);case 1:case"end":return t.stop()}},t,this)})),function(){return o.apply(this,arguments)})},{key:"openMessage",value:(r=l(u.mark(function t(){var e,n=arguments;return u.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:(e=this.transport).openMessage.apply(e,n);case 1:case"end":return t.stop()}},t,this)})),function(){return r.apply(this,arguments)})},{key:"closeMessage",value:(n=l(u.mark(function t(){var e,n=arguments;return u.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:(e=this.transport).openMessage.apply(e,n);case 1:case"end":return t.stop()}},t,this)})),function(){return n.apply(this,arguments)})},{key:"clickMessage",value:(t=l(u.mark(function t(){var e,n=arguments;return u.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:(e=this.transport).openMessage.apply(e,n);case 1:case"end":return t.stop()}},t,this)})),function(){return t.apply(this,arguments)})},{key:"on",value:function(){var t;(t=this.transport).on.apply(t,arguments)}},{key:"close",value:function(){this.transport.close()}},{key:"destroy",value:function(){this.widget&&this.widget.destroy(),this.transport=new g}}]),e}();t.NullTransport=g,t.PromiseTokenProvider=E,t.StaticTokenProvider=C,t.Userlist=K,t.WebsocketTransport=O,t.WidgetTransport=j}(i);var s,t=window.userlist&&window.userlist.q||[],e=document.currentScript||document.querySelector("script[data-userlist]"),n=null==e||null===(n=e.dataset)||void 0===n?void 0:n.userlist;n&&t.unshift(["init",n]);var c={init:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];s=r(i.Userlist,e)},identify:function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];null!==(t=s)&&void 0!==t&&t.identify.apply(t,n)},track:function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];null!==(t=s)&&void 0!==t&&t.track.apply(t,n)},destroy:function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];null!==(t=s)&&void 0!==t&&t.destroy.apply(t,n),s=null}};function a(t){for(var t=c[t],e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];null!=t&&t.apply(null,n)}return t.forEach(function(t){return a.apply(null,t)}),window.userlist=a}();
