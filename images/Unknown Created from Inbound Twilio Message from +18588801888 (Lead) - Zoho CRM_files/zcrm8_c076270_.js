var crmTemplate={clickEventIdVsMethodMapping:{userLookup:"crmTemplate.userLookup",showLookup:"crmTemplate.showLookup",clearLookup:"crmTemplate.clearLookup",sortingRecordslookup:"crmTemplate.showLookup"},weekDaysDropdownObj:[{html:I18n.getMsg("Sunday"),value:"1"},{html:I18n.getMsg("Monday"),value:"2"},{html:I18n.getMsg("Tuesday"),value:"3"},{html:I18n.getMsg("Wednesday"),value:"4"},{html:I18n.getMsg("Thursday"),value:"5"},{html:I18n.getMsg("Friday"),value:"6"},{html:I18n.getMsg("Saturday"),value:"7"}],numberStringArray:[{html:I18n.getMsg("First"),value:"1"},{html:I18n.getMsg("Second"),value:"2"},{html:I18n.getMsg("Third"),value:"3"},{html:I18n.getMsg("Fourth"),value:"4"},{html:I18n.getMsg("Last"),value:"5"}],recDateArrray:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],clickHandler:function(e,t,a){return!this.clickEventIdVsMethodMapping[a]||(Lyte.registeredMixins["crm-utilities"].executeFunctionByName(this.clickEventIdVsMethodMapping[a],window,e,t),!1)},subformContents:[],onChange:function(e,t,a){["36","143","144","145"].includes(a)||(CScript.dispatchEvent("onChange",void 0,e),CScript.dispatchEvent("onChange",t,CreatePageHandler.field_read.call({field_name:e})))},onSave:function(){return $(".errMsg").remove(),$(".tabDiv,.tabDivCreate, .errorFieldP").removeClass("errorFieldP"),CScript.dispatchIEvent("onSave")},forSubformFormulaNewEpxTriggered:!1,canSetupFormulaDependencies:!0,dependentFieldsList:[],recordCurrencyER:0,imageUploadFieldRenderedCount:0,createSubFields:function(e,t,a,l){if(0==$("#"+a).length){var n=document.createElement("div");$(n).attr({id:a,width:"75%"});var r=document.createElement("div");r.className="dIB w100p",n.appendChild(r),l.module=e;for(var i=0;i<l.length;i++){var o=document.createElement("div");r.appendChild(o),l.currentField=l[i],"Recurring_period"===l.currentField.colname||"Custom_Recurring_period"===l.currentField.colname?o.className="tabDivCreate tabDivCreateParent "+l.currentField.colname:o.className="tabDivCreate tabDivCreateParent taskNoBorderEle "+l.currentField.colname,o.id=e+"_fldRow_"+l.currentField.colname;var s=$(crmTemplate.createFieldLabel(l)),d=$(crmTemplate.createFieldContent(l));("Tasks"!==e&&i!=l.length-1&&l[i+1].isBusHoliday||"Tasks"===e&&l.currentField.isBusHoliday)&&$(o).addClass("nobdr"),"Tasks"!==e&&l.currentField.isBusHoliday&&d.addClass("labelValCretateBh"),s&&o.appendChild(s[0]),o.appendChild(d[0]),o.appendChild($("<div class='clearB'></div>")[0])}t.appendChild(n),"TasksrecurringDiv"!=a&&"RemindAtdiv"!=a&&($("#"+a).hide(),$("#"+a).slideDown())}else"RemindAtdiv"!=a&&$("#"+a).slideDown()},setFocus:function(e){e.focus((function(e){var t=$(this).parents("label").eq(0).attr("for");return $("#"+t).prop("checked",!0),this.focus(),renderingUtils.stopEvent(e),!1})).click((function(e){return renderingUtils.stopEvent(e),!1}))},constructDynamicFields:function(e,t,a){if(t.dynamicFields)for(var l=t.dynamicFields,n=a.querySelectorAll("label")[0],r=n||a,i=crmTemplate.getElementsByTagName("#text",r)[0],o=0;o<l.length;o++){var s=$(crmTemplate.createFieldContent({module:e,currentField:l[o]}))[0];commonUtils.cleanWhitespace(s);var d=i.nodeValue,u=/{[0-9]+}/g.exec(d);if(!u)return;for(var c=s;c.hasChildNodes();){if(n){var m=$(c).find("select,input");0!==m.length&&crmTemplate.setFocus(m.eq(0))}i.parentNode.appendChild(c.firstChild)}var p=i.splitText(u.index);p.deleteData(0,u[0].length),i.parentNode.appendChild(p),i=p}},constructRecurringEnds:function(e){var t=$("#TasksrecurringDiv > div")[0],a=[{colname:"RECURRING_END_NEVER",customfield:"false",displaylabel:I18n.getMsg("Ends"),val:[{html:I18n.getMsg("crm.databackup.backupends.none"),value:"1"}],label:"endRadioOption",mandate:"true",maxlength:"120",readonly:"false",type:"radio",uitype:"17"},{colname:"RECURRING_END_NOOFTIMES",customfield:"false",displaylabel:"",val:[{html:I18n.getMsg("crm.recurring.after.times"),value:"2"}],label:"endRadioOption",mandate:"false",maxlength:"120",readonly:"false",type:"radio",uitype:"17",dynamicFields:[{colname:"RECURRING_REPEAT_COUNT",customfield:"false",defaultvalue:1,displaylabel:"",label:"repeatEndCount",mandate:"false",maxlength:"3",readonly:"false",type:"int",uitype:"32"}]},{colname:"RECURRING_END_ON",customfield:"false",displaylabel:"",val:[{html:I18n.getMsg("crm.recurring.end.date.on"),value:"3"}],label:"endRadioOption",false:"true",maxlength:"120",readonly:"false",type:"radio",uitype:"17",dynamicFields:[{colname:"RECURRING_END_DATE",customfield:"false",displaylabel:"",label:"repeatEndDate",mandate:"false",maxlength:"120",readonly:"false",type:"Date",uitype:"24"}]}],l=$(e);if(("edit"==window.Tasks.currentStatus||"clone"==window.Tasks.currentStatus)&&null!=l.data().recdata&&""!=l.data().recdata){var n=l.data().recdata;if((n=n.split("*#")).length>0){var r=null;"weekly"==n[0]?1==(r=n[2].split("^")).length?(a[2].defaultvalue=1,a[2].dynamicFields[0].defaultvalue=l.data().enddate):"-1"==r[0]?a[0].defaultvalue=1:(a[1].defaultvalue=1,a[1].dynamicFields[0].defaultvalue=r[0]):1==(r=n[3].split("^")).length?(a[2].defaultvalue=1,a[2].dynamicFields[0].defaultvalue=l.data().enddate):"-1"==r[0]?a[0].defaultvalue=1:(a[1].defaultvalue=1,a[1].dynamicFields[0].defaultvalue=r[0])}}crmTemplate.createSubFields("Tasks",t,"taskEndPart",a),$("#taskEndPart").find('input[type="text"]').addClass("taskInput").prop("autocomplete","off"),$("#Crm_Tasks_RECURRING_END_DATE").css("width","80px"),1==a[2].defaultvalue?$("#Crm_Tasks_RECURRING_END_ON").prop("checked",!0):1==a[1].defaultvalue?$("#Crm_Tasks_RECURRING_END_NOOFTIMES").prop("checked",!0):$("#Crm_Tasks_RECURRING_END_NEVER").prop("checked",!0)},constructRecurringActivity:function(e,t){$("#Crm_Tasks_STATUS option:selected").val()==crmTasks.compDispVal&&$(".reminderSection").hasClass("freezeReminder")&&crmTasks.unfreezeReminder();var a=[{colname:"Recurring_period",customfield:"false",displaylabel:I18n.getMsg("Repeat Type"),label:"period",mandate:"true",maxlength:"120",readonly:"false",type:"Pick List",uitype:"42",val:[{html:I18n.getMsg("Daily"),content:"daily"},{html:I18n.getMsg("Weekly"),content:"weekly"},{html:I18n.getMsg("Monthly"),content:"monthly"},{html:I18n.getMsg("Yearly"),content:"yearly"},{html:I18n.getMsg("Custom"),content:"custom"}]}],l=$(t);if("edit"!=window[e].currentStatus&&"clone"!=window[e].currentStatus||null==l.data().recdata||""==l.data().recdata){if("Tasks"==e&&crmCommonModule.createEditJson&&crmCommonModule.createEditJson.isBusinessHoursCreated&&("create"===window[e].currentStatus||null==l.data().recdata||""==l.data().recdata)){var n={colname:"EXCEPT_BUSINESS_HOLIDAY",customfield:"false",displaylabel:"",val:[{html:I18n.getMsg("bh.except.week.holidays"),value:"true"}],label:"exceptBus_Holiday",mandate:"false",maxlength:"120",readonly:"false",type:"checkbox",uitype:"18",isBusHoliday:!0};a.push(n),n={colname:"NEXT_BUSINESS_HOLIDAY_MONTH",customfield:"false",displaylabel:"",val:[{html:I18n.getMsg("bh.next.task.business.holiday"),value:"true"}],label:"exceptBus_Holiday",mandate:"false",maxlength:"120",readonly:"false",type:"checkbox",uitype:"18",isBusHoliday:!0},a.push(n),n={colname:"NEXT_BUSINESS_HOLIDAY_YEAR",customfield:"false",displaylabel:"",val:[{html:I18n.getMsg("bh.next.task.business.holiday"),value:"true"}],label:"exceptBus_Holiday",mandate:"false",maxlength:"120",readonly:"false",type:"checkbox",uitype:"18",isBusHoliday:!0},a.push(n)}}else{var r=l.data().recdata;if((r=r.split("*#")).length>0){var i=r[0];if("1"==r[r.length-2]||"yearly"==i){var o=new Date(l.data().startdate);"daily"==i&&"1"==r[1].split("^")[0]||"weekly"==i&&o.getDay()+1==r[3]||"monthly"==i&&"1"==r[1]&&o.getDate()==r[4]||"yearly"==i&&"1"==r[1]&&o.getMonth()==r[4]&&o.getDate()==r[5]?a[0].defaultvalue=r[0]:a[0].defaultvalue="custom"}else a[0].defaultvalue="custom"}$("#Crm_Tasks_Recurring_Start_Date1").data("mandate",!0),$("#Crm_Tasks_Recurring_End_Date1").data("mandate",!0),$("#Crm_Tasks_Recurring_period").data("mandate",!0),"Tasks"===e&&($("#Tasks_fldRow_remTime").show().addClass("noBorderStyle"),$("#Tasks_fldRow_RemindAt_Start_Date1").hide(),$("#Crm_Tasks_RemindAt_Start_Date1").data("mandate",!1))}crmTemplate.createSubFields(e,t.parentNode.parentNode,e+"recurringDiv",a),crmTemplate.hideTaskBusinessHoliday(a[0].defaultvalue?a[0].defaultvalue:"daily");var s=$("<div></div>");s.prependTo($($("#Tasks_fldRow_Recurring_period").parent())),s.next().appendTo(s),"custom"==a[0].defaultvalue&&crmTasks.showFrequencyDetails(t),$("#Crm_Tasks_Recurring_End_Date1").data("mandate",!0);var d=$("#Crm_Tasks_Recurring_period");d.data("mandate",!0),crmTemplate.constructRecurringEnds(t),crmTasks.constructRecurFooter(),crmTasks.editTask&&($("#Crm_Tasks_RECURRING").prop("disabled",!1),thirdPartyUtils.bindSelect2(d))},removeRecurringActivity:function(){if(null!=$("#Crm_Tasks_RECURRING").data().recdata&&"clone"!==window.Tasks.currentStatus)crmTasks.openDeleteRecurringPopup();else{if($("#Crm_Tasks_STATUS option:selected").val()==crmTasks.compDispVal){crmTasks.freezeReminder(),crmTasks.removeReminder();var e=$("#Crm_Tasks_REMINDAT");e.prop("disabled",!0),e.parent().off("mouseenter.duedateinpast"),e.parent().off("mouseleave.duedateinpast"),e.parent().on("mouseenter.duedateinpast",(function(){crmui.toolTip_show(this,"left",I18n.getMsg("crm.task.reminder.tooltip2"))})),e.parent().on("mouseleave.duedateinpast",(function(){crmui.toolTip_hide()}))}crmTasks.removeRecurring()}},showRemindAt:function(e,t,a){var l=$(".REMINDAT").offset().top,n=t.checked,r=$("#Crm_Tasks_DUEDATE"),i=$("#Crm_Tasks_RECURRING");if("Tasks"===e)var o=null==r[0]||""==r[0].value||!Utils.isValidDate(Crm.userDetails.DATE_PATTERN,r[0].value),s=!o&&i.is(":checked");var d=$(t),u={};a&&(u=d.data());var c=u&&u.alertType&&u.alertType,m=("L"===Crm.userDetails.LICENSE_TYPE||"F"===Crm.userDetails.LICENSE_TYPE||"N"===Crm.userDetails.LICENSE_TYPE)&&"Tasks"===e,p=(c=u&&u.alertType?u.alertType:m?"popup":"email",u&&u.remindBefore?u.remindBefore.split(" "):{}),f=o?new Date:r.data("dateObj"),v=new Date;(f=new Date(f)).setHours(v.getHours());var h="edit"==window[e].currentStatus||"clone"==window[e].currentStatus;if(h&&null!=u.reminderDate&&""!=u.reminderDate&&(f=u.reminderDate),n){var g,y={colname:"RemindAt_Start_Date1",customfield:"false",label:"Start Date",mandate:"false",maxlength:"120",readonly:"false",type:"Date",uitype:"786",defaultvalue:f},b={colname:"remTime",customfield:!1,label:"remTime",mandate:!1,type:"Pick List",uitype:"42",val:[{content:"0",html:I18n.getMsg("on")}],defaultvalue:p[0],period:[{value:"days",html:I18n.getMsg("crm.remind.day(s)")}],defaultvalueperiod:p[1]};if(o||s){if(!o){crmTasks.updateReminderOptions();var C=crmTasks.possibleDays,T=crmTasks.possibleWeeks,E=crmTasks.possibleMonths;T&&b.period.push({value:"weeks",html:I18n.getMsg("crm.remind.week(s)")}),E&&b.period.push({value:"months",html:I18n.getMsg("crm.remind.month(s)")});for(w=1;w<=C;w++)b.val.push({value:""+w,html:""+w})}}else{var _=r.data("dateObj"),I=new Date;if(_.setHours(0,0,0,0),I.setHours(0,0,0,0),Utils.compareDate(I,_)){var k=Utils.getDayDiff(_,I);crmTasks.updatePossiblePeriods(k),crmTasks.possibleWeeks&&b.period.push({value:"weeks",html:I18n.getMsg("crm.remind.week(s)")}),crmTasks.possibleMonths&&b.period.push({value:"months",html:I18n.getMsg("crm.remind.month(s)")});for(var w=1;w<=crmTasks.possibleDays;w++)b.val.push({value:""+w,html:""+w})}}g=m?[{html:I18n.getMsg("Pop Up"),content:"popup"}]:[{html:I18n.getMsg("Email"),content:"email"},{html:I18n.getMsg("Pop Up"),content:"popup"},{html:I18n.getMsg("Both"),content:"emailandpopup"}];var R=[y,b,{colname:"RemindAt_period",customfield:"false",displaylabel:I18n.getMsg("Repeat Type"),label:"Repeat Type",mandate:"false",maxlength:"120",readonly:"false",type:"Pick List",uitype:"42",defaultvalue:u.repeatType,val:[{html:I18n.getMsg("None"),content:"none"}]},{colname:"RemindAt_Notify",customfield:"false",displaylabel:I18n.getMsg("crm.workflow.label.notify"),label:"alertType",mandate:"false",maxlength:"120",readonly:"false",type:"Pick List",uitype:"42",defaultvalue:c,val:g}];crmTemplate.createSubFields(e,t.parentNode.parentNode,"RemindAtdiv",R);var L=$("#Crm_Tasks_RemindAt_Start_Date1"),D=$("#Crm_Tasks_RemindAt_Start_Date1_Radio"),S=$("#Tasks_fldRow_RemindAt_Start_Date1"),O=$("#Crm_Tasks_RemindAt_remTime_Radio"),F=$("#Tasks_fldRow_remTime"),M=$("#Tasks_fldRow_RemindAt_period");"Tasks"===e&&crmBstTime.showHideSuggestionForCreateTask("show"),S.addClass("nobottomborder"),F.addClass("nobottomborder"),crmTasks.updateRemPeriodSelect(),$("#Tasks_fldRow_RemindAt_Start_Date1 > .labelTabCreate").remove(),$("#Tasks_fldRow_RemindAt_Start_Date1 > .labelValCreate").removeClass("labelValCreate").addClass("remRow"),$("#Tasks_fldRow_remTime > .labelTabCreate").remove(),$("#Tasks_fldRow_remTime > .labelValCreate").removeClass("labelValCreate").addClass("remRow"),S.find(".textField").removeClass("fL"),crmTasks.constructReminderFooter(),h&&null!=u.remindBefore&&"0"!=u.remindBefore&&!o?(O.prop("checked",!0),$("#Crm_Tasks_remTime_TimeOption").val($("#Crm_Tasks_RemindAt_Start_Date1_TimeOption").val())):(D.prop("checked",!0),L.data("mandate",!1));var A=$("#Crm_Tasks_remTime");if(h&&"weeks"==p[1]){$('#Crm_Tasks_remTime option[value="0"]').prop("disabled",!0),(A.val()>crmTasks.possibleWeeks||"0"==A.val())&&$('#Crm_Tasks_remTime option[value="1"]').attr("selected","selected");for(w=T+1;w<=C;w++)$('#Crm_Tasks_remTime option[value="'+w+'"]').prop("disabled",!0)}else if(h&&"months"==p[1]){$('#Crm_Tasks_remTime option[value="0"]').prop("disabled",!0),(A.val()>crmTasks.possibleMonths||"0"==A.val())&&$('#Crm_Tasks_remTime option[value="1"]').attr("selected","selected");for(w=E+1;w<=C;w++)$('#Crm_Tasks_remTime option[value="'+w+'"]').prop("disabled",!0)}crmTasks.updateRemRepeatSelect(),L.off("change.remRepeatSelUpdate"),L.on("change.remRepeatSelUpdate",(function(){crmTasks.updateRemRepeatSelect()})),D.parent().find(".rbHtml").show(),O.parent().find(".rbHtml").show(),s?(S.hide(),O.prop("checked",!0),O.parents("label").find(".rbHtml").hide(),F.show(),M.hide(),D.parent().find(".rbHtml").hide(),O.parent().find(".rbHtml").hide()):(S.show(),F.hide(),M.show()),o?(M.hide(),s||(S.show(),F.hide()),D.parent().find(".rbHtml").hide(),O.parent().find(".rbHtml").hide()):(F.show(),s||(M.show(),S.show()));var P=$("#wmstoolbar").length?$("#wmstoolbar").outerHeight():30,x=200+l;renderingUtils.windowHeight-P<x&&$("html,body").animate({scrollTop:x})}else{(L=$("#Crm_Tasks_RemindAt_Start_Date1")).data("mandate",!1),i.data()&&null!=i.data().recdata&&null!=$("#Crm_Tasks_REMINDAT").data().reminderDate&&"clone"!==window.Tasks.currentStatus?crmTasks.openDeleteReminderPop():(crmTasks.removeReminder(),d.parents(".REMINDAT").removeClass("nobdr"),crmBstTime.showHideSuggestionForCreateTask("hide"))}thirdPartyUtils.bindSelect2($(".newChosenSel").find("select"))},showPeriodDetails:function(e,t){var a=t.dataset.oldValue,l=t.value;$("#"+t.id+"daily1").hide(),$("#"+t.id+"monthly1").hide(),$("#"+t.id+"yearly1").hide(),$("#"+t.id+"weekly1").hide();var n=new Date($("#Crm_Tasks_DUEDATE").data("dateObj")),r=$("#"+e+"CustomFrequencyDetails")[0],i="crm.recurring.no.days",o="crm.recurring.no.weeks",s="crm.recurring.no.months",d="edit"==window[e].currentStatus||"clone"==window[e].currentStatus;switch(l){case"None":crmTasks.removeArrayElements(Crm.fieldsObj[e],crmTasks.customDailyFields),crmTasks.removeArrayElements(Crm.fieldsObj[e],crmTasks.customWeeklyFields),crmTasks.removeArrayElements(Crm.fieldsObj[e],crmTasks.customMonthlyFields),crmTasks.removeArrayElements(Crm.fieldsObj[e],crmTasks.customYearlyFields);break;case"daily":var u=[{colname:"RECURRING_DAILY_EVERYDAY_ON",customfield:"false",displaylabel:I18n.getMsg("crm.label.every"),val:I18n.getMsg(i),label:"daily11",mandate:"false",maxlength:"120",readonly:"false",type:"text",uitype:"60",dynamicFields:[{colname:"RECURRING_DAILY_REPEAT_COUNT",defaultvalue:"1",customfield:"false",displaylabel:"",label:"daily111",mandate:"true",maxlength:"2",readonly:"false",type:"int",uitype:"32"}]}];d&&null!=t.dataset.selectedradio&&"daily"===a&&(u[0].dynamicFields[0].defaultvalue=t.dataset.frequency),crmTemplate.createSubFields(e,r,t.id+"daily1",u),null==t.dataset.selectedradio&&crmTemplate.hideTaskBusinessHoliday("daily");break;case"weekly":u=[{colname:"RECURRING_WEEKLY_REPEAT",customfield:"false",displaylabel:I18n.getMsg("crm.label.every"),val:I18n.getMsg(o),label:"weekly11",mandate:"false",maxlength:"120",readonly:"false",type:"text",uitype:"60",dynamicFields:[{colname:"RECURRING_WEEKLY_REPEAT_COUNT",defaultvalue:"1",customfield:"false",displaylabel:"",label:"weekly111",mandate:"true",maxlength:"2",readonly:"false",type:"int",uitype:"32"}]},{colname:"RECURRING_WEEKLY_DAYS",customfield:"false",displaylabel:"",label:"day",mandate:"true",maxlength:"120",readonly:"false",type:"multipicklist",uitype:"100",val:crmTasks.firstLetterDays}];if(d&&null!=t.dataset.frequency&&"weekly"===a&&t.dataset.frequency&&(u[0].defaultvalue=1,u[0].dynamicFields[0].defaultvalue=t.dataset.frequency,t.dataset.seldays))for(var c=t.dataset.seldays.split(","),m=c.length,p=0;p<m;p++)0==p?u[1].defaultvalue=c[p]:u[1].defaultvalue+="; "+c[p];if(crmTemplate.createSubFields(e,r,t.id+"weekly1",u),null==t.dataset.selectedradio){crmTemplate.hideTaskBusinessHoliday("weekly");var f=n.getDay(),v=$("#Crm_Tasks_RECURRING_WEEKLY_DAYS");v.find('input.circleInput[value="'+(f+1)+'"]').prop("checked",!0),v.removeClass("multiSelect select")}break;case"monthly":u=[{colname:"RECURRING_MONTHLY_REPEAT",customfield:"false",displaylabel:I18n.getMsg("crm.label.every"),val:I18n.getMsg(s),label:"",mandate:"false",maxlength:"120",readonly:"false",type:"text",uitype:"60",dynamicFields:[{colname:"RECURRING_MONTHLY_REPEAT_COUNT",defaultvalue:"1",customfield:"false",displaylabel:"",label:"noMonths1",mandate:"true",maxlength:"2",readonly:"false",type:"int",uitype:"32"}]},{colname:"RECURRING_MONTHLY_DAYS",customfield:"false",displaylabel:"",val:[{html:I18n.getMsg("crm.recurrence.custom.month.option1"),value:"1"}],label:"monthly11",mandate:"false",maxlength:"120",readonly:"false",type:"radio",uitype:"17",defaultvalue:"1",dynamicFields:[{colname:"RECURRING_MONTHLY_DAYS_NO",customfield:"false",displaylabel:"",label:"monthly1select",mandate:"true",maxlength:"120",readonly:"false",type:"int",uitype:"28",val:crmConstants.dateArray},{colname:"RECURRING_MONTHLY_MONTH_NO",customfield:"false",displaylabel:"",defaultvalue:1,label:"noMonths1",mandate:"true",maxlength:"120",readonly:"false",type:"int",uitype:"19"}]},{colname:"RECURRING_MONTHLY_DAYS_ON",customfield:"false",displaylabel:"",val:[{html:I18n.getMsg("crm.recurrence.custom.month.option2"),value:"2"}],label:"monthly11",mandate:"false",maxlength:"120",readonly:"false",type:"radio",uitype:"17",dynamicFields:[{colname:"RECURRING_MONTHLY_WEEKSEQUENCE_TYPE",customfield:"false",displaylabel:"",label:"weeksequence",mandate:"false",maxlength:"120",readonly:"false",type:"int",uitype:"28",val:crmCalendar.weekSequence},{colname:"RECURRING_MONTHLY_WEEKSEQUENCE_DAY",customfield:"false",displaylabel:"",label:"weekdays",mandate:"false",maxlength:"120",readonly:"false",type:"int",uitype:"28",val:crmConstants.fullDaysArray},{colname:"RECURRING_MONTHLY_WEEKSEQUENCE_MONTH_NO",customfield:"false",displaylabel:"",defaultvalue:1,label:"noMonths2",mandate:"false",maxlength:"120",readonly:"false",type:"int",uitype:"19"}]}];if(d&&null!=t.dataset.selectedradio&&"monthly"===a)1==t.dataset.selectedradio?(u[1].defaultvalue=1,u[0].dynamicFields[0].defaultvalue=t.dataset.monthdata2,u[1].dynamicFields[0].defaultvalue=t.dataset.monthdata1):(u[2].defaultvalue=2,u[2].dynamicFields[0].defaultvalue=crmCalendar.weekSequence[t.dataset.monthdata1-1].html,u[2].dynamicFields[1].defaultvalue=crmConstants.fullDaysArray[t.dataset.monthdata2-1].html,u[0].dynamicFields[0].defaultvalue=t.dataset.monthdata3);if(crmTemplate.createSubFields(e,r,t.id+"monthly1",u),$("#Crm_Tasks_RECURRING_MONTHLY_DAYS_ON").on("change",(function(){$("#Tasks_fldRow_NEXT_BUSINESS_HOLIDAY_MONTH").hide()})),$("#Crm_Tasks_RECURRING_MONTHLY_DAYS").on("change",(function(){$("#Tasks_fldRow_NEXT_BUSINESS_HOLIDAY_MONTH").show()})),null==t.dataset.selectedradio){crmTemplate.hideTaskBusinessHoliday("monthly");var h=n.getDate(),g=Math.ceil(h/7),y=n.getDay();$("#Crm_Tasks_RECURRING_MONTHLY_DAYS_NO").find('option[value="'+h+'"]').prop("selected",!0),$("#Crm_Tasks_RECURRING_MONTHLY_WEEKSEQUENCE_DAY").find('option[value="'+(y+1)+'"]').prop("selected",!0),$("#Crm_Tasks_RECURRING_MONTHLY_WEEKSEQUENCE_TYPE").find('option[value="'+g+'"]').prop("selected",!0)}$("#"+t.id+"monthly1").find(".rbCheckHtml").addClass("mR0");break;case"yearly":u=[{colname:"RECURRING_YEARLY_DAYS",customfield:"false",displaylabel:"",val:[{html:I18n.getMsg("crm.recurrence.custom.yearly.option1"),value:"1"}],label:"yearly11",mandate:"false",maxlength:"120",readonly:"false",type:"radio",uitype:"17",defaultvalue:"1",dynamicFields:[{colname:"RECURRING_YEARLY_DAYS_NO",customfield:"false",displaylabel:"",label:"yearlydays1select",mandate:"true",maxlength:"120",readonly:"false",type:"int",uitype:"28",val:crmConstants.dateArray},{colname:"RECURRING_YEARLY_DAYS_OF_MONTH",customfield:"false",displaylabel:"",label:"yearmonths",mandate:"true",maxlength:"120",readonly:"false",type:"int",uitype:"28",val:crmCalendar.monthName}]},{colname:"RECURRING_YEARLY_DAYS_ON",customfield:"false",displaylabel:"",val:[{html:I18n.getMsg("crm.recurrence.custom.yearly.option2"),value:"2"}],label:"yearly11",mandate:"false",maxlength:"120",readonly:"false",type:"radio",uitype:"17",dynamicFields:[{colname:"RECURRING_YEARLY_WEEKSEQUENCE_TYPE",customfield:"false",displaylabel:"",label:"weeksequence1",mandate:"false",maxlength:"120",readonly:"false",type:"int",uitype:"28",val:crmCalendar.weekSequence},{colname:"RECURRING_YEARLY_WEEKSEQUENCE_NO",customfield:"false",displaylabel:"",label:"weekdays1",mandate:"false",maxlength:"120",readonly:"false",type:"int",uitype:"28",val:crmConstants.fullDaysArray},{colname:"RECURRING_YEARLY_WEEKSEQUENCE_MONTH_NAME",customfield:"false",displaylabel:"",label:"yearmonths1",mandate:"false",maxlength:"120",readonly:"false",type:"int",uitype:"28",val:crmCalendar.monthName}]}];if(d&&null!=t.dataset.selectedradio&&"yearly"===a)1==t.dataset.selectedradio?(u[0].defaultvalue=1,u[0].dynamicFields[0].defaultvalue=t.dataset.monthdata2,u[0].dynamicFields[1].defaultvalue=crmCalendar.monthName[t.dataset.monthdata1].html):(u[1].defaultvalue=0,u[1].defaultvalue=2,u[1].dynamicFields[0].defaultvalue=crmCalendar.weekSequence[t.dataset.monthdata1-1].html,u[1].dynamicFields[1].defaultvalue=crmConstants.fullDaysArray[t.dataset.monthdata2-1].html,u[1].dynamicFields[2].defaultvalue=crmCalendar.monthName[t.dataset.monthdata3].html);if(crmTemplate.createSubFields(e,r,t.id+"yearly1",u),$("#Crm_Tasks_RECURRING_YEARLY_DAYS").on("change",(function(){$("#Tasks_fldRow_NEXT_BUSINESS_HOLIDAY_YEAR").show()})),$("#Crm_Tasks_RECURRING_YEARLY_DAYS_ON").on("change",(function(){$("#Tasks_fldRow_NEXT_BUSINESS_HOLIDAY_YEAR").hide()})),null==t.dataset.selectedradio){crmTemplate.hideTaskBusinessHoliday("yearly");h=n.getDate(),g=Math.ceil(h/7),y=n.getDay();var b=n.getMonth();$("#Crm_Tasks_RECURRING_YEARLY_DAYS_OF_MONTH").find('option[value="'+b+'"]').prop("selected",!0),$("#Crm_Tasks_RECURRING_YEARLY_DAYS_NO").find('option[value="'+h+'"]').prop("selected",!0),$("#Crm_Tasks_RECURRING_YEARLY_WEEKSEQUENCE_TYPE").find('option[value="'+g+'"]').prop("selected",!0),$("#Crm_Tasks_RECURRING_YEARLY_WEEKSEQUENCE_NO").find('option[value="'+(y+1)+'"]').prop("selected",!0),$("#Crm_Tasks_RECURRING_YEARLY_WEEKSEQUENCE_MONTH_NAME").find('option[value="'+b+'"]').prop("selected",!0)}$("#"+t.id+"yearly1").find(".rbCheckHtml").addClass("mR0")}$(r).find('input[type="text"]').addClass("taskInput w40");var C=$("#TasksrecurringDiv");crmTasks.editTask&&crmTasks.isRecurringSaved&&"clone"!==window.Tasks.currentStatus&&(crmTasks.handleRecurChange(C.find("select")),crmTasks.handleRecurChange(C.find("input"))),$("#taskEndPart input").off("change.recurEdit");thirdPartyUtils.bindSelect2($("#TasksrecurringDiv").find("select"),{disable_search_threshold:100})},hideTaskBusinessHoliday:function(e){switch(e){case"daily":$("#Tasks_fldRow_EXCEPT_BUSINESS_HOLIDAY").show(),$("#Tasks_fldRow_NEXT_BUSINESS_HOLIDAY_MONTH").hide(),$("#Tasks_fldRow_NEXT_BUSINESS_HOLIDAY_YEAR").hide();break;case"weekly":case"custom":$("#Tasks_fldRow_EXCEPT_BUSINESS_HOLIDAY").hide(),$("#Tasks_fldRow_NEXT_BUSINESS_HOLIDAY_MONTH").hide(),$("#Tasks_fldRow_NEXT_BUSINESS_HOLIDAY_YEAR").hide();break;case"monthly":$("#Tasks_fldRow_EXCEPT_BUSINESS_HOLIDAY").hide(),$("#Tasks_fldRow_NEXT_BUSINESS_HOLIDAY_MONTH").show(),$("#Tasks_fldRow_NEXT_BUSINESS_HOLIDAY_YEAR").hide();break;case"yearly":$("#Tasks_fldRow_EXCEPT_BUSINESS_HOLIDAY").hide(),$("#Tasks_fldRow_NEXT_BUSINESS_HOLIDAY_MONTH").hide(),$("#Tasks_fldRow_NEXT_BUSINESS_HOLIDAY_YEAR").show()}},returnNextNum:function(e,t,a,l,n){if(field=a[l],!field||"8"!=field.showtype&&"20"!=field.uitype&&"111"!=field.uitype&&"No of comments"!=field.label&&"20"!=field.uitype){var r=[];return r.push(e),r.push(t),r.push(l),r}return n>1?l%n==0?(l=e+2,e+=2):(l=t+2,t+=2):l=t=e+=1,this.returnNextNum(e,t,a,l,n)},showCopyAddressMenu:function(e){var t=renderingUtils.getTargetElem(e),a=$(t).offset();$("#copy").show().css({top:a.top+t.offsetHeight,left:a.left,"min-width":$("#copyAddress").outerWidth()}).attr("data-close","true")},createAddressMenu:function(e){$("#copy").remove();var t=document.body.appendChild(document.createElement("div"));$(t).attr({id:"copy",class:"ddM",position:"absolute"}).hide();var a=t.appendChild(document.createElement("ul")),l=[I18n.getMsg("crm.copy.billing.to.shipping"),I18n.getMsg("crm.copy.shipping.to.billing")];"Contacts"===e&&(l=[I18n.getMsg("crm.copy.mailing.to.other"),I18n.getMsg("crm.copy.other.to.mailing")]);for(var n=0;n<2;n++){var r=a.appendChild(document.createElement("li")),i=r.appendChild(document.createElement("span"));$(i).html(l[n]),0==n?$(r).click((function(){"Contacts"===e?Crm.copyField("secContent_Address_Information",e,"MAILING","OTHER"):Crm.copyField("secContent_Address_Information",e,"BILLING","SHIPPING")})):$(r).click((function(){"Contacts"===e?Crm.copyField("secContent_Address_Information",e,"OTHER","MAILING"):Crm.copyField("secContent_Address_Information",e,"SHIPPING","BILLING")}))}},submitCreate:function(e){var t=$("#save"+e+"Btn");return t.focus(),t[0].click(),!1},downloadedContentLoaded:!1,contentLoaded:function(e,t,a){var l,n;crmTemplate.downloadedContentLoaded=!0,$.isEmptyObject(Crm.layoutRuleJSONData)||(CFRExec.init(Crm.layoutRuleJSONData,t,"edit"),CFRExec.promptIfMandatory=!1,CFRExec.evalRules("edit",!0));for(var r=0;r<e[t].section.length;r++){for(var i=e[t].section[r],o=0;o<i.FL.length;o++){var s=i.FL[o];if("false"===s.readonly){l="Crm_"+t+"_"+s.colname,n=s.uitype;break}}if(l)break}var d=this.getElemIdByColname(t,"EXCHANGERATE");if(Crm.userDetails.CURRENCY_DETAILS[window[t].defaultCurrency]){var u="";u="edit"==e.currentStatus?crmTemplate.recordCurrencyER:Crm.userDetails.CURRENCY_DETAILS[window[t].defaultCurrency].er,$("#"+d).html(u)}"Events"==t&&"Crm_Events_SUBJECT"==l&&"create"===window[t].currentStatus?setTimeout((function(){$("#"+l).select()}),10):setTimeout((function(){"2"!==n&&"100"!==n?$("#"+l).focus():$("#"+l).next(".select2").find(".select2-selection").focus()}),10);var c=function(){var e=void 0!==a?a:$("#preHTMLContainer_"+t),l=e.find(".labelValCreate :input");l.on("change",(function(){var e=$(this).closest(".subformParentSection");e.length>0&&e[0].dispatchEvent(new Event("mouseenter")),$(this).trigger("create_edit_clone_DomChange",this)}));for(var n=e.find(".productIdFld"),r=n.length,i=[],o=0;o<r;o++)i[o]=n[o].scrollHeight;for(o=0;o<r;o++)n.eq(o).css({height:i[o]});var s=e.find("crm-user-wrapper");s.on("change",(function(){$(this).trigger("create_edit_clone_DomChange",this)})),s.on("create_edit_clone_DomChange",(function(){crmCommonModule.updateCreateEditJson(this),$(this).trigger("executeFormRules")})),l.on("create_edit_clone_DomChange",(function(){crmCommonModule.updateCreateEditJson(this),$(this).trigger("executeFormRules")})),window.removeEventListener("mouseover",c)},m=function(){!Crm.isHeadless&&crmTemplate.canSetupFormulaDependencies&&(window[t].formulaObj.setupFormulaDependencies(t),crmTemplate.canSetupFormulaDependencies=!1),this.removeEventListener("mouseenter",m)};if("edit"===window[t].currentStatus){window.addEventListener("mouseover",c);var p=document.getElementsByClassName("subformParentSection");p.length>0&&p.forEach((function(e){e.addEventListener("mouseenter",m)}))}else c(),m();if("Contacts"===t&&"edit"===window[t].currentStatus){var f=!1;if($("#Crm_Contacts_ACCOUNTID").val()&&(f=!0),!f){var v=void 0!==Crm.moduleInfo.Accounts?Crm.moduleInfo.Accounts.translatedSingularLabel:"Account",h=$("#Contacts_fldRow_REPORTINGTOCONTACTID");h.attr("class","REPORTINGTOCONTACTID tabDivCreate noclick");var g=I18n.getMsg("crm.contact.hierarchy.Specify_account_name",I18n.getMsg(v));h.attr("onmouseenter","zctt.showtt('"+g+"');"),h.attr("onmouseleave","zctt.hidett();"),$("#Crm_Contacts_REPORTINGTOCONTACTID").prop("disabled",!0),$("#Crm_Contacts_REPORTINGTOCONTACTID").autocomplete("disable")}}},setDependentFields:function(e,t,a){var l=a?$(a):$(document);Crm.setDependentInvoked=!0;for(var n={},r=0;r<this.dependentFieldsList.length;r++)n[this.dependentFieldsList[r]]=!0;for(var i in n){var o=l.find("#"+i)[0];o&&Crm.setDependent(void 0,e,o,t)}if("Potentials"===e&&"view"!==window[e].currentStatus){var s=l.find("#Crm_Potentials_STAGE"),d=s.val().substring(0,s.val().indexOf(":")),u=l.find("#Crm_Potentials_PROBABILITY");u.val(d),u.length<1&&l.find("[id='value_PROBABILITY'],[id='headervalue_PROBABILITY']").text(d),Crm.calculateExpectedRevenue()}Crm.setDependentInvoked=!1},attachCalendarEvent:function(e,t){var a=$(e).data("showexecution");$(e).focusin((function(l){var n,r,i=$(e).data("colname"),o=$(e).data("timeLimit"),s=$("#Crm_Events_REPEATTYPE").val();("STARTDATETIME"!==i&&"ENDDATETIME"!==i||$("#eventRecurringDiv").is(":visible")||void 0===s||"none"===s)&&"APPOINTMENTSTARTTIME"!==i&&("future"===o?n=(new CrmDate).getDateInPattern("mm/dd/yyyy"):("past"===o||isNewCallView&&"CALLSTARTDATETIME"===i)&&(r=(new CrmDate).getDateInPattern("mm/dd/yyyy")),crmCalendar.showCalendar(l,void 0,t,a,void 0,void 0,n,r))})).focusout((function(e){e.relatedTarget&&"todayBtn"!==e.relatedTarget.id&&"executionDayBtn"!==e.relatedTarget.id&&!/\b(cdate|calNav|sel|crmBodyWin)\b/.test(e.relatedTarget.className)&&crmCalendar.close()})).click((function(l){var n,r,i=$(e).data("colname"),o=$(e).data("timeLimit");("STARTDATETIME"!==i&&"ENDDATETIME"!==i||$("#eventRecurringDiv").is(":visible")||void 0===$("#Crm_Events_REPEATTYPE").val()||"none"===$("#Crm_Events_REPEATTYPE").val())&&("future"===o?n=(new CrmDate).getDateInPattern("mm/dd/yyyy"):("past"===o||isNewCallView&&"CALLSTARTDATETIME"===i)&&(r=(new CrmDate).getDateInPattern("mm/dd/yyyy")),$("#Calendar").is(":visible")||crmCalendar.showCalendar(l,void 0,t,a,void 0,void 0,n,r),renderingUtils.stopEvent(l))})),$(e).keyup((function(e){crmCalendar.calendarNode=this;var t=this.value,a=e.keyCode,l=$(this).data("datepattern")?$(this).data("datepattern"):Crm.userDetails.DATE_PATTERN;if(9!=a&&Utils.isValidDate(l,t)){var n=crmCalendar.getDateObjectFromGivenDateString(t);n&&crmCalendar.updateDatePicker(e,void 0,void 0,n)}}))},createLookUpClearImage:function(e){var t,a={"data-cid":"clearLookup","data-zcqa":"lookup_"+(t=e.uitype===CrmField.UITYPES.MULTI_MODULE_LOOK_UP_ENTITY.toString()?e.relatedToAttrObj.id:e.attrObj.id).split("_")[2]+"_close",src:networkUtils.getImageUrl("spacer_e17b417_.gif",ResourceConstants.CRM),width:"15",height:"10",title:"",align:"absmiddle",id:t+"_img",class:"clear_lookupfield lookup_hIconO dIB svgIcons ico-close-small2 mL5 op5 pR cP fR mR10 hIconO",tabIndex:e.tabIndex+1},l=document.createElement("img");if($(l).attr(a),!e.isOprDenied)return $(l).attr(a),$(l)[0].outerHTML;$(l).attr(a).attr("display","none")},createLookUpLoadImage:function(e){var t=e.attrObj.id,a={src:networkUtils.getImageUrl("Spin_e41ea07_.svg",ResourceConstants.CRM),width:"25",height:"25",align:"absmiddle",id:t+"_loadimg",class:"vH pA lookuploader bot5",tabIndex:e.tabIndex+2},l=document.createElement("img");return $(l).attr(a),$(l)[0].outerHTML},clearLookup:function(e,t){var a=$(t).attr("id").replace("_img","");$("#"+a).removeAttr("title"),Crm.clearLookup($("#"+a))},createLookUpImage:function(e,t){var a;a=t.uitype===CrmField.UITYPES.MULTI_MODULE_LOOK_UP_ENTITY.toString()?t.relatedToAttrObj.id:t.attrObj.id;var l,n=t.lookupmodule,r=n+"-small",i=t.tabIndex+2;if((/CustomModule[0-9]/.test(n)||"Events"===e||"Calls"==e||"Tasks"===e)&&(r="lookup newSearchIcon"),"221"!==t.uitype&&"55"!==t.uitype||void 0!==n&&""!==n||(r="true"==t.readonly?"noevents":"changeUserIcon svgIcons ico-search-users lookupIconChange"),t.uitype===CrmField.UITYPES.LAYOUT_LOOKUP.toString()&&(n="JobSheets"),l="setup"!==window[e].currentStatus?{"data-module":e,"data-label":a,"data-lookup-module":n,"data-cid":"showLookup","data-zcqa":"lookup_"+a.split("_")[2],src:networkUtils.getImageUrl("spacer_e17b417_.gif",ResourceConstants.CRM),width:"17",height:"19",title:"",align:"absmiddle",id:a+"_img",class:r+" lookup_hIconO fR mR5 hIconO",tabIndex:i}:{"data-module":e,"data-label":a,"data-lookup-module":n,"data-cid":"","data-zcqa":"lookup_"+a.split("_")[2],src:networkUtils.getImageUrl("spacer_e17b417_.gif",ResourceConstants.CRM),width:"17",height:"19",title:"",align:"absmiddle",id:a+"_img",class:r+" lookup_hIconO fR mR10 hIconO",tabIndex:i},"221"!==t.uitype&&"55"!==t.uitype||void 0!==n&&""!==n||(l={"data-module":e,"data-label":a,"data-lookup-module":n,"data-cid":"userLookup","data-zcqa":"lookup_"+a.split("_")[2],src:networkUtils.getImageUrl("spacer_e17b417_.gif",ResourceConstants.CRM),width:"17",height:"19",title:"",align:"absmiddle",id:a+"_img",class:r+" lookup_hIconO fR mR5 hIconO",tabIndex:i}),Crm.isInventoryModule(e)&&"BOOKID"===t.colname&&Crm.moduleInfo.PriceBooks){var o=Crm.moduleInfo.PriceBooks.translatedSingularLabel;o=o.replace(/\s+/g,"").trim(),l.title=I18n.getMsg("PriceBookNameLookUp",o)}var s=document.createElement("img");return $(s).attr(l).addClass(r),$(s)[0].outerHTML},showUserLookup:function(e){var t=$(e).closest("div"),a=$(t).attr("id").replace("temp_",""),l=$("#"+a);crmTemplate.showLookup(void 0,l)},userLookup:function(e){var t=renderingUtils.getTargetElem(e),a=$(t).data().label;$("#"+a+" crux-user-lookup")[0].cxProp("show",!0)},showLookup:function(e,t){var a;a=e?renderingUtils.getTargetElem(e):t;var l=document.getElementById($(a).data("label"));if(l&&l.getAttribute("isoprdenied"))return renderingUtils.displayPermissionDenied(null,null,I18n.getMsg("crm.security.error")),void window.scrollTo(0,0);var n=a.id;if("IMG"===a.nodeName){var r=$(a).attr("id");(t=$("#"+r.replace("_img","_label_select")))[0]||(t=$("#"+r.replace("_img","_select")))}else if("addToCampaignsTool"===n)crmTemplate.fromAddToCampaignTool=!0;else{t=$("#"+$(a).attr("id")+"_label_select");a=$("#"+$(a).attr("id")+"_img"),t[0]||(t=$("#"+$(a).attr("id")+"_select"))}var i=$(a).data();if(i){var o=i.label,s=$("#"+o).data();if(t[0])var d=t.val();else d=i.lookupModule;var u,c=s?s.linkingmodule:void 0,m=s?s.subformdisplaylabel:void 0,p=Crm.isLineItemSubFormModule(m);if("PriceBooks"==d)if(s&&void 0!==m&&p&&!1===s.customfield){var f=$(productDetails.sfFldIdSuffix+"PRODUCTID_"+$(a).closest("tr").data("data-rowid"));u=f.data("id")}else{var v=/.*?(\d+)/g.exec(a.id);v=v?v[1]:"",u=$("#Crm_"+d+"_txtProduct"+v).data("id")}else"Products"==d?u=s&&p&&"PurchaseOrders"===i.module&&!1===s.customfield?$("#Crm_"+i.module+"_VENDORID").data("id"):$("#Crm_"+d+"_VENDORID").data("id"):"Contacts"==d&&"Potential"==d&&(u=$("#Crm_Potentials_ACCOUNTID").data("id"));if(s&&p&&"PriceBooks"===d&&"BOOKID"===s.colname||!Crm.userDetails.isLookupAdvancedSearchEnabled||void 0!==c){var h,g;i.fromaddcamppopup&&(h=i.campaignid||!0),s&&(s.permissionDeniedLookup&&!d&&(d=s.permissionDeniedLookup),s.lookupModule&&s.permissionDeniedLookup&&(s.permissionDeniedLookup=null),g=s.permissionDeniedLookup),Crm.showLookUp(i.module,o,o,d,d,u,null,u,null,null,null,null,null,null,c,null,h,null,g,m)}else{var y="",b=networkUtils.returnDependencyFiles(["crm-entity-lookup.js"],crmConstants.jsStaticPathForLyte);b=b.concat(networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("Lookup")],crmConstants.jsStaticPath));var C=[];Crm.userDetails.RTL_ENABLED&&(C=networkUtils.returnDependencyFiles(["crm-entity-lookup-rtl.css"],crmConstants.cssStaticPathForLyte));var T=b.concat(C);Lyte.injectResources(T,void 0,(function(){(y=$.extend({},y,i,s,u,null)).labelName=o,y.lookupModule=d,y.searchModule=d,y.parentModule=i.module,Crm.moduleName=i.module,y.subformsectionlabel=s?s.subformsectionlabel:void 0,y.linkingmodule=c;var e=document.getElementById("lookupListPopup");if(!e){var t=$("#"+o+"_label"),a=$("#"+i.label);"PRODUCTDETAILS"===y.colname&&(t=a.closest("td.pR")),s&&s.subformsectionlabel&&(t=a.closest("td"));var l=$("#"+o);0==$(t).length&&(t=l.closest("span.labelValTwo"),0==$(t).length&&(t=$("#addToCampaignsTool").closest("div"))),0==$(t).length&&(t=l);var n=document.createElement("crm-entity-lookup");n.component.setData("reqData",{}),t.append(n),e=document.getElementById("lookupListPopup")}var r=$("crm-entity-lookup")[0].component;r.layersAnalystAgent(r,void 0,y,void 0,!0)}))}}},create:function(e,t,a,l){void 0!==CAEExec&&CAEExec.init(),this.dependentFieldsList=[],Crm.isHeadless||(window[t].formulaObj=new crmFormulaInit,window[t].formulaObj.resetProps()),e.module=t,e.showHelp="create"===window[t].currentStatus,e.showEdit=Crm.userDetails.permissions.Crm_Implied_Customize_Zoho_CRM,e.currentStatus=window[t].currentStatus,e.dependentFields=this.getFieldsInDependency(t),Handlebars.registerPartial("toolTipTemplate",Handlebars.templates.toolTipTemplate);var n,r,i=null,o=null,s=e[t].section.length;if("Appointments"==t)for(var d=s-1;d>=0;d--)if(Crm.isAppAction&&"appointmentCompletePopup"!==Crm.isAppAction){if("Reschedule_Information"===Crm.isAppAction&&"Appointment_Information"===e[t].section[d].sysRefName)for(var u=e[t].section[d].FL.length,c=0;c<u;c++)"APPOINTMENTDATEANDTIME"===e[t].section[d].FL[c].colname&&(i=e[t].section[d].FL[c]),"SMOWNERID"===e[t].section[d].FL[c].colname&&(o=e[t].section[d].FL[c]),"CURRENCYISOCODE"===e[t].section[d].FL[c].colname&&(n=e[t].section[d].FL[c],detailView.rescheduleAppSection.isCurrency=!0);if("Cancellation_Information"===Crm.isAppAction&&"Appointment_Information"===e[t].section[d].sysRefName){var m=e[t].section[d].FL.length;for(c=0;c<m;c++)"CURRENCYISOCODE"===e[t].section[d].FL[c].colname&&(r=e[t].section[d].FL[c],detailView.cancelAppSection.isCurrency=!0)}"Reschedule_Information"===e[t].section[d].sysRefName&&(detailView.rescheduleAppSection=e[t].section[d]),"Cancellation_Information"===e[t].section[d].sysRefName&&(detailView.cancelAppSection=e[t].section[d]),e[t].section[d].sysRefName!==Crm.isAppAction&&e[t].section.splice(d,1)}else"Appointment_Information"!=e[t].section[d].sysRefName&&e[t].section.splice(d,1);var p=e[t].section;p.length||(e[t].section=p=[p]);for(var f=e[t].section.length,v=0;v<f;v++){if("Record Image"===e[t].section[v].name){e.modulelogo=!0,e.pfReadOnly="true"===e[t].section[v].FL.readonly,"setup"==e.currentStatus&&(CMB.oCHolder.isProfileImageAvailable?e.modulelogo=!0:CMB.oCHolder.isProfileImageAvailable||(e.modulelogo=!1),e.pfReadOnly="true"===e[t].section[v].FL[0].readonly),"edit"==e.currentStatus?(e.imgId=t+"_"+e.entityId+"_photo",null!=e.photoFileId?(e.imgSrc=Crm.getCrmBasePath()+"/EntityImageAttach.do?action_module="+t+"&entityId="+e.entityId+"&actionName=readImage&fileId="+e.photoFileId,e.imgSrc=Crm.getPortalURL(e.imgSrc)):"Leads"===t||"Contacts"===t?e.imgSrc=networkUtils.getImageUrl("user_profile_d6908a7_.svg",ResourceConstants.CRM):-1!==t.indexOf("CustomModule")||"Vendors"===t||"Products"===t||"Cases"==t||"Solutions"==t||"Potentials"==t?e.imgSrc=networkUtils.getImageUrl("image_pholder_bb67c93_.svg",ResourceConstants.CRM):e.imgSrc=networkUtils.getImageUrl("companylogonew_437ab19_.svg",ResourceConstants.CRM)):"clone"==e.currentStatus&&null!=e.photoFileId?e.imgSrc=Crm.getCrmBasePath()+"/EntityImageAttach.do?action_module="+t+"&actionName=readImage&fileId="+e.photoFileId:(e.imgId=t+"_photo","Leads"===t||"Contacts"===t?e.imgSrc=networkUtils.getImageUrl("user_profile_d6908a7_.svg",ResourceConstants.CRM):-1!==t.indexOf("CustomModule")||"Vendors"===t||"Products"===t||"Cases"==t||"Solutions"==t||"Potentials"==t?e.imgSrc=networkUtils.getImageUrl("image_pholder_bb67c93_.svg",ResourceConstants.CRM):e.imgSrc=networkUtils.getImageUrl("companylogonew_437ab19_.svg",ResourceConstants.CRM));break}if(e.modulelogo=!1,"Appointments"==t){if("Reschedule Information"===e[t].section[v].name){var h=e[t].section[v].FL.length;for(d=0;d<h;d++)if("RESCHEDULEDTO"===e[t].section[v].FL[d].colname){e[t].section[v].FL[d]=i;break}e[t].section[v].FL[h]=o,n&&(e[t].section[v].FL[h+1]=n)}if("Cancellation Information"===e[t].section[v].name){var g=e[t].section[v].FL.length;r&&(e[t].section[v].FL[g]=r)}}}crmTemplate.isApproved=e.isApproved,0!=fileupload.uploadedFileObject.length&&(fileupload.uploadedFileObject.length=0);var y=store.peekAll("wizard"),b=[];if(y&&y.length&&y.forEach((function(a){if(!a.$.isNew&&a.module.module_name==t&&a.active&&a.profiles.mapBy("id").contains(userInfo.users[0].profile.id)){b.push(Object.assign({},a));var l=e.layout_jsonarrayObj.layout_jsonarrayObj.map((function(e){return e.LAYOUTID}));a.layouts.forEach((function(e,t){l.contains(e.id)||b[b.length-1].layouts.splice(t,1)})),b[b.length-1].layouts.length<=0&&b.pop(a)}})),e.layout_jsonarrayObj){var C=e.layout_jsonarrayObj.layout_jsonarrayObj,T=b.length;for(d=0;d<T;d++)b[d].isWizard=!0,C.push(b[d]);e.layout_jsonarrayObj.layout_jsonarrayObj=C,b.length>=1&&(e.isWizard=!0)}var E=$(Handlebars.templates.crmCreateLayout(e));"create"!=e.currentStatus&&"edit"!=e.currentStatus&&"setup"!=e.currentStatus&&"clone"!=e.currentStatus||e.imgSrc!=networkUtils.getImageUrl("user_profile_d6908a7_.svg",ResourceConstants.CRM)&&e.imgSrc!=networkUtils.getImageUrl("companylogonew_437ab19_.svg",ResourceConstants.CRM)&&e.imgSrc!=networkUtils.getImageUrl("image_pholder_bb67c93_.svg",ResourceConstants.CRM)||E.find("#preHTMLContainer_"+t).find(".lnPhoto").addClass("lnPhotoHover");var _=crmTemplate.createSectionLayout(e,t,l);E.find("#preHTMLContainer_"+t).append(_);var I="#preHTMLContainer_"+t,k=E.find(I);if(-1===crmTemplate.arrayNewClass.indexOf(t)||"Calls"===t&&isNewCallView?k.addClass("newInputStyleEle"):k.addClass("noNewInputStyleEle"),Crm.userDetails.CLIENT_ACCOUNT&&k.addClass("clientportalenabled"),Crm.isDataEnrichAvailable){var w=CAEExec.MODULEVSENRICHFIELDS[t];if(void 0!==w){var R=w.length;for(d=0;d<R;d++){var L=w[d];E.find("#Crm_"+t+"_"+L).focusout((function(e){setTimeout((function(){CAEExec.initEnrichDataFetchProcess()}),100)}))}}}return"setup"!=window[t].currentStatus&&E.find("#rwb").eq(0).append($(Handlebars.templates.crmCreateButtonLayout(e))),setCurrencySymbol(t,E),"Events"!==t&&(window.onscroll=fixedBtnFnCreate),E},getElemIdByColname:function(e,t){var a="Crm_"+e;return a+="setup"===window[e].currentStatus?"_setup_":"_",a+=t},getFieldsInDependency:function(e){for(var t={},a=objectUtils.getKeys(Crm.fieldDependency[e]),l=0;l<a.length;l++)for(var n=objectUtils.getKeys(Crm.fieldDependency[e][a[l]]),r=0;r<n.length;r++)"CALLTYPE"!=n[r]&&(t[n[r]]=!0);return t},arrayNewClass:["Events","Calls","Tasks"],lookupNewStylePopupId:"topBandPopup",setPreviousValueToContainer:!1,memberDataStoreLI:""};function currencyForVariables(e){return e&&""!=e||(e=Crm.userDetails.defaultOrgCurrency?Crm.userDetails.defaultOrgCurrency:""),e}function setFocusClass(e){if(e=e.currentTarget){var t=$(e).data("uitype");$(e).prop("tagName");if($(".labelValCreate").removeClass("focusEleField"),"3"!=t&&"110"!=t||($("#span_tarea").remove(),$(e).off("keyup focus").on("keyup focus",(function(){if(0==$("#span_tarea").length){var t=parseFloat($(e).outerWidth()),a=$("<span>");a.attr({id:"span_tarea",class:"dIB newgraybtn"}).css({"font-size":"1rem","overflow-y":"scroll","line-height":"18px",width:t}),$("body").append(a)}var l=$("#span_tarea");l.text($(e).val());var n=18*parseInt(l.outerHeight()/18);n>354?(l.remove(),$(e).css({height:"354px"})):(n=n<=18?54:n+30,$(e).css({height:n}))}))),"123"!=t&&($(e).closest(".labelValCreate,.tabDiv").addClass("focusEleField"),"saveCancelSpan"==$(e).next().attr("id")&&$(e).off("blur",removeFocusClass)),"786"==t||"301"==t){var a=$(e);"checkbox"===a.attr("type")&&a.addClass("cb-focus")}return $(e).closest(".tabDivCreate").find(".infotoolTip").css("visibility","visible").addClass("infoTTStay"),!0}}function removeFocusClass(e){var t;if(e=e.currentTarget,$(e).closest(".labelValCreate,.tabDiv").removeClass("focusEleField"),3==(t=$(e).data("uitype"))||110==t){if($(e).outerHeight()>360)return $("#span_tarea").remove(),!1;var a=$(e),l=$("#span_tarea");l.text(a.val());var n=""===a.val()?18:a.height();a.css({height:n}),l.remove()}if("786"==t||"301"==t){var r=$(e);"checkbox"===r.attr("type")&&r.removeClass("cb-focus")}return $(e).closest(".tabDivCreate").find(".infotoolTip").css("visibility","hidden").removeClass("infoTTStay"),!0}function setSubfrmFocusClass(e){if((e=$(e.currentTarget)).closest("table").hasClass("subformTabl")){$(".topband_dv_row").removeClass("txtFldFocusedRow"),$(".topband_dv_row div").removeClass("focusEleField"),e.is("[readonly]")?e.closest("div").removeClass("focusEleField"):e.closest("div").addClass("focusEleField"),e.closest("tr").addClass("txtFldFocusedRow");var t=e.data("uitype");if(-1===[24,202,301,333].indexOf(t)){110!==t&&3!==t||$("#span_tarea").remove();var a=e.val();e.off("keyup focus paste").on("keyup focus paste",(function(l){var n=$(this),r=$(n).outerWidth(),i=$(".subFrmTempwidthCalElm");i.text(a);var o=i.outerWidth(),s=i.outerHeight();Crm.isLineItemSubFormModule(n.data("subformdisplaylabel"))&&"PRODUCTID"===n.data("colname")||e.css("height",s);var d=e.closest(".subFrmTablWrapper").outerHeight()-20;e.closest(".subFrmLayout").find(".SubFrmScrolIn").css("height",d),e.css("width",o);var u=e.closest("td").index(),c=e.closest("td").outerWidth();if(setTimeout((function(){var t=e.closest("td").outerHeight()-9;e.closest(".subformTabl").find(".tableHeadBg td").eq(u).css("min-width",c),e.closest(".subFrmTablWrapper").find(".subFrmSnFld").length>0&&e.closest(".subFrmLayout").find(".subFrmTablSerlNoOverlay tbody tr").eq(e.closest("tr").index()).find("td .labelValCreate").css("height",t),e.closest(".subFrmLayout").find(".SubFrmScrolIn").length>0&&e.closest(".subFrmLayout").find(".SubFrmScrolIn").css("height",e.closest(".subFrmTablWrapper").outerHeight()-20)}),200),(110===t||3===t)&&"ITEMDESCRIPTION"!=n.data("colname")){if(0==$("#span_tarea").length){var m=parseFloat(r),p=$("<span>");p.attr({id:"span_tarea",class:"dIB newgraybtn"}).css({"font-size":"1rem","overflow-y":"scroll","line-height":"18px",width:m}),$("body").append(p)}var f=$("#span_tarea");f.text($(n).val());var v=18*parseInt(f.outerHeight()/18);v>354?(f.remove(),$(n).css({height:"354px"})):(v=v<=18?54:v+30,$(n).css({height:v}))}Crm.isLineItemSubFormModule(n.data("subformdisplaylabel"))&&"PRODUCTID"===n.data("colname")&&$("#lookFieldSrcWrap").addClass("pli_prdAutoCompListView"),133!==t||e.data("uiAutocomplete")||(crmLookupAutoComplete.initAutoCompletePlugin(e,"createPageLookup"),e.click((function(){$(this).autocomplete("search")}))),36!==t&&143!==t&&144!==t&&145!==t||crmTemplate.calculatorOperation(n,l)}))}}else e.is("[readonly]")?e.closest(".labelValCreate").removeClass("focusEleField"):e.closest(".labelValCreate").addClass("focusEleField")}function removeSubfrmFocusClass(e){var t=(e=$(e.currentTarget)).data("uitype");if(3==t||110==t&&"ITEMDESCRIPTION"!=e.data("colname")){var a=e.height(),l=$("#span_tarea");if(e.outerHeight()>360)return l.remove(),!1;var n=e;l.text(n.val());var r=""===n.val()?18:a;n.css({height:r}),l.remove()}Crm.isLineItemSubFormModule(e.data("subformdisplaylabel"))&&"PRODUCTID"===e.data("colname")&&$("#lookFieldSrcWrap").removeClass("pli_prdAutoCompListView"),$(".topband_dv_row").removeClass("txtFldFocusedRow"),$(".topband_dv_row div, .labelValCreate").removeClass("focusEleField")}Handlebars.registerHelper("setHeadingLayout",(function(e){return"create"===e.currentStatus&&(e.layout_jsonarrayObj.activeLayoutCnt>=2||e.isWizard)?e.showMultipageLayout=!0:e.showMultipageLayout=!1,"create"===e.currentStatus&&Crm.userDetails.TaskPopup&&"Tasks"===e.module?e.isTaskPopup="true":e.isTaskPopup="false",Handlebars.templates.crmCreateHeadingLayout(e)})),Handlebars.registerHelper("setFieldsListHeading",(function(e){return void 0===e.isFieldPermNeeded||e.isFieldPermNeeded||(e.layout_jsonarrayObj.layoutCnt>=2&&e.isMPLAvailable?e.showMultipageLayout=!0:e.showMultipageLayout=!1),Handlebars.templates.fieldsListHeading(e)})),Handlebars.registerHelper("createNewNotes",(function(e){return Handlebars.templates.createnewNotes(e)})),crmTemplate.createSectionLayout=function(e,t,a){var l=e[t].section;if(null!=window[t].createEditJson.layout_jsonarrayObj)var n=window[t].createEditJson.layout_jsonarrayObj.currLayoutId;!0===Crm.userDetails.LAYOUTRULEAVAILABLE&&CFRExec.holdFormRule()&&n===CFRExec.ruleLayoutId?CFRExec.tabIndexingRequired=!0:CFRExec.tabIndexingRequired=!1,null==l.length&&(l=[l],e[t].section=l);t=e.module;for(var r=document.createDocumentFragment(),i=1,o=0,s="Quotes"==t||"Invoices"==t||"SalesOrders"==t||"PurchaseOrders"==t,d=0;d<l.length;d++){var u=void 0;if(void 0!==l[d].FL||"Consents"!==t){e.currentSection=l[d];var c=$(Handlebars.templates.crmCreateSectionLayout(e));e.currentSection.isLineItemSF&&c.addClass(c.attr("class")+" pli_lineItemProduct"),"Tasks"===t&&c.find("table, div").css("width","100%"),"PriceBooks"===t&&"create"===window[t].currentStatus&&"Pricing Details"===e.currentSection.name&&c.hide(),"Events"===t&&0!=d&&"relatedlist_meetnow"!=Events.createSource&&c.hide();var m=l[d].name.replace(/ |'/g,"_"),p=c.find("[id='secContent_"+m+"']");$(p).data("data-secsequence",d+1),$(p).attr("tab-traversal",l[d].tabTraversal);var f,v,h=l[d].layout,g=l[d].FL,y=l[d],b=l[d].subFormTabId;s&&"Product_Details"===m&&$(p).addClass("productCheck"),null==g.length&&(g=l[d].FL=[g]);for(var C=[],T=[],E=0;E<g.length;E++)"500"!=g[E].uitype?"OTHERSERVICE"!=g[E].colname&&"CONTACTTHROUGHSOCIAL"!=g[E].colname&&"SERVICESTATUS"!==g[E].colname&&"APPOINTMENTSTATUS"!==g[E].colname&&"RESCHEDULECOUNT"!==g[E].colname&&("APPOINTMENTID"!==g[E].colname||g[E].uitype!==CrmField.UITYPES.SYSTEM_SINGLE_LOOK_UP_ENTITY.toString()&&g[E].uitype!==CrmField.UITYPES.LOOK_UP_ENTITY.toString())&&"UNAVAILABLE_TILL"!==g[E].colname&&"UNAVAILABLE_FROM"!==g[E].colname&&("209"===g[E].uitype||"207"===g[E].uitype&&"clone"===window[t].currentStatus||("208"!==g[E].uitype&&"207"!==g[E].uitype||"create"!==window[t].currentStatus)&&(E%h==0?C.push(g[E]):T.push(g[E]))):(f=g[E].label,v=g[E].colname);for(var _,I=0,k=0;k<C.length;k++)if(!0!==C[k]&&"Formula"!==C[k].type&&"Auto Number"!==C[k].type&&"layoutPreview"!==a){if(C[k].tabIndex=i,i=CFRExec.getIndexForTab(C[k].type,i),void 0!==l[d].tabTraversal&&"2"===l[d].tabTraversal||void 0!==l[d].tabtraversal&&2===l[d].tabtraversal)for(var w=I;w<T.length;w++){if(!0!==T[w]&&"Formula"!==T[w].type&&"Auto Number"!==T[w].type){T[w].tabIndex=i,i=CFRExec.getIndexForTab(T[w].type,i),I++;break}T[w].tabIndex=-1,I++}}else C[k].tabIndex=-1;for(var R=I;R<T.length;R++)"layoutPreview"!==a?(1!=T[R]&&(T[R].tabIndex=i),i=CFRExec.getIndexForTab(T[R].type,i)):T[R].tabIndex=-1;if(_=0===T.length&&"Events"===t?$("<div class='contInfoTab singleColLayout eventsModule'>"):""!=b&&null!=b&&"null"!=b?$("<div class='contInfoTab subFrmLayout "+t+"'>"):0==T.length?$("<div class='contInfoTab floatL singleColLayout "+t+"'>"):$("<div class='contInfoTab floatL formViewCreate'>"),""!=b&&null!=b&&"null"!=b){var L=crmTemplate.createSubForm(t,e,f,y,v);if(!L)continue;Crm.userDetails.isMandatorySubFormEnabled&&"true"===L.getAttribute("subform-mandatory")&&c.addClass("subformMandatory pR"),_.addClass("aggTempClass").append("<div class='subFrmTablWrapper mT13' onscroll='crmTemplate.subFrmScroll(this)'></div><div class='subFrmAggTablWrapper'></div>");var D={};D.subFormCreateJSON=e,D.moduleName=t,D.subFormSectionId="[id='secContent_"+m+"']",D.subFormContent=_,D.subFormTable=L,D.subFormTabId=b,D.subFormAggContent=C,D.layout=h,D.subFormSecData=y,crmTemplate.subformContents["subFormRender"+ ++o]=D,p.append(_)}else{for(E=0;C&&E<C.length;E++)if(1!=C[E]){u=crmTemplate.createFieldRow(h,t,void 0,C[E],e);var S=$(u).find(".labelTabCreate");null!==u&&(S.addClass("columnCal1"),e.currentField.tooltiptype&&"1"==e.currentField.tooltiptype&&S.addClass("containTooltip")),_.append(u)}if(p.append(_),T.length>0){_=$("<div class='contInfoTab floatR formViewCreate'>");for(E=0;T&&E<T.length;E++){if(1!=T[E])u=crmTemplate.createFieldRow(h,t,void 0,T[E],e),(S=$(u).find(".labelTabCreate")).addClass("columnCal2"),e.currentField.tooltiptype&&"1"==e.currentField.tooltiptype&&S.addClass("containTooltip"),_.append(u)}p.append(_)}}r.appendChild(c[0]),p.append($("<div class='clearB'></div>")[0])}else l.splice(d)}return r},crmTemplate.subFrmScroll=function(e){var t=$(document),a=$(e),l=a.scrollLeft(),n=t.scrollTop(),r=a.offset(),i=a.find(".subFrmSnFld").length,o=Math.round(a.outerWidth()),s=Math.round(a[0].scrollWidth),d=a.closest(".subFrmLayout"),u=$("#createFixedButtonDiv").outerHeight(),c="",m=a.find(".subFrmTablSerlNoOverlay tbody tr"),p=l;if(c=d.hasClass("reorderEnabled")?10:0,!0===Crm.userDetails.RTL_ENABLED)p=-l;i>0&&a.find(".subformTabl tbody tr").each((function(){m.eq($(this).index()).find(".labelValCreate").css({height:$(this).outerHeight()-9})})),a.hasClass("leftFixedSubFrmDisp")||(r.top<n+u?i>0&&p>c?(a.addClass("leftFixedSubFrm"),!0===Crm.userDetails.RTL_ENABLED?a.find("thead").addClass("pF").css({right:l+30,top:u,"z-index":"3",background:"#fff"}):a.find("thead").addClass("pF").css({left:r.left-l,top:u,"z-index":"3",background:"#fff"}),a.find(".subFrmTablSerlNoOverlay").css({top:r.top-n,display:"block"}),a.find(".subFrmTablSerlNoheadOverlay").css({top:u,display:"block"})):(a.removeClass("leftFixedSubFrm"),!0===Crm.userDetails.RTL_ENABLED?a.find("thead").addClass("pF").css({right:l+30,top:u,"z-index":"3",background:"#fff"}):a.find("thead").addClass("pF").css({left:r.left-l,top:u,"z-index":"3",background:"#fff"}),a.find(".subFrmTablSerlNoOverlay").removeAttr("style").css("display","none"),a.find(".subFrmTablSerlNoheadOverlay").removeAttr("style").css({top:0,display:"block"})):i>0&&p>c?(a.addClass("leftFixedSubFrm"),a.find(".subFrmTablSerlNoOverlay").css({top:r.top-n,display:"block"}),a.find(".subFrmTablSerlNoheadOverlay").removeAttr("style").css("display","none")):(a.removeClass("leftFixedSubFrm"),a.find(".subFrmTablSerlNoOverlay").removeAttr("style").css("display","none"),a.find(".subFrmTablSerlNoheadOverlay").removeAttr("style").css("display","none"))),l===s-o?a.closest(".subFrmLayout").find(".SubFrmScrolIn").hide():a.closest(".subFrmLayout").find(".SubFrmScrolIn").show()},crmTemplate.productLineItemSettingsAddRow=function(e){var t=$(".topband_dv_row:eq(0) .pli_quantityCtn").attr("style");return $(e).find(".pli_quantityCtn").attr("style",t),e},crmTemplate.productLineItemSettings=function(){var e=[],t=$(".subformTabl thead td, .subformTabl tbody tr:first-child td"),a=Math.floor($(".pli_lineItemProduct .pli_quantity").outerWidth()/6);t.each((function(){var t=$(this),a=t.outerWidth();t.hasClass("subFrmDragIconWrap")?e.push(Math.floor(a)):e.push(Math.floor(a-25))})),t.each((function(t){var l=$(this),n=l.hasClass("pli_quantity"),r=l.hasClass("pli_quantityCtn"),i=e[t]-a;n||r?(l.css({"min-width":i,width:i}),l.closest(".subFrmTablWrapper").find(".pli_quantityCtn").css({"min-width":i,width:i})):l.css("min-width",e[t])}))},crmTemplate.bindSubformScrollEvent=function(){$(window).scroll((function(){var e=$(document).scrollTop(),t=$(".subFrmTablWrapper"),a=$("#createFixedButtonDiv").outerHeight();t.each((function(){var t=$(this).offset().top+$(this).height()+a;if(e+a>$(this).offset().top&&e+a<t)return $(this).addClass("curSubFrmFixed"),void crmTemplate.subFrmLeftRightMask()}));var l=$(".curSubFrmFixed"),n=(a=$("#createFixedButtonDiv").outerHeight(),l.scrollLeft()),r=l.offset(),i=n;$(".subformTabl thead td, .subformTabl tbody tr:first-child td").each((function(){$(this).css("min-width",Math.floor($(this).outerWidth()))})),!0===Crm.userDetails.RTL_ENABLED&&(i=-n),$(".leftFixedSubFrm").each((function(){var t=$(this).offset().top-e;$(this).find(".subFrmTablSerlNoOverlay").css({top:t}),$(this).find(".subFrmTablSerlNoheadOverlay").css({top:t})})),e>=r.top+l.outerHeight()-140?(l.find("thead").removeClass("pF").removeAttr("style"),l.find(".subFrmTablSerlNoheadOverlay").removeAttr("style").css("display","none"),l.removeAttr("style"),t.removeClass("curSubFrmFixed")):i>0?e>r.top-a?(!0===Crm.userDetails.RTL_ENABLED?l.find("thead").addClass("pF").css({right:n+30,top:a,"z-index":"3",background:"#fff"}):l.find("thead").addClass("pF").css({left:r.left-n,top:a,"z-index":"3",background:"#fff"}),l.find(".subFrmTablSerlNoOverlay").css({top:r.top-e}),l.css("padding-top",l.find("thead").outerHeight()),l.find(".subFrmTablSerlNoheadOverlay").css({top:a,display:"block"})):(l.find("thead").removeClass("pF").removeAttr("style"),l.find(".subFrmTablSerlNoOverlay").css({top:r.top-e}),l.find(".subFrmTablSerlNoheadOverlay").removeAttr("style").css("display","none"),l.css("padding-top","0")):e>r.top-a?(!0===Crm.userDetails.RTL_ENABLED?l.find("thead").addClass("pF").css({right:n+30,top:a,"z-index":"3",background:"#fff"}):l.find("thead").addClass("pF").css({left:30,top:a,"z-index":"3",background:"#fff"}),l.find(".subFrmTablSerlNoheadOverlay").css({top:0,display:"block"}),l.css("padding-top",l.find("thead").outerHeight())):(l.find("thead").removeClass("pF").removeAttr("style"),l.find(".subFrmTablSerlNoheadOverlay").removeAttr("style").css("display","none"),l.removeAttr("style"),t.removeClass("curSubFrmFixed"))}))},crmTemplate.subFrmLeftRightMask=function(){$(".subFrmSideMask").length<2&&$(".subFrmTablWrapper").append('<div class="subFrmSideMask subFrmSideMaskLeft"></div><div class="subFrmSideMask subFrmSideMaskRght"></div>');var e=$(".curSubFrmFixed").offset().left,t=$(".curSubFrmFixed").width(),a=e+t,l=$("#createFixedButtonDiv").outerHeight();$(".subFrmSideMask").css({top:l}),!0===Crm.userDetails.RTL_ENABLED?$(".subFrmSideMaskRght").css({right:t+30}):$(".subFrmSideMaskRght").css({left:a})},crmTemplate.createFieldRow=function(e,t,a,l,n){if(n||(n={module:t}),!("Tasks"===t&&"SENDNOTIFICATION"===l.colname||"Tasks"===t&&"Who Id"===l.label&&window[t].whoIdModulesArr&&0==window[t].whoIdModulesArr.length)){if("clone"===n.position&&"555"===l.uitype&&(l.defaultvalue.length=0),n.currentField=l,window[t]&&window[t].createEditJson&&(window[t].createEditJson.entityMapJson=window[t].createEditJson.entityMapJson||{},window[t].createEditJson.entityMapJson[l.colname]=l),"116"===l.uitype)return a;if("209"===l.uitype)return null;if("Events"===t&&l){if("123"==l.uitype&&"edit"==Events.currentStatus){if("RECURRING"===l.colname){var r=l.defaultvalue;Events.recVal=r,Events.isRecEvent=!1,r&&""!==r&&"null"!==r&&(Events.isRecEvent=!0)}return""}if("40"===l.uitype&&"setup"!==Events.currentStatus)return"";if("setup"===n.currentStatus&&"WhatId"==n.currentField.dlabel)return a}"Services"===t&&l.uitype===CrmField.UITYPES.LAYOUT_LOOKUP.toString()&&(l.lookupmodule="JobSheets"),"Appointments"===t&&n.currentSection&&"2"===n.currentSection.section_id&&"APPOINTMENTDATEANDTIME"!==l.colname&&"EXCHANGERATE"!==l.colname&&"CURRENCYISOCODE"!==l.colname&&"SMOWNERID"!==l.colname&&(l.defaultvalue=null),a=document.createElement("div");var i="";if(n.currentField.suffixIndex&&"Events"!=t&&"Tasks"!=t&&"Calls"!=t&&(i=n.currentField.suffixIndex+"_"),a.id=t+"_fldRow_"+i+n.currentField.colname,a.className=n.currentField.colname+" tabDivCreate","PRICINGDETAILS"===n.currentField.colname&&(a.className+=" noBorderStyle priceBookDetailUpdate"),-1!==[CrmField.UITYPES.LOOK_UP_ENTITY,CrmField.UITYPES.MULTI_MODULE_LOOK_UP_ENTITY,CrmField.UITYPES.SYSTEM_SINGLE_LOOK_UP_ENTITY,CrmField.UITYPES.OWNER,CrmField.UITYPES.USERLOOKUP,CrmField.UITYPES.PRODUCT_HANDLER,CrmField.UITYPES.MULTISELECT_LOOK_UP,CrmField.UITYPES.CURRENCY,CrmField.UITYPES.ACCOUNT_NAME_LOOKUP,CrmField.UITYPES.SALESORDER_ID,CrmField.UITYPES.CONTACT_ID,CrmField.UITYPES.VENDOR_NAME_LOOKUP,CrmField.UITYPES.CONTACT_LOOKUP,CrmField.UITYPES.POTENTIAL_ID,CrmField.UITYPES.PRODUCT_NAME_LOOKUP,CrmField.UITYPES.CAMPAIGN_NAME_LOOKUP,CrmField.UITYPES.QUOTE_ID,CrmField.UITYPES.CURRENCY_ROUND_OFF,CrmField.UITYPES.CURRENCY_ROUND_DOWN,CrmField.UITYPES.CURRENCY_ROUND_UP].indexOf(parseInt(l.uitype))&&"ROLEID"!==l.colname&&"PROFILEID"!=l.colname&&(Crm.userDetails.CLIENT_ACCOUNT&&Crm.userDetails.moduleVsCriteriaLookup?l.lookupmodule&&l.lookupmodule===Crm.userDetails.CLIENT_TYPE&&Crm.userDetails.moduleVsCriteriaLookup[t]&&-1!==Crm.userDetails.moduleVsCriteriaLookup[t].toString().indexOf(l.fieldid)&&(l.readonly="true",a.className+=" noLookupBg"):!Crm.userDetails.CLIENT_ACCOUNT||"133"!==l.uitype&&"13"!==l.uitype&&"4"!==l.uitype&&"7"!==l.uitype&&"444"!==l.uitype||l.lookupmodule&&l.lookupmodule===Crm.userDetails.CLIENT_TYPE&&(l.readonly="true",a.className+=" noLookupBg"),Crm.userDetails.CLIENT_ACCOUNT&&[8,55,221].contains(l.uitype)?(a.className+=" userLookupNewUI","create"===n.currentStatus&&(w=Crm.userDetails.CLIENT_OWNER_NAME,l.defaultvalue=w,l.defaultid=Crm.userDetails.CLIENT_OWNER_ID),"create"!==n.currentStatus&&(a.className+=" noLookupBg"),l.readonly="true"):l.uitype===CrmField.UITYPES.OWNER+""?(a.className+=" userLookupNewUI","create"===n.currentStatus||"Appointments"===n.module&&"edit"===n.currentStatus&&"Member"===l.label||(a.className+=" noLookupBg")):l.uitype==CrmField.UITYPES.PRODUCT_HANDLER?a.className+=" userLookupNewUI":l.uitype==CrmField.UITYPES.USERLOOKUP&&("processflow"==n.callFrm?a.className+=" userLookupWrapOldUI":a.className+=" userLookupNewUI"),a.className+=" lookupFieldCreate"),"301"!==l.uitype&&"123"!==l.uitype||(a.className+=" noBorderStyle"),"555"===l.uitype&&(a.className+=" noBorderStyleFileUp"),("true"==l.readonly||"8"===l.uitype&&!1===n.changeOwnerPermission)&&("556"!==l.uitype?a.className+=" readonlyF":a.className+=" imageReadonlyF"),"REPORTINGTOCONTACTID"===l.colname&&"create"===window[t].currentStatus&&(void 0===window[t].createEditJson.fillUpEntityname||"Accounts"!==window[t].createEditJson.relmodule)){a.className+=" noclick",$(a).on("mouseover",(function(){var e=Crm.moduleInfo.Accounts.translatedSingularLabel;zctt.showtt(I18n.getMsg("crm.contact.hierarchy.Specify_account_name",e))})),$(a).on("mouseout",(function(){zctt.hidett()}))}n.isBPExec&&"786"===l.uitype&&"CALLSTARTDATETIME"===l.colname&&""===l.defaultvalue&&(l.defaultvalue=new Date);var o=null;"66"!=l.uitype&&(o=crmTemplate.createFieldLabel(n)),n.isBPExec&&("50"===l.uitype?o=$("<div>",{class:"labelTabCreate pL5 newmandatory",id:"Crm_Products_PRODUCTDETAILS_label"}).text(I18n.getMsg("Product Details"))[0]:"51"===l.uitype&&(o=$("<div>",{class:"labelTabCreate pL5 newmandatory",id:"Crm_Products_PRICINGDETAILS_label"}).text(I18n.getMsg("Pricing Details"))[0]));var s=crmTemplate.createFieldContent(n);if(3!=l.uitype&&110!=l.uitype||(a.className="descFld "+a.className),11!=l.uitype&&37!=l.uitype&&32!=l.uitype&&27!=l.uitype&&25!=l.uitype&&35!=l.uitype&&21!=l.uitype&&1!=l.uitype&&127!=l.uitype&&33!=l.uitype&&36!=l.uitype&&22!=l.uitype||(a.className="textFld "+a.className,11!=l.uitype||"Events"!==t||n.isBPExec||(a.className="fullWth "+a.className)),2==l.uitype&&(a.className="sltFld "+a.className),CScriptLib&&"Tasks"!==t&&"Events"!==t){var d=$(s);2==l.uitype||39==l.uitype||26==l.uitype?d.children().children("select").attr("onchange","crmTemplate.onChange('"+n.currentField.sysRefName+"','"+n.currentField.fieldid+"','"+l.uitype+"');"):8==l.uitype?d.children().children("crm-user-wrapper").attr("onchange","crmTemplate.onChange('"+n.currentField.sysRefName+"','"+n.currentField.fieldid+"','"+l.uitype+"');"):3==l.uitype||110==l.uitype?d.children("textarea").attr("onchange","crmTemplate.onChange('"+n.currentField.sysRefName+"','"+n.currentField.fieldid+"','"+l.uitype+"');"):["133","4","9","13"].includes(l.uitype)?d.children("input").attr("onblur","crmTemplate.onChange('"+n.currentField.sysRefName+"','"+n.currentField.fieldid+"','"+l.uitype+"');"):"445"!==l.uitype&&"444"!==l.uitype&&"30"!==l.uitype&&d.children("input").attr("onchange","crmTemplate.onChange('"+n.currentField.sysRefName+"','"+n.currentField.fieldid+"','"+l.uitype+"');")}if(l.uitype==CrmField.UITYPES.SERVICE_DURATION&&$(s).find("#Crm_Services_SERVICEDURATION").attr("style","display:none"),"Appointments"===t&&l.uitype==CrmField.UITYPES.SERVICE_DURATION&&($(s).find("#serviceDurationDiv").attr("style","display:none"),$(s).find("#Crm_Appointments_APPOINTMENTDURATION").attr({class:"textField serviceDurationELe cP",disabled:"disabled"})),"Appointments"===t&&"APPOINTMENTLOCATION"==l.colname&&$(s).find("#Crm_Appointments_APPOINTMENTLOCATION").attr("onchange","CSU.onAppointmentLocationChange(this)"),"Appointments"===t&&"APPOINTMENTADDRESS"==l.colname)(d=$(s)).children("input").attr({onfocus:"CSU.setAppointmentLocation();",onblur:"CSU.hideAppointmentLocationPop();"}),d.attr("onclick","CSU.setAppointmentLocation();"),d.find("input[type='text']").attr({autocomplete:"off",placeholder:""}),s.appendChild($("<div class='evtLocationDD' id='locationDataDiv' data-close='true'><ul class='m0 p0'></ul></div>")[0]);if("Events"==t&&"setup"==Events.currentStatus){if(o){var u=$("<td>"),c=$("<div>",{class:"lableCls tdW130"});c.html($(o).html()),"true"==l.mandate?c.append(" <sup class='red'>*</sup>"):c.append(" <sup class='red'></sup>"),u.append(c),a.appendChild(u[0])}if(s){var m=$("<td>"),p=$("<div>");11!=l.uitype&&p.attr({class:"tdW210"}),p.html($(s).html()),m.append(p),a.appendChild(m[0])}var f=$("<td style='padding:0px'>");if(-1==["Subject","Event Title","Start DateTime","End DateTime","Event Owner","All day","Recurring Activity","Participants","Event Status","Remind At","EventStatus"].indexOf(l.label)){var v=$("<div>",{class:"icnSetting tdW28",style:"visibility: hidden; position: relative",issysfld:l.isSystemMandate,mandate:l.mandate});v.mouseenter((function(){showRelOptionsInCreateView(this,l.uitype)})).mouseleave((function(){$(".eventActionsMenu").hide()}));var h=$("<div>",{class:"eventActionsMenu",style:"position:fixed;top:26px;right:0px;padding:0px;display: none ;"});v.append(h),f.append(v)}else f.append($("<div>",{class:"tdW28",style:"height:28px"}));a.appendChild(f[0]);var g="layoutCreate-Drag";-1!=["Event Title","Subject","Venue","All day","Start DateTime","End DateTime"].indexOf(l.label)?g="layoutCreate-Drag-unmove":"786"!==l.uitype&&"36"!==l.uitype&&$(a).find("input").css({width:"85%"}),11==l.uitype&&$(a).find("input").css("z-index","20");var y=$("<li>"),b="fieldId_"+l.fieldid;y.attr({class:g,id:b});var C=$("<table>",{width:"100%",cellpadding:"0",cellspacing:"0",class:"setupDrag"});y.append(C),"LOCATION"===l.colName&&y.css({"margin-top":"9px"});var T=$("<tbody>");C.append(T),T.append(a),a=y[0]}else{if(o&&a.appendChild(o),"true"===n.currentField.readonly&&"556"!==l.uitype){var E="208"!==l.uitype?"210"===l.uitype&&l.LiteConstant&&"true"===l.LiteConstant?I18n.getMsg("crm.liteuser.profile.notchange"):I18n.getMsg("crm.lable.read.only"):I18n.getMsg("crm.field.layout.edit.change.restriction");n.currentField.restricted&&n.currentField.reasonrestrict&&(E=n.currentField.reasonrestrict),$(a).on("mouseover",(function(){$(event.target).hasClass("tabDivCreate")||zctt.showtt(E)})),$(a).on("mouseout",(function(e){$("#tooltip-zc").hide(),$(event.target).hasClass("tabDivCreate")||zctt.hidett()}))}s&&a.appendChild(s),a.appendChild($("<div class='clearB'></div>")[0]),"Events"===t&&"LOCATION"==l.colname&&s.appendChild($("<div class='evtLocationDD' id='locationDataDiv' data-close='true'><ul class='m0 p0'></ul></div>")[0])}if("Events"==t&&(a=window[t].createFieldRow(e,a,l)),"Events"===t&&("relatedlist_new"==Events.evtCreateFrom||"relatedlist_meetnow"==Events.evtCreateFrom))$("#relmodule").val();if(4==l.uitype&&"CONTACTID"==l.colname&&"Events"===t){var _=l.lookupmodule,I=$(".commonRightPanel").length?$("#id").val():Events.createEditJson.currentField.defaultid,k=!1,w=l.defaultvalue?$ESAPI.encoder().encodeForHTMLAttribute(l.defaultvalue):"";"relatedlist_new"!=Events.evtCreateFrom&&"relatedlist_meetnow"!=Events.evtCreateFrom||(I=$("#entityId").val(),w=$ESAPI.encoder().encodeForHTML($("#entityName").val()),(_=$("#relmodule").val())&&"Contacts"!=_&&"Leads"!=_&&(I=$("#contId").val())),n.invCnt>0&&(k=_&&-1!=_.indexOf("Leads")?Events.createEditJson.inviteeJson.l[I]:Events.createEditJson.inviteeJson.c[I]);I18n.getMsg("crm.event.add.contact",I);k&&!Events.createEditJson.isCalendarSchedule?a.appendChild($("<div id='addpartCheck' data-zcqa='addpartCheck' style='padding:15px 0 5px 170px;border-bottom: 1px solid #efefef;'><label class='newCustomchkbox-md mT3'><input id='addpartCheckbox' recId='"+I+"' type='checkbox' value='' checked onclick='Events.addRelatedParticipant($(this),\""+I+'","'+_+"\")'/><span class='chkbxIcon'></span><span id='addpartCheckboxTitle' class='f12 color_6 mL5 beforeAdd'> Add "+w+" as a participant</span></label></div>")[0]):(I&&"null"!=I||"relatedlist_new"==Events.evtCreateFrom||"relatedlist_meetnow"==Events.evtCreateFrom)&&!Events.createEditJson.isCalendarSchedule?a.appendChild($("<div id='addpartCheck' data-zcqa='addpartCheck' style='padding:15px 0 5px 170px;border-bottom: 1px solid #efefef;'><label class='newCustomchkbox-md mT3'><input id='addpartCheckbox' recId='"+I+"' type='checkbox' value='' onclick='Events.addRelatedParticipant($(this),\""+I+'","'+_+"\")'/><span class='chkbxIcon'></span><span id='addpartCheckboxTitle' class='f12 color_6 mL5 beforeAdd'> Add "+w+" as a participant</span></label></div>")[0]):Events.createEditJson.isCalendarSchedule||a.appendChild($("<div id='addpartCheck' data-zcqa='addpartCheck' style='display:none;padding:15px 0 5px 170px;border-bottom: 1px solid #efefef;'><label class='newCustomchkbox-md mT3'><input id='addpartCheckbox' type='checkbox' value=''/><span class='chkbxIcon'></span><span id='addpartCheckboxTitle' class='f12 color_6 mL5 beforeAdd'></span></label></div>")[0])}if("LOCATION"==l.colname&&"Events"===t&&"processflow"!=n.callFrm){var R=Crm.userDetails.LICENSE_TYPE,L={};if(null!=n.entityMapJson&&null!=n.meetingConfZuid&&(Events.locationValue=n.entityMapJson.LOCATION.defaultvalue,L=Object.keys(n.meetingConfZuid).length>0?JSON.parse(Events.constructMeetingToolSelectBox(n.meetingConfZuid)):{}),L&&L.length>0&&-1!=["R","E","X","S","Y","P","A","C","Z","U","D"].indexOf(R)){var D={};if(D.meetingPref=L,D.currentStatus=Events.currentStatus,D.toolName=n.entityMapJson.LOCATION.meetingToolName,D.include_desc=I18n.getMsg("crm.event.meeting.onlinemeeting"),"clone"===Events.currentStatus||"create"===Events.currentStatus||"edit"===Events.currentStatus){var S=Handlebars.templates.crmEventMeeting(D);if((M=document.createDocumentFragment()).appendChild(a),M.appendChild($(S)[0]),"clone"===Events.currentStatus||"edit"===Events.currentStatus&&n.entityMapJson.LOCATION.meetingToolName&&""!==n.entityMapJson.LOCATION.meetingToolName){var O=M.firstElementChild;if(O.classList.add("disable-events"),"edit"!==Events.currentStatus||D.toolName){var F=M.getElementById("meetingInclude");$(F).attr("checked",!0),O.getElementsByTagName("input")[0].value=I18n.getMsg("crm.event.meeting.online.poweredby",Events.displayToolName[D.toolName]),Events.withMeetingTool=!0,Events.meetingToolName=n.entityMapJson.LOCATION.meetingToolName}else $("#CrmEventMeetingInteg").hide(),O.getElementsByTagName("input")[0].value="",Events.withMeetingTool=!1}a=M,thirdPartyUtils.bindSelect2("#Crm_Events_MeetingSolutions_select"),Events.showonboardingChanges()}}}if("Events"===t&&(Events.totalReqSent=0),"SUBJECT"==l.colname&&"Events"===t){var M;(M=document.createDocumentFragment()).append(a);S=Events.loadHtmlForMeetingLength(Events.meetingToolName);M.append(S[0]),a=M}var A="#Crm_"+t+"_"+i+l.colname+"_label",P="#"+t+"_fldRow_"+l.colname;if(8==l.uitype?"true"==l.readonly&&l.readonly?$(a).find('.labelValCreate div[data-uitype="8"]').addClass("ownerReadonlyProperty"):$(a).on("click",(function(){var e=$(event.target);if(!e.hasClass("tabDivCreate")&&!e.hasClass("labelTabCreate")&&$(this).find("[name='ownerNameLookup']").find(event.srcElement)==[]){var a="Crm_"+t+"_"+i+l.colname;Search.showLookup(a),sE()}})):$(a).find("select").length?$(a).hasClass("readonlyF")||$(a).on("click",(function(e){var a=$(event.target);if(!a.hasClass("tabDivCreate")&&!a.hasClass("labelTabCreate")){var n=renderingUtils.getTargetElem(e);if($(n).is("input")||$(n).is("textarea"))return;var r=l.suffixIndex&&"Tasks"!=t&&"Calls"!=t&&"Events"!=t?NaN+l.suffixIndex:"",i="#Crm_"+t+r+"_"+l.colname;"FIRSTNAME"===l.colname&&(i+="_SALUTATION"),"Appointments"===t&&"SEID"===l.colname&&(i+="_RELATEDTO");var o=$(renderingUtils.getTargetElem(e));if($(o).parent("[class^=chosen]").length||$(o).parent("[class^=select2]").length||$(o).filter("[class^=chosen]").length||$(o).filter("[class^=select2]").length)return;if(0==$(A).find("select").length&&0==$(P).find("select").length&&($("body").trigger("click"),sE()),"SELECT"===$(i).prop("tagName")&&!$(i).prop("disabled")&&($(i).select2("open"),"Calls"==t&&isNewCallView)){var s=$(i).closest(".labelValCreate");s.length&&($(".labelValCreate").removeClass("focusEleField"),s.addClass("focusEleField"))}"Calls"!=t||!isNewCallView||"SEID"!==l.colname&&"CONTACTID"!=l.colname||$(i).focus()}})):$(a).on("click",(function(e){var a=$(e.target);if(!(a[0].id&&"lookupFieldAlertDiv"===a[0].id||a.hasClass("tabDivCreate")||a.hasClass("labelTabCreate"))){var n=l.suffixIndex&&"Tasks"!=t&&"Calls"!=t&&"Events"!=t?"#Crm_"+t+"_"+l.suffixIndex+"_"+l.colname:"#Crm_"+t+"_"+l.colname,r=e.target.tagName;/\b(5|4|6|7|9|10|12|13|15|132|133|135|136)\b/.test(l.uitype)&&"IMG"!==r&&"INPUT"!==r?($(n).focus(),$(n).autocomplete("search")):"81"==l.uitype?setTimeout((function(){$(n).closest(".labelValCreate").find(".customDate .customDatefield:last-child").find("input").focus()}),100):"33"==l.uitype&&Crm.userDetails.isPhoneNoNewView?a.closest(".select2").length<=0&&$(n).focus():$(n).focus()}})),"REPORTINGTOCONTACTID"===l.colname&&"true"!=l.readonly&&"create"===window[t].currentStatus&&void 0===window[t].createEditJson.fillUpEntityname&&($(a).find("input").prop("disabled",!0),$(a).find("input").autocomplete("disable")),$(a).find(".newCustSel").each((function(){if(0==$(this).find(".newCustSelVal").length){var e=$(this).find("select option:selected").text();$(this).append("<span class='newCustSelVal'></span>"),$(this).children(".newCustSelVal").html("<span class='pR7 crm-font-regular'>"+e+"</span> <strong class='mT7 dIB tb_downarrow'></strong>"),$(this).change((function(){var e=$(this).find("select option:selected").text();$(this).children(".newCustSelVal").html("<span class='pR7 crm-font-regular'>"+e+"</span> <strong class='mT7 dIB tb_downarrow'></strong>")}))}})),(445===l.uitype||"445"===l.uitype)&&"Users"===l.lookupmodule||444===l.uitype||"444"===l.uitype){var x=l.attrObj.id,N=$(s).find("#"+x),V=N.parent();if(l.clonedfrom&&(N.attr("data-clonedfrom",l.clonedfrom),"CALLMXNCLONESCHEDULER"===N.data("selectedid"))){V.addClass("mxnclonedisabled"),V.find("input").css("opacity","0.4"),V.find("img").css("opacity","0.4"),$(a).append($("<div/>",{class:$(o).attr("class"),id:"templabel_"+x}));var U="<div id='mxnCloneMsgDiv'><div class='mB10 mL5'><span class='dIB mR5 vam crmBlueFilledCaution'></span> <span class='f16 proximas vam dIB black'>"+I18n.getMsg("crm.field.mxn.clone.copyvalues")+"</span></div><div class='f14 col222 mL25'>";""===N.val()?U+=I18n.getMsg("crm.field.mxn.clone.limitexceed.record.child.msg",["100",Crm.moduleInfo[l.lookupmodule].translatedPluralLabel.toLowerCase(),Crm.moduleInfo[l.lookupmodule].translatedPluralLabel.toLowerCase()]):U+=I18n.getMsg("crm.field.mxn.clone.limitexceed.record.msg",["100",Crm.moduleInfo[l.lookupmodule].translatedPluralLabel.toLowerCase(),Crm.moduleInfo[l.lookupmodule].translatedPluralLabel.toLowerCase()]),U=U+"<br>"+I18n.getMsg("crm.field.mxn.clone.limitexceed.confirm.msg")+"<div class='mT15' style = 'display: flex; align-items: center; justify-content: flex-end'><span class='f13 col222 cP' data-zcqa='removemxnclonevalues' style='    border-bottom: 1px solid #bdc0c3;margin-left:10px;' onclick='crmTemplate.removeMxNCloneValues(\""+x+"\")' style='font-size:12px' class='smalledit'>"+I18n.getMsg("crm.field.mxn.clone.button.removevalues")+"</span><input type = 'button' data-zcqa='setmxnclonevalues' value ='"+I18n.getMsg("crm.yes.proceed")+"' class='primarybtn bt-smallprimarybtn' onclick = 'crmTemplate.setMxNCloneValues(\""+x+'","'+Crm.moduleInfo[l.lookupmodule].pluralLabel.toLowerCase()+"\")' style='    cursor: pointer;background-color:#42a2eb;    border: 1px solid #42a2eb;    border-radius: 5px;padding: 5px 10px;color:white; margin-left:10px'/></div></div></div>",$(a).append($("<div/>",{html:U,id:"temp_"+x,style:"margin-top: 2px;color: #555;vertical-align: bottom;display: inline-block;position: relative;padding: 12px;top: 1px;transition: initial;border-radius: 5px;width: 55% !important;background-color:#f4f5f6;    border: 1px solid #f4f5f6 !important;font-size:12px"}))}}return"Users"===t&&"ROLEID"===l.colname&&a.classList.contains("readonlyF")&&$(a).find(".textfield").addClass("op3"),a}},crmTemplate.createFieldLabel=function(e,t,a){var l=e.currentField,n=e.module,r=l.label;if(e.modAndView="Calls"==n?isNewCallView?"Calls_NEW":"Calls_OLD":n,(!l.colname||crmConstants.defaultHiddenFields[l.colname]||a&&"116"===l.uitype&&"setup"!==window[n].currentStatus||"207"===l.uitype&&""==l.defaultvalue)&&(l.colname||(l={}),l.emptyColumn=!0),4==l.uitype&&/Calls|Events|Tasks/.test(n)&&!e.isBPExec){if("What Id"==r){l.whatIdVal=[];var i=window[n].whatIdModulesArr;l.defaultid&&"null"!=l.defaultid&&!i.contains(l.lookupmodule)&&i.push(l.lookupmodule);for(var o=0;o<i.length;o++)if(crmTab.tabList.contains(i[o])||i[o]==l.lookupmodule&&l.defaultid){var s=moduleRecordMapping[i[o]]?moduleRecordMapping[i[o]].singular_label:crmConstants.defaultWhatId[n][i[o]],d={html:I18n.getMsg(s),value:i[o]};0!==o||l.defaultid?d.value==l.lookupmodule&&(d.defaultVal="true"):(d.defaultVal="true",l.lookupmodule=i[o]),l.whatIdVal.push(d)}}if("Who Id"==r){l.whoIdVal=[],"Tasks"==n?(crmConstants.defaultWhoId[n]=[],null!=window[n].whoIdModulesArr&&(window[n].whoIdModulesArr.includes("Leads")&&(crmConstants.defaultWhoId[n].Leads="Leads"),window[n].whoIdModulesArr.includes("Contacts")&&(crmConstants.defaultWhoId[n].Contacts="Contacts"))):(moduleRecordMapping.Leads.viewable&&moduleRecordMapping.Leads.visible&&(crmConstants.defaultWhoId[n].Leads="Leads"),moduleRecordMapping.Contacts.visible&&moduleRecordMapping.Contacts.visible&&(crmConstants.defaultWhoId[n].Contacts="Contacts"));for(i=objectUtils.getKeys(crmConstants.defaultWhoId[n]),o=0;o<i.length;o++){d={html:s=moduleRecordMapping[i[o]]?1==moduleRecordMapping[i[o]].isCustomized?moduleRecordMapping[i[o]].singular_label:I18n.getMsg(moduleRecordMapping[i[o]].singular_label):I18n.getMsg(crmConstants.defaultWhoId[n][i[o]]),value:i[o]};0===o&&(d.defaultVal="true"),l.whoIdVal.push(d)}}}if(!/\b(11|50|51)\b/.test(l.uitype)||e.isBPExec||"Appointments"==n){crmTemplate.setFieldData(e,t);var u=$(Handlebars.templates.crmCreateFieldLabel(e));return 4==l.uitype&&"Tasks"===n&&e.isBPExec&&u.text(l.displaylabel),window[n].createFieldLabel(l,u),u[0]}},crmTemplate.setFieldData=function(e,t){if("Services"==e.module&&100==e.currentField.uitype&&"AVAILABLE_DAYS"==e.currentField.colname&&null!=Crm.businessJSON){if(Crm.businessJSON.business_days)(x=Crm.businessJSON.business_days.length)>0&&x<7&&(e.currentField.val=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].filter((function(e){return Crm.businessJSON.business_days.includes(e)})))}if(e.currentField.uitype==CrmField.UITYPES.SERVICE_TIMING){""!=e.currentField.defaultvalue&&e.currentField.defaultvalue!=I18n.getMsg("crm.service.servicetiming.business")&&"Same as business time"!=e.currentField.defaultvalue&&e.currentField.defaultvalue!=I18n.getMsg("crm.service.servicetiming.custom")?(e.currentField.custom_time=e.currentField.defaultvalue,e.currentField.defaultvalue=I18n.getMsg("crm.service.servicetiming.custom")):e.currentField.defaultvalue!=I18n.getMsg("crm.service.servicetiming.custom")&&(e.currentField.defaultvalue=I18n.getMsg("crm.service.servicetiming.business"));var a=[{systemvalue:"Same as business time",uservalue:I18n.getMsg("crm.service.servicetiming.business")},{systemvalue:"Custom time",uservalue:I18n.getMsg("crm.service.servicetiming.custom")}];e.currentField.picklistmap=a;var l=[I18n.getMsg("crm.service.servicetiming.business"),I18n.getMsg("crm.service.servicetiming.custom")];e.currentField.val=l}e.currentField.uitype==CrmField.UITYPES.MULTI_DATE_SELECT&&""!=e.currentField.defaultvalue&&(e.currentField.arrDate=e.currentField.defaultvalue),e.currentField.uitype==CrmField.UITYPES.LAYOUT_LOOKUP&&(e.currentField.type="Lookup");var n=e.currentField;"EVENTSTARTDATETIME"==n.colname&&(n.colname="STARTDATETIME"),"EVENTENDDATETIME"==n.colname&&(n.colname="ENDDATETIME");var r=n.type,o=e.module,s=n.label,d=window[o]&&"setup"===window[o].currentStatus?"_"+window[o].currentStatus:"";""===d&&n.suffixIndex&&"Events"!=o&&"Tasks"!=o&&"Calls"!=o&&(d="_"+n.suffixIndex);var u="Crm_"+o+d+"_"+n.colname,c=!1;""!=t&&null!=t&&"null"!=t?(c=!0,u="Crm_"+o+"_"+t+d+"_"+n.colname,Crm.fieldsObj[o+"_"+t]?Crm.fieldsObj[o+"_"+t].push(u):Crm.fieldsObj[o+"_"+t]=[u],e.elementSufixId&&(u+=e.elementSufixId)):n.colname&&o in Crm.fieldsObj&&(Crm.fieldsObj[o].push(u),"Calls"==o&&isNewCallView&&(Calls.fieldSet||(Calls.fieldSet=new Set),Calls.fieldSet.add(u)));var m=parseInt(n.uitype),p=Crm.getModuleRenderingValue(o,"field",m,"*");p||(p={}),p.style||(p.style={}),p.id=u,p.tabIndex=n.tabIndex,"Call Duration"==s&&(p.style="width:'';");var f=s;s="true"==n.customfield?n.colname:s;var v=n.defaultvalue?n.defaultvalue:"";301==m&&"true"==trimBoth(v)&&(m=300),"COUNTRY"!=n.colname&&"SHIPPINGCOUNTRY"!=n.colname&&"MAILINGCOUNTRY"!=n.colname&&"BILLINGCOUNTRY"!=n.colname&&"OTHERCOUNTRY"!=n.colname||(n.kpid="countryAutoSuggest",n.params='{"multiSel":"false"}'),"Services"===e.module&&"setup"===e.currentStatus&&"SERVICEDURATION"===n.colname&&(p.style="display:none;");var h={"data-sysRefName":n.sysRefName,"cscript-tag":n.sysRefName,"data-def-mandate":n.mandate,"data-mandate":n.mandate,"data-content-type":r,"data-uitype":n.uitype,"data-colname":n.colname,"data-name":s,"data-maxlength":n.maxlength,"data-customfield":n.customfield,"data-lookup-module":n.lookupmodule,"data-decimal-length":n.decimalLength,"data-displaylabel":n.displaylabel,"data-old-value":v,"data-dynamic-fields":n.dynamicFields,"data-label":n.label,"data-readonly":n.readonly,"data-selectedRadio":n.selectedRadio,"data-frequency":n.frequency,"data-selDays":n.selDays,"data-monthData1":n.monthData1,"data-monthData2":n.monthData2,"data-monthData3":n.monthData3,"data-startdate":n.startdate,"data-enddate":n.enddate,"data-parentcolname":n.parentcolname,"data-kpid":n.kpid,"data-params":n.params,"data-linkingmodule":n.linkingmodule,"data-selectedid":n.selectedid,"data-fieldid":n.fieldid,"data-formulaType":n.formulaType,"data-picklistmap":n.picklistmap};if(h["data-zcqa"]=c&&void 0!==n.rowNum?"Crm_"+n.subformsectionlabel+"_"+n.label+"_"+n.rowNum:f,555==m){if(h["data-sys-name"]=n.systemName,null==n.picklistmap&&"false"==isSandboxAcc){var g=[{systemvalue:"Upload File",uservalue:I18n.getMsg("crm.attach.upload.file")},{systemvalue:"Documents",uservalue:moduleRecordMapping.Documents.singular_label},{systemvalue:"Zoho Docs",uservalue:I18n.getMsg("crm.label.addons.zdocs")},{systemvalue:"Google Drive",uservalue:I18n.getMsg("crm.label.addons.gdocs")}];n.picklistmap=g}}else 2!==m&&26!==m||!n.colorcode_enabled||(h["data-colorcode_enabled"]=n.colorcode_enabled,h["data-colorcode"]=n.color_code);n.dependent_lookup_fieldid&&(h["data-refered_from_fieldid"]="lookup_"+n.dependent_lookup_fieldid+"_"+n.refered_from_fieldid),n.subformdisplaylabel&&(h["data-subformdisplaylabel"]=n.subformdisplaylabel),n.subformsectionlabel&&(h["data-subformsectionlabel"]=n.subformsectionlabel),void 0!==n.lineitemProdCode&&(h["data-lineitemProdCode"]=n.lineitemProdCode);if(n.restricted&&(h["data-restricted"]=n.restricted),"EMAILOPTOUT"===n.colname){var y=$("#emailOptOutInfo").attr("data-param");h["data-param"]=y||n.unsubInfo}36!==m&&143!==m&&144!==m&&145!==m&&(116!=m&&117!=m||"currency"!=n.formulaType)||Crm.currencyFields[o].push(u);var b="class";switch(m){case 8:case 55:case 221:Crm.userDetails.CLIENT_ACCOUNT&&("create"===e.currentStatus&&(v=Crm.userDetails.CLIENT_OWNER_NAME,n.defaultvalue=v,n.defaultid=Crm.userDetails.CLIENT_OWNER_ID),n.readonly="true"),(!Crm.userDetails.LITE.IS_LITE_USER||8!==m||"create"!==e.currentStatus)&&(55!==m&&221!==m||n.defaultvalue&&""!==n.defaultvalue)||(v=I18n.getMsg("None"),n.defaultvalue=v,n.defaultid=null),221==m&&n.popup&&(h["data-bodyAppend"]="yes"),55!==m&&""===v&&(v=Crm.userDetails.DISPLAY_NAME,n.defaultvalue=v,n.defaultid=Crm.userDetails.USER_ID),55!==m&&221!==m&&"Appointments"!=o&&(n.readonly="true"!=n.readonly?!e.changeOwnerPermission+"":n.readonly),n.personalAccount=Crm.userDetails.PERSONAL_ACCOUNT,(Crm.userDetails&&Crm.userDetails.PERSONAL_ACCOUNT||"true"===n.readonly)&&(p[b]="","Events"!==o&&(p.style="width:97%")),h["data-id"]=n.defaultid,h["data-oldid"]=n.defaultid,p.title=v,h["zcqa-dropdown"]=h["data-zcqa"],h["zcqa-lookup"]=h["data-zcqa"]+" lookup";break;case 25:case 24:case 202:case 32:case 36:case 37:case 35:case 1:case 21:case 38:case 33:case 34:case 4:case 6:case 7:case 9:case 5:case 10:case 12:case 15:case 52:case 786:case 127:case 99:case 13:case 133:case CrmField.UITYPES.SYSTEM_SINGLE_LOOK_UP_ENTITY:case CrmField.UITYPES.LAYOUT_LOOKUP:case 116:case 117:case 22:case 11:case 14:case 333:case 19:case 62:case 16:case 444:if(133===m&&"PROFILEID"===n.colname){"true"===n.readonly&&(p.disabled=!0,p[b]="searchFormatText");break}if(Crm.userDetails.CLIENT_ACCOUNT&&Crm.userDetails.moduleVsCriteriaLookup&&"edit"!==e.currentStatus?n.lookupmodule&&n.lookupmodule===Crm.userDetails.CLIENT_TYPE&&Crm.userDetails.moduleVsCriteriaLookup[o]&&-1!==Crm.userDetails.moduleVsCriteriaLookup[o].toString().indexOf(n.fieldid)&&((444!==m||444===m&&(v&&-1===!v.indexOf(Crm.userDetails.DISPLAY_NAME)||!v))&&(v=Crm.userDetails.DISPLAY_NAME,n.defaultid=Crm.userDetails.CLIENT_ID.toString()),n.defaultvalue=v,n.readonly="true",h["data-readonly"]="true"):!Crm.userDetails.CLIENT_ACCOUNT||133!=m&&13!=m&&4!=m&&7!=m||"edit"===e.currentStatus||n.lookupmodule&&n.lookupmodule===Crm.userDetails.CLIENT_TYPE&&(v=Crm.userDetails.DISPLAY_NAME,n.defaultvalue=v,n.defaultid=Crm.userDetails.CLIENT_ID.toString(),n.readonly="true",h["data-readonly"]="true"),4==m&&(h["data-oldid"]=n.defaultid),116==m){p.readonly=!0;var C=p.id;c&&"TOTAL"===n.colname&&(p.expression=n.expression),t&&C.split("_").length<5&&(C+="_1"),(!t||t&&5==C.split("_").length&&"1"==C.split("_")[4])&&window[o].formulaObj.formulaArr.push(n.expression),window[o].formulaObj.formulaVsFormulaField[n.expression]||(window[o].formulaObj.formulaVsFormulaField[n.expression]=[]),window[o].formulaObj.formulaVsFormulaField[n.expression].push(C),"datetime"==n.formulaType&&""!==n.defaultvalue?n.defaultvalue=Utils.getDateTimeInUserFormat(new Date(n.defaultvalue),!0,"false"):"date"==n.formulaType&&""!==n.defaultvalue&&(n.defaultvalue=Utils.getDateInUserDatePattern(new Date(n.defaultvalue),!1))}if(117==m){p.readonly=!0;C=p.id;t&&C.split("_").length<5&&(C+="_1"),window[o].formulaObj.aggrArr.push(n.expression),window[o].formulaObj.aggrVsAggrField[n.expression]||(window[o].formulaObj.aggrVsAggrField[n.expression]=[]),window[o].formulaObj.aggrVsAggrField[n.expression].push(C)}if(/\b(4|6|7|9|10|12|13|15|132|135|136)\b/.test(m)?("Tasks"!==o&&"Calls"!==o&&"Events"!==o&&(p[b]="searchFormatText textField nwrp tOE",p.title=n.defaultvalue),p[b]="textField"):"true"===n.readonly&&(p.readonly=!0,p.disabled=!0),62==m&&"Tasks"===o&&"SUBJECT"===n.colname&&(p.autocomplete="off"),11===m&&"SUBJECT"===n.colname&&"Events"===o&&""===n.defaultvalue&&("meetings"===Crm.getModuleDisplayName()?n.defaultvalue=I18n.getMsg("crm.new.meeting"):n.defaultvalue=I18n.getMsg("crm.events.new",[Events.getModuleName(!0,!0,!0)])),1===m&&"Call Duration"==s&&(p.id+="_Mins",p.size=2,n.defaultvalue?3==n.defaultvalue.split(":").length?(n.minsVal=""+(60*+n.defaultvalue.split(":")[0]+ +n.defaultvalue.split(":")[1]),n.secVal=""+n.defaultvalue.split(":")[2]):(n.minsVal=""+n.defaultvalue.split(":")[0],n.secVal=""+n.defaultvalue.split(":")[1]):"processflow"==e.callFrm?(n.secVal="--",n.minsVal="--"):(n.secVal="00",n.minsVal="00")),24==m||202==m||786===m||14===m||333===m){if("REMINDAT"==n.colname)h["data-alert-type"]=n.alertType,h["data-repeat-type"]=n.repeatType,h["data-reminder-date"]=n.reminderDate,h["data-remind-Before"]=n.remindBefore,p.class="element";else if(n.defaultvalue){var T=Utils.getDateInUserDatePattern(new Date(n.defaultvalue));p.value=T,h.oldValue=new Date(n.defaultvalue),h["data-date-obj"]=new Date(n.defaultvalue)}if(p.placeholder=Crm.userDetails.DATE_PATTERN.toLowerCase(),(786==m||14===m||333===m)&&"REMINDAT"!=n.colname){var E,_=!1;if("HH:mm"===Crm.userDetails.TIME_FORMAT&&(_=!0),""==v){var I=new Date;E="Events"===o||"Appointments"==o?Events.getRoundedDateTime(I):I,"CALLSTARTDATETIME"!==n.colname&&I.setMinutes(0),"Native__Backstage__Extn__Event_Start_Date"===n.sysRefName?E.setHours(E.getHours()+1):"Native__Backstage__Extn__Event_End_Date"===n.sysRefName&&E.setHours(E.getHours()+2),"Native__Webinar__Extn__Webinar_Schedule"===n.sysRefName&&E.setHours(E.getHours()+1)}else E=new Date(v);""==v&&"Crm_Events_ENDDATETIME"==u&&(E=new Date(E.valueOf()+60*Crm.calPreferences.EVENTDURATION*1e3)),"Events"!==o&&"Appointments"!=o||"setup"===Events.currentStatus||"false"!==n.customfield||14!==m&&333!==m||(p.value=crmCalendar.convertToUserDatePattern(E.getDate()+" "+E.getMonth()+" "+E.getFullYear())),h["data-date-obj"]=E;var k="",w="40px";_?(k=Utils.formatTimeVal(E.getHours())+":"+Utils.formatTimeVal(E.getMinutes()),"setup"!==e.currentStatus&&(w="5rem")):("setup"!==e.currentStatus&&(w="7rem"),k=(v=Utils.convertTo12HoursFormatTimeObj(E)).hrs+":"+v.mins+" "+I18n.getMsg(v.meridiem.toUpperCase())),n.defaultvalue=p.value?p.value:"","setup"!==Events.currentStatus&&("JobSheets"!==e.module&&"Appointments"!==e.module||"setup"!==e.currentStatus)||(k=""),n.timeVal=k,n.timeAttrObj=objectUtils.cloneObject(p),n.timeAttrObj.value=k,n.timeAttrObj.style="width:"+w+";margin-left:10px",n.timeAttrObj.placeholder=Crm.userDetails.TIME_FORMAT,n.timeAttrObj.id+="_TimeOption",(c||n.isaggrfield)&&(n.timeAttrObj.class=n.timeAttrObj.class+" "+n.timeAttrObj.id),n.timeDataObj=objectUtils.cloneObject(h)}}else 36==m&&n.defaultvalue?p.value=parseFloat(n.defaultvalue):/\b(4|5|6|7|9|10|12|13|15|132|133|135|136)\b/.test(m)&&"ROLEID"!==n.colname&&"PROFILEID"!=n.colname&&(h["data-id"]=n.defaultid,c&&("PRODUCTID"===n.colname?(p[b]="textField productIdFld",void 0!==n.prdDetails&&(p.prdDetails=JSON.stringify(n.prdDetails))):"BOOKID"===n.colname&&void 0!==n.pricingDetails&&(p.pricingDetails=JSON.stringify(n.pricingDetails))));break;case 17:p.name=n.label;break;case 1234:n.val=window[o].eventRemindAtOptions,"Calls"===o?n.val=[{value:"0",html:I18n.getMsg("None")},{value:"5 mins",html:I18n.getMsg("crm.event.remind.mins",[5])},{value:"10 mins",html:I18n.getMsg("crm.event.remind.mins",[10])},{value:"15 mins",html:I18n.getMsg("crm.event.remind.mins",[15])},{value:"30 mins",html:I18n.getMsg("crm.event.remind.mins",[30])},{value:"1 hrs",html:I18n.getMsg("crm.event.remind.hrs",[1])},{value:"2 hrs",html:I18n.getMsg("crm.event.remind.hrs",[2])},{value:"1 days",html:I18n.getMsg("crm.event.remind.day",[1])},{value:"2 days",html:I18n.getMsg("crm.event.remind.days",[2])}]:"Events"===o&&(n.val=[{value:"none",html:I18n.getMsg("None")},{value:"0",html:I18n.getMsg("crm.event.remind.ontime",[Crm.getModuleDisplayName(!0,!1,!0)])},{value:"5 mins",html:I18n.getMsg("crm.event.remind.mins",["5"])},{value:"10 mins",html:I18n.getMsg("crm.event.remind.mins",["10"])},{value:"15 mins",html:I18n.getMsg("crm.event.remind.mins",["15"])},{value:"30 mins",html:I18n.getMsg("crm.event.remind.mins",["30"])},{value:"1 hrs",html:I18n.getMsg("crm.event.remind.hr",["1"])},{value:"2 hrs",html:I18n.getMsg("crm.event.remind.hrs",["2"])},{value:"1 days",html:I18n.getMsg("crm.event.remind.day",["1"])},{value:"2 days",html:I18n.getMsg("crm.event.remind.days",["2"])}]),p.style.widht="135px";break;case 300:case 123:case 41:case 301:var R=!1;("true"==trimBoth(v)||300==m&&"false"!=trimBoth(v))&&(R=!0),R&&(p.checked=R),h["data-old-value"]=R+"","true"===n.readonly&&(p.disabled="disabled");var L="edit"===window[o].currentStatus||"clone"===window[o].currentStatus;123==m&&L&&"Tasks"===o?null!=v&&""!=v&&(h["data-recData"]=v,p.checked=!0,e.EditSeries="true"):123==m&&L&&("true"==e.EditSeries?(p.checked=!0,n.readonly="true",p.disabled="disabled",h["data-recData"]=v):p.disabled="disabled");break;case 26:n.val.length||(n.val=[n.val]);var D=n.val,S={},O=[];n.default=[];for(var F=!1,M=0;M<D.length;M++)D[M].content?"-None-"===D[M].content?O.push({html:D[M].content,value:"none"}):O.push({html:D[M].content,value:D[M].pbty+":"+D[M].content,fcCategory:D[M].fccategory,stageId:D[M].stageId,fctype:D[M].fctype}):O[M]=D[M],(O[M].value===n.defaultvalue||O[M].html===n.defaultvalue||n.defaultvalue&&O[M].html===n.defaultvalue.split(":")[1])&&(S.html=D[M].content,null==D[M].content&&(D[M].content=D[M].html),S.value=n.defaultvalue.split(":")[0]+":"+D[M].content,O.pop(),O.push({html:D[M].content,value:S.value,fcCategory:D[M].fccategory,stageId:D[M].stageId,fctype:D[M].fctype}),S.fccategory=D[M].fccategory,!0===n.colorcode_enabled&&(S.colorcode=D[M].colorCode),S.fctype=D[M].fctype,n.default.push(S),F=!0),!0===n.colorcode_enabled&&(O[M].colorCode=D[M].colorCode,O[M].DisplayValue=D[M].content);!F&&n.defaultvalue&&(O.push({html:n.defaultvalue.split(":")[1],value:n.defaultvalue}),S.html=n.defaultvalue.split(":")[1],S.value=n.defaultvalue,n.default.push(S)),n.default.length<=0&&(S.value=O[0].value,S.fccategory=O[0].fccategory,S.html=O[0].content,null==O[0].content&&(S.html=O[0].html),!0===n.colorcode_enabled&&(S.colorcode=O[0].colorCode),n.default.push(S)),n.val=O,h["data-values"]=JSON.stringify(n.val);break;case 2:case CrmField.UITYPES.SERVICE_TIMING:case 555:case 27:case 100:case 96:case 28:case 42:case 98:case 39:if(n.default=[],28!=m&&(this.dependentFieldsList.contains(p.id)||this.dependentFieldsList.push(p.id)),104===m&&"REMINDINVITEESAT"===n.colname&&p.style&&(delete p.style,p.tabIndex=23),"true"===n.readonly&&(p.disabled=!0,p[b]="searchFormatText"),42==m&&"remTime"==n.colname){k="",w="40px";_?(k=Utils.formatTimeVal(E.getHours())+":"+Utils.formatTimeVal(E.getMinutes()),"setup"!==e.currentStatus&&(w="35px")):("setup"!==e.currentStatus&&(w="65px"),k=(v=Utils.convertTo12HoursFormatTimeObj(E)).hrs+":"+v.mins+" "+I18n.getMsg(v.meridiem.toUpperCase())),"Tasks"!=o&&(n.defaultvalue=p.value),"setup"===Events.currentStatus&&(k=""),n.timeVal=k,n.timeAttrObj=objectUtils.cloneObject(p),n.timeAttrObj.value=k,n.timeAttrObj.style="width:"+w+";margin-left:10px",n.timeAttrObj.class="textField",n.timeAttrObj.id+="_TimeOption"}100!==m&&m!==CrmField.UITYPES.GLOBAL_TAX||(p.multiple=!0);var A=[];if((D=n.val)instanceof Array||(D=[D]),n.defaultvalue&&"PIPELINE"==n.colname&&e.triggerPipelineChange&&!n.picklistmap.some((function(e){return n.defaultvalue==e.uservalue}))||"Appointments"===o&&e.currentSection&&"2"===e.currentSection.section_id&&2===m?n.val.forEach((function(e){"object"==typeof e&&(S=e.content.split(";"),n.defaultvalue=e.content)})):27!=m&&555!=m&&(n.defaultvalue||100==m||m==CrmField.UITYPES.GLOBAL_TAX||n.isDetailView||"edit"==window[o].currentStatus)?S=n.isDetailView||"edit"==window[o].currentStatus?n.defaultvalue?n.defaultvalue.split("; "):[""]:n.defaultvalue?n.defaultvalue.split("; "):"":(S=n.defaultsalutationValue?n.defaultsalutationValue:"")&&(S=S.split(";")),D){var P=D.length;if(100==m&&"RECURRING_WEEKLY_DAYS"==n.colname&&"Tasks"==o)for(var x=S.length,N=0;S&&N<x;N++){var V=S[N],U=!1;for(M=0;M<P;M++){var j=D[M];"object"==typeof D[M]&&(j=D[M].value),j===V&&(U=!0)}U||""==V||D.push(V)}if(555!=m&&"RECURRING_WEEKLY_DAYS"!=n.colname)for(N=0;S&&N<S.length;N++){for(V=S[N],U=!1,M=0;M<P;M++){j=D[M];"object"==typeof D[M]&&(j=D[M].content?D[M].content:D[M].html),j===V&&(U=!0)}if(!U&&""!=V&&(D.push(V),n.picklistmap)){var B={value:V,uservalue:V};n.colorcode_enabled&&V===n.defaultvalue&&(B={value:V,uservalue:V,colorCode:n.color_code}),n.picklistmap.push(B)}}for(N=0;N<D.length;N++){var H,q;if("object"==typeof D[N]){var z="default";100==m&&"RECURRING_WEEKLY_DAYS"==n.colname&&D[N].value&&"Tasks"==o?(A[N]={html:D[N].html,content:D[N].value},H=D[N].value):D[N].html&&D[N].value?(A[N]={html:D[N].html,content:D[N].value},H=D[N].html):D[N].html&&D[N].content?(A[N]={html:D[N].html,content:D[N].content},H=D[N].content):D[N].content?(A[N]={html:D[N].content,content:D[N].content},H=D[N].content):(A[N]=D[N],H=D[N].value),!S&&D[N][z]&&(A[N][z]="true","FIRSTNAME"!==n.colname&&(n.defaultvalue=n.defaultvalue?n.defaultvalue:A[N].content),D[N].html||(D[N].html=D[N].content),n.default.push(D[N])),27==m&&(q=D[N].content)}else if(555==m)Array.isArray(n.picklistmap)?(q=n.picklistmap[N].systemvalue,A[N]={html:n.picklistmap[N].uservalue,content:q}):(q=n.picklistmap.systemvalue,A[N]={html:n.picklistmap.uservalue,content:q}),H=D[N];else if(q="-None-"==D[N]?"":D[N],A[N]={html:D[N],content:q},H=D[N],n.colorcode_enabled){var Y=getPickListColorCode(q,n.picklistmap);A[N].colorCode=Y}if(S&&S.contains(H)){z="default";"object"==typeof D[N]?n.default.push(A[N]):n.picklistmap&&n.picklistmap[N]&&n.picklistmap[N].colorCode&&""!==n.picklistmap[N].colorCode?n[z].push({html:D[N],content:q,colorcode:n.picklistmap[N].colorCode}):n[z].push({html:D[N],content:q}),A[N][z]="true"}else if(S&&S===H){n[z="default"].push({html:q,content:q}),A[N][z]="true"}Crm.isStdOptionsField(n.colname)&&n.picklistmap&&(Array.isArray(n.picklistmap)?n.picklistmap[N]&&(A[N].systemvalue=n.picklistmap[N].systemvalue):A[N].systemvalue=n.picklistmap.systemvalue,-1==p[b].indexOf("dataPopulated")&&(p[b]+=" dataPopulated"))}}if(27==m){var K=objectUtils.cloneObject(h);K["data-mandate"]=!1,K["data-content-type"]="salutation",K["data-colname"]="SALUTATION",K["data-name"]="saltName",K.tabIndex=n.tabIndex,this.dependentFieldsList.contains(u+"_SALUTATION")||this.dependentFieldsList.push(u+"_SALUTATION"),Crm.fieldsObj[o].push(u+"_SALUTATION");var W=n.defaultsalutationValue?n.defaultsalutationValue:"";n.salDataObj=K,K["data-old-value"]=W,n.salAttrObj={id:u+"_SALUTATION",style:"width:28%",class:"select"},"true"==n.readonly&&(n.salAttrObj.disabled=!0),K["data-values"]=JSON.stringify(D)}if("Events"==o&&98==m){var J=Events.statusDropDownObj;A=J="edit"==window[o].currentStatus?Events.getStatusObj(v,window[o].isEventStarted):J.slice(0,J.length-1)}if(e.dependentFields&&!Crm.isHeadless&&!Crm.isStdOptionsField(n.colname)&&e.dependentFields[n.colname]||(n.val=A),h["data-values"]=JSON.stringify(D),h["data-picklistmap"]=JSON.stringify(n.picklistmap),n.colorcode_enabled&&(h["data-picklist-color"]=n.colorcode_enabled),h["data-old-value"]||"39"!=m)"39"==m&&(window[o].defaultCurrency=h["data-old-value"]);else for(null!=e.PersonalCurrencyISOcode?(h["data-old-value"]=e.PersonalCurrencyISOcode,window[o].defaultCurrency=e.PersonalCurrencyISOcode):(h["data-old-value"]=D[0]&&D[0].content?D[0].content:D[0],window[o].defaultCurrency=h["data-old-value"]),i=0;i<D.length;i++){if(n.val[i].content==e.PersonalCurrencyISOcode&&null!=e.PersonalCurrencyISOcode){n.val[i].default="true",n.default.push(n.val[i]);break}0==i&&(n.val[0].default="false")}break;case 3:case 110:p.cols="5",p[b]="textField","true"===n.readonly&&(p.readonly=!0,p[b]="textField"),"ITEMDESCRIPTION"===n.colname&&c&&(p[b]=p[b]+" prdItemDesc");break;case 210:"true"===n.readonly&&(p.disabled=!0,p[b]="searchFormatText","true"===n.LiteConstant&&(p.LiteConstant=!0));break;case CrmField.UITYPES.MULTI_MODULE_LOOK_UP_ENTITY:var G=objectUtils.cloneObject(h);G["data-mandate"]=!0,G["data-content-type"]="Lookup",G["data-relatedname"]=G["data-name"],G["data-id"]=n.defaultid,G["data-permission-denied-lookup"]=G["data-lookup-module"],G.tabIndex=n.tabIndex,this.dependentFieldsList.contains(u+"_RELATEDTO")||this.dependentFieldsList.push(u+"_RELATEDTO"),Crm.fieldsObj[o].push(u+"_RELATEDTO"),n.relatedToDataObj=G,n.relatedToAttrObj={id:u+"_RELATEDTO",style:"width:28%",class:"select"},G["data-values"]=JSON.stringify(D)}34!=m&&38!=m&&36!=m&&143!=m&&144!=m&&145!=m&&(p.maxlength=n.maxlength),"2"===n.tooltiptype&&445!=n.uitype&&(p.placeholder=n.tooltipcontent),"Lookup"==e.currentField.type&&(""!==n.defaultvalue&&Crm.isInventoryModule(o)&&"PRODUCTID"===n.colname?n.prdDetails&&n.prdDetails.Product_Code&&""!==n.prdDetails.Product_Code&&n.lineitemProdCode?h["data-selectedlookupvalue"]=n.defaultvalue.replace(/(\r\n|\n|\r)/gm," ")+" ("+n.prdDetails.Product_Code+")":h["data-selectedlookupvalue"]=n.defaultvalue.replace(/(\r\n|\n|\r)/gm," "):h["data-selectedlookupvalue"]=n.defaultvalue,h["data-selectedid"]=n.defaultid),c&&(p.class=p.class+" "+u,p.isOprDenied=n.isOprDenied),n.attrObj=p,n.dataObj=h},crmTemplate.createFieldContent=function(e,t){var a=e.currentField,l=e.module,n=e.loadingFrom;if(a.colname&&!crmConstants.defaultHiddenFields[a.colname]&&(t||"116"!==a.uitype&&"117"!==a.uitype||"setup"===window[l].currentStatus)||(a.colname||(a={}),a.emptyColumn=!0),Crm.userDetails.isPhoneNoNewView&&"33"==a.uitype&&Crm.loadPhoneFieldComponentJSFiles(),"62"==a.uitype){var r=a.val;if(a.val)for(var i=0;i<r.length;i++)"true"==r[i].default&&(""==a.defaultvalue&&(a.defaultvalue=r[i].content),a.val[i]=r[i].content)}if(a.attrObj||a.dataObj||crmTemplate.setFieldData(e,t),"40"==a.uitype&&("edit"==e.currentStatus?crmTemplate.recordCurrencyER=parseFloat(a.defaultvalue).toFixed(9):crmTemplate.recordCurrencyER=0),"8"==a.uitype&&e.tabId){var o=store.peekRecord("module",e.tabId).profiles,s=o.length,d=[],u="(profile:in:",c=[],m=[];for(i=0;i<s;i++)c.push(o[i].id),o[i].name&&m.push(o[i].name.replace(/,/g,"\\,"));var p={comparator:"in",field:"profile.id"};p.value=c,d.push(p);var f=m.join().replace(/\(/g,"\\(");u=u+(f=f.replace(/\)/g,"\\)"))+")",e.usercriteria=encodeURI(JSON.stringify(d)),e.usersearchcriteria=encodeURI(u)}else if(a.uitype===CrmField.UITYPES.MULTI_MODULE_LOOK_UP_ENTITY.toString()&&("edit"===e.currentStatus||"clone"===e.currentStatus)){var v=e.currentField.multiModuleLookup.length,h=v;for(i=0;i<v;i++){var g=store.peekRecord("module",e.currentField.multiModuleLookup[i].id);g&&e.currentField.defaultvalue1===g.plural_label&&h--}h===v&&(e.currentField.pastMultiModuleRecord=!0)}"32"!==a.uitype&&"38"!==a.uitype&&"52"!==a.uitype||!e.currentField.defaultvalue||(e.currentField.defaultvalue=Search.reverseFormatNumber(e.currentField.defaultvalue));var y=$(Handlebars.templates.crmCreateFieldContent(e)),b=y.find("input");if("36"===a.uitype||"143"===a.uitype||"144"===a.uitype||"145"===a.uitype){var C=y.find("input");C.css("width","inherit").addClass("cal_rate_maintain"),C.off("keypress keyup blur").on("keypress keyup blur",(function(e){crmTemplate.calculatorOperation(this,e)}))}else a.uitype!==CrmField.UITYPES.MULTI_MODULE_LOOK_UP_ENTITY.toString()||"edit"!==e.currentStatus&&"clone"!==e.currentStatus||!e.currentField.pastMultiModuleRecord?"Services"!=e.module||"STARTING_DATE"!=a.colname&&"CLOSING_DATE"!=a.colname||y.find("#Crm_Services_"+a.colname).attr("onchange","CSU.validateFromTill();"):(y.find("#Crm_Appointments_APPOINTMENTFOR_RELATEDTO").attr("data-lookup-module",""),y.find("#Crm_Appointments_APPOINTMENTFOR_RELATEDTO_img").attr("data-lookup-module",""));if(commonUtils.cleanWhitespace(y[0]),a.dynamicFields&&this.constructDynamicFields(l,a,y[0]),"Events"===l&&/\b(2|28|42|27|26|98)\b/.test(a.uitype)){var T=$(document.createElement("div")),E=y.find("select");E.length&&"RECURRING_CUSTOM_WEEK_REPEAT_ON"!=a.colname&&(E.removeClass("select"),E.css({width:""}),E.replaceWith(T),T.append(E))}if(y=window[l].createFieldContent(a,y),"Tasks"!==l&&a.isBusHoliday&&$(y[0]).addClass("labelValCretateBh"),"Appointments"!==l||"APPOINTMENTDATEANDTIME"!==a.colname||"calendar"!==Events.createSource||Crm.isAppAction||CSU.setStartDateAndTime(Events.appointmentClickedDate,y),a.colorcode_enabled){r=a.default[0];var _=y.find("select"),I="26"===a.uitype,k=I?a.val:a.picklistmap,w="";if(r){if(r.colorcode)w=a.default[0].colorcode;else{var R=I?a.plainValue:r.content;w=a.defaultcolorcode?a.defaultcolorcode:getPickListColorCode(R,k,I)}_.children("option:selected").attr("data-colorcode",w),_.data("colorcode",w),l!==crmModuleConstants.Events&&updateColorCodeForSelObj(_)}}if("setup"!==e.currentStatus&&(y.find("[data-fieldType='dateField']").each(crmTemplate.bindEventsToDateField),y.find("[id='Crm_Calls_CALLTYPE']").change((function(){Crm.setDependent(event,l,this,!1)})),y.find("[data-fieldType='timeField']").each(crmTemplate.bindEventsToTimeField),y.find("select").each((function(){28!=a.uitype&&(crmTemplate.dependentFieldsList.contains(this.id)||crmTemplate.dependentFieldsList.push(this.id)),a.val&&a.val[0]&&("-None-"==a.val[0]||"-None-"==a.val[0].html)&&$(this).addClass("selNone"),$(this).change(crmTemplate.modifySelectBox)}))),y.find(".newCustSel").each((function(){if(0==$(this).find(".newCustSelVal").length){var e=$(this).find("select option:selected").text();$(this).append("<span class='newCustSelVal'></span>"),$(this).children(".newCustSelVal").html("<span class='pR7 crm-font-regular'>"+e+"</span> <strong class='mT7 dIB tb_downarrow'></strong>"),$(this).change((function(){var e=$(this).find("select option:selected").text();$(this).children(".newCustSelVal").html("<span class='pR7 crm-font-regular'>"+e+"</span> <strong class='mT7 dIB tb_downarrow'></strong>")}))}})),("PROBABILITY"===a.colname||"STAGE"===a.colname||"AMOUNT"==a.colname)&&"Potentials"===l){var L="";if(e.currentField.suffixIndex&&(L=e.currentField.suffixIndex+"_"),"STAGE"===a.colname){var D=y.find("select");D.change((function(){Crm.calculateExpectedRevenue(L)})),"true"===a.readonly&&D.prop("disabled",!0)}else b.blur((function(){Crm.calculateExpectedRevenue(L)}))}if("Contacts"===l&&"Accounts"===a.lookupmodule&&"ACCOUNTID"===a.colname){var S=b.val();b.blur(S,Crm.toggleReportingTo)}if(y.find("input,select,textarea,.selectElementNew1").focusin(setFocusClass),y.find("input,select,textarea").blur(removeFocusClass),a.uitype==CrmField.UITYPES.SERVICE_DURATION&&y.find("div").focusin(setFocusClass),"62"==a.uitype&&(b.autocomplete({source:a.val,minLength:0,change:function(e,t){$(this).change()}}).data("ui-autocomplete")._renderItem=function(e,t){return $("<li class='ui-menu-item'>").append("<div tabindex='-1' class='ui-menu-item-wrapper'>"+$ESAPI.encoder().encodeForHTML(t.value)+"</div>").appendTo(e)},b.click((function(){$(this).autocomplete("search")}))),"27"==a.uitype&&y.find("select").on("change",(function(){var e=y.find("input").attr("id");setTimeout((function(){$("#"+e).focus()}),10)})),"301"==a.uitype&&y.addClass("no-hvr-ln"),"1"===a.uitype&&"ACCOUNTNAME"===a.colname&&"Accounts"===l&&a.externalsource){var O=y.find("#Crm_Accounts_ACCOUNTNAME");O.length>0&&initSkyEyeAutoComplete(O)}if("1"==a.uitype&&"COMPANY"==a.colname&&b.length>0&&!b.data().readonly){var F={};"crmSocialTab"===n&&(F.scrollFocus=!1),crmLookupAutoComplete.initAutoCompletePlugin(b,"searchLookup",F),b.click((function(){$(this).autocomplete("search")}))}if((/\b(5|4|6|7|9|10|12|13|15|132|133|135|136)\b/.test(a.uitype)||Crm.userDetails.isLookupAdvancedSearchEnabledInLineItem&&"50"==a.uitype)&&"Events"!==l&&"crmSocialTab"!==n){function M(){b.length&&b.val().length>0?y.addClass("show-close"):A()}function A(){y.removeClass("show-close")}Crm.userDetails.isLookupAdvancedSearchEnabledInLineItem&&"50"===a.uitype&&(b=y.find("input.ui-autocomplete-input")),b.length>0&&!b.data().readonly&&"setup"!==e.currentStatus&&!t&&(crmLookupAutoComplete.initAutoCompletePlugin(b,"createPageLookup"),b.click((function(){$(this).autocomplete("search")}))),b&&b[0]&&b[0].addEventListener("input",(function(){this.value&&b.data().id&&this.value!=b.attr("data-selectedlookupvalue")&&b.attr("data-selectedid")&&b.attr("data-selectedid")!=b.data().id&&b.attr({"data-selectedlookupvalue":this.value,"data-selectedid":b.data().id})})),y.on("mouseover",(function(){M(),function(){var e=b;if(e.length&&e.val().length>0){var t=e[0],a=t.scrollWidth;t.offsetWidth<Math.floor(a)?e.attr("title",e.val()):e.removeAttr("title")}}()})),y.on("mouseout",(function(){A()})),b.keyup(M)}else if(8==a.uitype||221==a.uitype){if(Crm.userDetails.CLIENT_ACCOUNT&&"create"===e.currentStatus)y.find("#ownerNameLookupSpan").text(Crm.userDetails.CLIENT_OWNER_NAME);var P=a.suffixIndex&&""!==a.suffixIndex&&"Events"!=l&&"Tasks"!=l&&"Calls"!=l?"_"+a.suffixIndex:"";y.find("#Crm_"+l+P+"_"+a.colname)}if((445===a.uitype||"445"===a.uitype)&&"Users"===a.lookupmodule||444===a.uitype||"444"===a.uitype){var x=a.attrObj.id,N=$(y).find("#"+x),V=N.parent();if(a.clonedfrom&&(N.attr("data-clonedfrom",a.clonedfrom),"CALLMXNCLONESCHEDULER"===N.data("selectedid")&&y.find("input").attr("data-mandate","true")),445===a.uitype||"445"===a.uitype){var U=$("#temp_"+x);if(!U||0==U.length){var j=$(V);j.find("img").addClass("dN"),j.find("input").addClass("dN"),$("<div/>",{class:"true"==a.readonly?"dIB w100per chosen-container-multi":"dIB w100per chosen-container chosen-container-multi",id:"temp_"+x}).prependTo(V),U=j.find("#temp_"+x),$("<ul/>",{class:"chosen-choices",onclick:"Search.focusUserMxNInput(this)"}).appendTo(U);var B=U.find("ul"),H=!1;"true"==a.readonly&&(H=!0),$("<input/>",{class:"fL mT6 pL5 nobdr",onclick:"crmTemplate.showUserLookup(this)",onkeydown:"Search.searchOnKeyDown(this,event,'"+x+"');",disabled:H,placeholder:"2"===a.tooltiptype?a.tooltipcontent:I18n.getMsg("crm.tpi.ctiapi.label.selectsupportrep"),rplaceholder:"2"===a.tooltiptype?a.tooltipcontent:I18n.getMsg("crm.tpi.ctiapi.label.selectsupportrep")}).appendTo(B)}var q=B.find("input");if(a.selectedid&&a.selectedid.length>0){var z=a.selectedJson;"true"==a.readonly&&q.addClass("dN")}else q.attr("placeholder","");var Y=$("#mouseArea__"+a.colname);if(Y&&Y.data("params"))var K=Y.data("params").selectedAPIJson;if(K){var W={};W.api_name=a.sysRefName;var J=moduleRecordMapping[l].fields.filterBy(W)[0].multiuserlookup.connectedlookup_apiname,G=K.length;for(i=0;i<G;i++){Search.hideSpan(Q);var Z=(te=K[i])[J].name,Q=te[J].id,X="true"==a.readonly?"":'<a href="javascript:void(0)" class="search-choice-close p0" onclick="Search.removeSingleUser(event,this,\''+x+"_"+Q+"','"+x+"')\"></a>";U.find("ul").find("input").before('<li class="search-choice" data-id="'+Q+'" id="sel_'+x+"_"+Q+'">'+$ESAPI.encoder().encodeForHTML(Z)+X+"</li>").focus()}}else if(z){var ee=z.length;for(i=0;i<ee;i++){Search.hideSpan(Q);var te;Z=(te=z[i]).name,Q=te.id,X="true"==a.readonly?"":'<a href="javascript:void(0)" class="search-choice-close p0" onclick="Search.removeSingleUser(event,this,\''+x+"_"+Q+"','"+x+"')\"></a>";U.find("ul").find("input").before('<li class="search-choice" data-id="'+Q+'" id="sel_'+x+"_"+Q+'">'+$ESAPI.encoder().encodeForHTML(Z)+X+"</li>").focus()}}}}return crmTemplate.triggerImgKeyDwn(y),34!=a.uitype&&38!=a.uitype&&36!=a.uitype&&143!=a.uitype&&144!=a.uitype&&145!=a.uitype||$(y.find("input")[0]).on("keydown",(function(e){controlPercentagefieldValue(this,e)})),y[0]},crmTemplate.triggerImgKeyDwn=function(e){e.find("img").on("keydown",(function(e){if(32==e.keyCode){e.preventDefault();var t=renderingUtils.getTargetElem(e);renderingUtils.triggerEvent("click",$(t))}}))},crmTemplate.createSubformFieldContent=function(e,t,a,l,n){var r=e.currentField,i=e.module,o=n?$(t).find("div"):$(Handlebars.templates.crmCreateFieldContent(e)),s=Crm.isInventoryModule(i)&&"PRODUCTID"===r.colname?o.find(".productIdFld"):o.find("input");(r.isaggrfield&&"true"===r.isaggrfield&&s.data("subFormTabId",a),$("#multipleFieldsEditPop").is(":visible")&&o.addClass("sfFormulaCalcBP"),""!==r.defaultvalue&&Crm.isInventoryModule(i)&&"PRODUCTID"===r.colname&&(r.prdDetails&&r.prdDetails.Product_Code&&""!==r.prdDetails.Product_Code&&r.lineitemProdCode?s.val(r.defaultvalue.replace(/(\r\n|\n|\r)/gm," ")+" ("+r.prdDetails.Product_Code+")"):s.val(r.defaultvalue.replace(/(\r\n|\n|\r)/gm," "))),"setup"!==e.currentStatus)&&o.find("select").each((function(){28!==r.uitype&&(crmTemplate.dependentFieldsList.contains(this.id)||crmTemplate.dependentFieldsList.push(this.id)),$(this).change(crmTemplate.modifySelectBox)}));var d=function(){if(o.off("mouseenter focusin"),"LINETAX"!==r.colname){var t="PRODUCTID"===r.colname&&Crm.isLineItemSubFormModule(r.subformdisplaylabel)?o.find(".productIdFld"):o.find("input"),a=o.find("select");switch(r.uitype){case"36":case"143":case"144":case"145":var n=$(o[0]).find(".cal_rate_maintain");switch(n.attr("placeholder",""),r.colname){case"DISCOUNT":n.off("mouseover").on("mouseover",(function(){productDetails.showDiscToolTipForSFLineItem(this)})),n.off("mouseout").on("mouseout",(function(){zctt.hidett()}));break;case"TAX":n.off("mouseover").on("mouseover",(function(){productDetails.showTaxToolTipForSFLineItem(this)})),n.off("mouseout").on("mouseout",(function(){zctt.hidett()}))}t.off("keypress keyup blur").on("keypress keyup blur",(function(e){crmTemplate.calculatorOperation(this,e)}));break;case"100":a.on("change",(function(){var e=$(this);setTimeout((function(){var t=e,a=t.closest(".subFrmTablWrapper"),l=a.outerHeight(),n=t.closest(".subFrmLayout"),r=t.closest("td").outerHeight();a.find(".subFrmSnFld").length>0&&n.find(".subFrmTablSerlNoOverlay tbody tr").eq(t.closest("tr").index()).find("td").css("height",r);var i=n.find(".SubFrmScrolIn");i.length>0&&i.css("height",l-20)}),100)}));break;case"301":o.addClass("no-hvr-ln");break;case"133":function s(){t.length&&t.val().length>0?o.addClass("show-close"):d()}function d(){o.removeClass("show-close")}o.on("mouseover",(function(){s(),"true"===r.issubformfield&&"PRODUCTID"!==r.colname&&function(){var e=t;if(e.length&&e.val().length>0){var a=e[0],l=a.scrollWidth;if($.browser.msie||$.browser.msedge){var n=$("<span>").attr("class","dummyTitleFixIE");n.text(e.val()),$("body").append(n),l=n[0].scrollWidth,n.remove()}a.offsetWidth<Math.floor(l)?e.attr("title",e.val()):e.removeAttr("title")}}()})),o.on("mouseout",(function(){d()})),"true"===r.issubformfield&&"PriceBooks"===r.lookupmodule&&"BOOKID"===r.colname&&"false"===r.customfield&&t.each((function(e,t){"BOOKID"===t.getAttribute("data-colname")&&t.addEventListener("click",(function(){$(this).autocomplete("disable")}))})),t.keyup(s);break;case"38":"QUANTITY"===r.colname&&(t.off("keypress").on("keypress",(function(e){productDetails.checkAlphabatePresence(e,this)})),t.off("blur").on("blur",(function(){productDetails.validateQtyFld(this)})));break;case"47":"LINETAX"===r.colname&&(t.css({display:"none"}),t.attr("taxTypes",""));break;case"117":"SUBTOTAL"===r.colname&&t.attr("temp-value",t.val())}crmTemplate.setSubformFocusBlurEvent(o,event),r.dynamicFields&&this.constructDynamicFields(i,r,o[0]),crmTemplate.triggerImgKeyDwn(o),l&&e.relListId&&t.data("suffixindex",e.relListId)}};if(o.mouseenter(d),o.focusin(d),"setup"!==e.currentStatus){if(s[0]&&("24"===r.uitype||"333"===r.uitype)){var u=s[0].id;$(o.find("."+u)).each(crmTemplate.bindEventsToDateField),$(o.find("."+u+"_TimeOption")).each(crmTemplate.bindEventsToTimeField)}!n&&s[0]&&["TAX","DISCOUNT"].indexOf(s[0].getAttribute("data-colname"))>-1&&""===s[0].value&&(s[0].value=0)}if("34"===r.uitype||"38"===r.uitype||"36"===r.uitype||"143"===r.uitype||"144"===r.uitype||"145"===r.uitype)s.on("keydown",(function(e){controlPercentagefieldValue(this,e)}));else if(!0===r.colorcode_enabled&&i!==crmModuleConstants.Events){var c=o.find("select");c.children("option:selected").eq(0).attr("data-colorcode",r.color_code),c.parent().parent().find(".activitesColor").remove(),updateColorCodeForSelObj(c)}o[0]&&!n&&t.appendChild(o[0])},crmTemplate.setSubformFocusBlurEvent=function(e,t){e.find("input,select,textarea").each((function(e,a){$(a).attr("isOprDenied")?$(a).attr("readonly",!0):($(a).on("focusin",setSubfrmFocusClass),$(a).on("blur",removeSubfrmFocusClass),void 0===t||"focus"!==t.type&&"click"!==t.type||$(a).trigger("focusin"))}))},crmTemplate.modifySelectBox=function(e,t){var a;(e&&void 0!==t&&t.isFormulaChange&&(e.data=t),e)?(t=renderingUtils.getTargetElem(e),(a=$(t)).closest(".labelValCreate").find(".textField").focus().prop("disabled",!1)):(a=$(t)).closest(".labelValCreate").find(".textField").focus().prop("disabled",!1);var l=a.data("module"),n=a.data("uitype"),r=a.data("colname");if("-None-"==a.val()||""==a.val()?$(this).addClass("selNone"):$(this).removeClass("selNone"),"Tasks"==l)if(8==n&&"SMOWNERID"==r)Crm.userDetails.USER_ID!=a.data().id&&$("#Crm_Tasks_SMOWNERID").data().oldValue!=e.target.innerText&&"edit"==window.Tasks.currentStatus||Crm.userDetails.USER_ID!=a.data().id&&("create"==window.Tasks.currentStatus||"clone"==window.Tasks.currentStatus)?($(".Tasks_Notify_Owner").show(),$("#Crm_Tasks_SENDNOTIFICATION").data("ownerChngd",!0)):($(".Tasks_Notify_Owner").hide(),document.getElementById("Crm_Tasks_SENDNOTIFICATION").checked=!1,$("#Crm_Tasks_SENDNOTIFICATION").data("ownerChngd",!1));else if(24!=n||"DUEDATE"!=r||"create"!=window.Tasks.currentStatus&&"edit"!=window.Tasks.currentStatus&&"clone"!=window.Tasks.currentStatus)if(24==n&&"DUEDATE"==r&&"view"==window.Tasks.currentStatus&&returnJson.entityMapJson.RECURRING&&returnJson.entityMapJson.RECURRING.startdate&&returnJson.entityMapJson.RECURRING.enddate){var i=$(e.target);""!=trimBoth(i.val())&&Utils.compareDate(new Date(returnJson.entityMapJson.RECURRING.startdate),new Date(i.data("dateObj")))&&Utils.compareDate(new Date(i.data("dateObj")),new Date(returnJson.entityMapJson.RECURRING.enddate))||crmTasks.changeDueDateFromDvForRecurTask()}else if(2!=n||"STATUS"!=r||"create"!=window.Tasks.currentStatus&&"edit"!=window.Tasks.currentStatus&&"clone"!=window.Tasks.currentStatus)if(2!=n||"STATUS"!=r||"view"!=window.Tasks.currentStatus||e.currentTarget.value!=detailView.taskStatusMap.Completed||Crm.userDetails.CUSTOMIZE_INFO.CloseTaskPopup)"remTime"==r?crmTasks.updateRemRepeatSelect():"remTimePeriod"==r&&(crmTasks.updateRemTimeSelect(e.currentTarget.value,$("#Crm_Tasks_remTime")),crmTasks.updateRemRepeatSelect());else{var o=returnJson.Tasks.entityid;closeTask(Crm.getCrmBasePath()+"/closeTask.do?action=CloseTask&taskid="+o+"&id="+o+"&module=Activities",!0)}else{c=$("#Crm_Tasks_DUEDATE").data("dateObj"),f=new Date(c);if((u=new Date).setHours(0,0,0,0),$("#Crm_Tasks_STATUS option:selected").val()!=crmTasks.compDispVal&&Utils.compareDate(u,f)||$("#Crm_Tasks_RECURRING").is(":checked"))crmTasks.unfreezeReminder();else{crmTasks.freezeReminder();(h=$("#Crm_Tasks_REMINDAT")).parent().on("mouseenter.duedateinpast",(function(){var e="crm.task.reminder.tooltip1";$("#Crm_Tasks_STATUS option:selected").val()==crmTasks.compDispVal&&(e="crm.task.reminder.tooltip2"),crmui.toolTip_show(this,"left",I18n.getMsg(e))})),h.parent().on("mouseleave.duedateinpast",(function(){crmui.toolTip_hide()})),!$("#Crm_Tasks_REMINDAT").is(":checked")||"create"!=window.Tasks.currentStatus&&"clone"!=window.Tasks.currentStatus||crmTasks.unsetReminder()}"edit"==window.Tasks.currentStatus&&(Crm.userDetails.USER_ID!=$("#Crm_Tasks_SMOWNERID").data().id&&$("#Crm_Tasks_STATUS").data().oldValue!=e.currentTarget.value&&e.currentTarget.value==crmTasks.compDispVal?($(".Tasks_Notify_Owner").show(),$("#Crm_Tasks_SENDNOTIFICATION").data("statusChngd",!0)):e.currentTarget.value!=crmTasks.compDispVal&&($(".Tasks_Notify_Owner").hide(),document.getElementById("Crm_Tasks_SENDNOTIFICATION").checked=!1,$("#Crm_Tasks_SENDNOTIFICATION").data("statusChngd",!1)))}else{var s=$("#Crm_Tasks_RECURRING");if(""!=e.target.value){var d="";if(!Utils.isValidDate(Crm.userDetails.DATE_PATTERN,e.target.value))return"edit"==window.Tasks.currentStatus&&crmTasks.isRecurringSet()&&(crmTasks.showExcludeFromRepeatSeriesAlert=!0,crmTasks.constructBlueBannerMsg()),crmTasks.isReminderSet()&&"period_based"===crmTasks.reminderSummaryData.reminderType&&crmTasks.unsetReminder(),s.prop("disabled",!0),$("#Tasks_fldRow_RemindAt_period").hide(),$("#Tasks_fldRow_remTime").hide(),crmTasks.removeRecurring(),crmTasks.unfreezeReminder(),void Crm.showErrorMsg(I18n.getMsg("crm.field.valid.check",$(e.target).data().displaylabel),$(e.target),l);document.getElementById("errorMsg_"+e.target.id)&&($("#errorMsg_"+e.target.id).remove(),$(e.target).closest(".tabDiv,.tabDivCreate").removeClass("errorFieldP")),d=crmCalendar.getDateObjectFromGivenDateString(e.target.value),s.prop("disabled",!1),crmTasks.isRecurringSet()?"create"!=window.Tasks.currentStatus||!$("#Crm_Tasks_RECURRING_END_ON").prop("checked")&&Utils.compareDate(new Date(d),new Date($("#Crm_Tasks_RECURRING_END_DATE").data("dateObj")))?"edit"==window.Tasks.currentStatus&&(Utils.compareDate(new Date(s.attr("data-startDate")),new Date(d))&&Utils.compareDate(new Date(d),new Date(s.attr("data-endDate")))?(crmTasks.showExcludeFromRepeatSeriesAlert=!1,crmTasks.constructBlueBannerMsg()):(crmTasks.showExcludeFromRepeatSeriesAlert=!0,crmTasks.constructBlueBannerMsg())):crmTasks.removeRecurring():($("#Tasks_fldRow_RemindAt_period").show(),$("#Crm_Tasks_RemindAt_Start_Date1_Radio").parents("label").find(".rbHtml").show(),$("#Crm_Tasks_RemindAt_remTime_Radio").parents("label").find(".rbHtml").show()),$("#Tasks_fldRow_remTime").show()}else document.getElementById("errorMsg_"+e.target.id)&&($("#errorMsg_"+e.target.id).remove(),$(e.target).closest(".tabDiv,.tabDivCreate").removeClass("errorFieldP")),"edit"==window.Tasks.currentStatus&&crmTasks.isRecurringSet()&&(crmTasks.showExcludeFromRepeatSeriesAlert=!0,crmTasks.constructBlueBannerMsg()),crmTasks.isReminderSet()&&"period_based"===crmTasks.reminderSummaryData.reminderType&&crmTasks.unsetReminder(),s.prop("disabled",!0),$("#Tasks_fldRow_RemindAt_period").hide(),$("#Tasks_fldRow_remTime").hide(),crmTasks.removeRecurring(),crmTasks.unfreezeReminder();if(""!=e.target.value&&(e.target.defaultValue!=e.target.value||$("#Crm_Tasks_REMINDAT").hasClass("errorFieldAdded"))){var u,c=crmCalendar.getDateObjectFromGivenDateString(e.target.value),m=crmTasks.getReminderSummaryData(),p=m.reminderType,f=new Date(c);if((u=new Date).setHours(0,0,0,0),crmTasks.unfreezeReminder(),!crmTasks.isRecurringSet()){var v=!0;if(Utils.compareDate(u,f)&&$("#Crm_Tasks_STATUS option:selected").val()!=crmTasks.compDispVal)crmTasks.unfreezeReminder();else{var h;(h=$("#Crm_Tasks_REMINDAT")).parent().on("mouseenter.duedateinpast",(function(){var e="crm.task.reminder.tooltip1";$("#Crm_Tasks_STATUS option:selected").val()==crmTasks.compDispVal&&(e="crm.task.reminder.tooltip2"),crmui.toolTip_show(this,"left",I18n.getMsg(e))})),h.parent().on("mouseleave.duedateinpast",(function(){crmui.toolTip_hide()})),crmTasks.freezeReminder(),crmTasks.unsetReminder(),v=!1}var g="crm.task.rem.validation1";if(crmTasks.isReminderSet())if("date_based"==p){var y=new Date($("#Crm_Tasks_RemindAt_Start_Date1").data("dateObj"));v=Utils.compareDate(y,f),g="crm.task.rem.validation2"}else{y=null;if("days"==(_=m.remTimeDetail.periodType)){var b=m.remTimeDetail.periodValue;y=new Date(f.getTime()-24*b*3600*1e3)}else if("weeks"==_){b=7*m.remTimeDetail.periodValue;y=new Date(f.getTime()-24*b*3600*1e3)}else if("months"==_){var C=m.remTimeDetail.periodValue;(y=f).setMonth(f.getMonth()-C)}v=Utils.compareDate(u,y),g="crm.task.rem.validation1"}if(v||"edit"!=!window.Tasks.currentStatus){if(!v&&$("#Crm_Tasks_REMINDAT").prop("checked")){$("#Crm_Tasks_REMINDAT").addClass("errorFieldAdded"),$("#Tasks_fldRow_REMINDAT").addClass("errorFieldP");var T='<span class="errMsg errorMsgDesc" style="clear: both; color: rgb(221, 0, 0); font-size:1.1rem; display: block;">'+I18n.getMsg(g)+"</span>";$("#Tasks_fldRow_REMINDAT > .labelValCreate").append(T)}var E=Utils.getDayDiff(f,u);if(crmTasks.updatePossiblePeriods(E),crmTasks.updateRemPeriodSelect(),"period_based"==p){var _=m.remTimeDetail.periodType,I=m.remTimeDetail.periodValue;$("#Crm_Tasks_remTime").find('option[value="'+I+'"]').prop("selected",!0),$("#Crm_Tasks_remTime_Period").find('option[value="'+_+'"]').prop("selected",!0)}}else crmTasks.unsetReminder();v&&($("#Crm_Tasks_REMINDAT").removeClass("errorFieldAdded"),$("#Tasks_fldRow_REMINDAT").removeClass("errorFieldP"),$("#Tasks_fldRow_REMINDAT > .labelValCreate > .errorMsgDesc").remove())}}}if(28==n&&"RECURRING_FREQUENCY"===r&&window[l].showFrequencyDetails(a,l),26===n){var k=a.val().substring(0,a.val().indexOf(":")),w=$("#Crm_Potentials_PROBABILITY");w.val(k),w.length<1&&$("[id='value_PROBABILITY'],[id='headervalue_PROBABILITY']").text(k);var R=a.find("option:selected"),L=R.attr("data-fctype"),D=R.attr("data-fcCategory");if("crm.tab.module.entity.detail"==Lyte.Router.getRouteInstance().transition.info.route)if(a.hasClass("fromPopup"))"Closed Lost"===L?$("#topBandPopup").find("#closedWon").find("#potnotesdiv").show():$("#topBandPopup").find("#closedWon").find("#potnotesdiv").hide();else if(("Closed Lost"===L||"Closed Won"===L)&&a.hasClass("select2-hidden-accessible")){var S=a.val();closePotentialFromDV(S),setTimeout((function(){$("#saveCancelSpan").find("[id$=cancel]").trigger("click")}))}setTimeout((function(){var e=$("#Crm_Potentials_FORECASTCATEGORY");if(0===e.length&&(e=$("#Crm_Potentials_FORECAST_CATEGORY")),e.length>0){populatePicklist(e,"",!0);var t=e.data("picklistmap");if(t)for(var a=t.length,l=0;l<a;l++)if(t[l].systemvalue==D){D=t[l].uservalue;break}e.find("option").prop("selected",!1),e.find("option[value='"+D+"']").prop("selected","selected")}}),50)}if(39===n){Crm.updateCurrencyFields(l,a.val(),a.data("oldValue")),a.data("oldValue",a.val());var O=crmTemplate.getElemIdByColname(l,"EXCHANGERATE"),F="";F="edit"==Lyte.Router.getRouteInstance().currentModel.currentStatus&&a.val()==window[l].defaultCurrency?crmTemplate.recordCurrencyER:Crm.userDetails.CURRENCY_DETAILS[a.val()].er,$("#"+O).html(F)}if(42==n&&"RemindAt_period"!=r&&e){var M=$("#Crm_Tasks_Recurring_period");window[l].showPeriodDetails?window[l].showPeriodDetails(t):"Recurring_period"==r&&"custom"==M.find("option:selected").val()?crmTasks.showFrequencyDetails($("#Crm_Tasks_RECURRING")[0]):"Custom_Recurring_period"==r&&crmTemplate.showPeriodDetails(l,$("#Crm_Tasks_Custom_Recurring_period")[0]),"custom"!=M.find("option:selected").val()&&($("#TasksCustomFrequencyDetails").hide(),$("#Crm_Tasks_Custom_Recurring_perioddaily1").hide(),$("#Crm_Tasks_Custom_Recurring_periodweekly1").hide(),$("#Crm_Tasks_Custom_Recurring_periodmonthly1").hide(),$("#Crm_Tasks_Custom_Recurring_periodyearly1").hide(),crmTemplate.hideTaskBusinessHoliday(M.find("option:selected").val()))}else n&&28!=n&&e&&(2==n&&"PriceBooks"==l&&"PRICINGMODEL"==r&&pricingDetails.togglePricingDetails(a.val()),Crm.setDependent(e,l,t,!1))},crmTemplate.resetLookupVal=function(e,t){var a=renderingUtils.getTargetElem(e),l=$("#"+a.id.replace("_label_select",""));if($(l).val(""),Crm.moduleInfo[t.value]){var n=Crm.moduleInfo[t.value].singularLabel;$(l).data({lookupModule:t.value,displaylabel:n})}$("#"+l[0].id+"_img");$("#"+l[0].id+"_img").data("lookupModule",t.value)},crmTemplate.modifyCheckBox=function(e,t,a){if(e&&!t){t=renderingUtils.getTargetElem(e);var l=$(l)}else l=$(t);var n,r=l.attr("id"),i=l.prop("checked");if(Crm.isUnsubscribeEnabled){if(!l.is(":checked")&&-1!=r.indexOf("EMAILOPTOUT")&&(n=$(l).eq(0).parent().find("i")).length&&n.hasClass("unsubInfo")){var o=n.attr("data-param"),s=JSON.parse(o);if("Manual"!==s.mode){var d=l.outerWidth(),u=l.offset().top-15,c=l.offset().left;l.prop("checked",!0),$("body").append(Handlebars.templates.OptoutAlertPopup({name:s.recordName,id:r}));var m=$("#unsubscripeEmails"),p=m.outerWidth(),f=renderingUtils.windowWidth-c;freezeBackground();var v=m.find(".setUpArrowOuter"),h=m.find(".setUpArrowInner");p<f?(v.addClass("setDDPopupLeft").removeClass("setDDPopupRight"),h.addClass("setDDPopupLeftA").removeClass("setDDPopupRigthA"),m.css({top:u,left:c+d+10}).removeClass("dN")):(v.addClass("setDDPopupRight").removeClass("setDDPopupLeft"),h.addClass("setDDPopupRigthA").removeClass("setDDPopupLeftA"),m.css({top:u,left:c-(d+p)}).removeClass("dN"))}}}else if(!l.is(":checked")&&-1!=r.indexOf("EMAILOPTOUT")&&(n=$(l).eq(0).parent().find("#emailOptOutInfo")).length&&n.hasClass("unsubInfo")&&"Consent Form"===n.attr("data-param"))return void $("#"+r).prop("checked",!0);switch(r){case"Crm_Tasks_RECURRING":if(i){crmTemplate.constructRecurringActivity(a,l[0]);var g=$("#TasksrecurringDiv");g.addClass("sliderPop popClose bRadBot3").removeClass("popOpen").removeAttr("width"),g.addClass("pA zI31 popup_shadow").css("width","585px"),crmTasks.openRecurringDiv();thirdPartyUtils.bindSelect2($(".newChosenSel").find("select"),{disable_search_threshold:100})}else crmTemplate.removeRecurringActivity();break;case"Crm_Events_RECURRING":window[a].showRecurringActivity(i,l[0]),thirdPartyUtils.bindSelect2($(".newChosenSel").find("select"));break;case"Crm_Events_ALLDAYEVENT":var y=Crm.calPreferences.DAYSTARTSAT.split(" ")[0].split(":"),b=y[0];if("00"!=y[1]&&(b=b+"."+y[1]),l.prop("checked")){var C;$("#Crm_Events_STARTDATETIME_TimeOption, #Crm_Events_ENDDATETIME_TimeOption").css({visibility:"hidden"}),Events.saveRemindersState(),Events.removeReminders(),Events.retrieveAllDayReminders(),Events.constructMultipleRemindersOptions(Events.eventRemindAtOptions_allday,Crm.calPreferences.ALLDAYEVENTREMINDER),$("#Events_fldRow_REMINDINVITEESAT").hide(),(C=new Date($("#Crm_Events_STARTDATETIME").data("dateObj"))).setHours(0),C.setMinutes(0),C.setSeconds(0),(C=new Date($("#Crm_Events_STARTDATETIME").data("dateObj"))).setHours(23),C.setMinutes(59),C.setSeconds(59)}else{$("#Crm_Events_STARTDATETIME_TimeOption, #Crm_Events_ENDDATETIME_TimeOption").css({visibility:"visible"}),Events.saveAllDayRemindersState(),Events.removeReminders(),Events.retrieveReminders(),$("#Events_fldRow_REMINDINVITEESAT").show(),Events.constructMultipleRemindersOptions(Events.eventRemindAtOptions,Crm.calPreferences.REMINDAT);var T=$("#Crm_Events_STARTDATETIME").data("dateObj");Events.setStartDateAndTime(T),Events.setEndDateAndTime(!0,!1)}Events.checkDuplicateEvent(void 0,!1);break;case"Crm_Events_REMINDAT":crmTemplate.showRemindAt(a,t);break;case"Crm_Tasks_SENDNOTIFICATION":var E=l.prop("checked");$(".tasksNotifyOwnerCheckBox").prop("checked",E)}},crmTemplate.bindEventsToDateField=function(e){var t=$(this),a=t.data("dateObj");a?t.data("dateObj",new Date(a)):t.data("dateObj",new Date),crmTemplate.attachCalendarEvent(this,(function(t){if("Crm_Events_STARTDATETIME"!=t.id&&"Crm_Events_ENDDATETIME"!==t.id||("Crm_Events_ENDDATETIME"===t.id?($(t).data("edited",!0),Events.setEndDateAndTime(!1)):Events.setEndDateAndTime(!0)),$("#"+t.id+"_TimeOption")[0])$(t).data("dateObj");e&&"function"==typeof e&&e()})),t.blur((function(){var e=$(this).data("datepattern")?$(this).data("datepattern"):Crm.userDetails.DATE_PATTERN;if(this.value&&Utils.isValidDate(e,this.value)){var t=crmCalendar.getDateObjectFromGivenDateString(this.value),a=$(this).data("dateObj");a&&(a.setDate(t.getDate()),a.setMonth(t.getMonth()),a.setYear(t.getFullYear()),t=a),$(this).data("dateObj",t)}else if(""===this.value&&("Crm_Events_ENDDATETIME"===this.id||"Crm_Events_STARTDATETIME"===this.id)){var l=Utils.getDateInUserDatePattern($(this).data("dateObj"));$(this).val(l)}var n=$("#"+this.id+"_TimeOption");if(n[0]&&""===n.val()){var r;t=$("#"+this.id).data("dateObj");if(n.hasClass("cVarDateTime"))(r="HH:mm"===Crm.userDetails.TIME_FORMAT?Utils.getTimeStringWithAmPm(t):Utils.convertTo12HoursFormatTimeObj(t))&&n.val(r.hrs+":"+r.mins+" "+I18n.getMsg(r.meridiem.toUpperCase()));else(r=Utils.convertTo12HoursFormatTimeObj(t))&&$(n).val(r.hrs+":"+r.mins+" "+I18n.getMsg(r.meridiem.toUpperCase()))}})),t.click((function(){null==$("#Crm_Events_REPEATTYPE").val()||"none"==$("#Crm_Events_REPEATTYPE").val()||!Events.currentStatus||"create"!=Events.currentStatus&&"clone"!=Events.currentStatus||Events.showRecurringActivity()})),t.keydown((function(e){"Crm_Appointments_APPOINTMENTDATEANDTIME"!=this.id&&"Crm_Appointments_RESCHEDULEDTO"!=this.id||crmTemplate.setDatevalue(this)})),t.keyup((function(e){"Crm_Appointments_APPOINTMENTDATEANDTIME"!=this.id&&"Crm_Appointments_RESCHEDULEDTO"!=this.id||crmTemplate.setDatevalue(this)})),t.change((function(){"Crm_Appointments_APPOINTMENTDATEANDTIME"!=this.id&&"Crm_Appointments_RESCHEDULEDTO"!=this.id||crmTemplate.setDatevalue(this)}))},crmTemplate.setDatevalue=function(e){var t=$(e).data("datepattern")?$(e).data("datepattern"):Crm.userDetails.DATE_PATTERN;if(Utils.isValidDate(t,e.value)){var a=crmCalendar.getDateObjectFromGivenDateString(e.value),l=$(e).data("dateObj");l&&(l.setDate(a.getDate()),l.setMonth(a.getMonth()),l.setYear(a.getFullYear()),a=l),$(e).data("dateObj",a),CSU.checkServiceAvailabilityTime(e)}},crmTemplate.execSaveAction=function(e,t,a,l){if("Campaigns"===a&&"true"===$("input[name=zohoSurveyCampaign]").val()&&ZSurvey.saveCreateViewDataChanges(),Crm.CAEExecCanvasStatus=CAEExec.enrichStatus,l===t[0]){var n=!1,r=void 0;!Crm.isDataEnrichAvailable||"Leads"!==a&&"Contacts"!==a&&"Accounts"!==a||(n=2===CAEExec.enrichStatus||4===CAEExec.enrichStatus,r=CAEExec.modeOfRecord),"Consents"===a&&DataPrivacy.setDurationValues(),Crm.saveEntity(e,a,(function(e,t){t&&$("#show").html(e),Crm.trackSpotLightAction("MPL - Record Edited",{Module:a}),n&&void 0!==r&&"EntityMore"===r?Crm.trackSpotLightAction("Data Enrichment - Updated",{Module:a,Place:"Detail View"}):n&&void 0!==r&&"entityCreate"===r?Crm.trackSpotLightAction("Data Enrichment - Updated",{Module:a,Place:"Create"}):n&&void 0!==r&&"EntityDetail"===r&&Crm.trackSpotLightAction("Data Enrichment - Updated",{Module:a,Place:"Notification"})}))}else l==t[1]||l==t[2]?Crm.saveAndNewEntity(e,a):l==t[3]?checkForGTaskList(this.currentStatus,a,e):l===t[4]&&Crm.saveEntity(e,a,(function(e,t){t&&$("#show").html(e)}),void 0,void 0,void 0,void 0,void 0,!0)},crmTemplate.handleButtonClick=function(e,t,a=!1){var l=["save","saveAndNew","saveAndTask","saveAndExportToGoogleTask","saveAndAddToProjectsTask"];!t&&e&&(t=renderingUtils.getTargetElem(e));var n=$(t).data("module"),r=t.name;if("saveAndNew"!==r&&"cancel"!==r||!Crm.layoutReqFrom||(Crm.layoutReqFrom=void 0),["saveAndNew","saveAndTask","saveAndExportToGoogleTask"].includes(r)&&Crm.userDetails.isStorageLimitReached)Crm.showStorageExceedPopup();else{if(l.includes(r))!CScriptLib||a?crmTemplate.execSaveAction(e,l,n,r):crmTemplate.onSave().then((function(t){!0===t&&crmTemplate.execSaveAction(e,l,n,r)}));else{if("cancel"===r){fileupload.removedAttachmentIds.length=0,fileupload.uploadedFileObject.length=0;var i=$("#newRelatedListPopUpDiv");if("Tasks"===n&&i)return i.empty(),crmui.hidePopup("newRelatedListPopUpDiv"),null}if(0===r.indexOf("CB_")){var o=$(t).data("params").status,s=$(t).data("params").entityId;"edit"==o?CustomButtonJSObjectInit.execute(r.split("CB_")[1],"cbeditInv",s):CustomButtonJSObjectInit.execute(r.split("CB_")[1])}}"undefined"!=typeof crmLookupBusinessCard&&(crmLookupBusinessCard.result=null),void 0!==n&&"Quotes"===n&&void 0!==r&&("save"===r?Crm.client_tracking("CPQ-Quotes-Save button in create/edit page"):"saveAndNew"===r?Crm.client_tracking("CPQ-Quotes-Save and New button in create/edit page"):"cancel"===r&&Crm.client_tracking("CPQ-Quotes-Cancel button in create/edit page"))}},crmTemplate.bindEventsToTimeField=function(e){var t=this,a=!1;"HH:mm"===Crm.userDetails.TIME_FORMAT&&(a=!0);var l=t.getAttribute("id");if("Crm_Events_ENDDATETIME_TimeOption"==l)$("#Crm_Events_ENDDATETIME_TimeOption_List").remove(),$(t).timeEntry({ampmNames:[I18n.getMsg("AM"),I18n.getMsg("PM")],ampmPrefix:" ",timeSteps:[1,1,0],useMouseWheel:!1,spinnerImage:null,show24Hours:a}).change((function(){Events.setEndDateAndTime(!1,!0),$("#Crm_Events_ENDDATETIME_TimeOption_List").remove()})),$(t).click((function(e){if(hideMenu(e),$("#eventRecurringDiv").is(":visible")||void 0===$("#Crm_Events_REPEATTYPE").val()||"none"===$("#Crm_Events_REPEATTYPE").val()||!Events.currentStatus||"create"!==Events.currentStatus&&"clone"!==Events.currentStatus){if(!$("#Crm_Events_ENDDATETIME_TimeOption_List").length){var t=this,a=new Date($("#Crm_Events_STARTDATETIME").data("dateObj")),l=Utils.getTimeArrayWithGivenInterval(!1,30,a,"timeDiff");l=l.splice(1,6);var n=renderingUtils.constructList(l,void 0,(function(e){var a=parseInt($(e.firstChild).attr("diff")),l=$("#Crm_Events_STARTDATETIME").data("dateObj"),n=new Date(l.valueOf()+60*a*1e3);$("#Crm_Events_ENDDATETIME").data("dateObj",n).data("edited",!0);var r=!1;"HH:mm"===Crm.userDetails.TIME_FORMAT&&(r=!0);var i=$("#Crm_Events_ENDDATETIME_TimeOption");if(r)i.val(Utils.formatTimeVal(n.getHours())+":"+Utils.formatTimeVal(n.getMinutes()));else{var o=Utils.convertTo12HoursFormatTimeObj(n);i.val(o.hrs+":"+o.mins+" "+I18n.getMsg(o.meridiem.toUpperCase()))}Events.setEndDateAndTime(!1,!1,n),$("#Crm_Events_ENDDATETIME").data("edited",!0),$("#Crm_Events_ENDDATETIME_TimeOption_List").remove(),$(t).trigger("create_edit_clone_DomChange")}));$(n).attr({id:this.id+"_List",class:"selectField-time-List eventActionsMenu",onclick:"sE(event)"}),$(t).after(n);var r=$("#Crm_Events_ENDDATETIME_TimeOption").position();$(n).css({left:r.left+10+"px",top:"41px"}).show()}}else Events.showRecurringActivity();return!1}));else if("Crm_Events_STARTDATETIME_TimeOption"==l)$("#Crm_Events_STARTDATETIME_TimeOption_List").remove(),Events.currentStatus&&$(t).click((function(e){if(hideMenu(e),"create"!=Events.currentStatus&&"clone"!=Events.currentStatus||null==$("#Crm_Events_REPEATTYPE").val()||"none"==$("#Crm_Events_REPEATTYPE").val()){if(!$("#Crm_Events_STARTDATETIME_TimeOption_List").length){var t=this,a=new Date($("#Crm_Events_STARTDATETIME").data("dateObj")),l="HH:mm"===Crm.userDetails.TIME_FORMAT;if(l)var n=Utils.getTimeStringWithAmPm(a);else n=Utils.convertTo12HoursFormatTimeObj(a);n.mins<30?n.mins=0:n.mins="30";var r,i=Utils.getTimeArrayWithGivenInterval(!1,30,void 0,"meridiem"),o=($("#Crm_Events_STARTDATETIME_TimeOption").val(),renderingUtils.constructList(i,(function(e){var t=e.children().eq(0).attr("hrs"),a=e.children().eq(0).attr("mins"),l=e.children().eq(0).attr("meridiem");parseInt(n.hrs,10)!==parseInt(t,10)||parseInt(n.mins,10)!==parseInt(a,10)||""!==l&&n.meridiem.toLowerCase()!==l.toLowerCase()||(e.addClass("li_on"),r=e)}),(function(e){var a=$(e.firstChild),n=a.attr("hrs"),r=a.attr("mins"),i=a.attr("meridiem");l||(n=Utils.convertTimeTo24HoursFormat(parseInt(n,10),i));var o=$("#Crm_Events_STARTDATETIME").data("dateObj");o.setHours(n),o.setMinutes(r),Events.setStartDateAndTime(o),Events.setEndDateAndTime(!0,!1,o),$(t).trigger("create_edit_clone_DomChange"),renderingUtils.removeDummyBackground(!0),$("#Crm_Events_STARTDATETIME_TimeOption_List").remove()})));$(o).attr({id:this.id+"_List",class:"selectField-time-List eventActionsMenu",onclick:"sE(event)"}),$(o.firstChild).css({height:"200px"}),$(document.body).append(o);var s=$("#Crm_Events_STARTDATETIME_TimeOption").offset(),d=$("#Crm_Events_STARTDATETIME_TimeOption").outerHeight();$(o).css({position:"absolute",left:s.left+"px",top:s.top+d+"px","z-index":32}).show(),o.firstChild.id="Crm_Events_STARTDATETIME_SCROLLDIV"}r&&r[0]?thirdPartyUtils.bindPerfectScroll("#Crm_Events_STARTDATETIME_SCROLLDIV",{start:r[0]}):thirdPartyUtils.bindPerfectScroll("#Crm_Events_STARTDATETIME_SCROLLDIV")}else Events.showRecurringActivity();return!1})),$(t).timeEntry({ampmNames:[I18n.getMsg("AM"),I18n.getMsg("PM")],ampmPrefix:" ",timeSteps:[1,1,0],spinnerImage:null,useMouseWheel:!1,show24Hours:a}).change((function(){renderingUtils.removeDummyBackground(!0),Events.setStartDateAndTime(),Events.setEndDateAndTime(!0),$("#Crm_Events_STARTDATETIME_TimeOption_List").remove()}));else if("Crm_Calls_CALLSTARTDATETIME_TimeOption"==l&&isNewCallView){if($("#"+l+"_List").remove(),!t.value){var n="HH:mm"===Crm.userDetails.TIME_FORMAT;if(i=$("#"+this.id.substr(0,this.id.indexOf("_TimeOption"))).data("dateObj"))if(n)var r=Utils.getTimeStringWithAmPm(i);else r=Utils.convertTo12HoursFormatTimeObj(i);else t.value="";r&&(t.value=r.hrs+":"+r.mins+" "+I18n.getMsg(r.meridiem.toUpperCase()))}$(t).timeEntry({ampmNames:[I18n.getMsg("AM"),I18n.getMsg("PM")],ampmPrefix:" ",timeSteps:[1,1,0],spinnerImage:null,useMouseWheel:!1,show24Hours:a}),$(t).click((function(){var t=$(this),l=this.id,n=$(this).siblings("#"+crmCallsNew.fields.Call_StartDate);$("#"+l+"_List").remove();var r=new Date(n.data("dateObj")),i="HH:mm"===Crm.userDetails.TIME_FORMAT;if(i)var o=Utils.getTimeStringWithAmPm(r);else o=Utils.convertTo12HoursFormatTimeObj(r);o.mins<30?o.mins=0:o.mins=30,Crm.menu.menusInDisplay[l+"_List"]=!0;new CrmDate;var s,d=n.val().replace(/^\s+/g,"").replace(/\s+$/g,"");splitDateVal(d);crmCallsNew.getCallStartCrmDate().isToday()&&(s=$("#createEditCallPopup #"+crmCallsNew.fields.Call_StartDate).length>0?n.data("timeLimit"):"past");var u,c=Utils.getTimeArrayWithGivenIntervalNew(30,s),m=n.data("bestTimeInfo")?n.data("bestTimeInfo"):{},p=($(this).val(),null);Object.keys(m).length>0&&(p=$("<div>",{class:"bestTimeListFilter cP",style:"display:block",onclick:"crmCallsNew.filterBestTimeClicked(this);sE(event);crmui.hideTooltip();",onmouseover:"crmCallsNew.filterBestTimeHovered(this)",onmouseout:"crmui.hideTooltip()","data-hovermessage":I18n.getMsg("crm.best.time.tooltip.show.best.time"),html:I18n.getMsg("crm.best.time.column.label")}));var f=renderingUtils.constructList(c,(function(e){var t=e.children().eq(0).attr("hrs"),a=e.children().eq(0).attr("mins"),l=e.children().eq(0).attr("meridiem"),n=e.children().eq(0).text();parseInt(o.hrs,10)!==parseInt(t,10)||parseInt(o.mins,10)!==parseInt(a,10)||""!==l&&o.meridiem.toLowerCase()!==l.toLowerCase()||(e.addClass("li_on"),u=e),-1!==Object.keys(m).indexOf(n)&&e.addClass("bestTime "+m[n])}),(function(r){var o=$(r.firstChild),s=o.attr("hrs"),d=o.attr("mins"),u=o.attr("meridiem");o.text();i||(s=Utils.convertTimeTo24HoursFormat(parseInt(s,10),u));var c=n.data("dateObj");if((c=c||new Date).setHours(s),c.setMinutes(d),a)t.timeEntry({ampmNames:[I18n.getMsg("AM"),I18n.getMsg("PM")],ampmPrefix:" ",timeSteps:[1,1,0],spinnerImage:null,useMouseWheel:!1,show24Hours:"HH:mm"===Crm.userDetails.TIME_FORMAT}),t.val(Utils.formatTimeVal(c.getHours())+":"+Utils.formatTimeVal(c.getMinutes()));else{t.timeEntry({ampmNames:[I18n.getMsg("AM"),I18n.getMsg("PM")],ampmPrefix:" ",timeSteps:[1,1,0],spinnerImage:null,useMouseWheel:!1,show24Hours:"HH:mm"===Crm.userDetails.TIME_FORMAT});var m=Utils.convertTo12HoursFormatTimeObj(c);t.val(m.hrs+":"+m.mins+" "+I18n.getMsg(m.meridiem.toUpperCase()))}if(renderingUtils.triggerEvent("change",t),""===n.val()){var p=n.data("datepattern");n.val(crmCalendar.convertToUserDatePattern(c.getDate()+" "+c.getMonth()+" "+c.getFullYear(),p))}$("#"+l+"_List").remove(),t.trigger("create_edit_clone_DomChange"),renderingUtils.removeDummyBackground(!0),e&&e()})),v=$(f).find("ul");$(f).attr({id:this.id+"_List",class:"selectField-time-List eventActionsMenu",onclick:"sE(event)"}),p?(v.before(p),v.addClass("schCallBestTimeOption"),v.css({"max-height":"200px",width:"180px","padding-top":"30px"})):v.css({"max-height":"200px",width:"180px"}),$(document.body).append(f);var h=$(this).offset(),g=$(this).outerHeight();$(f).css({position:"absolute",left:h.left+"px",top:h.top+g+"px","z-index":1e3,"padding-top":"0px"}).show();var y=this.id+"_SCROLLDIV";return v.attr("id",y),u&&u[0]?thirdPartyUtils.bindPerfectScroll("#"+this.id+"_SCROLLDIV",{start:u[0]}):thirdPartyUtils.bindPerfectScroll("#"+this.id+"_SCROLLDIV"),!1})),$(t).change((function(){renderingUtils.removeDummyBackground(!0),$("#"+this.id+"_TimeOption_List").remove();var t=$("#"+this.id.substr(0,this.id.indexOf("_TimeOption")));dtObj=new Date(t.data("dateObj"));var l=trimBoth($("#"+this.id).val().split(" ")[0]),n=$("#"+this.id).timeEntry("getTime");if(n){var r=Utils.getMeridiem(n).toUpperCase();a?dtObj.setHours(parseInt(l.split(":")[0],10)):dtObj.setHours(Utils.convertTimeTo24HoursFormat(parseInt(l.split(":")[0],10),r)),dtObj.setMinutes(parseInt(l.split(":")[1],10))}if(""===t.val()){var i=t.data("datepattern");t.val(crmCalendar.convertToUserDatePattern(dtObj.getDate()+" "+dtObj.getMonth()+" "+dtObj.getFullYear(),i))}t.data("dateObj",dtObj),$(this).data("dateObj",dtObj),e&&e()}))}else{if($("#"+l+"_List").remove(),!t.value){var i;n="HH:mm"===Crm.userDetails.TIME_FORMAT;if(i=$("#"+this.id.substr(0,this.id.indexOf("_TimeOption"))).data("dateObj"))if(n)r=Utils.getTimeStringWithAmPm(i);else r=Utils.convertTo12HoursFormatTimeObj(i);else t.value="";r&&(t.value=r.hrs+":"+r.mins+" "+I18n.getMsg(r.meridiem.toUpperCase()))}$(t).timeEntry({ampmNames:[I18n.getMsg("AM"),I18n.getMsg("PM")],ampmPrefix:" ",timeSteps:[1,1,0],spinnerImage:null,useMouseWheel:!1,show24Hours:a}).change((function(){renderingUtils.removeDummyBackground(!0),$("#"+this.id+"_TimeOption_List").remove();var t=$("#"+this.id.substr(0,this.id.indexOf("_TimeOption")));dtObj=t.data("dateObj")?new Date(t.data("dateObj")):new Date;var l=trimBoth($("#"+this.id).val().split(" ")[0]),n=$("#"+this.id).timeEntry("getTime");if(n){var r=Utils.getMeridiem(n).toUpperCase(),i=""===l.split(":")[0]?"12":l.split(":")[0],o=""===l.split(":")[1]?"00":l.split(":")[1];a?dtObj.setHours(parseInt(i,10)):dtObj.setHours(Utils.convertTimeTo24HoursFormat(parseInt(i,10),r)),dtObj.setMinutes(parseInt(o,10))}if(""===t.val()){var s=t.data("datepattern");t.val(crmCalendar.convertToUserDatePattern(dtObj.getDate()+" "+dtObj.getMonth()+" "+dtObj.getFullYear(),s))}t.data("dateObj",dtObj),$(this).data("dateObj",dtObj),"Crm_Appointments_APPOINTMENTDATEANDTIME_TimeOption"!=this.id&&"Crm_Appointments_RESCHEDULEDTO_TimeOption"!=this.id||CSU.checkServiceAvailabilityTime(t),e&&e()})).click((function(){var t=$(this),l=t.offset(),n=t.outerHeight(),r=l.left,i=l.top+n,o=$(".eventActionsMenu");if(t.closest(".newInputStyleEle").length){var s=t.parent();i=(l=s.offset()).top+s.outerHeight()}var d=this.id,u=$("#"+d.substr(0,d.indexOf("_TimeOption")));$("#"+d+"_List").remove();var c=u.data("dateObj")?new Date(u.data("dateObj")):new Date,m="HH:mm"===Crm.userDetails.TIME_FORMAT;if(m)var p=Utils.getTimeStringWithAmPm(c);else p=Utils.convertTo12HoursFormatTimeObj(c);p.mins<30?p.mins=0:p.mins="30",Crm.menu.menusInDisplay[d+"_List"]=!0;var f,v=Utils.getTimeArrayWithGivenInterval(!1,30,void 0,"meridiem"),h=($(this).val(),renderingUtils.constructList(v,(function(e){var t=e.children().eq(0).attr("hrs"),a=e.children().eq(0).attr("mins"),l=e.children().eq(0).attr("meridiem");parseInt(p.hrs,10)!==parseInt(t,10)||parseInt(p.mins,10)!==parseInt(a,10)||""!==l&&p.meridiem.toLowerCase()!==l.toLowerCase()||(e.addClass("li_on"),f=e)}),(function(t){var l=$(t.firstChild),n=l.attr("hrs"),r=l.attr("mins"),i=l.attr("meridiem"),o=$("#"+d.substr(0,d.indexOf("_TimeOption")));m||(n=Utils.convertTimeTo24HoursFormat(parseInt(n,10),i));var s=$(o).data("dateObj");(s=s||new Date).setHours(n),s.setMinutes(r);var u=$("#"+d);if(a)u.val(Utils.formatTimeVal(s.getHours())+":"+Utils.formatTimeVal(s.getMinutes()));else{var c=Utils.convertTo12HoursFormatTimeObj(s);u.val(c.hrs+":"+c.mins+" "+I18n.getMsg(c.meridiem.toUpperCase()))}if(renderingUtils.triggerEvent("change",u),""===o.val()){var p=o.data("datepattern");o.val(crmCalendar.convertToUserDatePattern(s.getDate()+" "+s.getMonth()+" "+s.getFullYear(),p))}$("#"+d+"_List").remove(),u.trigger("create_edit_clone_DomChange"),renderingUtils.removeDummyBackground(!0),e&&e()}))),g=this.id;return $(h).attr({id:g+"_List",class:"selectField-time-List eventActionsMenu",onclick:"sE(event)"}),$(h.firstChild).css({height:"200px"}),"Crm_Appointments_APPOINTMENTDATEANDTIME_TimeOption"==g||"Crm_Appointments_RESCHEDULEDTO_TimeOption"==g||"timechange1_0"==g||"timechange2_0"==g||"timechange1_1"==g||"timechange2_1"==g?$("#show").append(h):$(document.body).append(h),o.hide(),void 0!==d&&(d.startsWith("Crm_Users_USERCF")||d.startsWith("Crm_Calls_CALLSTARTDATETIME"))?$(h).css({position:"absolute",left:r+"px",top:i+"px","z-index":1e3}).show():$(h).css({position:"absolute",left:r+"px",top:i+"px","z-index":32}).show(),h.firstChild.id=this.id+"_SCROLLDIV",f&&f[0]?thirdPartyUtils.bindPerfectScroll("#"+this.id+"_SCROLLDIV",{start:f[0]}):thirdPartyUtils.bindPerfectScroll("#"+this.id+"_SCROLLDIV"),!1}))}!$("#CFSchedulerTable").length>1&&$(t).blur((function(e){if(this&&""===this.value){var l=$(this).data("dateObj");if(l||(l=new Date),a)$(t).val(Utils.formatTimeVal(l.getHours())+":"+Utils.formatTimeVal(l.getMinutes()));else{var n=Utils.convertTo12HoursFormatTimeObj(l);$(t).val(n.hrs+":"+n.mins+" "+I18n.getMsg(n.meridiem.toUpperCase()))}var r=$("#"+this.id.replace("_TimeOption",""));if(""===r.val()){var i=r.data("datepattern");r.val(crmCalendar.convertToUserDatePattern(l.getDate()+" "+l.getMonth()+" "+l.getFullYear(),i))}var o=this.id+"_List";Crm.menu.hideMenu(e,o)}if(e&&e.relatedTarget){o=this.id+"_List";Crm.menu.hideMenu(e,o)}})),t=null},crmTemplate.createvarFieldRow=function(e){var t=$(Handlebars.templates.crmFormFields(e));return t.find("[data-fieldType='dateField']").each(crmTemplate.bindEventsToDateField),t.find("[data-fieldType='timeField']").each(crmTemplate.bindEventsToTimeField),t.find("span[id^='currencySymbol']").text(currencyForVariables(Crm.userDetails.BASE_CURRENCY)),t.find("select").each((function(){thirdPartyUtils.bindSelect2(this)})),t},crmTemplate.isIntegLayout=function(e){if(e&&e.layout_jsonarrayObj&&e.layout_jsonarrayObj.layout_jsonarrayObj){var t=e.layout_jsonarrayObj.layout_jsonarrayObj,a=e.layout_jsonarrayObj.currLayoutId,l=t.filter((function(e){return e.LAYOUTID===a}));return l&&l.length>0&&"12"===l[0].SOURCE}},crmTemplate.handleSenderAddressErrorForZohoCampaigns=function(e){var t,a;e.Campaigns?(t=e.Campaigns.section,a=["FL","sysRefName","picklistmap"]):(t=e.sections,a=["fields","api_name","pick_list_values"]);var l=t.filter((function(e){return"Native__Campaigns__Extn__Zoho_Campaign_Details"===e.name}));l&&l.length>0&&(l[0][a[0]].filter((function(e){return"Native__Campaigns__Extn__Sender_Address"===e[a[1]]}))[0][a[2]].length<=1&&$L("#zCampAlert")[0].ltProp({show:!0}))},crmTemplate.integChangeLayout=function(e,t,a,l){var n=document.getElementById("layoutDetails").querySelector("[value='"+arguments[1]+"']");if(n&&n.getAttribute("isWizard")){freezeBackground();var r=this;if(crmTemplate.isAnyChangeInForm("createEntityNewForm",e)){var i="stayonPageConfirmBox",o=$("#"+i);mailsetCenter(i),o.find(".leavePage").off("click").click(function(){commonUtils.showHideLoadingDiv(!0),o.hide(),Lyte.Router.getRouteInstance().refresh({refreshTemplate:!0}).data={isWizard:!0,selectedLayoutid:t}}.bind(r)),o.find(".stayPage").off("click").click(function(){var e=$("#defLayoutId").val(),t=$("#layoutDetails");t.find("option[value='"+e+"']").length>0&&t.add("#layoutDetails_f").val(e).change();var a=$("#zCampIntegLayout");if(a.length>0){var l="zCampIntegLayoutOffline";a.find("option[value='"+e+"']").length>0&&(l=e),a.add("#zCampIntegLayout_f").val(l).change()}o.hide(),removeFreezeLayer()}.bind(r)),o.focus()}else commonUtils.showHideLoadingDiv(!0),Lyte.Router.getRouteInstance().refresh({refreshTemplate:!0}).data={isWizard:!0,selectedLayoutid:t}}else if("zCampIntegLayoutOffline"!=t){if("true"===window.isSandboxAcc){var s=getElemById("zCampIntegLayout");return s&&(s.selectedIndex=0,getElemById("select2-zCampIntegLayout-container").innerText=I18n.getMsg("crm.chat.offline")),void crmui.showMsgBand("error",I18n.getMsg("crm.campaign.integ.sandbox.not.supported",crmTab.getDisplayName("Campaigns",!1).toLowerCase()),3e3)}$(".changeDefLayout").addClass("hide"),crmListView.trackCampaignCreatePage("Campaign_createPage",$("#zCampIntegLayout option:selected").text()),crmTemplate.changeLayout(e,t,a,l)}else{$(".changeDefLayout").removeClass("hide");var d=$("#zCampIntegLayout"),u=$("#zCampIntegLayout_f");"zCampIntegLayoutOffline"!==d.val()&&d.val(t).change(),u.length>0&&"zCampIntegLayoutOffline"!==u.val()&&u.val(t).change();var c=$("#layoutDetails");crmTemplate.changeLayout(e,c.val(),a,l)}},crmTemplate.adddropDownClass=function(){$("#select2-layoutDetails-results").addClass("crm-default-Layoutresults")},crmTemplate.changeLayout=function(e,t,a,l){var n=document.getElementById("layoutDetails").querySelector("[value='"+arguments[1]+"']");if(n&&n.getAttribute("isWizard")){freezeBackground();var r=Lyte.Router.getRouteInstance().transition.data;if(r.isWizard=!0,r.selectedLayoutid=t,r.refreshPage=!1,r.isRefresh=!0,delete r.layoutId,crmTemplate.isAnyChangeInForm("createEntityNewForm",e)){var i=this,o="stayonPageConfirmBox",s=$("#"+o);mailsetCenter(o),s.find(".leavePage").off("click").click(function(){commonUtils.showHideLoadingDiv(!0),s.hide(),Lyte.Router.getRouteInstance().setQueryParams({layoutId:t.split(";")[0],wizardId:t.split(";")[1]}).data=r}.bind(i)),s.find(".stayPage").off("click").click(function(){commonUtils.showHideLoadingDiv(!1);var e=$("#defLayoutId").val(),t=$("#layoutDetails");t.find("option[value='"+e+"']").length>0&&t.add("#layoutDetails_f").val(e).change();var a=$("#zCampIntegLayout");if(a.length>0){var l="zCampIntegLayoutOffline";a.find("option[value='"+e+"']").length>0&&(l=e),a.add("#zCampIntegLayout_f").val(l).change()}s.hide(),removeFreezeLayer()}.bind(i)),s.focus()}else commonUtils.showHideLoadingDiv(!0),Lyte.Router.getRouteInstance().setQueryParams({layoutId:t.split(";")[0],wizardId:t.split(";")[1]}).data=r}else if(a&&"clientPortal"===a)crmTemplate.changeLayoutReq(e,t,a,l);else{var d=Lyte.Router.getRouteInstance().transition.data;if(d.layoutId=t,delete d.isRefresh,delete d.isWizard,delete d.selectedLayoutid,freezeBackground(),crmTemplate.isAnyChangeInForm("createEntityNewForm",e)){o="stayonPageConfirmBox",s=$("#"+o);mailsetCenter(o),s.find(".leavePage").off("click").click((function(){if(commonUtils.showHideLoadingDiv(!0),$("#"+o).hide(),"generate-po"==Lyte.Router.getRouteInstance().routeName){var e=crmCommonModule.createEditJson.idlist;e+=":"+crmCommonModule.createEditJson.selectVendors,e+=":"+crmCommonModule.createEditJson.productLineItems["Vendor Name"],createPOTemplate(e,t),removeFreezeLayer()}else Lyte.Router.getRouteInstance().setQueryParams({layoutId:t}).data=d})),s.find(".stayPage").off("click").click((function(){var e=$("#defLayoutId").val(),t=$("#layoutDetails");t.find("option[value='"+e+"']").length>0&&t.add("#layoutDetails_f").val(e).change();var a=$("#zCampIntegLayout");if(a.length>0){var l="zCampIntegLayoutOffline";a.find("option[value='"+e+"']").length>0&&(l=e),a.add("#zCampIntegLayout_f").val(l).change()}$("#"+o).hide(),removeFreezeLayer()})),s.focus()}else commonUtils.showHideLoadingDiv(!0),Lyte.Router.getRouteInstance().setQueryParams({layoutId:t}).data=d}},crmTemplate.changeLayoutReq=function(e,t,a,l){var n,r,i=Crm.getModuleObj(e),o=Crm.getCrmBasePath()+"/Create.do",s=$("#fillUpFieldId").val(),d=$("#fillUpModule").val(),u=$("#listRelationId").val(),c=$("#entityid").val(),m=$("#relmodule").val(),p=$("#fillUpEntityname").val();if(r=d?{module:e,format:"json",layoutId:t,fillUpModule:d,fillUpFieldId:s,listRelationId:u,entityid:c,relmodule:m,entityname:p}:null!=a&&null!=a&&""!=a&&"clientPortal"===a?{module:e,format:"json",layoutId:t,profileId:l}:{module:e,format:"json",layoutId:t},window.location.pathname===Crm.getCrmBasePath()+"/GeneratingPO.do"){o=Crm.getCrmBasePath()+"/CreatePOForProducts.do";r={module:e,layoutId:t,selectVendors:$("#selectVendors").val(),idlist:$("#idlist").val()},n=$("#Crm_PurchaseOrders_VENDORID")?$("#Crm_PurchaseOrders_VENDORID").val():""}var f=new crmRequestPool;return f.followOrder=!0,f.initiate({action:o,type:"GET",data:r,dataType:"json",success:function(t){if(t&&"crm.campaign.integ.sandbox.not.supported"===t.error){$(".changeDefLayout").removeClass("hide");var l=getElemById("zCampIntegLayout");return l&&(l.selectedIndex=0,getElemById("select2-zCampIntegLayout-container").innerText=I18n.getMsg("crm.chat.offline")),commonUtils.showHideLoadingDiv(!1),removeFreezeLayer(),void crmui.showMsgBand("error",I18n.getMsg("crm.campaign.integ.sandbox.not.supported",crmTab.getDisplayName("Campaigns",!1).toLowerCase()),3e3)}if(t.webinar_trial_expired){var r=networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("zohowebinar")]),s=networkUtils.returnDependencyFiles(["crm-webinar-common.js","crm-webinar-data-store.js"],crmConstants.jsStaticPathForLyte),d=networkUtils.returnDependencyFiles(["crm-webinar-common.css"],crmConstants.cssStaticPathForLyte);return Lyte.injectResources(r.concat(s.concat(d)),void 0,(function(){Lyte.Component.render("crm-webinar-trial-expiry-modal",t,"#show")})),void commonUtils.showHideLoadingDiv(!1)}if(t.productLineItems&&(window[e].currentStatus="create"),null!=a&&null!=a&&""!=a&&"clientPortal"===a?i.createTemplate(t,void 0,"layoutPreview"):i.createTemplate(t),crmTemplate.isIntegLayout(t)&&crmTemplate.handleSenderAddressErrorForZohoCampaigns(t),t.productLineItems)if(o===Crm.getCrmBasePath()+"/CreatePOForProducts.do"){if(Crm.userDetails.isLookupAdvancedSearchEnabledInLineItem)(u=t.productLineItems).fieldMeta=t.entityMapJson.PRODUCTDETAILS,productDetails.setValuesForAddedRowForEdit(u,!0);else productDetails.setValuesForAddedRowForEdit(t.productLineItems,!0);$("#Crm_PurchaseOrders_VENDORID").val(n),$("#Crm_PurchaseOrders_VENDORID").data("id",$("#selectVendors").val())}else if(Crm.userDetails.isLookupAdvancedSearchEnabledInLineItem){var u;(u=t.productLineItems).fieldMeta=t.entityMapJson.PRODUCTDETAILS,productDetails.setValuesForAddedRowForEdit(u)}else productDetails.setValuesForAddedRowForEdit(t.productLineItems);if(productDetails.grandTaxChanged=!0,$("#productList").find(".pB20").show(),$("#productList").find(".pB20").find(".wrap").show(),$("#addLinesBtnLwr").hide(),loadClassFns1(),loadClassFns2(),productDetails.fillCurrencySymbolsInLineHeaders(),productDetails.fillCurrSymForGrandVals(),"Contacts"===e){var c=$("#Crm_Contacts_ACCOUNTID");if(c&&0===c.length){var m=$("#Crm_Contacts_REPORTINGTOCONTACTID");if(m&&m.length>0){var p=void 0!==Crm.moduleInfo.Accounts?Crm.moduleInfo.Accounts.translatedSingularLabel:"Account",f=$("#Contacts_fldRow_REPORTINGTOCONTACTID");f.attr("class","REPORTINGTOCONTACTID tabDivCreate noclick");var v=I18n.getMsg("crm.contact.hierarchy.Specify_account_name",I18n.getMsg(p));f.attr("onmouseenter","zctt.showtt('"+v+"');"),f.attr("onmouseleave","zctt.hidett();"),m.val(""),m.prop("disabled",!0),m.autocomplete("disable")}}}commonUtils.showHideLoadingDiv(),commonUtils.showHideLoadingDiv(!1),removeFreezeLayer()},error:function(e){commonUtils.showHideLoadingDiv(!1),removeFreezeLayer();var t="crm.record.delete.message";-1!=e.responseText.indexOf("FEATURELIMIT_ERROR_403::::FEATURELIMITEXCEEDS")&&(t="crm.newfree.limit.exceed");var a='<div onclick=/"sE()" class="w500 p20"><div class="floatL pL20 w430"><div class="f20"><h2 style="color:#E20000";>'+I18n.getMsg("crm.delete.error")+'</h2></div><div class="mT10">'+I18n.getMsg(t,[Crm.getCrmBasePath()])+'</div></div><br class="clearB"><div  class="alignright mT20"><input type="button" id="popupok" class="newgraybtn" value="'+I18n.getMsg("crm.button.ok")+"\" onclick=\"hide('popupnew');removeFreezeLayer();document.getElementById('popupnew').style.zIndex=30\"></div></div>";renderingUtils.popUpWithFreeze(a),commonUtils.showHideLoadingDiv()}}),(void 0===Crm.userDetails.LAYOUTRULEAVAILABLE||!0===Crm.userDetails.LAYOUTRULEAVAILABLE&&Crm.userDetails.LRINVOLVEDMODULES.contains(r.module))&&(r.getLayoutRuleJSON=!0,Crm.layoutRuleJSONData={},f.addUp({type:"GET",action:o,data:r,dataType:"json",success:function(e){null!==e&&(CFRExec.init(e,r.module,"edit"),CFRExec.promptIfMandatory=!1,CFRExec.evalRules("edit",!0))},error:function(){commonUtils.showHideLoadingDiv(),Crm.layoutRuleJSONData={}}})),(void 0===Crm.userDetails.VALIDATIONRULEAVAILABLE||!0===Crm.userDetails.VALIDATIONRULEAVAILABLE&&Crm.userDetails.VRINVOLVEDMODULES.contains(r.module))&&Crm.downloadValidationRules(o+"?format=json&module="+e+(r.layoutId?"&layoutId="+r.layoutId:""),e),!1},Handlebars.registerHelper("getLookupImag",(function(e,t){return crmTemplate.createLookUpImage(e,t)})),Handlebars.registerHelper("getClearLookupImage",(function(e){return crmTemplate.createLookUpClearImage(e)})),Handlebars.registerHelper("setRequiredAttributes",(function(e,t,a,l){var n=objectUtils.cloneObject(Crm.getModuleRenderingValue(t,a,l));if("htmlContainer"===a)n.id=n.id+"_"+t;else{var r="setup"===e.currentStatus?"_"+e.currentStatus:"";if("sectionContent"===a||"sectionHeading"===a){var i=e.currentSection.name.replace(/ |'/g,"_");n.id=("sectionContent"===a?"secContent_":"secHead_")+i,"Comments_Information"==i&&/Solutions|Cases/.test(t)&&/create|clone/.test(e.currentStatus)&&(n.style="display:none"),/Tasks|Calls/.test(t)&&"2"==e.currentSection.layout&&(n.style="width:100%")}else"fieldLabel"===a?(n.id="Crm_"+t+r+"_"+e.currentField.colname+"_label","true"==e.currentField.mandate&&""!=e.currentField.displaylabel&&(n.class+=" newmandatory")):n.id="Crm_"+t+r+"_"+e.currentField.colname}var o="";for(var s in n)o+=s+"='"+n[s]+"' ";return o})),Handlebars.registerHelper("getLookupImag",(function(e,t){return crmTemplate.createLookUpImage(e,t)})),Handlebars.registerHelper("getClearLookupImage",(function(e){return crmTemplate.createLookUpClearImage(e)})),Handlebars.registerHelper("getLoadLookupImage",(function(e){return crmTemplate.createLookUpLoadImage(e)})),Handlebars.registerHelper("setRequiredAttributes",(function(e,t,a,l){var n=objectUtils.cloneObject(Crm.getModuleRenderingValue(t,a,l));if("htmlContainer"===a)n.id=n.id+"_"+t;else{var r="setup"===e.currentStatus?"_"+e.currentStatus:"";if(""===r&&e.currentField&&e.currentField.suffixIndex&&"Tasks"!=t&&"Events"!=t&&"Calls"!=t&&(r="_"+e.currentField.suffixIndex),"sectionContent"===a||"sectionHeading"===a){var i=e.currentSection.name.replace(/ |'/g,"_");n.id=("sectionContent"===a?"secContent_":"secHead_")+i,"Comments_Information"==i&&/Solutions|Cases/.test(t)&&/create|clone/.test(e.currentStatus)&&(n.style="display:none"),/Tasks|Calls/.test(t)&&"2"==e.currentSection.layout&&(n.style="width:100%")}else"fieldLabel"===a?(n.id="Crm_"+t+r+"_"+e.currentField.colname+"_label","true"==e.currentField.mandate&&""!=e.currentField.displaylabel&&(Crm.userDetails.isMandatorySubFormEnabled&&"true"===e.currentField.issubformfield?n.class+=" newSubformMandatory":n.class+=" newmandatory")):n.id="Crm_"+t+r+"_"+e.currentField.colname}var o="";for(var s in n)o+=s+"='"+n[s]+"' ";return o})),Handlebars.registerHelper("setSectionTitle",(function(e,t){return e.enableCopyAddress=!1,"Address Information"==t.name&&crmConstants.enableCopyAddressForModules[e.module]&&(e.enableCopyAddress=!0,crmTemplate.createAddressMenu(e.module)),Handlebars.templates.crmCreateSectionTitle(e)})),Handlebars.registerHelper("constructPricingDetails",(function(e){return $("<div>").append(pricingDetails.create(e.module,!1)).html()})),Handlebars.registerHelper("constructProductDetails",(function(e){if(Crm.userDetails.isLookupAdvancedSearchEnabledInLineItem&&(e.isLookupAdvancedSearchEnabled=!0),e.TAX_MIGRATION_COMPLETED=Crm.userDetails.TAX_MIGRATION_COMPLETED,!e.productLineItemFields&&e.currentField&&e.currentField.productLineItems&&e.currentField.productLineItems.productLineItemFields){for(var t=e.currentField.productLineItems.productLineItemFields,a={},l=0;l<=t.length-1;l++)a[t[l].label]=t[l].displaylabel;e.productLineItemFields=a}return Handlebars.templates.productDetails(e)})),Handlebars.registerHelper("productDetailsRow",(function(e,t,a){return e.module=t,e.rowNumber=a,e.lookupModule="Products",e.TAX_MIGRATION_COMPLETED=Crm.userDetails.TAX_MIGRATION_COMPLETED,e.autoPopulateTax=Crm.userDetails.autoPopulateTax,Handlebars.templates.productDetailsRow(e)})),Handlebars.registerHelper("getHeadingTitle",(function(e,t){if(void 0!==moduleRecordMapping[e.module]){var a="default"==moduleRecordMapping[e.module].generated_type?moduleRecordMapping[e.module].modified_by?moduleRecordMapping[e.module].singular_label:I18n.getMsg([moduleRecordMapping[e.module].singular_label]):moduleRecordMapping[e.module].singular_label;if("Campaigns"===e.module&&e.entityid&&e.isCreateChildCampaign&&"create"===window.Campaigns.currentStatus)var l=I18n.getMsg("crm.module.child.create",a);else l=I18n.getMsg("crm.module."+window[e.module].currentStatus,a)}else l=I18n.getMsg("crm.module."+window[e.module].currentStatus,[e.module]);return l})),Handlebars.registerHelper("setBtnDetails",(function(e,t){this.btnList=[{tabIndex:"496",name:"save",html:I18n.getMsg("crm.button.save"),"cscript-tag":"record_save"}];var a=e.module,l=Crm.userDetails.permissions["Crm_Implied_Create_"+a];if("Calls"===e.module&&l)this.btnList.push({tabIndex:"497",name:"saveAndTask","cscript-tag":"record_save_and_newtask",html:I18n.getMsg("crm.button.save&newtask")});else if(l){var n=Lyte.Router.getRouteInstance()?Lyte.Router.getRouteInstance().transition.data:void 0;n&&n.isCreateChildCampaign||this.btnList.push({tabIndex:"497",html:I18n.getMsg("crm.button.save&new"),name:"saveAndNew","cscript-tag":"record_save_and_new"})}"Tasks"===e.module&&Crm.userDetails.ISGAPPS_USER&&this.btnList.push({tabIndex:"498",name:"saveAndExportToGoogleTask",html:I18n.getMsg("crm.button.Gapps.saveToGTask")}),this.btnList.push({tabIndex:"499",html:I18n.getMsg("crm.button.cancel"),name:"cancel","cscript-tag":"record_cancel"})})),crmTemplate.backUpFormVals=function(e){var t=$("[name='"+e+"']");t.data("changedFormVals",{}),t.data("initialFormVals",{}),$("[name='"+e+"']").on("ownerLookupChanged",(function(t){var a=$("[name='"+e+"']").data("changedFormVals"),l=$(renderingUtils.targetElement(t));a[l.attr("id")]=l.text()})),$("[name='"+e+"'] :input").change((function(t,a){var l=$(this),n=l.attr("id");if(("layoutDetails"==n||"zCampIntegLayout"==n)&&$(".set_mw").length>0)return!0;if("create"===a)return!0;var r=l.data();2!==r.uitype&&26!==r.uitype||!0!==r.colorcode_enabled||updateColorCodeForSelObj(l);var i=$(renderingUtils.getTargetElem(t)),o=$("[name='"+e+"']"),s=o.data("changedFormVals");s[i.attr("id")]=commonUtils.getValue(i),o.data("changedFormVals",s)})).each((function(){var e=t.data("initialFormVals"),a=$(arguments[1]);e[a.attr("id")]=commonUtils.getValue(a),t.data("initialFormVals",e)}))},crmTemplate.isAnyChangeInForm=function(e,t){for(var a=$("[name='"+e+"']").data("initialFormVals"),l=$("[name='"+e+"']").data("changedFormVals"),n=objectUtils.getKeys(l),r=0;r<n.length;r++)if(a[n[r]]!=l[n[r]])return!0;var i=$("#totalProductCount");return!!(window.location.pathname!==Crm.getCrmBasePath()+"/GeneratingPO.do"&&Crm.isInventoryModule(t)&&i&&parseInt(i.val())>0)},crmTemplate.tooltiptimeout=void 0,crmTemplate.bindFldTooltip=function(){$(".infotoolTip").on("mouseenter",(function(e){void 0!==crmTemplate.tooltiptimeout&&clearTimeout(crmTemplate.tooltiptimeout),$("#fieldTooltip").hide(),void 0!==$(this).attr("fldtooltip")&&crmTemplate.showFieldTooltip($(this).attr("fldtooltip"),$(this)),$(this).css("visibility","visible").addClass("lastHoveredIcon")})).on("mouseleave",(function(e){clearTimeout(crmTemplate.tooltiptimeout),void 0!==$(this).attr("fldtooltip")&&(crmTemplate.tooltiptimeout=setTimeout((function(){0===$("#fieldTooltip:hover").length&&crmTemplate.hideFieldTooltip()}),200))}))},crmTemplate.showFieldTooltip=function(e,t){var a=$("div#fieldTooltip"),l=t.offset().left,n=t.offset().top;a.css({display:"block"}),a.css("padding",""),a.html(e);var r=n-a.outerHeight()-13;a.css({"word-wrap":"break-word",top:r+5,left:l-8})},crmTemplate.hideFieldTooltip=function(){$("#fieldTooltip").hide(),$(".lastHoveredIcon").not(".infoTTStay").css("visibility","hidden"),$(".lastHoveredIcon").removeClass("lastHoveredIcon")},crmTemplate.addSubFromRow=function(e,t,a,l){crmTemplate.forSubformFormulaNewEpxTriggered||crmTemplate.addRowFormulaTrig(a);var n=$("#subform_"+t),r=n.data("data-max_rows"),i=n.find("tbody tr").length;if(i<r){var o=0;o=Crm.userDetails.isMandatorySubFormEnabled&&void 0===n.find("tbody tr:last-child").data("data-rowid")?1:parseInt(n.find("tbody tr:last-child").data("data-rowid"));var s=crmTemplate.getNextSubformRowId(n.data("data-subformid"),o),d=JSON.parse(n.data("data-fields")),u={};u.module=a;var c=crmTemplate.createSubFormRow(n.data("data-subformid"),s,d,u,l,a,!0,i+1,n.data("data-subformdisplaylabel"),n.data("data-subformsectionlabel"),!1,"",n.attr("isLineItemSF")),m=$(n).find(".tableHeadBg .subFrmSnFld").length;if($(c).addClass("dN"),$(c).find("textarea").css("height","18px"),c=crmTemplate.productLineItemSettingsAddRow(c),$(n).find("tbody").append(c),m>0){var p=i+1;$(n).next(".subFrmTablSerlNoOverlay").find("table tbody").append("<tr class='topband_dv_row' onmouseenter=\"crmTemplate.subFrmDeltIconShow(this, '"+t+"')\" onmouseleave='crmTemplate.subFrmDeltIconHide()'><td class='subFrmSnFld textFld'><div class='labelValCreate mL45'><input class='textField' type='text' readonly='' value='"+p+"'></div></td></tr>")}if(thirdPartyUtils.bindSelect2($(c).find(".newChosenSel select, .mlSelect select")),window[a].formulaObj.executeformulaeWithoutFields(),setTimeout((function(){$(c).removeClass("dN");var e=$("#"+t).find("tr:last"),a=e.find("textarea:first").closest("td").index();e.find("input:first").closest("td").index()<a?e.find("input:first").focus():e.find("textarea:first").focus()}),100),r<=i+1)$(e).addClass("subDisabledBtn").removeAttr("onclick").attr("onmouseenter","crmTemplate.limitReached(this,I18n.getMsg('crm.label.subform.allowedlimit','"+r+"'),'sfrmLimitReached');").attr("onmouseleave","crmTemplate.limitReachedHide('sfrmLimitReached');");else{var f=$("#totalProductCount");0!==f.length&&f.val(parseInt(f.val())+1)}n.closest(".subFrmLayout").hasClass("reorderEnabled")&&n.find("tbody").sortable("enable"),window[a].formulaObj.executeAggrWithoutFields();var v=$("html, body"),h=$(document).scrollTop(),g=$(e).offset().top,y=$(e).outerHeight();h+$(window).height()<=g+y+65&&v.stop().animate({scrollTop:h+40},500)}n.closest(".subFrmTablWrapper").animate({scrollLeft:0},300),$(n).closest(".subFrmLayout").find(".SubFrmScrolIn").length>0&&(subShadHght=$(n).closest(".subFrmTablWrapper").outerHeight()+19,$(n).closest(".subFrmLayout").find(".SubFrmScrolIn").css("height",subShadHght));for(var b={},C=this.dependentFieldsList.length,T=0;T<C;T++){if(this.dependentFieldsList[T].includes(t))this.dependentFieldsList[T].split("_")[4]===s&&(b[this.dependentFieldsList[T]]=!0)}for(var E in b){var _=$("#"+E)[0];_&&Crm.setDependent(void 0,a,_,"create")}},crmTemplate.limitReached=function(e,t,a){var l=$(e),n=l.offset().top,r=l.offset().left+l.outerWidth()+10,i=l.offset().left-200,o=$("#"+a);o.find("span").html(t),Crm.userDetails.RTL_ENABLED?(o.addClass("t-rtl"),o.css({top:n,left:i,"z-index":29}).removeClass("dN")):(o.removeClass("t-rtl"),o.css({top:n,left:r,"z-index":29}).removeClass("dN"))},crmTemplate.limitReachedHide=function(e){$("#"+e).addClass("dN")},crmTemplate.getNextSubformRowId=function(e,t){return 0!=$("#"+e+"_"+t).length?crmTemplate.getNextSubformRowId(e,t+1):t},crmTemplate.updateSubFormSerialNumber=function(e,t){for(var a=$("[id^='Crm_"+e+"_"+t+("setup"===window[e].currentStatus?"_setup":"")+"_SERIAL_NUMBER']"),l=0;l<a.length;l++){$(a[l]).val(l+1)}},crmTemplate.subFrmDeltIconShow=function(e,t){var a=$("#subfrmDelWrap"),l=$(e).index(),n=$(e).outerHeight(),r=$(e).closest(".subFrmTablWrapper").offset().left-25,i=$(e).offset().top;!0===Crm.userDetails.RTL_ENABLED?a.attr("data-subFormTabId",t).attr("data-subfCur-row",l).css({height:n,right:0,top:i}).show():a.attr("data-subFormTabId",t).attr("data-subfCur-row",l).css({height:n,left:r,top:i}).show(),a.removeClass("lastRowDelete")},crmTemplate.subFrmDeltIconHide=function(){$(".subformTabl tr").removeClass("subFrmCurDelRow"),$("#subfrmDelWrap").hide()},crmTemplate.subFrmDeltRowRemove=function(){var e=$("#subform_"+$("#subfrmDelWrap").attr("data-subFormTabId")),t=e.find("tr").eq(parseInt($("#subfrmDelWrap").attr("data-subfCur-row"))+1),a=t.siblings("tr").length,l=$("#subfrmDelWrap");l.removeClass("lastRowDelete");var n=e.data("data-parentmodule"),r=e.closest(".subFrmLayout"),o=e.find("tr").eq(parseInt(l.attr("data-subfCur-row"))+1);if($(r).find(".SubFrmScrolIn").length>0){var s=$(r).find(".SubFrmScrolIn").height()-$(o).outerHeight();$(r).find(".SubFrmScrolIn").css("height",s)}if(a>0&&a+1!=t.index()+1)o.remove();else if(a>0&&a+1==t.index()+1)o.remove(),l.addClass("lastRowDelete");else if(Crm.userDetails.isMandatorySubFormEnabled&&0===a&&"false"===e[0].getAttribute("subform-mandatory"))o.remove();else{var d=o.find("select:not([multiple])");for(d.select2("destroy"),o.data("data-linkingmodule_id",""),o.find("input").val("").data("id",""),o.find("textarea").val(""),o.find("select[multiple]").select2("val",""),i=0;i<d.length;i++){var u=d.eq(i);if(u.find("option:first").prop("selected",!0),""===u.val()&&!0===u.data("colorcode_enabled")){var c="selectColorComponent-"+u.attr("id"),m=$("#"+c);m.length>0&&m.remove()}u.addClass("selNone"),thirdPartyUtils.bindSelect2(u)}l.addClass("lastRowDelete")}var p=$("#totalProductCount");if(0!==p.length){var f=parseInt(p.val());f>1&&p.val(f-1)}var v=e.data("data-max_rows"),h=e.find("tbody tr").length;n=e.data("data-parentmodule");r.find(".subDisabledBtn").length>0&&v>h&&r.find("#subFrmaddRowBtn").removeClass("subDisabledBtn").attr("onclick","crmTemplate.addSubFromRow(this, '"+$("#subfrmDelWrap").attr("data-subFormTabId")+"','"+n+"','1')").removeAttr("onmouseenter onmouseleave"),r.find(".subFrmTablSerlNoheadOverlay").length>0&&(r.find(".subFrmTablSerlNoOverlay tbody").html(""),r.find(".subformTabl tbody tr").each((function(){r.find(".subFrmTablSerlNoOverlay tbody").append("<tr class='topband_dv_row' onmouseenter=\"crmTemplate.subFrmDeltIconShow(this, '"+$("#subfrmDelWrap").attr("data-subFormTabId")+"')\" onmouseleave='crmTemplate.subFrmDeltIconHide()'><td class='subFrmSnFld textFld' style='height: "+$(this).find("td:first-child").outerHeight()+"px'><div class='labelValCreate mL45'><input class='textField' type='text' readonly value='"+($(this).index()+1)+"' /></div></td></tr>")}))),e.closest(".subFrmLayout").hasClass("reorderEnabled")&&1==t&&e.find("tbody").sortable("disable"),crmTemplate.updateSubFormSerialNumber(n,e.data("dataSubformid")),window[n].formulaObj.executeformulaeWithoutFields(),window[n].formulaObj.executeAggrWithoutFields()},crmTemplate.resetSubformRows=function(e){var t=$("#subform_"+e),a=t.data("data-parentmodule"),l=t.closest(".subFrmLayout"),n=t.find("tbody tr:gt(0)"),r=n.length,i=t.find("tbody tr:first"),o=i.eq(0),s=l.find(".SubFrmScrolIn");if(s.length>0){var d=s.height()-r*t.find("tbody tr:last").outerHeight();s.css("height",d)}n.remove();var u=o.find("select:not([multiple])"),c=u.length;u.select2("destroy"),o.data("data-linkingmodule_id",""),o.find("input").val("").data("id",""),o.find("textarea").val(""),o.find("select[multiple]").select2("val","");for(var m=0;m<c;m++){var p=u.eq(m);p.find("option:first").prop("selected",!0),p.addClass("selNone"),thirdPartyUtils.bindSelect2(p)}var f=$("#totalProductCount");0!==f.length&&f.val(1);var v=t.data("data-max_rows"),h=i.length;a=t.data("data-parentmodule");l.find(".subDisabledBtn").length>0&&v>h&&l.find("#subFrmaddRowBtn").removeClass("subDisabledBtn").attr("onclick","crmTemplate.addSubFromRow(this, '"+$("#subfrmDelWrap").attr("data-subFormTabId")+"','"+a+"','1')").removeAttr("onmouseenter onmouseleave"),l.find(".subFrmTablSerlNoheadOverlay").length>0&&(l.find(".subFrmTablSerlNoOverlay tbody").html(""),l.find(".subformTabl tbody tr").each((function(){l.find(".subFrmTablSerlNoOverlay tbody").append("<tr class='topband_dv_row' onmouseenter=\"crmTemplate.subFrmDeltIconShow(this, '"+$("#subfrmDelWrap").attr("data-subFormTabId")+"')\" onmouseleave='crmTemplate.subFrmDeltIconHide()'><td class='subFrmSnFld textFld' style='height: "+$(this).find("td:first-child").outerHeight()+"px'><div class='labelValCreate mL45'><input class='textField' type='text' readonly value='"+($(this).index()+1)+"' /></div></td></tr>")}))),l.hasClass("reorderEnabled")&&t.find("tbody").sortable("disable"),crmTemplate.updateSubFormSerialNumber(a,t.data("dataSubformid")),window[a].formulaObj.executeformulaeWithoutFields(),window[a].formulaObj.executeAggrWithoutFields()},crmTemplate.appendSubFrmSnOverLay=function(){for(var e=$(".subFrmTablWrapper"),t=e.length,a=0;a<t;a++){var l=e.eq(a),n=l.find(".subformTabl");if(n.find(".tableHeadBg .subFrmSnFld").length>0)for(var r=n.data("data-subformid"),i=n.find("tbody tr").length,o=0;o<i;o++)l.find(".subFrmTablSerlNoOverlay tbody").append("<tr class='topband_dv_row' onmouseenter=\"crmTemplate.subFrmDeltIconShow(this,'"+r+"')\" onmouseleave='crmTemplate.subFrmDeltIconHide()'><td class='subFrmSnFld textFld'><div class='labelValCreate mL45'><input class='textField' type='text' readonly value='"+(o+1)+"' /></div></td></tr>")}},crmTemplate.createSubForm=function(e,t,a,l,n){t||(t={module:e});var r=l.subFormTabId;crmTemplate.forSubformFormulaNewEpxTriggered=!1;var i=l.layout,o=document.createElement("table"),s=l.isLineItemSF,d=!1;if(Crm.userDetails.isMandatorySubFormEnabled){for(var u=l.FL.length,c=0;c<u;c++)"500"===l.FL[c].uitype&&(d=l.FL[c].mandate);for(var m=t[e].subforms.section,p=m.length,f=0;f<p;f++)m[f].subFormTabId===r&&void 0!==m[f].mandatorySubform&&m[f].mandatorySubform&&(d=!0)}$(o).attr({"sub-data":a,isLineItemSF:s,"subform-mandatory":d}).data("data-columnname",n).attr("id","subform_"+r).attr("cellpadding","0").attr("cellspacing","0").addClass("invoiceTable subformTabl"),$(o).data("data-subformid",r).data("data-parentmodule",e),t.relListId&&$(o).attr("relListId",t.relListId);var v=document.createElement("tr");$(v).prepend('<td class="subFrmDragIconWrap">&nbsp;</td>').addClass("tableHeadBg");var h=document.createElement("thead");h.appendChild(v);for(var g,y=t[e].subforms.section,b=0;b<y.length;b++)if(y[b].subFormTabId==r){g=y[b];break}void 0===g&&(g=y);var C=g.FL,T=g.subFormName,E=g.displaylabel;if(C){var _;t.elementSufixId="",crmTemplate.checkAndAddSubformTabId(e,r),g.tooltip&&(_=g.tooltip);var I,k=g.reorder,w=g.maxRows;if($(o).data("data-max_rows",w),$(o).data("data-toolTip",_),$(o).data("datasubformreorder",k.toString()),$(o).data("data-subformdisplaylabel",T),$(o).data("data-subformsectionlabel",E),void 0===C.length?(C=[[C]],g.FL=C):null==C[0].length&&(C=[C],g.FL=C),s){productDetails.invModuleVsLineItemSfTabId[e]=r;var R=document.createElement("input");R.setAttribute("id","totalProductCount"),R.value=C.length,$(R).css({display:"none"}),o.append(R)}for(var L=document.createElement("tbody"),D=0;D<C.length;D++){var S,O=C[D],F=crmTemplate.getFieldTypes(O,e),M=D+1;if(0==D){t.elementSufixId="_1",$(o).data("data-fields",JSON.stringify(F));for(var A=-1,P=0;F&&P<F.length;P++)if(!0!==F[P]&&-1===["LINKINGMODULE_ID","ITEMDESCRIPTION","BOOKID","LINETAX","TOTALAFTERDISCOUNT"].indexOf(F[P].colname)){t.currentField=F[P],t.currentField.rowNum=1,t.currentField.subFormTabId=r,t.currentField.subformdisplaylabel=T,t.currentField.subformsectionlabel=E,window[e].formulaObj.subFormVssubFormFields[r]=r+"_"+t.currentField.colname;var x=document.createElement("td"),N=crmTemplate.getCssClass(F[P],x);switch(x.className=N,F[P].colname){case"PRODUCTID":A=P,x.className=x.className+" pli_productName";break;case"TOTAL":x.className=x.className+" pli_amount";break;case"NETTOTAL":x.className=x.className+" pli_total";break;case"QUANTITY":x.className=x.className+" pli_quantity"}x.appendChild(crmTemplate.createFieldLabel(t,r));var V=F[P].uitype;if(116==V&&"currency"==F[P].formulaType||36==V||143==V||144==V||145==V){var U,j=$(x).find(".sfHeaderCurrency");U=window[e].currencyDetails&&window[e].defaultCurrency?window[e].currencyDetails[window[e].defaultCurrency].symbol:window[e].currencyDetails&&window[e].currencyDetails[Crm.userDetails.BASE_CURRENCY]?window[e].currencyDetails[Crm.userDetails.BASE_CURRENCY].symbol:Crm.userDetails.CURRENCY_DETAILS&&Crm.userDetails.BASE_CURRENCY?Crm.userDetails.CURRENCY_DETAILS[Crm.userDetails.BASE_CURRENCY].symbol:Crm.userDetails.defaultOrgCurrency?Crm.userDetails.defaultOrgCurrency:"",j.text("("+U+")").attr("id","currencySymbol_"+t.currentField.attrObj.id)}v.appendChild(x)}if(-1!==A){var B=JSON.parse($(o).data("data-fields"));delete B[A].prdDetails,$(o).data("data-fields",JSON.stringify(B))}t.elementSufixId=""}if(I=I?(S=crmTemplate.createSubFormRow(r,M,F,t,i,e,!1,D+1,T,E,!0,I,s)).cloneNode(!0):(S=crmTemplate.createSubFormRow(r,M,F,t,i,e,!1,D+1,T,E,!0,"",s)).cloneNode(!0),s){var H=$(S).find(".Crm_"+e+"_"+r+"_LISTPRICE_"+M),q=$(S).find(".Crm_"+e+"_"+r+"_BOOKID_"+M),z=$(S).find("#"+q.attr("id")+"_img"),Y=z.closest("span");z.addClass("mL0"),Y.removeClass("top_30"),Y.insertAfter(H)}L.appendChild(S)}return o.appendChild(h),o.appendChild(L),$(o).find(".tableHeadBg td").length<=6&&$(o).addClass("fewColumnSubform"),o}return!1},crmTemplate.createSubFormRow=function(e,t,a,l,n,r,i,o,s,d,u,c,m){var p=!0;c||(p=!1,c=document.createElement("tr"),$(c).prepend('<td class="subFrmDragIconWrap"><div class="subFrmDragIcon svgIcons mT8" data-zcqa="Crm_'+d+"_reorder_"+t+'"></div></td>').addClass(m?"topband_dv_row ui-state-default lineItemSubFrmRow":"topband_dv_row ui-state-default").attr("onmouseenter","crmTemplate.subFrmDeltIconShow(this, '"+e+"')").attr("onmouseleave","crmTemplate.subFrmDeltIconHide()")),$(c).data("data-rowid",t),t="_"+t,$(c).attr("id",e+t);for(var f=[],v=0,h=0;a&&h<a.length;h++)if(1!=a[h]){var g=a[h];if("LINKINGMODULE_ID"===g.colname){i||$(c).data("data-linkingmodule_id",g.defaultvalue);continue}if(i&&(g.defaultvalue_unmodified?g.defaultvalue=g.defaultvalue_unmodified:(g.defaultvalue="",g.defaultid=""),g.val))for(var y=0;y<g.val.length;y++)"true"==g.val[y].default&&(g.defaultvalue=g.val[y].content);if(g.rowNum=t,"SERIAL_NUMBER"!==g.colname||g.defaultvalue||(g.defaultvalue=o),g.subformdisplaylabel=s,g.subformsectionlabel=d,l.currentField=g,l.elementSufixId=t,l.currentField.subFormTabId=e,l.currentStatus=window[r].currentStatus,g.attrObj&&!u&&(l.currentField.attrObj.id=g.attrObj.id+t,333==g.uitype&&(l.currentField.timeAttrObj.id=g.attrObj.id+"_TimeOption")),("2"===g.uitype||"26"===g.uitype)&&!0===g.colorcode_enabled){var b,C;void 0!==g.default&&g.default.length>0?C=(b=g.default[0]).content:(b=g,C=g.defaultvalue);var T="";b&&(b.colorcode?T=g.default[0].colorcode:(T=g.defaultcolorcode?g.defaultcolorcode:getPickListColorCode(C,g.picklistmap),b.colorcode=T),g.color_code=T)}var E,_=l.currentField;if(_.subFormName=l.subFormName,_.attrObj||_.dataObj||crmTemplate.setFieldData(l,e),_=l.currentField,p){_.isSubformSplHandling=!0;var I=_.attrObj.id;I=I.substr(0,I.lastIndexOf("_")+1)+(o-1),null==(L=c.querySelector('[sf-lyte-dom-id="'+I+'"]'))&&(L=c.getElementsByClassName(I)[0]),crmTemplate.fillDataOrAttrVals(L,_.uitype,_.attrObj,"attrobj"),crmTemplate.fillDataOrAttrVals(L,_.uitype,_.dataObj,"dataobj"),crmTemplate.setFieldSpecDomAttr(L,_,o),E=$(L).closest("td")[0],E=crmTemplate.createSubFormFieldRow(n,r,E,l,e)}else E=crmTemplate.createSubFormFieldRow(n,r,"",l,e);if("SERIAL_NUMBER"===l.currentField.colname&&$(E).find('[data-colname="SERIAL_NUMBER"]').attr({readonly:!0,disabled:!0}),"ITEMDESCRIPTION"===l.currentField.colname||"BOOKID"===l.currentField.colname){var k={};k.fldElm=$(E).find("div")[0],"ITEMDESCRIPTION"===l.currentField.colname&&$(E).find(".prdItemDesc").attr("placeholder",I18n.getMsg("Description")),k.dependent_fieldcol="BOOKID"===l.currentField.colname?"LISTPRICE":"PRODUCTID",f[v]=k,v++}else p||c.appendChild(E)}if(!p){for(y=0;y<v;y++){var w=document.createElement("span"),R=document.createElement("hr");$(R).css({"border-color":"#f8f8f861",width:"180px"}),w.append(R);var L,D=(L=$(c).find('[data-colname="'+f[y].dependent_fieldcol+'"]')).closest("td").get(0);void 0!==D&&("PRODUCTID"===f[y].dependent_fieldcol&&D.append(w),D.append(f[y].fldElm))}productDetails.bindPBIconShowOrHideSFLineItem($(c))}return c},crmTemplate.addRowFormulaTrig=function(e){window[e].formulaObj.executeForNewFormulaExpr(),crmTemplate.forSubformFormulaNewEpxTriggered=!0},crmTemplate.fillDataOrAttrVals=function(e,t,a,l){if(e.getAttribute("sf-lyte-dom-id"))e.setData(l,Handlebars.helpers.convertObjToString(a)),"dataobj"===l?(e.setData("previousValue",a["data-old-value"]),e.setData("presentValue",a["data-old-value"])):e.setAttribute("sf-lyte-dom-id",a.id);else for(var n in a){var r=a[n];void 0!==r&&(e.setAttribute(n,r),"data-old-value"===n&&["2","100","24","333","116"].indexOf(t)<=-1&&(["TAX","DISCOUNT"].indexOf(e.getAttribute("data-colname"))>-1&&""===r?(e.value=0,e.setAttribute("value",0)):(e.value=r,e.setAttribute("value",r))))}},crmTemplate.setFieldSpecDomAttr=function(e,t,a){switch(t.uitype){case"100":case"2":e.innerHTML=Handlebars.templates.crmCreateFieldContent(t);break;case"133":var l=e.nextSibling;if(null===l)return;var n=l.parentNode.getElementsByTagName("img");if(n.length>0){var r=n[0].getAttribute("data-label");r=r.substring(0,r.lastIndexOf("_")+1)+a,n[0].setAttribute("data-label",r),n[0].id=r+"_img",n[1].id=r+"_img",n[2].id=r+"_loadimg"}"BOOKID"===t.colname&&(e.setAttribute("readonly","true"),e.style.display="none");break;case"301":e.checked="true"===e.value;break;case"333":var i=e.parentElement.getElementsByTagName("input")[1];crmTemplate.fillDataOrAttrVals(i,t.uitype,t.timeAttrObj),crmTemplate.fillDataOrAttrVals(i,t.uitype,t.timeDataObj);case"24":e.getAttribute("data-old-value")||(e.setAttribute("value",""),e.setAttribute("oldvalue",""));break;case"116":e.setAttribute("value",t.defaultvalue)}},crmTemplate.createSubFormAggr=function(e,t,a,l,n){if(0!=e.length){subFormTabId=l.subFormTabId,layout=l.layout;var r=document.createElement("table");$(r).attr("class",1==l.gentype&&Crm.isInventoryModule(a)?"aggFldTabl lineItemAggFldTabl fR mT10 bold":"aggFldTabl fR mT10 bold").attr("cellspacing","0");for(var i=0;i<e.length;i++){var o=e[i];if(500!=o.uitype){t.currentField=o;var s=document.createElement("tr"),d=document.createElement("td");$(d).addClass("alignright p5 pT10 pB7 pR15"),d.appendChild(crmTemplate.createFieldLabel(t)),s.appendChild(d);var u=crmTemplate.createSubFormFieldRow(layout,a,"",t,subFormTabId,!0);if("TAX"===t.currentField.colname){var c=document.createElement("input");c.setAttribute("class","recordTaxDet"),c.setAttribute("id","recordTaxDet"),c.setAttribute("type","hidden"),u.append(c)}if($(u).addClass("alignright f13 pL15 pB0"),"117"!==o.uitype&&"116"!==o.uitype||$(s).addClass("aggReadOnlyFld"),$(s).attr("id",a+"_fldRow_"+o.colname),s.appendChild(u),-1!==["117","116"].indexOf(o.uitype)&&"currency"===t.currentField.formulaType||"36"===o.uitype){var m;m=window[a].currencyDetails&&window[a].defaultCurrency?window[a].currencyDetails[window[a].defaultCurrency].symbol:window[a].currencyDetails&&window[a].currencyDetails[Crm.userDetails.BASE_CURRENCY]?window[a].currencyDetails[Crm.userDetails.BASE_CURRENCY].symbol:Crm.userDetails.CURRENCY_DETAILS&&Crm.userDetails.BASE_CURRENCY?Crm.userDetails.CURRENCY_DETAILS[Crm.userDetails.BASE_CURRENCY].symbol:Crm.userDetails.defaultOrgCurrency?Crm.userDetails.defaultOrgCurrency:"";var p,f=$(s);(p=n?f.find("#currencySymbol_Crm_"+a+"_"+o.suffixIndex+"_"+o.colname):f.find("#currencySymbol_Crm_"+a+"_"+o.colname)).length&&(p.text("("+m+") "),n?f.find("#Crm_"+a+"_"+o.suffixIndex+"_"+o.colname+"_label")[0].appendChild(p[0]):f.find("#Crm_"+a+"_"+o.colname+"_label")[0].appendChild(p[0]))}if("117"===o.uitype){var v=$(u).find("input").eq(0),h=v.val();v.val(h.replace(/,/g,""))}r.appendChild(s)}}return r}},crmTemplate.getCssClass=function(e,t){var a="";return"3"===e.uitype||"110"===e.uitype?a="subFrmMulLinFld descFld ":"36"===e.uitype||"143"===e.uitype||"144"===e.uitype||"145"===e.uitype||"117"===e.uitype?a="subFrmCurncyFld descFld ":"32"===e.uitype?a="subFrmNumbFld textFld ":"24"===e.uitype||"202"===e.uitype?a="subFrmDateFld textFld ":"2"===e.uitype?a="subFrmSelFld textFld ":"133"===e.uitype?a="subFrmLookupFld textFld ":"333"===e.uitype?a="subFrmDateAndTimeFld textFld ":"38"===e.uitype?a="subFrmPrecentFld textFld":"116"===e.uitype?a="subFrmFormulaFld textFld":"34"===e.uitype?a="subFrmDecimalFld textFld":"52"===e.uitype?a="SERIAL_NUMBER"===e.colname?"subFrmSnFld textFld":"subFrmLongIntFld textFld":"100"===e.uitype?a="subFrmMulSelFld textFld ":"301"===e.uitype&&(a="subFrmCheckBFld textFld "),"11"===e.uitype||"37"===e.uitype||"27"===e.uitype||"25"===e.uitype||"35"===e.uitype||"21"===e.uitype||"1"===e.uitype||"127"===e.uitype||"33"===e.uitype||"22"===e.uitype?a="subFrmTxtFld textFld "+t.className:"47"===e.uitype?a="subFrmLineTaxFld textFld "+t.className:a+=t.className,a},crmTemplate.getFieldTypes=function(e,t,a){for(var l=[],n=0;n<e.length;n++)("208"!==e[n].uitype||"208"===e[n].uitype&&"create"!==window[t].currentStatus)&&l.push(e[n]);return l},crmTemplate.createSubFormFieldRow=function(e,t,a,l,n,r){var i=l.currentField;window[t]&&window[t].createEditJson&&(window[t].createEditJson.entityMapJson=window[t].createEditJson.entityMapJson||{},window[t].createEditJson.entityMapJson[r?i.colname:n+"_"+i.colname]=i);var o=!0;if(!a){o=!1,a=document.createElement("td");var s=crmTemplate.getCssClass(i,a);switch(a.className=s,i.colname){case"PRODUCTID":a.className=a.className+" pli_productNameCtn";break;case"TOTAL":a.className=a.className+" pli_amountCtn";break;case"NETTOTAL":a.className=a.className+" pli_totalCtn";break;case"QUANTITY":a.className=a.className+" pli_quantityCtn"}}if("true"==i.readonly&&"SERIAL_NUMBER"!=i.colname){$(a).on("mouseover",(function(){zctt.showtt("Read only field")})),$(a).on("mouseout",(function(){$("#tooltip-zc").hide(),zctt.hidett()}))}crmTemplate.createSubformFieldContent(l,a,n,r,o);var d="#Crm_"+t+"_"+i.colname+"_label";8==i.uitype?"true"==i.readonly&&i.readonly||$(a).on("click",(function(){if($(this).find("[name='ownerNameLookup']").find(event.srcElement)==[]){var e="Crm_"+t+"_"+i.colname;Search.showLookup(e),sE()}})):$(a).find("select").length?$(a).hasClass("readonlyF")||$(a).on("click",(function(e){var a=renderingUtils.getTargetElem(e);if(!$(a).is("input")&&!$(a).is("textarea")){var l=i.attrObj?"#"+i.attrObj.id:"#Crm_"+t+"_"+i.colname;"FIRSTNAME"===i.colname&&(l+="_SALUTATION");var n=$(renderingUtils.getTargetElem(e));$(n).parent("[class^=chosen]").length||$(n).parent("[class^=select2]").length||$(n).filter("[class^=chosen]").length||$(n).filter("[class^=select2]").length||(0==$(d).find("select").length&&($("body").trigger("click"),sE()),$(l).select2("open"))}})):$(a).on("click",(function(){var e="#Crm_"+t+"_"+i.colname;l.elementSufixId&&(e+=l.elementSufixId),$(a).find(e).focus()})),$(a).find(".newCustSel").each((function(){if(0==$(this).find(".newCustSelVal").length){var e=$(this).find("select option:selected").text();$(this).append("<span class='newCustSelVal'></span>"),$(this).children(".newCustSelVal").html("<span class='pR7 crm-font-regular'>"+e+"</span> <strong class='mT7 dIB tb_downarrow'></strong>"),$(this).change((function(){var e=$(this),t=e.find("select option:selected").text();e.children(".newCustSelVal").html("<span class='pR7 crm-font-regular'>"+t+"</span> <strong class='mT7 dIB tb_downarrow'></strong>")}))}}));var u=i.subformdisplaylabel,c="PRODUCTID"===i.colname&&Crm.isLineItemSubFormModule(u)?$(a).find(".productIdFld"):$(a).find("input");if(c.length>0&&c.each((function(e,t){commonUtils.cleanWhitespace(t)})),Crm.isLineItemSubFormModule(u)||r&&Crm.isInventoryModule(t))switch(i.colname){case"DISCOUNT":case"TAX":c.css("width","inherit").addClass("cal_rate_maintain");var m=$(a).find(".cal_rate_maintain");m.attr({placeholder:"",readonly:"readonly"}),m.css({display:"inline-block"});case"LISTPRICE":$(a).addClass("lineIconWidth");break;case"TOTALAFTERDISCOUNT":c.off("change").on("change",(function(){var e=$(this),t=e.closest("tr"),a=t.data("data-rowid"),l=e.val();l=parseFloat(""===l?0:l);var n=$(productDetails.sfFldIdSuffix+"TAX_"+a),r=($(productDetails.sfFldIdSuffix+"NETTOTAL_"+a),""===n.val()?0:n.val()),i=n.attr("percentage");i=parseFloat(void 0===i||0===i.length||isNaN(i)?0:i);var o=e.attr("temp-value");parseFloat(void 0!==o&&o.length>0?o:0)!==l&&(r=i*l/100),r=void 0===r?0:r,r=productDetails.getRoundOff(n,parseFloat(r)),n.val(r.toString()).trigger("change"),n.val(r.toString()),e.attr("temp-value",l),productDetails.taxCalcTriggerSFLineItem(t)}));case"LINETAX":a.style.display="none";break;case"TOTAL":c.off("change").on("change",(function(){var e=$(this),t=e.closest("tr"),a=t.data("data-rowid"),l=e.val();l=parseFloat(""===l?0:l);var n=$(productDetails.sfFldIdSuffix+"DISCOUNT_"+a),r=$(productDetails.sfFldIdSuffix+"TOTALAFTERDISCOUNT_"+a),i=""===n.val()?0:n.val(),o=n.attr("percentage");o=parseFloat(void 0===o||0===o.length||isNaN(o)?0:o);var s=e.attr("temp-value"),d=parseFloat(void 0===s||0===s.length||isNaN(s)?0:s);if(d!==l&&"dirPrice"!==n.attr("discType")&&(i=o*l/100),i=void 0===i?0:i,n.val(parseFloat(productDetails.getRoundOff(n,parseFloat(i))).toString()).trigger("change"),r.val(productDetails.getRoundOff(r,parseFloat(l)-parseFloat(i)).toString()),e.attr("temp-value",l),r.length<1){var u=$(productDetails.sfFldIdSuffix+"TAX_"+a),c=""===u.val()?0:u.val(),m=u.attr("percentage");m=parseFloat(void 0===m||0===m.length||isNaN(m)?0:m),d!==l&&(c=m*l/100),c=void 0===c?0:c,c=productDetails.getRoundOff(u,parseFloat(c)),u.val(c.toString()).trigger("change"),u.val(c.toString())}productDetails.taxCalcTriggerSFLineItem(t),d!==l&&window[productDetails.module].formulaObj.handlePriceBookLineItemUpdate(a)}));break;case"BOOKID":$(a).find("img").addClass("hide"),c.each((function(e,t){"BOOKID"===t.getAttribute("data-colname")&&(t.setAttribute("readonly","true"),t.style.display="none")}));break;case"PRODUCTID":c.addClass("textField"),c.on("mouseover",(function(){productDetails.showPrdToolTipSFLineItem(this)})),c.on("mouseout",(function(){zctt.hidett()}))}return window[t].formulaObj.fieldVsFormulaMap["${"+i.subformdisplaylabel+"."+i.label+"}"]&&$(a).find("select,input,textarea").on("change",{self:window[t].formulaObj},window[t].formulaObj.executeRespectiveFormula),window[t].formulaObj.fieldVsAggrMap["${"+i.subformdisplaylabel+"."+i.label+"}"]&&$(a).find("input").on("change",{self:window[t].formulaObj},window[t].formulaObj.executeRespectiveAggr),a},crmTemplate.checkAndAddSubformTabId=function(e,t){if(void 0!==Crm.userDetails.MODULE_LIST[e])if(crmTab.tabVsSubTabs){var a=crmTab.tabVsSubTabs[e];if(a&&a!=t){var l=!1;for(i=0;i<a.length;i++)a[i]==t&&(l=!0);l||a.push(t)}else crmTab.tabVsSubTabs[e]=[t]}else{var n={module:[t]};crmTab.tabVsSubTabs=n}},crmTemplate.calculatorOperation=function(e,t,a){var l=$(e),n=l.parent().find(".resultValue"),r=t.which?t.which:t.keyCode,i=l.val(),o=!1;if((event.ctrlKey||event.metaKey)&&(o=!0),"keypress"===t.type){if(!([43,45,42,47,13,40,41,46,8,9,97,118,99].indexOf(r)>-1||r>=48&&r<=57))return t.preventDefault(),!1;if(13===r)return l.trigger("blur"),t.preventDefault(),!1;if(-1!==[97,99,118].indexOf(r)&&!o)return t.preventDefault(),!1}else if("keyup"===t.type){if(crmTemplate.calculationProcessArea(l),a&&!(i.split(".").length<=2&&"."===t.key||i.split(".").length>0&&"0"===t.key)){if(i=crmTemplate.memberDataStoreLI,""!==n.attr("data-valueRes"))""!==(s=n.attr("data-valueRes"))&&""!==i&&(!0===crmTemplate.setPreviousValueToContainer&&l.attr("data-finalValue",i+" = "+s),l.val(s),n.attr("data-valueRes","").addClass("vh"));else crmTemplate.calculatorProcessingOrder=[];crmTemplate.memberDataStoreLI=""}}else if(!a&&"blur"===t.type){var s;if(i=crmTemplate.memberDataStoreLI,""!==n.attr("data-valueRes"))""!==(s=n.attr("data-valueRes"))&&""!==i&&(!0===crmTemplate.setPreviousValueToContainer&&l.attr("data-finalValue",i+" = "+s),l.val(s),l.trigger("change"),CScriptLib&&(CScript.dispatchEvent("onChange",void 0,l.attr("data-sysrefname")),CScript.dispatchEvent("onChange",l.attr("data-fieldid"),s)),n.attr("data-valueRes","").addClass("vh"));else crmTemplate.calculatorProcessingOrder=[];crmTemplate.memberDataStoreLI=""}},crmTemplate.calculationProcessArea=function(e){var t=e,a=t.parent().find(".resultValue"),l=t.val(),n=t.attr("data-decimal-length"),r=l=l.replace(/ /g,""),i="";if(-1===r.indexOf(","))if(""===r||r.match(/[a-z]/i))crmTemplate.memberDataStoreLI="",a.addClass("vh"),a.attr("data-valueRes",i);else{var o=crmTemplate.checkBrackets(r);if(/^(\+|\*|\/)/.test(r)&&(r=r.substr(1)),""===l&&a.text(i),""!==r){var s=/^((?!([+\-*/.]{2,})).)*$/.test(r);if(s){if("0"==r)i="0";else if(!0===o){if(-1===r.indexOf("()")){var d=r.length-1;if(crmTemplate.checkCorrectInputEle(r))crmTemplate.checkDotCorrectInput(r)&&(-1===["+","-","*","/","."].indexOf(r[d])||"."!==(r=r.slice(0,-1)))&&(r=crmTemplate.clearLeadingZero(r),(i=new Function("return "+r)())%1!=0&&(i=void 0!==n?Number(Math.round(i+"e"+n)+"e-"+n):Math.round(100*i)/100)),crmTemplate.setPreviousValueToContainer=!0,crmTemplate.memberDataStoreLI=r}}else i=a.text();""===t.val()&&(i="",a.addClass("vh")),a.text(i),a.attr("data-valueRes",i)}!0===/[+\-*/(]/.test(l)&&o&&!0===s&&"+"!==r&&""!==r&&""!==i?a.removeClass("vh"):a.addClass("vh")}else crmTemplate.memberDataStoreLI="",a.addClass("vh")}else crmTemplate.memberDataStoreLI=""},crmTemplate.clearLeadingZero=function(e){for(var t,a=/[\d\.]+/gm;null!==(t=a.exec(e));)-1==(t=t.toString()).indexOf(".")&&null!=t.match(/(^0{1,}(?!($|\.)))/g)&&(e=e.replace(t,t.replace(/(^0{1,}(?!($|\.)))/g,"")));return e},crmTemplate.checkDotCorrectInput=function(e){for(var t=e.split(/[+\-*/,]+/),a=t.length,l=0;l<a;l++){if(t[l].split(".").length>2)return!1}return!0},crmTemplate.checkCorrectInputEle=function(e){for(var t=e.split(""),a=/\d/,l=["(",")"],n=["+","-","*","/"],r=["/","*"],i=t.length,o=0;o<i;o++){var s=t[o];if(-1!==l.indexOf(s)){var d=o-1,u=o+1;if("("===s){if(void 0!==t[d]&&(a.test(t[d])||")"===t[d]||"."===t[d]))return!1;if(void 0!==t[u]&&-1!==r.indexOf(t[u]))return!1}else if(")"===s){if(void 0!==t[u]&&(a.test(t[u])||"."===t[u]||"("===t[d]))return!1;if(void 0!==t[d]&&(-1!==n.indexOf(t[d])||"."===t[d]))return!1}}}return!0},crmTemplate.checkBrackets=function(e){var t=0;for(var a in e)if("("==e[a]?t++:")"==e[a]&&t--,t<0)return!1;return!(t>0)},crmTemplate.setMxNCloneValues=function(e,t){var a=$("#"+e);$("#temp_"+e).html("<div><span style='top: 15px;' class='vam  dIB crmGreenFilledTick pA '/><span class='f14 pL25 dIB col222'>"+I18n.getMsg("crm.field.mxn.clone.scheduler.confirm.msg",t)+"</span></div>"),a.data("mandate","false")},crmTemplate.removeMxNCloneValues=function(e){var t=$("#"+e);t.data("selectedid","").data("mandate","false"),t.parent().find("img").css("opacity",""),t.parent().find("input").css("opacity",""),t.val(""),$("#temp_"+e).remove(),$("#templabel_"+e).remove(),$(evt).parent().removeClass("mxnclonedisabled")},crmTemplate.showCalculatorInfo=function(e){var t=$(e).parents(".labelValCreate").find(".textField"),a=$(".calculaterInfo .calculatedValue");0===t.length&&(t=$(e).closest("td").find(".textField"));var l=t.attr("data-finalValue"),n=t,r=$(e).parents("td.labelVal, .labelValCreate,.detailViewContainer .labelValTwo, td"),i=r.offset(),o=i.left,s=r.outerWidth(),d=i.top+r.outerHeight(),u=$(".calculaterInfo"),c=u.outerHeight()+10,m=u.outerWidth();if(crmTemplate.checkDropDown(r,c,d)?(d=d-u.outerHeight()-r.outerHeight(),u.removeClass("arrowMoveright arrowMoveLeft").addClass("arrowMoveBottom")):u.removeClass("arrowMoveBottom arrowMoveLeft").addClass("arrowMoveright"),l&&""!==t.val()){var p=l.split("="),f=p[0];a.html('<div class=""><a href="javascript:;" id="calc_link">'+f.trim()+" = "+p[1].trim()+"</a></div>"),$("#calc_link").click((function(){crmTemplate.getCalcFinalValueTo(n,f)}))}else a.html('<div class="grayTxt f13">'+I18n.getMsg("crm.createfield.calcinfo.new")+"</div>");Crm.userDetails.RTL_ENABLED?u.removeClass("arrowMoveright").addClass("arrowMoveLeft"):o=o+s-m,u.css({top:d,left:o,display:"block"})},crmTemplate.getCalcFinalValueTo=function(e,t){e.val(t.trim()).focus(),crmTemplate.calculationProcessArea(e)},crmTemplate.checkDropDown=function(e,t){return e>renderingUtils.windowHeight-t+$(window).scrollTop()},crmTemplate.applyFocusElementTD=function(e){(e=$(e)).closest("td").addClass("wf_setFocus")},crmTemplate.removeFocusElementTD=function(e){(e=$(e)).closest("td").removeClass("wf_setFocus")},crmTemplate.applyFocusInputBox=function(e,t){e=$(e);"focus"===t.type?(e.closest(".focusEleFielEnable").addClass("focusEleFieldNewUI"),sE(t)):e.closest(".focusEleFielEnable").removeClass("focusEleFieldNewUI")},crmTemplate.unsubsProceed=function(e){var t=$(e).data("id");$(".multipleFieldsEditPop").is(":visible")||removeFreezeLayer(),$("#"+t).prop("checked",!1),$("#unsubscripeEmails").remove()},crmTemplate.unsubsCancel=function(e){var t=$(e).data("id");$(".multipleFieldsEditPop").is(":visible")||removeFreezeLayer(),$("#"+t).prop("checked",!0),$("#unsubscripeEmails").remove()},crmTemplate.assignEnrichmentDataDetails=function(e,t){var a;if(1!==CAEExec.enrichStatus&&4!==CAEExec.enrichStatus||(CAEExec.enrichStatus=2),e)a=e;else{a={};for(var l=$("#enrichMapDiv").find("tbody").find("input:checked"),n=l.length,r=0;r<n;r++){var i=l[r].getAttribute("id").split("chkBox_")[1],o=$("#valFromEnrich_"+i).text();a[i]=o}}var s=a;if(t)CAEExec.isEnrichDataInEditMode=!1;else{var d=Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam();Crm.trackSpotLightAction("Data Enrichment - Enrich Data Update Click",{Module:d,Place:"Create"}),Crm.client_tracking("Data Enrichment - Enrich Data Update Click",{Module:d,Place:"Create"})}!function(e){if(s){var t=Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam();$("#preHTMLContainer_"+t).find(".addbgC").removeClass("addbgC");for(var a=Object.keys(s),l=a.length,n=document.querySelector("crm-create-layout"),r=0;r<l;r++){e=a[r];var i=s[e],o=$("crm-create-fields#"+t+"_fldRow_"+e)[0];if(o){o.component.data.lyteViewPort&&o.component.setData("lyteViewPort",!1);var d=o.component.data.dataBind,u=o.component.data.apiName;if(d.$.model.fieldList[u]){var c,m=d.$.model.fieldList[u].fieldType;if(d.$.set(u,i),(c=o.querySelector(".FValue"))&&c.classList.add("addbgC"),"picklist"===m){var p=Lyte.registeredMixins["crm-create-mixin"].filterValidPickListValues(o.component.data.currentLayout,o.component.data.moduledataUicomp);if(!p.filter((function(e){return e.display_value===i})).length){var f=Lyte.registeredMixins["crm-create-mixin"].createDummyPLobject(p[0],i);o.component.data.initialPicklistdata.push(f)}if(c){var v=c.querySelector("lyte-dropdown");v&&(v.setData("ltPropDisplayValue",i),"-None-"!==i&&v.classList.remove("noneSelected"))}}else c=o.querySelector('[value="'+i+'"]')}}else if(null!==n){var h={};n.component.data.moduleData.fields.forEach((function(e){h[e.column_name]=e.api_name})),h[e]&&n.component.data.dataBind.$.set(h[e],i)}}}}(i),crmui.hidePopup("enrichPopupDiv"),t||CAEExec.setFeedBackAPI("update")},crmTemplate.setRelatedTo=function(e){var t=$(e).children("option:selected").val(),a=$(e).closest(".lookupWithprefix").find(".lookup_hIconO");if(t){var l=$("#Crm_Appointments_SEID_RELATEDTO"),n=$("#Crm_Appointments_SEID_RELATEDTO_img"),r=$("#Crm_Appointments_SEID option"),i=$("#Crm_Appointments_SEID");l[0]&&(l[0].value="",l.data().lookupModule=t,n.data().lookupModule=t,"Contacts"===t?n.removeClass("newSearchIcon lookup").addClass("Contacts-small"):t.startsWith("CustomModule")&&n.removeClass("Contacts-small").addClass("newSearchIcon lookup"))}i.on("select2:close",(function(){setTimeout((function(){l.focus(),r.attr("data-modulename-disabled","")}),50)})),"Contacts"==t?(a.removeClass("Accounts-small"),a.addClass("Contacts-small")):"Accounts"==t&&(a.removeClass("Contacts-small"),a.addClass("Accounts-small"))};var fileupload={module:"",fieldID:"",uploadedFileObject:[],masterRecordId:"",attachMap:{},masterAttachIdList:{},masterAttachedCountList:{},masterAttachedSizeList:{},mergeCountVariable:0,removedAttachmentIds:[],createObj:{},editObj:{},fromFileUploadField:!1,uploadIdVsEncryptedId:{},uploadDeleteObject:{},createAttachElement:function(e,t){var a,l=0,n=null,r=[],i=$L("#AjaxEditComponent");if("DESKTOPATTACHMENTS"===t){n=e.fieldId;for(var o=0,s=JSON.stringify(e),d=JSON.parse(s),u=(L="object"==typeof d.uploadedDetails?d.uploadedDetails:JSON.parse(d.uploadedDetails)).length,c=0;c<u;c++){var m="",p=L[c].uploadid,f=L[c].encryptedUploadId,v="object"==typeof L[c].uploadeddetails?L[c].uploadeddetails:JSON.parse(L[c].uploadeddetails),h=fileupload.formatBytes(v["content-length"],2);M=(M=(F=v.filename.split("."))[F.length-1]).toLowerCase();var g="fileupload.removeFileCreate('','','create','"+p+"','"+n+"')",y='<a class="PreviewImage oH tOE nwrp vab dIB uploadText col333">'+$ESAPI.encoder().encodeForHTML(v.filename)+"</a>";m+='<li id="upload_'+p+'" class="oH fileUploadLi p0 m0 mT5"> <div class="dIB fL"> <span class="dIB vat mR5 mT1 '+showImageType(M)+' svgIconsImg"></span> <span class="dIB f13 col888 pR uploadTextSpan">'+y+'<span></span></span> </div><div class="dIB fR pR mL20"> <span class="dIB f11 color_ccc pR25">'+h+'</span><div class="pA svgIconBoxFileUpload t2 r0 cP dIB"><span class="cP closeIcon dN" onclick="'+g+'"></span><span class="cNsuccessLogo svgIcons dIB"></span></div></div>',this.uploadedFileObject.push({fieldId:n,fileName:v.filename,fileID:v.resourceId,fromService:"DesktopAttachments",linkToDocs:!1,fromGoogleDocs:!1,uploadId:p,fileSize:v["content-length"],encryptedUploadId:f}),null==this.uploadDeleteObject[n]?(r.push({file_id:f}),this.uploadDeleteObject[n]=r):this.uploadDeleteObject[n].push({file_id:f}),this.uploadIdVsEncryptedId[f]=p,l=parseInt(l)+parseInt(v["content-length"]),o++,$("#cNFileUploadedListView_"+n).removeClass("dN"),$("#cNFileUploadedListView_"+n+" ul").append(m)}""==(N=$("#attachSize_"+n).val())&&(N=0),l=parseInt(N)+parseInt(l);var b=$("#attachCount_"+n).val(),C=parseInt(b)+parseInt(o);$("#attachCount_"+n).val(C),(C>=(U=(V=$("[data-fieldid="+n+"]")).attr("data-maxlength"))||l>=20971520)&&$("[data-fieldid="+n+"]").addClass("disabled"),$("#attachSize_"+n).val(l)}else if("FieldAttachmentsTeamDrive"===t){n=e.fieldId;var T=e.resources,E=T.length,_=$("#attachCount_"+n);b=_.val(),C=parseInt(b)+parseInt(E);if(!(U=(V=$("[data-fieldid="+n+"]")).attr("data-maxlength"))&&"crm.tab.module.entity.canvas"===Lyte.Router.getRouteInstance().transition.info.route&&i.length>0)U=(z=i.find("crm-file-upload")[0].component).data.cxPropField.length;if(C>U)return _.val(b),renderingUtils.showCustomAlert(I18n.getMsg("crm.attachment.fileUploadField.Maxcount.check")),!1;for(o=0,c=0;c<E;c++){var I=e.fieldId;g="fileupload.removeFileCreate('','','create','"+(p="teamdriveFieldId")+"','"+I+"')",m="";m+='<li id ="upload_'+p+'"  class="oH p0 m0 mT5 fileUploadLi"> <div class="dIB fL"> <span class="dIB vat mR5 mT1 '+"svgIcons ico-teamDrive"+' svgIconsImg"></span> <span class="dIB f13 col888 pR uploadTextSpan">'+(y='<a class="PreviewImage oH tOE nwrp vab dIB uploadText col333">'+$ESAPI.encoder().encodeForHTML(T[c].fileName)+"</a>")+'<span></span></span> </div><div class="dIB fR pR mL20"><div class="t2 r0 svgIconBoxFileUpload pA cP dIB"><span class="cP closeIcon dN" onclick="'+g+'"></span>'+(x='<span class="cNsuccessLogo svgIcons dIB"></span>')+"</div></div>";f=T[c].encryptedUploadId;this.uploadedFileObject.push({fieldId:I,fileName:T[c].fileName,fileID:T[c].link,fromService:"teamdrive",linkToDocs:!1,fromGoogleDocs:!1,uploadId:p,fileSize:"0",encryptedUploadId:f}),null==this.uploadDeleteObject[n]?(r.push({file_id:T[c].encryptedUploadId}),this.uploadDeleteObject[n]=r):this.uploadDeleteObject[n].push({file_id:T[c].encryptedUploadId}),o++,$("#cNFileUploadedListView_"+I).removeClass("dN"),$("#cNFileUploadedListView_"+I+" ul").append(m)}Crm.trackSpotLightAction("Workdrive Files Attached",{Place:"file upload field",Count:o});var k=$("#attachSize_"+n);""==(N=k.val())&&(N=0),l=parseInt(N)+parseInt(l),_.val(C),(C>=U||l>=20971520)&&V.addClass("disabled"),k.val(l)}else{n=null,o=0;for(var w=e.fromFileUpload.length,R=0;R<w;R++){var L,D=JSON.stringify(e.fromFileUpload[R]),S=(p=(L=JSON.parse(D)).uploadid,f=L.encryptedUploadId,"object"==typeof L.uploadedValues?L.uploadedValues:JSON.parse(L.uploadedValues)),O=S.resourceId;n=S.FieldId;var F,M,A=$("#cNFileUploadedListView_"+n).parent().parent(),P=A.find(".errorMsgDesc");0!=P.length&&(P.remove(),A.parent().removeClass("errorFieldP"),a=!0),M=(M=(F=S.fileName.split("."))[F.length-1]).toLowerCase();g="fileupload.removeFileCreate('','','create','"+p+"','"+n+"')",S.fileName.split("."),m="",y='<a class="PreviewImage oH tOE nwrp vab dIB uploadText col333">'+S.fileName+"</a>";var x='<span class="cNsuccessLogo svgIcons dIB"></span>';h=fileupload.formatBytes(S.streamsize,2);m+='<li id ="upload_'+p+'"  class="oH p0 m0 mT5 fileUploadLi"> <div class="dIB fL"> <span class="dIB vat mR5 mT1 '+showImageType(M)+' svgIconsImg"></span> <span class="dIB f13 col888 pR uploadTextSpan">'+y+'<span></span></span> </div><div class="dIB fR pR mL20"> <span class="dIB f11 col666 pR25">'+h+'</span><div class="t2 r0 svgIconBoxFileUpload pA cP dIB"><span class="cP closeIcon dN" onclick="'+g+'"></span>'+x+"</div></div>","OldFlow"===t?this.uploadedFileObject.push({fieldId:n,fileName:S.fileName,fileID:O,fromService:"DesktopAttachments",linkToDocs:!1,fromGoogleDocs:!1,uploadId:p,fileSize:S.streamsize,stream:S.stream,OldFlow:!0,encryptedUploadId:f}):this.uploadedFileObject.push({fieldId:n,fileName:S.fileName,fileID:O,userId:S.userId,fromService:S.fromService,linkToDocs:S.linkToDocs,fromGoogleDocs:S.fromGoogleDocs,uploadId:p,fileSize:S.streamsize,encryptedUploadId:f}),null==this.uploadDeleteObject[n]?(r.push({file_id:f}),this.uploadDeleteObject[n]=r):this.uploadDeleteObject[n].push({file_id:f}),this.uploadIdVsEncryptedId[f]=p,l+=parseInt(S.streamsize),o++,$("#cNFileUploadedListView_"+n).removeClass("dN"),$("#cNFileUploadedListView_"+n+" ul").append(m)}var N;""==(N=$("#attachSize_"+n).val())&&(N=0),l=parseInt(N)+parseInt(l);var V,U;b=$("#attachCount_"+n).val();((C=parseInt(b)+parseInt(o))>=(U=(V=$("[data-fieldid="+n+"]")).attr("data-maxlength"))||l>=20971520)&&$("[data-fieldid="+n+"]").addClass("disabled"),$("#attachCount_"+n).val(C),$("#attachSize_"+n).val(l)}var j=$L("#cNFileUploadedListView_"+n);if(j.length){var B=j.parents("crm-create-fields");if(B.length&&(B[0].component.executeMethod("setUploadDetails"),a)){var H=B[0].querySelector(".errorFieldP");H&&H.classList.remove("errorFieldP")}}if(!1===fileupload.uploadedSuccessfully){fileupload.uploadedSuccessfully=!0;var q=document.querySelector(".lyteUserPopup");q&&q.component.updateUserFileUploadField(e,t)}if("crm.tab.module.entity.canvas"===Lyte.Router.getRouteInstance().transition.info.route&&i.length>0){var z,Y=i.find("crm-file-upload")[0];if((z=Y?Y.component:void 0)&&"fileupload"===z.data.cxPropField.data_type){var K=z.getFileUploadCnt(),W=z.getData("cxPropField").length;1!==W&&5!==W||K?z.setData("disabled",!1):z.setData("disabled",!0)}}},openAttachmentOption:function(e,t,a){var l=$(e).find(".fileUploadLabel"),n=l.attr("data-module"),r=l.attr("data-fieldid");if(fileupload.module=n,fileupload.fieldID=r,!l.hasClass("disabled")){var i=renderingUtils.getTargetElem(a);$(i).data(),$("#"+t);$(e).closest("#cNdropFilesId").find("#cNFileAttachDrop").show(),l.closest(".labelValCreate").addClass("focusEleField")}},bindFileUploaderForFileUploadField:function(e){$(e.save).prop("disabled",!0),$(e.clickable).FileUploader({previewsContainer:e.container,createImageThumbnails:!1,needWMSFallback:!0,needVirusFilter:!0,clickable:e.clickable,previewTemplate:e.previewtemplate,needMultipleSelection:e.needMultipleSelection,uploadMethod:e.uploadmethod,maxFiles:e.uploadlimit,notificationLimit:5e3,maxFilesize:e.uploadsizelimit,totalFilesize:e.uploadsizelimit,flexSize:e.uploadsizeflex,parallelUploads:e.parallelupload,progressRatio:e.progressratio,fileSizeBase:e.filesizebase,save:e.save,cancel:e.cancel,init:function(){var t=this;t.on("proceed",(function(t){t.preventDefault(),t.stopPropagation();var a,l=new FormData(document[e.mainform]);this.getIdsAsFormData("uploadId","uploadIds",l),loadAjaxTab(""),$.ajax({url:document[e.mainform].action,type:"POST",data:l,contentType:!1,processData:!1,success:(a=this,function(e){if($(".zc_fileup_alert").addClass("dNImp"),commonUtils.showHideLoadingDiv(),null!=e.fieldId&&""!=e.fieldId)fileupload.createAttachElement(e,"DESKTOPATTACHMENTS");else if("crm.attachment.size.check"==e.trim())renderingUtils.showCustomAlert(I18n.getMsg("crm.FileuploadField.size.limitstmt"),"");else if("crm.attachment.fileUploadField.Maxcount.check"==e.trim())renderingUtils.showCustomAlert(I18n.getMsg("crm.attachment.fileUploadField.Maxcount.check"),"");else if("crm.attachment.fileUploadField.Mincount.check"==e.trim())renderingUtils.showCustomAlert(I18n.getMsg("crm.attachment.fileUploadField.Mincount.check"),"");else if("crm.attachment.name.check"==e.trim())renderingUtils.showCustomAlert(I18n.getMsg("crm.attachment.name.check"),"");else{var t=$L("#AjaxEditComponent"),l=JSON.parse(e),n=null,r=null;if("crm.FileuploadField.size.limitstmt"==l.message){n=l.columnname,r=l.module;var i=(s=$("#Crm_"+r+"_"+n)).data();if(removeFreezeLayer(),"crm.tab.module.entity.canvas"===Lyte.Router.getRouteInstance().transition.info.route&&t.length>0){var o=I18n.getMsg("crm.FileuploadField.size.limitstmt",$ESAPI.encoder().encodeForHTML(i.displaylabel));s[0].innerText=o,s.removeClass("dNImp")}else Crm.showErrorMsg(parent.I18n.getMsg("crm.FileuploadField.size.limitstmt",$ESAPI.encoder().encodeForHTML(i.displaylabel)),s,r)}else if("crm.attachment.fileUploadField.Maxcount.check"==l.message)n=l.columnname,r=l.module,i=(s=$("#Crm_"+r+"_"+n)).data(),removeFreezeLayer(),"crm.tab.module.entity.canvas"===Lyte.Router.getRouteInstance().transition.info.route&&t.length>0?(o=I18n.getMsg("crm.attachment.fileUploadField.Maxcount.check"),s[0].innerText=o,s.removeClass("dNImp")):Crm.showErrorMsg(parent.I18n.getMsg("crm.attachment.fileUploadField.Maxcount.check",$ESAPI.encoder().encodeForHTML(i.displaylabel)),s,r);else if("crm.attachment.fileUploadField.Mincount.check"==l.message){var s;n=l.columnname,r=l.module,i=(s=$("#Crm_"+r+"_"+n)).data(),removeFreezeLayer(),"crm.tab.module.entity.canvas"===Lyte.Router.getRouteInstance().transition.info.route&&t.length>0?(o=I18n.getMsg("crm.attachment.fileUploadField.Mincount.check"),s[0].innerText=o,s.removeClass("dNImp")):Crm.showErrorMsg(parent.I18n.getMsg("crm.attachment.fileUploadField.Mincount.check",$ESAPI.encoder().encodeForHTML(i.displaylabel)),s,r)}}if($(a.options.cancel).click(),!1===fileupload.uploadedSuccessfully){fileupload.uploadedSuccessfully=!0;var d=document.querySelector(".lyteUserPopup");d&&d.component.updateUserFileUploadField(e)}}),error:function(e){return function(){$(e.options.cancel).hide(),crmui.showMsgBand(e.options.messageType.error,I18n.getMsg("crm.fileuploader.message.uploadfailedretry"),"infinity"),$(e.options.cancel).click(),fileupload.uploadedSuccessfully=!1;var t=document.querySelector(".lyteUserPopup");t&&t.component.updateUserFileUploadField(res)}}(this)}),$(this.options.save).prop("disabled",!0)})),t.on("error",(function(e){if(e.previewElement){if(e.virus){var t=$(e.previewElement).find(".virusAlert");t.css("display","inline-block");var a=t.parent()[0];a.addEventListener("mouseenter",(function(){crmui.showTooltip(I18n.getMsg("crm.fileuploader.ToolTip.virusdetected"))})),a.addEventListener("mouseleave",(function(){crmui.hideTooltip()}))}var l=e.previewElement.querySelector("[data-dz-errormessage]");l&&l.innerHTML.length>20&&$(l).attr("title",l.innerHTML),fileupload.uploadedSuccessfully=!1;var n=document.querySelector(".lyteUserPopup");n&&n.component.updateUserFileUploadField(e)}})),t.on("customizepreviewtemplate",(function(e){if(e.previewElement){var t=e.previewElement.querySelector("[data-dz-name]"),a=e.name;a&&a.length>20&&$(t).attr("title",a);var l="";a&&""!==a&&-1!==a.lastIndexOf(".")&&(l=a.slice(a.lastIndexOf(".")+1)),(t=e.previewElement.querySelector(".dz-filename"))&&$(t).prepend(FileUploader.createElement('<span class="mR15 '+getExtensionGroup(l)+'-icon"></span>')),(t=e.previewElement.querySelector("[data-dz-size]"))&&(t.textContent="("+this.options.getFileSize(e.size)+")")}})),t.on("terminate",(function(){hideAnimatePopup(e.popupname),setTimeout((function(){$("#attachPopup").remove()}),100)}))},uploadBean:{crmHandback:{fieldId:e.fieldId,module:e.module,action:e.action},user:{zgid:e.zgid},uploadTo:e.resourcetype,folderId:e.workspace}})},formatBytes:function(e,t){if(0==e)return"0 Bytes";var a=t||2,l=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,l)).toFixed(a))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][l]},unhumanize:function(e){var t=/(\d+(?:\.\d+)?)\s?(k|m|g|t)?b?/i.exec(e);return t[1]*Math.pow(1024,{k:1,m:2,g:3,t:4}[t[2].toLowerCase()])},removeFileCreate:function(e,t,a,l,n){var r=[];if("edit"===a){var i,o=$("#fileSize_"+l);null!=o&&o.length>0&&(i=o[0].firstChild.data),i||(i="0 KB"),fileupload.removedAttachmentIds.push(l),$("#attachment_"+l).remove(),null==this.uploadDeleteObject[n]?(r.push({attachment_id:l,_delete:null}),this.uploadDeleteObject[n]=r):this.uploadDeleteObject[n].push({attachment_id:l,_delete:null})}else if("create"===a||"clone"===a){for(var s=fileupload.uploadedFileObject.length,d=0;d<s;d++)if(l==fileupload.uploadedFileObject[d].uploadId){fileupload.uploadedFileObject.splice(d,1),"clone"===a?$("#attachment_"+l).remove():$("#upload_"+l).remove();break}for(var u=fileupload.uploadDeleteObject[n],c=u.length,m=0;m<c;m++){var p=u[m];if(p.hasOwnProperty("file_id")){var f=p.file_id;if(fileupload.uploadIdVsEncryptedId[f]==l){u.splice(m,1);break}}}0==u.length&&delete fileupload.uploadDeleteObject[n]}var v=$("#attachCount_"+n),h=parseInt(v.val())-1;if(v.val(h.toString()),"edit"===a){var g=$("#attachSize_"+n),y=fileupload.unhumanize(i),b=Math.round(parseInt(g.val())-y);g.val(b.toString())}var C=$("[data-fieldid="+n+"]").attr("data-maxlength");h<C&&$("[data-fieldid="+n+"]").removeClass("disabled");var T=$L("#AjaxEditComponent");if(!C&&"crm.tab.module.entity.canvas"===Lyte.Router.getRouteInstance().transition.info.route&&T.length>0){var E=T.find("crm-file-upload")[0].component;h<E.data.cxPropField.length&&E.setData("disabled")}var _=$L("#cNFileUploadedListView_"+n);if(_.length){var I=_.parents("crm-create-fields");I.length&&I[0].component.executeMethod("setUploadDetails")}},fileuploadShowTooltip:function(e){var t=$(e).find(".fileUploadLabel");if(t.hasClass("disabled")){var a=5==t.attr("data-maxlength")?"crm.attachment.fileUploadField.Maxcount.check":"crm.attachment.fileUploadField.Mincount.check";crmui.showTooltip(I18n.getMsg(a))}},fileuploadHideTooltip:function(e){$(e).find(".fileUploadLabel").hasClass("disabled")&&crmui.hideTooltip()}};crmTemplate.createRecordNotFoundAlertDiv=function(e,t){return renderingUtils.createHTML({name:"div",attr:{id:"NotFoundAlertDiv",class:"w100p pT30"},child:[{name:"div",attr:{style:"margin:35px auto; display:table; vertical-align:top;"},child:[{name:"div",attr:{class:"kso_CautionLeft",style:"width:20%; float:left; margin-top:5px;"},child:[{name:"img",attr:{src:networkUtils.getImageUrl("cautionImg_76d861e_.jpg",ResourceConstants.CRM)}}]},{name:"div",attr:{class:"kso_CautionRight",style:"width:80%; float:left;"},child:[{name:"h2",attr:{class:"kso_CautionTitle f20",style:"color:#DD4B39;"},child:[{name:"text",content:e}]},{name:"div",attr:{class:"mT10 f13 gray2"},child:[{name:"text",content:t}]}]}]}]})},crmTemplate.getElementsByTagName=function(e,t,a){var l=(t=t||document).childNodes;if(e=e.toLowerCase(),!a)a=[];for(var n=l.length,r=this.getElementsByTagName,i=0;i<n;i++){var o=l[i];(3===o.nodeType&&"#text"===e||o.nodeName.toLowerCase()===e)&&a.push(o),o.hasChildNodes()&&a.concat(r(e,o,a))}return a};var multiLookupsView={multiLookups:{},lookupPopupRecordCount:10,currentMultiLookup:{},dissociateMLRecords:function(e,t){if(e||(e=multiLookupsView.currentMultiLookup.fldName),e.id&&(e=e.id),t)multiLookupsView.checkLinkingModulePermission("remove",multiLookupsView.dissociateMLRecords,e);else{multiLookupsView.confirmUnSelectedAction(e);var a=multiLookupsView.getParamJson(e);if(multiLookupsView.currentMultiLookup.lookuprel&&"all"===multiLookupsView.currentMultiLookup.confirmunselectedid){var l=$("#topSectionTitle").find(".dvTitle").text().trim();a.entityname=l}Crm.trackSpotLightAction("Multi Select Lookup - Remove",{Module:a.module}),a.select=!0,a.FROM_INDEX=1,a.mlaction="remove",a.TO_INDEX=multiLookupsView.lookupPopupRecordCount,multiLookupsView.removeTempWarningPopup(),multiLookupsView.submitMultiLookupForm("dissociate",Crm.getCrmBasePath()+"/Search.do","topBandPopup",a),$("#freezeBackGround").css("z-index","30"),multiLookupsView.currentMultiLookup.unselectedCount=0}if(!t){var n=$L('crm-create-fields[fld-id="'+e+'"]')[0];if(n){var r=n.getData("observeMultichanges");n.setData("observeMultichanges",!r)}}},associateLookupRelUpdate:function(){multiLookupsView.removeLookupUpdateWarningPopup(),$("#freezeBackGround").css("z-index","30"),$(".animateMl").css("visibility","hidden").addClass("cvTableAct"),$("#selected-records").css("visibility","visible")},removePermissionDeniedWarningPopup:function(){var e=$("#freezeBackGround"),t=$("#mxnEntityLookupdiv");e.attr("style","z-index:30"),t.length||$("#lookupUpdateWarningPopup").length&&e.attr("style","display:none"),removeFreezeLayer(),multiLookupsView.removeLookupUpdateWarningPopup(),e.removeClass("zindex250").css("z-index","30")},openAddMorePopup:function(e,t){e.id&&(e=e.id);var a=multiLookupsView.currentMultiLookup.selectedCount;if(multiLookupsView.currentMultiLookup&&multiLookupsView.currentMultiLookup.confirmselectedid&&""!=multiLookupsView.currentMultiLookup.confirmselectedid&&(a+=multiLookupsView.currentMultiLookup.confirmselectedid.split(",").length)>=100)renderingUtils.showCustomAlert(I18n.getMsg("crm.listview.maximum.records.alert",100));else if(t)multiLookupsView.checkLinkingModulePermission("addmore",multiLookupsView.openAddMorePopup,e);else{var l=multiLookupsView.getParamJson(e);multiLookupsView.setSelfRefParams(l,e),Crm.trackSpotLightAction("Multi Select Lookup - Add More Click",{Module:l.module}),l.select=!1,l.FROM_INDEX=1,l.mlaction="addmore",l.TO_INDEX=multiLookupsView.lookupPopupRecordCount,multiLookupsView.currentMultiLookup.searchString="",multiLookupsView.submitMultiLookupForm("confirm",Crm.getCrmBasePath()+"/Search.do","topBandPopup",l)}},setSelfRefParams:function(e,t){var a;if(e.searchmodule===e.parentModule&&!e.relatedlist&&!e.lookuprel&&(a="X"===t[t.length-1]?t.substring(0,t.length-1):t+"X",multiLookupsView.multiLookups[a])){var l=$("#"+a).data("selectedid");if(l&&""!==l&&"-"!==l&&(e.selectedidx=l,l.indexOf("-")>-1)){var n=l.split("-");e.selectedidx=n[0],e.unselectedidx=n[1]}}},checkLinkingModulePermission:function(e,t,a){var l=multiLookupsView.multiLookups[a].linkingmodule,n=(Crm.getPortalURL("Search.do?"),{actionName:"permissionCheck",mlaction:e,linkingmodule:l,fldName:a,unselectedid:multiLookupsView.currentMultiLookup.unselectedid,parentModule:multiLookupsView.getParamJson(a).parentModule,entityId:multiLookupsView.getParamJson(a).entityId});(new crmRequestPool).initiate({action:Crm.getCrmBasePath()+"/Search.do?",data:n,type:"POST",success:function(e){$("#popupnew").removeClass("mxnPermDeniedCheck"),t&&t(multiLookupsView.currentMultiLookup.fldName)},error:function(e){setTimeout((function(){$("#popupnew").addClass("mxnPermDeniedCheck"),$("#freezeBackGround").show().css("z-index","30"),multiLookupsView.cancelDeleteWarningPopup(),$("#FreezeLayer").css("z-index",252)}),10)}})},closeMLPopup:function(e){var t=$("#multipleFieldsEditPop").is(":visible");e||(e=multiLookupsView.currentMultiLookup.fldName),e.id&&(e=e.id),multiLookupsView.multiLookups[e]&&multiLookupsView.multiLookups[e].relatedlist?multiLookupsView.multiLookups={}:(multiLookupsView.currentMultiLookup.selectedid="",multiLookupsView.currentMultiLookup.unselectedid="",multiLookupsView.currentMultiLookup.confirmselectedid="",multiLookupsView.currentMultiLookup.confirmunselectedid="",multiLookupsView.currentMultiLookup.selectedCount=0,multiLookupsView.currentMultiLookup.unselectedCount=0,multiLookupsView.currentMultiLookup.searchString="",multiLookupsView.multiLookups[e]&&multiLookupsView.multiLookups[e].variedLookupValues&&(multiLookupsView.multiLookups[e].variedLookupValues=multiLookupsView.currentMultiLookup)),multiLookupsView.currentMultiLookup=null;var a=$("#searchCreatePopup:visible").length;$("#topBandPopup").css("z-index",""),hideAnimatePopup("topBandPopup",!0),a?($("#freezeBackGround").css("z-index","30"),showFreezeLayer()):t||removeFreezeLayer2(),multiLookupsView.fieldStatusUpdate(e);var l=document.querySelector(".lcMSelectLookupModalOpen");l&&l.classList.remove("lcMSelectLookupModalOpen")},fieldStatusUpdate:function(e){var t=$("input#"+e)[0];if(t){var a=$L("crm-create-layout")[0];t.style.backgroundColor=a?"#fffced":"#ffff99",setTimeout((function(){t.style.backgroundColor="transparent"}),800)}},callMultiLookupPopup:function(e){return multiLookupsView.frameMLJSON(e),"true"===e.select&&multiLookupsView.currentMultiLookup.unselectedid?(e.selectedid=multiLookupsView.currentMultiLookup.unselectedid,e.selectedIds=e.selectedid,e.selectedCount=multiLookupsView.currentMultiLookup.unselectedCount):multiLookupsView.currentMultiLookup.selectedid?(e.selectedid=multiLookupsView.currentMultiLookup.selectedid,e.selectedIds=e.selectedid,e.selectedCount=multiLookupsView.currentMultiLookup.selectedCount):(e.selectedid="",e.selectedCount=0),e.from="mLookup",e.hideAddMoreButton=Crm.userDetails.CLIENT_ACCOUNT&&e.parentModule&&(Crm.userDetails.CLIENT_TYPE===e.parentModule||Crm.userDetails.moduleVsCriteriaLookup[e.parentModule][0]===e.fldId),Handlebars.templates.crmMxNLookup(e)},partialCallBodyMultiLookupPopup:function(e){multiLookupsView.frameMLJSON(e),"true"===e.select&&multiLookupsView.currentMultiLookup.unselectedid?(e.selectedid=multiLookupsView.currentMultiLookup.unselectedid,e.selectedIds=e.selectedid,e.selectedCount=multiLookupsView.currentMultiLookup.unselectedCount):multiLookupsView.currentMultiLookup.selectedid?(e.selectedid=multiLookupsView.currentMultiLookup.selectedid,e.selectedIds=e.selectedid,e.selectedCount=multiLookupsView.currentMultiLookup.selectedCount):(e.selectedid="",e.selectedCount=0);var t="",a="",l=$("#mxnlistViewTable");if(e.body.length>0){e.from="mLookup",Handlebars.registerPartial("body",Handlebars.templates.body);for(var n=[],r=e.fromIndex-1,i=e.body.length,o=0;o<i&&void 0!==e.body[o];o++)n[r++]=e.body[o];e.body=n,a=Handlebars.templates.navigateByRecords(e),t=Handlebars.templates.body(e)}else{var s=$(l.find("#lvNoRecordsFound"));if(s){var d=s.closest("tbody");d&&d.html("")}Handlebars.registerPartial("noRecordsFound",Handlebars.templates.noRecordsFound),t=Handlebars.templates.noRecordsFound(e)}l.find("tbody").eq(0).html(t),$("#mxnnavigationlookup")[0].innerHTML=a,0===$(".customCheckBox[data-cid=mLookupselectEntity]").length&&$(".customCheckBoxChecked[data-cid=mLookupselectEntity]").length>0?$("#checkAll").attr("class","customCheckBoxChecked"):$("#checkAll").attr("class","customCheckBox")},frameMLJSON:function(e){var t={};if(multiLookupsView.multiLookups[e.fldName])t=multiLookupsView.multiLookups[e.fldName];else{var a=$("#multipleFieldsEditPop").is(":visible"),l=$("#"+e.fldName),n={selectedid:"",unselectedid:"",needconfirmid:""};if(a&&void 0!==l&&void 0!==l.data("confirmselectedid")?n.confirmselectedid=l.data("confirmselectedid"):n.confirmselectedid="",a&&void 0!==l&&void 0!==l.data("confirmunselectedid")?n.confirmunselectedid=l.data("confirmunselectedid"):n.confirmunselectedid="",window[e.parentModule]&&"clone"===window[e.parentModule].currentStatus){var r=$("#"+e.fldName).data();n.confirmselectedid=r.selectedid}n.selectedCount=0,n.unselectedCount=0,n.searchString="",n.select=e.select,n.lookuprel=!1,e.lookuprel&&(n.lookuprel=!0,t.lookuprel=!0),t.variedLookupValues=n,multiLookupsView.multiLookups[e.fldName]=t}t.relatedlist=e.relatedlist,e.relid&&(t.relid=e.relid),t.link=e.link,t.fldName=e.fldName,t.fldId=e.fldName,t.fldLabel=e.fldLabel,t.parentModule=e.parentModule,t.module=e.parentModule,t.searchmodule=e.searchmodule,t.modulesingularlabel=e.modulesingularlabel,t.modulelabel=e.modulelabel,t.entityId=e.entityId,t.linkingmodule=e.linkingmodule,t.variedLookupValues.modulesingularlabel=e.modulesingularlabel,t.variedLookupValues.modulelabel=e.modulelabel,t.variedLookupValues.select=e.select,t.variedLookupValues.fldName=e.fldName,t.sortOrderString=e.sortOrderString,t.sortColumnString=e.sortColumnString,t.mlaction=e.mlaction,t.parentColumn=e.parentColumn,multiLookupsView.currentMultiLookup=t.variedLookupValues,multiLookupsView.currentMultiLookup.parentColumn=e.parentColumn},associateMLRecords:function(e,t){e.id&&(e=e.id),$(t.target).filter("input[type=button]").prop("disabled",!0),multiLookupsView.confirmSelectedAction(e);var a=multiLookupsView.getParamJson(e);a.select=!0,a.relatedlist&&(a.select=!1),Crm.trackSpotLightAction("Multi Select Lookup - Association Save",{Place:a.relatedlist,Module:a.module}),a.mlaction="confirm",a.FROM_INDEX=1,a.TO_INDEX=multiLookupsView.lookupPopupRecordCount,a.fldValue="",multiLookupsView.currentMultiLookup.searchString="",multiLookupsView.submitMultiLookupForm("confirm",Crm.getCrmBasePath()+"/Search.do","topBandPopup",a,t);var l=$L('crm-create-fields[fld-id="'+e+'"]')[0];if(l){var n=l.getData("observeMultichanges");l.setData("observeMultichanges",!n)}},nextSelectRecords:function(e){e.id&&(e=e.id),Crm.trackSpotLightAction("Multi Select Looktup - Next");var t=multiLookupsView.getParamJson(e);t.FROM_INDEX=1,t.TO_INDEX=multiLookupsView.lookupPopupRecordCount,t.select=!1,t.mlaction="next",t.fldValue="",multiLookupsView.currentMultiLookup.searchString="",multiLookupsView.submitMultiLookupForm("next",Crm.getCrmBasePath()+"/Search.do","topBandPopup",t)},getParamJson:function(e){var t=jQuery.extend(!0,{},multiLookupsView.multiLookups[e]);return t.page=null,t.variedLookupValues=null,t},selectMultiSelectAllEntity:function(e,t){var a="";t=$(t);var l=0,n=t.data("params"),r=!1,i=t.attr("class"),o=multiLookupsView.currentMultiLookup.fldName;if(n&&(r=n.select),""===r&&(r=!1),"true"===r||!0===r?(a=multiLookupsView.currentMultiLookup.unselectedid,l=multiLookupsView.currentMultiLookup.unselectedCount):"false"!==r&&!1!==r||(n&&"next"===n.mlaction&&(multiLookupsView.currentMultiLookup.needconfirm&&""!==multiLookupsView.currentMultiLookup.needconfirm||(multiLookupsView.currentMultiLookup.needconfirm=multiLookupsView.currentMultiLookup.selectedid)),a=multiLookupsView.currentMultiLookup.selectedid,l=multiLookupsView.currentMultiLookup.selectedCount),"customCheckBox"===t.attr("class")){var s=$(".customCheckBox[data-cid=mLookupselectEntity]"),d=$(".customCheckBoxDisabled[data-cid=mLookupselectEntity]"),u=s.length,c=d.length;if(l+u>100)return void renderingUtils.showCustomAlert(I18n.getMsg("crm.mxn.assign.maximum.records.alert",100));for(var m=0;m<u;m++){if((h=$(s.eq(m))).attr("class","customCheckBoxChecked").attr("style","visibility:visible"),!("false"!==r&&!1!==r&&"true"!==r&&!0!==r||void 0!==n.mlaction&&"next"===n.mlaction)){var p=h.closest("tr"),f=p.prev("tr");p.addClass("highlgtMLookup").addClass("setTdBorBtm"),!1===f.hasClass("setTdBorBtm")&&f.addClass("setTdBorBtm")}var v=h.data("params").entityId;v+""!="error"&&(a.indexOf(v)>-1||(""===a?a=v:a+=","+v,l++))}for(m=0;m<c;m++){var h;(h=$(d.eq(m))).attr("class","customCheckBoxDisabledHover").attr("style","visibility:visible")}l>0&&($("#mxnlistViewTable #checkAll").attr("class","customCheckBoxChecked"),$("#fixedChkSelAll").attr("class","customCheckBoxChecked"))}else $.each($(".customCheckBoxChecked[data-cid=mLookupselectEntity]"),(function(e,t){var n=$(t);if("true"===r||!0===r?multiLookupsView.currentMultiLookup.unselectedCount>10?n.attr("class","customCheckBox").attr("style","visibility:visible"):n.attr("class","customCheckBox onHover").attr("style","visibility:hidden"):n.attr("class","customCheckBox").attr("style","visibility:visible"),"false"===r||!1===r||"true"===r||!0===r){var i=n.closest("tr"),o=i.prev("tr");i.removeClass("highlgtMLookup").removeClass("setTdBorBtm"),!0===o.hasClass("setTdBorBtm")&&o.removeClass("setTdBorBtm")}var s=n.data("params").entityId;a.indexOf(s)>-1&&(a=(a=(a=a.replace(s+",","")).replace(","+s,"")).replace(s,""),l--)})),l>0?$.each($(".customCheckBox.onHover[data-cid=mLookupselectEntity]"),(function(e,t){$(t).attr("class","customCheckBox").attr("style","visibility:visible")})):$.each($(".customCheckBox.onHover[data-cid=mLookupselectEntity]"),(function(e,t){$(t).closest("tr").removeClass("highlgtMLookup").removeClass("setTdBorBtm")})),$("#mxnlistViewTable #checkAll").attr("class","customCheckBox"),$("#fixedChkSelAll").attr("class","customCheckBox"),$.each($(".customCheckBoxDisabledHover[data-cid=mLookupselectEntity]"),(function(e,t){$(t).attr("class","customCheckBoxDisabled").attr("style","visibility:hidden")}));if("true"===r||!0===r){if(multiLookupsView.currentMultiLookup.unselectedid=a,multiLookupsView.currentMultiLookup.unselectedCount=l,(g=$(".mlSelectedRecord"))&&g.length>0)g.html(multiLookupsView.currentMultiLookup.unselectedCount),(y=$("#mlSelectedRecordMsg")).text(I18n.getMsg("crm.label.deduplicate.selected",Crm.moduleInfo[multiLookupsView.multiLookups[o].module].translatedPluralLabel)),1===multiLookupsView.currentMultiLookup.unselectedCount&&y.text(I18n.getMsg("crm.label.deduplicate.selected",Crm.moduleInfo[multiLookupsView.multiLookups[o].module].translatedSingularLabel));(b=$(".mlUnConfirmSelectedRecordCount"))&&b.html(multiLookupsView.currentMultiLookup.unselectedCount)}else if("false"===r||!1===r){var g,y,b;if(multiLookupsView.currentMultiLookup.selectedid=a,multiLookupsView.currentMultiLookup.selectedCount=l,(g=$(".mlSelectedRecord"))&&g.length>0)g.html(multiLookupsView.currentMultiLookup.selectedCount),(y=$("#mlSelectedRecordMsg")).text(I18n.getMsg("crm.label.deduplicate.selected",Crm.moduleInfo[multiLookupsView.multiLookups[o].module].translatedPluralLabel)),1===multiLookupsView.currentMultiLookup.selectedCount&&y.text(I18n.getMsg("crm.label.deduplicate.selected",Crm.moduleInfo[multiLookupsView.multiLookups[o].module].translatedSingularLabel));(b=$(".mlUnConfirmSelectedRecordCount"))&&b.html(multiLookupsView.currentMultiLookup.selectedCount)}var C=!1;if("customCheckBox"!=i||multiLookupsView.currentMultiLookup.dontShowWarning||multiLookupsView.currentMultiLookup.reassign||"false"!=r&&0!=r||"next"==multiLookupsView.multiLookups[o].mlaction||(C=!0),multiLookupsView.currentMultiLookup.selectedCount>0||multiLookupsView.currentMultiLookup.unselectedCount>0){if(l>0){var T;if($("#nextStep").prop("disabled",!1),$("#confirmStep").prop("disabled",!1),$("#removeAllBtn").css("visibility","hidden").css("display","none"),$("#selected-records").css("visibility","visible"),$("#selected-records .mlSelectedRecord").css("visibility","visible"),"true"===multiLookupsView.multiLookups[o].variedLookupValues.select)(T=document.getElementsByName("AddMore")[0]).setAttribute("style","display:none;visibility:hidden");C||($(".animateMl").css("visibility","hidden").addClass("cvTableAct"),$("#selected-records").css("visibility","visible"))}}else if($("#nextStep").prop("disabled",!0),$("#confirmStep").prop("disabled",!0),$(".animateMl").css("visibility","visible").removeClass("cvTableAct"),$("#selected-records").css("visibility","hidden"),$("#selected-records .mlSelectedRecord").css("visibility","hidden"),$("#removeAllBtn").css("visibility","visible").css("display","initial"),"true"===multiLookupsView.multiLookups[o].variedLookupValues.select&&(T=document.getElementsByName("AddMore")[0])){T.setAttribute("style","display:initial;visibility:visible");var E=document.getElementById("removeAllBtn");null!=E&&E.setAttribute("style","display:initial;visibility:visible")}C&&multiLookupsView.callPermissionDeniedWarningPopupFormSelectAll(t.attr("id")),multiLookupsView.currentMultiLookup.reassign=!1},callPermissionDeniedWarningPopupFormSelectAll:function(e){for(var t=multiLookupsView.currentMultiLookup.fldName,a=($("#listviewHeaderRow").find("td"),$("#mxnBody").find("tr")),l=a.length,n=0;n<l;n++){var r=a.eq(n);if($(r.find(".customCheckBox.disable")).length>0)return void multiLookupsView.permissionIssueWarningShow(null,null,multiLookupsView.multiLookups[t].searchmodule,3,e)}multiLookupsView.callLookupUpdateAllWarningPopup(e)},callLookupUpdateAllWarningPopup:function(e){var t,a=multiLookupsView.currentMultiLookup.fldName,l=$("#listviewHeaderRow").find("td"),n=l.length;for(t=0;t<n&&$(l.eq(t).find("a")).attr("id")!==multiLookupsView.currentMultiLookup.parentColumn;t++);var r=$("#mxnBody").find("tr"),i=r.length,o=!1;for(iy=0;iy<i;iy++){var s=r.eq(iy);if(0==$(s.find(".customCheckBox.disable")).length){var d=$(s.find("td").eq(t)).find("a").text();if(d&&d.trim().length>0){o=!0;$(s.find(".customCheckBoxChecked")).data("params").entityId}}}if(o){$(".animateMl").css("visibility","visible").removeClass("cvTableAct"),$("#selected-records").css("visibility","hidden");var u=$("#topBandPopup .pp-content").position().top,c=multiLookupsView.multiLookups[a].parentModule,m=moduleRecordMapping[multiLookupsView.multiLookups[a].searchmodule].plural_label.toLowerCase(),p=moduleRecordMapping[c].singular_label.toLowerCase(),f=$ESAPI.encoder(),v=I18n.getMsg("crm.mxnlookup.select",[f.encodeForHTML(moduleRecordMapping[multiLookupsView.multiLookups[a].searchmodule].plural_label)]),h=$("#topSectionTitle").find(".dvTitle").text().trim(),g=I18n.getMsg("crm.mxnlookup.lookuprel.updateselectalllookupwarning",[f.encodeForHTML(m),f.encodeForHTML(moduleRecordMapping[c].plural_label.toLowerCase()),f.encodeForHTML(m),f.encodeForHTML(p),f.encodeForHTML(h)]),y=multiLookupsView.createLookupUpdateWarningPopup(v,0,g,e,1,c);return $("#freezeBackGround").css("z-index","250"),y.css("z-index","301"),void y.show().addClass("zcrm-show").css("top",u)}$(".animateMl").css("visibility","hidden").addClass("cvTableAct"),$("#selected-records").css("visibility","visible")},callLookupUpdateWarningPopup:function(e,t,a){var l,n=multiLookupsView.currentMultiLookup.fldName,r=$("#listviewHeaderRow").find("td"),i=r.length;for(l=0;l<i&&$($(r.eq(l)).find("a")).attr("id")!==multiLookupsView.currentMultiLookup.parentColumn;l++);var o=$("#mLookup_"+e).text(),s=(e=$(a.find(".customCheckBoxChecked")).data("params").entityId,$(a.find("td").eq(l)).find("a").text());if(s&&s.trim().length>0){$(".animateMl").css("visibility","visible").removeClass("cvTableAct"),$("#selected-records").css("visibility","hidden");var d=$("#topBandPopup .pp-content").position().top,u=multiLookupsView.multiLookups[n].parentModule,c=moduleRecordMapping[multiLookupsView.multiLookups[n].searchmodule].singular_label,m=moduleRecordMapping[u].singular_label.toLowerCase(),p=I18n.getMsg("crm.mxnlookup.select",[moduleRecordMapping[multiLookupsView.multiLookups[n].searchmodule].plural_label]),f=$("#topSectionTitle").find(".dvTitle").text().trim(),v=$ESAPI.encoder(),h=I18n.getMsg("crm.mxnlookup.lookuprel.updatelookupwarning",[v.encodeForHTML(c),v.encodeForHTML(o),v.encodeForHTML(m),v.encodeForHTML(s),v.encodeForHTML(m),v.encodeForHTML(f),v.encodeForHTML(f),v.encodeForHTML(f)]),g=multiLookupsView.createLookupUpdateWarningPopup(p,0,h,t,0,u);return $("#freezeBackGround").css("z-index","250"),g.css("z-index","301"),void g.show().addClass("zcrm-show").css("top",d)}$(".animateMl").css("visibility","hidden").addClass("cvTableAct"),$("#selected-records").css("visibility","visible")},selectMultiSelectEntity:function(e,t){var a=(t=$(t)).closest("tr"),l=a.prev("tr"),n="",r=t.attr("class"),i=0,o=multiLookupsView.currentMultiLookup.fldName,s=t.data("params"),d=s.select;if("customCheckBoxDisabled"!==r){""===d&&(d=!1),"true"===d||!0===d?(n=multiLookupsView.currentMultiLookup.unselectedid,i=multiLookupsView.currentMultiLookup.unselectedCount):"false"!==d&&!1!==d||("next"===s.mlaction&&(multiLookupsView.currentMultiLookup.needconfirm&&""!==multiLookupsView.currentMultiLookup.needconfirm||(multiLookupsView.currentMultiLookup.needconfirm=multiLookupsView.currentMultiLookup.selectedid)),n=multiLookupsView.currentMultiLookup.selectedid,i=multiLookupsView.currentMultiLookup.selectedCount);var u,c=s.entityId;if("customCheckBoxDisabled"!==r&&"customCheckBoxDisabledHover"!==r)if("customCheckBox onHover"===r||"customCheckBox"===r){if(i+1>100)return void renderingUtils.showCustomAlert(I18n.getMsg("crm.listview.maximum.records.alert",100));if(t.attr("class","customCheckBoxChecked"),$.each($(".customCheckBox[data-cid=mLookupselectEntity]"),(function(e,t){$(t).attr("style","visibility:visible")})),$.each($(".customCheckBox.onHover[data-cid=mLookupselectEntity]"),(function(e,t){$(t).attr("class","customCheckBox").attr("style","visibility:visible")})),$.each($(".customCheckBoxDisabled[data-cid=mLookupselectEntity]"),(function(e,t){$(t).attr("class","customCheckBoxDisabledHover").attr("style","visibility:visible")})),"false"!==d&&!1!==d&&"true"!==d&&!0!==d||void 0!==s.mlaction&&"next"===s.mlaction||(a.addClass("highlgtMLookup").addClass("setTdBorBtm"),!1===l.hasClass("setTdBorBtm")&&l.addClass("setTdBorBtm")),c+""=="error")return;""===n?n=c:n+=","+c,0===$(".customCheckBox[data-cid=mLookupselectEntity]").length&&$("#checkAll").attr("class","customCheckBoxChecked"),i++}else("true"===d||!0===d)&&1===multiLookupsView.currentMultiLookup.unselectedCount?($.each($(".customCheckBox[data-cid=mLookupselectEntity]"),(function(e,t){$(t).attr("class","customCheckBox onHover").attr("style","visibility:hidden")})),$.each($(".customCheckBoxDisabledHover[data-cid=mLookupselectEntity]"),(function(e,t){$(t).attr("class","customCheckBoxDisabled").attr("style","visibility:hidden")})),t.attr("class","customCheckBox onHover").attr("style","visibility:visible")):t.attr("class","customCheckBox"),"false"!==d&&!1!==d&&"true"!==d&&!0!==d||(a.removeClass("highlgtMLookup").removeClass("setTdBorBtm"),!0===l.hasClass("setTdBorBtm")&&l.removeClass("setTdBorBtm")),n.indexOf(c)>-1&&(n=(n=(n=n.replace(c+",","")).replace(","+c,"")).replace(c,""),$("#checkAll").attr("class","customCheckBox"),i--);if("true"===d||!0===d)multiLookupsView.currentMultiLookup.unselectedid=n,multiLookupsView.currentMultiLookup.unselectedCount=i,(f=$(".mlSelectedRecord"))&&f.length>0&&f.html(multiLookupsView.currentMultiLookup.unselectedCount);else if("false"===d||!1===d){multiLookupsView.currentMultiLookup.selectedid=n,multiLookupsView.currentMultiLookup.selectedCount=i,(f=$(".mlSelectedRecord"))&&f.length>0&&f.html(multiLookupsView.currentMultiLookup.selectedCount);var m=$(".mlUnConfirmSelectedRecordCount");m&&m.html(multiLookupsView.currentMultiLookup.selectedCount)}multiLookupsView.currentMultiLookup.selectedCount>1||multiLookupsView.currentMultiLookup.unselectedCount>1?$("#mlSelectedRecordMsg").text(I18n.getMsg("crm.label.deduplicate.selected",Crm.moduleInfo[multiLookupsView.multiLookups[o].module].translatedPluralLabel)):$("#mlSelectedRecordMsg").text(I18n.getMsg("crm.label.deduplicate.selected",Crm.moduleInfo[multiLookupsView.multiLookups[o].module].translatedSingularLabel)),""===multiLookupsView.currentMultiLookup.unselectedid&&""===multiLookupsView.currentMultiLookup.selectedid&&("true"!==d&&!0!==d||($.each($(".customCheckBox.onHover[data-cid=mLookupselectEntity]"),(function(e,t){$(t).attr("style","visibility:hidden")})),$.each($(".customCheckBox[data-cid=mLookupselectEntity]"),(function(e,t){$(t).attr("style","visibility:hidden")})),t.attr("class","customCheckBox onHover").attr("style","visibility:visible"))),"customCheckBox"!=r||multiLookupsView.currentMultiLookup.dontShowWarning||multiLookupsView.currentMultiLookup.reassign||!multiLookupsView.currentMultiLookup.lookuprel||"false"!=d&&0!=d||"next"==multiLookupsView.multiLookups[o].mlaction||(u=!0);var p,f=$(".mlSelectedRecord");if(multiLookupsView.currentMultiLookup.selectedCount>0||multiLookupsView.currentMultiLookup.unselectedCount>0?($("#nextStep").prop("disabled",!1),$("#confirmStep").prop("disabled",!1),$("#removeAllBtn").css("visibility","hidden").css("display","none"),f.css("visibility","visible"),$("#selected-records").css("visibility","visible"),u||($(".animateMl").css("visibility","hidden").addClass("cvTableAct"),f.css("visibility","visible"))):($("#nextStep").prop("disabled",!0),$("#confirmStep").prop("disabled",!0),$(".animateMl").css("visibility","visible").removeClass("cvTableAct"),$("#selected-records").css("visibility","hidden"),$("#removeAllBtn").css("visibility","visible").css("display","initial"),f.css("visibility","hidden")),"true"===d||!0===d)if(multiLookupsView.currentMultiLookup.unselectedCount>0)document.getElementsByName("AddMore")[0].setAttribute("style","display:none;visibility:hidden"),null!=(p=document.getElementById("removeAllBtn"))&&p.setAttribute("style","display:none;visibility:hidden");else document.getElementsByName("AddMore")[0].setAttribute("style","display:initial;visibility:visible"),null!=(p=document.getElementById("removeAllBtn"))&&p.setAttribute("style","display:initial;visibility:visible");u&&multiLookupsView.callLookupUpdateWarningPopup(c,t.attr("id"),a),multiLookupsView.currentMultiLookup.reassign=!1}},confirmUnSelectedAction:function(e){var t="",a="",l=multiLookupsView.currentMultiLookup.confirmselectedid.split(",").length;""===multiLookupsView.currentMultiLookup.confirmselectedid&&(l=0);var n=$("#"+e);n&&((a=n.data("id"))||(a=n.data("selectedid"))&&(t=(u=a.split("-")).length>1?u[1]:"",multiLookupsView.multiLookups[e]&&(multiLookupsView.multiLookups[e].variedLookupValues.confirmunselectedid=t)));"all"===multiLookupsView.currentMultiLookup.unselectedid&&(multiLookupsView.currentMultiLookup.confirmunselectedid="all",multiLookupsView.currentMultiLookup.confirmselectedid="",e&&$("#"+e).val(""));if(""!==multiLookupsView.currentMultiLookup.confirmunselectedid&&"all"!==multiLookupsView.currentMultiLookup.unselectedid&&(multiLookupsView.currentMultiLookup.confirmunselectedid+=","+multiLookupsView.currentMultiLookup.unselectedid),""===multiLookupsView.currentMultiLookup.confirmunselectedid&&(multiLookupsView.currentMultiLookup.confirmunselectedid=multiLookupsView.currentMultiLookup.unselectedid),""!==multiLookupsView.currentMultiLookup.confirmunselectedid){var r=multiLookupsView.currentMultiLookup.confirmunselectedid.split(",");""!==r&&"all"===r[0]&&"all"!==multiLookupsView.currentMultiLookup.unselectedid&&(r[0]=multiLookupsView.currentMultiLookup.unselectedid);for(var i=r.length,o=0;o<i;o++){var s=r[o];multiLookupsView.currentMultiLookup.confirmselectedid=multiLookupsView.currentMultiLookup.confirmselectedid.replace(s+",",""),multiLookupsView.currentMultiLookup.confirmselectedid=multiLookupsView.currentMultiLookup.confirmselectedid.replace(","+s,""),multiLookupsView.currentMultiLookup.confirmselectedid=multiLookupsView.currentMultiLookup.confirmselectedid.replace(s,"")}}if(!multiLookupsView.multiLookups[e].relatedlist){var d=n.data().selectedid;if(d){var u=d.split("-");d=multiLookupsView.currentMultiLookup.confirmselectedid+"-"+multiLookupsView.currentMultiLookup.confirmunselectedid}else d="-"+multiLookupsView.currentMultiLookup.confirmunselectedid;"create"===window[multiLookupsView.multiLookups[e].module].currentStatus&&"-all"===d&&(d=""),"-all"===d&&(d=d+"-"+l),n.data().selectedid=d,$("."+e).val(d)}multiLookupsView.currentMultiLookup.unselectedid=""},confirmSelectedAction:function(e){var t=$("#"+e),a="";if(t&&!(a=t.data("id"))&&(a=t.data("selectedid"))){var l=a.split("-");a=l[0],multiLookupsView.multiLookups[e]&&(multiLookupsView.multiLookups[e].variedLookupValues.confirmselectedid=a)}if(""===multiLookupsView.currentMultiLookup.confirmselectedid?multiLookupsView.currentMultiLookup.confirmselectedid=multiLookupsView.currentMultiLookup.selectedid:multiLookupsView.currentMultiLookup.confirmselectedid+=","+multiLookupsView.currentMultiLookup.selectedid,""!==multiLookupsView.currentMultiLookup.confirmselectedid)for(var n=multiLookupsView.currentMultiLookup.confirmselectedid.split(","),r=n.length,i=0;i<r;i++){var o=n[i];multiLookupsView.currentMultiLookup.confirmunselectedid=multiLookupsView.currentMultiLookup.confirmunselectedid.replace(o+",",""),multiLookupsView.currentMultiLookup.confirmunselectedid=multiLookupsView.currentMultiLookup.confirmunselectedid.replace(","+o,""),multiLookupsView.currentMultiLookup.confirmunselectedid=multiLookupsView.currentMultiLookup.confirmunselectedid.replace(o,"")}if(!multiLookupsView.multiLookups[e].relatedlist){var s=t.data().selectedid;s=s&&"all"!=multiLookupsView.currentMultiLookup.confirmunselectedid?multiLookupsView.currentMultiLookup.confirmselectedid+"-"+multiLookupsView.currentMultiLookup.confirmunselectedid:multiLookupsView.currentMultiLookup.confirmselectedid,t.data().selectedid=s,$("."+e).val(s)}multiLookupsView.currentMultiLookup.selectedid=""},sortColumnsInMultiLookup:function(e,t,a,l,n){t.id&&(t=t.id);var r=multiLookupsView.getParamJson(t);r.select=multiLookupsView.currentMultiLookup.select,r.FROM_INDEX=1,r.TO_INDEX=multiLookupsView.lookupPopupRecordCount,r.sortColumnString=e,r.sortOrderString=l===e&&"sort_asc"===n?"sort_desc":"sort_asc",multiLookupsView.submitMultiLookupForm("sort",Crm.getCrmBasePath()+"/Search.do","topBandPopup",r)},clearSearchAction:function(e){e.id&&(e=e.id);var t=$("#topBandPopup");if(t){var a=t.find('input[name = "searchString"]');a&&a.val()&&(a.val(""),a.focus(),multiLookupsView.currentMultiLookup.searchString="")}$(".mlSearchClose").removeClass("activesearch");var l=multiLookupsView.getParamJson(e);l.FROM_INDEX=1,l.TO_INDEX=multiLookupsView.lookupPopupRecordCount,l.isPartialLoad=!0,l.select=multiLookupsView.currentMultiLookup.select,l.fldValue=multiLookupsView.currentMultiLookup.searchString,multiLookupsView.submitMultiLookupForm(l.mlaction,Crm.getCrmBasePath()+"/Search.do","topBandPopup",l)},navigatePrevious:function(e,t){var a=$(t).data("params"),l=a.fldName,n=parseInt(a.fromIndex),r=parseInt(a.toIndex);if(l.id&&(l=l.id),n&&n>=11){var i=multiLookupsView.getParamJson(l);multiLookupsView.setSelfRefParams(i,l),r=n-1,n-=multiLookupsView.lookupPopupRecordCount,i.select=multiLookupsView.currentMultiLookup.select,i.fldValue=multiLookupsView.currentMultiLookup.searchString,i.isPartialLoad=!0,i.FROM_INDEX=n,i.TO_INDEX=r,multiLookupsView.submitMultiLookupForm(i.mlaction,Crm.getCrmBasePath()+"/Search.do","topBandPopup",i)}},navigateNext:function(e,t){var a=$(t).data("params"),l=a.fldName,n=parseInt(a.fromIndex),r=parseInt(a.toIndex);l.id&&(l=l.id);var i=multiLookupsView.getParamJson(l);r=(n+=multiLookupsView.lookupPopupRecordCount)+(multiLookupsView.lookupPopupRecordCount-1),i.FROM_INDEX=n,i.TO_INDEX=r,i.isPartialLoad=!0,i.fldValue=multiLookupsView.currentMultiLookup.searchString,i.select=multiLookupsView.currentMultiLookup.select,multiLookupsView.setSelfRefParams(i,l),multiLookupsView.submitMultiLookupForm(i.mlaction,Crm.getCrmBasePath()+"/Search.do","topBandPopup",i)},submitSearchAction:function(e){e.id&&(e=e.id);var t=multiLookupsView.getParamJson(e);t.FROM_INDEX=1,t.TO_INDEX=multiLookupsView.lookupPopupRecordCount,t.select=multiLookupsView.currentMultiLookup.select,t.page=multiLookupsView.currentMultiLookup.page,multiLookupsView.setSelfRefParams(t,e);var a=$("#topBandPopup"),l=0;if(a){var n=a.find('input[name = "searchString"]');n&&n.val()?(multiLookupsView.currentMultiLookup.searchString=n.val(),t.fldValue=n.val(),l=1):(multiLookupsView.currentMultiLookup.searchString="",t.fldValue="")}t.isPartialLoad=!0,t.lookuprel||""!==multiLookupsView.currentMultiLookup.unselectedid&&0===l&&""!=n.val()&&(t.select=!0,t.mlaction="addmore"),multiLookupsView.submitMultiLookupForm(t.mlaction,Crm.getCrmBasePath()+"/Search.do","topBandPopup",t)},submitMultiLookupForm:function(e,t,a,l,n){l&&("sort"==e&&(e=l.mlaction),"next"==e?(multiLookupsView.currentMultiLookup.needconfirm&&""!=multiLookupsView.currentMultiLookup.needconfirm||(multiLookupsView.currentMultiLookup.needconfirm=multiLookupsView.currentMultiLookup.selectedid),l.needconfirmid=multiLookupsView.currentMultiLookup.needconfirm,l.confirmpageselectedid=multiLookupsView.currentMultiLookup.selectedid):(multiLookupsView.currentMultiLookup.needconfirm="",l.selectedid=multiLookupsView.currentMultiLookup.confirmselectedid,l.unselectedid=multiLookupsView.currentMultiLookup.confirmunselectedid)),$("#searchCreatePopup").is(":visible")&&(l.fromSearchCreate=!0);var r=objectUtils.URL(t).getParams();if(Crm.userDetails.CVRFuncExecuteForAllFields&&Crm.userDetails.VALIDATION_RULE_CF_LOOKUPSUPPORT&&r&&"remove"===r.mlaction&&!isNaN(r.unselectedid)&&r.searchmodule&&"true"===r.relatedlist&&!isNaN(r.fldId)&&!0===Crm.userDetails.VALIDATIONRULEAVAILABLE&&Crm.userDetails.VRINVOLVEDMODULES.contains(r.searchmodule)){Crm.VR||(Crm.VR={});var i=$("#newleft_"+r.fldId).data().columnname;i&&(Crm.VR.ajaxEditFieldLabel=i);var o={module:r.searchmodule,entityId:r.unselectedid,layoutId:""};return o[csrfParamName]=encodeURIComponent(csrfToken),o.onlyEntityDetails=!0,o.includeVR=!0,void(new crmRequestPool).initiate({action:Crm.getCrmBasePath()+"/FormRule.do?action=getLayoutRuleNEntityInfo",data:o,type:"POST",success:function(e){Crm.VR.entityDetails=$.parseJSON(e.entityInfo),Crm.validationRuleJSONData[r.searchmodule]=JSON.parse(e.validationRuleJSON),Crm.VR.entityDetails.entityMapJson[i]?new Promise((function(e){e(multiLookupsView.executeVRRule(r.unselectedid,t,r.searchmodule,n,a,l,i))})).then((function(e){e||commonUtils.openCustomLookup(t,l,a,renderingUtils.windowWidth-300,void 0,void 0,n)})):commonUtils.openCustomLookup(t,l,a,renderingUtils.windowWidth-300,void 0,void 0,n)},error:function(){}})}commonUtils.openCustomLookup(t,l,a,renderingUtils.windowWidth-300,void 0,void 0,n)},executeVRRule:function(e,t,a,l,n,r,i){return Crm.VR.lookup_unassign=!0,CVRExec.storeStageValue("",i),CVRExec.setAjaxEditPrimaryField(!0),new Promise((function(e){e(CVRExec.evalRules("view",a,i,!0,!0))})).then((function(e){return delete Crm.VR.lookup_unassign,!e&&(hideAnimatePopup("deletepopup"),!0)}))},newMultiSelectAction:function(e){if(Crm.userDetails.isStorageLimitReached)Crm.showStorageExceedPopup();else{if(multiLookupsView.currentMultiLookup&&multiLookupsView.currentMultiLookup.selectedCount&&""!=multiLookupsView.currentMultiLookup.selectedCount){var t=multiLookupsView.currentMultiLookup.selectedCount;if(multiLookupsView.currentMultiLookup.confirmselectedid&&""!==multiLookupsView.currentMultiLookup.confirmselectedid&&(t+=multiLookupsView.currentMultiLookup.confirmselectedid.split(",").length),t>=100)return void renderingUtils.showCustomAlert(I18n.getMsg("crm.mxn.assign.maximum.records.alert",100))}e.id&&(e=e.id);var a=multiLookupsView.getParamJson(e);delete a.page,a.select=!1,a.FROM_INDEX=1,a.TO_INDEX=multiLookupsView.lookupPopupRecordCount,a.targetForm="searchCreatePopup",a.fldValue=multiLookupsView.currentMultiLookup.searchString,a.module=a.searchmodule,a.newModel=!0,a.select=!1,a.selectedid=multiLookupsView.currentMultiLookup.confirmselectedid,multiLookupsView.currentMultiLookup.lookuprel&&(a.entitylabel=$("#topSectionTitle").find(".dvTitle").text().trim());var l;l=Crm.getCrmBasePath()+"/QuickCreateAction.do",hideFreezeLayer(),$("#formName").removeClass("zcrm-show").css({top:"0px",display:"none"}).width(""),commonUtils.openCustomLookup(l,a,"searchCreatePopup"),(void 0===Crm.userDetails.VALIDATIONRULEAVAILABLE||!0===Crm.userDetails.VALIDATIONRULEAVAILABLE&&Crm.userDetails.VRINVOLVEDMODULES.contains(a.module))&&Crm.downloadValidationRules(l+"?module="+a.module+(a.layoutId?"&layoutId="+a.layoutId:""),a.module),$("#freezeBackGround").addClass("zindex250").css({"background-color":"#000",opacity:"0.2"})}},removeMLRecord:function(e,t,a){Crm.trackSpotLightAction("Multi Select Lookup - Remove All Click",{Module:multiLookupsView.multiLookups[e].searchmodule});var l=$("#mxnBody tr").length,n=$("#multipleFieldsEditPop").is(":visible"),r=$("#"+multiLookupsView.currentMultiLookup.fldName);if("all"===multiLookupsView.currentMultiLookup.unselectedid&&($("#searchCreatePopup").is(":visible")?$("#freezeBackGround").css("z-index","251"):$("#freezeBackGround").css("z-index","30")),0!==l){e.id&&(e=e.id);var i=$("#topBandPopup .pp-content").position().top;void 0!==t&&""===multiLookupsView.currentMultiLookup.unselectedid&&(multiLookupsView.currentMultiLookup.unselectedid="all"===t&&n?r.data("selectedid").replace("-",","):t+"");var o="crm.msg.selected",s=moduleRecordMapping[multiLookupsView.multiLookups[e].searchmodule].singular_label;if(t||(o="",s=moduleRecordMapping[multiLookupsView.multiLookups[e].searchmodule].plural_label,"all"===t&&(multiLookupsView.currentMultiLookup.unselectedid=n?r.data("selectedid").replace("-",","):t)),o=I18n.getMsg(o),"all"===t)if(o="",s=moduleRecordMapping[multiLookupsView.multiLookups[e].searchmodule].plural_label,$("#heading_title").length)if("Edit"===$(heading_title).text().trim().substring(0,$(heading_title).text().trim().indexOf(" ")))var d=I18n.getMsg("crm.mxnlookup.editpopup.unassignall.popup",[s,moduleRecordMapping[multiLookupsView.multiLookups[e].parentModule].singular_label.toLowerCase()]);else d=I18n.getMsg("crm.mxnLookup.dissociatemessage",[s.toLowerCase(),a,moduleRecordMapping[multiLookupsView.multiLookups[e].parentModule].singular_label.toLowerCase()]);else d=I18n.getMsg("crm.mxnLookup.dissociatemessage",[s.toLowerCase(),a,moduleRecordMapping[multiLookupsView.multiLookups[e].parentModule].singular_label.toLowerCase()]);else if(1===multiLookupsView.currentMultiLookup.unselectedCount)d=I18n.getMsg("crm.mxnLookup.dissociateselectedmessage",[$("#mLookup_"+multiLookupsView.currentMultiLookup.unselectedid).text(),moduleRecordMapping[multiLookupsView.multiLookups[e].searchmodule].singular_label.toLowerCase(),a,moduleRecordMapping[multiLookupsView.multiLookups[e].parentModule].singular_label.toLowerCase()]);else d=I18n.getMsg("crm.mxnLookup.dissociateselectedmessage",[multiLookupsView.currentMultiLookup.unselectedCount,moduleRecordMapping[multiLookupsView.multiLookups[e].searchmodule].plural_label.toLowerCase(),a,moduleRecordMapping[multiLookupsView.multiLookups[e].parentModule].singular_label.toLowerCase()]);var u=multiLookupsView.createTempWarningPopup(d,"mxnDissociate");u.show().addClass("zcrm-show").css("top",i),$("#freezeBackGround").css("z-index","252"),u.css("z-index","301")}},cancelDeleteWarningPopup:function(){"all"===multiLookupsView.currentMultiLookup.unselectedid&&(multiLookupsView.currentMultiLookup.unselectedid=""),$(".selectedRow").removeClass("selectedRow trialyellowbox").addClass("unselectedRow"),$("#searchCreatePopup").is(":visible")?$("#freezeBackGround").css("z-index","251"):$("#freezeBackGround").css("z-index","30"),multiLookupsView.removeTempWarningPopup()},cancelLookupUpdatePopup:function(e,t){$(".selectedRow").removeClass("selectedRow trialyellowbox").addClass("unselectedRow"),$("#freezeBackGround").css("z-index","30");var a=$("#"+e);if(multiLookupsView.currentMultiLookup.reassign=!0,multiLookupsView.removeLookupUpdateWarningPopup(),1==t||"1"==t){var l,n=$("#listviewHeaderRow").find("td"),r=n.length;for(l=0;l<r&&$(n.eq(l).find("a")).attr("id")!==multiLookupsView.currentMultiLookup.parentColumn;l++);for(var i=$("#mxnBody").find("tr"),o=i.length,s=0;s<o;s++){var d=i.eq(s).find("td"),u=$(d.eq(l)).find("a").text(),c="#"+$(d.eq(0)).find("span").attr("id");u&&u.trim().length>0&&multiLookupsView.selectMultiSelectEntity(null,c)}}else multiLookupsView.selectMultiSelectEntity(null,a)},cancelMxNLookupWarning:function(e){e.id&&(e=e.id);var t=$("#topBandPopup .pp-content").position().top,a=I18n.getMsg("crm.mxnLookup.conformclosewarning",moduleRecordMapping[multiLookupsView.multiLookups[e].searchmodule].singular_label),l=multiLookupsView.createTempWarningPopup(a,"mxnCloseConfirm");l.show().addClass("zcrm-show").css("top",t),$("#freezeBackGround").css("z-index","250"),l.css("z-index","251")},hideCancelPopup:function(){$("#freezeBackGround").css("z-index","30"),multiLookupsView.removeTempWarningPopup()},mlrecordclear:function(){var e=!1;multiLookupsView.currentMultiLookup.selectedCount>0&&(e=!0);var t=$("#checkAll"),a=$(".mlSelectedRecord");if(t.attr("class","customCheckBox"),multiLookupsView.currentMultiLookup.unselectedCount>1)for(var l=multiLookupsView.currentMultiLookup.unselectedid.split(","),n=0;n<multiLookupsView.currentMultiLookup.unselectedCount;n++){$("#selectEntity_"+l[n]).attr("class","customCheckBox onHover").attr("style","visibility:hidden")}else if(1===multiLookupsView.currentMultiLookup.unselectedCount){$("#selectEntity_"+multiLookupsView.currentMultiLookup.unselectedid).attr("class","customCheckBox onHover").attr("style","visibility:hidden")}!1===e&&$.each($(".customCheckBox[data-cid=mLookupselectEntity]"),(function(e,t){$(t).attr("class","customCheckBox onHover").attr("style","visibility:hidden")})),multiLookupsView.currentMultiLookup.selectedid="",multiLookupsView.currentMultiLookup.selectedCount=0,multiLookupsView.currentMultiLookup.unselectedid="",multiLookupsView.currentMultiLookup.unselectedCount=0,multiLookupsView.selectMultiSelectAllEntity(t,!1),a&&a.length>0&&a.html(multiLookupsView.currentMultiLookup.selectedCount)},showMxNLookup:function(e){var t=$(e.target).closest("div").data("params").pname,a=$("div[ddname = "+t+"]"),l=a.offset().top,n=$("#dvinner");a&&a.length&&n.animate({scrollTop:l-n.offset().top+n.scrollTop()-20},200)},validateRenameRelList:function(e,t){var a=$.trim(e).toUpperCase(),l=!0;return $.trim(e)?/^CUSTOMMODULE[0-9]{1,4}$/.test(a)||relatedListHeader.specialKeywords.contains(a)||"Potentials"==detailView.currentModule&&"INVOICES"==a?(t.push(I18n.getMsg("crm.mb.field.common.sykw")),l=!1):splCharCheck(e)||(t.push(I18n.getMsg("crm.mb.field.common.splc")),l=!1):(t.push(I18n.getMsg("crm.mb.field.common.empt")),l=!1),l},updateLookupView:function(){var e=$("crm-entity-lookup")[0].component,t=$("input[name=fldName]").val();e.updateLookUpView.call(e,t)},updateMXNFieldValue:function(e,t,a){var l="";if(void 0!==a){if(e)l=e,$("#"+l).val(a);else{l=(crmRelatedList.EachModuleData[t]?crmRelatedList.EachModuleData[t]:"").mxndummycolumn;var n=$("#mouseArea__"+l).data("params");n&&(n.defaultvalue=a),$("#subvalue_"+l).text(a)}multiLookupsView.fieldStatusUpdate(e)}},mlSearchCloseIcon:function(e){$(e)[0]&&($(e)[0].value.length>0?$(".mlSearchClose span").addClass("activesearch"):$(".mlSearchClose span").removeClass("activesearch"))},createTempWarningPopup:function(e,t){var a=$("<div/>");a.attr("id","tempWarningPopup"),a.attr("class","zcrm-modal zcrm-effect zcrm-show");var l=$("<div/>");l.attr("style","padding:60px; text-align:center;"),l.attr("class","f21 zcrm-content");var n=$("<span/>");n.attr("id","warningMsg"),n.text(e);var r=$("<div/>");r.attr("class","pT30 aligncenter");var i=$("<input/>");i.attr("type","button"),i.attr("class","newgraybtn"),i.attr("onclick","multiLookupsView.cancelDeleteWarningPopup()");var o=$("<input/>");return o.attr("type","button"),o.attr("class","redbtn"),"mxnDissociate"==t?(o.attr("onclick","multiLookupsView.dissociateMLRecords(undefined,true);"),o.attr("value",I18n.getMsg("crm.mxnlookup.dissociate")),i.attr("value",I18n.getMsg("Cancel"))):"mxnCloseConfirm"==t&&(o.attr("onclick","multiLookupsView.hideCancelPopup();multiLookupsView.closeMLPopup();"),o.attr("value",I18n.getMsg("crm.button.yes.move.away")),i.attr("value",I18n.getMsg("crm.button.stay.here"))),r.append(i),r.append(o),l.append(n),l.append(r),a.append(l),a.appendTo("body"),a},permissionIssueWarningShow:function(e,t,a,l,n,r,i){$("#freezeBackGround").attr("style","z-index:250");var o="";e&&(o=$("#mLookup_"+e).text());var s=!1;null!=a&&null==moduleRecordMapping[a]&&(a=a.moduleName,s=!0);var d,u=moduleRecordMapping[a].singular_label.toLowerCase(),c=moduleRecordMapping[a].plural_label.toLowerCase(),m=I18n.getMsg("crm.mxnlookup.select",[moduleRecordMapping[a].plural_label]),p=($("#topSectionTitle").find(".dvTitle").text().trim(),$ESAPI.encoder());if(1===l||2===l)d=I18n.getMsg("crm.mxnlookup.lookuprel.permissiondeniedwarning.new",[p.encodeForHTML(u),p.encodeForHTML(o),p.encodeForHTML(Crm.appName)]),s&&(m=I18n.getMsg("crm.nsocial.start.denied"));else if(3==l)d=I18n.getMsg("crm.mxnlookup.lookuprel.permissiondeniedassociatewarning.new",[p.encodeForHTML(c),p.encodeForHTML(Crm.appName)]);else if(4===l)d=I18n.getMsg("crm.mxnlookup.lookuprel.permissiondenieddissociatewarning.new",[p.encodeForHTML(c),p.encodeForHTML(Crm.appName)]);else if(5===l||6===l||7===l||11===l){var f=c;m=I18n.getMsg("crm.mxnlookup.remove.title",[p.encodeForHTML(moduleRecordMapping[a].plural_label)]),6===l?(m=I18n.getMsg("crm.mxnlookup.removeall.title",[p.encodeForHTML(moduleRecordMapping[a].plural_label)]),f=u):11===l&&(m=I18n.getMsg("crm.mxnlookup.clone.scheduler.progress.title")),d=I18n.getMsg("crm.mxnlookup.lookuprel.lookupfieldmandatory.warning1",[p.encodeForHTML(f),p.encodeForHTML(r),p.encodeForHTML(f)])+I18n.getMsg("crm.mxnlookup.lookuprel.lookupfieldmandatory.warning2",[p.encodeForHTML(f),p.encodeForHTML(r)]),7===l?(m=I18n.getMsg("crm.mxnlookup.removeall.title",[p.encodeForHTML(moduleRecordMapping[a].plural_label)]),d=I18n.getMsg("crm.mxnlookup.lookuprel.removeall.scheduled.msg",[p.encodeForHTML(c)])):11===l&&(d=r)}else 8===l?(o.length>7&&(o=o.slice(0,5)+"..."),"true"===r?(m=I18n.getMsg("crm.delete.checkAssigned"),d=I18n.getMsg("crm.delete.checkContentAssigned",[p.encodeForHTML(moduleRecordMapping[n].plural_label),p.encodeForHTML(u)])):(m=I18n.getMsg("crm.delete.checkAssigned"),d=I18n.getMsg("crm.mxnrelatedlist.selectcheckbox.permissionmsg.noprofileaccess",[p.encodeForHTML(u),i]))):9===l?(m=I18n.getMsg("crm.delete.checkAssigned"),d=I18n.getMsg("crm.delete.checkContentAssigned",[p.encodeForHTML(moduleRecordMapping[n].plural_label),p.encodeForHTML(u)])):10===l?(m=I18n.getMsg("crm.delete.checkAssigned"),d=I18n.getMsg("crm.mxnrelatedlist.selectcheckbox.permssionmsg.nosharing",[p.encodeForHTML(c),p.encodeForHTML(moduleRecordMapping[n].plural_label),p.encodeForHTML(c),p.encodeForHTML(u)])):12===l?(m=I18n.getMsg("crm.mxnlookup.editpopup.unassignall.modify"),d=I18n.getMsg("crm.mxnlookup.editpopup.unassignall.modifymessage",[c,moduleRecordMapping[t].singular_label.toLowerCase()])):13===l?(m=I18n.getMsg("crm.mxnlookup.unassignall.scheduler.progress.title"),d=r):14===l?(m=I18n.getMsg("crm.mxnlookup.remove.title",[moduleRecordMapping[a].plural_label]),d=I18n.getMsg("crm.mxnlookup.lookuprel.permissiondeniedwarning.new",[p.encodeForHTML(u),p.encodeForHTML(o),p.encodeForHTML(Crm.appName)])):15===l?(m=I18n.getMsg("crm.nsocial.start.denied"),d=I18n.getMsg("crm.mxnlookup.lookuprel.permissiondeniedwarning.new",[p.encodeForHTML(u),p.encodeForHTML(o),p.encodeForHTML(Crm.appName)])):16===l?(m=I18n.getMsg("crm.mxnlookup.editpopup.unassignall.modify"),d=I18n.getMsg("crm.mxnlookup.editpopup.unassignall.connectedmodifymessage",[c,moduleRecordMapping[t].singular_label.toLowerCase()])):18===l?(m=I18n.getMsg("crm.mxnlookup.mxnconvert.scheduler.progress.title"),d=r):17===l&&(m=i,d=r);var v=multiLookupsView.createLookupUpdateWarningPopup(m,1,d,null,2,null,l);if(freezeBackground(),v.css("z-index","301"),$("#topBandPopup .pp-content").length>0){var h=$("#topBandPopup .pp-content").position().top;v.show().addClass("zcrm-show").css("top",h)}else v.show().addClass("zcrm-show")},dontShowWarningPopup:function(e){e.checked?multiLookupsView.currentMultiLookup.dontShowWarning=!0:multiLookupsView.currentMultiLookup.dontShowWarning=!1},createLookupUpdateWarningPopup:function(e,t,a,l,n,r,i){var o=$("<div/>");o.attr("id","lookupUpdateWarningPopup"),o.attr("class","zcrm-modal zcrm-effect zcrm-show w705 ");var s=$("<div/>");s.attr("class","f21 zcrm-content pT30 pL30 pB25 pR25");var d=$("<span/>");d.attr("class","ico-warning-small-red svgIcons vam mR10 zcrm_svgicon_transform mL3 dIB");var u=$("<div/>");u.attr("class","f22 crm-font-regular w80per dIB vam mL3 errorMsgNew"),u.html(e);var c=$("<div/>");c.attr("class","dIB  crm-font-regular mt15 mL32 col111 w550 f0");var m=$("<span/>");m.attr("id","warningMsg"),m.attr("class","f14 crm-font-regular"),m.html(a),c.append(m);var p=$("<div/>");if(p.attr("class","mT20"),0==n||1==n){a+=I18n.getMsg("crm.mxnlookup.lookuprel.updatelookupwarning2"),m.html(a);var f,v=$("<span/>");v.attr("id","warningMsg2"),v.attr("class","f16 crm-font-regular dB mT14 black"),1==n?f=moduleRecordMapping[r].plural_label.toLowerCase():0==n&&(f=moduleRecordMapping[r].singular_label.toLowerCase()),v.html(I18n.getMsg("crm.mxnlookup.lookuprel.updatelookupwarning3",[$ESAPI.encoder().encodeForHTML(f)])),c.append(v);var h=$("<div/>");h.attr("class","dIB mL32");var g=$("<label/>");g.attr("class","newCustomchkbox-md crm-font-regular"),h.append(g);var y=$("<input/>");y.attr("type","checkbox").attr("data-zcqa","dontshowwarncheckbox"),y.attr("onclick","multiLookupsView.dontShowWarningPopup(this)"),g.append(y);var b=$("<span/>");b.attr("class","vam chkbxIcon "),g.append(b);var C=$("<span/>");C.attr("class","dIB vam f14 mL5 color_6"),C.text(I18n.getMsg("crm.mxnlookup.lookuprel.dontshowwarningmsg")),g.append(C);var T=$("<div/>");T.attr("class","floatR");var E=$("<input/>");E.attr("type","button"),E.attr("class","newgraybtn"),E.attr("onclick",'multiLookupsView.cancelLookupUpdatePopup("'+l+'",'+n+");"),(I=$("<input/>")).attr("type","button").attr("class","redbtn mR0").attr("data-zcqa","mulreassign").attr("onclick","multiLookupsView.associateLookupRelUpdate();"),I.attr("value",I18n.getMsg("crm.mxnlookup.lookuprel.reassign")),1==n?(E.attr("data-zcqa","mulnoreassign"),E.attr("value",I18n.getMsg("crm.mxnlookup.lookuprel.noreassign"))):0==n&&(E.attr("data-zcqa","mulno"),E.attr("value",I18n.getMsg("crm.button.no")));var _=$("<div/>");_.attr("class","cB "),p.append(h),T.append(E),T.append(I),p.append(T),p.append(_)}else{var I;(I=$("<input/>")).attr("type","button"),I.attr("class","newwhitebtn mR0"),o.attr("class","zcrm-modal zcrm-effect zcrm-show w500 "),c.attr("class","dIB  crm-font-regular mt15 mL32 col111  f0"),p.addClass("txt-ctr"),d.attr("class","ico-readonly-small svgIcons vam mR10 zcrm_svgicon_transform mL3 dIB"),6!=i&&5!=i&&7!=i||(d.attr("class","zcrm-title-waring-icon svgIcons vam zcrm_svgicon_transform dIB mR5"),u.attr("class","f22 crm-font-regular w80per dIB vam errorMsgNew color_1 zcrm-new-title"),o.attr("class","zcrm-modal zcrm-effect zcrm-show w650")),3===i&&null!=l?(I.attr("data-zcqa","rpok"),I.attr("onclick","multiLookupsView.removePermissionDeniedWarningPopup();multiLookupsView.callLookupUpdateAllWarningPopup("+l+")")):(I.attr("data-zcqa","rpok"),I.attr("onclick","multiLookupsView.removePermissionDeniedWarningPopup();")),I.attr("value",I18n.getMsg("crm.button.ok")),p.append(I)}return s.append(d),s.append(u),s.append(c),s.append(p),o.append(s),o.appendTo("body"),o},removeTempWarningPopup:function(){$("#tempWarningPopup").remove()},removeLookupUpdateWarningPopup:function(){$("#lookupUpdateWarningPopup").remove()},LinkingModuleExport:function(e,t){var a="/crm/v2/settings/export?module="+e+"&ids="+t;networkUtils.lyteInitiateRequest(a,"POST")}},relatedListHeader={};function fetchFollowed(e){$(e).parents(".feedFilterlist").siblings(".svalue").find("#value").html($(e).html()),$(e).parents(".feedFilterlist").hide(),$("#mod_sel")[0].value=$(e)[0].id}function switchDetailViewUI(e,t,a){var l=!1;if(e&&(l=!0),!t&&!l||a){$("#dvolduiwarning").remove();var n=renderingUtils.createHTML({name:"div",attr:{class:"newPopup w620 newPopupStyleEle",id:"dvolduiwarning"},child:[{name:"span",attr:{class:"dN",onclick:"crmui.hidePopup('dvolduiwarning');$('#dvolduiwarning').remove()"}},{name:"div",attr:{class:"",id:"dvolduiwarning_header",text:a?I18n.getMsg("crm.dv.new.up"):I18n.getMsg("crm.dv.old.dis")},child:[{name:"div",text:a?I18n.getMsg("crm.dv.new.up"):I18n.getMsg("crm.dv.old.dis"),attr:{class:"f25 crm-font-bold aligncenter"}}]},{name:"div",attr:{class:"pT20 pB20 aligncenter",id:"dvolduiwarning_content"},child:[{name:"div",html:a?I18n.getMsg("crm.dv.new.up.con1",I18n.getMsg("November")+" 10, 2020"):I18n.getMsg("crm.dv.old.dis.con1",I18n.getMsg("November")+" 10, 2020"),attr:{class:"lght27"}},{name:"span",text:a?I18n.getMsg("crm.dv.new.up.con2"):I18n.getMsg("crm.dv.old.dis.con2"),attr:{class:"lght27"},child:[{name:"a",text:I18n.getMsg("crm.readmore"),attr:{class:"mL5 uline1 cP readmorelink",href:"https://help.zoho.com/portal/en/community/topic/new-look-for-the-record-details-page",target:"_blank"}}]}]},{name:"div",attr:{class:"aligncenter pT10 pB30",id:"dvolduiwarning_footer"},child:[{name:"button",text:a?I18n.getMsg("crm.dv.new.up.but2"):I18n.getMsg("crm.dv.old.dis.but1"),attr:{class:"dvbtn-secondary mR20 newgreybtn",onclick:a?"removeOldUIBanner()":"crmui.hidePopup('dvolduiwarning');$('#dvolduiwarning').remove();"}},{name:"button",text:a?I18n.getMsg("crm.dv.new.up.but1"):I18n.getMsg("crm.dv.old.dis.but2"),attr:{class:"dvbtn-primary primarybtn",onclick:a?"switchDetailViewUI(true,true)":"switchDetailViewUI(false,true)"}}]}]});return $(n).insertAfter("#custom_alert_popup"),void crmui.showPop("dvolduiwarning",!1)}var r=Crm.getCrmBasePath()+"/Pulse.do?action=enableOrDisableNewUI&enableNewUI="+l;(new crmRequestPool).initiate({action:r,type:"POST",headers:{"X-ZCSRF-TOKEN":csrfParamName+"="+csrfToken},success:function(){Utils.windowLocationReload()},error:function(){crmui.showMsgBand("error",I18n.getMsg("crm.cal.qustn.err"),3e3)}})}function removeOldUIBanner(){var e=Crm.getCrmBasePath()+"/Pulse.do?action=enableOrDisableNewUI&dontshowagain=true";(new crmRequestPool).initiate({action:e,type:"POST",headers:{"X-ZCSRF-TOKEN":csrfParamName+"="+csrfToken},success:function(){Crm.userDetails.showolduisetoffbanner=!0,crmui.hidePopup("dvolduiwarning"),$("#dvolduiwarning").remove()},error:function(){crmui.showMsgBand("error",I18n.getMsg("crm.cal.qustn.err"),3e3)}})}function showRecFlwdByMe(e,t){var a=$("#pulseInfo"),l=$("#feedContainerDiv"),n=$("#feedParentDiv"),r=$("#feedLeftMenuContainer"),i=$("#feedsFollowUpDetails"),o=n.height()-2,s=n.width()-r.width();$("#feedscontainer").hide(),$("#feedContainerDiv").addClass("p0"),i.hide(),$("#feedsFollowUpCtn").show(),$(".feedsViewPage").addClass("oH"),setFeedFollowUp(),a.addClass("rightSeparation"),a.css({height:o+"px"}),l.css({width:s+"px"});var d=Crm.getCrmBasePath()+"/Pulse.do?action=recflwdbyme&days=0";if(null!=getObj("mod_sel")&&""!=getObj("mod_sel").value&&(d+="&searchModule="+getObj("mod_sel").value),null!=getObj("ownerId_sel")&&""!=getObj("ownerId_sel").value&&(d+="&ownerId="+getObj("ownerId_sel").value),"mbtn"==t){if(getObj("rfbm_st").value){var u=parseInt(getObj("rfbm_st").value,10)+1;getObj("rfbm_st").value=u}d+="&type=smore&rfbm_st="+getObj("rfbm_st").value}var c=document.getElementById(e);return mR(d,(function(a){getObj("mda_trans").value;if(a.indexOf("ALERTERROR:::")>-1){var l=a.split("ALERTERROR:::");alert(l[1])}else if(a.indexOf("NOMOREUPDATES:::")>-1){$(c).empty();l=a.split("NOMOREUPDATES:::")}else{if("msel"==t||"qlnk"==t||"aplfltr"==t)$(c).empty(),c.innerHTML=a,EvalInnerScript(c),"msel"==t&&getObj("flwcnt")&&($("#flwcnt").empty(),getObj("flwcnt").innerHTML="( "+flwcnt+" )");else{var n=getObj(e).innerHTML+a;$(getObj(e)).empty(),getObj(e).innerHTML=n,EvalInnerScript(c)}if(getObj(e+"_avail"))getObj(e+"_mbtn").style.display="none"}})),!1}function showUntouchedRecords(e,t){var a=$("#pulseInfo"),l=$("#feedContainerDiv"),n=$("#feedParentDiv"),r=$("#feedLeftMenuContainer"),i=$("#feedsFollowUpDetails"),o=n.height()-2,s=n.width()-r.width(),d=n.width()-(r.width()+701);$("#feedscontainer").hide(),$("#feedContainerDiv").addClass("p0"),i.hide(),$("#feedsFollowUpCtn").show(),$(".feedsViewPage").addClass("oH"),setFeedFollowUp(),a.addClass("rightSeparation"),a.css({height:o+"px"}),l.css({width:s+"px"}),i.css({width:d+"px"});var u=Crm.getCrmBasePath()+"/Pulse.do?action=showall",c=document.getElementById(e);return mR(u,(function(a){getObj("mda_trans").value;if(a.indexOf("ALERTERROR:::")>-1){var l=a.split("ALERTERROR:::");alert(l[1])}else{if("msel"==t||"qlnk"==t)$(c).empty(),c.innerHTML=a,EvalInnerScript(c),"msel"==t&&getObj("flwcnt")&&($(getObj("flwcnt")).empty(),getObj("flwcnt").innerHTML=flwcnt);else{var n=getObj(e).innerHTML+a;$(getObj(e)).empty(),getObj(e).innerHTML=n,EvalInnerScript(c)}if(getObj(e+"_avail"))getObj(e+"_mbtn").style.display="none"}Crm.bindEventForUserBCView()})),!1}function toggleFollowup(e,t,a){var l=Crm.getCrmBasePath()+"/Pulse.do",n="id",r="module";a&&(n=a+"_id",r=a+"_module");var i=getObj(r).value,o="entityid="+getObj(n).value+"&type="+i+"&action="+t+"&"+csrfParamName+"="+encodeURIComponent(csrfToken);return mR(l,(function(e){var l=e;if(l.indexOf("ALERTERROR:::")>-1){var n=l.split("ALERTERROR:::");alert(n[1])}else if(a){if(document.getElementById(a).style.display="none",getObj("flwcnt")){var r=getObj("flwcnt").innerHTML,o=getObj("flwcnt").innerHTML.match("[0-9]+")[0],s=parseInt(o,10)-1;$(getObj("flwcnt")).empty(),getObj("flwcnt").innerHTML=r.replace(o,s)}}else{var d=document.getElementById("flw_spn"),u=$("#detailViewButtonLayerMainTableRow #flw_spn");if("follow"==t){"Events"!=i&&"Tasks"!=i&&"Calls"!=i&&detailView.formFollowersDiv(Crm.userDetails.USER_ID,!1,!0),$(d).empty(),u.empty();var c="<a class='' id='Follow_btn' href=\"javascript:;\" onClick=\"toggleFollowup(this,'unfollow');\">"+I18n.getMsg("crm.label.pulse.unfollow")+"</a>";d.innerHTML=c,u.html(c)}else{"Events"!=i&&"Tasks"!=i&&"Calls"!=i&&detailView.formFollowersDiv(Crm.userDetails.USER_ID,!1,!1),$(d).empty(),u.empty();c="<a class='' id='unFollow_btn' href=\"javascript:;\" onClick=\"javascript:toggleFollowup(this,'follow');Crm.trackSpotLightAction('Started Following Record');\"  name=\"Follow_btn\" id=\"Follow_btn\" >"+I18n.getMsg("crm.label.pulse.follow")+"</a>";d.innerHTML=c,u.html(c)}}}),o),!1}function getRightPanelDetails(e,t,a,l,n){delete $$rightPanel.rpCachedList,$$rightPanel.rpCachedList=new Array,delete $$rightPanel.rpTabOrder,$$rightPanel.entityId=e,$$rightPanel.currentModule=t,t==crmModuleConstants.Leads||t==crmModuleConstants.Contacts?($$rightPanel.rpTabOrder=["info","timeline","conversation"],$$rightPanel.caller=null):"Projects"==t?($$rightPanel.rpTabOrder=["info"],$$rightPanel.caller=null):($$rightPanel.rpTabOrder=["info","timeline"],$$rightPanel.caller="Feeds"),"entityDetail"===(a=a||"feedsFollowUpDetails")&&(askZia.previousRightPanelDiv=$$rightPanel.rpParentContainer),$$rightPanel.rpParentContainer=a,$$rightPanel.detailRightPanel("krp_tab1",$$rightPanel.rpTabOrder[0],!0,l,n)}function showFollowUpDetails(e,t,a){var l=$("#feedParentDiv");$("#feedContainerDiv").css({width:l.outerWidth()-($("#feedLeftMenuContainer").width()+15)+"px"});var n=$(e).find("#moduleid_"+a)[0].value,r=$(e).find("#module_"+a)[0].value;crmRelatedList.EntityId=n,crmRelatedList.Module=r,$(e).hasClass("lisel")||getRightPanelDetails(n,r),$("#feedsFollowUpDetails").show(),$(".feedsFlCtn ul li").removeClass("lisel"),$(e).addClass("lisel"),Math.abs(parseInt($("#"+t).css("left")))===parseInt($("#"+t).width())&&$("#"+t).animate({left:"0px"},300,(function(){})),setTimeout((function(){var e=$("#feedParentDiv"),t=$("#krp_Rightpanel_InfoContainer"),a=e.height()-52;t.css({height:a+"px"}),t.perfectScrollbar("destroy")}),1200)}function hidePulseAllHistoryDiv(){var e=findPosX(document.getElementById("pulseSettingsTd"));$("#pmrlstact").animate({left:e-380+"px"}),getObj(pulseSelId.id).className="pulserowout",pulseSelId.id=!0}function setPulseLayoutHeight(){var e=document.getElementById("activeUpdateData"),t=getObj("pulseActivityDivContainer");if(void 0===e)timestamp=setTimeout(setPulseLayoutHeight(),200);else{var a=document.getElementById("basic").offsetHeight,l=document.body.clientHeight;a<l?t&&(t.style.height=l-t.style.top+"px"):t&&(t.style.height=""),"undefined"!=typeof timestamp&&window.clearTimeout(timestamp)}}function showFilterModules(e){var t=$(e).siblings(".newFeedDrop");t.is(":visible")?(t.hide(),$(".feedfiltercontent").removeClass("feedfilterfocus")):(t.show(),t.closest(".feedfiltercontent").addClass("feedfilterfocus"))}function getMorePulseDetails(e,t,a,l,n,r){if(($(".feedfiltercontent").removeClass("feedfilterfocus"),n)&&!getObj(n+"_arw_dv"))return!1;var i=Crm.getCrmBasePath()+"/Pulse.do?searchModule="+getObj("mod_sel").value;getObj("ownerId_sel")&&(i+="&ownerId="+getObj("ownerId_sel").value);var o=document.getElementById(e);if("aplfltr"==a&&"pulseInfo"==e)i+="&action=aplFilter&nextSet=0";else{var s=null,d=null,u=null;if("mrbtn"==a||"rlnk"==a)s=document.getElementById("next_set_"+e);else if("larw"==a||"frmspn"==a){s=document.getElementById("ns_mla");var c=document.getElementById("od_hd_"+n),m=document.getElementById("od_bc_"+n);d=document.getElementById("p"+e),u=document.getElementById("mrlalnk");var p=document.getElementById("rec_iso_cd_"+n);p&&(i+="&isoCode="+p.value),$("#pulseRightTitleDiv").empty(),document.getElementById("pulseRightTitleDiv").innerHTML="<div class='mt5 floatR dbBtnClose svgIcons ico-close op05 dIB cP' onclick='hidePulseAllHistoryDiv()'></div><div class='f12 bbd'>"+c.innerHTML+"<div id='bc_dtl'>"+m.innerHTML+"</div></div>"}var f=parseInt(s.value,10)+1;"rlnk"!=a&&"larw"!=a||(f="0"),i+="&nextSet="+f,"mrbtn"==a||"rlnk"==a?(i+="&action=getMoreDetails&secName="+e,"thirtySectionData"==e&&(i+="&days="+getObj("pulseValue").value.replace(/^[0]+/g,""))):i+="&action=getMoreLastActivities&parentId="+l}return"larw"==a?i+="&referer=pulseleftslider":"frmspn"==a&&(i+="&referer=pulseslidermorebtn"),mR(i,(function(r){var i=r,c=getObj("nmda_trans").value,m=getObj("mda_trans").value;if(i.indexOf("ALERTERROR:::")>-1){var p=i.split("ALERTERROR:::");alert(p[1])}else if(i.indexOf("NOMOREUPDATES:::")>-1){$(o).empty();p=i.split("NOMOREUPDATES:::");if("mrbtn"==a)alert(p[1]),t.disabled=!0;else if("larw"==a||"frmspn"==a){if(setPositionOfContainer(d),d.style.display="block",n&&"larw"==a){var v=n.substring(0,n.indexOf("_")),h=n.substring(n.indexOf("_")+1),g=v+"_la_dt_"+h;if(getObj(g)){var y=o.innerHTML+"<br><div class='p5'>"+getObj(g).innerHTML+"</div>";$(o).empty(),o.innerHTML="<br><div class='p5'>"+y+"</div>"}if(g=v+"_la_txt_"+h,getObj(g)){y=o.innerHTML+"<br>"+getObj(g).innerHTML;$(o).empty(),o.innerHTML="<div class='p15 bbd'>"+y+"</div>"}}$(u).empty()}else"rlnk"==a&&($(o).empty(),o.innerHTML='<div style="padding:0px 30px;"><div class="p30 norec" align="center"><input type="hidden" id="nda_ts" value="true"/>&lt;&nbsp;'+getObj("nochanges").value+"&nbsp;&gt;</div></div>",t.value=c,t.disabled=!0)}else if("aplfltr"==a?$(o).empty():(s.value=f,"larw"==a?($(o).empty(),setPositionOfContainer(d),d.style.display="block"):"rlnk"==a&&$(o).empty()),o){"larw"!=a&&"frmspn"!=a||($(u).empty(),u.innerHTML="<a id='"+e+"_mbtn' name='"+e+"_mbtn' class='moreOption' href='javascript:;' onclick=\"javascript:getMorePulseDetails('mrlstact','"+t+"','frmspn','"+l+"','"+n+"');\">"+getObj("mda_trans").value+"</a>");y=o.innerHTML+i;if($(o).empty(),o.innerHTML=y,EvalInnerScript(o),document.getElementById("pulseRightBoxInnerDiv")&&(document.getElementById("pulseRightBoxInnerDiv").style.height=document.getElementById("pmrlstact").offsetHeight-(document.getElementById("pulseRightTitleDiv").offsetHeight+document.getElementById("mrlalnk").offsetHeight)+"px","larw"==a&&(document.getElementById("pulseRightBoxInnerDiv").style.width="350px")),getObj(e+"_avail"))if("mrlstact"==e)$(u).empty();else(b=getObj(e+"_mbtn")).style.display="none";else if("mrbtn"==a||"rlnk"==a){var b;(b=getObj(e+"_mbtn")).value=m,b.disabled=!1,b.style.display="block"}}})),!1}function showPulseUsingSlider(){var e=Crm.getCrmBasePath()+"/Pulse.do",t={action:"aplSldrDays"};t.days=$("#pulseValue")[0].value.replace(/^[0]+/g,""),getObj("mod_sel")&&""!=getObj("mod_sel").value&&(t.searchModule=$("#mod_sel")[0].value),getObj("ownerId_sel")&&""!=getObj("ownerId_sel").value&&(t.ownerId=$("#ownerId_sel")[0].value);var a={params:t,success_callback:function(e){var t=e;if(t.indexOf("ALERTERROR:::")>-1){var a=t.split("ALERTERROR:::");alert(a[1])}else $("#pulseInfo").empty(),document.getElementById("pulseInfo").innerHTML=t,EvalInnerScript(document.getElementById("pulseInfo"))}};return networkUtils.makeRequest(e,"POST",a),!1}function changePopTabView(e,t,a){var l=document.getElementById("tab_a_"+e);if(l){var n=document.getElementById("tab_a_"+t);n.onclick="first"==t?function(){changePopTabView("first","last",a)}:function(){changePopTabView("last","first",a)},l.removeAttribute("onclick",0),l.className=e+" active",n.className=t}document.getElementById("last_popup_accessed_tab").value=e,"first"==e?showPulseHistory("dlink"):(TBAPageNum=1,noMoreTBActions=!1,loadTimeBasedActions(1,getObj("id").value,a))}function showPulseHistory(e,t){if(t){var a="<h2>"+getObj("upcmngactn").value+"</h2>";$(getObj("lstact_title")).empty(),getObj("lstact_title").innerHTML='<div class="mt5 floatR dbBtnClose svgIcons ico-close op05 dIB pointer" onclick="closePulsePopupDiv(\'pmrlstact_d\')"></div>'+a+"</div>";l=getObj("module").value;loadTimeBasedActions(1,getObj("id").value,l),document.getElementById("plstact_d").style.display="block",repositionContainer("pmrlstact_d","pulseHistorylnk")}else{var l=getObj("module").value;"dlink"==e&&(getObj("dtl_nxt_st").value="0");var n=Crm.getCrmBasePath()+"/Pulse.do?searchModule="+l+"&action=getMoreLastActivities&parentId="+getObj("id").value+"&nextSet="+getObj("dtl_nxt_st").value+"&isoCode="+getObj("rec_iso_cd").value,r=getObj("mrlalnk_d"),i=document.getElementById("lstact_d");"dlink"==e?n+="&referer=entitylstupdlink":"mbtn"==e&&(n+="&referer=entitylstupdmorebtn"),mR(n,(function(a){var n=a,o="",s=getObj("curr_edtn");if(!s||"E"!=s.value&&"A"!=s.value&&"C"!=s.value&&"U"!=s.value&&"Z"!=s.value?s&&"E"!=s.value&&"A"!=s.value&&"C"!=s.value&&"U"!==s.value&&"Z"!==s.value&&(o="<h2>"+getObj("actdone").value+"</h2>"):o=t?"<h2>"+getObj("upcmngactn").value+"</h2>":"<div class='menuBg'><div class='tabMenu'><a id='tab_a_first' class='first active' href='javascript:void(null)'>"+getObj("actdone").value+"</a><a id='tab_a_last' class='last' href='javascript:void(null)' onclick=\"changePopTabView('last','first','"+l+"');\">"+getObj("upcmngactn").value+"</a></div></div>",n.indexOf("ALERTERROR:::")>-1){var d=n.split("ALERTERROR:::");alert(d[1])}else if(n.indexOf("NOMOREUPDATES:::")>-1)$(getObj("lstact_title")).empty(),getObj("lstact_title").innerHTML='<div class="mt5 floatR dbBtnClose svgIcons ico-close op05 dIB pointer" onclick="closePulsePopupDiv(\'pmrlstact_d\')"></div>'+o+"</div>",getObj("dp_tmp_act")&&($(i).empty(),i.innerHTML=getObj("dp_tmp_act").innerHTML),$(r).empty();else{if("dlink"==e)$(getObj("lstact_title")).empty(),getObj("lstact_title").innerHTML='<div class="mt5 floatR dbBtnClose svgIcons ico-close op05 dIB pointer" onclick="closePulsePopupDiv(\'pmrlstact_d\')"></div>'+o+"</div>",$(i).empty(),i.innerHTML=n;else{var u=i.innerHTML+n;$(i).empty(),i.innerHTML=u}var c=getObj("dtl_nxt_st");c.value=parseInt(c.value,10)+1,getObj("mrlstact_avail")?$(r).empty():($(r).empty(),r.innerHTML="<a id='mbtn' name='mbtn' class='moreOption' href='javascript:;' onclick=\"javascript:showPulseHistory('mbtn');\">"+getObj("mda_trans").value+"</a>",r.style.display="")}repositionContainer("pmrlstact_d","pulseHistorylnk"),"dlink"==e&&(document.getElementById("plstact_d").style.display="block",document.getElementById("upcmng_actn").style.display="none")}))}return!1}function closePulsePopupDiv(e){var t=document.getElementById(e);t&&($("#lstact_d").empty(),document.getElementById("lstact_d").style.height="",getObj("dtl_nxt_st")&&(getObj("dtl_nxt_st").value="0"),t.style.display="none")}function repositionContainer(e,t){var a=getObj(e),l=getObj(t);a&&l&&(Crm.userDetails.RTL_ENABLED?a.style.left=findPosX(l)+"px":a.style.left=findPosX(l)-345+"px",a.style.top=findPosY(l)+20+"px",a.style.width="490px",a.style.display="block",a.style.zIndex="100",a.style.position="absolute")}function showFlwdUsrLst(e){var t=getObj(e);t&&(t.style.display="block")}function setPositionOfContainer(e){var t=findPosX(document.getElementById("pulseSettingsTd"));e.style.left=t-360+"px";document.all?document.body.offsetHeight:window.innerHeight,pulseRightBoxPostion(),document.documentElement.offsetWidth,document.getElementById("pmrlstact").style.left=t+"px"}function setValueLookup(e,t,a,l,n,r,i,o,s){var d=document.querySelector(".fromLyteFields"),u=!1;if(d&&d.component&&"lookupPopup"!==i){d.component.setData({newLookupcreated:!0,selectedSingleId:t});var c=d.querySelector("lyte-input");c&&(c.classList.add("yellowLyteInput"),u=!0,setTimeout((function(){c.classList.remove("yellowLyteInput")}),5e3)),d.classList.remove("fromLyteFields")}var m=$("#searchCreatePopup:visible").length,p=!1,f=$("#qCreate").is(":visible"),v=$("#freezeBackGround");if(null!=o&&("zcal"==o||"zmail"==o||"zcreator"==o||"mail"==o)){var h=RebrandLinkUtil.getProperty("CALENDARURL");if(!h){var g=window.location.hostname;h=g&&-1!==g.indexOf("localzoho.com")?"calendar.localzoho.com":"calendar.zoho.com"}"zmail"==o?h=RebrandLinkUtil.getProperty("MailURL"):"zcreator"==o?h=RebrandLinkUtil.getProperty("creatorURL"):"mail"==o&&(h=RebrandLinkUtil.getProperty("MailURL"));var y=RebrandLinkUtil.getProperty("URLPROTOCOL");y||(y="https");var b=y+"://"+h,C={};return C.fldName=e,C.fldId=t,C.frmtprice=a,C.frmtqty=l,C.pbname=n,C.formName=r,void window.opener.postMessage(C,b)}var T="lookupPopup"===i&&$("#searchCreatePopup").html()?$("#searchCreatePopup"):r&&document[r]?$(document[r]):$("body"),E=$("#"+i);r&&"undefined"!==r||(r=$("[name^=createEntityForm]")[0]?$("[name^=createEntityForm]")[0].name:void 0);var _=Crm.moduleName?Crm.moduleName:"";if(i){_=T.find('input[name="searchModule"]').val();var I=E.find('input[name="searchModule"]').val(),k=E.find('input[name="fldName"]').val(),w=E.find('input[name="fldId"]').val(),R=E.find('input[name="operation"]').length}else{I=getObj("searchModule").value,k=getObj("fldName").value,w=getObj("fldId").value;R=getObj("operation")}if("MassConvertForm"!==r&&"convertlead"!==r||$("#clearCampaigns").removeClass("vH"),("Quotes"==_||"Invoices"==_||"SalesOrders"==_||"Contacts"==_)&&"Accounts"==I&&"Account Name"==k&&R||"SalesOrders"==_&&"Quotes"==I||"Invoices"==_&&"SalesOrders"==I&&R)fillFormObject(encodeURIComponent(e),t,I,r);else{if("temp_searchcampcv"===k)var L=$(".camp_lkp_obj")[0],D=$(L).closest("#searchval_div").find("#temp_searchcampcv")[0];else D=getObjFromPopup(k,T),L=getObjFromPopup(w,T);if("convertlead"===r){var S=w.split("_")[1];document.querySelector("crux-lookup-component[id='component_"+S+"']").component.setData("cxPropValue",'{"id":"'+t+'","name":"'+e+'"}');var O=$L("crm-mass-convert");O.length>0&&O[0].setData("moveBackGroundFreeze",!1)}else{L.value=t,D.value=e,$(D).data("id",t),k==w?$(L).data("id",t):L.value=t;try{CRMLookupCallBack()}catch(e){}if(Crm.setRefFieldValues(D,t),"Products"==I){var F=k.substr(10);Crm.isInventoryModule(_)&&("null"!=l&&(getObj("hdnQtyStock"+F).value=l),getObj("hdnUnitPrice"+F).value=a)}else if("PriceBooks"==I)if("null"!=e&&null!=e&&k.indexOf("txtListPrice")>-1){D.value=e;var M=$(D).attr("id");M=M.split("txtListPrice")[1],productDetails.discStatus="fromPb",$("#txtQty"+M).trigger("blur"),$("#hdnPriceBookName"+M).val(n),$("#hdnPriceBookIdClone"+M).val(t);var A=$("#frmBook").find(".openSansNormal").text();A.indexOf("-")>0&&(A=A.substring(0,A.lastIndexOf("-"))),$("#frmBook").find(".openSansNormal").text(A),$("#frmBook").find(".openSansNormal").append(" - "+n)}else if("null"!==e&&null!==e&&Crm.isLineItemSubFormModule(D.dataset.subformdisplaylabel)&&k.indexOf("_BOOKID_")>-1){var P=$(D).closest("tr").data("data-rowid"),x=$(productDetails.sfFldIdSuffix+"LISTPRICE_"+P);$(D).val(n),x.val(productDetails.getRoundOff(x,parseFloat(e))).trigger("change"),productDetails.discStatus="fromPb",p=!0,window[productDetails.module].formulaObj.handlePriceBookLineItemUpdate(P,s,!0)}else D.value=n;if(getObj("property(leContModName)")){var N=getObj("property(leContModName)");if($("#leContModName").trigger("loadBestTime"),"createEvent"in document){var V=document.createEvent("HTMLEvents");V.initEvent("click",!1,!0),N.dispatchEvent(V)}else N.fireEvent("onclick")}("convertlead"==r||"MassConvertForm"==r&&D.value.length>0)&&$("#"+D.parentElement.id).addClass("show-close")}var U=$("#sIlookupFieldAddNew");1==U.is(":visible")&&"Account Name"==k&&(U.hide(),$(".clearAccountName").remove()),hideAnimatePopup(i,!0),m&&($("#freezeBackGround").css("z-index","30"),showFreezeLayer()),null!==window.opener||p||u||$(D).effect("highlight",{},1e3)}f&&v.css("z-index","30")}function setContactValues(e,t,a,l,n,r){var o=document.querySelector(".fromLyteFields"),s=!1;if(o&&o.component&&"lookupPopup"!==n){o.component.setData({newLookupcreated:!0,selectedSingleId:t});var d=o.querySelector("lyte-input");d&&(d.classList.add("yellowLyteInput"),s=!0,setTimeout((function(){d.classList.remove("yellowLyteInput")}),5e3)),o.classList.remove("fromLyteFields")}var u=$("#searchCreatePopup:visible").length,c=$("#qCreate").is(":visible"),m=$("#freezeBackGround"),p=decodeURIComponent(a);jsonObj=JSON.parse(p),a=jsonObj.accountName+"",accId=jsonObj.accountId+"";var f=jsonObj.cntPhone+"",v=jsonObj.cntEmail+"",h=l&&document[l]?$(document[l]):$("#show"),g=$("#"+n),y=Crm.moduleName?Crm.moduleName:"";if(null!=r&&("zcal"==r||"zmail"==r||"zcreator"==r||"mail"==r)){var b=RebrandLinkUtil.getProperty("CALENDARURL");if(!b){var C=window.location.hostname;b=C&&-1!==C.indexOf("localzoho.com")?"calendar.localzoho.com":"calendar.zoho.com"}"zmail"==r?b=RebrandLinkUtil.getProperty("MailURL"):"zcreator"==r?b=RebrandLinkUtil.getProperty("creatorURL"):"mail"==r&&(b=RebrandLinkUtil.getProperty("MailURL"));var T=RebrandLinkUtil.getProperty("URLPROTOCOL");T||(T="https");var E=T+"://"+b,_={};return _.fldName=e,_.fldId=t,_.acName=a,_.acId=accId,_.formName=l,void window.opener.postMessage(_,E)}if(n){y=h.find('input[name="module"]').val();g.find('input[name="searchModule"]').val();var I=g.find('input[name="fldName"]').val(),k=g.find('input[name="fldId"]').val(),w=getObjFromPopup(I,h),R=getObjFromPopup(k,h)}else getObj("searchModule").value,I=getObj("fldName").value,k=getObj("fldId").value,I=getObj("fldName").value,w=getOpenerObj(I,l),R=getOpenerObj(getObj("fldId").value,l);var L=getObjFromPopup("uiType_property(contactName:"+I+")",g);if(L)var D=L.value;if(void 0!==w&&(w.value=e,$(w).data("id",t)),void 0!==R&&(R.value=t),0==I.indexOf("CID")){var S=I.replace("CID",""),O=getObjFromPopup("accNameInConRoleAdd_"+S,h);O&&(void 0!==a&&"null"!=a?O.innerText=a:$(O).empty())}try{"undefined"!=typeof CRMLookupCallBack&&CRMLookupCallBack(),opener.CRMLookupCallBack()}catch(e){}if(null!=getObjFromPopup("property(modsel)",h))var F=getObjFromPopup("property(modsel)",h).value,M=getObjFromPopup("property(modname)",h).value;if(""==M&&("null"!=a&&"Accounts"==F?(getObjFromPopup("property(modname)",h).value=a,getObjFromPopup("property(modid)",h).value=accId,$(getObjFromPopup("property(modname)",h)).data("id",accId)):(getObjFromPopup("property(modname)",h).value="",getObjFromPopup("property(modid)",h).value="")),133!=D&&"null"!=a&&getObjFromPopup("property(Account Name)",h)&&""==getObjFromPopup("property(Account Name)",h).value&&getObjFromPopup("Account Name",h)){getObjFromPopup("Account Name",h).value=unescape(a);var A=Object.keys(jsonObj);for(i=0;i<A.length;i++){var P=getObjFromPopup("property("+A[i]+")",h);P&&(P.value=jsonObj[A[i]]?jsonObj[A[i]]:"")}}if("Cases"===y&&("null"!==f&&getObjFromPopup("property(Phone)",h)&&""===getObjFromPopup("property(Phone)",h).value&&(getObjFromPopup("property(Phone)",h).value=f),"null"!==v&&getObjFromPopup("property(Email)",h)&&""===getObjFromPopup("property(Email)",h).value&&(getObjFromPopup("property(Email)",h).value=v)),getObjFromPopup("property(leContModName)",h)){var x=getObjFromPopup("property(leContModName)",h);$("#leContModName").trigger("loadBestTime"),Crm.isHeadless||$(x).trigger("click")}if(Crm.setRefFieldValues(w,t),"SalesOrders"!=y&&"Quotes"!=y&&"Invoices"!=y||fillFormObject(encodeURIComponent(e),t,"Contacts",l),"MassConvertForm"===l&&w.value.length>0)$("#"+w.parentElement.id).addClass("show-close");else if("convertlead"===l){var N=k.split("_")[1];document.querySelector("crux-lookup-component[id='component_"+N+"']").component.setData("cxPropValue",'{"id":"'+t+'","name":"'+e+'"}')}hideAnimatePopup(n,!0),u&&($("#freezeBackGround").css("z-index","30"),showFreezeLayer()),null!==window.opener||s||$(w).effect("highlight",{},1e3),c&&m.css("z-index","30")}function fillFormObject(e,t,a,l,n){var r=getObj("fldName").value,i=getObj("fldId").value,o=getObj("operation").value,s=getObj(r),d=getObj(i);s.value=decodeURIComponent(e),d.value=t,fillInfo(Crm.getCrmBasePath()+"/FillEntityObject.do?fillUpModule="+a+"&operation="+o+"&module="+getOpenerObj("module").value+"&entityname="+e+"&entityid="+t+"&isajax=true",a,l)}function fillInfo(e,t,a){var l=getHTTPObject();l.open("POST",e,!0),l.onreadystatechange=function(){if(4==l.readyState){var e=l.responseText;$("#test").empty(),document.getElementById("test").innerHTML=e,opener.document.forms[a].fieldvalues.value=getObj("fieldvalues").value;var n=1;opener.document.forms[a].rowCount&&(n=opener.rowCnt,opener.document.forms[a].rowCount.value=getObj("rowCount").value),opener.init(),"Accounts"==t&&opener.rowCnt&&(opener.rowCnt=n),$("#test").empty(),window.self.close()}},l.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),l.send(csrfParamName+"="+encodeURIComponent(csrfToken))}function blockContent(e,t){if(!t||13!=t.keyCode){if(document.getElementById("displayContent_"+e)){var a=document.getElementById("displayContent_"+e);$(a).remove()}$(getObj(e)).removeClass("err_fld"),$(getObj(e)).closest("tr").hasClass("form_err_fld")&&$(getObj(e)).closest("tr").removeClass("form_err_fld")}}function moveMail(e,t,a,l){var n="step=moveMails&toSeid="+e+"&messageId="+t+"&"+a+"="+encodeURIComponent(l);$.ajax({type:"POST",data:n,url:Crm.getCrmBasePath()+"/Search.do",success:function(e){var t=$(".pwie");t.html('<div class="MailToolPopup">'+I18n.getMsg("bccdropbox.movemail.succ")+"</div>"),t.removeClass("pB20"),t.addClass("pB40");var a=$(".MailToolPopup");a.css({padding:"8px 30px",position:"absolute","font-size":"14px","font-family":"georgia",border:"1px solid #daebcc","box-shadow":"2px 2px 10px #e5e5e5","background-color":"#55b05a",color:"#fff","z-index":"300"});var l=a.outerWidth()/2,n=t.outerWidth()/2-l;if(a.css({left:n,top:"0px"}),setTimeout((function(){$("#topBandPopup").hide(),$("#freezeBackGround").hide()}),2500),$("#isFromNewAPI").length>0){var r=$("#id").val();null!=store.peekRecord("emails_rl_user","shared_users_"+r)&&store.deleteRecord("emails_rl_user","emails_"+r),showMailsListViaAPI("ALL","-10","next")}else window.$("#mailTable").find("tr[tobehidden=true]").hide()}})}function showLookUp(e,t,a,l,n,r,i,o,s,d,u,c,m,p,f,v,h){if(isNewLookupPopup(e,l)){var g=networkUtils.returnDependencyFiles(["crm-entity-lookup.js"],crmConstants.jsStaticPathForLyte);g=g.concat(networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("Lookup")],crmConstants.jsStaticPath));var y=[];Crm.userDetails.RTL_ENABLED&&(y=networkUtils.returnDependencyFiles(["crm-entity-lookup-rtl.css"],crmConstants.cssStaticPathForLyte));var b=g.concat(y);Lyte.injectResources(b,void 0,(function(){var a={},n=$(document.getElementById(e));a.lookupModule=l,a.productFldId=o,a.module=$('input[name="searchModule"]').val(),a.labelName=e,a.searchModule=l,a.linkingmodule=void 0,a.fieldid=n.data("fieldid"),a.id=n.data("id"),t&&(a.labelId=t),a.parentModule=h?$('input[name="property(module)"]').val():l;var r=document.getElementById("lookupListPopup");if(h&&$("crm-entity-lookup").length>0&&$("crm-entity-lookup")[0].component.closeThisLookupPop(),!r){var i="";i=t.indexOf("CID")>0?n:document.getElementById(t);var s=document.createElement("crm-entity-lookup");s.component.setData("reqData",{fieldid:n.data("fieldid")}),i.append(s),r=document.getElementById("lookupListPopup")}var d=$("crm-entity-lookup")[0].component;d.setData("fromSearchCreate",h),d.layersAnalystAgent(d,h,a,!1,!0)}))}else newShowLookUp(e,t,a,l,n,i,o,s,d,u,c,m,p,f,v,h)}function isNewLookupPopup(e,t){var a=$(".outlookInfoCont").is(":visible");return Crm.userDetails.isLookupAdvancedSearchEnabled&&"ownername"!==t&&null!==e&&-1===e.indexOf("searchcampcv")&&!a}function newShowLookUp(e,t,a,l,n,r,i,o,s,d,u,c,m,p,f,v){var h=$("[id='"+e+"']").data("fieldid");h&&(h+=""),h&&-1!=h.indexOf("fields_")&&(h=h.split("_")[1]);var g=$("#createEntityForm"),y=$("#qCreate").is(":visible"),b=$("#layoutdetails").val();if(isNewLookupPopup(e,l)){var C={};C.lookupModule=l;var T=$('input[name="searchModule"]').val();C.parentModule=v?$('input[name="property(module)"]').val():l,C.module=void 0===T?l:T,C.labelName=e,C.searchModule=l,C.linkingmodule=void 0,t&&(C.labelId=t);var E=networkUtils.returnDependencyFiles(["crm-entity-lookup.js"],crmConstants.jsStaticPathForLyte);E=E.concat(networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("Lookup")],crmConstants.jsStaticPath));var _=[];Crm.userDetails.RTL_ENABLED&&(_=networkUtils.returnDependencyFiles(["crm-entity-lookup-rtl.css"],crmConstants.cssStaticPathForLyte));var I=E.concat(_);Lyte.injectResources(I,void 0,(function(){var a=document.getElementById(t);if(e.indexOf("property(Campaign Source)")>=0)C.parentModule="Potentials",C.fieldid=$(f.target.parentElement.closest("tr")).find("div.convertLead").attr("extrainfo").split("&&&")[0],a=a.closest("div");else{var l=$("[id='"+e+"']");C.fieldid=l.data("fieldid"),C.id=l.data("id")}var n=document.getElementById("lookupListPopup");if(v&&$("crm-entity-lookup").length>0&&$("crm-entity-lookup")[0].component.closeThisLookupPop(),!n){var r=document.createElement("crm-entity-lookup");r.component.setData("reqData",{}),a.append(r),n=document.getElementById("lookupListPopup")}var i=$("crm-entity-lookup")[0].component;i.layersAnalystAgent(i,v,C,!1,!0)}))}else{var k=renderingUtils.windowWidth;if("fromentityview"==n){var w=$("#id").val();Search.showChangeOwnerPopUp("entityview",l,w,p,o,"5")}else if("listview"==n||"customview"==n)p=crmListView.getObject().module,Search.showChangeOwnerPopUp(n,l,"",p,o,"5");else{if(f)var R=f.target,L=$(R).closest("form")[0].name;else L=void 0;var D=getObj(e);productStr="";var S="",O=getObj("operation");if(null==i);else if(null!=i){if("vendorName"==i||"property(vendorName:Vendor Name)"==i)S=getObj("property(vendorName:Vendor Name)")?getObj("property(vendorName:Vendor Name)").value:"";else if("property(actName:Account Name)"==i){for(var F=$("*[id^='property(actName:']"),M=[],A={accounts:[]},P=0,x=0;x<F.length;x++){var N=F[x],V=N.value,U=/property\([a-z]+\:(.*[^)])+/i,j=N.id.match(U)[1],B=getObj(j),H="";if(!B)B=getObj("property("+j+")");B&&(H=B.value),null!=V&&""!=V&&null!=H&&""!=H&&(M.contains(V)||(M[P]=V,A.accounts[P]={},A.accounts[P].id=V,A.accounts[P].name=H,P+=1))}if(M.length>0){S=M[0];var q=JSON.stringify(A);productStr=productStr+"&accDetails="+encodeURIComponent(q)}else S=null}else S=$("[id='"+i+"']").val()?$("[id='"+i+"']").val():null;productStr=productStr+"&productId="+S}var z,Y=getObj("property(Currency)");z=Y?Y.value:"";var K=t;if(t.indexOf("property(")>-1)try{U=/property\([a-z]+\:(.*[^)])+/i;K=t.match(U)[1].replace(/[^a-z]/gi,"")}catch(e){K=(new Date).getTime()}var W="Lookup"+K;if("ownername"==l){if("itsfromwebformOwnerlookup"==n)var J=Crm.getCrmBasePath()+"/Search.do?searchmodule="+l+"&fldName="+e+"&fldId="+t+"&fldLabel="+a+"&fldValue="+productStr+"&itsfromwebformOwnerlookup=yes&condition="+c+"&targetForm="+L;else if(e.indexOf("searchuser")>-1)J=Crm.getCrmBasePath()+"/Search.do?searchmodule="+l+"&fldName="+e+"&fldId="+t+"&fldLabel="+a+"&fldValue="+productStr+"&itsfromcriteria=yes&condition="+c+"&targetForm="+L;else if("itsfrmChangeManger"==n||"itsfrmChangeFCManger"==n){var G="no",Z="";a.indexOf("addManager")>-1?(Z=a.replace("addManager",""),G="yes"):Z=a.replace("changeManager","");var Q="";Q="itsfrmChangeFCManger"==n?"&roleId="+Z:"&territoryId="+Z;J=Crm.getCrmBasePath()+"/Search.do?searchmodule="+l+"&fldName="+e+"&fldId="+t+"&fldLabel="+a+"&fldValue="+productStr+"&"+n+"="+G+"&condition="+c+Q+"&targetForm="+L}else J=Crm.getCrmBasePath()+"/Search.do?searchmodule="+l+"&fldName="+e+"&fldId="+t+"&fldLabel="+a+"&fldValue="+productStr+"&itsfromLAR="+d+"&condition="+c+"&targetForm="+L;if(document.getElementById("showUserList"))J=J+"&showUserList="+document.getElementById("showUserList").value;if(getObj("showDuplicates"))J=J+"&showDuplicates="+getObj("showDuplicates").value;null!=u&&(J=J+"&ownerFieldId="+u),O&&"edit"==O.value&&(J=J+"&operation="+O.value),null!=p&&(J=J+"&module="+p),g.is(":visible")&&(ee=g.find("[name=layoutId]").val()),y&&void 0!==b&&(ee=b),$("#convertLeadForm").is(":visible")&&(ee=Crm.VR.potLayoutId),ee&&"null"!=ee&&"undefined"!=ee&&(J+="&layoutId="+ee),h&&"null"!=h&&"undefined"!=h&&(J+="&lookupFieldId="+h);document.body.scrollTop;$("#topBandPopup").empty(),document.getElementById("iskanbanview")&&(J+="&iskanbanview=true"),mR(J,(function(e){$("#topBandPopup").html(e);var t=$("#ownerId");if(null!=t.val()&&""!=t.val()){var a=t.val();$("#"+a+"_chkbx").prop("checked",!0),isclicked=!0}showAnimatePopup("topBandPopup"),thirdPartyUtils.bindSelect2($(".newSelect").find("select")),setTimeout((function(){$("#fldValue").length>0&&$("#fldValue").focus()}),500)}))}else{if(""!=m&&null!=m&&"-1"!=m)var X=Crm.getCrmBasePath()+"/Search.do?searchmodule="+l+"&fldName="+e+"&fldId="+t+"&fldLabel="+a+"&fldValue="+productStr+"&condition="+c+"&potentialId="+m+"&currencyISOCode="+z+"&targetForm="+L;else X=Crm.getCrmBasePath()+"/Search.do?searchmodule="+l+"&fldName="+e+"&fldId="+t+"&fldLabel="+a+"&fldValue="+productStr+"&condition="+c+"&currencyISOCode="+z+"&targetForm="+L;var ee;if(g.is(":visible")&&(ee=g.find("[name=layoutId]").val()),y&&void 0!==b&&(ee=b),$("#convertLeadForm").is(":visible")&&(ee=Crm.VR.potLayoutId),ee&&"null"!=ee&&"undefined"!=ee&&(X+="&layoutId="+ee),h&&"null"!=h&&"undefined"!=h&&(X+="&lookupFieldId="+h),"PotContacts"!=l&&("toAddress"!==e&&"ccAddress"!==e||"Contacts"!==l&&"Leads"!==l)){var te="topBandPopup";if(v)$("#topBandPopup").html()&&(Crm.lookups={},Crm.lookups.content=$("#topBandPopup").html()),1!=$("#sIlookupFieldAddNew").is(":visible")&&"Account Name"!==e&&$("#topBandPopup").html(""),te="lookupPopup",X+="&fromSearchCreate=true";if($(".outlookInfoCont").is(":visible")){$(te);X+="&isfromOutlookRightPanel=true",$$rightPanel.openNewWindowFromOutlook(X,500,1100)}else commonUtils.openCustomLookup(X,"",te,k-300,void 0,void 0,void 0,void 0,void 0,v)}else openPopUp("lookUpWin",D,X,W,900,400,"menubar=no,toolbar=no,location=no,status=no,scrollbars=yes,resizable=yes")}0!=$("#cvEditSave").length&&"block"===$("#cvEditSave")[0].style.display&&($('[id="cvEditSave"] [id="'+e+'"]')[0].value=""),$("#searchCreatePopup").length&&"none"!=$("#searchCreatePopup")[0].style.display&&$("#lookupPopup").css("z-index","252")}}}function loadlookupdiv(e,t){if($("#lookupdiv").removeAttr("style"),document.getElementById("lookupdiv").style.zIndex=30,document.getElementById("lookupdiv").style.opacity="1",$(".zcrm-show").is(":visible")){var a=$(".zcrm-modal").css("z-index");$("#lookupdiv").css({"z-index":parseInt(a)+2}),setTimeout((function(){$("#FreezeLayer").css({"z-index":parseInt(a)+1})}),300)}t&&($("#lookupdiv").empty(),document.getElementById("lookupdiv").innerHTML="<div style='height:300px;overflow:auto;border:1px solid #e5e5e5'>"+I18n.getMsg("loading")+"...</div>"),mR(e,(function(e){freezeBackground();var t=document.getElementById("lookupdiv");$("#lookupdiv").empty(),document.getElementById("lookupdiv").innerHTML=e,mailsetCenter("lookupdiv");for(var a=t.getElementsByTagName("SCRIPT"),l=0;l<a.length;l++){var n=document.createElement("SCRIPT");n.type="text/javascript",n.language="javascript",""!=a[l].src&&(n.src=a[l].src),n.text=a[l].text,void 0===document.getElementsByTagName("HEAD")[0]?document.createElement("HEAD").appendChild(n):document.getElementsByTagName("HEAD")[0].appendChild(n)}}))}function loadCurrencyDiv(e){$("#currFrmtDiv_back").hide(),document.getElementById("currencyPopupDiv").innerHTML="<div style='height:300px;overflow:auto;border:1px solid #e5e5e5'>"+I18n.getMsg("loading")+"...</div>",mR(e,(function(e){$("#currencyPopupDiv").html(e),crmui.showPopup("currencyPopupDiv",!0),wfForm.initFormClick(),wfForm.chosen_show("currencyPopupDiv"),wfForm.inputfieldFocus()}))}function closeownernamedialog(){$("select").css({visibility:"visible"});var e=document.getElementById("shownotes"),t=document.getElementById("updateCallStatus"),a=document.querySelector("#multipleFieldsEditPop");a=!!a&&"none"!=a.style.display,e&&"block"==e.style.display||$("#eventCreatePopup").is(":visible")||$(".feedAutoFollowPopup").is(":visible")||t&&$("#updateCallStatus").is(":visible")||0!=$("#wfModule").length||a||removeFreezeLayer(),$("#topBandPopup").is(":visible")&&hideAnimatePopup("topBandPopup",!0),t&&$("#updateCallStatus").is(":visible")&&($("#freezeBackGround").css({opacity:"0.5",background:"#ffffff",zIndex:"26"}),$("#updateCallStatus").css("zIndex","27"),showFreezeLayer()),getObj("lookupdiv").style.display="none",$(getObj("lookupdiv")).removeClass("newShowLayoutPopup"),$L("#rpBtnResubmit").removeClass("disable"),removeInsertedScripts()}function fieldDependency(e,t){var a=Crm.jsonDepValues[t];try{val=a[e]}catch(t){a=JSON.parse(jsonDepValues),val=a[e]}"Salutation"==e&&(e="saltName");var l=getObj("property("+e+")")?getObj("property("+e+")").value:"";""==l&&(l="-"+I18n.getMsg("None")+"-");var n={};for(var r in val)if(val.hasOwnProperty(r)){var i=r;"Salutation"==i&&(i="saltName");var o=getObj("property("+i+")");if(getObj(i)){var s=getObj(i).value;o=getObj("comboValue"+s);for(var d=[],u=0;u<o.options.length;u++)o.options[u].selected&&d.push(o.options[u].value);d.length>0&&(n[i]=d)}else n[i]=o.value;var c=val[r][l];if(c){o.length=0;for(var m=n[i],p=0;p<c.length;p++){var f=document.createElement("OPTION");"-None-"==c[p]?f.value="":f.value=c[p],f.text=c[p],"object"==typeof m?m.contains(c[p])&&(f.selected=!0):c[p]==n[i]&&(f.selected=!0),o.options.add(f)}}}}function setDependent(e,t,a,l,n,r){$(".newSelect select").trigger("destroy");var i=$(e).closest("form")[0].name;l||(l=getElm(i,"module").value),noneValue=I18n.getMsg("None"),e.length>1&&"radio"==e[0].type&&(e=e[0]);var o=!0,s=e.name;""!=s&&null!=s&&null!=s||(o=!1,s=e.id);var d=$(e);if(!0===d.data("colorcode_enabled")){var u=d.children("option:selected").eq(0),c=u.attr("data-colorcode")?u.attr("data-colorcode"):"",m="selectColorComponent";if(l!==crmModuleConstants.Events){m=void 0!==d.data("subformsectionlabel")?m+"-"+d.attr("id"):m+"-"+d.data("fieldid"),d.data("colorcode",c);var p=d.parent().parent();if(p.addClass("colorEnabledPicklist"),$("#"+m).remove(),"-None-"===u.val()||""===u.val())p.addClass("colorEnabledPKNone");else p.removeClass("colorEnabledPKNone"),$('<span class="dIB activitesColor" data-zcqa="generalaction_colorcode_'+d.data("fieldid")+'" id="'+m+'" style="background:'+c+'"></span>').insertBefore(d)}}var f=s.substr(s.indexOf("(")+1,s.length);f=f.substr(0,f.lastIndexOf(")"));var v=a?Crm.jsonDepValues_Quick[l]:Crm.jsonDepValues[l],h=a?Crm.jsonSelectValues_Quick[l]:Crm.jsonSelectValues[l];if(null!=v){var g=v[f];if(null!=g&&""!=g&&"null"!=g){var y=g;for(var b in y)if(y.hasOwnProperty(b)){var C=!1,T=b,E=y[b];T.indexOf(")")>-1&&(T=T.replace(/\)/g,"_____")),T.indexOf("(")>-1&&(T=T.replace(/\(/g,"____")),T.indexOf(".")>-1&&(T=T.replace(/\./g,"___"));var _=getElm(i,"property("+T+")");if(o||(_=getElemById("property("+T+")")),null!=_&&null!=_||"Salutation"!=T||(_=getElm(i,"property(saltName)"),o||(_=getElemById("property(saltName)"))),getElm(i,T)){var I=getElm(i,T).value,k=getElm(i,"comboValue"+I);null!=k&&null!=k&&(_=k)}if(_&&_.options){var w="26"===_.dataset.uitype,R=$("#stageMap"),L=w&&R.length?JSON.parse(R.val()):void 0;"Potentials"!=l||"convertlead"!=i&&"MassConvertForm"!=i||(L=JSON.parse(R.val()));for(var D=!(!_.dataset.colorcode_enabled||"true"!==_.dataset.colorcode_enabled),S=_.dataset.picklistmap?JSON.parse(_.dataset.picklistmap):{},O="",F=0;F<_.options.length;F++)_.options[F].selected&&(O=""==O?_.options[F].value:O+",,,"+_.options[F].value);_.value="";var M=h[T];if(!r)for(var A in E){var P=A;"-None-"==P&&(P="");h[f];var x=null,N=e.value;if("Stage"==f&&"Potentials"==l&&N.indexOf(":")>-1&&(x=N.substring(N.indexOf(":")+1)),null!=x&&P==trimBoth(x)||P==trimBoth(e.value)){C=!0,_.length=0;for(var V=E[A],U=0;U<V.length;U++){var j=document.createElement("OPTION"),B=V[U];if("-None-"==(Y=B)?(j.value="",B=noneValue):L&&L[Y]?j.value=L[Y]:j.value=Y,j.text=B,null!=O)for(var H=O.split(",,,"),q=0;q<H.length;q++)Y==H[q]&&(j.selected=!0);if("undefined"!=typeof wfConvert&&Object.keys(wfConvert.stageVsProbablity).length>0&&null!=wfConvert.stageVsProbablity[Y]&&(j.setAttribute("data-val",wfConvert.stageVsProbablity[Y]),j.value=Y),D){var z=getPickListColorCode(Y,S,!0);j.setAttribute("data-colorcode",z)}_.options.add(j),"Potentials"!=l||"convertlead"!=i&&"MassConvertForm"!=i||$(_).trigger("change")}}}if(!C){_.length=0;for(U=0;U<M.length;U++){var Y=M[U];j=document.createElement("OPTION");if("-None-"==Y?(j.value="",M[U]=noneValue):j.value=M[U],j.text=M[U],null!=O&&n)for(H=O.split(",,,"),q=0;q<H.length;q++)Y==H[q]&&(j.selected=!0);if("undefined"!=typeof wfConvert&&Object.keys(wfConvert.stageVsProbablity).length>0&&null!=wfConvert.stageVsProbablity[Y]&&(j.setAttribute("data-val",wfConvert.stageVsProbablity[Y]),j.value=Y),D){z=getPickListColorCode(Y,S,!0);j.setAttribute("data-colorcode",z)}_.options.add(j)}}(!t||Crm.jsonDepValues[l]&&Crm.jsonDepValues[l][T])&&_&&"none"!=_.style.display&&setDependent(_,!1,void 0,l),a&&C&&setTimeout((function(){thirdPartyUtils.bindSelect2("#qCreate select"),w&&$(_).trigger("change")}),10)}}}thirdPartyUtils.bindSelect2($(".newSelect select"))}}function closeHtmldiv(e,t,a,l){"finish"==t?doAjaxUpdate("result",Crm.getCrmBasePath()+"/WebToEntityForm.do?module="+a):"cancel"==t&&(l?removeFreezeLayer2():removeFreezeLayer(),document.getElementById(e).style.display="none")}function getCallTimer(){return{Minute:0,Second:0,TimerID:0,start:function(e,t){this.TimerID=setInterval(e,t)},increment:function(){this.Second>=59?(this.Second=0,this.Minute+=1):this.Second+=1},reset:function(){clearInterval(this.TimerID),this.Minute=this.Second=this.TimerID=0},pause:function(){clearInterval(this.TimerID)},resume:function(e,t){this.TimerID=setInterval(e,t)}}}relatedListHeader.errMsg=[],relatedListHeader.specialKeywords=["VISIT SUMMARY","GOOGLE ADWORDS INFORMATION"],relatedListHeader.editElement=function(e){var t=$(e),a=t.parent(),l=a.next("span");a.hide(),l.css("display","inline-block");var n=l.find("input.moduleNameMXN");n.val(a.text().trim()),n.focus(),t.parents("table").addClass("mB10"),n.on("keyup",(function(e){if(13==e.which){var t=e.target;$(t).parent().find(".saveLink").trigger("click")}})),t.closest(".noDataFountDetail").addClass("dvLookUpEdit")},relatedListHeader.cancelEdit=function(e){var t=$(e),a=t.parent().parent();a.hide();var l=$(a.find(".textField"))[0];$(l).value="";var n=$($(a.find("#errorMsgDescMXN"))[0]);relatedListHeader.errMsg=[],n.text(""),n.addClass("dN"),t.closest("td").find(".relListHead").show(),n.next(".moduleNameMXN").removeClass("errrorMxn"),t.parents("table").removeClass("mB10"),$(".dvLookUpEdit").removeClass("dvLookUpEdit")},relatedListHeader.save=function(e,t){var a=$(e),l=a.parent().parent(),n=$($(l.find(".textField"))[0]),r=$($(l.find("#errorMsgDescMXN"))[0]);if(!multiLookupsView.validateRenameRelList(n.val(),relatedListHeader.errMsg)){var i=relatedListHeader.errMsg[0];return r.text(i),r.removeClass("dN"),r.next(".moduleNameMXN").addClass("errrorMxn"),!1}t=t+"&relatedListName="+encodeURIComponent(n.val())+"&module="+detailView.currentModule,(new crmRequestPool).initiate({action:t,type:"POST",data:csrfParamName+"="+encodeURIComponent(csrfToken),success:function(e){var t=e.ERROR;if(t)return r.text(t),r.removeClass("dN"),r.next(".moduleNameMXN").addClass("errrorMxn"),!1;r.addClass("dN");var l=a.closest("td"),i=a.parents("table");i.find(".moduleNameMXN").removeClass("errrorMxn");var o=$ESAPI.encoder().encodeForHTML(n.val())+'<span class="mxneditIconSvg vh cP mL10" onclick="relatedListHeader.editElement(this);"></span>';l.find(".relListHead").show().html(o),l.find(".labelValTwo").css("display","none"),i.removeClass("mB10");var s=$("#lp_rellist").find("#newleft_"+e.LISTRELATIONID+" a");s&&s.length&&s.text(n.val())}}),$(".dvLookUpEdit").removeClass("dvLookUpEdit")};var formNameVsTimerObjMap={createFormTimer:function(e){return this[e]=getCallTimer(),this[e]},resetFormTimer:function(e){void 0!==this[e]&&(this[e].reset(),delete this[e])},start:function(e,t,a){this.resetFormTimer(a),this.createFormTimer(a),this[a].start(e,t)},resume:function(e,t,a){this[a].resume(e,t)},increment:function(e){this[e].increment()},reset:function(e){void 0!==this[e]&&this[e].reset()},pause:function(e){this[e].pause()}},callTimer=formNameVsTimerObjMap.createFormTimer();function displayCallTimer(e){formNameVsTimerObjMap.increment(e);var t=formNameVsTimerObjMap[e],a=$("form[name='"+e+"'] #countupminute");a?(a.html((t.Minute<=9?"0":"")+t.Minute),$("form[name='"+e+"'] #countupsecond").html((t.Second<=9?"0":"")+t.Second)):formNameVsTimerObjMap.reset(formname)}function startCallTimer(e){var t=$(e).closest("form").get("0").name;$("form[name='"+t+"'] #startTimerDiv").attr("onclick","stopCallTimer(this)"),$("form[name='"+t+"'] #startTimerLabel").hide(),$("form[name='"+t+"'] #stopTimerLabel").show(),$("form[name='"+t+"'] #timerButtonDiv").css("visibility","visible"),$("form[name='"+t+"'] #pauseCallTimer").show(),$("form[name='"+t+"'] #resumeCallTimer").hide(),$("form[name='"+t+"'] #resetCallTimer").css("display","inline"),formNameVsTimerObjMap.start("displayCallTimer('"+t+"')",1e3,t);var a=Crm.getCrmBasePath()+"/calls/CallAction.do",l={type:"getCurrentTimeInUserFormat"};networkUtils.setCsrfParam(l),(new crmRequestPool).initiate({action:a,type:"POST",data:l,success:function(e){var a=e.indexOf(":"),l=e.substring(0,a-3),n=e.substring(a-2,e.length),r=[];r.push(l);var i=n.split(" ");r.push(i[0]),i.length>1&&r.push(i[1]);var o=r[1].split(":");if($("form[name='"+t+"'] [name='property(Call Start Time)']").val(r[0]),$("form[name='"+t+"'] [name='property(Call Start Timehour)']").val(o[0]),$("form[name='"+t+"'] [name='property(Call Start Timeminute)']").val(o[1]),"HH:mm"!==Crm.userDetails.TIME_FORMAT){$("form[name='"+t+"'] [name='property(Call Start Timeampm)']").val(r[2]);var s=$("form[name='"+t+"'] input[id='Call Start Time_dateTime']"),d=$("form[name='"+t+"'] span[id='Call Start Time_ampmSpan']");s.length&&d.length&&(s.val([o[0],o[1]].join(":")),d.attr("ampm",r[2]),d.val(I18n.getMsg(r[2])))}}})}function stopCallTimer(e){var t=$(e).closest("form").get("0").name,a=formNameVsTimerObjMap[t];$("form[name='"+t+"'] #startTimerDiv").attr("onclick",""),$("form[name='"+t+"'] [id='property(DurationInMinute)']").val(a.Minute<=9?"0"+a.Minute:a.Minute),$("form[name='"+t+"'] [id='property(DurationInSecond)']").val(a.Second<=9?"0"+a.Second:a.Second),formNameVsTimerObjMap.reset(t),$("form[name='"+t+"'] #pauseCallTimer").hide(),$("form[name='"+t+"'] #resumeCallTimer").hide(),$("form[name='"+t+"'] #resetCallTimer").css("display","inline"),$("form[name='"+t+"'] #stopTimerLabel").hide(),$("form[name='"+t+"'] #startTimerDiv").hide(),"quickcreate"==$("form[name='"+t+"'] #callTimerDiv").attr("place")&&(showHideCallDuration("inline-block",t),$("form[name='"+t+"'] #callTimerDiv").hide())}function pauseCallTimer(e){var t=$(e).closest("form").get("0").name;formNameVsTimerObjMap.pause(t),$("form[name='"+t+"'] #pauseCallTimer").hide(),$("form[name='"+t+"'] #resumeCallTimer").show()}function resumeCallTimer(e){var t=$(e).closest("form").get("0").name;formNameVsTimerObjMap.resume("displayCallTimer('"+t+"')",1e3,t),$("form[name='"+t+"'] #pauseCallTimer").show(),$("form[name='"+t+"'] #resumeCallTimer").hide()}function resetCallTimer(e){var t=$(e).closest("form").get("0").name;formNameVsTimerObjMap.reset(t),$("form[name='"+t+"'] #startTimerDiv").show().attr("onclick","startCallTimer(this)"),$("form[name='"+t+"'] #startTimerLabel").show(),$("form[name='"+t+"'] #stopTimerLabel").hide(),$("form[name='"+t+"'] #countupminute").html("00"),$("form[name='"+t+"'] #countupsecond").html("00"),$("form[name='"+t+"'] #pauseCallTimer").hide(),$("form[name='"+t+"'] #resumeCallTimer").hide(),$("form[name='"+t+"'] #resetCallTimer").hide(),$("form[name='"+t+"'] [id='property(DurationInMinute)']").val(""),$("form[name='"+t+"'] [id='property(DurationInSecond)']").val("00")}function getCallDuration(e){var t=getElm(e,"property(DurationInMinute)"),a=getElm(e,"property(DurationInSecond)");t.value=t.value.trim(),a.value=a.value.trim();var l=""==t.value?"00":t.value,n=""==a.value?"00":a.value,r=/^\d{1}$/;return n>59&&(n=parseInt(n)-60,l=parseInt(l)+1),(l=l<=9&&r.test(l)?"0"+l:l)+":"+(n=n<=9&&r.test(n)?"0"+n:n)}function freezealert(e,t,a){var l="N";if(!getObj("status").checked&&t)return l="S",freezeBackground(),document.getElementById("alertDiv1").style.zIndex="30",mailsetCenter("alertDiv1"),(new IntegrationService).doValidate(),null!=IntegrationService.isServiceAlerted&&"S"==IntegrationService.isServiceAlerted&&($(getObj("zti_reference_deactivate1")).empty(),getObj("zti_reference_deactivate1").innerHTML=getObj("integrationService").innerHTML),getObj("status").checked=!0,!1;if(1==e&&!getObj("status").checked&&0==t)return l="S",freezeBackground(),document.getElementById("alertDiv2").style.zIndex="30",mailsetCenter("alertDiv2"),(new IntegrationService).doValidate(),null!=IntegrationService.isServiceAlerted&&"S"==IntegrationService.isServiceAlerted&&($(getObj("zti_reference_deactivate2")).empty(),getObj("zti_reference_deactivate2").innerHTML=getObj("integrationService").innerHTML),!1;if("Administrator"!=e&&t){l="S",freezeBackground(),document.getElementById("alertDiv3").style.zIndex="30",mailsetCenter("alertDiv3");var n=getObj("profileId");return(new IntegrationService).doValidate(),null!=IntegrationService.isServiceAlerted&&"S"==IntegrationService.isServiceAlerted&&($(getObj("zti_reference_deactivate3")).empty(),getObj("zti_reference_deactivate3").innerHTML=getObj("integrationService").innerHTML),n.selectedIndex=0,!1}return"S"!=l&&!getObj("status").checked&&a&&"S"==a&&((new IntegrationService).doValidate(),null!=IntegrationService.isServiceAlerted&&"S"==IntegrationService.isServiceAlerted)?(freezeBackground(),document.getElementById("integrationService").style.zIndex="30",mailsetCenter("integrationService"),getObj("serviceClose").style.display="block",!1):void 0}function showResponderEntity(e){if(getObj("mailListDiv"))new AjaxAPI({id:"mailListDiv",url:e,callbackfn:function(){}}).post();else{loadAjaxTab("","lightblue");var t=document.getElementById("lookupdiv");t.style.display="block",t.style.zIndex=30,t.style.overflow="hidden",t.style.width="680px",t.style.height="500px",mailsetCenter("lookupdiv"),freezeBackground(),new AjaxAPI({id:"lookupdiv",url:e,callbackfn:function(){commonUtils.showHideLoadingDiv()}}).post()}}function searchResponderAction(e,t){var a=getObj("searchString").value;showResponderEntity(Crm.getCrmBasePath()+"/AutoResponder.do?step=showEntity&responderId="+t+"&module="+e+"&searchString="+encodeURIComponent(a))}var fillCurrencySymbols=function(e,t,a,l){null==l&&(l=getObj("module").value);var n=document.getElementById("currencyDetails");if(null!=n){var r=jQuery.parseJSON(n.value),i=r[e].symbol,o=$("#currencyFields").val(),s=Crm.isInventoryModule(l);if(s&&productDetails.fillCurrencySymbolsInLineHeaders(e,t,r),null!=o){if(s)for(var d=1;d<=parseInt($("#totalProductCount").val());)o+=":;:hdnUnitPrice"+d+":;:txtListPrice"+d,++d;var u=o.split(":;:"),c=u.length;for(d=0;d<c;d++){var m=document.getElementById("currencySymbol_"+u[d]);if(m&&($(m).empty(),m.innerHTML=i+"&nbsp;"),""!=u[d]){var p=getObj(u[d]),f=p.value;if(!(f.indexOf("${")>-1)&&null!=t&&""!=t&&""!=f){var v=f/parseFloat(r[t].er),h=parseFloat(r[e].er);p.value=roundNumber(v*h,2)}}}}if(s&&null==a)for(var g=1;g<=parseInt($("#totalProductCount").val());g++)calculateForLine(g,!0);productDetails.fillCurrSymForGrandVals(i)}};function updateStatus(e,t,a){var l="";e.substr(e.indexOf("#")+1,e.length);return"NoForm"!=t&&(l=formData2QueryString(t)),document.getElementById("shownotes").style.display="none",mR(e,(function(e){removeFreezeLayer();var t=e;if(-1!=t.indexOf("ALERTERROR:::")){var l=t.split("ALERTERROR:::");return alert(l[1]),!1}""!=a&&($(getObj("bulkUpdateSuccess")).empty(),getObj("bulkUpdateSuccess").innerHTML=a,mailsetCenter("bulkUpdateSuccess"),setTimeout((function(){hide("bulkUpdateSuccess")}),2e3)),crmRelatedList.load(crmRelatedList.Module,crmRelatedList.EntityId,t),document.getElementById("ajax_load_tab").style.display="none","canvas"==Lyte.Router.getRouteInstance().routeName&&"entity"==Lyte.Router.getRouteInstance().parent.routeName&&Lyte.triggerEvent("relatedList",{res:t})}),l),$("#shownotes").empty(),("Campaigns"==getObj("module").value&&getObj("totalContact")||getObj("totalLead"))&&loadCampaingSummary(),!1}function openImportWizard(e,t,a){void 0===a&&(a="myOrgData");var l=Crm.getCrmBasePath()+"/specific/ImportAction.do?step=1&module="+e+"&campaignId="+t+"&dataScope="+a;doAjaxUpdate("show",l)}function hideMacro(e){macroDivStatus=!1;var t=e.relatedTarget;$("#divMacro").find(t).length>0||(clearTimeout(CLEAR_INTERVAL_ID),$("#divMacro").hide())}function showMacro(e,t,a,l,n,r,i){!!document.getElementById("fromZcampLukp")&&removeRecLookUp();var o=new getHTTPObject,s="";if(1==e){a=void 0!==a&&""!=a&&"null"!=a?"&reqFrom="+a:"",i=void 0!==i&&""!=i&&"null"!=i?"&entityID="+i:"";var d="";getElemById("macroSugstBox")&&(d=(d=getElemById("macroSugstBox").value)==I18n.getMsg("crm.globalsearch.search.title")?"":"&macroNameSug="+encodeURIComponent(d)),s=Crm.getCrmBasePath()+"/WorkFlowRule.do?step=newRuleStep1&mode=macro&module="+t+a+d+i}else 2==e?(a=void 0!==a&&"null"!=a?"&reqFrom="+a:"",s=Crm.getCrmBasePath()+"/WorkFlowRule.do?step=showAllRules&mode=macro&module="+t+a+"&cvid="+r+"&FROM_INDEX="+l+"&TO_INDEX="+n):3==e?s=Crm.getCrmBasePath()+"/WorkFlowRule.do?step=showRule&ruleId="+t+"&mode=macro":4==e?s=Crm.getCrmBasePath()+"/WorkFlowRule.do?step=editRule&ruleId="+t+"&mode=macro":(5==e||6==e)&&(s="");o.open("GET",s,!0),o.onreadystatechange=function(){if(4==o.readyState){var e=getElemById("show");$(e).empty(),e.innerHTML=o.responseText,setTimeout((function(){manipulateScriptElems(e)}),0)}},o.send(null)}function showMacroSuggest(e,t,a,l,n,r,i,o,s,d,u,c,m){return Macro.showMacroSuggest(e,t,a,l,n,r,i,o,s,d,u,c,m)}function showMassConvertDialog(e,t,a,l,n){if("Leads"===e){if(!moduleRecordMapping.Contacts.visible)return(s=[]).push(moduleRecordMapping.Leads.plural_label),s.push(moduleRecordMapping.Contacts.plural_label),crmui.showMsgBand("error",I18n.getMsg("crm.lead.no.conversion",s),3e3),void commonUtils.showHideLoadingDiv(!1);if(document.querySelector("crm-mass-convert"))return;var r=networkUtils.returnDependencyFiles(["crm-mass-convert.js"],crmConstants.jsStaticPathForLyte);r=(r=(r=r.concat(networkUtils.returnDependencyFiles(["zohocrm_mass_convert.js"],crmConstants.jsStaticPath))).concat(networkUtils.returnDependencyFiles(["crm-mass-convert.css"],crmConstants.lessStaticPathForLyte))).concat(networkUtils.returnDependencyFiles(networkUtils.getI18nJSUrl("crm_mass_convert"))),Lyte.injectResources(r,void 0,(function(){var e={};e.crmBasePath=Crm.getCrmBasePath(),e.recordIds=t.split(";").filter((function(e){return e})),e.changeOwnerPermission=moduleRecordMapping.Accounts.visible?!Crm.userDetails.PERSONAL_ACCOUNT&&Crm.userDetails.permissions.Crm_Implied_Change_Owner_Accounts&&Crm.userDetails.permissions.Crm_Implied_Change_Owner_Contacts:!Crm.userDetails.PERSONAL_ACCOUNT&&Crm.userDetails.permissions.Crm_Implied_Change_Owner_Contacts,e.pipeLineEnabled=Crm.userDetails.isMultiPipelineActivated,e.isFromTool=a,e.pipeLineWarning=!1,e.ZiaVisionForLeads=Crm.userDetails.ZiaVisionForLeads,e.noteAlert=e.ZiaVisionForLeads,e.hasDealCreatePermission=moduleRecordMapping.Potentials.visible&&Crm.userDetails.permissions.Crm_Implied_Create_Potentials,e.hasAcntVisible=moduleRecordMapping.Accounts.visible,store.findRecord("user",Crm.userDetails.USER_ID).then((function(t){e.userId=Crm.userDetails.USER_ID,e.username=t[0].full_name,store.findAll("user_type").then((function(t){for(var a=t.length,l=[],n=!1,r=0;r<a;r++){var i=t[r];if(!0===i.active){if(i.personality_module.api_name===Crm.moduleInfo.Contacts.apiname&&!1===i.default){var o={};o.displayName=i.name,o.profileId=i.id,l.push(o)}i.personality_module.api_name===Crm.moduleInfo.Leads.apiname&&(n=!0)}}l.length>0&&n&&(e.portal_profiles=l,e.portalUserType=l[0].profileId),Lyte.Component.render("crm-mass-convert",e,"body")}),(function(){Lyte.Component.render("crm-mass-convert",e,"body")}))}))}))}else{var i=Crm.getCrmBasePath()+"/EntityMassConvert.do?step=massConvert&module="+e;if(a&&(i+="&isfromTool=true&startindex="+l+"&endindex="+n),0==$("#massConvertDIV").length){var o=document.createElement("div");o.setAttribute("id","massConvertDIV"),o.setAttribute("class","is-scroll ppTop newPopupStyleEle newMassConvertStyleEle"),document.body.appendChild(o)}var s=csrfParamName+"="+encodeURIComponent(csrfToken)+"&idsList="+encodeURIComponent(t),d=document.getElementById("massConvertDIV");$(d).empty(),new AjaxAPI({id:"massConvertDIV",url:i,params:s,callbackfn:function(){crmui.showPopup("massConvertDIV",!0),thirdPartyUtils.bindSelect2($(".cchosen").find("select"))}}).post()}}function closeMacroDialog(){!!document.getElementById("fromZcampLukp")?($("#popupnew").css("display","none"),$("[name=chk]").prop("checked",!1),$("#selAllCon").prop("checked",!1)):(document.getElementById("FreezeLayer")&&document.body.removeChild(document.getElementById("FreezeLayer")),hide("popupnew"))}function executeMacro(e,t,a,l){"null"==a&&crmListView.getObject()&&(a=crmListView.getObject().selectedIds.join(";")),doMacroExecution(e,t,decodeURIComponent(a).split(";"),l)}function doMacroExecution(e,t,a,l){var n=a.splice(0,crmConstants.maxRecOperCnt),r=new getHTTPObject,i=csrfParamName+"="+encodeURIComponent(csrfToken),o=!!document.getElementById("fromZcampLukp"),s=Crm.getCrmBasePath()+"/WorkFlowRule.do?step=executeWFRulesForLstVwEx";s+="&module="+t+"&idlist="+n.join(";")+"&ruleId="+e;var d=getElemById("mailRest");d&&(s+="&mailRest="+d.value),r.open("POST",s,!0),r.setRequestHeader("Content-type","application/x-www-form-urlencoded");var u=getElemById("macroExecuteBtnLayer"),c=getElemById("macroExecutedBtnLayer"),m=getElemById("macroExecutingBtnLayer");u.style.display="none",m.style.display="",r.onreadystatechange=function(){if(4==r.readyState)if(1===a.length&&""===a[0]||a.length<=0){r.responseText;setTimeout((function(){showMacroExecProg(3)}),500),setTimeout((function(){showMacroExecProg(1)}),1e3),setTimeout((function(){showMacroExecProg(2)}),1500),setTimeout((function(){m.style.display="none",c.style.display=""}),2e3),o?(setTimeout((function(){$("#popupnew").css("display","none")}),4e3),$("[name=chk]").prop("checked",!1),$("#selAllCon").prop("checked",!1)):setTimeout((function(){crmTab.deleteFromCache(t),void 0!==l&&"dropDown"!=l&&""!=l&&"potentialpipeline"!=l&&"adwordCampSummary"!=l&&"adwordGroupSummary"!=l?reloadCurrentEntityView():"potentialpipeline"==l?reloadCurrentPipelinePage():"adwordCampSummary"==l||"adwordGroupSummary"==l?(removeFreezeLayer(),getObj("popupnew").style.display="none"):reloadCurrentListView(),document.getElementById("FreezeLayer")&&document.body.removeChild(document.getElementById("FreezeLayer")),hide("popupnew")}),4e3)}else doMacroExecution(e,t,a,l)},r.send(i)}function reloadCurrentEntityView(e,t,a){t=t||(getObj("module")?getObj("module").value:""),e=(e=e||$("#id").val())||getObj("id").value,"Activities"!==Crm.activityGrp[t]||"true"!==$("#iskanbanview").val()&&!$("#rightPanel").length?a?ajaxNew(Crm.getCrmBasePath()+"/ShowEntityInfo.do?id="+e+"&module="+t+"&cvid="+getElemById("cvid").value+"&recordNum="+getElemById("recordNum").value,void 0,a):"canvas"===Lyte.Router.getRouteInstance().routeName?Lyte.Router.getRouteInstance().refresh():detailView.load(Crm.getCrmBasePath()+"/ShowEntityInfo.do?id="+e+"&module="+t+"&cvid="+getElemById("cvid").value+"&recordNum="+getElemById("recordNum").value):($("#multipleFieldsEditPop").remove(),loadActivityDetails(void 0,void 0,void 0,e,!0,a))}function reloadCurrentPipelinePage(){var e=Crm.getCrmBasePath()+"/ViewPipeline.do?actiontype=viewPipeline";e+=Territory.currentInfo.pipelineInfo,ajaxNew(e)}function showMacroExecProg(e){var t=getElemById("macroAct"+e);t&&(t.style.visibility="visible")}function showRulesActions(e){var t=$("#rulesAct_"+e);t&&t.css("visibility","visible")}function hideRulesActions(e){var t=$("#rulesAct_"+e);t&&t.css("visibility","hidden")}function checkTimedBasedAction(){noMoreTBActions||TBALoading||loadTimeBasedActions(TBAPageNum+1,getObj("id").value)}function OnMessageFromChild(e){if(null!=e&&e.indexOf("zdframeht:")>-1){var t=parseInt(e.substring(e.indexOf("zdframeht:")+10)),a=document.getElementById("externalIframe");t&&(a.style.height=t+10+"px")}}function showUploadPhoto(e,t,a){"crm.tab.module.entity.canvas"===Lyte.Router.getRouteInstance().transition.info.route&&(e=$L("#module")[0].value,t=$L("#entityId")[0].value);var l=Lyte.Router.getRouteInstance().getQueryParams().layoutId,n=Crm.getCrmBasePath()+"/EntityImageAttach.do?action_module="+e+"&actionName=showUploadImage";return void 0!==l&&(n=n+"&layoutId="+l),n=Crm.getPortalURL(n),"Users"!=e&&"Org"!==e&&void 0!==t&&""!=t&&(n+="&entityId="+t),void 0!==a&&""!==a&&(n+="&currentStatus="+a),mR(n,(function(e){var t=e;if(t.indexOf("ALERTERROR:::")>-1){var a=t.split("ALERTERROR:::");alert(a[1])}else{var l=document.getElementById("topBandPopup");$(l).empty(),l.innerHTML=t,EvalInnerScript(l),showAnimatePopup("topBandPopup"),CScriptLib&&_cscript._is_preview_frame&&(document.querySelector("#topBandPopup .zcrm-content").style.maxHeight="90vh")}})),!1}function uploadCroppedPhoto(e){return document.getElementById("j_uploadphoto").disabled="disabled",e.submit(),!1}function uploadOrigPhoto(e,t){var a=e.value;return commonUtils.showHideLoadingDiv(!0),validateImageFileExtension(a,t)&&validateImageSize(e,t)?(document.photouploaderform.submit(),$("#upload_photo").prop("disabled",!0),!0):(commonUtils.showHideLoadingDiv(),!1)}function dataURItoBlob(e){var t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var a=e.split(",")[0].split(":")[1].split(";")[0],l=new Uint8Array(t.length),n=0;n<t.length;n++)l[n]=t.charCodeAt(n);return new Blob([l],{type:a})}function showImageForCrop(e,t){if(!window.FileReader)return $('form[name="photocrop').remove(),void uploadOrigPhoto(e,t);var a,l=e.value;if(void 0===l&&void 0!==e.name?(l=e.name,a=e):a=e.files[0],validateImageFileExtension(l,t)&&validateImageSize(a,t)){$("#selectPhotoForUpload").hide();var n=document.createElement("img"),r=new FileReader;r.onload=function(e){var a=getElemById("upload_photo").value,l=a.lastIndexOf("."),r=a.substring(l+1);r||(r="png"),n.src=e.target.result,n.onload=function(){var e=document.createElement("canvas"),a=n.width,l=n.height,i=450/l,o=835/a,s=i>o?o:i;l*=s,a*=s,e.width=a,e.height=l,e.getContext("2d",{preserveDrawingBuffer:!0}).drawImage(n,0,0,a,l);var d=e.toDataURL("image/"+r);blobObj=dataURItoBlob(d);var u=document.getElementById("mainTrgtImg");u.src=d,$("#showImageForCrop").show(),$("#crop_photo_title").text(I18n.getMsg("crm.general.crop.your.photo.here")),u.onload=function(){initJcrop(t)}}},r.readAsDataURL(a)}}function uploadCroppedPhoto_new(e){var t;e=$(e),document.getElementById("j_uploadphoto").disabled="disabled";var a=(t=void 0!==getElemById("upload_photo").files[0]?getElemById("upload_photo").files[0].name:fileDropObj.name).lastIndexOf("."),l=t.substring(a+1);l||(l="png");document.getElementById("mainTrgtImg");var n=dataURItoBlob($L("#mainTrgtImg").data("cropper").getCroppedImage().toDataURL("image/"+l)),r=new FormData(e[0]);return r.append("upload_photo",n,t),commonUtils.showHideLoadingDiv(!0),$.ajax({url:e.attr("action"),type:"POST",data:r,contentType:!1,processData:!1,success:function(t){commonUtils.showHideLoadingDiv(),$("#"+e.attr("target")).html(t),hideAnimatePopup("topBandPopup");var a=$("[name='action_module']").val();null!=customViewObject&&customViewObject.isCustomizedView&&"Users"!=a&&"Org"!=a&&crmTab.deleteFromCache(a);var l=document.querySelector("crm-create-avatarupload");if(l&&(l.component.setData("uploadId",document.getElementById("photoID").apiValue),l.component.executeMethod("setUploadIdinEntityRecord")),"company-details"===Lyte.Router.getRouteInstance().routeName&&store.findAll("org").then((function(e){$L("crm-companydetail-page")[0].setData("photoId",e[0].photo_id),Crm.userDetails.org_logo=e[0].photo_id})),"crm.tab.module.entity.canvas"===Lyte.Router.getRouteInstance().transition.info.route){var n=$L("#entityId")[0].value,r=document.queryAll("#img_"+n),i=r.length;if("undefined"!=typeof fileID)for(var o=0;o<i;o++)r[o].setAttribute("data-fileid",fileID),r[o].setAttribute("src",chimgsrc);else if("image_processing"===failureType){for(o=0;o<i;o++)r[o].setAttribute("onmouseover","zctt.showtt('"+I18n.getMsg("crm.zia.vision.processing.image")+"')"),r[o].setAttribute("onClick","detailView.renderVisionErrorPopUp('image_processing')"),r[o].setAttribute("src",networkUtils.getImageUrl("ico_processing_image_a6698b4_.svg",ResourceConstants.CRM));$(".canvas_profileimage").remove()}}},error:function(e){commonUtils.showHideLoadingDiv(),hideAnimatePopup("topBandPopup"),renderingUtils.displayPermissionDenied(null,null,I18n.getMsg("crm.security.error"))}}),!1}function cancelUploadImage(e,t){var a=new crmRequestPool,l=$("#fileId").val();if(l&&"-1"!=l){var n={fileId:$("#fileId").val(),action_module:t};e&&"null"!==e&&(n.entityId=e),n.crmcsrfparam=encodeURIComponent(csrfToken),a.initiate({action:"EntityImageAttach.do?actionName=cancelUploadImage",type:"POST",data:n})}hideAnimatePopup("topBandPopup"),commonUtils.showHideLoadingDiv()}function initJcrop(e){Lyte.injectResources([networkUtils.returnDependencyFiles(["lyte-cropper.js","exif-plugin.js"],crmConstants.jsStaticPathForLyte)],void 0,(function(){var t=$L("#cropimgcontainer img"),a=$L("#cropimgcontainer"),l=t[0].getBoundingClientRect();a.css({width:l.width>a.width?a.width:l.width+"px",height:l.height>a.height?a.height:l.height+"px","text-align":"center",margin:"auto"}),"Leads"===e||"Contacts"===e?$L("#mainTrgtImg").cropper({aspectRatio:"1:1",selection:{top:20,left:20,size:220},minSize:150,maxSize:450}):$L("#mainTrgtImg").cropper({aspectRatio:"n:n",selection:{top:20,left:20,size:220}}),commonUtils.showHideLoadingDiv()}))}function loadSalesSummary(){if($("#lp_salesSummaryDiv").length){var e=I18n.getMsg("crm.autoresponder.days"),t=SalesSummaryInfo.QUALIFICATIONDURATION,a=SalesSummaryInfo.DEALDURATION&&"null"!==SalesSummaryInfo.DEALDURATION?SalesSummaryInfo.DEALDURATION+" "+e:"0",l=SalesSummaryInfo.SALESDURATION&&"null"!==SalesSummaryInfo.SALESDURATION?SalesSummaryInfo.SALESDURATION+" "+e:"0";t?$("#lp_leadConversionTimeSpan").text(t+" "+e):$("#lp_leadConversionTimeSpan").text(I18n.getMsg("crm.salessummay.notapplicable")),$("#lp_SalesCycleDurationSpan").text(a),$("#lp_OverallSalesDurationSpan").html(l)}}function processPlugins(){$("#hotels").html($("[name=plugin_RL]").eq(1).find("#hotels").html()),$("[name=plugin_RL]").eq(1).remove()}function transferRelatedDetails(e,t){getObj("module")&&"Events"==getObj("module").value&&(Events.initEventRightPannel(getObj("id").value),processPlugins());var a=getElemById("noteDetails");if(!a&&t){(a=document.createElement("div")).id="noteDetails",a.name="noteDetails",$(a).addClass("fL clearAfterB relatedlist-bg");const e=document.getElementsByClassName("dvScrollContainier")[0],t=document.getElementById("segmentation");e.insertBefore(a,t.nextSibling)}a&&(""==a.innerHTML||e)&&($(a).empty(),a.innerHTML=$("#relNotesInRL").html()),a&&!1===t&&$(a).remove(),$("#relNotesInRL").html(""),Notes.processNotes(),$("#recentItemListdiv").length&&$("#rItemDataDiv").html($("#recentItemListdiv").html())}function removeRecLookUp(){removeFreezeLayer(),getObj("lookupdiv").style.display="none",$("#lookupdiv").empty(),document.body.style.overflow=""}function constructList(){if(0==$("#sdiv").length){var e=$("<div>",{id:"sdiv",class:"eventActionsMenu",style:"display:none;z-index:1002;#padding-right:20px;"}),t=$("<ul>",{id:"times",class:"timeList"}),a=$("ul",e.append(t));if(allTimeArr.length){for(var l in allTimeArr)if(allTimeArr.hasOwnProperty(l)){var n=allTimeArr[l].toString(),r=n.split(":");if("HH:mm"!==Crm.userDetails.TIME_FORMAT)var i=I18n.getMsg(r[2]),o=[[r[0],r[1]].join(":"),i].join(" ");else o=[r[0],r[1]].join(":");a.append($("<li>",{time:n,text:o}))}if(!$("#bestTimeListFilterId").length)$("#timesData").append('<div class="bestTimeListFilter cP" id="bestTimeListFilterId" onclick="crmBstTime.showFilteredBestTime(this);sE(event);zctt.hidett();" onmouseout="zctt.hidett();");" style="display:none;z-index:1003">'+I18n.getMsg("crm.best.time.column.label")+"</div>"),document.getElementById("bestTimeListFilterId").addEventListener("mouseover",(function(e){$(e.target).hasClass("filtered")?zctt.showtt(I18n.getMsg("crm.best.time.tooltip.show.all.time"),void 0,void 0,void 0,"false"):zctt.showtt(I18n.getMsg("crm.best.time.tooltip.show.best.time"),void 0,void 0,void 0,"false")}));$("#timesData").append(e),$("#times li, .AmpmnewValues li, .bestTimeListFilter").mouseover((function(){var e=$(this);cur=e.index(),"HH:mm"!==Crm.userDetails.TIME_FORMAT&&$(".AmpmnewValues li").removeClass("li_hover"),$("#times li").removeClass("li_hover"),e.addClass(li_hover_class)})).mouseout((function(){$("#times li, .AmpmnewValues li").removeClass("li_hover")})).mousedown((function(e){$(e.target).hasClass("bestTimeListFilter")?$(".bestTimeListFilter").addClass("bottomAlignClicked"):($(".bestTimeListFilter").removeClass("bottomAlignClicked"),$(".bestTimeListFilter").hide(),$(".tA").removeClass("tA"),crmBstTime.hideBestTimeSuggestion("QuickCreateTask")),div_on_hover=!1,div_on_click=!0,$(".bestTimeListFilter").hasClass("bottomAlignClicked")||($("#sdiv.tA").length&&($("#sdiv.tA").removeClass("tA"),crmBstTime.hideBestTimeSuggestion("QuickCreateTask")),setTime($(this),!0),$("#sdiv").hide(),crmBstTime.hideBestTimeSuggestion("QuickCreateTask"),$(".AmpmnewValues").addClass("hide"))}))}else constructTime(),constructList()}}function constructTime(e){if(allTimeArr.length||e){var t=new Date(2e3,0,1,0,"00","00"),a=t.getDate(),l=a,n="PM",r="00";for(allTimeArr=[];a==l;){var i=t.getHours();"HH:mm"!==Crm.userDetails.TIME_FORMAT?(r=(t.getHours()+11)%12+1,n=i>11?"PM":"AM"):r=t.getHours();var o,s=t.getMinutes();"HH:mm"!==Crm.userDetails.TIME_FORMAT?(o=[formatNumber(r),formatNumber(s),n].join(":"),[[formatNumber(r),formatNumber(s)].join(":"),I18n.getMsg(n)].join(" ")):(o=[formatNumber(r),formatNumber(s)].join(":"),[[formatNumber(r),formatNumber(s)].join(":")].join(" ")),allTimeArr.push(o),t.setMinutes(s+30),l=t.getDate()}}else constructTime(!0)}function doGetCaretPosition(e){if(document.selection){e.focus();var t=document.selection.createRange();t.moveStart("character",-e.value.length),CaretPos=t.text.length}else(e.selectionStart||"0"==e.selectionStart)&&(CaretPos=e.selectionStart)}function handleQCScheduleCall(e){var t=$(e).closest("form").get("0").name,a=$("form[name='"+t+"'] select[name='property(Call Type)']"),l=a.find("[actualvalue=Outbound]").val();$("form[name='"+t+"'] input[name='property(Call Duration)']").parent().css("display","none").parent().css("display","none"),$("form[name='"+t+"'] input[name='property(Call Start Time)']").parent().css("display","block").parent().css("display","block"),a.val(l).trigger("change").attr("disabled",!0),$("form[name='"+t+"'] [id='_leContModSel']").parent().children("span").children("label").addClass("qmandatory"),getObj("compCalDiv")&&$("form[name='"+t+"'] #compCalDiv").css("display","block"),getObj("qownerName_select")&&$("#call_qowner").css("display",""),getObj("remTime")&&($("#remTime").closest(".tabDivCreate").css("display",""),$("form[name='"+t+"'] input[name='remCheckTask']").prop("checked",!0)),$("#checkDuplicateEvent").show(),$("input[name='property(Call Start Time)']")[0].setAttribute("onclick","crmCalendar.showCalendar(event,'leftPanel',Events.callDuplicationDateHandler, undefined, 786)")}function deleteFollowUpRule(e,t){if(window.confirm(I18n.getMsg("crm.delete.autofollowrule.confirm"))){var a=Crm.getCrmBasePath()+"/AutoFollowUp.do?action=delFollowUp",l={};l.followUpId=e,l.crmcsrfparam=encodeURIComponent(csrfToken),mR(a,(function(e){"true"===trimBoth(e)&&$(t).parents("tr").remove()}),l)}}function setWidthForDiv(e){var t=trimBoth(e);if("REACHED_MAX_LIMIT"===t)$("#errorMsg").html(I18n.getMsg("crm.followup.alert.msg"));else if("ALREADY_EXSISTS_ERROR"===t)$("#errorMsg").html(I18n.getMsg("crm.followup.alert.msg2"));else{var a=$("#feedsLookupDiv");showFreezeLayer();$(window).height();a.attr("style",""),a.attr("class","zcrm-modal zcrm-effect zcrm-show newInputStyleEle"),a.css({display:"block",zIndex:"30"}),$("#freezeBackGround").css({zIndex:"29"}),a.html(e)}}function showFollowUpRule(e){var t=$(e).attr("data-params");t=JSON.parse(t);var a=networkUtils.constructUrl(Crm.getCrmBasePath()+"/AutoFollowUp.do",t);mR(a,(function(e){setWidthForDiv(e)})),setTimeout((function(){$("#moduleCustomizationDiv").is(":visible")&&$("#feedsLookupDiv").find('a[id*="AFcancel"]').click((function(){CrmModule.show("deletefield")})),$("#followUpName").focus()}),1e3)}function displayMoreContent(e){$(e).siblings("span").show(),$(e).remove()}function logoutCall(e){logout(e)}function approveRecord(e){var t=detailView.appObj,a=getElemById("appCmntsArea").value;if(a.length>1e3)renderingUtils.displayErrorDiv("appCmntsArea","1000",I18n.getMsg("crm.approval.comment.validation"));else{var l=$("#lyteAPCommentArea");0===a.length&&""===a&&l.length>0&&(a=l[0].value);var n={};if(n.crmcsrfparam=encodeURIComponent(csrfToken),n.comments=a,appAct=e,"backToResp"===appAct)return openApprovalPop("respondApproval",appMod,appRecId,getElemById("respondApproval"),I18n.getMsg("crm.approvalProcess.label.yourCommentsHere"),void 0,currAppLevel,void 0),null;var r=Crm.getCrmBasePath()+"/approvalProcess.do?action="+appAct;if(r=r+"&module="+appMod+"&recordId="+appRecId,"rejectRecord"===e&&void 0!==detailView.rejectionStage&&(r=r+"&rejectStage="+detailView.rejectionStage),"respondApproval"===$(t).attr("id")&&"delegateRecord"===appAct)return openApprovalPop("delegateRecord",appMod,appRecId,getElemById("delRecBtn"),I18n.getMsg("crm.approvalProcess.label.yourCommentsforDelagate"),void 0,currAppLevel,void 0),null;if("delegateRecord"===appAct){var i=$("#deleUserName").attr("userId");if("None"===i)return alert(I18n.getMsg("crm.tpi.ctiapi.config.errormsg.selectsalesrep")),!1;r=r+"&delegateUserId="+i}currAppLevel&&(r+="&currLevel="+currAppLevel),detailView.isWFExecInKafka=!1,detailView.refreshInWms=!1,mR(r,(function(e){crmTab.deleteFromCache(appMod);var a=JSON.parse(e);if(t){if("approveRecord"===appAct?($(t).closest("tr").css("pointer-events","none"),$(t).closest("td").find(".approveRejectButtons").hide(),-1!=a.auditLogId&&$(t).closest("td").find(".approved").show()):"rejectRecord"===appAct?($(t).closest("tr").css("pointer-events","none"),$(t).closest("td").find(".approveRejectButtons").hide(),-1!=a.auditLogId&&$(t).closest("td").find(".rejected").show()):($(t).closest("tr").css("pointer-events","none"),$(t).closest("td").find(".approveRejectButtons").hide(),-1!=a.auditLogId&&$(t).closest("td").find(".delegated").show()),-1==a.auditLogId){"Rejected"==a.recordStatus?$(t).closest("td").find(".rejected").show():"Delegated"==a.recordStatus?$(t).closest("td").find(".delegated").show():$(t).closest("td").find(".approved").show();var l="Rejected"==a.recordStatus?I18n.getMsg("crm.approval.already.rejectedrecord",a.doneBy):"Delegated"==a.recordStatus?I18n.getMsg("crm.approval.already.delegatedrecord",a.doneBy):I18n.getMsg("crm.approval.already.approvedrecord",a.doneBy);"canvas"===Lyte.Router.getRouteInstance().routeName?Customization.approvalMsg=l:renderingUtils.showCustomAlert(l)}if(isWFKafkaUser()&&(detailView.isWFExecInKafka=a.isWFExecInKafka,a.callWMS))return detailView.refreshInWms=a.callWMS,detailView.prevModule=a.module,hide("approvePop"),void detailView.hideElementsForKafkaWorkFlow(appMod)}else if($(appObj1).closest("div").hide(),"approveRecord"===appAct?-1!=a.auditLogId&&$("#approvedClicked").show():"rejectRecord"===appAct?-1!=a.auditLogId&&$("#approvedRejected").show():-1!=a.auditLogId&&($("#approvalDelegate").show(),store.findRecord("user",i).then((function(e){var t=e[0].email,a=e[0].full_name,l=e[0].image_link;getElemById("delegateUserName").innerHTML=a,getElemById("deleUserEmail").innerHTML=t,$("#deleUserImg").attr("src",l)}))),-1==a.auditLogId){l="Rejected"==a.recordStatus?I18n.getMsg("crm.approval.already.rejectedrecord",a.doneBy):"Delegated"==a.recordStatus?I18n.getMsg("crm.approval.already.delegatedrecord",a.doneBy):I18n.getMsg("crm.approval.already.approvedrecord",a.doneBy);"canvas"===Lyte.Router.getRouteInstance().routeName?Customization.approvalMsg=l:renderingUtils.showCustomAlert(l)}"respondApproval"!==$(t).attr("id")&&"delRecBtn"!==$(t).attr("id")&&"respondApprovalAP"!==$(t).attr("id")||("canvas"==Lyte.Router.getRouteInstance().routeName?Lyte.Router.getRouteInstance().refresh():reloadCurrentEntityView()),detailView.appObj="","rejectRecord"===appAct&&void 0!==a.approverNameList&&(detailView.comments=a.comments,businessCardJson.approversNameList=a.approverNameList),detailView.appObj="",hide("approvePop"),removeFreezeLayer()}),n)}}function showApproveDetailedView(e,t,a){var l=Crm.getCrmBasePath()+"/approvalProcess.do?action=showDetailedView&entityId="+e+"&recModule="+t+"&isOthersView="+a;ajaxNew(l,void 0,$("body").animate({scrollTop:0},500))}function myJobsReject(e,t,a,l,n){var r=Crm.getCrmBasePath()+"/approvalProcess.do?action=showDetailedView&entityId="+e+"&recModule="+t+"&isOthersView=myJobRt";jQuery.ajax({url:r,type:"POST"}).done((function(e){detailView.approverbusiinessObj=JSON.parse(e.approverNameList),openRejectorComp(n,l,!0,t)}))}function openApprovalPop(e,t,a,l,n,r,i,o){appAct=e,appMod=t,appRecId=a;var s=l;detailView.appObj=l;var d=!1;if(appObj1=r,void 0===o?o=e:"awaitingRecords"===o&&(myJobsReject(a,t,o,getElemById("appCmntsArea"),e),d=!0,o=e),currAppLevel=i,"approvePop"===$("#approvePopMainDiv").children().attr("id")){var u=getElemById("appCmntsArea");if(u.value="","approveRecord"===e)getElemById("appRecBtn").style.display="",getElemById("delRecBtn").style.display="none",getElemById("rejRecBtn").style.display="none",getElemById("deleUsersDiv").style.display="none",getElemById("cancelBtn").style.display="",getElemById("backBtn").style.display="none",$("#cancelBtn").removeClass("mL5");else if("delegateRecord"===e)getElemById("appRecBtn").style.display="none",getElemById("delRecBtn").style.display="",getElemById("rejRecBtn").style.display="none",getElemById("deleUsersDiv").style.display="",JElem=$("#delRecBtn"),JElem.removeClass("newCancelBtn"),JElem.addClass("newSaveBtn"),"respondApprovalAP"===$(s).attr("id")||"delRecBtn"===$(s).attr("id")?(getElemById("cancelBtn").style.display="none",getElemById("backBtn").style.display=""):(getElemById("cancelBtn").style.display="",getElemById("backBtn").style.display="none",$("#cancelBtn").removeClass("mL5"));else if("rejectRecord"===e)getElemById("appRecBtn").style.display="none",getElemById("delRecBtn").style.display="none",getElemById("rejRecBtn").style.display="",getElemById("deleUsersDiv").style.display="none",JElem=$("#rejRecBtn"),JElem.removeClass("newCancelBtn"),JElem.addClass("newSaveBtn"),$("#cancelBtn").addClass("mL5"),getElemById("cancelBtn").style.display="",getElemById("backBtn").style.display="none";else{getElemById("appRecBtn").style.display="",getElemById("delRecBtn").style.display="",getElemById("rejRecBtn").style.display="",getElemById("deleUsersDiv").style.display="none",getElemById("cancelBtn").style.display="none",getElemById("backBtn").style.display="none",JElem=$("#rejRecBtn"),JElem.removeClass("newSaveBtn"),JElem.addClass("newCancelBtn");var c=$("#delRecBtn");c.removeClass("newSaveBtn"),c.addClass("newCancelBtn")}$("#appCmntsArea").attr("placeholder",n),d||openRejectorComp(o,u,!1,t)}else{var m=Crm.getCrmBasePath()+"/approvalProcess.do?action=showApprovePop&recordId="+a+"&module="+t,p=new getHTTPObject;p.open("GET",m,!0),p.onreadystatechange=function(){if(4==p.readyState){if(401==p.status)return void renderingUtils.displayPermissionDenied(p.responseText);txt=p.responseText;try{var a=JSON.parse(txt);"Failure"===a.Status&&renderingUtils.showCustomAlert(a.Error)}catch(a){$("#approvePopMainDiv").html(txt),EvalInnerScript(getObj("approvePopMainDiv"));var l=getElemById("appCmntsArea");if(l.value="","approveRecord"===e)getElemById("appRecBtn").style.display="",null!=getElemById("delRecBtn").style.display&&(getElemById("delRecBtn").style.display="none"),getElemById("rejRecBtn").style.display="none",getElemById("deleUsersDiv").style.display="none",getElemById("cancelBtn").style.display="",getElemById("backBtn").style.display="none",$("#cancelBtn").removeClass("mL5");else if("delegateRecord"===e)getElemById("appRecBtn").style.display="none",getElemById("delRecBtn").style.display="",getElemById("rejRecBtn").style.display="none",getElemById("deleUsersDiv").style.display="",JElem=$("#delRecBtn"),JElem.removeClass("newCancelBtn"),JElem.addClass("newSaveBtn"),"respondApprovalAP"===$(s).attr("id")||"delRecBtn"===$(s).attr("id")?(getElemById("cancelBtn").style.display="none",getElemById("backBtn").style.display=""):(getElemById("cancelBtn").style.display="",getElemById("backBtn").style.display="none",$("#cancelBtn").removeClass("mL5"));else if("rejectRecord"===e)getElemById("appRecBtn").style.display="none",getElemById("delRecBtn").style.display="none",getElemById("rejRecBtn").style.display="",getElemById("deleUsersDiv").style.display="none",JElem=$("#rejRecBtn"),JElem.removeClass("newCancelBtn"),JElem.addClass("newSaveBtn"),$("#cancelBtn").addClass("mL5"),getElemById("cancelBtn").style.display="",getElemById("backBtn").style.display="none";else{getElemById("appRecBtn").style.display="",getElemById("delRecBtn").style.display="",getElemById("rejRecBtn").style.display="",getElemById("deleUsersDiv").style.display="none",getElemById("cancelBtn").style.display="none",getElemById("backBtn").style.display="none",JElem=$("#rejRecBtn"),JElem.removeClass("newSaveBtn"),JElem.addClass("newCancelBtn");var r=$("#delRecBtn");r.removeClass("newSaveBtn"),r.addClass("newCancelBtn")}$("#appCmntsArea").attr("placeholder",n),d||openRejectorComp(o,l,!1,t)}}},p.send(null)}}function openRejectorComp(e,t,a,l){var n,r=networkUtils.returnDependencyFiles(["crm-approval-process-rejectors.css"],crmConstants.cssStaticPathForLyte),i=networkUtils.returnDependencyFiles(["crm-approval-process-rejectors.js"],crmConstants.jsStaticPathForLyte),o=[],s={},d="false";detailView.rejectionStage="1";var u,c=I18n.getMsg("crm.approvalProcess.label.yourCommentsHere");"awaiting"===e&&(e="rejectRecord",a=!0),"delegateRecord"===e&&($("#deleUserName").attr("userId","None"),c=I18n.getMsg("crm.approvalProcess.label.yourCommentsforDelagate")),"canvas"===Lyte.Router.getRouteInstance().routeName?u=Lyte.Router.getRouteInstance().currentModel.entityDetails:"undefined"!=typeof businessCardJson&&(u=businessCardJson),a||void 0===u||void 0===u.approversNameList?void 0!==detailView.approverbusiinessObj&&(o=void 0!==detailView.approverbusiinessObj?detailView.approverbusiinessObj.approverList:[],s=detailView.approverbusiinessObj.rejectorObj,n=detailView.approverbusiinessObj.currUser,d="2"===detailView.approverbusiinessObj.parllel?"false":"true",detailView.rejectionStage=detailView.approverbusiinessObj.rejectorsType,a=!0):(o=void 0!==u.approversNameList?u.approversNameList.approverList:[],s=u.approversNameList.rejectorObj,n=u.approversNameList.currUser,d="2"===u.approversNameList.parllel?"false":"true",detailView.rejectionStage=u.approversNameList.rejectorsType),"false"===d&&"3"!==detailView.rejectionStage&&(d="true"),"1"!==detailView.rejectionStage&&"approveRecord"!==e&&"delegateRecord"!==e||(o=[]);var m=i;m=m.concat(r);var p=networkUtils.returnDependencyFiles(["crm-automation-userswrapper.js"],crmConstants.jsStaticPathForLyte),f=networkUtils.returnDependencyFiles(["crm-automation-userswrapper.css"],crmConstants.cssStaticPathForLyte);m=(m=(m=m.concat(f)).concat(p)).concat(networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("approvalprocess")])),null!=t&&t.focus();var v=$("#approvalprocessModal").eq(0);void 0!==v&&v.remove(),Lyte.injectResources(m,void 0,(function(){Lyte.Component.render("crm-approval-process-rejectors",{show:!0,approverList:o,userNameLists:s,isRejecorsAvailable:0!==o.length,comment:c,currUser:n+"",mod:l,parllel:d,myJob:a,orginElem:e},"body"),document.getElementById("approvalprocessModal").ltProp("offset",{top:"0px",left:"center"})}))}function openrejList(e,t,a){var l={},n=[];0!==e.length&&(n=JSON.parse(e));var r=JSON.parse(t);r=r.concat(n),l.parllel="true",l.activeUserList=n,l.fullUserList=r,detailView.approverpop.approversNameList=l,detailView.approverpop.approversNameList.isPortalUser=!0;var i="#approvalStagepop_"+a,o=networkUtils.returnDependencyFiles(["crm-approval-process-rejectorlistshow.js"],crmConstants.jsStaticPathForLyte);o=o.concat(networkUtils.returnDependencyFiles(["crm-approval-process-rejectorlistshow.css"],crmConstants.cssStaticPathForLyte)),Lyte.injectResources(o,void 0,(function(){Lyte.Component.render("crm-approval-process-rejectorlistshow",{show:"true",query:i,thisObj:detailView.approverpop,approverList:r,fromdetailview:!1},i)}))}function selectDownUsersForDelagate(){"none"==$("#usersListDiv").css("display")?($("#usersListDiv").css("display","block"),$("#usersListDiv .webformSearch2 input").focus().removeClass("noBg").val(""),10<=$("#allUsers li").length&&($("#usersSearchDiv").show(),$("#usersSearchDiv .webformSearch2 input").focus().removeClass("noBg").val(""))):"block"==$("#usersListDiv").css("display")&&$("#usersListDiv").hide()}function showSelectDownUsersForDelagate(e){$("#app_user").removeClass("focusCss");var t=$(e).attr("uname"),a=$(e).attr("uid");$("#approversTD").attr("approverVal",t),$("#deleUserName").text(t),$("#deleUserName").attr("userId",a),$("#usersListDiv").hide()}function searchUserToDelegate(e){var t=$("#userSearchId").val().trim().toLowerCase(),a=$("#allUsers li");$("#allUsers li").css("display","none");for(var l=0;l<a.length;l++){var n=a[l],r=$(n).find("span").text().toLowerCase();""!=r&&-1==r.indexOf(t)||$(n).css("display","block")}}function showApprovalsAwaitingForOthersFiltered(e,t){var a=getElemById("proOpt");if("module"===e&&null!=a){var l=t.value,n=a.options.length;if("All"===l)for(idx=0;idx<n;idx++){(r=a.options[idx]).style.display=""}else for(a.options[0].selected=!0,idx=0;idx<n;idx++){var r;"All"===(r=a.options[idx]).value||r.getAttribute("modName")===l?r.style.display="":r.style.display="none"}}var i=t.parentNode.classList.contains("filterApplied");"All"==t.value||i?"All"==t.value&&i&&t.parentNode.classList.remove("filterApplied"):(t.parentNode.classList.add("filterApplied"),i=!0);var o=t.getAttribute("view"),s="",d=$L("crm-myjobs")[0];s="true"===o?Crm.getCrmBasePath()+"/approvalProcess.do?action=showOthersAwaitingRecordsFiltered&isOthersView="+t.getAttribute("view"):Crm.getCrmBasePath()+"/approvalProcess.do?action=showAwaitingRecordsFiltered&isOthersView="+t.getAttribute("view"),s+="&modOpt="+getElemById("modOpt").value,s+="&usrOpt="+getElemById("usrOpt").value,s+="&durOpt="+getElemById("durOpt").value,null!=getElemById("proOpt")&&(s+="&proOpt="+getElemById("proOpt").value),null!=getElemById("apprOpt")?s+="&apprOpt="+getElemById("apprOpt").value:s+="&processFilter="+$L("Crm-myjobs")[0].getData().type;var u=d.getData();i&&d.setData("initialIndex",0),"Process"==u.type||"All"==getElemById("usrOpt").value?(s+="&fromIndex="+(u.initialIndex+1),s+="&toIndex="+(u.initialIndex+u.recordPerPage)):(s+="&per_pageCnt="+u.recordPerPage,"Approvals"==u.type&&"All"!=getElemById("usrOpt").value?s+="&pageCnt=1":s+="&pageCnt="+u.page);var c={params:{},headers:{},success_callback:function(e){if(void 0!==e){$("#awtAppRecsDIV").empty(),getElemById("awtAppRecsDIV").innerHTML=e;var t=$L(".myJobsFooter");$L("#noRecordsInThisView").length>0?t.hide():t.show();var a=$L("#filteredCount").val();a>0&&i?(d.setData("totalNumberOfRecords",a),d.setData("page",1)):"Process"==$L("Crm-myjobs")[0].getData().type?d.setData("totalNumberOfRecords",d.getData("jobs_count").process):"true"===o?d.setData("totalNumberOfRecords",d.getData("jobs_count").others_awating):d.setData("totalNumberOfRecords",d.getData("jobs_count").approval)}}};networkUtils.makeRequest(s,"POST",c)}function showSortedColumnDetails(e,t){var a;"dropdownarr"==e.children[0].className?(e.children[0].className="dropdownarr dropdownarr180",a="DES"):(e.children[0].className="dropdownarr",a="ASC");var l="";l="true"===t?Crm.getCrmBasePath()+"/approvalProcess.do?action=showOthersAwaitingRecordsFiltered&isOthersView="+t:Crm.getCrmBasePath()+"/approvalProcess.do?action=showAwaitingRecordsFiltered&isOthersView="+t,l+="&modOpt="+getElemById("modOpt").value,l+="&usrOpt="+getElemById("usrOpt").value,l+="&durOpt="+getElemById("durOpt").value,l+="&sortOrder="+a,l+="&processFilter="+$L("Crm-myjobs")[0].getData().type;var n=$L("crm-myjobs")[0].getData();$L("crm-myjobs")[0].setData("sort_order",a),"Process"==n.type?$L("crm-myjobs")[0].setData("bpSortOrderApplied",!0):$L("crm-myjobs")[0].setData("apSortOrderApplied",!0),"Process"==n.type||"All"==getElemById("usrOpt").value?(l+="&fromIndex="+(n.initialIndex+1),l+="&toIndex="+(n.initialIndex+n.recordPerPage)):(l+="&per_pageCnt="+n.recordPerPage,l+="&pageCnt="+n.page);var r={params:{},headers:{},success_callback:function(e){void 0!==e&&($("#awtAppRecsDIV").empty(),getElemById("awtAppRecsDIV").innerHTML=e)}};networkUtils.makeRequest(l,"POST",r)}function typeText(e){$(e).addClass("noBg")}function emptyLocalStoreRI(e){if($(e).find("span").removeClass("showCircle"),"undefined"!=typeof Storage){localStorage.setItem("recentItemSts",JSON.stringify({recentItem:!0}))}}function toggleRuleList(e){"created"==e?($("#shared").removeClass("selectedItem"),$("#created").addClass("selectedItem"),$("#sharedRulesDiv").hide(),$("#myRulesDiv").show()):($("#created").removeClass("selectedItem"),$("#shared").addClass("selectedItem"),$("#myRulesDiv").hide(),$("#sharedRulesDiv").show())}function pulseRightBoxPostion(){if(document.getElementById("pulseTopContainerTr")){var e=document.documentElement.scrollTop+document.body.scrollTop,t=document.getElementById("basic").offsetHeight,a=document.getElementById("pmrlstact"),l=document.getElementById("pulseRightBoxInnerDiv");if(document.all?cH=document.body.offsetHeight:cH=window.innerHeight,e<140)a.style.top=148-e+"px",a.style.height=cH-198+e+"px",l.style.height=a.offsetHeight-getObj("pulseRightTitleDiv").offsetHeight+"px";else if(e+cH<t)a.style.top="30px",a.style.height=cH-50+"px",l.style.height=a.offsetHeight-getObj("pulseRightTitleDiv").offsetHeight+"px";else{a.style.top="0px";var n=e+cH-t,r=cH-n-15;a.style.height=r+"px",l.style.height=a.offsetHeight-getObj("pulseRightTitleDiv").offsetHeight+"px"}}}selectRange=function(e,t,a){return e.each((function(){if(e[0].setSelectionRange)e.focus(),e[0].setSelectionRange(t,a);else if(e[0].createTextRange){var l=e[0].createTextRange();l.collapse(!0),l.moveEnd("character",a),l.moveStart("character",t),l.select()}}))};var ZBLookUpUtil={searchModuleName:"",zbFromCRMURLType:"",accountID:"",contactID:"",vendorID:""};function submitLookupForm(e,t,a,l,n,r,i){var o=formData2QueryString(e),s=$("input[name='isfromOutlookRightPanel']").length>0,d=$("input[name='needResourceLoad']").length>0;s&&d&&$("input[name='needResourceLoad']").val("true"),((o+=a).indexOf("zmail")>0||o.indexOf("zcal")>0)&&(o+="&loadRes=true"),i&&(o+="&fromAutDealCreate=true");var u=document.querySelector("#servicesDiv");return u&&u.ltProp("selected")&&(o+="&serviceStatusFilter="+u.ltProp("selected")),!0===n&&(o+="&luceneSearch=true&searchcriteria="+r),l&&"true"==l?commonUtils.openCustomLookup(e.action,o,t,void 0,void 0,void 0,void 0,l):commonUtils.openCustomLookup(e.action,o,t),!1}function showImagePreview(e){var t=e.id;if(0==$("img#previewImg_"+t).length){var a='<img id="previewImg_'+t+'" src="'+e.href+'" style="max-width: 100px;max-height: 1px;">';$(e).append(a),$("[name=cboxElement]").colorbox({rel:"photonavigation",preloading:!1,photo:!0}),$(document).bind("cbox_closed",(function(){$(document).unbind("cbox_complete"),$(document).unbind("cbox_closed")})),$(document).bind("cbox_complete",(function(){var e=$(".cboxPhoto")[0];void 0!==e&&"from-image"!==getComputedStyle(e).imageOrientation&&""===e.style.transform&&(e.style.display="none",Lyte.injectResources([networkUtils.returnDependencyFiles(["exif-plugin.js"],crmConstants.jsStaticPathForLyte)],void 0,function(){$L.exif({target:e,getData:function(t){if(void 0!==t.exifdata&&void 0!==t.exifdata.Orientation)switch(t.exifdata.Orientation){case 6:e.style.transform="rotate(90deg)";break;case 8:e.style.transform="rotate(270deg)";break;case 3:e.style.transform="rotate(180deg)"}e.style.display=""}})}.bind(this)))}))}}function hideFeedBackPopup(){$("#feedBackPopup").slideUp(),$("#feedbackicon").removeClass("feedbackiconActive").addClass("feedbackicon")}ZBLookUpUtil.contactZBAndLoadCreatePage=function(e,t){var a=Crm.getCrmBasePath()+"/connectzb",l={entityType:window.opener.ZBLookUpUtil.zbFromCRMURLType,formatType:"json",module:window.opener.ZBLookUpUtil.searchModuleName,crmEntityId:t};4==window.opener.ZBLookUpUtil.zbFromCRMURLType&&(a=Crm.getCrmBasePath()+"/connectzs",l={actionNumber:window.opener.ZBLookUpUtil.zbFromCRMURLType,formatType:"json",crmModule:window.opener.ZBLookUpUtil.searchModuleName,crmEntityID:t}),"Vendors"===l.module?window.opener.ZBLookUpUtil.vendorID=t:"Accounts"===l.module?(window.opener.ZBLookUpUtil.accountID=t,window.opener.ZBLookUpUtil.contactID="",window.opener.ZInvoice.potentialLinkingObj.accountID=t,window.opener.ZInvoice.potentialLinkingObj.contactID=""):(window.opener.ZBLookUpUtil.contactID=t,window.opener.ZBLookUpUtil.accountID="",window.opener.ZInvoice.potentialLinkingObj.accountID="",window.opener.ZInvoice.potentialLinkingObj.contactID=t),jQuery.ajax({url:a,data:l,type:"POST"}).done((function(e){var t=JSON.parse(e);0!=t.code?window.opener.ZInvoice.showMessage(t.message):window.opener.$("#zBooksIframe")[0].contentWindow.InvoiceUtil.updateFieldsInEntityCreatePage(t,l.entityType);window.self.close()}))},ZBLookUpUtil.selectPotential=function(e,t){window.opener.$("#zBooksIframe")[0].contentWindow.InvoiceUtil.updatePotentialInEntityCreatePage(e,t),window.self.close()};var wfBG={setBGClr:function(){$("#subTabBottomDiv").addClass("setBgClr"),$("#setup_new_ContentDiv").addClass("workflow_rule"),$("#setupshow").addClass("newSetupWorkflow")},setWhiteBG:function(){$("#subTabBottomDiv").removeClass("setBgClr"),$("#setup_new_ContentDiv").removeClass("workflow_rule"),$("#setupshow").removeClass("newSetupWorkflow")}};function orgemailToolTip(e,t){if(""!=(e=$(e)).siblings(".templateFromAddress").text().trim()&&"null"!=e.siblings(".templateFromAddress").text()&&"undefined"!=e.siblings(".templateFromAddress").text()){var a,l="";""!=e.siblings(".templateReplyAddress").text()&&"null"!=e.siblings(".templateReplyAddress").text()&&"undefined"!=e.siblings(".templateReplyAddress").text()&&null!=e.siblings(".templateReplyAddress").text()&&null!=e.siblings(".templateReplyAddress").text()&&(l=e.siblings(".templateReplyAddress").text()),""!=l?(a='<div class="crm-font-bold f14">'+I18n.getMsg("crm.template.from.tooltip.sender")+'</div><div class="pR mT5"><table cellspacing="0" cellpadding="3"><tr><td class="alignright col777 f14 crm-font-regular vmiddle">'+I18n.getMsg("crm.label.from")+' :</td><td class="vmiddle orgemailfromID f14 crm-font-regular"><a  class="emailIdToolTip" style="color:#4f99e2;">'+$ESAPI.encoder().encodeForHTML(e.siblings(".templateFromAddress").text())+"</a></td></tr>",a+='<tr><td class="vmiddle alignright col777 f14 crm-font-regular wsnowrap">'+I18n.getMsg("crm.label.reply.to")+' :</td><td class="vmiddle orgemailfromID f14 crm-font-regular"><a  class="emailIdToolTip" style="color:#4f99e2;">'+$ESAPI.encoder().encodeForHTML(l)+"</a></td></tr>"):a='<div class="crm-font-bold f14">'+I18n.getMsg("crm.template.from.tooltip.sender")+'</div><div class="pR mT5"><table  cellspacing="0" cellpadding="3"><tr><td class="col777 f14 crm-font-regular vmiddle wsnowrap">'+I18n.getMsg("crm.label.from")+' :</td><td class="vmiddle orgemailfromID f14 crm-font-regular"><a  class="emailIdToolTip" style="color:#4f99e2;">'+$ESAPI.encoder().encodeForHTML(e.siblings(".templateFromAddress").text())+"</a></td></tr><table>",a+='</table><div class="orgToolTipTriangle pA"></div><div class="org_InnerTriangle pA"></div></div>',0==$(".orgToolTipContainer").length&&$("body").append("<div class='orgToolTipContainer bRadius3 p20 dIB pA zi32'></div>"),$(".orgToolTipContainer").html(a);var n=$(e).offset().top,r=$(".orgToolTipContainer").outerHeight(),i=($(".orgToolTipContainer").outerWidth(),n-r),o=$(e).offset().left;$(".orgToolTipContainer").css({left:o-16,top:i-10}),1==t&&($(".orgToolTipContainer").show(),template.titleForEllipsis(".orgemailfromID a")),0==t&&setTimeout((function(){$(".orgToolTipContainer").hide()}),150),template.titleForEllipsis(".emailIdToolTip")}}function deleteCompanyLogo(){var e=Crm.getCrmBasePath()+"/OrgConfig.do?actionName=delOrgImg",t=csrfParamName+"="+encodeURIComponent(csrfToken),a=new crmRequestPool;return loadAjaxTab(""),a.initiate({action:e+"&ajaxload=true",data:t,success:function(e){commonUtils.showHideLoadingDiv(),hideAnimatePopup("deletepopup");var t=getElemById("companyLogo");t&&(t.setAttribute("src",networkUtils.getImageUrl("companylogonew_437ab19_.svg",ResourceConstants.CRM)),t.style.width="75",$("#helpdesk").hasClass("cobclicked")||$(t).parent("div").addClass("companylogocontainer"),$("#changeDiv").hide(),$("#uploadDiv").show())}}),!1}function setCurrencySymbol(e,t,a){var l,n=Crm.currencyFields[e];l=window[e].currencyDetails&&Object.keys(window[e].currencyDetails).length>0&&window[e].defaultCurrency?window[e].currencyDetails[window[e].defaultCurrency].symbol:Crm.userDetails.defaultOrgCurrency?Crm.userDetails.defaultOrgCurrency:"",a&&(l=detailView.currencyDetails[a].symbol);for(var r=n.length,i=0;i<r;i++){var o=t.find("#currencySymbol_"+n[i]);o[0]&&($(o[0]).empty(),$(o[0]).hasClass("sfHeaderCurrency")?o[0].innerHTML="("+l+")":o[0].innerHTML=l+"&nbsp;")}}function refreshPageForBulkWorkFlowScheduler(e){isWFExecuted=!0;var t=e.ruleType,a=e.isJobCompleted,l=e.isPageRefreshingNeeded,n=void 0,r=void 0,i=(n=void 0,1),o=10,s=Lyte.Router.getRouteInstance().transition.info;if("crm.tab.module.actions.mass-tools"==s.route){var d=Lyte.Router.getRouteInstance().transition.data,u=d.query_params.filter;n=d.query_params.type,u=JSON.parse($ESAPI.encoder().decodeFromURL(u)),i=(o=d.query_params.per_page*d.query_params.page)-d.query_params.per_page+1,r=u.module}else s.route.startsWith("crm.tab.module")?r=s.dynamicParams[0]:"crm.tab.forecasts.pipeline"==s.route?r="Forecasts":s.route.startsWith("crm.settings.section.compliance.consent-dashboard.list-view")&&(r=s.queryParams.module);if(null!=r&&(t==r||"Forecasts"==r)||!a||l||s.route.startsWith("crm.settings.section.compliance.consent-dashboard")){var c=I18n.getMsg("crm.massupdate.updatedsuccesfully");if((s.route.startsWith("crm.tab.module")||"crm.tab.forecasts.pipeline"==s.route||s.route.startsWith("crm.settings.section.compliance.consent-dashboard"))&&"crm.tab.module.actions.mass-tools"!=s.route){var m=!1,p=!1;crmListView.checkAll(),showHideListViewBtnFn(),commonUtils.showHideLoadingDiv(!1),$("#bulkUpdateFldsListForScheduler.zcrm-show").length>0?(m=!0,hideAnimatePopup("bulkUpdateFldsListForScheduler",!0)):$("#topBandPopup.zcrm-show").length>0?(m=!0,hideAnimatePopup("topBandPopup",!0)):$("#addTagsDiv.showPpTop").length>0?(m=!0,(p=crmListView.addTagsPopupMsg(e.tagSuccessCount,e.recordsSize,customViewObject.tagRecordLimit))||(c=I18n.getMsg("crm.tags.list.view.added.successfully")),crmui.hidePopup("addTagsDiv")):$("#removeTagsDiv.showPpTop").length>0?(m=!0,c=I18n.getMsg("crm.tags.removed.successfully"),crmui.hidePopup("removeTagsDiv")):"none"!=$("#popupnew").css("display")?(crmTab.deleteFromCache(r),clearInterval(Macro.rotationCircle),$(".loadingCircle").fadeOut(100),Macro.circleDraw=100,Macro.drawCir(1),setTimeout((function(){crmListView.reloadCurrentListView(),removeFreezeLayer(),hide("popupnew"),clearInterval(Macro.rotation),clearInterval(Macro.drawCircle)}),4500)):$("#updateConsenttype").length>0?(m=!0,crmui.hidePopup("updateConsenttype")):l&&(m=!0),m&&(removeFreezeLayer(),p?crmui.showPop("maximumReach"):(a||l)&&crmui.showMsgBand("success",c,"4000",""),s.route.startsWith("crm.settings.section.compliance.consent-dashboard")?ConsentLawBasisUpdates.afterchangeToggle(!0):crmListView.reloadCurrentListView())}else"update"==n||"mass_update"==n?$("#bulkUpdate_display").length>0&&((a||l)&&($("#bulkUpdateSuccess").empty().html(c),mailsetCenter("bulkUpdateSuccess"),setTimeout((function(){hide("bulkUpdateSuccess")}),2e3)),callMassRecords(i,o,"mass_update"),hide("bulkUpdate_display")):"transfer"!=n&&"mass_transfer"!=n||(callMassRecords(i,o,"mass_transfer"),commonUtils.showHideLoadingDiv(!1))}}function help_handling(e,t){e=e.crm_data_fetcher;var a=renderingUtils.createHTML({name:"div",attr:{class:"botHelpQuesContainer paddingNeeded"}});if(a.setAttribute("data-zcqa","help element"),0!==e.details.data.summary.localeCompare("I cannot find the exact answer for this question but hope the below articles helps")&&e.details.data.articles){var l=renderingUtils.createHTML({name:"a",attr:{class:"botHelpMessageTitle  mB",href:e.details.data.articles[0].url,target:"_blank')"}});$(l).html(e.details.data.articles[0].title),$(l).attr("data-zcqa","help link element"),$(a).html(l),e.details.data.articles.shift()}var n,r,i,o=renderingUtils.createHTML({name:"div",attr:{class:"botHelpMessageDiv mT5"}});if($(o).attr("data-zcqa","help message"),$(o).html(e.details.data.summary),$(a).append(o),e.details.data.articles&&e.details.data.articles.length>0){n=renderingUtils.createHTML({name:"div",attr:{class:"botRelatedLinkcontainer mT15 mB10"}}),0!==e.details.data.summary.localeCompare("I cannot find the exact answer for this question but hope the below articles helps")&&(r=renderingUtils.createHTML({name:"div",attr:{class:"crm-font-bold col333 mB5 f14"}}),$(r).text("Related Articles"),$(r).attr("data-zcqa","related title")),$(n).append(r);for(var s=e.details.data.articles.length,d=0;d<s;d++)void 0!==e.details.data.articles[d].url&&(i=renderingUtils.createHTML({name:"a",attr:{class:"crm-font-regular  mB2 diBulletOption pL10 cP f14 dIB",href:e.details.data.articles[d].url,target:"_blank",title:e.details.data.articles[d].url}}),$(i).html(e.details.data.articles[d].title),$(i).attr("data-zcqa","related-article"+d),$(n).append(i))}$(a).append(n),t.html(a).hide().slideDown(200)}function ziaRenderResult(e,t,a,l,n,r,i){if(Handlebars.registerPartial("GetNextValues",Handlebars.templates.ZiaNavigation),e&&e.crm_data_fetcher&&e.crm_data_fetcher.details&&e.crm_data_fetcher.details.data&&"suggestions"===e.crm_data_fetcher.details.data.output_format)t.html('<div style="padding:8px 13px;border-bottom:1px solid #eaeaea;">Here are some suggestions</div>'),askZia.showSuggestions(e.crm_data_fetcher.details.data.input_sentence,e.crm_data_fetcher.details.data.suggestions,t);else if(e&&(e.crm_data_fetcher&&e.crm_data_fetcher.details&&e.crm_data_fetcher.details.data&&"no_content"===e.crm_data_fetcher.details.data.output_format||e.crm_data_fetcher&&e.crm_data_fetcher.details&&e.crm_data_fetcher.details.data&&0===Object.keys(e.crm_data_fetcher.details.data).length)){var o=renderingUtils.createHTML({name:"div",attr:{class:"f14 crm-font-regular paddingNeeded col333 fR"},text:"There aren't any results for that search"});t.html(o).hide().slideDown(200)}else if(e&&e.crm_data_fetcher&&e.crm_data_fetcher.details&&e.crm_data_fetcher.details.data&&e.crm_data_fetcher.details.data.rows&&0!==e.crm_data_fetcher.details.data.rows.length){var s=e.crm_data_fetcher.details.data,d=s.rows,u=e.crm_data_fetcher.details.display_type;u=0===u.indexOf("chart")?"pie":u.replace(" chart","");var c=JSON.stringify(e.crm_data_fetcher.details.summary);if(t.attr("summary",c),e.crm_data_fetcher.details.data.rows.length>=11?(e.crm_data_fetcher.details.data.rows.pop(),e.crm_data_fetcher.details.data.showmore=!0,e.crm_data_fetcher.details.data.start_index=r?r+10:11):e.crm_data_fetcher.details.data.showmore=!1,e.crm_data_fetcher.details.data.groupby_used){var m=s.columns[0].display_value,p=s.columns[1].display_value,f=(g=d.length)<=1?"":renderingUtils.createHTML({name:"div",attr:{class:"botChooseOptionDiv"},child:[{name:"div",attr:{class:"fL chatboticcontainer",onclick:"askZia.replaceChart($(this),'bar');sE(event);"},child:[{name:"div",attr:{class:"vertical-chart"}}]},{name:"div",attr:{class:"fL chatboticcontainer",onclick:"askZia.replaceChart($(this),'pie');sE(event);"},child:[{name:"div",attr:{class:"pie-chart"}}]},{name:"div",attr:{class:"fL chatboticcontainer",onclick:"askZia.replaceChart($(this),'funnel');sE(event);"},child:[{name:"div",attr:{class:"funnel-chart"}}]},{name:"div",attr:{class:"fL chatboticcontainer",onclick:"askZia.replaceChart($(this),'line');sE(event);"},child:[{name:"div",attr:{class:"line-chart"}}]},{name:"div",attr:{class:"fL chatboticcontainer disablechatbtn",onclick:"askZia.replaceChart($(this),'table');sE(event);"},child:[{name:"div",attr:{class:"table-view"},content:"T"}]}]});if(void 0===i)t.attr("data-chartjson",JSON.stringify(e.crm_data_fetcher.details.data));else{for(var v=i.closest(".botSentText"),h=JSON.parse(v.getAttribute("data-chartjson")),g=e.crm_data_fetcher.details.data.rows.length,y=0;y<g;y++)h.rows.push(e.crm_data_fetcher.details.data.rows[y]);h.showmore=e.crm_data_fetcher.details.data.showmore,v.setAttribute("data-chartjson",JSON.stringify(h))}t.attr({"data-xaxis":m,"data-message":e.crm_data_fetcher.details.data.text,"data-yaxis":p,chartType:u,chartName:e.crm_data_fetcher.details.name}).addClass("cP")}if(e.crm_data_fetcher.details.data.groupby_used&&e.crm_data_fetcher.details.display_type.includes("chart"))t.attr({onclick:"askZia.showChartinPop(this)"}).html(renderingUtils.createHTML({name:"div",attr:{class:"fR w100p cP pT30 pB30 pL20 pR20 chartDivCont",style:"max-width:calc(430px - 110px);box-sizing:border-box;background-color:#fff",id:"chartDivCont"}})).append(f),t.find(".chartDivCont").html(renderingUtils.createHTML({name:"div",attr:{class:"fR  cP chartDiv",style:"width:calc(430px - 150px)",id:"chartDiv"}})),askZia.createChart(e.crm_data_fetcher.details.data,t.find(".chartDiv"),u,m,p,e.crm_data_fetcher.details.name),t.addClass("noPaddingBotText");else if(t.attr("onclick","sE()"),!e.crm_data_fetcher.details.data.groupby_used&&e.crm_data_fetcher.details.data.aggregation_used){e.crm_data_fetcher.details.data.pathway=!!c,e.crm_data_fetcher.details.output_sentence?(t.html(renderingUtils.createHTML({name:"div",attr:{class:"headLineHint",id:"chatBotDiv"},text:"Showing results for "+e.crm_data_fetcher.details.output_sentence})),t.append(Handlebars.templates.IntelligenceConfigResult(e.crm_data_fetcher.details.data))):t.html(Handlebars.templates.IntelligenceConfigResult(e.crm_data_fetcher.details.data)),t.find(".chatbotTableParentDiv").addClass("kbiborder");var b=t.find(".IntelligenceConfigResultTable");b.removeClass("newtable w100p"),b.find("td").addClass("aligncenter f14 col333").css({"font-family":"roboto"}),b.find("th").addClass("aligncenter crm-font-regular f14 col333 pB5"),t.addClass("cD").removeClass("cP")}else{r?($(Handlebars.templates.ZiaNavigation(e.crm_data_fetcher.details.data)).insertAfter(i),i.remove()):(e.crm_data_fetcher.details.data.pathway=!!c,e.crm_data_fetcher.details.output_sentence?(t.html(renderingUtils.createHTML({name:"div",attr:{class:"headLineHint",id:"chatBotDiv"},text:"Showing results for "+e.crm_data_fetcher.details.output_sentence})),t.append(Handlebars.templates.IntelligenceConfigResult(e.crm_data_fetcher.details.data))):t.html(Handlebars.templates.IntelligenceConfigResult(e.crm_data_fetcher.details.data))),t.append(f).hide().slideDown(200).addClass("noPaddingBotText");var C=t.find(".IntelligenceConfigResultTable").find("th"),T=100/C.length;C.css({width:T}),t.addClass("cD").removeClass("cP")}}else if(e&&e.crm_data_fetcher&&e.crm_data_fetcher.details&&e.crm_data_fetcher.details.data&&e.crm_data_fetcher.details.data.result&&0!=e.crm_data_fetcher.details.data.result.length&&"gsearch"==e.crm_data_fetcher.details.data.type){t.attr("data-chartjson",JSON.stringify(e.crm_data_fetcher.details.data.result)).html(Handlebars.templates.searchResult(e.crm_data_fetcher.details.data.result)).hide().addClass("noPaddingBotText cD");var E=renderingUtils.createHTML({name:"div",attr:{class:"aligncenter crm-font-regular chatbotSecLoadMore pT5 f11 cP pB5",onclick:"askZia.loadDetailContent(this)"}});(L=t.find(".chatbotsearchResultContainer")).append(E),t.find(".chatbotSecLoadMore").text("View in Detail"),t.slideDown(200);var _=JSON.parse(t.attr("data-chartjson"));if(1==Object.keys(_.displayColumn).length&&1==_.moduleData[Object.keys(_.moduleData)[0]].length){Crm.client_tracking("Chatbot - GSearch single result"),Crm.trackSpotLightAction("Chatbot - GSearch single result"),_.flag=1,L.addClass("fL"),L.html(Handlebars.templates.searchDetailResult(_)),L.css({opacity:"1"}),t.find(".chatbotSearchedList").hide(),t.find(".individualRenderList").show(),L.fadeIn(200),askZia.showAlignedInDetail(t,1);var I=0,k=Object.keys(_.displayColumn)[0],w=t.find(".render"+k);(D=w.find(".searchedListLabel")).each((function(){$(this).outerWidth()>I&&(I=$(this).outerWidth())}));var R=t.find("."+k).parents(".searchdetailedResult").outerWidth()-I-40;D.css("width",I),w.find(".searchedListVal").css("max-width",R),w.show()}}else if(e&&e.crm_data_fetcher&&e.crm_data_fetcher.details&&e.crm_data_fetcher.details.data&&e.crm_data_fetcher.details.data.result&&0!=e.crm_data_fetcher.details.data.result.length&&"module_gsearch"==e.crm_data_fetcher.details.data.type){var L;t.html(Handlebars.templates.searchResult(e.crm_data_fetcher.details.data.result)).addClass("noPaddingBotText cD"),e.crm_data_fetcher.details.data.result.flag=1,(L=t.find(".chatbotsearchResultContainer")).addClass("fL").html(Handlebars.templates.searchDetailResult(e.crm_data_fetcher.details.data.result)),t.find(".individualRenderList").show(),askZia.showAlignedInDetail(t,1,e.crm_data_fetcher.details.data.result);var D;I=0;(D=t.find(".searchedListLabel")).each((function(){$(this).outerWidth()>I&&(I=$(this).outerWidth())}));var S=t.find(".searchdetailedResult").outerWidth()-I;t.show(),t.find(".searchedListVal").css("max-width",S),D.css("width",I),L.css({opacity:"1"}).fadeIn(200)}else if(e&&e.crm_data_fetcher&&e.crm_data_fetcher.details&&e.crm_data_fetcher.details.data&&"pre_defined"===e.crm_data_fetcher.details.data.type){var O=$(".dbImg").length+1;e.crm_data_fetcher.details.data.id=O,t.html(Handlebars.templates.IntelligenceConfigResult(e.crm_data_fetcher.details.data)),networkUtils.loadFeatureScripts(["zohocrm_analytics.js",networkUtils.getI18nJSUrl("dashboard")],(function(){CrmAnalytics.initChart();var t=e.crm_data_fetcher.details.data.component_type;t=e.crm_data_fetcher.details.data.component_props&&e.crm_data_fetcher.details.data.component_props.visualization_props.type?t+"_"+e.crm_data_fetcher.details.data.component_props.visualization_props.type:t;var a="dbImg_"+O;$("#"+a).append('<div class="dashboardContent dash_chart" id="chartdiv_'+a+'" style="height:calc(100% - 23px);"><div class="h100per pR w100per"><span class="absCenter"></span></div></div>'),CrmAnalytics.setMinMaxDimensions(t,a),CrmAnalytics.renderComponent(e.crm_data_fetcher.details.data,a)}),"undefined"!=typeof CrmAnalytics);var F=$("#chartdiv_dbImg_"+O);F.css({height:"210px","margin-top":"20px"});var M=F.find(".d3container")[0];null!=M&&(M.__data__.userdata.tooltip.enabled=!1,M.__data__.redraw()),t.hide().slideDown(200)}else if(e&&e.crm_data_fetcher&&e.crm_data_fetcher.details&&e.crm_data_fetcher.details.data&&"report"==e.crm_data_fetcher.details.data.type){var A=e.crm_data_fetcher.details.data,P=renderingUtils.createHTML({name:"div",attr:{class:"fR f14 crm-font-regular col333 paddingNeeded"}}),x=renderingUtils.createHTML({name:"img",attr:{src:A.url,style:"height:100px;width:100px",alt:"no data available"}}),N=renderingUtils.createHTML({name:"a",attr:{href:A.crmUrl},text:"open report page"});P.append(x),P.append(N),t.append(P)}else if(e&&e.crm_data_fetcher&&e.crm_data_fetcher.details&&e.crm_data_fetcher.details.data&&"all_modules"==e.crm_data_fetcher.details.data.type){var V=0;Object.keys(e.crm_data_fetcher.details.data).forEach((function(a){var l=e.crm_data_fetcher.details.data[a];l instanceof Object&&(l.type="all_modules",l.moduleName=crmTab.getDisplayName("Potentials"),V?t.find(".IntelligenceConfigResultTable tbody").append(Handlebars.templates.ZiaNavigation(l)):t.html(Handlebars.templates.IntelligenceConfigResult(l)),V++)}))}else if(e&&e.crm_data_fetcher&&e.crm_data_fetcher.details&&e.crm_data_fetcher.details.data&&"help_content"===e.crm_data_fetcher.details.data.output_format)help_handling(e,t);else if(e&&e.crm_data_fetcher&&e.crm_data_fetcher.details&&e.crm_data_fetcher.details.data&&"custom_view"==e.crm_data_fetcher.details.data.type){var U=e.crm_data_fetcher.details.data;t.html(renderingUtils.createHTML({name:"a",attr:{class:"paddingNeeded f14 crm-font-regular col333 ",href:window.origin+Crm.getCrmBasePath()+"/tab/"+U.cvmodule+"/custom-view/"+U.cvid+"/list"},text:"open customview page"})),t.hide().slideDown(200)}else{if(!(e.crm_data_fetcher&&e.crm_data_fetcher.details&&e.crm_data_fetcher.details.data&&"message_from_DI"===e.crm_data_fetcher.details.data.output_format)){if(void 0===askZia.firstMessage||!0===n){n||(askZia.firstMessage=askZia.message);var j=e.notify?"aligncenter":"fR";o=renderingUtils.createHTML({name:"div",attr:{class:"paddingNeeded f14 crm-font-regular col333 "+j},text:"There aren't any results for that search"});t.html(o).hide().slideDown(200)}else askZia.secondMessage=askZia.message,t.append(askZia.createSupportOptionElement());return}var o=renderingUtils.createHTML({name:"div",attr:{class:"f14 crm-font-regular col333 paddingNeeded fR"},text:e.crm_data_fetcher.details.data.message});t.html(o).hide().slideDown(200)}n||void 0!==askZia&&(askZia.firstMessage=void 0)}function isWFSchedulerUser(){return Crm.userDetails.isWFSchedulerUser}function isWFKafkaUser(){return Crm.userDetails.isWFKafkaUser}$("body").click((function(){$(".feedFilterlist").fadeOut(),$(".svalue").parent().removeClass("dropdownActive, feedfilterfocus")})),$(".feedfiltercontent").click((function(e){e.stopPropagation()})),function(){var e=Handlebars.template,t=Handlebars.templates=Handlebars.templates||{};t.crmCreateButtonLayout=e({1:function(e,t,a,l,n,r,i){var o;return" "+(null!=(o=a.isNotPartOf.call(null!=t?t:{},"Events,Consents",null!=t?t.module:t,{name:"isNotPartOf",hash:{},fn:e.program(2,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "},2:function(e,t,a,l,n,r,i){var o,s=null!=t?t:{};return' <div class="topband_graybg topband_tb pT10 pB35 pL30 hide"> <div class="set_mw"> '+(null!=(o=a.if.call(s,null!=t?t.showEdit:t,{name:"if",hash:{},fn:e.program(3,n,0,r,i),inverse:e.noop,data:n}))?o:"")+' <table border="0" cellpadding="0" cellspacing="0" class="fR pR30"> <tbody> <tr> <td id="buttonTD" align="right"> '+e.escapeExpression(a.setBtnDetails.call(s,t,{name:"setBtnDetails",hash:{},data:n}))+" "+(null!=(o=a.each.call(s,null!=t?t.btnList:t,{name:"each",hash:{},fn:e.program(5,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.if.call(s,null!=t?t.isButtonsAvailable:t,{name:"if",hash:{},fn:e.program(12,n,0,r,i),inverse:e.noop,data:n}))?o:"")+' </td> <td nowrap class="dvmo" style="font-size:0"> </td> </tr> </tbody> </table> '+(null!=(o=a.if.call(s,null!=t?t.pfrom:t,{name:"if",hash:{},fn:e.program(17,n,0,r,i),inverse:e.noop,data:n}))?o:"")+' </div> <div class="cB"></div> </div> '},3:function(e,t,a,l,n){var r,i=e.escapeExpression,o=null!=t?t:{};return" <div class=\"fL mT10\"> \x3c!--link-to lt-prop-route='crm.settings.section.modules.module.layouts.view-layout' lt-prop-dp='[\""+i(e.lambda(null!=t?t.module:t,t))+'","'+i(a.encodeURL.call(o,null!=(r=null!=t?t.layout_jsonarrayObj:t)?r.sysLayoutId:r,{name:"encodeURL",hash:{},data:n}))+'"]\' data-zcqa="lnk_EditPageLayout" lt-prop-class="f12 uline1" lt-prop-target="_blank" lt-prop-rel="noopener" > '+i(a.getI18n.call(o,"crm.label.pagelayout.edit",{name:"getI18n",hash:{},data:n}))+" </link-to --\x3e </div> "},5:function(e,t,a,l,n,r,i){var o;return" "+(null!=(o=a.if_eq.call(null!=t?t:{},"save",null!=t?t.name:t,{name:"if_eq",hash:{},fn:e.program(6,n,0,r,i),inverse:e.program(9,n,0,r,i),data:n}))?o:"")+" "},6:function(e,t,a,l,n,r,i){var o,s=e.lambda,d=e.escapeExpression;return' <input tabIndex="'+d(s(null!=t?t.tabIndex:t,t))+'" data-params="'+d(s(null!=t?t["data-params"]:t,t))+'" onClick="crmTemplate.handleButtonClick(event,this)" data-module="'+d(s(null!=i[1]?i[1].module:i[1],t))+'" cscript-tag="'+d(s(null!=t?t["cscript-tag"]:t,t))+'" type="button" id="'+d(s(null!=t?t.name:t,t))+d(s(null!=i[1]?i[1].module:i[1],t))+'Btn_Bottom" data-zcqa="dash_'+d(s(null!=t?t.name:t,t))+d(s(null!=i[1]?i[1].module:i[1],t))+'Btn" name="'+d(s(null!=t?t.name:t,t))+'" class="primarybtn" value="'+d(s(null!=t?t.html:t,t))+'" '+(null!=(o=a.ifEquals.call(null!=t?t:{},null!=t?t.name:t,"cancel",{name:"ifEquals",hash:{},fn:e.program(7,n,0,r,i),inverse:e.noop,data:n}))?o:"")+"/> "},7:function(e,t,a,l,n){return' data-cid="backOneLevel" '},9:function(e,t,a,l,n,r,i){var o,s=e.lambda,d=e.escapeExpression,u=null!=t?t:{};return' <input tabIndex="'+d(s(null!=t?t.tabIndex:t,t))+'" data-params="'+d(s(null!=t?t["data-params"]:t,t))+'" onClick="crmTemplate.handleButtonClick(event,this)" data-module="'+d(s(null!=i[1]?i[1].module:i[1],t))+'" cscript-tag="'+d(s(null!=t?t["cscript-tag"]:t,t))+'" type="button" id="'+d(s(null!=t?t.name:t,t))+d(s(null!=i[1]?i[1].module:i[1],t))+'Btn_Bottom" data-zcqa="dash_'+d(s(null!=t?t.name:t,t))+d(s(null!=i[1]?i[1].module:i[1],t))+'Btn" name="'+d(s(null!=t?t.name:t,t))+'" class="newgraybtn" value="'+d(s(null!=t?t.html:t,t))+'" '+(null!=(o=a.ifEquals.call(u,null!=t?t.name:t,"cancel",{name:"ifEquals",hash:{},fn:e.program(7,n,0,r,i),inverse:e.noop,data:n}))?o:"")+"/> "+(null!=(o=a.if.call(u,null!=t?t.customButton:t,{name:"if",hash:{},fn:e.program(10,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "},10:function(e,t,a,l,n,r,i){var o;return" "+(null!=(o=e.invokePartial(l.toolTipTemplate,i[1],{name:"toolTipTemplate",data:n,helpers:a,partials:l,decorators:e.decorators}))?o:"")+" "},12:function(e,t,a,l,n,r,i){var o;return" "+(null!=(o=a.each.call(null!=t?t:{},null!=t?t.customButtonMap:t,{name:"each",hash:{},fn:e.program(13,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "},13:function(e,t,a,l,n,r,i){var o;return" "+(null!=(o=a.each.call(null!=t?t:{},t,{name:"each",hash:{},fn:e.program(14,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "},14:function(e,t,a,l,n,r,i){var o,s=null!=t?t:{};return" "+(null!=(o=a.ifEquals.call(s,a.incre.call(s,n&&n.index,{name:"incre",hash:{},data:n}),1,{name:"ifEquals",hash:{},fn:e.program(15,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "},15:function(e,t,a,l,n,r,i){var o=e.lambda,s=e.escapeExpression,d=null!=t?t:{};return' <span id = "customButtonDetailsBottom" class="customPluswithImpotBtnCon mR8 posRel" style="z-index:10" onclick="sE(event);"> <input type="button"  id= \'customButtonBottom\' class="newwhitebtn customImportBtn custBtnCreateClone" value="'+s(o(null!=t?t.name:t,t))+'" style="border-left:0  !important; border-right:solid 1px #e3e3e3" onclick="return CustomButtonJSObjectInit.execute(\''+s(o(null!=t?t.key:t,t))+"','"+s(o(null!=i[2]?i[2].buttonPosition:i[2],t))+"','"+s(o(null!=i[2]?i[2].ENTITYID:i[2],t))+"','','"+s(o(null!=i[2]?i[2].module:i[2],t))+"');\" onmouseover= \"CustomButtonJSObjectInit.showCusBtnDetTt(this,'"+s(a.encodeJS.call(d,null!=t?t.name:t,{name:"encodeJS",hash:{},data:n}))+"','"+s(a.encodeJS.call(d,null!=t?t.desc:t,{name:"encodeJS",hash:{},data:n}))+'\')";  onmouseout = "CustomButtonJSObjectInit.hideCusBtnDetTt();"> <a id = "detailDropDownBottom" class="newwhitebtn cbDropDown  fR" value="&nbsp;&nbsp;New"  id="dwnBtn" onclick=" CustomButtonJSObjectInit.getCustomButtonDtls(\''+s(a.encodeJS.call(d,a.ObjToString.call(d,null!=i[2]?i[2].customButtonMap:i[2],{name:"ObjToString",hash:{},data:n}),{name:"encodeJS",hash:{},data:n}))+"','"+s(o(null!=i[2]?i[2].module:i[2],t))+"','"+s(o(null!=i[2]?i[2].buttonPosition:i[2],t))+"','custBtnCreateClone','sortableCreateView','"+s(o(null!=i[2]?i[2].ENTITYID:i[2],t))+"','customButtonDetailsBottom');\" ></a> </span> "},17:function(e,t,a,l,n){return'<input type="hidden" id="pfrom" value="'+e.escapeExpression(e.lambda(null!=t?t.pfrom:t,t))+'"></input>'},compiler:[7,">= 4.0.0"],main:function(e,t,a,l,n,r,i){var o;return"  "+(null!=(o=a.ifNotEquals.call(null!=t?t:{},null!=t?t.isFrom:t,"clientPortal",{name:"ifNotEquals",hash:{},fn:e.program(1,n,0,r,i),inverse:e.noop,data:n}))?o:"")},usePartial:!0,useData:!0,useDepths:!0}),t.crmCreateFieldContent=e({1:function(e,t,a,l,n){var r;return" "+(null!=(r=a.contains.call(null!=t?t:{},"[2,100]",null!=t?t.uitype:t,{name:"contains",hash:{},fn:e.program(2,n,0),inverse:e.noop,data:n}))?r:"")+" "},2:function(e,t,a,l,n){var r;return" "+(null!=(r=a.if_eq.call(null!=t?t:{},null!=t?t.uitype:t,"100",{name:"if_eq",hash:{},fn:e.program(3,n,0),inverse:e.program(15,n,0),data:n}))?r:"")+" "},3:function(e,t,a,l,n){var r;return" "+(null!=(r=a.if.call(null!=t?t:{},null!=t?t.default:t,{name:"if",hash:{},fn:e.program(4,n,0),inverse:e.program(10,n,0),data:n}))?r:"")+" "},4:function(e,t,a,l,n){var r;return" "+(null!=(r=a.each.call(null!=t?t:{},null!=t?t.default:t,{name:"each",hash:{},fn:e.program(5,n,0),inverse:e.noop,data:n}))?r:"")+" "},5:function(e,t,a,l,n){var r;return" <option selected=selected value="+(null!=(r=a.if.call(null!=t?t:{},null!=t?t.content:t,{name:"if",hash:{},fn:e.program(6,n,0),inverse:e.program(8,n,0),data:n}))?r:"")+">"+e.escapeExpression(e.lambda(null!=t?t.html:t,t))+"</option> "},6:function(e,t,a,l,n){return' "'+e.escapeExpression(e.lambda(null!=t?t.content:t,t))+'" '},8:function(e,t,a,l,n){return' "'+e.escapeExpression(e.lambda(null!=t?t.value:t,t))+'" '},10:function(e,t,a,l,n){var r;return" <option value="+(null!=(r=a.if.call(null!=t?t:{},null!=(r=null!=(r=null!=t?t.val:t)?r[0]:r)?r.content:r,{name:"if",hash:{},fn:e.program(11,n,0),inverse:e.program(13,n,0),data:n}))?r:"")+">"+e.escapeExpression(e.lambda(null!=(r=null!=(r=null!=t?t.val:t)?r[0]:r)?r.html:r,t))+"</option> "},11:function(e,t,a,l,n){var r;return' "'+e.escapeExpression(e.lambda(null!=(r=null!=(r=null!=t?t.val:t)?r[0]:r)?r.content:r,t))+'" '},13:function(e,t,a,l,n){var r;return' "'+e.escapeExpression(e.lambda(null!=(r=null!=(r=null!=t?t.val:t)?r[0]:r)?r.value:r,t))+'" '},15:function(e,t,a,l,n){var r;return null!=(r=a.if_eq.call(null!=t?t:{},null!=t?t.uitype:t,"2",{name:"if_eq",hash:{},fn:e.program(16,n,0),inverse:e.noop,data:n}))?r:""},16:function(e,t,a,l,n){var r;return" "+(null!=(r=a.if.call(null!=t?t:{},null!=t?t.default:t,{name:"if",hash:{},fn:e.program(17,n,0),inverse:e.program(22,n,0),data:n}))?r:"")+" "},17:function(e,t,a,l,n){var r;return" <option selected=selected value="+(null!=(r=a.if.call(null!=t?t:{},null!=(r=null!=(r=null!=t?t.default:t)?r[0]:r)?r.content:r,{name:"if",hash:{},fn:e.program(18,n,0),inverse:e.program(20,n,0),data:n}))?r:"")+">"+e.escapeExpression(e.lambda(null!=(r=null!=(r=null!=t?t.default:t)?r[0]:r)?r.html:r,t))+"</option> "},18:function(e,t,a,l,n){var r;return' "'+e.escapeExpression(e.lambda(null!=(r=null!=(r=null!=t?t.default:t)?r[0]:r)?r.content:r,t))+'" '},20:function(e,t,a,l,n){var r;return' "'+e.escapeExpression(e.lambda(null!=(r=null!=(r=null!=t?t.default:t)?r[0]:r)?r.value:r,t))+'" '},22:function(e,t,a,l,n){var r,i=null!=t?t:{};return" <option "+(null!=(r=a.if.call(i,null!=(r=null!=(r=null!=t?t.val:t)?r[0]:r)?r.default:r,{name:"if",hash:{},fn:e.program(23,n,0),inverse:e.noop,data:n}))?r:"")+" value="+(null!=(r=a.if.call(i,null!=(r=null!=(r=null!=t?t.val:t)?r[0]:r)?r.content:r,{name:"if",hash:{},fn:e.program(11,n,0),inverse:e.program(13,n,0),data:n}))?r:"")+">"+e.escapeExpression(e.lambda(null!=(r=null!=(r=null!=t?t.val:t)?r[0]:r)?r.html:r,t))+"</option> "},23:function(e,t,a,l,n){return" selected=selected "},25:function(e,t,a,l,n,r,i){var o;return" "+(null!=(o=a.if.call(null!=t?t:{},null!=(o=null!=t?t.currentField:t)?o.emptyColumn:o,{name:"if",hash:{},fn:e.program(26,n,0,r,i),inverse:e.program(28,n,0,r,i),data:n}))?o:"")+" "},26:function(e,t,a,l,n){return' <div class=""> </div> '},28:function(e,t,a,l,n,r,i){var o;return" "+(null!=(o=a.if_eq.call(null!=t?t:{},null!=(o=null!=t?t.currentField:t)?o.showexternalsource:o,"true",{name:"if_eq",hash:{},fn:e.program(29,n,0,r,i),inverse:e.program(34,n,0,r,i),data:n}))?o:"")+" "},29:function(e,t,a,l,n){var r,i=e.lambda,o=e.escapeExpression,s=null!=t?t:{};return' <div class="labelValCreate mL45"> <input type="hidden" id="externalCompanyId" value="'+o(i(null!=(r=null!=t?t.currentField:t)?r.externalCompanyId:r,t))+'" externalsource="'+o(i(null!=(r=null!=t?t.currentField:t)?r.externalsource:r,t))+'"></input> <input '+(null!=(r=a.ifNotEquals.call(s,null!=(r=null!=t?t.currentField:t)?r.readonly:r,"true",{name:"ifNotEquals",hash:{},fn:e.program(30,n,0),inverse:e.program(32,n,0),data:n}))?r:"")+' type="text" '+(null!=(r=a.convertObjToKeyValuePair.call(s,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(s,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' value="'+o(i(null!=(r=null!=t?t.currentField:t)?r.defaultvalue:r,t))+'"></input> </div> '},30:function(e,t,a,l,n){return" "},32:function(e,t,a,l,n){return" readonly=true "},34:function(e,t,a,l,n,r,i){var o,s=null!=t?t:{};return' <div class="labelValCreate mL45" '+(null!=(o=a.if_eq.call(s,null!=(o=null!=t?t.currentSection:t)?o.layout:o,"2",{name:"if_eq",hash:{},fn:e.program(30,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.if_eq.call(s,null!=(o=null!=t?t.currentField:t)?o.uitype:o,"51",{name:"if_eq",hash:{},fn:e.program(30,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.if_eq.call(s,null!=(o=null!=t?t.currentField:t)?o.uitype:o,"11",{name:"if_eq",hash:{},fn:e.program(35,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.if_eq.call(s,null!=t?t.module:t,"Events",{name:"if_eq",hash:{},fn:e.program(37,n,0,r,i),inverse:e.noop,data:n}))?o:"")+"> "+(null!=(o=a.contains.call(s,"[8,55,221]",null!=(o=null!=t?t.currentField:t)?o.uitype:o,{name:"contains",hash:{},fn:e.program(39,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.if_eq.call(s,"66",null!=(o=null!=t?t.currentField:t)?o.uitype:o,{name:"if_eq",hash:{},fn:e.program(64,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.if_eq.call(s,"556",null!=(o=null!=t?t.currentField:t)?o.uitype:o,{name:"if_eq",hash:{},fn:e.program(91,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.if_eq.call(s,"555",null!=(o=null!=t?t.currentField:t)?o.uitype:o,{name:"if_eq",hash:{},fn:e.program(96,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.if_eq.call(s,"16",null!=(o=null!=t?t.currentField:t)?o.uitype:o,{name:"if_eq",hash:{},fn:e.program(147,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.if_eq.call(s,"210",null!=(o=null!=t?t.currentField:t)?o.uitype:o,{name:"if_eq",hash:{},fn:e.program(152,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.ifAllMatch.call(s,null!=(o=null!=t?t.currentField:t)?o.uitype:o,"=","133",null!=(o=null!=t?t.currentField:t)?o.colname:o,"=","ROLEID",{name:"ifAllMatch",hash:{},fn:e.program(147,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.ifAllMatch.call(s,null!=(o=null!=t?t.currentField:t)?o.uitype:o,"=","133",null!=(o=null!=t?t.currentField:t)?o.colname:o,"=","PROFILEID",{name:"ifAllMatch",hash:{},fn:e.program(152,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.if_eq.call(s,"27",null!=(o=null!=t?t.currentField:t)?o.uitype:o,{name:"if_eq",hash:{},fn:e.program(155,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.ifNotEquals.call(s,null!=(o=null!=t?t.currentField:t)?o.issubformfield:o,"true",{name:"ifNotEquals",hash:{},fn:e.program(166,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.if_eq.call(s,"22",null!=(o=null!=t?t.currentField:t)?o.uitype:o,{name:"if_eq",hash:{},fn:e.program(169,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.if_eq.call(s,"62",null!=(o=null!=t?t.currentField:t)?o.uitype:o,{name:"if_eq",hash:{},fn:e.program(171,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.if_eq.call(s,"1",null!=(o=null!=t?t.currentField:t)?o.uitype:o,{name:"if_eq",hash:{},fn:e.program(173,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.contains.call(s,"[24,202,786,14,333]",null!=(o=null!=t?t.currentField:t)?o.uitype:o,{name:"contains",hash:{},fn:e.program(184,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.if_eq.call(s,null!=(o=null!=t?t.currentField:t)?o.uitype:o,"4",{name:"if_eq",hash:{},fn:e.program(199,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.contains.call(s,"[36,143,144,145]",null!=(o=null!=t?t.currentField:t)?o.uitype:o,{name:"contains",hash:{},fn:e.program(206,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.if_eq.call(s,"47",null!=(o=null!=t?t.currentField:t)?o.uitype:o,{name:"if_eq",hash:{},fn:e.program(216,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.contains.call(s,"[5,6,7,9,10,12,13,15,133,135,136]",null!=(o=null!=t?t.currentField:t)?o.uitype:o,{name:"contains",hash:{},fn:e.program(218,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.contains.call(s,"[444,445]",null!=(o=null!=t?t.currentField:t)?o.uitype:o,{name:"contains",hash:{},fn:e.program(228,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.if_eq.call(s,"38",null!=(o=null!=t?t.currentField:t)?o.uitype:o,{name:"if_eq",hash:{},fn:e.program(182,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.if_eq.call(s,"99",null!=(o=null!=t?t.currentField:t)?o.uitype:o,{name:"if_eq",hash:{},fn:e.program(232,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.if_newphonetype.call(s,null!=(o=null!=t?t.currentField:t)?o.uitype:o,{name:"if_newphonetype",hash:{},fn:e.program(235,n,0,r,i),inverse:e.program(238,n,0,r,i),data:n}))?o:"")+" "+(null!=(o=a.if_eq.call(s,"11",null!=(o=null!=t?t.currentField:t)?o.uitype:o,{name:"if_eq",hash:{},fn:e.program(240,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.if_eq.call(s,"50",null!=(o=null!=t?t.currentField:t)?o.uitype:o,{name:"if_eq",hash:{},fn:e.program(245,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.if_eq.call(s,"51",null!=(o=null!=t?t.currentField:t)?o.uitype:o,{name:"if_eq",hash:{},fn:e.program(247,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.if_eq.call(s,"17",null!=(o=null!=t?t.currentField:t)?o.uitype:o,{name:"if_eq",hash:{},fn:e.program(249,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.if_eq.call(s,"60",null!=(o=null!=t?t.currentField:t)?o.uitype:o,{name:"if_eq",hash:{},fn:e.program(257,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.if_eq.call(s,"18",null!=(o=null!=t?t.currentField:t)?o.uitype:o,{name:"if_eq",hash:{},fn:e.program(259,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.if_eq.call(s,"1234",null!=(o=null!=t?t.currentField:t)?o.uitype:o,{name:"if_eq",hash:{},fn:e.program(275,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.ifAllMatch.call(s,null!=(o=null!=t?t.currentField:t)?o.uitype:o,"=","104",null!=t?t.module:t,"=","Events",null!=(o=null!=t?t.currentField:t)?o.colname:o,"=","REMINDINVITEESAT",{name:"ifAllMatch",hash:{},fn:e.program(286,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.contains.call(s,"[300,123,41,301]",null!=(o=null!=t?t.currentField:t)?o.uitype:o,{name:"contains",hash:{},fn:e.program(291,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.if_eq.call(s,"26",null!=(o=null!=t?t.currentField:t)?o.uitype:o,{name:"if_eq",hash:{},fn:e.program(317,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.ifAllMatch.call(s,null!=(o=null!=t?t.currentField:t)?o.uitype:o,"=","2",null!=(o=null!=t?t.currentField:t)?o.colname:o,"=","CONSENTTHROUGH",null!=t?t.module:t,"=","Consents",{name:"ifAllMatch",hash:{},fn:e.program(322,n,0,r,i),inverse:e.program(334,n,0,r,i),data:n}))?o:"")+" "+(null!=(o=a.contains.call(s,"[110,3]",null!=(o=null!=t?t.currentField:t)?o.uitype:o,{name:"contains",hash:{},fn:e.program(400,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.if_eq.call(s,null!=(o=null!=t?t.currentField:t)?o.uitype:o,"208",{name:"if_eq",hash:{},fn:e.program(402,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.if_eq.call(s,null!=(o=null!=t?t.currentField:t)?o.uitype:o,"207",{name:"if_eq",hash:{},fn:e.program(404,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.if_eq.call(s,"40",null!=(o=null!=t?t.currentField:t)?o.uitype:o,{name:"if_eq",hash:{},fn:e.program(406,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.if_eq.call(s,"80",null!=(o=null!=t?t.currentField:t)?o.uitype:o,{name:"if_eq",hash:{},fn:e.program(408,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" </div> "},35:function(e,t,a,l,n){return' colspan="2" '},37:function(e,t,a,l,n){return' class="crEvVal" '},39:function(e,t,a,l,n){var r;return" "+(null!=(r=a.if_eq.call(null!=t?t:{},"Events",null!=t?t.module:t,{name:"if_eq",hash:{},fn:e.program(40,n,0),inverse:e.program(43,n,0),data:n}))?r:"")+" "},40:function(e,t,a,l,n){var r,i=null!=t?t:{};return" <div "+(null!=(r=a.if_nq.call(i,null!=(r=null!=t?t.currentField:t)?r.readonly:r,"true",{name:"if_nq",hash:{},fn:e.program(41,n,0),inverse:e.noop,data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' data-withmultipleoptions="no" data-deactivatedusers="no" data-withemail="yes" data-entityowner="yes" style="width:300px; min-height:15px;" > <span id="ownerNameLookupSpan" name="ownerNameLookupSpan" class="cP"></span> <a href="javascript:;" class="tb_downarrow">&nbsp;</a> </div> '},41:function(e,t,a,l,n){return' name="searchUserLookup" class="selectElementNew1" onchange="Events.checkDuplicateEvent(undefined,undefined,undefined,true);"  onclick="Search.showLookup(this.id,\''+e.escapeExpression(e.lambda(null!=t?t.module:t,t))+"')\" "},43:function(e,t,a,l,n){var r;return" <div id='cruxcomponent_"+e.escapeExpression(e.lambda(null!=(r=null!=(r=null!=t?t.currentField:t)?r.attrObj:r)?r.id:r,t))+'\' class="cruxcomponent userLookupWrapOldUI"> '+(null!=(r=a.ifAnyMatch.call(null!=t?t:{},null!=(r=null!=t?t.currentField:t)?r.uitype:r,"=","55",null!=(r=null!=t?t.currentField:t)?r.uitype:r,"=","221",{name:"ifAnyMatch",hash:{},fn:e.program(44,n,0),inverse:e.program(48,n,0),data:n}))?r:"")+" </div> "},44:function(e,t,a,l,n){var r,i=e.lambda,o=e.escapeExpression,s=null!=t?t:{};return' <crm-user-wrapper tab-index="'+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.attrObj:r)?r.tabIndex:r,t))+'" read-only="'+o(i(null!=(r=null!=t?t.currentField:t)?r.readonly:r,t))+"\" action-source='entitycreate' is-field-lookup=\""+o(i(null!=(r=null!=t?t.currentField:t)?r.isFieldOfLookup:r,t))+'" field-id-fol="'+o(i(null!=(r=null!=t?t.currentField:t)?r.fieldid:r,t))+'"  layout-id="'+o(i(null!=(r=null!=t?t.currentField:t)?r.layoutId:r,t))+"\" field-id='"+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.attrObj:r)?r.id:r,t))+"'  id='"+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.attrObj:r)?r.id:r,t))+"' module = \""+o(i(null!=t?t.module:t,t))+'" on-selected="selectedUser" data-id="'+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.dataObj:r)?r["data-id"]:r,t))+'" '+(null!=(r=a.convertObjToKeyValuePair.call(s,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' user-record=\'{"id":"'+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.dataObj:r)?r["data-id"]:r,t))+'","full_name":"'+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.attrObj:r)?r.title:r,t))+'"}\' filter-query-id="'+o(i(null!=(r=null!=t?t.currentField:t)?r.filterQueryId:r,t))+'"></crm-user-wrapper> '+(null!=(r=a.if_nq.call(s,null!=(r=null!=t?t.currentField:t)?r.readonly:r,"true",{name:"if_nq",hash:{},fn:e.program(45,n,0),inverse:e.noop,data:n}))?r:"")+" "},45:function(e,t,a,l,n){var r,i=null!=t?t:{};return' <span class="dIB pR fR dvbcCardDp"> '+(null!=(r=a.getLookupImag.call(i,null!=t?t.module:t,null!=t?t.currentField:t,{name:"getLookupImag",hash:{},fn:e.program(46,n,0),inverse:e.noop,data:n}))?r:"")+" "+(null!=(r=a.getLoadLookupImage.call(i,null!=t?t.currentField:t,{name:"getLoadLookupImage",hash:{},fn:e.program(46,n,0),inverse:e.noop,data:n}))?r:"")+" </span> "},46:function(e,t,a,l,n){return""},48:function(e,t,a,l,n){var r;return" "+(null!=(r=a.if_eq.call(null!=t?t:{},null!=t?t.module:t,"Appointments",{name:"if_eq",hash:{},fn:e.program(49,n,0),inverse:e.program(52,n,0),data:n}))?r:"")+" "},49:function(e,t,a,l,n){var r,i=e.lambda,o=e.escapeExpression,s=null!=t?t:{};return' <crm-user-wrapper tab-index="'+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.attrObj:r)?r.tabIndex:r,t))+"\" read-only=\"false\" action-source='entitycreate' cx-prop-custom-request='true' field-id='"+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.attrObj:r)?r.id:r,t))+"' "+(null!=(r=a.if_eq.call(s,null!=t?t.module:t,"Tasks",{name:"if_eq",hash:{},fn:e.program(50,n,0),inverse:e.noop,data:n}))?r:"")+" id='"+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.attrObj:r)?r.id:r,t))+"' module = \""+o(i(null!=t?t.module:t,t))+'" on-selected="selectedUser" data-id="'+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.dataObj:r)?r["data-id"]:r,t))+'" '+(null!=(r=a.convertObjToKeyValuePair.call(s,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' title="'+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.attrObj:r)?r.title:r,t))+'" user-record=\'{"id":"'+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.dataObj:r)?r["data-id"]:r,t))+'","full_name":"'+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.attrObj:r)?r.title:r,t))+"\"}' user-criteria='"+o(i(null!=t?t.usercriteria:t,t))+"' user-search-criteria='"+o(i(null!=t?t.usersearchcriteria:t,t))+"' filter-query-id=\""+o(i(null!=(r=null!=t?t.currentField:t)?r.filterQueryId:r,t))+'"></crm-user-wrapper> <img tabIndex="'+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.attrObj:r)?r.tabIndex:r,t))+'" id="img_'+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.attrObj:r)?r.id:r,t))+'" style="width:17px;height:19px" data-zcqa="'+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.dataObj:r)?r["zcqa-lookup"]:r,t))+'" src="'+o(a.getCrmImageUrl.call(s,"spacer_e17b417_.gif",{name:"getCrmImageUrl",hash:{},data:n}))+'" onclick="document.querySelector(\'#'+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.attrObj:r)?r.id:r,t))+" crux-user-lookup').cxProp('show',true)\" class=\"changeUserIcon svgIcons ico-search-users lookup_hIconO fR mR5 hIconO\"></img> "},50:function(e,t,a,l,n){return" createTask='true' "},52:function(e,t,a,l,n){var r;return" "+(null!=(r=a.ifAllMatch.call(null!=t?t:{},null!=t?t.currentStatus:t,"=","create",null!=(r=null!=t?t.currentField:t)?r.readonly:r,"!=","true",{name:"ifAllMatch",hash:{},fn:e.program(53,n,0),inverse:e.program(55,n,0),data:n}))?r:"")+" "},53:function(e,t,a,l,n){var r,i=e.lambda,o=e.escapeExpression,s=null!=t?t:{};return' <crm-user-wrapper tab-index="'+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.attrObj:r)?r.tabIndex:r,t))+"\" action-source='entitycreate' field-id='"+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.attrObj:r)?r.id:r,t))+"' "+(null!=(r=a.if_eq.call(s,null!=t?t.module:t,"Tasks",{name:"if_eq",hash:{},fn:e.program(50,n,0),inverse:e.noop,data:n}))?r:"")+" id='"+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.attrObj:r)?r.id:r,t))+"' module = \""+o(i(null!=t?t.module:t,t))+'" is-field-lookup="'+o(i(null!=(r=null!=t?t.currentField:t)?r.isFieldOfLookup:r,t))+'" field-id-fol="'+o(i(null!=(r=null!=t?t.currentField:t)?r.fieldid:r,t))+'" layout-id="'+o(i(null!=(r=null!=t?t.currentField:t)?r.layoutId:r,t))+"\" field-id='"+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.attrObj:r)?r.id:r,t))+'\'  on-selected="selectedUser" data-id="'+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.dataObj:r)?r["data-id"]:r,t))+'" '+(null!=(r=a.convertObjToKeyValuePair.call(s,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' user-record=\'{"id":"'+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.dataObj:r)?r["data-id"]:r,t))+'","full_name":"'+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.attrObj:r)?r.title:r,t))+"\"}' user-criteria='"+o(i(null!=t?t.usercriteria:t,t))+"' user-search-criteria='"+o(i(null!=t?t.usersearchcriteria:t,t))+"' filter-query-id=\""+o(i(null!=(r=null!=t?t.currentField:t)?r.filterQueryId:r,t))+'"></crm-user-wrapper> <img tabIndex="'+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.attrObj:r)?r.tabIndex:r,t))+'" id="img_'+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.attrObj:r)?r.id:r,t))+'" style="width:17px;height:19px" data-zcqa="'+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.dataObj:r)?r["zcqa-lookup"]:r,t))+'" src="'+o(a.getCrmImageUrl.call(s,"spacer_e17b417_.gif",{name:"getCrmImageUrl",hash:{},data:n}))+'" onclick="document.querySelector(\'#'+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.attrObj:r)?r.id:r,t))+" crux-user-lookup').cxProp('show',true)\" class=\"changeUserIcon svgIcons ico-search-users lookup_hIconO fR mR5 hIconO\"></img> "},55:function(e,t,a,l,n){var r;return" "+(null!=(r=a.ifAllMatch.call(null!=t?t:{},null!=t?t.currentStatus:t,"=","clone",null!=(r=null!=t?t.currentField:t)?r.readonly:r,"!=","true",{name:"ifAllMatch",hash:{},fn:e.program(56,n,0),inverse:e.program(58,n,0),data:n}))?r:"")+" "},56:function(e,t,a,l,n){var r,i=e.lambda,o=e.escapeExpression,s=null!=t?t:{};return' <crm-user-wrapper tab-index="'+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.attrObj:r)?r.tabIndex:r,t))+"\" action-source='entitycreate' is-field-lookup=\""+o(i(null!=(r=null!=t?t.currentField:t)?r.isFieldOfLookup:r,t))+'" field-id-fol="'+o(i(null!=(r=null!=t?t.currentField:t)?r.fieldid:r,t))+'" layout-id="'+o(i(null!=(r=null!=t?t.currentField:t)?r.layoutId:r,t))+"\" field-id='"+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.attrObj:r)?r.id:r,t))+"' "+(null!=(r=a.if_eq.call(s,null!=t?t.module:t,"Tasks",{name:"if_eq",hash:{},fn:e.program(50,n,0),inverse:e.noop,data:n}))?r:"")+" id='"+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.attrObj:r)?r.id:r,t))+"' module = \""+o(i(null!=t?t.module:t,t))+'" on-selected="selectedUser" data-id="'+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.dataObj:r)?r["data-id"]:r,t))+'" '+(null!=(r=a.convertObjToKeyValuePair.call(s,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' user-record=\'{"id":"'+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.dataObj:r)?r["data-id"]:r,t))+'","full_name":"'+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.attrObj:r)?r.title:r,t))+"\"}' user-criteria='"+o(i(null!=t?t.usercriteria:t,t))+"' user-search-criteria='"+o(i(null!=t?t.usersearchcriteria:t,t))+"' filter-query-id=\""+o(i(null!=(r=null!=t?t.currentField:t)?r.filterQueryId:r,t))+'"></crm-user-wrapper> <img tabIndex="'+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.attrObj:r)?r.tabIndex:r,t))+'" id="img_'+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.attrObj:r)?r.id:r,t))+'" style="width:17px;height:19px" data-zcqa="'+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.dataObj:r)?r["zcqa-lookup"]:r,t))+'" src="'+o(a.getCrmImageUrl.call(s,"spacer_e17b417_.gif",{name:"getCrmImageUrl",hash:{},data:n}))+'" onclick="document.querySelector(\'#'+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.attrObj:r)?r.id:r,t))+" crux-user-lookup').cxProp('show',true)\" class=\"changeUserIcon svgIcons ico-search-users lookup_hIconO fR mR5 hIconO\"></img> "},58:function(e,t,a,l,n){var r,i=null!=t?t:{};return" <div "+(null!=(r=a.if_nq.call(i,null!=(r=null!=t?t.currentField:t)?r.readonly:r,"true",{name:"if_nq",hash:{},fn:e.program(59,n,0),inverse:e.noop,data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' data-withmultipleoptions="no" data-deactivatedusers="no" data-withemail="yes" data-entityowner="yes" style="width:300px; min-height:15px;" > <span id="ownerNameLookupSpan" name="ownerNameLookupSpan" class="cP">'+e.escapeExpression(e.lambda(null!=(r=null!=(r=null!=t?t.currentField:t)?r.attrObj:r)?r.title:r,t))+'</span> <a href="javascript:;" class="tb_downarrow">&nbsp;</a> </div> '},59:function(e,t,a,l,n){var r,i=null!=t?t:{};return' name="searchUserLookup" class="selectElementNew1" '+(null!=(r=a.ifAllMatch.call(i,null!=t?t.module:t,"=","Tasks",null!=t?t.currentStatus:t,"=","clone",{name:"ifAllMatch",hash:{},fn:e.program(60,n,0),inverse:e.noop,data:n}))?r:"")+"onclick=\"Search.showLookup(this.id,'"+e.escapeExpression(e.lambda(null!=t?t.module:t,t))+"')\" "+(null!=(r=a.if_eq.call(i,"55",null!=(r=null!=t?t.currentField:t)?r.uitype:r,{name:"if_eq",hash:{},fn:e.program(62,n,0),inverse:e.noop,data:n}))?r:"")},60:function(e,t,a,l,n){return' data-module = "'+e.escapeExpression(e.lambda(null!=t?t.module:t,t))+'" onchange="crmTemplate.modifySelectBox(event,this);" '},62:function(e,t,a,l,n){var r;return' title = "'+e.escapeExpression(e.lambda(null!=(r=null!=t?t.currentField:t)?r.defaultvalue:r,t))+'"'},64:function(e,t,a,l,n){var r,i=null!=t?t:{},o=e.escapeExpression,s=e.lambda;return' <div class="pR photoUploadSec  dIB" > <div class="profOptionList dN" onclick="sE(event);"> <ul class="m0 p0"> <li class="m0 pT0 pB0 pLR10 cP profOptionListLi"  onclick="javascript:previewPhoto();"><p class="crm-font-regular f13 col333 pB5 pT5">'+o(a.getI18n.call(i,"crm.recordImage.previewimage",{name:"getI18n",hash:{},data:n}))+'</p></li> <li class="m0 pT0 pB0 pLR10 cP profOptionListLi" onclick="javascript:showUploadPhoto(\''+o(a.encodeJS.call(i,null!=t?t.module:t,{name:"encodeJS",hash:{},data:n}))+"','"+o(a.encodeJS.call(i,null!=t?t.entityId:t,{name:"encodeJS",hash:{},data:n}))+"','"+o(a.encodeJS.call(i,null!=t?t.currentStatus:t,{name:"encodeJS",hash:{},data:n}))+"');$('.profOptionList').addClass('dN');sE(event)\"><p class=\"crm-font-regular f13 col333 pB5 pT5 bdrBot\">"+o(a.getI18n.call(i,"crm.FileuploadField.addNewImage",{name:"getI18n",hash:{},data:n}))+'</p></li> <li class="m0 pT0 pB0 pLR10 cP profOptionListLi" id="deleteEntityImageVision" data-onclick="alertDeleteEntityImage(\''+o(a.encodeJS.call(i,null!=t?t.entityId:t,{name:"encodeJS",hash:{},data:n}))+"','"+o(a.encodeJS.call(i,null!=t?t.module:t,{name:"encodeJS",hash:{},data:n}))+"','"+o(a.getI18n.call(i,"crm.image.remove.confirm",{name:"getI18n",hash:{},data:n}))+"','"+o(a.encodeJS.call(i,null!=t?t.currentStatus:t,{name:"encodeJS",hash:{},data:n}))+"');\" onclick=\"showDeletePopup('"+o(a.getI18n.call(i,"crm.image.remove.confirm",{name:"getI18n",hash:{},data:n}))+"','"+o(a.getI18n.call(i,"crm.workflow.rule.tag.remove.popup.confirm.button",{name:"getI18n",hash:{},data:n}))+"','','',this);$('.profOptionList').addClass('dN');sE(event)\"><p class=\"crm-font-regular f13 col333 pT5 pB5\">"+o(a.getI18n.call(i,"crm.lar.ruleEntry.dontassociate",{name:"getI18n",hash:{},data:n}))+"</p></li> </ul> </div> "+(null!=(r=a.if.call(i,null!=t?t.pfReadOnly:t,{name:"if",hash:{},fn:e.program(65,n,0),inverse:e.program(70,n,0),data:n}))?r:"")+' <div id="zia-vision-popup"></div> <div class="LnuploadPhoto" > '+(null!=(r=a.if.call(i,null!=t?t.pfReadOnly:t,{name:"if",hash:{},fn:e.program(78,n,0),inverse:e.program(83,n,0),data:n}))?r:"")+' </div> <div id="imgContainer" data-id="online-entity"> <img id="'+o(s(null!=t?t.imgId:t,t))+'" src="'+o(s(null!=t?t.imgSrc:t,t))+'" class="dvPhotoShadow w100per h100p"> </div> <input type="hidden" value="true" name="isNewUpload" id="isNewUpload"> <input type="hidden" value="'+o(s(null!=t?t.photoFileId:t,t))+'" name="photoID" id="photoID"></input> <input type="hidden" value="'+o(s(null!=t?t.imgSrc:t,t))+'" name="imageSrc" id="imageSrc"></input> </a> </div> '},65:function(e,t,a,l,n){var r;return" "+(null!=(r=a.ifAnyMatch.call(null!=t?t:{},null!=t?t.currentStatus:t,"=","edit",null!=t?t.currentStatus:t,"=","clone",{name:"ifAnyMatch",hash:{},fn:e.program(66,n,0),inverse:e.program(68,n,0),data:n}))?r:"")+" "},66:function(e,t,a,l,n){return' <a class="lnPhoto pR dIB" onmouseover="zctt.showtt(\'Read only field\');" onmouseout="zctt.hidett();" onclick="javascript:previewPhoto();"> '},68:function(e,t,a,l,n){return' <a class="lnPhoto pR dIB" onmouseover="zctt.showtt(\'Read only field\');" onmouseout="zctt.hidett();"> '},70:function(e,t,a,l,n){var r;return" "+(null!=(r=a.if_eq.call(null!=t?t:{},"setup",null!=t?t.currentStatus:t,{name:"if_eq",hash:{},fn:e.program(71,n,0),inverse:e.program(73,n,0),data:n}))?r:"")+" "},71:function(e,t,a,l,n){return' <a class="lnPhoto pR dIB eventNone"> '},73:function(e,t,a,l,n){var r;return" "+(null!=(r=a.ifAnyMatch.call(null!=t?t:{},null!=t?t.currentStatus:t,"=","create",null!=t?t.currentStatus:t,"=","clone",{name:"ifAnyMatch",hash:{},fn:e.program(74,n,0),inverse:e.program(76,n,0),data:n}))?r:"")+" "},74:function(e,t,a,l,n){return' <a class="lnPhoto pR dIB" onclick="checkOptionsForImage(\''+e.escapeExpression(a.encodeJS.call(null!=t?t:{},null!=t?t.module:t,{name:"encodeJS",hash:{},data:n}))+"'); sE(event)\"> "},76:function(e,t,a,l,n){var r=null!=t?t:{},i=e.escapeExpression;return' <a class="lnPhoto pR dIB" onclick="checkOptionsForImage(\''+i(a.encodeJS.call(r,null!=t?t.module:t,{name:"encodeJS",hash:{},data:n}))+"','"+i(a.encodeJS.call(r,null!=t?t.entityId:t,{name:"encodeJS",hash:{},data:n}))+"','"+i(a.encodeJS.call(r,null!=t?t.currentStatus:t,{name:"encodeJS",hash:{},data:n}))+"'); sE(event)\"> "},78:function(e,t,a,l,n){var r;return" "+(null!=(r=a.ifAnyMatch.call(null!=t?t:{},null!=t?t.currentStatus:t,"=","edit",null!=t?t.currentStatus:t,"=","clone",{name:"ifAnyMatch",hash:{},fn:e.program(79,n,0),inverse:e.program(81,n,0),data:n}))?r:"")+" "},79:function(e,t,a,l,n){return' <div id="imgLinkdiv"  onclick="javascript:previewPhoto();" class="dIB"></div> '},81:function(e,t,a,l,n){return' <div id="imgLinkdiv" data-readonly="true" class="dIB"></div> '},83:function(e,t,a,l,n){var r;return" "+(null!=(r=a.if_eq.call(null!=t?t:{},"setup",null!=t?t.currentStatus:t,{name:"if_eq",hash:{},fn:e.program(84,n,0),inverse:e.program(86,n,0),data:n}))?r:"")+" "},84:function(e,t,a,l,n){return' <div id="imgLinkdiv" class="dIB cameraIcon eventNone"></div> '},86:function(e,t,a,l,n){var r;return" "+(null!=(r=a.ifAnyMatch.call(null!=t?t:{},null!=t?t.currentStatus:t,"=","create",null!=t?t.currentStatus:t,"=","clone",{name:"ifAnyMatch",hash:{},fn:e.program(87,n,0),inverse:e.program(89,n,0),data:n}))?r:"")+" "},87:function(e,t,a,l,n){return' <div id="imgLinkdiv" class="dIB cameraIcon" onclick="checkOptionsForImage(\''+e.escapeExpression(a.encodeJS.call(null!=t?t:{},null!=t?t.module:t,{name:"encodeJS",hash:{},data:n}))+"')\" ></div> "},89:function(e,t,a,l,n){var r=null!=t?t:{},i=e.escapeExpression;return' <div id="imgLinkdiv" class="dIB cameraIcon" onclick="checkOptionsForImage(\''+i(a.encodeJS.call(r,null!=t?t.module:t,{name:"encodeJS",hash:{},data:n}))+"','"+i(a.encodeJS.call(r,null!=t?t.entityId:t,{name:"encodeJS",hash:{},data:n}))+"','"+i(a.encodeJS.call(r,null!=t?t.currentStatus:t,{name:"encodeJS",hash:{},data:n}))+"')\" ></div> "},91:function(e,t,a,l,n){var r,i=e.lambda,o=e.escapeExpression,s=null!=t?t:{};return' <div class="imageUploadHead" id="'+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.attrObj:r)?r.id:r,t))+'" '+(null!=(r=a.convertObjToKeyValuePair.call(s,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' > <crm-image-upload-create allowed-size="'+o(i(null!=(r=null!=t?t.currentField:t)?r.maxlength:r,t))+'" single-column-layout ="'+(null!=(r=a.if_eq.call(s,null!=(r=null!=t?t.currentSection:t)?r.layout:r,"1",{name:"if_eq",hash:{},fn:e.program(92,n,0),inverse:e.program(94,n,0),data:n}))?r:"")+'" readonly="'+o(i(null!=(r=null!=t?t.currentField:t)?r.readonly:r,t))+'" existing-data ="'+o(a.feedImageDefaultValue.call(s,t,{name:"feedImageDefaultValue",hash:{},data:n}))+'" current-status = "'+o(i(null!=t?t.currentStatus:t,t))+'" fieldid = "'+o(i(null!=(r=null!=t?t.currentField:t)?r.fieldid:r,t))+'" module = "'+o(i(null!=t?t.module:t,t))+'" id = "Image_'+o(i(null!=(r=null!=t?t.currentField:t)?r.fieldid:r,t))+'" entity-id="'+o(i(null!=t?t.entityId:t,t))+'" parent-feature="'+o(a.setParentFeatureValue.call(s,t,{name:"setParentFeatureValue",hash:{},data:n}))+'"></crm-image-upload-create> </div> '},92:function(e,t,a,l,n){return"true"},94:function(e,t,a,l,n){return"false"},96:function(e,t,a,l,n,r,i){var o,s=null!=t?t:{},d=e.lambda,u=e.escapeExpression;return' <div class="mL45 fL pR w100per" id="cNdropFilesId" style="display: block;"> <div class="dIB pR w100per mB0 vat"> <div class="cNfileUpladBtn pR cP '+(null!=(o=a.ifEquals.call(s,null!=(o=null!=t?t.currentField:t)?o.readonly:o,"true",{name:"ifEquals",hash:{},fn:e.program(97,n,0,r,i),inverse:e.noop,data:n}))?o:"")+'" id="cNFileUpload" '+(null!=(o=a.if.call(s,null!=t?t.isClientAccount:t,{name:"if",hash:{},fn:e.program(30,n,0,r,i),inverse:e.program(99,n,0,r,i),data:n}))?o:"")+'> <input type="hidden" '+(null!=(o=a.convertObjToKeyValuePair.call(s,null!=(o=null!=t?t.currentField:t)?o.attrObj:o,{name:"convertObjToKeyValuePair",hash:{},data:n}))?o:"")+" "+(null!=(o=a.convertObjToKeyValuePair.call(s,null!=(o=null!=t?t.currentField:t)?o.dataObj:o,{name:"convertObjToKeyValuePair",hash:{},data:n}))?o:"")+' value="'+u(d(null!=(o=null!=t?t.currentField:t)?o.defaultid:o,t))+'"></input> <input type="hidden" id="attachSize_'+u(d(null!=(o=null!=t?t.currentField:t)?o.fieldid:o,t))+'" value=""></input> <input type="hidden" id="attachCount_'+u(d(null!=(o=null!=t?t.currentField:t)?o.fieldid:o,t))+'" value="0"></input> '+(null!=(o=a.if_eq.call(s,"create",null!=t?t.currentStatus:t,{name:"if_eq",hash:{},fn:e.program(101,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.if_eq.call(s,"setup",null!=t?t.currentStatus:t,{name:"if_eq",hash:{},fn:e.program(106,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.ifAnyMatch.call(s,null!=t?t.currentStatus:t,"=","clone",null!=t?t.currentStatus:t,"=","edit",null!=t?t.currentStatus:t,"=","ajaxEdit",null!=t?t.module:t,"=","Users",{name:"ifAnyMatch",hash:{},fn:e.program(108,n,0,r,i),inverse:e.noop,data:n}))?o:"")+' <div class="cNFileAttachDrop dN pA zI10 '+(null!=(o=a.ifEquals.call(s,null!=t?t.currentStatus:t,"setup",{name:"ifEquals",hash:{},fn:e.program(97,n,0,r,i),inverse:e.noop,data:n}))?o:"")+'" id="cNFileAttachDrop" style="display: none;top:28px; left: 0;" data-close="true"> <ul class="m0 pL0 atch-droplistProfile dB" id="'+u(d(null!=(o=null!=t?t.currentField:t)?o.systemName:o,t))+'" style="display: block !important;"> '+(null!=(o=a.each.call(s,null!=(o=null!=t?t.currentField:t)?o.picklistmap:o,{name:"each",hash:{},fn:e.program(134,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" </ul> </div> </div> "+(null!=(o=a.ifAnyMatch.call(s,null!=t?t.currentStatus:t,"=","clone",null!=t?t.currentStatus:t,"=","create",null!=t?t.currentStatus:t,"=","edit",null!=t?t.currentStatus:t,"=","ajaxEdit",null!=t?t.module:t,"=","Users",{name:"ifAnyMatch",hash:{},fn:e.program(145,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" </div> "},97:function(e,t,a,l,n){return" eventNone "},99:function(e,t,a,l,n){return'onclick="fileupload.openAttachmentOption(this, \'cNFileAttachDrop\',event);sE(event)" onmouseenter="fileupload.fileuploadShowTooltip(this)" onmouseleave="fileupload.fileuploadHideTooltip(this)" '},101:function(e,t,a,l,n){var r;return" "+(null!=(r=a.if.call(null!=t?t:{},null!=t?t.isClientAccount:t,{name:"if",hash:{},fn:e.program(102,n,0),inverse:e.program(104,n,0),data:n}))?r:"")+" "},102:function(e,t,a,l,n){var r,i=null!=t?t:{},o=e.lambda,s=e.escapeExpression;return' <input type="button" class="cP fileUploadLabel '+(null!=(r=a.ifEquals.call(i,null!=(r=null!=t?t.currentField:t)?r.readonly:r,"true",{name:"ifEquals",hash:{},fn:e.program(97,n,0),inverse:e.noop,data:n}))?r:"")+'" data-module ="'+s(o(null!=t?t.module:t,t))+'" data-fieldid="'+s(o(null!=(r=null!=t?t.currentField:t)?r.fieldid:r,t))+'" '+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' value="'+s(a.getI18n.call(i,"crm.tpi.ctiapi.config.choosefile",{name:"getI18n",hash:{},data:n}))+"\" onclick=\"sE(event);$('.cNFileAttachDrop').hide(0);showCustomizePopup('Attach','test',null,'',true,"+s(o(null!=(r=null!=t?t.currentField:t)?r.maxlength:r,t))+',this);"> '},104:function(e,t,a,l,n){var r,i=null!=t?t:{},o=e.lambda,s=e.escapeExpression;return' <input type="button" class="cP fileUploadLabel '+(null!=(r=a.ifEquals.call(i,null!=(r=null!=t?t.currentField:t)?r.readonly:r,"true",{name:"ifEquals",hash:{},fn:e.program(97,n,0),inverse:e.noop,data:n}))?r:"")+'" data-module ="'+s(o(null!=t?t.module:t,t))+'" data-fieldid="'+s(o(null!=(r=null!=t?t.currentField:t)?r.fieldid:r,t))+'" '+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' value="'+s(a.getI18n.call(i,"crm.tpi.ctiapi.config.choosefile",{name:"getI18n",hash:{},data:n}))+'"> <span class="cNdropDown pR cP" id="'+s(o(null!=(r=null!=t?t.currentField:t)?r.systemName:r,t))+'"><span class="cNArwDown"></span></span> '},106:function(e,t,a,l,n){var r,i=e.lambda,o=e.escapeExpression,s=null!=t?t:{};return' <input type="button" class="cP fileUploadLabel eventNone" data-module ="'+o(i(null!=t?t.module:t,t))+'" data-fieldid="'+o(i(null!=(r=null!=t?t.currentField:t)?r.fieldid:r,t))+'" '+(null!=(r=a.convertObjToKeyValuePair.call(s,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(s,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' value="'+o(a.getI18n.call(s,"crm.tpi.ctiapi.config.choosefile",{name:"getI18n",hash:{},data:n}))+'"> <span class="cNdropDown pR cP" id="'+o(i(null!=(r=null!=t?t.currentField:t)?r.systemName:r,t))+'"><span class="cNArwDown"></span></span> '},108:function(e,t,a,l,n,r,i){var o,s=null!=t?t:{};return" "+(null!=(o=a.if.call(s,null!=t?t.isClientAccount:t,{name:"if",hash:{},fn:e.program(109,n,0,r,i),inverse:e.program(112,n,0,r,i),data:n}))?o:"")+' </div> <div id="cNFileUploadedListView" class="fileuploaddrop cNFileUploadedListView w100per editElementHide pT10'+(null!=(o=a.ifEquals.call(s,null!=(o=null!=t?t.currentField:t)?o.readonly:o,"true",{name:"ifEquals",hash:{},fn:e.program(97,n,0,r,i),inverse:e.noop,data:n}))?o:"")+'"> <ul class="p0 mT0 mB0"> '+(null!=(o=a.each.call(s,null!=(o=null!=t?t.currentField:t)?o.defaultvalue:o,{name:"each",hash:{},fn:e.program(114,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" </ul> </div> "},109:function(e,t,a,l,n){var r,i=null!=t?t:{},o=e.lambda,s=e.escapeExpression;return' <input type="button" class="cP fileUploadLabel '+(null!=(r=a.ifEquals.call(i,null!=(r=null!=t?t.currentField:t)?r.readonly:r,"true",{name:"ifEquals",hash:{},fn:e.program(97,n,0),inverse:e.noop,data:n}))?r:"")+(null!=(r=a.ifCond.call(i,null!=(r=null!=(r=null!=t?t.currentField:t)?r.defaultvalue:r)?r.length:r,">=",null!=(r=null!=(r=null!=t?t.currentField:t)?r.dataObj:r)?r["data-maxlength"]:r,{name:"ifCond",hash:{},fn:e.program(110,n,0),inverse:e.noop,data:n}))?r:"")+'" data-module ="'+s(o(null!=t?t.module:t,t))+'" data-fieldid="'+s(o(null!=(r=null!=t?t.currentField:t)?r.fieldid:r,t))+'" '+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' value="'+s(a.getI18n.call(i,"crm.tpi.ctiapi.config.choosefile",{name:"getI18n",hash:{},data:n}))+"\" onclick=\"sE(event);$('.cNFileAttachDrop').hide(0);showCustomizePopup('Attach','test',null,'',true,"+s(o(null!=(r=null!=t?t.currentField:t)?r.maxlength:r,t))+',this);"> '},110:function(e,t,a,l,n){return"disabled"},112:function(e,t,a,l,n){var r,i=null!=t?t:{},o=e.lambda,s=e.escapeExpression;return' <input type="button" class="cP fileUploadLabel '+(null!=(r=a.ifEquals.call(i,null!=(r=null!=t?t.currentField:t)?r.readonly:r,"true",{name:"ifEquals",hash:{},fn:e.program(97,n,0),inverse:e.noop,data:n}))?r:"")+(null!=(r=a.ifCond.call(i,null!=(r=null!=(r=null!=t?t.currentField:t)?r.defaultvalue:r)?r.length:r,">=",null!=(r=null!=(r=null!=t?t.currentField:t)?r.dataObj:r)?r["data-maxlength"]:r,{name:"ifCond",hash:{},fn:e.program(110,n,0),inverse:e.noop,data:n}))?r:"")+'" data-module ="'+s(o(null!=t?t.module:t,t))+'" data-fieldid="'+s(o(null!=(r=null!=t?t.currentField:t)?r.fieldid:r,t))+'" '+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' value="'+s(a.getI18n.call(i,"crm.tpi.ctiapi.config.choosefile",{name:"getI18n",hash:{},data:n}))+'"> <span class="cNdropDown pR cP" id="'+s(o(null!=(r=null!=t?t.currentField:t)?r.systemName:r,t))+'"><span class="cNArwDown"></span></span> '},114:function(e,t,a,l,n,r,i){var o,s=e.lambda,d=e.escapeExpression,u=null!=t?t:{};return' <li class="clearfix m0 p0 pR mT5 fileUploadLi" data-type="edit" title="'+d(s(null!=t?t.file_Name:t,t))+'" id="attachment_'+d(s(null!=t?t.attachment_Id:t,t))+'"> <div class="dIB fL"> '+(null!=(o=a.if_eq.call(u,null!=t?t.link_Docs:t,"3",{name:"if_eq",hash:{},fn:e.program(115,n,0,r,i),inverse:e.program(117,n,0,r,i),data:n}))?o:"")+' <span class="dIB f13 col888 pR uploadTextSpan"> '+(null!=(o=a.if_eq.call(u,null!=t?t.link_Docs:t,"0",{name:"if_eq",hash:{},fn:e.program(119,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.if_eq.call(u,null!=t?t.link_Docs:t,"1",{name:"if_eq",hash:{},fn:e.program(121,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.if_eq.call(u,null!=t?t.link_Docs:t,"3",{name:"if_eq",hash:{},fn:e.program(126,n,0,r,i),inverse:e.noop,data:n}))?o:"")+' </span> </div> <div class="dIB fR mL20 pR"> '+(null!=(o=a.if_nq.call(u,null!=t?t.link_Docs:t,"3",{name:"if_nq",hash:{},fn:e.program(128,n,0,r,i),inverse:e.noop,data:n}))?o:"")+' <div class="pA cP t3 r0"> <span class="cP closeIcon mT3"> '+(null!=(o=a.if_eq.call(u,"clone",null!=i[1]?i[1].currentStatus:i[1],{name:"if_eq",hash:{},fn:e.program(130,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.ifAnyMatch.call(u,null!=i[1]?i[1].currentStatus:i[1],"=","edit",null!=i[1]?i[1].currentStatus:i[1],"=","ajaxEdit",null!=i[1]?i[1].module:i[1],"=","Users",{name:"ifAnyMatch",hash:{},fn:e.program(132,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" </span> </div> </div> </li> "},115:function(e,t,a,l,n){return' <span class="dIB vat mT1 svgIcons ico-teamDrive"></span> '},117:function(e,t,a,l,n){return' <span class="dIB vat mT1 fileIconDefault svgIconsImg mR5 '+e.escapeExpression(a.getExtnTypeClass.call(null!=t?t:{},null!=t?t.file_Name:t,{name:"getExtnTypeClass",hash:{},data:n}))+'"></span> '},119:function(e,t,a,l,n){var r;return" "+(null!=(r=a.if.call(null!=t?t:{},null!=t?t.is_Preview_Available:t,{name:"if",hash:{},fn:e.program(120,n,0),inverse:e.program(121,n,0),data:n}))?r:"")+" "},120:function(e,t,a,l,n){var r;return" "+(null!=(r=a.if_eq.call(null!=t?t:{},null!=t?t.extn:t,"pdf",{name:"if_eq",hash:{},fn:e.program(121,n,0),inverse:e.program(123,n,0),data:n}))?r:"")+" "},121:function(e,t,a,l,n){var r=e.lambda,i=e.escapeExpression;return' <a id="fileUploadField_'+i(r(null!=t?t.attachment_Id:t,t))+'" class="oH tOE nwrp vab dIB col333" style="max-width: 160px;" title=\''+i(r(null!=t?t.file_Name:t,t))+"'>"+i(r(null!=t?t.file_Name:t,t))+"</a> "},123:function(e,t,a,l,n){var r;return" "+(null!=(r=a.ifNotEquals.call(null!=t?t:{},null!=t?t.mode:t,"",{name:"ifNotEquals",hash:{},fn:e.program(121,n,0),inverse:e.program(124,n,0),data:n}))?r:"")+" "},124:function(e,t,a,l,n){var r;return" "+(null!=(r=a.if_eq.call(null!=t?t:{},null!=t?t.extn:t,"png",{name:"if_eq",hash:{},fn:e.program(121,n,0),inverse:e.noop,data:n}))?r:"")+" "},126:function(e,t,a,l,n){var r=e.lambda,i=e.escapeExpression;return' <a id="fileUploadField_'+i(r(null!=t?t.attachment_Id:t,t))+'" class="oH tOE nwrp vab dIB" style="max-width: 240px;cursor: pointer;" title=\''+i(r(null!=t?t.file_Name:t,t))+"' target='_blank' href=\""+i(r(null!=t?t.preview_Url:t,t))+'" rel="noopener noreferrer" target=\'_blank\'>'+i(r(null!=t?t.file_Name:t,t))+"</a></span> "},128:function(e,t,a,l,n){var r=e.lambda,i=e.escapeExpression;return' <span class="dIB f11 col666 pR25 mT5" id="fileSize_'+i(r(null!=t?t.attachment_Id:t,t))+'">'+i(r(null!=t?t.file_Size:t,t))+"</span> "},130:function(e,t,a,l,n,r,i){var o,s=e.lambda,d=e.escapeExpression;return' <a id="deletelink" class="attachDropMenuRow m0 p0 h100p"  style="cursor: pointer" onclick="fileupload.removeFileCreate(this,\'\',\'clone\',\''+d(s(null!=t?t.attachment_Id:t,t))+"','"+d(s(null!=(o=null!=i[1]?i[1].currentField:i[1])?o.fieldid:o,t))+"');\"></a> "},132:function(e,t,a,l,n,r,i){var o,s=e.lambda,d=e.escapeExpression;return' <a id="deletelink" class="attachDropMenuRow m0 p0 h100p"  style="cursor: pointer" onclick="fileupload.removeFileCreate(this,\'\',\'edit\',\''+d(s(null!=t?t.attachment_Id:t,t))+"','"+d(s(null!=(o=null!=i[1]?i[1].currentField:i[1])?o.fieldid:o,t))+"');\"></a> "},134:function(e,t,a,l,n,r,i){var o,s=null!=t?t:{};return" "+(null!=(o=a.if_eq.call(s,"Upload File",null!=t?t.systemvalue:t,{name:"if_eq",hash:{},fn:e.program(135,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.if_eq.call(s,"Documents",null!=t?t.systemvalue:t,{name:"if_eq",hash:{},fn:e.program(137,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.if_eq.call(s,"TeamDrive",null!=t?t.systemvalue:t,{name:"if_eq",hash:{},fn:e.program(139,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.if_eq.call(s,"Zoho Docs",null!=t?t.systemvalue:t,{name:"if_eq",hash:{},fn:e.program(141,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.if_eq.call(s,"Google Drive",null!=t?t.systemvalue:t,{name:"if_eq",hash:{},fn:e.program(143,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "},135:function(e,t,a,l,n,r,i){var o,s=e.lambda,d=e.escapeExpression;return" <li class=\"p0\" onclick=\"sE(event);$('.cNFileAttachDrop').hide(0);showCustomizePopup('Attach','test',null,'',true,"+d(s(null!=(o=null!=i[1]?i[1].currentField:i[1])?o.maxlength:o,t))+',undefined,true);"><a href="javascript:void(0);" class="color_3 p10 dB dummyForLeftPanel"><span class="dIB vmiddle mR10 upload-iconAtc"></span>'+d(s(null!=t?t.uservalue:t,t))+"</a></li> "},137:function(e,t,a,l,n){var r=e.escapeExpression;return" <li class=\"p0\" onclick=\"sE(event);$('.cNFileAttachDrop').hide(0);openZDocsLinkDialog('"+r(a.getUserDetail.call(null!=t?t:{},"ZGID",{name:"getUserDetail",hash:{},data:n}))+'\',true);"><a href="javascript:void(0);" class="color_3 p10 dB dummyForLeftPanel"><span class="dIB vmiddle mR10 docs-iconAtc"></span>'+r(e.lambda(null!=t?t.uservalue:t,t))+"</a></li> "},139:function(e,t,a,l,n,r,i){var o,s=e.lambda,d=e.escapeExpression;return' <li class="p0" onclick="sE(event);$(\'.cNFileAttachDrop\').hide(0);crmRelatedList.attachFromTeamDrive(true, '+d(s(null!=(o=null!=i[1]?i[1].currentField:i[1])?o.maxlength:o,t))+');" style="border-top: 0;"><a href="javascript:void(0);" class="color_3 p10 dB dummyForLeftPanel"><span class="dIB vmiddle mR10 svgIcons ico-teamDrive"></span>'+d(s(null!=t?t.uservalue:t,t))+"</a></li> "},141:function(e,t,a,l,n){return' <li class="p0" onclick="sE(event);$(\'.cNFileAttachDrop\').hide(0);openForDocs(\'zdoc\',\'<%= docUrl%>\',null,true);"><a href="javascript:void(0);" class="color_3 p10 dB dummyForLeftPanel"><span class="dIB vmiddle mR10 zohodocs-iconAtc"></span>'+e.escapeExpression(e.lambda(null!=t?t.uservalue:t,t))+"</a></li> "},143:function(e,t,a,l,n){return' <li class="p0" onclick="sE(event);$(\'.cNFileAttachDrop\').hide(0);crmRelatedList.attachGDocs(true);" style="border-top: 0;"><a href="javascript:void(0);" class="color_3 p10 dB dummyForLeftPanel"><span class="dIB vmiddle mR10 googledrive-iconAtc"></span>'+e.escapeExpression(e.lambda(null!=t?t.uservalue:t,t))+"</a></li> "},145:function(e,t,a,l,n){var r;return' <div id="cNFileUploadedListView_'+e.escapeExpression(e.lambda(null!=(r=null!=t?t.currentField:t)?r.fieldid:r,t))+'" class="fileuploaddrop cNFileUploadedListView w100per dN"> <ul class="mL10 p0"></ul> </div> '},147:function(e,t,a,l,n){var r,i=null!=t?t:{},o=e.lambda,s=e.escapeExpression;return" "+(null!=(r=a.ifNotEquals.call(i,null!=(r=null!=t?t.currentField:t)?r.readonly:r,"true",{name:"ifNotEquals",hash:{},fn:e.program(148,n,0),inverse:e.noop,data:n}))?r:"")+" <input"+(null!=(r=a.if_nq.call(i,null!=(r=null!=t?t.currentField:t)?r.readonly:r,"true",{name:"if_nq",hash:{},fn:e.program(150,n,0),inverse:e.noop,data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' value="'+s(o(null!=(r=null!=t?t.currentField:t)?r.defaultvalue:r,t))+'"/> <input type="hidden" data-zcqa="pfEditPop_roleId" name="roleId" id="roleId" value="'+s(o(null!=(r=null!=t?t.currentField:t)?r.defaultid:r,t))+'" ></input> <input type="hidden" data-zcqa="pfEditPop_oldRoleId" name="oldRoleId" id="oldRoleId" value="'+s(o(null!=(r=null!=t?t.currentField:t)?r.defaultid:r,t))+'" ></input> '},148:function(e,t,a,l,n){return' <a data-zcqa="img_slctRole"  hspace="3" onclick="rolesLookUp(this,\'userrole\',\'\',\'frmEditUser\');blockContent(\'roleName_Add\',event);" class="pointer top16 pA r0 addUserIcon" align="absmiddle" border="0" ></a> '},150:function(e,t,a,l,n){return" type=\"text\" readonly=\"true\" onclick=\"rolesLookUp(this,'userrole','','frmEditUser');blockContent('roleName_Add',event);\" data-zcqa=\"pfEditPop_roleName_text\""},152:function(e,t,a,l,n,r,i){var o,s=null!=t?t:{};return' <div class="createSelect newChosenSel"> <select  onclick="sE(event);" data-module ="'+e.escapeExpression(e.lambda(null!=t?t.module:t,t))+'" '+(null!=(o=a.convertObjToKeyValuePair.call(s,null!=(o=null!=t?t.currentField:t)?o.attrObj:o,{name:"convertObjToKeyValuePair",hash:{},data:n}))?o:"")+" "+(null!=(o=a.convertObjToKeyValuePair.call(s,null!=(o=null!=t?t.currentField:t)?o.dataObj:o,{name:"convertObjToKeyValuePair",hash:{},data:n}))?o:"")+"> "+(null!=(o=a.each.call(s,null!=(o=null!=t?t.currentField:t)?o.val:o,{name:"each",hash:{},fn:e.program(153,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" </select> </div> "},153:function(e,t,a,l,n,r,i){var o,s=e.lambda,d=e.escapeExpression;return" <option "+(null!=(o=a.if_eq.call(null!=t?t:{},null!=(o=null!=i[1]?i[1].currentField:i[1])?o.defaultid:o,null!=t?t.defaultId:t,{name:"if_eq",hash:{},fn:e.program(23,n,0,r,i),inverse:e.noop,data:n}))?o:"")+' value="'+d(s(null!=t?t.defaultId:t,t))+'">'+d(s(null!=t?t.content:t,t))+"</option> "},155:function(e,t,a,l,n){var r,i=null!=t?t:{};return' <div class="createSelect newChosenSel firstSal crm-font-regular"> <select onclick="sE(event);"  data-module ="'+e.escapeExpression(e.lambda(null!=t?t.module:t,t))+'" '+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.salDataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.salAttrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' style="width: auto;"> '+(null!=(r=a.if.call(i,null!=(r=null!=t?t.currentField:t)?r.default:r,{name:"if",hash:{},fn:e.program(156,n,0),inverse:e.program(161,n,0),data:n}))?r:"")+" </select> </div> "},156:function(e,t,a,l,n){var r;return" <option selected=selected value="+(null!=(r=a.if.call(null!=t?t:{},null!=(r=null!=(r=null!=(r=null!=t?t.currentField:t)?r.default:r)?r[0]:r)?r.content:r,{name:"if",hash:{},fn:e.program(157,n,0),inverse:e.program(159,n,0),data:n}))?r:"")+">"+e.escapeExpression(e.lambda(null!=(r=null!=(r=null!=(r=null!=t?t.currentField:t)?r.default:r)?r[0]:r)?r.html:r,t))+"</option> "},157:function(e,t,a,l,n){var r;return' "'+e.escapeExpression(e.lambda(null!=(r=null!=(r=null!=(r=null!=t?t.currentField:t)?r.default:r)?r[0]:r)?r.content:r,t))+'" '},159:function(e,t,a,l,n){var r;return' "'+e.escapeExpression(e.lambda(null!=(r=null!=(r=null!=(r=null!=t?t.currentField:t)?r.default:r)?r[0]:r)?r.value:r,t))+'" '},161:function(e,t,a,l,n){var r,i=null!=t?t:{};return" <option "+(null!=(r=a.if.call(i,null!=(r=null!=(r=null!=(r=null!=t?t.currentField:t)?r.val:r)?r[0]:r)?r.default:r,{name:"if",hash:{},fn:e.program(23,n,0),inverse:e.noop,data:n}))?r:"")+" value="+(null!=(r=a.if.call(i,null!=(r=null!=(r=null!=(r=null!=t?t.currentField:t)?r.val:r)?r[0]:r)?r.content:r,{name:"if",hash:{},fn:e.program(162,n,0),inverse:e.program(164,n,0),data:n}))?r:"")+">"+e.escapeExpression(e.lambda(null!=(r=null!=(r=null!=(r=null!=t?t.currentField:t)?r.val:r)?r[0]:r)?r.html:r,t))+"</option> "},162:function(e,t,a,l,n){var r;return' "'+e.escapeExpression(e.lambda(null!=(r=null!=(r=null!=(r=null!=t?t.currentField:t)?r.val:r)?r[0]:r)?r.content:r,t))+'" '},164:function(e,t,a,l,n){var r;return' "'+e.escapeExpression(e.lambda(null!=(r=null!=(r=null!=(r=null!=t?t.currentField:t)?r.val:r)?r[0]:r)?r.value:r,t))+'" '},166:function(e,t,a,l,n){var r;return" "+(null!=(r=a.contains.call(null!=t?t:{},"[143,144,145,36,116,117]",null!=(r=null!=t?t.currentField:t)?r.uitype:r,{name:"contains",hash:{},fn:e.program(167,n,0),inverse:e.noop,data:n}))?r:"")+" "},167:function(e,t,a,l,n){var r;return' <span id="currencySymbol_'+e.escapeExpression(e.lambda(null!=(r=null!=(r=null!=t?t.currentField:t)?r.attrObj:r)?r.id:r,t))+'" class="inpPrefix" style="opacity:0.6;">&nbsp;</span> '},169:function(e,t,a,l,n){var r,i=null!=t?t:{};return' <span style="opacity:0.6;"  class="inpPrefix">@</span> <input type="text" '+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' value="'+e.escapeExpression(e.lambda(null!=(r=null!=t?t.currentField:t)?r.defaultvalue:r,t))+'"></input> '},171:function(e,t,a,l,n){var r,i=null!=t?t:{};return' <input type="text" class="textField w100per" '+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' value="'+e.escapeExpression(e.lambda(null!=(r=null!=t?t.currentField:t)?r.defaultvalue:r,t))+'"></input> '},173:function(e,t,a,l,n){var r;return" "+(null!=(r=a.ifAllMatch.call(null!=t?t:{},null!=t?t.module:t,"=","Calls",null!=(r=null!=t?t.currentField:t)?r.colname:r,"=","CALLDURATION",{name:"ifAllMatch",hash:{},fn:e.program(174,n,0),inverse:e.program(176,n,0),data:n}))?r:"")+" "},174:function(e,t,a,l,n){var r,i=null!=t?t:{},o=e.lambda,s=e.escapeExpression;return' <input type="text"  onclick="sE(event);" '+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' maxlength="3" value="'+s(o(null!=(r=null!=t?t.currentField:t)?r.minsVal:r,t))+'"></input> '+s(a.getI18n.call(i,"crm.label.minutes",{name:"getI18n",hash:{},data:n}))+" "+(null!=(r=a.updateObject.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,"id","Crm_Calls_CALLDURATION_Secs",{name:"updateObject",hash:{},fn:e.program(30,n,0),inverse:e.noop,data:n}))?r:"")+' <input type="text"  onclick="sE(event);" '+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' maxlength="2" value="'+s(o(null!=(r=null!=t?t.currentField:t)?r.secVal:r,t))+'" ></input> '+s(a.getI18n.call(i,"crm.label.seconds",{name:"getI18n",hash:{},data:n}))+" "},176:function(e,t,a,l,n){var r;return" "+(null!=(r=a.ifAllMatch.call(null!=t?t:{},null!=t?t.module:t,"=","Leads",null!=(r=null!=t?t.currentField:t)?r.colname:r,"=","COMPANY",null!=t?t.currentStatus:t,"!=","setup",{name:"ifAllMatch",hash:{},fn:e.program(177,n,0),inverse:e.program(182,n,0),data:n}))?r:"")+" "},177:function(e,t,a,l,n){var r,i=null!=t?t:{};return" <input "+(null!=(r=a.ifNotEquals.call(i,null!=(r=null!=t?t.currentField:t)?r.readonly:r,"true",{name:"ifNotEquals",hash:{},fn:e.program(178,n,0),inverse:e.program(180,n,0),data:n}))?r:"")+' type="text" '+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' value="'+e.escapeExpression(e.lambda(null!=(r=null!=t?t.currentField:t)?r.defaultvalue:r,t))+'"></input> '},178:function(e,t,a,l,n){return' data-search-module="Accounts" '},180:function(e,t,a,l,n){return"readonly=true "},182:function(e,t,a,l,n){var r,i=null!=t?t:{};return' <input type="text" '+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' value="'+e.escapeExpression(e.lambda(null!=(r=null!=t?t.currentField:t)?r.defaultvalue:r,t))+'"></input> '},184:function(e,t,a,l,n){var r;return" "+(null!=(r=a.contains.call(null!=t?t:{},"[786,14,333]",null!=(r=null!=t?t.currentField:t)?r.uitype:r,{name:"contains",hash:{},fn:e.program(185,n,0),inverse:e.program(194,n,0),data:n}))?r:"")+" "},185:function(e,t,a,l,n){var r;return" "+(null!=(r=a.ifAllMatch.call(null!=t?t:{},null!=t?t.module:t,"=","Tasks",null!=(r=null!=t?t.currentField:t)?r.colname:r,"=","REMINDAT",{name:"ifAllMatch",hash:{},fn:e.program(186,n,0),inverse:e.program(189,n,0),data:n}))?r:"")+" "},186:function(e,t,a,l,n){var r,i=null!=t?t:{};return' <div class="reminderSection"> <label class="dIB remindIpLabel vam"> <input type="checkbox" class="greenSwitchCkBox" onclick="crmTasks.createRemindAt(\''+e.escapeExpression(a.encodeJS.call(i,null!=t?t.module:t,{name:"encodeJS",hash:{},data:n}))+"',this)\" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.if.call(i,null!=(r=null!=t?t.currentField:t)?r.defaultvalue:r,{name:"if",hash:{},fn:e.program(187,n,0),inverse:e.noop,data:n}))?r:"")+' ></input> <div class="greenSwitch"> <div class="whiteBall"></div> </div> </label> <div id="CRMTasks_Remind_summary" style="display:none" class="taskSummaryMsg mL10 dIB" onclick="crmTasks.OpenRemindAtDiv()"> <p class="dIB mR10 vam"></p> <span class="dIB doubleDownArrow vam"></span> </div> </div> '},187:function(e,t,a,l,n){return"checked=true"},189:function(e,t,a,l,n){var r;return" "+(null!=(r=a.ifAllMatch.call(null!=t?t:{},null!=t?t.module:t,"=","Tasks",null!=(r=null!=t?t.currentField:t)?r.colname:r,"=","RemindAt_Start_Date1",{name:"ifAllMatch",hash:{},fn:e.program(190,n,0),inverse:e.program(192,n,0),data:n}))?r:"")+" "},190:function(e,t,a,l,n){var r,i=null!=t?t:{},o=e.escapeExpression,s=e.lambda;return' <label class="rbCheckHtml"> <input type="radio" name="reminderOption" onChange="crmTasks.handleReminderOptionChange()" id="Crm_Tasks_RemindAt_Start_Date1_Radio"> <span class="rbHtml mR20"></span> <span class="rbHtmlLb"> <span class="color_6">'+o(a.getI18n.call(i,"on",{name:"getI18n",hash:{},data:n}))+'</span> <input type="text" '+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' value="'+o(s(null!=(r=null!=t?t.currentField:t)?r.defaultvalue:r,t))+'" data-fieldType="dateField" onclick="blockContent(\'Crm_Tasks_RemindAt_Start_Date1_label\',event); event.preventDefault();"></input> <span class="color_6">'+o(a.getI18n.call(i,"crm.label.lowercase.at",{name:"getI18n",hash:{},data:n}))+'</span> <input type="text" '+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.timeDataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.timeAttrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' value="'+o(s(null!=(r=null!=t?t.currentField:t)?r.timeVal:r,t))+'" data-fieldType="timeField"></input> </span> </label> '},192:function(e,t,a,l,n){var r,i=null!=t?t:{},o=e.lambda,s=e.escapeExpression;return' <input type="text" '+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' value="'+s(o(null!=(r=null!=t?t.currentField:t)?r.defaultvalue:r,t))+'" data-fieldType="dateField" onclick="blockContent(\'Crm_Tasks_RemindAt_Start_Date1_label\',event)"></input><span> </span> <input type="text" '+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.timeDataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.timeAttrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' value="'+s(o(null!=(r=null!=t?t.currentField:t)?r.timeVal:r,t))+'" data-fieldType="timeField"></input> '},194:function(e,t,a,l,n){var r;return" "+(null!=(r=a.ifAllMatch.call(null!=t?t:{},null!=t?t.module:t,"=","Tasks",null!=(r=null!=t?t.currentField:t)?r.colname:r,"=","DUEDATE",{name:"ifAllMatch",hash:{},fn:e.program(195,n,0),inverse:e.program(197,n,0),data:n}))?r:"")+" "},195:function(e,t,a,l,n){var r,i=null!=t?t:{};return' <input type="text" '+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' value="'+e.escapeExpression(e.lambda(null!=(r=null!=t?t.currentField:t)?r.defaultvalue:r,t))+'" data-module="Tasks" data-fieldType="dateField" onchange="crmTemplate.modifySelectBox(event,this);"></input> '},197:function(e,t,a,l,n){var r,i=null!=t?t:{};return' <input type="text" '+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' value="'+e.escapeExpression(e.lambda(null!=(r=null!=t?t.currentField:t)?r.defaultvalue:r,t))+'" data-fieldType="dateField"></input> '},199:function(e,t,a,l,n){var r;return" "+(null!=(r=a.ifAnyMatch.call(null!=t?t:{},null!=t?t.module:t,"=","Events",null!=t?t.module:t,"=","Tasks",null!=t?t.module:t,"=","Calls",{name:"ifAnyMatch",hash:{},fn:e.program(200,n,0),inverse:e.program(203,n,0),data:n}))?r:"")+" "},200:function(e,t,a,l,n){var r,i=null!=t?t:{},o=e.lambda,s=e.escapeExpression;return' <input type="text" '+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' value="'+s(o(null!=(r=null!=t?t.currentField:t)?r.defaultvalue:r,t))+'" title="'+s(o(null!=(r=null!=t?t.currentField:t)?r.defaultvalue:r,t))+'" '+(null!=(r=a.ifAnyMatch.call(i,null!=(r=null!=t?t.currentField:t)?r.readonly:r,"=","true",null!=t?t.module:t,"=","Events",{name:"ifAnyMatch",hash:{},fn:e.program(32,n,0),inverse:e.noop,data:n}))?r:"")+" ></input>  "+(null!=(r=a.ifNotEquals.call(i,null!=(r=null!=t?t.currentField:t)?r.readonly:r,"true",{name:"ifNotEquals",hash:{},fn:e.program(201,n,0),inverse:e.noop,data:n}))?r:"")+" "},201:function(e,t,a,l,n){var r;return" "+(null!=(r=a.getLookupImag.call(null!=t?t:{},null!=t?t.module:t,null!=t?t.currentField:t,{name:"getLookupImag",hash:{},fn:e.program(46,n,0),inverse:e.noop,data:n}))?r:"")+" "},203:function(e,t,a,l,n){var r,i=null!=t?t:{};return" <input "+(null!=(r=a.if_eq.call(i,null!=(r=null!=t?t.currentField:t)?r.readonly:r,"true",{name:"if_eq",hash:{},fn:e.program(32,n,0),inverse:e.noop,data:n}))?r:"")+' type="text" '+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' value="'+e.escapeExpression(e.lambda(null!=(r=null!=t?t.currentField:t)?r.defaultvalue:r,t))+'"></input> '+(null!=(r=a.ifNotEquals.call(i,null!=(r=null!=t?t.currentField:t)?r.readonly:r,"true",{name:"ifNotEquals",hash:{},fn:e.program(204,n,0),inverse:e.noop,data:n}))?r:"")+" "},204:function(e,t,a,l,n){var r,i=null!=t?t:{};return' <span class="dIB pR fR dvbcCardDp"> '+(null!=(r=a.getLookupImag.call(i,null!=t?t.module:t,null!=t?t.currentField:t,{name:"getLookupImag",hash:{},fn:e.program(46,n,0),inverse:e.noop,data:n}))?r:"")+" "+(null!=(r=a.getClearLookupImage.call(i,null!=t?t.currentField:t,{name:"getClearLookupImage",hash:{},fn:e.program(46,n,0),inverse:e.noop,data:n}))?r:"")+" "+(null!=(r=a.getLoadLookupImage.call(i,null!=t?t.currentField:t,{name:"getLoadLookupImage",hash:{},fn:e.program(46,n,0),inverse:e.noop,data:n}))?r:"")+" </span> "},206:function(e,t,a,l,n){var r,i=null!=t?t:{};return' <input type="text" '+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' value="'+e.escapeExpression(e.lambda(null!=(r=null!=t?t.currentField:t)?r.defaultvalue:r,t))+'" autocomplete="off"></input> '+(null!=(r=a.isInventoryModule.call(i,null!=t?t.module:t,{name:"isInventoryModule",hash:{},fn:e.program(207,n,0),inverse:e.noop,data:n}))?r:"")+" "+(null!=(r=a.ifNotEquals.call(i,null!=(r=null!=t?t.currentField:t)?r.readonly:r,"true",{name:"ifNotEquals",hash:{},fn:e.program(214,n,0),inverse:e.noop,data:n}))?r:"")+" "},207:function(e,t,a,l,n){var r,i=null!=t?t:{};return" "+(null!=(r=a.ifEquals.call(i,null!=(r=null!=t?t.currentField:t)?r.colname:r,"TAX",{name:"ifEquals",hash:{},fn:e.program(208,n,0),inverse:e.noop,data:n}))?r:"")+" "+(null!=(r=a.ifEquals.call(i,null!=(r=null!=t?t.currentField:t)?r.colname:r,"DISCOUNT",{name:"ifEquals",hash:{},fn:e.program(211,n,0),inverse:e.noop,data:n}))?r:"")+" "},208:function(e,t,a,l,n){var r;return" "+(null!=(r=a.ifNotEquals.call(null!=t?t:{},null!=(r=null!=t?t.currentField:t)?r.readonly:r,"true",{name:"ifNotEquals",hash:{},fn:e.program(209,n,0),inverse:e.noop,data:n}))?r:"")+" "},209:function(e,t,a,l,n){return'<i class="neweditIcon mL5 lineicon dIB pointer mT5" onclick="productDetails.showGrandTaxNewSFLineItemPop(this);sE(event)"></i>'},211:function(e,t,a,l,n){var r;return" "+(null!=(r=a.ifNotEquals.call(null!=t?t:{},null!=(r=null!=t?t.currentField:t)?r.readonly:r,"true",{name:"ifNotEquals",hash:{},fn:e.program(212,n,0),inverse:e.noop,data:n}))?r:"")+" "},212:function(e,t,a,l,n){return'<i class="neweditIcon mL5 lineicon dIB pointer mT5" onclick="productDetails.showGrandDiscNewSFLineItemPop(this);sE(event)"></i>'},214:function(e,t,a,l,n){var r,i=e.lambda,o=e.escapeExpression;return' <div class="fR mR30 calcDomElement"> <span class="resultValue vh" data-zcqa="newCalcVal_'+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.attrObj:r)?r.id:r,t))+'"></span> <span class="informationSource" data-zcqa="newCalInfo_'+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.attrObj:r)?r.id:r,t))+'" onclick="crmTemplate.showCalculatorInfo(this, event); sE(event)"></span> </div>  '},216:function(e,t,a,l,n){var r,i=null!=t?t:{};return" <input "+(null!=(r=a.if_eq.call(i,null!=(r=null!=t?t.currentField:t)?r.readonly:r,"true",{name:"if_eq",hash:{},fn:e.program(32,n,0),inverse:e.noop,data:n}))?r:"")+' type="text" '+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' value="'+e.escapeExpression(e.lambda(null!=(r=null!=t?t.currentField:t)?r.defaultvalue:r,t))+'"></input> '},218:function(e,t,a,l,n){var r;return" "+(null!=(r=a.ifAllMatch.call(null!=t?t:{},null!=(r=null!=t?t.currentField:t)?r.colname:r,"!=","ROLEID",null!=(r=null!=t?t.currentField:t)?r.colname:r,"!=","PROFILEID",{name:"ifAllMatch",hash:{},fn:e.program(219,n,0),inverse:e.noop,data:n}))?r:"")+" "},219:function(e,t,a,l,n){var r,i=null!=t?t:{};return" "+(null!=(r=a.ifNotEquals.call(i,null!=t?t.currentStatus:t,"setup",{name:"ifNotEquals",hash:{},fn:e.program(220,n,0),inverse:e.noop,data:n}))?r:"")+" "+(null!=(r=a.ifNotEquals.call(i,null!=(r=null!=t?t.currentField:t)?r.readonly:r,"true",{name:"ifNotEquals",hash:{},fn:e.program(223,n,0),inverse:e.noop,data:n}))?r:"")+" "},220:function(e,t,a,l,n){var r;return" "+(null!=(r=a.ifAllMatch.call(null!=t?t:{},null!=(r=null!=t?t.currentField:t)?r.colname:r,"=","PRODUCTID",null!=(r=null!=t?t.currentField:t)?r.issubformfield:r,"=","true",{name:"ifAllMatch",hash:{},fn:e.program(221,n,0),inverse:e.program(216,n,0),data:n}))?r:"")+" "},221:function(e,t,a,l,n){var r,i=null!=t?t:{},o=e.lambda,s=e.escapeExpression;return" <textarea "+(null!=(r=a.if_eq.call(i,null!=(r=null!=t?t.currentField:t)?r.readonly:r,"true",{name:"if_eq",hash:{},fn:e.program(32,n,0),inverse:e.noop,data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' value="'+s(o(null!=(r=null!=t?t.currentField:t)?r.defaultvalue:r,t))+'">'+s(o(null!=(r=null!=t?t.currentField:t)?r.defaultvalue:r,t))+"</textarea> "},223:function(e,t,a,l,n){var r,i=null!=t?t:{};return' <span class="dIB pR fR dvbcCardDp '+(null!=(r=a.ifEquals.call(i,null!=(r=null!=t?t.currentField:t)?r.colname:r,"BOOKID",{name:"ifEquals",hash:{},fn:e.program(224,n,0),inverse:e.noop,data:n}))?r:"")+'" '+(null!=(r=a.ifAllMatch.call(i,null!=t?t.currentStatus:t,"=","setup",null!=(r=null!=t?t.currentField:t)?r.colname:r,"=","PRODUCTID",{name:"ifAllMatch",hash:{},fn:e.program(226,n,0),inverse:e.noop,data:n}))?r:"")+"> "+(null!=(r=a.getLookupImag.call(i,null!=t?t.module:t,null!=t?t.currentField:t,{name:"getLookupImag",hash:{},fn:e.program(46,n,0),inverse:e.noop,data:n}))?r:"")+" "+(null!=(r=a.getClearLookupImage.call(i,null!=t?t.currentField:t,{name:"getClearLookupImage",hash:{},fn:e.program(46,n,0),inverse:e.noop,data:n}))?r:"")+" "+(null!=(r=a.getLoadLookupImage.call(i,null!=t?t.currentField:t,{name:"getLoadLookupImage",hash:{},fn:e.program(46,n,0),inverse:e.noop,data:n}))?r:"")+" </span> "},224:function(e,t,a,l,n){return"rightm5 top_30"},226:function(e,t,a,l,n){var r,i=null!=t?t:{};return" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "},228:function(e,t,a,l,n){var r,i=null!=t?t:{};return" "+(null!=(r=a.ifNotEquals.call(i,null!=t?t.currentStatus:t,"setup",{name:"ifNotEquals",hash:{},fn:e.program(229,n,0),inverse:e.noop,data:n}))?r:"")+" "+(null!=(r=a.ifNotEquals.call(i,null!=(r=null!=t?t.currentField:t)?r.readonly:r,"true",{name:"ifNotEquals",hash:{},fn:e.program(201,n,0),inverse:e.noop,data:n}))?r:"")+" "},229:function(e,t,a,l,n){var r,i=null!=t?t:{};return" <input "+(null!=(r=a.ifNotEquals.call(i,null!=(r=null!=t?t.currentField:t)?r.readonly:r,"true",{name:"ifNotEquals",hash:{},fn:e.program(230,n,0),inverse:e.noop,data:n}))?r:"")+' type="text" '+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' value="'+e.escapeExpression(e.lambda(null!=(r=null!=t?t.currentField:t)?r.defaultvalue:r,t))+'" readonly=true></input> '},230:function(e,t,a,l,n){return' data-cid="showLookup"'},232:function(e,t,a,l,n){var r;return" "+(null!=(r=a.each.call(null!=t?t:{},null!=(r=null!=t?t.currentField:t)?r.commentsArr:r,{name:"each",hash:{},fn:e.program(233,n,0),inverse:e.noop,data:n}))?r:"")+" "},233:function(e,t,a,l,n){var r=e.lambda,i=e.escapeExpression;return' <div class="commentSection"> <pre class="value commentText crm-font-regular" style="overflow:hidden;word-wrap: break-word;" wrap="soft">'+i(r(null!=t?t.comment:t,t))+'</pre> <div class="label commentDesc f12 fontSmooth color_7 crm-font-regular" align="right">'+i(r(null!=t?t.commentedBy:t,t))+" "+i(a.getI18n.call(null!=t?t:{},"on",{name:"getI18n",hash:{},data:n}))+" "+i(r(null!=t?t.time:t,t))+"</div> </div> "},235:function(e,t,a,l,n){var r,i=null!=t?t:{},o=e.escapeExpression;return" <crm-phone-field "+(null!=(r=a.if_eq.call(i,"true",null!=(r=null!=t?t.currentField:t)?r.issubformfield:r,{name:"if_eq",hash:{},fn:e.program(236,n,0),inverse:e.noop,data:n}))?r:"")+" form-name='nonLyteCreate' previous-value=\""+o(e.lambda(null!=(r=null!=t?t.currentField:t)?r.defaultvalue:r,t))+'" attrobj="'+o(a.convertObjToString.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToString",hash:{},data:n}))+'" dataobj="'+o(a.convertObjToString.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToString",hash:{},data:n}))+'" ></crm-phone-field> '},236:function(e,t,a,l,n){var r;return'sf-lyte-dom-id="'+e.escapeExpression(e.lambda(null!=(r=null!=(r=null!=t?t.currentField:t)?r.attrObj:r)?r.id:r,t))+'"'},238:function(e,t,a,l,n){var r;return" "+(null!=(r=a.contains.call(null!=t?t:{},"[25,32,37,35,21,33,34,52,127,116,117,19,27]",null!=(r=null!=t?t.currentField:t)?r.uitype:r,{name:"contains",hash:{},fn:e.program(182,n,0),inverse:e.noop,data:n}))?r:"")+" "},240:function(e,t,a,l,n){var r;return" "+(null!=(r=a.ifAllMatch.call(null!=t?t:{},null!=(r=null!=t?t.currentField:t)?r.colname:r,"=","SUBJECT",null!=t?t.module:t,"=","Events",{name:"ifAllMatch",hash:{},fn:e.program(241,n,0),inverse:e.program(243,n,0),data:n}))?r:"")+" "},241:function(e,t,a,l,n){var r,i=null!=t?t:{},o=e.lambda,s=e.escapeExpression;return' <input type="text" onkeyup="Events.changeTitleMessageDiv();" '+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' placeholder="'+s(o(null!=(r=null!=t?t.currentField:t)?r.displaylabel:r,t))+'" value="'+s(o(null!=(r=null!=t?t.currentField:t)?r.defaultvalue:r,t))+'"></input> '},243:function(e,t,a,l,n){var r,i=null!=t?t:{},o=e.lambda,s=e.escapeExpression;return' <input type="text" '+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' placeholder="'+s(o(null!=(r=null!=t?t.currentField:t)?r.displaylabel:r,t))+'" value="'+s(o(null!=(r=null!=t?t.currentField:t)?r.defaultvalue:r,t))+'"></input> '},245:function(e,t,a,l,n){var r;return" "+(null!=(r=a.constructProductDetails.call(null!=t?t:{},t,{name:"constructProductDetails",hash:{},fn:e.program(46,n,0),inverse:e.noop,data:n}))?r:"")+" "},247:function(e,t,a,l,n){var r;return" "+(null!=(r=a.constructPricingDetails.call(null!=t?t:{},t,{name:"constructPricingDetails",hash:{},fn:e.program(46,n,0),inverse:e.noop,data:n}))?r:"")+" "},249:function(e,t,a,l,n,r,i){var o;return" "+(null!=(o=a.each.call(null!=t?t:{},null!=(o=null!=t?t.currentField:t)?o.val:o,{name:"each",hash:{},fn:e.program(250,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "},250:function(e,t,a,l,n,r,i){var o,s=null!=t?t:{},d=e.lambda,u=e.escapeExpression;return' <label class="rbCheckHtml"> <input '+(null!=(o=a.if_eq.call(s,null!=(o=null!=i[1]?i[1].currentField:i[1])?o.defaultvalue:o,null!=t?t.value:t,{name:"if_eq",hash:{},fn:e.program(251,n,0,r,i),inverse:e.noop,data:n}))?o:"")+' id="'+u(d(null!=(o=null!=(o=null!=i[1]?i[1].currentField:i[1])?o.attrObj:o)?o.id:o,t))+'" type="radio" '+(null!=(o=a.convertObjToKeyValuePair.call(s,null!=(o=null!=i[1]?i[1].currentField:i[1])?o.attrObj:o,{name:"convertObjToKeyValuePair",hash:{},data:n}))?o:"")+" "+(null!=(o=a.convertObjToKeyValuePair.call(s,null!=(o=null!=i[1]?i[1].currentField:i[1])?o.dataObj:o,{name:"convertObjToKeyValuePair",hash:{},data:n}))?o:"")+' value="'+u(d(null!=t?t.value:t,t))+'" ><span class="rbHtml"></span><span class="rbHtmlLb mL5">'+(null!=(o=a.if_eq.call(s,"CONSENTMODE",null!=(o=null!=i[1]?i[1].currentField:i[1])?o.colname:o,{name:"if_eq",hash:{},fn:e.program(253,n,0,r,i),inverse:e.program(255,n,0,r,i),data:n}))?o:"")+" </span> </label> "},251:function(e,t,a,l,n){return" checked=true "},253:function(e,t,a,l,n){return" "+e.escapeExpression(e.lambda(null!=t?t.content:t,t))+" "},255:function(e,t,a,l,n){return" "+e.escapeExpression(e.lambda(null!=t?t.html:t,t))+" "},257:function(e,t,a,l,n){var r;return" "+e.escapeExpression(e.lambda(null!=(r=null!=t?t.currentField:t)?r.val:r,t))+" "},259:function(e,t,a,l,n,r,i){var o;return" "+(null!=(o=a.each.call(null!=t?t:{},null!=(o=null!=t?t.currentField:t)?o.val:o,{name:"each",hash:{},fn:e.program(260,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "},260:function(e,t,a,l,n,r,i){var o;return" "+(null!=(o=a.if.call(null!=t?t:{},null!=(o=null!=i[1]?i[1].currentField:i[1])?o.isBusHoliday:o,{name:"if",hash:{},fn:e.program(261,n,0,r,i),inverse:e.program(272,n,0,r,i),data:n}))?o:"")+" "},261:function(e,t,a,l,n,r,i){var o,s=e.lambda,d=e.escapeExpression,u=null!=t?t:{};return' <span class="fL mT0"></span> <label for=\''+d(s(null!=(o=null!=(o=null!=i[1]?i[1].currentField:i[1])?o.attrObj:o)?o.id:o,t))+"_"+d(s(n&&n.index,t))+"' "+(null!=(o=a.if_eq.call(u,null!=i[1]?i[1].module:i[1],"Events",{name:"if_eq",hash:{},fn:e.program(262,n,0,r,i),inverse:e.noop,data:n}))?o:"")+'> <input type="checkbox" '+(null!=(o=a.if_eq.call(u,null!=i[1]?i[1].module:i[1],"Tasks",{name:"if_eq",hash:{},fn:e.program(264,n,0,r,i),inverse:e.noop,data:n}))?o:"")+' onclick="sE(event);" id="'+d(s(null!=(o=null!=(o=null!=i[1]?i[1].currentField:i[1])?o.attrObj:o)?o.id:o,t))+"_"+d(s(n&&n.index,t))+'" '+(null!=(o=a.ifNotEquals.call(u,null!=t?t.currentStatus:t,"setup",{name:"ifNotEquals",hash:{},fn:e.program(266,n,0,r,i),inverse:e.noop,data:n}))?o:"")+' value="'+d(s(null!=t?t.value:t,t))+'" '+(null!=(o=a.convertObjToKeyValuePair.call(u,null!=(o=null!=i[1]?i[1].currentField:i[1])?o.attrObj:o,{name:"convertObjToKeyValuePair",hash:{},data:n}))?o:"")+" "+(null!=(o=a.convertObjToKeyValuePair.call(u,null!=(o=null!=i[1]?i[1].currentField:i[1])?o.dataObj:o,{name:"convertObjToKeyValuePair",hash:{},data:n}))?o:"")+' > <span></span> <p class="dIB pL10 '+(null!=(o=a.if_eq.call(u,null!=i[1]?i[1].module:i[1],"Tasks",{name:"if_eq",hash:{},fn:e.program(268,n,0,r,i),inverse:e.program(270,n,0,r,i),data:n}))?o:"")+'" style="width:87%">'+d(s(null!=t?t.html:t,t))+"</p> </label> "},262:function(e,t,a,l,n){return' class="field_checkbox_text cP" '},264:function(e,t,a,l,n){return' class="chBoxIcon" '},266:function(e,t,a,l,n,r,i){return' onchange=crmTemplate.modifyCheckBox(event,this,"'+e.escapeExpression(e.lambda(null!=i[1]?i[1].module:i[1],t))+'") '},268:function(e,t,a,l,n){return"vam"},270:function(e,t,a,l,n){return"vat"},272:function(e,t,a,l,n,r,i){var o,s=e.lambda,d=e.escapeExpression,u=null!=t?t:{};return' <input type="checkbox"  onclick="sE(event);" id="'+d(s(null!=(o=null!=(o=null!=i[1]?i[1].currentField:i[1])?o.attrObj:o)?o.id:o,t))+"_"+d(s(n&&n.index,t))+'" '+(null!=(o=a.ifNotEquals.call(u,null!=t?t.currentStatus:t,"setup",{name:"ifNotEquals",hash:{},fn:e.program(266,n,0,r,i),inverse:e.noop,data:n}))?o:"")+' value="'+d(s(null!=t?t.value:t,t))+'" '+(null!=(o=a.convertObjToKeyValuePair.call(u,null!=(o=null!=i[1]?i[1].currentField:i[1])?o.attrObj:o,{name:"convertObjToKeyValuePair",hash:{},data:n}))?o:"")+" "+(null!=(o=a.convertObjToKeyValuePair.call(u,null!=(o=null!=i[1]?i[1].currentField:i[1])?o.dataObj:o,{name:"convertObjToKeyValuePair",hash:{},data:n}))?o:"")+' ></input> <span class="fL mT0"></span> <label for=\''+d(s(null!=(o=null!=(o=null!=i[1]?i[1].currentField:i[1])?o.attrObj:o)?o.id:o,t))+"_"+d(s(n&&n.index,t))+"' "+(null!=(o=a.if_eq.call(u,null!=i[1]?i[1].module:i[1],"Events",{name:"if_eq",hash:{},fn:e.program(273,n,0,r,i),inverse:e.noop,data:n}))?o:"")+"> "+d(s(null!=t?t.html:t,t))+"</label> "},273:function(e,t,a,l,n){return' class="field_checkbox_text cP"'},275:function(e,t,a,l,n,r,i){var o;return" "+(null!=(o=a.isPartOf.call(null!=t?t:{},"Events,Appointments",null!=t?t.module:t,{name:"isPartOf",hash:{},fn:e.program(276,n,0,r,i),inverse:e.program(283,n,0,r,i),data:n}))?o:"")+" "},276:function(e,t,a,l,n,r,i){var o;return" "+(null!=(o=a.ifAnyMatch.call(null!=t?t:{},null!=(o=null!=t?t.currentField:t)?o.colname:o,"=","REMINDAT",null!=(o=null!=t?t.currentField:t)?o.colname:o,"=","REMINDER",{name:"ifAnyMatch",hash:{},fn:e.program(277,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "},277:function(e,t,a,l,n,r,i){var o,s=e.escapeExpression,d=null!=t?t:{};return' <div class="selectBoxInput pR" id="eventReminderDiv" data-module ="'+s(e.lambda(null!=t?t.module:t,t))+'" style="display:none;margin-left:-10px" onclick="Events.selectInput(this);sE(event);" onmouseenter="$(this).css(\'border\',\'1px solid #ddd\')" onmouseleave="$(this).css(\'border\',\'\')"> <input type="text" onkeyup="Events.changeVal(this)" onmouseenter="$(this).css(\'border\',\'1px solid #ddd\');$(\'.selectBoxInput\').css(\'border\',\'\');" onmouseleave="$(this).css(\'border\',\'\');sE(event)" onkeypress="return event.charCode >=48 && event.charCode <=57" onclick="this.setSelectionRange(0, this.value.length)" onfocusout="Events.validateTimeNumeralFieldOfReminders(this)" onfocus="Events.setPreviousValue(this, event)" style="display:none" data-value="none" class="selectBoxField dIB vam" maxlength="2" value="" '+(null!=(o=a.convertObjToKeyValuePair.call(d,null!=(o=null!=t?t.currentField:t)?o.attrObj:o,{name:"convertObjToKeyValuePair",hash:{},data:n}))?o:"")+" "+(null!=(o=a.convertObjToKeyValuePair.call(d,null!=(o=null!=t?t.currentField:t)?o.dataObj:o,{name:"convertObjToKeyValuePair",hash:{},data:n}))?o:"")+"></=57> <div class=\"selectOpt dIB vam\" onmouseenter=\"$(this).parent('.selectBoxInput').css('border','1px solid #ddd');\" onmouseleave=\"$(this).parent('.selectBoxInput').css('border','');sE(event);\"> <span class=\"slctOptVal\" style=\"width:100%;padding-left:10px\">"+s(a.getI18n.call(d,"None",{name:"getI18n",hash:{},data:n}))+'</span> </div> <div class="cB"></div> </div> '+(null!=(o=a.each.call(d,null!=(o=null!=t?t.currentField:t)?o.defaultValues:o,{name:"each",hash:{},fn:e.program(278,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.setReminderVars.call(d,null!=(o=null!=t?t.currentField:t)?o.defaultValues:o,{name:"setReminderVars",hash:{},fn:e.program(46,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.isNoneNeeded.call(d,null!=(o=null!=t?t.currentField:t)?o.defaultValues:o,{name:"isNoneNeeded",hash:{},fn:e.program(280,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.constructMultipleRemindersOptions.call(d,null!=(o=null!=t?t.currentField:t)?o.isAllDay:o,{name:"constructMultipleRemindersOptions",hash:{},fn:e.program(46,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "},278:function(e,t,a,l,n,r,i){var o,s=null!=t?t:{};return' <div> <div class="selectBoxInput pR" id="eventReminderDiv'+(null!=(o=a.sum.call(s,n&&n.index,3,{name:"sum",hash:{},fn:e.program(46,n,0,r,i),inverse:e.noop,data:n}))?o:"")+'" data-module ="'+e.escapeExpression(e.lambda(null!=t?t.module:t,t))+'" style="margin-left:-10px" onclick="Events.selectInput(this);sE(event);" onmouseenter="$(this).css(\'border\',\'1px solid #ddd\')" onmouseleave="$(this).css(\'border\',\'\')"> '+(null!=(o=a.getValueForRemInputBoxAndSpan.call(s,t,null!=(o=null!=i[1]?i[1].currentField:i[1])?o.isAllDay:o,null!=(o=null!=(o=null!=i[1]?i[1].currentField:i[1])?o.attrObj:o)?o.id:o,null!=(o=null!=i[1]?i[1].currentField:i[1])?o.attrObj:o,null!=(o=null!=i[1]?i[1].currentField:i[1])?o.dataObj:o,n&&n.index,{name:"getValueForRemInputBoxAndSpan",hash:{},data:n}))?o:"")+" </div> </div> "},280:function(e,t,a,l,n,r,i){var o,s=null!=t?t:{},d=e.lambda,u=e.escapeExpression;return" "+(null!=(o=a.isPreferenceReminderNeeded.call(s,null!=(o=null!=i[1]?i[1].currentField:i[1])?o.defaultValues:o,{name:"isPreferenceReminderNeeded",hash:{},fn:e.program(281,n,0,r,i),inverse:e.noop,data:n}))?o:"")+' <div> <div class="selectBoxInput pR" id="eventReminderDiv1" data-module ="'+u(d(null!=t?t.module:t,t))+'" style="margin-left:-10px" onclick="Events.selectInput(this);sE(event);" onmouseenter="$(this).css(\'border\',\'1px solid #ddd\')" onmouseleave="$(this).css(\'border\',\'\')"> <input type="text" style="display:none" id="'+u(d(null!=(o=null!=(o=null!=t?t.currentField:t)?o.attrObj:o)?o.id:o,t))+'1" onmouseenter="$(this).css(\'border\',\'1px solid #ddd\');$(\'.selectBoxInput\').css(\'border\',\'\');" onmouseleave="$(this).css(\'border\',\'\');sE(event)" onkeyup="Events.changeVal(this)" onkeypress="return event.charCode >=48 && event.charCode <=57" onclick="this.setSelectionRange(0, this.value.length)" onfocusout="Events.validateTimeNumeralFieldOfReminders(this)" onfocus="Events.setPreviousValue(this, event)" data-value="none" class="selectBoxField dIB vam" maxlength="2" value="" '+(null!=(o=a.convertObjToKeyValuePair.call(s,null!=(o=null!=t?t.currentField:t)?o.attrObj:o,{name:"convertObjToKeyValuePair",hash:{},data:n}))?o:"")+" "+(null!=(o=a.convertObjToKeyValuePair.call(s,null!=(o=null!=t?t.currentField:t)?o.dataObj:o,{name:"convertObjToKeyValuePair",hash:{},data:n}))?o:"")+"></=57> <div class=\"selectOpt dIB vam\" onmouseenter=\"$(this).parent('.selectBoxInput').css('border','1px solid #ddd');\" onmouseleave=\"$(this).parent('.selectBoxInput').css('border','');sE(event);\"> <span class=\"slctOptVal\" style=\"width:100%;padding-left:10px;\">"+u(a.getI18n.call(s,"None",{name:"getI18n",hash:{},data:n}))+'</span> </div> <div class="cB"></div> </div> </div> '},281:function(e,t,a,l,n){var r;return' <div> <div class="selectBoxInput pR" id="eventReminderDiv2" data-module ="'+e.escapeExpression(e.lambda(null!=t?t.module:t,t))+'" style="margin-left:-10px" onclick="Events.selectInput(this);sE(event);" onmouseenter="$(this).css(\'border\',\'1px solid #ddd\')" onmouseleave="$(this).css(\'border\',\'\')"> '+(null!=(r=a.getValueForRemInputBoxAndSpan.call(null!=t?t:{},void 0,!1,null!=(r=null!=(r=null!=t?t.currentField:t)?r.attrObj:r)?r.id:r,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,-1,{name:"getValueForRemInputBoxAndSpan",hash:{},data:n}))?r:"")+" </div> </div> "},283:function(e,t,a,l,n,r,i){var o,s=null!=t?t:{};return' <span id="eventRemindAtSpan"> <div class="createSelect newChosenSel"> <select  onclick="sE(event);" data-module ="'+e.escapeExpression(e.lambda(null!=t?t.module:t,t))+'" '+(null!=(o=a.convertObjToKeyValuePair.call(s,null!=(o=null!=t?t.currentField:t)?o.attrObj:o,{name:"convertObjToKeyValuePair",hash:{},data:n}))?o:"")+" "+(null!=(o=a.convertObjToKeyValuePair.call(s,null!=(o=null!=t?t.currentField:t)?o.dataObj:o,{name:"convertObjToKeyValuePair",hash:{},data:n}))?o:"")+"> "+(null!=(o=a.each.call(s,null!=(o=null!=t?t.currentField:t)?o.val:o,{name:"each",hash:{},fn:e.program(284,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" </select> </div> </span> "},284:function(e,t,a,l,n,r,i){var o,s=null!=t?t:{};return" <option "+(null!=(o=a.if_eq.call(s,null!=(o=null!=i[1]?i[1].currentField:i[1])?o.defaultvalue:o,null!=t?t.value:t,{name:"if_eq",hash:{},fn:e.program(23,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" value="+(null!=(o=a.if.call(s,null!=t?t.content:t,{name:"if",hash:{},fn:e.program(6,n,0,r,i),inverse:e.program(8,n,0,r,i),data:n}))?o:"")+">"+e.escapeExpression(e.lambda(null!=t?t.html:t,t))+"</option> "},286:function(e,t,a,l,n){var r,i=e.lambda,o=e.escapeExpression;return" <div> "+o(i(null!=(r=null!=t?t.currentField:t)?r.defaultValue:r,t))+' <div class="selectBoxInput pR" id="eventPartReminderDiv" data-module ="'+o(i(null!=t?t.module:t,t))+'" style="margin-left:-10px" onclick="Events.selectInput(this);sE(event);" onmouseenter="$(this).css(\'border\',\'1px solid #ddd\')" onmouseleave="$(this).css(\'border\',\'\')"> '+(null!=(r=a.ifNotEquals.call(null!=t?t:{},"",null!=(r=null!=t?t.currentField:t)?r.defaultvalue:r,{name:"ifNotEquals",hash:{},fn:e.program(287,n,0),inverse:e.program(289,n,0),data:n}))?r:"")+' <div class="cB"></div> </div> </div> '},287:function(e,t,a,l,n){var r;return" "+(null!=(r=a.getValueForRemInputBoxAndSpanRemInv.call(null!=t?t:{},null!=(r=null!=t?t.currentField:t)?r.defaultvalue:r,null!=(r=null!=t?t.currentField:t)?r.isAllDay:r,null!=(r=null!=(r=null!=t?t.currentField:t)?r.attrObj:r)?r.id:r,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"getValueForRemInputBoxAndSpanRemInv",hash:{},data:n}))?r:"")+" "},289:function(e,t,a,l,n){var r;return" "+(null!=(r=a.getValueForRemInputBoxAndSpanRemInv.call(null!=t?t:{},"None",null!=(r=null!=t?t.currentField:t)?r.isAllDay:r,null!=(r=null!=(r=null!=t?t.currentField:t)?r.attrObj:r)?r.id:r,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"getValueForRemInputBoxAndSpanRemInv",hash:{},data:n}))?r:"")+" "},291:function(e,t,a,l,n,r,i){var o;return" "+(null!=(o=a.ifAllMatch.call(null!=t?t:{},null!=(o=null!=t?t.currentField:t)?o.uitype:o,"=","41",null!=t?t.module:t,"=","Events",{name:"ifAllMatch",hash:{},fn:e.program(292,n,0,r,i),inverse:e.program(299,n,0,r,i),data:n}))?o:"")+" "},292:function(e,t,a,l,n){var r,i=null!=t?t:{},o=e.escapeExpression;return' <span class="rec vmiddle p0" '+(null!=(r=a.if_eq.call(i,null!=t?t.currentStatus:t,"setup",{name:"if_eq",hash:{},fn:e.program(293,n,0),inverse:e.program(295,n,0),data:n}))?r:"")+' style="white-space:normal;padding:2px;background:#fafafa;display:inline-block;min-width:70px;max-width:140px" '+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" >"+o(a.getI18n.call(i,"None",{name:"getI18n",hash:{},data:n}))+'</span> <a href="javascript:void(0);" class="createlink p0" '+(null!=(r=a.if_nq.call(i,null!=t?t.currentStatus:t,"setup",{name:"if_nq",hash:{},fn:e.program(297,n,0),inverse:e.noop,data:n}))?r:"")+"> "+o(a.getI18n.call(i,"crm.button.add",{name:"getI18n",hash:{},data:n}))+" </a> "},293:function(e,t,a,l,n){var r;return'id="Crm_Events_setup_'+e.escapeExpression(e.lambda(null!=(r=null!=t?t.currentField:t)?r.colname:r,t))+'" '},295:function(e,t,a,l,n){var r;return' id="Crm_Events_'+e.escapeExpression(e.lambda(null!=(r=null!=t?t.currentField:t)?r.colname:r,t))+'" '},297:function(e,t,a,l,n){return' onclick="Events.showAddParticipants()" '},299:function(e,t,a,l,n,r,i){var o;return null!=(o=a.ifAllMatch.call(null!=t?t:{},null!=(o=null!=t?t.currentField:t)?o.colname:o,"=","OTHERSERVICE",null!=t?t.module:t,"=","Consents",{name:"ifAllMatch",hash:{},fn:e.program(300,n,0,r,i),inverse:e.program(303,n,0,r,i),data:n}))?o:""},300:function(e,t,a,l,n,r,i){var o,s=null!=t?t:{};return' <div class="createSelect newChosenSel"> <select  onclick="sE(event);" data-module ="'+e.escapeExpression(e.lambda(null!=t?t.module:t,t))+'" '+(null!=(o=a.convertObjToKeyValuePair.call(s,null!=(o=null!=t?t.currentField:t)?o.attrObj:o,{name:"convertObjToKeyValuePair",hash:{},data:n}))?o:"")+" "+(null!=(o=a.convertObjToKeyValuePair.call(s,null!=(o=null!=t?t.currentField:t)?o.dataObj:o,{name:"convertObjToKeyValuePair",hash:{},data:n}))?o:"")+"> "+(null!=(o=a.each.call(s,null!=(o=null!=t?t.currentField:t)?o.val:o,{name:"each",hash:{},fn:e.program(301,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" </select> "},301:function(e,t,a,l,n,r,i){var o,s=e.lambda,d=e.escapeExpression;return" <option "+(null!=(o=a.if_eq.call(null!=t?t:{},null!=(o=null!=i[1]?i[1].currentField:i[1])?o.defaultvalue:o,null!=t?t.value:t,{name:"if_eq",hash:{},fn:e.program(23,n,0,r,i),inverse:e.noop,data:n}))?o:"")+' value="'+d(s(null!=t?t.value:t,t))+'">'+d(s(null!=t?t.content:t,t))+"</option> "},303:function(e,t,a,l,n){var r;return" "+(null!=(r=a.ifAllMatch.call(null!=t?t:{},null!=(r=null!=t?t.currentField:t)?r.uitype:r,"=","123",null!=t?t.module:t,"=","Events",{name:"ifAllMatch",hash:{},fn:e.program(304,n,0),inverse:e.program(307,n,0),data:n}))?r:"")+" "},304:function(e,t,a,l,n){var r,i=null!=t?t:{},o=e.escapeExpression;return' <span class="rec vmiddle" '+(null!=(r=a.if_eq.call(i,null!=t?t.currentStatus:t,"setup",{name:"if_eq",hash:{},fn:e.program(293,n,0),inverse:e.program(295,n,0),data:n}))?r:"")+' style="white-space:normal;padding:2px;background:#fafafa;display:inline-block;min-width:70px;max-width:190px" '+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.if_nq.call(i,null!=t?t.currentStatus:t,"setup",{name:"if_nq",hash:{},fn:e.program(305,n,0),inverse:e.noop,data:n}))?r:"")+" >"+o(a.getI18n.call(i,"None",{name:"getI18n",hash:{},data:n}))+'</span> <a class="mlink" href="javascript:void(0);" '+(null!=(r=a.if_nq.call(i,null!=t?t.currentStatus:t,"setup",{name:"if_nq",hash:{},fn:e.program(305,n,0),inverse:e.noop,data:n}))?r:"")+"> "+o(a.getI18n.call(i,"crm.label.change",{name:"getI18n",hash:{},data:n}))+"&nbsp;&nbsp; </a> "},305:function(e,t,a,l,n){return' onclick="Events.showRecurringActivity()" '},307:function(e,t,a,l,n){var r;return" "+(null!=(r=a.ifAllMatch.call(null!=t?t:{},null!=(r=null!=t?t.currentField:t)?r.uitype:r,"=","123",null!=t?t.module:t,"=","Tasks",{name:"ifAllMatch",hash:{},fn:e.program(308,n,0),inverse:e.program(310,n,0),data:n}))?r:"")+" "},308:function(e,t,a,l,n){var r,i=null!=t?t:{};return' <label class="dIB vam"> <input type="checkbox" disabled class="greenSwitchCkBox" onClick="crmTemplate.modifyCheckBox(event,this,\''+e.escapeExpression(a.encodeJS.call(i,null!=t?t.module:t,{name:"encodeJS",hash:{},data:n}))+"')\" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.if.call(i,null!=(r=null!=t?t.currentField:t)?r.defaultvalue:r,{name:"if",hash:{},fn:e.program(187,n,0),inverse:e.noop,data:n}))?r:"")+'> <div class="greenSwitch" onmouseenter="crmTasks.showRecurDisableTooltip(this)" onmouseleave="crmTasks.hideRecurDisableTooltip()"> <div class="whiteBall"></div> </div> </label> <div id="CRMTasks_Recurring_summary" style="display:none" class="taskSummaryMsg mL10 dIB" onclick="crmTasks.openRecurringDiv()"> <p class="dIB mR10 vam"></p> <span class="dIB doubleDownArrow vam"></span> </div> '},310:function(e,t,a,l,n){var r,i=null!=t?t:{};return' <input type="checkbox"  onclick="sE(event);" '+(null!=(r=a.ifNotEquals.call(i,null!=t?t.currentStatus:t,"setup",{name:"ifNotEquals",hash:{},fn:e.program(311,n,0),inverse:e.noop,data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" > <span></span>"+(null!=(r=a.ifNotEquals.call(i,null!=t?t.position:t,"clone",{name:"ifNotEquals",hash:{},fn:e.program(313,n,0),inverse:e.noop,data:n}))?r:"")+" "},311:function(e,t,a,l,n){return' onchange=crmTemplate.modifyCheckBox(event,this,"'+e.escapeExpression(e.lambda(null!=t?t.module:t,t))+'") '},313:function(e,t,a,l,n){var r;return null!=(r=a.ifAllMatch.call(null!=t?t:{},null!=(r=null!=t?t.currentField:t)?r.colname:r,"=","EMAILOPTOUT",null!=(r=null!=(r=null!=t?t.currentField:t)?r.attrObj:r)?r.checked:r,"=",!0,{name:"ifAllMatch",hash:{},fn:e.program(314,n,0),inverse:e.noop,data:n}))?r:""},314:function(e,t,a,l,n){var r;return null!=(r=a.if.call(null!=t?t:{},null!=(r=null!=(r=null!=t?t.currentField:t)?r.dataObj:r)?r["data-param"]:r,{name:"if",hash:{},fn:e.program(315,n,0),inverse:e.noop,data:n}))?r:""},315:function(e,t,a,l,n){var r;return"<i class='unsubInfo dN' data-param=\""+e.escapeExpression(e.lambda(null!=(r=null!=(r=null!=t?t.currentField:t)?r.dataObj:r)?r["data-param"]:r,t))+"\" onmouseover='detailView.showUnsubInfoMsgTooltip(this);' onclick='sE(event);' onmouseout='crmui.hideTooltip();'></i>"},317:function(e,t,a,l,n){var r,i=null!=t?t:{};return' <div class="createSelect newChosenSel"> <select  onclick="sE(event);" data-module ="'+e.escapeExpression(e.lambda(null!=t?t.module:t,t))+'" '+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" > "+(null!=(r=a.if.call(i,null!=(r=null!=t?t.currentField:t)?r.default:r,{name:"if",hash:{},fn:e.program(318,n,0),inverse:e.program(320,n,0),data:n}))?r:"")+" </select> </div> "},318:function(e,t,a,l,n){var r,i=e.lambda,o=e.escapeExpression;return' <option selected=selected value="'+o(i(null!=(r=null!=(r=null!=(r=null!=t?t.currentField:t)?r.default:r)?r[0]:r)?r.value:r,t))+'" data-fcCategory="'+o(i(null!=(r=null!=(r=null!=(r=null!=t?t.currentField:t)?r.default:r)?r[0]:r)?r.fcCategory:r,t))+'" data-fctype="'+o(i(null!=(r=null!=(r=null!=(r=null!=t?t.currentField:t)?r.default:r)?r[0]:r)?r.fctype:r,t))+'">'+o(i(null!=(r=null!=(r=null!=(r=null!=t?t.currentField:t)?r.default:r)?r[0]:r)?r.html:r,t))+"</option> "},320:function(e,t,a,l,n){var r,i=e.lambda,o=e.escapeExpression;return' <option selected=selected value="'+o(i(null!=(r=null!=(r=null!=(r=null!=t?t.currentField:t)?r.val:r)?r[0]:r)?r.value:r,t))+'" data-fcCategory="'+o(i(null!=(r=null!=(r=null!=(r=null!=t?t.currentField:t)?r.val:r)?r[0]:r)?r.fcCategory:r,t))+'" data-fctype="'+o(i(null!=(r=null!=(r=null!=(r=null!=t?t.currentField:t)?r.default:r)?r[0]:r)?r.fctype:r,t))+'">'+o(i(null!=(r=null!=(r=null!=(r=null!=t?t.currentField:t)?r.val:r)?r[0]:r)?r.html:r,t))+"</option> "},322:function(e,t,a,l,n,r,i){var o;return" "+(null!=(o=a.if.call(null!=t?t:{},null!=t?t.isClientAccount:t,{name:"if",hash:{},fn:e.program(323,n,0,r,i),inverse:e.program(330,n,0,r,i),data:n}))?o:"")+" "},323:function(e,t,a,l,n,r,i){var o;return" "+(null!=(o=a.each.call(null!=t?t:{},null!=(o=null!=t?t.currentField:t)?o.val:o,{name:"each",hash:{},fn:e.program(324,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "},324:function(e,t,a,l,n,r,i){var o;return" "+(null!=(o=a.ifEquals.call(null!=t?t:{},null!=t?t.content:t,"Portal",{name:"ifEquals",hash:{},fn:e.program(325,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "},325:function(e,t,a,l,n,r,i){var o,s=null!=t?t:{},d=e.lambda,u=e.escapeExpression;return' <label class="rbCheckHtml"> <input '+(null!=(o=a.ifEquals.call(s,null!=t?t.content:t,"Portal",{name:"ifEquals",hash:{},fn:e.program(326,n,0,r,i),inverse:e.noop,data:n}))?o:"")+(null!=(o=a.ifNotEquals.call(s,null!=t?t.content:t,"Portal",{name:"ifNotEquals",hash:{},fn:e.program(328,n,0,r,i),inverse:e.noop,data:n}))?o:"")+' id="'+u(d(null!=(o=null!=(o=null!=i[1]?i[1].currentField:i[1])?o.attrObj:o)?o.id:o,t))+'" type="radio" '+(null!=(o=a.convertObjToKeyValuePair.call(s,null!=(o=null!=i[1]?i[1].currentField:i[1])?o.attrObj:o,{name:"convertObjToKeyValuePair",hash:{},data:n}))?o:"")+" "+(null!=(o=a.convertObjToKeyValuePair.call(s,null!=(o=null!=i[1]?i[1].currentField:i[1])?o.dataObj:o,{name:"convertObjToKeyValuePair",hash:{},data:n}))?o:"")+' value="'+u(d(null!=t?t.content:t,t))+'" name="'+u(d(null!=(o=null!=i[1]?i[1].currentField:i[1])?o.label:o,t))+'"><span class="rbHtml"></span></span><span class="rbHtmlLb mL5">'+u(a.getI18n.call(s,null!=t?t.html:t,{name:"getI18n",hash:{},data:n}))+"</span></input> </label> "},326:function(e,t,a,l,n){return' checked = "true"'},328:function(e,t,a,l,n){return'disabled="true"'},330:function(e,t,a,l,n,r,i){var o;return" "+(null!=(o=a.each.call(null!=t?t:{},null!=(o=null!=t?t.currentField:t)?o.val:o,{name:"each",hash:{},fn:e.program(331,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "},331:function(e,t,a,l,n,r,i){var o,s=null!=t?t:{},d=e.lambda,u=e.escapeExpression;return' <label class="rbCheckHtml"> <input '+(null!=(o=a.if_eq.call(s,null!=t?t.default:t,"true",{name:"if_eq",hash:{},fn:e.program(332,n,0,r,i),inverse:e.noop,data:n}))?o:"")+' id="'+u(d(null!=(o=null!=(o=null!=i[1]?i[1].currentField:i[1])?o.attrObj:o)?o.id:o,t))+'" type="radio" '+(null!=(o=a.convertObjToKeyValuePair.call(s,null!=(o=null!=i[1]?i[1].currentField:i[1])?o.attrObj:o,{name:"convertObjToKeyValuePair",hash:{},data:n}))?o:"")+" "+(null!=(o=a.convertObjToKeyValuePair.call(s,null!=(o=null!=i[1]?i[1].currentField:i[1])?o.dataObj:o,{name:"convertObjToKeyValuePair",hash:{},data:n}))?o:"")+' value="'+u(d(null!=t?t.content:t,t))+'" name="'+u(d(null!=(o=null!=i[1]?i[1].currentField:i[1])?o.label:o,t))+'"><span class="rbHtml"></span></span><span class="rbHtmlLb mL5">'+u(a.getI18n.call(s,null!=t?t.html:t,{name:"getI18n",hash:{},data:n}))+"</span></input> </label> "},332:function(e,t,a,l,n){return' checked = "true" '},334:function(e,t,a,l,n,r,i){var o,s=null!=t?t:{};return" "+(null!=(o=a.if_eq.call(s,null!=(o=null!=t?t.currentField:t)?o.uitype:o,"82",{name:"if_eq",hash:{},fn:e.program(335,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.if_eq.call(s,"132",null!=(o=null!=t?t.currentField:t)?o.uitype:o,{name:"if_eq",hash:{},fn:e.program(337,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.if_eq.call(s,null!=(o=null!=t?t.currentField:t)?o.uitype:o,"81",{name:"if_eq",hash:{},fn:e.program(345,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.contains.call(s,"[2,100,28,42,39,96]",null!=(o=null!=t?t.currentField:t)?o.uitype:o,{name:"contains",hash:{},fn:e.program(347,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "},335:function(e,t,a,l,n){var r,i=e.lambda,o=e.escapeExpression,s=null!=t?t:{};return' <div class="createSelect newChosenSel"> <select data-module ="'+o(i(null!=t?t.module:t,t))+'" onchange="CSU.chooseServiceTimeOption(this)" custom_time ="'+o(i(null!=(r=null!=t?t.currentField:t)?r.custom_time:r,t))+'" '+(null!=(r=a.convertObjToKeyValuePair.call(s,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(s,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+"> "+(null!=(r=a.if.call(s,null!=(r=null!=t?t.currentField:t)?r.default:r,{name:"if",hash:{},fn:e.program(156,n,0),inverse:e.program(161,n,0),data:n}))?r:"")+" </select> </div> "},337:function(e,t,a,l,n,r,i){var o,s=e.lambda,d=e.escapeExpression,u=null!=t?t:{};return' <div class="lookupWithprefix"> <div id = "multimodlookup" class="createSelect newChosenSel firstSal crm-font-regular"> <select data-module ="'+d(s(null!=t?t.module:t,t))+'"   onchange="crmTemplate.setRelatedTo(this)" '+(null!=(o=a.convertObjToKeyValuePair.call(u,null!=(o=null!=t?t.currentField:t)?o.attrObj:o,{name:"convertObjToKeyValuePair",hash:{},data:n}))?o:"")+" "+(null!=(o=a.convertObjToKeyValuePair.call(u,null!=(o=null!=t?t.currentField:t)?o.dataObj:o,{name:"convertObjToKeyValuePair",hash:{},data:n}))?o:"")+"> "+(null!=(o=a.isNotEmpty.call(u,null!=(o=null!=t?t.currentField:t)?o.defaultvalue1:o,{name:"isNotEmpty",hash:{},fn:e.program(338,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.each.call(u,null!=(o=null!=t?t.currentField:t)?o.multiModuleLookup:o,{name:"each",hash:{},fn:e.program(341,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" </select> </div> <div> <input "+(null!=(o=a.if_eq.call(u,null!=(o=null!=t?t.currentField:t)?o.readonly:o,"true",{name:"if_eq",hash:{},fn:e.program(32,n,0,r,i),inverse:e.noop,data:n}))?o:"")+' class = "textField"type="text" '+(null!=(o=a.convertObjToKeyValuePair.call(u,null!=(o=null!=t?t.currentField:t)?o.relatedToAttrObj:o,{name:"convertObjToKeyValuePair",hash:{},data:n}))?o:"")+" "+(null!=(o=a.convertObjToKeyValuePair.call(u,null!=(o=null!=t?t.currentField:t)?o.relatedToDataObj:o,{name:"convertObjToKeyValuePair",hash:{},data:n}))?o:"")+' value="'+d(s(null!=(o=null!=t?t.currentField:t)?o.defaultvalue2:o,t))+'"></input> '+(null!=(o=a.ifNotEquals.call(u,null!=(o=null!=t?t.currentField:t)?o.readonly:o,"true",{name:"ifNotEquals",hash:{},fn:e.program(343,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" </div> "},338:function(e,t,a,l,n){var r;return" "+(null!=(r=a.if_eq.call(null!=t?t:{},!0,null!=(r=null!=t?t.currentField:t)?r.pastMultiModuleRecord:r,{name:"if_eq",hash:{},fn:e.program(339,n,0),inverse:e.noop,data:n}))?r:"")+" "},339:function(e,t,a,l,n){var r,i=e.lambda,o=e.escapeExpression;return' <option selected=selected disabled="disabled" data-value-disabled="'+o(i(null!=(r=null!=t?t.currentField:t)?r.defaultvalue1:r,t))+'"  data-modulename-disabled="'+o(i(null!=(r=null!=t?t.currentField:t)?r.lookupmodule:r,t))+'" value="'+o(i(null!=(r=null!=t?t.currentField:t)?r.lookupmodule:r,t))+'">'+o(a.getPluralModuleLabel.call(null!=t?t:{},null!=(r=null!=t?t.currentField:t)?r.lookupmodule:r,{name:"getPluralModuleLabel",hash:{},data:n}))+"</option> "},341:function(e,t,a,l,n,r,i){var o,s=null!=t?t:{},d=e.escapeExpression;return" <option "+(null!=(o=a.if_eq.call(s,null!=(o=null!=i[1]?i[1].currentField:i[1])?o.lookupmodule:o,null!=t?t.module_name:t,{name:"if_eq",hash:{},fn:e.program(23,n,0,r,i),inverse:e.noop,data:n}))?o:"")+' value="'+d(e.lambda(null!=t?t.module_name:t,t))+'"> '+d(a.getPluralModuleLabel.call(s,null!=t?t.module_name:t,{name:"getPluralModuleLabel",hash:{},data:n}))+"</option> "},343:function(e,t,a,l,n){var r,i=null!=t?t:{};return' <span class="dIB pR fR"> '+(null!=(r=a.getLookupImag.call(i,null!=t?t.module:t,null!=t?t.currentField:t,{name:"getLookupImag",hash:{},fn:e.program(46,n,0),inverse:e.noop,data:n}))?r:"")+" "+(null!=(r=a.getClearLookupImage.call(i,null!=t?t.currentField:t,{name:"getClearLookupImage",hash:{},fn:e.program(46,n,0),inverse:e.noop,data:n}))?r:"")+" "+(null!=(r=a.getLoadLookupImage.call(i,null!=t?t.currentField:t,{name:"getLoadLookupImage",hash:{},fn:e.program(46,n,0),inverse:e.noop,data:n}))?r:"")+" </span> "},345:function(e,t,a,l,n){var r,i=null!=t?t:{},o=e.escapeExpression;return' <div class="customDate"> <div class="customDatefield clearFix pR"> <input class="fL" type="text" placeholder="'+o(a.getUserDatePattern.call(i,{name:"getUserDatePattern",hash:{},data:n}))+'" arr_date ="'+o(e.lambda(null!=(r=null!=t?t.currentField:t)?r.arrDate:r,t))+'" '+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+'  data-fieldType="dateField" onblur="CSU.enableAdddate(this)" onchange="CSU.enableAdddate(this);CSU.validateDate(this);"> <a id="addDate_1" class="svgIcons dIB ico_plus-lg mL10 vam fR mT8" onclick="CSU.addDateField(this)"></a> </div> </div> <div class="infoAlert_services dN mT10"> <span class="svgIcons ico-warning-small2 dIB vam op5"></span> <span class="dIB mL10 vam color_6 f12">You can add a maximum of 20 dates</span> </div> '},347:function(e,t,a,l,n,r,i){var o;return" "+(null!=(o=a.if_eq.call(null!=t?t:{},null!=(o=null!=t?t.currentField:t)?o.uitype:o,"39",{name:"if_eq",hash:{},fn:e.program(348,n,0,r,i),inverse:e.program(351,n,0,r,i),data:n}))?o:"")+" "},348:function(e,t,a,l,n){var r,i=null!=t?t:{};return' <div class="createSelect newChosenSel"> <select  onclick="sE(event);" data-module ="'+e.escapeExpression(e.lambda(null!=t?t.module:t,t))+'" '+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+"> "+(null!=(r=a.if.call(i,null!=(r=null!=t?t.currentField:t)?r.default:r,{name:"if",hash:{},fn:e.program(349,n,0),inverse:e.program(161,n,0),data:n}))?r:"")+" </select> </div> "},349:function(e,t,a,l,n){var r;return" <option selected=selected  value="+(null!=(r=a.if.call(null!=t?t:{},null!=(r=null!=(r=null!=(r=null!=t?t.currentField:t)?r.default:r)?r[0]:r)?r.content:r,{name:"if",hash:{},fn:e.program(157,n,0),inverse:e.program(159,n,0),data:n}))?r:"")+">"+e.escapeExpression(e.lambda(null!=(r=null!=(r=null!=(r=null!=t?t.currentField:t)?r.default:r)?r[0]:r)?r.html:r,t))+"</option> "},351:function(e,t,a,l,n,r,i){var o;return" "+(null!=(o=a.if_eq.call(null!=t?t:{},null!=(o=null!=t?t.currentField:t)?o.uitype:o,"28",{name:"if_eq",hash:{},fn:e.program(352,n,0,r,i),inverse:e.program(355,n,0,r,i),data:n}))?o:"")+" "},352:function(e,t,a,l,n){var r,i=null!=t?t:{};return' <div class="createSelect uiTwoEight newChosenSel vam"> <select  data-module ="'+e.escapeExpression(e.lambda(null!=t?t.module:t,t))+'" '+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+"> "+(null!=(r=a.each.call(i,null!=(r=null!=t?t.currentField:t)?r.val:r,{name:"each",hash:{},fn:e.program(353,n,0),inverse:e.noop,data:n}))?r:"")+" </select> </div> "},353:function(e,t,a,l,n){var r,i=null!=t?t:{};return" <option "+(null!=(r=a.if.call(i,null!=t?t.default:t,{name:"if",hash:{},fn:e.program(23,n,0),inverse:e.noop,data:n}))?r:"")+" value="+(null!=(r=a.if.call(i,null!=t?t.content:t,{name:"if",hash:{},fn:e.program(6,n,0),inverse:e.program(8,n,0),data:n}))?r:"")+">"+e.escapeExpression(e.lambda(null!=t?t.html:t,t))+"</option> "},355:function(e,t,a,l,n,r,i){var o;return" "+(null!=(o=a.isPartOf.call(null!=t?t:{},"100,96",null!=(o=null!=t?t.currentField:t)?o.uitype:o,{name:"isPartOf",hash:{},fn:e.program(356,n,0,r,i),inverse:e.program(366,n,0,r,i),data:n}))?o:"")+" "},356:function(e,t,a,l,n){var r;return" "+(null!=(r=a.ifAllMatch.call(null!=t?t:{},null!=t?t.module:t,"=","Tasks",null!=(r=null!=t?t.currentField:t)?r.colname:r,"=","RECURRING_WEEKLY_DAYS",{name:"ifAllMatch",hash:{},fn:e.program(357,n,0),inverse:e.program(361,n,0),data:n}))?r:"")+" "},357:function(e,t,a,l,n){var r,i=null!=t?t:{};return" <div "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+"> "+(null!=(r=a.each.call(i,null!=(r=null!=t?t.currentField:t)?r.val:r,{name:"each",hash:{},fn:e.program(358,n,0),inverse:e.noop,data:n}))?r:"")+" </div> "},358:function(e,t,a,l,n){var r,i=e.lambda,o=e.escapeExpression;return' <div class="dIB mR5"> <label> <input class="circleInput" '+(null!=(r=a.if.call(null!=t?t:{},null!=t?t.default:t,{name:"if",hash:{},fn:e.program(359,n,0),inverse:e.noop,data:n}))?r:"")+' value="'+o(i(null!=t?t.content:t,t))+'" type="checkbox"> <div class="circleInputSpan">'+o(i(null!=t?t.html:t,t))+"</div> </label> </div> "},359:function(e,t,a,l,n){return"checked"},361:function(e,t,a,l,n){var r,i=null!=t?t:{};return' <div class="mlSelect"> <select  onclick="sE(event);" data-module ="'+e.escapeExpression(e.lambda(null!=t?t.module:t,t))+'" '+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+"> "+(null!=(r=a.if.call(i,null!=(r=null!=t?t.currentField:t)?r.default:r,{name:"if",hash:{},fn:e.program(362,n,0),inverse:e.program(364,n,0),data:n}))?r:"")+" </select> </div> "},362:function(e,t,a,l,n){var r;return" "+(null!=(r=a.each.call(null!=t?t:{},null!=(r=null!=t?t.currentField:t)?r.default:r,{name:"each",hash:{},fn:e.program(5,n,0),inverse:e.noop,data:n}))?r:"")+" "},364:function(e,t,a,l,n){var r;return" <option value="+(null!=(r=a.if.call(null!=t?t:{},null!=(r=null!=(r=null!=(r=null!=t?t.currentField:t)?r.val:r)?r[0]:r)?r.content:r,{name:"if",hash:{},fn:e.program(162,n,0),inverse:e.program(164,n,0),data:n}))?r:"")+">"+e.escapeExpression(e.lambda(null!=(r=null!=(r=null!=(r=null!=t?t.currentField:t)?r.val:r)?r[0]:r)?r.html:r,t))+"</option> "},366:function(e,t,a,l,n,r,i){var o;return null!=(o=a.isPartOf.call(null!=t?t:{},"Consents",null!=t?t.module:t,{name:"isPartOf",hash:{},fn:e.program(367,n,0,r,i),inverse:e.program(369,n,0,r,i),data:n}))?o:""},367:function(e,t,a,l,n,r,i){var o,s=null!=t?t:{};return' <div class="createSelect newChosenSel"> <select  onclick="sE(event);" data-module ="'+e.escapeExpression(e.lambda(null!=t?t.module:t,t))+'" '+(null!=(o=a.convertObjToKeyValuePair.call(s,null!=(o=null!=t?t.currentField:t)?o.attrObj:o,{name:"convertObjToKeyValuePair",hash:{},data:n}))?o:"")+" "+(null!=(o=a.convertObjToKeyValuePair.call(s,null!=(o=null!=t?t.currentField:t)?o.dataObj:o,{name:"convertObjToKeyValuePair",hash:{},data:n}))?o:"")+"> "+(null!=(o=a.each.call(s,null!=(o=null!=t?t.currentField:t)?o.val:o,{name:"each",hash:{},fn:e.program(284,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" </select> </div> "},369:function(e,t,a,l,n,r,i){var o;return null!=(o=a.isStdOptionsField.call(null!=t?t:{},null!=(o=null!=t?t.currentField:t)?o.colname:o,{name:"isStdOptionsField",hash:{},fn:e.program(370,n,0,r,i),inverse:e.program(379,n,0,r,i),data:n}))?o:""},370:function(e,t,a,l,n,r,i){var o,s=null!=t?t:{};return' <div class="createSelect newChosenSel"> <select data-module ="'+e.escapeExpression(e.lambda(null!=t?t.module:t,t))+'" '+(null!=(o=a.convertObjToKeyValuePair.call(s,null!=(o=null!=t?t.currentField:t)?o.attrObj:o,{name:"convertObjToKeyValuePair",hash:{},data:n}))?o:"")+" "+(null!=(o=a.convertObjToKeyValuePair.call(s,null!=(o=null!=t?t.currentField:t)?o.dataObj:o,{name:"convertObjToKeyValuePair",hash:{},data:n}))?o:"")+"> "+(null!=(o=a.each.call(s,null!=(o=null!=t?t.currentField:t)?o.val:o,{name:"each",hash:{},fn:e.program(371,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" </select> </div> "},371:function(e,t,a,l,n,r,i){var o,s=null!=t?t:{},d=e.lambda,u=e.escapeExpression;return" <option "+(null!=(o=a.if.call(s,null!=t?t.default:t,{name:"if",hash:{},fn:e.program(23,n,0,r,i),inverse:e.program(372,n,0,r,i),data:n}))?o:"")+" value="+(null!=(o=a.if.call(s,null!=t?t.content:t,{name:"if",hash:{},fn:e.program(375,n,0,r,i),inverse:e.program(377,n,0,r,i),data:n}))?o:"")+' data-actual-value="'+u(d(null!=t?t.systemvalue:t,t))+'">'+u(d(null!=t?t.html:t,t))+"</option> "},372:function(e,t,a,l,n,r,i){var o;return null!=(o=a.if.call(null!=t?t:{},null!=(o=null!=i[1]?i[1].currentField:i[1])?o.default:o,{name:"if",hash:{},fn:e.program(373,n,0,r,i),inverse:e.noop,data:n}))?o:""},373:function(e,t,a,l,n,r,i){var o;return null!=(o=a.if_eq.call(null!=t?t:{},null!=(o=null!=(o=null!=(o=null!=i[1]?i[1].currentField:i[1])?o.default:o)?o[0]:o)?o.systemvalue:o,null!=t?t.systemvalue:t,{name:"if_eq",hash:{},fn:e.program(23,n,0,r,i),inverse:e.noop,data:n}))?o:""},375:function(e,t,a,l,n){return' "'+e.escapeExpression(e.lambda(null!=t?t.content:t,t))+'" '},377:function(e,t,a,l,n){return' "'+e.escapeExpression(e.lambda(null!=t?t.value:t,t))+'" '},379:function(e,t,a,l,n,r,i){var o,s=null!=t?t:{};return" "+(null!=(o=a.ifAllMatch.call(s,null!=t?t.module:t,"=","Tasks",null!=(o=null!=t?t.currentField:t)?o.colname:o,"=","STATUS",{name:"ifAllMatch",hash:{},fn:e.program(380,n,0,r,i),inverse:e.program(382,n,0,r,i),data:n}))?o:"")+" "+(null!=(o=a.ifAllMatch.call(s,null!=t?t.module:t,"=","Tasks",null!=(o=null!=t?t.currentField:t)?o.uitype:o,"=","42",null!=(o=null!=t?t.currentField:t)?o.colname:o,"=","remTime",{name:"ifAllMatch",hash:{},fn:e.program(395,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.ifAllMatch.call(s,null!=t?t.module:t,"=","Tasks",null!=(o=null!=t?t.currentField:t)?o.colname:o,"=","remTime",{name:"ifAllMatch",hash:{},fn:e.program(398,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "},380:function(e,t,a,l,n){var r,i=null!=t?t:{};return' <div class="createSelect newChosenSel"> <select onchange="crmTemplate.modifySelectBox(event,this)" onclick="sE(event);" data-module ="'+e.escapeExpression(e.lambda(null!=t?t.module:t,t))+'" '+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+"> "+(null!=(r=a.each.call(i,null!=(r=null!=t?t.currentField:t)?r.val:r,{name:"each",hash:{},fn:e.program(353,n,0),inverse:e.noop,data:n}))?r:"")+" </select> </div> "},382:function(e,t,a,l,n){var r;return" "+(null!=(r=a.ifAllMatch.call(null!=t?t:{},null!=t?t.module:t,"=","Tasks",null!=(r=null!=t?t.currentField:t)?r.colname:r,"=","PRIORITY",{name:"ifAllMatch",hash:{},fn:e.program(383,n,0),inverse:e.program(385,n,0),data:n}))?r:"")+" "},383:function(e,t,a,l,n){var r,i=null!=t?t:{};return' <div class="createSelect newChosenSel"> <select onclick="sE(event);" data-module ="'+e.escapeExpression(e.lambda(null!=t?t.module:t,t))+'" '+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+"> "+(null!=(r=a.each.call(i,null!=(r=null!=t?t.currentField:t)?r.val:r,{name:"each",hash:{},fn:e.program(353,n,0),inverse:e.noop,data:n}))?r:"")+" </select> </div> "},385:function(e,t,a,l,n){var r;return" "+(null!=(r=a.ifAllMatch.call(null!=t?t:{},null!=t?t.module:t,"=","Tasks",null!=(r=null!=t?t.currentField:t)?r.colname:r,"=","remTime",{name:"ifAllMatch",hash:{},fn:e.program(386,n,0),inverse:e.program(388,n,0),data:n}))?r:"")+" "},386:function(e,t,a,l,n){var r,i=null!=t?t:{};return' <label class="rbCheckHtml" for="Crm_Tasks_RemindAt_remTime_Radio"> <input type="radio" name="reminderOption" onChange="crmTasks.handleReminderOptionChange()" id="Crm_Tasks_RemindAt_remTime_Radio"> <span class="rbHtml mR20"></span> <span class="rbHtmlLb"> <div class="dIB"> <div class="createSelect newChosenSel"> <select data-module ="'+e.escapeExpression(e.lambda(null!=t?t.module:t,t))+'" '+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+"> "+(null!=(r=a.if.call(i,null!=(r=null!=t?t.currentField:t)?r.default:r,{name:"if",hash:{},fn:e.program(156,n,0),inverse:e.program(161,n,0),data:n}))?r:"")+" </select> </div> </span> </label> "},388:function(e,t,a,l,n){var r,i=null!=t?t:{};return' <div class="createSelect newChosenSel"> <select data-module ="'+e.escapeExpression(e.lambda(null!=t?t.module:t,t))+'" '+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+"> "+(null!=(r=a.if.call(i,null!=(r=null!=t?t.currentField:t)?r.default:r,{name:"if",hash:{},fn:e.program(389,n,0),inverse:e.program(392,n,0),data:n}))?r:"")+" </select> </div> "},389:function(e,t,a,l,n){var r;return" "+(null!=(r=a.ifEquals.call(null!=t?t:{},null!=(r=null!=t?t.currentField:t)?r.colorcode_enabled:r,!0,{name:"ifEquals",hash:{},fn:e.program(390,n,0),inverse:e.program(156,n,0),data:n}))?r:"")+" "},390:function(e,t,a,l,n){var r,i=e.lambda,o=e.escapeExpression;return' <option selected=selected  data-colorcode="'+o(i(null!=(r=null!=t?t.currentField:t)?r.color_code:r,t))+'" value='+(null!=(r=a.if.call(null!=t?t:{},null!=(r=null!=(r=null!=(r=null!=t?t.currentField:t)?r.default:r)?r[0]:r)?r.content:r,{name:"if",hash:{},fn:e.program(157,n,0),inverse:e.program(159,n,0),data:n}))?r:"")+">"+o(i(null!=(r=null!=(r=null!=(r=null!=t?t.currentField:t)?r.default:r)?r[0]:r)?r.html:r,t))+"</option> "},392:function(e,t,a,l,n){var r;return" "+(null!=(r=a.ifEquals.call(null!=t?t:{},null!=(r=null!=t?t.currentField:t)?r.colorcode_enabled:r,!0,{name:"ifEquals",hash:{},fn:e.program(393,n,0),inverse:e.program(161,n,0),data:n}))?r:"")+" "},393:function(e,t,a,l,n){var r,i=null!=t?t:{},o=e.lambda,s=e.escapeExpression;return" <option "+(null!=(r=a.if.call(i,null!=(r=null!=(r=null!=(r=null!=t?t.currentField:t)?r.val:r)?r[0]:r)?r.default:r,{name:"if",hash:{},fn:e.program(23,n,0),inverse:e.noop,data:n}))?r:"")+' data-colorcode="'+s(o(null!=(r=null!=(r=null!=(r=null!=t?t.currentField:t)?r.val:r)?r[0]:r)?r.colorCode:r,t))+'"  value='+(null!=(r=a.if.call(i,null!=(r=null!=(r=null!=(r=null!=t?t.currentField:t)?r.val:r)?r[0]:r)?r.content:r,{name:"if",hash:{},fn:e.program(162,n,0),inverse:e.program(164,n,0),data:n}))?r:"")+">"+s(o(null!=(r=null!=(r=null!=(r=null!=t?t.currentField:t)?r.val:r)?r[0]:r)?r.html:r,t))+"</option> "},395:function(e,t,a,l,n,r,i){var o;return' </div> <div class="dIB"> <div class="createSelect newChosenSel mL10"> <select onchange="crmTemplate.modifySelectBox(event,this)" onclick="sE(event);" data-module ="'+e.escapeExpression(e.lambda(null!=t?t.module:t,t))+'" id="Crm_Tasks_remTime_Period" data-colname="remTimePeriod"> '+(null!=(o=a.each.call(null!=t?t:{},null!=(o=null!=t?t.currentField:t)?o.period:o,{name:"each",hash:{},fn:e.program(396,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" </select> </div> </div> "},396:function(e,t,a,l,n,r,i){var o,s=null!=t?t:{};return" <option "+(null!=(o=a.ifEquals.call(s,null!=t?t.value:t,null!=(o=null!=i[1]?i[1].currentField:i[1])?o.defaultvalueperiod:o,{name:"ifEquals",hash:{},fn:e.program(23,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" value="+(null!=(o=a.if.call(s,null!=t?t.content:t,{name:"if",hash:{},fn:e.program(6,n,0,r,i),inverse:e.program(8,n,0,r,i),data:n}))?o:"")+">"+e.escapeExpression(e.lambda(null!=t?t.html:t,t))+"</option> "},398:function(e,t,a,l,n){var r,i=null!=t?t:{},o=e.escapeExpression;return' <span class="mL10 vam" id="rem_off_before_text">'+o(a.getI18n.call(i,"of.duedate",{name:"getI18n",hash:{},data:n}))+'</span><span class="mL5 vam">'+o(a.getI18n.call(i,"crm.label.lowercase.at",{name:"getI18n",hash:{},data:n}))+'</span> <input type="text" '+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.timeDataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.timeAttrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' value="'+o(e.lambda(null!=(r=null!=t?t.currentField:t)?r.timeVal:r,t))+'" data-fieldType="timeField"></input> '},400:function(e,t,a,l,n){var r,i=null!=t?t:{};return" <textarea "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+">"+e.escapeExpression(e.lambda(null!=(r=null!=t?t.currentField:t)?r.defaultvalue:r,t))+"</textarea> "},402:function(e,t,a,l,n){var r,i=null!=t?t:{},o=e.lambda,s=e.escapeExpression;return' <input type="hidden" '+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' value="'+s(o(null!=(r=null!=t?t.currentField:t)?r.defaultid:r,t))+'"></input> <span id="layoutId">'+s(o(null!=(r=null!=t?t.currentField:t)?r.defaultvalue:r,t))+"</span> "},404:function(e,t,a,l,n){var r,i=null!=t?t:{},o=e.lambda,s=e.escapeExpression;return' <input type="hidden" '+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' value="'+s(o(null!=(r=null!=t?t.currentField:t)?r.defaultid:r,t))+'"></input> <span id="wizardId" style="height:16px;" class="dIB">'+s(o(null!=(r=null!=t?t.currentField:t)?r.defaultvalue:r,t))+"</span> "},406:function(e,t,a,l,n){var r;return' <span id="'+e.escapeExpression(e.lambda(null!=(r=null!=(r=null!=t?t.currentField:t)?r.attrObj:r)?r.id:r,t))+'" '+(null!=(r=a.convertObjToKeyValuePair.call(null!=t?t:{},null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+">&nbsp;</span> "},408:function(e,t,a,l,n){var r,i=null!=t?t:{};return" "+(null!=(r=a.if_eq.call(i,"create",null!=t?t.currentStatus:t,{name:"if_eq",hash:{},fn:e.program(409,n,0),inverse:e.program(411,n,0),data:n}))?r:"")+" "+(null!=(r=a.constructServiceDurations.call(i,null!=(r=null!=t?t.currentField:t)?r.defaultvalue:r,{name:"constructServiceDurations",hash:{},fn:e.program(46,n,0),inverse:e.noop,data:n}))?r:"")+" "},409:function(e,t,a,l,n){var r,i=e.lambda,o=e.escapeExpression,s=null!=t?t:{};return' <div id="serviceDurationDiv" data-module ="'+o(i(null!=t?t.module:t,t))+'" '+(null!=(r=a.convertObjToKeyValuePair.call(s,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(s,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' data-zcqa="ServiceDurations" class="textField serviceDurationELe cP" onclick="CSU.showServiceDuration(this);sE(event);" > '+o(a.getI18n.call(s,"None",{name:"getI18n",hash:{},data:n}))+' </div> <input type="text" id="'+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.attrObj:r)?r.id:r,t))+'" '+(null!=(r=a.convertObjToKeyValuePair.call(s,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(s,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' style="display:none" data-value="none" class="selectBoxField dIB vam" maxlength="2" value="" ></input> '},411:function(e,t,a,l,n){var r;return" "+(null!=(r=a.if_eq.call(null!=t?t:{},"setup",null!=t?t.currentStatus:t,{name:"if_eq",hash:{},fn:e.program(412,n,0),inverse:e.program(414,n,0),data:n}))?r:"")+" "},412:function(e,t,a,l,n){var r,i=e.lambda,o=e.escapeExpression,s=null!=t?t:{};return' <div id="serviceDurationDiv" data-module ="'+o(i(null!=t?t.module:t,t))+'" '+(null!=(r=a.convertObjToKeyValuePair.call(s,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' data-zcqa="ServiceDurations" class="textField serviceDurationELe cP" onclick="CSU.showServiceDuration(this);sE(event);" > '+o(a.getI18n.call(s,"None",{name:"getI18n",hash:{},data:n}))+' </div> <input type="text" id="'+o(i(null!=(r=null!=(r=null!=t?t.currentField:t)?r.attrObj:r)?r.id:r,t))+'" '+(null!=(r=a.convertObjToKeyValuePair.call(s,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(s,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' style="display:none" data-value="none" class="selectBoxField dIB vam" maxlength="2" value="" ></input> '},414:function(e,t,a,l,n){var r,i=null!=t?t:{},o=e.lambda,s=e.escapeExpression;return' <div id="serviceDurationDiv" '+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' data-module ="'+s(o(null!=t?t.module:t,t))+'" data-zcqa="ServiceDurations" class="textField serviceDurationELe cP" onclick="CSU.showServiceDuration(this);sE(event);" > '+(null!=(r=a.setServiceDuration.call(i,null!=(r=null!=t?t.currentField:t)?r.defaultvalue:r,{name:"setServiceDuration",hash:{},fn:e.program(46,n,0),inverse:e.noop,data:n}))?r:"")+' </div> <input type="text" id="'+s(o(null!=(r=null!=(r=null!=t?t.currentField:t)?r.attrObj:r)?r.id:r,t))+'" '+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.attrObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+" "+(null!=(r=a.convertObjToKeyValuePair.call(i,null!=(r=null!=t?t.currentField:t)?r.dataObj:r,{name:"convertObjToKeyValuePair",hash:{},data:n}))?r:"")+' style="display:none" data-value="'+s(o(null!=(r=null!=t?t.currentField:t)?r.defaultvalue:r,t))+'" class="selectBoxField dIB vam" maxlength="2" value="'+s(o(null!=(r=null!=t?t.currentField:t)?r.defaultvalue:r,t))+'" ></input> '},compiler:[7,">= 4.0.0"],main:function(e,t,a,l,n,r,i){var o;return" "+(null!=(o=a.if.call(null!=t?t:{},null!=t?t.isSubformSplHandling:t,{name:"if",hash:{},fn:e.program(1,n,0,r,i),inverse:e.program(25,n,0,r,i),data:n}))?o:"")+" "},useData:!0,useDepths:!0}),t.crmCreateFieldLabel=e({1:function(e,t,a,l,n){return" <div></div> "},3:function(e,t,a,l,n,r,i){var o;return" "+(null!=(o=a.contains.call(null!=t?t:{},"[50,51]",null!=(o=null!=t?t.currentField:t)?o.uitype:o,{name:"contains",hash:{},fn:e.program(4,n,0,r,i),inverse:e.program(6,n,0,r,i),data:n}))?o:"")+" "},4:function(e,t,a,l,n){return"  "},6:function(e,t,a,l,n,r,i){var o;return" "+(null!=(o=a.if_eq.call(null!=t?t:{},null!=(o=null!=t?t.currentField:t)?o.uitype:o,"4",{name:"if_eq",hash:{},fn:e.program(7,n,0,r,i),inverse:e.program(26,n,0,r,i),data:n}))?o:"")+" "},7:function(e,t,a,l,n,r,i){var o;return" "+(null!=(o=a.ifAnyMatch.call(null!=t?t:{},null!=t?t.module:t,"=","Events",null!=t?t.module:t,"=","Tasks",null!=t?t.modAndView:t,"=","Calls_OLD",{name:"ifAnyMatch",hash:{},fn:e.program(8,n,0,r,i),inverse:e.program(24,n,0,r,i),data:n}))?o:"")+" "},8:function(e,t,a,l,n,r,i){var o,s=null!=t?t:{};return" "+(null!=(o=a.if_eq.call(s,null!=(o=null!=t?t.currentField:t)?o.label:o,"What Id",{name:"if_eq",hash:{},fn:e.program(9,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.if_eq.call(s,null!=(o=null!=t?t.currentField:t)?o.label:o,"Who Id",{name:"if_eq",hash:{},fn:e.program(21,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "},9:function(e,t,a,l,n,r,i){var o,s=null!=t?t:{},d=e.lambda,u=e.escapeExpression;return" <div "+(null!=(o=a.setRequiredAttributes.call(s,t,null!=t?t.module:t,"fieldLabel","*",{name:"setRequiredAttributes",hash:{},fn:e.program(10,n,0,r,i),inverse:e.noop,data:n}))?o:"")+"> <select "+(null!=(o=a.ifNotEquals.call(s,null!=t?t.currentStatus:t,"setup",{name:"ifNotEquals",hash:{},fn:e.program(12,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.convertObjToKeyValuePair.call(s,null!=(o=null!=t?t.currentField:t)?o.dataObj:o,{name:"convertObjToKeyValuePair",hash:{},data:n}))?o:"")+' id="'+u(d(null!=(o=null!=(o=null!=t?t.currentField:t)?o.attrObj:o)?o.id:o,t))+'_label_select" data-zcqa="'+u(d(null!=(o=null!=t?t.currentField:t)?o.label:o,t))+'" > '+(null!=(o=a.each.call(s,null!=(o=null!=t?t.currentField:t)?o.whatIdVal:o,{name:"each",hash:{},fn:e.program(16,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" </select> "+(null!=(o=a.ifEquals.call(s,null!=(o=null!=t?t.currentField:t)?o.tooltiptype:o,"1",{name:"ifEquals",hash:{},fn:e.program(19,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" </div> "},10:function(e,t,a,l,n){return""},12:function(e,t,a,l,n){var r;return' onChange="crmTemplate.resetLookupVal(event,this,'+e.escapeExpression(e.lambda(null!=t?t.module:t,t))+");"+(null!=(r=a.ifEquals.call(null!=t?t:{},null!=t?t.module:t,"Tasks",{name:"ifEquals",hash:{},fn:e.program(13,n,0),inverse:e.noop,data:n}))?r:"")+'" '},13:function(e,t,a,l,n){var r;return" "+(null!=(r=a.ifEquals.call(null!=t?t:{},null!=t?t.currentStatus:t,"edit",{name:"ifEquals",hash:{},fn:e.program(14,n,0),inverse:e.noop,data:n}))?r:"")+" "},14:function(e,t,a,l,n){return" ZProjects.changeAccountLookup(this,event) "},16:function(e,t,a,l,n,r,i){var o,s=e.lambda,d=e.escapeExpression;return' <option value="'+d(s(null!=t?t.value:t,t))+'" '+(null!=(o=a.if_eq.call(null!=t?t:{},null!=t?t.value:t,null!=(o=null!=i[1]?i[1].currentField:i[1])?o.entitymodule:o,{name:"if_eq",hash:{},fn:e.program(17,n,0,r,i),inverse:e.noop,data:n}))?o:"")+">"+d(s(null!=t?t.html:t,t))+"</option> "},17:function(e,t,a,l,n){return"selected =selected"},19:function(e,t,a,l,n,r,i){var o,s=e.escapeExpression;return' <i class="icon_roundinfo infotoolTip mL5 dIB vmiddle cP customField" data-module="'+s(e.lambda(null!=i[1]?i[1].module:i[1],t))+'" fldtooltip="'+s(a.encodeHTML.call(null!=t?t:{},null!=(o=null!=t?t.currentField:t)?o.tooltipcontent:o,{name:"encodeHTML",hash:{},data:n}))+'" ></i> '},21:function(e,t,a,l,n,r,i){var o;return" "+(null!=(o=a.ifAnyMatch.call(null!=t?t:{},null!=t?t.module:t,"=","Tasks",null!=t?t.module:t,"=","Calls",{name:"ifAnyMatch",hash:{},fn:e.program(22,n,0,r,i),inverse:e.program(24,n,0,r,i),data:n}))?o:"")+" "},22:function(e,t,a,l,n,r,i){var o,s=null!=t?t:{};return" <div "+(null!=(o=a.setRequiredAttributes.call(s,t,null!=t?t.module:t,"fieldLabel","*",{name:"setRequiredAttributes",hash:{},fn:e.program(10,n,0,r,i),inverse:e.noop,data:n}))?o:"")+"> "+(null!=(o=a.ifEquals.call(s,null!=(o=null!=t?t.currentField:t)?o.tooltiptype:o,"1",{name:"ifEquals",hash:{},fn:e.program(19,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" </div> "},24:function(e,t,a,l,n,r,i){var o,s=null!=t?t:{};return" <div "+(null!=(o=a.setRequiredAttributes.call(s,t,null!=t?t.module:t,"fieldLabel","*",{name:"setRequiredAttributes",hash:{},fn:e.program(10,n,0,r,i),inverse:e.noop,data:n}))?o:"")+"> "+e.escapeExpression(e.lambda(null!=(o=null!=t?t.currentField:t)?o.displaylabel:o,t))+" "+(null!=(o=a.ifEquals.call(s,null!=(o=null!=t?t.currentField:t)?o.tooltiptype:o,"1",{name:"ifEquals",hash:{},fn:e.program(19,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" </div> "},26:function(e,t,a,l,n,r,i){var o,s=null!=t?t:{};return" <div "+(null!=(o=a.setRequiredAttributes.call(s,t,null!=t?t.module:t,"fieldLabel","*",{name:"setRequiredAttributes",hash:{},fn:e.program(10,n,0,r,i),inverse:e.noop,data:n}))?o:"")+"> "+e.escapeExpression(e.lambda(null!=(o=null!=t?t.currentField:t)?o.displaylabel:o,t))+" "+(null!=(o=a.if_eq.call(s,null!=(o=null!=t?t.currentField:t)?o.issubformfield:o,"true",{name:"if_eq",hash:{},fn:e.program(27,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.ifEquals.call(s,null!=(o=null!=t?t.currentField:t)?o.tooltiptype:o,"1",{name:"ifEquals",hash:{},fn:e.program(29,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" </div> "},27:function(e,t,a,l,n){return" <span class='openSansNormal sfHeaderCurrency'></span> "},29:function(e,t,a,l,n,r,i){var o,s=e.escapeExpression;return' <i class="svgIcons info_icon infotoolTip mL5 dIB vmiddle cP customField" data-module="'+s(e.lambda(null!=i[1]?i[1].module:i[1],t))+'" fldtooltip="'+s(a.encodeHTML.call(null!=t?t:{},null!=(o=null!=t?t.currentField:t)?o.tooltipcontent:o,{name:"encodeHTML",hash:{},data:n}))+'" ></i> '},compiler:[7,">= 4.0.0"],main:function(e,t,a,l,n,r,i){var o;return(null!=(o=a.if.call(null!=t?t:{},null!=(o=null!=t?t.currentField:t)?o.emptyColumn:o,{name:"if",hash:{},fn:e.program(1,n,0,r,i),inverse:e.program(3,n,0,r,i),data:n}))?o:"")+" "},useData:!0,useDepths:!0}),t.crmCreateHeadingLayout=e({1:function(e,t,a,l,n,r,i){var o,s=null!=t?t:{},d=e.escapeExpression;return' <lyte-messagebox data-zcqa="rp_incusttomView" lt-prop-duration = "9500" id=\'rpRecordInReview\' lt-prop-type = "info" lt-prop-message = "'+d(a.getI18n.call(s,"crm.reviewprocess.record.entered.customview.msg",null!=t?t.module:t,{name:"getI18n",hash:{},data:n}))+'"> </lyte-messagebox> <div class="cvpadding"> <div class="set_mw"> <table width="100%" border="0" cellspacing="0" cellpadding="0"> <tbody> <tr> <td id="heading_icon" class="'+d(e.lambda(null!=t?t.module:t,t))+'-titleIcon"></td> <td id="heading_title" class="dvTitle pL30 pR30" > '+(null!=(o=a.each.call(s,null!=(o=null!=t?t.layout_jsonarrayObj:t)?o.layout_jsonarrayObj:o,{name:"each",hash:{},fn:e.program(2,n,0,r,i),inverse:e.noop,data:n}))?o:"")+' <table  border="0" cellspacing="0" cellpadding="0"> <tr> <td class="vmiddle">'+d(a.getHeadingTitle.call(s,t,{name:"getHeadingTitle",hash:{},data:n}))+" </td> "+(null!=(o=a.ifEquals.call(s,null!=t?t.showMultipageLayout:t,"true",{name:"ifEquals",hash:{},fn:e.program(6,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.ifNotEquals.call(s,null!=t?t.isFrom:t,"clientPortal",{name:"ifNotEquals",hash:{},fn:e.program(35,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" </tr> </table> </td> "+(null!=(o=a.if.call(s,null!=t?t.showHelp:t,{name:"if",hash:{},fn:e.program(39,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.ifNotEquals.call(s,null!=t?t.isFrom:t,"clientPortal",{name:"ifNotEquals",hash:{},fn:e.program(41,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" </tr> "+(null!=(o=a.ifEquals.call(s,null!=i[1]?i[1].EditSeries:i[1],"true",{name:"ifEquals",hash:{},fn:e.program(62,n,0,r,i),inverse:e.noop,data:n}))?o:"")+' </tbody> </table> </div> </div> <div id="taskBlueBanner" class="taskBlueBanner pA dIB" style="display: none;"> <p></p> </div> <div style="display:none;" id="editProjectSync"></div> <div id="ttToolTip" class="pA yellowBg bdr1px cbBtnValue borderRadius3 wwbw p5 zI10 cusBtnDetTt" data-close="true" style="top: -1110px; width:250px; white-space:initial; display:none;"> <div class="oA p15" align="left" style="max-height:400px;"> <div class="color_5 f13">'+d(a.getI18n.call(s,"Name",{name:"getI18n",hash:{},data:n}))+':</div><div id="btnToolTipNameDiv"></div> <div class="color_5 mT15 f13" id="btnDesc">'+d(a.getI18n.call(s,"Description",{name:"getI18n",hash:{},data:n}))+':</div> <div id="btnToolTipDescDiv"></div> </div> <span class="yellowTopArw pA" style="top:8px; right:-11px;"></span> </div> '},2:function(e,t,a,l,n){var r;return" "+(null!=(r=a.ifEquals.call(null!=t?t:{},null!=t?t.STATUS:t,"true",{name:"ifEquals",hash:{},fn:e.program(3,n,0),inverse:e.noop,data:n}))?r:"")+" "},3:function(e,t,a,l,n){var r;return" "+(null!=(r=a.ifEquals.call(null!=t?t:{},null!=t?t.ISSYSTEMLAYOUT:t,"true",{name:"ifEquals",hash:{},fn:e.program(4,n,0),inverse:e.noop,data:n}))?r:"")+" "},4:function(e,t,a,l,n){return' <input type="hidden" id="defLayoutId" value="'+e.escapeExpression(e.lambda(null!=t?t.LAYOUTID:t,t))+'"></input> '},6:function(e,t,a,l,n,r,i){var o,s=null!=t?t:{},d=e.lambda,u=e.escapeExpression;return' <td class="pL10 vmiddle nuEnhancFocusBox"> '+(null!=(o=a.ifCondLogic.call(s,null!=t?t.module:t,"==","Campaigns","&&",null!=(o=null!=t?t.layout_jsonarrayObj:t)?o.showIntegLayoutOption:o,"==",!0,{name:"ifCondLogic",hash:{},fn:e.program(7,n,0,r,i),inverse:e.noop,data:n}))?o:"")+' <div class="newSelect changeDefLayout" id="changeDefLayout" onclick="crmTemplate.adddropDownClass()"> <input type="hidden" id="fillUpModule" value="'+u(d(null!=t?t.fillUpModule:t,t))+'"></input> <input type="hidden" id="fillUpFieldId" value="'+u(d(null!=t?t.fillUpFieldId:t,t))+'"></input> <input type="hidden" id="listRelationId" value="'+u(d(null!=t?t.listRelationId:t,t))+'"></input> <input type="hidden" id="entityid" value="'+u(d(null!=t?t.entityid:t,t))+'"></input> <input type="hidden" id="relmodule" value="'+u(d(null!=t?t.relmodule:t,t))+'"></input> <input type="hidden" id="fillUpEntityname" value="'+u(d(null!=t?t.fillUpEntityname:t,t))+'"></input> <input type="hidden" id="selectVendors" value="'+u(d(null!=t?t.selectVendors:t,t))+'"></input> <input type="hidden" id="idlist" value="'+u(d(null!=t?t.idlist:t,t))+'"></input> <select data-zcqa="MPL_layoutDetails" id="layoutDetails" data-module ="'+u(d(null!=t?t.module:t,t))+'"  onChange='+(null!=(o=a.ifEquals.call(s,null!=t?t.isFrom:t,"clientPortal",{name:"ifEquals",hash:{},fn:e.program(16,n,0,r,i),inverse:e.program(18,n,0,r,i),data:n}))?o:"")+"> "+(null!=(o=a.ifEquals.call(s,null!=t?t.module:t,"Campaigns",{name:"ifEquals",hash:{},fn:e.program(20,n,0,r,i),inverse:e.program(27,n,0,r,i),data:n}))?o:"")+" </select> </div> </td> "},7:function(e,t,a,l,n){var r,i=e.escapeExpression,o=null!=t?t:{};return' <div class="newSelect"> <select data-zcqa="MPL_IntegLayoutDetails" id="zCampIntegLayout" data-module ="'+i(e.lambda(null!=t?t.module:t,t))+'" onChange='+(null!=(r=a.ifEquals.call(o,null!=t?t.isFrom:t,"clientPortal",{name:"ifEquals",hash:{},fn:e.program(8,n,0),inverse:e.program(10,n,0),data:n}))?r:"")+'> <option value="zCampIntegLayoutOffline">'+i(a.getI18n.call(o,"crm.chat.offline",{name:"getI18n",hash:{},data:n}))+"</option> "+(null!=(r=a.each.call(o,null!=(r=null!=t?t.layout_jsonarrayObj:t)?r.layout_jsonarrayObj:r,{name:"each",hash:{},fn:e.program(12,n,0),inverse:e.noop,data:n}))?r:"")+" </select> </div> "},8:function(e,t,a,l,n){var r=e.escapeExpression;return"\"crmTemplate.integChangeLayout('"+r(a.encodeJS.call(null!=t?t:{},null!=t?t.module:t,{name:"encodeJS",hash:{},data:n}))+"', this.value, 'clientPortal','"+r(e.lambda(null!=t?t.profileId:t,t))+"')\""},10:function(e,t,a,l,n){return"\"crmTemplate.integChangeLayout('"+e.escapeExpression(a.encodeJS.call(null!=t?t:{},null!=t?t.module:t,{name:"encodeJS",hash:{},data:n}))+"', this.value)\""},12:function(e,t,a,l,n){var r;return" "+(null!=(r=a.ifCondLogic.call(null!=t?t:{},null!=t?t.STATUS:t,"==",!0,"&&",null!=t?t.SOURCE:t,"==","12",{name:"ifCondLogic",hash:{},fn:e.program(13,n,0),inverse:e.noop,data:n}))?r:"")+" "},13:function(e,t,a,l,n){var r,i=e.lambda,o=e.escapeExpression;return" <option "+(null!=(r=a.ifEquals.call(null!=t?t:{},null!=t?t.ISSYSTEMLAYOUT:t,"true",{name:"ifEquals",hash:{},fn:e.program(14,n,0),inverse:e.noop,data:n}))?r:"")+' value="'+o(i(null!=t?t.LAYOUTID:t,t))+'">'+o(i(null!=t?t.LAYOUTNAME:t,t))+"</option> "},14:function(e,t,a,l,n){return" selected=selected "},16:function(e,t,a,l,n){var r=e.escapeExpression;return"\"crmTemplate.changeLayout('"+r(a.encodeJS.call(null!=t?t:{},null!=t?t.module:t,{name:"encodeJS",hash:{},data:n}))+"',this.value,'clientPortal','"+r(e.lambda(null!=t?t.profileId:t,t))+"')\""},18:function(e,t,a,l,n){return"\"crmTemplate.changeLayout('"+e.escapeExpression(a.encodeJS.call(null!=t?t:{},null!=t?t.module:t,{name:"encodeJS",hash:{},data:n}))+"',this.value, undefined, undefined, this)\""},20:function(e,t,a,l,n,r,i){var o,s=null!=t?t:{};return" <optgroup label="+e.escapeExpression(a.getI18n.call(s,"crm.label.customize.layouts",{name:"getI18n",hash:{},data:n}))+"> </optgroup> "+(null!=(o=a.each.call(s,null!=(o=null!=t?t.layout_jsonarrayObj:t)?o.layout_jsonarrayObj:o,{name:"each",hash:{},fn:e.program(21,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "},21:function(e,t,a,l,n,r,i){var o,s=null!=t?t:{};return" "+(null!=(o=a.ifEquals.call(s,null!=t?t.isWizard:t,!0,{name:"ifEquals",hash:{},fn:e.program(22,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.ifEquals.call(s,null!=t?t.STATUS:t,!0,{name:"ifEquals",hash:{},fn:e.program(25,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "},22:function(e,t,a,l,n,r,i){var o;return' <optgroup label="'+e.escapeExpression(e.lambda(null!=t?t.name:t,t))+'"> '+(null!=(o=a.each.call(null!=t?t:{},null!=t?t.layouts:t,{name:"each",hash:{},fn:e.program(23,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" </optgroup> "},23:function(e,t,a,l,n,r,i){var o=e.lambda,s=e.escapeExpression;return' <option value="'+s(o(null!=t?t.id:t,t))+";"+s(o(null!=i[1]?i[1].id:i[1],t))+'" wizardname="'+s(o(null!=t?t.name:t,t))+'" isWizard="true">'+s(o(null!=t?t.name:t,t))+"</option> "},25:function(e,t,a,l,n){var r;return" "+(null!=(r=a.ifNotEquals.call(null!=t?t:{},null!=t?t.SOURCE:t,"12",{name:"ifNotEquals",hash:{},fn:e.program(13,n,0),inverse:e.noop,data:n}))?r:"")+" "},27:function(e,t,a,l,n,r,i){var o;return" "+(null!=(o=a.ifEquals.call(null!=t?t:{},null!=t?t.isWizard:t,!0,{name:"ifEquals",hash:{},fn:e.program(28,n,0,r,i),inverse:e.program(33,n,0,r,i),data:n}))?o:"")+" "},28:function(e,t,a,l,n,r,i){var o,s=null!=t?t:{},d=e.escapeExpression;return' <optgroup label="'+d(a.getI18n.call(s,"crm.setup.system.wizards1",{name:"getI18n",hash:{},data:n}))+'" title="wizardGrp"> </optgroup> '+(null!=(o=a.each.call(s,null!=(o=null!=t?t.layout_jsonarrayObj:t)?o.layout_jsonarrayObj:o,{name:"each",hash:{},fn:e.program(29,n,0,r,i),inverse:e.noop,data:n}))?o:"")+' <optgroup label="'+d(a.getI18n.call(s,"crm.label.customize.layouts",{name:"getI18n",hash:{},data:n}))+'" title="layoutGrp"> '+(null!=(o=a.each.call(s,null!=(o=null!=t?t.layout_jsonarrayObj:t)?o.layout_jsonarrayObj:o,{name:"each",hash:{},fn:e.program(31,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" </optgroup> "},29:function(e,t,a,l,n,r,i){var o;return" "+(null!=(o=a.ifEquals.call(null!=t?t:{},null!=t?t.isWizard:t,!0,{name:"ifEquals",hash:{},fn:e.program(22,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "},31:function(e,t,a,l,n){var r;return" "+(null!=(r=a.ifEquals.call(null!=t?t:{},null!=t?t.STATUS:t,!0,{name:"ifEquals",hash:{},fn:e.program(13,n,0),inverse:e.noop,data:n}))?r:"")+" "},33:function(e,t,a,l,n){var r,i=null!=t?t:{};return" <optgroup label="+e.escapeExpression(a.getI18n.call(i,"crm.label.customize.layouts",{name:"getI18n",hash:{},data:n}))+"> "+(null!=(r=a.each.call(i,null!=(r=null!=t?t.layout_jsonarrayObj:t)?r.layout_jsonarrayObj:r,{name:"each",hash:{},fn:e.program(31,n,0),inverse:e.noop,data:n}))?r:"")+" </optgroup> "},35:function(e,t,a,l,n){var r;return' <td class="pL10 vmiddle"> '+(null!=(r=a.if.call(null!=t?t:{},null!=t?t.showEdit:t,{name:"if",hash:{},fn:e.program(36,n,0),inverse:e.noop,data:n}))?r:"")+" </td> "},36:function(e,t,a,l,n){var r;return" "+(null!=(r=a.ifEquals.call(null!=t?t:{},null!=t?t.isTaskPopup:t,"false",{name:"ifEquals",hash:{},fn:e.program(37,n,0),inverse:e.noop,data:n}))?r:"")+" "},37:function(e,t,a,l,n){var r=null!=t?t:{},i=e.escapeExpression;return' <a id="layoutEditHead" data-zcqa="lnk_EditPageLayout" class="smalledit crm-font-regular" href="javascript:;" target="_blank" oncontextmenu="CrmPageLayout.openLayout(this,\''+i(a.encodeJS.call(r,null!=t?t.module:t,{name:"encodeJS",hash:{},data:n}))+"')\" onclick=\"CrmPageLayout.openLayout(this,'"+i(a.encodeJS.call(r,null!=t?t.module:t,{name:"encodeJS",hash:{},data:n}))+"')\" > "+i(a.getI18n.call(r,"crm.label.pagelayout.edit",{name:"getI18n",hash:{},data:n}))+" </a> "},39:function(e,t,a,l,n){return"  "},41:function(e,t,a,l,n,r,i){var o,s=null!=t?t:{},d=e.escapeExpression;return' <td class="alignright pR30"> '+(null!=(o=a.ifNotEquals.call(s,null!=t?t.showMultipageLayout:t,"true",{name:"ifNotEquals",hash:{},fn:e.program(42,n,0,r,i),inverse:e.noop,data:n}))?o:"")+' <a class="LeadEnrichmentLinkhere pR f14 crm-font-regular mR40 cP" data-zcqa="createAutoEnrichLink" id="createEnrichLink" onclick="CAEExec.getAutoEnrichData(\'entityCreate\');sE(event);" style="opacity: 1; pointer-events: all;display:none;">'+d(a.getI18n.call(s,"crm.label.auto.enrich.available",{name:"getI18n",hash:{},data:n}))+' <div class="dIB infoIconforNeed pA mL0 cD" style="top:3px" id="createEnrichLinkToolTip" onmouseout="crmui.hideTooltip()"></div></a> '+(null!=(o=a.ifEquals.call(s,null!=t?t.module:t,"Tasks",{name:"ifEquals",hash:{},fn:e.program(47,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+d(a.setBtnDetails.call(s,t,{name:"setBtnDetails",hash:{},data:n}))+" "+(null!=(o=a.each.call(s,null!=t?t.btnList:t,{name:"each",hash:{},fn:e.program(49,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.if.call(s,null!=t?t.isButtonsAvailable:t,{name:"if",hash:{},fn:e.program(57,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" </td> "},42:function(e,t,a,l,n){var r,i=null!=t?t:{},o=e.escapeExpression;return" "+(null!=(r=a.each.call(i,null!=(r=null!=t?t.layout_jsonarrayObj:t)?r.layout_jsonarrayObj:r,{name:"each",hash:{},fn:e.program(43,n,0),inverse:e.noop,data:n}))?r:"")+' <div class="bodyText hide" style="float:right"> <a target="_blank" class="smalledit" href="'+o(a.getCrmBasePath.call(i,{name:"getCrmBasePath",hash:{},data:n}))+"/ShowSetup.do?module="+o(a.encodeURL.call(i,null!=t?t.module:t,{name:"encodeURL",hash:{},data:n}))+'&tab=custom&subTab=layouts"> '+o(a.getI18n.call(i,"crm.label.pagelayout.edit",{name:"getI18n",hash:{},data:n}))+" </a> </div> "},43:function(e,t,a,l,n){var r;return" "+(null!=(r=a.ifEquals.call(null!=t?t:{},null!=t?t.STATUS:t,"true",{name:"ifEquals",hash:{},fn:e.program(44,n,0),inverse:e.noop,data:n}))?r:"")+" "},44:function(e,t,a,l,n){var r;return" "+(null!=(r=a.ifEquals.call(null!=t?t:{},null!=t?t.ISSYSTEMLAYOUT:t,"true",{name:"ifEquals",hash:{},fn:e.program(45,n,0),inverse:e.noop,data:n}))?r:"")+" "},45:function(e,t,a,l,n){return' <input type="hidden" id="layoutDetails" value="'+e.escapeExpression(e.lambda(null!=t?t.LAYOUTID:t,t))+'"></input> '},47:function(e,t,a,l,n){var r=null!=t?t:{},i=e.escapeExpression;return' <span id="Tasks_Notify_Owner" class="Tasks_Notify_Owner mR10 textNoSelect" style="display:none"> <label for="Crm_Tasks_SENDNOTIFICATION"> <input type="checkbox" class="dN chBoxIcon tasksNotifyOwnerCheckBox" onclick="sE(event);" onchange="crmTemplate.modifyCheckBox(event,this,&quot;Tasks&quot;)" id="Crm_Tasks_SENDNOTIFICATION" data-zcqa="Send Notification Email" data-content-type="Boolean" data-uitype="301" data-colname="SENDNOTIFICATION" data-name="Send Notification Email"></input> <span class="mR5 dIB"></span> <span class="cP">'+i(a.getI18n.call(r,"crm.form.owner.notification",{name:"getI18n",hash:{},data:n}))+"</span> </label> <span class=\"dIB info_icon_var1 vam cP\" onmouseover=\"crmui.toolTip_show(this,'center', '"+i(a.getI18n.call(r,"crm.task.notifyowner.tt",{name:"getI18n",hash:{},data:n}))+'\')" onmouseout="crmui.toolTip_hide()"></span> </span> '},49:function(e,t,a,l,n,r,i){var o;return" "+(null!=(o=a.if_eq.call(null!=t?t:{},"save",null!=t?t.name:t,{name:"if_eq",hash:{},fn:e.program(50,n,0,r,i),inverse:e.program(53,n,0,r,i),data:n}))?o:"")+" "},50:function(e,t,a,l,n,r,i){var o,s=e.lambda,d=e.escapeExpression;return' <input  onClick="crmTemplate.handleButtonClick(event,this)" data-zcqa="editSaveTaskProjBtn" data-module='+d(s(null!=i[1]?i[1].module:i[1],t))+' type="button" class="projectsTaskSyncbtn newgraybtn" id="AddZProjectsBtn" value="Save and Add to Zoho Projects" name="saveAndAddToProjectsTask" style="display:none;"/> <input data-params="'+d(s(null!=t?t["data-params"]:t,t))+'" onClick="crmTemplate.handleButtonClick(event,this)" data-module="'+d(s(null!=i[1]?i[1].module:i[1],t))+'" type="button" id="'+d(s(null!=t?t.name:t,t))+d(s(null!=i[1]?i[1].module:i[1],t))+'Btn" name="'+d(s(null!=t?t.name:t,t))+'" cscript-tag="'+d(s(null!=t?t["cscript-tag"]:t,t))+'" data-zcqa="'+d(s(null!=t?t.name:t,t))+'" class="primarybtn" value="'+d(s(null!=t?t.html:t,t))+'" '+(null!=(o=a.ifEquals.call(null!=t?t:{},null!=t?t.name:t,"cancel",{name:"ifEquals",hash:{},fn:e.program(51,n,0,r,i),inverse:e.noop,data:n}))?o:"")+"/> "},51:function(e,t,a,l,n){return' data-cid="backOneLevel" '},53:function(e,t,a,l,n,r,i){var o,s=e.lambda,d=e.escapeExpression,u=null!=t?t:{};return' <input data-params="'+d(s(null!=t?t["data-params"]:t,t))+'" onClick="crmTemplate.handleButtonClick(event,this)" data-module="'+d(s(null!=i[1]?i[1].module:i[1],t))+'" type="button" id="'+d(s(null!=t?t.name:t,t))+d(s(null!=i[1]?i[1].module:i[1],t))+'Btn" name="'+d(s(null!=t?t.name:t,t))+'" cscript-tag="'+d(s(null!=t?t["cscript-tag"]:t,t))+'" data-zcqa="'+d(s(null!=t?t.name:t,t))+'" class="newgraybtn" value="'+d(s(null!=t?t.html:t,t))+'" '+(null!=(o=a.ifEquals.call(u,null!=t?t.name:t,"cancel",{name:"ifEquals",hash:{},fn:e.program(51,n,0,r,i),inverse:e.noop,data:n}))?o:"")+"/> "+(null!=(o=a.if.call(u,null!=t?t.customButton:t,{name:"if",hash:{},fn:e.program(54,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "},54:function(e,t,a,l,n){var r;return" "+(null!=(r=a.if.call(null!=t?t:{},null!=t?t.buttonDesc:t,{name:"if",hash:{},fn:e.program(55,n,0),inverse:e.noop,data:n}))?r:"")+" "},55:function(e,t,a,l,n){var r;return' <span class="pR cbBtn"> '+(null!=(r=e.invokePartial(l.toolTipTemplate,t,{name:"toolTipTemplate",data:n,helpers:a,partials:l,decorators:e.decorators}))?r:"")+" </span> "},57:function(e,t,a,l,n,r,i){var o;return" "+(null!=(o=a.each.call(null!=t?t:{},null!=t?t.customButtonMap:t,{name:"each",hash:{},fn:e.program(58,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "},58:function(e,t,a,l,n,r,i){var o;return" "+(null!=(o=a.each.call(null!=t?t:{},t,{name:"each",hash:{},fn:e.program(59,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "},59:function(e,t,a,l,n,r,i){var o,s=null!=t?t:{};return" "+(null!=(o=a.ifEquals.call(s,a.incre.call(s,n&&n.index,{name:"incre",hash:{},data:n}),1,{name:"ifEquals",hash:{},fn:e.program(60,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "},60:function(e,t,a,l,n,r,i){var o=e.lambda,s=e.escapeExpression,d=null!=t?t:{};return' <span id = "customButtonDetails" class="customPluswithImpotBtnCon mR8 posRel" style="z-index:10" onclick="sE(event);"> <input type="button"  id =  "customButtonDetailsHead" class="newwhitebtn customImportBtn custBtnCreateClone" value="'+s(o(null!=t?t.name:t,t))+'" style="border-left:0  !important; border-right:solid 1px #e3e3e3" onclick="return CustomButtonJSObjectInit.execute(\''+s(o(null!=t?t.key:t,t))+"','"+s(o(null!=i[2]?i[2].buttonPosition:i[2],t))+"','"+s(o(null!=i[2]?i[2].ENTITYID:i[2],t))+"','','"+s(o(null!=i[2]?i[2].module:i[2],t))+"');\" onmouseover= \"CustomButtonJSObjectInit.showCusBtnDetTt(this,'"+s(a.encodeJS.call(d,null!=t?t.name:t,{name:"encodeJS",hash:{},data:n}))+"','"+s(a.encodeJS.call(d,null!=t?t.desc:t,{name:"encodeJS",hash:{},data:n}))+'\')";  onmouseout = "CustomButtonJSObjectInit.hideCusBtnDetTt();"> <a id = "detailDropDownHead" class="newwhitebtn cbDropDown  fR" value="&nbsp;&nbsp;New"  id="dwnBtn" onclick=" CustomButtonJSObjectInit.getCustomButtonDtls(\''+s(a.encodeJS.call(d,a.ObjToString.call(d,null!=i[2]?i[2].customButtonMap:i[2],{name:"ObjToString",hash:{},data:n}),{name:"encodeJS",hash:{},data:n}))+"','"+s(o(null!=i[2]?i[2].module:i[2],t))+"','"+s(o(null!=i[2]?i[2].buttonPosition:i[2],t))+"','custBtnCreateClone','sortableCreateView','');\" ></a> </span> "},62:function(e,t,a,l,n){return" <tr><td></td> <td><br> <span id='recurringspan' class ='mandatory'> "+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.recurringact.warning","Tasks",{name:"getI18n",hash:{},data:n}))+" </span> </td></tr> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,l,n,r,i){var o;return" "+(null!=(o=a.isNotPartOf.call(null!=t?t:{},"Events,Consents,Appointments,JobSheets",null!=t?t.module:t,{name:"isNotPartOf",hash:{},fn:e.program(1,n,0,r,i),inverse:e.noop,data:n}))?o:"")+" "},usePartial:!0,useData:!0,useDepths:!0}),t.crmCreateLayout=e({1:function(e,t,a,l,n){var r;return" "+(null!=(r=a.ifNotEquals.call(null!=t?t:{},null!=t?t.isFrom:t,"clientPortal",{name:"ifNotEquals",hash:{},fn:e.program(2,n,0),inverse:e.noop,data:n}))?r:"")+' <div id="rwb" class="rwb"> '},2:function(e,t,a,l,n){var r=null!=t?t:{},i=e.escapeExpression,o=e.lambda;return' <form action="'+i(a.getCrmBasePath.call(r,{name:"getCrmBasePath",hash:{},data:n}))+'/CreateCommonModule.do" method="POST" name="createEntityNewForm" data-module="'+i(o(null!=t?t.module:t,t))+'" data-status="'+i(o(null!=t?t.currentStatus:t,t))+'" onSubmit="return crmTemplate.submitCreate(\''+i(a.encodeJS.call(r,null!=t?t.module:t,{name:"encodeJS",hash:{},data:n}))+'\')"> <input type="submit" style="position:absolute;top:-1000px" ></input> '},4:function(e,t,a,l,n){return" <div> "},6:function(e,t,a,l,n){var r,i=null!=t?t:{};return" <lyte-alert id=\"zCampAlert\" lt-prop-yield='true' lt-prop-top='0' lt-prop-show-close-button=\"false\"> <template is='registerYield' yield-name='alert'> <lyte-alert-content> <p class=\"mB10 mT15\">"+(null!=(r=a.getI18n.call(i,"crm.zcampaign.verify.sender.address.to.continue.dynamic",a.getIntegrationName.call(i,"ZOHO_CAMPAIGNS",{name:"getIntegrationName",hash:{},data:n}),{name:"getI18n",hash:{},data:n}))?r:"")+"</p> </lyte-alert-content> </template> </lyte-alert> "},8:function(e,t,a,l,n){return""},10:function(e,t,a,l,n){return" </div> </form> "},12:function(e,t,a,l,n){return" </div> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,l,n){var r,i=null!=t?t:{};return" "+(null!=(r=a.isNotPartOf.call(i,"Events,Consents",null!=t?t.module:t,{name:"isNotPartOf",hash:{},fn:e.program(1,n,0),inverse:e.program(4,n,0),data:n}))?r:"")+' <div align="center"> <span id="unique" style="display:none;" class="warningAlert"></span> </div> '+(null!=(r=a.ifEquals.call(i,null!=t?t.module:t,"Campaigns",{name:"ifEquals",hash:{},fn:e.program(6,n,0),inverse:e.noop,data:n}))?r:"")+"  "+(null!=(r=a.setHeadingLayout.call(i,t,{name:"setHeadingLayout",hash:{},fn:e.program(8,n,0),inverse:e.noop,data:n}))?r:"")+"   <div "+(null!=(r=a.setRequiredAttributes.call(i,t,null!=t?t.module:t,"htmlContainer","*",{name:"setRequiredAttributes",hash:{},fn:e.program(8,n,0),inverse:e.noop,data:n}))?r:"")+"> </div> "+(null!=(r=a.isNotPartOf.call(i,"Events,Consents",null!=t?t.module:t,{name:"isNotPartOf",hash:{},fn:e.program(10,n,0),inverse:e.program(12,n,0),data:n}))?r:"")},useData:!0}),t.crmCreateSectionLayout=e({1:function(e,t,a,l,n){return' class="fitToScreen pL30 pR30 editParentSection" '},3:function(e,t,a,l,n){var r;return' class="editParentSection pL30 pR30 '+(null!=(r=a.ifNotEquals.call(null!=t?t:{},null!=(r=null!=t?t.currentSection:t)?r.subFormTabId:r,"null",{name:"ifNotEquals",hash:{},fn:e.program(4,n,0),inverse:e.noop,data:n}))?r:"")+'"'},4:function(e,t,a,l,n){return"subformParentSection"},6:function(e,t,a,l,n){return' class="eventForm-ins-create eventsPage pL30 pR30" '},8:function(e,t,a,l,n){return""},10:function(e,t,a,l,n){return' <ul id="secContent_'+e.escapeExpression(a.getSectionName.call(null!=t?t:{},null!=t?t.currentSection:t,{name:"getSectionName",hash:{},data:n}))+'" style="height: 340px; overflow-x: hidden; overflow-y: auto;" class="newSetup eventCreateContainer"> '},12:function(e,t,a,l,n){var r;return" <div "+(null!=(r=a.setRequiredAttributes.call(null!=t?t:{},t,null!=t?t.module:t,"sectionContent","*",{name:"setRequiredAttributes",hash:{},fn:e.program(8,n,0),inverse:e.noop,data:n}))?r:"")+"> "},14:function(e,t,a,l,n){var r;return" "+(null!=(r=a.ifEquals.call(null!=t?t:{},null!=t?t.currentStatus:t,"setup",{name:"ifEquals",hash:{},fn:e.program(15,n,0),inverse:e.noop,data:n}))?r:"")+" "},15:function(e,t,a,l,n){return" </ul> "},17:function(e,t,a,l,n){return" </div> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,l,n){var r,i=null!=t?t:{};return' <div  id="secDiv_'+e.escapeExpression(a.getSectionName.call(i,null!=t?t.currentSection:t,{name:"getSectionName",hash:{},data:n}))+'" '+(null!=(r=a.ifAllMatch.call(i,"Product Details","=",null!=(r=null!=t?t.currentSection:t)?r.name:r,null!=(r=null!=t?t.currentSection:t)?r.subFormTabId:r,"=","null",{name:"ifAllMatch",hash:{},fn:e.program(1,n,0),inverse:e.program(3,n,0),data:n}))?r:"")+" "+(null!=(r=a.ifEquals.call(i,null!=t?t.module:t,"Events",{name:"ifEquals",hash:{},fn:e.program(6,n,0),inverse:e.noop,data:n}))?r:"")+">  "+(null!=(r=a.setSectionTitle.call(i,t,null!=t?t.currentSection:t,{name:"setSectionTitle",hash:{},fn:e.program(8,n,0),inverse:e.noop,data:n}))?r:"")+"   "+(null!=(r=a.ifAllMatch.call(i,null!=t?t.currentStatus:t,"=","setup",null!=t?t.module:t,"=","Events",{name:"ifAllMatch",hash:{},fn:e.program(10,n,0),inverse:e.program(12,n,0),data:n}))?r:"")+" "+(null!=(r=a.ifEquals.call(i,null!=t?t.module:t,"Events",{name:"ifEquals",hash:{},fn:e.program(14,n,0),inverse:e.program(17,n,0),data:n}))?r:"")+"  </div>"},useData:!0}),t.crmCreateSectionTitle=e({1:function(e,t,a,l,n){var r,i=null!=t?t:{};return" <table "+(null!=(r=a.setRequiredAttributes.call(i,t,null!=t?t.module:t,"sectionHeading","*",{name:"setRequiredAttributes",hash:{},fn:e.program(2,n,0),inverse:e.noop,data:n}))?r:"")+'> <tbody> <tr> <td class="contHeadInfo"> '+e.escapeExpression(e.lambda(null!=(r=null!=t?t.currentSection:t)?r.displaylabel:r,t))+" "+(null!=(r=a.isNotEmpty.call(i,null!=(r=null!=t?t.currentSection:t)?r.subFormTabId:r,{name:"isNotEmpty",hash:{},fn:e.program(4,n,0),inverse:e.noop,data:n}))?r:"")+" </td> "+(null!=(r=a.ifAllMatch.call(i,null!=(r=null!=t?t.currentSection:t)?r.systemName:r,"=","Address Information",null!=t?t.enableCopyAddress:t,"=",!0,{name:"ifAllMatch",hash:{},fn:e.program(6,n,0),inverse:e.noop,data:n}))?r:"")+" </tr> </tbody> </table> "},2:function(e,t,a,l,n){return""},4:function(e,t,a,l,n){return' <i class="dIB svgIcons info_icon vmiddle subformTooltip cP infotoolTip"></i> '},6:function(e,t,a,l,n){return' <td class="alignright"> <input type="button" onclick="crmTemplate.showCopyAddressMenu(event);sE(event);" id="copyAddress" name="copyAddress" cscript-tag="copy_address" class="newgraybtndd btn newwhitebtn" value="'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.button.copy.address",{name:"getI18n",hash:{},data:n}))+'"></input> </td> '},compiler:[7,">= 4.0.0"],main:function(e,t,a,l,n){var r;return"  "+(null!=(r=a.ifNotEquals.call(null!=t?t:{},null!=t?t.module:t,"Events",{name:"ifNotEquals",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?r:"")+" "},useData:!0}),t.crmEventMeeting=e({1:function(e,t,a,l,n,r,i){var o,s=null!=t?t:{};return" <div id='CrmEventMeetingInteg' data-zcqa='CrmEventMeetingInteg'> <div class='mettingpref_div tabDivCreate nobdr mT10 mB2'> <label class='newCustomchkbox-md pR5 vat dIB'> <input type='checkbox' id='meetingInclude' onclick='Events.changeLocationValue(\"CreatePop\")' checked> <span class='vam chkbxIcon'></span><span class='dIB vam'></span> </label> <span class='dIB gotomettingpreference vat'> <span class='dIB mR2'>"+e.escapeExpression(e.lambda(null!=t?t.include_desc:t,t))+'</span> <a id="context-helplink" class="toplink" onmouseover="Events.showMeetingDetailsTooltip()" onmouseout="crmui.hideTooltip()"></a> </span> </div> <div class=\'mettingpref_div tabDivCreate\' id="meetingOnlineProviders"> '+(null!=(o=a.ifEquals.call(s,null!=(o=null!=t?t.meetingPref:t)?o.length:o,1,{name:"ifEquals",hash:{},fn:e.program(2,n,0,r,i),inverse:e.program(4,n,0,r,i),data:n,blockParams:r}))?o:"")+" "+(null!=(o=a.ifEquals.call(s,null!=(o=null!=t?t.meetingPref:t)?o.length:o,1,{name:"ifEquals",hash:{},fn:e.program(10,n,0,r,i),inverse:e.program(12,n,0,r,i),data:n,blockParams:r}))?o:"")+" </div> </div> "},2:function(e,t,a,l,n){var r,i=e.escapeExpression;return' <select id=\'Crm_Events_MeetingSolutions_select\' style="display:none"> <option selected name="'+i(e.lambda(null!=(r=null!=(r=null!=t?t.meetingPref:t)?r[0]:r)?r.toolName:r,t))+'"> '+i(a.getToolName.call(null!=t?t:{},null!=(r=null!=(r=null!=t?t.meetingPref:t)?r[0]:r)?r.toolName:r,{name:"getToolName",hash:{},data:n}))+"</option> </select>  "},4:function(e,t,a,l,n,r,i){var o,s=null!=t?t:{};return' <div class="labelTabCreate">'+e.escapeExpression(a.getI18n.call(s,"crm.event.online.provider",{name:"getI18n",hash:{},data:n,blockParams:r}))+"</div>\x3c!-- --\x3e<div class='labelValCreate'> <select id='Crm_Events_MeetingSolutions_select' onchange='Events.changeLocationValue(\"CreatePop\")'> "+(null!=(o=a.each.call(s,null!=t?t.meetingPref:t,{name:"each",hash:{},fn:e.program(5,n,1,r,i),inverse:e.noop,data:n,blockParams:r}))?o:"")+" </select> </div> "},5:function(e,t,a,l,n,r,i){var o;return" "+e.escapeExpression(e.lambda(null!=(o=r[0][0])?o.toolName:o,t))+" "+(null!=(o=a.ifEquals.call(null!=t?t:{},null!=(o=r[0][0])?o.toolName:o,null!=i[1]?i[1].toolName:i[1],{name:"ifEquals",hash:{},fn:e.program(6,n,0,r,i),inverse:e.program(8,n,0,r,i),data:n,blockParams:r}))?o:"")+" "},6:function(e,t,a,l,n,r){var i,o=e.escapeExpression;return' <option selected name="'+o(e.lambda(null!=(i=r[1][0])?i.toolName:i,t))+'"> '+o(a.getToolName.call(null!=t?t:{},null!=(i=r[1][0])?i.toolName:i,{name:"getToolName",hash:{},data:n,blockParams:r}))+" </option> "},8:function(e,t,a,l,n,r){var i,o=e.escapeExpression;return' <option name="'+o(e.lambda(null!=(i=r[1][0])?i.toolName:i,t))+'"> '+o(a.getToolName.call(null!=t?t:{},null!=(i=r[1][0])?i.toolName:i,{name:"getToolName",hash:{},data:n,blockParams:r}))+" </option> "},10:function(e,t,a,l,n){var r;return' <span class="errMsg errorMsgDesc" id="errorMsg_authorizationError" style="clear: both;color: rgb(221, 0, 0);font-size:1.1rem;display:none;">'+(null!=(r=a.getMeetingErrorMsg.call(null!=t?t:{},null!=(r=null!=(r=null!=t?t.meetingPref:t)?r[0]:r)?r.toolName:r,"crm.event.meeting.errormsg1",{name:"getMeetingErrorMsg",hash:{},data:n}))?r:"")+"</span> "},12:function(e,t,a,l,n){var r;return' <span class="errMsg errorMsgDesc left0" id="errorMsg_authorizationError" style="clear: both;color: rgb(221, 0, 0);font-size:1.1rem;display:none;">'+(null!=(r=a.getMeetingErrorMsg.call(null!=t?t:{},null!=(r=null!=(r=null!=t?t.meetingPref:t)?r[0]:r)?r.toolName:r,"crm.event.meeting.errormsg2",{name:"getMeetingErrorMsg",hash:{},data:n}))?r:"")+"</span "},14:function(e,t,a,l,n,r,i){var o;return" "+(null!=(o=a.ifEquals.call(null!=t?t:{},null!=t?t.currentStatus:t,"edit",{name:"ifEquals",hash:{},fn:e.program(15,n,0,r,i),inverse:e.program(25,n,0,r,i),data:n,blockParams:r}))?o:"")+" "},15:function(e,t,a,l,n,r,i){var o,s=null!=t?t:{};return" <div id='CrmEventMeetingInteg' data-zcqa='CrmEventMeetingInteg'> <div class='mettingpref_div tabDivCreate nobdr mT10 mB2'> <label class='newCustomchkbox-md pR5 vat dIB'> <input type='checkbox' id='meetingInclude' onclick='Events.changeLocationValue(\"CreatePop\")' data-zcqa='meetingIncludeCheckbox'> <span class='vam chkbxIcon'></span><span class='dIB vam'></span> </label> <span class='dIB gotomettingpreference vat'> <span class='dIB mR2'>"+e.escapeExpression(e.lambda(null!=t?t.include_desc:t,t))+'</span> <a id="context-helplink" class="toplink" onmouseover="Events.showMeetingDetailsTooltip()" onmouseout="crmui.hideTooltip()"></a> </span> </div> <div class=\'mettingpref_div tabDivCreate\' id="meetingOnlineProviders" style="display:none;margin-bottom :15px;" > '+(null!=(o=a.ifEquals.call(s,null!=(o=null!=t?t.meetingPref:t)?o.length:o,1,{name:"ifEquals",hash:{},fn:e.program(16,n,0,r,i),inverse:e.program(18,n,0,r,i),data:n,blockParams:r}))?o:"")+" "+(null!=(o=a.ifEquals.call(s,null!=(o=null!=t?t.meetingPref:t)?o.length:o,1,{name:"ifEquals",hash:{},fn:e.program(21,n,0,r,i),inverse:e.program(23,n,0,r,i),data:n,blockParams:r}))?o:"")+" </div> </div> "},16:function(e,t,a,l,n){var r,i=e.escapeExpression;return" <select id='Crm_Events_MeetingSolutions_select' style=\"display:none\" data-zcqa='meetingIncludeToolSelectbox'> <option selected name=\""+i(e.lambda(null!=(r=null!=(r=null!=t?t.meetingPref:t)?r[0]:r)?r.toolName:r,t))+'"> '+i(a.getToolName.call(null!=t?t:{},null!=(r=null!=(r=null!=t?t.meetingPref:t)?r[0]:r)?r.toolName:r,{name:"getToolName",hash:{},data:n}))+"</option> </select>  "},18:function(e,t,a,l,n,r,i){var o,s=null!=t?t:{};return' <div class="labelTabCreate">'+e.escapeExpression(a.getI18n.call(s,"crm.event.online.provider",{name:"getI18n",hash:{},data:n,blockParams:r}))+"</div>\x3c!-- --\x3e<div class='labelValCreate'> <select id='Crm_Events_MeetingSolutions_select' data-zcqa='meetingIncludeToolSelectbox' onchange='Events.changeLocationValue(\"CreatePop\")'> "+(null!=(o=a.each.call(s,null!=t?t.meetingPref:t,{name:"each",hash:{},fn:e.program(19,n,1,r,i),inverse:e.noop,data:n,blockParams:r}))?o:"")+" </select> </div> "},19:function(e,t,a,l,n,r,i){var o;return" "+(null!=(o=a.ifEquals.call(null!=t?t:{},null!=(o=r[0][0])?o.toolName:o,null!=i[1]?i[1].toolName:i[1],{name:"ifEquals",hash:{},fn:e.program(6,n,0,r,i),inverse:e.program(8,n,0,r,i),data:n,blockParams:r}))?o:"")+" "},21:function(e,t,a,l,n){var r;return' <span class="errMsg errorMsgDesc" id="errorMsg_authorizationError" style="clear: both;color: rgb(221, 0, 0);font-size: 11px;display:none;">'+(null!=(r=a.getMeetingErrorMsg.call(null!=t?t:{},null!=(r=null!=(r=null!=t?t.meetingPref:t)?r[0]:r)?r.toolName:r,"crm.event.meeting.errormsg1",{name:"getMeetingErrorMsg",hash:{},data:n}))?r:"")+"</span> "},23:function(e,t,a,l,n){var r;return' <span class="errMsg errorMsgDesc left0" id="errorMsg_authorizationError" style="clear: both;color: rgb(221, 0, 0);font-size: 11px;display:none;">'+(null!=(r=a.getMeetingErrorMsg.call(null!=t?t:{},null!=(r=null!=(r=null!=t?t.meetingPref:t)?r[0]:r)?r.toolName:r,"crm.event.meeting.errormsg2",{name:"getMeetingErrorMsg",hash:{},data:n}))?r:"")+"</span "},25:function(e,t,a,l,n,r){var i,o=null!=t?t:{};return" <div id='CrmEventMeetingInteg' data-zcqa='CrmEventMeetingInteg'> <div class='mettingpref_div tabDivCreate nobdr mT10 mB2'> <label class='newCustomchkbox-md pR5 vat dIB'> <input type='checkbox' id='meetingInclude' onclick='Events.changeLocationValue(\"CreatePop\")' data-zcqa='meetingIncludeCheckbox'> <span class='vam chkbxIcon'></span><span class='dIB vam'></span> </label> <span class='dIB gotomettingpreference vat'> <span class='dIB mR2'>"+e.escapeExpression(e.lambda(null!=t?t.include_desc:t,t))+'</span> <a id="context-helplink" class="toplink" onmouseover="Events.showMeetingDetailsTooltip()" onmouseout="crmui.hideTooltip()"></a> </span> </div> <div class=\'mettingpref_div tabDivCreate\' id="meetingOnlineProviders" style="display:none;margin-bottom :15px;" > '+(null!=(i=a.ifEquals.call(o,null!=(i=null!=t?t.meetingPref:t)?i.length:i,1,{name:"ifEquals",hash:{},fn:e.program(16,n,0,r),inverse:e.program(26,n,0,r),data:n,blockParams:r}))?i:"")+" "+(null!=(i=a.ifEquals.call(o,null!=(i=null!=t?t.meetingPref:t)?i.length:i,1,{name:"ifEquals",hash:{},fn:e.program(10,n,0,r),inverse:e.program(12,n,0,r),data:n,blockParams:r}))?i:"")+" </div> </div>  "},26:function(e,t,a,l,n,r){var i,o=null!=t?t:{};return' <div class="labelTabCreate">'+e.escapeExpression(a.getI18n.call(o,"crm.event.online.provider",{name:"getI18n",hash:{},data:n,blockParams:r}))+"</div>\x3c!-- --\x3e<div class='labelValCreate'> <select id='Crm_Events_MeetingSolutions_select' data-zcqa='meetingIncludeToolSelectbox' onchange='Events.changeLocationValue(\"CreatePop\")'> "+(null!=(i=a.each.call(o,null!=t?t.meetingPref:t,{name:"each",hash:{},fn:e.program(27,n,1,r),inverse:e.noop,data:n,blockParams:r}))?i:"")+" </select> </div> "},27:function(e,t,a,l,n,r){var i;return" "+(null!=(i=a.ifEquals.call(null!=t?t:{},null!=(i=r[0][0])?i.toolName:i,"ZohoMeeting",{name:"ifEquals",hash:{},fn:e.program(28,n,0,r),inverse:e.program(8,n,0,r),data:n,blockParams:r}))?i:"")+" "},28:function(e,t,a,l,n,r){var i,o=e.escapeExpression;return' <option selected name="'+o(e.lambda(null!=(i=r[1][0])?i.toolName:i,t))+'"> '+o(a.getToolName.call(null!=t?t:{},"ZohoMeeting",{name:"getToolName",hash:{},data:n,blockParams:r}))+" </option> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,l,n,r,i){var o;return(null!=(o=a.ifEquals.call(null!=t?t:{},null!=t?t.currentStatus:t,"clone",{name:"ifEquals",hash:{},fn:e.program(1,n,0,r,i),inverse:e.program(14,n,0,r,i),data:n,blockParams:r}))?o:"")+" "},useData:!0,useDepths:!0,useBlockParams:!0}),t.dontSendReminderDiv=e({compiler:[7,">= 4.0.0"],main:function(e,t,a,l,n){var r=null!=t?t:{},i=e.escapeExpression;return'<div class="newpopup mWid600 zi34 p25" id="dontSendReminderDiv" style="display:none; z-index:100" onclick="renderingUtils.stopEvent(event)"> <p class="msgBody mT15">'+i(a.getI18n.call(r,"crm.event.inv.add.alert.msg2",{name:"getI18n",hash:{},data:n}))+'</p> <div class="mT30 txt-ctr"> <input type="button" id="dontSendReminderDivOk" class="newgraybtn" value=\''+i(a.getI18n.call(r,"crm.button.ok",{name:"getI18n",hash:{},data:n}))+"' onclick=\"$('#dontSendReminderDiv').hide();$('.freezeLayer_zi32').remove();\" ></input> </div> </div>"},useData:!0}),t.editRecAlertMsgDiv=e({compiler:[7,">= 4.0.0"],main:function(e,t,a,l,n){var r=null!=t?t:{},i=e.escapeExpression;return'<div class="newpopup mWid600 zi32 p25" id="editRecAlertMsgDiv" style="display:none; z-index:100" onclick="renderingUtils.stopEvent(event)"> <p>'+i(a.getI18n.call(r,"crm.event.rec.edit.msg1",a.getModuleDisplayName.call(r,!0,!1,{name:"getModuleDisplayName",hash:{},data:n}),{name:"getI18n",hash:{},data:n}))+' </p> <p class="mT15"> '+i(a.getI18n.call(r,"crm.event.rec.edit.msg2",a.getModuleDisplayName.call(r,!0,!1,{name:"getModuleDisplayName",hash:{},data:n}),{name:"getI18n",hash:{},data:n}))+' </p> <div class="mT30 txt-ctr"> <input type="button" class="greenbtn allUpCome" value="'+i(a.getI18n.call(r,"crm.event.rec.edit.btn.all",a.getModuleDisplayName.call(r,!1,!0,{name:"getModuleDisplayName",hash:{},data:n}),{name:"getI18n",hash:{},data:n}))+'" ></input> <input type="button" class="newgraybtn onlyThis mL10" value="'+i(a.getI18n.call(r,"crm.event.rec.edit.btn.one",a.getModuleDisplayName.call(r,!0,!0,{name:"getModuleDisplayName",hash:{},data:n}),{name:"getI18n",hash:{},data:n}))+'" ></input> <a href="javascript:void(0);" class="cancel mL10"> '+i(a.getI18n.call(r,"crm.button.cancel",{name:"getI18n",hash:{},data:n}))+" </a> </div> </div>"},useData:!0}),t.eventCreatePopup=e({compiler:[7,">= 4.0.0"],main:function(e,t,a,l,n){var r=null!=t?t:{},i=e.escapeExpression;return' <div class="eventPop eventStructStyleChange" id="eventCreatePopup" style="width:500px;display:none"> <span id="eventPopupArrow" class="arrwBottom"></span> <div id="eventCreateContainerDiv" class="eventBrf floatL pR" style="width: 100%; height: 470px;"> <div id="eventCreationDiv" class="eventForm-create" style="height:395px;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;margin:0;  width: 100%;"> <div class="contHeadInfo eventHeaderStyle f21">'+i(a.getI18n.call(r,"crm.events.information.title",a.getModuleDisplayName.call(r,!0,!0,{name:"getModuleDisplayName",hash:{},data:n}),{name:"getI18n",hash:{},data:n}))+'</div> <form action="'+i(a.getCrmBasePath.call(r,{name:"getCrmBasePath",hash:{},data:n}))+'/CreateCommonModule.do" method="POST" name="createEventForm" onsubmit="return crmTemplate.submitCreate(\'Events\');"> <div id="eventCreationInnerDiv" class="eventForm-ins bdrbox" style="width: 100%;"></div> <input type="submit" style="display:none"></input> </form> </div> </div> <div class="clearB"></div> <div class="eventFooter mL0"> <div class="vInfo"> <div class="eEdit"> <a data-zcqa="Lookup_event_showMoreFiledsLink" id="showMoreFiledsLink" href="javascript:void(0);" class="floatL addm" style="margin-top:5px" onclick="Events.showMoreFields()">'+i(a.getI18n.call(r,"crm.events.more.details.link",{name:"getI18n",hash:{},data:n}))+'</a> <a href="javascript:void(0);" class="red fL mT5 dN" id="removeEvents_link" style="display:none" onclick="ctiApiNotifier.removeEvent();">'+i(a.getI18n.call(r,"crm.label.remove",{name:"getI18n",hash:{},data:n}))+'</a> <p class="floatR"> <input type="button" data-zcqa="Lookup_event_cancelEventBtn" id="cancelEventBtn" onclick="Events.closeEntity(true)" class="newgraybtn" value="'+i(a.getI18n.call(r,"crm.button.cancel",{name:"getI18n",hash:{},data:n}))+'"> <input type="button" data-zcqa="Lookup_event_saveEventsBtn" id="saveEventsBtn" onclick="Events.saveEntity(event)" class="primarybtn mR0" value="'+i(a.getI18n.call(r,"crm.button.save",{name:"getI18n",hash:{},data:n}))+'"> <input type="button" data-zcqa="Lookup_event_doneRecurringBtn" id="doneRecurringBtn" onclick="Events.doneRecuring()" style="display:none" class="primarybtn mR0" value="'+i(a.getI18n.call(r,"Done",{name:"getI18n",hash:{},data:n}))+'"> <input type="button" data-zcqa="Lookup_event_doneAddParticipantBtn" id="doneAddParticipantBtn" onclick="Events.doneAddParticipants()" style="display:none" class="primarybtn mR0" value="'+i(a.getI18n.call(r,"Done",{name:"getI18n",hash:{},data:n}))+'"> </p> </div> </div> </div> </div>'},useData:!0}),t.eventMeetingErrorPop=e({1:function(e,t,a,l,n){return' <p class="mT10 f13">'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.event.meeting.expired.msg.new",null!=t?t.crmAppName:t,null!=t?t.brandName:t,{name:"getI18n",hash:{},data:n}))+"</p> "},3:function(e,t,a,l,n){return' <p class="mT10 f13">'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.event.meeting.expired.msg.nonadmin.new",null!=t?t.crmAppName:t,null!=t?t.brandName:t,{name:"getI18n",hash:{},data:n}))+"</p> "},5:function(e,t,a,l,n){var r=null!=t?t:{},i=e.escapeExpression;return' <div class="mT15 aligncenter"> <input type="button" class="greenbtn" value=\''+i(a.getI18n.call(r,"crm.button.buy.now",{name:"getI18n",hash:{},data:n}))+'\' onclick="Events.meetingBuyNowClicked()" ></input> <input type="button" class="outlineredlight newbutton" value=\''+i(a.getI18n.call(r,"crm.event.meeting.disablepoup.header","Zoho Meeting",{name:"getI18n",hash:{},data:n}))+"' onclick=\"Events.disableMeetingTool('ZohoMeeting');\" ></input> </div> "},7:function(e,t,a,l,n){return' <div class="mT15 aligncenter"> <input type="button" class="newgraybtn" value=\''+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.button.ok",{name:"getI18n",hash:{},data:n}))+'\' onclick="Events.meetingTrialExpireOkClicked()" ></input> </div> '},compiler:[7,">= 4.0.0"],main:function(e,t,a,l,n){var r,i=null!=t?t:{};return'<div class="newpopup w600 p0" id="meetingBuy"> <div class="popup-model-content"> <span class="alertIcons-lg dIB fL" style="margin-top: 35px;"></span> <div class="w450 fL mL30"> <div class="f16 crm-font-bold">'+e.escapeExpression(a.getI18n.call(i,"crm.event.meeting.expired.new",a.getIntegrationName.call(i,"ZOHO_MEETING",{name:"getIntegrationName",hash:{},data:n}),{name:"getI18n",hash:{},data:n}))+"</div> "+(null!=(r=a.ifEquals.call(i,null!=t?t.isOrgAdmin:t,!0,{name:"ifEquals",hash:{},fn:e.program(1,n,0),inverse:e.program(3,n,0),data:n}))?r:"")+' </div> <div class="cB"></div> '+(null!=(r=a.ifEquals.call(i,null!=t?t.isOrgAdmin:t,!0,{name:"ifEquals",hash:{},fn:e.program(5,n,0),inverse:e.program(7,n,0),data:n}))?r:"")+" </div> </div>"},useData:!0}),t.invitationConfirmDiv=e({compiler:[7,">= 4.0.0"],main:function(e,t,a,l,n){var r=null!=t?t:{},i=e.escapeExpression;return'<div class="newpopup mWid600 zi32 p25" id="invitationConfirmDiv" style="display:none; z-index:100" onclick="renderingUtils.stopEvent(event)"> <p class="msgTitle">'+i(a.getI18n.call(r,"crm.event.inv.add.alert.msg1",{name:"getI18n",hash:{},data:n}))+'</p> <p class="msgBody mT15">'+i(a.getI18n.call(r,"crm.event.inv.add.alert.msg2",{name:"getI18n",hash:{},data:n}))+'</p> <div class="mT30 txt-ctr alignleft"> <input type="button" class="greenbtn send" value="'+i(a.getI18n.call(r,"crm.button.send",{name:"getI18n",hash:{},data:n}))+'" ></input> <input type="button" class="newgraybtn dntSend" value="'+i(a.getI18n.call(r,"crm.button.send",{name:"getI18n",hash:{},data:n}))+'" ></input> <a class="cancel mL8" href="javascript:void(0);"> '+i(a.getI18n.call(r,"crm.button.cancel",{name:"getI18n",hash:{},data:n}))+"</a> </div> </div>"},useData:!0}),t.meetingDurationField=e({compiler:[7,">= 4.0.0"],main:function(e,t,a,l,n){return'<div id="Events_fldRow_Duration" class="DURATION tabDivCreate"> <div class="labelTabCreate pL5 newmandatory fL" id="Crm_Events_DURATION_label"> '+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.events.duration",{name:"getI18n",hash:{},data:n}))+' </div> <div class="labelValCreate fL"> <select id="Crm_Events_DURATION" data-zcqa="meetingDtSel"> <option value="30" selected>30 mins</option> <option value="45">45 mins</option> <option value="60">1 hour</option> </select> </div> <div class="clearB"></div> </div>'},useData:!0}),t.pricingDetails=e({compiler:[7,">= 4.0.0"],main:function(e,t,a,l,n){var r=null!=t?t:{},i=e.escapeExpression;return"<div id=\"pricingList\"> <table width='100%' border=0 cellspacing=0 cellpadding=0> <tr id='tablehead' class='tableHeadBg'> <td nowrap=true style='padding:3px;'> <span style='color:#900;'>*"+i(a.getI18n.call(r,"From Range",{name:"getI18n",hash:{},data:n}))+" </span> </td> <td nowrap=true style='padding:3px;'> <span style='color:#900;'>* "+i(a.getI18n.call(r,"To Range",{name:"getI18n",hash:{},data:n}))+"</span> </td> <td nowrap=true style='padding:3px;'> <span style='color:#900;'>*"+i(a.getI18n.call(r,"Discount (%)",{name:"getI18n",hash:{},data:n}))+'</span> </td> <td nowrap=true class=\'tableHead\' align=\'center\' width=\'15\'style=\'padding:3px\'> </td> </tr> <tr id=\'hrow1\' class=\'hrow1\'> </tr> </table> </div> <table width="100%" border="0" cellspacing="2" cellpadding="2" bgcolor="#FFFFFF"> <tbody> <tr> <td width="150"><input type="button" data-zcqa="addPricingDetails" class="button" value="Add" onclick="pricingDetails.create('+i(a.encodeJS.call(r,null!=t?t.ObjToString:t,t,{name:"encodeJS",hash:{},data:n}))+',true)"> </td> </tr> </tbody> </table> '},useData:!0}),t.productDetails=e({1:function(e,t,a,l,n){return' class="p30" '},3:function(e,t,a,l,n){return' <div class="f20 crm-font-bold pB15">'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.discount.pop.title",{name:"getI18n",hash:{},data:n}))+"</div> "},5:function(e,t,a,l,n){return' class="pB10" '},7:function(e,t,a,l,n){return' class="bdrBot p15" onmouseover="$(this).addClass(\'grayBg\')" onmouseout="$(this).removeClass(\'grayBg\')" '},9:function(e,t,a,l,n){return' class="p15" onmouseover="$(this).addClass(\'grayBg\')" onmouseout="$(this).removeClass(\'grayBg\')" '},11:function(e,t,a,l,n){var r=null!=t?t:{},i=e.escapeExpression;return' <div class="pT10"> <input type="button" id=\'saveDiscountType\' class="primarybtn btn_sml" value=\''+i(a.getI18n.call(r,"crm.button.done",{name:"getI18n",hash:{},data:n}))+"'> <input type=\"button\" id='cancelDiscountType' class=\"newgraybtn btn_sml\" value='"+i(a.getI18n.call(r,"crm.button.cancel",{name:"getI18n",hash:{},data:n}))+"'> </div> "},13:function(e,t,a,l,n){return" p30 w350 "},15:function(e,t,a,l,n){return" p15 w190 "},17:function(e,t,a,l,n){return'temp="handle1"'},19:function(e,t,a,l,n){return'style="display:block"'},21:function(e,t,a,l,n){return'style="display:none"'},23:function(e,t,a,l,n){var r;return" "+(null!=(r=a.productDetailsRow.call(null!=t?t:{},null!=t?t.currentField:t,null!=t?t.module:t,1,{name:"productDetailsRow",hash:{},data:n}))?r:"")+" "},25:function(e,t,a,l,n){return' <input type="button" value=\''+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.button.inventory.add.lineitems",{name:"getI18n",hash:{},data:n}))+'\' class="outlineprimary pAddLineHover mR0 mT20 cP"> '},27:function(e,t,a,l,n){return' <input type="button" value=\''+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.button.inventory.add.lineitems",{name:"getI18n",hash:{},data:n}))+'\' onclick="productDetails.showpop()" class="outlineprimary pAddLineHover mR0 mT20 cP"> '},29:function(e,t,a,l,n){return' <i class="neweditIcon dIB vam mL5 pointer lineicon" style="visibility: hidden;" id="grandTaxEditIconElem" onclick="productDetails.editGrandTax(this);sE(event)"></i> '},31:function(e,t,a,l,n){return' <i class="neweditIcon dIB vam mL5 pointer lineicon" style="visibility: hidden;" onclick="productDetails.showGrandTaxPop(this);sE(event)"></i> '},33:function(e,t,a,l,n){return""},35:function(e,t,a,l,n){var r,i=null!=t?t:{},o=e.escapeExpression;return" "+(null!=(r=a.ifEquals.call(i,null!=t?t.currentStatus:t,"setup",{name:"ifEquals",hash:{},fn:e.program(36,n,0),inverse:e.program(38,n,0),data:n}))?r:"")+' <div class=""> <a href="javascript:;" class="addProductInlineDesc">'+o(a.getI18n.call(i,"crm.button.inventory.add.lineitems",{name:"getI18n",hash:{},data:n}))+' </a> <span class="errMsg red pR20 f11 fR" id="errorMsg_Crm_'+o(e.lambda(null!=t?t.module:t,t))+'_PRODUCTDETAILS" style="color: rgb(221, 0, 0); display: none;"> * '+o(a.getI18n.call(i,"crm.inventory.alert.lineitems.empty",{name:"getI18n",hash:{},data:n}))+" </span> </div> </div> "},36:function(e,t,a,l,n){return' <div id="addLinesBtnLwr" class=" fL cP invAddLinesBtn" > '},38:function(e,t,a,l,n){var r;return' <div id="addLinesBtnLwr" class=" fL cP invAddLinesBtn" '+(null!=(r=a.ifNotEquals.call(null!=t?t:{},null!=t?t.isFrom:t,"clientPortal",{name:"ifNotEquals",hash:{},fn:e.program(39,n,0),inverse:e.noop,data:n}))?r:"")+"> "},39:function(e,t,a,l,n){return'onclick="productDetails.showpop()" '},41:function(e,t,a,l,n){return"value='1'"},43:function(e,t,a,l,n){return"value='0'"},compiler:[7,">= 4.0.0"],main:function(e,t,a,l,n){var r,i=null!=t?t:{},o=e.escapeExpression;return'<div id="discountPop" class="newpopup w320 hide" style="left: 865.5px; top: 128px;" onclick="sE(event)"> <div '+(null!=(r=a.if.call(i,null!=t?t.TAX_MIGRATION_COMPLETED:t,{name:"if",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?r:"")+"> "+(null!=(r=a.if.call(i,null!=t?t.TAX_MIGRATION_COMPLETED:t,{name:"if",hash:{},fn:e.program(3,n,0),inverse:e.noop,data:n}))?r:"")+" <div "+(null!=(r=a.if.call(i,null!=t?t.TAX_MIGRATION_COMPLETED:t,{name:"if",hash:{},fn:e.program(5,n,0),inverse:e.program(7,n,0),data:n}))?r:"")+'> <div class="noEventDiv"> <label class="rbCheckHtml"> <input type="radio" id="inventrydiscountPop" name="discType" value="percent" class="roundCheck discType cP"> <span class="rbHtml"></span> <span class="rbHtmlLb mL5">'+o(a.getI18n.call(i,"percentage",{name:"getI18n",hash:{},data:n}))+'</span> </label> <span class="pL15 vh"> <input type="text" size="5" class="discPc decimalFld newinputText1 alignRight"> <b class="pL5">%</b> </span> </div> </div> <div '+(null!=(r=a.if.call(i,null!=t?t.TAX_MIGRATION_COMPLETED:t,{name:"if",hash:{},fn:e.program(5,n,0),inverse:e.program(7,n,0),data:n}))?r:"")+'> <div class="noEventDiv"> <label class="rbCheckHtml"> <input type="radio" id="inventrydiscountPop" name="discType" value="dirPrice" class="roundCheck discType cP"> <span class="rbHtml"></span> <span class="rbHtmlLb mL5">'+o(a.getI18n.call(i,"crm.label.direct.dicount",{name:"getI18n",hash:{},data:n}))+'</span> </label> <span class="vh"> <input type="text" size="5" class="directPrice decimalFld newinputText1"> <label class="pL5"> </label> </span> </div> </div> <div '+(null!=(r=a.if.call(i,null!=t?t.TAX_MIGRATION_COMPLETED:t,{name:"if",hash:{},fn:e.program(5,n,0),inverse:e.program(9,n,0),data:n}))?r:"")+'> <div class="noEventDiv" id="frmBook"> <label class="rbCheckHtml"> <input type="radio" id="inventrydiscountPop" name="discType" value="fromPb" class="discType roundCheck cP"> <span class="rbHtml"></span> <span class="rbHtmlLb mL5">'+o(a.getI18n.call(i,"crm.inventory.discount.frompb",{name:"getI18n",hash:{},data:n}))+"</span> </label> </div> </div> "+(null!=(r=a.if.call(i,null!=t?t.TAX_MIGRATION_COMPLETED:t,{name:"if",hash:{},fn:e.program(11,n,0),inverse:e.noop,data:n}))?r:"")+' </div> </div> <div id="taxesPop"> <div class="newpopup '+(null!=(r=a.if.call(i,null!=t?t.TAX_MIGRATION_COMPLETED:t,{name:"if",hash:{},fn:e.program(13,n,0),inverse:e.program(15,n,0),data:n}))?r:"")+' whiteBg hide" style="top: 128px; left: 963px;" id="taxPop" onclick="sE(event)"> </div> <div class="newpopup '+(null!=(r=a.if.call(i,null!=t?t.TAX_MIGRATION_COMPLETED:t,{name:"if",hash:{},fn:e.program(13,n,0),inverse:e.program(15,n,0),data:n}))?r:"")+' whiteBg hide" style="top: 128px; left: 963px;" id="grandTaxPop" onclick="sE(event)"> </div> </div> \x3c!--div id="searchCreateDiv" style="position: absolute; width:100%; display:none; z-index:31"> <input type="hidden" id="invNewProductForm" value="true"> </div>--\x3e <div id="productList" '+(null!=(r=a.if.call(i,null!=t?t.isLookupAdvancedSearchEnabled:t,{name:"if",hash:{},fn:e.program(17,n,0),inverse:e.noop,data:n}))?r:"")+'> <div class="pT0 pB20 productDetailViewList" '+(null!=(r=a.if.call(i,null!=t?t.isLookupAdvancedSearchEnabled:t,{name:"if",hash:{},fn:e.program(19,n,0),inverse:e.program(21,n,0),data:n}))?r:"")+'> <div class="wrap"> <table width="100%" border="0" cellspacing="0" cellpadding="0" class="invoiceTable" id="linesTable"> <thead> <tr id="lineHeaderRow"> <th width="30%" class="openSansSemibold">'+o(a.getValueFromJSONObj.call(i,"Product Details",null!=t?t.productLineItemFields:t,{name:"getValueFromJSONObj",hash:{},data:n}))+'</th> <th width="12%" class="alignright openSansSemibold" style="padding-right:14px;">'+o(a.getI18n.call(i,"List Price",{name:"getI18n",hash:{},data:n}))+'</th> <th width="12%" class="alignright openSansSemibold">'+o(a.getI18n.call(i,"Quantity",{name:"getI18n",hash:{},data:n}))+'</th> <th width="12%" class="alignright openSansSemibold">'+o(a.getI18n.call(i,"Amount",{name:"getI18n",hash:{},data:n}))+'</th> <th width="12%" class="alignright openSansSemibold" style="padding-right:25px;">'+o(a.getValueFromJSONObj.call(i,"Discount",null!=t?t.productLineItemFields:t,{name:"getValueFromJSONObj",hash:{},data:n}))+'</th> <th width="20%" class="alignright openSansSemibold" style="padding-right:25px;">'+o(a.getValueFromJSONObj.call(i,"Tax",null!=t?t.productLineItemFields:t,{name:"getValueFromJSONObj",hash:{},data:n}))+'</th> <th width="12%" class="alignright openSansSemibold">'+o(a.getI18n.call(i,"Total",{name:"getI18n",hash:{},data:n}))+'</th> <th width="2%"></th> <th width="5%"></th> </tr> </thead> <tbody id="linesTbody"> '+(null!=(r=a.if.call(i,null!=t?t.isLookupAdvancedSearchEnabled:t,{name:"if",hash:{},fn:e.program(23,n,0),inverse:e.noop,data:n}))?r:"")+' </tbody> <tfoot> <tr> <td colspan="4" class="pNprocessPadd" style="border-bottom:none"> '+(null!=(r=a.ifEquals.call(i,null!=t?t.currentStatus:t,"setup",{name:"ifEquals",hash:{},fn:e.program(25,n,0),inverse:e.program(27,n,0),data:n}))?r:"")+' </td> <td id="summary" colspan="5" class="pNprocessPadd" style="border-bottom:none"> <table class="w100per priceTotal_tbl"> <tr> <td class="noborder"> <label class="alignright">'+o(a.getValueFromJSONObj.call(i,"Sub Total",null!=t?t.productLineItemFields:t,{name:"getValueFromJSONObj",hash:{},data:n}))+'</label> </td> <td class="noborder alignright w250"> <span class="grandVals"> </span> <input type="hidden" id="subTotal" name="property(Sub Total)" value="0"> </td> <td class="noborder w70" > </td> </tr> <tr> <td class="noborder"> <label class="alignright">'+o(a.getValueFromJSONObj.call(i,"Discount",null!=t?t.productLineItemFields:t,{name:"getValueFromJSONObj",hash:{},data:n}))+'</label> </td> <td onmouseover=\'productDetails.showCellIcon(this, true,false)\' onmouseout=\'productDetails.hideCellIcon(this, true)\' class="noborder alignright"> <span> <label class="grandVals"> </label> <input type="hidden" id="txtDiscount" name="property(Discount)" value="0"> <input type="hidden" class="discPc" id="discPc" name="property(hdnDiscPc)" value="0"> </span> </td> <td onmouseover=\'productDetails.showCellIcon(this,undefined,false)\' onmouseout=\'productDetails.hideCellIcon(this)\' class="noborder"> <i class="neweditIcon dIB vam mL5 lineicon pointer" style="visibility: hidden;" onclick="productDetails.showGrandDiscPop(this);sE(event)"></i> </td> </tr> <tr> <td class="noborder"> <label class="alignright">'+o(a.getValueFromJSONObj.call(i,"Tax",null!=t?t.productLineItemFields:t,{name:"getValueFromJSONObj",hash:{},data:n}))+'</label> </td> <td id=\'recordTaxDetTD\' onmouseover=\'productDetails.showCellIcon(this, true,false)\' onmouseout=\'productDetails.hideCellIcon(this, true)\' class="noborder alignright"> <span class="taxClickelement pR0" id=\'grandTaxDispSpan\'> <label class="grandVals"> </label> <input type="hidden" id="txtTax" name="property(Tax)" value="0"> </span> <input type="hidden" id="recordTaxDet" name="property(recordTaxDet)" class="recordTaxDet"> <input type="hidden" id="grandTaxChoices" name="property(grandTaxChoices)" class="grandTaxChoices" value=\'\'> </td> <td onmouseover=\'productDetails.showCellIcon(this,undefined,false)\' onmouseout=\'productDetails.hideCellIcon(this)\' class="noborder"> '+(null!=(r=a.if.call(i,null!=t?t.TAX_MIGRATION_COMPLETED:t,{name:"if",hash:{},fn:e.program(29,n,0),inverse:e.program(31,n,0),data:n}))?r:"")+' </td> </tr> <tr> <td> <label class="alignright">'+o(a.getValueFromJSONObj.call(i,"Adjustment",null!=t?t.productLineItemFields:t,{name:"getValueFromJSONObj",hash:{},data:n}))+'</label> </td> <td class="alignright"> <input type="text" size="8" class="textFieldEdit decimalFld cP textInLineItem alignright w100per invValidate" onkeyup="productDetails.calculateGrandTotal()" onmouseover="$(this).addClass "grayBg"}} onmouseout="$(this).removeClass "grayBg"}} onclick="$(this).select()" id="txtAdjustment" name="property(Adjustment)" value="0" style="box-shadow: none;"> </td> <td  class="noborder"> </td> </tr> <tr style="border-top:1px solid #eee; border-bottom:1px solid #eee;" class="oH p5"> <td> <label class="alignright openSansSemibold">'+o(a.getValueFromJSONObj.call(i,"Grand Total",null!=t?t.productLineItemFields:t,{name:"getValueFromJSONObj",hash:{},data:n}))+'</label> </td> <td class="alignright"> <span class="mL20 alignright grandVals openSansSemibold"> </span> <input type="hidden" id="grandTotal" name="property(Grand Total)" value="0"> </td> <td  class="noborder"> </td> </tr> </table> </td> \x3c!--<td  style="border-bottom:none"></td> <td  style="border-bottom:none"></td> --\x3e </tr> </tfoot> </table> </div> </div> '+(null!=(r=a.if.call(i,null!=t?t.isLookupAdvancedSearchEnabled:t,{name:"if",hash:{},fn:e.program(33,n,0),inverse:e.program(35,n,0),data:n}))?r:"")+" <input type='hidden' name='property(totalProductCount)' id='totalProductCount' "+(null!=(r=a.if.call(i,null!=t?t.isLookupAdvancedSearchEnabled:t,{name:"if",hash:{},fn:e.program(41,n,0),inverse:e.program(43,n,0),data:n}))?r:"")+'> </div> <div id="popup1" class="zcrm-modal zcrm-effect newPopupStyleEle newProductStyleEle" style="display: none;"> <div class="pR zcrm-content"> <div class="ui-front" id="invLinesAutoComplete"> </div> <div id="productPopup" style="max-height:750px"> <div class="pL0"> <div class="f18 openSans txtClrBlack"> <div style="position: absolute;right: 40px;top: 24px;"> <a href="javascript:;" class="newPopupCloseIcon svgIcons ico-close-small2 cP op08 mT6 fR" onclick="productDetails.closepop()">&nbsp;</a> </div> <h2 class="f20 newHeaderSty" style="padding: 10px 30px 10px 30px;background-color: #f8f8f8;border-bottom: 1px solid #eee;"> '+o(a.getI18n.call(i,"crm.inventory.select.products",{name:"getI18n",hash:{},data:n}))+' </h2> <div class="popup-model-content pT0 w900"> <span class="fL vendorProductchk" id="vendPrdsSpan"> <label class="newCustomchkbox-md"> <input type="checkbox" id="vendPrds"> <span class="chkbxIcon"></span> </label> <span> '+o(a.getI18n.call(i,"crm.vendor.products.show",{name:"getI18n",hash:{},data:n}))+' </span> </span> <table width="100%" border="0" cellpadding="0" cellspacing="0" style="border-collapse:collapse;"> <thead> <tr class=""> <th class="f13 pT10 pB8 openSansNormal bold alignleft" width="345" style="padding-right: 24px;box-sizing: border-box;">'+o(a.getI18n.call(i,"Product Details",{name:"getI18n",hash:{},data:n}))+'</th> <th class="f13 pT10 pB5 openSansNormal bold aligncenter w100">'+o(a.getI18n.call(i,"Quantity",{name:"getI18n",hash:{},data:n}))+'</th> <th class="" width="20">&nbsp;</th> </tr> </thead> <tbody id="linesInPop"> <tr> </tr> </tbody> </table> </div> <div class="popup-model-footer"> <input type="button" id="cancelAddPrdbtn" class="newgraybtn " value="'+o(a.getI18n.call(i,"crm.button.cancel",{name:"getI18n",hash:{},data:n}))+'" onclick="productDetails.closepop()"> <a href="javascript:;" class="primarybtn addFinal  dIB mR0" id="addPrdbtn" onclick="productDetails.addSave()"> '+o(a.getI18n.call(i,"crm.button.inventory.add.products",{name:"getI18n",hash:{},data:n}))+' </a> <input type="hidden" id="linesInPop" name="linesInPop"> </div> </div> </div> </div> </div> </div> </div> '},useData:!0}),t.productDetailsRow=e({1:function(e,t,a,l,n){var r=e.lambda,i=e.escapeExpression;return' <i class="neweditIcon dIB mL5 lineicon vh pointer" id=\'taxInlineEditIcon'+i(r(null!=t?t.rowNumber:t,t))+"' onclick=\"productDetails.editLineItemTax(this,"+i(r(null!=t?t.rowNumber:t,t))+');sE(event)" style="visibility: hidden;"></i> '},3:function(e,t,a,l,n){return' <i class="neweditIcon dIB mL5 lineicon vh pointer" onclick="productDetails.showtaxPop(this);sE(event)" style="visibility: hidden;"></i> '},compiler:[7,">= 4.0.0"],main:function(e,t,a,l,n){var r,i=e.lambda,o=e.escapeExpression,s=null!=t?t:{};return' <tr id="hrow'+o(i(null!=t?t.rowNumber:t,t))+'" class="pl_1 cTax sort helperBG ui-sortable-handle" onmouseover="productDetails.invLineHover(this)" onmouseout="productDetails.invLineOut(this)"> <td class="pR"> <div class="labelValCreate forLineItemInputWrap mL45"> <input type="text" class="textField nwrp tOE ui-autocomplete-input" style="width:81%" id="Crm_'+o(i(null!=t?t.module:t,t))+"_"+o(i(null!=t?t.colname:t,t))+"_"+o(i(null!=t?t.rowNumber:t,t))+'" tabindex="'+o(i(null!=t?t.tabIndex:t,t))+'" maxlength="'+o(i(null!=t?t.maxlength:t,t))+'" data-sysrefname="'+o(i(null!=t?t.sysRefName:t,t))+'" data-def-mandate="false" data-mandate="'+o(i(null!=t?t.mandate:t,t))+'" data-content-type="'+o(i(null!=t?t.type:t,t))+'" data-uitype="'+o(i(null!=t?t.uitype:t,t))+'" data-colname="'+o(i(null!=t?t.colname:t,t))+'" data-name="'+o(i(null!=t?t.colname:t,t))+'" data-maxlength="'+o(i(null!=t?t.maxlength:t,t))+'" data-customfield="'+o(i(null!=t?t.customfield:t,t))+'" data-lookup-module="'+o(i(null!=t?t.lookupModule:t,t))+'" data-decimal-length="'+o(i(null!=t?t.decimalLength:t,t))+'" data-displaylabel="'+o(i(null!=t?t.displaylabel:t,t))+'" data-old-value="" data-label="'+o(i(null!=t?t.label:t,t))+'" data-readonly="false" data-fieldid="'+o(i(null!=t?t.fieldid:t,t))+'" data-rownumber="'+o(i(null!=t?t.rowNumber:t,t))+'"data-isSubFormField="'+o(i(null!=t?t.issubformfield:t,t))+'" data-module="'+o(i(null!=t?t.module:t,t))+'"data-zcqa="lookup_'+o(i(null!=t?t.colname:t,t))+"_"+o(i(null!=t?t.rowNumber:t,t))+'" value="" autocomplete="off" placeholder="Choose Product"> <span class="dIB pR fR mT5"> <img data-module="'+o(i(null!=t?t.module:t,t))+'" data-label="Crm_'+o(i(null!=t?t.module:t,t))+"_"+o(i(null!=t?t.colname:t,t))+"_"+o(i(null!=t?t.rowNumber:t,t))+'" data-lookup-module="'+o(i(null!=t?t.lookupModule:t,t))+'" data-cid="showLookup" data-colname="'+o(i(null!=t?t.colname:t,t))+'" data-zcqa="lookup_'+o(i(null!=t?t.colname:t,t))+"_"+o(i(null!=t?t.rowNumber:t,t))+'" src="'+o(a.getCrmImageUrl.call(s,"spacer_e17b417_.gif",{name:"getCrmImageUrl",hash:{},data:n}))+'" width="17" height="19" title="" align="absmiddle" id="Crm_'+o(i(null!=t?t.module:t,t))+"_"+o(i(null!=t?t.colname:t,t))+"_"+o(i(null!=t?t.rowNumber:t,t))+'_img" class="Products-small lookup_hIconO fR mR5 hIconO productLookup" > \x3c!-- <img data-cid="clearLookup" data-zcqa="lookup_'+o(i(null!=t?t.colname:t,t))+"_"+o(i(null!=t?t.rowNumber:t,t))+'_close" src="//img.zohocdn.com/crm/images/spacer_e17b417_.gif" width="15" height="10" title="" align="absmiddle" id="Crm_'+o(i(null!=t?t.module:t,t))+"_"+o(i(null!=t?t.colname:t,t))+"_"+o(i(null!=t?t.rowNumber:t,t))+'_img" class="clear_lookupfield lookup_hIconO dIB svgIcons ico-close-small2 mL5 op5 pR cP fR mR10 hIconO">--\x3e <img src="'+o(a.getCrmImageUrl.call(s,"Spin_e41ea07_.svg",{name:"getCrmImageUrl",hash:{},data:n}))+'" width="25" height="25" align="absmiddle" id="Crm_'+o(i(null!=t?t.module:t,t))+"_"+o(i(null!=t?t.colname:t,t))+"_"+o(i(null!=t?t.rowNumber:t,t))+'_loadimg" class="vH pA lookuploader bot5" > </span> </div> <input type="hidden" id="hdnProductId'+o(i(null!=t?t.rowNumber:t,t))+'" name="property(hdnProductId'+o(i(null!=t?t.rowNumber:t,t))+')" value=""> <input type="hidden" id="hdnProductCode'+o(i(null!=t?t.rowNumber:t,t))+'" name="property(hdnProductCode'+o(i(null!=t?t.rowNumber:t,t))+')" value=""> <input type="hidden" id="hdnInvRelId'+o(i(null!=t?t.rowNumber:t,t))+'" name="property(hdnInvRelId'+o(i(null!=t?t.rowNumber:t,t))+')"> <input type="hidden" id="txtProduct'+o(i(null!=t?t.rowNumber:t,t))+'" name="property(hdnProductName'+o(i(null!=t?t.rowNumber:t,t))+')" value=""> <textarea id="itemDescription'+o(i(null!=t?t.rowNumber:t,t))+'" name="property(itemDescription'+o(i(null!=t?t.rowNumber:t,t))+')" cols="45" rows="3" maxlength="32000" class="itemDescription resizeNone" style="padding: 3px 5px; border: 1px solid rgb(255, 255, 255); resize: none;" onmouseover="$(this).attr(\'placeholder\',\'Product Description\')" onmouseout="$(this).attr(\'placeholder\',\'\')" placeholder=""> </textarea> </td> <td class="f13 alignleft" onmouseover="productDetails.showCellIcon(this,undefined,true)" onmouseout="productDetails.hideCellIcon(this)"> <div style="width:90%" class="fL alignright"> <input type="text" class="cP alignright textFieldEdit textInLineItem decimalFld pT3 pB3 f13 invValidate" size="20" onmouseover="$(this).addClass(\'grayBg\')" style="width:100%; margin-top:-4px; box-shadow: none;" onmouseout="$(this).removeClass(\'grayBg\')" onclick="$(this).select()" id="txtListPrice'+o(i(null!=t?t.rowNumber:t,t))+'" name="property(txtListPrice'+o(i(null!=t?t.rowNumber:t,t))+')" onblur="productDetails.calculateForLine('+o(i(null!=t?t.rowNumber:t,t))+', true)"> <input type="hidden" id="hdnPriceBookId'+o(i(null!=t?t.rowNumber:t,t))+'" name="property(hdnPriceBookId'+o(i(null!=t?t.rowNumber:t,t))+')"> <input type="hidden" id="hdnPriceBookIdClone'+o(i(null!=t?t.rowNumber:t,t))+'" name="property(hdnPriceBookIdClone'+o(i(null!=t?t.rowNumber:t,t))+')"> <input type="hidden" id="hdnPriceBookName'+o(i(null!=t?t.rowNumber:t,t))+'" name="property(hdnPriceBookName'+o(i(null!=t?t.rowNumber:t,t))+')"> </div> <div style="width:10%" class="fL alignleft"> <i class="icon_list pointer lineicon vh pR pbIcon" id="pbIcon'+o(i(null!=t?t.rowNumber:t,t))+'" title="PriceBook Name Lookup" onclick="Crm.showLookUp(\''+o(a.encodeJS.call(s,null!=t?t.module:t,{name:"encodeJS",hash:{},data:n}))+"','property(txtListPrice"+o(i(null!=t?t.rowNumber:t,t))+")','hdnPriceBookId"+o(i(null!=t?t.rowNumber:t,t))+"','Product Details','PriceBooks','','','property(hdnProductId"+o(i(null!=t?t.rowNumber:t,t))+')\')" style="display:none;"></i> <input type="hidden" id="hdnUnitPrice'+o(i(null!=t?t.rowNumber:t,t))+'" name="property(hdnUnitPrice'+o(i(null!=t?t.rowNumber:t,t))+')" value="0.00"> </div> </td> <td class="f13 alignright"> <input type="text" id="txtQty'+o(i(null!=t?t.rowNumber:t,t))+'" name="property(txtQty'+o(i(null!=t?t.rowNumber:t,t))+')" onblur="productDetails.calculateForLine('+o(i(null!=t?t.rowNumber:t,t))+', true)" class="cP alignright textFieldEdit textInLineItem decimalFld mL10 pT3 pB3 f13 invValidate" size="10" onmouseover="$(this).addClass(\'grayBg\');" onmouseout="$(this).removeClass(\'grayBg\')" onclick="$(this).select()" style="margin-top:-4px; box-shadow: none;"> <input type="hidden" id="hdnOldQty'+o(i(null!=t?t.rowNumber:t,t))+'" name="property(hdnOldQty'+o(i(null!=t?t.rowNumber:t,t))+')" value="1"> <input type="hidden" id="hdnQtyStock'+o(i(null!=t?t.rowNumber:t,t))+'" name="property(hdnQtyStock'+o(i(null!=t?t.rowNumber:t,t))+')" value=""> </td> <td class="f13 alignright"> <span class="amntFP">0.00</span> <input type="hidden" id="total'+o(i(null!=t?t.rowNumber:t,t))+'" name="property(hdnTotal'+o(i(null!=t?t.rowNumber:t,t))+')" value="0.00"> </td> <td class="f13 alignright" onmouseover="productDetails.showCellIcon(this,undefined,false)" onmouseout="productDetails.hideCellIcon(this)"> <span style="width:75%" class="alignright"> <span class="discVal" onmouseover="productDetails.showDiscForLine(this)" style="cursor:pointer" onmouseout="zctt.hidett()">0</span> <input type="hidden" id="totalAfterDiscount'+o(i(null!=t?t.rowNumber:t,t))+'" name="property(hdnTotalAfterDiscount'+o(i(null!=t?t.rowNumber:t,t))+')" class="getAftrDisc" value="0.00"> <input type="hidden" class="discAmt" id="discount'+o(i(null!=t?t.rowNumber:t,t))+'" name="property(hdnDiscount'+o(i(null!=t?t.rowNumber:t,t))+')" value="0"> <input type="hidden" class="discPc" id="discPc'+o(i(null!=t?t.rowNumber:t,t))+'" name="property(hdnDiscPc'+o(i(null!=t?t.rowNumber:t,t))+')" value="0"> </span> <i class="neweditIcon dIB mL5 vh lineicon pointer" onclick="productDetails.showDiscountPop(this);sE(event)" style="visibility: hidden;"></i> </td> <td class="f13 alignright" onmouseover="productDetails.showCellIcon(this,undefined,false)" onmouseout="productDetails.hideCellIcon(this)"> <span id=\'inlineValueContainer'+o(i(null!=t?t.rowNumber:t,t))+'\' class="taxClickelement"> <span class="taxval" onmouseover="productDetails.showTaxForLine(this)" style="cursor:pointer" onmouseout="zctt.hidett()">0.00</span> <input type="hidden" id="tax'+o(i(null!=t?t.rowNumber:t,t))+'" name="property(hdnTax'+o(i(null!=t?t.rowNumber:t,t))+')" value="0.00"> <input type="hidden" id="prdTaxDet'+o(i(null!=t?t.rowNumber:t,t))+'" name="property(hdnPrdTaxDet'+o(i(null!=t?t.rowNumber:t,t))+')" class="prdTaxDet" value=""> <input type="hidden" id="prdAllTax'+o(i(null!=t?t.rowNumber:t,t))+'" class="prdTaxDet" value="[]"> </span> <div id=\'inlineIconContainer'+o(i(null!=t?t.rowNumber:t,t))+'\' style="width:22px" class="alignright dIB"> '+(null!=(r=a.if.call(s,null!=t?t.TAX_MIGRATION_COMPLETED:t,{name:"if",hash:{},fn:e.program(1,n,0),inverse:e.program(3,n,0),data:n}))?r:"")+' </div> </td> <td class="f13 alignright"> <span class="netTot">0.00</span> <input type="hidden" id="netTotal'+o(i(null!=t?t.rowNumber:t,t))+'" name="property(hdnNetTotal'+o(i(null!=t?t.rowNumber:t,t))+')" class="eachTotVal" value="0.00"> </td> <td class="alignright"> <i class="icon_close pointer hide" onclick="productDetails.deleteARow(this)" style="visibility: hidden;"></i> </td> <td class="alignright" style="cursor:move;"> <i class="icon_reorder dragdrop"></i> <input type="hidden" class="isTaxable" id="isTaxable'+o(i(null!=t?t.rowNumber:t,t))+'" value="true"> </td> </tr>'},useData:!0}),t.show_available_phn_fields=e({1:function(e,t,a,l,n){var r,i=e.lambda,o=e.escapeExpression,s=null!=t?t:{};return' <label title="'+o(i(null!=t?t.FIELDLABEL:t,t))+'" class="cP"> <input type="radio" name="availPhnField" class="availPhnField mB15" value="'+o(a.stringify.call(s,t,{name:"stringify",hash:{},data:n}))+'" ></input> <span class="fieldLabel p10" style="width:220px;">'+o(i(null!=t?t.FIELDLABEL:t,t))+"</span> "+(null!=(r=a.if.call(s,null!=t?t.fieldValue:t,{name:"if",hash:{},fn:e.program(2,n,0),inverse:e.noop,data:n}))?r:"")+" </label> <br ></br> "},2:function(e,t,a,l,n){return' <span class="fieldValue" style="width:181px;font-size:1.4rem;" >('+e.escapeExpression(e.lambda(null!=t?t.fieldValue:t,t))+")</span> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,l,n){var r,i=null!=t?t:{},o=e.escapeExpression,s=e.lambda;return' <div id="rcpref" class="zcrm-modal zcrm-effect zcrm-show is-scroll ppTop showPpTop w500" style=""> <div class="popup-model-header f24 crm-font-regular bxShTp">'+o(a.getI18n.call(i,"crm.phonebridge.availableFields",{name:"getI18n",hash:{},data:n}))+'</div> <input type="hidden" id="fldsModule" value="'+o(s(null!=t?t.module:t,t))+'" ></input> <div class="popup-model-content multipleNos"> '+(null!=(r=a.each.call(i,null!=t?t.availFields:t,{name:"each",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?r:"")+' <div class="cB"></div> </div> <div class="popup-model-footer aligncenter bdrTope8e8e8"> <input id="save" type="button" onclick="'+o(s(null!=t?t.saveFn:t,t))+'" class="primarybtn" value="'+o(a.getI18n.call(i,"Save",{name:"getI18n",hash:{},data:n}))+'"> <input type="button" onclick="'+o(s(null!=t?t.cancelFn:t,t))+'" class="newgraybtn" value="'+o(a.getI18n.call(i,"Cancel",{name:"getI18n",hash:{},data:n}))+'"> </div> </div>'},useData:!0}),t.toolTipTemplate=e({1:function(e,t,a,l,n){return" <pre> "+e.escapeExpression(e.lambda(null!=t?t.buttonDesc:t,t))+"</pre> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,l,n){var r,i=null!=t?t:{},o=e.escapeExpression;return'<div class="pA yellowBg  bdr1px cbBtnValue borderRadius3 wwbw p5 zI10" data-close="true" style="top: 10px;right: 0px;max-width: 500px; min-width: 250px; white-space: initial;display: none;"> <div class="oA p15" style="max-height: 400px;"> <div align = "left" class="color_5 f13">'+o(a.getI18n.call(i,"workflow.webHook.Label.Name",{name:"getI18n",hash:{},data:n}))+':</div> <div align = "left"> <pre> '+o(e.lambda(null!=t?t.buttonName:t,t))+'</pre> </div> <div align = "left" class="color_5 mT15 f13">'+o(a.getI18n.call(i,"Description",{name:"getI18n",hash:{},data:n}))+':</div> <div align = "left"> '+(null!=(r=a.ifNotEquals.call(i,null!=t?t.buttonDesc:t,"null",{name:"ifNotEquals",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?r:"")+' </div> </div> <span class="yellowTopArw pA" style="top: -11px;right: 15px;"></span> </div>'},useData:!0})}();var crmTasks={compDispVal:"Completed",editTask:!1,possibleDays:0,possibleWeeks:0,possibleMonths:0,reminderSet:!1,recurringSet:!1,reminderSummaryData:{},recurringSummaryData:{},reminderSummaryText:"",recurringSummaryText:"",updateAllUpcomingRem:!1,isRecurringSaved:!1,is24HoursFormat:"HH:mm"===Crm.userDetails.TIME_FORMAT,customDailyFields:["Crm_Tasks_RECURRING_DAILY_EVERYDAY","Crm_Tasks_RECURRING_DAILY_EVERYDAY_ON","Crm_Tasks_RECURRING_DAILY_REPEAT_COUNT"],customWeeklyFields:["Crm_Tasks_RECURRING_WEEKLY_REPEAT","Crm_Tasks_RECURRING_WEEKLY_REPEAT_COUNT","Crm_Tasks_RECURRING_WEEKLY_DAYS"],customMonthlyFields:["Crm_Tasks_RECURRING_MONTHLY_DAYS","Crm_Tasks_RECURRING_MONTHLY_DAYS_NO","Crm_Tasks_RECURRING_MONTHLY_MONTH_NO","Crm_Tasks_RECURRING_MONTHLY_DAYS_ON","Crm_Tasks_RECURRING_MONTHLY_WEEKSEQUENCE_TYPE","Crm_Tasks_RECURRING_MONTHLY_WEEKSEQUENCE_DAY","Crm_Tasks_RECURRING_MONTHLY_WEEKSEQUENCE_MONTH_NO","Crm_Tasks_RECURRING_MONTHLY_REPEAT_COUNT","Crm_Tasks_RECURRING_MONTHLY_REPEAT"],customYearlyFields:["Crm_Tasks_RECURRING_YEARLY_DAYS","Crm_Tasks_RECURRING_YEARLY_DAYS_OF_MONTH","Crm_Tasks_RECURRING_YEARLY_DAYS_NO","Crm_Tasks_RECURRING_YEARLY_DAYS_ON","Crm_Tasks_RECURRING_YEARLY_WEEKSEQUENCE_TYPE","Crm_Tasks_RECURRING_YEARLY_WEEKSEQUENCE_NO","Crm_Tasks_RECURRING_YEARLY_WEEKSEQUENCE_MONTH_NAME"],init:function(){crmTasks.editTask=!1,crmTasks.possibleDays=0,crmTasks.possibleWeeks=0,crmTasks.possibleMonths=0,crmTasks.reminderSet=!1,crmTasks.recurringSet=!1,crmTasks.reminderSummaryData={},crmTasks.recurringSummaryData={},crmTasks.reminderSummaryText="",crmTasks.recurringSummaryText="",crmTasks.updateAllUpcomingRem=!1,crmTasks.isRecurringSaved=!1,crmTasks.remOffAll=!1,crmTasks.remOffOnlyThis=!1,crmTasks.remOnAll=!1,crmTasks.updateAllRec=!1,crmTasks.updateOnlyThisRem=!1,crmTasks.weekString=[I18n.getMsg("Sunday"),I18n.getMsg("Monday"),I18n.getMsg("Tuesday"),I18n.getMsg("Wednesday"),I18n.getMsg("Thursday"),I18n.getMsg("Friday"),I18n.getMsg("Saturday")],crmTasks.remRepeatVal=[{html:I18n.getMsg("None"),content:"none"},{html:I18n.getMsg("Daily"),content:"daily"},{html:I18n.getMsg("Weekly"),content:"weekly"},{html:I18n.getMsg("Monthly"),content:"monthly"},{html:I18n.getMsg("Yearly"),content:"yearly"}],crmTasks.firstLetterDays=[{html:I18n.getMsg("first.letter.of.sunday"),value:"1"},{html:I18n.getMsg("first.letter.of.monday"),value:"2"},{html:I18n.getMsg("first.letter.of.tuesday"),value:"3"},{html:I18n.getMsg("first.letter.of.wednesday"),value:"4"},{html:I18n.getMsg("first.letter.of.thursday"),value:"5"},{html:I18n.getMsg("first.letter.of.friday"),value:"6"},{html:I18n.getMsg("first.letter.of.saturday"),value:"7"}]},setReminder:function(){crmTasks.reminderSet=!0},unsetReminder:function(){crmTasks.reminderSet=!1,$("#Crm_Tasks_REMINDAT").prop("checked",!1),crmTasks.reminderSummaryData={},crmTasks.reminderSummaryText="";var e=$("#CRMTasks_Remind_summary");e.find("p").text(""),e.hide(),e.parent().addClass("pB3"),$(e.parents(".labelValCreate")[0]).removeClass("pB0"),$("#RemindAtdiv").remove()},setRecurring:function(){crmTasks.recurringSet=!0},unsetRecurring:function(){crmTasks.recurringSet=!1},isReminderSet:function(){return crmTasks.reminderSet},isRecurringSet:function(){return crmTasks.recurringSet},getReminderSummaryText:function(){return crmTasks.reminderSummaryText},getReminderSummaryData:function(){return crmTasks.reminderSummaryData},getRecurringSummaryData:function(){return crmTasks.recurringSummaryData},getRecurringSummaryText:function(){return crmTasks.recurringSummaryText},updatePossiblePeriods:function(e){var t=e,a=Math.floor(e/7),l=Math.floor(e/31);t=t>30?30:t,a=a>4?4:a,l=l>12?12:l,crmTasks.possibleDays=t,crmTasks.possibleWeeks=a,crmTasks.possibleMonths=l},setReminderSummaryData:function(){var e=$("#RemindAtdiv .popfooter .redText"),t=$($('#RemindAtdiv input[name="reminderOption"]:checked')).attr("id");if("Crm_Tasks_RemindAt_Start_Date1_Radio"==t){var a=$("#Crm_Tasks_RemindAt_Start_Date1").val().trim(),l=$("#Crm_Tasks_RemindAt_Start_Date1_TimeOption").val().trim();if(""==a||""==l)return e.text(I18n.getMsg("crm.task.rem.validation1")).show(),1;crmTasks.reminderSummaryData={},crmTasks.reminderSummaryData.reminderType="date_based",crmTasks.reminderSummaryData.remTimeDetail={},crmTasks.reminderSummaryData.remTimeDetail.DateValue=a,crmTasks.reminderSummaryData.remTimeDetail.timeValue=l}else if("Crm_Tasks_RemindAt_remTime_Radio"==t){var n=$("#Crm_Tasks_remTime").find("option:selected").val(),r=$("#Crm_Tasks_remTime_Period").find("option:selected").val();if(""==(l=$("#Crm_Tasks_remTime_TimeOption").val().trim()))return e.text(I18n.getMsg("crm.task.rem.validation1")).show(),1;crmTasks.reminderSummaryData={},crmTasks.reminderSummaryData.reminderType="period_based",crmTasks.reminderSummaryData.remTimeDetail={},crmTasks.reminderSummaryData.remTimeDetail.periodValue=n,crmTasks.reminderSummaryData.remTimeDetail.periodType=r,crmTasks.reminderSummaryData.remTimeDetail.timeValue=l}var i=$("#Crm_Tasks_RemindAt_period").find("option:selected").val(),o=$("#Crm_Tasks_RemindAt_Notify").find("option:selected").val();crmTasks.reminderSummaryData.remRepType=i,crmTasks.reminderSummaryData.remNotify=o},generateSummaryFromData:function(){var e=crmTasks.getReminderSummaryData(),t="",a=e.remRepType,l=e.remNotify;switch(l){case"email":l=I18n.getMsg("Email");break;case"popup":l=I18n.getMsg("Pop Up");break;case"emailandpopup":l=I18n.getMsg("EmailandPopup")}if("none"===a)a="";else switch(a){case"daily":a=crmTasks.remRepeatVal[1].html;break;case"weekly":a=crmTasks.remRepeatVal[2].html;break;case"monthly":a=crmTasks.remRepeatVal[3].html}switch(e.reminderType){case"date_based":var n=e.remTimeDetail.DateValue,r=e.remTimeDetail.timeValue;t=""!==a?I18n.getMsg("crm.reminder.option1.remRepeat",[n,r,l,a]):I18n.getMsg("crm.reminder.option1",[n,r,l]);break;case"period_based":var i=e.remTimeDetail.periodValue,o=e.remTimeDetail.periodType,s=e.remTimeDetail.timeValue,d="";switch(o){case"days":d=I18n.getMsg("crm.remind.day(s)");break;case"weeks":d=I18n.getMsg("crm.remind.week(s)");break;case"months":d=I18n.getMsg("crm.remind.month(s)")}t=0!=i?""==a?I18n.getMsg("crm.reminder.option2",[i,d,s,l]):I18n.getMsg("crm.reminder.option2.remRepeat",[i,d,s,l,a]):""==a?I18n.getMsg("crm.reminder.option2.on",[s,l]):I18n.getMsg("crm.reminder.option2.on.remRepeat",[s,l,a])}crmTasks.reminderSummaryText=t},createReminderSummary:function(e){var t=$("#RemindAtdiv .popfooter .redText");if(crmTasks.isRecurringSet()||$("#Crm_Tasks_RemindAt_remTime_Radio").prop("checked"))t.hide(),crmTasks.removeErrorField();else{var a=$("#Crm_Tasks_DUEDATE"),l=new Date(a.data("dateObj")),n=$("#Crm_Tasks_RemindAt_Start_Date1"),r=n.data("dateObj");if(!n.val())return void t.text(I18n.getMsg("crm.field.empty.check",I18n.getMsg("Remind At"))).show();var i,o=new Date,s=o.getTime()+6e4*o.getTimezoneOffset()+6e4,d=new Date(r),u=Crm.userDetails.TIME_ZONE.substring(0,1)+6e4*(60*parseInt(Crm.userDetails.TIME_ZONE.substring(1).split(".")[0])+parseInt(Crm.userDetails.TIME_ZONE.substring(1).split(".")[1])),c=d.getTime()-parseInt(u),m=d.getTime(),p=$("#Crm_Tasks_RemindAt_Start_Date1_TimeOption").val().split(":"),f=parseInt(p[0]);if(crmTasks.is24HoursFormat)i=p[1];else{var v=p[1],h=new RegExp("PM"),g=new RegExp("pm");(h.test(v)||g.test(v))&&f<12&&(f+=12),i=v.split(" ")[0]}if(isNaN(parseInt(f))||isNaN(parseInt(i)))return void t.text(I18n.getMsg("crm.field.valid.check",I18n.getMsg("Remind At"))).show();if(null==e&&c<s)return void t.text(I18n.getMsg("crm.task.rem.validation1")).show();if(a&&""!=a.val()&&null==e&&m>l.getTime()+864e5)return void t.text(I18n.getMsg("crm.task.rem.validation2")).show();t.hide(),crmTasks.removeErrorField()}if(!crmTasks.setReminderSummaryData()){crmTasks.generateSummaryFromData();var y=$("#CRMTasks_Remind_summary");y.find("p").text(crmTasks.getReminderSummaryText()),y.removeClass("dN op05").addClass("dIB").show(),y.parent().removeClass("pB3"),$(y.parents(".labelValCreate")[0]).addClass("pB0"),crmTasks.setReminder(),crmTasks.CloseRemindAtDiv()}},showRecurDisableTooltip:function(e){$("#Crm_Tasks_RECURRING").prop("disabled")&&crmui.toolTip_show(e,"left","Select a due date to set recurring")},hideRecurDisableTooltip:function(){$("#Crm_Tasks_RECURRING").prop("disabled")&&crmui.toolTip_hide()},updateAllRecurring:function(){crmTasks.updateAllRec=!0,crmTasks.constructBlueBannerMsg(),crmTasks.createRecurringSummmary(),crmTasks.unsetRecurring();var e=$(".projectsTaskSyncBtn");e&&e.attr("disabled",!1).attr("title","")},createRecurringSummmary:function(e){var t=$("#TasksrecurringDiv .redText");t.text("");var a=$("#Crm_Tasks_Recurring_period"),l=$("#Crm_Tasks_Custom_Recurring_period"),n=$("#Crm_Tasks_RECURRING_END_DATE"),r=$("#Crm_Tasks_RECURRING_REPEAT_COUNT");if(null==e&&$("#Crm_Tasks_RECURRING_END_NOOFTIMES").prop("checked")){var i=trimBoth(r.val());if(r.val(i.replace(/^0+/,"")),""==i||isNaN(i)||parseInt(i)<=0)return void t.text(I18n.getMsg("crm.recurrence6")).show();switch("custom"==(m=a.val())&&(m=l.val()),m){case"daily":if(parseInt(i)>365)return t.text(I18n.getMsg("crm.recurrence.daily.exceed1")).show(),!1;break;case"weekly":if(parseInt(i)>105)return t.text(I18n.getMsg("crm.recurrence.weekly.exceed1")).show(),!1;break;case"monthly":if(parseInt(i)>30)return t.text(I18n.getMsg("crm.recurrence.monthly.exceed1")).show(),!1;break;case"yearly":if(parseInt(i)>10)return t.text(I18n.getMsg("crm.recurrence.yearly.exceed1")).show(),!1}n.val("")}if(null==e&&$("#Crm_Tasks_RECURRING_END_ON").prop("checked")){var o=n.val();if(""==o)return void t.text(I18n.getMsg("crm.task.end.date.not.empty")).show();if(""!=o&&!Utils.isValidDate(Crm.userDetails.DATE_PATTERN,o))return void t.text(I18n.getMsg("crm.field.valid.check",I18n.getMsg("End Date"))).show();var s=new Date($("#Crm_Tasks_DUEDATE").data("dateObj"));if("edit"==window.Tasks.currentStatus){var d=$("#Crm_Tasks_RECURRING").data().recdata;null!=d&&(s="weekly"===(d=d.split("*#"))[0]?new Date(parseInt(d[1])):new Date(parseInt(d[2])))}var u=new Date(crmCalendar.getDateObjectFromGivenDateString(o)),c=s;if(!Utils.compareDate(s,u))return t.text(I18n.getMsg("crm.project.alert.enddate.startdate")).show(),!1;var m,p=1;if("custom"==(m=a.val()))switch(m=l.val()){case"daily":p=parseInt($("#Crm_Tasks_RECURRING_DAILY_REPEAT_COUNT").val());break;case"weekly":p=parseInt($("#Crm_Tasks_RECURRING_WEEKLY_REPEAT_COUNT").val());break;case"monthly":p=parseInt($("#Crm_Tasks_RECURRING_MONTHLY_REPEAT_COUNT").val())}switch(m){case"daily":if(c.setDate(c.getDate()+p*(crmConstants.recurringEndDateLimit[m]-1)),!Utils.compareDate(u,c))return t.text(I18n.getMsg("crm.recurrence.days.exceed",[Utils.getDateInUserDatePattern(c)])).show(),!1;break;case"weekly":if(c.setDate(c.getDate()+p*(crmConstants.recurringEndDateLimit[m]-1)),!Utils.compareDate(u,c))return t.text(I18n.getMsg("crm.recurrence.weekly.exceed",[Utils.getDateInUserDatePattern(c)])).show(),!1;break;case"monthly":if(c.setDate(c.getDate()+p*(crmConstants.recurringEndDateLimit[m]-1)/2),!Utils.compareDate(u,c))return t.text(I18n.getMsg("crm.recurrence.monthly.exceed",[Utils.getDateInUserDatePattern(c)])).show(),!1;break;case"yearly":if(c.setDate(c.getDate()+p*(crmConstants.recurringEndDateLimit[m]-1)),!Utils.compareDate(u,c))return t.text(I18n.getMsg("crm.recurrence.yearly.bulk.exceed",[Utils.getDateInUserDatePattern(c)])).show(),!1}r.val("")}if(null==e&&"custom"==a.val())if("daily"==(m=l.val())){var f=$("#Crm_Tasks_RECURRING_DAILY_REPEAT_COUNT"),v=trimBoth(f.val());if(f.val(v.replace(/^0+/,"")),isNaN(v)||""==v||v<=0)return t.text(I18n.getMsg("crm.recurrence6")).show(),!1}else if("weekly"==m){var h=$("#Crm_Tasks_RECURRING_WEEKLY_REPEAT_COUNT"),g=trimBoth(h.val());if(h.val(g.replace(/^0+/,"")),isNaN(g)||""==g||g<=0)return t.text(I18n.getMsg("crm.recurrence6")).show(),!1;if(0==$("#Crm_Tasks_RECURRING_WEEKLY_DAYS input:checked").size())return t.text(I18n.getMsg("crm.recurrence7")).show(),!1}else if("monthly"==m){if(!$("#Tasks_fldRow_RECURRING_MONTHLY_DAYS input:checked")&&!$("#Tasks_fldRow_RECURRING_MONTHLY_DAYS_ON input:checked"))return t.text(I18n.getMsg("crm.recurrence4")).show(),!1;var y=$("#Crm_Tasks_RECURRING_MONTHLY_REPEAT_COUNT"),b=trimBoth(y.val());if(y.val(b.replace(/^0+/,"")),isNaN(b)||""==b||b<=0)return t.text(I18n.getMsg("crm.recurrence6")).show(),!1}else if("yearly"==m&&!$("#Tasks_fldRow_RECURRING_YEARLY_DAYS input:checked")&&!$("#Tasks_fldRow_RECURRING_YEARLY_DAYS_ON input:checked"))return t.text(I18n.getMsg("crm.recurrence4")).show(),!1;crmTasks.setRecurringSummaryData(),crmTasks.generateRecurringSummaryFromData();var C=$("#CRMTasks_Recurring_summary"),T=crmTasks.getRecurringSummaryText(),E=C.parents(".labelValCreate");""!==T?(C.find("p").text(crmTasks.getRecurringSummaryText()),C.show(),E.addClass("pB0")):E.removeClass("pB0"),crmTasks.setRecurring();var _=$(".projectsTaskSyncBtn");_&&_.attr("disabled",!0).attr("title","Recurring task cannot be pushed to Projects"),crmTasks.closeRecurringDiv(),crmTasks.updateTaskRecurringTop(),crmTasks.updateDuedateBasedOnRecurring("Crm_Tasks_DUEDATE"),$("#Crm_Tasks_STATUS option:selected").val()===crmTasks.compDispVal&&""===crmTasks.getRecurringSummaryText()?crmTasks.freezeReminder():crmTasks.unfreezeReminder(),crmTasks.checkReminderValidity(),crmTasks.isReminderSet()&&($("#Tasks_fldRow_remTime").show(),$("#Crm_Tasks_RemindAt_remTime_Radio").parent().find(".rbHtml").hide(),$("#Tasks_fldRow_RemindAt_Start_Date1").hide(),$("#Tasks_fldRow_RemindAt_period").hide(),$("#Crm_Tasks_RemindAt_Start_Date1").data("mandate",!1),crmTasks.updateReminderOptions(),crmTasks.updateRemPeriodSelect(),crmTasks.updateRemRepeatSelect())},updateTaskRecurringTop:function(){var e=$("#TasksrecurringDiv"),t=$(e.parents(".labelValCreate")[0]).outerHeight();e.css("top",t)},cancelCreateRecurring:function(){crmTasks.isRecurringSet()||$("#Crm_Tasks_RECURRING").prop("checked",!1),crmTasks.closeRecurringDiv(),crmTasks.populateRecurringDiv()},setRecurringSummaryData:function(){crmTasks.recurringSummaryData={};var e=$("#Crm_Tasks_Recurring_period option:selected").val();crmTasks.recurringSummaryData.repeatType=e;var t=$('#TasksrecurringDiv [name="endRadioOption"]:checked').val();switch(crmTasks.recurringSummaryData.endsOn=t,t){case"1":break;case"2":crmTasks.recurringSummaryData.endsOnCnt=$("#Crm_Tasks_RECURRING_REPEAT_COUNT").val();break;case"3":crmTasks.recurringSummaryData.endsOnDate=$("#Crm_Tasks_RECURRING_END_DATE").val()}if("custom"===e){var a=$("#Crm_Tasks_Custom_Recurring_period option:selected").val();switch(crmTasks.recurringSummaryData.customRepeat={},crmTasks.recurringSummaryData.customRepeat.type=a,a){case"daily":crmTasks.recurringSummaryData.customRepeat.every=$("#Crm_Tasks_RECURRING_DAILY_REPEAT_COUNT").val();break;case"weekly":var l=$("#Tasks_fldRow_RECURRING_WEEKLY_DAYS input:checked");crmTasks.recurringSummaryData.customRepeat.weekValues=[];for(var n=l.length,r=0;r<n;r++)crmTasks.recurringSummaryData.customRepeat.weekValues[r]=$(l[r]).val();crmTasks.recurringSummaryData.customRepeat.every=$("#Crm_Tasks_RECURRING_WEEKLY_REPEAT_COUNT").val();break;case"monthly":var i=$('#Crm_Tasks_Custom_Recurring_periodmonthly1 input[name="monthly11"]:checked').val();crmTasks.recurringSummaryData.customRepeat.monthlyType=i,"1"==i?crmTasks.recurringSummaryData.customRepeat.monthDay=parseInt($("#Crm_Tasks_RECURRING_MONTHLY_DAYS_NO option:selected").val()):"2"==i&&(crmTasks.recurringSummaryData.customRepeat.weekDayNth=parseInt($("#Crm_Tasks_RECURRING_MONTHLY_WEEKSEQUENCE_TYPE option:selected").val()),crmTasks.recurringSummaryData.customRepeat.weekDayValue=parseInt($("#Crm_Tasks_RECURRING_MONTHLY_WEEKSEQUENCE_DAY option:selected").val())),crmTasks.recurringSummaryData.customRepeat.every=$("#Crm_Tasks_RECURRING_MONTHLY_REPEAT_COUNT").val();break;case"yearly":i=$('#Crm_Tasks_Custom_Recurring_periodyearly1 input[name="yearly11"]:checked').val();crmTasks.recurringSummaryData.customRepeat.yearlyType=i,"1"==i?(crmTasks.recurringSummaryData.customRepeat.monthDay=parseInt($("#Crm_Tasks_RECURRING_YEARLY_DAYS_NO option:selected").val()),crmTasks.recurringSummaryData.customRepeat.monthVal=parseInt($("#Crm_Tasks_RECURRING_YEARLY_DAYS_OF_MONTH option:selected").val())):"2"==i&&(crmTasks.recurringSummaryData.customRepeat.weekDayNth=parseInt($("#Crm_Tasks_RECURRING_YEARLY_WEEKSEQUENCE_TYPE option:selected").val()),crmTasks.recurringSummaryData.customRepeat.weekDayValue=parseInt($("#Crm_Tasks_RECURRING_YEARLY_WEEKSEQUENCE_NO option:selected").val()),crmTasks.recurringSummaryData.customRepeat.monthVal=parseInt($("#Crm_Tasks_RECURRING_YEARLY_WEEKSEQUENCE_MONTH_NAME option:selected").val())),crmTasks.recurringSummaryData.customRepeat.every=1}}},generateRecurringSummaryFromData:function(){var e=crmTasks.recurringSummaryData,t=e.repeatType,a="";if("custom"!=t)switch(t){case"daily":a=I18n.getMsg("Daily");break;case"weekly":a=I18n.getMsg("Weekly");break;case"monthly":a=I18n.getMsg("Monthly");break;case"yearly":a=I18n.getMsg("Yearly")}else{var l=e.customRepeat;switch(l.type){case"daily":a=1==l.every?I18n.getMsg("crm.recurrence.daily.option1"):I18n.getMsg("crm.recurrence.daily.option2",l.every);break;case"weekly":a=1==l.every?I18n.getMsg("crm.recurrence.week.option1"):I18n.getMsg("crm.recurrence.week.option2",l.every);var n=l.weekValues,r=crmTasks.weekString;if(n.length>0&&(a+=" "+I18n.getMsg("crm.label.simply.on")+" "),n.length>4){for(var i=I18n.getMsg("crm.reminder.week.all.days")+" ",o=[0,0,0,0,0,0,0],s=n.length,d=0;d<s;d++){o[n[d]-1]=1}if(6==n.length){var u=0,c=o.length;for(d=0;d<c;d++)if(0==o[d]){u=d;break}i+=I18n.getMsg("crm.reminder.week.except")+" "+r[u]}if(5==n.length){var m=[],p=0;for(c=o.length,d=0;d<c;d++)0==o[d]&&(m[p]=d,p++);i+=I18n.getMsg("crm.reminder.week.except")+" "+r[m[0]]+" "+I18n.getMsg("crm.reminder.week.and")+" "+r[m[1]]}a+=i}else{if(0!=(s=n.length)){for(var f=0;f<s;f++)a+=r[n[f]-1]+", ";a=a.substring(0,a.length-2)}}break;case"monthly":a=1==l.every?I18n.getMsg("crm.recurrence.month.option1"):I18n.getMsg("crm.recurrence.month.option2",l.every);var v=[I18n.getMsg("lowercasefirst"),I18n.getMsg("lowercasesecond"),I18n.getMsg("lowercasethird"),I18n.getMsg("lowercasefourth"),I18n.getMsg("lowercaselast")];r=crmTasks.weekString;switch(l.monthlyType){case"1":a+=" "+I18n.getMsg("crm.recurrence.custom.month.summary.option1",l.monthDay);break;case"2":a+=" "+I18n.getMsg("crm.recurrence.custom.month.summary.option2",[v[l.weekDayNth-1],r[l.weekDayValue-1]])}break;case"yearly":a=I18n.getMsg("crm.recurrence.yearly.option1");v=[I18n.getMsg("lowercasefirst"),I18n.getMsg("lowercasesecond"),I18n.getMsg("lowercasethird"),I18n.getMsg("lowercasefourth"),I18n.getMsg("lowercaselast")],r=crmTasks.weekString;var h=[I18n.getMsg("January"),I18n.getMsg("February"),I18n.getMsg("March"),I18n.getMsg("April"),I18n.getMsg("May"),I18n.getMsg("June"),I18n.getMsg("July"),I18n.getMsg("August"),I18n.getMsg("September"),I18n.getMsg("October"),I18n.getMsg("November"),I18n.getMsg("December")];switch(l.yearlyType){case"1":a+=" "+I18n.getMsg("crm.recurrence.custom.yearly.custom.option1",l.monthDay);break;case"2":a+=" "+I18n.getMsg("crm.recurrence.custom.yearly.custom.option2",[v[l.weekDayNth-1],r[l.weekDayValue-1]])}a+=h[l.monthVal]}}var g="";switch(e.endsOn){case"1":break;case"2":g=I18n.getMsg("crm.recurrence.custom.upto",e.endsOnCnt);break;case"3":g=I18n.getMsg("crm.recurrence.custom.until",e.endsOnDate)}a+=g,crmTasks.recurringSummaryText=a},OpenRemindAtDiv:function(){if(!$(".reminderSection").hasClass("freezeReminder")){var e=$("#RemindAtdiv"),t=e.closest(".labelValCreate"),a=t.outerHeight();freezeBackground();var l=$("#FreezeLayer"),n=l.width(),r=l.height();if($("#forEditViewScroll").length>0){var i=e.parents(".tabDivCreate"),o=i.position().top;i.parents("#forEditViewScroll").scrollTop(o)}else $("#preHTMLContainer_Tasks").css("padding-bottom","150px");if(e.show().css("top",a),e.removeClass("popClose").addClass("popOpen"),t.addClass("bba5"),crmTasks.showEditRemindOptions(),"true"==$("#iskanbanview").val()){var s=$("#cvEditSave");s.css("z-index",31);var d=$("#tasksFreezeLayer");if(0==d.length){var u=$('<div id="tasksFreezeLayer" class="tasksFreezeLayer"></div>');s.append(u),u.css({width:n,height:r})}else d.show();e.addClass("zi42").removeClass("zI31")}Crm.userDetails.TaskPopup||l.css("background-color","#fff"),$(".taskPopTopband_tb").addClass("taskPopeventNone"),$("#tasksPopFreezeLayer").removeClass("hide")}},CloseRemindAtDiv:function(){var e=$("#RemindAtdiv");(e.removeClass("popOpen").addClass("popClose"),e.closest(".labelValCreate").removeClass("bba5"),e.find(".innerSlider").on("transitionend",(function(){if($("#forEditViewScroll").length>0){var t=e.parents(".tabDivCreate"),a=t.position().top;t.parents("#forEditViewScroll").scrollTop(a)}e.hasClass("popClose")&&e.hide(),e.find(".innerSlider").off("transitionend")})),Crm.userDetails.TaskPopup&&!crmTasks.editTask||(removeFreezeLayer(),hideFreezeLayer()),"true"==$("#iskanbanview").val())&&($("#cvEditSave").css("z-index",""),$("#tasksFreezeLayer").hide(),e.removeClass("zi42").addClass("zI31"));$("#preHTMLContainer_Tasks").css("padding-bottom",""),$("#tasksPopFreezeLayer").addClass("hide"),$(".taskPopTopband_tb").removeClass("taskPopeventNone")},openRecurringDiv:function(){if(!$("#Crm_Tasks_RECURRING").prop("disabled")){var e=$("#TasksrecurringDiv"),t=e.closest(".labelValCreate"),a=t.outerHeight();freezeBackground();var l=$("#FreezeLayer"),n=l.width(),r=l.height();if($("#forEditViewScroll").length>0){var i=e.parents(".tabDivCreate"),o=i.position().top;i.parents("#forEditViewScroll").scrollTop(o)}else $("#preHTMLContainer_Tasks").css("padding-bottom","150px");if(e.show().css("top",a),e.find(".innerSlider").off("transitionend"),e.removeClass("popClose").addClass("popOpen"),t.addClass("bba5"),"true"===$("#iskanbanview").val()){var s=$("#cvEditSave");s.css("z-index",31);var d=$("#tasksFreezeLayer");if(0===d.length){var u=$('<div id="tasksFreezeLayer" class="tasksFreezeLayer"></div>');s.append(u),u.css({width:n,height:r})}else d.show();removeFreezeLayer(),e.addClass("zi42").removeClass("zI31")}Crm.userDetails.TaskPopup||l.css("background-color","#fff"),$("#tasksPopFreezeLayer").removeClass("hide"),$(".taskPopTopband_tb").addClass("taskPopeventNone")}},closeRecurringDiv:function(){var e=$("#TasksrecurringDiv");(e.removeClass("popOpen").addClass("popClose"),e.closest(".labelValCreate").removeClass("bba5"),e.find(".innerSlider").on("transitionend",(function(){if($("#forEditViewScroll").length>0){var t=e.parents(".tabDivCreate"),a=t.position().top;t.parents("#forEditViewScroll").scrollTop(a)}e.hide(),crmTasks.editTask&&($("#recurAll").hide(),$("#recurDone").show()),e.find(".innerSlider").off("transitionend")})),Crm.userDetails.TaskPopup&&!crmTasks.editTask||(removeFreezeLayer(),hideFreezeLayer()),"true"==$("#iskanbanview").val())&&($("#cvEditSave").css("z-index",""),$("#tasksFreezeLayer").hide(),e.removeClass("zi42").addClass("zI31"));$("#preHTMLContainer_Tasks").css("padding-bottom",""),$("#tasksPopFreezeLayer").addClass("hide"),$(".taskPopTopband_tb").removeClass("taskPopeventNone")},constructRecurFooter:function(){var e=$("#TasksrecurringDiv").find(">div");if(e.attr("id","innerSlider"),e.addClass("pR p30 whiteBg innerSlider bRadBot3").removeClass("dIB w100p"),0==e.find(".popfooter").length){var t=$("<div class='popfooter alignRight pT20 mT10'></div>"),a=$('<p class="mB15 redText f13 alignleft" style="display: none;"></p>');t.append(a);var l=$("<input type='button' class='newwhitebtn' data-zcqa='cancelRecurring' value="+I18n.getMsg("crm.button.cancel")+" onClick='crmTasks.cancelCreateRecurring()'>");t.append(l),t.appendTo(e);var n=$("<input type='button' class='primarybtn mR0' data-zcqa='doneRecurring' id='recurDone' style='color: #fff;' value="+I18n.getMsg("crm.button.done")+" onClick='crmTasks.createRecurringSummmary();crmTasks.constructBlueBannerMsg();'>");if(t.append(n),crmTasks.editTask&&crmTasks.isRecurringSaved&&"clone"!==window.Tasks.currentStatus){var r=$('<input type="button" class="primarybtn mR0" data-zcqa="updateAllRecurring" id="recurAll" style="color: #fff; display: none;" value="'+I18n.getMsg("crm.all.upcoming.tasks")+'" onClick="crmTasks.updateAllRecurring()">');t.append(r)}}},constructReminderFooter:function(){var e=$("#RemindAtdiv > div").eq(0);if(0==e.find(".popfooter").length){var t=$("#RemindAtdiv"),a=$("#Crm_Tasks_RECURRING");t.addClass("sliderPop popClose bRadBot3").removeClass("popOpen").removeAttr("width"),e.attr("id","innerSlider"),e.addClass("pR p30 whiteBg innerSlider bRadBot3").removeClass("dIB w100p"),t.show();var l=$("<div class='popfooter alignRight pT20 mT10'></div>");l.appendTo(e);var n=$('<p class="alignleft mB15 redText f13" style="display: none;"></p>');l.append(n);var r=$("<input type='button' class='newwhitebtn' data-zcqa='cancelReminder' value="+I18n.getMsg("crm.button.cancel")+" onClick='crmTasks.cancelCloseReminderDiv()'>");l.append(r);var i=$("<input type='button' class='primarybtn mR0' data-zcqa='DoneReminder' id='rem_done' style='color: #fff;' onclick='crmTasks.createReminderSummary()' value="+I18n.getMsg("crm.button.done")+">");if(l.append(i),crmTasks.editTask&&a&&0!=a.length&&a.data().recdata&&"clone"!==window.Tasks.currentStatus){var o=$('<input type="button" data-zcqa="updateAllReminder" id="rem_allupcoming" class="newwhitebtn" value="'+I18n.getMsg("crm.all.upcoming.tasks")+'" onclick="crmTasks.updateAllUpcomingReminder()" style="display: none;">');l.append(o);var s=$('<input type="button" data-zcqa="updateOnlyThisReminder" id="rem_onlythis" class="primarybtn mR0" value="'+I18n.getMsg("crm.only.this.task")+'" onclick="crmTasks.updateOnlyThisReminder()" style="display: none;">');l.append(s)}t.addClass("pA zI31 sliderPop popup_shadow").css("width","500px"),crmTasks.editTask&&a&&0!=a.length&&a.data().recdata&&"clone"!==window.Tasks.currentStatus&&(crmTasks.handleReminderChange(t.find("select")),crmTasks.handleReminderChange(t.find("input")))}},updateOnlyThisReminder:function(){crmTasks.updateAllUpcomingRem=!1,crmTasks.updateOnlyThisRem=!0,crmTasks.createReminderSummary(),crmTasks.constructBlueBannerMsg()},updateAllUpcomingReminder:function(){crmTasks.updateAllUpcomingRem=!0,crmTasks.updateOnlyThisRem=!1,crmTasks.createReminderSummary(),crmTasks.constructBlueBannerMsg()},cancelCloseReminderDiv:function(){crmTasks.CloseRemindAtDiv(),crmTasks.populateReminderDiv(),crmTasks.isReminderSet()||$("#Crm_Tasks_REMINDAT").prop("checked",!1)},constructDelRecurPop:function(){var e=$('<div id="removeRecurring" class="pA zI31 sliderPop popup_shadow w100per popClose bRadBot3" style="top: 35px;"></div>');e.appendTo($("#Tasks_fldRow_RECURRING > .labelValCreate"));var t=$('<div id="innerSlider" class="pR p30 whiteBg innerSlider bRadBot3"></div>');t.appendTo(e);var a=$('<h3 class="color_5">'+I18n.getMsg("crm.remove.recurring")+"</h3>"),l=$('<p class="mB25 mT20">'+I18n.getMsg("crm.task.remove.recurring")+"</p>"),n=$('<div id="popfooter" class="alignRight"><input type="button" class="newwhitebtn" data-zcqa="delRecCancel" value='+I18n.getMsg("crm.button.cancel")+' onClick="crmTasks.cancelDeleteRecurring()"/><input type="button" style="color: #fff;" data-zcqa="delRecAllUpcoming" class="redbtn mR0" value="'+I18n.getMsg("crm.all.upcoming.tasks1")+'" onClick="crmTasks.closeDeleteRecurringPopup(); crmTasks.removeSavedRecurring(); crmTasks.updateAllRecurring();"/></div>');t.append(a).append(l).append(n),setTimeout((function(){e.addClass("popOpen").removeClass("popClose")}),10)},removeRecurring:function(){crmTasks.closeDeleteRecurringPopup(),crmTasks.recurringSummaryData={},crmTasks.recurringSummaryText="";var e=$("#CRMTasks_Recurring_summary");e.find("p").text(""),e.hide(),$(e.parents(".labelValCreate")[0]).removeClass("pB0"),crmTasks.unsetRecurring(),$("#Crm_Tasks_Recurring_End_Date1").data("mandate",!1),$("#Crm_Tasks_Recurring_period").data("mandate",!1),$("#Tasks_fldRow_RemindAt_Start_Date1").show(),$("#Crm_Tasks_RemindAt_Start_Date1").data("mandate",!1);var t=$("#Crm_Tasks_DUEDATE"),a=t.val();!a||!Utils.isValidDate(Crm.userDetails.DATE_PATTERN,a)||($("#Tasks_fldRow_remTime").show(),$("#Tasks_fldRow_RemindAt_period").show(),$("#Crm_Tasks_RemindAt_Start_Date1_Radio").parent().find(".rbHtml").show(),$("#Crm_Tasks_RemindAt_remTime_Radio").parent().find(".rbHtml").show());var l=new Date,n=new Date(t.data("dateObj"));if(l.getTime()>n.getTime()){crmTasks.freezeReminder();var r=$("#Crm_Tasks_REMINDAT");r.parent().on("mouseenter.duedateinpast",(function(){crmui.toolTip_show(this,"left",I18n.getMsg("crm.task.reminder.tooltip1"))})),r.parent().on("mouseleave.duedateinpast",(function(){crmui.toolTip_hide()})),crmTasks.unsetReminder()}$("#Crm_Tasks_RECURRING").prop("checked",!1)},removeSavedRecurring:function(){crmTasks.removeRecurring(),$("#TasksrecurringDiv").remove()},openDeleteRecurringPopup:function(){freezeBackground();var e=$("#FreezeLayer"),t=e.width(),a=e.height(),l=$("#removeRecurring");0==l.length?crmTasks.constructDelRecurPop():(l.show(),l.addClass("popOpen").removeClass("popClose"));var n=(l=$("#removeRecurring")).closest(".labelValCreate"),r=n.outerHeight();if(l.css("top",r),n.addClass("bba5"),"true"==$("#iskanbanview").val()){var i=$("#cvEditSave");i.css("z-index",31);var o=$("#tasksFreezeLayer");if(0==o.length){var s=$('<div id="tasksFreezeLayer" class="tasksFreezeLayer"></div>');i.append(s),s.css({width:t,height:a})}else o.show();removeFreezeLayer(),l.addClass("zi42").removeClass("zI31")}if($("#forEditViewScroll").length>0){var d=l.parents(".tabDivCreate"),u=d.position().top;d.parents("#forEditViewScroll").scrollTop(u)}e.css("background-color","#fff")},cancelDeleteRecurring:function(){$("#Crm_Tasks_RECURRING").prop("checked",!0),crmTasks.closeDeleteRecurringPopup()},closeDeleteRecurringPopup:function(){var e=$("#removeRecurring");(e.removeClass("popOpen").addClass("popClose"),e.closest(".labelValCreate").removeClass("bba5"),e.find("#innerSlider").on("transitionend",(function(){e.hide(),$(this).off("transitionend")})),Crm.userDetails.TaskPopup||removeFreezeLayer(),"true"==$("#iskanbanview").val())&&($("#cvEditSave").css("z-index",""),$("#tasksFreezeLayer").hide(),e.removeClass("zi42").addClass("zI31"))},constructDelReminderPop:function(){var e=$('<div id="removeReminder" class="pA zI31 sliderPop popup_shadow w100per popClose bRadBot3" style="top: 35px; width: 500px;"></div>');e.appendTo($("#Tasks_fldRow_REMINDAT .reminderSection"));var t=$('<div id="innerSlider" class="pR p30 whiteBg innerSlider bRadBot3"></div>');t.appendTo(e);var a=$('<h3 class="color_5">Remove Reminder</h3>'),l=$('<p class="mB25 mT20">'+I18n.getMsg("crm.task.remove.reminder")+"</p>"),n=$('<div id="popFooter" class="alignRight"><input type="button" data-zcqa="delRemCancel" class="newwhitebtn" value='+I18n.getMsg("crm.button.cancel")+' onClick="crmTasks.cancelDeleteReminder()"/><input type="button" data-zcqa="delRemAllUpcoming" class="newwhitebtn" value="'+I18n.getMsg("crm.all.upcoming.tasks1")+'" onClick="crmTasks.removeAllReminder();"/><input type="button" style="color: #fff;" data-zcqa="delRemOnlyThis" class="redbtn mR0" value="'+I18n.getMsg("crm.only.this.task")+'" onClick="crmTasks.removeThisReminder()"/></div>');t.append(a).append(l).append(n),setTimeout((function(){e.addClass("popOpen").removeClass("popClose")}),10)},removeThisReminder:function(){crmTasks.remOffAll=!1,crmTasks.remOffOnlyThis=!0,crmTasks.constructBlueBannerMsg(),crmTasks.removeReminder()},removeAllReminder:function(){crmTasks.remOffAll=!0,crmTasks.remOffOnlyThis=!1,crmTasks.constructBlueBannerMsg(),crmTasks.removeReminder()},removeReminder:function(){crmTasks.closeDeleteReminderPop(),crmTasks.unsetReminder()},openDeleteReminderPop:function(){freezeBackground();var e=$("#FreezeLayer"),t=e.width(),a=e.height(),l=$("#removeReminder");0==l.length?crmTasks.constructDelReminderPop():(l.show(),l.addClass("popOpen").removeClass("popClose"));var n=(l=$("#removeReminder")).closest(".labelValCreate"),r=n.outerHeight();if(l.css("top",r),n.addClass("bba5"),"true"==$("#iskanbanview").val()){var i=$("#cvEditSave");i.css("z-index",31);var o=$("#tasksFreezeLayer");if(0==o.length){var s=$('<div id="tasksFreezeLayer" class="tasksFreezeLayer"></div>');i.append(s),s.css({width:t,height:a})}else o.show();removeFreezeLayer(),l.addClass("zi42").removeClass("zI31")}if($("#forEditViewScroll").length>0){var d=l.parents(".tabDivCreate"),u=d.position().top;d.parents("#forEditViewScroll").scrollTop(u)}e.css("background-color","#fff")},cancelDeleteReminder:function(){crmTasks.closeDeleteReminderPop(),$("#Crm_Tasks_REMINDAT").prop("checked",!0)},closeDeleteReminderPop:function(){var e=$("#removeReminder");(e.removeClass("popOpen").addClass("popClose"),e.closest(".labelValCreate").removeClass("bba5"),e.find("#innerSlider").on("transitionend",(function(){e.hide(),$(this).off("transitionend")})),Crm.userDetails.TaskPopup||removeFreezeLayer(),"true"==$("#iskanbanview").val())&&($("#cvEditSave").css("z-index",""),$("#tasksFreezeLayer").hide(),e.removeClass("zi42").addClass("zI31"))},populateRecurringDiv:function(){var e=crmTasks.getRecurringSummaryData(),t=$("#Crm_Tasks_Recurring_period");t.find("option:selected").removeAttr("selected"),t.find('option[value="'+e.repeatType+'"]').prop("selected",!0),thirdPartyUtils.bindSelect2(t);var a=e.endsOn;if("1"==a?$("#Crm_Tasks_RECURRING_END_NEVER").prop("checked",!0):"2"==a?($("#Crm_Tasks_RECURRING_END_NOOFTIMES").prop("checked",!0),$("#Crm_Tasks_RECURRING_REPEAT_COUNT").val(e.endsOnCnt)):"3"==a&&($("#Crm_Tasks_RECURRING_END_ON").prop("checked",!0),$("#Crm_Tasks_RECURRING_END_DATE").val(e.endsOnDate)),"custom"==e.repeatType){$("#TasksCustomFrequencyDetails").show();var l=e.customRepeat,n=l.type,r=n,i=$("#Crm_Tasks_Custom_Recurring_period");i.find("option:selected").prop("selected",!1),i.find('option[value="'+r+'"]').prop("selected",!0),thirdPartyUtils.bindSelect2(i);var o=$("#Crm_Tasks_Custom_Recurring_perioddaily1"),s=$("#Crm_Tasks_Custom_Recurring_periodweekly1"),d=$("#Crm_Tasks_Custom_Recurring_periodmonthly1"),u=$("#Crm_Tasks_Custom_Recurring_periodyearly1");switch(o.hide(),s.hide(),d.hide(),u.hide(),n){case"daily":o.show(),$("#Crm_Tasks_RECURRING_DAILY_REPEAT_COUNT").val(l.every);break;case"weekly":s.show(),$("#Crm_Tasks_RECURRING_WEEKLY_REPEAT_COUNT").val(l.every);var c=l.weekValues,m=$("#Tasks_fldRow_RECURRING_WEEKLY_DAYS");m.find(".circleInput").prop("checked",!1);for(var p=c.length,f=0;f<p;f++)m.find('.circleInput[value="'+c[f]+'"]').prop("checked",!0);break;case"monthly":d.show(),$("#Crm_Tasks_RECURRING_MONTHLY_REPEAT_COUNT").val(l.every);var v=l.monthlyType;if("1"==v){$("#Crm_Tasks_RECURRING_MONTHLY_DAYS").prop("checked",!0);var h=l.monthDay;(E=$("#Crm_Tasks_RECURRING_MONTHLY_DAYS_NO")).find("option:selected").prop("selected",!1),E.find('option[value="'+h+'"]').prop("selected",!0);var g={disable_search_threshold:100};thirdPartyUtils.bindSelect2(E,g)}else if("2"==v){$("#Crm_Tasks_RECURRING_MONTHLY_DAYS_ON").prop("checked",!0);var y=l.weekDayNth,b=l.weekDayValue;(k=$("#Crm_Tasks_RECURRING_MONTHLY_WEEKSEQUENCE_TYPE")).find("option:selected").prop("selected",!1),k.find('option[value="'+y+'"]').prop("selected",!0),thirdPartyUtils.bindSelect2(k);var C=$("#Crm_Tasks_RECURRING_MONTHLY_WEEKSEQUENCE_DAY");C.find("option:selected").prop("selected",!1),C.find('option[value="'+b+'"]').prop("selected",!0),thirdPartyUtils.bindSelect2(C)}break;case"yearly":u.show();var T=l.yearlyType;if("1"==T){$("#Crm_Tasks_RECURRING_YEARLY_DAYS").prop("checked",!0);h=l.monthDay;var E,_=l.monthVal,I=$("#Crm_Tasks_RECURRING_YEARLY_DAYS_OF_MONTH");I.find("option:selected").prop("selected",!1),I.find('option[value="'+_+'"]').prop("selected",!0),thirdPartyUtils.bindSelect2(I),(E=$("#Crm_Tasks_RECURRING_YEARLY_DAYS_NO")).find("option:selected").prop("selected",!1),E.find('option[value="'+h+'"]').prop("selected",!0),thirdPartyUtils.bindSelect2(E)}else if("2"==T){$("#Crm_Tasks_RECURRING_YEARLY_DAYS_ON").prop("checked",!0);y=l.weekDayNth,b=l.weekDayValue;var k,w=l.monthVal;(k=$("#Crm_Tasks_RECURRING_YEARLY_WEEKSEQUENCE_TYPE")).find("option:selected").prop("selected",!1),k.find('option[value="'+y+'"]').prop("selected",!0),thirdPartyUtils.bindSelect2(k);var R=$("#Crm_Tasks_RECURRING_YEARLY_WEEKSEQUENCE_NO");R.find("option:selected").prop("selected",!1),R.find('option[value="'+b+'"]').prop("selected",!0),thirdPartyUtils.bindSelect2(R);var L=$("#Crm_Tasks_RECURRING_YEARLY_WEEKSEQUENCE_MONTH_NAME");L.find("option:selected").prop("selected",!1),L.find('option[value="'+w+'"]').prop("selected",!0);g={disable_search_threshold:100};thirdPartyUtils.bindSelect2(L,g)}}}else $("#TasksCustomFrequencyDetails").slideUp()},populateReminderDiv:function(){var e=crmTasks.getReminderSummaryData();switch(e.reminderType){case"date_based":$("#Crm_Tasks_RemindAt_Start_Date1_Radio").prop("checked",!0),$("#Crm_Tasks_RemindAt_Start_Date1").val(e.remTimeDetail.DateValue),$("#Crm_Tasks_RemindAt_Start_Date1_TimeOption").val(e.remTimeDetail.timeValue);break;case"period_based":$("#Crm_Tasks_RemindAt_remTime_Radio").prop("checked",!0);var t=$("#Crm_Tasks_remTime");crmTasks.updateRemTimeSelect(e.remTimeDetail.periodType,t),t.find("option:selected").removeAttr("selected"),t.find('option[value="'+e.remTimeDetail.periodValue+'"]').prop("selected",!0),thirdPartyUtils.bindSelect2(t);var a=$("#Crm_Tasks_remTime_Period");a.find("option:selected").removeAttr("selected"),a.find('option[value="'+e.remTimeDetail.periodType+'"]').prop("selected",!0),thirdPartyUtils.bindSelect2(a),$("#Crm_Tasks_remTime_TimeOption").val(e.remTimeDetail.timeValue)}var l=$("#Crm_Tasks_RemindAt_period");l.find("option:selected").removeAttr("selected"),l.find('option[value="'+e.remRepType+'"]').prop("selected",!0),thirdPartyUtils.bindSelect2(l);var n=$("#Crm_Tasks_RemindAt_Notify");null!=e.remNotify&&n.find('option[value="'+e.remNotify+'"]').prop("selected",!0),thirdPartyUtils.bindSelect2(n)},showFrequencyDetails:function(e){var t=$(e);null!=$("#Crm_Tasks_RECURRING").data().recdata&&"clone"!==window.Tasks.currentStatus&&crmTasks.showEditRecurOptions();var a=[{colname:"Custom_Recurring_period",customfield:"false",displaylabel:I18n.getMsg("crm.calendar.freq"),label:"customPeriod",mandate:"true",maxlength:"120",readonly:"false",type:"Pick List",uitype:"42",val:[{html:I18n.getMsg("Daily"),content:"daily"},{html:I18n.getMsg("Weekly"),content:"weekly"},{html:I18n.getMsg("Monthly"),content:"monthly"},{html:I18n.getMsg("Yearly"),content:"yearly"}]}],l="Tasks",n=$("#Tasks_fldRow_Recurring_period")[0].parentNode;if(("edit"==window.Tasks.currentStatus||"clone"==window.Tasks.currentStatus)&&null!=t.data().recdata&&""!=t.data().recdata){var r=t.data().recdata;if((r=r.split("*#")).length>0){var i=r[0];a[0].defaultvalue=r[0],"daily"==i?(a[0].selectedRadio=r[1],a[0].frequency=r[4]):"weekly"==i?(a[0].selDays=r[3].split("^^"),a[0].frequency=r[4]):"monthly"!=i&&"yearly"!=i||(a[0].selectedRadio=parseInt(r[1]),a[0].monthData1=parseInt(r[4]),a[0].monthData2=parseInt(r[5]),a[0].monthData3=r[6])}}crmTemplate.createSubFields(l,n,"TasksCustomFrequencyDetails",a),crmTemplate.showPeriodDetails(l,$("#Crm_Tasks_Custom_Recurring_period")[0]),thirdPartyUtils.bindSelect2($("#Tasks_fldRow_Custom_Recurring_period").find("select"))},removeArrayElements:function(e,t){for(var a=t.length,l=0;l<a;l++){var n=e.lastIndexOf(t[l]);-1!==n&&e.splice(n,1)}},confirmDeleteTask:function(e,t,a,l,n){if(a&&""!==a&&"onlyThis"!=a){var r;if(!$("#tasksDeletePopup").length)(r=$('<div class="zcrm-modal zcrm-effect" id="tasksDeletePopup"><div class="zcrm-content"><div class="p30"><h2 class="crm-font-bold" id="warningHeader"></h2><p class="mT10">'+I18n.getMsg("crm.task.remove.recurring")+'</p><div class="pT30 aligncenter footer"></div></div></div></div>')).find(".footer").append('<input type="button" value="'+I18n.getMsg("crm.only.this.task")+'" id="onlyThisTask" class="redbtn fromDeletePopup" onclick="crmTasks.closeConfirmDeletePop()">'),r.find(".footer").append('<input type="button" value="'+I18n.getMsg("crm.all.upcoming.tasks1")+'" id="allUpcomingTasks" class="redbtn fromDeletePopup" onclick="crmTasks.closeConfirmDeletePop()">'),r.find(".footer").append('<input type="button" value="'+I18n.getMsg("crm.button.cancel")+'" class="newgraybtn" onclick="crmTasks.closeConfirmDeletePop()">'),$("body").append(r);l=I18n.getMsg("crm.task.remove.recurring"),(r=$("#tasksDeletePopup")).find("#warningHeader").text("Delete Recurring Task").show(),r.find("#warningMsg").html(l),r.find("#showWarning2").css("display","none"),r.find("#delItemName").text(""),r.find(".evButtons").hide(),r.find("#deleteButton").hide();var i='{"module":"Tasks","id":"'+e+'","delOpt":"upcomingTasks", "from":"detailView"}';r.find("#allUpcomingTasks").attr({"data-cid":"deleteEntity","data-params":i}).unbind("click"),i='{"module":"Tasks","id":"'+e+'","delOpt":"onlyThis","from":"detailView"}',r.find("#onlyThisTask").attr({"data-cid":"deleteEntity","data-params":i}).unbind("click"),showAnimatePopup("tasksDeletePopup")}else showDeletePopup(l,"crm.button.delete","","",n)},closeConfirmDeletePop:function(){hideAnimatePopup("tasksDeletePopup"),removeFreezeLayer()},freezeReminder:function(){$(".reminderSection").addClass("freezeReminder");var e=$("#Crm_Tasks_REMINDAT");$('#Crm_Tasks_remTime option[value="0"]').prop("disabled",!1),e.prop("disabled",!0),e.removeClass("errorFieldAdded"),$("#Tasks_fldRow_REMINDAT").removeClass("errorFieldP"),$("#Tasks_fldRow_REMINDAT > .labelValCreate > .errorMsgDesc").remove()},unfreezeReminder:function(){var e=$("#Crm_Tasks_REMINDAT");e.parent().off("mouseenter.duedateinpast"),e.parent().off("mouseleave.duedateinpast"),$(".reminderSection").removeClass("freezeReminder"),e.prop("disabled",!1)},handleRecurChange:function(e){var t=$(e);"SELECT"!=$(e[0]).prop("tagName")&&"INPUT"!=$(e[0]).prop("tagName")||(t.off("change.recurEdit"),t.on("change.recurEdit",(function(){crmTasks.showEditRecurOptions()})))},handleReminderChange:function(e){var t=$("#Crm_Tasks_REMINDAT"),a=$(e);t.prop("checked")&&""==t.data().oldValue&&crmTasks.recDataBefEdit==crmTasks.recurringSummaryText?crmTasks.showEditRemindOptions():"SELECT"!=$(e[0]).prop("tagName")&&"INPUT"!=$(e[0]).prop("tagName")||(a.off("change.remindEdit"),a.on("change.remindEdit",(function(){crmTasks.showEditRemindOptions()})))},showEditRecurOptions:function(){$("#recurDone").hide(),$("#recurAll").show()},showEditRemindOptions:function(){crmTasks.recDataBefEdit==crmTasks.recurringSummaryText&&"clone"!==window.Tasks.currentStatus?($("#rem_done").hide(),$("#rem_onlythis").show(),$("#rem_allupcoming").show()):($("#rem_done").show(),$("#rem_onlythis").hide(),$("#rem_allupcoming").hide())},createRemindAt:function(e,t){crmTemplate.showRemindAt(e,t),t.checked&&crmTasks.OpenRemindAtDiv()},updateRemPeriodSelect:function(){var e=$("#Crm_Tasks_remTime_Period"),t=e.find("option:selected").val();e.empty(),e.append('<option value="days">'+I18n.getMsg("crm.remind.day(s)")+"</option>"),crmTasks.possibleWeeks&&e.append('<option value="weeks">'+I18n.getMsg("crm.remind.week(s)")+"</option>"),crmTasks.possibleMonths&&e.append('<option value="months">'+I18n.getMsg("crm.remind.month(s)")+"</option>");var a=e.find('option[value="'+t+'"]');a.prop("selected",!0),1==a.length?crmTasks.updateRemTimeSelect(t,$("#Crm_Tasks_remTime")):crmTasks.updateRemTimeSelect("days",$("#Crm_Tasks_remTime")),thirdPartyUtils.bindSelect2(e)},updateRemTimeSelect:function(e,t){var a=t.find("option:selected").val();if(t.empty(),"days"==e){t.append('<option value="0">'+I18n.getMsg("on")+"</option>");for(var l=1;l<31;l++)t.append('<option value="'+l+'">'+l+"</option>");for(l=crmTasks.possibleDays;l<31;l++)t.find('option[value="'+(l+1)+'"]').remove()}else if("weeks"==e){for(l=1;l<5;l++)t.append('<option value="'+l+'">'+l+"</option>");for(l=crmTasks.possibleWeeks+1;l<5;l++)t.find('option[value="'+l+'"]').remove()}else if("months"==e){for(l=1;l<12;l++)t.append('<option value="'+l+'">'+l+"</option>");for(l=crmTasks.possibleMonths+1;l<12;l++)t.find('option[value="'+l+'"]').remove()}t.find('option[value="'+a+'"]').prop("selected",!0),t.addClass("dataPopulated"),thirdPartyUtils.bindSelect2(t)},updateRemRepeatSelect:function(){var e=$("#Crm_Tasks_DUEDATE");if(!(null==e[0]||""==e[0].value||!Utils.isValidDate(Crm.userDetails.DATE_PATTERN,e[0].value))){var t=$("#Crm_Tasks_RemindAt_period"),a=t.val(),l=new Date(e.data("dateObj")),n=null,r=0;if($("#Crm_Tasks_RemindAt_Start_Date1_Radio").prop("checked")){n=new Date(crmCalendar.getDateObjectFromGivenDateString($("#Crm_Tasks_RemindAt_Start_Date1").val()));var i=new Date;Utils.compareDate(n,l)&&Utils.compareDate(i,n)&&(r=Utils.getDayDiff(l,n))}else{var o=$("#Crm_Tasks_remTime_Period").val(),s=$("#Crm_Tasks_remTime").val();switch("0"==s?$("#rem_off_before_text").html(I18n.getMsg("of.duedate")):$("#rem_off_before_text").html(I18n.getMsg("before.of.duedate")),o){case"months":r=30*s;break;case"weeks":r=7*s;break;case"days":r=s}}if(null!=r){for(var d="",u=crmTasks.remRepeatVal,c=[],m=[],p=0;p<5;p++)c.push('<option value="'+u[p].content+'">'+u[p].html+"</option>");if(r>365)for(p=0;p<5;p++)d+=c[p],m.push({html:u[p].html,content:u[p].content});else if(r>30)for(p=0;p<4;p++)d+=c[p],m.push({html:u[p].html,content:u[p].content});else if(r>7)for(p=0;p<3;p++)d+=c[p],m.push({html:u[p].html,content:u[p].content});else r>1?(d=c[0]+c[1],m.push({html:u[0].html,content:u[0].content}),m.push({html:u[1].html,content:u[1].content})):(d=c[0],m.push({html:u[0].html,content:u[0].content}));t.empty().html(d),t.find('option[value="'+a+'"]').prop("selected",!0),t.data().values=m,thirdPartyUtils.bindSelect2(t)}}},handleReminderOptionChange:function(){crmTasks.updateRemRepeatSelect()},checkReminderValidity:function(){if(crmTasks.isReminderSet()){var e=crmTasks.getReminderSummaryData();if("date_based"==e.reminderType)crmTasks.unsetReminder();else{var t=crmTasks.getRecurringSummaryData(),a=e.remTimeDetail.periodType,l=!0;switch(t.repeatType){case"monthly":"months"==a&&(l=!1);break;case"weekly":("months"==a||"weeks"==a||parseInt(e.remTimeDetail.periodValue)>6)&&(l=!1);break;case"daily":"months"!=a&&"weeks"!=a&&0==parseInt(e.remTimeDetail.periodValue)||(l=!1);break;case"custom":var n=t.customRepeat.type,r=t.customRepeat.every,i=e.remTimeDetail.periodValue;switch(n){case"monthly":"months"==a&&(i<r||(l=!1));break;case"weekly":"months"==a||"weeks"==a||parseInt(e.remTimeDetail.periodValue)>6?l=!1:"weeks"==a&&(i<r||(l=!1));break;case"daily":"weeks"==a||"months"==a||0!=parseInt(e.remTimeDetail.periodValue)?l=!1:i<r||(l=!1)}}l||crmTasks.unsetReminder()}}},updateReminderOptions:function(){var e=0;switch(crmTasks.recurringSummaryData.repeatType){case"daily":e=0;break;case"weekly":e=6;break;case"monthly":e=30;break;case"yearly":e=365;break;case"custom":switch($("#Crm_Tasks_Custom_Recurring_period").val()){case"daily":e=parseInt($("#Crm_Tasks_RECURRING_DAILY_REPEAT_COUNT").val())-1;break;case"weekly":e=7*(e=parseInt($("#Crm_Tasks_RECURRING_WEEKLY_REPEAT_COUNT").val()))-1;break;case"monthly":e=30*(e=parseInt($("#Crm_Tasks_RECURRING_MONTHLY_REPEAT_COUNT").val()))-1;break;case"yearly":e=365}}crmTasks.updatePossiblePeriods(e)},updateDuedateBasedOnRecurring:function(e){var t=crmTasks.getRecurringSummaryData(),a=$("#"+e),l=new Date(crmCalendar.getDateObjectFromGivenDateString(a.val())),n=null,r=l;if("custom"==t.repeatType){var i=t.customRepeat;switch(i.type){case"weekly":var o=i.weekValues,s=parseInt(o[0])-1,d=parseInt(o[i.weekValues.length-1])-1,u=l.getDay();if(d<u){var c=new Date(l.getTime()-24*u*3600*1e3);r=new Date(c.getTime()+24*s*3600*1e3),s<u&&r.setDate(r.getDate()+7)}else for(var m=o.length,p=0;p<m;p++){var f=parseInt(o[p]-1);if(f>=u){r.setDate(r.getDate()+(f-u));break}}break;case"monthly":if(1==i.monthlyType){var v=l.getDate();if((b=i.monthDay)<v)(r=new Date(l.getFullYear(),l.getMonth()+1,b)).getDate()!=b&&r.setDate(b);else b>(E=new Date(l.getFullYear(),l.getMonth()+1,0).getDate())&&(b=E),r.setDate(b)}else{var h=i.weekDayNth,g=i.weekDayValue,y=new Date(l);(r=crmTasks.updateDueDateForCustomPeriods(y,h,g)).getTime()<l.getTime()&&(y.setMonth(y.getMonth()+1),r=crmTasks.updateDueDateForCustomPeriods(y,h,g))}break;case"yearly":if(1==i.yearlyType){var b=i.monthDay,C=i.monthVal,T=(v=l.getDate(),l.getMonth());if(b<v||C<T){if((r=new Date(l.getFullYear()+1,C,b)).getDate()!=b)b>(E=new Date(l.getFullYear(),C+1,0).getDate())&&(b=E),r.setDate(b);r.getMonth()!=C&&r.setMonth(C)}else{var E;b>(E=new Date(l.getFullYear(),l.getMonth()+1,0).getDate())&&(b=E),r=new Date(l.setMonth(C)),r=new Date(r.setDate(b))}}else{C=i.monthVal,h=i.weekDayNth,g=i.weekDayValue,y=new Date(l);(r=crmTasks.updateDueDateForCustomPeriods(y,h,g,C)).getTime()<l.getTime()&&(y.setYear(y.getFullYear()+1),r=crmTasks.updateDueDateForCustomPeriods(y,h,g,C))}}n=crmCalendar.convertToUserDatePattern(r.getDate()+" "+r.getMonth()+" "+r.getFullYear()),a.val(n)}},changeDueDateFromDvForRecurTask:function(){if(!$("#exculdeFromSetPopup").length){var e=$('<div id="taskExcludeFromSet" class="newPopup ppTop w500 is-scroll bRadBot3"><div class="pp-content"><div class="excludeFromMsg f16 aligncenter color_5 lght24"></div><div class="aligncenter mT20 footer"></div></div></div>');e.find(".footer").append('<input type="button" class="primarybtn" value="Proceed" id="dueDateExcludeSave" onClick="crmTasks.executeFromRecSetSave()">'),e.find(".footer").append('<input type="button" class="newwhitebtn" value="Cancel" onClick="crmTasks.executeFromRecSetCancel()">'),$("body").append(e)}crmui.showPopup("taskExcludeFromSet"),$("#taskExcludeFromSet .excludeFromMsg").html(I18n.getMsg("crm.task.update.duedate1",[Utils.getDateInUserDatePattern(new Date(returnJson.entityMapJson.RECURRING.startdate)),Utils.getDateInUserDatePattern(new Date(returnJson.entityMapJson.RECURRING.enddate))]))},executeFromRecSetSave:function(){var e=$("#mouseArea__"+globalfieldlabel),t=e.data("params");t.isDetailView=!0;var a=detailView.currentModule,l=JSON.parse(e.attr("data-params")),n=l.fieldid,r=l.colname,i=returnJson[a].entityid;Callonclickofbutton("/crm/v2/",escapeSingleQuote(globaltextboxpanid),escapeSingleQuote(globalvaluespanid),escapeSingleQuote(globaltextareapanid),escapeSingleQuote(globalfieldlabel),a,escapeSingleQuote(globalsubvaluespanid),t.uitype,void 0,r,i,a,!1,void 0,n),$("#taskRecurInfoDiv").remove(),$("#mouseArea__RECURRING").parent().remove(),crmui.hidePopup("taskExcludeFromSet")},executeFromRecSetCancel:function(){handleCancel(escapeSingleQuote(globalvaluespanid),escapeSingleQuote(globaltextareapanid),escapeSingleQuote(globalfieldlabel)),crmui.hidePopup("taskExcludeFromSet")},constructBlueBannerMsg:function(){var e=$("#rightPanel"),t=$("#taskBlueBanner"),a=null;"true"==$("#iskanbanview").val()?a=$("#cvEditSave .cvpadding").width():a=$(".cvpadding").width();if("edit"===window.Tasks.currentStatus){var l="";crmTasks.updateAllRec&&(crmTasks.remOffAll||crmTasks.remOffOnlyThis||crmTasks.updateAllUpcomingRem||crmTasks.updateOnlyThisRem)?l=I18n.getMsg("crm.task.update.recrem"):crmTasks.updateAllRec?l=I18n.getMsg("crm.task.update.rec"):(crmTasks.remOffAll||crmTasks.updateAllUpcomingRem)&&(l=I18n.getMsg("crm.task.update.rem")),crmTasks.showExcludeFromRepeatSeriesAlert&&!crmTasks.updateAllRec&&(l+=I18n.getMsg("crm.task.update.duedate")),""!=l?t.show().text(l):t.hide();var n=a/2-t.width()/2;e.length>0&&(n+=e.width()),t.css("left",n)}},showTasksBlackTT:function(){$(".tasksBlackTT").show()},triggerSaveFieldClickEvnt:function(e){if($("#VRAjaxEdit").is(":visible"))if(e)$("#VRAjaxEdit #mandatorySave").click();else{var t=$("#Crm_Tasks_STATUS");t.find('option[value="'+t.data("old-value")+'"]').prop("selected",!0),thirdPartyUtils.bindSelect2(t)}else removeFreezeLayer(),e?$("#saveCancelSpan > span").trigger("click"):$("#saveCancelSpan").length&&$("#saveCancelSpan > a")[0].click();hideAnimatePopup("deletepopup")},updateDueDateForCustomPeriods:function(e,t,a,l){var n=new Date(new Date(e).setDate(1)),r=n.getDay()+1;if(l&&n.setMonth(l),r!=a){var i,o=Math.abs(a-r);for("+"===(i=a-r>0?"+":"-")&&t--;o;)"+"===i?n.setDate(n.getDate()+1):n.setDate(n.getDate()-1),o--}else t--;var s=new Date(n.getTime()+7*t*24*3600*1e3);return s.getMonth()>e.getMonth()&&s.setDate(s.getDate()-7),s},removeErrorField:function(){$("#Crm_Tasks_REMINDAT").removeClass("errorFieldAdded"),$("#Tasks_fldRow_REMINDAT").removeClass("errorFieldP"),$("#Tasks_fldRow_REMINDAT > .labelValCreate > .errorMsgDesc").remove()}},CAEExec=function(){var e={Leads:["COMPANY","EMAIL","WEBSITE"],Contacts:["ACCOUNTID","EMAIL"],Accounts:["ACCOUNTNAME","WEBSITE"]},t={COMPANY:"c",WEBSITE:"w",EMAIL:"e",ACCOUNTID:"c",ACCOUNTNAME:"c"},a={c:"COMPANY",w:"WEBSITE",e:"EMAIL"},l={COMPANY:"companyname",WEBSITE:"companywebsite",EMAIL:"emailid",ACCOUNTID:"companyname",ACCOUNTNAME:"companyname"},n={c:"crm.security.user.orgName",w:"crm.phonebridge.website",e:"crm.email.chk"},r={},i=null,o={};function s(e){var t="/crm/v2/settings/auto_enrichment/getEnrichDatafromDI",a={action:"fetch",reqjson:JSON.stringify(r)};if(r&&r.recordlist){var l=r.recordlist[0].recordidentification,n=/^[\x00-\xFF]*$/.test(l),o=r.recordlist[0].emailid,s=validationUtils.isValidEmail(o);if(!n)return void renderingUtils.showCustomAlert(I18n.getMsg("crm.auto.enrich.otherlanguage.unsupported"));if(o&&o.length>0&&!s)return}if(e){var u=$("#emailDetailIframeContent").contents(),c=u.find(".ceMailContent").html(),m=u.find(".mailDetailSubject").text(),p=m.substring(m.indexOf(":")+2);-1==m.indexOf("<")&&(p="<"+p+">");var f=getZuid(),v=$("#id").val(),h="e|:|"+$("#subvalue_EMAIL").text()+"||"+v;"Accounts"==$("#module").val()&&(h="c|:|"+$("#entityName").val()+"||"+v);var g={};g.requestId=f,g.callback="wms|server";var y=[{id:h,emailBody:$ESAPI.encoder().encodeForHTML(c),senderEmailId:p}];g.leadEnrichList=y,a=JSON.stringify(g),t="/crm/zia/autoenrichment.do?action=emailenrich&recordof=person&calledfrom=crm"}null!=i&&(i.abort(),i=null),void 0===CAEExec.enrichStatus||1===CAEExec.enrichStatus?CAEExec.enrichStatus=0:2!==CAEExec.enrichStatus&&4!==CAEExec.enrichStatus||(CAEExec.enrichStatus=3);var b={"X-ZCSRF-TOKEN":csrfParamName+"="+cookieUtils.getCookie("crmcsr")},C=$.ajax({url:t,type:"POST",data:a,headers:b,success:function(e){if(e){i=null;var t=null;(t=e.auto_enrichment?e.auto_enrichment:e).status&&(t.status.indexOf("completed")>-1||t.status.indexOf("success")>-1)?d(t):t.status&&t.status.indexOf("wait")>-1&&"entityCreate"!==CAEExec.modeOfRecord?($("#loadingDotDiv,#enrichDataSearchDiv,#enrichPopupSaveBtn,#enrichPopupCancelBtn").hide(),$("#enrichPopupDoneBtn,#waitEnrichInfoDiv").show()):validationUtils.isEmpty(t)&&($("#loadingDotDiv,#enrichDataSearchDiv,#enrichPopupSaveBtn,#enrichPopupCancelBtn").hide(),$("#enrichPopupDoneBtn,#connectProbInfoDiv").show(),CAEExec.init())}else $("#waitEnrichInfoDiv,#enrichDataSearchDiv,#enrichPopupSaveBtn,#enrichPopupCancelBtn").hide(),$("#enrichPopupDoneBtn").show(),$("#dataSyncInfoDiv").text(I18n.getMsg("crm.auto.enrich.no.data",moduleRecordMapping[Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam()].singular_label)).show(),$("#loadingDotDiv").hide()},error:function(t){if(e)$("#waitEnrichInfoDiv,#enrichDataSearchDiv,#enrichPopupSaveBtn,#enrichPopupCancelBtn").hide(),$("#enrichPopupDoneBtn").show(),$("#dataSyncInfoDiv").text(I18n.getMsg("crm.auto.enrich.no.data",moduleRecordMapping[Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam()].singular_label)).show(),$("#loadingDotDiv").hide();else if("abort"!==t.statusText&&"entityCreate"!==CAEExec.modeOfRecord)return renderingUtils.showCustomAlert(I18n.getMsg("crm.translation.error.history")),!1}});i=C}function d(e){var t=[],a="",l=!1;if(null!=e.response?e.response.hasOwnProperty("leadenrichlist")&&(a=(t=e.response.leadenrichlist[0]).id,l=!0):a=(t=e.recordlist[0]).recordidentification,CAEExec.lastRecordIdentify===a||l){CAEExec.enrichedData=e;var r=$("#enrichPopupDiv"),i=$("#enrichMapDiv");if("notfound"!==t.status&&r.is(":visible")&&i.is(":visible")&&"entityCreate"===CAEExec.modeOfRecord)crmui.showPopup({id:"enrichedDataRefreshDiv"}),$("#FreezeLayer").css("z-index","30"),$("#enrichedDataRefreshDiv").css({"z-index":"31"});else if("entityCreate"!==CAEExec.modeOfRecord&&r.is(":visible")||"entityCreate"===CAEExec.modeOfRecord&&r.is(":visible")&&!i.is(":visible"))u();else if("notfound"===t.status||"entityCreate"===CAEExec.modeOfRecord||r.is(":visible")){if("notfound"!==t.status&&"entityCreate"===CAEExec.modeOfRecord){var o;(o=$(".LeadEnrichmentLinkhere")).is(":visible")?(o.removeClass("onprocessEnrichment"),o.attr({onmouseenter:"",onmouseleave:"",onClick:"CAEExec.getAutoEnrichData('entityCreate');sE(event);"})):o.show()}}else $(".ziaIconDetailText").attr("onClick","CAEExec.showEnrichDataPop()"),$(".ZiaDetailviewEnrichmentDiv").show();if("notfound"!==t.status&&"entityCreate"===CAEExec.modeOfRecord&&function(){for(var e=CAEExec.enrichedData.recordlist[0].recordidentification.split("||"),t="entityCreate"===CAEExec.modeOfRecord?e.length:e.length-1,a=[],l=0;l<t;l++){var r=e[l].split("|:|");a.push(I18n.getMsg(n[r[0]])),a.push(r[1])}var i=$("#createEnrichLinkToolTip");1===t?i.attr("onmouseover","crmui.showTooltip('"+I18n.getMsg("crm.auto.enrich.found.info1",a)+"',false,'right',this)"):2===t?i.attr("onmouseover","crmui.showTooltip('"+I18n.getMsg("crm.auto.enrich.found.info2",a)+"',false,'right',this)"):3===t&&i.attr("onmouseover","crmui.showTooltip('"+I18n.getMsg("crm.auto.enrich.found.info3",a)+"',false,'right',this)")}(),"notfound"===t.status)return(o=$("#createEnrichLink")).is(":visible")&&"entityCreate"===CAEExec.modeOfRecord&&o.hasClass("onprocessEnrichment")&&(o.removeClass("onprocessEnrichment"),o.attr({onmouseenter:"",onmouseleave:"",onClick:"CAEExec.getAutoEnrichData('entityCreate');sE(event);"}),o.hide()),!1;0===CAEExec.enrichStatus?CAEExec.enrichStatus=1:3===CAEExec.enrichStatus&&(CAEExec.enrichStatus=4)}setTimeout((function(){0===$("#enrichmentInnerTableDiv").find("input:checked").length?$("#enrichPopupSaveBtn").addClass("disabled").prop("disabled",!0):$("#enrichPopupSaveBtn").removeClass("disabled").prop("disabled",!1)}),2e3)}function u(){CAEExec.enrichFieldCount=0;var e=function(){var e={},t=CAEExec.enrichedData;if(t.status.indexOf("success")>-1){if(void 0!==(t=t.response.leadenrichlist[0]).person)for(var a=t.person,l=Object.keys(a),n=l.length,r=0;r<n;r++){var i=l[r];if("address"===i)for(var o=a[i][0],s=(C=Object.keys(o)).length,d=0;d<s;d++)e[T=C[d]]=o[T];else if("social"===i)for(var u=a[i],c=(h=Object.keys(u)).length,m=0;m<c;m++)"twitterlink"===(y=h[m])?(b=(b=u[y]).split("/")[1],e[y]=b):e[y]=u[y];else e[i]=a[i]}}else if(void 0!==(t=t.recordlist[0]).orginfo){e.dataId=t.orginfo.dataId?t.orginfo.dataId:"";var p=t.orginfo,f=Object.keys(p),v=f.length;for(r=0;r<v;r++){var h,g=f[r];if("social"===g)for(u=p[g],c=(h=Object.keys(u)).length,m=0;m<c;m++){var y,b;"twitterlink"===(y=h[m])?(b=(b=u[y]).split("/")[1],e[y]=b):e[y]=u[y]}else if("address"===g){var C;for(o=p[g][0],s=(C=Object.keys(o)).length,d=0;d<s;d++){var T;"id"===(T=C[d])?e.street=o[T]:e[T]=o[T]}}else p[g]&&$.isArray(p[g])?e[g]=p[g][0]:e[g]=p[g]}}return e}(),t=[];store.findAll("auto_enrichment",{module:Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam()}).then((function(a){if(a.length){if($("#basedOnFieldInfoDiv").html(Handlebars.helpers.getBasedOnFieldInfo(!0)),"crm.tab.module.entity.canvas"===Lyte.Router.getRouteInstance().transition.info.route)!function(e,t,a){for(var l=store.peekRecord(moduleRecordMapping[Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam()].id,Lyte.Router.getRouteInstance().parent.getDynamicParam()),n=a[0].fields_map,r=n.length,i=0;i<r;i++){var o=n[i],s=o.crm_field;if(s){var d=store.peekRecord("field",s.id),u=o.enrich_field?o.enrich_field.name:void 0;if(d&&!1===d.read_only&&void 0!==t[u]){var c={},m=l[d.api_name];if(d&&"ACCOUNTID"===d.column_name)continue;if(m&&m.toLowerCase()===t[u].toLowerCase())continue;c.crmFieldColName=d.column_name,c.displayLabel=d.field_label,c.currentFieldVal=m,c.crmFieldRefName=d.api_name,c.isValueEmpty=!0,m&&(c.isValueEmpty=!1),c.enrichFieldVal=t[u],e.push(c)}}}}(t,e,a);else{var l="entityCreate"===CAEExec.modeOfRecord?crmCommonModule.createEditJson.entityMapJson:returnJson.entityMapJson,n=function(e){for(var t={},a=e[0].fields_map,l=a.length,n=0;n<l;n++){var r=a[n].crm_field;if(r){var i=a[n].enrich_field;t[i.name]={};var o=store.peekRecord("field",r.id);o&&(t[i.name].CrmFieldColName=o.column_name,t[i.name].CrmFieldRefName=r.api_name,t[i.name].enrichFieldRefName=i.name)}}return t}(a),r=Object.keys(n),i=r.length;CAEExec.enrichFieldMappingCount=i;for(var o=Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam(),s=0;s<i;s++){var d=r[s],u=n[d],c=u.CrmFieldColName;if(l[c]&&"false"===l[c].readonly&&void 0!==e[d]){var m={},p=null;if("entityCreate"===CAEExec.modeOfRecord)p=$("#Crm_"+o+"_"+c).val();else p=JSON.parse($("#mouseArea__"+c).attr("data-params")).defaultvalue;if(p.toLowerCase()===e[d].toLowerCase())continue;m.crmFieldColName=c,m.displayLabel=l[c].displaylabel,m.currentFieldVal=p,m.isValueEmpty=!0,m.enrichFieldRefName=u.enrichFieldRefName,m.crmFieldRefName=u.CrmFieldRefName,""!==p&&null!==p&&(m.isValueEmpty=!1),m.enrichFieldVal=e[d],t.push(m),CAEExec.enrichFieldCount=CAEExec.enrichFieldCount+1}l[c]&&"true"!==l[c].readonly||(CAEExec.enrichFieldCount=CAEExec.enrichFieldCount+1)}}!function(e,t){if(e.length>0){$("#enrichmentInnerTableDiv").empty().prepend($(Handlebars.templates.EnrichDataMapping(e))),t.dataId&&(CAEExec.enrichDataId=t.dataId),0===$("#enrichMapDiv").find("tbody").find("input:checked").length?$("#enrichPopupSaveBtn").addClass("disabled").prop("disabled",!0):$("#enrichPopupSaveBtn").removeClass("disabled").prop("disabled",!1),$("#waitEnrichInfoDiv,#enrichPopupDoneBtn").hide();var a=$("#enrichPopupSaveBtn");a.attr("onClick","CAEExec.updateEnrichDataDetails()").removeClass("disabled").prop("disabled",!0),a.show(),Crm.userDetails.permissions.Crm_Implied_Customize_Zoho_CRM&&$("#enrichMapLink").show().attr("onClick","Crm.trackSpotLightAction('Data Enrichment - Configure Field Mapping Click',{'Module':'"+Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam()+"'});"),$("#enrichDataSearchDiv,#enrichMapDiv,#enrichPopupCancelBtn").show()}else validationUtils.isEmpty(t)?($("#waitEnrichInfoDiv,#enrichDataSearchDiv,#enrichPopupSaveBtn,#enrichPopupCancelBtn").hide(),$("#enrichPopupDoneBtn").show(),$("#dataSyncInfoDiv").text(I18n.getMsg("crm.auto.enrich.no.data",moduleRecordMapping[Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam()].singular_label)).show()):($("#waitEnrichInfoDiv,#enrichDataSearchDiv,#enrichPopupSaveBtn,#enrichPopupCancelBtn").hide(),$("#enrichPopupDoneBtn").show(),$("#dataSyncInfoDiv").text(I18n.getMsg("crm.auto.enrich.no.new.data",moduleRecordMapping[Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam()].singular_label)).show());$("#loadingDotDiv").hide(),void 0!==CAEExec.enrichedData.response&&CAEExec.enrichedData.response.hasOwnProperty("leadenrichlist")&&$("#editSearchLinkDiv").hide()}(t,e)}})).catch((function(e){"crm.tab.module.entity.canvas"===Lyte.Router.getRouteInstance().transition.info.route&&(crmui.hidePopup("enrichPopupDiv"),e.responseText&&"NO_PERMISSION"===(e=JSON.parse(e.responseText)).code&&renderingUtils.displayPermissionDenied())}))}function c(e){var t=$L("#enrichMapDiv"),a={data_id:"",enrich_field_status:[],module:{api_name:Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam()}};CAEExec.enrichDataId&&(a.data_id=CAEExec.enrichDataId),t.find("tbody").find("input").each((function(){var t=$L(this),l={field:{api_name:t.attr("crm_field_ref_name").split("__")[1]},checked:"cancel"!==e&&t.prop("checked")};a.enrich_field_status.push(l)})),store.triggerAction("auto_enrichment","enrich_data_feedback",a).then((function(){Crm.trackSpotLightAction("Data Enrichment - Scrapy Feedback API",{Module:Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam(),Place:e}),Crm.client_tracking("Data Enrichment - Scrapy Feedback API",{Module:Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam(),Place:e})}))}function m(a){var n={},i=Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam(),s=e[i],u=!1;if("crm.tab.module.entity.canvas"===Lyte.Router.getRouteInstance().transition.info.route)var c=store.peekRecord(moduleRecordMapping[i].id,Lyte.Router.getRouteInstance().parent.getDynamicParam());if("EntityDetail"===CAEExec.modeOfRecord||"EntityMore"===CAEExec.modeOfRecord){CAEExec.lastRecordIdentify=CAEExec.currentEntityId;for(var m=s.length,p=0;p<m;p++){var f,v=s[p];if("crm.tab.module.entity.canvas"===Lyte.Router.getRouteInstance().transition.info.route){var h={ACCOUNTNAME:"Account_Name",COMPANY:"Company",WEBSITE:"Website",EMAIL:"Email",ACCOUNTID:"Account_Name"};f="ACCOUNTID"===v?c[h[v]]?c[h[v]].name:"":c[h[v]]?c[h[v]]:""}else{var g=$("#mouseArea__"+v);if(void 0===g||0===g.length)continue;f=JSON.parse(g.attr("data-params")).defaultvalue}f&&f.length>0&&(void 0===n.recordidentification?n.recordidentification=t[v]+"|:|"+f:n.recordidentification=n.recordidentification+"||"+t[v]+"|:|"+f,validationUtils.isEmpty(o)&&(o[l[v]]=f,n[l[v]]=f,u=!0),o[l[v]]!==f?(o[l[v]]=f,n[l[v]]=f,u=!0):n[l[v]]=f,$("#enrichVal_"+v).val(f)),"EMAIL"===v&&$("#emailOr","#enrich_"+v).show()}}if(a){if(null!=CAEExec.enrichedData)return $("#show").prepend($(Handlebars.templates.AutoEnrichPopup())),crmui.showPopup({id:"enrichPopupDiv"}),$("#enrichDataSearchDiv").hide(),void d(CAEExec.enrichedData);u=!0}if(u&&!$.isEmptyObject(n)){if(n.recordidentification=n.recordidentification+"||"+CAEExec.currentEntityId,CAEExec.lastRecordIdentify=n.recordidentification,r.identification=i,r.callback="server",r.recordlist=[n],r&&r.recordlist){var y=r.recordlist[0].recordidentification,b=/^[\x00-\xFF]*$/.test(y),C=r.recordlist[0].emailid,T=validationUtils.isValidEmail(C);if(!b)return renderingUtils.showCustomAlert(I18n.getMsg("crm.auto.enrich.otherlanguage.unsupported")),!1;if(C&&C.length>0&&!T)return!1}return!0}if(validationUtils.isEmpty(o))return renderingUtils.showCustomAlert(I18n.getMsg("crm.label.auto.no.data.for.enrich")),!1;var E=CAEExec.enrichedData;return void 0!==E&&(null!=E.recordlist&&(E=E.recordlist[0]),"notfound"===E.status)?(renderingUtils.showCustomAlert(I18n.getMsg("crm.auto.enrich.no.data",moduleRecordMapping[Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam()].singular_label)),!1):(renderingUtils.showCustomAlert(I18n.getMsg("crm.auto.enrich.no.new.data",moduleRecordMapping[Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam()].singular_label)),!1)}function p(e,t,a){return"<div class='dIB'>"+e+'</div> "'+(t=a?$ESAPI.encoder().encodeForHTML(t):t)+'"'}return Handlebars.registerHelper("getUpdateBtnLabel",(function(e){return I18n.getMsg(e,moduleRecordMapping[Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam()].singular_label)})),Handlebars.registerHelper("displayLastEnrichTime",(function(e){return void 0!==e?I18n.getMsg("crm.auto.enrich.last.enriched.on",e):void 0!==returnJson.lastEnrichTime?I18n.getMsg("crm.auto.enrich.last.enriched.on",returnJson.lastEnrichTime):void 0})),Handlebars.registerHelper("getEnrichMapLink",(function(){var e=document.querySelector("crm-create-entity");return e?Crm.getCrmBasePath()+"/settings/data-enrichment/"+e.component.data.auto_enrichment_id:Crm.getCrmBasePath()+"/settings/data-enrichment/"+CAEExec.enrichId})),Handlebars.registerHelper("getDynamicZohoCRMwithCheckBoxInfo",(function(){return I18n.getMsg("crm.label.auto.enrich.data.pop.checkbox.info",Crm.appName)})),Handlebars.registerHelper("getBasedOnFieldInfo",(function(e){var t=null,a="";a=null!=CAEExec.enrichedData.response&&CAEExec.enrichedData.response.hasOwnProperty("leadenrichlist")?CAEExec.enrichedData.response.leadenrichlist[0].id.split("||"):CAEExec.enrichedData.recordlist[0].recordidentification.split("||");for(var l="entityCreate"===CAEExec.modeOfRecord?a.length:a.length-1,r=0;r<l;r++){var i=a[r].split("|:|");1===l?t=p(I18n.getMsg(n[i[0]]),i[1],e):r===l-1?t=t+" "+I18n.getMsg("crm.label.lowercase.and")+" "+I18n.getMsg("crm.label.auto.enrich.the")+" "+p(I18n.getMsg(n[i[0]]),i[1],e):r<l&&(t=null===t?p(I18n.getMsg(n[i[0]]),i[1],e):t+", "+I18n.getMsg("crm.label.auto.enrich.the")+" "+p(I18n.getMsg(n[i[0]]),i[1],e))}return t})),{init:function(){CAEExec.isEnrichDataInEditMode||(CAEExec.enrichStatus=void 0,CAEExec.modeOfRecord=void 0,CAEExec.currentEntityId=void 0,CAEExec.lastRecordIdentify=void 0,r={},CAEExec.enrichedData=void 0,CAEExec.columnVsEnrichVal=void 0,o={},CAEExec.isTwitterValid=void 0)},getAutoEnrichData:function(e,t,a){if(hideMenu(),Crm.isDataEnrichAvailable||Lyte.Router.getRouteInstance().currentModel&&Lyte.Router.getRouteInstance().currentModel.entityDetails&&Lyte.Router.getRouteInstance().currentModel.entityDetails.isDataEnrichAvailable){if(CAEExec.enrichUsedCount>=CAEExec.enrichLimitCount&&!a){var l="";return $("#enrichLimitAlertDiv").length||(l='<div id="enrichLimitAlertDiv" class="newpopup w550 is-scroll ppTop dN"><h2 class="pp-header">'+I18n.getMsg("crm.data.enrich.heading.limit.reached")+'</h2><div class="pp-content"><div class="crm-font-regular dIB col333 mB10 w100p" style="font-size:15px">'+I18n.getMsg("crm.data.enrich.limit.reached.info")+'</div><div  class="crm-font-regular dIB col333" style="font-size:15px">'+I18n.getMsg("crm.data.enrich.limit.reached.info1")+' <span class="crm-font-regular dIB cP" style="color:rgb(44, 123, 208);font-size:15px">'+RebrandLinkUtil.getProperty("SUPPORTMAILID")+'</span></div></div><div class="pp-footer pT0"><input type="button" class="primarybtn" value="'+I18n.getMsg("crm.livedesk.okay")+'" onclick="crmui.hidePopup(&#39;enrichLimitAlertDiv&#39;)"></div></div>',$("body").append(l)),crmui.showPopup("enrichLimitAlertDiv"),!1}"entityCreate"===e?(Crm.trackSpotLightAction("Data Enrichment - Enrich Data Click",{Module:Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam(),Place:"Create"}),Crm.client_tracking("Data Enrichment - Enrich Data Click",{Module:Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam(),Place:"Create"}),$(".LeadEnrichmentLinkhere").hide(),$L("#enrichMapDiv").empty(),$("#show").prepend($(Handlebars.templates.AutoEnrichPopup())),crmui.showPopup({id:"enrichPopupDiv"}),u()):(CAEExec.currentEntityId=void 0!==t?t:CAEExec.currentEntityId,CAEExec.modeOfRecord=void 0!==e?e:CAEExec.modeOfRecord,m(a)&&("EntityDetail"===e?(Crm.trackSpotLightAction("Data Enrichment - Enrich Data Notify Click",{Module:Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam()}),Crm.client_tracking("Data Enrichment - Enrich Data Notify Click",{Module:Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam()})):(Crm.trackSpotLightAction("Data Enrichment - Enrich Data Click",{Module:Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam(),Place:"Detail View"}),Crm.client_tracking("Data Enrichment - Enrich Data Click",{Module:Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam(),Place:"Detail View"})),$L("#enrichMapDiv").empty(),$("#show").prepend($(Handlebars.templates.AutoEnrichPopup())),crmui.showPopup({id:"enrichPopupDiv"}),$("#enrichDataSearchDiv").hide(),s(a)))}else a&&(CAEExec.currentEntityId=void 0!==t?t:CAEExec.currentEntityId,CAEExec.modeOfRecord=void 0!==e?e:CAEExec.modeOfRecord,m(a)&&(Crm.trackSpotLightAction("Data Enrichment - Enrich Data Click",{Module:Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam(),Place:"Detail View"}),Crm.client_tracking("Data Enrichment - Enrich Data Click",{Module:Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam(),Place:"Detail View"}),$("#show").prepend($(Handlebars.templates.AutoEnrichPopup())),crmui.showPopup({id:"enrichPopupDiv"}),$("#enrichDataSearchDiv").hide(),s(a)))},updateEnrichDataDetails:function(){$(".temp_freezelayer.emailAI").remove(),1!==CAEExec.enrichStatus&&4!==CAEExec.enrichStatus||(CAEExec.enrichStatus=2),$("#enrichMapTr_IMAGE").length>0&&(CAEExec.isTwitterValid=!0),r={},CAEExec.enrichedData=void 0;for(var e={},t=$("#enrichMapDiv").find("tbody").find("input:checked"),a=t.length,l=0;l<a;l++){var n=t[l].getAttribute("id").split("chkBox_")[1],i=$("#valFromEnrich_"+n).text();e[n]=i}CAEExec.columnVsEnrichVal=e,"entityCreate"===CAEExec.modeOfRecord?(Crm.trackSpotLightAction("Data Enrichment - Enrich Data Update Click",{Module:Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam(),Place:"Create"}),Crm.client_tracking("Data Enrichment - Enrich Data Update Click",{Module:Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam(),Place:"Create"}),CAEExec.populateEnrichValues(),crmui.hidePopup("enrichPopupDiv")):("EntityMore"===CAEExec.modeOfRecord?(Crm.trackSpotLightAction("Data Enrichment - Enrich Data Update Click",{Module:Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam(),Place:"Detail View"}),Crm.client_tracking("Data Enrichment - Enrich Data Update Click",{Module:Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam(),Place:"Detail View"})):(Crm.trackSpotLightAction("Data Enrichment - Enrich Data Update Click",{Module:Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam(),Place:"Notification"}),Crm.client_tracking("Data Enrichment - Enrich Data Update Click",{Module:Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam(),Place:"Detail View"})),CAEExec.isEnrichDataInEditMode=!0,crmui.hidePopup("enrichPopupDiv"),"crm.tab.module.entity.canvas"===Lyte.Router.getRouteInstance().transition.info.route?Crm.linkToClick("crm.tab.module.entity.edit",Lyte.Router.getRouteInstance().transition.info.dynamicParams[0],Lyte.Router.getRouteInstance().transition.info.dynamicParams[1]):$("#editRecordbtn")[0].click()),c("update")},populateEnrichValues:function(){if(CAEExec.columnVsEnrichVal){var e=Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam();$("#preHTMLContainer_"+e).find(".addbgC").removeClass("addbgC");for(var t=Object.keys(CAEExec.columnVsEnrichVal),a=t.length,l=0;l<a;l++){var n=t[l],r=CAEExec.columnVsEnrichVal[n],i=$("#Crm_"+e+"_"+n);"Pick List"===i.attr("data-content-type")?(i.append('<option value="'+r+'">'+r+"</option>"),i.val(r).trigger("change"),i.parent().addClass("addbgCSelect2")):"33"==i.data("uitype")&&i.closest("crm-phone-field").length>0?(i.val(r),i[0].dispatchEvent(new Event("paste")),i.closest(".crm_phone_field").addClass("addbgC")):i.val(r).addClass("addbgC")}CAEExec.isEnrichDataInEditMode=!1}},enableFindEnrichBtn:function(){$("#findEnrichBtn").removeClass("disabled").prop("disabled",!1)},searchEnrichData:function(){for(var a=!1,n={},i=Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam(),d=e[i],u=d.length,c=$L("#enrichFieldWebsiteError"),m=0;m<u;m++){var p=d[m],f="ACCOUNTID"===p||"ACCOUNTNAME"===p?$("#enrichVal_COMPANY"):$("#enrichVal_"+p);if(f){if("WEBSITE"==p&&!validationUtils.isValidWebUrl(f.val()))return void c.text(I18n.getMsg("crm.field.valid.check",I18n.getMsg("website"))).show();void 0===n.recordidentification&&f.val().length>0?n.recordidentification=t[p]+"|:|"+f.val():f.val().length>0&&(n.recordidentification=n.recordidentification+"||"+t[p]+"|:|"+f.val()),o[l[p]]!==f.val()?(f.val().length>0?(o[l[p]]=f.val(),n[l[p]]=f.val()):delete o[l[p]],a=!0):n[l[p]]=f.val()}}if(!a||$.isEmptyObject(n))return $.isEmptyObject(n)?(renderingUtils.showCustomAlert(I18n.getMsg("crm.label.auto.no.data.for.enrich")),!1):(renderingUtils.showCustomAlert(I18n.getMsg("crm.label.no.changes")),!1);"EntityMore"===CAEExec.modeOfRecord?(Crm.trackSpotLightAction("Data Enrichment - Find Enrichment By Zia Click",{Module:Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam(),Place:"Detail View"}),Crm.client_tracking("Data Enrichment - Find Enrichment By Zia Click",{Module:Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam(),Place:"Detail View"})):"entityCreate"===CAEExec.modeOfRecord?(Crm.trackSpotLightAction("Data Enrichment - Find Enrichment By Zia Click",{Module:Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam(),Place:"Create"}),Crm.client_tracking("Data Enrichment - Find Enrichment By Zia Click",{Module:Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam(),Place:"Create"})):"EntityDetail"===CAEExec.modeOfRecord&&(Crm.trackSpotLightAction("Data Enrichment - Find Enrichment By Zia Click",{Module:Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam(),Place:"Notification"}),Crm.client_tracking("Data Enrichment - Find Enrichment By Zia Click",{Module:Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam(),Place:"Notification"})),$("#fieldsToSearch,#refreshEnrichDataDiv").hide(),$("#loadingDotDiv,#bottomActionDiv,#enrichDataSearchDiv").show(),$("#findEnrichBtn").addClass("disabled").prop("disabled",!0),"entityCreate"!==CAEExec.modeOfRecord?(n.recordidentification=n.recordidentification+"||"+CAEExec.currentEntityId,r.callback="server"):r.callback="server",CAEExec.lastRecordIdentify=n.recordidentification,r.identification=i,r.recordlist=[n];var v=$L("crm-create-layout")[0];v?v.component.getDataFromDI(n):s()},cancelFindEnrichData:function(){$("#fieldsToSearch").hide(),$("#findEnrichBtn").addClass("disabled").prop("disabled",!0),CAEExec.lastRecordIdentify?$("#bottomActionDiv,#enrichMapDiv,#enrichDataSearchDiv").show():$("#bottomActionDiv,#waitEnrichInfoDiv,#enrichDataSearchDiv").show()},initEnrichDataFetchProcess:function(){var a=!1,n={},i=Lyte.Router.getRouteInstance().transition.info.route;if("crm.tab.module.create"===i||"crm.tab.module.entity.detail"===i||"crm.tab.module.entity.edit"===i){for(var d=Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam(),u=e[d],c=u.length,m=$(document.activeElement).attr("id"),p=0;p<c;p++){var f="Crm_"+d+"_"+(y=u[p]);if(m===f)return;if(void 0!==(g=$("#"+f))&&0!==g.length)var v=g.val().trim()}if(CAEExec.enrichUsedCount>=CAEExec.enrichLimitCount)return;for(var h=0;h<c;h++){var g,y=u[h];if(void 0!==(g=$("#"+("Crm_"+d+"_"+y)))&&0!==g.length)0!==(v=g.val().trim()).length&&(0===h||void 0===n.recordidentification?n.recordidentification=t[y]+"|:|"+v:n.recordidentification=n.recordidentification+"||"+t[y]+"|:|"+v,validationUtils.isEmpty(o)||o[l[y]]!==v?(o[l[y]]=v,n[l[y]]=v,a=!0):n[l[y]]=v)}if(a&&!$.isEmptyObject(n)){r.callback="server",r.identification=d,r.recordlist=[n],CAEExec.lastRecordIdentify=n.recordidentification,CAEExec.modeOfRecord="entityCreate";var b=$(".LeadEnrichmentLinkhere");b.is(":visible")&&(b.addClass("onprocessEnrichment"),b.attr({onmouseenter:"zctt.showtt('"+I18n.getMsg("crm.data.enrich.fetching.info")+"')",onmouseleave:"zctt.hidett()",onClick:""})),s()}}},editEnrichFieldOption:function(){var t={},l=CAEExec.enrichedData.recordlist[0].recordidentification.split("||");$L("#enrichFieldWebsiteError").hide();for(var n="entityCreate"===CAEExec.modeOfRecord?l.length:l.length-1,r=0;r<n;r++){var i=l[r].split("|:|");t[a[i[0]]]=i[1]}var o=Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam(),s=e[o],d=s.length;for(r=0;r<d;r++){var u=s[r];u="ACCOUNTID"===u||"ACCOUNTNAME"===u?"COMPANY":u,$("#enrichVal_"+u).val(t[u]),"EMAIL"===u&&$("#emailOr","#enrich_"+u).show()}$("#bottomActionDiv,#enrichMapDiv,#enrichDataSearchDiv,#waitEnrichInfoDiv").hide(),$("#fieldsToSearch").show(),"EntityMore"===CAEExec.modeOfRecord?(Crm.trackSpotLightAction("Data Enrichment - Data Enrichment By Zia Click",{Module:Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam(),Place:"Detail View"}),Crm.client_tracking("Data Enrichment - Data Enrichment By Zia Click",{Module:Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam(),Place:"Detail View"})):"entityCreate"===CAEExec.modeOfRecord?(Crm.trackSpotLightAction("Data Enrichment - Data Enrichment By Zia Click",{Module:Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam(),Place:"Create"}),Crm.client_tracking("Data Enrichment - Data Enrichment By Zia Click",{Module:Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam(),Place:"Detail View"})):"EntityDetail"===CAEExec.modeOfRecord&&(Crm.trackSpotLightAction("Data Enrichment - Data Enrichment By Zia Click",{Module:Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam(),Place:"Notification"}),Crm.client_tracking("Data Enrichment - Data Enrichment By Zia Click",{Module:Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam(),Place:"Detail View"}))},setEnrichDataAndNotify:d,cancelEnrichDataPop:function(){crmui.hidePopup("enrichPopupDiv"),"entityCreate"===CAEExec.modeOfRecord?(Crm.trackSpotLightAction("Data Enrichment - Data Enrichment Cancel Click",{Place:"Create"}),Crm.client_tracking("Data Enrichment - Data Enrichment Cancel Click",{Place:"Create"}),$(".LeadEnrichmentLinkhere").parents("crm-create-layout")[0]?$L("#createEnrichLink").css("display","inline-block"):$(".LeadEnrichmentLinkhere").show()):(Crm.trackSpotLightAction("Data Enrichment - Data Enrichment Cancel Click",{Place:"Detail View"}),Crm.client_tracking("Data Enrichment - Data Enrichment Cancel Click",{Place:"Detail View"})),null!==i&&(i.abort(),i=null),"block"!=$("#lookupdiv").css("display")&&(o={},r={},CAEExec.enrichFieldCount=0,CAEExec.enrichFieldMappingCount=0),c("cancel")},showEnrichCompValues:u,MODULEVSENRICHFIELDS:e,ChooseCheckBox:function(e,t){var a=$L("#selectAllEnrichCheck"),l=$L("#enrichMapDiv").find("tbody");0===$("#enrichMapDiv").find("tbody").find("input:checked").length?($("#enrichPopupSaveBtn").addClass("disabled").prop("disabled",!0),a.prop("checked",!1)):$("#enrichPopupSaveBtn").removeClass("disabled").prop("disabled",!1),$(e).is(":checked")?($("#chkBoxTd_"+t).addClass("needtoaddbg"),$("#crmFieldVal_"+t).addClass("needtoaddbg"),$("#valFromEnrich_"+t).addClass("needtoaddbg")):($("#chkBoxTd_"+t).removeClass("needtoaddbg"),$("#crmFieldVal_"+t).removeClass("needtoaddbg"),$("#valFromEnrich_"+t).removeClass("needtoaddbg"),a.prop("checked",!1)),l.find("input:checked").length===l.find("tr").length&&a.prop("checked",!0)},showMouseOverToolTip:function(e,t){var a=(e=$(e)).outerWidth(),l=$(".showmouseovertooltipdiv");if(t){if(!l.length){var n=renderingUtils.createHTML({name:"span",attr:{class:"showmouseovertooltipdiv"}});$("body").append(n),l=$(".showmouseovertooltipdiv")}l.text(e.text()),a<l.outerWidth()&&crmui.showTooltip(e.text(),!1,"center",e)}else l.remove(),crmui.hideTooltip()},hidePopAndShowPoint:function(e){var t=$("#CustomizeTools");Crm.trackSpotLightAction("Data Enrichment - Enrich Data Notify Click Close",{Module:Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam()}),Crm.client_tracking("Data Enrichment - Enrich Data Notify Click Close",{Module:Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam()}),$(e).parents(".ZiaDetailviewEnrichmentDiv").addClass("scale").css({left:t.offset().left,top:t.offset().top}),$(".ZiaDetailviewEnrichmentDiv").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",(function(){$(".ZiaDetailviewEnrichmentDiv").remove();var e=$("#CustomizeTools");e.addClass("pR").append('<span class="pA spot"></span>'),e.find("span").fadeIn(100)}))},showEnrichDataPop:function(){$L("#enrichMapDiv").empty(),$("#show").prepend($(Handlebars.templates.AutoEnrichPopup())),crmui.showPopup({id:"enrichPopupDiv"}),u()},isIncludeEnrichCount:function(){return!!CAEExec.enrichFieldCount&&100*CAEExec.enrichFieldCount/CAEExec.enrichFieldMappingCount>=70},setFeedBackAPI:c,enrichDataId:"",selectAllEnrichValues:function(e){var t=$L("#enrichmentInnerTable").find("tbody tr td");$L(e).is(":checked")?(t.find("input").prop("checked",!0),t.not(":first-child").addClass("needtoaddbg"),$L("#enrichPopupSaveBtn").removeClass("disabled").prop("disabled",!1)):(t.find("input").prop("checked",!1),t.not(":first-child").removeClass("needtoaddbg"),$L("#enrichPopupSaveBtn").addClass("disabled").prop("disabled",!0))}}}(),CVRExec=function(){try{var e,t,a,l=!0,n=!0,r=[36,77,143,144,145],i=["between","not_between","greater_equal","greater_than","less_equal","less_than","not_equal","equal"];function o(e,t,a,l,r){if(n&&(n=!1),"[object Array]"!==Object.prototype.toString.call(t))return s(!1,e,t,a,l,r);if(1===t.length)return s(!1,e,t[0],a,l,r);if(3===t.length){var i=o(e,t[0],a,l,r),d=t[1],u=!1;return("and"===d&&i||"or"===d&&!i)&&(u=o(e,t[2],a,l,r)),"and"===d?i&&u:i||u}}function s(t,a,o,s,d,c){var m,p,f,v=!1,h=o.column_name;"view"!==a||"FIRSTNAME"!==o.column_name&&"SALUTATION"!==o.column_name?"SALUTATION"===o.column_name&&(h="LASTNAME"):h="LASTNAME";var y=!1;d&&(null!==s?y=s===h:Crm.VR&&(Crm.VR.ajaxEditFailedFields&&Crm.VR.ajaxEditFailedFields.contains(h)||Crm.VR.ajaxEditFieldLabel&&Crm.VR.ajaxEditFieldLabel===h)&&(y=!0));var C=!0;c&&!y&&void 0!==Crm.VR.globalAjaxEditedFields&&Crm.VR.globalAjaxEditedFields.contains(h)&&(y=!0),(c&&Crm.VR.fieldsInPopup&&Crm.VR.fieldsInPopup.contains(h)||Crm.VR&&Crm.VR.fieldsInPopup&&Crm.VR.fieldsInPopup.contains(h))&&(y=!0,C=!1);var T=g(y&&"print"!==a?"edit":a,h),E=null,_=null,I=!1;C&&(c&&(void 0===Crm.VR.globalAjaxEditedFields||void 0!==Crm.VR.globalAjaxEditedFields&&!Crm.VR.globalAjaxEditedFields.contains(h))?E=b(h):d&&!y&&null===s&&Crm.VR.globalAjaxEditedFields&&Crm.VR.globalAjaxEditedFields.contains(h)&&(E=Crm.VR.ajaxEditFailedFieldValues[h]));var k=$("#"+T),w=!1;if(void 0!==Crm.VR&&null!==Crm.VR){if(Crm.VR.IsQuickCreate){if("Tasks"===e&&"SUBJECT"===h)T="task_subject",k=$("#"+T);else if(0===k.length){var R=$("."+T);1===R.length&&(k=R)}CFRExec.LayoutRuleHiddenElem&&!CFRExec.LayoutRuleHiddenElem.contains(h)&&Crm.VR.quickCreateMoreFields&&Crm.VR.quickCreateMoreFields.contains(h)&&(w=!0)}Crm.VR.fromSC&&(f=void 0!==(p=(m=$L("crm-convert-deal-fields")[0].component).getFieldsIndex("column_name",o.column_name))?$L("#component_"+p):null,k=void 0!==p?f.e.component:null)}if(CFRExec.LayoutRuleHiddenElem&&!CFRExec.LayoutRuleHiddenElem.contains(h)){var L="view"===a&&"detail"===Lyte.Router.getRouteInstance().routeName?$("#showHideDetail"):null;null===L||L.hasClass("hideDetailArrow")||!d||1!==k.length||k.is(":visible")||(w=!0)}if(!(Crm.VR&&Crm.VR.fromSC&&null!==k||null!==k&&k.length>0&&(k.is(":visible")||w)||null!==E))return!0;var D=null;if(null===E){if(y&&"view"===a||"edit"===a)if(Crm.VR&&Crm.VR.fromSC)E=void 0===k.getValue()?"":k.getValue(),"D"===o.data_type&&E&&(E=Utils.convertUsrtoDefaultDatePattern(E));else if("B"===o.data_type)E=k.is(":checked");else if("DT"===o.data_type){if(E=k.val(),!0===Crm.isCalendarSchedule){var S="[name="+T+"minute]";D=$("[name="+T+"hour]").val()+":"+$(S).val()}else Crm.VR&&Crm.VR.fromSC||(D=$("#"+T+"_TimeOption").val());if(!D&&Crm.VR)if(Crm.VR.IsSearchCreate){var O=T+"_dateTime",F=$("."+O);Crm.VR.IsQuickCreate&&0==F.length&&(F=$("#"+O)),D=F.val()+" "+("HH:mm"===Crm.userDetails.TIME_FORMAT?"":$("[id='property("+h+"ampm)']").val())}else Crm.VR.IsQuickCreate?D=$("#"+h+"dateTime").val()+("HH:mm"===Crm.userDetails.TIME_FORMAT?"":" "+$("[id='property("+h+"ampm)']").val()):Crm.VR.fromSC&&(D=$("."+h+"_timefrmhour").val()+":"+$("."+h+"_timefrmminute").val()+("HH:mm"===Crm.userDetails.TIME_FORMAT?"":" "+$("."+h+"_timefrmampm").val()))}else E=k.val(),33===o.ui_type&&(E=commonUtils.getValue(k)),void 0!==Crm.VR&&null!==Crm.VR&&"STAGE"===o.column_name&&Crm.VR.fromSC&&(E=k.find("option:selected").text()),"D"===o.data_type&&E&&(E=Utils.convertUsrtoDefaultDatePattern(E));else if("FIRSTNAME"===o.column_name)E=k.data("params").nameInfo.firstname;else if("LASTNAME"===o.column_name)E=k.data("params").nameInfo.lastname;else if("SALUTATION"===o.column_name)E=k.data("params").nameInfo.salutation;else{var M=k.data("params");E=void 0!==M.plainValue?M.plainValue:M.defaultvalue,"35"!==o.ui_type&&"33"!==o.ui_type&&35!==o.ui_type&&33!==o.ui_type||(M.dbPhoneValue?E=M.dbPhoneValue:Crm.isCalendarSchedule||(E=commonUtils.getPlainPhoneNo(E)))}"STAGE"===o.column_name&&E.indexOf(":")>-1&&"Deals"===o.module&&(_=E,E=E.split(":")[1],I=!0)}if("${EMPTY}"!==o.value&&"${NOTEMPTY}"!==o.value&&E&&""!==E&&"N"===o.data_type&&Crm.userDetails.BASE_CURRENCY&&""!==Crm.userDetails.BASE_CURRENCY&&r.contains(o.ui_type)){var A=function(e,t){var a=g(t,"CURRENCYISOCODE",e),l=$("#"+a);if(l&&0===l.length){var n=$("[id='property(Currency)']");n&&n.length>0&&(l=n)}return l}(e,a);if(A&&A.length>0||c){var P=A.val();"view"===a&&""===P?P=A.data("params").defaultvalue:c&&(P=b("CURRENCYISOCODE")),_=E,E=function(e,t){if(t){if(Crm.userDetails.BASE_CURRENCY===t)return e;var a=Crm.userDetails.CURRENCY_DETAILS,l=e/parseFloat(a[t].er),n=parseFloat(a[Crm.userDetails.BASE_CURRENCY].er),r=parseInt(a[Crm.userDetails.BASE_CURRENCY].decimals);e=Crm.roundNumber(l*n,r)}return e}(E,P),null!==_&&_!==E&&(I=!0)}}var x=o.compareStr;if(""===x)switch(o.comparator){case"contains":x="contains";break;case"not_contains":x="doesn't contain";break;case"starts_with":x="starts with";break;case"ends_with":x="ends with"}var N=(P=o.value).length,V=!1;if("T"===o.data_type){if("[object Array]"!==Object.prototype.toString.call(o.value)&&(P=o.value.split(",")),"${EMPTY}"!==o.value&&"${NOTEMPTY}"!==o.value)if(E){if(t){var U=function(e,t){var a=[!1];if(i.contains(t)&&e){for(var l=e.length,n=null,r=[],o=0;o<l;o++)"string"==typeof(n=e[o])&&-1!==n.indexOf("${NOC")&&(n=n.trim(),r[o]=parseInt(n.substring(5,n.lastIndexOf("}"))));a[0]=r.length>0,a[1]=r}return a}(P,o.comparator);U[0]&&(V=!0,v=function(e,t,a){if(e){var n=!1,r=e.length;switch(a){case"between":n=r>=t[0]&&r<=t[1];break;case"not_between":n=!(r>=t[0]&&r<=t[1]);break;case"greater_equal":n=r>=t[0];break;case"greater_than":n=r>t[0];break;case"less_equal":n=r<=t[0];break;case"less_than":n=r<t[0];break;case"not_equal":n=r!==t[0];break;case"equal":n=r===t[0];break;default:n=!1}return n===l}return!1}(E,U[1],o.comparator))}}else V=!0,v=!1}else if("picklist"===o.data_type){if("${EMPTY}"===o.value||"${NOTEMPTY}"===o.value||E||(V=!0,v=!1),E&&"-None-"===E&&(E=""),"[object Array]"!==Object.prototype.toString.call(o.value)&&(P=o.value.split(",")),"STAGE"===o.column_name&&("${OPEN}"===o.value||"${CLOSEDWON}"===o.value||"${CLOSEDLOST}"===o.value)){var j=Crm.VR&&Crm.VR.fromSC?k.data.cxPropField[m.data.layoutId].pick_list_values:k.data("values"),B="html",H="fcCategory";!j&&d&&(j=returnJson.entityMapJson.STAGE.val,B="name",H="fccategory");var q=null;if(Crm.VR&&Crm.VR.fromSC){if(j)for(var z=j.length,Y=0;Y<z;Y++)if(j[Y].display_value===k.data.displayValue[0]){q=j[Y].deal_category;break}}else Crm.VR&&Crm.VR.IsQuickCreate&&(q=k.find("option:selected").attr("fctype"));if(j)for(z=j.length,Y=0;Y<z;Y++)if(j[Y][B]===E){q=j[Y][H];break}"Pipeline"===q||"Open"===q?E="${OPEN}":"Closed"===q||"Closed Won"===q?E="${CLOSEDWON}":"Omitted"!==q&&"Closed Lost"!==q||(E="${CLOSEDLOST}")}}else if("D"===o.data_type){"${EMPTY}"===o.value||"${NOTEMPTY}"===o.value||E||(V=!0,v=!1),"not between"!==x&&"between"!==x&&(P=o.value.split(",")),N=P.length;for(Y=0;Y<N;Y++)if("${EMPTY}"!==P[Y]&&"${NOTEMPTY}"!==P[Y]){var K=new Date(P[Y]);K.setHours(0,0,0,0),P[Y]=Utils.convertUsrtoDefaultDatePattern(K)}D=void 0}else if("DT"===o.data_type){var W=Utils.getTimezoneOffset()/60;"not between"!==x&&"between"!==x&&(P=o.value.split(",")),N=P.length;for(Y=0;Y<N;Y++)if("${EMPTY}"!==P[Y]&&"${NOTEMPTY}"!==P[Y]){var J=new Date(P[Y]),G=J.getTime()+6e4*J.getTimezoneOffset();P[Y]=new Date(G-36e5*W)}null!=D&&E?E=u(E,D):null===D&&E&&(E=new Date(E)),V=!0,v=function(e,t,a){var r=!1;if("${EMPTY}"===t[0])r=""===e;else if("${NOTEMPTY}"===t[0])r=""!==e;else{if(!e)return!1;switch(a){case"is":default:r=e.getTime()-t[0].getTime()==0;break;case"isn't":r=e.getTime()-t[0].getTime()!=0}}n&&(r=r===l);return r}(E,P,x)}else"B"===o.data_type&&E?(V=!0,v=(E=!0===E||"true"===E.toLowerCase())===P,t&&(v=v===l)):"N"===o.data_type&&(V=!0,v=function(e,t,a,r){e=Search.reverseFormatNumber(e),r&&(a=Search.reverseFormatNumber(a,t,r.separator,"ValRules"));if(""===e||isNaN(e)){if("${EMPTY}"!==a&&"${NOTEMPTY}"!==a)return!1;e=""}else e=parseFloat(e);var i=null;if("${EMPTY}"===a)i=""===e;else if("${NOTEMPTY}"===a)i=""!==e;else switch("between"!==t&&"not between"!==t&&(a=parseFloat(a)),t){case"=":default:i=e===a;break;case"!=":i=e!==a;break;case"<":i=e<a;break;case"<=":i=e<=a;break;case">":i=e>a;break;case">=":i=e>=a;break;case"between":i=e>=parseFloat(a[0])&&e<=parseFloat(a[1]);break;case"not between":i=!(e>=parseFloat(a[0])&&e<=parseFloat(a[1]))}n&&(i=i===l);return i}(E,x,P,o));return V||(v=CFRExec.getCompareResult(null,o.data_type,E,x,P,D,0),t&&(v=v===l)),d&&y&&null===s&&(Crm.VR.ajaxEditFailedFieldValues||(Crm.VR.ajaxEditFailedFieldValues={}),Crm.VR.ajaxEditFailedFieldValues[o.column_name]=I?_:E),v}function d(t,a,l,n,r,i,o){var s=null,d=l.column_name;"view"!=a||"FIRSTNAME"!=l.column_name&&"SALUTATION"!=l.column_name?"SALUTATION"==l.column_name&&(d="LASTNAME"):d="LASTNAME";var c=!1;r&&(null!=n?c=n==d:Crm.VR&&(Crm.VR.ajaxEditFailedFields&&Crm.VR.ajaxEditFailedFields.contains(d)||Crm.VR.ajaxEditFieldLabel&&Crm.VR.ajaxEditFieldLabel==d)&&(c=!0));var m=!0;i&&!c&&null!=Crm.VR.globalAjaxEditedFields&&Crm.VR.globalAjaxEditedFields.contains(d)&&(c=!0),(i&&Crm.VR.fieldsInPopup&&Crm.VR.fieldsInPopup.contains(d)||Crm.VR&&Crm.VR.fieldsInPopup&&Crm.VR.fieldsInPopup.contains(d))&&(c=!0,m=!1);var p=g(c&&"print"!=a?"edit":a,d);m&&(i&&(null==Crm.VR.globalAjaxEditedFields||null!=Crm.VR.globalAjaxEditedFields&&!Crm.VR.globalAjaxEditedFields.contains(d))?s=b(d):r&&!c&&null==n&&Crm.VR.globalAjaxEditedFields&&Crm.VR.globalAjaxEditedFields.contains(d)&&(s=Crm.VR.ajaxEditFailedFieldValues[d]));var f=$("#"+p),v=!1;if(void 0!==Crm.VR&&null!=Crm.VR){if(Crm.VR.IsQuickCreate&&"Tasks"==e&&"SUBJECT"==d)p="task_subject",f=$("#"+p);else if(Crm.VR.IsQuickCreate&&0==f.length){var h=$("."+p);1==h.length&&(f=h)}if(CFRExec.LayoutRuleHiddenElem&&!CFRExec.LayoutRuleHiddenElem.contains(d)&&Crm.VR.quickCreateMoreFields&&Crm.VR.quickCreateMoreFields.contains(d)&&(v=!0),null!=Crm.VR.fromSC&&Crm.VR.fromSC){var y=$L("crm-convert-deal-fields")[0].component.getFieldsIndex("column_name",l.column_name),C=void 0!==y?$L("#component_"+y):null;f=void 0!==y?C.e.component:null}}if(CFRExec.LayoutRuleHiddenElem&&!CFRExec.LayoutRuleHiddenElem.contains(d)){var T="view"===a&&"detail"===Lyte.Router.getRouteInstance().routeName?$("#showHideDetail"):null;null===T||T.hasClass("hideDetailArrow")||!r||1!==f.length||f.is(":visible")||(v=!0)}var E=!1;if("Calls"!==o||!isNewCallView||"SEID"!==d&&"CONTACTID"!==d||(E=!0),f.length>0&&(f.is(":visible")||v||E)||null!==f||null!==s){var _=null;if(null==s){if(c&&"view"==a||"edit"==a)if(Crm.VR&&Crm.VR.fromSC)s=f.getValue(),"D"===l.data_type&&s&&(s=Utils.convertUsrtoDefaultDatePattern(s)),24===l.uitype&&s&&(s="en_GB"===Crm.userDetails.COUNTRY_LOCALE?Utils.convertUsrtoDefaultDatePattern(s,!1):Utils.convertUsrtoDefaultDatePattern(s,!0));else if(300==l.uitype||301==l.uitype)s=f.is(":checked");else if(14==l.uitype||333==l.uitype||786==l.uitype||30==l.uitype){if(s=f.val(),!0===Crm.isCalendarSchedule){var I="[name = "+p+"minute]";_=$("[name="+p+"hour]").val()+":"+$(I).val()}else Crm.VR&&Crm.VR.fromSC||(_=$("#"+p+"_TimeOption").val());if((null==_||""==_)&&void 0!==Crm.VR&&null!=Crm.VR)if(Crm.VR.IsSearchCreate){var k=p+"_dateTime",w=$("."+k);Crm.VR.IsQuickCreate&&0==w.length&&(w=$("#"+k)),null==(R=$("[id='property("+d+"ampm)']").val())&&(R=""),_=w.val()+" "+R}else if(Crm.VR.IsQuickCreate){var R;null==(R=$("[id='property("+d+"ampm)']").val())&&(R=""),_=$("#"+d+"dateTime").val()+" "+R}else Crm.VR.fromSC&&(_=$("."+d+"_timefrmhour").val()+":"+$("."+d+"_timefrmminute").val()+("HH:mm"===Crm.userDetails.TIME_FORMAT?"":" "+$("."+d+"_timefrmampm").val()));null!=s&&""!=s&&null!=_&&""!=_&&(s=u(s,_))}else if(/\b(5|4|6|7|9|10|12|13|15|132|133|135|136)\b/.test(l.uitype+"")){var L=f.data("id");L&&!isNaN(L)&&f.val()&&((s={}).name=f.val(),s.id=L)}else s=f.val(),void 0!==Crm.VR&&null!=Crm.VR&&"STAGE"==l.column_name&&null!=Crm.VR.fromSC&&Crm.VR.fromSC&&(s=f.find("option:selected").text().replace(/[\r\n\t]/g,"")),24==l.uitype&&null!=s&&""!=s&&(s="en_GB"===Crm.userDetails.COUNTRY_LOCALE?Utils.convertUsrtoDefaultDatePattern(s,!1):Utils.convertUsrtoDefaultDatePattern(s,!0));else if("FIRSTNAME"==l.column_name)s=f.data("params").nameInfo.firstname;else if("LASTNAME"==l.column_name)s=f.data("params").nameInfo.lastname;else if("SALUTATION"==l.column_name)s=f.data("params").nameInfo.salutation;else if(s=null!=f.data("params").plainValue?f.data("params").plainValue:f.data("params").defaultvalue,/\b(5|4|6|7|9|10|12|13|15|132|133|135|136)\b/.test(l.uitype+"")){s="";var D=f.data("params");D.defaultid&&!isNaN(D.defaultid)&&D.defaultvalue&&((s={}).name=D.defaultvalue,s.id=D.defaultid)}"STAGE"==l.column_name&&s.indexOf(":")>-1&&("Deals"==o||"Potentials"==o)&&(s=s.split(":")[1])}}return s}function u(e,t){var a=[];if("HH:mm"===Crm.userDetails.TIME_FORMAT)a=t.split(":");else{var l=t.substring(t.indexOf(" ")+1,t.length);(a=t.substring(0,t.indexOf(" ")).split(":"))[0]=Utils.convertTimeTo24HoursFormat(parseInt(a[0]),l)}return Utils.getDateObject(e,{hrs:a[0],mins:a[1]})}function c(e){var t=e.length;if(0===t)return!0;for(var a=0;a<t;a++)if(Crm.VR.fieldsInPopup.contains(e[a]))return!0;return!1}function m(r,i,u,m,f,y){if(void 0===Crm.validationRuleJSONData||void 0===Crm.validationRuleJSONData[i]||void 0===Crm.validationRuleJSONData[i].validation_rules)return!0;m&&(Crm.VR||(Crm.VR={}),Crm.VR.ajaxEditFailedFields||(Crm.VR.ajaxEditFailedFields=[]),Crm.VR.globalAjaxEditedFields||(Crm.VR.globalAjaxEditedFields=[]),Crm.VR.ajaxEditFieldLabel||null===u||(Crm.VR.ajaxEditFieldLabel=u)),e=i;var b,C=!0,T=Crm.validationRuleJSONData[i].validation_rules,_=void 0!==Crm.userDetails&&(void 0!==Crm.userDetails.CVRFuncExecuteForAllFields&&Crm.userDetails.CVRFuncExecuteForAllFields),I=T.length,k=[],w={},R=!1,L=null,D=$("#selMoreFields"),S=[],O=0;"view"===r&&"detail"===Lyte.Router.getRouteInstance().routeName&&(L=$("#showHideDetail")),Crm.VR&&Crm.VR.fromSC&&(b=$L("crm-convert-deal-fields")[0].component);for(var F=0;F<I;F++){var M,A,P,x=T[F],N=x.field,V=!1;V=null!=(V=x.associated_function&&_)&&V,Crm.VR&&Crm.VR.fromSC&&(P=void 0!==(M=b.getFieldsIndex("api_name",N.api_name))?$L("#component_"+M):null,A=void 0!==M?P.e.component:null);var U=!1;if(m&&null!==u){if(!x.participatingFields.contains(u)&&!V)continue;if("view"===r&&"FIRSTNAME"===N.column_name)continue;u!==N.column_name&&(U=!0)}if(y&&Crm.VR&&Crm.VR.fieldsInPopup){if(!Crm.VR.ajaxEditFieldLabel&&!c(x.participatingFields)&&!V)continue;if(Crm.VR.ajaxEditFieldLabel&&!x.participatingFields.contains(Crm.VR.ajaxEditFieldLabel)&&Crm.VR.ajaxEditFieldLabel!==N.column_name&&!c(x.participatingFields)&&!V)continue}var j=g(r,N.column_name),B=!1,H=!1;"view"!==r||"FIRSTNAME"!==N.column_name&&"SALUTATION"!==N.column_name||(j=g("view","LASTNAME"));var q=$("#"+j);if(!q.data("skipWhileSubmit")){if(void 0!==Crm.VR&&null!==Crm.VR){if(Crm.VR.IsQuickCreate){if("Tasks"===e&&"SUBJECT"===N.column_name)j="task_subject",q=$("#"+j);else if(0===q.length){1===(me=$("."+j)).length&&(q=me)}CFRExec.LayoutRuleHiddenElem&&!CFRExec.LayoutRuleHiddenElem.contains(N.column_name)&&Crm.VR.quickCreateMoreFields&&Crm.VR.quickCreateMoreFields.contains(N.column_name)&&(H=!0)}Crm.VR.fromSC&&(j=Crm.VR.SC_fieldsMap[N.column_name],q=A)}if(null!==q&&q.length>0){if(null!==(z=void 0!==q.data("readonly")?q.data("readonly"):void 0!==q.data("params")?q.data("params").readonly:null)&&(!0===z||"true"===z))continue}else if(f&&Crm.VR&&Crm.VR.entityDetails){if(!Crm.VR.entityDetails.entityMapJson||!Crm.VR.entityDetails.entityMapJson[N.column_name])continue;var z;if(null!==(z=Crm.VR.entityDetails.entityMapJson[N.column_name].readonly)&&(!0===z||"true"===z))continue}if(null===L||L.hasClass("hideDetailArrow")||!m||1!==q.length||q.is(":visible")||(null!==u&&u===N.column_name&&(j=g("edit",N.column_name),q=$("#"+j)),B=!0),Crm.VR&&Crm.VR.fromSC&&null!==q||null!==q&&1===q.length&&(q.is(":visible")||H)||B||f){if(x.associated_function){var Y=x.associated_function.id,K={};K.column_name=x.field.column_name,K.uitype=x.field.ui_type,K.value=d(0,r,K,u,m,f,i),K.api_name=x.field.api_name,K.field_label=x.field.field_label,K.id=Y,(void 0!==K.value||_)&&(S[O++]=K);continue}var W,J=x.conditions,G=J.length,Z=!1,Q=$("#Calendar");"Tasks"===e&&"SUBJECT"===N.column_name&&(W=$("#task_subject")),l=!x.execution_type||"failure"!==x.execution_type;for(var X=0;X<G;X++){var ee=J[X],te=ee.primary_condition;if(te.separator=x.field.separator,n=!0,s(!0,r,te,u,m,f)){var ae="B"===te.data_type,le=ee.sub_conditions,ne=le.length,re={};if(0===ne){if(U)w[N.column_name]=ee.alert;else if(!m||m&&null!==u&&u===N.column_name&&!t){var ie=!0,oe=!1,se=!1;if(re=$("#"+g("edit",N.column_name)),void 0!==Crm.VR){if(Crm.VR.IsQuickCreate)if("Tasks"===e&&("SUBJECT"===N.column_name&&(re=W),!R&&Crm.VR.quickCreateMoreFields&&Crm.VR.quickCreateMoreFields.contains(N.column_name)&&($("form[name='"+Crm.VR.formName+"']").find(D).trigger("click"),R=!0,ie=!1)),0===re.length)1===(me=$("."+g("edit",N.column_name))).length&&(re=me,oe=!0);Crm.VR.fromSC&&(re=A,se=!0)}if(!0===Crm.isCalendarSchedule)calendarScheduleForm.showErrorMsg(ee.alert,q,i,q.data().uitype);else if(Crm.VR&&Crm.VR.fromSC){re.setData("cxPropErrorMessage",$ESAPI.encoder().encodeForHTML(ee.alert)),0===(pe=null===(pe=null)?0:pe)&&P[0].scrollIntoView()}else Crm.showErrorMsg($ESAPI.encoder().encodeForHTML(ee.alert),re,e,se,oe,ae);ie&&(!Crm.VR||Crm.VR&&!Crm.VR.fromSC)&&re.focus(),"DT"!==te.data_type&&"D"===te.data_type||Q.hide()}else w[N.column_name]=ee.alert;C=!1,Z=!0}else for(var de=0;de<ne;de++){var ue=le[de],ce=ue.criteria;if(void 0===ce||void 0!==ce&&o(r,ce,u,m,f)){if(U)w[N.column_name]=ue.alert;else if(!m||m&&null!==u&&u===N.column_name&&!t){ie=!0,oe=!1,se=!1;if(re=$("#"+g("edit",N.column_name)),void 0!==Crm.VR){var me;if(Crm.VR.IsQuickCreate)if("Tasks"===e&&("SUBJECT"===N.column_name&&(re=W),!R&&Crm.VR.quickCreateMoreFields&&Crm.VR.quickCreateMoreFields.contains(N.column_name)&&($("form[name='"+Crm.VR.formName+"']").find(D).trigger("click"),R=!0,ie=!1)),0===re.length)1===(me=$("."+g("edit",N.column_name))).length&&(re=me,oe=!0);Crm.VR.fromSC&&(re=A,se=!0)}if(!0===Crm.isCalendarSchedule)calendarScheduleForm.showErrorMsg(ue.alert,q,i,q.data().uitype);else if(Crm.VR&&Crm.VR.fromSC){var pe;re.setData("cxPropErrorMessage",$ESAPI.encoder().encodeForHTML(ue.alert)),0===(pe=null===(pe=null)?0:pe)&&P[0].scrollIntoView()}else Crm.showErrorMsg($ESAPI.encoder().encodeForHTML(ue.alert),re,e,se,oe,ae);Crm.VR&&Crm.VR.fromSC||!ie||re.focus(),"DT"!==te.data_type&&"D"===te.data_type||Q.hide()}else w[N.column_name]=ue.alert;if(C=!1,Z=!0,void 0!==ce)break}}}else Crm.VR&&Crm.VR.fromSC&&A.setData("cxPropErrorMessage","");if(Z){if(U||m&&null===u)k.contains(N.column_name)||k.push(N.column_name),Crm.VR.ajaxEditFailedFields.contains(N.column_name)||Crm.VR.ajaxEditFailedFields.push(N.column_name),Crm.VR.globalAjaxEditedFields.contains(N.column_name)||Crm.VR.globalAjaxEditedFields.push(N.column_name);else if(t){var fe={};return fe[N.column_name]=w[N.column_name],E(fe),C}break}m&&null===u&&(Crm.VR.ajaxEditFailedFields&&Crm.VR.ajaxEditFailedFields.contains(N.column_name)&&Crm.VR.ajaxEditFailedFields.splice(Crm.VR.ajaxEditFailedFields.indexOf(N.column_name),1),k&&k.contains(N.column_name)&&k.splice(k.indexOf(N.column_name),1))}}}}var ve=!0;if(window&&void 0!==i&&window[i]&&"Potentials"==window[i].moduleName&&Crm.requestParam&&"CloseFromEdit"===Crm.requestParam.type&&("edit"===window[i].currentStatus||"create"===window[i].currentStatus||"clone"===window[i].currentStatus)){var he=$("#Crm_Potentials_STAGE");he.val()&&"Closed Lost"===he.find("option:selected").attr("data-fctype")&&(ve=!1)}if(O>0&&!0!==Crm.isCalendarSchedule&&ve){var ge={};if(m){var ye=returnJson?returnJson.entityMapJson:Crm.VR&&Crm.VR.entityDetails?Crm.VR.entityDetails.entityMapJson:null;if(!0===Crm.VR.lookup_unassign&&(ye=Crm.VR.entityDetails.entityMapJson),ye){var be=CFRExec&&CFRExec.haltStateParams.check&&"processFlow"===CFRExec.haltStateParams.check.type;for(var Ce in ye)if(!Ce.startsWith("ATTACHMENTID")&&"LAYOUTID"!=Ce&&"MODIFIEDBY"!=Ce&&"SMCREATORID"!=Ce&&"SMOWNERID"!=Ce&&"TAGMODULEREFID"!=Ce){var Te,Ee=ye[Ce],_e={column_name:Ee.colname,uitype:Ee.uitype,isFieldSupported:!1};Te=h(Te=be&&ProcessFlow&&ProcessFlow.currentTransitionDetails&&ProcessFlow.currentTransitionDetails.ProcessFieldId===Ee.fieldid?CFRExec.haltStateParams.fieldValue:13!=Ee.showtype||"Recency"!=Ee.sysRefName&&"Frequency"!=Ee.sysRefName&&"Monetary"!=Ee.sysRefName&&"Segment_Label"!=Ee.sysRefName?d(0,r,_e,u,m,f,i):Ee.defaultvalue,Ee.uitype,_e),_e.isFieldSupported&&(ge[Ee.sysRefName]=Te)}}}else if(void 0!==Crm.VR&&null!=Crm.VR&&null!=Crm.VR.fromSC&&Crm.VR.fromSC)for(var Ie in Crm.VR.SC_fieldsUIMap){var ke={isFieldSupported:!1};Le=h(Le=d(0,r,Crm.VR.SC_fieldsUIMap[Ie],u,m,f,i),Crm.VR.SC_fieldsUIMap[Ie].uitype,ke),ke.isFieldSupported&&(ge[Ie]=Le)}else if(void 0!==Crm.VR&&null!=Crm.VR&&(Crm.VR.IsSearchCreate||Crm.VR.IsQuickCreate))for(var we in Crm.VR.quickCreateAllFields){ke={isFieldSupported:!1};Le=h(Le=d(0,r,Crm.VR.quickCreateAllFields[we],u,m,f,i),Crm.VR.quickCreateAllFields[we].uitype,ke),ke.isFieldSupported&&!Crm.VR.quickCreateAllFields[we].isEncField&&(ge[we]=Le)}else{var Re=Crm.fieldsObj[i].length;for(F=0;F<Re;F++)if(!Crm.fieldsObj[i][F].endsWith("SALUTATION")&&!Crm.fieldsObj[i][F].endsWith("PHOTO_FILEID")){var Le,De=$("#"+Crm.fieldsObj[i][F]),Se=De.attr("data-uitype");we=De.attr("data-sysrefname");Le=h(Le=d(0,r,ke={column_name:De.attr("data-colname"),uitype:Se,isFieldSupported:!1},u,m,f,i),Se,ke),ke.isFieldSupported&&(ge[we]=Le)}}"Tasks"!==i&&"Events"!==i&&"Calls"!==i||!(ge.Who_Id&&!ge.What_Id||ge.What_Id&&!ge.$se_module)||function(e,t,a){if(t){var l=returnJson?returnJson.entityMapJson:Crm.VR&&Crm.VR.entityDetails?Crm.VR.entityDetails.entityMapJson:null;if(l&&e.What_Id&&l.SEID){var n=l.SEID.lookupmodule;n?e.$se_module=n:delete e.What_Id}}else if(void 0!==Crm.VR&&null!=Crm.VR&&(Crm.VR.IsSearchCreate||Crm.VR.IsQuickCreate))"Tasks"===a&&v("leContModSel","modsel",e);else if("Events"===a){var r=$("#Crm_Events_CONTACTID_select").val();if(r&&"None"!==r){var i=$("#Crm_Events_SEID_label_select"),o=null;i.is(":visible")&&(o=i.val()),"Contacts"===r?(e.Who_Id||delete e.Who_Id,e.What_Id&&o?e.$se_module=o:delete e.What_Id):"Others"===r?(o&&e.What_Id?e.$se_module=o:delete e.What_Id,delete e.Who_Id):(e.What_Id=e.Who_Id,e.What_Id?e.$se_module=r:delete e.What_Id,delete e.Who_Id)}}else"Tasks"===a?v("Crm_Tasks_CONTACTID_WhoId_select","Crm_Tasks_SEID_label_select",e):"Calls"===a&&v("Crm_Calls_CONTACTID_WhoId_select","Crm_Calls_SEID_select",e)}(ge,m,i);var Oe={};Oe["X-ZCSRF-TOKEN"]=csrfParamName+"="+csrfToken;var Fe=S.length;for(F=0;F<Fe;F++)void 0!==Crm.VR&&null!=Crm.VR&&null!=Crm.VR.fromSC&&Crm.VR.fromSC&&(S[F].isconvert=!0),V&&""==S[F].value||(ge[S[F].api_name]=h(S[F].value,S[F].uitype)),S[F].record=ge;if(window.clientPortalName){Oe["X-CRMPORTAL"]=window.clientPortalName}var $e=window[i].currentStatus;"edit"!==$e&&"view"!==$e||!S[0].record||Crm.VR&&Crm.VR.IsQuickCreate||(S[0].record.id=window[i].entityId);var Me={functions:S};return new Promise((function(t){(new crmRequestPool).initiate({action:"/crm/v2/functions/actions/execute",data:JSON.stringify(Me),type:"POST",headers:Oe,success:function(l){l&&l.functions&&(C=function(t,l,n,r,i){var o,s,d=!0,u={},c=!1,m={},f=!1,v=$("#task_subject"),h=[],g=[],y=0,b=!1,C=null;Crm.VR&&Crm.VR.fromSC&&(C=$L("crm-convert-deal-fields")[0].component);try{for(var T=l.length,_=0;_<T;_++){var I=l[_];if("success"==I.status&&I.details){var k="string"==typeof I.details.output?JSON.parse(I.details.output.replace(/'/g,'"')):I.details.output;if(!k.status){d=!1,b=!0;break}if("success"!=k.status){if(!r||r&&null!==i&&i===n[_].column_name){var w=CVRExec.getElemId("edit",n[_].column_name,t);if(u=$("#"+w),void 0!==Crm.VR){if(Crm.VR.IsQuickCreate&&"Tasks"==e){if("SUBJECT"==n[_].column_name)u=v;else if(0===u.length){var R=$("."+w);1===R.length&&(u=R,o=!0)}!c&&Crm.VR.quickCreateMoreFields&&Crm.VR.quickCreateMoreFields.contains(n[_].column_name)&&($("form[name='"+Crm.VR.formName+"']").find("#selMoreFields").trigger("click"),c=!0,s=!0)}if(null!=Crm.VR.fromSC&&Crm.VR.fromSC){var L=void 0!==(S=C.getFieldsIndex("column_name",n[_].column_name))?$L("#component_"+S):null;u=void 0!==S?L.e.component:null,s=!0}}if(0==u.length)"STAGE"==n[_].column_name&&(f=!0),m[n[_].field_label]=k.message.substring(0,100);else if(Crm.VR&&Crm.VR.fromSC){u.setData("cxPropErrorMessage",$ESAPI.encoder().encodeForHTML(k.message.substring(0,100)));var D=null;0===(D=null===D?0:D)&&L[0].scrollIntoView()}else Crm.showErrorMsg($ESAPI.encoder().encodeForHTML(k.message.substring(0,100)),u,t,s,o,"checkbox"==u.attr("type")),u.focus()}else!0===Crm.VR.lookup_unassign?m[n[_].field_label]=k.message.substring(0,100):(h[y++]=n[_].column_name,g[n[_].column_name]=k.message.substring(0,100),r&&null===i&&(Crm.VR.ajaxEditFailedFieldValues||(Crm.VR.ajaxEditFailedFieldValues={}),Crm.VR.ajaxEditFailedFieldValues[n[_].column_name]=n[_].value));d=!1}else if(Crm.VR&&Crm.VR.fromSC){var S;L=void 0!==(S=C.getFieldsIndex("column_name",n[_].column_name))?$L("#component_"+S):null;(void 0!==S?L.e.component:null).setData("cxPropErrorMessage","")}}else if("INTERNAL_ERROR"==I.code||"INVALID_DATA"==I.code){d=!1,b=!0;break}}}catch(e){b=!0,d=!1}if(b)$("#newRelatedListPopUpDiv").css("z-index","1000").html('<div class="f21 p30  alignleft"><div class="crm-font-bold f21">'+I18n.getMsg("crm.validation.rule.function.error.heading")+'</div><div class="f16 mB10 mT10 crm-font-regular">'+I18n.getMsg("crm.validation.rule.function.error.title")+'</div><ul class="m0 b0 cutomfunctionalert"><li>'+I18n.getMsg("crm.validation.rule.function.error1")+"</li><li>"+I18n.getMsg("crm.validation.rule.function.error2")+'</li></ul> <br><div class="aligncenter"><input type="button" id="custom_alert_button" class="primarybtn" value="'+I18n.getMsg("crm.mb.newversion.msg4")+'" onclick="crmui.hidePopup(\'newRelatedListPopUpDiv\')"></div></div>',null,!0),crmui.showPopup("newRelatedListPopUpDiv");else if(!validationUtils.isEmpty(m)&&!b)return f&&a&&a.check&&"DetailStageView"==a.check.type&&detailView.stageClickHandler($('li[data-stageid="'+CVRExec.prevStage+'"]')),E(m),d;return p(d,t,h,g,r)}(i,l.functions,S,m,u)&&C),t(C)}})})).then((function(e){return p(e,i,k,w,m)}))}return p(C,i,k,w,m)}function p(t,a,l,n,r){return t||(!0!==Crm.isCalendarSchedule&&Crm.trackSpotLightAction("Validation Rules - Records Invoked",{Module:a}),r&&function(t,a,l){var n=t.length;if(n>0){$(".select2-container").eq(0).parent().find("select").select2("close");for(var r=[],i=[],o=JSON.stringify(Crm.VR.entityDetails.entityMapJson),s=JSON.parse(o),d=0;d<n;d++){var u=s[t[d]];void 0!==Crm.VR&&void 0!==Crm.VR.ajaxEditFailedFieldValues&&void 0!==Crm.VR.ajaxEditFailedFieldValues[t[d]]&&(u.defaultvalue=Crm.VR.ajaxEditFailedFieldValues[t[d]]);var c=crmTemplate.createFieldRow(returnJson.layout_jsonarrayObj.sysLayoutId,l,void 0,u);r.push(c),i.push(t[d])}var m=!1,p=$("#closedWon");Crm.VR&&p&&p.length&&p.is(":visible")&&"crm.tab.module.custom-view.kanban"===Lyte.Router.getRouteInstance().transition.info.route&&(Crm.VR.stagePopUp=!0);var f=void 0!==Crm.VR&&!0===Crm.VR.stagePopUp,v=f?p:$("#formRuleMandatoryFields");if(!f&&v&&v.length&&v.is(":visible")&&(m=!0),!f&&!m){v=$("#VRAjaxEdit");var h={};if(h.message=I18n.getMsg("crm.lr.heading.details.required"),!v||v&&0===v.length){var y=$(Handlebars.templates.ValidationRuleAjaxEditFailure(h));$("#show").prepend(y),v=$("#VRAjaxEdit")}else $("#vr_fol_otherdetails").hide(),$("#dv_field_info_header").text(h.message)}var b=v.find(".fieldsContainer");n=r.length;for(d=0;d<n;d++){var C=g("edit",i[d]),T=b.find("#"+C);(!T||T&&!T.length>0)&&b.append(r[d]),null!==a[i[d]]&&(T=b.find("#"+C),Crm.showErrorMsg($ESAPI.encoder().encodeForHTML(a[i[d]]),T,e),T.focus())}if(!m&&!f){var E=$("#cm_per_desc");1===n?v.find(E).text(I18n.getMsg("crm.vr.ajax.edit.failed.subfield.single.field")):v.find(E).text(I18n.getMsg("crm.vr.ajax.edit.failed.subfield.multiple.fields"))}var _=v.find("select");_&&_.length&&thirdPartyUtils.bindSelect2(_),f||m||crmui.showPopup("VRAjaxEdit",!0)}}(l,n,a)),f(!1),t}function f(e){t=e}function v(e,t,a){var l=$("#"+e).val();if(l)if("Contacts"!==l)a.What_Id=a.Who_Id,a.$se_module=l,delete a.Who_Id;else if(a.What_Id){var n=$("#"+t).val();n?a.$se_module=n:delete a.What_Id}}function h(e,t,a){if(Crm.userDetails.VALIDATION_RULE_CF_LOOKUPSUPPORT&&/\b(5|4|6|7|9|10|12|13|15|132|133|135|136)\b/.test(t+""))return a&&(a.isFieldSupported=!0),e||"";switch(t){case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 12:case 13:case 15:case 116:case 117:case 123:case 133:case 200:case 208:case 209:case 221:case 444:case 20:case 39:case 51:case 55:case 77:case 96:case 99:case 100:case 110:case 111:case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"10":case"12":case"13":case"15":case"20":case"39":case"51":case"55":case"77":case"96":case"99":case"100":case"111":case"110":case"116":case"117":case"123":case"133":case"200":case"208":case"209":case"221":case"444":case"556":case"555":case"66":return a&&(a.isFieldSupported=!1),"";case"24":case 24:if(a&&(a.isFieldSupported=!0),!e)return"";var l=new Date(e),n="";return n=$.datepicker.formatDate("yy-mm-dd",l);case"14":case 14:case"30":case 30:case"333":case 333:case"786":case 786:if(a&&(a.isFieldSupported=!0),!e)return"";l=new Date(e),n="";return n=$.datepicker.formatDate("yy-mm-ddT",l),n+=Utils.formatTimeVal(l.getHours())+":"+Utils.formatTimeVal(l.getMinutes())+":"+Utils.formatTimeVal(l.getSeconds()),Crm&&Crm.userDetails.TIME_ZONE&&(n+=Crm.userDetails.TIME_ZONE.replace(".",":")),n;case"300":case 300:case"301":case 301:return a&&(a.isFieldSupported=!0),("true"===e||"1"===e||1==e)+"";case"33":case 33:return a&&(a.isFieldSupported=!0),e?commonUtils.getPlainPhoneNo(e):"";default:return a&&(a.isFieldSupported=!0),e?e.trim():""}}function g(t,a,l){if(void 0===e&&(e=l),"edit"===t){if(!0===Crm.isCalendarSchedule)return a;var n="Crm_"+e+"_"+a;if(void 0!==Crm.VR&&Crm.VR.IsQuickCreate&&Crm.VR.IsSearchCreate){var r="createEntityForm #"+n;0==$("#"+r).length&&(r="createEntityForm ."+n),n=r}return n}return"view"===t?"mouseArea__"+a:"print"===t?"rowTR_"+a:void 0}function y(e,t,l,n,r){(new crmRequestPool).doAjax1("/crm/v2/",(function(e){a=void 0;var i=null,o=null,s=null;if("string"==typeof(e=e.responseJSON?e.responseJSON:e))i=e,o=trim(i[1]),s=i[2],s=revertSplChrs(s);else{if("duplicate data"===e.data[0].message){var d={},u=e.data[0].details.duplicate_record,c=returnJson.entityMapJson,m=e.data[0].details.api_name,p="",f="";for(var v in c)c[v].sysRefName===m&&(p=c[v].displaylabel,f=c[v].colname);d.FIELDLABEL=p,d.OWNERNAME=u.Owner.name,d.MODULE=t,d.RECORDS={},d.COUNT=1,d.ZUID=u.Owner.zuid,delete u.Owner;var h=[],g={};if(g.ENTITYID=u.id,delete u.id,Object.keys(u).length>1){var y=Crm.userDetails.NAME_FORMAT;y=y.split(",");var b=[];y.forEach((function(e){"Salutation"!==e&&(e=e.replace(" ","_")),u[e]&&b.push(u[e])})),g.ENTITYNAME=b.join(" "),g.ENTITYNAMEFORPOPOVER=b.join(" ")}else for(var C in u)g.ENTITYNAME=u[C],g.ENTITYNAMEFORPOPOVER=u[C];h.push(g),d.RECORDS=h;var T=Crm.getDuplicateErrorMsg(d,!1);return Crm.showErrorMsg(T,$("#Crm_"+t+"_"+f),t),commonUtils.showHideLoadingDiv(),void(primaryField===f&&CFRExec.cancelPopupNdClearParamHistory())}if("FILTER_CRITERIA_NOT_SATISFIED"===e.data[0].code){c=returnJson.entityMapJson,m=e.data[0].details.api_name,p="",f="";for(var v in c)if(c[v].sysRefName===m){p=c[v].displaylabel,f=c[v].colname;break}var E=$("#Crm_"+t+"_"+f),_=E.data("lookupModule");let a=221===E.data("uitype")?I18n.getMsg("crm.user.text"):moduleRecordMapping[_].singular_label;return!document.getElementById("VRAjaxEdit").querySelector("#"+E.attr("id"))&&$("#VRAjaxEdit").is(":visible")&&crmui.hidePopup("VRAjaxEdit"),Crm.showErrorMsg(I18n.getMsg("crm.lookupfilter.entity.errormsg",a),E,t),void commonUtils.showHideLoadingDiv()}if("DUPLICATE_LINKING_DATA"===e.data[0].code){var I=e.data[0].details.duplicate_record,k=I.id,w=I.Name,R="This Association is already exist in <a href="+(Crm.getCrmBasePath()+"/EntityInfo.do?module="+t+"&id="+k)+"  target = 'new'>"+w+"</a> entity.";return renderingUtils.showCustomAlert(R,"",!0),Crm.hideDuplicateErrorMsg("viewentityform"),void(itsonview=!0)}o="success"===(i=e).data[0].status}if(o){if("relatedList"===n)crmRelatedList.ajaxReq({pname:Crm.isActivitySplitDone?"TASKSPERSONALITY;TASKSHISTORYPERSONALITY":"ACTIVITYPERSONALITY;ACTIVITYHISTORYPERSONALITY",module:t,id:l}),Lyte.triggerEvent("related_list",{module:"Activities"});else if("detailView"===n||"DetailStageView"===n)reloadCurrentEntityView(l,t);else if("detailspage"===n){if(CFRExec.relatedEntityMap={},"Tasks"===t){var L=$("#completedValue").text();returnJson&&returnJson.entityMapJson&&returnJson.entityMapJson.STATUS&&detailView.replaceDataParams("STATUS",L)}reloadCurrentEntityView(l,t)}else if("kanbanview"===n)$("#tab_Activities").trigger("click");else if("list"===n)$("#tab_Activities").trigger("click");else if("dashboard"===n){var D=objectUtils.URL(r).getParams();CrmDashboard.loadDashboards(void 0,void 0,{clickId:"loadHomePage",currentOption:"20",dashletId:D.dashletId,layoutId:D.layoutId,module:"Tasks"})}crmui.hidePopup("VRAjaxEdit"),$("#VRAjaxEdit").find(".fieldsContainer").empty(),delete Crm.VR}else o?renderingUtils.showCustomAlert("Invalid response!!!!"):"start datetime of the event should be greater than the end datetime"===e.data[0].message?(s=I18n.getMsg("crm.import.error.event.invalid.start.time"),renderingUtils.showCustomAlert(s,"",!1)):renderingUtils.showCustomAlert("Error:"+s)}),e,(function(){renderingUtils.showCustomAlert(I18n.getMsg("game.common.error")),crmui.hidePopup("VRAjaxEdit"),$("#VRAjaxEdit").find(".fieldsContainer").empty(),a=void 0,delete Crm.VR}))}function b(e){var t=Crm.VR.entityDetails.entityMapJson[e];if(!t)return null;if(/\b(5|4|6|7|9|10|12|13|15|132|133|135|136)\b/.test(t.uitype+"")){if(t.defaultid&&!isNaN(t.defaultid)&&t.defaultvalue){var a={};return a.name=t.defaultvalue,a.id=t.defaultid,a}return""}return t.defaultvalue}function C(e){a=objectUtils.cloneObject(e)}function T(e,t,a){"Tasks"==e&&"STATUS"==t&&Crm.userDetails.CUSTOMIZE_INFO&&!Crm.userDetails.CUSTOMIZE_INFO.CloseTaskPopup&&($("#showDontAskOption").prop("checked")&&(a.isDontAskAgainChecked=!0),$("#notifyOwnerOption").prop("checked")&&(a.isNotifyOwnerChecked=!0))}function E(e){$("#newRelatedListPopUpDiv").removeClass("w800").css("width","30%").html(Handlebars.templates.validationRuleError(e)),crmui.showPopup("newRelatedListPopUpDiv")}return{evalRules:m,getElemId:g,cancelAjaxEditPopup:function(){if(!0==!validationUtils.isEmpty(a))"StageView"===a.check.type?crmListView.updateStageError(a.fieldValue,a.check.prevStageId):a&&a.check&&"Stage"==a.fieldLabel&&"DetailStageView"===a.check.type&&detailView.stageClickHandler($('li[data-stageid="'+CVRExec.prevStage+'"]'));else if(Crm.VR&&Crm.VR.ajaxEditFieldLabel){$("#saveCancelSpan").find('a[name="button__'+Crm.VR.ajaxEditFieldLabel+'"]').trigger("click")}CFRExec.revertPotentials&&(cancelPotentialPopup(),CFRExec.revertPotentials=!1),a=void 0,crmui.hidePopup("VRAjaxEdit"),$("#formRuleMandatoryFields:visible").length&&setTimeout((function(){freezeBackground()}),410);var e=$("#VRAjaxEdit");e.find(".fieldsContainer").empty(),delete Crm.VR;var t=$("crm-detailview-canvas")[0];void 0!==t&&($(".moveLookupPopBackToFreezeAjax").removeClass("moveLookupPopBackToFreezeAjax"),t.component.ajaxCancel()),e.find("#vr_fol_otherdetails").length>0&&CFRExec.performCancelMandatory(),$L("#changeOwnerPopUp").length>0&&($L("#topBandPopup").removeClass("moveTopbandBackToTheFreeze"),closeownernamedialog(),changeOwner.trackChangeOwnerCancel())},saveAjaxEditPopup:function(){var t=!1,l={};!1===validationUtils.isEmpty(a)&&("closeTask"!==(l=a).check.type&&"StageView"!==l.check.type&&"DetailStageView"!==l.check.type||(t=!0)),Crm.VR||(Crm.VR={}),Crm.VR.fieldsInPopup||(Crm.VR.fieldsInPopup=[]);for(var n=[],r=$("#VRAjaxEdit"),i=r.find(".labelValCreate").find(":input[id^=Crm_],div[id^=Crm_],crm-user-wrapper[id^=Crm_]").not("input[id$='_TimeOption']"),o=r.find("#vr_fol_otherdetails").length>0,s=i.length,d=0;d<s;d++){var u=$(i[d]);n.push(u.attr("id")),Crm.VR.fieldsInPopup.push(u.data("colname"))}!t&&detailView.currentModule&&n.push("Crm_"+detailView.currentModule+"_"+Crm.VR.ajaxEditFieldLabel);var c=Crm.validateEntityAndShowErrorMsg(n,e||detailView.currentModule,!0);c&&(void 0===Crm.userDetails.LAYOUTRULEAVAILABLE||!0===Crm.userDetails.LAYOUTRULEAVAILABLE&&Crm.userDetails.LRINVOLVEDMODULES.contains(e||detailView.currentModule))&&void 0!==CFRExec&&!(c=CFRExec.executeLayoutRulesForVR(e||detailView.currentModule))&&o&&Crm.validateEntityAndShowErrorMsg(n,e||detailView.currentModule,!0),c&&c&&(t||"Events"!==detailView.currentModule||(t=Crm.VR.ajaxEditFieldLabel&&""!==Crm.VR.ajaxEditFieldLabel&&Crm.VR.fieldsInPopup.contains(Crm.VR.ajaxEditFieldLabel)),new Promise((function(a){a(m("view",e||detailView.currentModule,null,!0,t,!0))})).then((function(e){if(e)if(!1===validationUtils.isEmpty(a)){var t=null,l=1;for(var n in Crm.requestParamWithColname)Crm.requestParamWithColname.hasOwnProperty(n)&&(t="fieldValue"+l,a["columnName"+l]=n,a[t]=Crm.requestParamWithColname[n],l++);var i=a.check;delete a.check,"StageView"===i.type?(new crmRequestPool).doAjax1("/crm/v2/",(function(e){"STAGE"!==a.columnName?crmListView.updateStageSuccess(a.moduleid,i.valId,i.prevStageId,e):crmListView.updateStageSuccess(a.moduleid,a.fieldValue,i.prevStageId,e),crmui.hidePopup("VRAjaxEdit"),r.find(".fieldsContainer").empty(),a=void 0,delete Crm.VR}),a,(function(){renderingUtils.showCustomAlert(I18n.getMsg("game.common.error")),crmui.hidePopup("VRAjaxEdit"),r.find(".fieldsContainer").empty(),a=void 0,delete Crm.VR})):"closeTask"!==i.type&&"DetailStageView"!==i.type||("closeTask"===i.type&&T(i.module,"STATUS",a),y(a,i.module,i.id,i.from,i.url))}else{var o=detailView.currentModule,s=returnJson[o].entityid,d=function(e,t){var a={};a.columnName=Crm.VR.ajaxEditFieldLabel,a.fieldValue=Crm.requestParamWithColname[Crm.VR.ajaxEditFieldLabel];var l=returnJson.entityMapJson[a.columnName].uitype;if(4==l){var n=Lyte.Router.getRouteInstance("crm.tab.module").getDynamicParam();a.fieldValue=$("#Crm_"+n+"_"+a.columnName).val()}if(133===l||"133"===l){var r=JSON.parse(JSON.stringify(document.getElementById("mouseArea__"+a.columnName))),i=Object.keys(r)[0];a.filterQueryId=r[i].params.filterQueryId}!a.fieldValue&&e&&"Potentials"===e&&Crm.VR.ajaxEditFieldLabelValue&&(a.fieldValue=Crm.VR.ajaxEditFieldLabelValue);Crm.VR.entityID&&(a.entityID=Crm.VR.entityID);T(e,Crm.VR.ajaxEditFieldLabel,a),delete Crm.requestParamWithColname[Crm.VR.ajaxEditFieldLabel];var o=1;for(var s in Crm.requestParamWithColname)Crm.requestParamWithColname.hasOwnProperty(s)&&(a["columnName"+o]=s,a["fieldValue"+o]=Crm.requestParamWithColname[s],o++,T(e,s,a));return a.moduleid=t,a.module=e,a[csrfParamName]=csrfToken,a}(o,s),u=$L("#changeOwnerPopUp"),c=$L("#topBandPopup");if(u.is(":visible")){var m=d.module,p={},f={},v=$("#mouseArea__"+d.columnName).data("params");if("STATUS"===d.columnName&&"Tasks"===m)p.Status=d.fieldValue;else if("DUEDATE"===d.columnName)p.Due_Date=apiDateFormat(d.fieldValue);else if(void 0===v&&"AMOUNT"===d.columnName)p.Amount=d.fieldValue;else if(void 0===v)p[customViewObject.stageSysRefName]=d.fieldValue.split(":").length>1?d.fieldValue.split(":")[1]:d.fieldValue;else{D=-1!==(D=v.sysRefName).indexOf(".")?D.replace(".","__"):D;var h=v.uitype;if(p[D]=d.fieldValue,24===parseInt(h)||202===parseInt(h))p[D]=""===d.fieldValue?d.fieldValue:apiDateFormat(d.fieldValue);else if(786===parseInt(h)||333===parseInt(h)||14===parseInt(h))p[D]=""===d.fieldValue?d.fieldValue:apiDateTimeFormat(d.fieldValue);else if(21!==parseInt(h)&&"Stage"===D&&d.fieldValue.split(":").length>1){var g=d.fieldValue.indexOf(":");p[D]=d.fieldValue.substring(g+1)}else if(100===parseInt(h)||96===parseInt(h)){for(var b=[],C=(O=d.fieldValue.split(";")).length,E=0;E<C;E++)b.push(O[E]);p[D]=b}else 300!==parseInt(h)&&301!==parseInt(h)||(p[D]="true"===d.fieldValue)}var _=Object.keys(d).length,I=new RegExp("CustomModule\\d+_Name");for(E=1;E<_;E++){var k="columnName"+E.toString(),w="fieldValue"+E.toString();d.hasOwnProperty(k)&&d.hasOwnProperty(w)&&(w.split(":")&&w.split(":").length>1&&(d[w]=d[w].split[1]),f[d[k]]=d[w])}for(var R in f){var L=$("#mouseArea__"+R).data("params"),D="";h="";if(void 0===L){var S=$("#Crm_"+m+"_"+R);D=-1!==(D=S.data("sysrefname")).indexOf(".")?D.replace(".","__"):D,h=S.data("uitype")}else D=-1!==(D=L.sysRefName).indexOf(".")?D.replace(".","__"):D,h=L.uitype;if("Stage"===D&&f[R].split(":").length>1){g=f[R].indexOf(":");p[D]=f[R].substring(g+1)}else if(24===parseInt(h)||202===parseInt(h))p[D]=""===d.fieldValue?d.fieldValue:apiDateFormat(f[R]);else if(786===parseInt(h)||333===parseInt(h)||14===parseInt(h))p[D]=""===d.fieldValue?d.fieldValue:apiDateTimeFormat(f[R]);else if(100===parseInt(h)||96===parseInt(h)){var O;for(b=[],C=(O=f[R].split(";")).length,E=0;E<C;E++)b.push(O[E]);""===f[R]&&(b=""),p[D]=b}else 1===parseInt(h)&&I.test(D)?p.Name=f[R]:300===parseInt(h)||301===parseInt(h)?p[D]="true"===f[R]||"false"!==f[R]&&f[R]:p[D]=f[R]}var F={folOwnerAjaxVal:p};u[0].component.ajaxEditOwnerValue=F,crmui.hidePopup("VRAjaxEdit"),c.removeClass("moveTopbandBackToTheFreeze")}else y(d,o,s,"detailView",null)}})))},validateRulesForLayoutRule:function(e,t){Crm.VR||(Crm.VR={}),Crm.VR.fieldsInPopup=[],Crm.VR.entityDetails||(Crm.VR.entityDetails={}),Crm.VR.entityDetails.entityMapJson=returnJson.entityMapJson?objectUtils.cloneObject(returnJson.entityMapJson):returnJson.entityMapJson,Crm.VR.ajaxEditFieldLabel&&e&&e.contains(Crm.VR.ajaxEditFieldLabel)&&e.splice(e.indexOf(Crm.VR.ajaxEditFieldLabel),1),Crm.VR.ajaxEditFailedFields||(Crm.VR.ajaxEditFailedFields=[]);for(var l=e.length,n=0;n<l;n++)Crm.VR.ajaxEditFailedFields.push(e[n]),Crm.VR.fieldsInPopup.push(e[n]);if(detailView.currentModule&&"Potentials"===detailView.currentModule&&a&&a.check&&"DetailStageView"===a.check.type){var r=a.fieldValue;return r&&r.indexOf(":")>-1&&(r=r.split(":")[1]),CVRExec.storeStageValue(r),new Promise((function(e){e(m("view","Potentials",null,!0,!0,!0))}))}var i=!1;if(!1===validationUtils.isEmpty(t)){C(t);var o=a.check&&a.check.type?a.check.type:"";if("closeTask"===o)i=!0,CVRExec.getTaskCompletedUserValue();else{if("DetailStageView"===o)return new Promise((function(e){e(m("view","Potentials",null,!0,!0,!0))}));if("StageView"===o)return new Promise((function(e){e(m("view",a.module,null,!0,!0,!0))}))}}var s=i?"Tasks":detailView.currentModule;return new Promise((function(e){e(m("view",s,null,!0,i,!0))}))},getTaskCompletedUserValue:function(){if(Crm.VR.entityDetails.entityMapJson.STATUS){for(var e=Crm.VR.entityDetails.entityMapJson.STATUS.picklistmap,t=e.length,a=0;a<t;a++)if("Completed"===e[a].systemvalue)return Crm.VR.entityDetails.entityMapJson.STATUS.defaultvalue=e[a].uservalue,e[a].uservalue;Crm.VR.entityDetails.entityMapJson.STATUS.defaultvalue="Completed"}return"Completed"},getFieldVal:b,storeCachedParams:C,storeStageValue:function(e,t){t?Crm.VR.entityDetails.entityMapJson[t].defaultvalue=e:Crm.VR.entityDetails.entityMapJson.STAGE.defaultvalue=e},validateRulesForStagePopUpSave:function(){Crm.VR||(Crm.VR={}),Crm.VR.fieldsInPopup=[],Crm.VR.stagePopUp=!0,Crm.VR.entityDetails=returnJson?objectUtils.cloneObject(returnJson):returnJson,Crm.VR.ajaxEditFailedFields||(Crm.VR.ajaxEditFailedFields=[]);for(var e=$("#closedWon").find(".labelValCreate :input[id^='Crm_']").not("input[id$='_TimeOption']"),t=e.length,a=0;a<t;a++){var l=$(e[a]);Crm.VR.fieldsInPopup.push(l.data("colname"))}return new Promise((function(e){e(m("view","Potentials",null,!0,!0,!0))}))},setAjaxEditPrimaryField:f,hideAlertPopup:function(){crmui.hidePopup("newRelatedListPopUpDiv"),$("#newRelatedListPopUpDiv").css("width","").addClass("w800"),validationUtils.isEmpty(a)||"StageView"!==a.check.type||crmListView.updateStageError(a.fieldValue,a.check.prevStageId),f(!1),delete Crm.VR},saveValuesAndReloadEntityDetails:y}}catch(e){$("#jsexception").html("").text("exception occured in CrmValidationRuleExecution js file"+e)}}();