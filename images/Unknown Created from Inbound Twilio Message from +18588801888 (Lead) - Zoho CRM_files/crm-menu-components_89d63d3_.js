Lyte.Component.registerHelper("getI18n",(function(){var e=arguments.length;if(1===e)return I18n.getMsg(arguments[0]);for(var t=arguments[0],a=[],o=1;o<e;o++)a.push(arguments[o]);var i=I18n.getMsg(t,I18n.getMsg(a));return i=i?i.replace("''","'"):i})),Lyte.Component.registerHelper("containsObject",(function(e,t,a){for(var o=e.length,i=0;i<o;i++)if(e[i][a]===t)return!0;return!1})),Lyte.Component.registerHelper("formatDecimalValue",(function(e){return commonUtils.formatDecimalValue(e)})),Lyte.Component.registerHelper("getI18nwithoutParamI18n",(function(){var e=arguments.length;if(1===e)return I18n.getMsg(arguments[0]);for(var t=arguments[0],a=[],o=1;o<e;o++)a.push(arguments[o]);return I18n.getMsg(t,a)})),Lyte.Component.registerHelper("I18nDynamicKey",(function(e,t){for(var a=[],o=2;o<arguments.length;o++)a.push(arguments[o]);var i=I18n.getMsg(e+t,a);return i})),Lyte.Component.registerHelper("encodeForHTMLAttribute",(function(e){return $ESAPI.encoder().encodeForHTMLAttribute(e)})),Lyte.Component.registerHelper("stringJoin",(function(){for(var e=arguments.length,t="",a=0;a<e;a++)arguments[a]&&""!==arguments[a]&&(t=""===t?arguments[a]:t+","+arguments[a]);return t})),Lyte.Component.registerHelper("capitalize",(function(e){return"delivered"==e&&(e="sent"),e[0].toUpperCase()+e.slice(1)})),Lyte.Component.registerHelper("getUserTimeFormat",(function(){return"HH:mm"===Crm.userDetails.TIME_FORMAT?"24":"12"})),Lyte.Component.registerHelper("ifContains",(function(e,t){return null!=e&&null!=t&&null!=e&&null!=t&&e.toString().indexOf(t.toString())>-1})),Lyte.Component.registerHelper("getValue",(function(e,t){return e?"object"==typeof e?e[t]:JSON.parse(e)[t]:""})),Lyte.Component.registerHelper("hasOwnProperty",(function(e,t){return e&&e.hasOwnProperty(t)})),Lyte.Component.registerHelper("checkComparison",(function(e,t,a){switch(a){case">=":if(e>=t)return!0;break;case"<=":if(e<=t)return!0;break;case">":if(e>t)return!0;break;case"<":if(e<t)return!0;break;case"=":if(e===t)return!0;break;case"==":if(e==t)return!0;break;case"!=":if(e!=t)return!0}return!1})),Lyte.Component.registerHelper("ifAllMatch",(function(){var e=arguments.length;if(e%3==0){for(var t=0;t<e;t+=3)if(!1===Lyte.Component.registeredHelpers.checkComparison.call(this,arguments[t],arguments[t+2],arguments[t+1]))return!1;return!0}return!1})),Lyte.Component.registerHelper("startsWith",(function(e,t){return!!e.startsWith(t)})),Lyte.Component.registerHelper("dateTimeUserFormat",(function(e){if(e)return Utils.getDateTimeInUserFormat(new Date(e))})),Lyte.Component.registerHelper("spliter",(function(e){if(e)return e.split("splitername")[1]})),Lyte.Component.registerHelper("splitername",(function(e){if(e)return e.split("splitername")[0]})),Lyte.Component.registerHelper("getHref",(function(e,t){if(t)return Crm.getCrmBasePath()+"/EntityInfo.do?module="+e+"&id="+t})),Lyte.Component.registerHelper("dateTimeUserFormatFromISOFormat",(function(e){if(e){var t=e.split("T"),a=-1!=t[1].indexOf("+")?"+":"-",o=t[1].split(a),i=t[0].split("-"),n=o[0].split(":"),s=new Date;return s.setFullYear(parseInt(i[0])),s.setMonth(parseInt(i[1])-1),s.setDate(parseInt(i[2])),s.setHours(parseInt(n[0])),s.setMinutes(parseInt(n[1])),s.setSeconds(parseInt(n[2])),Utils.getDateTimeInUserFormat(s,!0)}})),Lyte.Component.registerHelper("dateUserFormatFromISOFormat",(function(e){if(e){var t=e.split("T"),a=-1!=t[1].indexOf("+")?"+":"-",o=t[1].split(a),i=t[0].split("-"),n=o[0].split(":"),s=new Date;return s.setFullYear(parseInt(i[0])),s.setMonth(parseInt(i[1])-1),s.setDate(parseInt(i[2])),s.setHours(parseInt(n[0])),s.setMinutes(parseInt(n[1])),s.setSeconds(parseInt(n[2])),Utils.getDateInLocaleDefaultFormat(s)}})),Lyte.Component.registerHelper("ifAnyMatch",(function(){var e=arguments.length;if(e%3==0){for(var t=0;t<e;t+=3)if(!0===Lyte.Component.registeredHelpers.checkComparison.call(this,arguments[t],arguments[t+2],arguments[t+1]))return!0;return!1}return!1})),Lyte.Component.registerHelper("contains",(function(e,t){return e&&"string"==typeof e&&(e=e.replace(/'/g,'"'),e=JSON.parse(e)),!(!e||!e.contains(t))})),Lyte.Component.registerHelper("startsWith",(function(e,t){return!(!e||"string"!=typeof e||!e.startsWith(t))})),Lyte.Component.registerHelper("notStartsWith",(function(e,t){return!(!e||"string"!=typeof e||e.startsWith(t))})),Lyte.Component.registerHelper("and",(function(){for(var e=0;e<arguments.length;e++)if(0==arguments[e]||null==arguments[e]||null==arguments[e])return!1;return!0})),Lyte.Component.registerHelper("or",(function(){for(var e=0;e<arguments.length;e++)if(arguments[e])return!0;return!1})),Lyte.Component.registerHelper("checkPermission",(function(e,t){return t&&""!==t&&(e=e+"_"+t),crmListView.changedPermissionsForZBModules.hasOwnProperty(e)&&(e=crmListView.changedPermissionsForZBModules[e]),!0===Crm.userDetails.permissions[e]})),Lyte.Component.registerHelper("imgStaticPath",(function(){return""==crmConstants.imgStaticPath?"/images":FingerPrint.isEnabled?crmConstants.fp_imgStaticPath:crmConstants.imgStaticPath})),Lyte.Component.registerHelper("setTabSubTab",(function(e){var t=e.clickId;if(t){crmSetup.setupObject[e.routeName]=e,e.indexRoute&&(crmSetup.setupObject[e.routeName+"."+e.indexRoute]=e);var a=t.split("_"),o=a[0],i=a[1];e.tab=o,e.subTab=i}})),Lyte.Component.registerHelper("jsonToString",(function(e){return JSON.stringify(e)})),Lyte.Component.registerHelper("getUserDetail",(function(){for(var e=Crm.userDetails[arguments[0]],t=1;t<arguments.length;t++)e=e[arguments[1]];return e})),Lyte.Component.registerHelper("getUserName",(function(e){var t=store.peekRecord("user",e);return t?t.full_name:"No User"})),Lyte.Component.registerHelper("substr",(function(e,t,a){return e.substring(t,a)})),Lyte.Component.registerHelper("indexOf",(function(e,t,a,o){return!(!e||!t)&&Lyte.Component.registeredHelpers.checkComparison(e.indexOf(t),o,a)})),Lyte.Component.registerHelper("encodeHTML",(function(e){return $ESAPI.encoder().encodeForHTML(e)})),Lyte.Component.registerHelper("encodeURL",(function(e){return $ESAPI.encoder().encodeForURL(e)})),Lyte.Component.registerHelper("encodeJS",(function(e){return $ESAPI.encoder().encodeForJavaScript(e)})),Lyte.Component.registerHelper("encodeURIComponent",(function(e){return encodeURIComponent(e)})),Lyte.Component.registerHelper("checkForEditionWise",(function(e){return!!(e.thisEditionFeature||e.higherEditionTry&&hignEdDivAvailInSetup)})),Lyte.Component.registerHelper("getUserStatus",(function(e){return!!Crm.userDetails[e]})),Lyte.Component.registerHelper("checkRefreshReq",(function(e){return!!crmSetup.allowMultiClick[e]})),Lyte.Component.registerHelper("rebrandProperty",(function(e){return RebrandLinkUtil.getProperty(e)})),Lyte.Component.registerHelper("isFeatureAvailable",(function(e){return featuresAvailable.hasOwnProperty(e)&&featuresAvailable[e]})),Lyte.Component.registerHelper("getSingularLabel",(function(e){return Crm.moduleInfo[e].translatedSingularLabel})),Lyte.Component.registerHelper("getPluralLabel",(function(e,t){return!e&&t&&(e=store.peekRecord("module",t).module_name),Crm.moduleInfo[e]?Crm.moduleInfo[e].translatedPluralLabel:""})),Lyte.Component.registerHelper("getModuleDisplayName",(function(e,t,a){return Crm.getModuleDisplayName(e,t,a)})),Lyte.Component.registerHelper("formatCurrencyValue",(function(e,t){return"NaN"===parseInt(e).toString()?"-":(null==t&&(t=returnJson&&returnJson.entityMapJson&&returnJson.entityMapJson.CURRENCYISOCODE?returnJson.entityMapJson.CURRENCYISOCODE.defaultvalue:void 0),currencyUtils.returnValueInDefaultCurrency(t,e))})),Lyte.Component.registerHelper("getDateTime",(function(e,t,a){if(!e||e.length<1)return a||"";if("786"==t||"14"==t||"116"==t||"333"==t){var o=new Date(e);return Utils.getDateTimeInUserFormat(o,!0)}if("24"==t){var i=new Date(e);return Utils.getDateInUserDatePattern(i,!0)}})),Lyte.Component.registerHelper("convertAPIDateFormatToUserDateFormat",(function(e,t){return!e||e.length<1?t||"":Utils.getDateInUserDatePattern(CrmDateUtils.getDateObjectFromString(e,"YYYY-MM-DD"))})),Lyte.Component.registerHelper("array_contains",(function(e,t){for(var a=e.length,o=0;o<a;o++)if(e[o]==t)return!0;return!1})),Lyte.Component.registerHelper("array_not_contains",(function(e,t){for(var a=e.length,o=0;o<a;o++)if(e[o]==t)return!1;return!0})),Lyte.Component.registerHelper("arrayLength",(function(e){return e?e.length:0})),Lyte.Component.registerHelper("getFieldLabel",(function(e){if("undefined"!=typeof returnJson&&returnJson.entityMapJson)return returnJson.entityMapJson[e]?returnJson.entityMapJson[e].displaylabel:void 0;var t=store.peekAll("field").filter((function(t){return t.column_name==e}));return t&&t[0]?t[0].display_label:void 0})),Lyte.Component.registerHelper("getModuleLabel",(function(e){if("Zoho Finance"==e||"Zoho Books"==e||"Zoho Invoice"==e)if(Crm.moduleInfo["Zoho Invoice"])e="Zoho Invoice";else{if(!Crm.moduleInfo["Zoho Books"])return"Zoho Finance";e="Zoho Books"}return I18n.getMsg(Crm.moduleInfo[e].translatedPluralLabel,I18n.getMsg("Zoho"))})),Lyte.Component.registerHelper("getSum",(function(){for(var e=0,t=arguments.length,a=0;a<t;a++)e+=arguments[a];return e})),Lyte.Component.registerHelper("toString",(function(e){return e.toString()})),Lyte.Component.registerHelper("getSum",(function(e,t,a){return parseFloat((e+t).toFixed(a))})),Lyte.Component.registerHelper("inc",(function(e,t){return e+t})),Lyte.Component.registerHelper("concat",(function(){for(var e="",t=arguments.length,a=0;a<t;a++)e+=arguments[a];return e})),Lyte.Component.registerHelper("noOfKeys",(function(e){return Object.keys(e).length})),Lyte.Component.registerHelper("isNotEmpty",(function(e){return validationUtils.isNotEmpty(e)})),Lyte.Component.registerHelper("isRTLuser",(function(){return"iw_IL"==Crm.userDetails.LOCALE})),Lyte.Component.registerHelper("getSingularLabel",(function(e,t){return!e&&t&&(e=idModuleMapping[t]),moduleRecordMapping&&moduleRecordMapping[e]?moduleRecordMapping[e].singular_label:""})),Lyte.Component.registerHelper("getCrmBasePath",(function(){return Crm.getCrmBasePath()})),Lyte.Component.registerHelper("isCurrentOrg",(function(e){return Crm.currentZgid===e})),Lyte.Component.registerHelper("if_eq",(function(e,t,a){return void 0!==e&&void 0!==t&&e==t?a.fn(this):a.inverse(this)})),Lyte.Component.registerHelper("isEmpty",(function(e){return validationUtils.isEmpty(e)})),Lyte.Component.registerHelper("isNotEmpty",(function(e){return!validationUtils.isEmpty(e)})),Lyte.Component.registerHelper("isNotEmptyString",(function(e){return!validationUtils.isEmptyString(e)})),Lyte.Component.registerHelper("isEmptyString",(function(e){return validationUtils.isEmptyString(e)})),Lyte.Component.registerHelper("if_gt_len",(function(e,t){return!!(e&&e.length>parseInt(t))})),Lyte.Component.registerHelper("if_lt_len",(function(e,t){return e.length<parseInt(t)})),Lyte.Component.registerHelper("if_not_eq_len",(function(e,t){return e.length<parseInt(t)})),Lyte.Component.registerHelper("isNotPartOf",(function(e,t){return!t||null!=(e=e.split(","))&&null!=t&&-1==e.indexOf(t.toString())})),Lyte.Component.registerHelper("isPartOf",(function(e,t){return!t||null!=(e=e.split(","))&&null!=t&&e.indexOf(t.toString())>-1})),Lyte.Component.registerHelper("getDisplayModuleName",(function(e,t){var a=Crm.moduleInfo;if(void 0===e)return e;var o="Deals"==e?"Potentials":e;return a[o]?t?a[o].translatedSingularLabel:a[o].translatedPluralLabel:e})),Lyte.Component.registerHelper("convertISODatetoUserDatePattern",(function(e){return Utils.convertDateToUserPattern(Utils.ISO8601toDateObject(e))})),Lyte.Component.registerHelper("getTimeInUserFormat",(function(e){var t=e?new Date(e):new Date;return Utils.getTimeInUserFormat(t)})),Lyte.Component.registerHelper("getDateFormISODate",(function(e){return e?Utils.getDateInUserDatePattern(new Date(e),!1):""})),Lyte.Component.registerHelper("getModuleLabelByApiName",(function(e,t){var a=Crm.moduleInfo;for(var o in a){var i=a[o];if(i.apiname===e)return t?i.translatedSingularLabel:i.translatedPluralLabel}return e})),Lyte.Component.registerHelper("getModuleNameByApiName",(function(e){var t=Crm.moduleInfo;for(var a in t){var o=t[a];if(o.apiname===e)return o.translatedSingularLabel}return e})),Lyte.Component.registerHelper("getModuleNameByApiName",(function(e){var t=Crm.moduleInfo;for(var a in t){if(t[a].apiname===e)return a}})),Lyte.Component.registerHelper("getApiNameByModuleName",(function(e){return Crm.moduleInfo[e].apiname})),Lyte.Component.registerHelper("getI18nByAppendKey",(function(){if(arguments[0]+arguments[1]==="crm.label.widgets.SALES_SIGNALS"||arguments[0]+arguments[1]==="crm.label.widgets.sales_signals"||arguments[0]+arguments[1]==="crm.label.cf.salessignals")return I18n.getMsg("crm.ntc.label.listview.notificationHeading");var e=arguments.length-1;if(2===e)return I18n.getMsg(arguments[0]+arguments[1]);for(var t=arguments[0]+arguments[1],a=[],o=2;o<e;o++)a.push(arguments[o]);return I18n.getMsg(t,I18n.getMsg(a))})),Lyte.Component.registerHelper("ObjToString",(function(e){return JSON.stringify(e)})),Lyte.Component.registerHelper("replace",(function(e,t,a){return e.replace(new RegExp(t,"g"),a)})),Lyte.Component.registerHelper("formatNumber",(function(e){var t=Crm.userDetails.COUNTRY_LOCALE.replace("_","-");if("${EMPTY}"===e||"${NOTEMPTY}"===e||"NaN"===Intl.NumberFormat(t,{maximumFractionDigits:9}).format(e))return e;["ps-AF","bn-BD","es-PR","ar-SA"].includes(t)&&(t="en-US"),e=-1===e.indexOf(".")&&e.length>16?Search.formatBigNumber(e,t):Intl.NumberFormat(t,{maximumFractionDigits:9}).format(e);var a=new Intl.NumberFormat(t).format(11111).replace(/1/g,""),o=new Intl.NumberFormat(t).format(1.1).replace(/1/g,""),i=e.split(a).join(Crm.userDetails.numberSeparators.group);if(1===Search.countCharacters(o,e)){var n=new RegExp(o+"([^"+o+"]*)$");i=i.replace(n,Crm.userDetails.numberSeparators.decimal+"$1")}return i})),Lyte.Component.registerHelper("isJsonArrContainsThisKeyValue",(function(e,t,a){var o;return e.map((function(e,i){e[t]===a&&(o=i)})),o>-1})),Lyte.Component.registerHelper("arithResult",(function(e,t,a){switch(e=parseFloat(e),t=parseFloat(t),a){case"+":return e+t;case"-":return e-t;case"*":return e*t;case"/":return e/t;case"%":return e%t}})),Lyte.Component.registerHelper("parseFloat",(function(e){return parseFloat(e)})),Lyte.Component.registerHelper("getDisplayModuleName",(function(e,t,a,o){if(!e)return e;var i=Crm.moduleInfo,n="Deals"==e?"Potentials":e;return i[n]?t?i[n].translatedSingularLabel:i[n].translatedPluralLabel:o?a:e})),Lyte.Component.registerHelper("getMaxLengthForABTestInputs",(function(e,t){switch(t){case"duration":switch(e.condition.period){case"days":case"weeks":return 2;case"months":return 1}}})),Lyte.Component.registerHelper("isRecentWinner",(function(e){return Lyte.Component.registeredHelpers.isWinnerAvailable(e)&&e.recent_winner})),Lyte.Component.registerHelper("isEqualTo",(function(e,t){return e===t})),Lyte.Component.registerHelper("absoluteSvgImgPath",(function(e,t,a){return"/crm/"+e+t+a})),Lyte.Component.registerHelper("getRealPositionFromIndex",(function(e){return e+1})),Lyte.Component.registerHelper("getUserImageUrl",(function(e){var t=Crm.getUserDetailsMap()[e=e||Crm.userDetails.USER_ID];return t&&t.avatar?t.avatar:networkUtils.getImageUrl("nophoto_80ea3af_.png",ResourceConstants.CRM)})),Lyte.Component.registerHelper("getUserImageUrlByZuId",(function(e){return"//"+RebrandLinkUtil.getProperty("CONTACTS_URL")+"/file?ID="+e+"&fs=thumb"})),Lyte.Component.registerHelper("getDateInUsrViewFormat",(function(e){return e||(e=new Date),Utils.getDateInUsrViewFormat(e)})),Lyte.Component.registerHelper("getUserDisplayName",(function(){return Crm.userDetails.DISPLAY_NAME})),Lyte.Component.registerHelper("getHoursArr",(function(){var e=["01","02","03","04","05","06","07","08","09","10","11","12"];return"HH:MM"===Crm.userDetails.TIME_FORMAT.toUpperCase()&&(e=["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"]),e})),Lyte.Component.registerHelper("getMinuteArr",(function(){return["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59"]})),Lyte.Component.registerHelper("is12HourFormat",(function(){return"HH:MM"!==Crm.userDetails.TIME_FORMAT.toUpperCase()})),Lyte.Component.registerHelper("getUserImageLinkById",(function(e){return"https:"+Crm.getUserDetailsMap()[e].avatar})),Lyte.Component.registerHelper("getHelpUrl",(function(e){switch(Crm.userDetails.LOCALE){case"fr_FR":return RebrandLinkUtil.getProperty("HELPLINK_URL_NEW")+"fr/crm/help/"+crmConstants.helpUrl[e];case"es_ES":return RebrandLinkUtil.getProperty("HELPLINK_URL_NEW")+"es-xl/crm/help/"+crmConstants.helpUrl[e];case"pt_BR":return RebrandLinkUtil.getProperty("HELPLINK_URL_NEW")+"pt-br/crm/help/"+crmConstants.helpUrl[e];case"de_DE":return RebrandLinkUtil.getProperty("HELPLINK_URL_NEW")+"de/crm/help/"+crmConstants.helpUrl[e];default:return crmConstants.helpUrl["help.domain.url"]+crmConstants.helpUrl[e]}})),Lyte.Component.registerHelper("join",(function(e,t,a){if(void 0===t&&(t=""),a){for(var o=e[0][a],i=e.length,n=1;n<i;n++)o=o+t+e[n][a];return o}return e.join(t)})),Lyte.Component.registerHelper("descTrim",(function(e){return e.length>30&&(e=e.slice(0,30)+"..."),e})),Lyte.Component.registerHelper("hasValueInJSONArray",(function(){var e=arguments;return arguments[0].some((function(t){return t[e[1]]===e[2]}))})),Lyte.Component.registerHelper("execString",(function(e){return new Function("return "+e)()})),Lyte.Component.registerHelper("join",(function(){return Array.prototype.join.call(arguments,"")})),Lyte.Component.registerHelper("getSub",(function(e,t){return e-t})),Lyte.Component.registerHelper("isUndefined",(function(e){return void 0!==e?arguments[1]:arguments[2]})),Lyte.Component.registerHelper("if_gt",(function(e,t){return e>t})),Lyte.Component.registerHelper("getLastModified",(function(e){return(e?new CrmDate(e):new CrmDate).getDateInPattern("MMM dd, yyyy")})),Lyte.Component.registerHelper("getLocaleTimeString",(function(e){return e?new CrmDate(e).getTimeInUserPattern():(new CrmDate).getTimeInUserPattern()})),Lyte.Component.registerHelper("toLowerCase",(function(e){return e.toLowerCase()})),Lyte.Component.registerHelper("getImgUrl",(function(e){return commonUtils.getPhotoURL(e)})),Lyte.Component.registerHelper("not",(function(e){return!e})),Lyte.Component.registerHelper("capitalize",(function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),Lyte.Component.registerHelper("checkSetupInnerLinkVisible",(function(){var e=Lyte.Router.getRouteInstance("crm.settings.section").transition.target;return-1==e.indexOf("crm.settings.section.manage-tags")&&-1==e.indexOf("crm.settings.section.schedule-mass-email")&&-1==e.indexOf("crm.settings.section.macro")&&-1==e.indexOf("crm.settings.section.autoresponders")&&-1==e.indexOf("crm.settings.section.custom-view")&&"crm.settings.section.import"!==e&&"crm.settings.import"!==e})),Lyte.Component.registerHelper("containsRecord",(function(e,t){if(!e||!t)return!1;for(var a=e.length,o=0;o<a;o++){if(e[o].id==t)return!0}return!1})),Lyte.Component.registerHelper("getUserImageLinkById",(function(e){return"https:"+Crm.getUserDetailsMap()[e].avatar})),Lyte.Component.registerHelper("isPaidUser",(function(){return Crm.userDetails.ISPAID_USER})),Lyte.Component.registerHelper("trim",(function(e){return e?e.trim():e})),Lyte.Component.registerHelper("getUserImgUrlByZuId",(function(e){return"//"+RebrandLinkUtil.getProperty("CONTACTS_URL")+"/file?ID="+e+"&fs=thumb"})),Lyte.Component.registerHelper("stringLen",(function(e){return e.length})),Lyte.Component.registerHelper("isUndefined",(function(e){return void 0===e})),Lyte.Component.registerHelper("getObjLength",(function(e){return e.length-1})),Lyte.Component.registerHelper("mapArrObjtoStrArr",(function(e){return e.map((function(e){return e.value})).sort()})),Lyte.Component.registerHelper("getRecordValue",(function(e,t){if("Full_Name"==t.api_name){var a=store.peekRecord("user",Crm.userDetails.USER_ID).name_format;a=a.split(",");var o=[];return a.forEach((function(t){"Salutation"!=t&&(t=t.replace(" ","_"),e[t]&&o.push(e[t]))})),o.join(" ")}return e[t.api_name]})),Lyte.Component.registerHelper("getVisionFailureAction",(function(e){return"10"===e?"record_approval":"12"===e?"do_not_create":"13"===e?"image_processing":"image_approval"})),Lyte.Component.registerHelper("getRecordsCount",(function(e){return e.per_page*(e.page-1)+e.count})),Lyte.Component.registerHelper("getFromIndex",(function(e){return e.per_page*(e.page-1)})),Lyte.Component.registerHelper("objectLen",(function(e){return Array.isArray(e)?e.length:"object"==typeof e?Object.keys(e).length:0})),Lyte.Component.registerHelper("getModuleLabelFromApiName",(function(e,t){var a=Utils.inverseKeyValues(moduleApiMapping)[e];return 1==t?moduleRecordMapping[a].singular_label:moduleRecordMapping[a].plural_label})),Lyte.Component.registerHelper("getCommaSeperatedStrWithSpace",(function(){for(var e=arguments[0],t=e.length,a="",o=0;o<t;o++)e[o]&&""!==e[o]&&(a=""===a?e[o]:a+", "+e[o]);return a})),Lyte.Component.registerHelper("toLowerCase",(function(e){return void 0!==e?e.toLowerCase():e})),Lyte.Component.registerHelper("getUserImgUrlByZuId",(function(e){return"//"+RebrandLinkUtil.getProperty("CONTACTS_URL")+"/file?ID="+e+"&fs=thumb"})),Lyte.Component.registerHelper("toLowerCase",(function(e){return e.toLowerCase()})),Lyte.Component.registerHelper("fixedDecimal",(function(e,t){return null!==e?e.toFixed(t):""})),Lyte.Component.registerHelper("getAttachmentIcons",(function(e){switch(e){case"attachDesktop":return"dIB vmiddle mR10 upload-iconAtc";case"attachDocuments":return"dIB vmiddle mR10 docs-iconAtc";case"teamDrivePicker":return"dIB mR10 svgIcons ico-teamDrive vmiddle";case"attachZDocs":return"dIB vmiddle mR10 zohodocs-iconAtc";case"attachGDocs":return"dIB vmiddle mR10 googledrive-iconAtc";case"cloudPicker":return"dIB mR10 svgIcons ico-cloudPicker vmiddle";case"attachLink":return"dIB vmiddle mR10 link-iconAtc"}})),Lyte.Component.registerHelper("getNumberWithCommas",(function(e,t,a){return currencyUtils.getNumberWithCommas(e,t,a)})),Lyte.Component.registerHelper("getOrgCode",(function(e,t){try{var a=commonUtils.getOrgNameForDisplay(e,t);a.length>22&&(a=a.substring(0,19));var o="";if(/(org)+([\d]{4,})/g.test(a))return"O";a=a.replace(/[\!\@\#\$\^\&\%\*\(\)\+\=\-\[\]\\\/\{\}\|\:\<\>\?\,\.]/gi,"");o=a[0],a.split(" ").forEach((function(e,t){t>0&&(o+=e[0])}));return/^[a-zA-z].*$/g.test(o)&&(o=o.toUpperCase()),o=o.substr(0,3)}catch(e){return" "}})),Lyte.Component.registerHelper("getOrgName",(function(e,t){return commonUtils.getOrgNameForDisplay(e,t)})),Lyte.Component.registerHelper("safeEncodeHTML",(function(e){return null!=new RegExp("[<>]|(?:(&(?!(amp;|lt;|gt;|quot;|#x27;|#x2f;|#39;|#x3a;))))").exec(e)?$ESAPI.encoder().encodeForHTML(e):e})),Lyte.Component.registerHelper("getCurrencySymbol",(function(e){return currencyUtils.getCurrencySymbol(e)})),Lyte.Component.registerHelper("getPaymentsSubUrl",(function(e,t){return document.location.protocol+"//"+RebrandLinkUtil.getProperty("STOREURL")+"/html/store/index.html#history?serviceId="+t+"&customId="+e})),Lyte.Component.registerHelper("convertToLocaleString",(function(e){return e?e.toLocaleString():e})),Lyte.Component.registerHelper("getLogoUrl",(function(e){return"Favicon"===e?Crm.Logo.Favicon:"Logo_url"===e?Crm.Logo.Logo_url:void 0})),Lyte.Component.registerHelper("getCurrentUserZuid",(function(){return Crm.userDetails.ZUID})),Lyte.Component.registerHelper("getCurrentUserEmail",(function(){return Crm.userDetails.EMAIL})),Lyte.Component.registerHelper("formatBytesCeil",(function(e){if(0===e)return"0 Bytes";var t=[I18n.getMsg("B"),I18n.getMsg("KB"),I18n.getMsg("MB"),I18n.getMsg("GB")],a=Math.floor(Math.log(e)/Math.log(1e3));return Math.ceil(parseFloat((e/Math.pow(1e3,a)).toFixed(2)))+" "+t[a]})),Lyte.Component.registerHelper("getPLStyleObj",(function(e,t){return""===t||"-None-"===t||"None"===t||"-"===t||e&&""!==e||(e="#ffffff"),getPLStyleObj(e)})),Lyte.Component.registerHelper("getSFParentClass",(function(e){var t="colorEnabledddDropdown colorEnabledPicklist";return e&&"-None-"!==e&&"None"!==e||(t+=" colorEnabledPKNone"),t})),Lyte.Component.registerHelper("getCVPicklistStyleObj",(function(e,t){return getPicklistStyleObj(e,t.pick_list_values)})),Lyte.Component.registerHelper("isPremiumUser",(function(){var e=Crm.userDetails.LICENSE_TYPE;return"U"===e||"A"===e||"E"===e||"C"===e||"Z"===e})),Lyte.Component.registerHelper("addString",(function(e,t){return e+t})),Lyte.Component.registerHelper("isHebrewUser",(function(){return!!Crm.userDetails.LOCALE.includes("iw")})),Lyte.Component.registerHelper("getDateInUserDatePatternFromISODate",(function(e){if(e){var t=Utils.ISO8601toDateObject(e);return Utils.getDateInUserDatePattern(t)}return""})),Lyte.Component.registerHelper("validateIfWarringNeededOrNot",(function(e,t){return t&&t[e]})),Lyte.Component.registerHelper("getAppName",(function(){return Crm.appName})),Lyte.Component.registerHelper("getCrmClientImageUrl",(function(e){return networkUtils.getImageUrl(e,ResourceConstants.CRMClient)})),Lyte.Component.registerHelper("getCrmImageUrl",(function(e){return networkUtils.getImageUrl(e,ResourceConstants.CRM)})),Lyte.Component.registerHelper("getIntegrationName",(function(e){return Crm.integrationsAppName[e]})),Lyte.Component.registerHelper("getLocalOrder",(function(e,t){for(var a=1,o=e.recommendation_on,i=e.id,n=t.length,s=0;s<n;s++)if(t[s].recommendation_on===o){if(t[s].id===i)return a;a++}return 0})),Lyte.Component.registerHelper("getTimePredicate",(function(e){return null==e?"zia.on":"before"===e.typeTrigger?I18n.getMsg("before"):I18n.getMsg("crm.label.general.small.after")})),Lyte.Component.registerHelper("getUserImage",(function(e){return store.peekRecord("user",e).image_link})),Lyte.Component.registerHelper("getAppName",(function(){return Crm.appName})),Lyte.Component.registerHelper("getSplittedValue",(function(e,t){return e.split(t)})),Lyte.Component.registerHelper("getArrayValue",(function(e,t){return e[t]})),Lyte.Component.registerHelper("formatAttachmentSize",(function(e){return EmailComposeUtil.formatAttachmentSize(e)})),Lyte.Component.registerHelper("formatISODate",(function(e){var t=Utils.ISO8601toDateObject(e);return new CrmDate(t).getDateTimeInUserPattern()})),Lyte.Component.registerHelper("getPageFirstRecordIndex",(function(e){return 10*((e=Number(e))-1)+1})),Lyte.Component.registerHelper("getPageLastRecordIndex",(function(e,t){return 10*((e=Number(e))-1)+t})),Lyte.Component.registerHelper("formatAttachmentSize",(function(e){return EmailComposeUtil.formatAttachmentSize(e)})),Lyte.Component.registerHelper("isCpqDashboardVisible",(function(){return Crm.userDetails.permissions.Crm_Implied_View_CPQ_Quotes_dashboard&&moduleRecordMapping.Dashboards&&moduleRecordMapping.Dashboards.visible&&moduleRecordMapping.Dashboards.viewable})),Lyte.Component.registerHelper("toUpperCase",(function(e){if(e)return e.toUpperCase()})),Lyte.Component.registerHelper("getCallIconClass",(function(e,t){var a="headervalue_Calls_ico mR10";if("Inbound"===e)return"call-incoming";if("Missed"===e)return"call-missed";if("Outbound"===e)switch(t){case"Scheduled":a="call-scheduled";break;case"Overdue":a="call-overdue";break;case"Cancelled":a="call-cancelled";break;default:a="call-outgoing"}return a})),Lyte.Component.registerHelper("getFirstValueOfJson",(function(e){return e[Object.keys(e)[0]]})),Lyte.Component.registerHelper("getSingleUserModMap",(function(e){return moduleRecordMapping[e]?moduleRecordMapping[e].singular_label:null})),Lyte.Component.registerHelper("uiTypeTemplate",(function(e){return null==e.displayValue&&null==e.defaultvalue?"":$(Handlebars.templates.uiTypeTemplate(e)).text()})),Lyte.Component.registerHelper("hasCallSupportedModules",(function(e){return-1!==["Leads","Contacts","Accounts","PhoneNumbers"].indexOf(e)})),Lyte.Component.registerHelper("whichPBService",(function(){return window.ZPB&&ZPB.clickToDial.isEnabled()?"ZPB":Crm.userDetails.TELEPHONY_ENABLED?"CRM_TELEPHONY":void 0})),Lyte.Component.registerHelper("getLabelForCallPopupOptions",(function(e){var t="";switch(e){case"add_lead":t=I18n.getMsg("crm.label.convert.create.new.module",Utils.getCustomisedSingularLabel("Leads"));break;case"add_contact":t=I18n.getMsg("crm.label.convert.create.new.module",Utils.getCustomisedSingularLabel("Contacts"));break;case"associate_lead":t=I18n.getMsg("crm.tpi.ctiapi.associate.new.module",Utils.getCustomisedSingularLabel("Leads"));break;case"associate_contact":t=I18n.getMsg("crm.tpi.ctiapi.associate.new.module",Utils.getCustomisedSingularLabel("Contacts"));break;case"add_call_details":t=I18n.getMsg("Add Call Details")}return t})),Lyte.Component.registerHelper("checkAndLoadZPBRecordingDep",(function(e){return!(!e||1!=e.length||!e[0].includes("phonebridge/recording/"))&&(CTIAPI.zpbRecDetails.required=!0,CTIAPI.loadRecording(),!0)})),Lyte.Component.registerHelper("getElementByIndex",(function(e,t){return e&&e.length>t?e[t]:null})),Lyte.Component.registerHelper("isPhoneNoNewView",(function(){return Crm.userDetails.isPhoneNoNewView})),Lyte.Component.register("crm-menu",{_template:'<template tag-name="crm-menu" class="newMenuTable" use-strict="false"> <div class="crmMenuLeft fL"> <template is="if" value="{{expHandlers(expHandlers(clientPortalName,\'===\',&quot;&quot;),\'||\',expHandlers(clientPortalName,\'!\'))}}"><template case="true"> <div class="tcell vam pL20 pR10 crmLogoCont"> <link-to lt-prop-route="crm.tab.module.begin" lt-prop-dp="[&quot;Home&quot;]" data-zcqa="crmLogo_HomeTab"> <img src="{{crmLogoUrl.Logo_url_white}}" alt="logo" class="mT4 {{if(crmLogoUrl.heightRestriction,\'crmLogoImg\',\'crmLogoImgTopbar\')}}"> </link-to> </div> <template is="if" value="{{expHandlers(showTabGroup,\'&amp;&amp;\',loadTabGroup)}}"><template case="true"> <crm-tab-group></crm-tab-group> </template></template></template><template case="false"><template is="if" value="{{expHandlers(companyName,\'!==\',&quot;&quot;)}}"><template case="true"> <div class="" style="width:45px;display:table-cell"></div> <div class="whiteBg" style="width:45px;display:table-cell;padding:8px 5px 8px 5px;vertical-align: middle"> <img id="clientOrgLogo" class="customPortallogo" height="45" src="{{companyLogo}}" title="{{companyName}}" style="max-width: 100px; max-height:33px;" alt="{{companyName}}"> </div> <div class="" style="width:45px;display:table-cell"></div> </template></template></template></template> </div> <div class="crmMenuRight fR {{if(expHandlers(issandboxacc,\'||\',isZohoOneuser),\'\',\'mT4 mR20\')}} {{if(issandboxacc,\'mT4\',\'\')}} newTopbandTheme"> <template is="if" value="{{expHandlers(expHandlers(clientPortalName,\'===\',&quot;&quot;),\'||\',expHandlers(clientPortalName,\'!\'))}}"><template case="true"><template is="if" value="{{issandboxacc}}"><template case="true"> <img class="crmSandboxLabel" src="{{getCrmImageUrl(\'sandbox-label_cef77cd_.png\')}}" alt="sandbox"> </template></template> <template is="if" value="{{showEdition}}"><template case="true"> <div class="lyteItem currentEditionInfo" id="currentEditionInfo" style="display: {{if(showSearchInput,\'none\',\'\')}}"> <div class="crmMenuEditionSty pR pR20 alignRight"> <template is="if" value="{{isfreeedition}}"><template case="true"> <span class="f13 crmMenuEditionTxt txtEllipsis dB aligncenter"> {{editionName}} </span> </template><template case="false"> <span class="f13 crmMenuEditionTxt txtEllipsis dB"> {{unescape(getI18n("crm.edition.label.trial",editionName))}} </span> </template></template> <template is="if" value="{{expHandlers(expHandlers(onlineStoreAvlbl,\'==\',&quot;true&quot;),\'&amp;&amp;\',expHandlers(issandboxacc,\'!\'))}}"><template case="true"> <div class="aligncenter"> <span id="manageSubscriptionUrlTab" class="editionUpgrade uppercase f12 crm-font-bold cP" rel="noopener" data-zcqa="subscription" onclick="{{action(\'manageSubscriptionUrl\')}}">{{getI18n(\'crm.store.upgrade\')}}</span> </div> </template></template> </div> </div> </template></template> <div class="lyteMenuSettings pR"> <a class="dIB lyteItem" id="topbandSearchIcon" data-zcqa="searchTpBnd" onclick="{{action(\'showSearchInput\',true)}}" style="{{if(showSearchInput,\'display:none\')}}"> <crmutil-icon icon-name="search" icon-class="zcicn-search-topband iconWhite"></crmutil-icon> </a> <template is="if" value="{{and(expHandlers(issandboxacc,\'!\'),or(ntcEnabledUser,feedsEnabled))}}"><template case="true"> <div class="lyteItem cP pR" id="feeds_notification_container" onclick="sE(event); crmNTCGlobal.renderGlobalNotification();"> <span data-zcqa="feeds_notificationTpBnd"> <crmutil-icon icon-name="notify" icon-class="zcicn-notify-topband iconWhite vat"></crmutil-icon> </span> <span id="feeds_notification" class="lyteMenuNotificationCount" style="display: none"></span> </div> </template></template> <crm-create-menu class="lyteItem"></crm-create-menu> <a class="lyteItem" data-zcqa="calendarTpBand" id="sCalenDar" onclick="{{action(\'showCalendar\')}}"> <span> <crmutil-icon icon-name="calendar" icon-class="zcicn-celendar-topband iconWhite"></crmutil-icon> </span> </a> <template is="if" value="{{showMailMagnet}}"><template case="true"> <div id="rmnIconDiv" class="lyteItem pR"> <span data-zcqa="MailMagnet_showRecentMails" onclick="showRecentMails(event);"><crmutil-icon icon-name="mail" icon-class="zcicn-mail-topband iconWhite"></crmutil-icon></span> <template is="if" value="{{newMailCount}}"><template case="true"> <span class="updateImg" align="center" id="newMailCount">{{newMailCount}}</span> </template><template case="false"> <span class="updateImg dN" align="center" id="newMailCount"></span> </template></template> <input type="hidden" name="unreadMailIds" id="unreadMailIds"> </div> </template></template> <template is="if" value="{{expHandlers(issandboxacc,\'!\')}}"><template case="true"> <link-to lt-prop-id="tab_marketplace" data-zcqa="tab_marketplace" class="lyteItem" lt-prop-route="crm.settings.section.extensions.all-extensions"> <span> <crmutil-icon icon-name="marketplace" icon-class="zcicn-marketplace iconWhite vat"></crmutil-icon> </span> </link-to> </template></template> <link-to lt-prop-id="tab_Setup" data-zcqa="tab_Setup" class="lyteItem mR5" lt-prop-class=" lyteTabSettingIconM sel" lt-prop-route="crm.settings.index"> <crmutil-icon icon-name="settings" icon-class="zcicn-settings-topband iconWhite vat"></crmutil-icon> </link-to> <template is="if" value="{{showProfilePic}}"><template case="true"> <crm-profile-menu class="crmProfileMenu mL10" show-chat-non-admin="{{showChatNonAdmin}}"></crm-profile-menu> </template><template case="false"> <div id="dropclk" class="dIB cP mR5" data-zcqa="profilePicture"> <img class="dIB prfImg vat mT2 nobdr" src="{{getCrmImageUrl(\'nophoto_80ea3af_.png\')}}"> </div> </template></template> </div> <template is="if" value="{{expHandlers(expHandlers(issandboxacc,\'!\'),\'&amp;&amp;\',expHandlers(isZohoOneuser,\'!\'))}}"><template case="true"> <div class="dIB vam crmZappsHamburger" id="crmZappsHamburger"></div> </template></template> <template is="if" value="{{isZohoOneuser}}"><template case="true"> <div id="crmZohoOneLauncher" class="pR dN"></div> </template></template> </template><template case="false"> <div class="lyteMenuSettings"> <div class="lyteItem"> <a href="javascript:;" style="color: #ffffff;" data-zcqa="signOut" onclick="javascript:logoutCall(\'{{clientPortalLogoutUrl}}\');Crm.trackSpotLightAction(\'Sign Out\');" class="f13">{{getI18n("custmr.prtl.usr.logout")}}</a> </div> <template is="if" value="{{showProfilePic}}"><template case="true"> <crm-profile-menu class="crmProfileMenu"></crm-profile-menu> </template><template case="false"> <div id="dropclk" class="dIB cP mR5" data-zcqa="profilePicture"> <img class="dIB prfImg vat mT2 nobdr" src="{{getCrmImageUrl(\'nophoto_80ea3af_.png\')}}"> </div> </template></template> </div> </template></template> </div> <template is="if" value="{{showSearchInput}}"><template case="true"> <div class="searchTopbandOpen pA"> <form name="searchForm" class="dIB searchTopbandForm mR0 pR" onsubmit="ajaxGSearch(\'gsearchTextBox\');return false;"> <div> <input placeholder="{{getI18n(\'crm.globalsearch.search.title\')}}" class="topbandSearchInpt" maxlength="250" id="gsearchTextBox" data-zcqa="gsearchTextBox" name="searchword" onclick="checkOldGSearchResults(this);"> <input type="hidden" name="searchCategory" id="searchCategory" value="AllEntities"> <input type="hidden" class="pL5" name="sModule" value="AllEntities"> <div class="adSearchCloses" onclick="{{action(\'stopEvent\')}}"> <span data-zcqa="adSearchCloseBtn" onclick="{{action(&quot;showSearchInput&quot;,false)}}" class="fL cP"> <crmutil-icon icon-name="close-9" icon-class=" zcicn9 vat"></crmutil-icon> </span> </div> <span class="searchLoadingIcon"><img src="{{imgStaticPath()}}/gsearchspinner_a698405_.gif"></span> <span id="topbandSearchIcon" class="icon-search-menu" data-zcqa="searchTpBnd" onclick="{{action(&quot;showSearchInput&quot;,true)}}"> <crmutil-icon icon-name="search" icon-class="zcicn-search-topband color555"></crmutil-icon> </span> </div> </form> </div> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[3,1]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[2]},{type:"if",position:[2],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["'display: '",{type:"helper",value:{name:"if",args:["showSearchInput","'none'","''"]}}]}}}},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]}]},false:{dynamicNodes:[{type:"text",position:[1,1]}]}},default:{}},{type:"attr",position:[1,1,3]},{type:"if",position:[1,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[4,1],attr:{style:{name:"style",helperInfo:{name:"if",args:["showSearchInput","'display:none'"]}}}},{type:"componentDynamic",position:[4,1,1]},{type:"attr",position:[4,3]},{type:"if",position:[4,3],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1,1,1]}]}},default:{}},{type:"componentDynamic",position:[4,5]},{type:"attr",position:[4,7]},{type:"componentDynamic",position:[4,7,1,1]},{type:"attr",position:[4,9]},{type:"if",position:[4,9],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1,1,0]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]},false:{dynamicNodes:[]}},default:{}}]}},default:{}},{type:"attr",position:[4,11]},{type:"if",position:[4,11],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1,1,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[4,13,1]},{type:"componentDynamic",position:[4,13]},{type:"attr",position:[4,15]},{type:"if",position:[4,15],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1,1]}]}},default:{}},{type:"attr",position:[6]},{type:"if",position:[6],cases:{true:{dynamicNodes:[]}},default:{}},{type:"attr",position:[8]},{type:"if",position:[8],cases:{true:{dynamicNodes:[]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"text",position:[1,1,1,0]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1,1]}]}},default:{}}]}},default:{}},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1,1]},{type:"attr",position:[1,1,1,7]},{type:"attr",position:[1,1,1,7,1]},{type:"componentDynamic",position:[1,1,1,7,1,1]},{type:"attr",position:[1,1,1,9,0]},{type:"attr",position:[1,1,1,11]},{type:"componentDynamic",position:[1,1,1,11,1]}]}},default:{}}],_observedAttributes:["isfreeedition","editionName","ntcEnabledUser","clientPortalName","companyName","companyLogo","searchInputValue","showTabGroup","loadTabGroup","showEdition","selected","showSearchInput","showProfilePic","onlineStoreAvlbl","feedsEnabled","isdevelopment","issandboxacc","showMailMagnet","newMailCount","clientPortalLogoutUrl","showChatNonAdmin","zappsHamburgerResponse","isZohoOneuser","crmNamespace","crmLogoUrl"],init:function(){},didConnect:function(){if(!this.getData("issandboxacc")&&!this.getData("clientPortalName")&&!this.getData("isZohoOneuser")){var e=document.domain,t="https://"+e.replace(e.match(/([^.]*)/)[0],"mail")+"/biz/getHamburgerMenu.do?version=stable",a=this;$L.ajax({url:t,type:"GET",xhrFields:{withCredentials:!0},success:function(e){a.zappsHamburgerMenuCallback(e)}})}this.getData("issandboxacc")&&$(".crmMenuEditionSty").addClass("crmMenuEditionSandboxSty")},data:function(){return{isfreeedition:Lyte.attr("boolean",{default:!1}),editionName:Lyte.attr("string",{default:""}),ntcEnabledUser:Lyte.attr("boolean",{default:!1}),clientPortalName:Lyte.attr("string",{default:""}),companyName:Lyte.attr("string",{default:""}),companyLogo:Lyte.attr("string",{default:""}),searchInputValue:Lyte.attr("string",{default:""}),showTabGroup:Lyte.attr("boolean",{default:RebrandLinkUtil.getProperty("TABGROUP")&&featuresAvailable.Tab_Groups}),loadTabGroup:Lyte.attr("boolean",{default:!1}),showEdition:Lyte.attr("boolean",{default:""}),selected:Lyte.attr("object",{default:{}}),showSearchInput:Lyte.attr("boolean",{default:!1}),showProfilePic:Lyte.attr("boolean",{default:!1}),onlineStoreAvlbl:Lyte.attr("string",{default:""}),feedsEnabled:Lyte.attr("boolean",{default:!1}),isdevelopment:Lyte.attr("boolean",{default:!1}),issandboxacc:Lyte.attr("boolean",{default:!1}),showMailMagnet:Lyte.attr("boolean",{default:!1}),newMailCount:Lyte.attr("string",{default:""}),clientPortalLogoutUrl:Lyte.attr("string",{default:""}),showChatNonAdmin:Lyte.attr("boolean",{default:!0}),zappsHamburgerResponse:Lyte.attr("object",{default:{}}),isZohoOneuser:Lyte.attr("boolean",{default:!1}),crmNamespace:Lyte.attr("string",{default:app.crmNamespace}),crmLogoUrl:Lyte.attr("object",{default:{heightRestriction:!0}})}},actions:{showCalendar:function(e){renderingUtils.stopEvent(e),document.getElementById("leftPanelCalendarP").ltProp({show:!0,wrapperClass:"popCal crmTopMenuCalender"}),hideMenu(e)},showSearchInput:function(e){if(event&&(event.cancelBubble=!0,event.stopPropagation&&event.stopPropagation()),e){var t=$L("#mainMenuTabDiv").offset().top,a=$(".lyteMenuSettings"),o=a.offset(),i=a.width();this.setData("showSearchInput",!0);var n=o.left,s=$(".searchTopbandOpen .topbandSearchInpt").width(),r=$(".primarySearchList"),l=$(".searchTopbandOpen"),p=l.height(),c=($L("#mainMenuTabDiv").height()-p)/2,m=t+c+p+1;if(n=Crm.userDetails.RTL_ENABLED?n+i-30:n-s-30,0===r.length){var d="<div class='primarySearchList' style='left:"+n+"px;top:"+m+"px;'><div id='searchResultUlWrap'></div><div onclick='openZohoSearchPage' class='pT10 pL15 pR15 alignright'><a class='openZohoSearchLink f13' onmousedown='openZohoSearchPage(event)' href='javascript:;'>"+I18n.getMsg("crm.title.gsearch.search.across.mini")+"<crmutil-icon icon-name='expand-sm' icon-class='zcicn14 blueIcon mT3 mL5 vat'></crmutil-icon></a></div></div>";$("body").append(d)}else r.css({left:n,top:m}).show();l.css({top:c+"px",left:n+"px"}),Crm.userDetails.ISPAID_USER&&($("#gsearchTextBox").autocomplete({position:{my:"right top",at:"right bottom"},source:function(e,t){callGSearchForAC("gsearchTextBox",t)},minLength:1,delay:200,select:function(){return!1},search:function(e){$L("crm-menu")[0].component.setData("searchInputValue",e.target.value)},appendTo:"#searchResultUlWrap",open:function(){var e=$(this),t=e.offset().top+e.outerHeight()+1,a=e.offset().left;$(".searchLoadingIcon").hide(),e.removeClass("ui-corner-all").addClass("ui-corner-top"),e.autocomplete("widget").css({"z-index":"15",width:250}).addClass("globalSearchList globalSearchSmall"),$(".primarySearchList").css({top:t,display:"block",left:a})},close:function(){$(this).removeClass("ui-corner-top").addClass("ui-corner-all"),$(".primarySearchList").hide()}}).data("ui-autocomplete")._renderItem=function(e,t){return renderGSearchACUI(e,t),$()}),$("#gsearchTextBox").select().focus()}else{var u=$("#gsearchTextBox");void 0!==u.data("ui-autocomplete")&&(u.autocomplete("destroy"),u.removeData("autocomplete")),$(".primarySearchList").hide(),this.setData("showSearchInput",!1),$(".searchLoadingIcon").hide()}$("#gsearchTextBox").val("")},manageSubscriptionUrl:function(){Crm.client_tracking("Upgrade Option Click - Menu Bar"),Crm.trackSpotLightAction("Subscription Accessed",{Place:"Trial Remaining Msg"}),networkUtils.openUrl(Crm.userDetails.manageSubscriptionUrl,"_blank")}},allZohoAppOnShow:function(){var e,t;e=$L(".crmZappsHamburger")[0].getBoundingClientRect(),t=e.top+e.height+10+"px",document.querySelector("#tabLayer").style.position="static",$("body").css("overflow","hidden"),setTimeout((function(){$L(".zHAppMask .zHApps").css("top",t)}),0)},allZohoAppOnRemove:function(){document.querySelector("#tabLayer").style.position="relative",$("body").css("overflow","auto")},zappsHamburgerMenuCallback:function(e){this.setData("zappsHamburgerResponse",e);var t,a=csrfToken,o=csrfParamName,i=document.querySelector("#crmZappsHamburger"),n=document.querySelector("#tabLayer"),s=e[1];t=Object.assign(s,{publicPath:s.publicPath,zohoHomeDomain:s.zohoHomeDomain,zIconParent:i,hamburgerMenuParent:n,suite:!1,allApps:!0,arrow:"topRight",isOneZohoBundle:!1,zOneJS:s.zOneJS,direction:"ltr",zOneConfig:{icon:{},csrfName:o,getCsrfValue:function(){return a}},onShow:this.allZohoAppOnShow,onRemove:this.allZohoAppOnRemove}),Crm.userDetails.RTL_ENABLED&&(t.arrow="topLeft",t.left="0px",t.direction="rtl"),this.appendFunc(t),window.zmwpHMConfig=t},appendFunc:function(e){var t=document.createElement("script");t.setAttribute("src",e.initialJS),t.setAttribute("charset","utf-8");var a=document.querySelector("#mainMenuTabDiv");a&&a.appendChild(t)}},{mixins:["crm-stop-event"]}),Lyte.Component.register("crux-form-component",{_template:'<template tag-name="crux-form-component"> <lyte-yield yield-name="cruxFormComponent" class="cruxFormComponent"></lyte-yield> </template>',_dynamicNodes:[{type:"insertYield",position:[1]}],_observedAttributes:["widthData"],data:function(){return{widthData:Lyte.attr("array",{default:[]})}},didConnect:function(){this.updateFormLabelWidth()},createSpanElement:function(){var e=$L("<span id='dummyLabelSpan' class='dummyLyteLabelSpan f15 vH'>");return $L("body").append(e[0]),e},removeSpanElement:function(e){e[0].remove()},updateFormLabelWidth:function(){var e=this.$node;if(!!!e.closest("crux-parent-form-component")){var t=$L(e).find(".crmFormComponentRow, .cruxFormComponentRow");this.setData({widthData:[]});var a=this.getData("widthData"),o=this.createSpanElement();if(0===a.length&&t.each((function(e,t){var i=$L(t).find(".lyteLabel, .cxElementLabel");if(0!==i.length){var n=0;i.find(".cxInfoIcon").length>0&&(n=20);var s=i.html();o.html(s);var r=Math.ceil(o.outerWidth())+1+n;a[a.length]=r,this.setData("widthData",a)}})),a.length>0){var i=Math.max.apply(null,a);i>200&&(i=200),$(t).find(">.lyteLabel,>.cxElementLabel").css({width:i+"px"});var n=i+380;$L(e).css({minWidth:n+"px",display:"block"})}this.removeSpanElement(o)}}}),Lyte.Component.register("crux-parent-form-component",{_template:'<template tag-name="crux-parent-form-component"> <lyte-yield yield-name="cruxParentFormComponent"></lyte-yield> </template>',_dynamicNodes:[{type:"insertYield",position:[1]}],_observedAttributes:["widthData"],data:function(){return{widthData:Lyte.attr("array",{default:[]})}},didConnect:function(){var e=this.$node,t=$L(e).find(".crmFormComponentRow, .cruxFormComponentRow");this.setData({widthData:[]});var a=this.getData("widthData"),o=$L("<span id='dummyLabelSpan' class='f15 vH dummyLyteLabelSpan'>");if($L("body").append(o[0]),t.each((function(e,t){var i=$L(t).find(".lyteLabel, .cxElementLabel");if(0!==i.length){var n=0;i.find(".cxInfoIcon").length>0&&(n=20);var s=i.html();o.html(s);var r=Math.ceil(o.outerWidth())+1+n;a[a.length]=r,this.setData("widthData",a)}})),a.length>0){var i=Math.max.apply(null,a);i>200&&(i=200),$(t).find(">.lyteLabel,>.cxElementLabel").css({width:i+"px"});var n=i+380;$L(e).css({minWidth:n+"px",display:"block"})}o[0].remove()},updateFormLabelWidth:function(){var e=this.$node,t=$L(e).find(".crmFormComponentRow, .cruxFormComponentRow"),a=this.$node.getData("widthData");if(a.length>0){var o=Math.max.apply(null,a);o>200&&(o=200),$(t).find(">.lyteLabel,>.cxElementLabel").css({width:o+"px"});var i=o+380;$L(e).css({minWidth:i+"px",display:"block"})}}}),Lyte.Component.register("crm-begin-page",{_template:'<template tag-name="crm-begin-page"> <div id="zCpqTabLayer" data-zcqa="zcpqtab"> <template is="if" value="{{enableCpqTab}}"><template case="true"><crm-cpqconfiguratorslist cpq-tabs="{{cpqobj.cpqTabs}}" cpq-sub-tabs="{{cpqobj.cpqSubTabs}}" cpq-tab-selected="{{cpqobj.cpqTabSelected}}"></crm-cpqconfiguratorslist></template></template> </div> <template is="if" value="{{showBlankState}}"><template case="true"><template is="if" value="{{contains(&quot;[\'Leads\',\'Potentials\',\'Activities\',\'Accounts\',\'Contacts\',\'Tasks\',\'Events\',\'Calls\']&quot;,module)}}"><template case="true"><template is="if" value="{{expHandlers(module,\'===\',&quot;Leads&quot;)}}"><template case="true"> <crm-leads-blankpage showsocial="{{module_info.show_social}}" showwebform="{{module_info.show_webform}}" showemailparser="{{module_info.show_emailparser}}" trialaction="{{trialAction}}" showvisitor="{{module_info.show_visitor}}" showgooglesync="{{module_info.show_googlesync}}" is-description-available="{{isDescriptionAvailable}}" module-description="{{module_info.description}}"></crm-leads-blankpage> </template></template><template is="if" value="{{expHandlers(module,\'===\',&quot;Contacts&quot;)}}"><template case="true"> <crm-contacts-blankpage showphonebridge="{{module_info.show_phonebridge}}" showsalessignals="{{module_info.show_salessignals}}" showemailsettings="{{module_info.show_emailsettings}}" trialaction="{{trialAction}}" showsocial="{{module_info.show_social}}" is-description-available="{{isDescriptionAvailable}}" module-description="{{module_info.description}}"></crm-contacts-blankpage> </template></template><template is="if" value="{{expHandlers(module,\'===\',&quot;Potentials&quot;)}}"><template case="true"> <crm-deals-blankpage deallayoutid="{{deallayoutId}}" showdashboard="{{module_info.show_dashboard}}" trialaction="{{trialAction}}" is-description-available="{{isDescriptionAvailable}}" module-description="{{module_info.description}}"></crm-deals-blankpage> </template></template><template is="if" value="{{expHandlers(module,\'===\',&quot;Accounts&quot;)}}"><template case="true"> <crm-accounts-blankpage is-description-available="{{isDescriptionAvailable}}" module-description="{{module_info.description}}"></crm-accounts-blankpage> </template></template><template is="if" value="{{expHandlers(module,\'===\',&quot;Activities&quot;)}}"><template case="true"> <crm-activities-blankpage showphonebridge="{{module_info.show_phonebridge}}" trialaction="{{trialAction}}" is-description-available="{{isDescriptionAvailable}}" module-description="{{module_info.description}}"></crm-activities-blankpage> </template></template><template is="if" value="{{expHandlers(expHandlers(expHandlers(module,\'===\',&quot;Tasks&quot;),\'||\',expHandlers(module,\'===\',&quot;Events&quot;)),\'||\',expHandlers(module,\'===\',&quot;Calls&quot;))}}"><template case="true"> <crm-activitysub-blankpage showphonebridge="{{module_info.show_phonebridge}}" trialaction="{{trialAction}}" module="{{module}}"></crm-activitysub-blankpage> </template></template></template></template><template is="if" value="{{expHandlers(contains(&quot;[\'Leads\',\'Potentials\',\'Activities\',\'Accounts\',\'Contacts\',\'Tasks\',\'Events\',\'Calls\']&quot;,module),\'!\')}}"><template case="true"> <div id="san" class="{{if(ifEquals(module_info.show_zf_panel,0),,\'pR oH\')}}"> <lyte-table lt-prop-yield="true" class="beginPage leadbox {{if(ifEquals(module,\'Services\'),\'servicesBox\',\'\')}} {{if(ifEquals(module,\'Appointments\'),\'appointmentsBox\',\'\')}} {{if(ifEquals(module_info.show_zf_panel,0),,\'zfGetStartInit\')}}" lt-prop-width="{{tableWidth}}" style="margin-top:20px"> <template is="registerYield" yield-name="yield"> <lyte-table-structure style="{{tableCss}};align:center;margin:auto;border-spacing:30px"> <lyte-tbody> <lyte-tr style="background:inherit"> <template is="if" value="{{expHandlers(isDescriptionAvailable,\'!\')}}"><template case="true"> <template is="if" value="{{expHandlers(isZBCustomModule,\'||\',isZSCustomModule)}}"><template case="true"> <lyte-td style="width:150;vertical-align:top;"> <div class="{{zbModuleName}}-bigTitleIcon"></div> </lyte-td> </template><template case="false"><template is="if" value="{{expHandlers(module,\'!==\',&quot;Visits&quot;)}}"><template case="true"> <lyte-td style="width:{{tdWidth}};vertical-align:top;text-align:{{textAlign}};padding:0"> <div class="{{if(indexOf(module,\'CustomModule\',\'==\',0),\'CustomModule\',if(indexOf(module,\'LinkingModule\',\'==\',0),\'CustomModule\',module))}}-bigTitleIcon"></div> </lyte-td> </template></template></template></template></template></template> <lyte-td style="vertical-align:top;padding:0;color:black;"> <template is="if" value="{{expHandlers(module,\'===\',&quot;Visits&quot;)}}"><template case="true"> <div class="blankStateTitle">{{getI18n("crm.livedesk.blank.state.heading")}}</div> <div class="blankStateContent"> <p class="f16 mT20 mB0 fs">{{getI18n("Instructions")}}:</p> <div class="content mT15 mB30 hl-box"> <ul class="crm-font-regular"> <li class="pL0"> {{getI18n("crm.livedesk.blank.state.instr1")}}<br><br>{{getI18n("crm.livedesk.blank.state.instr4")}}</li> </ul> </div> <template is="if" value="{{expHandlers(screenName,\'===\',&quot;allportals&quot;)}}"><template case="true"> <div class="mB30"> <div class="f14 fL alignleft mT10">{{getI18n("crm.tracking.account.choose")}}</div> <div class="dIB cP mL20"> <lyte-dropdown id="pListDD" lt-prop-yield="true" on-option-selected="{{method(\'portalChange\')}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box> <lyte-drop-body> <template is="forIn" object="{{screenVsPortalJson}}" value="value" key="key"> <lyte-drop-item data-value="{{key}}"> {{value}} </lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </div> <div class="cB"></div> </div> </template></template> <div id="embedDiv"> <template is="if" value="{{expHandlers(screenName,\'!==\',&quot;allportals&quot;)}}"><template case="true"><template is="if" value="{{expHandlers(noEmbedActive,\'!\')}}"><template case="true"> <div class="liveDeskBox pR"> <p class="f16 pB15">{{getI18n(\'crm.livedesk.website.code\')}}</p> <textarea readonly="" onclick="{{action(\'select\',this)}}" class="vt-textarea" style="resize:none; height:120px; padding:15px;">{{script}}</textarea> </div> <div id="visitconfigbutton" class="mT30 aligncenter"> <input type="button" class="tgreenbtn cP" onclick="{{action(\'showSendToWebM\',encodeJS(getUserDetail(\'DISPLAY_NAME\')))}}" value="{{getI18n(\'crm.livedesk.send.to.webmaster\')}}"> <div class="clearB"></div> </div> </template><template case="false"> <div class="liveDeskBox pR"> <div class="vt-textarea f13 h30 bodyText pT30 pB30 aligncenter graytxt"> <span class="ld-warning dIB vat"></span> <span class="mL2 dIB vab">{{getI18n("crm.tracking.embed.active.none")}}</span> <a href="{{zlivedeskEmbedURL}}" class="dIB vab" target="_blank" rel="noreferrer noopener">{{getI18n("crm.tracking.salesiq.embed.href")}}</a> </div> </div> </template></template></template></template> </div> </div> </template><template case="false"><template is="if" value="{{expHandlers(isDescriptionAvailable,\'!\')}}"><template case="true"><template is="if" value="{{indexOf(module,&quot;CustomModule&quot;,\'==\',0)}}"><template case="true"> <div class="blankStateTitle">{{I18nDynamicKey("crm.blank.state.CustomModule","",module_info.plural_label)}}</div> <div class="blankStateContent">{{I18nDynamicKey("crm.blank.state.intro.CustomModule","",module_info.plural_label)}}</div> </template><template case="false"> <template is="if" value="{{indexOf(module,&quot;LinkingModule&quot;,&quot;==&quot;,0)}}"><template case="true"> <div class="blankStateTitle">{{I18nDynamicKey("crm.blank.state.LinkingModule","",module_info.plural_label)}}</div> <div class="blankStateContent">{{I18nDynamicKey("crm.blank.state.intro.LinkingModule","",module_info.plural_label,module_info.module_mlabel,module_info.module_nlabel)}}</div> </template><template case="false"><template is="if" value="{{expHandlers(contains(&quot;[\'Leads\',\'Potentials\',\'Activities\',\'Accounts\',\'Contacts\']&quot;,module),\'!\')}}"><template case="true"> <div class="blankStateTitle">{{I18nDynamicKey("crm.blank.state.",module,module_info.plural_label)}}</div> <div class="blankStateContent">{{I18nDynamicKey("crm.blank.state.intro.",module,module_info.plural_label)}}</div> </template></template></template></template></template></template></template><template case="false"> <div class="blankStateContent">{{module_info.description}}</div> </template></template></template></template><template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(module,\'===\',&quot;Activities&quot;),\'||\',expHandlers(module,\'===\',&quot;Tasks&quot;)),\'||\',expHandlers(module,\'===\',&quot;Calls&quot;)),\'||\',expHandlers(module,\'===\',&quot;Events&quot;))}}"><template case="true"><template is="if" value="{{expHandlers(expHandlers(expHandlers(module,\'===\',&quot;Tasks&quot;),\'||\',expHandlers(module,\'===\',&quot;Calls&quot;)),\'||\',expHandlers(module,\'===\',&quot;Events&quot;))}}"><template case="true"><template is="if" value="{{expHandlers(module,\'==\',&quot;Tasks&quot;)}}"><template case="true"> <link-to data-zcqa="createbtn_Task" lt-prop-route="crm.tab.module.create" lt-prop-dp="[&quot;Activities&quot;]" lt-prop-qp="{&quot;sub_module&quot;:&quot;Tasks&quot;}"><button class="onboardBtn floatL btn_medium">{{getI18n("crm.module.create","Task")}}</button></link-to> </template></template><template is="if" value="{{expHandlers(module,\'==\',&quot;Events&quot;)}}"><template case="true"> <input data-zcqa="createbtn_Event" class="onboardBtn floatL btn_medium" type="button" value="{{getI18n(\'crm.module.create\',\'Event\')}}" onclick="{{action(\'createEventOrAppointments\')}}"> </template></template><template is="if" value="{{expHandlers(module,\'==\',&quot;Calls&quot;)}}"><template case="true"> <input data-zcqa="createbtn_Call" class="onboardBtn floatL btn_medium" type="button" onclick="{{action(\'createCall\')}}" value="{{getI18n(\'crm.module.create\',\'Call\')}}"> </template></template></template><template case="false"> <link-to data-zcqa="createbtn_Task" lt-prop-route="crm.tab.module.create" lt-prop-dp="[&quot;Activities&quot;]" lt-prop-qp="{&quot;sub_module&quot;:&quot;Tasks&quot;}"><button class="onboardBtn floatL btn_medium">{{getI18n("crm.module.create","Task")}}</button></link-to> <input data-zcqa="createbtn_Event" class="onboardBtn floatL btn_medium" type="button" value="{{getI18n(\'crm.module.create\',\'Event\')}}" onclick="{{action(\'createEventOrAppointments\')}}"> <input data-zcqa="createbtn_Call" class="onboardBtn floatL btn_medium" type="button" onclick="{{action(\'createCall\')}}" value="{{getI18n(\'crm.module.create\',\'Call\')}}"> </template></template></template><template case="false"><template is="if" value="{{expHandlers(module,\'!==\',&quot;Visits&quot;)}}"><template case="true"><template is="if" value="{{expHandlers(module,\'===\',&quot;Appointments&quot;)}}"><template case="true"> <lyte-button data-zcqa="createbtn_Appointment" class="mR8" lt-prop-appearance="primary" onclick="{{action(\'createEventOrAppointments\',\'Appointments\')}}"> <template is="registerYield" yield-name="text"> {{I18nDynamicKey("blankpage.onboarding.createan.module","",module_info.singular_label)}} </template> </lyte-button> </template><template case="false"><template is="if" value="{{expHandlers(module,\'===\',&quot;Services&quot;)}}"><template case="true"> <link-to data-zcqa="createbtn" lt-prop-custom="" lt-prop-route="crm.tab.module.create" lt-prop-dp="[&quot;Services&quot;]"> <lyte-button class="mR8" lt-prop-appearance="primary"> <template is="registerYield" yield-name="text"> {{I18nDynamicKey("blankpage.onboarding.createa.module","",module_info.singular_label)}} </template> </lyte-button> </link-to> </template><template case="false"><template is="if" value="{{expHandlers(module,\'===\',&quot;Invoices&quot;)}}"><template case="true"> <link-to data-zcqa="createbtn" lt-prop-custom="" lt-prop-route="crm.tab.module.create" lt-prop-dp="[&quot;{{module}}&quot;]"><button class="greenbtn btn_big floatL primarybtn mR0 mL0">{{I18nDynamicKey("blankpage.onboarding.createan.module","",module_info.singular_label)}}</button></link-to> </template><template case="false"><template is="if" value="{{expHandlers(contains(&quot;[\'Leads\',\'Potentials\',\'Accounts\',\'Contacts\']&quot;,module),\'!\')}}"><template case="true"> <link-to data-zcqa="createbtn" lt-prop-custom="" lt-prop-route="crm.tab.module.create" lt-prop-dp="[&quot;{{module}}&quot;]"><button class="greenbtn btn_big floatL primarybtn mL0 mR0">{{I18nDynamicKey("blankpage.onboarding.createa.module","",module_info.singular_label)}}</button></link-to> </template></template></template></template></template></template></template></template></template></template></template></template><template is="if" value="{{expHandlers(contains(&quot;[\'Visits\',\'Activities\',\'Invoices\',\'SalesOrders\',\'PurchaseOrders\',\'Quotes\',\'Forecasts\',\'Services\',\'Appointments\',\'Tasks\',\'Calls\',\'Events\']&quot;,module),\'!\')}}"><template case="true"><template is="if" value="{{expHandlers(expHandlers(isZBCustomModule,\'!\'),\'&amp;&amp;\',expHandlers(isZSCustomModule,\'!\'))}}"><template case="true"><template is="if" value="{{expHandlers(contains(&quot;[\'Leads\',\'Potentials\',\'Accounts\',\'Contacts\']&quot;,module),\'!\')}}"><template case="true"> <span class="floatL vh">{{getI18n("crm.label.lowercase.or")}}</span> <link-to data-zcqa="importbtn" lt-prop-route="crm.settings.import" lt-prop-qp="{&quot;module&quot;:&quot;{{module}}&quot;,&quot;step&quot;:&quot;1&quot;}" lt-prop-custom=""><button class="btn_big floatL primarybtn mL0">{{I18nDynamicKey("crm.module.import","",module_info.plural_label)}}</button></link-to> </template></template></template></template></template></template> <p class="clearB"></p> <br> </lyte-td> </lyte-tr> <lyte-tr> <lyte-td style="colspan:2"> <div class="blankstatebottomshadow"></div> </lyte-td> </lyte-tr> </lyte-tbody> </lyte-table-structure> </template> </lyte-table> <template is="if" value="{{expHandlers(module_info.show_zf_panel,\'!=\',0)}}"><template case="true"> <span class="zfGetStartArrow pA dN" onclick="{{action(\'finance_panel\',1)}}"> <span class="svgIcons ico-arrow-right-small zfGetStartArrowIcon pA"></span> </span> <div id="zfGetStarted" class="zfGetStarted"> <div class="zfGetStartInnerDiv"> <div class="zfSuiteTitle"> <div class="mB30 f17 crm-font-bold">{{getI18n("crm.zfinance.panel.head")}}</div> <span class="zfSuiteImg dIB mB20"></span> <p class="mB20 lh22 color_3 f13">{{getI18n("crm.zfinance.panel.body")}}</p> <div class="zfServiceList clearFix color_3 f13"> <div class="fL w50per alignleft"> <span class="dB mB15">- {{getI18n("crm.zohoBooks",rebrandProperty(\'Brand\'))}}</span> <span class="dB">- {{getI18n("crm.product.expense",rebrandProperty(\'Brand\'))}}</span> </div> <div class="fL w50per alignleft"> <span class="dB mB15">- {{getI18n("crm.product.subscriptions",rebrandProperty(\'Brand\'))}}</span> <span class="dB">- {{getI18n("crm.product.inventory",rebrandProperty(\'Brand\'))}}</span> </div> </div> <link-to lt-prop-route="crm.settings.section.extensions.zoho-extensions.finance-suite"><lyte-button lt-prop-appearance="success" class="mB20" lt-prop-class="getStartBtn"><template is="registerYield" yield-name="text">{{getI18n("crm.zfinance.panel.getstarted")}}</template> </lyte-button> </link-to> <div onclick="{{action(\'finance_panel\',0)}}"> <span class="color_9 f11 cP bbd1">{{getI18n("crm.zfinance.panel.dnshowagain")}}</span> </div> </div> </div> </div> <div class="cB"></div> </template></template> </div> <div class="formMain newPopup w600 p30 pt20" id="sendWebmaster" style="position: absolute; left: 50%; top: 50%; margin: -200px 0px 0px -250px; z-index: 120; display: none;"> </div> </template></template></template><template case="false"> <div class="otherCVblankScreen" id="otherCVblankScreen"> {{I18nDynamicKey("crm.module.cvempty.message","",module_info.plural_label)}} <div class="{{if(ifEquals(module,\'Leads\'),\'f13\')}} mt5" align="center"> <link-to lt-prop-route="crm.tab.module.actions.approvals" lt-prop-dp="[&quot;{{module}}&quot;]" lt-prop-class="link"> {{I18nDynamicKey("crm.label.approve.web.lead","",module_info.plural_label)}} </link-to> &nbsp;{{I18nDynamicKey("crm.label.approve.web.lead.available","",module_info.plural_label)}} </div> <br> </div> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"componentDynamic",position:[0]}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[2]},{type:"if",position:[2],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[4]},{type:"if",position:[4],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"registerYield",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["''","tableCss","';align:center;margin:auto;border-spacing:30px'"]}}}},{type:"attr",position:[1,1,1,1]},{type:"if",position:[1,1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["'width:'","tdWidth","';vertical-align:top;text-align:'","textAlign","';padding:0'"]}}}},{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[1,1,1,3,1]},{type:"if",position:[1,1,1,3,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"text",position:[3,1,0]},{type:"text",position:[3,3,1,1,1]},{type:"text",position:[3,3,1,1,5]},{type:"attr",position:[3,5]},{type:"if",position:[3,5],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]},{type:"attr",position:[1,3,1]},{type:"registerYield",position:[1,3,1,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"forIn",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,3,1]}]}},default:{}},{type:"attr",position:[3,7,1]},{type:"if",position:[3,7,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]},{type:"attr",position:[1,3]},{type:"text",position:[1,3,0]},{type:"attr",position:[3,1]}]},false:{dynamicNodes:[{type:"text",position:[1,1,3,0]},{type:"attr",position:[1,1,5]},{type:"text",position:[1,1,5,0]}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"text",position:[3,0]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"text",position:[3,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"text",position:[3,0]}]}},default:{}}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,1,1,3,2]},{type:"if",position:[1,1,1,3,2],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,0,0]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[2]},{type:"if",position:[2],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"text",position:[1,0,0]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"attr",position:[5]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"registerYield",position:[1,1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0,0]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0,0]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[1,1,1,3,3]},{type:"if",position:[1,1,1,3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"attr",position:[3]},{type:"text",position:[3,0,0]},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1,1,1,3]},{type:"componentDynamic",position:[1,1,1]},{type:"componentDynamic",position:[1,1,3,1]},{type:"componentDynamic",position:[1,1,3]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[3,1,1,1,0]},{type:"text",position:[3,1,1,5,0]},{type:"text",position:[3,1,1,7,1,1,1]},{type:"text",position:[3,1,1,7,1,3,1]},{type:"text",position:[3,1,1,7,3,1,1]},{type:"text",position:[3,1,1,7,3,3,1]},{type:"registerYield",position:[3,1,1,9,0,0],dynamicNodes:[{type:"text",position:[0]}]},{type:"componentDynamic",position:[3,1,1,9,0]},{type:"componentDynamic",position:[3,1,1,9]},{type:"attr",position:[3,1,1,11]},{type:"text",position:[3,1,1,11,1,0]}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"text",position:[1,1]},{type:"attr",position:[1,3]},{type:"attr",position:[1,3,1]},{type:"text",position:[1,3,1,1]},{type:"componentDynamic",position:[1,3,1]},{type:"text",position:[1,3,3]}]}},default:{}}],_observedAttributes:["tableCss","module","tdWidth","textAlign"],data:function(){return{tableCss:Lyte.attr("string",{default:"min-width:700px;max-width:1200px;margin-top:30px;"}),module:Lyte.attr("string"),tdWidth:Lyte.attr("string",{default:"150px"}),textAlign:Lyte.attr("string",{default:""})}},init:function(){var e=this.getData("module");-1!=["Leads","Potentials","Activities","Accounts","Contacts"].indexOf(e)&&(this.setData("tableWidth","width:84rem;"),this.setData("tableCss","min-width:1280px;"),this.setData("tdWidth","450px"),this.setData("textAlign","-webkit-right"))},didConnect:function(){var e=this.getData("module_info").show_zf_panel;if(0!=e){var t=$("#tabLayer"),a=t.offset().top+t.outerHeight()+28;$("#san").css("height","calc(100vh - "+a+"px"),2==e?setTimeout((function(){$(".zfGetStartInit").addClass("zfGetStartDiv"),$("#san").addClass("zfGetStartActive"),setTimeout((function(){$(".zfGetStartArrow").removeClass("dN"),$(".zfSuiteTitle").addClass("zfSuiteTitleActive")}),200)}),600):($(".zfGetStartArrow").removeClass("dN"),$(".zfSuiteTitle").addClass("zfSuiteTitleActive"))}},actions:{finance_panel:function(e){var t=$(".zfGetStartArrow"),a=$("#san");if(t.addClass("dN"),Crm.userDetails.CUSTOMIZE_INFO.show_zf_panel&&Crm.userDetails.CUSTOMIZE_INFO.show_zf_panel==e||updateCustomization("show_zf_panel",e),a.hasClass("zfGetStartActive")){var o=$(".zfGetStartInit");o.removeClass("zfGetStartDiv"),a.removeClass("zfGetStartActive"),0==e&&setTimeout((function(){$("#san").removeClass("pR oH").removeAttr("style"),o.removeClass("zfGetStartInit"),$("#zfGetStarted").add(t).remove()}),200)}else a.addClass("zfGetStartActive"),$(".zfGetStartInit").addClass("zfGetStartDiv");setTimeout((function(){t.removeClass("dN")}),200)},select:function(e){e.select()},showSendToWebM:function(e){VisitsConfig.showSendToWebM(e,!0,this.getData("zlivedeskURL")+"/"+this.getData("screenName")+"/float.ls?embedname="+this.getData("embedName"),this.getData("partnerName"),this.getData("widgetcode"))},createEventOrAppointments:function(e){Events.globalCreate(event,"listview",e)},createCall:function(){qCreateCall.createQCForm(event,"listview")}},methods:{portalChange:function(){VisitsConfig.getEmbedCode()}}}),Lyte.Component.register("crm-tab",{_template:'<template tag-name="crm-tab"> <div class="lyteItemDummyHolder"> <template is="for" items="{{dummy}}" item="singleval" indexval="index"> <div class="lyteItemDummy" id="dummy_{{singleval.module_name}}"> <span>{{singleval.plural_label}}</span> </div> </template> </div> <div class="lyteMenuItems"> <template is="for" items="{{visibleTabs}}" item="singleval" indexval="index"> <div class="{{if(isModuleSelected(selected.module_name,singleval.module_name),\'lyteMenuActive\',\'\')}} lyteItem" data-value="{{singleval.module_name}}" data-zcqa="tab_{{singleval.module_name}}" onclick="{{action(\'tabSelected\',this,singleval)}}"> <a href="{{concat(crmNamespace,\'/tab/\',singleval.module_name)}}">{{singleval.plural_label}}</a> </div> </template> <template is="if" value="{{expHandlers(expHandlers(hiddenTabs.length,\'>\',0),\'||\',expHandlers(cvPermission,\'==\',&quot;true&quot;))}}"><template case="true"> <lyte-dropdown id="crmTopMenuLyteDrop" class="crmTopMenuLyteDrop" on-before-show="{{method(\'setDropdownHeight\')}}" on-show="{{method(\'dropdownOpen\')}}" on-hide="{{method(\'dropdownClose\')}}" on-option-selected="{{method(\'dropdownoptionselected\')}}" lt-prop-freeze="false"> <template is="registerYield" yield-name="yield"> <lyte-drop-button> <template is="if" value="{{expHandlers(showOrchestrationNameChangePopup,\'&amp;&amp;\',isOrchestrationModuleAvailable)}}"><template case="true"> <span tabindex="0" class="lyteDot svgIconsImg orchPopDotTopband" data-zcqa="tab_menu_more"> <span class="orchPopDot3"> <span class="orchPopDot2"> <span class="orchPopDot1"></span> </span> </span> </span> </template><template case="false"> <span tabindex="0" data-zcqa="tab_menu_more"> <crmutil-icon icon-name="more-hr" icon-class="zcicn-more-hr vam mL15 mR15 pB13 pT15 iconWhite"></crmutil-icon> </span> </template></template> </lyte-drop-button> <lyte-drop-box class="crmMenuDropdown"> <template is="if" value="{{expHandlers(hiddenTabs.length,\'>\',0)}}"><template case="true"> <lyte-drop-header> <div class="MenuSearch crmTabSearchMenu" id="search_wrapper" onclick="{{action(\'viewSrch\')}}" onhover="{{action(\'removeDropdownSelection\',event)}}"> <lyte-search id="tabMenuSearch" lt-prop-id="srch" class="crmTabSearch dB" lt-prop-class="crmTabSearchInp" lt-prop-placeholder="Search Modules" lt-prop-autofocus="autofocus" lt-prop-query-selector="{&quot;scope&quot;:&quot;.tab_more_body&quot;,&quot;search&quot;:&quot;.tab_more_body_item&quot;}" on-search="{{method(\'onSearch\')}}"></lyte-search> </div> </lyte-drop-header> </template></template> <lyte-drop-body class="tab_more_body p0 noTickLyteDropdown" onmouseleave="{{action(\'removeDropdownSelection\',event)}}"> <div class="pR noresultstyle" style="display:none;" id="menuNoResult">{{getI18n(\'crm.no.module.found\')}}</div> <template is="for" items="{{hiddenTabs}}" item="singleval" indexval="index"> <lyte-drop-item class="tab_more_body_item" data-value="{{singleval.module_name}}" data-zcqa="tab_{{singleval.module_name}}" onmouseover="{{action(\'removeFocusAndSelection\',event)}}"> <a href="{{concat(crmNamespace,\'/tab/\',singleval.module_name)}}"><span>{{singleval.plural_label}}</span></a> </lyte-drop-item> </template> </lyte-drop-body> <template is="if" value="{{ifEquals(cvPermission,&quot;true&quot;)}}"><template case="true"> <lyte-drop-footer class="crmTabCreateBtn" onhover="{{action(\'removeDropdownSelection\',event)}}"> <div class="createModLink alignleft"> <span class="ico-plus-small-blue3 svgIcons dIB vam" style="transform: scale(0.8)"></span> <link-to lt-prop-route="crm.settings.section.modules.index-modules.create-module" lt-prop-class="dIB vam" onclick="{{action(\'toggleMenu\')}}">{{getI18n(\'crm.label.create.new.module\')}}</link-to> </div> <template is="if" value="{{promotabs}}"><template case="true"> <div class="featurePromoList alignleft"> <span class="promHead">{{getI18n("crm.zapps.suggested")}}</span> <ul class="ul_reset"> <template is="for" items="{{promotabs}}" item="promotab" indexval="index"> <li class="promLi dropFooterList" id="promo_{{promotab.serviceName}}"> <link-to lt-prop-route="{{promotab.lytePath}}" lt-prop-dp="{{promotab.lyteDP}}" lt-prop-td="{&quot;from&quot;:&quot;promotab&quot;}" onclick="{{action(\'toggleMenu\',promotab.serviceName)}}" lt-prop-class="promLink dIB vam"> {{promotab.label}} <span class="promoTxtRed dIB vat mT3">{{promotab.note}}</span> </link-to> <span class="fR cP promoCloseHover op05_hover1" onclick="{{action(\'removePromoTab\',event,promotab.serviceName)}}"> <span class="dIB ico-close-small2 svgIcons promoClose"></span> </span> <div class="cB"></div> </li> </template> </ul> </div> </template></template> </lyte-drop-footer> </template></template> </lyte-drop-box> </template> </lyte-dropdown> </template></template> </div> <lyte-event-listener event-name="windowResize" on-fire="{{action(\'handleResize\')}}"> </lyte-event-listener></template>',_dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]}]},{type:"attr",position:[3,1]},{type:"for",position:[3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]}]},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"componentDynamic",position:[1,1]}]}},default:{}},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"componentDynamic",position:[1,1,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3,3]},{type:"text",position:[3,3,1,0]},{type:"attr",position:[3,3,3]},{type:"for",position:[3,3,3],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,0,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3,3]},{type:"attr",position:[3,5]},{type:"if",position:[3,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,3]},{type:"text",position:[1,1,3,0]},{type:"componentDynamic",position:[1,1,3]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]},{type:"attr",position:[1,3,1]},{type:"for",position:[1,3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,1]},{type:"text",position:[1,1,3,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]}]}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[5]},{type:"componentDynamic",position:[5]}],_observedAttributes:["cvPermission","searchValue","dummy","visibleTabs","hiddenTabs","tabModules","promotabs","selected","dontObs","crmNamespace","winWidth","previouslySelectedModule","isOrchestrationModuleAvailable","isOrchLabelHovered"],data:function(){return{cvPermission:Lyte.attr("string",{default:cvPermission}),searchValue:Lyte.attr("string",{default:""}),dummy:Lyte.attr("array",{default:[]}),visibleTabs:Lyte.attr("array",{default:[]}),hiddenTabs:Lyte.attr("array",{default:[]}),tabModules:Lyte.attr("array",{default:[]}),promotabs:Lyte.attr("array",{default:Crm.PROMO_TABS}),selected:Lyte.attr("object",{default:{}}),dontObs:Lyte.attr("boolean",{default:!1}),crmNamespace:Lyte.attr("string",{default:app.crmNamespace}),winWidth:Lyte.attr("number",{default:app.windowRect.innerWidth}),previouslySelectedModule:Lyte.attr("string",{default:""}),isOrchestrationModuleAvailable:Lyte.attr("boolean",{default:!1}),isOrchLabelHovered:Lyte.attr("boolean",{default:!1})}},skip_in_tab:["Entity Scores"],init:function(){this.setData("isOrchestrationModuleAvailable",Lyte.registeredMixins.orchestration.fetchOrchestrationChildModules().length>0)},didConnect:function(){this.constructDummy(),$(".dummy_Topband").hide();var e=this.getData("selected")?this.getData("selected").module_name:void 0;this.setData("previouslySelectedModule",e),!Crm.isHeadless&&"undefined"!=typeof CrmPlusImpl&&CrmPlusImpl.isLoadedInCrmplus()&&e&&crmplusImplTriggerActions("selectEntity",["module",e])},itemsObserver:function(e){"change"==e.type&&"selected"==e.item&&0==Object.keys(e.newValue).length&&0==Object.keys(e.oldValue).length||this.getData("dontObs")||this.constructDummy()}.observes("tabModules.[]","selected"),constructDummy:function(){var e=moduleRecordMapping.Emails,t=!1,a=moduleRecordMapping.ZohoCPQ,o=!1;e&&e.visible&&crmTab.isZMailEnabled&&(t=!0),a&&a.visible&&(o=!0),Lyte.arrayUtils(this.getData("dummy"),"removeAt",0,this.getData("dummy").length);for(var i=this.getData("tabModules").length,n=0;n<i;n++){var s=this.getData("tabModules")[n];if(this.skip_in_tab.indexOf(s.module_name)<0&&"JobSheets"!==s.module_name&&(s.visible&&"Emails"!==s.module_name||"Emails"==s.module_name&&t&&s.visible)&&!(2&s.visibility||4&s.visibility)&&(!o||void 0===s.parent_module||s.parent_module.module_name!==a.module_name)){var r={};r.plural_label=s.plural_label,r.module_name=s.module_name,r.visible=s.visible,r.visibility=s.visibility,r.sequence_number=s.sequence_number,Lyte.arrayUtils(this.getData("dummy"),"push",r)}}$L.fastdom.measure(function(){this.resizeMenu()}.bind(this))},resizeMenu:function(){if("none"!==document.querySelector("#mainMenuTabDiv").style.display&&"none"!==document.querySelector("#tabLayer").style.display){var e=document.querySelector(".lyteMenuSettings").offsetWidth+400,t=document.querySelector(".crmLogoCont"),a=document.querySelector("crm-tab-group"),o=t?t.offsetWidth:0,i=a?a.offsetWidth:0,n=app.windowRect.innerWidth-(e>600?e:600)-o-i;n=n<0?0:n;for(var s=this.$node.querySelectorAll(".lyteItemDummy"),r=0,l=0,p=s.length;l<p&&!((r+=s[l].getBoundingClientRect().width)>n);l++);var c=this.getData("dummy").slice(0);c.length;if(this.getData("visibleTabs").length>0&&Lyte.arrayUtils(this.getData("visibleTabs"),"removeAt",0,this.getData("visibleTabs").length),this.getData("hiddenTabs").length>0&&Lyte.arrayUtils(this.getData("hiddenTabs"),"removeAt",0,this.getData("hiddenTabs").length),"undefined"!=typeof crmTab){if(crmTab.requiredPromoTabs&&l-Object.keys(crmTab.requiredPromoTabs).length>=0)for(var m in crmTab.requiredPromoTabs)n+=80,l++,c.splice(l-1,0,this.methods.getPromoTabDummyData(m,crmTab.requiredPromoTabs[m]));crmTab.needPseudoProjectsTab&&0!=l&&(n+=80,l++,c.splice(l-1,crmTab.requiredPromoTabs.length,this.methods.getDummyTabData()))}var d=c.slice(l||1),u=d.length;Lyte.arrayUtils(this.getData("visibleTabs"),"concat",c.slice(0,l||1)),Lyte.arrayUtils(this.getData("hiddenTabs"),"concat",d.sortBy("sequence_number"));var y=this.getData("selected");this.getData("hiddenTabs").length>0&&(n+=51),0==l&&(n+=$L("#dummy_"+y.module_name).width()),this.$node.style.maxWidth=n+"px";var f=$L(".searchSetupInput");if(f.length>0&&f.find("lyte-dropdown")[0].resetPosition(),y&&y.module_name)for(var g=0;g<u;g++)if(d[g].module_name===y.module_name){this.setSelectedFromDropdown(y.module_name);break}}},setSelectedFromDropdown:function(e){for(var t,a,o=this.getData("tabModules"),i=o.length,n=this.getData("visibleTabs"),s=n[n.length-1].module_name,r=0;r<i;r++)if(o[r].module_name==e){t=r;break}for(var l=0;l<i;l++)if(s==o[l].module_name){a=l;break}if("undefined"!=typeof crmTab&&crmTab.requiredPromoTabs&&null==a){var p=Object.keys(crmTab.requiredPromoTabs).length;a=n.length-p-1}if("undefined"!=typeof crmTab&&crmTab.needPseudoProjectsTab&&n.length>=2&&(a=n.length-2),this.setData("selected",o[t]),this.setData("dontObs",!0),t!=a){var c=Lyte.arrayUtils(this.getData("tabModules"),"removeAt",t,1);this.setData("dontObs",!1),Lyte.arrayUtils(this.getData("tabModules"),"insertAt",a,c)}},changeMenu:function(e){if(-1!==["Home","Leads","Contacts","Accounts","Potentials","Activities","Reports","Dashboards","Projects","Marketplace"].indexOf(e)){var t=e;"Projects"==t&&"undefined"!=typeof crmTab&&crmTab.needPseudoProjectsTab&&(t="Projects Marketing Tab"),this.getData("previouslySelectedModule")!==e&&(Crm.trackSpotLightAction(t+" Tab Clicked"),Crm.client_tracking(t+" Tab Clicked"),this.setData("previouslySelectedModule",e))}var a=Lyte.Router.getRouteInstance();if("SalesInbox"==e&&crmTab.isMailClientActive)"undefined"!=typeof CrmPlusImpl&&CrmPlusImpl.isLoadedInCrmplus()?networkUtils.openUrl(RebrandLinkUtil.getProperty("URLPROTOCOL")+"://"+RebrandLinkUtil.getProperty("CRMURL")+Crm.getOrgSpecificURL(Urls.Salesinbox)):window.location=window.location.origin+Crm.getOrgSpecificURL(Urls.Salesinbox);else if("SalesInbox"==e&&crmTab.isMailClientActive)"undefined"!=typeof CrmPlusImpl&&CrmPlusImpl.isLoadedInCrmplus()?networkUtils.openUrl(RebrandLinkUtil.getProperty("URLPROTOCOL")+"://"+RebrandLinkUtil.getProperty("CRMURL")+Crm.getOrgSpecificURL(Urls.Salesinbox)):window.location=crmHistory.locationOrigin+Crm.getOrgSpecificURL(Urls.Salesinbox);else{if("ABM"==e){if(!crmTab.isABMAvailable)return void renderingUtils.displayPermissionDenied(null,null,I18n.getMsg("crm.security.error"));var o="/crm/"+crmPortal+"/abm/connect";return crmTab.isABMConfigured&&(o="/crm/"+crmPortal+"/abm/home"),void("undefined"!=typeof CrmPlusImpl&&CrmPlusImpl.isLoadedInCrmplus()?networkUtils.openUrl(RebrandLinkUtil.getProperty("URLPROTOCOL")+"://"+RebrandLinkUtil.getProperty("CRMURL")+o):window.location=window.location.origin+o)}var i,n,s=moduleRecordMapping[e],r={dynamicParams:[],queryParams:{}};if("Orchestration"==e)if(moduleRecordMapping[e].orchestrationModule)i=moduleRecordMapping[e].orchestrationModule,s=moduleRecordMapping[i];else{var l=Lyte.registeredMixins.orchestration.fetchOrchestrationChildModules().sort((function(e,t){return e.sequence_number-t.sequence_number}));l.length>0&&(i=l[0].module_name,s=moduleRecordMapping[i],moduleRecordMapping[e].orchestrationModule=i)}if("Approvals"==e)r.route="crm.tab.approvals.index";else if("Voice Of Customer"===e)r.route="crm.tab.voc.analytics";else if("Projects"==e)r.route="crm.tab.projects";else if("Dashboards"==e)r.route="crm.tab.dashboards.index";else if("Messages"===e){r.route="crm.tab.messages.custom-view.list";var p=Lyte.Router.getRouteInstance().transition.info;p.route===r.route?(r.queryParams=p.queryParams,r.dynamicParams=p.dynamicParams):r.route="crm.tab.messages"}else if("Google AdWords"==e)r.route="crm.tab.google-adwords";else if("Forecasts"==e)r.route=newForecastsEnabled?"crm.tab.newForecasts.index":"crm.tab.forecasts.index",newForecastsEnabled&&(r.data={reloadAll:!0});else if("Reports"==e)r.route=newReportsEnabled?"crm.tab.newReports.index":"crm.tab.reports.index",newReportsEnabled&&s.query_params&&(r.route="crm.tab.newReports.index.list",r.queryParams=s.query_params,s.query_params.category&&"scheduled"===s.query_params.category&&(r.route="crm.tab.newReports.index.schedule.list",r.queryParams={status:"active"}));else if("Approvals"==e)r.route="crm.tab.approvals.index";else if(s&&"Home"==s.api_name)r.route="crm.tab.module.begin",r.dynamicParams.push(e);else if("Marketplace"==e)r.route="crm.tab.marketplace";else if(s&&s.custom_view&&s.custom_view.id&&"Home"!=s.api_name)if("Visits"==e&&"undefined"==typeof CrmTracking)r.route="crm.tab.module.index-module",r.dynamicParams.push(e);else{r=this.checkParamsAndTransition(s,i||e,crmTab.getFromCache(e));var c=app.prevTransition;c.route==r.route&&c.dynamicParams[1]!=s.custom_view.id&&(s.start_index=void 0),r.data={clearselectedIds:!0},Lyte.Router.getRouteInstance().transition.target.indexOf("crm.settings.section.custom-view")>-1&&store.model[s.id]&&store.unloadAll(s.id)}else r.route="crm.tab.module.index-module",r.dynamicParams.push(e);Crm.checkIfSameRoute(a.transition.info,r)?200!==a.transition.state&&308!==a.transition.state||(a.transition.target.indexOf("custom-view")>-1?(n=a.refresh({refreshTemplate:!0}),r.data?r.data.refreshTemplate=!0:r.data={refreshTemplate:!0},r.queryParams.page=1):n=a.refresh()):(s&&customViewObject&&customViewObject.module==s.module_name&&!customViewObject.isForecast&&(customViewObject.filter_id&&!r.queryParams.filter_id?r.queryParams.filter_id=customViewObject.filter_id:app.prevTransition.route&&-1===app.prevTransition.route.indexOf("settings")&&(customViewObject.filters&&!r.queryParams.filters&&(r.queryParams.filters=JSON.stringify(customViewObject.filters)),customViewObject.cross_filters&&!r.queryParams.cross_filters&&(r.queryParams.cross_filters=JSON.stringify(customViewObject.cross_filters))),r.queryParams.page=1),n=Lyte.Router.transitionTo(r)),r.data&&n&&(-1==crmConstants.cachedModules.indexOf(e)&&(r.data.reloadAll=!0),n.data=r.data,delete r.data)}},refreshTabGroup:function(){return new Promise((function(e){store.findAll("tab_group").then((function(t){document.getElementsByTagName("crm-tab-group")[0].setData("tabGroupsName",t);for(var a,o=t.length,i=0;i<o;i++)if(t[i].default){a=t[i].modules.sortBy("sequence_number");break}document.getElementsByTagName("crm-tab")[0].setData("tabModules",a),e()}))}))},methods:{onSearch:function(e){0==e.length?$L("#menuNoResult").show():$L("#menuNoResult").hide()},setDropdownHeight:function(){var e=$("#wmstoolbar").outerHeight();e=e||26;var t,a=$("#tabLayer");t=35*$(".featurePromoList .promLi,.promHead").length;var o=renderingUtils.windowHeight-(e+a.offset().top+a.outerHeight()+t+125),i=parseInt(o/30);$("lyte-drop-body.tab_more_body").css("max-height",30*i)},dropdownOpen:function(e,t){this.getData("hiddenTabs").length>0&&(this.setData("searchValue",""),setTimeout((function(){$L("#srch").focus()}),10));var a=$L(".orchDropItem",t.childComp);a[0]&&(a.addClass("orchPopOrigin"),Crm.userDetails.isOrchestrationNameChangePopupViewed||($L("span",a).addClass("orchPopDot"),$(".orchPopDot",a).append("<span class='orchPopDot3'><span class='orchPopDot2'><span class='orchPopDot1'></span></span></span>")),a[0].addEventListener("mouseenter",(function(){Crm.userDetails.isOrchestrationNameChangePopupViewed||$L("#orchRenameNotifyPopupTab")[0].ltProp("show",!0)})),a[0].addEventListener("mouseleave",function(){$L("#orchRenameNotifyPopupTab")[0].ltProp("show",!1),this.setData("isOrchLabelHovered",!0)}.bind(this)))},dropdownClose:function(e,t){var a=$L(".orchDropItem",t.childComp);if(a[0]&&(Crm.userDetails.isOrchestrationNameChangePopupViewed||$(".orchPopDot3",".orchPopDot").remove(),a.removeClass("orchPopOrigin"),$L("span",a).removeClass("orchPopDot"),this.getData("isOrchLabelHovered")&&!Crm.userDetails.isOrchestrationNameChangePopupViewed)){Crm.userDetails.isOrchestrationNameChangePopupViewed=!0,this.setData("isOrchLabelHovered",!1);var o=Crm.getCrmBasePath()+"/SetupAction.do?action=closeOrchestrationNameChangePopup",i={};i[csrfParamName]=csrfToken,(new crmRequestPool).doAjax(o,(function(e){"object"!=typeof e&&(e=JSON.parse(e))}),i)}},dropdownoptionselected:function(e,t){if(1==e.ctrlKey||1==e.metaKey||2==e.which)return!1;e.stopPropagation(),e.preventDefault(),this.setSelectedFromDropdown(t),this.changeMenu(t)},getDummyTabData:function(e){var t={};return"Marketplace"==e?(t={module_name:"Marketplace",visible:!0,visibility:1,route:"crm.tab.marketplace"}).plural_label=I18n.getMsg("crm.setup.label.extensions.marketplace"):t={plural_label:"Projects",module_name:"Projects",visible:!0,visibility:1,route:"crm.tab.projects"},t},getPromoTabDummyData:function(e,t){var a={visible:!0,visibility:1};a.plural_label=I18n.getMsg(e),a.module_name=e,a.route=t;var o=[e];return a.dp=o,a}},actions:{viewSrch:function(){viewSrch()},removeFocusAndSelection:function(e){$("#srch").blur(),$(".tab_more_body_item.lyteDropdownSelection").removeClass("lyteDropdownSelection");for(var t=e.target;"LYTE-DROP-ITEM"!==t.tagName&&"HTML"!==t.tagName;)t=t.parentElement;"HTML"!=t.tagName&&$(t).addClass("lyteDropdownSelection")},removeDropdownSelection:function(){$(".tab_more_body_item.lyteDropdownSelection").removeClass("lyteDropdownSelection")},toggleMenu:function(e){$("crm-tab").find("lyte-dropdown")[0].toggle(),e&&Crm.trackSpotLightAction("Promo tab click",{app:e})},tabSelected:function(e,t){if(1==event.ctrlKey||1==event.metaKey||2==event.which)return!1;var a=this.$node.querySelector(".lyteMenuActive");a&&a.classList.remove("lyteMenuActive"),e.classList.add("lyteMenuActive");var o=!1;this.getData("tabModules").forEach(function(e){e.module_name===t.module_name&&(o=!0,this.setData("selected",e))}.bind(this)),o||this.setData("selected",{}),event.preventDefault(),this.changeMenu(t.module_name)},removePromoTab:function(e,t){if(t){Crm.trackSpotLightAction("Promo tab remove",{app:t});var a=[],o=Crm.userDetails.CUSTOMIZE_INFO;o&&o.hide_promo&&(a=o.hide_promo),a.push(t),updateCustomization("hide_promo",JSON.stringify(a),(function(){var e=$(".featurePromoList");e.find("#promo_"+t).remove(),e.find(".promLi").length<1&&(Crm.PROMO_TABS=void 0,$(".createModLink").length<1&&$("tab_more_body_item").length<1?($(".crmMenuDropdown").remove(),crmTab.reloadTabMenu()):e.remove())}))}return!1},handleResize:function(){var e=this.getData("winWidth")-app.windowRect.innerWidth;if(this.setData("winWidth",app.windowRect.innerWidth),0!=e){var t=this.getData("tabModules").sortBy("sequence_number");this.setData("tabModules",t),this.resizeMenu()}}}},{mixins:["crm-menu-utils"]}),Lyte.Component.registerHelper("isModuleSelected",(function(e,t){return"Meetings"===e&&(e="Events"),"Deals"===e&&(e="Potentials"),e===t})),Lyte.Component.register("crm-tab-group",{_template:'<template tag-name="crm-tab-group"> <div id="showMenu" class="showHeaderMenu"> <lyte-dropdown data-zcqa="showHideTabGroupMenu" lt-prop-yield="true" lt-prop-tabindex="1" lt-prop-icon-class="dropdown" lt-prop-max-count="0" lt-prop-freeze="false" on-before-show="{{method(\'openTabGroup\')}}" on-option-selected="{{method(\'changeTabGroup\')}}" id="tabGroupDummy"> <template is="registerYield" yield-name="yield"> <lyte-drop-button class="colFFF"> <span>{{tabGroupsSelectedItemName}}</span> <lyte-icon class="dropdown"></lyte-icon> </lyte-drop-button> <lyte-drop-box class="crmBoxDropbox tabgroup_Dropbox"> <lyte-drop-header class="crm-font-semibold lytePosFix tabgroup_DropboxHead">{{getI18n("crm.label.tabGroup")}}</lyte-drop-header> <lyte-drop-body class="tabgroup_dropBody"> <template is="for" items="{{tabGroupsName}}" item="item" index="index"><template is="if" value="{{item.visible}}"><template case="true"> <lyte-drop-item data-value="{{item.id}}" id="tabgroup_{{item.id}}" data-zcqa="tabgroup_{{item.id}}"> {{item.name}} </lyte-drop-item> </template></template></template> </lyte-drop-body> <template is="if" value="{{expHandlers(expHandlers(showTabGroupManagement,\'&amp;&amp;\',checkPermission(&quot;Crm_Implied_Customize_Zoho_CRM&quot;)),\'&amp;&amp;\',expHandlers(isFreeEdition,\'===\',false))}}"><template case="true"> <lyte-drop-footer class="lyteTabHead"> <div data-zcqa="createNewTabGroup" class="dropFooterList alignleft" onclick="{{action(\'showPopup\',concat(getCrmBasePath(),\'/CustomizeTabGroup.do?action=createTabGroup&amp;isFrom=create\'))}}">{{getI18n("crm.button.new")}} {{getI18n("crm.tabGroup")}}</div> <div data-zcqa="manageTabGroup" class="dropFooterList alignleft" onclick="{{action(\'showPopup\',concat(getCrmBasePath(),\'/CustomizeTabGroup.do?action=tabGroupList&amp;isFrom=popup\'))}}">{{getI18n(\'crm.link.manage\')}} {{getI18n("crm.label.tabGroup")}}</div> </lyte-drop-footer> </template></template> </lyte-drop-box> </template> </lyte-dropdown> </div> </template>',_dynamicNodes:[{type:"attr",position:[1,1]},{type:"registerYield",position:[1,1,1],dynamicNodes:[{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,3]},{type:"componentDynamic",position:[1]},{type:"text",position:[3,1,0]},{type:"componentDynamic",position:[3,1]},{type:"attr",position:[3,3,1]},{type:"for",position:[3,3,1],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[3,3]},{type:"attr",position:[3,5]},{type:"if",position:[3,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"text",position:[1,1,2]},{type:"attr",position:[1,3]},{type:"text",position:[1,3,0]},{type:"text",position:[1,3,2]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[1,1]}],_observedAttributes:["tabGroupsName","isTabClicked","isFreeEdition","tabGroupsSelectedItem","tabGroupsSelectedItemName","showTabGroupManagement"],data:function(){return{tabGroupsName:Lyte.attr("array",{default:store.peekAll("tab_group")}),isTabClicked:Lyte.attr("boolean",{default:!1}),isFreeEdition:Lyte.attr("boolean",{default:!1}),tabGroupsSelectedItem:Lyte.attr("string",{default:""}),tabGroupsSelectedItemName:Lyte.attr("string",{default:""}),showTabGroupManagement:Lyte.attr("boolean",{default:!0})}},didConnect:function(){var e=store.peekAll("tab_group").filterBy({default:!0});this.setData("tabGroupsSelectedItemName",e[0].name),this.setData("tabGroupsSelectedItem",e[0].id)},actions:{showPopup:function(e){document.getElementById("tabGroupDummy").toggle(),mR(e,(function(e){if(-1!=e.toString().indexOf("TABGROUPLIMITEXCEED")){var t=e.split(":")[1];alert(I18n.getMsg("crm.tabgroup.length.exceeded",t))}else{$("#topBandPopup").html(e),$('[name=CustomizeTabGroupForm] [data-zcqa="btn_tab_cancel"]').attr("onclick","hideAnimatePopup('topBandPopup');"),showAnimatePopup("topBandPopup"),thirdPartyUtils.bindSelect2($(".newSelect").find("select")),setTimeout((function(){getObj("tabGroupName")&&getObj("tabGroupName").focus()}),500)}}))}},methods:{openTabGroup:function(e,t){this.setData("isTabClicked",!0),t.$node.setData("ltPropSelected",this.getData("tabGroupsSelectedItem"));var a=Crm.userDetails.LICENSE_TYPE;"N"!=a&&"L"!=a&&"F"!=a&&"X"!=a||this.setData("isFreeEdition",!0)},changeTabGroup:function(e,t){store.peekAll("tab_group").filterBy({default:!0})[0].$.set("default",!1);var a=store.peekRecord("tab_group",t);a.$.set("default",!0),this.setData("tabGroupsSelectedItemName",a.name),this.setData("tabGroupsSelectedItem",a.id);var o=store.peekRecord("user",Crm.userDetails.USER_ID);if(o.$.set("default_tab_group",t),"718534139"==Crm.userDetails.ZUID){var i=new Error(Crm.userDetails.ZUID+" user save triggered in TabGroup");murphy.error(i),o.$.save().then((function(){var e=new Error(Crm.userDetails.ZUID+" user save success in TabGroup");murphy.error(e)}),(function(){var e=new Error(Crm.userDetails.ZUID+" user save failed in TabGroup");murphy.error(e)}))}else o.$.save();document.getElementsByTagName("crm-tab")[0].setData("tabModules",a.modules.sortBy("sequence_number"))},resetTabGroupManagement:function(){this.setData("showTabGroupManagement",!1),this.setData("showTabGroupManagement",!0)}}}),Lyte.Component.register("crm-create-menu",{_template:'<template tag-name="crm-create-menu"> <span class="cP" id="createIcon" data-zcqa="createNewTpBnd"> <crmutil-icon icon-name="create" icon-class="zcicn-createModule-topband iconWhite"></crmutil-icon> </span> <lyte-menu lt-prop-yield="true" class="dN" lt-prop-callout="true" lt-prop-event="click" lt-prop-query="#createIcon" lt-prop-freeze="false" on-before-open="{{method(\'beforeShowSubMenu\')}}" on-before-close="{{method(\'beforeCloseMenu\')}}" on-open="{{method(\'showHideSubMenu\')}}" id="createNew" lt-prop-wrapper-class="crmMenuQuickLink"> <template is="registerYield" yield-name="yield"> <lyte-menu-body class="p0 crmCreateMenuBody"> <template is="for" items="{{modules}}" item="module" index="index"><template is="if" value="{{expHandlers(expHandlers(module.quick_create,\'&amp;&amp;\',expHandlers(expHandlers(module.module_name,\'!==\',&quot;Activities&quot;),\'&amp;&amp;\',expHandlers(module.module_name,\'!==\',&quot;JobSheets&quot;))),\'&amp;&amp;\',expHandlers(expHandlers(expHandlers(module.visibility,\'&amp;\',2),\'||\',expHandlers(module.visibility,\'&amp;\',4)),\'!\'))}}"><template case="true"> <lyte-menu-item data-value="{{module[\'singular_label\']}}"> <template is="if" value="{{expHandlers(expHandlers(&quot;Events&quot;,\'===\',module.module_name),\'||\',expHandlers(&quot;Calls&quot;,\'===\',module.module_name))}}"><template case="true"> <a id="submenu_{{module.module_name}}" data-zcqa="dash_submenu_{{module.module_name}}" href="javascript:void(0)" onclick="{{action(\'callOrEvent\',event,module)}}" class="lyteQuickLink"><span class="mR5">+</span> {{module[\'singular_label\']}} </a> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(module.module_name,\'===\',&quot;Tasks&quot;),\'&amp;&amp;\',isActivitySplitNotDone())}}"><template case="true"> <template is="if" value="{{getUserDetail(\'TaskPopup\')}}"><template case="true"> <span data-zcqa="dash_submenu_{{module.module_name}}" class="crmMenuQuickLinkTask" onclick="{{action(\'relTaskCreate\',this)}}"><span id="TaskPopup" class="mR5">+</span>{{module[\'singular_label\']}}</span> </template><template case="false"> <link-to lt-prop-refresh="" lt-prop-id="submenu_{{module.module_name}}" data-zcqa="dash_submenu_{{module.module_name}}" lt-prop-route="crm.tab.module.create" lt-prop-dp="[&quot;Activities&quot;]" lt-prop-td="{&quot;refreshPage&quot; : true}" lt-prop-qp="{&quot;sub_module&quot; :&quot;{{module.module_name}}&quot; }" class="lyteQuickLink"><span class="mR5">+</span> {{module[\'singular_label\']}} </link-to> </template></template></template><template case="false"><template is="if" value="{{expHandlers(module.module_name,\'===\',&quot;Appointments&quot;)}}"><template case="true"> <a href="javascript:void(0)" class="lyteQuickLink" data-zcqa="dash_submenu_{{module.module_name}}" onclick="{{action(\'appointmentsCall\')}}"><span class="mR5">+</span>{{module[\'singular_label\']}}</a> </template><template case="false"> <template is="if" value="{{expHandlers(expHandlers(module.module_name,\'===\',&quot;Tasks&quot;),\'&amp;&amp;\',getUserDetail(\'TaskPopup\'))}}"><template case="true"> <span data-zcqa="dash_submenu_{{module.module_name}}" class="crmMenuQuickLinkTask" onclick="{{action(\'relTaskCreate\',this)}}"><span id="TaskPopup" class="mR5">+</span>{{module[\'singular_label\']}}</span> </template><template case="false"> <link-to lt-prop-refresh="" lt-prop-id="submenu_{{module.module_name}}" data-zcqa="dash_submenu_{{module.module_name}}" lt-prop-route="crm.tab.module.create" lt-prop-dp="[&quot;{{module.module_name}}&quot;]" lt-prop-td="{&quot;refreshPage&quot; : true}" class="lyteQuickLink"><span class="mR5">+</span> {{module[\'singular_label\']}} </link-to> </template></template></template></template></template></template></template></template> </lyte-menu-item> </template></template></template><template is="if" value="{{expHandlers(zbmodule.length,\'>\',0)}}"><template case="true"> <h6 class="m0 cbCreateView pL10 f15 graytxt">{{getModuleLabel("Zoho Finance")}}</h6> <template is="for" items="{{zbmodule}}" item="module" index="index"> <lyte-menu-item data-value="{{module[\'singular_label\']}}"> <link-to lt-prop-refresh="" lt-prop-id="submenu_{{module.module_name}}" data-zcqa="dash_submenu_{{module.module_name}}" lt-prop-td="{&quot;refreshPage&quot; : true}" lt-prop-route="crm.tab.module.create" lt-prop-dp="[&quot;{{module.module_name}}&quot;]" lt-prop-qp="{&quot;sub_module&quot; :&quot;{{module.module_name}}&quot; }" class="lyteQuickLink"><span class="mR5">+</span> {{module[\'singular_label\']}} </link-to> </lyte-menu-item> </template></template></template><template is="if" value="{{expHandlers(zemodule.length,\'>\',0)}}"><template case="true"> <h6 class="m0 cbCreateView pL10 f15 graytxt">{{getModuleLabel("Zoho Expense")}}</h6> <template is="for" items="{{zemodule}}" item="module" index="index"> <lyte-menu-item data-value="{{module[\'singular_label\']}}"> <link-to lt-prop-refresh="" lt-prop-id="submenu_{{module.module_name}}" data-zcqa="dash_submenu_{{module.module_name}}" lt-prop-td="{&quot;refreshPage&quot; : true}" lt-prop-route="crm.tab.module.create" lt-prop-dp="[&quot;{{module.module_name}}&quot;]" lt-prop-qp="{&quot;sub_module&quot; :&quot;{{module.module_name}}&quot; }" class="lyteQuickLink"><span class="mR5">+</span> {{module[\'singular_label\']}} </link-to> </lyte-menu-item> </template></template></template> </lyte-menu-body> </template> </lyte-menu> </template>',_dynamicNodes:[{type:"componentDynamic",position:[1,1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,2]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,2]},{type:"componentDynamic",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,2]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"attr",position:[1,2]},{type:"if",position:[1,2],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"attr",position:[3]},{type:"for",position:[3],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,2]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"attr",position:[3]},{type:"for",position:[3],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,2]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]}]}},default:{}},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}],_observedAttributes:["modules","zemodule","zbmodule"],data:function(){return{modules:Lyte.attr("array",{default:[]}),zemodule:Lyte.attr("array",{default:[]}),zbmodule:Lyte.attr("array",{default:[]})}},init:function(){},methods:{beforeShowSubMenu:function(){if(Crm.userDetails.isStorageLimitReached)return Crm.showStorageExceedPopup(),!1;var e=store.peekRecord("user",Crm.userDetails.USER_ID).profile.id,t=store.peekAll("module"),a=[],o=[],i=[];function n(t){return t.id==e}for(var s=0;s<t.length;s++)t[s].profiles&&t[s].profiles.some(n)&&(crmTab.isZBCustomModule(t[s].api_name)?a.push(t[s]):crmTab.isZExpenseSubModule(t[s].api_name)?o.push(t[s]):i.push(t[s]));this.setData("zbmodule",a),this.setData("zemodule",o),this.setData("modules",i)},showHideSubMenu:function(){hideMenu(event);var e=arguments[0].component.menuBody.getBoundingClientRect().height,t=$("#wmstoolbar").outerHeight();e>=window.height-t&&(arguments[0].component.menuBody.style.height=e-t-10+"px"),Activities.RemainderHideOnly(),$("#conditionalFieldRightSection").length&&(Crm.userDetails.RTL_ENABLED?$("#conditionalFieldRightSection").css("left","-650px"):$("#conditionalFieldRightSection").css("right","-650px")),$("#validationRuleRightSection").length&&$("#validationRuleRightSection").hide(),event&&(event.cancelBubble=!0,event.stopPropagation&&event.stopPropagation())},beforeCloseMenu:function(){if(Crm.userDetails.LITE.IS_LITE_USER)return!window.event.target.classList.contains("callsDisabledItem")}},actions:{callOrEvent:function(e,t){"Events"===t.module_name?Events.globalCreate(e,"quickcreate"):qCreateCall.createQCForm(e,"quickcreate")},relTaskCreate:function(e){crmRelatedList.relTaskCreate(e)},appointmentsCall:function(){Events.globalCreate(event,"listview","Appointments")}},didConnect:function(){var e=$(window),t=$(".lyteMenuSettings #createNew");Crm.userDetails.RTL_ENABLED?($("#createsubmenu").css("left",t.offset().left-55),$("#createsubmenu .SocialArrow").css({left:"52px",right:"auto"})):($("#createsubmenu").css("right",e.width()+e.scrollLeft()-(t.offset().left+t.outerWidth())-16.5),$("#createsubmenu .SocialArrow").css({left:"auto",right:"15px"})),$("#createsubmenu .boxShadowMask").css("max-height",e.height()-($("#tabLayer").outerHeight()+20+$("#wmstoolbar").outerHeight())-70),$("#createsubmenu .boxShadowMask").addClass("oH pR"),getObj("createsubmenu").style.display="block",thirdPartyUtils.bindPerfectScroll("#createsubmenu .boxShadowMask",{wheelSpeed:1,wheelPropagation:!1,suppressScrollX:!1})}}),Lyte.Component.registerHelper("isActivitySplitNotDone",(function(){return!Crm.isActivitySplitDone})),Lyte.Component.register("crm-profile-menu",{_template:'<template tag-name="crm-profile-menu"> <div id="dropclk" class="dIB cP lyteItem pR" data-zcqa="profilePicture" onclick="{{action(\'openProfilePage\')}}"> <template is="if" value="{{showBlink}}"><template case="true"> <span class="upgradearrow"></span> </template></template> <template is="if" value="{{expHandlers(getUserDetail(\'CLIENT_ACCOUNT\'),\'!\')}}"><template case="true"> <template is="if" value="{{expHandlers(ifEquals(zuid,&quot;&quot;),\'!\')}}"><template case="true"> <img id="topdivuserphoto_{{getUserDetail(\'USER_ID\')}}" border="0" src="{{contactsPhotoURL}}/file?ID={{zuid}}&amp;fs=thumb" class="dIB prfImg vat"> </template><template case="false"> <img class="dIB prfImg vat mT2 nobdr" src="{{getCrmImageUrl(\'nophoto_80ea3af_.png\')}}"> </template></template> </template><template case="false"> <img id="topdivuserphoto_{{getUserDetail(\'USER_ID\')}}" border="0" src="{{clientImageSrcURL}}" class="dIB prfImg"> </template></template> <span id="acntIcn" class="acnt-dropIcon dNimp"></span> </div> <template is="if" value="{{isProfClicked}}"><template case="true"> <template is="if" value="{{getUserDetail(\'CLIENT_ACCOUNT\')}}"><template case="true"> <lyte-menu lt-prop-yield="true" lt-prop-id="profileMenuId" lt-prop-query-class="settinsDropDown" lt-prop-width="80px" lt-prop-event="click" lt-prop-query="#dropclk" on-before-open="{{method(\'showHideProfile\')}}" on-before-close="{{method(\'beforeCloseProfileMenu\')}}"> <template is="registerYield" yield-name="yield"> <lyte-menu-body class="topProfileMenu {{if(getUserDetail(\'CLIENT_ACCOUNT\'),\'noBdr\',\'\')}}"> <lyte-menu-item onclick="{{action(\'getClientInfo\')}}"> <lyte-menu-label>{{getI18n("crm.topmenu.setup")}}</lyte-menu-label> </lyte-menu-item> </lyte-menu-body> </template> </lyte-menu> </template></template> </template></template> <lyte-modal id="profilePagePop" lt-prop-width="401px" lt-prop-overlay-close="true" lt-prop-height="100%" lt-prop-allow-multiple="{{allowMultipleProp}}" lt-prop-max-height="100%" lt-prop-re-render-modal="true" lt-prop-transition="{&quot;animation&quot;:&quot;slideFromRight&quot;,&quot;duration&quot;:&quot;0.5&quot;}" lt-prop-offset="{&quot;right&quot;:&quot;0&quot;,&quot;top&quot;:&quot;0&quot;}" lt-prop-wrapper-class="crm-profile-popup crmBoxModal" lt-prop-show="{{showProfilePage}}" on-before-close="{{method(&quot;closeProfilePop&quot;)}}" on-show="{{method(&quot;showProfilePage&quot;)}}" on-before-show="{{method(&quot;beforeShowProfilePage&quot;)}}"> <template is="registerYield" yield-name="modal"> <lyte-modal-header class="p0"> <div class="profile_acct_bg"> <div class="dB aligncenter pB25 pT35 mAuto"> <template is="if" value="{{expHandlers(getUserDetail(\'CLIENT_ACCOUNT\'),\'!\')}}"><template case="true"> <template is="if" value="{{expHandlers(ifEquals(zuid,&quot;&quot;),\'!\')}}"><template case="true"> <img id="profilepageuserphoto_{{getUserDetail(\'USER_ID\')}}" alt="Profile Pic" src="{{contactsPhotoURL}}/file?ID={{zuid}}&amp;fs=thumb" class="vat aligncenter profile_pic"> </template><template case="false"> <img class="vat aligncenter profile_pic mT2" src="{{getCrmImageUrl(\'nophoto_80ea3af_.png\')}}" alt="Profile Pic"> </template></template></template></template> <span class="cP crm-font-bold dIB pT15 pB3 profile_username" data-zcqa="general_accountInfo" onclick="{{action(\'personalSettings\',event)}}">{{displayName}}</span> <span class="dB pB5 profile_userid crm-font-regular">{{concat(getI18n(\'User Id\'),":")}} {{zuid}} <i class="dIB cP infoUserId mT4" data-zcqa="profilePicture_userId" id="infoUserId"><crmutil-icon onmouseenter="{{action(\'openInfoUserId\')}}" onmouseleave="{{action(\'closeInfoUserId\',event)}}" icon-name="help" icon-class="zcicn-help iconWhite vat" class="dIB vat"></crmutil-icon></i> </span> <span id="profile_organization" data-zcqa="profilePicture_orgName" class="profile_organization dIB {{if(activateMultiOrg,\'activePopover\',\' \'))}} {{if(showOrgChange,\'cP\',\' \')}}" onclick="{{action(\'openOrganizationPopover\')}}"> <template is="if" value="{{expHandlers(isSandboxAcc,\'===\',&quot;true&quot;)}}"><template case="true"> <span class="overTxt_flow vam crm-font-regular" id="sandboxNameLabel">{{concat(getI18n(\'crm.sandbox.rule.name\'),":")}}</span> </template></template> <span class="overTxt_flow vam crm-font-regular lh18" id="orgNameDisplay">{{orgNameOrSandboxName}}</span> <template is="if" value="{{showOrgChange}}"><template case="true"> <i class="dIB vat mT1"><span class="arrowSolid dIB"></span></i> </template></template> </span> </div> <div class="clearfix"> <lyte-button class="profile-btn w50per fL myzohoacct_btn mR0" data-zcqa="profilePicture_myAccount" lt-prop-class="button_cl" onclick="{{action(\'myAccount\')}}"> <template is="registerYield" yield-name="text"> {{getI18n("crm.label.my.account")}} </template> </lyte-button> <lyte-button class="profile-btn w50per fL mR0" data-zcqa="profilePicture_signOut" lt-prop-class="button_cl" onclick="{{action(\'logout\')}}"> <template is="registerYield" yield-name="text"> {{getI18n("crm.topmenu.logout")}} </template> </lyte-button> </div> </div> </lyte-modal-header> <lyte-modal-content class="p0 profile_body_bg pR"> <div class="pL30 pR30"> <div class="profile_subscription pT25 clearfix"> <div class="clearfix profile_subscription_header"> <span class="crm-font-bold ttUpper vam profile_subscription_header_txt pR">{{getI18n("crm.subscription.zoho")}}</span> <template is="if" value="{{expHandlers(expHandlers(notPbxVendor,\'===\',&quot;true&quot;),\'&amp;&amp;\',expHandlers(isPaidLicense,\'||\',expHandlers(isFreeEdtionWithAddon,\'===\',&quot;true&quot;)))}}"><template case="true"> <span class="ttUpper vam subscription_text mL8" data-zcqa="profilePicture_licenseName">{{actualLicName}}</span> </template></template> </div> <div class="cb pT15"> <template is="if" value="{{expHandlers(expHandlers(isSandboxAcc,\'!==\',&quot;true&quot;),\'&amp;&amp;\',expHandlers(isSandboxDevAcc,\'!==\',&quot;true&quot;))}}"><template case="true"><template is="if" value="{{expHandlers(expHandlers(isAdminProfileUser,\'===\',true),\'&amp;&amp;\',expHandlers(rebrandProperty(\'OnlineStoreAvailable\'),\'===\',&quot;true&quot;))}}"><template case="true"> <template is="if" value="{{expHandlers(expHandlers(expHandlers(zorgHasPermission,\'===\',&quot;true&quot;),\'||\',expHandlers(zohoBundleOrgHasPermission,\'===\',&quot;true&quot;)),\'||\',expHandlers(expHandlers(notPbxVendor,\'===\',&quot;true&quot;),\'&amp;&amp;\',expHandlers(expHandlers(isFreeEdition,\'===\',false),\'||\',expHandlers(isFreeEdtionWithAddon,\'===\',&quot;true&quot;))))}}"><template case="true"> <div class="dB"> <span class="dIB mB15 cP profile_body_txt" data-zcqa="profilePicture_manageSub" onclick="{{action(\'manageSubcription\')}}">{{getI18n("crm.permission.manage.subscription")}}</span> </div> </template></template> </template></template><template is="if" value="{{expHandlers(isTrialEnable,\'===\',&quot;true&quot;)}}"><template case="true"> <div class="dB clearAfterB"> <span class="dIB mB15 profile_body_txt fL crmUpgrade_maxWidStyle" data-zcqa="profilePicture_trialInfo"> <template is="if" value="{{expHandlers(isJiveSignup,\'===\',&quot;true&quot;)}}"><template case="true"><template is="if" value="{{expHandlers(expHandlers(isZohoOneUser,\'===\',&quot;true&quot;),\'||\',expHandlers(isCrmPlusUser,\'===\',&quot;true&quot;))}}"><template case="true"><template is="if" value="{{zorgResult}}"><template case="true"> {{unescape(getI18n("crm.subscription.info.new",editionName,zorgResult))}} </template><template case="false"><template is="if" value="{{zohoBundleOrgResult}}"><template case="true"> {{unescape(getI18n("crm.subscription.info.new",editionName,zohoBundleOrgResult))}} </template></template></template></template></template><template case="false"> {{unescape(getI18n("crm.subscription.info.new",editionName,elseResult))}} </template></template></template><template case="false"><template is="if" value="{{expHandlers(expHandlers(isZohoOneUser,\'===\',&quot;true&quot;),\'||\',expHandlers(isCrmPlusUser,\'===\',&quot;true&quot;))}}"><template case="true"><template is="if" value="{{zorgResult}}"><template case="true"> {{unescape(getI18n("crm.trial.info.new",editionName,zorgResult))}} </template><template case="false"><template is="if" value="{{zohoBundleOrgResult}}"><template case="true"> {{unescape(getI18n("crm.trial.info.new",editionName,zohoBundleOrgResult))}} </template></template></template></template></template><template case="false"> {{unescape(getI18n("crm.trial.info.new",editionName,elseResult))}} </template></template></template></template> </span> <template is="if" value="{{expHandlers(expHandlers(isPaidUser,\'!\'),\'&amp;&amp;\',expHandlers(expHandlers(expHandlers(licType,\'!==\',&quot;N&quot;),\'||\',expHandlers(licType,\'!==\',&quot;L&quot;)),\'||\',expHandlers(licType,\'!==\',&quot;F&quot;)))}}"><template case="true"> <span id="manageSubscriptionProfileTab" class="link1 uline1 f12 crm-font-bold mL5 fL lh20" rel="noopener" data-zcqa="profilePicture_upgrade" onclick="{{action(\'manageSubscriptionUrl\')}}">{{getI18n(\'crm.store.upgrade.caps\')}}</span> </template></template> </div> <template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(isAdminProfileUser,\'===\',true),\'&amp;&amp;\',expHandlers(isZohoOneUser,\'===\',&quot;false&quot;)),\'&amp;&amp;\',expHandlers(isCrmPlusUser,\'===\',&quot;false&quot;)),\'&amp;&amp;\',expHandlers(expHandlers(expHandlers(isPaidUser,\'===\',true),\'||\',expHandlers(trialCount,\'>\',1)),\'||\',expHandlers(firstTimeTrialFromSetup,\'===\',&quot;true&quot;)))}}"><template case="true"> <div class="dB"> <span class="dIB mB15 cP profile_body_txt" data-zcqa="profilePicture_switchBack" onclick="{{action(\'switchBack\')}}"> {{getI18n("crm.trial.switch.back",actualLicName)}} </span> </div> </template></template> </template></template> <template is="if" value="{{expHandlers(expHandlers(isPaidUser,\'!\'),\'&amp;&amp;\',expHandlers(expHandlers(expHandlers(licType,\'===\',&quot;N&quot;),\'||\',expHandlers(licType,\'===\',&quot;L&quot;)),\'||\',expHandlers(licType,\'===\',&quot;F&quot;)))}}"><template case="true"> <div class="clearAfterB"> <span class="dIB mB15 profile_body_txt crmUpgrade_maxWidStyle fL" data-zcqa="profilePicture_trialInfo"> {{unescape(getI18n("crm.login.free.edition"))}} </span> <span id="manageSubscriptionProfileTab" class="link1 uline1 f12 crm-font-bold mL5 fL lh20" rel="noopener" data-zcqa="profilePicture_upgrade" onclick="{{action(\'manageSubscriptionUrl\')}}">{{getI18n(\'crm.store.upgrade.caps\')}}</span> </div> </template></template> <template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(isTryOtherEditionNeeded,\'&amp;&amp;\',expHandlers(isMultipleTrialProvisionDisabled,\'===\',&quot;null&quot;)),\'&amp;&amp;\',expHandlers(isAdminProfileUser,\'===\',true)),\'&amp;&amp;\',expHandlers(notPbxVendor,\'===\',&quot;true&quot;)),\'&amp;&amp;\',expHandlers(isCrmPlusUser,\'===\',&quot;false&quot;)),\'&amp;&amp;\',expHandlers(isZohoOneUser,\'===\',&quot;false&quot;)),\'&amp;&amp;\',expHandlers(expHandlers(isTrialEnable,\'===\',&quot;false&quot;),\'||\',expHandlers(expHandlers(isFreeEdition,\'===\',true),\'&amp;&amp;\',expHandlers(trialCount,\'<=\',1))))}}"><template case="true"> <div class="dB"> <span class="dIB pB15 cP profile_body_txt" data-zcqa="profilePicture_tryOtherEdition" onclick="{{action(\'tryOtherEdition\')}}"> {{getI18n("crm.evaluate4")}} </span> </div> </template></template> </template><template case="false"><template is="if" value="{{expHandlers(isTrialEnable,\'===\',&quot;true&quot;)}}"><template case="true"> {{unescape(getI18n("crm.edition.label.trial",editionName))}} </template></template></template></template> </div> </div> <template is="if" value="{{showNeedHelp}}"><template case="true"> <div class="profile_needhelp pT25 clearfix"> <div class="clearfix profile_help_header"> <span class="crm-font-bold ttUpper fL profile_help_header_text">{{getI18n("crm.profile.pic.need.help")}}</span> <template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(isPaidUser,\'&amp;&amp;\',expHandlers(isAdminProfileUser,\'==\',true)),\'&amp;&amp;\',expHandlers(isStarterEdition,\'!\')),\'&amp;&amp;\',expHandlers(isZohoOneUser,\'!==\',&quot;true&quot;)),\'&amp;&amp;\',expHandlers(isCrmPlusUser,\'!==\',&quot;true&quot;)),\'&amp;&amp;\',expHandlers(isSandboxAcc,\'!==\',&quot;true&quot;)),\'&amp;&amp;\',expHandlers(isSandboxDevAcc,\'!==\',&quot;true&quot;))}}"><template case="true"> <template is="if" value="{{ifEquals(supportPlan,\'Premium\')}}"><template case="true"> <span class="cP priority_assist fR mL10 mT1" data-zcqa="profilePicture_priority" onclick="{{action(\'openPriorityAssistanPopup\')}}"> {{getI18n("crm.profile.pic.priority.assistance.enterprise.support.try")}} </span> </template><template case="false"><template is="if" value="{{ifEquals(supportPlan,\'Classic\')}}"><template case="true"> <span class="cP priority_assist fR mL10 mT1" data-zcqa="profilePicture_priority" onclick="{{action(\'openPriorityAssistanPopup\')}}"> {{getI18n("crm.profile.pic.priority.assistance")}} </span> </template><template case="false"><template is="if" value="{{ifEquals(supportPlan,\'Enterprise\')}}"><template case="true"> <span class="cP priority_assist fR mL10 mT1" data-zcqa="profilePicture_priority" onclick="{{action(\'openPriorityAssistanPopup\')}}">{{getI18n("crm.profile.pic.priority.assistance.enterprise.support")}}</span> </template></template></template></template></template></template></template></template> </div> <div class="clearfix pT15"> <template is="if" value="{{expHandlers(isLiveChatAvailable,\'&amp;&amp;\',expHandlers(expHandlers(expHandlers(expHandlers(isPaidUser,\'===\',true),\'&amp;&amp;\',showChatNonAdmin),\'||\',expHandlers(expHandlers(deployment,\'===\',&quot;China&quot;),\'&amp;&amp;\',expHandlers(isTrialEnable,\'===\',&quot;true&quot;))),\'||\',isLiveChatSupportedForTrail))}}"><template case="true"> <div class="w49per dIB mB15 ned_help_cnt"><span class="cP profile_body_txt" data-zcqa="profilePicture_chatWithUs" onclick="{{action(\'liveChat\')}}"> <crmutil-icon icon-name="chat-curved" icon-class="zcicn_embedSvg zcicn14 dIB vam mR5"></crmutil-icon> {{getI18n("crm.setupicon.chatwithus")}}</span></div> </template></template> <template is="if" value="{{expHandlers(isAdminProfileUser,\'&amp;&amp;\',isPaidUser)}}"><template case="true"> <div class="w49per dIB mB15 ned_help_cnt"> <span class="cP profile_body_txt" data-zcqa="profilePicture_talkWithUs" onclick="{{action(\'openTalkusPopup\')}}"><i class="dIB vam mR6"><crmutil-icon icon-name="support-avatar" icon-class="zcicn-support crmBaseIcon dIB"></crmutil-icon></i> {{getI18n("crm.profile.pic.talktous")}}</span></div> </template></template> <div class="w49per dIB mB15 ned_help_cnt"> <span class="cP profile_body_txt" data-zcqa="profilePicture_writeToUs" onclick="{{action(\'openWriteToUsPop\')}}"> <crmutil-icon icon-name="mail-envolope" icon-class="zcicn-mail crmBaseIcon dIB vat mR8 mT4"></crmutil-icon> {{getI18n("crm.profile.pic.writetous")}}</span> </div> <div class="w49per dIB mB15 ned_help_cnt"> <span class="cP profile_body_txt" data-zcqa="profilePicture_community" onclick="{{action(\'community\')}}"> <crmutil-icon icon-name="users-group" icon-class="zcicn-user-group crmBaseIcon dIB vam mR5"></crmutil-icon> {{getI18n("crm.profile.pic.community")}} </span> </div> <template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(deployment,\'===\',&quot;US&quot;),\'||\',expHandlers(deployment,\'===\',&quot;EU&quot;)),\'||\',expHandlers(deployment,\'===\',&quot;skyDesk&quot;)),\'||\',expHandlers(deployment,\'===\',&quot;IN&quot;))}}"><template case="true"><template is="if" value="{{indexOf(usrLocStr,\'ja\',\'>\',expHandlers(1,\'-\'))}}"><template case="true"> <div class="w49per dIB mB15 resources_tab ned_help_cnt"> <span class="cP profile_body_txt"> <crmutil-icon icon-name="monitor-avatar" icon-class="zcicn-monitor-avatar crmBaseIcon dIB mR8 pR"></crmutil-icon> <span onclick="{{action(\'resources\',\'CRM_HELPLINK_JP\',false,\'Resources_JP\')}}" data-zcqa="profilePicture_resourcesJP">{{getI18n("crm.profile.pic.resources")}}</span> <i class="svgIcons crm-svgicons dIB ico-arrow-down-small vam"></i> </span></div> </template><template case="false"> <div class="w49per dIB mB15 resources_tab ned_help_cnt"> <span class="cP profile_body_txt" id="resources"> <crmutil-icon icon-name="monitor-avatar" icon-class="zcicn-monitor-avatar crmBaseIcon dIB mR8 pR"></crmutil-icon> {{getI18n("crm.profile.pic.resources")}} <crmutil-icon icon-name="arrow-left-line" icon-class="zcicn-arrow-right-line crmBaseIcon dIB mL5 vam"></crmutil-icon> </span></div> </template></template> </template><template case="false"><template is="if" value="{{expHandlers(deployment,\'==\',&quot;China&quot;)}}"><template case="true"> <div class="w49per dIB mB15 resources_tab ned_help_cnt"> <span class="cP profile_body_txt"> <crmutil-icon icon-name="monitor-avatar" icon-class="zcicn-monitor-avatar crmBaseIcon dIB mR8 pR"></crmutil-icon> <span data-zcqa="profilePicture_resourcesCN" onclick="{{action(\'resources\',\'CRM_HELPLINK_CN\',false,\'Resources_CN\')}}">{{getI18n("crm.profile.pic.resources")}}</span> <i class="svgIcons dIB ico-arrow-down-small vam"></i> </span></div> </template></template></template></template> <template is="if" value="{{showDemo}}"><template case="true"> <div class="w49per dIB mB15 ned_help_cnt"> <crmutil-icon icon-name="demo" icon-class="zcicn-demo crmBaseIcon dIB vam mR5 pR"></crmutil-icon> <span class="cP profile_body_txt" data-zcqa="profilePicture_needDemo" onclick="{{action(\'openNeedDemo\')}}"> {{getI18n("crm.profile.pic.request.for.demo")}} </span> </div> </template></template> </div> </div> </template></template> <template is="if" value="{{showNewsRoom}}"><template case="true"> <div class="profile_newsroom clearfix pT25"> <div class="clearfix profile_newsroom_header"> <span class="profile_newsroom_header_text crm-font-bold ttUpper vam dB">{{getI18n("crm.profile.pic.news.room")}}</span> </div> <template is="if" value="{{expHandlers(deployment,\'===\',&quot;China&quot;)}}"><template case="true"> <div class="cb pT20 pL10 pR10"> <span class="dIB mB25 cP profile_body_txt fL"> <crmutil-icon icon-name="gift" icon-class="zcicn-gift crmBaseIcon dIB mR5 pR vat"></crmutil-icon> <span onclick="{{action(\'resources\',whatsNewCN,true,\'whatsNewCN\')}}" data-zcqa="profilePicture_whatsNewCN">{{getI18n("crm.top.watsnew")}}</span> </span> </div> </template><template case="false"> <div class="clearfix pT15"> <span class="dIB mB25 cP w49per profile_body_txt fL"> <crmutil-icon icon-name="gift" icon-class="zcicn-gift crmBaseIcon dIB mR5 pR vat"></crmutil-icon> <span onclick="{{action(\'resources\',whatsNew,true,\'whatsNew\')}}" data-zcqa="profilePicture_whatsNew">{{getI18n("crm.top.watsnew")}}</span> </span> <template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(pTopReferral.currentDc,\'===\',&quot;US&quot;),\'||\',expHandlers(pTopReferral.currentDc,\'===\',&quot;AU&quot;)),\'||\',expHandlers(pTopReferral.currentDc,\'===\',&quot;IN&quot;)),\'||\',expHandlers(pTopReferral.currentDc,\'===\',&quot;EU&quot;)),\'&amp;&amp;\',expHandlers(pTopReferral.isSandbox,\'!\'))}}"><template case="true"> <span class="dIB mB25 cP w49per profile_body_txt fL"> <span class="dIB lyteItem p2p-color-black" id="topbandp2pIcon" data-zcqa="p2pTpBnd" onclick="{{action(\'showReferralPopupMenu\')}}"> <crmutil-icon icon-name="refer" icon-class="zcicn-refer-p2p crmBaseIcon dIB mR2 vat"></crmutil-icon> {{getI18n(\'crm.p2preferral.button\')}} </span> <template is="if" value="{{pTopReferral.showReferralPanel}}"><template case="true"> <crm-p2p-referral show-referral-panel="{{lbind(pTopReferral.showReferralPanel)}}"></crm-p2p-referral> </template></template> </span> </template></template> </div> </template></template> </div> </template></template> </div> <template is="if" value="{{expHandlers(expHandlers(isSandboxAcc,\'===\',&quot;true&quot;),\'&amp;&amp;\',expHandlers(isSandboxDevAcc,\'!==\',&quot;true&quot;))}}"><template case="true"> <lyte-button lt-prop-type="button" class="sanBox_btn" lt-prop-class="button_cl" lt-prop-appearance="primary" data-zcqa="profilePicture_returnPrd" onclick="{{action(\'returnToProductionAccount\')}}"> <template is="registerYield" yield-name="text"> {{getI18n("crm.profile.pic.switch.production")}} </template> </lyte-button> </template></template> </lyte-modal-content> <template is="if" value="{{expHandlers(showAndroid,\'||\',showIOS)}}"><template case="true"> <lyte-modal-footer class="crm-profile-popupfooter"> <span class="crm-font-bold ttUpper mR10 mobile_txt">{{getI18n("Mobile")}}</span> <template is="if" value="{{showIOS}}"><template case="true"> <span class="svgIcons appstore dIB vam mR10 cP" onclick="{{action(\'resources\',iosUrl,true,\'IOS_APP\')}}"></span></template></template> <template is="if" value="{{expHandlers(expHandlers(deployment,\'==\',&quot;China&quot;),\'&amp;&amp;\',showAndroid)}}"><template case="true"> <span class="svgIcons appstorechina dIB vam cP" onclick="{{action(\'resources\',androidUrl,true,\'CHINA_ANDROID_APP\')}}"></span> </template><template case="false"><template is="if" value="{{showAndroid}}"><template case="true"> <span class="svgIcons playstore dIB vam cP" onclick="{{action(\'resources\',androidUrl,true,\'ANDROID_APP\')}}"></span> </template></template></template></template> </lyte-modal-footer> </template></template> <lyte-popover lt-prop-origin-elem="#infoUserId" lt-prop-close-on-body-click="false" id="infoUserIdPopover" lt-prop-height="auto" lt-prop-freeze="false" lt-prop-show="{{showUserIdPop}}" lt-prop-show-close-button="false"> <template is="registerYield" yield-name="popover"> <lyte-popover-content class="infoUserIdPopcontent"> <p class="mB10 infoUserIdPoptxt">{{getI18n("crm.profile.pic.userid.tooltip.top")}}</p> <p class="infoUserIdPoptxt">{{getI18n("crm.profile.pic.userid.tooltip.bottom.new")}}</p> </lyte-popover-content> </template> </lyte-popover> </template> </lyte-modal> <lyte-menu lt-prop-yield="true" lt-prop-event="click" lt-prop-query="#resources" lt-prop-tab-index="0" lt-prop-width="auto" lt-prop-wrapper-class="resources_menu" lt-prop-height="auto" lt-prop-query-class="lyteMenuSelected" lt-prop-freeze="false"> <template is="registerYield" yield-name="yield"> <lyte-menu-body class="resources_menu-body"> <lyte-menu-item data-value="1" class="resource_items" onclick="{{action(\'resources\',\'CRM_RESOURCES_VIDEOLINK\',false,\'Resources Videos\')}}"> <span data-zcqa="profilePicture_videos"> {{getI18n("crm.profile.pic.resources.videos")}}</span> </lyte-menu-item> <lyte-menu-item class="resource_items" onclick="{{action(\'resources\',\'index_help_url\',false,\'Resources Documentation\')}}"> <span data-zcqa="profilePicture_doc">{{getI18n("crm.profile.pic.resources.helpguide")}}</span> </lyte-menu-item> <lyte-menu-item data-value="3" class="resource_items" onclick="{{action(\'resources\',\'CRM_RESOURCES_TRAINING\',false,\'Resources Training\')}}"> <span data-zcqa="profilePicture_training">{{getI18n("crm.profile.pic.resources.training")}}</span> </lyte-menu-item> <lyte-menu-item data-value="3" class="resource_items" onclick="{{action(\'resources\',\'CRM_HELPLINK\',false,\'Resources More\')}}"> <span data-zcqa="profilePicture_more">{{getI18n("crm.menu.more")}}</span> </lyte-menu-item> </lyte-menu-body> </template> </lyte-menu> <lyte-popover id="profile_organization_popover" data-zcqa="orgProfileMenu" lt-prop-show="{{showMultiOrgs}}" on-show="{{method(\'onShowMultiOrg\')}}" on-before-close="{{method(\'closeMultiOrgPop\')}}" lt-prop-origin-elem="#profile_organization" lt-prop-height="auto" lt-prop-width="242px" lt-prop-duration="200" lt-prop-content-padding="25px 0 0" lt-prop-footer-padding="0 0 25px" lt-prop-show-close-button="false" lt-prop-wrapper-class="manage_orgpopover" lt-prop-type="box" lt-prop-placement="bottom" lt-prop-freeze="false" lt-prop-allow-multiple="true"> <template is="registerYield" yield-name="popover"> <lyte-popover-content class="pR"> <div class="mange_popover_contnet"> <template is="for" items="{{organizations}}" item="org" index="index"> <div class="cP pL30 pR30 pT7 pB7 org_options pR" id="Org{{index}}" data-zcqa="orgProfileMenu_org_{{org.id}}" onclick="{{action(\'resources\',if(expHandlers(isCurrentOrg(org.id),\'!\'),org.web_url,\'\'),true)}}"> <span class="proximas aligncenter mR10 vam dIB org_logo_img green_bg">{{getOrgCode(org.name,org.id)}}</span><span class="vam org_logo_txt">{{getOrgName(org.name,org.id)}}</span> <span class="svgIcons dIB vam {{if(isCurrentOrg(org.id),\'\',\'vH\')}} pA ico-tick-small currentOrg_tick" data-zcqa="profilePicture_currentOrg"></span> </div> </template> </div> </lyte-popover-content> <lyte-popover-footer> <template is="if" value="{{showManageOrgs}}"><template case="true"> <span class="link1 mT10 pL30 pR10 dIB manage_link vam" data-zcqa="orgProfileMenu_manage" onclick="{{action(\'openOrgPage\')}}">{{getI18n(\'crm.link.manage\')}}</span> </template></template> <template is="if" value="{{expHandlers(invitationCount,\'>\',1)}}"><template case="true"> <span class="dIB mT10 pR10 col888 pR invitation_txt vam" data-zcqa="orgProfileMenu_invitation">{{invitationCount}} {{getI18n(\'crm.profile.pic.pendInv.multiple\')}}</span> </template><template case="false"><template is="if" value="{{expHandlers(invitationCount,\'==\',1)}}"><template case="true"> <span class="dIB mT10 pR10 col888 pR invitation_txt vam" data-zcqa="orgProfileMenu_invitation">{{invitationCount}} {{getI18n(\'crm.profile.pic.pendInv.one\')}}</span> </template></template></template></template> </lyte-popover-footer> </template> </lyte-popover> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,1,0]},{type:"componentDynamic",position:[1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[5]},{type:"registerYield",position:[5,1],dynamicNodes:[{type:"attr",position:[1,1,1,1]},{type:"if",position:[1,1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,1,1,3]},{type:"text",position:[1,1,1,3,0]},{type:"text",position:[1,1,1,5,0]},{type:"text",position:[1,1,1,5,2]},{type:"attr",position:[1,1,1,5,4,0]},{type:"componentDynamic",position:[1,1,1,5,4,0]},{type:"attr",position:[1,1,1,7]},{type:"attr",position:[1,1,1,7,1]},{type:"if",position:[1,1,1,7,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"text",position:[1,1,1,7,3,0]},{type:"attr",position:[1,1,1,7,5]},{type:"if",position:[1,1,1,7,5],cases:{true:{dynamicNodes:[]}},default:{}},{type:"attr",position:[1,1,3,1]},{type:"registerYield",position:[1,1,3,1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1,1,3,1]},{type:"attr",position:[1,1,3,3]},{type:"registerYield",position:[1,1,3,3,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1,1,3,3]},{type:"componentDynamic",position:[1]},{type:"text",position:[3,1,1,1,1,0]},{type:"attr",position:[3,1,1,1,3]},{type:"if",position:[3,1,1,1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3,1,1,3,1]},{type:"if",position:[3,1,1,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,1,1]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,1]},{type:"attr",position:[1,3]},{type:"text",position:[1,3,0]}]}},default:{}},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,1,1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[3,1,3]},{type:"if",position:[3,1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,1,0]},{type:"attr",position:[1,1,3]},{type:"if",position:[1,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3,1]},{type:"if",position:[1,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,0]},{type:"componentDynamic",position:[1,0,1]},{type:"text",position:[1,0,3]}]}},default:{}},{type:"attr",position:[1,3,3]},{type:"if",position:[1,3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1,0,0]},{type:"text",position:[1,1,2]}]}},default:{}},{type:"attr",position:[1,3,5,1]},{type:"componentDynamic",position:[1,3,5,1,1]},{type:"text",position:[1,3,5,1,3]},{type:"attr",position:[1,3,7,1]},{type:"componentDynamic",position:[1,3,7,1,1]},{type:"text",position:[1,3,7,1,3]},{type:"attr",position:[1,3,9]},{type:"if",position:[1,3,9],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1,1,1]},{type:"attr",position:[1,1,3]},{type:"text",position:[1,1,3,0]}]},false:{dynamicNodes:[{type:"componentDynamic",position:[1,1,1]},{type:"text",position:[1,1,3]},{type:"componentDynamic",position:[1,1,5]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1,1,1]},{type:"attr",position:[1,1,3]},{type:"text",position:[1,1,3,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3,11]},{type:"if",position:[1,3,11],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"text",position:[1,3,1]}]}},default:{}}]}},default:{}},{type:"attr",position:[3,1,5]},{type:"if",position:[3,1,5],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,1,0]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1,1,1]},{type:"attr",position:[1,1,3]},{type:"text",position:[1,1,3,0]}]},false:{dynamicNodes:[{type:"componentDynamic",position:[1,1,1]},{type:"attr",position:[1,1,3]},{type:"text",position:[1,1,3,0]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1,1]},{type:"text",position:[1,1,3]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[3]},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[7]},{type:"registerYield",position:[7,1],dynamicNodes:[{type:"text",position:[1,1,0]},{type:"text",position:[1,3,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[7]}]},{type:"componentDynamic",position:[5]},{type:"registerYield",position:[7,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"text",position:[1,3,1,0]},{type:"componentDynamic",position:[1,3]},{type:"attr",position:[1,5]},{type:"text",position:[1,5,1,0]},{type:"componentDynamic",position:[1,5]},{type:"attr",position:[1,7]},{type:"text",position:[1,7,1,0]},{type:"componentDynamic",position:[1,7]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[7]},{type:"attr",position:[9]},{type:"registerYield",position:[9,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"text",position:[1,2,0]},{type:"attr",position:[1,4]}]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"text",position:[1,2]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"text",position:[1,2]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[9]}],_observedAttributes:["actualLicName","isTrialEnable","zohoBundleOrgHasPermission","zohoBundleOrgPaymentLink","zohoBundleOrgResult","zorgHasPermission","zorgPaymentLink","zorgResult","isFreeEdition","isFreeEdtionWithAddon","isZohoOneUser","isCrmPlusUser","elseResult","isJiveSignup","editionName","isPaidUser","trialCount","usersCount","firstTimeTrialFromSetup","notPbxVendor","isMultipleTrialProvisionDisabled","usrLocStr","zuid","contactsPhotoURL","isSandboxAcc","isSandboxDevAcc","isAdminProfileUser","isPremiumSupportEnabled","showPremiumSupportTalkToUs","licType","deployment","showTalkToExperts","clientImageSrcURL","countryCode","isProfClicked","showProfilePic","orgNameOrSandboxName","showOrgChange","orgAPIDataLoaded","organizations","invitationCount","is_user_confirmed","phoneNumber","showBlink","licenseType","profileNature","showChatNonAdmin","manageSubUrl","showNeedHelp","showNewsRoom","isTryOtherEditionNeeded","showAndroid","showIOS","androidUrl","iosUrl","showProfilePage","isPaidLicense","actualLicName","subject","message","showMessageBox","messageBoxType","messageBoxContent","communityLink","myAccountLink","whatsNew","whatsNewCN","countryArray","countryDetails","currentCountry","supportPlan","paymentMode","showDemo","disableMailSent","showMultiOrgs","showManageOrgs","activateMultiOrg","showUserIdPop","allowMultipleProp","pTopReferral","isStarterEdition","displayName","isLiveChatSupportedForTrail"],data:function(){return{actualLicName:Lyte.attr("string",{default:Crm.userDetails.LICENSE_TYPE_ACTUAL_NAME_I18N}),isTrialEnable:Lyte.attr("string",{default:isTrialEnable}),zohoBundleOrgHasPermission:Lyte.attr("string",{default:"undefined"!=typeof zohoBundleOrgHasPermission?zohoBundleOrgHasPermission:void 0}),zohoBundleOrgPaymentLink:Lyte.attr("string",{default:"undefined"!=typeof zohoBundleOrgPaymentLink?zohoBundleOrgPaymentLink:void 0}),zohoBundleOrgResult:Lyte.attr("string",{default:"undefined"!=typeof zohoBundleOrgResult?zohoBundleOrgResult:void 0}),zorgHasPermission:Lyte.attr("string",{default:"undefined"!=typeof zorgHasPermission?zorgHasPermission:void 0}),zorgPaymentLink:Lyte.attr("string",{default:"undefined"!=typeof zorgPaymentLink?zorgPaymentLink:void 0}),zorgResult:Lyte.attr("string",{default:"undefined"!=typeof zorgResult?zorgResult:void 0}),isFreeEdition:Lyte.attr("boolean",{default:!1}),isFreeEdtionWithAddon:Lyte.attr("string",{default:isFreeEdtionWithAddon}),isZohoOneUser:Lyte.attr("string",{default:isZohoOneUser}),isCrmPlusUser:Lyte.attr("string",{default:isCrmPlusUser}),elseResult:Lyte.attr("string",{default:elseResult}),isJiveSignup:Lyte.attr("string",{default:isJiveSignup}),editionName:Lyte.attr("string",{default:Crm.userDetails.TRAIL_TYPE}),isPaidUser:Lyte.attr("boolean",{default:Crm.userDetails.ISPAID_USER}),trialCount:Lyte.attr("number",{default:Number(trialCount)}),usersCount:Lyte.attr("number",{default:Number(usersCount)}),firstTimeTrialFromSetup:Lyte.attr("string",{default:firstTimeTrialFromSetup}),notPbxVendor:Lyte.attr("string",{default:notPbxVendor}),isMultipleTrialProvisionDisabled:Lyte.attr("string",{default:isMultipleTrialProvisionDisabled}),usrLocStr:Lyte.attr("string",{default:Crm.userDetails.COUNTRY_LOCALE}),zuid:Lyte.attr("string",{default:Crm.userDetails.ZUID}),contactsPhotoURL:Lyte.attr("string",{default:crmConstants.contactsPhotoURL}),isSandboxAcc:Lyte.attr("string",{default:isSandboxAcc}),isSandboxDevAcc:Lyte.attr("string",{default:isSandboxDevAcc}),isAdminProfileUser:Lyte.attr("boolean",{default:!1}),isPremiumSupportEnabled:Lyte.attr("boolean",{default:!1}),showPremiumSupportTalkToUs:Lyte.attr("boolean",{default:!1}),licType:Lyte.attr("string",{default:Crm.userDetails.LICENSE_TYPE}),deployment:Lyte.attr("string",{default:Crm.userDetails.DEPLOYMENT}),showTalkToExperts:Lyte.attr("boolean",{default:"true"===showTalkToExperts}),clientImageSrcURL:Lyte.attr("string",{default:clientImageUrl}),countryCode:Lyte.attr("array",{default:[{value:"AU",name:"Australia"},{value:"FR",name:"France"},{value:"DE",name:"Germany"},{value:"IN",name:"India"},{value:"IT",name:"Italy"},{value:"NL",name:"Netherlands"},{value:"ES",name:"Spain"},{value:"SE",name:"Sweden"},{value:"UK",name:"United Kingdom"},{value:"US",name:"United States"}]}),isProfClicked:Lyte.attr("boolean",{default:!1}),showProfilePic:Lyte.attr("boolean",{default:!1}),orgNameOrSandboxName:Lyte.attr("string",{default:commonUtils.getOrgNameOrSandboxName()}),showOrgChange:Lyte.attr("boolean",{default:!1}),orgAPIDataLoaded:Lyte.attr("boolean",{default:!1}),organizations:Lyte.attr("array",{default:[]}),invitationCount:Lyte.attr("number",{default:0}),is_user_confirmed:Lyte.attr("boolean"),phoneNumber:Lyte.attr("string",{default:"+1 844 316 5541"}),showBlink:Lyte.attr("boolean",{default:!1}),licenseType:Lyte.attr("string"),profileNature:Lyte.attr("string"),showChatNonAdmin:Lyte.attr("boolean",{default:!0}),manageSubUrl:Lyte.attr("string",{default:Crm.userDetails.manageSubscriptionUrl}),showNeedHelp:Lyte.attr("boolean",{default:Crm.userDetails.profilePage.showNeedHelp}),showNewsRoom:Lyte.attr("boolean",{default:Crm.userDetails.profilePage.showNewsRoom}),isTryOtherEditionNeeded:Lyte.attr("boolean",{default:Crm.userDetails.profilePage.tryOtherEditionNeeded}),showAndroid:Lyte.attr("boolean",{default:void 0!==Crm.userDetails.profilePage.android}),showIOS:Lyte.attr("boolean",{default:void 0!==Crm.userDetails.profilePage.ios}),androidUrl:Lyte.attr("string",{default:Crm.userDetails.profilePage.android}),iosUrl:Lyte.attr("string",{default:Crm.userDetails.profilePage.ios}),showProfilePage:Lyte.attr("boolean",{default:!1}),isPaidLicense:Lyte.attr("boolean",{default:!1}),actualLicName:Lyte.attr("string",{default:Crm.userDetails.LICENSE_TYPE_ACTUAL_NAME_I18N}),subject:Lyte.attr("string"),message:Lyte.attr("string"),showMessageBox:Lyte.attr("boolean",{default:!1}),messageBoxType:Lyte.attr("string"),messageBoxContent:Lyte.attr("string"),communityLink:Lyte.attr("string",{default:RebrandLinkUtil.getProperty("CRM_RESOURCES_COMMUNITY")}),myAccountLink:Lyte.attr("string",{default:document.location.protocol+"//"+Crm.userDetails.ACCOUNTS_URL}),whatsNew:Lyte.attr("string",{default:"https://"+RebrandLinkUtil.getProperty("ZohoURL")+"/crm/whats-new/release-notes.html"}),whatsNewCN:Lyte.attr("string",{default:"https://"+RebrandLinkUtil.getProperty("ZohoChinaURL")+"/crm/whats-new/release-notes.html"}),countryArray:Lyte.attr("array",{default:["IN","US","GB","AU","DE","SE","IT","NL","ES","FR","CN"]}),countryDetails:Lyte.attr("array"),currentCountry:Lyte.attr("string"),supportPlan:Lyte.attr("string",{default:Crm.userDetails.SUPPORT_PLAN}),paymentMode:Lyte.attr("string",{default:Crm.userDetails.profileNature}),showDemo:Lyte.attr("boolean",{default:!1}),disableMailSent:Lyte.attr("boolean",{default:!0}),showMultiOrgs:Lyte.attr("boolean",{default:!1}),showManageOrgs:Lyte.attr("boolean",{default:!0}),activateMultiOrg:Lyte.attr("boolean",{default:!1}),showUserIdPop:Lyte.attr("boolean",{default:!1}),allowMultipleProp:Lyte.attr("boolean",{default:!1}),pTopReferral:Lyte.attr("object",{default:{}}),isStarterEdition:Lyte.attr("boolean",{default:!1}),displayName:Lyte.attr("string",{default:Crm.userDetails.DISPLAY_NAME}),isLiveChatSupportedForTrail:Lyte.attr("boolean",{default:!1})}},init:function(){"Administrator"===Crm.userDetails.PROFILE_NAME&&this.setData("isAdminProfileUser",!0);var e=Crm.userDetails.LICENSE_TYPE_ACTUAL;if(this.setData("licenseType",e),"N"===e||"L"===e||"F"===e?this.setData("isFreeEdition",!0):this.setData("isPaidLicense",!0),"Administrator"===Crm.userDetails.PROFILE_NAME&&this.setData("isAdminProfileUser",!0),"X"===Crm.userDetails.LICENSE_TYPE_ACTUAL&&this.setData("isStarterEdition",!0),"true"===RebrandLinkUtil.getProperty("PS_ENABLED")&&null!==ps_details&&ps_details.isPremium){this.setData("isPremiumSupportEnabled",!0),this.setData("ps_details",ps_details),this.setData("supportPlan","Premium");var t=Crm.userDetails.COUNTRY_LOCALE.substr(3);["IN","US","GB","AU","SE","IT","NL","ES","FR","SG"].contains(t)&&this.setData("showPremiumSupportTalkToUs",!0)}if("true"===RebrandLinkUtil.getProperty("LiveChat")&&"true"===RebrandLinkUtil.getProperty("ISLIVECHATENABLED")&&("China"!==Crm.userDetails.DEPLOYMENT&&featuresAvailable.Live_Chat||"China"===Crm.userDetails.DEPLOYMENT&&(Crm.userDetails.ISPAID_USER||"true"===isTrialEnable))&&this.setData("isLiveChatAvailable",!0),Crm.userDetails&&Crm.userDetails.DEPLOYMENT){var a=this.getData("pTopReferral");Lyte.objectUtils(a,"add","currentDc",Crm.userDetails.DEPLOYMENT),Lyte.objectUtils(a,"add","isSandbox",Crm.userDetails.isSandbox)}if(Crm.userDetails&&Crm.userDetails.isTrialEnabled&&!Crm.userDetails.ISPAID_USER&&Crm.userDetails.EDITION_NAME&&Crm.userDetails.DEPLOYMENT){var o=Crm.userDetails.EDITION_NAME,i=Crm.userDetails.DEPLOYMENT;"AU"!==i&&"IN"!==i&&"US"!==i||"Professional"!=o&&"Old Enterprise"!=o&&"Enterprise"!=o&&"Ultimate"!=o||this.setData("isLiveChatSupportedForTrail",!0)}},didConnect:function(){Lyte.injectResources(networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("p2preferral")]),void 0)},methods:{showHideProfile:function(){if(0===$("iframe#logoutSurvey").length){var e="";Crm.userDetails.LOCALE&&(e=Crm.userDetails.LOCALE.substr(0,2)),["es","fr","de","nl","bg","da","it","pl","pt","tr","el","sv","uk"].contains(e)?$("<iframe>").attr({id:"logoutSurvey",src:"https://survey.zohopublic.eu/zs/yMB8Wy?lang="+e,width:"1280",height:"720",frameborder:"0",style:"height:auto;width:900px;min-height:610px;max-height:610px"}).prependTo("#logoutSurveyPop"):$("<iframe>").attr({id:"logoutSurvey",src:"https://survey.zohopublic.eu/zs/yMB8Wy",width:"1280",height:"720",frameborder:"0",style:"height:auto;width:900px;min-height:610px;max-height:610px"}).prependTo("#logoutSurveyPop")}this.setData("actualLicName",Crm.userDetails.LICENSE_TYPE_ACTUAL_NAME_I18N),this.setData("editionName",Crm.userDetails.TRAIL_TYPE),this.setData("isPaidUser",Crm.userDetails.ISPAID_USER),this.setData("usrLocStr",Crm.userDetails.COUNTRY_LOCALE),this.setData("zuid",Crm.userDetails.ZUID),this.setData("contactsPhotoURL",crmConstants.contactsPhotoURL),this.setData("licType",Crm.userDetails.LICENSE_TYPE),this.setData("deployment",Crm.userDetails.DEPLOYMENT),this.setData("isProfClicked",!0),Crm.menu.setupDropDown(event,this),slidelt("frmSetupClick"),event&&(event.cancelBubble=!0,event.stopPropagation&&event.stopPropagation()),$("#editionTrialDiv").hide()},beforeCloseProfileMenu:function(e,t){for(var a=t.target;a&&"mySelectIDDrop"!==a.id&&"mySelectIDSearch"!==a.id;)a=a.parentElement;if(a&&a.id&&("mySelectIDDrop"===a.id||"mySelectIDSearch"===a.id))return!1},showProfilePage:function(){$L("crm-profile-menu-talktous").length>0&&document.querySelector("crm-profile-menu-talktous").component.$node.remove()},beforeShowProfilePage:function(){setTimeout((function(){var e=$L(".crm-profile-popup .lyteModal");e.length>0&&(e[0].style.transitionDuration="unset",e[0].style.transform="none")}),10)},showNoResult:function(e){this.setData("showNoResult",0===e.length)},closeProfilePop:function(){this.setData("showProfilePage",!1),this.setData("activateMultiOrg",!1),this.data.showMultiOrgs&&this.setData("showMultiOrgs",!1),this.data.showUserIdPop&&this.setData("showUserIdPop",!1)},closeMultiOrgPop:function(e){this.setData("activateMultiOrg",!1),this.setData("showMultiOrgs",!1),this.setData("allowMultipleProp",!1)},onShowMultiOrg:function(){this.data.organizations.forEach((function(e,t){e.name.length>21&&$L("#Org"+t).attr({"lt-prop-title":e.name,"lt-prop-tooltip-config":'{"position" : "top", "appearance" : "callout","showdelay" : 1000, "margin" : 10}'})}))}},actions:{showReferralPopupMenu:function(){this.setData("allowMultipleProp",!0);var e=[];e=(e=e.concat(networkUtils.returnDependencyFiles(["crm-p2pReferral-page.js"],crmConstants.jsStaticPathForLyte))).concat(networkUtils.returnDependencyFiles(["crm-p2pReferral-page.css"],crmConstants.cssStaticPathForLyte)),Crm.userDetails.RTL_ENABLED&&(e=e.concat(networkUtils.returnDependencyFiles(["crm-p2pReferral-page-rtl.css"],crmConstants.cssStaticPathForLyte))),Crm.client_tracking("Refer and Earn profile Click"),Lyte.injectResources(e,void 0,function(){setTimeout(function(){this.setData("pTopReferral.showReferralPanel",!0)}.bind(this),50)}.bind(this))},openProfilePage:function(){if(CScriptLib&&_cscript._is_preview_frame)crmui.showMsgBand("error",I18n.getMsg("dxeditorpreview.settings.notsupported"),4e3);else{if(Crm.userDetails.CLIENT_ACCOUNT)this.setData("isProfClicked",!0);else if(this.setData("orgNameOrSandboxName",commonUtils.getOrgNameOrSandboxName()),this.setData("displayName",Crm.userDetails.DISPLAY_NAME),this.setData("showProfilePage",!0),this.fetchOrgDetailsAndShowOrgChange(),!Lyte.Component.registeredComponents["crm-profile-menu-talktous"]){var e=networkUtils.returnDependencyFiles(["crm-profile-menu-components.js","lyte-fileupload.js"],crmConstants.jsStaticPathForLyte),t=networkUtils.returnDependencyFiles(["crm-profile-menu-components.css"],crmConstants.cssStaticPathForLyte),a=networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("ProfileMenuComponents")]),o=e.concat(t).concat(a);Lyte.injectResources(o,void 0,void 0)}this.data.orgNameOrSandboxName.length>29&&$L("#orgNameDisplay").attr({"lt-prop-title":this.data.orgNameOrSandboxName,"lt-prop-tooltip-config":'{"appearance":"callout","position":"bottom"}',"lt-prop-tooltip-style":"background : #333;color:#fff;font-size:1.2rem;border-radius:3px;padding: 5px 13px;"})}},closeSettinsDropDown:function(e){(event.target.href||e)&&((event.ctrlKey||event.metaKey)&&event.target.href&&-1===event.target.href.indexOf("javascript:")||(document.getElementById("dropclk").click(),this.setData("isProfClicked",!1)))},getClientInfo:function(){CPMF.getClientPortalUserLocaleInfo(),this.setData("isProfClicked",!1)},openTalkusPopup:function(){if(this.data.isPremiumSupportEnabled&&this.data.isAdminProfileUser&&!this.data.showPremiumSupportTalkToUs)this.setData("showProfilePage",!1),PremiumChat.invokePremiumChat(ps_details.PSE_Mail_Id,Crm.userDetails.DISPLAY_NAME,ps_details.emailId,"Call",ps_details.weekend_restriction);else if(0===$L("crm-profile-menu-talktous").length)Lyte.Component.render("crm-profile-menu-talktous",{},"body");else{var e=document.querySelector("crm-profile-menu-talktous").component;e.setData("showTalkToUs",!0),e.setData("dontClose",!0)}Crm.client_tracking("Profile Revamp - Talk With Us Click")},openOrganizationPopover:function(){this.data.showOrgChange&&(this.setData("allowMultipleProp",!0),this.setData("activateMultiOrg",!0),this.setData("showMultiOrgs",!0),$L(".mange_popover_contnet").scroll())},openPriorityAssistanPopup:function(){if(Lyte.Component.registeredComponents["crm-profile-menu-assitance"])Lyte.Component.render("crm-profile-menu-assitance",{},"body");else{var e=networkUtils.returnDependencyFiles(["crm-profile-menu-assistance.js"],crmConstants.jsStaticPathForLyte),t=networkUtils.returnDependencyFiles(["crm-profile-menu-assistance.css"],crmConstants.cssStaticPathForLyte),a=networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("ProfilePriorityAssitance")]),o=e.concat(t).concat(a);Lyte.injectResources(o,void 0,(function(){0===$L("crm-profile-menu-assitance").length&&Lyte.Component.render("crm-profile-menu-assitance",{},"body")}))}Crm.client_tracking("Profile Revamp - Priority Assitance Click")},openWriteToUsPop:function(){if(0===$L("crm-profile-menu-writetous").length)Lyte.Component.render("crm-profile-menu-writetous",{},"body");else{var e=document.querySelector("crm-profile-menu-writetous").component;e.setData("showWriteToUs",!0),e.setData("dontClose",!0)}Crm.client_tracking("Profile Revamp - Write to Us Click")},logout:function(){if(this.setData("showProfilePage",!1),Crm.userDetails.DEPLOYMENT.includes("EU")&&$("iframe#logoutSurvey").length>0){var e=$("#timerSeconds");e.text(60),freezeBackground();crmui.showPopup({id:"logoutSurveyPop",escToClose:!1,freezeLayer:!0});var t=Number(e.text()),a=setInterval((function(){t>0?(e.text(t),t--):(clearInterval(a),logoutCall(crmConstants.logoutURL),Crm.trackSpotLightAction("Sign Out"))}),1e3)}else logoutCall(crmConstants.logoutURL),Crm.trackSpotLightAction("Sign Out")},myAccount:function(){this.setData("showProfilePage",!1);var e=document.location.protocol+"//"+Crm.userDetails.ACCOUNTS_URL;networkUtils.openUrl(e,"_blank","")},manageSubcription:function(e){var t,a=document.querySelector("crm-profile-menu").component;"enterprise"===e&&a.data.usersCount<25||(t="true"===a.data.zorgHasPermission?a.data.zorgPaymentLink:"true"===a.data.zohoBundleOrgHasPermission?a.data.zohoBundleOrgPaymentLink:a.data.manageSubUrl,void 0===e||"enterprise"!==e&&"premium"!==e?a.setData("showProfilePage",!1):document.querySelector("crm-profile-menu-assitance").component.setData("showAssistance",!1),networkUtils.openUrl(t,"_blank",""))},manageSubscriptionUrl:function(){Crm.client_tracking("Upgrade Option Click - Profile Menu"),Crm.trackSpotLightAction("Subscription Accessed",{Place:"Trial Remaining Msg"}),networkUtils.openUrl(Crm.userDetails.manageSubscriptionUrl,"_blank")},switchBack:function(){this.setData("showProfilePage",!1),crmLicense.confirmCancelTrial()},tryOtherEdition:function(){"ZohoCRM"===Crm.serviceName&&this.setData("showProfilePage",!1),crmLicense.editionTrialPopup()},liveChat:function(){if(this.setData("showProfilePage",!1),FeedbackChat.setVisitorInfo("profileMenu"),this.data.isPremiumSupportEnabled&&this.data.isAdminProfileUser)PremiumChat.invokePremiumChat(ps_details.PSE_Mail_Id,Crm.userDetails.DISPLAY_NAME,ps_details.emailId,"Chat",ps_details.weekend_restriction);else{let e=!1;"Classic"!=this.data.supportPlan&&"Enterprise"!=this.data.supportPlan||!Crm.timingCheckNeeded||(e=!0),$zoho&&$zoho.salesiq&&$zoho.salesiq.visitor&&$zoho.salesiq.visitor.ongoingchat()&&(e=!1),FeedbackChat.loadChat(e,this.data.isAdminProfileUser),hideMenu(event),Crm.trackSpotLightAction("LiveChat Click")}Crm.client_tracking("Profile Revamp - Chat With Us Click")},community:function(){this.setData("showProfilePage",!1),Crm.client_tracking("Profile Revamp - Community Click");var e=this.data.communityLink;networkUtils.openUrl(e,"_blank","")},resources:function(e,t,a){var o;if(o=void 0===t||!1===t?RebrandLinkUtil.getProperty(e):e,void 0!==a){a="Profile Revamp - "+a+" Click";Crm.client_tracking(a)}this.setData("showProfilePage",!1),this.data.showMultiOrgs&&this.setData("showMultiOrgs",!1),""!==o&&networkUtils.openUrl(o,"_blank","")},returnToProductionAccount:function(){commonUtils.showHideLoadingDiv(!0),(new crmRequestPool).initiate({action:Crm.getCrmBasePath()+"/SandboxConfig.do?action=returnToProductionAccount",type:"GET",success:function(e){commonUtils.showHideLoadingDiv(),Utils.windowLocationHref(e)}})},openInfoUserId:function(){this.setData("allowMultipleProp",!0),this.setData("showUserIdPop",!0)},closeInfoUserId:function(e){e.stopPropagation(),this.setData("allowMultipleProp",!1),this.setData("showUserIdPop",!1)},personalSettings:function(e){if(this.setData("showProfilePage",!1),e.ctrlKey){var t=Lyte.Router.getURL({route:"crm.settings.section.personal-settings"});networkUtils.openUrl(t,"_blank","")}else Lyte.Router.transitionTo({route:"crm.settings.section.personal-settings"})},openOrgPage:function(){this.setData("showMultiOrgs",!1),this.setData("showProfilePage",!1),Crm.openOrganizationsPageInNewTab("org_profile_menu")},openNeedDemo:function(){this.setData("showProfilePage",!1),Crm.client_tracking("Profile Revamp - Need Demo Click");var e=window.location.origin+Crm.getCrmBasePath()+"/demoform";networkUtils.openUrl(e,"_blank","")}},fetchOrgDetailsAndShowOrgChange:function(){var e=this;if(!e.getData("orgAPIDataLoaded")){if(e.setData("orgAPIDataLoaded",!0),void 0===Crm.userDetails.orgEnvType)return!1;store.findAll("organization",{include:"info",from:"crm_org_profile"}).then((function(t){var a=store.peekAll("organization");e.setData("organizations",a);var o=t.$.meta.multi_org_enabled||void 0!==isSandboxAcc&&isSandboxAcc;e.setData("is_user_confirmed",t.$.meta.confirmed_user),e.setData("invitationCount",t.$.meta.invitation_count),1!==a.length||0!==e.getData("invitationCount")||e.getData("is_user_confirmed")&&t.$.meta.admin_of_any_crm||(o=!1),e.setData("showOrgChange",o)}))}}}),Lyte.Component.register("crm-calendar-menu",{_template:'<template tag-name="crm-calendar-menu"> <lyte-popover lt-prop-origin-elem="#sCalenDar" id="leftPanelCalendarP" lt-prop-duration="0" lt-prop-show-close-button="false" lt-prop-freeze="false" lt-prop-wrapper-class="popCal" on-close="{{method(\'closePopover\')}}" on-show="{{method(\'manipulateStyle\')}}" on-before-show="{{method(\'showCalendarMenu\')}}" lt-prop-scrollable="false" lt-prop-content-padding="0"> <template is="registerYield" yield-name="popover"> <lyte-popover-content> <lyte-calendar class="crmMenuCalendar" lt-prop-yield="true" lt-prop-format="YYYY-MM-DD" on-navigate="{{method(\'monthOrYearNavigate\')}}" on-date-selected="{{method(\'changeToDate\')}}" id="lyteCalendar" lt-prop-start-week-day="{{startWeekDay}}" lt-prop-header-type="dropdown"> <template is="registerYield" yield-name="footer"> <div id="calBtns" class="fR"> <p id="calBtns1" class="alignRight"> <a href="javascript:;" id="cal_dayView" onclick="{{action(\'showDateView\',\'dayview\')}}">{{getI18n(\'crm.report.day\')}}</a> <a href="javascript:;" class="mL10" id="cal_weekView" onclick="{{action(\'showDateView\',\'weekview\')}}">{{getI18n(\'crm.report.week\')}}</a> <a href="javascript:;" class="mL10" id="cal_monthView" onclick="{{action(\'showDateView\',\'monthview\')}}">{{getI18n(\'crm.report.month\')}}</a> </p> </div> </template> </lyte-calendar> </lyte-popover-content> </template> </lyte-popover> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"registerYield",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"text",position:[1,1,1,0]},{type:"attr",position:[1,1,3]},{type:"text",position:[1,1,3,0]},{type:"attr",position:[1,1,5]},{type:"text",position:[1,1,5,0]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}],_observedAttributes:["startWeekDay"],data:function(){return{startWeekDay:Lyte.attr("number",{default:Crm.calPreferences.WEEKSTARTSON})}},actions:{showDateView:function(e){var t=new Date,a=t.getDate(),o=t.getMonth()+1,i=t.getFullYear()+"-"+o+"-"+a;crmCalendar.goToView(i,e),document.getElementById("leftPanelCalendarP").ltProp("show",!1);Crm.trackSpotLightAction({dayview:"Calendar Page - Day Click",weekview:"Calendar Page - Week Click",monthview:"Calendar Page - Month Click"}[e])}},methods:{showCalendarMenu:function(){Crm.trackSpotLightAction("Calendar Top End - Icon Click"),this.executeMethod("createDatePicker",new Date)},monthOrYearNavigate:function(){this.executeMethod("createDatePicker",Utils.getUtcDateObj(arguments[2]))},createDatePicker:function(e){var t=new Date(e.getFullYear(),e.getMonth(),1),a=crmCalendar.calcTDWidth("monthview"),o=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate(),i=$("#topdivbg"),n=Math.ceil(($(window).height()-(i.length?i.height():0)-100)/100);$.ajax({url:Crm.getCrmBasePath()+"/events/CalendarView.do",type:"POST",data:"type=monthview&secAction=dotsForSmallCal&obtaineddate="+o+"&tdWidthParam="+a+"&userFetchCnt="+n,success:function(e){for(var t=document.querySelectorAll(".lyteCalCdate"),a=[],o=0;o<t.length;o++)a.push(t[o].getAttribute("data-date"));var i=e.split(":");for(o=0;o<i.length;o++)if(i[o]){var n=i[o].split("-"),s=n[0],r=n[1],l=n[2];if(1===r.length||1===l.length){1===r.length&&(r="0"+r),1===l.length&&(l="0"+l);var p=s+"-"+r+"-"+l;if(a.includes(p))document.querySelector("div[data-date='"+p+"']").classList.add("lyteCalEvent")}else{if(a.includes(i[o]))document.querySelector("div[data-date='"+i[o]+"']").classList.add("lyteCalEvent")}}}})},changeToDate:function(){arguments[1]&&crmCalendar.goToView(arguments[1],"dayview"),document.getElementById("leftPanelCalendarP").ltProp("show",!1)},closePopover:function(){document.getElementById("leftPanelCalendarP").ltProp("show",!1)},manipulateStyle:function(){if("undefined"!=typeof CrmPlusImpl&&CrmPlusImpl.isLoadedInCrmplus()){var e=crmCalendar.crmCalposition.left;$(document.querySelector(".popCal").querySelector(".lytePopover")).addClass("top0"),document.querySelector(".popCal").querySelector(".lytePopover").style.left=e-document.querySelector(".popCal").querySelector(".lytePopover").getBoundingClientRect().width/2+"px"}}},showCalendar:function(e){Activities.RemainderHideOnly(),$(".dICal").length&&$(".dICal").removeClass("dICal"),document.getElementById("iskanbanview")&&"true"===document.getElementById("iskanbanview").value||$(e.target).parents(".diUserSettingContainerData").is(":visible")||hideMenu(),$("#conditionalFieldRightSection").length&&void 0!==e&&27!==e.which&&void 0!==e.which&&$("#conditionalFieldRightSection").css("right","-650px"),$("#validationRuleRightSection").length&&void 0!==e&&27!==e.which&&void 0!==e.which&&$("#validationRuleRightSection").hide(),$(".crmTrendDashBoard").length&&CrmIntelligence.calendarDropAppend()},init:function(){this.setData("monthNames",crmCalendar.monthName.map((function(e){return e.html})))}}),Lyte.Component.register("calls-businesscard",{_template:'<template tag-name="calls-businesscard" id="bcard_{{activityId}}"> <div class="maininfo w100p dIB pR pT0"> <lyte-table lt-prop-yield="true"> <template is="registerYield" yield-name="yield"> <lyte-table-structure class="bcCardDetail fL"> <lyte-tbody> <template is="for" items="{{bcfieldsArray}}" item="item" index="index"><template is="if" value="{{expHandlers(expHandlers(expHandlers(item.colname,\'==\',&quot;OUTBOUNDCALLSTATUS&quot;),\'&amp;&amp;\',expHandlers(metadata.callDirection,\'!=\',&quot;Outbound&quot;)),\'!\')}}"><template case="true"> <lyte-tr id="bcardRow_{{item.sysRefName}}"> <lyte-td class="color7 pT10 valignTop alignright" style="width:calc(100% - 150px)"> <template is="if" value="{{expHandlers(item.colname,\'==\',&quot;CONTACTID&quot;)}}"><template case="true"> <template is="if" value="{{expHandlers(metadata.callDirection,\'==\',&quot;Outbound&quot;)}}"><template case="true"> {{getI18n(\'crm.activities.call.label.callee\')}} </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(metadata.callDirection,\'==\',&quot;Inbound&quot;),\'||\',expHandlers(metadata.callDirection,\'==\',&quot;Missed&quot;))}}"><template case="true"> {{getI18n(\'crm.activities.call.label.caller\')}} </template><template case="false"> {{getI18n(\'crm.activities.call.label.fromto\')}} </template></template></template></template> </template><template case="false"><template is="if" value="{{expHandlers(item.colname,\'==\',&quot;SEID&quot;)}}"><template case="true"> {{getI18n(\'crm.relatedTo\')}} </template><template case="false"><template is="if" value="{{expHandlers(item.colname,\'==\',&quot;SMOWNERID&quot;)}}"><template case="true"> <template is="if" value="{{expHandlers(expHandlers(metadata.callStatus,\'==\',&quot;Scheduled&quot;),\'||\',expHandlers(metadata.callStatus,\'==\',&quot;Overdue&quot;))}}"><template case="true"> {{item.displaylabel}} </template><template case="false"><template is="if" value="{{expHandlers(metadata.callDirection,\'==\',&quot;Outbound&quot;)}}"><template case="true"> {{getI18n(\'crm.activities.call.label.caller\')}} </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(metadata.callDirection,\'==\',&quot;Inbound&quot;),\'||\',expHandlers(metadata.callDirection,\'==\',&quot;Missed&quot;))}}"><template case="true"> {{getI18n(\'crm.activities.call.label.callee\')}} </template><template case="false"> {{item.displaylabel}} </template></template></template></template></template></template> </template><template case="false"> {{item.displaylabel}} </template></template></template></template></template></template> </lyte-td> <lyte-td class="pT10 pL10 valignTop wwbw wbbw" style="width:calc(100% - 150px)"> <template is="if" value="{{expHandlers(expHandlers(item.colname,\'==\',&quot;CONTACTID&quot;),\'&amp;&amp;\',expHandlers(isStatic,\'!\'))}}"><template case="true"> <template is="if" value="{{isRTLuser()}}"><template case="true"> <call-fromto-field activity-id="{{activityId}}" se-module="{{item.lookupmodule}}" se-id="{{item.defaultid}}" se-name="{{item.defaultvalue}}" phone-id="{{metadata.phoneId}}" phone-number="{{metadata.phoneNumber}}" show-unknown-if-absent="false" is-link="true" mover-bcard="true" bcard-placement="left"></call-fromto-field> </template><template case="false"> <call-fromto-field activity-id="{{activityId}}" se-module="{{item.lookupmodule}}" se-id="{{item.defaultid}}" se-name="{{item.defaultvalue}}" phone-id="{{metadata.phoneId}}" phone-number="{{metadata.phoneNumber}}" show-unknown-if-absent="false" is-link="true" mover-bcard="true" bcard-placement="right"></call-fromto-field> </template></template> </template><template case="false"><template is="if" value="{{expHandlers(item.colname,\'==\',&quot;CALLSTARTDATETIME&quot;)}}"><template case="true"> <span class="fL">{{getDateTime(item.defaultvalue,item.uitype)}}</span> <template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(metadata.callStatus,\'==\',&quot;Scheduled&quot;),\'||\',expHandlers(metadata.callStatus,\'==\',&quot;Overdue&quot;)),\'&amp;&amp;\',metadata.reminderTS),\'&amp;&amp;\',expHandlers(isStatic,\'!\'))}}"><template case="true"> <span onmouseenter="{{action(\'showTooltip\',getDateTime(metadata.reminderTS,786))}}" onmouseleave="{{action(\'hideTooltip\')}}" class="cP fL dIB ico-alarm mL5 mT5 svgIcons"></span> </template></template> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(item.colname,\'==\',&quot;SEID&quot;),\'&amp;&amp;\',expHandlers(isStatic,\'!\'))}}"><template case="true"> <entity-field module="{{item.lookupmodule}}" eid="{{item.defaultid}}" name="{{item.defaultvalue}}" is-link="true" show-module="false" mover-bcard="true" bcard-placement="right"></entity-field> </template><template case="false"><template is="if" value="{{expHandlers(item.colname,\'==\',&quot;SMOWNERID&quot;)}}"><template case="true"> <span class="cP" id="bcardOwner_{{activityId}}" onclick="{{action(\'openPath\',item.defaultid)}}" onmouseenter="{{action(\'showCtiNumber\')}}" onmouseleave="{{action(\'hideTooltip\')}}">{{item.defaultvalue}}</span> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(item.colname,\'==\',&quot;SMCREATORID&quot;),\'||\',expHandlers(item.colname,\'==\',&quot;MODIFIEDBY&quot;))}}"><template case="true"> <span purpose="showUserBC" data-params="{&quot;userId&quot;:&quot;{{item.defaultid}}&quot;}" id="ownerName_id" data-zcqa="{{item.zcqaId}}" class="defaultcursor">{{item.defaultvalue}}</span><br> <span class="f12 fontSmooth color_7 crm-font-regular">{{item.time}}</span> </template><template case="false"> {{item.defaultvalue}} </template></template></template></template></template></template></template></template></template></template> </lyte-td> </lyte-tr> </template></template></template> <template is="if" value="{{metadata.SubjectInBCard}}"><template case="true"> <lyte-tr id="bcard_SubjectOldRecords"> <lyte-td class="color7 pT10 alignright pR15" style="width:calc(100% - 150px)"> {{getI18n(\'Subject\')}} </lyte-td> <lyte-td class="pT10 pL10 wwbw wbbw" style="width:calc(100% - 150px)"> {{metadata.SubjectInBCard}} </lyte-td> </lyte-tr> </template></template> </lyte-tbody> </lyte-table-structure> </template> </lyte-table> </div> <template is="if" value="{{checkAndLoadZPBRecordingDep(recordingUrlArray)}}"><template case="true"> <div class="mT20 pR"> <zpb-audio voice-uri="{{getElementByIndex(recordingUrlArray,0)}}" header="{{recordingType}}"></zpb-audio> </div> </template><template case="false"> <template is="if" value="{{isNotEmpty(recordingType)}}"><template case="true"> <div id="audiourl" class="audioplayer" style="margin-top:20px;"> <h2 id="recordingtype" style="color:#777; font-size:1.6rem;font-weight: normal;border-bottom: none;">{{recordingType}}</h2> <audio-player audio-url-array="{{recordingUrlArray}}"></audio-player> </div> </template></template> </template></template> <template is="if" value="{{expHandlers(expHandlers(expHandlers(isClientPortalUser,\'!\'),\'&amp;&amp;\',expHandlers(isStatic,\'!\')),\'&amp;&amp;\',expHandlers(isNewDetailView,\'!\'))}}"><template case="true"> <div id="callsdtTag_section"> <div class="mT50"> <div class="contHeadInfo color_5 sum">{{getI18n(\'crm.label.small.tags\')}}</div> </div> <div id="callsdtTag"></div> </div> </template></template> </template>',_dynamicNodes:[{type:"registerYield",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3,1]},{type:"if",position:[1,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"text",position:[4,0]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1,3]},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"attr",position:[1,1,3]},{type:"if",position:[1,1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"text",position:[1,3,1]},{type:"componentDynamic",position:[1,3]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]},{type:"attr",position:[1,3]},{type:"componentDynamic",position:[1,3]}]}},default:{}}]}},default:{}},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,1,0]}]}},default:{}}],_templateAttributes:{type:"attr",position:[]},_observedAttributes:["activityId","bcfieldsArray","metadata","recordingType","recordingUrlArray","isNewDetailView","isStatic"],init:function(){var e=this.getData("bcfieldsArray");if(e&&e[6]&&"SMOWNERID"!==e[6].colname){var t=this.getData("metadata"),a={displaylabel:I18n.getMsg("Call Owner"),defaultvalue:t.ownerInfo,defaultid:t.ownerId,sysRefName:"Owner",colname:"SMOWNERID"};e.splice(6,0,a)}},dataObserver:function(){var e=this.getData("metadata").CONTACTID,t=this.getData("metadata").SEMODULE,a=this.getData("metadata").callDirection,o=this.getData("metadata").callStatus;if(this.$node.querySelector("#bcardRow_Subject")&&$("#bcard_SubjectOldRecords").hide(),"Missed"===a||"Scheduled"===o||"Overdue"===o||"Cancelled"===o){var i=this.$node.querySelector("#bcardRow_Call_Duration");i&&(i.style.display="none")}if(validationUtils.isEmpty(e)&&"Accounts"===t){var n=this.$node.querySelector(".iconPlus");n&&(n.style.display="none")}}.observes("bcfieldsArray","metadata").on("didConnect"),data:function(){return{activityId:Lyte.attr("string"),bcfieldsArray:Lyte.attr("array"),metadata:Lyte.attr("object"),recordingType:Lyte.attr("string"),recordingUrlArray:Lyte.attr("array"),isNewDetailView:Lyte.attr("boolean",{default:!1}),isStatic:Lyte.attr("boolean",{default:!1})}},actions:{showCtiNumber:function(){if(!isCallerInfoDisabled){var e=this.getData("metadata").custDialledNo,t=this.getData("metadata").callerId;if(e){var a=I18n.getMsg("crm.activities.call.label.dialledNo")+": "+e;crmui.showTooltip({content:a,isHTML:!0,position:"showOnRight"})}else if(t){a=I18n.getMsg("crm.activities.call.label.callerId")+": "+t;crmui.showTooltip({content:a,isHTML:!0,position:"showOnRight"})}}}},openPath:function(e){networkUtils.openUrl(Crm.getCrmBasePath()+"/ShowSetup.do?tab=usersPermi&subTab=viewUser&userId="+e,"_blank")},hideTooltip:function(){crmui.hideTooltip()},showTooltip:function(e){crmui.showTooltip(e)}}),Lyte.Component.register("approval-options",{_template:'<template tag-name="approval-options" use-strict="false"> <div id="ApprovalProcess" class="dIB robotoRegular pA r30"> <template is="if" value="{{ifEquals(isApproved,\'2\')}}"><template case="true"> <span class="svgIconsImg aprClockIconBlack dIB vam mR3"></span> <template is="if" value="{{showRespondLink}}"><template case="true"> <span class="color_2 robotoRegular f14">{{getI18n("crm.approvalProcess.label.waitingforyourresponse")}}</span> &nbsp; <div id="approvalStage" class="pL25 mT4" data-zcqa="approvalStage"> <template is="if" value="{{ifEquals(thisobj.parllel,\'2\')}}"><template case="true"> {{getI18n("crm.label.approvalProcess.stage")}} </template><template case="false"> {{getI18n("crm.approvalProcess.users.approved")}} </template></template> : <span id="approvalStagepop" class="link1">{{inc(thisobj.currLevel,expHandlers(1,\'-\'))}}/{{thisobj.totalApproverLevel}}</span> </div> <template is="if" value="{{expHandlers(entityModule,\'==\',&quot;Calls&quot;)}}"><template case="true"> <a id="respondApproval" class="p5" href="javascript:void(0);" data-zcqa="respondApproval">{{getI18n("crm.approval.link.respond")}}</a> <div id="approvalStage" class="pL25" data-zcqa="approvalStage"> {{getI18n("crm.label.approvalProcess.stage")}}: <a href="javascript:void(0)" id="approvalStagepop">{{inc(thisobj.currLevel,expHandlers(1,\'-\'))}}/{{thisobj.totalApproverLevel}}</a> </div> </template><template case="false"> <a id="respondApproval" class="f14" href="javascript:void(0);" data-zcqa="respondApproval">{{getI18n("crm.approval.link.respond")}} </a> <lyte-menu lt-prop-yield="true" class="haha" lt-prop-user-value="name" lt-prop-event="mouseenter" lt-prop-query="#respondApproval"> <template is="registerYield" yield-name="yield"> <lyte-menu-body> <lyte-menu-item data-zcqa="canvas_approval" id="respondApprovalAP" onclick="openApprovalPop(\'respondApproval\',\'{{entityModule}}\',\'{{entityId}}\', this, \'{{getI18n(\'crm.approvalProcess.label.yourCommentsHere\')}}\', undefined, \'{{currAppLevel}}\',\'approveRecord\');"> {{getI18n("crm.button.approve")}} </lyte-menu-item> <lyte-menu-item data-zcqa="canvas_reject" id="respondApprovalAP" onclick="openApprovalPop(\'respondApproval\',\'{{entityModule}}\',\'{{entityId}}\', this, \'{{getI18n(\'crm.approvalProcess.label.yourCommentsHere\')}}\', undefined, \'{{currAppLevel}}\',\'rejectRecord\');"> {{getI18n("crm.approvalProcess.label.reject")}} </lyte-menu-item> <lyte-menu-item data-zcqa="canvas_delegate" id="respondApprovalAP" onclick="openApprovalPop(\'respondApproval\',\'{{entityModule}}\',\'{{entityId}}\', this, \'{{getI18n(\'crm.approvalProcess.label.yourCommentsHere\')}}\', undefined, \'{{currAppLevel}}\',\'delegateRecord\');"> {{getI18n("crm.approvalProcess.label.delegate")}} </lyte-menu-item> </lyte-menu-body> </template> </lyte-menu> <lyte-modal id="approvalprocessModal" lt-prop-show="false" lt-prop-wrapper-class="dummy" lt-prop-re-render-modal="true" lt-prop-allow-multiple="true" on-close="{{method(\'modalClose\')}}" on-show="{{method(\'modalOpen\')}}" on-before-show="{{method(\'beforeOpen\')}}"> <template is="registerYield" yield-name="modal"> <lyte-modal-header> {{getI18n("crm.approvalProcess.label.approvalHeader")}}</lyte-modal-header> <lyte-modal-content> <table cellpadding="0" cellspacing="0" class="w100per modalTable"> <tbody> <tr is="if" lyte-if="true" value="{{ifEquals(isRejecorsAvailable,&quot;true&quot;)}}"></tr> <tr is="if" lyte-if="true" value="{{expHandlers(option,\'==\',\'delegateRecord\')}}"></tr> <tr> <td class="mymodaltextarea w350 pT15"> <lyte-input lt-prop-class="h100" id="appCmntsArea_canvas" data-zcqa="appCmntsArea" lt-prop-type="textarea" class="crmBoxInput crmTextarea appliedHeight" lt-prop-appearance="box" lt-prop-id="lyteinput" lt-prop-rows="2" lt-prop-cols="60" lt-prop-placeholder="{{getI18n(\'crm.approvalProcess.label.yourCommentsHere\')}}" lt-prop-maxlength="1000"> </lyte-input> </td> </tr> </tbody> </table> </lyte-modal-content> <lyte-modal-footer class="right"> <lyte-button data-zcqa="cancelBtn" class="mR5" onmousedown="{{action(&quot;preventEvent&quot;)}}" onclick="{{action(\'closeModal\')}}"> <template is="registerYield" yield-name="text"> {{getI18n(\'crm.nsocial.cancel\')}} </template> </lyte-button> <template is="if" value="{{expHandlers(option,\'==\',&quot;approveRecord&quot;)}}"><template case="true"> <lyte-button data-zcqa="appRecBtn" onmousedown="{{action(&quot;preventEvent&quot;)}}" lt-prop-appearance="primary" onclick="{{action(\'approveRecord\')}}"> <template is="registerYield" yield-name="text"> {{getI18n(\'crm.button.approve\')}} </template> </lyte-button> </template><template case="false"><template is="if" value="{{expHandlers(option,\'==\',&quot;rejectRecord&quot;)}}"><template case="true"> <lyte-button data-zcqa="rejRecBtn" onmousedown="{{action(&quot;preventEvent&quot;)}}" lt-prop-appearance="primary" onclick="{{action(\'approveRecord\')}}"> <template is="registerYield" yield-name="text">{{getI18n(\'crm.approvalProcess.label.reject\')}} </template> </lyte-button> </template><template case="false"> <lyte-button data-zcqa="delRecBtn" onmousedown="{{action(&quot;preventEvent&quot;)}}" lt-prop-appearance="primary" onclick="{{action(\'approveRecord\')}}"> <template is="registerYield" yield-name="text">{{getI18n(\'crm.approvalProcess.label.delegate\')}}</template> </lyte-button> </template></template></template></template> </lyte-modal-footer> </template> </lyte-modal> </template></template></template><template case="false"> <span class="color_2 proxima dvf14 vam dvprroValMsg">{{getI18n("crm.approvalProcess.label.waitingForApproval")}}</span> <div id="approvalStage" class="pL25 pT4" data-zcqa="nextapprovalStage"> <template is="if" value="{{ifEquals(thisobj.parllel,\'2\')}}"><template case="true"> {{getI18n("crm.label.approvalProcess.stage")}} </template><template case="false"> {{getI18n("crm.approvalProcess.users.approved")}} </template></template> : <span id="approvalStagepop" class="link1">{{inc(thisobj.currLevel,expHandlers(1,\'-\'))}}/{{thisobj.totalApproverLevel}}</span> </div> </template></template> </template><template case="false"> <template is="if" value="{{ifEquals(isApproved,\'3\')}}"><template case="true"> <div id="approvalStage" class=" pT4"> <template is="if" value="{{ifEquals(thisobj.parllel,\'2\')}}"><template case="true"> {{getI18n("crm.label.approvalProcess.stage")}} </template><template case="false"> {{getI18n("crm.approvalProcess.users.approved")}} </template></template> : <span id="approvalStagepop" class="link1">{{inc(thisobj.currLevel,expHandlers(1,\'-\'))}}/{{thisobj.totalApproverLevel}}</span> </div> <span class="color_2 crm-font-regular dvf14 vam dvprroValMsg">{{getI18n("crm.approvalProcess.label.lockedRecord")}}</span> &nbsp; <a href="javascript:void(0);" data-zcqa="zohocrm_canvas_resubmitApproval" class="f14" onclick="requestApproval(&quot;{{entityId}}&quot;, &quot;{{entityModule}}&quot;,&quot;{{getI18n(&quot;crm.approval.alert.reSubmitSuccess&quot;)}}&quot;,&quot;{{getI18n(&quot;crm.approval.alert.reSubmitFailure&quot;)}}&quot;);return false;"> {{getI18n(\'crm.approval.link.reSubmit\')}} </a> <span class="dIB vam aprGrayDot"></span> <span id="viewReason" class="col666 dIB vam aprLinkHover f13 cP" onclick="detailView.showReason()"> {{getI18n("crm.wf.auditLog.view.reason")}} </span> <lyte-popover lt-prop-content-padding="12px 20px 12px 12px" id="viewRsn" lt-prop-wrapper-class="viewRsn" lt-prop-origin-elem="#viewReason" lt-prop-show="false" lt-prop-freeze="false" lt-prop-show-close-button="false"> <template is="registerYield" yield-name="popover"><lyte-popover-content class="minw350"> <p class="f13">{{thisobj.comments}}</p></lyte-popover-content> </template> </lyte-popover> </template></template> </template></template> </div> </template>',_dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}},{type:"text",position:[3,3,0]},{type:"text",position:[3,3,2]},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"text",position:[3,1]},{type:"text",position:[3,3,0]},{type:"text",position:[3,3,2]}]},false:{dynamicNodes:[{type:"text",position:[1,0]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"text",position:[1,3,1]},{type:"componentDynamic",position:[1,3]},{type:"attr",position:[1,5]},{type:"text",position:[1,5,1]},{type:"componentDynamic",position:[1,5]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]},{type:"attr",position:[5]},{type:"registerYield",position:[5,1],dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1,1,1]},{type:"if",position:[3,1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]},{type:"attr",position:[1,3,1]},{type:"registerYield",position:[1,3,1,1],dynamicNodes:[{type:"attr",position:[1,3,1]},{type:"for",position:[1,3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[1,3]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,3,1]}]}},default:{},actualTemplate:'<template is="if" value="{{option == \'rejectRecord\'}}"><template case="true" depth="2"><table><tbody> <tr> <td class="pB10 pR30 alignRight pT15">{{getI18n(\'crm.label.approvalProcess.reject.stage\')}} </td> <td class="pB10 mymodaldropdown w350 pT15"> <lyte-dropdown lt-prop-freeze="false" lt-prop-tabindex="2" class="crmBoxDropdown w100per mandatoryField" lt-prop-appearance="box" on-option-selected="{{method(\'setRejectionStage\')}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box class="crmBoxDropbox"> <span class="lyteArrow"> </span> <lyte-drop-body> <template is="for" items="{{approverList}}" item="approverList" index="index"> <template is="if" value="{{indexOf(approverList,\'<sup>\',\'>\',expHandlers(1,\'-\'))}}"><template case="true"> <lyte-drop-item id="{{approverList}}" data-value="{{approverList}}">{{getValue(userNameLists,approverList)}}</lyte-drop-item> </template><template case="false"> <lyte-drop-item id="{{approverList}}" data-value="{{approverList}}">{{getValue(userNameLists,approverList)}}</lyte-drop-item> </template></template> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </td> </tr> </tbody></table></template></template>'}]}},default:{},actualTemplate:'<template is="if" value="{{ifEquals(isRejecorsAvailable,&quot;true&quot;)}}"><template case="true" depth="2"><table><tbody><tr is="if" lyte-if="true" value="{{expHandlers(option,\'==\',\'rejectRecord\')}}"></tr></tbody></table></template></template>'},{type:"attr",position:[3,1,1,3]},{type:"if",position:[3,1,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{},actualTemplate:'<template is="if" value="{{option == \'delegateRecord\'}}"><template case="true"> <crux-user-dropdown data-zcqa="approval_process_choose_user" cx-prop-no-user-label="{{getI18n(\'crm.lar.chooseUser\')}}" cx-prop-appearance="box" class="dIB" cx-prop-login-user-required="false" cx-prop-exclude="{{userId}}" cx-prop-filterable="false" cx-prop-type="single" on-user-selected="{{method(&quot;onUserSelect&quot;)}}" cx-prop-selected-user="{{lbind(userRecord)}}" cx-prop-filter-selected="ConfirmedUsers"></crux-user-dropdown> </template></template>'},{type:"attr",position:[3,1,1,5,1,1]},{type:"componentDynamic",position:[3,1,1,5,1,1]},{type:"componentDynamic",position:[3]},{type:"attr",position:[5,1]},{type:"registerYield",position:[5,1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[5,1]},{type:"attr",position:[5,3]},{type:"if",position:[5,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[0]}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[5]}]},{type:"componentDynamic",position:[5]}]}},default:{}}]},false:{dynamicNodes:[{type:"text",position:[1,0]},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}},{type:"text",position:[3,3,0]},{type:"text",position:[3,3,2]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}},{type:"text",position:[1,3,0]},{type:"text",position:[1,3,2]},{type:"text",position:[3,0]},{type:"attr",position:[5]},{type:"text",position:[5,1]},{type:"text",position:[9,1]},{type:"registerYield",position:[11,1],dynamicNodes:[{type:"text",position:[0,1,0]},{type:"componentDynamic",position:[0]}]},{type:"componentDynamic",position:[11]}]}},default:{}}]}},default:{}}],_observedAttributes:["entityId","entityModule","currAppLevel","isApproved","showRespondLink","waitingusers","rejectedUsers","show","option","userRecord","currLevel","fullLen","userId"],data:function(){return{entityId:Lyte.attr("string"),entityModule:Lyte.attr("string"),currAppLevel:Lyte.attr("string"),isApproved:Lyte.attr("string"),showRespondLink:Lyte.attr("boolean"),waitingusers:Lyte.attr("string"),rejectedUsers:Lyte.attr("string"),show:Lyte.attr("string"),option:Lyte.attr("string"),userRecord:Lyte.attr("object"),currLevel:Lyte.attr("string"),fullLen:Lyte.attr("string"),userId:Lyte.attr("array",{default:[]})}},init:function(){var e=this.getData("userId");e.push(Crm.userDetails.USER_ID),this.setData("userId",e);var t=this.getData("thisobj");setTimeout((function(){var e={};e.approversNameList=t,Lyte.Component.render("crm-approval-process-menu",{show:"true",query:"#respondApproval",thisObj:e},"#ApprovalProcess"),Lyte.Component.render("crm-approval-process-rejectorlistshow",{show:"true",query:"#approvalStagepop",thisObj:e,fromdetailview:!0,approverList:t.fullUserList},"#approvalStagepop")}),100)},actions:{closeModal:function(){$L("#approvalprocessModal")[0].component.setData("ltPropShow",!1),$L("#appCmntsArea_canvas")[0].ltProp("value","")},preventEvent:function(){event.preventDefault()},approveRecord:function(){approveRecord(this.getData("option"))},openApprovalPop:function(e){openApprovalPop("respondApproval",this.getData("entityModule"),this.getData("entityId"),e,I18n.getMsg("crm.approvalProcess.label.yourCommentsHere"),void 0,this.getData("currAppLevel"))},showtt:function(e){zctt.showtt(e)},hidett:function(){zctt.hidett()},requestApproval:function(){return requestApproval(this.getData("entityId"),this.getData("entityModule"),I18n.getMsg("crm.approval.alert.reSubmitSuccess"),I18n.getMsg("crm.approval.alert.reSubmitFailure")),!1}},methods:{modalClose:function(){$L("#approvalprocessModal")[0].component.setData("ltPropShow",!1),$L("#appCmntsArea_canvas")[0].ltProp("value",""),$("#FreezeLayer").hide()},beforeOpen:function(e){e.setData("ltPropOffset",{top:"0"})},modalOpen:function(e){var t=document.querySelector("."+e.getData("ltPropWrapperClass")+" lyte-modal-content");t.style.maxHeight="",t.style.height=""},onUserSelect:function(){var e=this.getData("userRecord").id,t=this.getData("userRecord").full_name,a=$("#deleUserName");a.text(t),a.attr("userId",e)}}}),Lyte.Component.register("entity-field",{_template:'<template tag-name="entity-field"> <div onmouseover="{{action(\'showBCardPop\',this)}}" class="oH entity_{{eid}} robotoRegular"> <template is="if" value="{{isLink}}"><template case="true"> <link-to class="cP entityElement" id="eid{{moverBcard}}{{eid}}" data-zcqa="detailView" lt-prop-route="crm.tab.module.entity.detail" lt-prop-dp="[&quot;{{module}}&quot;,&quot;{{eid}}&quot;]" lt-prop-class="{{estyle}}"> {{name}} </link-to> </template><template case="false"><template is="if" value="{{openInNewTab}}"><template case="true"> <link-to class="cP entityElement" id="eid{{moverBcard}}{{eid}}" data-zcqa="detailView" lt-prop-route="crm.tab.module.entity.detail" lt-prop-dp="[&quot;{{module}}&quot;,&quot;{{eid}}&quot;]" lt-prop-class="{{estyle}}" lt-prop-target="_blank" lt-prop-rel="noopener noreferrer"> {{name}} </link-to> </template><template case="false"> <span class="pL0 cP entityElement dIB vam fL {{estyle}} dvFlnone robotoMedium" id="eid{{moverBcard}}{{eid}}"> {{name}} </span> </template></template></template></template> <template is="if" value="{{showModule}}"><template case="true"> <span class="col888 f12 p3 pL10 pR10 mL5 mT10 ellipsistext wsnowrap grayBg2 dIB vam dvmT0 dvmL5 robotoRegular lh16" style="background:#eee;max-width:80px;" title="{{getSingularLabel(module)}}">{{getSingularLabel(module)}}</span> </template></template> </div> <template is="if" value="{{moverBcard}}"><template case="true"> <lyte-popover lt-prop-origin-elem="#eid{{moverBcard}}{{eid}}" class="bCardPop" lt-prop-duration="0" lt-prop-type="callout" lt-prop-placement="{{bcardPlacement}}" lt-prop-freeze="false" lt-prop-wrapper-class="profile-wrapper" lt-prop-show-close-button="false" lt-prop-width="400px" lt-prop-close-on-body-click="true"> <template is="registerYield" yield-name="popover"> <lyte-popover-content> <div class="bCardPopTemp{{eid}}"></div> </lyte-popover-content> </template> </lyte-popover> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}],_observedAttributes:["module","name","eid","isLink","openInNewTab","showModule","moverBcard","bcardPlacement","getBCard","estyle","highlightedText"],data:function(){return{module:Lyte.attr("string"),name:Lyte.attr("string"),eid:Lyte.attr("string"),isLink:Lyte.attr("boolean"),openInNewTab:Lyte.attr("boolean",{default:!1}),showModule:Lyte.attr("boolean",{default:!1}),moverBcard:Lyte.attr("boolean",{default:!1}),bcardPlacement:Lyte.attr("string",{default:"right"}),getBCard:Lyte.attr("boolean",{default:!1}),estyle:Lyte.attr("string",{default:"bold black"}),highlightedText:Lyte.attr("string")}},actions:{showBCardPop:function(){if(this.getData().moverBcard){var e=this.$node.querySelector(".bCardPop");e&&e.ltProp("show",!0),!this.getData().getBCard&&this.getEntityBCardDetails()}}},getEntityBCardDetails:function(){var e=".bCardPopTemp"+this.getData("eid"),t=void 0===this.getData().highlightedText||isCallerInfoDisabled?this.getData().name:this.getData().name+" ( "+this.getData().highlightedText+" )";Lyte.Component.render("static-businesscard",{module:this.getData("module"),entityId:this.getData().eid,headerName:t,highlightedText:this.getData().highlightedText},e),this.bindScrollListener(),this.setData("getBCard",!0)},bindScrollListener:function(){window.addEventListener("scroll",(function(){for(var e=document.querySelectorAll(".bCardPop"),t=e.length,a=0;a<t;a++){var o=e[a];o&&o.ltProp("show")&&o.ltProp("show",!1)}}),!0)}}),Lyte.Component.register("static-businesscard",{_template:'<template tag-name="static-businesscard"> <div class="oH"> <template is="if" value="{{photoFileId}}"><template case="true"> <div class="fL pR10"><img src="{{getCrmBasePath()}}/EntityImageAttach.do?action_module={{module}}&amp;entityId={{entityId}}&amp;actionName=readImage&amp;fileId={{photoFileId}}" class="userlistphoto w40"></div> </template></template> <div class="fL w270 oH"> <link-to class="mT5 dIB fL" lt-prop-route="crm.tab.module.entity.detail" lt-prop-dp="[&quot;{{module}}&quot;,&quot;{{entityId}}&quot;]">{{headerName}}</link-to> <span class="col888 f12 p3 pL10 pR10 fL mT5 mL5" style="background:#eee">{{getSingularLabel(module)}}</span> <template is="if" value="{{subheaderName}}"><template case="true"> <div class="mT5 cB">{{subheaderName}}</div> </template></template> </div> </div> <lyte-table class="callsRewamp_dv" lt-prop-yield="true"> <template is="registerYield" yield-name="yield"> <lyte-table-structure border="0" class="pT10"> <lyte-tbody> <template is="for" items="{{bcfieldsArray}}" item="item" index="index"> <lyte-tr> <lyte-td class="color7 pT10 wwbw wbba valignTop " width="150">{{item.fieldObj.displaylabel}}</lyte-td> <lyte-td class="pT10 pL10 wwbw wbba valignTop uiType{{item.fieldObj.uitype}}"><span>{{uiTypeTemplate(item.fieldObj)}}</span></lyte-td> </lyte-tr> </template> </lyte-tbody> </lyte-table-structure> </template> </lyte-table> </template>',_dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,0]}]}},default:{}},{type:"attr",position:[1,3,1]},{type:"text",position:[1,3,1,0]},{type:"componentDynamic",position:[1,3,1]},{type:"text",position:[1,3,3,0]},{type:"attr",position:[1,3,5]},{type:"if",position:[1,3,5],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"text",position:[1,3,0,0]},{type:"componentDynamic",position:[1,3]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}],_observedAttributes:["headerName","subheaderName","module","entityId","photoFileId","bcfieldsArray","highlightedText"],init:function(){store.findRecord("businesscard",this.getData("entityId"),{module:moduleRecordMapping[this.getData("module")].api_name}).then(function(e){for(var t=[],a=e.fields,o=e.data[0],i=a.length,n=0,s=["Leads","Contacts","Accounts","Potentials","Deals"],r=0;r<i;r++){var l=a[r],p=o[l.api_name];if(l.uitype=l.ui_type,l.displaylabel=l.field_label,l.colname=l.column_name,l.forBC=!0,l.defaultvalue=p,l.displayValue=p,null!==p&&"object"==typeof p&&(l.defaultid=p.id,l.defaultvalue=p.name,l.displayValue=p.name),null!==p&&p.constructor==Array){var c=p.length;l.defaultvalue="",l.displayValue="";for(var m=0;m<c;m++)l.defaultvalue=l.defaultvalue+p[m]+(m!=c-1?";":""),l.displayValue=l.displayValue+p[m]+(m!=c-1?";":"")}void 0!==l.lookup.module&&void 0!==l.lookup.module.api_name&&(l.lookupmodule=l.lookup.module.api_name),l.fromss=!0,"PHOTO_FILEID"==l.colname?(this.setData("photoFileId",l.displayValue),n+=1):r===n?validationUtils.isEmpty(this.getData("headerName"))&&this.setData("headerName",l.displayValue):r===n+1&&-1!=s.indexOf(this.getData("module"))?this.setData("subheaderName",l.displayValue):t.push({fieldObj:l,forBC:!0,module:this.getData("module")})}this.setData("bcfieldsArray",t);var d=this.getData().highlightedText;if(validationUtils.isNotEmpty(d)&&!isCallerInfoDisabled){var u=d.trim().replace(/[^0-9]/g,""),y=this.$node.querySelectorAll(".uiType33"),f=y.length;for(r=0;r<f;r++){var g=$(y[r]).text().trim().replace(/[^0-9]/g,"");validationUtils.isNotEmpty(g)&&g.search(u)>=0&&y[r].querySelector("span").classList.add("highlight-phn")}}}.bind(this))},data:function(){return{headerName:Lyte.attr("string"),subheaderName:Lyte.attr("string"),module:Lyte.attr("string"),entityId:Lyte.attr("string"),photoFileId:Lyte.attr("string"),bcfieldsArray:Lyte.attr("array"),highlightedText:Lyte.attr("string")}}}),Lyte.Component.register("phone-entity",{_template:'<template tag-name="phone-entity" use-strict="true"> <div class="phoneNo_{{defaultid}}"> <div href="javascript:void(0);" class="ellipsistext {{estyle}}" style="text-decoration:none"> <span class="mR10 pL0 dIB vam">{{defaultvalue}}</span> <i class="iconPlus dIB cP vam newNumber_{{defaultid}}" onclick="{{action(\'stopEvent\')}}"></i> </div> <lyte-menu lt-prop-yield="true" id="callNewNumPop" lt-prop-callout="true" lt-prop-event="click" lt-prop-query=".newNumber_{{defaultid}}" lt-prop-on-menu-click="{{action(\'closeMenu\')}}" style="display: none"> <template is="registerYield" yield-name="yield"> <lyte-menu-body class="NewNumAddMenu"> <lyte-menu-item onclick="{{action(\'showConversionForm\',\'Leads\')}}" id="ctiapi_unknown_add_leadActivity"> <lyte-menu-label class="dB"> {{getI18n(\'crm.label.convert.create.new.module\',getDisplayModuleName(\'Leads\',true))}} </lyte-menu-label> </lyte-menu-item> <lyte-menu-item onclick="{{action(\'showConversionForm\',\'Contacts\')}}" id="ctiapi_unknown_add_contactActivity"> <lyte-menu-label class="dB"> {{getI18n(\'crm.label.convert.create.new.module\',getDisplayModuleName(\'Contacts\',true))}} </lyte-menu-label> </lyte-menu-item> <lyte-menu-item class="bT1" onclick="{{action(\'showAssociateForm\',\'Leads\')}}" id="ctiapi_unknown_associate_leadActivity"> <lyte-menu-label class="dB"> {{getI18n(\'crm.tpi.ctiapi.associate.new.module\',getDisplayModuleName(\'Leads\',true))}} </lyte-menu-label> </lyte-menu-item> <lyte-menu-item onclick="{{action(\'showAssociateForm\',\'Contacts\')}}" id="ctiapi_unknown_associate_contactActivity"> <lyte-menu-label class="dB"> {{getI18n(\'crm.tpi.ctiapi.associate.new.module\',getDisplayModuleName(\'Contacts\',true))}} </lyte-menu-label> </lyte-menu-item> </lyte-menu-body> </template> </lyte-menu> <lyte-modal id="lookupListPopupPhoneEntity" lt-prop-bind-to-body="{{ltPropBindToBody}}" lt-prop-class="crmBoxModal" lt-prop-wrapper-class="lookupListTable {{if(fromSalesInbox,\'fromSalesInbox\',\'\')}}" on-close="{{method(\'closeLookup\')}}" lt-prop-show-close="true" lt-prop-allow-multiple="true" lt-prop-show="{{lbind(showCopy)}}"> <template is="registerYield" yield-name="modal"> <crux-lookup-filter-view module="{{module}}" on-data-loaded="{{method(\'onDataLoaded\')}}" mod-id="{{modId}}" on-value-change="{{method(\'onLookupSelect\')}}" flush-view="{{lbind(flushView)}}" show="{{lbind(showCopy)}}"> </crux-lookup-filter-view> </template> </lyte-modal> <form name="associatePhNoForm{{defaultid}}" action="javascript:" onsubmit="{{action(\'stopEvent\')}}"> <input type="hidden" id="assocWithId"> <input type="hidden" id="assocWithName"> <input type="hidden" id="assocWithModule"> </form> </div> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,1,0]},{type:"attr",position:[1,1,3]},{type:"attr",position:[1,3]},{type:"registerYield",position:[1,3,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,1,1,1]},{type:"componentDynamic",position:[1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"text",position:[1,3,1,1]},{type:"componentDynamic",position:[1,3,1]},{type:"componentDynamic",position:[1,3]},{type:"attr",position:[1,5]},{type:"text",position:[1,5,1,1]},{type:"componentDynamic",position:[1,5,1]},{type:"componentDynamic",position:[1,5]},{type:"attr",position:[1,7]},{type:"text",position:[1,7,1,1]},{type:"componentDynamic",position:[1,7,1]},{type:"componentDynamic",position:[1,7]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,3]},{type:"attr",position:[1,5]},{type:"registerYield",position:[1,5,1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,5]},{type:"attr",position:[1,7]}],_observedAttributes:["defaultvalue","defaultid","activityId","autotrigger","estyle","module","showCopy","ltPropBindToBody"],init:function(){Lyte.injectResources([networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("phonenumberassociate")],null)[0]])},autoTriggerFn:function(){if(null!=this.getData("autotrigger"))switch(this.getData("autotrigger")){case"add_lead":CrmPhoneNumbers.showConversionForm("Leads",this.getData("defaultvalue"),this.getData("defaultid"),this.getData("activityId"));break;case"add_contact":CrmPhoneNumbers.showConversionForm("Contacts",this.getData("defaultvalue"),this.getData("defaultid"),this.getData("activityId"));break;case"associate_lead":"undefined"!=typeof Crm&&Crm.userDetails.isLookupAdvancedSearchEnabled?this.executeMethod("openLookup","Leads"):CrmPhoneNumbers.showAssociateForm("Leads",this.getData("defaultvalue"),this.getData("defaultid"),this.getData("activityId"));break;case"associate_contact":"undefined"!=typeof Crm&&Crm.userDetails.isLookupAdvancedSearchEnabled?this.executeMethod("openLookup","Contacts"):CrmPhoneNumbers.showAssociateForm("Contacts",this.getData("defaultvalue"),this.getData("defaultid"),this.getData("activityId"))}}.observes("autotrigger").on("didConnect"),data:function(){return{defaultvalue:Lyte.attr("string"),defaultid:Lyte.attr("string"),activityId:Lyte.attr("string"),autotrigger:Lyte.attr("string"),estyle:Lyte.attr("string",{default:"bold black"}),module:Lyte.attr("string"),showCopy:Lyte.attr("boolean",{default:!1}),ltPropBindToBody:Lyte.attr("boolean",{default:!1})}},methods:{openLookup:function(e){var t=moduleRecordMapping[e].id;this.setData({module:e,modId:t}),CrmPhoneNumbers.currentActivityId=this.getData("activityId"),CrmPhoneNumbers.getAvailablePhoneFields(e,void 0,void 0,void 0,function(){var e=document.getElementsByTagName("crux-lookup-filter-view")[0];e?e.component.init():this.setData("ltPropBindToBody",!0)}.bind(this),CrmPhoneNumbers.noFieldErrFn)},onDataLoaded:function(){this.setData("showCopy",!0)},onLookupSelect:function(e){CrmPhoneNumbers.onInputChange(e.id,e.displayName,this.getData("module"),this.getData("defaultvalue"),this.getData("defaultid")),this.executeMethod("closeLookup")},closeLookup:function(){this.setData({showCopy:!1,flushView:!0,autotrigger:""})}},actions:{showConversionForm:function(e){Crm.userDetails.isStorageLimitReached?Crm.showStorageExceedPopup():CrmPhoneNumbers.showConversionForm(e,this.getData("defaultvalue"),this.getData("defaultid"),this.getData("activityId"))},showAssociateForm:function(e){Crm.userDetails.isStorageLimitReached?Crm.showStorageExceedPopup():"undefined"!=typeof Crm&&Crm.userDetails.isLookupAdvancedSearchEnabled?this.executeMethod("openLookup",e):CrmPhoneNumbers.showAssociateForm(e,this.getData("defaultvalue"),this.getData("defaultid"),this.getData("activityId"))}}},{mixins:["crm-stop-event"]}),Lyte.Component.register("calls-cvcard",{_template:'<template tag-name="calls-cvcard" id="cvcard_{{activityId}}" use-strict="true"> <div class="calls_Listitem"> <i class="dIB mL15 {{getCallIconClass(callType,status)}}"><crmutil-icon icon-name="{{getCallIconClass(callType,status)}}" icon-class="zcicn-{{getCallIconClass(callType,status)}} crmBaseIcon zcicn-color-mixed"></crmutil-icon></i> <span class="crm-font-bold dIB f14 oH tOE nwrp mw58per"> <call-fromto-field activity-id="{{activityId}}" contact-id="{{contactId}}" contact-name="{{contactName}}" se-id="{{seId}}" se-module="{{seModule}}" se-name="{{seName}}" phone-id="{{phoneId}}" phone-number="{{phoneNumber}}" estyle="w100per txtEllipsis" is-link="false" mover-bcard="false"></call-fromto-field> </span> <span class="fR f12 graytxt fontsmooth" id="lp_CallStartTime" onmouseover="{{action(\'showToolTip\')}}" onmouseout="{{action(\'hidett\')}}"> {{formattedStartTime}} </span> </div> <div class="w100per mT2 mB2 cB graytxt fontsmooth f12 oH"> <span class="fL mW42per ellipsistext calls_ownerName" id="lp_owner" title="{{ownerName}}"> {{ownerName}} </span> </div> </template>',_dynamicNodes:[{type:"attr",position:[1,1]},{type:"attr",position:[1,1,0]},{type:"componentDynamic",position:[1,1,0]},{type:"attr",position:[1,3,1]},{type:"componentDynamic",position:[1,3,1]},{type:"attr",position:[1,5]},{type:"text",position:[1,5,1]},{type:"attr",position:[3,1]},{type:"text",position:[3,1,1]}],_templateAttributes:{type:"attr",position:[]},_observedAttributes:["activityId","contactId","contactName","seId","seName","seModule","phoneId","phoneNumber","status","callType","startTime","formattedStartTime","duration","ownerName"],data:function(){return{activityId:Lyte.attr("string"),contactId:Lyte.attr("string"),contactName:Lyte.attr("string"),seId:Lyte.attr("string"),seName:Lyte.attr("string"),seModule:Lyte.attr("string"),phoneId:Lyte.attr("string"),phoneNumber:Lyte.attr("string"),status:Lyte.attr("string"),callType:Lyte.attr("string"),startTime:Lyte.attr("string"),formattedStartTime:Lyte.attr("string"),duration:Lyte.attr("string"),ownerName:Lyte.attr("string")}},actions:{showToolTip:function(){var e=I18n.getMsg("Call Start Time")+": "+this.getData("startTime")+"<br/>"+I18n.getMsg("Call Duration")+": "+this.getData("duration");zctt.showtt(e)},hidett:function(){zctt.hidett(1)}}}),Lyte.Component.register("calls-kanbancard",{_template:'<template tag-name="calls-kanbancard" id="kanban_{{activityId}}"> <div class="overflhidden"> <div class="pT20 pB20 tkInnerInfo callModContDiv dIB w100per"> <div class="dIB w100per"> <span class="dIB callModiconsDiv {{getCallIconClass(callType,status)}}"><crmutil-icon icon-name="{{getCallIconClass(callType,status)}}" icon-class="zcicn-{{getCallIconClass(callType,status)}} crmBaseIcon zcicn-color-mixed"></crmutil-icon></span> <span id="name" class="dIB f15 overflhidden" style="text-overflow: ellipsis;white-space:nowrap; max-width: 53%"> <a id="kvshowpopup" class="colorblack2" href="{{getCrmBasePath()}}/tab/Activities/{{activityId}}?sub_module=Calls"> <span id="CallerCallee"> <call-fromto-field activity-id="{{activityId}}" contact-id="{{contactId}}" contact-name="{{contactName}}" se-id="{{seId}}" se-module="{{seModule}}" se-name="{{seName}}" phone-id="{{phoneId}}" phone-number="{{phoneNo}}" is-link="false" mover-bcard="false" estyle="w100per txtEllipsis"></call-fromto-field> </span> <span style="display:none;" id="relatedto">{{seName}}</span> <span style="display:none;" id="contactname">{{contactName}}</span> </a> </span> <span class="fR colorKsmalltext grayDate" style="width: 30%;"> {{formattedStartTime}} </span> </div> <div class="dIB w100per mT2 mB2 bdrbox"> <a href="{{getCrmBasePath()}}/ShowSetup.do?tab=usersPermi&amp;subTab=viewUser&amp;userId={{ownerId}}" id="taskOwner" target="_blank" class="colorKsmalltext dIB mW43per fL ellipsistext crm-font-regular" title="{{ownerName}}"> {{ownerName}} </a> <span class="fR mW35per font11 tkvPriority colorKsmalltext ellipsistext cursorPointer crm-font-regular" title="{{duration}}"> {{duration}} </span> </div> <div class="clearB"></div> </div> </div> </template>',_dynamicNodes:[{type:"attr",position:[1,1,1,1]},{type:"attr",position:[1,1,1,1,0]},{type:"componentDynamic",position:[1,1,1,1,0]},{type:"attr",position:[1,1,1,3,1]},{type:"attr",position:[1,1,1,3,1,1,1]},{type:"componentDynamic",position:[1,1,1,3,1,1,1]},{type:"text",position:[1,1,1,3,1,3,0]},{type:"text",position:[1,1,1,3,1,5,0]},{type:"text",position:[1,1,1,5,1]},{type:"attr",position:[1,1,3,1]},{type:"text",position:[1,1,3,1,1]},{type:"attr",position:[1,1,3,3]},{type:"text",position:[1,1,3,3,1]}],_templateAttributes:{type:"attr",position:[]},_observedAttributes:["contactName","contactId","seName","seModule","seId","phoneId","phoneNo","activityId","status","callType","formattedStartTime","duration","ownerName","ownerId"],data:function(){return{contactName:Lyte.attr("string"),contactId:Lyte.attr("string"),seName:Lyte.attr("string"),seModule:Lyte.attr("string"),seId:Lyte.attr("string"),phoneId:Lyte.attr("string"),phoneNo:Lyte.attr("string"),activityId:Lyte.attr("string"),status:Lyte.attr("string"),callType:Lyte.attr("string"),formattedStartTime:Lyte.attr("string"),duration:Lyte.attr("string"),ownerName:Lyte.attr("string"),ownerId:Lyte.attr("string")}}}),Lyte.Component.register("calls-dpmenu",{_template:'<template tag-name="calls-dpmenu" id="dpmenu_{{detailViewJson.entityid}}" class="ZPBListnerCls"> <input type="hidden" id="callsdp_subject" value="{{metadata.CallSubject}}"> <lyte-table lt-prop-yield="true"> <template is="registerYield" yield-name="yield"> <lyte-table-structure style="width:100%" class="dvbtnlayer callsdpmenutable" id="detailViewButtonLayerMainTable"> <lyte-tr id="detailViewButtonLayerMainTableRow"> <lyte-td align="center" nowrap="" class="pL10 pR5 pB15 w30 hide detailView_visible"> <template is="if" value="{{expHandlers(detailViewJson.isClientPortalUser,\'||\',ifEquals(detailViewJson.backTo,&quot;gsearch&quot;))}}"><template case="true"> <a id="backArrowDV" href="javascript:void(0);" data-cid="backOneLevel" data-zcqa="backOneLevel" data-params="{&quot;step&quot;:&quot;{{detailViewJson.step}}&quot;}"> <span class="backtoIcon dIB" onmouseover="{{action(\'loadToolTip\')}}" onmouseout="{{action(\'hidett\')}}"></span> </a> </template><template case="false"> <a id="backArrowDV" href="{{getCrmBasePath()}}/tab/{{detailViewJson.moduleName}}" data-cid="backOneLevel" data-zcqa="backOneLevel" data-params="{&quot;step&quot;:&quot;{{detailViewJson.step}}&quot;}"> <span class="backtoIcon dIB" onmouseover="{{action(\'loadToolTip\')}}" onmouseout="{{action(\'hidett\')}}"></span> </a> </template></template> </lyte-td> <lyte-td class="pL10 detailView_visible pT0" id="dv_title" style="width:44%"> <div id="topSectionTitle" class="sectionTitle" style="padding-left:3px; margin-top:1px;"> <div id="headervalue_CONTACTID" class="dvTitle oH pR"> <span class="dIB mT10 vam dvmT0 {{getCallIconClass(metadata.callDirection,metadata.callStatus)}}"><crmutil-icon icon-name="{{getCallIconClass(metadata.callDirection,metadata.callStatus)}}" icon-class="zcicn-{{getCallIconClass(metadata.callDirection,metadata.callStatus)}} crmBaseIcon zcicn-color-mixed"></crmutil-icon></span> <call-fromto-field class="dIB vam mL10" activity-id="{{detailViewJson.entityid}}" contact-id="{{metadata.CONTACTID}}" contact-name="{{metadata.CONTACTNAME}}" se-module="{{metadata.SEMODULE}}" se-id="{{metadata.SEID}}" se-name="{{metadata.ENTITYNAME}}" phone-id="{{metadata.phoneId}}" phone-number="{{metadata.phoneNumber}}" is-link="false" mover-bcard="false" show-module="true" title="{{detailViewJson.relContName}}" style="max-width:calc(100% - 50px)" estyle="black wwbw wbbw"></call-fromto-field> </div> <template is="if" value="{{expHandlers(expHandlers(expHandlers(detailViewJson.isClientPortalUser,\'!\'),\'&amp;&amp;\',contains(&quot;[\'1\',\'2\',\'3\']&quot;,detailViewJson.isApproved)),\'&amp;&amp;\',detailViewJson.isOwnerCondition)}}"><template case="true"> <span id="flw_spn"> <template is="if" value="{{detailViewJson.isFollowingRec}}"><template case="true"> <a data-zcqa="Follow_btn" href="javascript:void(0)" onclick="{{action(\'toggleFollowup\',this,\'unfollow\')}}" class="graytag cP"> {{getI18n(\'crm.label.pulse.unfollow\')}}</a> </template><template case="false"> <a data-zcqa="Follow_btn" href="javascript:void(0)" onclick="{{action(\'toggleFollowup\',this,\'follow\')}}" class="graytag cP"> {{getI18n(\'crm.label.pulse.follow\')}} </a> </template></template> </span> </template></template> </div> <template is="if" value="{{getUserDetail(\'detailView_newUI\')}}"><template case="true"> <crm-detailview-tag module="Calls"></crm-detailview-tag> </template></template> </lyte-td> <template is="if" value="{{ifEquals(detailViewJson.isExternalSource,&quot;true&quot;)}}"><template case="true"> <lyte-td class="pL10 pR businessInfoBtn detailView_hidden" data-zcqa="businessInfoPopupBtn" onclick="{{action(\'openBusinessInfoPopup\',encodeJS(detailViewJson.externalSourceId))}}"> <input type="button" class="viewSkyeye pR" value="{{getI18n(\'crm.skyeye.view.btn\',\'crm.skyeye.name\')}}"> <span class="noDataLoading dN"> <span></span><span></span><span></span> </span> <span class="skyeyeLogo pA dIB cP"></span> <div class="noDataTTWrapper pA"> <div class="noDataTT f12"> <div class="">{{getI18n(\'crm.skyeye.account.info.not.exists\',\'crm.skyeye.name\')}}</div> </div> </div> </lyte-td> </template></template> <lyte-td nowrap="" class="dvmo fR "> <div class="alignright clearB" onclick="{{action(\'stopEvent\')}}"> <span id="CustomizeTools{{detailViewJson.entityid}}" data-zcqa="CustomizeTools" class="newgraybtn moredot_h2_35 moredotparentBtn mR0 mL10" style="display: inline-block;"></span> </div> <div class="ddM" id="customizedd" style="display:none; position:absolute;" onclick="{{action(\'stopEvent\')}}"> <lyte-menu lt-prop-yield="true" lt-prop-callout="true" lt-prop-event="click" lt-prop-query="#CustomizeTools{{detailViewJson.entityid}}"> <template is="registerYield" yield-name="yield"> <lyte-menu-body class="NewNumAddMenu"> <template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(pbServiceName,\'===\',&quot;ZPB&quot;),\'||\',expHandlers(pbServiceName,\'===\',&quot;CRM_TELEPHONY&quot;)),\'&amp;&amp;\',detailViewJson.phoneDetails.phoneNo),\'&amp;&amp;\',hasCallSupportedModules(detailViewJson.relatedModule)),\'&amp;&amp;\',contains(&quot;[\'Scheduled\',\'Overdue\']&quot;,metadata.callStatus))}}"><template case="true"> <lyte-menu-group> <template is="if" value="{{ifEquals(detailViewJson.userid,detailViewJson.ownerId)}}"><template case="true"> <lyte-menu-item data-zcqa="completeCallMoreOption" onclick="{{action(\'fetchCallDetails\',\'Completed\')}}"> <lyte-menu-label class="dB"> {{getI18n("crm.label.mark.completed")}} </lyte-menu-label> </lyte-menu-item> </template></template> <template is="if" value="{{expHandlers(detailViewJson.hidden.RECORD_FIELDS_EDIT_ALLOWED,\'&amp;&amp;\',hasEditPermission)}}"><template case="true"> <lyte-menu-item data-zcqa="scheduleCallMoreOption" onclick="{{action(\'fetchCallDetails\',\'Scheduled\')}}"> <lyte-menu-label class="dB"> {{getI18n("crm.label.reschedule.call",getI18n("Call"))}} </lyte-menu-label> </lyte-menu-item> <lyte-menu-item data-zcqa="cancelCallMoreOption" onclick="{{action(\'fetchCallDetails\',\'Cancelled\')}}"> <lyte-menu-label class="dB"> {{getI18n("crm.label.cancel.call",getI18n("Call"))}} </lyte-menu-label> </lyte-menu-item> </template></template> </lyte-menu-group> </template></template> <template is="if" value="{{detailViewJson.editAllowedMod}}"><template case="true"> <lyte-menu-group> <template is="if" value="{{detailViewJson.hidden.RECORD_FIELDS_EDIT_ALLOWED}}"><template case="true"> <lyte-menu-item data-zcqa="editBtn" data-cid="editbtn" id="editRecordbtn" data-params="{&quot;from&quot;:&quot;detailView&quot;,&quot;module&quot;:&quot;{{detailViewJson.module}}&quot;,&quot;id&quot;:&quot;{{detailViewJson.entityid}}&quot;}"> <lyte-menu-label class="dB"> {{getI18n("crm.button.edit")}} </lyte-menu-label> </lyte-menu-item> </template></template> <lyte-menu-item name="Delete2" data-zcqa="dvdeleteEntity" data-cid="deleteEntity" data-params="{&quot;module&quot;:&quot;{{detailViewJson.module}}&quot;,&quot;id&quot;:&quot;{{detailViewJson.entityid}}&quot;}"> <lyte-menu-label class="dB"> {{getI18n("crm.button.delete")}} </lyte-menu-label> </lyte-menu-item> </lyte-menu-group> </template></template> <template is="if" value="{{expHandlers(expHandlers(expHandlers(detailViewJson.isCallerCalleeMailLocked,\'!\'),\'&amp;&amp;\',expHandlers(detailViewJson.isClientPortalUser,\'!\')),\'&amp;&amp;\',isNotEmpty(metadata.CONTACTID))}}"><template case="true"> <lyte-menu-group> <lyte-menu-item name="Mail" data-zcqa="sendMail" onclick="{{action(\'EntSendMail\',\'Contacts\',metadata.CONTACTID,\'Contact\')}}"> <lyte-menu-label class="dB"> {{getI18n("crm.button.license.sendMail")}} </lyte-menu-label> </lyte-menu-item> </lyte-menu-group> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(detailViewJson.isCallerCalleeMailLocked,\'!\'),\'&amp;&amp;\',expHandlers(detailViewJson.isClientPortalUser,\'!\')),\'&amp;&amp;\',isNotEmpty(metadata.SEID)),\'&amp;&amp;\',expHandlers(metadata.SEMODULE,\'==\',&quot;Leads&quot;))}}"><template case="true"> <lyte-menu-group> <lyte-menu-item name="Mail" data-zcqa="sendMail" onclick="{{action(\'EntSendMail\',metadata.SEMODULE,metadata.SEID,encodeJS(getSingleUserModMap(metadata.SEMODULE)))}}"> <lyte-menu-label class="dB"> {{getI18n("crm.button.license.sendMail")}} </lyte-menu-label> </lyte-menu-item> </lyte-menu-group> </template></template></template></template> <template is="if" value="{{expHandlers(detailViewJson.isClientPortalUser,\'!\')}}"><template case="true"> <lyte-menu-group> <lyte-menu-item name="Print2" data-zcqa="printPreview" onclick="{{action(\'openPrintTemplatePop\')}}"> <lyte-menu-label class="dB"> {{getI18n("crm.button.print.view")}} </lyte-menu-label> </lyte-menu-item> </lyte-menu-group> </template></template> <template is="if" value="{{expHandlers(expHandlers(detailViewJson.isChatConfigured,\'||\',detailViewJson.isSlackConfigured),\'||\',detailViewJson.isCiscoTeamsAuthorised)}}"><template case="true"> <lyte-menu-group> <template is="if" value="{{detailViewJson.isChatConfigured}}"><template case="true"> <lyte-menu-item name="ShareViaChat" data-cid="cliqshare" data-zcqa="shareViaChat" data-params="{&quot;module&quot;:&quot;{{detailViewJson.module}}&quot;,&quot;id&quot;:&quot;{{detailViewJson.entityid}}&quot;,&quot;chatType&quot;:&quot;0&quot;,&quot;reqFrom&quot;:&quot;record&quot;}"> <lyte-menu-label class="dB"> {{getI18n("crm.chat.share",getIntegrationName(\'ZOHO_CLIQ\'))}} </lyte-menu-label> </lyte-menu-item> </template></template> <template is="if" value="{{detailViewJson.isSlackConfigured}}"><template case="true"> <lyte-menu-item data-zcqa="slackshare" name="Slack" data-cid="slackshare" data-params="{&quot;module&quot;:&quot;{{detailViewJson.module}}&quot;,&quot;id&quot;:&quot;{{detailViewJson.entityid}}&quot;,&quot;chatType&quot;:&quot;1&quot;,&quot;reqFrom&quot;:&quot;record&quot;}"> <lyte-menu-label class="dB"> {{getI18n("crm.workflow.share.via.slack")}} </lyte-menu-label> </lyte-menu-item> </template></template> <template is="if" value="{{detailViewJson.isCiscoTeamsAuthorised}}"><template case="true"> <lyte-menu-item data-zcqa="ciscoteamsshare" name="CiscoTeams" data-cid="ciscoteamsshare" data-params="{&quot;module&quot;:&quot;{{detailViewJson.module}}&quot;,&quot;id&quot;:&quot;{{detailViewJson.entityid}}&quot;,&quot;chatType&quot;:&quot;2&quot;,&quot;reqFrom&quot;:&quot;record&quot;}"> <lyte-menu-label class="dB"> {{getI18n("crm.cisco.teams.share")}} </lyte-menu-label> </lyte-menu-item> </template></template> </lyte-menu-group> </template></template> </lyte-menu-body> </template> </lyte-menu> </div> </lyte-td> <lyte-td class="wsnowrap alignright fR pR10"> <template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(pbServiceName,\'===\',&quot;ZPB&quot;),\'||\',expHandlers(pbServiceName,\'===\',&quot;CRM_TELEPHONY&quot;)),\'&amp;&amp;\',detailViewJson.phoneDetails.phoneNo),\'&amp;&amp;\',hasCallSupportedModules(detailViewJson.relatedModule))}}"><template case="true"> <template is="if" value="{{contains(&quot;[\'Scheduled\',\'Overdue\']&quot;,metadata.callStatus)}}"><template case="true"> <call-button call-entity-id="{{detailViewJson.entityid}}" who-id="{{if(isEmpty(detailViewJson.relContId),metadata.SEID,detailViewJson.relContId)}}" entity-name="{{if(isEmpty(detailViewJson.relContId),metadata.ENTITYNAME,detailViewJson.relContName)}}" who-module="{{detailViewJson.relatedModule}}" phone-numbers="{{detailViewJson.phoneDetails.phoneNo}}" generate-new-call="false" pb-service-name="{{whichPBService()}}"></call-button> </template><template case="false"> <call-button call-entity-id="{{detailViewJson.entityid}}" who-id="{{if(isEmpty(detailViewJson.relContId),metadata.SEID,detailViewJson.relContId)}}" entity-name="{{if(isEmpty(detailViewJson.relContId),metadata.ENTITYNAME,detailViewJson.relContName)}}" who-module="{{detailViewJson.relatedModule}}" phone-numbers="{{detailViewJson.phoneDetails.phoneNo}}" generate-new-call="true" pb-service-name="{{whichPBService()}}"></call-button> </template></template> </template><template case="false"><template is="if" value="{{contains(&quot;[\'Scheduled\',\'Overdue\']&quot;,metadata.callStatus)}}"><template case="true"> <div class="dIB primaryDDBtn bRadius3 cP"> <template is="if" value="{{ifEquals(detailViewJson.userid,detailViewJson.ownerId)}}"><template case="true"> <span class="dIB fL ellipsistext wsnowrap primarybtn completeCalTxtBtn" data-zcqa="completeCallMoreOption" onclick="{{action(\'fetchCallDetailsAndEtc\',\'Completed\')}}" style="padding:8px 10px; max-width:180px" title="{{getI18n(\'crm.label.mark.completed\')}}">{{getI18n("crm.label.mark.completed")}}</span> </template><template case="false"><template is="if" value="{{expHandlers(detailViewJson.hidden.RECORD_FIELDS_EDIT_ALLOWED,\'&amp;&amp;\',hasEditPermission)}}"><template case="true"> <span class="dIB fL ellipsistext wsnowrap primarybtn completeCalTxtBtn" data-zcqa="scheduleCallMoreOption" onclick="{{action(\'fetchCallDetailsAndEtc\',\'Scheduled\')}}" style="padding:8px 10px; max-width:180px" title="{{getI18n(\'crm.label.reschedule.call\',getI18n(\'Call\'))}}">{{getI18n("crm.label.reschedule.call",getI18n("Call"))}}</span> </template></template></template></template> <template is="if" value="{{expHandlers(detailViewJson.hidden.RECORD_FIELDS_EDIT_ALLOWED,\'&amp;&amp;\',hasEditPermission)}}"><template case="true"> <span class="whiteDownArw fL dIB completeCalBtn primarybtn" id="scheduleCallMoreOption{{detailViewJson.entityid}}" onclick="{{action(\'nextShow\',this)}}"> <i href="javascript:;" class="dB pR"></i> </span> </template></template> </div> <lyte-menu lt-prop-yield="true" id="completeCallPop" lt-prop-callout="true" lt-prop-event="click" lt-prop-query="#scheduleCallMoreOption{{detailViewJson.entityid}}"> <template is="registerYield" yield-name="yield"> <lyte-menu-body class="NewNumAddMenu"> <template is="if" value="{{ifEquals(detailViewJson.userid,detailViewJson.ownerId)}}"><template case="true"> <lyte-menu-item data-zcqa="completeCallMoreOption" onclick="{{action(\'fetchCallDetails\',\'Completed\')}}"> <lyte-menu-label class="dB"> {{getI18n("crm.label.mark.completed")}} </lyte-menu-label> </lyte-menu-item> </template></template> <template is="if" value="{{expHandlers(detailViewJson.hidden.RECORD_FIELDS_EDIT_ALLOWED,\'&amp;&amp;\',hasEditPermission)}}"><template case="true"> <lyte-menu-item data-zcqa="scheduleCallMoreOption" onclick="{{action(\'fetchCallDetails\',\'Scheduled\')}}"> <lyte-menu-label class="dB"> {{getI18n("crm.label.reschedule.call",getI18n("Call"))}} </lyte-menu-label> </lyte-menu-item> <lyte-menu-item data-zcqa="cancelCallMoreOption" onclick="{{action(\'fetchCallDetails\',\'Cancelled\')}}"> <lyte-menu-label class="dB"> {{getI18n("crm.label.cancel.call",getI18n("Call"))}} </lyte-menu-label> </lyte-menu-item> </template></template> </lyte-menu-body> </template> </lyte-menu> </template></template></template></template> </lyte-td> <template is="if" value="{{getUserDetail(\'isDetailViewNewUIKeyPresent\')}}"><template case="true"> <lyte-td class="wsnowrap alignright fR pR10"> <template is="if" value="{{getUserDetail(\'detailView_newUI\')}}"><template case="true"> <div class="dv-try-old-version mR10 vam" onclick="{{action(\'switchDetailViewUI\',false)}}">{{getI18n(\'crm.import.switch.old.version\')}}</div> </template><template case="false"> <div class="dv-try-new-version mR10 vam" onclick="{{action(\'switchDetailViewUI\',true)}}">{{getI18n(\'crm.import.switch.new.version\')}}</div> </template></template> </lyte-td> </template></template> <template is="if" value="{{detailViewJson.allowNavigation}}"><template case="true"> <lyte-td style="width:90px !important;" nowrap="" id="navigtd"> <div class="alignright pT8"> <img id="detailPrevious" title="{{getI18n(&quot;crm.label.previous.record&quot;)}}" data-cid="NavPrevious" data-params="{&quot;id&quot;:&quot;{{detailViewJson.entityid}}&quot;,&quot;recordNum&quot;:&quot;{{detailViewJson.hidden.recordNum}}&quot;,&quot;cvid&quot;:&quot;{{detailViewJson.hidden.cvid}}&quot;,&quot;userId&quot;:&quot;{{detailViewJson.userid}}&quot;,&quot;module&quot;:&quot;{{detailViewJson.module}}&quot;, &quot;stageId&quot;:&quot;{{detailViewJson.hidden.stageId}}&quot;}" border="0" class="prev-dv" src="{{imgStaticPath()}}/spacer_e17b417_.gif" width="29px" height="27px"> <img id="detailNext" title="{{getI18n(&quot;crm.label.next.record&quot;)}}" data-cid="NavNext" data-params="{&quot;fromActSubModuleListView&quot;:{{isActivitySplitDone}},&quot;id&quot;:&quot;{{detailViewJson.entityid}}&quot;,&quot;recordNum&quot;:&quot;{{detailViewJson.hidden.recordNum}}&quot;,&quot;cvid&quot;:&quot;{{detailViewJson.hidden.cvid}}&quot;,&quot;userId&quot;:&quot;{{detailViewJson.userid}}&quot;,&quot;module&quot;:&quot;{{detailViewJson.module}}&quot;, &quot;stageId&quot;:&quot;{{detailViewJson.hidden.stageId}}&quot;}" border="0" src="{{imgStaticPath()}}/spacer_e17b417_.gif" width="29px" height="27px" class="next-dv">&nbsp; </div> </lyte-td> </template></template> </lyte-tr> </lyte-table-structure> </template> </lyte-table> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"attr",position:[1,1,1,1]},{type:"if",position:[1,1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]}]}},default:{}},{type:"componentDynamic",position:[1,1,1]},{type:"attr",position:[1,1,3,1,1,1]},{type:"attr",position:[1,1,3,1,1,1,0]},{type:"componentDynamic",position:[1,1,3,1,1,1,0]},{type:"attr",position:[1,1,3,1,1,3]},{type:"componentDynamic",position:[1,1,3,1,1,3]},{type:"attr",position:[1,1,3,1,3]},{type:"if",position:[1,1,3,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,1,3,3]},{type:"if",position:[1,1,3,3],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1,1,3]},{type:"attr",position:[1,1,5]},{type:"if",position:[1,1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,7,1,1,0]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,1,7,1]},{type:"attr",position:[1,1,7,1,1]},{type:"attr",position:[1,1,7,3]},{type:"attr",position:[1,1,7,3,1]},{type:"registerYield",position:[1,1,7,3,1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"text",position:[3,1,1]},{type:"componentDynamic",position:[3,1]},{type:"componentDynamic",position:[3]}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"text",position:[1,3,1,1]},{type:"componentDynamic",position:[1,3,1]},{type:"componentDynamic",position:[1,3]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,1,1,1]},{type:"componentDynamic",position:[1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,1,1,1]},{type:"componentDynamic",position:[1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,7]},{type:"if",position:[1,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,1,1,1]},{type:"componentDynamic",position:[1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,9]},{type:"if",position:[1,9],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1,7,3,1]},{type:"componentDynamic",position:[1,1,7]},{type:"attr",position:[1,1,9,1]},{type:"if",position:[1,1,9,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"text",position:[3,1,1]},{type:"componentDynamic",position:[3,1]},{type:"componentDynamic",position:[3]}]}},default:{}},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1,1,9]},{type:"attr",position:[1,1,11]},{type:"if",position:[1,1,11],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,1,13]},{type:"if",position:[1,1,13],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"attr",position:[1,1,3]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}],_templateAttributes:{type:"attr",position:[]},_observedAttributes:["detailViewJson","metadata","hasEditPermission","pbServiceName"],didConnect:function(){var e=$("#topSectionTitle .entityElement"),t=$("#rightPanel").is(":visible"),a=$(document).width()-$("#detailViewButtonLayerMainTableRow lyte-td:nth-child(4)").offset().left+e.offset().left+150;e.css("max-width",renderingUtils.windowWidth-a),t&&($(".dvTitle").addClass("pL40 dvpL0"),$("#flw_spn").addClass("pL40")),this.setData("hasEditPermission",Crm.userDetails.permissions.Crm_Implied_Edit_Calls)},data:function(){return{detailViewJson:Lyte.attr("object"),metadata:Lyte.attr("object"),hasEditPermission:Lyte.attr("boolean",{default:!0}),pbServiceName:Lyte.attr("string")}},fetchCallDetails:function(e){Crm.fetchCallDetails(e,this.getData("detailViewJson").entityid,"detailView")},actions:{loadToolTip:function(){loadToolTip()},hidett:function(){zctt.hidett()},toggleFollowup:function(e,t){toggleFollowup(e,t)},openBusinessInfoPopup:function(){openBusinessInfoPopup(data)},fetchCallDetails:function(e){this.fetchCallDetails(e)},EntSendMail:function(e,t,a){EntSendMail(e,t,"",a,"","","","",this.getData("detailViewJson").module)},openPrintTemplatePop:function(){openPrintTemplatePop(this.getData("detailViewJson").entityid,this.getData("detailViewJson").module)},fetchCallDetailsAndEtc:function(e){this.fetchCallDetails(e),event&&(event.cancelBubble=!0,event.stopPropagation&&event.stopPropagation()),hideMenu(event)},nextShow:function(e){$(e).next("completeCallPop").show()},switchDetailViewUI:function(e){switchDetailViewUI(e)}}},{mixins:["crm-stop-event"]}),Lyte.Component.register("call-button",{_template:'<template tag-name="call-button" class="ZPBListnerCls"> <div id="businessView" class="chatContainer dIB"> <template is="if" value="{{expHandlers(pbServiceName,\'==\',&quot;ZPB&quot;)}}"><template case="true"><template is="if" value="{{expHandlers(noOfKeys(phoneNumbers),\'==\',1)}}"><template case="true"> <a class="greenbtn fL singleReminderCallBt_{{callEntityId}}" onclick="{{action(\'initiateCallViaZPB\',getFirstValueOfJson(phoneNumbers),if(ifNotEquals(whoModule,\'PhoneNumbers\'),whoModule,\'Unknown\'),if(generateNewCall,\'\',callEntityId))}}"> {{getI18n(\'Call\')}} </a> </template><template case="false"> <a class="greenbtn fL singleReminderCallBt_{{callEntityId}}" id="callBtnForMultipleNos_{{callEntityId}}" style="height:auto"> {{getI18n(\'Call\')}} </a> <lyte-menu lt-prop-yield="true" id="phoneNosList_{{callEntityId}}" lt-prop-callout="true" lt-prop-event="click" lt-prop-query="#callBtnForMultipleNos_{{callEntityId}}"> <template is="registerYield" yield-name="yield"> <lyte-menu-body> <template is="forIn" object="{{phoneNumbers}}" value="value" key="key"> <lyte-menu-item onclick="{{action(\'initiateCallViaZPB\',value,if(ifNotEquals(whoModule,\'PhoneNumbers\'),whoModule,\'Unknown\'),if(generateNewCall,\'\',callEntityId))}}"> <lyte-menu-label> {{value}} </lyte-menu-label> <lyte-menu-description> {{key}} </lyte-menu-description> </lyte-menu-item> </template> </lyte-menu-body> </template> </lyte-menu> </template></template></template><template case="false"><template is="if" value="{{expHandlers(pbServiceName,\'==\',&quot;CRM_TELEPHONY&quot;)}}"><template case="true"><template is="if" value="{{expHandlers(noOfKeys(phoneNumbers),\'==\',1)}}"><template case="true"> <a class="greenbtn fL singleReminderCallBt_{{callEntityId}}" onclick="{{action(\'click2Call\',getFirstValueOfJson(phoneNumbers),getUserDetail(\'ZGID\'),getUserDetail(\'USER_ID\'),if(generateNewCall,\'\',callEntityId),if(ifNotEquals(whoModule,\'PhoneNumbers\'),whoModule,\'Unknown\'),entityName)}}"> {{getI18n(\'Call\')}} </a> </template><template case="false"> <a class="greenbtn fL singleReminderCallBt_{{callEntityId}}" id="callBtnForMultipleNos_{{callEntityId}}" style="height:auto"> {{getI18n(\'Call\')}} </a> <lyte-menu lt-prop-yield="true" id="phoneNosList_{{callEntityId}}" lt-prop-callout="true" lt-prop-event="click" lt-prop-query="#callBtnForMultipleNos_{{callEntityId}}"> <template is="registerYield" yield-name="yield"> <lyte-menu-body> <template is="forIn" object="{{phoneNumbers}}" value="value" key="key"> <lyte-menu-item onclick="{{action(\'click2Call\',value,getUserDetail(\'ZGID\'),getUserDetail(\'USER_ID\'),if(generateNewCall,\'\',callEntityId),if(ifNotEquals(whoModule,\'PhoneNumbers\'),whoModule,\'Unknown\'),entityName)}}"> <lyte-menu-label> {{value}} </lyte-menu-label> <lyte-menu-description> {{key}} </lyte-menu-description> </lyte-menu-item> </template> </lyte-menu-body> </template> </lyte-menu> </template></template></template></template></template></template> </div> </template>',_dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"forIn",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"text",position:[1,3,1]},{type:"componentDynamic",position:[1,3]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"forIn",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"text",position:[1,3,1]},{type:"componentDynamic",position:[1,3]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["callEntityId","whoId","whoModule","entityName","phoneNumbers","generateNewCall","pbServiceName"],data:function(){return{callEntityId:Lyte.attr("string"),whoId:Lyte.attr("string"),whoModule:Lyte.attr("string"),entityName:Lyte.attr("string"),phoneNumbers:Lyte.attr("object"),generateNewCall:Lyte.attr("boolean",{default:!0}),pbServiceName:Lyte.attr("string")}},actions:{initiateCallViaZPB:function(e,t,a){crmCallsNew.initiateCallViaZPB(e,this.getData("whoId"),t,this.getData("entityName"),a)},click2Call:function(e,t,a,o,i,n){ctiApiNotifier.click2Call(e,t,a,this.getData("whoId"),o,i,n)}}}),Lyte.Component.register("call-fromto-field",{_template:'<template tag-name="call-fromto-field"> <template is="if" value="{{isNotEmpty(contactId)}}"><template case="true"> <entity-field module="Contacts" eid="{{contactId}}" name="{{contactName}}" is-link="{{isLink}}" open-in-new-tab="{{openInNewTab}}" show-module="{{showModule}}" mover-bcard="{{moverBcard}}" bcard-placement="{{bcardPlacement}}" highlighted-text="{{phoneNumber}}" estyle="{{estyle}}" title="{{if(negate(moverBcard),contactName)}}"></entity-field> </template><template case="false"><template is="if" value="{{isNotEmpty(seId)}}"><template case="true"> <entity-field module="{{seModule}}" eid="{{seId}}" name="{{seName}}" is-link="{{isLink}}" open-in-new-tab="{{openInNewTab}}" show-module="{{showModule}}" mover-bcard="{{moverBcard}}" bcard-placement="{{bcardPlacement}}" highlighted-text="{{phoneNumber}}" estyle="{{estyle}}" title="{{if(negate(moverBcard),seName)}}"></entity-field> </template><template case="false"><template is="if" value="{{expHandlers(isNotEmpty(phoneNumber),\'&amp;&amp;\',canShowPhoneNumber)}}"><template case="true"> <phone-entity activity-id="{{activityId}}" defaultvalue="{{phoneNumber}}" defaultid="{{if(isNotEmpty(phoneId),phoneId,phoneNumber)}}" estyle="{{estyle}}" title="{{if(negate(moverBcard),phoneNumber)}}"></phone-entity> </template><template case="false"><template is="if" value="{{showUnknownIfAbsent}}"><template case="true"> <span class="{{estyle}}">{{getI18n(\'crm.activities.call.unknown.entityname\')}}</span> </template></template></template></template></template></template></template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["activityId","contactId","contactName","seId","seName","seModule","phoneId","phoneNumber","showUnknownIfAbsent","isLink","openInNewTab","showModule","moverBcard","bcardPlacement","estyle","highlightedText","canShowPhoneNumber"],init:function(){this.setData("canShowPhoneNumber",!isCallerInfoDisabled)},didConnect:function(){$(this.$node.query("phone-entity")).bind("convertedFromPhone",function(e,t,a,o){this.setData("seModule",a),this.setData("seName",o),this.setData("seId",t)}.bind(this))},data:function(){return{activityId:Lyte.attr("string"),contactId:Lyte.attr("string"),contactName:Lyte.attr("string"),seId:Lyte.attr("string"),seName:Lyte.attr("string"),seModule:Lyte.attr("string"),phoneId:Lyte.attr("string"),phoneNumber:Lyte.attr("string"),showUnknownIfAbsent:Lyte.attr("boolean",{default:!0}),isLink:Lyte.attr("boolean",{default:!1}),openInNewTab:Lyte.attr("boolean",{default:!1}),showModule:Lyte.attr("boolean",{default:!1}),moverBcard:Lyte.attr("boolean",{default:!1}),bcardPlacement:Lyte.attr("string",{default:"right"}),estyle:Lyte.attr("string",{default:"bold black"}),highlightedText:Lyte.attr("string"),canShowPhoneNumber:Lyte.attr("boolean",{default:!0})}}}),Lyte.Component.register("audio-player",{_template:'<template tag-name="audio-player" use-strict="true"> <div id="audioSec" style="display:none;"> <template is="for" items="{{audioUrlArray}}" item="item" index="index"> <audio controls="true" class="songs" id="song-{{index}}" preload="auto" onloadeddata="{{action(\'onLoadedEventForEachAudio\',this)}}" onended="{{action(\'onEndedEventForEachAudio\',event)}}"> <source src="{{item}}"> </audio> </template> </div> <div class="customAudioplayer" id="customAudioplayer"> <div id="audiocntrl" class="playBtn fl mT9 mL10" data-attr="play" onclick="{{action(\'toggle_PlayPause\',this)}}"> </div> <div class="audioRanger fl" onclick="{{action(\'moveOnclick\',event)}}"> <div class="rangeBar"> <span class="rangeBar_line"></span> <div class="rangeSlideIcon"></div> </div> </div> <div class="timeLine fl"> <span><span class="minutes" onclick="{{action(\'toggle_displayTime\')}}" id="audioTime">0:00</span></span> </div> <div class="pR playerVolume fl"> <span class="playerVolumeIcon" data-attr="unmute" onclick="{{action(\'toggle_MuteUnmute\',this)}}"></span> <div id="player_input" class="playerVolAdjust fl"> <input type="range" id="volumeAdjust" name="volumeAdjust" min="0" max="10" value="10" onchange="{{action(\'setVolume\',this.value)}}"> </div> </div> <span class="dIB downloadIcon_tp mT7 mL10 fr cP" onclick="{{action(\'download\')}}"></span> </div> </template>',_dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]}]},{type:"attr",position:[3,1]},{type:"attr",position:[3,3]},{type:"attr",position:[3,5,1,0]},{type:"attr",position:[3,7,1]},{type:"attr",position:[3,7,3,1]},{type:"attr",position:[3,9]}],_observedAttributes:["audioUrlArray"],data:function(){return{audioUrlArray:Lyte.attr("array")}},actions:{onLoadedEventForEachAudio:function(e){AudioControls.onLoadedEventForEachAudio(e)},toggle_PlayPause:function(e){AudioControls.toggle_PlayPause(e)},toggle_displayTime:function(){AudioControls.toggle_displayTime()},toggle_MuteUnmute:function(e){AudioControls.toggle_MuteUnmute(e)},setVolume:function(e){AudioControls.setVolume(e)},download:function(){AudioControls.download()},onEndedEventForEachAudio:function(e){AudioControls.onEndedEventForEachAudio(e)},moveOnclick:function(e){AudioControls.moveOnclick(e)}}}),Lyte.Component.register("crm-organization-profile-menu",{_template:'<template tag-name="crm-organization-profile-menu"> <lyte-menu data-zcqa="orgProfileMenu" lt-prop-yield="true" on-open="{{method(\'onOpenOrgMenu\')}}" lt-prop-prevent-inside-click="true" lt-prop-event="mouseenter" lt-prop-query=".changeOrglink" lt-prop-position="left" lt-prop-wrapper-class="orgGroupItem_menuBox"> <template is="registerYield" yield-name="yield"> <lyte-menu-body> <lyte-menu-group> <lyte-menu-header class="alignleft mL10"> <span class="dIB mR5 orgProfileMenuHeadIcon vam"></span><span class="dIB orgProfileMenuHead vam">My Organizations</span> </lyte-menu-header> <div data-zcqa="orgProfileMenuBody" class="oA maxH300"> <template is="for" items="{{organizations}}" item="org" index="index"> <template is="if" value="{{isCurrentOrg(org.id)}}"><template case="true"> <lyte-menu-item class="{{if(isCurrentOrg(org.id),\'selected cD\')}}"> <div class="orgGroupItem"> <label class="{{if(isCurrentOrg(org.id),\'cD\',\'cP\')}}"> <span class="svgIcons dIB vam {{if(isCurrentOrg(org.id),\'\',\'vH\')}} ico-tick-small mL-10"></span> <span class="dIB ellipsistext f14 mL4 orgNme vam lh18" style="max-width:142px;" onmouseenter="{{action(\'tool_tip\',this,org.name)}}">{{getOrgName(org.name,org.id)}}</span> </label> </div> </lyte-menu-item> </template><template case="false"> <a data-zcqa="orgProfileMenu_org_{{org.id}}" target="_blank" rel="noreferrer noopener" href="{{org.web_url}}"> <lyte-menu-item class="{{if(isCurrentOrg(org.id),\'selected cD\')}}"> <div class="orgGroupItem"> <label class="{{if(isCurrentOrg(org.id),\'cD\',\'cP\')}}"> <span class="svgIcons dIB vam {{if(isCurrentOrg(org.id),\'\',\'vH\')}} ico-tick-small mL-10"></span> <span class="dIB ellipsistext f14 mL4 orgNme vam lh18" style="max-width:142px;" onmouseenter="{{action(\'tool_tip\',this,org.name)}}">{{getOrgName(org.name,org.id)}}</span> </label> </div> </lyte-menu-item> </a> </template></template> </template> </div> </lyte-menu-group> <div class="orgGroupHeader pB10 pR aligncenter pT5 mT7 bdrTe6e6e6"> <template is="if" value="{{showManageLink}}"><template case="true"> <span data-zcqa="orgProfileMenu_manage" class="link1 f14 orgManage dIB vam mR10 cP" onclick="{{action(\'openOrgPage\')}}">{{getI18n(\'crm.link.manage\')}}</span> </template></template> <template is="if" value="{{expHandlers(invitationCount,\'>\',0)}}"><template case="true"> <span data-zcqa="orgProfileMenu_invitation" class="orgInvitNote dIB vam col888 pR">{{invitationCount}} {{getI18n(\'crm.org.pendInv.msg\')}}</span> </template></template> </div> </lyte-menu-body> </template> </lyte-menu> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"componentDynamic",position:[1,1,1]},{type:"attr",position:[1,1,3,1]},{type:"for",position:[1,1,3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"attr",position:[1,1,1,1]},{type:"attr",position:[1,1,1,3]},{type:"text",position:[1,1,1,3,0]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1,1]},{type:"attr",position:[1,1,1,1,1]},{type:"attr",position:[1,1,1,1,3]},{type:"text",position:[1,1,1,1,3,0]},{type:"componentDynamic",position:[1,1]}]}},default:{}}]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3,1]},{type:"if",position:[1,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,3,3]},{type:"if",position:[1,3,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"text",position:[1,2]}]}},default:{}},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}],_observedAttributes:["organizations","invitationCount","is_user_confirmed","showManageLink"],data:function(){return{organizations:Lyte.attr("array",{default:[]}),invitationCount:Lyte.attr("number",{default:0}),is_user_confirmed:Lyte.attr("boolean"),showManageLink:Lyte.attr("boolean",{default:!0})}},init:function(){!this.getData("is_user_confirmed")&&1==this.getData("organizations").length&&this.getData("invitationCount")>0&&this.setData("showManageLink",!1)},actions:{openOrgPage:function(){Crm.openOrganizationsPageInNewTab("org_profile_menu")},tool_tip:function(e,t){e.offsetWidth<Math.floor(e.scrollWidth)&&e.offsetWidth!=Math.floor(e.scrollWidth)&&$(e).attr({"lt-prop-title":t,"lt-prop-tooltip-config":'{"appearance":"callout","position":"right"}',"lt-prop-tooltip-class":"profileTooltip"})}},methods:{onOpenOrgMenu:function(){Crm.client_tracking("Multiple Organization - Org menu open")}}}),Lyte.Component.register("crm-limit-warning",{_template:'<template tag-name="crm-limit-warning"> <lyte-modal lt-prop="{&quot;offset&quot;:{&quot;top&quot;:&quot;0&quot;,&quot;left&quot;:&quot;center&quot;}}" id="limit-warning" lt-prop-width="550px" lt-prop-wrapper-class="sfWarningAlertPop crmBoxModal" lt-prop-show-close-button="false"> <template is="registerYield" yield-name="modal"> <lyte-modal-header class=""> <template is="if" value="{{subformLimitExceed}}"><template case="true"> <div class="redTxt"> <span class="zcrm_svgIcons warning-redIcon dIB vam"></span> <span class="dIB vam">{{getI18n(\'crm.rls.limit.exceeded\')}}</span> </div> </template></template> <template is="if" value="{{subformDeletionProcess}}"><template case="true"> <div class="p0"> <span class="dIB vam">{{getI18n(\'crm.subform.delete.progress\')}}</span> </div> </template></template> </lyte-modal-header> <lyte-modal-content> <template is="if" value="{{subformLimitExceed}}"><template case="true"> <div class="f14 pL35">{{getI18n(\'crm.subform.records.maxlimit\',subformModuleMaxRowLimit)}}</div> </template></template> <template is="if" value="{{subformDeletionProcess}}"><template case="true"> <div class="f14">{{errorMsg}}</div> </template></template> </lyte-modal-content> <lyte-modal-footer class="right"> <lyte-button class="cP" onclick="{{action(&quot;closeThisLimitWarning&quot;)}}"> <template is="registerYield" yield-name="text">{{getI18n(\'crm.nsocial.onboard.got.it\')}}</template> </lyte-button> </lyte-modal-footer> </template> </lyte-modal> <lyte-modal lt-prop="{&quot;offset&quot;:{&quot;top&quot;:&quot;0&quot;,&quot;left&quot;:&quot;center&quot;}}" id="noMandatoryError" lt-prop-wrapper-class="crmBoxModal" lt-prop-show-close-button="false"> <template is="registerYield" yield-name="modal"> <lyte-modal-content> <div class="mB20 mT20"> <span class="zcrm_svgIcons warning-redIcon dIB mR5 vam"></span><span class="f20 dIB vam">{{getI18n(\'crm.jobsheet.cannot.save\')}}</span> </div> <p>{{getI18n(\'crm.jobsheet.mand.field\')}}</p> </lyte-modal-content> <lyte-modal-footer class="right"> <lyte-button class="cP" lt-prop-color="#42a2eb" lt-prop-class="bluelinkbtn ob_outlineprimarybtn mR0" onclick="{{action(\'closeMandatorypopup\')}}"> <template is="registerYield" yield-name="text">{{getI18n(\'crm.nsocial.onboard.got.it\')}}</template> </lyte-button> </lyte-modal-footer> </template> </lyte-modal> </template>',_dynamicNodes:[{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,3,0]}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]}]}},default:{}},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"componentDynamic",position:[3]},{type:"attr",position:[5,1]},{type:"registerYield",position:[5,1,1],dynamicNodes:[{type:"text",position:[0]}]},{type:"componentDynamic",position:[5,1]},{type:"componentDynamic",position:[5]}]},{type:"componentDynamic",position:[1]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"text",position:[1,1,2,0]},{type:"text",position:[1,3,0]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1]},{type:"registerYield",position:[3,1,1],dynamicNodes:[{type:"text",position:[0]}]},{type:"componentDynamic",position:[3,1]},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[3]}],_observedAttributes:["errorMsg","subformLimitExceed","subformDeletionProcess","subformModuleMaxRowLimit"],data:function(){return{errorMsg:Lyte.attr("string",{default:""}),subformLimitExceed:Lyte.attr("boolean",{default:!1}),subformDeletionProcess:Lyte.attr("boolean",{default:!1}),subformModuleMaxRowLimit:Lyte.attr("number",{default:0})}},actions:{closeThisLimitWarning:function(){document.getElementById("limit-warning").ltProp("show",!1)},closeMandatorypopup:function(){document.getElementById("noMandatoryError").ltProp("show",!1)}}}),Lyte.Mixin.register("crm-stop-event",{actions:{stopEvent:function(e){e&&event.preventDefault(),event&&(event.cancelBubble=!0,event.stopPropagation&&event.stopPropagation())}}}),store.registerModel("immessage",{conversation_status:Lyte.attr("string"),sender:Lyte.attr("object"),channel:Lyte.attr("object"),id:Lyte.attr("string",{primaryKey:!0}),created_time:Lyte.attr("string"),modified_time:Lyte.attr("string"),message_time:Lyte.attr("string"),semodule:Lyte.attr("string"),content:Lyte.attr("string"),service:Lyte.attr("string"),mobile:Lyte.attr("string"),replied_by:Lyte.attr("object"),hasAttachments:Lyte.attr("boolean",{default:!1})},{actions:{deleteConversation:{endPoint:"deleteConversation"},threads:{endPoint:"__threads"},send:{endPoint:"send"},attachments:{endPoint:"__attachments"},sendAttachment:{endPoint:"sendAttachment"},setReminder:{endPoint:"setReminder"},readMore:{endPoint:"readMore"},resend:{endPoint:"resend"},downloadAll:{endPoint:"downloadAll"}}}),store.registerAdapter("immessage",{namespace:"crm/v2.2/messages__s",buildURL:function(e,t,a,o,i,n,s){switch(i=i.replace("/immessage",""),n){case"threads":i=i.replace("actions/__threads","__threads");break;case"readMore":i=i.replace("actions/readMore",s.id+"/__threads/"+s.messageId);break;case"resend":i=i.replace("actions/resend",s.id+"/__threads/"+s.messageId);break;case"send":i=i.replace("actions/send","__threads");break;case"attachments":i=i.replace("actions/__attachments","__attachments");break;case"sendAttachment":i=i.replace("actions/sendAttachment","__attachments");break;case"deleteConversation":i=i.replace("actions/deleteConversation",s.id);break;case"setReminder":i=i.replace("actions/setReminder",s.id+"/__threads/"+s.messageId+"/actions/remind");break;case"downloadAll":i=(i=i.replace("crm/v2.2/messages__s","crm/v2.2/__internal/messages__s")).replace("actions/downloadAll",s.id+"/__attachments/actions/downloadAll")}return i},methodForRequest:function(e){return"PATCH"===e?"PUT":e},reloadAll:function(e){return!(e.length>0)},reloadRecord:function(e){return!e||!e.config_params},parseResponse:function(e,t,a,o){return 202===a.status&&Lyte.Router.getRouteInstance().refresh(),o}}),store.registerSerializer("immessage",{payloadKey:function(){return"data"},normalizeResponse:function(e,t,a,o,i){204===i&&(a.data=[]);var n={data:[]};return a&&a.data?(n.data=this.modifyMessages(a.data),n.info=a.info,o&&n?(n.data=n.data[0],n):n):a}},{mixins:["crm-msg-common"]}),Lyte.Component.registerHelper("getImageFile",(function(e,t,a){var o="//img.zohocdn.com/crm/images/nophoto_80ea3af_.png";return"Contacts"===e||"Leads"===e?validationUtils.isNotEmpty(a)&&(o="/crm/EntityImageAttach.do?action_module="+e+"&entityId="+t+"&actionName=readImage&fileId="+a):o="",o})),Lyte.Component.registerHelper("isDeleteAllowed",(function(){return"dN"})),Lyte.Component.registerHelper("getPreviewUrl",(function(e){return"/crm/v2.1/__attachment_preview/"+e})),Lyte.Component.registerHelper("constructName",(function(e){var t=Crm.getUserDetailsMap();return e&&e.id&&t[e.id]?t[e.id].name:e.name})),Lyte.Component.registerHelper("getTimeForUI",(function(e){var t=new Date(e);return Utils.convertToUserTimezone(t),Utils.getTimeInUserFormat(t,!0)})),Lyte.Component.registerHelper("getDateTimeForEntity",(function(e,t){return Lyte.registeredMixins["crm-msg-common"].getDateTimeInUserFormat(e,!t)})),Lyte.Component.registerHelper("getDateTimeString",(function(e){var t=new Date(e);return Utils.convertToUserTimezone(t),$.datepicker.formatDate("D d M yy",t)+" "+Utils.getTimeInUserFormat(t,!0)})),Lyte.Component.registerHelper("getDateForUI",(function(e){return Utils.getDateInUsrLocaleFormat(new Date(e))})),Lyte.Component.registerHelper("getDisplayDateTime",(function(e){return Utils.getDisplayDateTime(new Date(e),!0)})),Lyte.Component.registerHelper("getMsgServicLogo",(function(e){switch(e){case"WHATSAPP":case"TWILIO":return"//img.zohocdn.com/crm/CRMClient/images/whatsapptemplogo_c7491b9_.png";case"TELEGRAM":return""}return""})),Lyte.Component.registerHelper("getAssignToText",(function(e){var t="";e&&e.category.forEach((function(e){t+=""!==t?", "+e.name:e.name}));return t})),Lyte.Component.registerHelper("getTruncatedTemplateText",(function(e,t,a){var o="manage"===a?100:45;return(e=CrmConvertMergeFields.convertMergeFieldsAsRequiredFormat(e,"apitolabel",Lyte.registeredMixins["crm-msg-common"].CrmIMMergeFields[t]))&&e.length>o?e.substring(0,o)+"...":e})),Lyte.Component.registerHelper("checkTemplateTextLenght",(function(e,t){return(e=CrmConvertMergeFields.convertMergeFieldsAsRequiredFormat(e,"apitolabel",Lyte.registeredMixins["crm-msg-common"].CrmIMMergeFields[t]))&&e.length>100})),Lyte.Component.registerHelper("getConvertedTemplateText",(function(e,t){return CrmConvertMergeFields.convertMergeFieldsAsRequiredFormat(e,"apitolabel",Lyte.registeredMixins["crm-msg-common"].CrmIMMergeFields[t])})),Lyte.Component.registerHelper("getMsgStatus",(function(e){var t="";switch(e){case"delivered":t="Delivered";break;case"failed":t="crm.bm.status.retry";break;case"read":t="crm.bm.status.read";break;case"sent":default:t="Sent"}return I18n.getMsg(t)})),Lyte.Component.registerHelper("getMsgStatusClass",(function(e){var t="";switch(e){case"delivered":t="bm_delivered";break;case"read":t="bm_read";break;case"sent":default:t="bm_sent"}return t})),Lyte.Component.registerHelper("getExtensionGroup",(function(e){var t="file";if("txt"===(e=e.toLowerCase())||"pdf"===e||"html"===e||"xml"===e)return t=e;var a={png:["jpeg","jpg","gif","png","webp","bmp","svg"],word:["doc","docx","odt","rtf"],excel:["csv","xls","xlsx","ots","xlsm","ods","numbers","fcs","bks","rdf"],ppt:["odp","pps","pot","pptx","ppt"],movie:["avi","wmv","mp4","mpeg","mpg","mov","flv","mkv","webm"],mp3:["mp3","ogg","oga","wma","m4p","m4a","au","3gp"],zip:["zip","zipx","tar","gz","z","cab","rar","bz2","lzh","7z","img","iso"]};for(var o in a)if(a.hasOwnProperty(o)){var i=a[o];if($.inArray(e,i)>=0){t=o;break}}return t})),Lyte.Component.registerHelper("getMsgAttachIconClass",(function(e){var t="",a=e.split("."),o=a[a.length-1];switch(Lyte.Component.registeredHelpers.getExtensionGroup(o)){case"text":case"word":t="ico-worddoc";break;case"pdf":t="ico-pdf";break;case"png":t="ico-image";break;case"excel":t="ico-spreadsheet";break;case"ppt":t="ico-presentation";break;case"movie":t="ico-video";break;case"mp3":t="ico-music";break;case"zip":t="ico-zip";break;default:t="ico-unknown"}return t})),Lyte.Component.registerHelper("getFileType",(function(e){var t=e.split("."),a=t[t.length-1];return validationUtils.isNotEmpty(a)?"."+a:""})),Lyte.Component.registerHelper("getFileName",(function(e){var t=e.lastIndexOf(".");return e.substring(0,t)})),Lyte.Component.registerHelper("includes",(function(e,t){return e.includes(t)})),Lyte.Component.registerHelper("getMsgPreviewName",(function(e){return validationUtils.isEmptyString(e)?e:"img_"+e+"_preview"})),Lyte.Component.registerHelper("getFieldValue",(function(e,t){return"object"==typeof e[t]?e[t].name:e[t]?e[t]+"":""})),Lyte.Component.registerHelper("getMsgTotalCount",(function(e,t,a,o,i){return 0!==e&&void 0!==e||(o<=a&&(e=(t-1)*a+o),i&&(e+=1)),e})),Lyte.Component.registerHelper("getMsgStartIndex",(function(e,t){return Math.round(t*(e-1))})),Lyte.Component.registerHelper("getInventoryHeader",(function(e){if(!validationUtils.isEmpty(e.lookup)){var t=e.lookup.module.api_name;return t="Deals"===t?"Potentials":t,I18n.getMsg(e.field_label,Crm.moduleInfo[t].translatedSingularLabel)}return e.display_label})),Lyte.Component.registerHelper("getTrimmedMsg",(function(e,t){if(e){var a=500;switch(t){case"dummy":a=135;break;default:a=500}return(e=decodeURIComponent(e.replace(/\+/g,"%20"))).length<a?e:e.substring(0,a)+"..."}return e})),Lyte.Component.registerHelper("getCurrencyValue",(function(e){if(e){var t=e.split(" ");return currencyUtils.getCurrencySymbol(t[1])+" "+currencyUtils.getWholeOrDecimalValue(t[0],2)}return 0})),Lyte.Component.registerHelper("getMsgServiceName",(function(e){switch(e){case"zoho_crm":return"Zoho CRM";case"zoho_desk":return"Zoho Desk";default:return e}})),Lyte.Component.registerHelper("showSaveButton",(function(e,t,a,o){return!e&&o.auto_renewal_enabled===e||(!(!e||o.renewal_credit_count!==t||o.renewal_credit_threshold!==a)||!!e&&(!t||t<1||t>5e3||!a||a<1||a>o.available_credit_value))})),Lyte.Component.registerHelper("showCreditsNextButton",(function(e){return!e||e<1||e>5e3})),Lyte.Component.registerHelper("showPreviewOption",(function(e){var t=e.split("."),a=t[t.length-1];return"pdf"===a||"png"===Lyte.Component.registeredHelpers.getExtensionGroup(a)})),Lyte.Component.registerHelper("getTruncatedString",(function(e,t){return e.length>t?e.substring(0,t)+"...":e})),Lyte.Component.registerHelper("getRepliedByTT",(function(e){if(e&&(Crm.userDetailsMap||Crm.getUserDetailsMap(),!validationUtils.isEmptyString(e.id)&&Crm.userDetailsMap[e.id]))return I18n.getMsg("crm.bm.replied.by.tt",Crm.userDetailsMap[e.id].name)})),Lyte.Component.registerHelper("getTranslatedDate",(function(e){if(!validationUtils.isEmptyString(e)){var t=e.split(" ");t.length>1&&(e=e.replace(t[1],I18n.getMsg(t[1])))}return I18n.getMsg(e)})),Lyte.Component.register("crm-msg-push-notify",{_template:'<template tag-name="crm-msg-push-notify"> <template is="if" value="{{expHandlers(messages.length,\'==\',1)}}"><template case="true"> <div class="push-notify"> <div class="pushMessage"> <div class="senderImage"><img src="{{getImageFile(messages[0].module,messages[0].entityId,messages[0].photoId)}}" class="avatar_48 vam" alt="Image"></div> <div class="fL mL10 w80per"> <span class="color_3 f14 notifyMsg dIB vam">{{messages[0].name}}</span> <span class="greyBadge color_5 mL5 semibold notifyMsg dIB vam">{{getSingularLabel(messages[0].module)}}</span> <p class="mT5 color_4 f12 notifyMsg"> {{content}} </p> </div> <div class="cB"></div> </div> <div class="pushN_action"> <div class="pushN_reply"> <span class="replyTxt dB cP" data-zcqa="bm_push_reply" onclick="{{action(\'loadDetail\',messages[0].id)}}">{{getI18n("crm.button.reply")}}</span> </div> <div class="pushN_remainder"> <div class="remainderTxt cP pR" id="pushN_remainder" data-zcqa="bm_push_later" onclick="{{action(\'showReminderOptions\',false)}}">{{getI18n("crm.livedesk.pot.later")}}<span class="ico-arrow-down-solid-small svgIcons dIB op5 reminDownIco"></span></div> </div> </div> <div class="cB"></div> </div> </template><template case="false"><template is="if" value="{{expHandlers(messages.length,\'>\',1)}}"><template case="true"> <div class="push-notify"> <div class="pushMessage fL"> <div class="fL mL10"> {{getI18n("crm.bm.push.notify.multiple",messages.length)}} </div> <div class="cB"></div> </div> <div class="pushN_action fR"> <span class="cP dIB p10" data-zcqa="bm_push_loadview" onclick="{{action(\'loadView\')}}">{{getI18n("crm.label.view")}}</span> </div> <div class="cB"></div> </div> </template></template></template></template> <template is="if" value="{{expHandlers(reminder_messages.length,\'==\',1)}}"><template case="true"> <div class="push-notify" style="{{lbind(remainder_top)}}"> <div class="pushMessage"> <div class="senderImage"><img src="{{getImageFile(reminder_messages[0].module,reminder_messages[0].entityId,reminder_messages[0].photoId)}}" class="avatar_48 vam" alt="Image"></div> <div class="fL mL10 w80per"> <span class="color_3 f14 notifyMsg dIB vam">{{reminder_messages[0].name}}</span> <span class="greyBadge color_5 mL5 semibold notifyMsg dIB vam">{{getSingularLabel(reminder_messages[0].module)}}</span> <div class="received_notify col666 mT5 f12">{{getDisplayDateTime(reminder_messages[0].message_time)}}</div> <p class="mT5 color_4 f12 notifyMsg"> {{content}} </p> </div> <div class="cB"></div> </div> <div class="pushN_action"> <div class="pushN_reply"> <span class="replyTxt dB cP" data-zcqa="bm_push_remind_reply" onclick="{{action(\'loadDetail\',messages[0].id)}}">{{getI18n("crm.button.reply")}}</span> </div> <div class="pushN_remainder"> <div class="remainderTxt cP pR" data-zcqa="bm_push_remind_later" id="pushN_remainder" onclick="{{action(\'showReminderOptions\',true)}}">{{getI18n("crm.livedesk.pot.later")}}<span class="ico-arrow-down-solid-small svgIcons dIB op5 reminDownIco"></span></div> </div> </div> <div class="cB"></div> </div> </template><template case="false"><template is="if" value="{{expHandlers(reminder_messages.length,\'>\',1)}}"><template case="true"> <div class="push-notify" style="{{lbind(remainder_top)}}"> <div class="pushMessage fL"> <div class="fL mL10"> {{getI18n("crm.bm.push.notify.multiple.reminder",reminder_messages.length)}} </div> <div class="cB"></div> </div> <div class="pushN_action fR"> <span class="cP dIB p10" data-zcqa="bm_push_remind_loadView" onclick="{{action(\'loadView\')}}">{{getI18n("crm.label.view")}}</span> </div> <div class="cB"></div> </div> </template></template></template></template> <lyte-popover lt-prop-freeze="false" lt-prop-show-close-button="false" lt-prop-close-on-body-click="true" lt-prop-show="{{lbind(showReminderOptions)}}" lt-prop-type="box" lt-prop-origin-elem="#pushN_remainder" id="imremainderPopup" lt-prop-content-padding="0px" lt-prop-wrapper-class="pushnotifyPopover" lt-prop-boundary="{&quot;right&quot;:&quot;0&quot;}"> <template is="registerYield" yield-name="popover"> <lyte-popover-content> <ul class="m0 p0 f15 cP"> <li class="pushnotifyPopover_li" data-zcqa="bm_push_5" onclick="{{action(\'selectTimeInterval\',5)}}">{{getI18n("crm.bm.push.notify.reminder.options.minutes",5)}}</li> <li class="pushnotifyPopover_li" data-zcqa="bm_push_15" onclick="{{action(\'selectTimeInterval\',15)}}">{{getI18n("crm.bm.push.notify.reminder.options.minutes",15)}}</li> <li class="pushnotifyPopover_li" data-zcqa="bm_push_60" onclick="{{action(\'selectTimeInterval\',60)}}">{{getI18n("crm.bm.push.notify.reminder.options.hours",1)}}</li> <li class="pushnotifyPopover_li" data-zcqa="bm_push_120" onclick="{{action(\'selectTimeInterval\',120)}}">{{getI18n("crm.bm.push.notify.reminder.options.hours",2)}}</li> </ul> <div class="bottomBtn_bm" onclick="{{action(\'hideNotification\')}}" data-zcqa="bm_push_ignore"> {{getI18n("crm.bm.push.notify.ignore")}} </div> </lyte-popover-content> </template> </lyte-popover> <lyte-event-listener event-name="crmMsgPushNotify" on-fire="{{action(\'loadData\')}}"> </lyte-event-listener></template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1,0]},{type:"text",position:[1,1,3,1,0]},{type:"text",position:[1,1,3,3,0]},{type:"text",position:[1,1,3,5,1]},{type:"attr",position:[1,3,1,1]},{type:"text",position:[1,3,1,1,0]},{type:"attr",position:[1,3,3,1]},{type:"text",position:[1,3,3,1,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,1,1]},{type:"attr",position:[1,3,1]},{type:"text",position:[1,3,1,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"remainder_top",isLbind:!0}}},{type:"attr",position:[1,1,1,0]},{type:"text",position:[1,1,3,1,0]},{type:"text",position:[1,1,3,3,0]},{type:"text",position:[1,1,3,5,0]},{type:"text",position:[1,1,3,7,1]},{type:"attr",position:[1,3,1,1]},{type:"text",position:[1,3,1,1,0]},{type:"attr",position:[1,3,3,1]},{type:"text",position:[1,3,3,1,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"remainder_top",isLbind:!0}}},{type:"text",position:[1,1,1,1]},{type:"attr",position:[1,3,1]},{type:"text",position:[1,3,1,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[5]},{type:"registerYield",position:[5,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"text",position:[1,1,1,0]},{type:"attr",position:[1,1,3]},{type:"text",position:[1,1,3,0]},{type:"attr",position:[1,1,5]},{type:"text",position:[1,1,5,0]},{type:"attr",position:[1,1,7]},{type:"text",position:[1,1,7,0]},{type:"attr",position:[1,3]},{type:"text",position:[1,3,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[5]},{type:"attr",position:[7]},{type:"componentDynamic",position:[7]}],_observedAttributes:["id","name","module","content","message_time","conversationId","notificationId","entityId","photoId","showThis","messages","reminder_messages","msg_data","showReminderOptions","isReminder","remainder_top","removeAll","total_count","total_reminder_count"],data:function(){return{id:Lyte.attr("string"),name:Lyte.attr("string"),module:Lyte.attr("string"),content:Lyte.attr("string"),message_time:Lyte.attr("string"),conversationId:Lyte.attr("string"),notificationId:Lyte.attr("string"),entityId:Lyte.attr("string"),photoId:Lyte.attr("string"),showThis:Lyte.attr("boolean",{default:!0}),messages:Lyte.attr("array"),reminder_messages:Lyte.attr("array"),msg_data:Lyte.attr("object"),showReminderOptions:Lyte.attr("boolean",{default:!1}),isReminder:Lyte.attr("boolean",{default:!1}),remainder_top:Lyte.attr("string"),removeAll:Lyte.attr("boolean",{default:!1}),total_count:Lyte.attr("number",{default:0}),total_reminder_count:Lyte.attr("number",{default:0})}},actions:{loadView:function(){if(this.getData("notificationId")&&crmNTCGlobal){var e="/crm/v2/signals/notifications/actions/read/"+this.getData("notificationId"),t=new crmRequestPool,a={"X-ZCSRF-TOKEN":csrfParamName+"="+csrfToken};t.initiate({action:e,headers:a,data:"",type:"PUT",success:function(){crmNTCGlobal.signals_count=crmNTCGlobal.signals_count-1,crmNTCGlobal.live_global_notifications_count=crmNTCGlobal.live_global_notifications_count-1,crmNTCGlobal.updateNotificationCount()},error:void 0})}Lyte.Router.transitionTo({route:"crm.tab.messages.custom-view.list",dynamicParams:[moduleRecordMapping.Messages.cvid]}).data={fromNotification:!0},this.setData("removeAll",!0),this.setData("showThis",!1)},loadDetail:function(){Lyte.Router.transitionTo({route:"crm.tab.messages.view",dynamicParams:[this.getData("conversationId")]}),this.setData("removeAll",!0),this.setData("showThis",!1)},showReminderOptions:function(e){this.setData("showReminderOptions",!0),this.setData("isReminder",e)},hideNotification:function(){this.setData("removeAll",!0)},selectTimeInterval:function(e){store.triggerAction("immessage","setReminder",{id:this.getData("conversationId")+"",messageId:this.getData("id")+""},{},"POST",{remind_after:{period:"minutes",unit:e}}).then((function(){renderingUtils.showMsgBox(I18n.getMsg("crm.bm.reminder.success"),"success")}),(function(){renderingUtils.showMsgBox(I18n.getMsg("crm.bm.reminder.failed"),"error")})),this.setData("showReminderOptions",!1),this.setData("removeAll",!0),this.setData("showThis",!1)},loadData:function(e){if(Lyte.Router.getRouteInstance().getDynamicParam()!==e.conversation_id){Crm.trackSpotLightAction("Business Messages - Tab - Push notification received",{reminder:e.reminder});var t=[],a=!1;e.reminder?(t=this.getData("reminder_messages"),a=!0):t=this.getData("messages");var o={id:e.data.id,name:e.data.author.name,entityId:e.entity.id,photoId:e.entity.photoId,module:e.entity.module,content:e.data.content,conversationId:e.conversation_id,message_time:e.data.message_time};this.setData("total_count",this.getData("total_count")+1),this.setData("id",e.data.id),this.setData("name",e.data.author.name),this.setData("entityId",e.entity.id),this.setData("photoId",e.entity.photoId),this.setData("module",e.entity.module),e.data.attachments?this.setData("content",e.data.attachments[0].name):this.setData("content",e.data.content),this.setData("conversationId",e.conversation_id),this.setData("notificationId",e.notificationId),t?Lyte.arrayUtils(t,"push",o):((t=[]).push(o),e.reminder?this.setData("reminder_messages",t):this.setData("messages",t)),t.length>1&&this.setData("showReminderOptions",!1),setTimeout(this.removeNotifications,5e3,this,a);var i=this.getData("messages");i&&i.length>0?i.length>1?this.setData("remainder_top","top:100px"):1===i.length&&this.setData("remainder_top","top:130px"):this.setData("remainder_top","")}}},removeAllNotifications:function(){if(this.getData("removeAll")){var e=this.getData("isReminder")?"reminder_messages":"messages",t=this.getData(e);this.setData("showReminderOptions",!1),t&&1===t.length?Lyte.arrayUtils(t,"shift"):this.setData(e,[]),this.setData("removeAll",!1),WindowsCommunicator.notifyOtherTabs("imNotificationMessage",(new Date).getTime())}}.observes("removeAll"),removeNotifications:function(e,t){var a=t?"reminder_messages":"messages",o=t?"total_reminder_count":"total_count";try{var i=e.getData(a),n=e.getData(o);n--,e.setData(o,n),i&&(1===i.length?e.getData("showReminderOptions")||Lyte.arrayUtils(i,"shift"):n<=0&&e.setData(a,[]))}catch(e){return}},emptyMessages:function(){this.getData("messages")&&this.getData("messages").length<=0&&this.getData("reminder_messages")&&this.getData("reminder_messages").length<=0&&this.setData("showThis",!1)}.observes("messages.[]","reminder_messages.[]"),observeReminder:function(){this.getData("showReminderOptions")||(this.getData("messages")&&this.getData("messages").length<=1&&this.setData("removeAll",!0),this.getData("reminder_messages")&&this.getData("reminder_messages").length<=1&&this.setData("removeAll",!0))}.observes("showReminderOptions")},{mixins:["crm-msg-common"]}),Lyte.Mixin.register("crm-track-spotlight",{actions:{trackSpotlight:function(e){var t,a=arguments.length;if(a>1){t={};for(var o=1;o<a;o+=2)t[arguments[o]]=arguments[o+1]}Crm.trackSpotLightAction(e,t)}}});
