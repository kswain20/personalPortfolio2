$(document).click((function(e){var t=$(".colorpicker").is(":visible");e.clientX,e.clientY;t||$(e.target).hasClass("grid-stack-item-content")||$(e.target).parents().hasClass("grid-stack-item-content")||jSortable.hideElments()})),$(document).keyup((function(e){if(27===e.which){$(".basic_edit").attr("style",""),$(".colorpicker").hide();var t=document.getElementById("templateComponentDIV");Crm.userDetails.isNewEditor&&EmailSendingUtil.composeActive&&t&&t.style&&"none"!==t.style.display&&template.compCloseComponentPop()}46!=e.keyCode&&8!=e.keyCode||1==$("#cd_toolpaddingOuterBox").is(":visible")||$(".basic_edit").length>0&&!$("#fontcolor_dropdown").is(":visible")&&jSortable.deleteElement()})),$(document).keydown((function(e){e.keyCode||e.which;if($(".basic_edit").hasClass("grid-stack-item-content"))$(".basic_edit").parents(".grid-stack-item");90===e.which&&e.ctrlKey&&e.altKey||90===e.which&&e.metaKey&&e.altKey?jSortable.cd_redo():(90===e.which&&e.ctrlKey||90===e.which&&e.metaKey)&&jSortable.cd_undo()})),$(document).ready((function(e){$("#sortable").draggable({}),$("#sortable").disableSelection(),$(window).resize((function(){jSortable.heightset()}))}));var jSortable={copyStyle:{},lastUpdateStyle:{},grid_size:1,cd_selectedNode:{},cd_selectedNodeParent:{},cd_labelEnable:!0,cd_selectedGridItem:{},cd_selectedFieldHolder:{},cd_rowSelectedNode:{},cd_singleGridWidth:1,cd_singleRowHeight:1,cd_undoCatchMoves:[],cd_redoCatchMoves:[],canvas_usedFieldCount:0,canvas_fieldLimit:50,cd_distrubNodeTimer:void 0,cd_datamodified:!1,groupingused:0,init:function(e){e&&$("#grid1").width(e),jSortable.createNode(),jSortable.initBinds(),jSortable.colorPicker("#textColorId","color"),jSortable.colorPicker("#textBgId","bg"),$("#grid1, #grid1 > .grid-stack-item").bind("contextmenu",(function(e){e.preventDefault()}));var t=Math.ceil($("#grid1").width());jSortable.grid_size=t,$("#grid1").data("data-gs-width",t),jSortable.cd_singleGridWidth=t/jSortable.grid_size,$(".struture_demo").width(t),jSortable.clearMoves()},hideOtherOptions:function(){$("#font_dropdown").hide(),$("#cd_toolpaddingOuterBox").hide(),$("#fontstyle_dropdown").hide(),$("#align_dropdown").hide(),$("#separator_dropdown").hide(),$("#icon_dropdown").hide(),$("#labelalign_dropdown").hide(),$("#cd_range").hide(),$("#cd_toolfonttype_dropdown").hide(),$("#fontcolor_dropdown").hide(),$("#cview_contextmenu").hide(),$(".cd_hoverBdr").removeClass("cd_hoverBdr"),$("#canvasMenuSeparator").addClass("cv_disable")},builderOptionDropdown:function(e,t){t.attr("style","");var a=$(window).height(),i=$(e).offset().top,s=t.height(),l=($(e).offset().top,$("#editor_container").outerHeight()),n=l-i+50,o=$(e).outerHeight(),d=t.attr("id");if(t.removeClass("topAligndropdown"),i+s>l){var r=197;"cd_toolfonttype_dropdown"!=d&&"font_dropdown"!=d&&"fontstyle_dropdown"!=d||(r=150),n<r?(t.addClass("topAligndropdown"),t.css({"max-height":$("#grid_outer").outerHeight()+50}),t.css({top:i-t.outerHeight(),left:$(e).offset().left,position:"fixed"})):(t.removeClass("topAligndropdown"),t.css({"max-height":n}),t.css({top:i+20,left:$(e).offset().left,position:"fixed"}))}else t.css({"max-height":n}),t.css({top:i+o,left:$(e).offset().left,position:"fixed"})},initBinds:function(){$("#grid1").resizable({handles:"s",start:function(e,t){var a=$("#grid1").children(".grid-stack-item");if(a.length>0){var i=$u.max(a.toArray(),(function(e){return $(e).position().top})),s=$(i).position().top+$(i).outerHeight();$(t.element).css("min-height",s)}},stop:function(e,t){jSortable.setMaxHeight(void 0,!0)}}),$("#grid1").on("added",(function(e,t){jSortable.updateContainerHeight()})),$("#textEditorMenu #tE_selectFont").click((function(){if(jSortable.builderOptionDropdown(this,$("#font_dropdown")),!$("#textEditorMenu").hasClass("cv_disable")){var e=".cd_fs"+$("#cdToolFS").html();jSortable.hideOtherOptions(),$("#font_dropdown").show(),$("#font_dropdown").find(".bld").removeClass("bld"),$("#font_dropdown").find(e).addClass("bld"),jSortable.catchChangeStyle()}sE()})),$("#tE_font_style").click((function(){jSortable.builderOptionDropdown(this,$("#fontstyle_dropdown")),$("#textEditorMenu").hasClass("cv_disable")||$(this).hasClass("cv_disable")||(jSortable.hideOtherOptions(),$("#fontstyle_dropdown").show(),jSortable.catchChangeStyle()),sE()})),$("#tE_select_align").click((function(){jSortable.builderOptionDropdown(this,$("#align_dropdown")),$("#textEditorMenu").hasClass("cv_disable")||$("#tE_select_align").hasClass("cv_disable")||(jSortable.hideOtherOptions(),$("#align_dropdown").show(),jSortable.catchChangeStyle()),sE()})),$("#cdToolSep").click((function(){$("#textEditorMenu").hasClass("cv_disable")||$("#textEditorMenu > .tE_separator").hasClass("cv_disable")||(jSortable.hideOtherOptions(),$("#separator_dropdown").show()),sE()})),$("#tE_icon").click((function(){$("#textEditorMenu").hasClass("cv_disable")||$(this).hasClass("cv_disable")||(jSortable.hideOtherOptions(),$("#icon_dropdown").show()),sE()})),$("#tE_selectFontStyle").click((function(){jSortable.builderOptionDropdown(this,$("#cd_toolfonttype_dropdown")),$("#textEditorMenu").hasClass("cv_disable")||$(this).hasClass("cv_disable")||(jSortable.hideOtherOptions(),$("#cd_toolfonttype_dropdown").show()),sE()})),$("#align_dropdown > li").click((function(){if(!$("#textEditorMenu").hasClass("cv_disable")){$(".basic_edit").hasClass("grid-stack-item-content")||$(".basic_edit").hasClass("row_separator")?jSortable.cd_selectedNode=$(".basic_edit").find(".cd_field"):jSortable.cd_selectedNode=$(".basic_edit"),jSortable.triggerCatchMoves("align");var e=$(".basic_edit").parent(),t=$(this).data("align"),a=$(this).data("alignclass"),i=$(this).data("alignimgclass");$(e).find(".grid-stack-item-content").removeClass("txtalnRt txtalnMid txtalnLt"),$(e).find(".grid-stack-item-content").addClass(a),$("#cdToolAlignImg").removeClass("tE_leftalin tE_midlalin tE_rightalin"),$("#cdToolAlignImg").addClass(i);var s=$(".basic_edit").find(".row_separator");"txtalnRt"==a?$(".basic_edit").hasClass("grid-stack-item-content")?(s.addClass("fR"),s.removeClass("canvas_rowSepW100p txtalnRt txtalnMid txtalnLt").css("text-align","")):($(".basic_edit").css("text-align","").addClass("fR txtalnRt"),$(".basic_edit").css("text-align","").removeClass("canvas_rowSepW100p txtalnMid txtalnLt")):"txtalnLt"==a?$(".basic_edit").hasClass("grid-stack-item-content")?(s.addClass("fL"),s.removeClass("canvas_rowSepW100p fR txtalnRt txtalnMid txtalnLt").css("text-align","")):($(".basic_edit").css("text-align","").addClass("txtalnLt fL"),$(".basic_edit").css("text-align","").removeClass("canvas_rowSepW100p fR txtalnRt txtalnMid")):$(".basic_edit").hasClass("grid-stack-item-content")?(s.removeClass("fR txtalnRt txtalnMid txtalnLt").css("text-align",""),s.addClass("canvas_rowSepW100p")):($(".basic_edit").css("text-align","").addClass("canvas_rowSepW100p txtalnMid"),$(".basic_edit").css("text-align","").removeClass("fR txtalnRt txtalnLt")),jSortable.updateNode(e,"align",t),jSortable.createTableStructure(),jSortable.catchChangeStyle()}sE()})),$("#canvasMenuUngroup, #cd_removeFromGroup,#cd_rightClick_delete,#cdDeleteIcon,#cvLabelMenu,#cvIconMenu, #icon_dropdown > li").hover((function(){if(!$(this).hasClass("cv_disable"))if($(".basic_edit").hasClass("cd_field cd_label")||$(".basic_edit").hasClass("cd_field cd_icon")){var e=$(".basic_edit").siblings(".cd_field.field_valueHolder");$(e).addClass("unGroupElmBg")}else{if($(".basic_edit").siblings(".cd_field.cd_label").length>0)e=$(".basic_edit").siblings(".cd_field.cd_label");else e=$(".basic_edit").siblings(".cd_field.cd_icon");$(e).addClass("unGroupElmBg")}}),(function(){$(".unGroupElmBg").removeClass("unGroupElmBg")})),$("#font_dropdown > li").click((function(){$(".grid-stack").data("gridstack");var e=$(this).html(),t=parseInt(e);$(this).parent().find(".bld").removeClass("bld"),$(this).addClass("bld"),$("#textEditorMenu .cd_tool_fontSize").html(t),$(".basic_edit").hasClass("grid-stack-item-content")||$(".basic_edit").hasClass("row_separator")?jSortable.cd_selectedNode=$(".basic_edit").find(".cd_field"):jSortable.cd_selectedNode=$(".basic_edit"),jSortable.triggerCatchMoves("fontSize");var a=$(jSortable.cd_selectedNode);a.css("font-size",parseInt(t)),a.css("line-height",parseInt(t)+"px");var i=$(".basic_edit");jSortable.updateNode(i,"font_size",t),$("#textEditorMenu").data("tool").font_size=t;var s=$(jSortable.cd_selectedGridItem);jSortable.eachNode(s);jSortable.resizeWidth(s,!0),jSortable.lineheightSet(s),jSortable.resizeHeight(s),jSortable.catchChangeStyle(),sE()})),$("#cd_toolfonttype_dropdown > li").click((function(){$(".basic_edit").hasClass("grid-stack-item-content")||$(".basic_edit").hasClass("row_separator")?jSortable.cd_selectedNode=$(".basic_edit").find(".cd_field"):jSortable.cd_selectedNode=$(".basic_edit"),jSortable.triggerCatchMoves("customStyle");$(".grid-stack").data("gridstack");var e=$(jSortable.cd_selectedNode),t=$L(e).toArray().map((function(e){return $(e).data("component")})),a=(Math.ceil($(e).width()/jSortable.cd_singleGridWidth),Math.ceil($(e).height()),$(this).data("style")),i=t[0].ui.styles;a.align=i.align;var s=i.font_style.indexOf("Italic");jSortable.cdPasteStyle(a,!0),$("#textEditorMenu").data("tool",a),""!=a.background_color?$(e).addClass("pL5 pR5"):$(e).removeClass("pL5 pR5"),-1==s?$(cd_italic).data("enable",!1):$(cd_italic).data("enable",!0);var l=$(jSortable.cd_selectedGridItem);jSortable.updateCdtool(),jSortable.lineheightSet(l),jSortable.resizeWidth(l,!0),jSortable.resizeHeight(l),sE()})),$("#fontstyle_dropdown > li").click((function(){$(".basic_edit").hasClass("grid-stack-item-content")||$(".basic_edit").hasClass("row_separator")?jSortable.cd_selectedNode=$(".basic_edit").find(".cd_field"):jSortable.cd_selectedNode=$(".basic_edit");var e=$(this).html(),t=$("#cd_italic").hasClass("cd_bg_gray"),a=$(this).data("fontname"),i=$("#fontNameHodler").data("fontname"),s=$(jSortable.cd_selectedGridItem);if(t)var l=a+"Italic";else l=a.replace("Italic","");jSortable.triggerCatchMoves("fontStyle"),$("#fontNameHodler").removeClass(i),$("#fontNameHodler").addClass(l),$("#fontNameHodler").data("fontname",l),$("#fontNameHodler").html(e),$("#textEditorMenu").data("tool").font_style=a,$(jSortable.cd_selectedNode).each((function(e,t){var a=(t=$(t)).data("component"),i=a.ui.styles.font_style;t.removeClass("CanvasFontThin CanvasFontThinItalic CanvasFontLight CanvasFontLightItalic CanvasFontRegular CanvasFontRegularItalic CanvasFontSemibold CanvasFontSemiboldItalic CanvasFontBold CanvasFontBoldItalic CanvasFontXbold CanvasFontXboldItalic"),t.removeClass(i),t.addClass(l),a.ui.styles.font_style=l})),jSortable.resizeWidth(s,!0),jSortable.lineheightSet(s),jSortable.resizeHeight(s),sE()})),$("#separator_dropdown > li").click((function(){jSortable.triggerCatchMoves("separator");var e=$("#cdSeparatorMenuDropdown"),t=$(this).data("value");e.html(t);var a=$L(jSortable.cd_selectedNode).toArray().filter((function(e){return $(e).hasClass("cd_field cd_separator")}));$(a).each((function(e,a){var i=$(a).data("component");$(a).html(t),i.symbol=t})),jSortable.lineheightSet(jSortable.cd_selectedGridItem),sE()})),$("#cv_editorBody").hover((function(){$("#grid2").hasClass("cv_disable")&&$("#sideBarFieldLimit").show()}),(function(){$("#sideBarFieldLimit").hide()})),$("#icon_dropdown > li").click((function(){if(0!=$(".basic_edit").length){var e=$("#icon_holder"),t=$(this).data("value");e.html("<span class='"+t+"'></span>");$(jSortable.cd_selectedNode);$(".basic_edit").hasClass("grid-stack-item-content")||$(".basic_edit").hasClass("row_separator")?jSortable.cd_selectedNode=$(".basic_edit").find(".cd_field"):jSortable.cd_selectedNode=$(".basic_edit");var a=jSortable.getSelectedFields();$(".grid-stack").data("gridstack");if(jSortable.triggerCatchMoves("icon"),a.length>0)$(a).each((function(e,a){if(!$(a).hasClass("cd_field field_valueHolder"))a=$(a).nextAll(".cd_field.field_valueHolder");var i=$(a).parents(".grid-stack-item"),s=$(a).data("component"),l=(s.label,s.ui.styles.color);if((s.label||s.icon)&&$(a).prevUntil(".cd_mapping_field").remove(),s.label=!1,s.ui.styles.labelAlign="left",s.icon=!0,$(a).unwrap("span"),""==t)return s.icon=!1,void $("#cviconmenu").prop("checked",!1);var n=s.ui.position.startX-1,o=s.ui.position.startY,d=s.id,r=JSON.parse('{"_type":"icon","id":"'+d+'","iconclass":"'+t+'","children":[], "ui":{"position":{"startX":'+n+',"startY":'+o+',"width":20,"height":20,"endX":"","left":""},"styles":{"color":"'+l+'","background_color":"","bold":false,"italic":false,"align":"left","font_size":"12","font_style":""}}}'),c=$("<span />");c.addClass("cd_field cd_icon"),c.addClass(t),c.data("component",r),c.css({"font-size":12,color:"#"+l}),$(a).data("component",s),$(a).before(c),$(a).prev().addBack().wrapAll("<span class='dIB cd_mapping_field cd_icon_left'></span>"),jSortable.resizeWidth(i,!0)})),jSortable.updateCdtool();else{jSortable.triggerCatchMoves("removeIcon");var i=$(jSortable.cd_selectedNode),s=$(i).parents(".grid-stack-item"),l=i.data("component"),n=$(jSortable.cd_selectedNode).next().data("component");if(n.label=!1,n.icon=!0,""==t)return l.icon=!1,void $("#cviconmenu").prop("checked",!1);var o=l.ui.position.startX-1,d=l.ui.position.startY,r=l.id,c=l.ui.styles.color,p=JSON.parse('{"_type":"icon","id":"'+r+'","iconclass":"'+t+'","children":[], "ui":{"position":{"startX":'+o+',"startY":'+d+',"width":20,"height":20,"endX":"","left":""},"styles":{"color":"'+c+'","background_color":"","bold":false,"italic":false,"align":"left","font_size":"12","font_style":""}}}'),u=$("<span />");u.addClass("cd_field cd_icon"),u.addClass(t),u.data("component",p),u.css({"font-size":12,color:"#"+c}),i.before(u),i.remove(),jSortable.resizeWidth(s,!0),jSortable.lineheightSet(s),jSortable.resizeHeight(s)}$(a).addClass("basic_edit"),jSortable.updateCdtool(),$(u).trigger("click"),$("#cview_contextmenu").is(":visible")&&($("#cd_HideLabel").hide(),$("#cd_addLabel").show()),$("#cviconmenu").is(":checked")||$("#cviconmenu").prop("checked",!0),$("#cvlabelmenu").prop("checked",!1),sE()}}))},canvasStrikeThrough:function(e){if(!$("#textEditorMenu").hasClass("cv_disable")&&!$(e).hasClass("cv_disable")){$(".basic_edit").hasClass("grid-stack-item-content")||$(".basic_edit").hasClass("row_separator")?jSortable.cd_selectedNode=$(".basic_edit").find(".cd_field"):jSortable.cd_selectedNode=$(".basic_edit");var t=jSortable.getSelectedFields(),a=$("#textEditorMenu").data("tool");jSortable.triggerCatchMoves("strikethrough");var i=$u.chain(t).map((function(e){return $(e).data("component").ui.styles.line_through})).uniq().value();if(1==i.length)if(1==i[0])var s="remove";else s="add";else s="add";"add"==s?$(t).each((function(e,t){$(t).data("component").ui.styles.line_through=!0,$(t).css({"text-decoration":"line-through"})})):$(t).each((function(e,t){$(t).data("component").ui.styles.line_through=!1,$(t).css({"text-decoration":""})})),0==$(e).data("enable")?($(e).data("enable",!0),a.line_through=!0):($(e).data("enable",!1),a.line_through=!1),sE(),jSortable.hideOtherOptions()}},canvasCaps:function(e){if(!$("#textEditorMenu").hasClass("cv_disable")&&!$(e).hasClass("cv_disable")){$(".basic_edit").hasClass("grid-stack-item-content")||$(".basic_edit").hasClass("row_separator")?jSortable.cd_selectedNode=$(".basic_edit").find(".cd_field"):jSortable.cd_selectedNode=$(".basic_edit");jSortable.getSelectedFields();var t=$("#textEditorMenu").data("tool"),a=$L(jSortable.cd_selectedNode).toArray().filter((function(e){return!$(e).hasClass("cd_field cd_separator")})),i=$u.chain(a).map((function(e){return $(e).css("text-transform")})).uniq().value();jSortable.triggerCatchMoves("caps"),1==i.length&&"none"==i[0]?$(a).each((function(e,t){$(t).data("component").ui.styles.text_transform="uppercase",$(t).css({"text-transform":"uppercase"}),$("#textEditorMenu").data("tool").text_transform="uppercase"})):$(a).each((function(e,t){delete $(t).data("component").ui.styles.text_transform,$(t).css({"text-transform":""}),delete $("#textEditorMenu").data("tool").text_transform})),0==$(e).data("enable")?($(e).data("enable",!0),t.text_transform="uppercase"):($(e).data("enable",!1),delete t.text_transform),jSortable.resizeWidth(jSortable.cd_selectedGridItem),jSortable.lineheightSet(jSortable.cd_selectedGridItem),jSortable.resizeHeight(jSortable.cd_selectedGridItem),sE(),jSortable.hideOtherOptions()}},canvasItalic:function(e){if(!$("#textEditorMenu").hasClass("cv_disable")&&!$(e).hasClass("cv_disable")){var t=$("#textEditorMenu").data("tool");$(".basic_edit").hasClass("grid-stack-item-content")||$(".basic_edit").hasClass("row_separator")?jSortable.cd_selectedNode=$(".basic_edit").find(".cd_field"):jSortable.cd_selectedNode=$(".basic_edit");for(var a=$L(jSortable.cd_selectedNode).toArray().map((function(e){return $(e).data("component").ui.styles}))||[],i=a.length,s=!1,l=0;l<i;l++){(a[l].font_style||"").indexOf("Italic")>-1||(s=!0)}var n=$("#fontNameHodler").data("fontname");if(-1!=n.indexOf("Italic"))var o=n.replace("Italic","");else o=n+"Italic";o&&o.indexOf("ProximaNova")>-1&&(o=o.replace("ProximaNova","CanvasFont")),$("#fontNameHodler").data("fontname",o),$("#fontNameHodler").removeClass(n),$("#fontNameHodler").addClass(o),$(e).toggleClass("cd_bg_gray"),jSortable.triggerCatchMoves("italic"),$(jSortable.cd_selectedNode).each((function(e,t){var a=(t=$(t)).data("component"),i=a.ui.styles.font_style;(o=s?i.indexOf("Italic")>-1?i:i+"Italic":i.replace("Italic",""))&&o.indexOf("ProximaNova")>-1&&(o=o.replace("ProximaNova","CanvasFont"));var l=t.data("toolstyle");a.ui.styles.font_style=o,null!=l&&(l.font_style=o),t.removeClass("CanvasFontThin CanvasFontThinItalic CanvasFontLight CanvasFontLightItalic CanvasFontRegular CanvasFontRegularItalic CanvasFontSemibold CanvasFontSemiboldItalic CanvasFontBold CanvasFontBoldItalic CanvasFontXbold CanvasFontXboldItalic"),t.addClass(o)})),0==$(e).data("enable")?($(e).data("enable",!0),t.font_style=o,t.italic=!0):($(e).data("enable",!1),t.font_style=o,t.italic=!1),sE(),jSortable.hideOtherOptions()}},resizeHeight:function(e){var t=$(".grid-stack").data("gridstack");e||(e=$(".basic_edit").parents(".grid-stack-item")),$(e).each((function(e,a){if(0==$(a).find(".cd_people_image").length){var i=jSortable.returnNodeHeight(a)+2,s=parseInt($(a).css("max-height"));$(a).css("height",i),s&&i>s&&(i=s),t.resize(a,void 0,i)}}))},resizeWidth:function(e,t,a){var i=$(".grid-stack").data("gridstack");e||(e=$(".basic_edit").parents(".grid-stack-item")),$(e).each((function(e,s){var l=(s=$(s)).find(".cd_people_image"),n=s.data("array");if(n)var o=n.data_type;if(0==l.length){var d=parseInt(s.css("max-width")),r=s.outerWidth();d||jSortable.setMaxWidth(s);var c=s.find(".row_separator");if(c.length>0){var p=[];$(c).each((function(e,t){var a=$(t).children(),i=$u.chain(a).map((function(e){return $(e).outerWidth()})).value().reduce((function(e,t){return e+t}),0);$(t).css("width",i+15),p.push(i)}));var u=$u.max(p,(function(e){return e}));t?u<d&&u>r&&(s.css("width",u+50),i.resize(s,u+50,void 0)):u<d&&(s.css("width",u+50),i.resize(s,u+50,void 0))}else{var m=s.find(".cd_field"),g=$(m).filter(".field_valueHolder").data("component"),v=(s.find(".cd_mapping_field"),s.find(".grid-stack-item-content")),_=s.find(".grid-stack-item-content").children(),h=parseInt(v.css("padding-left"))+parseInt(v.css("padding-right"));u=$u.chain(_).map((function(e){return $(e).outerWidth()})).value().reduce((function(e,t){return e+t}),0)+h;if("upcoming_activity"==g._type)u<d&&u>r&&(s.css("width",u+27),i.resize(s,u+27,void 0));else if(a&&"TextArea"==g.data_type){var f=$(_).text();jSortable.widthCalculate($ESAPI.encoder().encodeForHTML(f)).widthPx>550&&(u=530),u<d&&u>r&&(s.css("width",u+20),i.resize(s,u+20,void 0))}else t?u<d&&u>r&&(s.css("width",u+12),i.resize(s,u+12,void 0)):u<d&&(s.css("width",u+12),i.resize(s,u+12,void 0))}jSortable.lineheightSet(s),"TextArea"!=o&&jSortable.resizeHeight(s)}}))},bindHoverBorder:function(e){e||(e=jSortable.cd_selectedGridItem),$(e).each((function(e,t){if(1==$(t).find(".cd_field").length)return $(t).unbind("mousemove mouseout"),!0;$(t).mousemove((function(e){if(!$(e.target).hasClass("cd_hoverBdr")){$(".cd_hoverBdr").removeClass("cd_hoverBdr");var t=$(e.target).closest(".cd_field"),a=$(e.target).closest(".row_separator");t.length>0?$(t).addClass("cd_hoverBdr"):$(a).addClass("cd_hoverBdr")}})),$(t).mouseout((function(e){$(".cd_hoverBdr").removeClass("cd_hoverBdr")}))}))},catchChangeStyle:function(){$(".basic_edit");if($(".basic_edit").hasClass("cd_field field_valueHolder"))$(".basic_edit");else $(".basic_edit").parents(".grid-stack-item");$(".basic_edit")},returnNodeHeight:function(e){e||(e=$(jSortable.cd_selectedGridItem));var t=$(e).find(".row_separator"),a=$(e).find(".grid-stack-item-content"),i=0;if(t.length>0)t.toArray().forEach((function(e){i+=$(e).outerHeight()})),"NaN"!=parseInt($(a).css("padding-top"))&&(i+=parseInt($(a).css("padding-top"))),"NaN"!=parseInt($(a).css("padding-bottom"))&&(i+=parseInt($(a).css("padding-bottom")));else if(a.hasClass("canvas_ignoreField"))i=20;else{var s=$(a).children();$(s).wrapAll("<div id='cd_heightCalc'></div>"),i=$("#cd_heightCalc").outerHeight()+parseInt($(a).css("padding-top"))+parseInt($(a).css("padding-bottom")),$(s).unwrap()}return i},textWidthCal:function(e,t,a){if(a){var i=a*jSortable.cd_singleGridWidth;i>550&&(i=550)}else i=550;$("#grid1").width();var s=$("<span />"),l=t.font_size,n=t.font_style;n&&n.indexOf("ProximaNova")>-1&&(n=n.replace("ProximaNova","CanvasFont")),$(s).addClass("sapnWidth dIB"),$(s).css({"font-family":n,"font-size":l+"px","max-width":i,border:"1px solid transparent","line-height":l+"px"}),$(s).html(e),$("#cv_body").append(s);var o=$(".sapnWidth").outerHeight(),d=Math.ceil($(".sapnWidth").outerWidth());return $(".sapnWidth").remove(),{width:d,height:o}},showHideIcon:function(){jSortable.globleNodesUpdate();var e=jSortable.getSelectedFields();if($("#cviconmenu").prop("checked"))$("#cviconmenu").prop("checked",!1),jSortable.iconDropDownShow($("#cdIconMenuDropdown"),"bottom");else{e=jSortable.getSelectedFields();$("#emptyIcon").trigger("click"),$(e).addClass("basic_edit"),jSortable.updateCdtool()}renderingUtils.stopEvent()},removeIcon:function(){jSortable.cd_selectedNodeParent;$(".basic_edit").hasClass("grid-stack-item-content")||$(".basic_edit").hasClass("row_separator")?jSortable.cd_selectedNode=$(".basic_edit").find(".cd_field"):jSortable.cd_selectedNode=$(".basic_edit");$(".grid-stack").data("gridstack");var e=jSortable.cd_selectedNode.filter((function(e){return $(e).hasClass("cd_field cd_icon")}));$(e).each((function(e,t){var a=$(t).nextAll(".cd_field.field_valueHolder").first(),i=$(a).data("component");$(t).remove(),$(a).unwrap(),i.icon=!1})),jSortable.resizeWidth(jSortable.cd_selectedGridItem),jSortable.lineheightSet(),jSortable.resizeHeight(jSortable.cd_selectedGridItem),sE()},labelHandling:function(){$("#cvlabelmenu").prop("checked")?jSortable.addLabel("add"):jSortable.addLabel("remove")},addLabel:function(e,t,a){jSortable.cd_selectedNodeParent,$(".basic_edit");$(".basic_edit").hasClass("grid-stack-item-content")||$(".basic_edit").hasClass("row_separator")?jSortable.cd_selectedNode=$(".basic_edit").find(".cd_field"):jSortable.cd_selectedNode=$(".basic_edit");$(".grid-stack").data("gridstack");var i=jSortable.getSelectedFields(),s=($("#cvlabelmenu").prop("checked"),jSortable.cd_selectedGridItem);"add"==e?(t||jSortable.triggerCatchMoves("addLabel"),$(i).each((function(e,t){($(t).hasClass("cd_field cd_icon")||$(t).hasClass("cd_field cd_label"))&&(t=$(t).nextAll(".cd_field.field_valueHolder").first());var i=$(t).parents(".grid-stack-item"),s=JSON.parse(JSON.stringify($(t).data("component")));if(1==s.label&&!a)return!0;var l=$(t).prev(".cd_field.cd_label");$(t).prevAll(".cd_field.cd_label").first().remove(),$(t).prevAll(".cd_field.cd_icon").first().remove(),$(t).unwrap("span");var n=s.field_label,o=$ESAPI.encoder().encodeForHTML(n);1==s.label&&$(l).remove();var d=JSON.parse(JSON.stringify(s.ui.styles)),r=(s.field_label,s.ui.position.startY),c=s.ui.position.startX-1,p=s.id,u=jSortable.widthCalculate(o),m=JSON.parse('{"_type":"label","children":[],"id":"'+p+'","field_label":"'+o+'", "ui":{"position":{"startX":'+c+',"startY":'+r+',"width":'+u.width+',"height":'+u.height+',"endX":"","left":"","merge_type":"column"},"styles":{"color":"","background_color":"","bold":false,"italic":false,"align":"left","font_size":"14","font_style":"CanvasFontRegular", "labelAlign":"left"}}}');m.ui.styles=d,1==a&&(m.ui.styles.color="777",delete m.ui.styles.line_through);var g="<label style= 'color:#"+d.color+";text-transform:"+d.text_transform+";font-size: "+d.font_size+"px;' class='cd_field cd_label pr3 "+d.font_style+"' data-component='"+JSON.stringify(m)+"'>"+o+" :  </label>";s.label=!0,s.icon=!1;var v=$(t).parents(".grid-stack-item");$(v).data("_gridstack_node").width;$(t).data("component",s),$(t).css("line-height",""),$(t).before(g),$(t).prev().addBack().wrapAll("<span class='dIB cd_mapping_field cd_label_left' style='line-height: "+d.font_size+"px'></span>"),jSortable.resizeWidth(i,!0)})),jSortable.cd_labelEnable=!0):(t||jSortable.triggerCatchMoves("removeLabel"),$(i).each((function(e,t){var a=$(t).parents(".grid-stack-item"),i=$(t).data("component"),s=$(t).prevAll(".cd_field.cd_label").first(),l=($(t).prevAll(".cd_field.cd_icon").first().remove(),$(t).parents(".grid-stack-item"));$(l).data("_gridstack_node").width;$(s).next("br").remove(),$(s).remove(),$(t).unwrap("span"),i.label=!1,i.icon=!1,i.ui.styles.labelAlign="left",jSortable.removeHoverBindAndRowNode(l),jSortable.resizeWidth(a,!0)})),jSortable.cd_labelEnable=!1),jSortable.bindHoverBorder(s),jSortable.updateCdtool(),jSortable.hideOtherOptions(),$("#cview_contextmenu").hide(),0==$(".basic_edit").length&&($("#textEditorMenu").addClass("cv_disable"),$("#cdDeleteIcon").addClass("cv_disable")),sE()},colorPickerToggle:function(e){$("#textEditorMenu").hasClass("cv_disable")||(jSortable.builderOptionDropdown(e,$("#fontcolor_dropdown")),jSortable.hideOtherOptions(),$("#fontcolor_dropdown").show()),sE()},hideElments:function(){$("#fontcolor_dropdown").is(":visible")||$("#cd_toolfonttype_dropdown").is(":visible")||$("#font_dropdown").is(":visible")||$("#fontstyle_dropdown").is(":visible")||$("#align_dropdown").is(":visible")||$("#icon_dropdown").is(":visible")||$("#separator_dropdown").is(":visible")||$("#cd_toolpaddindOuterBox").is(":visible")||$("#cd_toolpaddindOuterBox").is(":visible")||$("#labelalign_dropdown").is(":visible")||$("#cd_toolpaddingOuterBox").is(":visible")||($(".basic_edit").removeClass("basic_edit"),$(".ignoreFieldSelectedColor").removeClass("ignoreFieldSelectedColor"),$(".cd_selected").removeClass("cd_selected"),$("#textEditorMenu").addClass("cv_disable"),$("#cdDeleteIcon").addClass("cv_disable"),$(".tE_icon").addClass("cv_disable"),$(".tE_lable").addClass("cv_disable")),$(".tE_merge").addClass("cv_disable"),$("#font_dropdown").hide(),$("#cview_contextmenu").hide(),$(".style_copy_node").removeClass("style_copy_node"),$(".basic_edit_bdr").removeClass("basic_edit_bdr"),$("#fontstyle_dropdown").hide(),$("#align_dropdown").hide(),$(".separator_dropdown").hide(),$("#icon_dropdown").hide(),$("#labelalign_dropdown").hide(),$("#cd_addIcon").find("#icon_dropdown").hide(),$("#cd_range").hide(),$("#tE_separator").find("#separator_dropdown").hide(),$("#icon_dropdown").hide(),$("#fontcolor_dropdown").hide(),$("#cd_toolpaddingOuterBox").hide(),$("#cd_toolfonttype_dropdown").hide(),$(".cd_hoverBdr").removeClass("cd_hoverBdr"),$(".canvasNodeBdrColor").removeClass("canvasNodeBdrColor")},heightset:function(){var e=$(window).height()-$("#cv_editor_header").outerHeight()-$("#mainMenuTabDiv").outerHeight();$("#fields_outer_container").css("height",e-60),$("#editor_container").css("height",e-30)},addPadding:function(e,t,a){$(".grid-stack").data("gridstack");var i=jSortable.cd_selectedNodeParent.length,s=$(jSortable.cd_selectedNodeParent).find(".cd_field.field_valueHolder").length;if(null!=e){if(!(parseInt(e.value)<40)){var l=parseInt(e.oldValue);return void $(e).val(l)}var n=parseInt(e.value),o=!0}if("number"==typeof a)n=parseInt(a),o=!0;var d=$(".basic_edit");if(1==i&&s>0&&1==o){var r=jSortable.cd_selectedNode,c=($("#cd_paddingMargin").data("spacingtype"),"padding-"+t);if("top"==t){if(d.hasClass("row_separator")){var p=$L(r).toArray().map((function(e){return $(e).data("component")}));$(p).each((function(e,t){t.ui.styles.outer_padding_top=n}))}else if(d.hasClass("cd_field")){(p=$(jSortable.cd_selectedNode).data("component")).ui.styles.padding_top=n}}else if("left"==t){if(d.hasClass("row_separator")){p=$L(r).toArray().map((function(e){return $(e).data("component")}));$(p).each((function(e,t){t.ui.styles.outer_padding_left=n}))}else if(d.hasClass("cd_field")){(p=$(jSortable.cd_selectedNode).data("component")).ui.styles.padding_left=n}}else if("bottom"==t){if(d.hasClass("row_separator")){p=$L(r).toArray().map((function(e){return $(e).data("component")}));$(p).each((function(e,t){t.ui.styles.outer_padding_bottom=n}))}else if(d.hasClass("cd_field")){(p=$(jSortable.cd_selectedNode).data("component")).ui.styles.padding_bottom=n}}else if(d.hasClass("row_separator")){p=$L(r).toArray().map((function(e){return $(e).data("component")}));$(p).each((function(e,t){t.ui.styles.outer_padding_right=n}))}else if(d.hasClass("cd_field")){(p=$(jSortable.cd_selectedNode).data("component")).ui.styles.padding_right=n}d.css(c,n),jSortable.resizeHeight(jSortable.cd_selectedGridItem)}},updateContainerHeight:function(){var e=$("#grid1"),t=e.find(".grid-stack-item");if(t.length>0){var a=$u.max(t.toArray(),(function(e){return $(e).position().top+$(e).outerHeight()})),i=$(a).position().top+$(a).outerHeight();e.outerHeight()<=i&&$("#grid1").css("height",i+10)}},cdViewEdit:function(e,t,a){var i=$("#grid_inner").width();if(e.width<i)var s=i;else if(e.width>i)s=e.width;t?a&&(jSortable.init(s),jSortable.loadWhenEditorOpen(),jSortable.removeWidget(),jSortable.menuToggle(),jSortable.dragUiFixed(),jSortable.heightset()):jSortable.init(s);var l=e.components||[];(jSortable.removeWidget(),l.length<=0)||($("#grid1").width(s),jSortable.addNodes(l,"",!0,"edit"),jSortable.nodeAlignmentMethods(void 0,!0),$("#grid1").find(".grid-stack-item").length>0&&jSortable.enableOrDisableSaveCV(!0),jSortable.sideMenuLimit(),window.removeEventListener("beforeunload",pageReloadChk),Events.isPageLayoutModified=!1,jSortable.updateContainerHeight())},nodeAlignmentMethods:function(e,t,a){e||(e=$("#grid1").find(".grid-stack-item")),t?(jSortable.setMaxWidth(e),jSortable.setMaxHeight(e),jSortable.resizeWidth(e,!0,a)):(jSortable.setMaxWidth(e),jSortable.setMaxHeight(e),jSortable.resizeWidth(e,!0,a),jSortable.lineheightSet(e),jSortable.resizeHeight(e))},addNodes:function(e,t,a,i,s){var l=$(".grid-stack").data("gridstack");$(e).each((function(e,a){var n=JSON.parse(JSON.stringify(a)),o=jSortable.createInnerHtml(a,t),d=$(o)[0].innerHTML,r=a.ui.styles.align;if("left"==r)var c="txtalnLt";else if("right"==r)c="txtalnRt";else c="txtalnMid";if($(d).hasClass("canvas_ignoreField")&&!$(d).hasClass("cd_mapping_field")){var p=$(d).removeClass("canvas_ignoreField");d=$(p).outerHTML();var u=$.parseHTML('<div><div class="grid-stack-item-content canvas_ignoreField">'+d+"</div></div>")}else u=$.parseHTML('<div><div class="grid-stack-item-content">'+d+"</div></div>");if("merge-field"==a._type||"separator"==a._type)$(u).data("nodeData",n);else{var m={field_label:"",_type:"",id:"",data_type:"",UITYPE:"",display_value:"n/a"};m.field_label=n.field_label,m._type=n._type,m.id=n.id,m.data_type=n.data_type,m.UITYPE=n.ui_type,n.display_value&&(m.display_value=n.display_value),$(u).data("array",m),$(u).data("nodeData",n)}if(a.children.length>0)$(u).find(".cd_field.field_valueHolder").mousedown((function(){$(".editorHoverTooltipTxtBack").hide()})),$(u).find(".cd_field.field_valueHolder").mouseout((function(){$(".editorHoverTooltipTxtBack").css({display:"none"})}));else{a.ui.styles.font_size;$(u).find(".grid-stack-item-content").mousedown((function(){$(".editorHoverTooltipTxtBack").hide()})),$(u).find(".grid-stack-item-content").mouseout((function(){$(".editorHoverTooltipTxtBack").css({display:"none"})}))}"edit"==i?l.addWidget(u,a.ui.position.startX,a.ui.position.startY,a.ui.position.width,a.ui.position.height):l.addWidget(u,s.x,s.y,a.ui.position.width,a.ui.position.height),jSortable.bindSmartGuidDraggable();var g=$(u).data("_gridstack_node"),v=g.width,_=g.height,h=g.x,f=g.y;$(u).css({width:v,height:_,left:h,top:f}),"edit"==i&&$(u).find(".grid-stack-item-content").css({"padding-top":a.ui.styles.outer_padding_top,"padding-left":a.ui.styles.outer_padding_left,"padding-right":a.ui.styles.outer_padding_right,"padding-bottom":a.ui.styles.outer_padding_bottom}),"right"==r?$(u).find(".row_separator").addClass("fR"):"left"==r&&$(u).find(".row_separator").addClass("fL"),$(u).find(".grid-stack-item-content").addClass(c),"TextArea"!=a.data_type&&$(u).find(".grid-stack-item-content").addClass("whiteSpaceNoRap"),jSortable.bindHoverBorder(u),$(u).find(".grid-stack-item-content").trigger("click"),"Image"==a.data_type||"Owner_Photo"==a.data_type?($(u).find(".cd_field.field_valueHolder").css("width","").addClass("w100p"),jSortable.imageHandling(u)):"edit"!=i&&jSortable.setMaxWidth(u,!0),jSortable.resizeWidth(u),jSortable.lineheightSet(u),jSortable.resizeHeight(u),1==$(u).find(".cd_people_image").length&&$(u).find(".cd_people_image").css({"max-width":v,"max-height":_})})),jSortable.newAddbasicEdit()},rangeOpen:function(e){$(e).find("#cd_range").show();var t=$(jSortable.cd_selectedNode).data("component").ui.styles.borderRadius;document.getElementById("borderRadiusBar").value=t;var a=$("#grid1").offset().left+jSortable.grid_size/2,i=$("#cview_contextmenu").offset().left,s=$("#cd_range").outerWidth();a>i?$("#cd_range").css({left:"",right:-s}):$("#cd_range").css({left:-s,right:""}),sE()},createTableStructure:function(e,t,a){if(null==e)var i=jSortable.getDataFromEditor();else i=e;var s=i.length,l=i.rowcount,n="<td></td>",o=$("<table />");$(o).attr({cellspacing:"0",cellpadding:"0"}),$(o).addClass("cview_table cv_view_body"),t&&(a?o.css("width","100%"):o.css("width",t));for(var d=function(e){return e.ui.styles.font_size},r=0;r<s;r++){for(var c=$("<tr />").attr("id","row"+r),p=i[r].length,u=($("#tempDiv > div > table #row"+r),0);u<p;u++){var m=i[r][u];if(!customViewObject.isImageValidationView&&!customViewObject.isReviewProcessView||"button"!==m._type&&"link"!==m._type){m._type;var g=m.ui.position.width;if(m.children.length>0)var v=$u.max(m.children,d).ui.styles.font_size;else if("dummyTd"!=m._type)v=m.ui.styles.font_size;var _=m.first_row,h=(l=m.ui.position.rowCount,m.ui.position.colSpan),f=m.ui.position.startX,b=m.ui.position.startY,y=m.ui.position.height,C=m.lastColumnNode,w=m.rowsLastNode,S=jSortable.preprocess(m),I=(n=$("<td />"),m.ui.styles.align);if("middle"==I)var k="txtalnMid";else if("right"==I)k="txtalnRt";else k="txtalnLt";if(C){$(n).attr({class:k,rowspan:l,colspan:h,"data-gs-width":g,"data-gs-x":f,"data-gs-y":b}).css({"line-height":v+"px"});var x=g/t*100;_&&!w&&(a?$(n).css({width:x+"%"}):$(n).css({width:g}))}else{$(n).attr({class:k,rowspan:l,colspan:h,"data-gs-width":g,"data-gs-x":f,"data-gs-y":b}).css({height:y,"line-height":v+"px"});x=g/t*100;_&&!w&&(a?$(n).css({width:x+"%"}):$(n).css({width:g}))}var E=$(S).data("component");null!=E&&("Owner_Photo"!=E.data_type&&"Image"!=E.data_type||(C?$(n).css({"max-height":y,"max-width":g,width:g}):$(n).css({"max-height":y,"max-width":g,height:y,width:g}))),m.ui.styles.outer_padding_top&&0!=m.ui.styles.outer_padding_top&&$(n).css("padding-top",m.ui.styles.outer_padding_top),m.ui.styles.outer_padding_left&&0!=m.ui.styles.outer_padding_left&&$(n).css("padding-left",m.ui.styles.outer_padding_left),m.ui.styles.outer_padding_right&&0!=m.ui.styles.outer_padding_right&&$(n).css("padding-right",m.ui.styles.outer_padding_right),m.ui.styles.outer_padding_bottom&&0!=m.ui.styles.outer_padding_bottom&&$(n).css("padding-bottom",m.ui.styles.outer_padding_bottom),$(n).append(S),$(c).append(n)}}$(o).append(c)}return o.outerHTML()},percentageViewChange:function(e){var t=customViewObject,a="fitScreen";$("#viewChangeCheckBox").is(":checked")?customViewObject.fluidWidth=!0:(a="showOriginal",customViewObject.fluidWidth=!1),new listViewHandler(t).getSingleRow();var i={modules:[{canvas_viewtype:a}]},s={"X-ZCSRF-TOKEN":csrfParamName+"="+csrfToken};Crm.userDetails.CLIENT_ACCOUNT&&(s["X-CRMPORTAL"]=Crm.userDetails.CLIENT_PORTAL_NAME),(new crmRequestPool).initiate({action:"/crm/v2/settings/modules/"+e,headers:s,data:JSON.stringify(i),contentType:"application/json",type:"PUT",success:function(e){new listViewHandler(t).getSingleRow()},error:function(e){"403"!=e.status&&"400"!=e.status||renderingUtils.displayPermissionDenied()}})},createInnerHtml:function(e,t){var a=jSortable.returnStylejson(e),i=$("<div />"),s="";return s+=jSortable.preprocess(e,t),$(i).addClass(a.alignClass).html(s),$(i).outerHTML()},preprocess:function(e,t){var a="",i=e.children,s=$L(i).toArray().filter((function(e){return"label"===e._type})),l=$L(i).toArray().filter((function(e){return"icon"===e._type}));$(s).each((function(e,t){var a=t.id,s=$L(i).toArray().filter((function(e){return e.id===a&&"field"===e._type}));if(s[0].ignore)t.ignore=!0;else if(0!=s.length){var l=s[0].field_label;t.field_label=$ESAPI.encoder().encodeForHTML(l)}})),$(l).each((function(e,t){var a=$("<span />"),s=t.iconclass;a.addClass(s),t.field_label=a.outerHTML();var l=$L(i).toArray().filter((function(e){return e.id===t.id&&"field"===e._type}));0!=l.length&&l[0].ignore&&(t.ignore=!0)}));var n=$L(i).toArray().filter((function(e){return"separator"!==e._type&&"label"!==e._type&&"icon"!==e._type})),o=$L(n).toArray().map((function(e){return e.ui.position})),d=$u.chain(o.map((function(e){return e.startY}))).uniq().value().length;if("dummyTd"==e._type||"structure"==e._type)return a="<span></span>";var r=e.children;if(0==r.length){if(a=jSortable.returnEachFieldHtml(e,t,!0),e.ignore){var c=$(a).addClass("canvas_ignoreField");a=$(c).outerHTML()}}else{var p=Object.values($u.chain(r).groupBy((function(e){return e.ui.position.startY})).value()).map((function(e){return e}));$(p).each((function(t,i){for(var s,l="",n=[],o=0;o<i.length;o++)if("label"!=i[o]._type&&"icon"!=i[o]._type)n.push([i[o]]);else{var r=[];r.push(i[o]),null!=i[o+1]&&r.push(i[o+1]),n.push(r),o++}if($(n).each((function(t,a){if(s=$u.chain(a.filter((function(e){return void 0!==e}))).map((function(e){return parseInt(e.ui.styles.font_size)})).max((function(e){return e})).value(),1==a.length)$(a).each((function(t,a){if(l+=jSortable.getNodeStyle(a),e.ignore){var i=$(l).addClass("canvas_ignoreField");l=$(i).outerHTML()}}));else{var i=a.filter((function(e){return"field"===e._type}))[0],n="";if($(a).each((function(e,t){var a=$(jSortable.getNodeStyle(t)).removeClass("cd_mapping_field").outerHTML();n+=a})),"top"==a[0].ui.styles.labelAlign){var o=(n=$("<div>"+n+"</div>")).find(".cd_field.cd_label"),d=$(o).text();d=d.replace(":",""),$(o).text(d),n=n.html()}if(i.label)"left"==i.ui.styles.labelAlign?i.ignore?l+="<span class='cd_mapping_field cd_label_left canvas_ignoreField' style='line-height: "+s+"px'>"+n+"</span>":l+="<span class='cd_mapping_field cd_label_left' style='line-height: "+s+"px'>"+n+"</span>":i.ignore?l+="<span class='cd_mapping_field cd_label_top canvas_ignoreField' style='line-height: "+s+"px'>"+n+"</span>":l+="<span class='cd_mapping_field cd_label_top' style='line-height: "+s+"px'>"+n+"</span>";else i.icon&&(i.ignore?l+="<span class='cd_mapping_field cd_icon_left canvas_ignoreField' style='line-height: "+s+"px'>"+n+"</span>":l+="<span class='cd_mapping_field cd_icon_left' style='line-height: "+s+"px'>"+n+"</span>");n=""}})),1==d)a+=l;else{var c=jSortable.getRowStyle(i,s),p=c.cssClass;a+="<div class='row_separator "+p+"' style='"+c.styles+"'>"+l+"</div>"}}))}return a},returnEachFieldHtml:function(e,t,a){JSON.stringify(e);return jSortable.getNodeStyle(e,"",t,a)},getRowStyle:function(e,t){var a=e[0],i="",s="";return a.ui.styles.outer_padding_top&&(i+="padding-top:"+a.ui.styles.outer_padding_top+"px;"),a.ui.styles.outer_padding_left&&(i+="padding-left:"+a.ui.styles.outer_padding_left+"px;"),a.ui.styles.outer_padding_bottom&&(i+="padding-bottom:"+a.ui.styles.outer_padding_bottom+"px;"),a.ui.styles.outer_padding_right&&(i+="padding-right:"+a.ui.styles.outer_padding_right+"px;"),"right"==a.ui.styles.align?i+="text-align: right;":"middle"==a.ui.styles.align?(i+="text-align: center;",s+="canvas_rowSepW100p"):i+="text-align: left;",{styles:i+="line-height:"+t+"px;",cssClass:s}},getNodeStyle:function(e,t,a,i){var s=jSortable.returnStylejson(e),l=e.field_label,n=JSON.stringify(e),o="";if(null!=t&&""!=t)var d=t;else d=$("<span />");if(null!=e.ui.styles){if($(d).attr("data-component",n),$(d).attr("style",s.style),$(d).addClass(s.cssclass),i&&$(d).attr("title",l),"separator"==e._type){var r=$ESAPI.encoder().encodeForHTML(e.symbol);$(d).append(r),$(d).addClass("cd_field cd_separator")}else if("label"==e._type)if(1==e.ignore){r="";$(d).addClass("cd_field cd_label dNImp")}else{r=e.display_value||e.field_label;$(d).append(r+" : "),$(d).addClass("cd_field cd_label")}else if("icon"==e._type)if(1==e.ignore){r="";$(d).addClass("cd_field cd_icon dNImp")}else{r=$("<span />");$(r).addClass(e.iconclass),$(d).append(r.outerHTML()),$(d).addClass("cd_field cd_icon")}else{if(e.ignore){r="";$(d).append(r),$(d).addClass("cd_field field_valueHolder dNImp").attr("data-rowcomponentid",e.id)}else{var r=e.display_value;$(d).append(r),$(d).addClass("cd_field field_valueHolder").attr("data-rowcomponentid",e.id)}if("button"==e._type?$(d).addClass("cd_btn"):("link"==e._type||"upcoming_activity"==e._type)&&$(d).addClass("cd_others"),"Image"==e.data_type||"Owner_Photo"==e.data_type)"round"==e.ui.styles.shape&&$(d).css("border-radius","50%")}o+=$(d).outerHTML()}else o+="<span class='cd_field'></span>";return o},returnStylejson:function(e){var t="",a="";e.ui&&e.ui.styles&&((t=e.ui.styles.font_style)&&t.indexOf("ProximaNova")>-1&&(t=t.replace("ProximaNova","CanvasFont")),e.ui.styles.color&&(a+="color: #"+e.ui.styles.color+";"),e.ui.styles.font_size&&(a+="font-size:"+e.ui.styles.font_size+"px;",a+="line-height:"+e.ui.styles.font_size+"px;",a+="padding-top:"+e.ui.styles.padding_top+"px;",a+="padding-left:"+e.ui.styles.padding_left+"px;",a+="padding-bottom:"+e.ui.styles.padding_bottom+"px;",a+="padding-right:"+e.ui.styles.padding_right+"px;"),e.ui.styles.background_color&&(a+="background-color: #"+e.ui.styles.background_color+";"),e.ui.styles.line_through&&(a+="text-decoration: line-through;"),e.ui.styles.borderRadius&&(a+="border-radius: "+e.ui.styles.borderRadius+"%;"),e.ui.styles.text_transform&&(a+="text-transform:"+e.ui.styles.text_transform));return{cssclass:t,alignClass:"",style:a}},customDesignJson:function(e,t,a){var i=$("#grid_inner").width();if(e)var s=e;else s=jSortable.eachNode(void 0,t);var l=$u.chain(s).max((function(e){return e.ui.position.endX})).value().ui.position.endX;if(l>i)var n=l;else n=i;if(n=Math.round(n),s.length>0){var o=$u.max(s,(function(e){return e.ui.position.startY+e.ui.position.height}));return{grid_size:n,row_size:o.ui.position.startY+o.ui.position.height,components:s,editorWidth:jSortable.cd_singleGridWidth}}return{grid_size:n,row_size:0,components:s,editorWidth:jSortable.cd_singleGridWidth}},createEachComponentJson:function(e,t,a){return $L(e).toArray().map((function(e){var t=$(e).data("_gridstack_node");if($(e).data("array"))var i=$(e).data("array").data_type,s=$(e).data("array")._type,l=$(e).data("array").UITYPE;if("TextArea"==i)var n=25;else n=t.width;if(a)var o=JSON.parse('{"color":"222","background_color":"","bold":false,"italic":false,"align":"left","font_size":"14","font_style":"CanvasFontRegular"}');else o=JSON.parse(JSON.stringify($("#textEditorMenu").data("tool")));return o.labelAlign="left",{id:t.id,field_label:t.field_label,display_value:t.display_value,_type:s,label:!1,icon:!1,data_type:i,ui_type:l,_merge_type:t.editorChanges.merge_type,ui:{position:{startX:t.x,startY:t.y,width:n,height:t.height,endX:t.x+n,singleCellWidth:jSortable.cd_singleGridWidth,imageWidth:n},styles:o},children:[]}}))},eachNode:function(e,t){if(null==e)var a=$("#grid1 > .grid-stack-item").not(".cd-stack-placeholder");else a=e;var i=$L(a).toArray().map((function(e){var a=$(e).data("_gridstack_node"),i=$(e).outerWidth(),s=$(e).height(),l=$(e).find(".cd_field"),n=$(e).find(".cd_field.field_valueHolder"),o=$(n).data("component"),d=JSON.parse(JSON.stringify($L(l).toArray().map((function(e){return $(e).data("component")})))),r=$(n).data("toolstyle"),c=o.data_type,p=o.ui_type,u=$(e).find(".grid-stack-item-content"),m={};if(u.hasClass("txtalnMid"))var g="middle";else if(u.hasClass("txtalnRt"))g="right";else g="left";if($(e).data("array")&&(c=$(e).data("array").data_type||c,p=$(e).data("array").UITYPE||p),1==n.length){var v=n.data("component");if("field"!=v._type)var _=v._type;else{_="field";var h=v.label,f=v.icon}}else if(n.length>1)_="merge-field",h=void 0,f=void 0;if(null!=o&&"merge-field"!=a._type)d[0].ui.styles;else if(""!=r&&r)JSON.parse(JSON.stringify(r));else JSON.parse('{"color":"","background_color":"","bold":false,"italic":false,"align":"left","font_size":"14","font_style":"CanvasFontRegular"}');if(n.length>1||null==$(n).data("component"));else $(n).data("component").label,$(n).data("component").icon;d.length<=1?(d=[],(m=o.ui.styles).outer_padding_top=parseInt($(e).find(".grid-stack-item-content").css("padding-top")),m.outer_padding_left=parseInt($(e).find(".grid-stack-item-content").css("padding-left")),m.outer_padding_right=parseInt($(e).find(".grid-stack-item-content").css("padding-right")),m.outer_padding_bottom=parseInt($(e).find(".grid-stack-item-content").css("padding-bottom"))):(m.outer_padding_top=parseInt($(e).find(".grid-stack-item-content").css("padding-top")),m.outer_padding_left=parseInt($(e).find(".grid-stack-item-content").css("padding-left")),m.outer_padding_right=parseInt($(e).find(".grid-stack-item-content").css("padding-right")),m.outer_padding_bottom=parseInt($(e).find(".grid-stack-item-content").css("padding-bottom")),m.align=g);var b=o.display_value;null==b&&"Image"!=c&&"Owner_Photo"!=_?b="n/a":null==b&&(b="<img onerror='emptyImgRemove(this);' data-cvsrc='"+Crm.getCrmBasePath()+"/EntityImageAttach.do?action_module=Leads&entityId=111113000000037829&actionName=readImage&encfileId=' data-fileid='n/a' class='cd_people_image'/>");var y={id:o.id,componentid:o.componentid,field_label:o.field_label,display_value:b,_type:_,label:h,icon:f,data_type:c,ui_type:p,_merge_type:o.merge_type,ui:{position:{startX:a.x,startY:a.y,width:i,height:s,endX:a.x+a.width,singleCellWidth:jSortable.cd_singleGridWidth,singleCellHeight:jSortable.cd_singleRowHeight,imageWidth:a.width},styles:m},children:d};return n.length>1&&((new ComponentProcessor).removeUnwantedKeys(y),delete y.label,y._type="merge-field"),t&&((new ComponentProcessor).removeUnwantedKeys(y),$(y.children).each((function(){(new ComponentProcessor).removeUnwantedKeys(this)}))),y}));return $u.sortBy(i,(function(e){return e.ui.position.startX})).sortBy((function(e){return e.ui.position.startY}))},allMergeNodes:function(e){return"field"==e._type?e:($(e).each((function(e,a){var i=jSortable.allMergeNodes(a.children);t.push(i)})),t);var t},fieldAdd:function(e){jSortable.newAddbasicEdit()},updateXYPosition:function(e,t,a){var i=t,s=a,l=Object.values($u.groupBy(e,(function(e){return e.ui.position.startY}))).map((function(e){return e})),n=[];$(l).each((function(e,t){var a=$u.max(t,(function(e){return e.ui.position.height})).ui.position.height;n.push(a);var l=$u.chain(t).map((function(e){return e.ui.position.width})).value();if(0!=e)var o=$u.chunk(n,e)[0].reduce((function(e,t){return e+t}),0)+s;else o=s;$(t).each((function(e,t){var a=t.ui.position.width;if(0!=e){var s=$u.chunk(l,e)[0].reduce((function(e,t){return e+t}),0),n=i+s;t.ui.position.startX=n,t.ui.position.endX=n+a,t.ui.position.startY=o}else t.ui.position.startX=i,t.ui.position.endX=i+a,t.ui.position.startY=o}))}))},eachNodeWidthAdjest:function(e,t){if(null==e)e=jSortable.customDesignJson();var a=e.components;if(!t)t=jSortable.grid_size;if(a&&a.length){var i=$u.max(a,(function(e){return e.ui.position.startY+e.ui.position.height})),s=i.ui.position.startY+i.ui.position.height;return $(a).each((function(e,i){if("merge-field"==i._type)var s=$L(i.children).toArray().filter((function(e){return"TextArea"===e.data_type})).length;else s=0;var l=$u.chain(i.children).map((function(e){return e.ui.styles.align})).uniq().value(),n=!0;if(l.length>1)n=!1;else if("right"==l[0]||"middle"==l[0])n=!1;if(n&&"Image"!=i.data_type&&"TextArea"!=i.data_type&&0==s&&"Owner_Photo"!=i.data_type&&"TextArea"!=i.data_type&&0==s){var o=jSortable.horizontalDistrubNodes(a,i);if(o){var d=o.ui.position.startX;i.ui.position.startX<d&&(i.ui.position.width=o.ui.position.startX-i.ui.position.startX,i.ui.position.endX=i.ui.position.startX+i.ui.position.width)}else i.ui.position.width=t-i.ui.position.startX,i.ui.position.endX=i.ui.position.startX+i.ui.position.width}})),$(a).each((function(e,t){var i=jSortable.verticalDistrubNodes(a,t);if(i){var l=i.ui.position.startY,n=t.ui.position.startY;t.ui.position.startX,t.ui.position.width,t.ui.position.height;n<l&&(t.ui.position.height=i.ui.position.startY-t.ui.position.startY)}else t.ui.position.height=s-t.ui.position.startY})),a}},horizontalDistrubNodesRightside:function(e,t,a){for(var i=t.ui.position.startY,s=t.ui.position.startX,l=(t.ui.position.height,[]),n=0;n<e.length;n++){var o=e[n];if(o.ui.position.startX!=t.ui.position.startX&&s<o.ui.position.startX){var d=o.ui.position.startY,r=d+o.ui.position.height;i>=d&&r>i&&l.push(e[n])}}if(0!=l.length)return 1==a?l:$u.min(l,(function(e){return e.ui.position.startX}))},horizontalDistrubNodesLeftsideMax:function(e,t,a){for(var i=t.ui.position.startY,s=t.ui.position.startX,l=i+t.ui.position.height,n=[],o=0;o<e.length;o++){var d=e[o];if(d.ui.position.startX!=t.ui.position.startX&&s>d.ui.position.startX){var r=d.ui.position.startY,c=r+d.ui.position.height;(i<r&&l>r||i>r&&i<c)&&n.push(e[o])}}if(0!=n.length)return 1==a?n:$u.max(n,(function(e){return e.ui.position.startX}))},horizontalDistrubNodesLeftside:function(e,t,a){for(var i=t.ui.position.startY,s=t.ui.position.startX,l=i+t.ui.position.height,n=[],o=0;o<e.length;o++){var d=e[o];if(d.ui.position.startX!=t.ui.position.startX&&s>d.ui.position.startX){var r=d.ui.position.startY,c=r+d.ui.position.height;(r<=i&&c>i||r>i&&r<l)&&n.push(e[o])}}if(0!=n.length)return 1==a?n:$u.min(n,(function(e){return e.ui.position.startX}))},horizontalDistrubNodes:function(e,t,a){for(var i=t.ui.position.startY,s=t.ui.position.startX,l=i+t.ui.position.height-2,n=[],o=0;o<e.length;o++){var d=e[o];if(d.ui.position.startX!=t.ui.position.startX&&s<d.ui.position.startX){var r=d.ui.position.startY,c=r+d.ui.position.height-2;(i<=r&&l>r||i>=r&&i<c)&&n.push(e[o])}}if(0!=n.length)return 1==a?n:$u.min(n,(function(e){return e.ui.position.startX}))},verticalDistrubNodes:function(e,t,a){for(var i=t.ui.position.startY,s=t.ui.position.startX,l=t.ui.position.endX,n=[],o=0;o<e.length;o++){var d=e[o];if(d.ui.position.startY!=t.ui.position.startY&&i<d.ui.position.startY){var r=d.ui.position.startX,c=d.ui.position.endX;(s<=r&&l>r||s>=r&&s<c)&&n.push(e[o])}}if(0!=n.length)return 1==a?n:$u.min(n,(function(e){return e.ui.position.startY}))},createDummyTdJson:function(e,t,a,i,s){var l=JSON.parse('{"id":"","field_label":"","display_value":"","_type":"dummyTd","label":"","icon":"","data_type":"","ui_type":"","ui":{"position":{"startX":"","startY":"","width":"","height":"","endX":"","singleCellWidth":""},"styles":{"color":"","background_color":"","":"","font_size":"","font_style":"","italic":""}},"children":[]}'),n=$u.max(e,(function(e){return e.ui.position.startY+e.ui.position.height}));l.ui.position.startX=t,l.ui.position.startY=a,l.ui.position.width=i,l.ui.position.endX=t+i;var o=jSortable.verticalDistrubNodes(e,l);if(o)l.ui.position.height=o.ui.position.startY-a;else{var d=n.ui.position.startY+n.ui.position.height;l.ui.position.height=d-a}if(s)return l;var r=jSortable.horizontalDistrubNodesLeftside(e,l);return r?l.ui.position.startX=r.ui.position.startX:(l.ui.position.startX=0,l.ui.position.width=i+t),l},arrangeAdjestOutput:function(e,t){var a=Object.values($u.chain(e).groupBy((function(e){return e.ui.position.startY})).value()).map((function(e){return $u.sortBy(e,(function(e){return e.ui.position.startX}))})),i=[];return $(a).each((function(a,s){var l=s.map((function(e){return e.ui.position})).map((function(e){return e.width})).reduce((function(e,t){return e+t}),0),n=s.length;if(l!=t){for(var o=[],d=0;d<n;d++){var r=s[d],c=(s[d+1],jSortable.horizontalDistrubNodesRightside(e,r));if(c)c.ui.position.startX;else;if(r.ui.position.endX!=t)if(null==c){var p=t-r.ui.position.endX,u=jSortable.createDummyTdJson(e,r.ui.position.endX,r.ui.position.startY,p,!0);o.push(u)}else if(c.ui.position.startX!=r.ui.position.endX){p=c.ui.position.startX-r.ui.position.endX,u=jSortable.createDummyTdJson(e,r.ui.position.endX,r.ui.position.startY,p,!0);o.push(u)}}s.push.apply(s,o),i.push(s)}else i.push(s)})),jSortable.orderingByXvalue(i)},orderingByXvalue:function(e){var t=[];return $(e).each((function(e,a){t.push($u.sortBy(a,(function(e){return e.ui.position.startX})))})),t},addDummyJson:function(e,t){var a=jSortable.arrangeAdjestOutput(e,t),i=Lyte.registeredMixins["crm-utilities"].flatten(a),s=i.filter((function(e){return"dummyTd"===e._type})),l=i.filter((function(e){return"dummyTd"!==e._type}));s=Object.values($u.chain(s).groupBy((function(e){return e.ui.position.startX&&e.ui.position.width})).value()).map((function(e){return $u.min(e,(function(e){return e.ui.position.startY}))}));$.merge(l,s);var n=Object.values($u.chain(l).groupBy((function(e){return e.ui.position.startY})).value()).map((function(e){return e}));return $(n).each((function(e,t){for(var a=function(e){return e.ui.position.startY>=o},s=function(e){return e.ui.position.startY},l=0;l<t.length;l++){var n=t[l];if("dummyTd"!=n._type){var o=n.ui.position.startY,d=n.ui.position.startX,r=(n.ui.position.startY,n.ui.position.height,n.ui.position.endX,n.ui.position.startX),c=jSortable.horizontalDistrubNodesLeftside(i,n),p=jSortable.horizontalDistrubNodesLeftside(i,n,!0),u=$L(p).toArray().filter(a);if(u.length>0)var m=$u.min(u,s);else m=void 0;var g=jSortable.horizontalDistrubNodesLeftsideMax(i,n);if(0!=n.ui.position.startX)if(c)if(m){if(0!=(v=d-(_=jSortable.findClosestXaxis(i,n)))){h=jSortable.createDummyTdJson(i,_,o,v,!0);t.push(h),i.push(h)}}else{var v,_=jSortable.findClosestXaxis(i,n);if(0!=(v=d-g.ui.position.endX)){h=jSortable.createDummyTdJson(i,_,o,v,!0);t.push(h),i.push(h)}}else{var h=jSortable.createDummyTdJson(i,0,o,r,!0);t.push(h),i.push(h)}}}})),n},findClosestXaxis:function(e,t){var a=$u.without(e,t).filter((function(e){return e.ui.position.startX<t.ui.position.startX})),i=t.ui.position.startY,s=a.filter((function(e){return e.ui.position.startY<=i&&e.ui.position.startY+e.ui.position.height>i}));return s.length>0?$u.max(s,(function(e){return e.ui.position.startX})).ui.position.endX:0},verticalAllDistrubNodes:function(e,t,a){t.ui.position.startY;for(var i=t.ui.position.startX,s=t.ui.position.endX,l=[],n=0;n<e.length;n++){var o=e[n];if(o.ui.position.startY!=t.ui.position.startY){var d=o.ui.position.startX;i<d&&s>d&&l.push(e[n])}}if(0!=l.length)return 1==a?l:$u.min(l,(function(e){return e.ui.position.startY}))},getHtml:function(e){e.grid_size=e.grid_size||e.width||1057;var t=jSortable.getDataFromEditor(e.components,e.grid_size);return jSortable.createTableStructure(t,e.grid_size,customViewObject.fluidWidth)},getDataFromEditor:function(e,t){if(null==e)e=jSortable.eachNode();null==t&&(t=jSortable.grid_size);$("#grid1 > .grid-stack-item").not(".cd-stack-placeholder");for(var a=[],i=JSON.parse(JSON.stringify(e)),s=jSortable.customDesignJson(i,!1,t),l=jSortable.eachNodeWidthAdjest(s,t),n=jSortable.addDummyJson(l,t),o=Lyte.registeredMixins["crm-utilities"].flatten(n),d=$u.min(o,(function(e){return e.ui.position.startY})),r=Object.values($u.chain(o).groupBy((function(e){return e.ui.position.startX})).value()).map((function(e){return e[0].ui.position.startX})),c=[],p=function(e){return e.ui.position.startY},u=function(e){return e},m=0;m<o.length;m++){if(h=jSortable.rowSpanDistrubNode(o,o[m],!0)){h.push(o[m]);var g=Object.values($u.chain(h).groupBy(p).value()).map(u),v=$(g).length;o[m].ui.position.rowCount=v}else o[m].ui.position.rowCount=1}var _=function(e){return e.ui.position.startX};for(m=0;m<o.length;m++){var h;if(h=jSortable.verticalAllDistrubNodes(o,o[m],!0)){h.push(o[m]);g=Object.values($u.chain(h).groupBy(_).value()).map(u);var f=$(g).length;o[m].ui.position.colSpan=f}else o[m].ui.position.colSpan=1}if(0==d.ui.position.startY){var b=o.filter((function(e){return 0===e.ui.position.startY}));$(b).each((function(e,t){t.ui.position.startY=2}));var y=0}else y=d.ui.position.startY-1;for(m=0;m<r.length;m++){(x=JSON.parse('{"id":"","field_label":"","display_value":"","_type":"dummyTd","label":"","icon":"","data_type":"","ui_type":"","ui":{"position":{"startX":"","startY":"","width":"","height":"","endX":"","singleCellWidth":""},"styles":{"color":"","background_color":"","":"","font_size":"","font_style":"","italic":""}},"first_row": true, "children":[]}')).ui.position.startX=r[m],x.ui.position.startY=y,r[m+1]?x.ui.position.width=r[m+1]-r[m]:x.ui.position.width=s.grid_size-r[m],x.ui.position.endX=r[m]+x.ui.position.width,x.ui.position.height=1,c.push(x),o.push(x)}if(0!=o.length){var C=Object.values($u.chain(o).groupBy((function(e){return e.ui.position.startY})).value()).map((function(e){return e})),w=C.length;for(m=0;m<w;m++){var S=C[m],I=C[m+1],k=S[0].ui.position.startY,x=JSON.parse('{"id":"","field_label":"","display_value":"","_type":"dummyTd","label":"","icon":"","data_type":"","ui_type":"","ui":{"position":{"startX":-1,"startY":"","width":1,"height":1,"endX":"","singleCellWidth":"","rowCount":1,"colSpan":1},"styles":{"color":"","background_color":"","":"","font_size":"","font_style":"","italic":""}},"first_row": true, "children":[]}');if(I){var E=I[0].ui.position.startY;x.ui.position.height=E-k}S.push(x);var T=$u.sortBy(S,(function(e){return e.ui.position.startX}));a.push(T)}}var j=a[a.length-1];return $(j).each((function(e,t){t.rowsLastNode=!0})),a},rowSpanDistrubNode:function(e,t,a){for(var i=t.ui.position.startY,s=(t.ui.position.startY,t.ui.position.heigth),l=(t.ui.position.startX,s=i+t.ui.position.height,[]),n=0;n<e.length;n++){var o=e[n];if(o.ui.position.startX!=t.ui.position.startX){var d=o.ui.position.startY;o.ui.position.height;d>=i&&d<s&&l.push(e[n])}}if(0!=l.length)return 1==a?l:$u.min(l,(function(e){return e.ui.position.startX}))},heightAboveOne:function(e){var t=[];return $(e).each((function(e,a){a.ui.position.height>1&&t.push(a)})),t},cdGalleryViewEdit:function(e,t){t||jSortable.init(e.galleryAddNodeswidth);var a=e.components;jSortable.removeWidget(),a.length<=0||jSortable.galleryAddNodes(a,"",!0,"edit")},galleryEachNode:function(e,t){if(null==e)var a=$("#grid3 > .grid-stack-item").not(".cd-stack-placeholder");else a=e;return $L(a).toArray().map((function(e){var a=$(e).data("_gridstack_node"),i=$(e).outerWidth(),s=$(e).outerHeight(),l=$(e).find(".cd_field"),n=$(e).find(".cd_field.field_valueHolder"),o=$(n).data("component"),d=JSON.parse(JSON.stringify($L(l).toArray().map((function(e){return $(e).data("component")})))),r=$(n).data("toolstyle"),c=o.data_type,p=o.ui_type,u=$(e).find(".grid-stack-item-content"),m={};if(u.hasClass("txtalnMid"))var g="middle";else if(u.hasClass("txtalnRt"))g="right";else g="left";if(1==n.length){var v=n.data("component");if("field"!=v._type)var _=v._type;else{_="field";var h=v.label,f=v.icon}}else if(n.length>1)_="merge-field",h=void 0,f=void 0;if(null!=o&&"merge-field"!=a._type)d[0].ui.styles;else if(""!=r&&r)JSON.parse(JSON.stringify(r));else JSON.parse('{"color":"","background_color":"","bold":false,"italic":false,"align":"left","font_size":"14","font_style":"CanvasFontRegular"}');if(n.length>1||null==$(n).data("component"));else $(n).data("component").label,$(n).data("component").icon;d.length<=1?(d=[],m=o.ui.styles):(m.outer_padding_top=parseInt($(e).find(".grid-stack-item-content").css("padding-top")),m.outer_padding_left=parseInt($(e).find(".grid-stack-item-content").css("padding-left")),m.outer_padding_right=parseInt($(e).find(".grid-stack-item-content").css("padding-right")),m.outer_padding_bottom=parseInt($(e).find(".grid-stack-item-content").css("padding-bottom")),m.align=g);var b={id:o.id,componentid:o.componentid,field_label:o.field_label,display_value:o.display_value,_type:_,label:h,icon:f,data_type:c,ui_type:p,_merge_type:o.merge_type,ui:{position:{startX:a.x,startY:a.y,width:i,height:s,endX:a.x+a.width,singleCellWidth:jSortable.cd_singleGridWidth,singleCellHeight:jSortable.cd_singleRowHeight,imageWidth:a.width},styles:m},children:d};return n.length>1&&(delete b.data_type,delete b.display_value,delete b.field_label,delete b.icon,delete b.id,delete b.componentid,delete b.label,b._type="merge-field"),t&&(delete b.field_label,delete b.display_value,delete b.componentid,$(b.children).each((function(){delete this.field_label,delete this.display_value,delete this.ui_type,delete this.data_type,delete this.componentid}))),b}))},galleryAddNodes:function(e,t,a,i,s){var l=$(".grid-stack").data("gridstack");$(e).each((function(e,a){var i=a.children.filter((function(e){return"field"===e._type})),s=JSON.parse(JSON.stringify(a)),n=jSortable.createInnerHtml(a,t),o=$(n)[0].innerHTML,d=a.ui.styles.align;if("left"==d)var r="txtalnLt";else if("right"==d)r="txtalnRt";else r="txtalnMid";var c=$.parseHTML('<div><div class="grid-stack-item-content">'+o+"</div></div>");if("merge-field"==a._type||"separator"==a._type)$(c).data("nodeData",s);else{var p={field_label:"",_type:"",id:""};p.field_label=s.field_label,p._type=s._type,p.data_type=s.data_type,p.id=s.id,$(c).data("array",p),$(c).data("nodeData",s)}l.addWidget(c,a.ui.position.startX,a.ui.position.startY,a.ui.position.width,a.ui.position.height);var u=$(c).data("_gridstack_node"),m=u.width,g=u.height,v=u.x,_=u.y;$(c).css({left:v,top:_,width:m,height:g,"min-width":"unset"}),i.length>1&&$(c).data("group-field",!0),$(c).find(".grid-stack-item-content").addClass(r),"TextArea"!=a.data_type&&$(c).find(".grid-stack-item-content").addClass("whiteSpaceNoRap"),1==$(c).find(".cd_people_image").length&&$(c).find(".cd_people_image").css({"max-width":m,"max-height":g})}))},galleryDeleteElement:function(e,t){if(jSortable.triggerCatchMoves("delete"),null==e)e=$(".basic_edit");$(e).each((function(e,t){if(!$(t).hasClass("cd_field cd_separator")){($(t).hasClass("cd_field cd_label")||$(t).hasClass("cd_field cd_icon"))&&(t=jSortable.getSelectedFields(!1,t));var a=jSortable.getSelectedFields(!1,t),i=a.map((function(e){return $(e).data("component")}));if(!$(t).hasClass("grid-stack-item"))var s=$(t).parents(".grid-stack-item");if($(t).hasClass("row_separator"))$(t).remove();else if($(t).hasClass("cd_field field_valueHolder")){var l=i[0];if(1==l.label||1==l.icon){var n=$(a).parent();0==n.prev().length?n.next().remove():n.prev().remove(),n.remove()}else 0==$(a).prev().length?$(a).next().remove():$(a).prev().remove(),$(a).remove()}else if($(t).hasClass("grid-stack-item-content")){var o=$(a).parents(".grid-stack-item");$(o).remove()}else $(t).remove();var d=$(s).find(".row_separator");if(0==$(s).find(".cd_field").length&&$(s).remove(),1==$(s).find(".row_separator").length){var r=$(s).find(".row_separator").children();$(r).unwrap()}$(d).each((function(e,t){0==$(t).children().length&&$(t).remove()}))}}))},sideMenuLimit:function(){jSortable.canvas_fieldCount=$("#grid1").find(".cd_field.field_valueHolder").length;var e=$("#grid2"),t=$("#grid2").find(".cd_field.field_valueHolder");jSortable.canvas_fieldCount<jSortable.canvas_fieldLimit&&$("#grid2").hasClass("cv_disable")?e.removeClass("cv_disable"):jSortable.canvas_fieldCount>=jSortable.canvas_fieldLimit&&e.addClass("cv_disable"),t.length<=0?($("#sidebar_fields,#sidebar_fieldsHeading,#sidebar_buttons,#sidebar_linksHeading,#sidebar_links,#sidebar_othersHeading,#sidebar_others,#noFields").hide(),$("#noFields").show()):($("#sidebar_fields,#sidebar_fieldsHeading,#sidebar_buttons,#sidebar_linksHeading,#sidebar_links,#sidebar_othersHeading,#sidebar_others,#noFields").show(),$("#noFields").hide())},galleryCreateNode:function(e){var t={float:!0,startContainerHt:30,gridPadding:4,gridIntialHeight:100,cellHeight:1,placeholderClass:"cd-stack-placeholder",verticalMargin:0,canvas:!0,disableDrag:!0,disableResize:!0,width:e,acceptWidgets:".grid-stack-item",cancel:!1,cd_fieldDropBeforeAppend:function(e){jSortable.fieldDropBeforeAppend(e)},fieldDropChanges:function(e){jSortable.fieldDropchanges(e)},cd_fieldAdd:function(e){jSortable.fieldAdd(e)},cd_fieldMoveEnd:function(e,t){jSortable.dragOrMoveEnd(e,t)},cd_fieldStart:function(e,t){jSortable.fieldDragStart(e,t)},cd_fieldMove:function(e,t){jSortable.fieldDragMove(e,t)},cd_dragFromSidebar:function(e,t){jSortable.fieldDragSidebar(e,t)},cd_dropAddNode:function(e,t,a){jSortable.fieldDropAddNode(e,t,a)},cd_dropOut:function(e,t){jSortable.dropOut(e,t)},cd_getMaxWidthForElement:function(e){if(e&&e.data_type){var t=Math.ceil(200/jSortable.cd_singleGridWidth)*jSortable.cd_singleGridWidth;return"Image"===e.data_type||"Owner_Photo"===e.data_type?{maxWidth:t,maxHeight:200}:{maxWidth:void 0,maxHeight:void 0}}}};$("#grid3").gridstack(t)},createNode:function(e){var t={float:!0,startContainerHt:30,gridPadding:4,gridIntialHeight:200,cellHeight:1,placeholderClass:"cd-stack-placeholder",verticalMargin:0,canvas:!0,width:Math.ceil($("#grid1").width()),acceptWidgets:".grid-stack-item",cancel:!1,cd_fieldDropBeforeAppend:function(e){jSortable.fieldDropBeforeAppend(e)},fieldDropChanges:function(e){jSortable.fieldDropchanges(e)},cd_fieldAdd:function(e){jSortable.fieldAdd(e)},cd_fieldMoveEnd:function(e,t){jSortable.dragOrMoveEnd(e,t)},cd_fieldStart:function(e,t){jSortable.fieldDragStart(e,t)},cd_fieldMove:function(e,t){jSortable.fieldDragMove(e,t)},cd_dragFromSidebar:function(e,t){jSortable.fieldDragSidebar(e,t)},cd_dropAddNode:function(e,t,a){jSortable.fieldDropAddNode(e,t,a)},cd_dropOut:function(e,t){jSortable.dropOut(e,t)},cd_getMaxWidthForElement:function(e){if(e&&e.data_type){var t=Math.ceil(200/jSortable.cd_singleGridWidth)*jSortable.cd_singleGridWidth;return"Image"===e.data_type||"Owner_Photo"===e.data_type?{maxWidth:t,maxHeight:200}:{maxWidth:void 0,maxHeight:void 0}}}};$("#grid1").gridstack(t),$("#grid2 .grid-stack-item").draggable({revert:"invalid",verticalMargin:"1px",handle:".grid-stack-item-content",scroll:!1,appendTo:"body"})},updateNode:function(e,t,a,i){var s=$(jSortable.cd_selectedNode);$(s).each((function(e,i){var s=JSON.parse(JSON.stringify($(i).data("component").ui.styles)),l=s[t];s[t]="align"==t||"font_size"==t||"color"==t||"font_style"==t||"background_color"==t?a:!l,$(i).data("component").ui.styles=s}))},loadWhenEditorOpen:function(){$("#grid2"),$(".grid-stack").data("gridstack");$("#fields_outer_container").perfectScrollbar(),jSortable.groupingused=0,$("#grid_inner").hover((function(){$("#grid1 > .ui-resizable-s").css("opacity","1")}),(function(){$("#grid1 > .ui-resizable-s").css("opacity","0")})),$("#grid1").click((function(e){if(0!=$(e.target).parents(".grid-stack-item").length){e.shiftKey||($(".basic_edit").removeClass("basic_edit"),$(".ignoreFieldSelectedColor").removeClass("ignoreFieldSelectedColor"));var t=$(e.target),a=($(t).hasClass("cd_field"),$(t).parents(".cd_field").length,$(t).hasClass("row_separator"),$(t).hasClass("grid-stack-item-content"),$(t).hasClass("cd_separator")),i=e.target;$(i).hasClass("cd_field")?0==$(i).siblings().length&&0==$(i).parents(".row_separator").length?($(i).parent().addClass("basic_edit"),$(i).parent().addClass("style_copy_node")):($(i).addClass("basic_edit"),$(i).addClass("style_copy_node")):$(i).parent().hasClass("cd_field")?0==$(i).parent().siblings().length&&0==$(i).parents(".row_separator").length?($(i).parents(".grid-stack-item-content").addClass("basic_edit"),$(i).parents(".grid-stack-item-content").addClass("style_copy_node")):($(i).parents(".cd_field").addClass("basic_edit"),$(i).parents(".cd_field").addClass("style_copy_node")):$(i).hasClass("canvas_ignoreField")?($(i).addClass("ignoreFieldSelectedColor"),$(i).find(".cd_field.field_valueHolder").addClass("basic_edit")):$(i).hasClass("row_separator")?$(i).addClass("basic_edit"):$(i).hasClass("grid-stack-item-content")?$(e.target).addClass("basic_edit"):$(i).parent().hasClass("grid-stack-item-content")&&$(i).parent().addClass("basic_edit");var s=$(".basic_edit").parents(".grid-stack-item"),l=($(s).find(".cd_field"),t.parents(".grid-stack-item").data("_gridstack_node")),n=$(".basic_edit").length,o=$L(s).toArray().map((function(e){return $(e).data("_gridstack_node").y})),d=$L(s).toArray().map((function(e){return $(e).data("_gridstack_node").x})),r=$u.uniq(d).length,c=$u.uniq(o).length;if(1!=c&&1!=r||!(n>1||"merge-field"==l.type)?$(".tE_merge").addClass("cv_disable"):($(".tE_merge").removeClass("cv_disable"),n>1?(1==c?$("#textEditorMenu .tE_merge").data("merge-type","column"):$("#textEditorMenu .tE_merge").data("merge-type","row"),$("#textEditorMenu .tE_merge").html("Merge")):$("#textEditorMenu .tE_merge").html("Unmerge")),a){var p=$(t).html();$("#cdSeparatorMenuDropdown").html(p)}$(".basic_edit").hasClass("grid-stack-item-content")||$(".basic_edit").hasClass("row_separator")?jSortable.cd_selectedNode=$(".basic_edit").find(".cd_field"):jSortable.cd_selectedNode=$(".basic_edit"),$(".basic_edit").hasClass("row_separator")||$(".basic_edit").children(".row_separator")?jSortable.cd_rowSelectedNode=$(".basic_edit").find(".cd_field"):jSortable.cd_rowSelectedNode=[],$(".basic_edit").hasClass("grid-stack-item-content")?jSortable.cd_selectedNodeParent=$(".basic_edit"):jSortable.cd_selectedNodeParent=$(".basic_edit").parents(".grid-stack-item-content"),$(".basic_edit").hasClass("grid-stack-item")?jSortable.cd_selectedGridItem=$(".basic_edit"):jSortable.cd_selectedGridItem=$(".basic_edit").parents(".grid-stack-item"),jSortable.updateCdtool();var u=$(jSortable.cd_selectedGridItem).attr("fields-name");0!=$(jSortable.cd_selectedGridItem).length&&("TAGS"==u||$(jSortable.cd_selectedGridItem).find(".cd_btn").length>0||$(jSortable.cd_selectedGridItem).find(".cd_others").length>0||$(jSortable.cd_selectedGridItem).find(".cd_link").length>0)?($("#textEditorMenu").removeClass("cv_disable"),$("#cdDeleteIcon").removeClass("cv_disable"),$("#cvimagesToolbar").hide(),$("#cvtextToolbar").hide(),$("#cvspecialToolbar").show()):0!=$(jSortable.cd_selectedGridItem).length&&!$(jSortable.cd_selectedGridItem).find(".cd_people_image").length>0?($("#textEditorMenu").removeClass("cv_disable"),$("#cdDeleteIcon").removeClass("cv_disable"),$("#cvimagesToolbar").hide(),$("#cvspecialToolbar").hide(),$("#cvtextToolbar").show()):0!=$(jSortable.cd_selectedGridItem).length&&$(jSortable.cd_selectedGridItem).find(".cd_people_image").length>0&&($("#textEditorMenu").removeClass("cv_disable"),$("#cdDeleteIcon").removeClass("cv_disable"),$("#cvtextToolbar").hide(),$("#cvspecialToolbar").hide(),$("#cvimagesToolbar").show()),$("#labelalign_dropdown").hide(),$("#icon_dropdown").hide(),$("#separator_dropdown").hide(),$("#cview_contextmenu").hide(),$(".style_copy_node").removeClass("style_copy_node"),$(".basic_edit_bdr").removeClass("basic_edit_bdr"),sE(e)}})),$("#fontcolor_dropdown > .text-color-code > span").click((function(){var e=$(this).data("textcolor");$("#cd_textColorHolder").removeClass("cvresetcolor"),jSortable.colorUpdate(e),sE()})),$("#fontcolor_dropdown > .background-listof-color-code > span").click((function(){var e=$(this).data("bgcolor");$("#cd_textBgHolder").removeClass("cvresetcolor"),jSortable.backgroundColorUpdate(e),sE()}));$("#grid1").height();$("#sidemenuSearchInput").focus((function(){$("#sidebar_search").addClass("cd_focused")})),$("#sidemenuSearchInput").focusout((function(){$("#sidebar_search").removeClass("cd_focused")})),setTimeout((function(){jSortable.heightset()}),500)},fieldDragStart:function(e,t){var a=$(t).siblings(".grid-stack-item").addClass("cd_moveTrans");"resizestop"!=e.type&&jSortable.triggerCatchMoves("Move"),$(".basic_edit").removeClass("basic_edit"),$(t).find(".grid-stack-item-content").addClass("basic_edit"),jSortable.globleNodesUpdate(),$(a).addClass(""),jSortable.setGridStackNodeHeightWidth(),$("#grid_inner").addClass("editorBgAnimation").removeClass("editorBgAnimationRevert"),"resizestart"==e.type?$(t).append("<div class='nodePosition nodeWidthHeight'><span>W:</span><span id='nodeWidth'></span><span> H:</span><span id='nodeHeight'></span></div>"):"dragstart"==e.type&&$(t).append("<div class='nodePosition nodeXY'><span>X:</span><span id='nodePosiX'></span><span> Y:</span><span id='nodePosiY'></span></div>")},returnNodeFromPosition:function(e,t,a,i,s){var l=$L("#grid1").find(".grid-stack-item").not(".cd-stack-placeholder").toArray().map((function(e){return $(e).data("_gridstack_node")}));if(s)var n=l;else{var o=l.filter((function(a){return a.x===e&&a.y===t}));n=$u.without(l,o[0])}return jSortable.areaIsEmpty(n,e,t,a,i)},spacingOpen:function(e){if(!$("#textEditorMenu").hasClass("cv_disable")){jSortable.hideOtherOptions(),jSortable.builderOptionDropdown(e,$("#cd_toolpaddingOuterBox")),$("#cd_toolpaddingOuterBox").show();var t=parseInt($("#cd_paddingLeft").val()),a=parseInt($("#cd_paddingTop").val());0==t?$("#padding-left-arrow").addClass("paddingDisable"):$("#padding-left-arrow").removeClass("paddingDisable"),0==a?$("#padding-top-arrow").addClass("paddingDisable"):$("#padding-top-arrow").removeClass("paddingDisable")}sE()},findDistrubNodesFromGroup:function(e,t){var a=$(t).offset(),i=$(e).find(".row_separator"),s=$(t).find(".row_separator").length;if(i.length>0){var l=$u.max(i.toArray(),(function(e){return $(e).offset().top})),n=$(l).offset().top+$(l).outerHeight();if(a.top<$(e).offset().top)return{node:e,position:"top"};if(a.top+$(t).outerHeight()/2>n||s>1)return{node:e,position:"bottom"};for(var o=$(e).find(".row_separator"),d=function(e){return $(e).offset().left+$(e).outerWidth()},r=function(e){return $(e).offset().left},c=0;c<o.length;c++){var p=o[c],u=$(p).offset().top,m=u+$(o[c]).outerHeight();if(a.top>=u-1&&m>=a.top-1){var g=$(p).children().not(".cd_field.cd_separator"),v=$u.max(g.toArray(),d),_=$u.min(g.toArray(),r),h=$(v).offset().left+$(v).outerWidth(),f=$(_).offset().left;if(h<a.left)return{node:e,row:p,column:v,position:"after"};if(f>a.left)return{node:e,row:p,column:_,position:"before"};for(var b=0;b<g.length;b++){var y=g[b],C=(S=$(y).offset().left)+$(y).outerWidth();if(a.left>=S&&C>=a.left)return{node:e,row:p,column:g[b],position:"after"}}}}}else{g=$(e).find(".grid-stack-item-content").children().not(".cd_field.cd_separator"),n=$(e).offset().top+$(e).data("_gridstack_node").height;var w=$(e).data("_gridstack_node").height/2;if(a.top<$(e).offset().top)return{node:e,position:"top",type:"singleRow"};if(a.top>$(e).offset().top+w||s>1)return{node:e,position:"bottom",type:"singleRow"};v=$u.max(g.toArray(),(function(e){return $(e).offset().left+$(e).outerWidth()})),_=$u.min(g.toArray(),(function(e){return $(e).offset().left})),h=$(v).offset().left+$(v).outerWidth(),f=$(_).offset().left;if(h<a.left)return{node:e,row:p,column:v,position:"after",type:"singleRow"};if(f>a.left)return{node:e,row:p,column:_,position:"before",type:"singleRow"};for(b=0;b<g.length;b++){var S;y=g[b],C=(S=$(y).offset().left)+$(y).outerWidth();if(a.left>=S&&C>=a.left)return{node:e,row:p,column:g[b],position:"after",type:"singleRow"}}}},lineheightSet:function(e){if(null==e&&(e=$(".basic_edit").parents(".grid-stack-item")),$(e).find(".row_separator,.grid-stack-item-content,.cd_mapping_field,.cd_field").toArray().forEach((function(e){$(e).css("line-height","")})),null!=e){var t=$(e).find(".row_separator");if(t.length>0)$(t).each((function(e,t){var a=$(t).find(".cd_field");$(a).each((function(e,t){var a=parseInt($(t).css("font-size"));$(t).css("line-height",a+"px")}));var i=$u.chain(a).map((function(e){return parseInt($(e).css("font-size"))})).max((function(e){return e})).value();$(t).css("line-height",i+"px")}));else{var a=$(e).find(".grid-stack-item-content").find(".cd_field");if($(a).each((function(e,t){if($(t).hasClass("cd_others"))var a=10;else a=parseInt($(t).css("font-size"));$(t).css("line-height",a+"px")})),1==a.length&&$(a).hasClass("cd_others"))var i=10;else i=$u.chain(a).map((function(e){return parseInt($(e).css("font-size"))})).max((function(e){return e})).value();$(e).find(".grid-stack-item-content").css("line-height",i+"px")}}},distrubNodeFind:function(e,t){if($(".cd_group_holder").remove(),$(".cd_group_holderouter").remove(),$(t).is(":visible")){var a=$(t).data("_gridstack_node"),i=jSortable.returnNodeFromPosition(a.x,a.y,a.width,a.height),s=null==i,l=(a.y,a.height,$(t).outerWidth()),n=$(t).outerHeight();$(t).offset(),$(t).find(".cd_people_image").length;if(s){o=void 0;d&&d.el&&$(d.el).find(".grid-stack-item-content").removeClass("distrubNode_bg").addClass("cv_gray_bdr")}else{var o,d=$u.min([i],(function(e){return e.x})),r=d.height,c=d.width;if(null!=(o=jSortable.findDistrubNodesFromGroup(e,t))){var p=$(o.node).find(".cd_people_image").length;if(1==$(o.node).find(".cd_field.field_valueHolder").length){var u=$(o.node).find(".cd_field.field_valueHolder").data("component");if("upcoming_activity"===u._type||"TextArea"===u.data_type||"Tags"===u.data_type||"button"===u._type||"link"===u._type)var m=!1;else m=!0}else m=!0}$(d.el).find(".grid-stack-item-content").removeClass("cv_gray_bdr").addClass("distrubNode_bg")}if(o&&0==p&&m){if("top"==o.position)o.type,$(o.node).find(".grid-stack-item-content").prepend("<div class='cd_group_holderouter'><span class='cd_group_holder groupIcon_top'></span></div>"),$(d.el).css({height:n+r}),$(o.node).hasClass("distrubNodeOverLap")||$(o.node).css({height:n+$(o.node).outerHeight()});else if("bottom"==o.position)o.type,$(o.node).find(".grid-stack-item-content").append("<div class='cd_group_holderouter'><span class='cd_group_holder groupIcon_bottom'></span></div>"),$(d.el).css({height:n+r}),$(o.node).hasClass("distrubNodeOverLap")||$(o.node).css({height:n+$(o.node).outerHeight()});else if("after"==o.position){if((v=parseInt($(d.el).css("max-width")))>l+c?$(d.el).css({width:l+c}):$(d.el).css({width:v}),null!=o.row)var g=$(o.row).height();$("<span class='cd_group_holder groupIcon_middle' style='height:"+g+"px'></span>").insertAfter($(o.column)),$(o.node).hasClass("distrubNodeOverLap")||(v>l+$(o.node).outerWidth()?$(o.node).css({width:l+$(o.node).outerWidth()}):$(o.node).css({width:v}))}else if("before"==o.position){var v;if((v=parseInt($(d.el).css("max-width")))>l+c?$(d.el).css({width:l+c}):$(d.el).css({width:v}),null!=o.row)g=$(o.row).height();$("<span class='cd_group_holder groupIcon_middle' style='height:"+g+"px'></span>").insertBefore($(o.column)),$(o.node).hasClass("distrubNodeOverLap")||(v>l+$(o.node).outerWidth()?$(o.node).css({width:l+$(o.node).outerWidth()}):$(o.node).css({width:v}))}$(o.node).addClass("distrubNodeOverLap")}}},fieldDragMove:function(e,t,a){var i=$(t).data("_gridstack_node"),s=jSortable.returnNodeFromPosition(i.x,i.y,i.width,i.height),l=null==s,n=(i.y,i.height,i.width),o=i.height,d=($(t).offset(),$(t).position()),r=$(t).find(".cd_people_image").length,c=$(t).find(".cd_field.field_valueHolder");if(1==c.length)if(null!=(g=$(c).data("component"))){var p=g._type,u=g.data_type;if("upcoming_activity"===p||"Tags"===u||"TextArea"===u||"button"===p||"link"===p)var m=!1;else m=!0}else{var g;p=(g=$(t).data("array"))._type,u=g.data_type;if("upcoming_activity"===p||"Tags"===u||"TextArea"===u||"button"===p||"link"===p)m=!1;else m=!0}else m=!0;if(clearTimeout(jSortable.distrubNodeTimer),!l&&0==r&&m){var v=$u.min([s],(function(e){return e.x}));v.height,v.width;0==$(".distrubNodeOverLap").length?jSortable.distrubNodeTimer=setTimeout((function(){jSortable.distrubNodeFind(s.el,t)}),300):jSortable.distrubNodeFind(s.el,t)}else $(".cd_group_holder").remove(),$(".cd_group_holderouter").remove(),$(".distrubNodeOverLap").length>0&&0==$(".distrubNodeOverLap").find(".cd_people_image").length&&(jSortable.applyGridStackNodeWidth($(".distrubNodeOverLap")),$(".distrubNodeOverLap").removeClass("distrubNodeOverLap"),$(".distrubNode_bg").removeClass("distrubNode_bg").addClass("cv_gray_bdr"));jSortable.getSelectedFields();if("resize"==e.type){var _=$(t).data("array");if(_)var h=_.data_type;0==$(t).find(".cd_people_image").length&&"TextArea"!=h&&jSortable.resizeHeight($(t)),1==$(t).find(".cd_people_image").length&&$(t).find(".cd_people_image").css({"max-width":n-4,"max-height":o}),(1==!$(t).find(".grid-stack-item-content").children().length&&0==!$(t).find(".row_separator").length||$(t).find(".row_separator").length>0)&&jSortable.resizeHeight()}$(t).find(".nodePosition").show(),"drag"==e.type?($("#nodePosiX").html(parseInt(d.left)+", "),$("#nodePosiY").html(parseInt(d.top))):"resize"==e.type&&($("#nodeWidth").html(parseInt($(t).width())+", "),$("#nodeHeight").html(parseInt($(t).height())))},dragOrMoveEnd:function(e,t){var a=$(".grid-stack").data("gridstack");if($(".cd_moveTrans").removeClass("cd_moveTrans"),"resizestop"!=e.type)jSortable.autoMerge(t),$(".distrubNodeOverLap").removeClass("distrubNodeOverLap"),$(".distrubNode_bg").removeClass("distrubNode_bg"),jSortable.resizeWidth(void 0,!0);else{var i=$(t).data("_gridstack_node"),s=$("#grid1").data("gridstack").grid.nodes,l=s.filter((function(e){return e.x===i.x&&e.y===i.y})),n=$u.without(s,l[0]),o=jSortable.areaIsEmpty(n,i);if(o){var d=o.x-i.x;a.resize(t,d)}if(1==$(t).find(".cd_field.field_valueHolder").length){var r=i.width,c=i.height,p=$(t).find(".cd_field.field_valueHolder").data("component");p.ui.position.width=r-4,p.ui.position.height=c,1==$(t).find(".cd_people_image").length&&$(t).find(".cd_people_image").css({"max-width":r-4,"max-height":c})}}$(jSortable.cd_selectedNodeParent).trigger("click"),$(t).find("small").remove();var u=jSortable.eachNode();if(u.length>0){var m=jSortable.getDataFromEditor(u,jSortable.grid_size),g=jSortable.createTableStructure(m);$("#struture_demo").html(g),$("#table_demo").html(g),$("#table_demo > table").addClass("struture_demo")}$("#grid_inner").addClass("editorBgAnimationRevert").removeClass("editorBgAnimation"),$(t).find(".nodePosition").remove()},setGridStackNodeHeightWidth:function(e){null==e&&(e=$("#grid1 > .grid-stack-item")),$(e).each((function(e,t){var a=$(t).outerHeight(),i=$(t).outerWidth();$(t).data("nodeHeight",a),$(t).data("nodeWidth",i)}))},applyGridStackNodeWidth:function(e){null==e&&(e=$("#grid1 > .grid-stack-item")),$(e).each((function(e,t){var a=$(t).data("nodeHeight"),i=$(t).data("nodeWidth");$(t).height(a),$(t).width(i)}))},fieldDragSidebar:function(e,t){jSortable.fieldDragMove(e,t.helper)},dropOut:function(e,t){var a=t.draggable;$(a).removeAttr("style"),$(t.helper).find(".cd_field").removeAttr("style");var i=$ESAPI.encoder().encodeForHTML($(t.draggable).data("array").field_label);$(a).find(".cd_field.field_valueHolder").addClass("sidebar_DragIcon"),$(a).find(".grid-stack-item-content").addClass("sidebar_spacing"),$(a).find(".cd_field.field_valueHolder").html(i),$(a).find(".nodePosition").remove()},fieldDropAddNode:function(e,t,a){var i=$(e.target).data("array"),s=(i.data_type,$(".grid-stack").data("gridstack")),l=i.display_value;null==i.display_value&&(l="n/a");var n="<span>"+l+"</span>",o=$(e.target).data("array").field_label,d=$ESAPI.encoder().encodeForHTML(o),r=(jSortable.widthCalculate(d),$("#textEditorMenu").data("tool"));parseInt(r.font_size),parseInt(r.fontStyle_color),r.text_transform;$(e.target).removeClass("cv_bgYellow"),$(e.target).addClass("basic_edit"),$(e.target).find(".sidebar_spacing").removeClass("sidebar_spacing"),$(e.target).find(".cd_field.field_valueHolder").removeClass("sidebar_DragIcon");var c=o+" : "+$(n).text();if("Image"==i.data_type||"Owner_Photo"==i.data_type)c=$(n).html(),$(e.target).find(".cd_field.field_valueHolder").html(c),$(e.target).css({width:64,height:64}),$(e.target).find(".cd_people_image").css({"max-width":"60px","max-height":"60px"});else{$(e.target).find(".cd_field.field_valueHolder").text(c);var p=jSortable.textWidthCal($ESAPI.encoder().encodeForHTML(c),r);$(e.target).css({width:p.width+25,height:p.height}),jSortable.lineheightSet($(e.target)),jSortable.resizeHeight($(e.target)),s.resize($(e.target),void 0,$(e.target).outerHeight())}$(e.target).append("<div class='nodePosition'><span>X:</span><span id='nodePosiX'></span><span>Y:</span><span id='nodePosiY'></span></div>")},livedemoHideShow:function(e){$(e).is(":checked")?$("#table_demo").show():$("#table_demo").hide();var t=jSortable.eachNode();if(t.length>0){var a=jSortable.getDataFromEditor(t,jSortable.grid_size),i=jSortable.createTableStructure(a);$("#struture_demo").html(i),$("#table_demo").html(i),$("#table_demo > table").addClass("struture_demo")}},autoMerge:function(e,t){var a=$(e).data("_gridstack_node"),i=$(".grid-stack").data("gridstack"),s=(a.el,a.x),l=a.y,n=(a.width,a.height,a._beforeDragX),o=a._beforeDragY,d=(Math.abs(s-n),Math.abs(l-o),$(e).find(".cd_field"),jSortable.returnNodeFromPosition(a.x,a.y,a.width,a.height)),r=null==d;if(d)var c=$(d.el).find(".cd_field.field_valueHolder").data("component");$(a.el).find(".cd_field.field_valueHolder").data("component");if(r)jSortable.setMaxWidth(void 0,!0),jSortable.setMaxHeight(void 0,!0);else if("Image"==c.data_type||"Owner_Photo"==c.data_type||"button"==c._type||"TextArea"==c.data_type||"upcoming_activity"==c._type||"link"==c._type)1==t?jSortable.deleteElement(e):(i.move(a.el,a._beforeDragX,a._beforeDragY),$(a.el).css({left:a._beforeDragX,top:a._beforeDragY}));else if(1!=$(e).find(".cd_field.field_valueHolder").length||"Image"!=$(e).find(".cd_field.field_valueHolder").data("component").data_type&&"Owner_Photo"!=$(e).find(".cd_field.field_valueHolder").data("component").data_type&&"button"!=$(e).find(".cd_field.field_valueHolder").data("component")._type&&"TextArea"!=$(e).find(".cd_field.field_valueHolder").data("component").data_type&&"upcoming_activity"!=$(e).find(".cd_field.field_valueHolder").data("component")._type&&"link"!=$(e).find(".cd_field.field_valueHolder").data("component")._type)if($(".cd_group_holder").length>0||$(".cd_group_holderouter").length>0){$(e).find(".grid-stack-item-content").addClass("basic_edit"),$(d.el).find(".grid-stack-item-content").addClass("basic_edit");var p=$(e).find(".grid-stack-item-content").clone(!0),u=$(p).children();if($(".cd_group_holderouter").length>0){var m=$(".cd_group_holderouter");if(0==$(m).siblings(".row_separator").length){if($(m).parent().hasClass("txtalnLt"))var g="txtalnLt fL";else if($(m).parent().hasClass("txtalnRt"))g="txtalnRt fR";else g="txtalnMid canvas_rowSepW100p";$(m).siblings().wrapAll("<div class='row_separator "+g+"' ></div>")}if($(u).insertAfter(m),!$(u).hasClass("row_separator")){if($(u).find(".cd_field.field_valueHolder").length>0)var v=$(u).find(".cd_field.field_valueHolder").data("component").ui.styles.align;else v=$(u).data("component").ui.styles.align;if("left"==v)g="txtalnLt fL";else if("right"==v)g="txtalnRt fR";else g="txtalnMid canvas_rowSepW100p";1==$(u).length?$(u).wrap("<div class='row_separator "+g+"'></div>"):$(u).length>0&&$(u).wrapAll("<div class='row_separator "+g+"'></div>")}$(m).remove()}else{m=$(".cd_group_holder"),$(m).prev();var _=$(d.el).find(".cd_field.field_valueHolder").last().data("component").ui.position.startY,h=$(d.el).find(".cd_field.field_valueHolder").data("component").ui.position.endX,f=jSortable.dotSeparatorNode(_,h);0==m.prev().length?$(f).insertAfter(m):$(f).insertBefore(m),$(u).insertAfter(m),$(m).remove()}$(e).remove(),jSortable.allNodesPositionUpdate($(d.el)),$(".distrubNodeOverLap").removeClass("distrubNodeOverLap"),$(".distrubNode_bg").removeClass("distrubNode_bg"),$(".basic_edit").trigger("click"),jSortable.setMaxWidth(void 0,!0),jSortable.setMaxHeight(),setTimeout((function(){jSortable.resizeWidth($(d.el)),jSortable.lineheightSet($(d.el)),jSortable.resizeHeight($(d.el)),jSortable.bindHoverBorder($(d.el))}),500),jSortable.groupingused++}else 1==t?jSortable.deleteElement(e):(i.move(e,a._beforeDragX,a._beforeDragY),$(e).css({left:a._beforeDragX,top:a._beforeDragY}));else 1==t?jSortable.deleteElement(e):(i.move(a.el,a._beforeDragX,a._beforeDragY),$(a.el).css({left:a._beforeDragX,top:a._beforeDragY}))},radiusRange:function(e,t){var a=t.value;$(jSortable.cd_selectedNode).css("border-radius",a+"%"),$(jSortable.cd_selectedNode).data("component").ui.styles.borderRadius=a,$(t).prev(".cvrangesliderbg").width(2*t.value)},allNodesPositionUpdate:function(e){null==e&&(e=$("#grid1 > .grid-stack-item").not(".cd-stack-placeholder")),$(e).each((function(e,t){var a=$(t).position(),i=$(t).find(".row_separator");if(i.length>0)$(i).each((function(e,t){var i=$(t).find(".cd_field"),s=$(t).position();$(i).each((function(e,t){var i=$(t).data("component"),l=$(t).position().left,n=$(t).outerWidth();i.ui.position.startY=a.top+s.top,i.ui.position.startX=a.left+l,i.ui.position.startX=a.left+l+n}))}));else{var s=$(t).find(".cd_field");$(s).each((function(e,t){var i=$(t).data("component"),s=$(t).position().left,l=$(t).outerWidth();i.ui.position.startY=a.top,i.ui.position.startX=a.left+s,i.ui.position.startX=a.left+s+l}))}}))},dotSeparatorNode:function(e,t){var a=JSON.parse('{"_type":"separator", "children":[], "symbol":".", "ui":{"position":{"startX":'+t+',"startY":'+e+',"width":1,"height":2,"endX":"","left":"","merge_type":"column"},"styles":{"color":"","background_color":"","bold":false,"italic":false,"align":"left","font_size":"14","font_style":"CanvasFontRegular"}}}'),i=$("<span />");return $(i).addClass("cd_field cd_separator"),$(i).append(a.symbol),$(i).data("component",a),i},findEmptySpace:function(e,t,a,i){$(".grid-stack").data("gridstack");var s=t+i,l=e;a=a,i=i;if(null==jSortable.returnNodeFromPosition(l,s,a,i,!0))return{x:l,y:s};var n=jSortable.returnNodeFromPosition(l,s+1,a,i,!0);return jSortable.findEmptySpace(n.x,n.y,n.width,n.height)},isIntercepted:function(e,t){return!(e.x+e.width<=t.x||t.x+t.width<=e.x||e.y+e.height-2<=t.y||t.y+t.height<=e.y+2)},areaIsEmpty:function(e,t,a,i,s){var l={x:t||0,y:a||0,width:i||1,height:s||1};return e.find(function(e){return jSortable.isIntercepted(e,l)}.bind(this))},fieldDropBeforeAppend:function(e){var t=$(e).data(),a={array:JSON.parse(JSON.stringify($(e).data("array"))),x:t.gsX,y:t.gsY,width:t.width,height:t.height};jSortable.triggerCatchMoves("add",a)},fieldDropchanges:function(e){var t=$(".grid-stack").data("gridstack"),a=$(e).data("_gridstack_node"),i=a.x,s=a.y;$(e).css({left:i,top:s}).removeAttr("data-gs-x data-gs-y data-gs-width data-gs-height"),$(e).removeClass("cd_pF");var l=$("#textEditorMenu").data("tool");l.labelAlign="left",$(e).find(".cd_field.field_valueHolder").data("toolstyle",l),$(".style_copy_node").removeClass("style_copy_node"),$(e).find(".cd_field.field_valueHolder").addClass("style_copy_node");var n=jSortable.createEachComponentJson(e,void 0,!0);$(e).find("span").data("component",n[0]);var o=$(e).data("array"),d=o.display_value;if(null==d&&"Image"!=o.data_type&&"Owner_Photo"!=o.data_type?d="n/a":null==d&&(d="<img onerror='emptyImgRemove(this);' data-cvsrc='"+Crm.getCrmBasePath()+"/EntityImageAttach.do?action_module=Leads&entityId=111113000000037829&actionName=readImage&encfileId=' data-fileid='n/a' class='cd_people_image'/>"),$(e).find("span").html(d),$(e).find(".cd_field.field_valueHolder").data("array",o),$(e).find(".cd_field .cd_style_inherit").length>0)$(e).find(".cd_field").find(".cd_style_inherit").text();else $(e).find(".cd_field").text();$(".cv_bgYellow").removeClass("cv_bgYellow");var r=$("#grid1");r.find(".grid-stack-item-content").removeClass("cv_gray_bdr"),$("#grid_outer").removeClass("cv_background_bg"),jSortable.bindSmartGuidDraggable(),jSortable.newAddbasicEdit(),$(e).find(".grid-stack-item-content").click(),"Image"!=$(e).find(".cd_field.field_valueHolder").data("component").data_type&&"Owner_Photo"!=$(e).find(".cd_field.field_valueHolder").data("component").data_type||$(e).find(".cd_field.field_valueHolder").addClass("w100p"),$(e).find(".grid-stack-item-content").mousedown((function(){$(".editorHoverTooltipTxtBack").hide()})),$(e).find(".grid-stack-item-content").mouseout((function(){$(".editorHoverTooltipTxtBack").css({display:"none"})}));var c=$(e).find(".cd_field").data("component");if("Image"==c.data_type){var p=Math.round(64/jSortable.cd_singleGridWidth),u=60/jSortable.cd_singleRowHeight;t.resize(e,p,u),$(e).css({width:"64px",height:"64px"}),1==$(e).find(".cd_people_image").length&&$(e).find(".cd_people_image").css({"max-width":"60px","max-height":"60px"}),jSortable.imageHandling(e)}else if("Owner_Photo"==c.data_type){p=Math.round(64/jSortable.cd_singleGridWidth),u=60/jSortable.cd_singleRowHeight;t.resize(e,p,u),$(e).css({width:"64px",height:"64px"}),1==$(e).find(".cd_people_image").length&&$(e).find(".cd_people_image").css({"max-width":"60px","max-height":"60px"}),jSortable.imageHandling(e)}else{"TextArea"!=c.data_type&&$(e).find(".grid-stack-item-content").addClass("whiteSpaceNoRap");jSortable.eachNode();"Tags"!=c.data_type&&"button"!=c._type&&"link"!=c._type&&"upcoming_activity"!=c._type&&jSortable.addLabel("add",!0,!0)}if($(e).is(":visible")){$("#sidebar_search").find("input").val("");$(".distrubNode_bg").removeClass("distrubNode_bg"),"Image"!=c.data_type&&"Owner_Photo"!=c.data_type&&jSortable.nodeAlignmentMethods(e,!1,!0),jSortable.search()}jSortable.autoMerge(e,!0),$(e).find(".grid-stack-item-content").trigger("click"),r.find(".grid-stack-item").length>0&&jSortable.enableOrDisableSaveCV(!0),jSortable.sideMenuLimit(),$("#grid_inner").addClass("editorBgAnimationRevert").removeClass("editorBgAnimation"),$(e).find(".nodePosition").remove()},imageHandling:function(e){(e=$(e)).hasClass("cd_people_image")||(e=e.find(".cd_people_image"));var t=e.data("fileid");if("n/a"==t)emptyImgRemove(e);else{var a=e.data("cvsrc")+t;e.attr("src",a)}},setMaxHeight:function(e,t,a){$(".grid-stack").data("gridstack");null==e&&(e=a?$("#"+a).find(".grid-stack-item"):$("#grid1").find(".grid-stack-item")),$(e).each((function(a,i){var s=$(i).outerHeight(),l=jSortable.verticalDistrubNodesWidthoutObj(e,i);if(l)var n=$(l).position().top-$(i).position().top;else s>(n=$("#grid1").height()-$(i).position().top)&&(n=s);$(i).resizable("option","maxHeight",n),$(i).css("max-height",n),t||jSortable.resizeHeight(i)}))},verticalDistrubNodesWidthoutObj:function(e,t,a){null==e&&(e=$("#grid1").find(".grid-stack-item"));for(var i=$(t).position().top,s=$(t).position().left,l=$(t).position().left+$(t).outerWidth(),n=[],o=0;o<e.length;o++){var d=e[o],r=$(d).position().top;if(r!=i&&i<r){var c=$(d).position().left,p=$(d).position().left+$(d).outerWidth();(s<=c&&l>c||s>=c&&s<p)&&n.push(e[o])}}if(0!=n.length)return 1==a?n:$u.min(n,(function(e){return $(e).position().top}))},setMaxWidth:function(e,t,a){$(".grid-stack").data("gridstack");null==e&&(e=a?$("#"+a).find(".grid-stack-item"):$("#grid1").find(".grid-stack-item")),$(e).each((function(a,i){var s=jSortable.horizontalDistrubNodesRightsideWidthoutObj(e,i);if(s)var l=$(s).position().left-$(i).position().left;else l=jSortable.grid_size-$(i).position().left;$(i).resizable("option","maxWidth",l),$(i).css("max-width",l),t||jSortable.resizeHeight(i)}))},horizontalDistrubNodesRightsideWidthoutObj:function(e,t,a){null==e&&(e=$("#grid1").find(".grid-stack-item"));for(var i=$(t).position().top,s=$(t).position().left,l=i+$(t).height(),n=[],o=0;o<e.length;o++){var d=e[o],r=$(d).position().top,c=$(d).position().left;if(c!=s&&s<c){var p=r+$(d).height();(r>=i&&l>r||r<i&&p>i)&&n.push(e[o])}}if(0!=n.length)return 1==a?n:$u.min(n,(function(e){return $(e).position().left}))},paddingAddSub:function(e,t){if("top"==e)if("decre"==t){var a=$("#cd_paddingTop").val();--a>=0&&($("#cd_paddingTop").val(a),$("#cd_paddingTop").trigger("oninput")),0==a&&$("#padding-top-arrow").addClass("paddingDisable")}else{if((a=$("#cd_paddingTop").val())>=39)return;a++,$("#cd_paddingTop").val(a),$("#cd_paddingTop").trigger("oninput"),$("#padding-top-arrow").hasClass("paddingDisable")&&$("#padding-top-arrow").removeClass("paddingDisable")}else if("left"==e)if("decre"==t){a=$("#cd_paddingLeft").val();--a>=0&&($("#cd_paddingLeft").val(a),$("#cd_paddingLeft").trigger("oninput")),0==a&&$("#padding-left-arrow").addClass("paddingDisable")}else{if((a=$("#cd_paddingLeft").val())>=39)return;a++,$("#cd_paddingLeft").val(a),$("#cd_paddingLeft").trigger("oninput"),$("#padding-left-arrow").hasClass("paddingDisable")&&$("#padding-left-arrow").removeClass("paddingDisable")}else if("right"==e)if("decre"==t){a=$("#cd_paddingRight").val();--a>=0&&($("#cd_paddingRight").val(a),$("#cd_paddingRight").trigger("oninput")),0==a&&$("#padding-right-arrow").addClass("paddingDisable")}else{if((a=$("#cd_paddingRight").val())>=39)return;a++,$("#cd_paddingRight").val(a),$("#cd_paddingRight").trigger("oninput"),$("#padding-left-arrow").hasClass("paddingDisable")&&$("#padding-left-arrow").removeClass("paddingDisable")}else if("bottom"==e)if("decre"==t){a=$("#cd_paddingBottom").val();--a>=0&&($("#cd_paddingBottom").val(a),$("#cd_paddingBottom").trigger("oninput")),0==a&&$("#padding-left-arrow").addClass("paddingDisable")}else{if((a=$("#cd_paddingBottom").val())>=39)return;a++,$("#cd_paddingBottom").val(a),$("#cd_paddingBottom").trigger("oninput"),$("#padding-left-arrow").hasClass("paddingDisable")&&$("#padding-left-arrow").removeClass("paddingDisable")}},triggerCatchMoves:function(e,t){var a=jSortable.eachNode();if(null!=t)var i={moveType:e,nodes:a,addedJsonArray:t.array};else i={moveType:e,nodes:a,addedJson:void 0};jSortable.cd_undoCatchMoves.length>10&&jSortable.cd_undoCatchMoves.shift(),jSortable.cd_undoCatchMoves.push(i),jSortable.undoRedoEnable()},undoRedoEnable:function(){jSortable.cd_undoCatchMoves.length>0?$("#canvasUndo").removeClass("cv_disable"):$("#canvasUndo").addClass("cv_disable"),jSortable.cd_redoCatchMoves.length>0?$("#canvasRedo").removeClass("cv_disable"):$("#canvasRedo").addClass("cv_disable")},removeFromSidebar:function(e){var t=[],a=[];if($(e).each((function(e,i){"upcoming_activity"==i._type?$("#sidebar_others").empty():"field"===i._type?t.push(i.id):"merge-field"===i._type?$L(i)[0].children.filter((function(e){"field"===e._type&&t.push(e.id)})):"button"===i._type&&a.push(i.id)})),t=$u.uniq(t),a=$u.uniq(a),t.length>0){var i=$L("#sidebar_fields").children().toArray().filter((function(e){return t.find((function(t){return $(e).data("array").id===t}))}));$(i).remove()}if(a.length>0){i=$L("#sidebar_buttons").children().toArray().filter((function(e){return a.find((function(t){return $(e).data("array").id===t}))}));$(i).remove()}},cd_undo:function(e){jSortable.hideOtherOptions();var t={},a=jSortable.cd_undoCatchMoves.pop();if(null!=a)if("add"==a.moveType){var i=jSortable.eachNode();if(null!=a.addedJsonArray)var s={moveType:a.moveType,nodes:i,addedJsonArray:a.addedJsonArray};else s={moveType:a.moveType,nodes:i,addedJson:void 0};jSortable.cd_redoCatchMoves.push(JSON.parse(JSON.stringify(s))),jSortable.addElementToLeftPanel(a.addedJsonArray),jSortable.cd_redoCatchMoves.length>10&&jSortable.cd_redoCatchMoves.shift(),t.components=a.nodes,jSortable.cdViewEdit(t,!0),$("#grid1").find(".grid-stack-item").length>0?jSortable.enableOrDisableSaveCV(!0):jSortable.enableOrDisableSaveCV(!1)}else{var l=jSortable.eachNode();s={moveType:a.moveType,nodes:l,addedJsonArray:void 0};jSortable.cd_redoCatchMoves.push(JSON.parse(JSON.stringify(s))),t.components=a.nodes,"delete"==a.moveType&&jSortable.removeFromSidebar(a.nodes),t.components=a.nodes,jSortable.cdViewEdit(t,!0),$("#grid1").find(".grid-stack-item").length>0?jSortable.enableOrDisableSaveCV(!0):jSortable.enableOrDisableSaveCV(!1)}$(".basic_edit").removeClass("basic_edit"),$("#textEditorMenu").addClass("cv_disable"),$("#cdDeleteIcon").addClass("cv_disable"),jSortable.undoRedoEnable(),jSortable.sideMenuLimit(),sE(e)},cd_redo:function(e){jSortable.hideOtherOptions();var t={},a=jSortable.cd_redoCatchMoves.pop();if(null!=a)if("add"==a.moveType){var i=jSortable.eachNode();if(null!=a.addedJsonArray)var s={moveType:a.moveType,nodes:i,addedJsonArray:a.addedJsonArray};else s={moveType:a.moveType,nodes:i,addedJson:void 0};if(jSortable.cd_undoCatchMoves.push(JSON.parse(JSON.stringify(s))),jSortable.cd_undoCatchMoves.length>10&&jSortable.cd_undoCatchMoves.shift(),t.components=a.nodes,jSortable.cdViewEdit(t,!0),"upcoming_activity"==a.addedJsonArray._type)$("#sidebar_others").empty();else{var l="#component_"+a.addedJsonArray.id;$("#fields_outer_container").find(l).remove()}}else{var n=jSortable.eachNode();s={moveType:a.moveType,nodes:n,addedJsonArray:void 0};if(jSortable.cd_undoCatchMoves.push(JSON.parse(JSON.stringify(s))),t.components=a.nodes,"delete"==a.moveType){var o=n.map((function(e){return e.id})),d=a.nodes.map((function(e){return e.id})),r=$u.difference(o,d);$(r).each((function(e,t){var a=n.filter((function(e){return e.id===t}))[0],i={field_label:"",_type:"",id:"",data_type:"",UITYPE:"",display_value:""};i.field_label=a.field_label||a.name,i._type=a._type,i.id=a.id,i.data_type=a.data_type,i.UITYPE=a.ui_type,i.display_value=a.display_value,jSortable.prependDeletedField(i)}))}jSortable.cdViewEdit(t,!0),$("#grid1").find(".grid-stack-item").length>0?jSortable.enableOrDisableSaveCV(!0):jSortable.enableOrDisableSaveCV(!1)}$(".basic_edit").removeClass("basic_edit"),$("#textEditorMenu").addClass("cv_disable"),$("#cdDeleteIcon").addClass("cv_disable"),jSortable.undoRedoEnable(),setTimeout((function(){jSortable.resizeHeight(),jSortable.bindHoverBorder()}),500),jSortable.sideMenuLimit(),sE(e)},addElementToLeftPanel:function(e){jSortable.prependDeletedField(e),jSortable.dragUiFixed()},bindSmartGuidDraggable:function(){var e={float:!0,animate:!0,containment:"parent",verticalMargin:"3px",acceptWidgets:".grid-stack-item",cancel:!1,smartGuides:'#grid1 > .grid-stack-item:not(".selected")',snapTolerance:5,beforeStart:function(){var e=$(this);e.hasClass("selected")||(e.siblings(".selected").removeClass("selected"),e.addClass("selected"))}};$("#grid1 .grid-stack-item").draggable(e)},maxHeightCal:function(e,t){if(t){var a=t*jSortable.cd_singleGridWidth;a>550&&(a=550)}else a=550;$("#grid1").width();var i=$("<span />"),s=$("#textEditorMenu").data("tool"),l=s.font_size,n=s.font_style;n&&n.indexOf("ProximaNova")>-1&&(n=n.replace("ProximaNova","CanvasFont")),$(i).addClass("sapnWidth dIB"),$(i).css({"font-family":n,"font-size":l+"px",width:a,border:"1px solid transparent","line-height":l+"px"}),$(i).html(e),$("#cv_body").append(i);var o=$(".sapnWidth").outerHeight(),d=$(".sapnWidth").outerWidth(),r=Math.round(o/jSortable.cd_singleRowHeight),c=Math.round(d/jSortable.cd_singleGridWidth);return $(".sapnWidth").remove(),{width:c,height:r}},findFieldHtml:function(e){var t=$(e).text();if(""!=t)return t;jSortable.findFieldHtml($(e).children())},widthCalculate:function(e,t){var a=$("#grid1").width()/jSortable.grid_size,i=$("<span />"),s=(jSortable.grid_size,$("#textEditorMenu").data("tool")),l=s.font_size,n=s.font_style;n&&n.indexOf("ProximaNova")>-1&&(n=n.replace("ProximaNova","CanvasFont")),$(i).addClass("sapnWidth dIB"),$(i).css({"font-family":n,"font-size":l+"px"}),$(i).html(e),$("#cv_body").append(i);var o=$(".sapnWidth").width()+20,d=$(".sapnWidth").height(),r=Math.ceil(o/a),c=Math.round(d/1);return $(".sapnWidth").remove(),{width:r,height:c,widthPx:o}},cdPasteStyle:function(e,t){if(jSortable.hideOtherOptions(),e&&""!=e)var a=JSON.parse(JSON.stringify(e));else a=JSON.parse(JSON.stringify(jSortable.copyStyle));t||jSortable.triggerCatchMoves("pasteStyle");var i=a.color,s=parseInt(a.font_size),l=a.font_style;l&&l.indexOf("ProximaNova")>-1&&(l=l.replace("ProximaNova","CanvasFont"));var n=a.background_color,o=a.text_transform,d=a.padding_left,r=a.padding_right,c=a.padding_top,p=a.padding_bottom;if(a.line_through)var u="line-through";else u="";var m=jSortable.cd_selectedNode;$(m).each((function(e,t){var m=u,g=$(t).data("component"),v=$(t).data("component").ui.styles.labelAlign;a.labelAlign=v;var _=$(t).data("component").ui.styles.font_style;_&&_.indexOf("ProximaNova")>-1&&(_=_.replace("ProximaNova","CanvasFont")),$(t).data("component").ui.styles=a,"icon"==g._type||"separator"==g._type?(delete $(t).data("component").ui.styles.line_through,delete $(t).data("component").ui.styles.text_transform,delete $(t).data("component").ui.styles.labelAlign,m="",o=""):"label"==g._type&&(delete $(t).data("component").ui.styles.line_through,m=""),$(t).attr("style",""),$(t).css({color:"#"+i,"font-size":s,"background-color":"#"+n,"line-height":s+"px","padding-left":d+"px","padding-right":r+"px","padding-top":c+"px","padding-bottom":p+"px","text-transform":o,"text-decoration":m}),$(t).removeClass(_).addClass(l)})),jSortable.lineheightSet(jSortable.cd_selectedGridItem),jSortable.resizeHeight(jSortable.cd_selectedGridItem),jSortable.resizeWidth(jSortable.cd_selectedGridItem,!0),$(".basic_edit").trigger("click"),sE()},cdCopyStyle:function(){var e=$(".basic_edit"),t=e.data("component");if(jSortable.hideOtherOptions(),e.length>0)if(t)jSortable.copyStyle=t.ui.styles;else if(1==jSortable.cd_selectedNode.length){var a=$(jSortable.cd_selectedNode[0]).data("component");jSortable.copyStyle=a.ui.styles}$("#cview_contextmenu").hide(),jQuery.isEmptyObject(jSortable.copyStyle)?$("#canvasMenuPs").addClass("cv_disable"):$("#canvasMenuPs").removeClass("cv_disable"),sE()},newAddbasicEdit:function(){$("#grid1 .grid-stack-item-content").mousedown((function(e){$("#textEditorMenu").show();var t=$(".basic_edit").parents(".grid-stack-item");$(t).addClass("cd_selected");var a=$(this).parents(".grid-stack-item").data("_gridstack_node");a.label?($(".tE_lable").find("span").addClass("cv_customCheckBoxChecked"),$(".tE_lable").removeClass("cv_disable")):($(".tE_lable").find("span").removeClass("cv_customCheckBoxChecked"),$(".tE_lable").removeClass("cv_disable")),a.icon?($(".tE_icon").find("span").addClass("cv_customCheckBoxChecked"),$(".tE_icon").removeClass("cv_disable")):($(".tE_icon").find("span").removeClass("cv_customCheckBoxChecked"),$(".tE_icon").removeClass("cv_disable")),jSortable.changeStyles(a)})),$(".grid-stack").on("dragstart",(function(e,t){var a=$(e.target).siblings();$(a).each((function(){$(this).find(".grid-stack-item-content").addClass("cv_gray_bdr")}))})),$(".grid-stack").on("dragstop",(function(e,t){var a=$(e.target).siblings();$(a).each((function(){$(this).find(".grid-stack-item-content").removeClass("cv_gray_bdr")})),$("#grid_outer").removeClass("cv_background_bg")})),$("#grid1 > .grid-stack-item").contextmenu((function(e){if($(".basic_edit").removeClass("basic_edit"),$(".ignoreFieldSelectedColor").removeClass("ignoreFieldSelectedColor"),$(".style_copy_node").removeClass("style_copy_node"),$(e.target).hasClass("cd_field")?($(e.target).addClass("basic_edit"),$(e.target).addClass("style_copy_node")):$(e.target).hasClass("canvas_ignoreField")?($(e.target).addClass("ignoreFieldSelectedColor"),$(e.target).find(".cd_field.field_valueHolder").addClass("basic_edit")):$(e.target).parents().hasClass("cd_field")?($(e.target).parents(".cd_field").addClass("basic_edit"),$(e.target).parents(".cd_field").addClass("style_copy_node")):$(e.target).hasClass("row_separator")||$(e.target).hasClass("grid-stack-item-content")?$(e.target).addClass("basic_edit"):$(e.target).parent().hasClass("grid-stack-item-content")&&$(e.target).parent().addClass("basic_edit"),$(".basic_edit").hasClass("grid-stack-item-content")||$(".basic_edit").hasClass("row_separator")?jSortable.cd_selectedNode=$(".basic_edit").find(".cd_field"):jSortable.cd_selectedNode=$(".basic_edit"),$(".basic_edit").hasClass("row_separator")?jSortable.cd_rowSelectedNode=$(".basic_edit").find(".cd_field"):jSortable.cd_rowSelectedNode=[],$(".basic_edit").hasClass("grid-stack-item-content")?jSortable.cd_selectedNodeParent=$(".basic_edit"):jSortable.cd_selectedNodeParent=$(".basic_edit").parents(".grid-stack-item-content"),$(".basic_edit").hasClass("grid-stack-item")?jSortable.cd_selectedGridItem=$(".basic_edit"):jSortable.cd_selectedGridItem=$(".basic_edit").parents(".grid-stack-item"),1==jSortable.cd_selectedNode.length){var t=$(jSortable.cd_selectedNode).data("component"),a=$(jSortable.cd_selectedGridItem).find(".cd_field.field_valueHolder");$("#cview_contextmenu > li").hide();var i=jQuery.isEmptyObject(jSortable.copyStyle);"Image"==$(jSortable.cd_selectedNode).data("component").data_type||"Owner_Photo"==$(jSortable.cd_selectedNode).data("component").data_type?(null==$(jSortable.cd_selectedNode).data("component").ui.styles.shape?($("#cd_style_squre").hide(),$("#cd_style_round").show()):($("#cd_style_round").hide(),$("#cd_style_squre").show()),$("#cd_rightClick_delete").show(),$("#cd_radius").show()):"label"==t._type?($("#cd_style_copy").show(),i||$("#cd_style_paste").show(),$("#cd_HideLabel").show(),$("#cd_addIcon").show(),$("#cd_rightClick_delete").show(),"top"==t.ui.styles.labelAlign?$("#cd_LabelLeft").show():$("#cd_LabelTop").show(),a.length>1&&$("#cd_removeFromGroup").show()):"icon"==t._type?($("#cd_style_copy").show(),i||$("#cd_style_paste").show(),$("#cd_addLabel").show(),$("#cd_hideIcon").show(),$("#cd_changeIcon").show(),$("#cd_rightClick_delete").show(),$("#cd_hideIcon").show(),a.length>1&&$("#cd_removeFromGroup").show()):"separator"==t._type?($("#cd_style_copy").show(),i||$("#cd_style_paste").show(),$("#tE_separator").show()):"upcoming_activity"==t._type||"button"==t._type||"link"==t._type||"Tags"==t.data_type?($("#cd_rightClick_delete").show(),a.length>1&&$("#cd_removeFromGroup").show()):($("#cd_rightClick_delete").show(),$("#cd_style_copy").show(),i||$("#cd_style_paste").show(),1==t.label?($("#cd_HideLabel").show(),"top"==t.ui.styles.labelAlign?$("#cd_LabelLeft").show():$("#cd_LabelTop").show()):$("#cd_addLabel").show(),1==t.icon?($("#cd_changeIcon").show(),$("#cd_hideIcon").show()):$("#cd_addIcon").show(),a.length>1&&$("#cd_removeFromGroup").show())}else{var s=$L(jSortable.cd_selectedNode).toArray(),l=(t=s.map((function(e){return $(e).data("component")})),a=$(jSortable.cd_selectedGridItem).find(".cd_field.field_valueHolder"),$(jSortable.cd_selectedGridItem).find(".row_separator"),$L(jSortable.cd_selectedNode).toArray().filter((function(e){return $(e).hasClass("cd_field field_valueHolder")}))),n=$u.chain(l).map((function(e){return $(e).data("component").label})).uniq().value(),o=$u.chain(l).map((function(e){return $(e).data("component").icon})).uniq().value(),d=(i=jQuery.isEmptyObject(jSortable.copyStyle),s.filter((function(e){return $(e).hasClass("cd_field cd_separator")})));$("#cview_contextmenu > li").hide(),$("#cd_rightClick_delete").show(),i||$("#cd_style_paste").show(),$(".basic_edit").hasClass("row_separator")&&$("#cd_removeFromGroup").show(),1==n.length&&1==n[0]?$("#cd_HideLabel").show():$("#cd_addLabel").show(),1==o.length&&1==o[0]?($("#cd_changeIcon").show(),$("#cd_hideIcon").show()):$("#cd_addIcon").show(),d.length>0&&$("#tE_separator").show(),1==n[0]&&($("#cd_LabelLeft").show(),$("#cd_LabelTop").show())}$(e.target).hasClass("canvas_ignoreField")||$(".basic_edit").trigger("click");var r=$("#grid1").offset().left+jSortable.grid_size/2,c=$(jSortable.cd_selectedGridItem).offset().top+$(jSortable.cd_selectedGridItem).outerHeight(),p=$(e.target).offset().left,u=$("#cview_contextmenu").innerWidth();p<r?$("#cview_contextmenu").show().css({left:e.clientX,top:c}):$("#cview_contextmenu").show().css({left:e.clientX-u,top:c})}))},globleNodesUpdate:function(){$(".basic_edit").hasClass("grid-stack-item-content")||$(".basic_edit").hasClass("row_separator")?jSortable.cd_selectedNode=$(".basic_edit").find(".cd_field"):jSortable.cd_selectedNode=$(".basic_edit"),$(".basic_edit").hasClass("row_separator")?jSortable.cd_rowSelectedNode=$(".basic_edit").find(".cd_field"):jSortable.cd_rowSelectedNode=[],$(".basic_edit").hasClass("grid-stack-item-content")?jSortable.cd_selectedNodeParent=$(".basic_edit"):jSortable.cd_selectedNodeParent=$(".basic_edit").parents(".grid-stack-item-content"),$(".basic_edit").hasClass("grid-stack-item")?jSortable.cd_selectedGridItem=$(".basic_edit"):jSortable.cd_selectedGridItem=$(".basic_edit").parents(".grid-stack-item")},separatorDropDownShow:function(e,t){if(!$(e).hasClass("cv_disable")){var a=$("#grid1").offset().left+jSortable.grid_size/2,i=$("#cview_contextmenu").offset().left;$("#separator_dropdown").show(),$("#cd_addIcon > #icon_dropdown").hide();var s=$("#separator_dropdown").innerWidth(),l=$(e).offset(),n=$(e).outerWidth();$(e).outerHeight();"left"==t?a>i?$("#separator_dropdown").css({left:l.left+n,top:l.top}):$("#separator_dropdown").css({left:l.left-s,top:l.top}):"bottom"==t&&jSortable.builderOptionDropdown($(e),$("#separator_dropdown"));var o=$L(jSortable.cd_selectedNode).toArray().filter((function(e){return $(e).hasClass("cd_field cd_separator")}));$(o).addClass("canvasNodeBdrColor"),renderingUtils.stopEvent()}},iconDropDownShow:function(e,t){if(!$("#textEditorMenu").hasClass("cv_disable")&&!$("#cviconmenu").hasClass("cv_disable")){var a=$("#grid1").offset().left+jSortable.grid_size/2,i=$("#cview_contextmenu").offset().left;$("#icon_dropdown").show(),$("#tE_separator > #separator_dropdown").hide();var s=$("#icon_dropdown").innerWidth(),l=$(e).offset(),n=$(e).outerWidth();$(e).outerHeight();"side"==t?a>i?$("#icon_dropdown").css({left:l.left+n,top:l.top}):$("#icon_dropdown").css({left:l.left-s,top:l.top}):"bottom"==t&&(jSortable.hideOtherOptions(),jSortable.builderOptionDropdown($(e),$("#icon_dropdown"))),renderingUtils.stopEvent()}},labelalignDropDownShow:function(e,t){if(0!=$("#cvlabelmenu").prop("checked")&&!$("#textEditorMenu").hasClass("cv_disable")&&!$("#cvtextToolbar .cvlabelmenu").hasClass("cv_disable")){var a=$("#grid1").offset().left+jSortable.grid_size/2,i=$("#cview_contextmenu").offset().left;$("#labelalign_dropdown").show();var s=$("#labelalign_dropdown").innerWidth(),l=$(e).offset(),n=$(e).outerWidth();$(e).outerHeight();"side"==t?a>i?$("#labelalign_dropdown").css({left:l.left+n,top:l.top}):$("#labelalign_dropdown").css({left:l.left-s,top:l.top}):"bottom"==t&&(jSortable.builderOptionDropdown($(e),$("#labelalign_dropdown")),$("#labelalign_dropdown").show()),renderingUtils.stopEvent()}},imageRadius:function(e){"round"==e?($(jSortable.cd_selectedNode).data("component").ui.styles.shape="round",$(jSortable.cd_selectedNode).find("img").css("border-radius","50%")):(delete $(jSortable.cd_selectedNode).data("component").ui.styles.shape,$(jSortable.cd_selectedNode).find("img").css("border-radius",""))},removeFromGroup:function(e){if(null==e||!$(e).hasClass("cv_disable")){$(".grid-stack").data("gridstack");for(var t=$(".basic_edit"),a=function(e){return $(e).data("component")},i=function(e,t){delete t.ui.styles.padding_left,delete t.ui.styles.padding_right,delete t.ui.styles.padding_top,delete t.ui.styles.padding_bottom},s=0;s<t.length;s++){var l=$(t[s]),n=l.parents(".grid-stack-item"),o=l.parents(".cd_mapping_field");if(l.hasClass("grid-stack-item-content")||l.hasClass("row_separator"))var d=$L(l.find(".cd_field")).toArray().map(a);else if(o.length>0)d=$L(o.find(".cd_field")).toArray().map(a);else d=[$(".basic_edit").data("component")];$(d).each(i);var r=jSortable.createMergeLableJson(d);r.ui.position.startX=d[s].ui.position.startX;var c=jSortable.findEmptySpace(d[s].ui.position.startX,d[s].ui.position.startY,d[s].ui.position.width,d[s].ui.position.height);jSortable.deleteElement(l,!0),jSortable.resizeWidth(n),jSortable.lineheightSet(n),jSortable.resizeHeight(n),jSortable.bindHoverBorder(n),jSortable.addNodes(r,"",!1,"",c),jSortable.removeHoverBindAndRowNode(n),jSortable.updateContainerHeight()}}},createMergeLableJson:function(e,t){if(1==e.length)var a=e[0];else{var i=$u.min(e,(function(e){return e.ui.position.startX})),s=$u.min(e,(function(e){return e.ui.position.startY})),l=$L(e).toArray().filter((function(e){return"field"===e._type}));if(1==l.length){var n=$L(e).toArray().filter((function(e){return"label"===e._type})),o=$L(e).toArray().filter((function(e){return"icon"===e._type}));a=JSON.parse('{"_type":"field","children":[],"ui":{"position":{"startX":'+i.ui.position.startX+',"startY":'+s.ui.position.startY+',"width":2,"height":4,"endX":""},"styles":{"color":"","background_color":"","bold":false,"italic":false,"align":"left","font_size":"14","font_style":"CanvasFontRegular"}}}');n?(a.label=!0,a.icon=!1):o&&(a.icon=!0,a.label=!1)}else if(l.length>1)a=JSON.parse('{"_type":"merge-field","children":[],"ui":{"position":{"startX":'+i.ui.position.startX+',"startY":'+s.ui.position.startY+',"width":2,"height":4,"endX":""},"styles":{"color":"","background_color":"","bold":false,"italic":false,"align":"left","font_size":"14","font_style":"CanvasFontRegular"}}}');jSortable.updateXYPosition(e,i.ui.position.startX,s.ui.position.startY),a.ui.styles.align=e[0].ui.styles.align,a.children=e}return a},getSelectedFields:function(e,t){if(!t)t=$(".basic_edit");var a=[];return $(t).each((function(t,i){$(i).hasClass("cd_field cd_label")||$(i).hasClass("cd_field cd_icon")?$(i).nextAll(".cd_field.field_valueHolder").each((function(e,t){a.push(t)})):$(i).hasClass("cd_field field_valueHolder")||$(i).hasClass("cd_field cd_separator")&&e?$(i).each((function(e,t){a.push(t)})):$(i).find(".cd_field.field_valueHolder").each((function(e,t){a.push(t)}))})),a},colorUpdate:function(e){"transparent"==e&&(e=222),$("#tE_color > .tE_color").css("color","#"+e),jSortable.triggerCatchMoves("color"),$(jSortable.cd_selectedNode).css("color","#"+e),$(jSortable.cd_selectedNode).each((function(){$(this).data("component").ui.styles.color=e})),$("#selectedTextColor").val(e),$("#textColorId").data("color",e),$("#cd_textColorHolder").css("background-color","#"+e),$("#textEditorMenu").data("tool").color=e,jSortable.resizeHeight(jSortable.cd_selectedGridItem)},backgroundColorUpdate:function(e){"transparent"==e?(jSortable.triggerCatchMoves("background_color"),$("#tE_color > .tE_color").css("background-color","transparent"),$(jSortable.cd_selectedNode).each((function(e,t){$(t).css("background-color","transparent"),$(t).data("component").ui.styles.background_color=""})),$("#selectedTextColor").val(""),$("#textBgId").data("bg",""),$("#cd_textColorHolder").css("background-color","transparent"),$("#cd_textBgHolder").data("bg","").addClass("cvresetcolor").css("background-color",""),$("#selectedBgColor").val(""),$("#textEditorMenu").data("tool").background_color=""):(jSortable.triggerCatchMoves("background_color"),$("#tE_color > .tE_color").css("background-color","#"+e),$(jSortable.cd_selectedNode).css("background-color","#"+e),$(jSortable.cd_selectedNode).each((function(){$(this).data("component").ui.styles.background_color=e})),$("#selectedBgColor").val(e),$("#textBgId").data("bg",e),$("#cd_textBgHolder").data("bg",e).css("background-color","#"+e).removeClass("cvresetcolor"),$("#textEditorMenu").data("tool").background_color=e),jSortable.resizeHeight(jSortable.cd_selectedGridItem)},colorBgToolUpdate:function(e,t){""!=e?($("#tE_color > .tE_color").css("background-color","#"+e),$("#textColorId").data("color",e),$("#selectedTextColor").attr("value",e).html(e),$("#cd_textColorHolder").removeClass("cvresetcolor").css("background-color","#"+e)):($("#cd_textColorHolder").css("background-color","").addClass("cvresetcolor"),$("#selectedTextColor").val(""),$("#cd_textColorHolder").addClass("cvresetcolor").css("background-color","")),$("#selectedTextColor").attr("value",e).val(e),""!=t?($("#textBgId").data("bg",t),$("#cd_textBgHolder").css("background-color","#"+t),$("#cd_textBgHolder").removeClass("cvresetcolor"),$("#selectedBgColor").val("")):$("#cd_textBgHolder").addClass("cvresetcolor").css("background-color",""),$("#selectedBgColor").attr("value",t).val(t)},updateCdtool:function(e){if(jSortable.globleNodesUpdate(),e)var t=jSortable.getSelectedFields(!0);else t=jSortable.cd_selectedNode;$("#textEditorMenu").removeClass("cv_disable"),$("#cdDeleteIcon").removeClass("cv_disable");$(".grid-stack").data("gridstack");if(1==t.length){var a=$(".basic_edit"),i=$(t).data("component"),s=i.ui.styles.font_size;if(""==(x=i.ui.styles.font_style)&&(x="CanvasFontRegular"),x&&x.indexOf("ProximaNova")>-1&&(x=x.replace("ProximaNova","CanvasFont")),-1!=x.indexOf("Italic"))var l=x.replace("Italic","");else l=x;var n=$L("#fontstyle_dropdown > li").toArray().filter((function(e){return $(e).data("fontname")===l})),o=$(n).html(),d=i.ui.styles.color,r=i.ui.styles.background_color,c=i.ui.styles.align,p=i._type,u=i.label,m=(i.ui.styles.labelAlign,i.icon),g=($("#cd_paddingMargin").data("spacingtype"),parseInt($(a).css("padding-top"))),v=parseInt($(a).css("padding-left")),_=parseInt($(a).css("padding-right")),h=parseInt($(a).css("padding-bottom"));if(a.hasClass("cd_field"))var f=i.ui.styles.padding_top||g||0,b=i.ui.styles.padding_left||v||0,y=i.ui.styles.padding_right||_||0,C=i.ui.styles.padding_bottom||h||0;else f=g||0,b=v||0,y=_||0,C=h||0;if($("#cdToolFS").html(s),$("#font_dropdown").is(":visible")){var w=".cd_fs"+s;$("#font_dropdown").find(".bld").removeClass("bld"),$("#font_dropdown").find(w).addClass("bld")}jSortable.colorBgToolUpdate(d,r),$("#cd_italic, #cd_caps, #tE_font_style, #cd_strikethrough, .cvlabelmenu, .cviconmenu").removeClass("cv_disable"),$(".basic_edit").hasClass("cd_field cd_label")&&$("#cd_strikethrough").addClass("cv_disable"),$(".basic_edit").hasClass("cd_field cd_icon")&&($("#cd_strikethrough").addClass("cv_disable"),$("#cd_italic").addClass("cv_disable"),$("#cd_caps").addClass("cv_disable"),$("#tE_font_style").addClass("cv_disable")),$(".basic_edit").hasClass("cd_field cd_separator")&&($("#cd_strikethrough").addClass("cv_disable"),$("#cd_italic").addClass("cv_disable"),$("#cd_caps").addClass("cv_disable"),$("#tE_font_style").addClass("cv_disable"),$(".cvlabelmenu").addClass("cv_disable"),$(".cviconmenu").addClass("cv_disable")),u||"label"==p?$("#cvlabelmenu").prop("checked",!0):$("#cvlabelmenu").prop("checked",!1),m||"icon"==p?$("#cviconmenu").prop("checked",!0):$("#cviconmenu").prop("checked",!1),"right"==c?$("#cdToolAlignImg").removeClass("tE_midlalin tE_leftalin").addClass("tE_rightalin"):"middle"==c?$("#cdToolAlignImg").removeClass("tE_leftalin tE_rightalin").addClass("tE_midlalin"):$("#cdToolAlignImg").removeClass("tE_midlalin tE_rightalin").addClass("tE_leftalin");x.replace("Italic","");var S=$("#fontNameHodler").data("fontname");$("#fontNameHodler").removeClass(S),x&&x.indexOf("ProximaNova")>-1&&(x=x.replace("ProximaNova","CanvasFont")),$("#fontNameHodler").addClass(x),$("#fontNameHodler").data("fontname",x),$("#fontNameHodler").html(o),-1!=x.indexOf("Italic")?$("#cd_italic").hasClass("cd_bg_gray")||$("#cd_italic").addClass("cd_bg_gray"):$("#cd_italic").removeClass("cd_bg_gray"),0!=jSortable.cd_selectedNode.siblings().length?($("#cdPadding_top").hide(),$("#cdPadding_bottom").hide()):($("#cdPadding_top").show(),$("#cdPadding_bottom").show()),$("#cd_paddingTop").val(f),$("#cd_paddingLeft").val(b),$("#cd_paddingBottom").val(C),$("#cd_paddingRight").val(y),$(jSortable.cd_selectedGridItem).find(".cd_field.field_valueHolder").length>1?$("#canvasMenuUngroup").removeClass("cv_disable"):$("#canvasMenuUngroup").addClass("cv_disable"),$(".basic_edit").hasClass("cd_field cd_separator")?$("#canvasMenuSeparator").removeClass("cv_disable").addClass("border_highlight"):$("#canvasMenuSeparator").addClass("cv_disable").removeClass("border_highlight"),$("#canvasMenuCp").removeClass("cv_disable"),jQuery.isEmptyObject(jSortable.copyStyle)?$("#canvasMenuPs").addClass("cv_disable"):$("#canvasMenuPs").removeClass("cv_disable"),$(".basic_edit").hasClass("grid-stack-item-content")||$(".basic_edit").hasClass("row_separator")?$("#tE_select_align").removeClass("cv_disable"):$("#tE_select_align").addClass("cv_disable"),$("#cd_padding").removeClass("cv_disable")}else{var I=jSortable.getSelectedFields().map((function(e){return $(e).data("component")})),k=$L(t).toArray().map((function(e){return $(e).data("component").ui.styles})),x=(s=$u.chain(k.map((function(e){return e.font_size}))).uniq().value(),$u.chain(k.map((function(e){return e.font_style}))).uniq().value()),E=(d=$u.chain(k.map((function(e){return e.color}))).uniq().value(),$u.chain(k.map((function(e){return e.background_color}))).uniq().value()),T=(c=$u.chain(k.map((function(e){return e.align}))).uniq().value(),$("#fontNameHodler").data("fontname")),j=$u.chain(I).map((function(e){return e.label})).uniq().value(),L=$u.chain(I).map((function(e){return e.icon})).uniq().value();if(""==x&&(x="CanvasFontRegular"),x&&x.indexOf("ProximaNova")>-1&&(x=x.replace("ProximaNova","CanvasFont")),$("#cd_italic, #cd_caps, #tE_font_style, #cd_strikethrough, .cvlabelmenu, .cviconmenu").removeClass("cv_disable"),$(jSortable.cd_selectedGridItem).find(".cd_field.cd_separator").length>0?$("#canvasMenuSeparator").removeClass("cv_disable").addClass("border_highlight"):$("#canvasMenuSeparator").addClass("cv_disable").removeClass("border_highlight"),$(".basic_edit").hasClass("grid-stack-item-content")||$(".basic_edit").hasClass("row_separator")?$("#tE_select_align").removeClass("cv_disable"):$("#tE_select_align").addClass("cv_disable"),$(jSortable.cd_selectedGridItem).find(".cd_field.field_valueHolder").length>1&&!$(".basic_edit").hasClass("grid-stack-item-content")?$("#canvasMenuUngroup").removeClass("cv_disable"):$("#canvasMenuUngroup").addClass("cv_disable"),$("#canvasMenuCp").addClass("cv_disable"),jQuery.isEmptyObject(jSortable.copyStyle)?$("#canvasMenuPs").addClass("cv_disable"):$("#canvasMenuPs").removeClass("cv_disable"),j.length>1?$("#cvlabelmenu").prop("checked",!1):1==j[0]?$("#cvlabelmenu").prop("checked",!0):$("#cvlabelmenu").prop("checked",!1),L.length>1?$("#cviconmenu").prop("checked",!1):1==L[0]?$("#cviconmenu").prop("checked",!0):$("#cviconmenu").prop("checked",!1),1==d.length&&1==E.length?jSortable.colorBgToolUpdate(d[0],E[0]):1==d.length?jSortable.colorBgToolUpdate(d[0],""):1==E.length?jSortable.colorBgToolUpdate("",E[0]):jSortable.colorBgToolUpdate("",""),1==s.length){var N=s[0];$("#cdToolFS").html(N)}else $("#cdToolFS").html("");if(1==x.length){var z=x[0];if($("#fontNameHodler").data("fontname",z),-1!=z.indexOf("Italic"))var M=z.replace("Italic","");else M=z;n=$L("#fontstyle_dropdown > li").toArray().filter((function(e){return $(e).data("fontname")===M})),o=$(n).html();$("#fontNameHodler").removeClass(T),$("#fontNameHodler").addClass(z),$("#fontNameHodler").html(o)}else $("#fontNameHodler").removeClass(T),$("#fontNameHodler").data("fontname",""),$("#cd_italic").removeClass("cd_bg_gray"),$("#fontNameHodler").html("");var A=c[0];"right"==A?$("#cdToolAlignImg").removeClass("tE_midlalin tE_leftalin").addClass("tE_rightalin"):"middle"==A?$("#cdToolAlignImg").removeClass("tE_leftalin tE_rightalin").addClass("tE_midlalin"):$("#cdToolAlignImg").removeClass("tE_midlalin tE_rightalin").addClass("tE_leftalin"),$("#tE_merge").html("merge").removeClass("cv_disable");$("#cd_paddingMargin").data("spacingtype"),f=parseInt($(".basic_edit").css("padding-top"))||0,b=parseInt($(".basic_edit").css("padding-left"))||0,y=parseInt($(".basic_edit").css("padding-right"))||0,C=parseInt($(".basic_edit").css("padding-bottom"))||0;$("#cdPadding_top").show(),$("#cdPadding_bottom").show(),$("#cd_paddingTop").val(f),$("#cd_paddingLeft").val(b),$("#cd_paddingBottom").val(C),$("#cd_paddingRight").val(y),$("#cd_padding").removeClass("cv_disable")}var O=JSON.parse(JSON.stringify($("#textEditorMenu").data("tool")));s=$("#cdToolFS").html(),x=$("#fontNameHodler").data("fontname"),d=rgb2hex($(".tE_color").css("background-color"));null!=x&&""!=x||(x="CanvasFontRegular"),x&&x.indexOf("ProximaNova")>-1&&(x=x.replace("ProximaNova","CanvasFont")),""!=s&&(O.font_size=s),""!=x&&(O.font_style=x),""!=d&&(O.color=d),$("#textEditorMenu").data("tool",O)},colorPickerCopyPaste:function(e,t){var a=$(e).val();"color"==t?($("#textColorId").data("color",a),$("#cd_textColorHolder").css("background-color","#"+a),jSortable.colorUpdate(a)):($("#textBgId").data("bg",a),$("#cd_textBgHolder").css("background-color","#"+a),jSortable.backgroundColorUpdate(a)),sE()},changeStyles:function(e){e.editorChanges.font_size},colorPicker:function(e,t){var a;$(e).bind("click",(function(){$(this).offset();$(".props").hide(),$("#font_dropdown").hide(),sE()})).ColorPicker({color:"#de0000",onBeforeShow:function(){if("textColorId"==$(this).attr("id"))var e=rgb2hex($("#textColorId").data("color"));else e=rgb2hex($("#textBgId").data("bg"));$(this).ColorPickerSetColor(e)},onShow:function(e){return $(e).css("z-index","1501"),$("#textEditorMenu").hasClass("cv_disable")||$(e).show(),$(e).click((function(){sE()})),jSortable.triggerCatchMoves("color"),$(".colorpicker_submit").hide(),$(".colorpicker_current_color").hide(),$(".colorpicker_rgb_r").hide(),$(".colorpicker_rgb_g").hide(),$(".colorpicker_rgb_b").hide(),$(".colorpicker_hsb_h").hide(),$(".colorpicker_hsb_s").hide(),$(".colorpicker_hsb_b").hide(),!1},onChange:function(e,i,s){a=i;var l=$("#cd_textBgHolder");if($(".basic_edit").hasClass("grid-stack-item-content"))var n=$(".basic_edit").find(".cd_field");else n=$(".basic_edit");"bg"==t?(n.css("background-color","#"+a),$("#textBgId").data("bg",a),$("#cd_textBgHolder").css("background-color","#"+a),$("#selectedBgColor").val(a)):(n.css("color","#"+a),$("#textColorId").data("color",a),$("#cd_textColorHolder").css("background-color","#"+a),$("#selectedTextColor").val(a)),$("#tE_color > .tE_color").css("background-color","#"+a),l.hasClass("cvresetcolor")&&l.removeClass("cvresetcolor"),sE()},onHide:function(e,i){return $(".bgcolor").removeClass("active"),$(e).hide(),"bg"==t?(jSortable.updateNode($(".basic_edit"),"background_color",a),$("#textEditorMenu").data("tool").background_color=a,$("#textBgId").data("bg",a)):(jSortable.updateNode($(".basic_edit"),"color",a),$("#textEditorMenu").data("tool").color=a,$("#textColorId").data("color",a)),$("#fieldPropPick").css("display","none"),jSortable.resizeHeight(jSortable.cd_selectedGridItem),!1}})},paddingMarginChange:function(e){"inner"==$(e).data("spacingtype")?($(e).data("spacingtype","outer"),$(e).find(".padding_container").html("Outer")):($(e).data("spacingtype","inner"),$(e).find(".padding_container").html("Inner"))},deleteElement:function(e,t){if(jSortable.triggerCatchMoves("delete"),null==e)e=$(".basic_edit");$(e).each((function(e,a){if(!$(a).hasClass("cd_field cd_separator")){($(a).hasClass("cd_field cd_label")||$(a).hasClass("cd_field cd_icon"))&&(a=jSortable.getSelectedFields(!1,a));var i=jSortable.getSelectedFields(!1,a),s=i.map((function(e){return $(e).data("component")}));if(!$(a).hasClass("grid-stack-item"))var l=$(a).parents(".grid-stack-item");if($(a).hasClass("row_separator"))$(a).remove();else if($(a).hasClass("cd_field field_valueHolder")){var n=s[0];if(1==n.label||1==n.icon){var o=$(i).parent();0==o.prev().length?o.next().remove():o.prev().remove(),o.remove()}else 0==$(i).prev().length?$(i).next().remove():$(i).prev().remove(),$(i).remove()}else if($(a).hasClass("grid-stack-item-content")){var d=$(i).parents(".grid-stack-item");$(d).remove()}else $(a).remove();var r=$(l).find(".row_separator");if(0==$(l).find(".cd_field").length&&$(l).remove(),1==$(l).find(".row_separator").length){var c=$(l).find(".row_separator").children();$(c).unwrap()}$(r).each((function(e,t){0==$(t).children().length&&$(t).remove()})),t||$(s).each((function(e,t){var a=JSON.parse(JSON.stringify(t)),i={field_label:"",_type:"",id:"",data_type:"",UITYPE:"",display_value:""};i.field_label=a.field_label||a.name,i._type=a._type,i.id=a.id,i.data_type=a.data_type,i.UITYPE=a.ui_type,i.display_value=a.display_value,t.ignore||jSortable.prependDeletedField(i)}))}})),$(".grid1").find(".grid-stack-item").length>0&&jSortable.nodeAlignmentMethods(),$("#cview_contextmenu").hide(),jSortable.dragUiFixed(),0==$(".grid1").find(".grid-stack-item").length&&($("#textEditorMenu").addClass("cv_disable"),$("#cdDeleteIcon").addClass("cv_disable")),$("#grid1").find(".grid-stack-item").length<=0&&jSortable.enableOrDisableSaveCV(!1),jSortable.sideMenuLimit()},sideMenuLimit:function(){jSortable.canvas_fieldCount=$("#grid1").find(".cd_field.field_valueHolder").length;var e=$("#grid2"),t=$("#grid2").find(".cd_field.field_valueHolder");jSortable.canvas_fieldCount<jSortable.canvas_fieldLimit&&$("#grid2").hasClass("cv_disable")?e.removeClass("cv_disable"):jSortable.canvas_fieldCount>=jSortable.canvas_fieldLimit&&e.addClass("cv_disable"),t.length<=0?($("#sidebar_fields,#sidebar_fieldsHeading,#sidebar_buttons,#sidebar_linksHeading,#sidebar_links,#sidebar_othersHeading,#sidebar_others,#noFields").hide(),$("#noFields").show()):($("#sidebar_fields,#sidebar_fieldsHeading,#sidebar_buttons,#sidebar_linksHeading,#sidebar_links,#sidebar_othersHeading,#sidebar_others,#noFields").show(),$("#noFields").hide())},removeHoverBindAndRowNode:function(e){var t=$(".grid-stack").data("gridstack");$(e.find(".row_separator")).each((function(){0==$(this).children().length&&$(this).remove()}));var a=e.find(".grid-stack-item-content").children(),i=e.find(".row_separator");e.find(".grid-stack-item-content");if(1==e.find(".row_separator").length){var s=$(i).children()[0];$(s).unwrap()}a.length<=0?t.removeWidget(e):1==a.length&&$(a).unbind("mouseout mouseover")},prependDeletedField:function(e){if("field"==e._type){var t=Handlebars.templates.sidemenu([e]);$("#sidebar_fields").prepend(t)}else if("button"==e._type){e.name||(e.name=e.field_label);t=Handlebars.templates.sidemenu_btn([e]);$("#sidebar_buttons").prepend(t)}else if("link"==e._type){t=Handlebars.templates.sidemenu_links([e]);$("#sidebar_links").prepend(t)}else{e.field_label||(e.field_label="Upcoming Activity");t=Handlebars.templates.sidemenu_others([e]);$("#sidebar_others").prepend(t)}},menuToggle:function(){$("#grid2 > h6").on("click",(function(){var e=$(this).attr("openDiv");if(0==$("#"+e).height()){$("#"+e).css("height","");var t=$("#"+e).height();$("#"+e).css("height",t).show()}else $("#"+e).css("height",0).hide()}))},labelPosition:function(e,t){if(!$(e).hasClass("cv_disable")){var a=jSortable.cd_selectedGridItem;$(a).find(".cd_field.cd_label");if(jSortable.cd_rowSelectedNode.length>1)var i=jSortable.cd_rowSelectedNode.filter((function(e){return $(e).hasClass("cd_field cd_label")||$(e).hasClass("cd_field field_valueHolder")})),s=jSortable.cd_selectedNode.filter((function(e){return $(e).hasClass("cd_field cd_label")}));else i=$(".basic_edit").parent().find(".cd_field"),s=$(".basic_edit").parent().find(".cd_field.cd_label");"top"==t?($(s).each((function(e,t){if("left"==$(t).data("component").ui.styles.labelAlign){var a=$(t).text();a=a.replace(":",""),$(t).text(a)}})),$(i).each((function(e,t){var a=$(t).data("component"),i=$(t).parents(".cd_mapping_field");$(i).removeClass("cd_label_left"),$(i).addClass("cd_label_top"),1!=a.label&&"label"!=a._type||(a.ui.styles.labelAlign="top")}))):($(s).each((function(e,t){if("top"==$(t).data("component").ui.styles.labelAlign){var a=$(t).text();a+=":",$(t).text(a),$(t).parent().find("br").remove()}})),$(i).each((function(e,t){var a=$(t).data("component"),i=$(t).parents(".cd_mapping_field");$(i).removeClass("cd_label_top"),$(i).addClass("cd_label_left"),1!=a.label&&"label"!=a._type||(a.ui.styles.labelAlign="left")}))),$(a).each((function(e,t){jSortable.resizeWidth(t),jSortable.resizeHeight(t)})),jSortable.updateCdtool(),$("#icon_dropdown").hide(),$("#labelalign_dropdown").hide(),sE()}},setTrHeight:function(){$("#tableRow >tbody>tr").length;$("#tableRow >tbody>tr").each((function(e,t){var a=$(this).height();$(this).css("height",a)}))},dragUiFixed:function(){var e;$("#grid2 .grid-stack-item").draggable({cancel:!1,cursorAt:{left:0,top:5},revert:function(t,a){return $(event.target).removeClass("cd_pF"),$("#fields_outer_container").scrollTop(e),$("#grid_inner").removeClass("editorBgAnimation").addClass("editorBgAnimationRevert"),$(".basic_edit").removeClass(".basic_edit"),!0},start:function(t,a){e=$("#fields_outer_container").scrollTop();var i=$(a.helper);$(i).removeClass("mT5");var s=$(i).attr("fields-type");$(".grid-stack").data("gridstack");$("#grid1").find(".grid-stack-item-content").addClass("cv_gray_bdr"),"button"!=s&&$(this).addClass("cv_bgYellow cd_pF"),$(this).addClass("cd_pF"),$("#sidebar_fields,#sidebar_buttons,#sidebar_separators,#fields_outer_container").removeClass("oH"),$("#fields_outer_container").css("overflow","visible"),$("#fields_outer_container").scrollTop(e),$("#grid1 > .grid-stack-item").each((function(e,t){var a=$(t).data("_gridstack_node").x,i=$(t).data("_gridstack_node").y,s=$(t).data("_gridstack_node").height,l=$(t).data("_gridstack_node").width;$(t).data("beforeX",a),$(t).data("beforeY",i),$(t).data("beforeWidth",l),$(t).data("beforeHeight",s)})),$("#grid1 > .grid-stack-item").addClass("cd_moveTrans"),$("#grid_inner").addClass("editorBgAnimation").removeClass("editorBgAnimationRevert"),jSortable.setGridStackNodeHeightWidth()},drag:function(e,t){var a=t.offset.left,i=t.offset.top;t.position.top=i,t.position.left=a},stop:function(e,t){draggedOutOfSocket=!1,$(t.helper).removeAttr("style"),$(t.helper).find(".cd_field").removeAttr("style"),$(e.target).addClass("mT5"),$("#grid1 > .grid-stack-item").each((function(e,t){$(t).removeData("beforeY beforeWidth beforeHeight beforeX")}));$(".grid-stack").data("gridstack");$("#sidebar_fields,#sidebar_buttons,#sidebar_separators,#fields_outer_container").addClass("oH"),$(this).removeClass("cv_bgYellow cd_pF"),$("#grid1 > .grid-stack-item").removeClass("cd_moveTrans")}})},cancel:function(){jSortable.clearMoves(),crmHistory.backOneLevel(),Crm.trackSpotLightAction("Canvas - Editor Cancel Click"),Crm.client_tracking("Canvas - Editor Cancel Click")},clearMoves:function(){jSortable.cd_undoCatchMoves=[],jSortable.cd_redoCatchMoves=[],jSortable.copyStyle={},jSortable.cd_selectedNode={},jSortable.cd_selectedNodeParent={},jSortable.cd_selectedGridItem={},jSortable.cd_selectedFieldHolder={},jSortable.cd_rowSelectedNode={}},search:function(e){var t=$(e),a=$("#sidebar_search > input").val();if(""!=a)var i=a;else i="";var s=$("#fields_outer_container"),l=s.find(".cd_field.field_valueHolder"),n=$L(l).toArray().filter((function(e){return $(e).text().includes(a.toLowerCase())})),o=$L(l).toArray().filter((function(e){return $(e).text().includes(a.toUpperCase())})),d=$L(l).toArray().filter((function(e){return $(e).text().includes(camelize(a))})),r=$(n).add(o).add(d);$("#grid2 #sidebar_fields .grid-stack-item, #sidebar_buttons .grid-stack-item, #sidebar_links .grid-stack-item, #sidebar_others .grid-stack-item").hide(),s.scrollTop(0);var c=$("#sidebarnomatch");r.length>0?$(r).each((function(e,a){c.is(":visible")&&(s.show(),c.addClass("dN")),$(this).parents(".grid-stack-item").show();t.val();if(divText=a,textProp="textContent"in divText?"textContent":"innerText",originalText=$ESAPI.encoder().encodeForHTML(divText[textProp]),!i)return divText.innerHTML=originalText,!0;var l=new RegExp("("+i+")","ig");divText.innerHTML=originalText.replace(l,"<span class='cv_highlight'>$1</span>")})):(s.hide(),c.removeClass("dN"))},removeWidget:function(){$(".grid-stack").data("gridstack").removeAll()},cvpaddingBorterShow:function(e){var t=$(e).attr("data-pos");switch($(".cvborderHover").removeClass("cvborderHoverActive"),t){case"top":$(".cvpadding-top-border").addClass("cvborderHoverActive");break;case"left":$(".cvpadding-left-border").addClass("cvborderHoverActive");break;case"right":$(".cvpadding-right-border").addClass("cvborderHoverActive");break;case"bottom":$(".cvpadding-bottom-border").addClass("cvborderHoverActive")}},cvpaddingBorterHide:function(){$(".cvborderHover").removeClass("cvborderHoverActive")},enableOrDisableSaveCV:function(e){e?($("#canvasPreview").addClass("cP").attr("onclick","Customization.generatePreview()"),$("#savecustomizedview").removeAttr("disabled"),jSortable.cd_datamodified=!0,pageReloadChk(),null==$("#savecustomizedview").attr("disabled")?window.addEventListener("beforeunload",pageReloadChk):window.removeEventListener("beforeunload",pageReloadChk)):($("#canvasPreview").removeClass("cP").attr("onclick",""),$("#savecustomizedview").attr("disabled",!0),jSortable.cd_datamodified=!1,pageReloadChk(),window.removeEventListener("beforeunload",pageReloadChk))}};function camelize(e){return e.toLowerCase().replace(/\b[a-z]/g,(function(e){return e.toUpperCase()}))}function chunk(e,t){return e.reduce((function(e,a,i){return i%t==0&&e.push([]),e[e.length-1].push(a),e}),[])}function rgb2hex(e){null==e&&(e="ffffff");var t=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+)/i);return t&&4===t.length?("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):e}function pageReloadChk(e){if(1==jSortable.cd_datamodified&&$("#editor_container").length>0&&null==$("#savecustomizedview").attr("disabled")){Events.isPageLayoutModified=!0;var t=I18n.getMsg("crm.process.reload.alert");return(e||window.event).returnValue=t,t}window.removeEventListener("beforeunload",pageReloadChk),Events.isPageLayoutModified=!1}function emptyImgRemove(e){e=$(e),$(e).attr("src",networkUtils.getImageUrl("image_profile_canvas_1d7b1e9_.svg",ResourceConstants.CRM)).addClass("canvasDummyImge cd_people_image")}String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};var Customization={isBuilder:!1,orgSpec:["S","Y","R","P"],moduleSpec:["E","A","Z","U","C"],ruleLimit:{S:5,Y:5,R:10,P:10,E:15,A:15,Z:15,U:25,C:25},components:[],canvasRefresh:{},shuffleIndex:0,mappedFileds:{},textAreaHidden:!1,cache:{views:{},liveData:{}},favouritesTimerId:"",maxViewLimit:null,viewType:"created_by_me",mappingStart:null,mappingTime:null,dropCache:!1,displayFieldMap:{Leads:["Full_Name","Last_Name"],Activities:["Subject"],Accounts:["Account_Name"],Contacts:["Full_Name","Last_Name"],Deals:["Deal_Name"],Potentials:["Deal_Name"],Campaigns:["Campaign_Name"],Cases:["Subject"],Solutions:["Solution_Title"],Products:["Product_Name"],Vendors:["Vendor_Name"],PriceBooks:["Price_Book_Name"],Quotes:["Subject"],SalesOrders:["Subject"],PurchaseOrders:["Subject"],Invoices:["Subject"],Visits:["Visited_Page"],Appointments:["Appointment_Name"],Services:["Service_Name"],Tasks:["Subject"],Calls:["Subject"],Events:["Event_Title"]},head:{Leads:"Full_Name",Activities:"Subject",Accounts:"Account_Name",Contacts:"Full_Name",Deals:"Deal_Name",Potentials:"Deal_Name",Campaigns:"Campaign_Name",Cases:"Subject",Solutions:"Solution_Title",Products:"Product_Name",Vendors:"Vendor_Name",Price_Books:"Price_Book_Name",Quotes:"Subject",Sales_Orders:"Subject",Purchase_Orders:"Subject",Invoices:"Subject",Forecasts:"FORECASTNAME",Visits:"VISITEDPAGE",Tasks:"Subject",Calls:"Subject",Events:"Event_Title"},getCacheViewInfo:function(e){return Customization.cache.views?Customization.cache.views[e]:void 0},addViewToCache:function(e){Customization.cache.views[e.id]=e,setTimeout((function(){delete Customization.cache.views[e.id]}),6e6)},deleteViewFromCache:function(e){Customization.cache.views&&delete Customization.cache.views[e]},getLiveData:function(e){return Customization.cache.liveData[e]||void 0},setLiveData:function(e,t){Customization.cache.liveData||(Customization.cache.liveData={}),Customization.cache.liveData[t]=e,setTimeout((function(){delete Customization.cache.liveData[t]}),6e6)},generateView:function(e,t,a,i){var s,l=new crmRequestPool,n="";if($("[name=listviewrow]").map((function(e,t){n+=$(t).attr("id")+","})),commonUtils.showHideLoadingDiv(!0),l.initiate({action:Crm.getCrmBasePath()+"/ShowDetails.do?fetchCustomizedViewSampleData=true&module="+e+"&entityIds="+n,success:function(l){var n={module:e,components:l.customizationJSON.components,id:t,customizedViewLimit:l.customizedViewLimit};t&&(n.ignoreInit=!0);Customization.setLiveData(l,e),Customization.shuffleIndex=0,(s=new listViewHandler(Customization.getLiveData(e))).addSampleData(void 0,Customization.shuffleIndex),Customization.renderEditorSection(n,i),commonUtils.showHideLoadingDiv(),!t&&a&&a();l.body.length||$(".suffle_data").addClass("cv_disable")},error:function(e){"403"!=e.status&&"400"!=e.status||renderingUtils.displayPermissionDenied(),commonUtils.showHideLoadingDiv()}}),t){var o={id:t,requestObj:l,module:e};Customization.fetchViewInfo(o,(function(e){var t=e.views[0];s.addSampleData(t.components),jSortable.cdViewEdit(t),$("#customizedviewname").val(t.name).focus(),jSortable.loadWhenEditorOpen(),jSortable.menuToggle(),jSortable.dragUiFixed(),jSortable.heightset(),Customization.removeSideBarElements(t.components),jSortable.sideMenuLimit(),a&&a()}))}},removeSideBarElements:function(e){for(var t,a=e.length,i=$("#component_"),s=0;s<a;s++){t=e[s].id;var l=e[s].children;if(l&&l.length)Customization.removeSideBarElements(l);else{if("upcoming_activity"===e[s]._type){i.remove();continue}if(e[s].id===t&&"Owner_Photo"===e[s].data_type){$("#component_"+e[s].data_type).remove();continue}}e[s].id===t&&$("#component_"+t).remove()}},renderEditorSection:function(e,t){$("#show").html(Handlebars.templates.CustomizationViewEditorSkeleton()),e.ispersonalAccount=Crm.userDetails.PERSONAL_ACCOUNT;var a=Handlebars.templates.editorsection(e);$("#cv_manageView").remove(),$("#cv_navigation,#cv_gallery,#cv_body_img,#cv_view_body,#cv_view_side,#cvMenu").hide(),$("#tableRow").empty(),$("#cv_body").prepend(a);var i=(new ComponentProcessor).groupComponents(e.components);i.field&&$("#sidebar_fields").html(Handlebars.templates.sidemenu(i.field)),i.button?$("#sidebar_buttons").html(Handlebars.templates.sidemenu_btn(i.button)):$("[name=sidebar_buttons]").hide(),i.link?$("#sidebar_links").html(Handlebars.templates.sidemenu_links(i.link)):$("[name=sidebar_links]").hide(),i.upcoming_activity||""?$("#sidebar_others").html(Handlebars.templates.sidemenu_others(i.upcoming_activity)):$("[name=sidebar_others]").hide(),$("#customizedviewname").unbind("keyup").bind("keyup",(function(e){13==e.keyCode&&(""!=$("#viewId").val()?Customization.updateCustomizedView():Customization.saveCustomizedView(),$(this).unbind("keyup"))})),e.ignoreInit||t||(jSortable.init(),jSortable.loadWhenEditorOpen(),jSortable.removeWidget(),jSortable.menuToggle(),jSortable.dragUiFixed(),jSortable.heightset()),setTimeout((function(){$("#cv_navigation").hide()}),100)},validateName:function(e,t,a){if(!e)return renderingUtils.showCustomAlert(I18n.getMsg("crm.label.valid.name")),!1;var i=customViewObject;if(i&&i.customizedViewList)for(var s in customViewObject.customizedViewList)for(var l=customViewObject.customizedViewList[s],n=l.length,o=0;o<n;o++)if(e==l[o].name){if(a==l[o].id)continue;return renderingUtils.showCustomAlert(I18n.getMsg("crm.canvas.duplicate","Canvas")),!1}return!0},saveCustomizedView:function(e){var t={},a=[],i=$("#cv_editor_module").attr("value"),s=$("#customizedviewname"),l=s.val();if(i)if(Customization.validateName(l,i)){var n=jSortable.customDesignJson(void 0,!0),o=n.components,d=n.grid_size,r=n.row_size;if(!this.validateComponents(o))return!1;var c={name:l,width:d,row_size:r,feature_name:"ListView",components:o,module:i};$("#accessDIV").html()&&(collectAccessbilitySrc(),c.allowedUsers=$("[name=allowedUsers]:checked").val(),c.selectedAccessObj=$("[name=selectedAccessObj]").val()),(e=e?$(e):$("#savecustomizedview")).attr("disabled",!0),a.push(c),t.views=a,(new crmRequestPool).initiate({action:"/crm/v2/customization/views",headers:{"X-ZCSRF-TOKEN":csrfParamName+"="+csrfToken},dataType:"json",type:"POST",data:JSON.stringify(t),success:function(t){if("error"===t.views.status)return e.attr("disabled",!1),void(["LIMIT_EXCEEDED","DUPLICATE_DATA"].indexOf(t.views.code)>-1?(renderingUtils.showCustomAlert(t.views.message),s.focus()):renderingUtils.showCustomAlert(I18n.getMsg("crm.unable.to.process.request")));var a=t.views.details.id;crmTab.deleteFromCache(i);var l=Customization.getLiveData(i);Crm.trackSpotLightAction("Canvas - Saved",{Module:i,"Grouped Count":jSortable.groupingused}),Crm.client_tracking("Canvas - Saved"),Lyte.Router.transitionTo({route:"crm.tab.module.custom-view.canvas",dynamicParams:[i,l.cvId,a]})},error:function(t){e.attr("disabled",!1),["LIMIT_EXCEEDED","DUPLICATE_DATA"].indexOf(t.responseJSON.code)>-1?(renderingUtils.showCustomAlert(t.responseJSON.message),s.focus()):renderingUtils.showCustomAlert(I18n.getMsg("crm.unable.to.process.request"))}})}else s.focus();else renderingUtils.showCustomAlert(I18n.getMsg("crm.unable.to.process.request"))},updateCustomizedView:function(){var e={},t=[],a=$("#cv_editor_module").attr("value"),i=$("#customizedviewname"),s=i.val(),l=$("#viewId").val();if(l&&a)if(Customization.validateName(s,a,l)){var n=jSortable.customDesignJson(void 0,!0),o=n.components,d=n.grid_size,r=n.row_size;if(!this.validateComponents(o))return!1;var c={id:l,name:s,width:d,row_size:r,feature_name:"ListView",components:o,module:a};$("#accessDIV").html()&&(collectAccessbilitySrc(),c.allowedUsers=$("[name=allowedUsers]:checked").val(),c.selectedAccessObj=$("[name=selectedAccessObj]").val()),t.push(c),e.views=t,$("#savecustomizedview").attr("disabled",!0),(new crmRequestPool).initiate({action:"/crm/v2/customization/views",headers:{"X-ZCSRF-TOKEN":csrfParamName+"="+csrfToken},dataType:"json",type:"PUT",data:JSON.stringify(e),success:function(e){if(e&&e.details&&e.details.isUsedInClientPortal)crmui.showMsgBand("error",e.message,3e3);else{if("error"===e.views.status)return $("#savecustomizedview").attr("disabled",!1),void renderingUtils.showCustomAlert(e.views.message||I18n.getMsg("crm.unable.to.process.request"));Customization.deleteViewFromCache(l),crmTab.deleteFromCache(a);var t=Customization.getLiveData(a);Crm.trackSpotLightAction("Canvas - Save Click",{Module:a,"Grouped Count":jSortable.groupingused}),Crm.client_tracking("Canvas - Save Click");var i={module:a};crmListView.getFilterParams(i),crmListView.getObject()&&crmListView.getObject().filterId&&(i.filterId=crmListView.getObject().filterId),Lyte.Router.transitionTo({route:"crm.tab.module.custom-view.canvas",dynamicParams:[a,t.cvId,l],queryParams:{filters:i.filters,filter_id:i.filterId}})}},error:function(e){$("#savecustomizedview").attr("disabled",!1),["LIMIT_EXCEEDED","DUPLICATE_DATA","NOT_ALLOWED"].indexOf(e.responseJSON.code)>-1?(renderingUtils.showCustomAlert(e.responseJSON.message),i.focus()):renderingUtils.showCustomAlert(I18n.getMsg("crm.unable.to.process.request"))}})}else i.focus();else renderingUtils.showCustomAlert(I18n.getMsg("crm.unable.to.process.request"))},shuffleData:function(e){var t=Customization.getLiveData(e),a=t.body?t.body.length:0;Customization.shuffleIndex=++Customization.shuffleIndex%a;var i=jSortable.eachNode();new listViewHandler(t).addSampleData(i,Customization.shuffleIndex);var s={components:i};jSortable.triggerCatchMoves("suffleData"),jSortable.removeWidget(),jSortable.cdViewEdit(s,!0)},generatePreview:function(){var e=$("#cv_editor_module").attr("value"),t=jSortable.customDesignJson(void 0,!1),a=Customization.getLiveData(e),i=$("#customizationpreviewdivdata");i.html(""),a.toIndex=10;var s=new listViewHandler(a);s.baseDiv=i,s.customizationJSON=t,s.preProcess(),s.renderListView(),crmui.showPopup("customizationpreviewdiv"),Crm.trackSpotLightAction("Canvas - Preview Click",{Module:e}),Crm.client_tracking("Canvas - Preview Click"),setTimeout((function(){(new listViewHandler).loadPrevRecordImages()}),500)},getAccessibilityDiv:function(e,t,a){var i="action=getCustomizedViewSharingDetails&configType=cv&module="+t;e&&(i+="&viewid="+e),(new crmRequestPool).initiate({action:Crm.getCrmBasePath()+"/CustomView.do?"+i,type:"GET",success:function(e){$("#accessDIV").html(e),a&&a()}})},handleSaveOption:function(e){e?Customization.updateCustomizedView():Customization.openSharingDiv(e)},updateSharing:function(){var e=$("#sharingsaveoption").data("sharingid");collectAccessbilitySrc();var t=Customization.getCacheViewInfo(e);if(t.allowedUsers=$("[name=allowedUsers]:checked").val(),t.selectedAccessObj=$("[name=selectedAccessObj]").val(),t.components.length>0&&void 0===t.row_size){var a=$u.max(t.components,(function(e){return e.ui.position.startY+e.ui.position.height})),i=a.ui.position.startY+a.ui.position.height||0;t.row_size=i}var s={views:[t]};(new crmRequestPool).initiate({action:"/crm/v2/customization/views",headers:{"X-ZCSRF-TOKEN":csrfParamName+"="+csrfToken},dataType:"json",type:"PUT",data:JSON.stringify(s),success:function(e){e&&e.details&&e.details.isUsedInClientPortal?crmui.showMsgBand("error",e.message,3e3):"error"!==e.views.status?(crmui.showMsgBand("success","Sharing updated successfully",3e3),Crm.trackSpotLightAction("Canvas - Sharing Updated"),Crm.client_tracking("Canvas - Sharing Updated"),crmui.hidePopup("managesharing")):renderingUtils.showCustomAlert(e.views.message||I18n.getMsg("crm.unable.to.process.request"))}})},showSharing:function(e,t){Customization.getAccessibilityDiv(e,t,(function(){crmui.showPopup("managesharing"),$("#sharingsaveoption").data("sharingid",e),$("#accessDIV").append(),Crm.trackSpotLightAction("Canvas - Sharing Click",{Module:t}),Crm.client_tracking("Canvas - Sharing Click")}))},openSharingDiv:function(e){""==$("#accessDIV").html()?Customization.getAccessibilityDiv(e,$("#cv_editor_module").attr("value"),(function(){var t=$("#allowedUsers-all");""==e&&t.length&&renderingUtils.triggerEvent("click",t),crmui.showPopup("cviewName"),$(".viewName").focus()})):(crmui.showPopup("cviewName"),$(".viewName").focus())},deleteView:function(e,t,a){a||(a="ListView"),(new crmRequestPool).initiate({action:"/crm/v2/customization/views/"+e+"?feature="+a+"&module="+t,headers:{"X-ZCSRF-TOKEN":csrfParamName+"="+csrfToken},dataType:"json",type:"DELETE",success:function(i){"ListView"===a?Customization.listView_deleteCb(i,e,t):"DetailView"===a&&Customization.detailView_deleteCb(i.views[0],t)}})},detailView_deleteCb:function(e,t){Lyte.Router.transitionTo({route:"crm.tab.module.entity.detail",dynamicParams:[t,Crm.latestEntId]})},listView_deleteCb:function(e,t,a){if("success"===(e=e.views[0]).status){var i=$("[name=canvasviewlist]").length;if(1==i){hideFreezeLayer(),crmTab.deleteFromCache(a);var s=Customization.getLiveData(a);delete moduleRecordMapping.Leads.viewid,Lyte.Router.transitionTo({route:"crm.tab.module.custom-view.list",dynamicParams:[a,s.cvId]})}else $("#manageviews_"+t).remove(),$("#warningMsg").text(I18n.getMsg("crm.label.deleted.successfully")),hideAnimatePopup("deletepopup"),Crm.trackSpotLightAction("Canvas - Deleted",{Module:a}),Crm.client_tracking("Canvas - Deleted"),i<=Customization.maxViewLimit&&$(".cloneButton").show();crmTab.deleteFromCache(a)}else if(e.details.isUsedInClientPortal)hideAnimatePopup("deletepopup"),crmui.showMsgBand("error",e.message,5e3);else{var l=e.details.isUsedInClientPortal?e.message:"game.common.error";$("#warningMsg").text(I18n.getMsg(l)),$("#showWarning2,#fromDeletepopupButtons").hide(),setTimeout((function(){$("#fromDeletepopupButtons").show(),hideAnimatePopup("deletepopup")}),2e3)}},validateComponents:function(e){return!!(new ComponentProcessor).groupComponents(e).field||(renderingUtils.showCustomAlert(I18n.getMsg("canvas.atleast.onefield.content")),!1)},fieldmappingBindClick:function(){var e=$(".choose-field-mapping-cv"),t=e.offset().top+27+25+62;e.height(renderingUtils.windowHeight-t),setTimeout((function(){$("#grid3").on("click",".cvmapping-field",(function(){var e=null,t=$(this),a=t.offset().top,i=t.offset().left,s=t.height();$(".mappingfieldTablehover").removeClass("mappingfieldTablehover"),t.addClass("mappingfieldTablehover");var l=t;0==t.hasClass("cd_field field_valueHolder")&&(l=t.find(".cd_field.field_valueHolder"));var n=Customization.getFieldType(l);if("upcoming_activity"!=n){var o=l.data("component"),d=o.data_type?o.data_type:"";e=o.id+"-"+d}else e=n;var r=$("#gallery_"+n);r.length<=0&&(r=$("#gallery_field")),Customization.hideTextAreaFields(l,r);var c=Customization.isSkippedField(r,l);1==c?r.val("skip").trigger("update"):0==c?r.val("").trigger("update"):Customization.mappedFileds[e]&&r.val(e).trigger("update"),r.select2("open"),0!=c&&1!=c&&$("li.select2-results__option[id*='-"+e+"']").attr("aria-selected",!0),$(".select2-dropdown").parents(".select2-container.select2-container--default.select2-container--open").css({top:a+s,left:i}),$(".select2.select2-container").css({top:a+s,left:i})}))}),1)},hideTextAreaFields:function(e,t){var a=null,i=!!e.parents(".grid-stack-item").data("groupField");(i&&0==Customization.textAreaHidden?a=!0:i||1!=Customization.textAreaHidden||(a=!1),null!=a)&&(t.select2("destroy"),t.find("option[type='textarea']").each((function(){var e=$(this).val();Customization.mappedFileds[e]||$(this).attr("disabled",a)})),t.select2(),Customization.textAreaHidden=a)},getFieldType:function(e){var t=e.data("component");return!t.data_type||"Image"!=t.data_type&&"Owner_Photo"!=t.data_type?"upcoming_activity"==t._type||"button"==t._type||"link"==t._type?t._type:"field":"Image"},isSkippedField:function(e,t){var a=t.hasClass("skip-field"),i=t.parent(".cd_mapping_field"),s=e.val();return i.length&&i.hasClass("skip-field")&&(a=!0),!(!a&&"skip"==s)&&(!(!a||"skip"==s)||void 0)},showSelectorOption:function(e,t){e.find("option[value='"+t+"']").attr("disabled",!1)},hideOptionFromSelector:function(e,t){e.select2("destroy"),e.val(""),"skip"!=t&&e.find("option[value='"+t+"']").attr("disabled",!0),thirdPartyUtils.bindSelect2(e)},updateGalleryView:function(e){var t=(e=$(e)).val(),a=$(".mappingfieldTablehover"),i=a.find(".cd_people_image"),s=a.outerWidth(),l=a;if(0==l.hasClass("cd_field field_valueHolder")&&(l=l.find(".cd_field.field_valueHolder")),i.length>0)var n=a.parents(".grid-stack-item"),o=parseInt(n.css("width")),d=parseInt(n.css("height"));if(t){var r=$("#gallerymodule").val(),c=LVCGallery.liveData[r].customizationJSON.components.filter((function(e){if("upcoming_activity"!=t){var a=t.split("-"),i=a[0],s=a[1];return e.id===i&&(!e.data_type&&""==s||e.data_type===s)}if("upcoming_activity"==e._type)return e.id=e._type,e}));c=c[0];var p=l.data("component");!c||"link"!=p._type&&"button"!=p._type||(c.label=!1,c.icon=!1),"upcoming_activity"==(c=$.extend({},p,c)).id&&(delete c.COLUMNNAME,delete c.FIELDID,delete c.FIELDLABEL,delete c.UITYPE);var u=p.data_type?p.data_type:"",m="upcoming_activity"==p._type?p._type:p.id+"-"+u;if(Customization.showSelectorOption(e,m),delete Customization.mappedFileds[m],p.label){var g=l.siblings(".cd_field.cd_label"),v=g.data("component");v.id=c.id,v.field_label=$ESAPI.encoder().encodeForHTML(c.field_label),g.replaceWith($(jSortable.createInnerHtml(v)).html())}else if(p.icon){var _=l.siblings(".cd_field.cd_icon"),h=_.data("component");h.id=c.id,h.field_icon=c.field_icon,_.replaceWith($(jSortable.createInnerHtml(h)).html())}var f=$($(jSortable.createInnerHtml(c)).html()),b=f.find(".cd_people_image");l.replaceWith(f);var y=f.parent(".cd_mapping_field");y.length?("skip"==t?y.removeClass("not-mapped-field mapped-field").addClass("skip-field cvmapping-field").removeClass("cvunmappedfieldhigh mapped-field"):y.removeClass("not-mapped-field").addClass("mapped-field cvmapping-field").removeClass("cvunmappedfieldhigh skip-field"),a.css("width",s)):("skip"==t?f.addClass("skip-field cvmapping-field").removeClass("cvunmappedfieldhigh mapped-field"):f.addClass("mapped-field cvmapping-field").removeClass("cvunmappedfieldhigh skip-field"),0==b.length&&f.css("width",s)),a.removeClass("mappingfieldTablehover"),"skip"!=t&&(Customization.mappedFileds[t]=c.field_label),Customization.hideOptionFromSelector(e,t),setTimeout((function(){b.length>0&&(jSortable.imageHandling(b),$(f).find(".cd_people_image").css({"max-width":o,"max-height":d}))}),500)}},checkValidMapping:function(e){var t=$(".mapped-field").length,a=$(".cvmapping-field"),i=$(".skip-field").length;if(t<=0)renderingUtils.showCustomAlert(I18n.getMsg("canvas.mapping.atleast.onefield"));else if(i+t<a.length){var s={val:I18n.getMsg("crm.yes.proceed"),fn:function(){Customization.renderEditorFromGallery()}},l={val:I18n.getMsg("crm.button.cancel"),fn:function(){$("#customConfirmationPop").hide()}};renderingUtils.showCustomConfirmMessageNewModel("Unmapped fields will be skipped. Would you like to proceed ",s,l)}else Customization.renderEditorFromGallery()},renderEditorFromGallery:function(){var e=$("#gallerymodule").val();Customization.stopTimerMapping(e),Lyte.Router.transitionTo({route:"crm.settings.canvas.create",dynamicParams:[e],queryParams:{module:e}})},manageViews:function(e,t){if(Crm.userDetails.permissions.Crm_Implied_Manage_CustomViews){var a=new crmRequestPool,i="";$("[name=listviewrow]").map((function(e,t){i+=$(t).attr("id")+","})),commonUtils.showHideLoadingDiv(!0),a.initiate({action:Crm.getCrmBasePath()+"/ShowDetails.do?fetchCustomizedViewSampleData=true&module="+e+"&entityIds="+i,success:function(a){Customization.shuffleIndex=0,Customization.setLiveData(a,e);var i=JSON.parse(JSON.stringify(a));i.fromIndex=1,i.toIndex=1;var s=new listViewHandler(i);if(t)Customization.getViewsData(e,s,void 0,t);else{var l=$("#show");l.html("<div class='cvpadding cvBtnHeader headNormalPost pR' id='cvpadding' style='overflow: inherit;'><span class='backtoIcon dIB mL20' onclick='history.back();'></span><span class='f22 black mL10'>"+I18n.getMsg("canvas.manage.views","Canvas")+"</span><span class='fR managepageCanvas'> "+("skyDesk"!=Crm.brandName?"<a id='video-helplink' class='mT5 dIB video-helplink mR25  lh18' target='_blank' href='https://www.youtube-nocookie.com/embed/fZll-nKmPtc' onClick='Crm.trackSpotLightAction(\"Canvas - Video Help Click\");'></a>":"")+"<a id='context-helplink' class='mT2 dIB' onclick='openHelp(\""+crmConstants.helpUrl["help.domain.url"]+crmConstants.helpUrl["help.canvasview"]+"\");Crm.trackSpotLightAction(\"Canvas - Help Click\");' href='javascript:;'>"+I18n.getMsg("crm.help.layout")+"</a></span></div><div id='manageviews'><div id='created_by_me' style='display:none;'><span class='f16 black crm-font-bold'>"+I18n.getMsg("canvas.created_by_me")+"</span></div><div id='shared_with_me' style='display:none;'><span class='f16 black crm-font-bold'>"+I18n.getMsg("canvas.shared_with_me")+"</span></div></div>"),Customization.viewType="created_by_me",Customization.getViewsData(e,s,1);var n=renderingUtils.windowHeight,o=l.offset().top+$("#cvpadding").height()+90,d=$("#manageviews");d.height(n-o+20),d.on("scroll",$L.debounce((function(){if(d.scrollTop()+d.outerHeight()>=d[0].scrollHeight){var t=$("#"+Customization.viewType).find("[name='canvasviewlist']").length;Customization.getViewsData(e,s,t+1)}}),100))}},error:function(e){"403"!=e.status&&"400"!=e.status||renderingUtils.displayPermissionDenied(),commonUtils.showHideLoadingDiv()}})}else renderingUtils.displayPermissionDenied()},getViewsData:function(e,t,a,i){var s=$("#manageviews"),l=$("#cvgalleryrightpanel").css("height");if(i){var n=$("#galleryviews");if($(".loadingspan").length&&n.empty(),!$("#accessible_views_in"+e).length){var o="Deals"===e?"Potentials":e,d=Crm.moduleInfo[o];n.append("<div class='mB10 fs LVCGalCategory' data-gal-type='"+e+"'><span class='f16  crm-font-bold color_6a mR5'>"+d.pluralLabel+"</span><span id='listofpeoplecount'>"+LVCGallery.moduleLength[d.apiname]+"</span></div><div id='accessible_views_in"+e+"' style='display:none;'></div> <div></br></div>")}a=$("#accessible_views_in"+e).find("[name='canvasviewlist']").length+1;var r=parseInt(l,10)+parseInt(n.css("height"),10)}if(null!=Customization.viewType||i){var c=new crmRequestPool,p=i?"/crm/v2/customization/views?feature=ListView&module="+e+"&from_range="+a:"/crm/v2/customization/views?feature=ListView&module="+e+"&category="+Customization.viewType+"&from_range="+a;c.initiate({action:p,headers:{"X-ZCSRF-TOKEN":csrfParamName+"="+csrfToken},dataType:"json",type:"GET",success:function(a){"error"===a.views.status&&(i||(Customization.viewType=null),s.off("scroll"));var l=a.views.viewsJson;Customization.maxViewLimit=a.info.maxViewLimit;for(var n=Customization.getLiveData(e),o=n.body.length?n.body[0].ENTITYID:"-1",d=l.length,c=0;c<d&&c<20;c++){Customization.addViewToCache(l[c]),l[c].rowId=o,l[c].canModify=Crm.userDetails.permissions.Crm_Implied_Customize_Zoho_CRM||Crm.userDetails.USER_ID===l[c].created_by,l[c].canClone=d<Customization.maxViewLimit;var p="";"null"!=l[c].created_by&&(p=I18n.getMsg("crm.module.createdby")+" "+$ESAPI.encoder().encodeForJavaScript($ESAPI.encoder().encodeForHTML(l[c].createdby_name))+" "+l[c].created_time+",<br>"),l[c].toolTipContent=p+I18n.getMsg("crm.module.modifiedby")+" "+$ESAPI.encoder().encodeForJavaScript($ESAPI.encoder().encodeForHTML(l[c].modifiedby_name))+" "+l[c].modified_time;var u=Handlebars.templates.ManageCustomizedViews(l[c]);if((i?$("#accessible_views_in"+e):$("#"+Customization.viewType)).append(u).show(),t.customizationJSON=l[c],t.preProcess(l[c].components),t.getSingleRow("manageView",i),i){var m=$("#manageviews_"+l[c].id).find(".manageview-list");m.addClass("mB40 galleryitem"),m.append("<div class='gallery-freezelayer' onclick='LVCGallery.renderFieldMapping(\""+l[c].id+'","'+e+"\")'><input class='gallaryselectbtn crm-font-bold primarybtn' value='Select Template' data-zcqa='gallery_select_"+l[c].name+"' type='button' onclick='LVCGallery.renderFieldMapping(\""+l[c].id+'","'+e+"\");sE(event);'></div>"),$("#customizedholder_"+o).attr({id:"rendered_"+l[c].id,class:"mvdata-container  gallerylist-container p15 vam",onclick:'LVCGallery.renderFieldMapping("'+l[c].id+'","'+e+'")'})}else $("#customizedholder_"+o).attr({id:"temp",class:"mvdata-container"})}i?setTimeout((function(){(new listViewHandler).loadPrevRecordImages(void 0,!0)}),500):setTimeout((function(){(new listViewHandler).loadPrevRecordImages(!0)}),500),d<=20?i?(LVCGallery.isSameModule=!1,Customization.scrollView(e,t,r)):"shared_with_me"==Customization.viewType?(Customization.viewType=null,s.off("scroll")):(Customization.viewType="shared_with_me",Customization.getViewsData(e,t,0,i)):i&&(LVCGallery.isSameModule=!0,Customization.scrollView(e,t,r)),commonUtils.showHideLoadingDiv()}})}},scrollView:function(e,t,a){for(var i=parseInt($("#galleryviews").css("height"),10),s=LVCGallery.isSameModule?LVCGallery.canvas_module.indexOf(e):LVCGallery.canvas_module.indexOf(e)+1,l=LVCGallery.canvas_module.length,n=s;a>i&&n<=l-1;i=parseInt($("#galleryviews").css("height"),10)){if(!LVCGallery.isSameModule){Customization.manageViews(LVCGallery.canvas_module[n],!0);break}Customization.getViewsData(e,t,void 0,!0)}},cloneView:function(e,t){Customization.generateView(t,e,(function(){$("#viewId").val("");var e=$("#customizedviewname");e.val(e.val().substring(0,22)+"(1)"),$("#sharingdiv").attr("onclick","Customization.openSharingDiv()"),$("#savecustomizedview").attr("onclick","Customization.saveCustomizedView(this);"),Crm.trackSpotLightAction("Canvas -  Clone Click",{Module:t})}))},getCanvasViewFromStore:function(e){return new Promise((function(t,a){var i=store.peekRecord("canvasview",e);i?t(i):store.findRecord("canvasview",e).then((function(e){e&&e.length?t(e[0]):a()}))}))},fetchViewInfo:function(e,t){var a={action:"/crm/v2/customization/views/"+e.id+"?feature=ListView&module="+e.module,headers:{"X-ZCSRF-TOKEN":csrfParamName+"="+csrfToken},dataType:"json",type:"GET",success:t,followOrder:!0};e.requestObj?e.requestObj.addUp(a):(new crmRequestPool).initiate(a)},loadEditorForEdit:function(e,t){CustomizationLoader.loadJs((function(){Customization.generateView(t,e)})),Crm.trackSpotLightAction("Canvas - Manage View Edit ",{Module:t})},cvviewChange:function(e){$(e).addClass("cv_selected_tick"),e.id=="viewmenu_"+customViewObject.viewid&&($("#customizedViewMenu").hide(),sE())},getCanvasViewList:function(){var e=0;customViewObject.customizedViewList?e=customViewObject.customizedViewList[customViewObject.viewBy].length+1:customViewObject.customizedViewList={created_by_me:[],shared_with_me:[]},(new crmRequestPool).initiate({type:"GET",action:Crm.getCrmBasePath()+"/CustomView.do?action=getCanvasViewsList&module="+customViewObject.module+"&from_range="+e+"&category="+customViewObject.viewBy,dataType:"json",success:function(t){for(var a=t.length,i=[],s=[],l=0;l<a&&i.length<50&&s.length<50;l++){var n=t[l];Crm.userDetails.USER_ID==n.created_by?(i.push(n),customViewObject.customizedViewList.created_by_me.push(n)):(s.push(n),customViewObject.customizedViewList.shared_with_me.push(n))}var o=i.length+s.length!=a;if(0==e&&"created_by_me"==customViewObject.viewBy)customViewObject.hasMoreViews=o,Customization.cvMenu(!0);else{var d={module:customViewObject.module,viewid:customViewObject.viewid,cvid:customViewObject.cvId};if(i.length){d.customizedViews=i,d.category=customViewObject.viewBy;var r=Handlebars.templates.canvasViewsList(d);$("#cv_views_created_by_me").append(r)}if(s.length>0){customViewObject.viewBy="shared_with_me",d.customizedViews=s,d.category=customViewObject.viewBy;r=Handlebars.templates.canvasViewsList(d);$("#cv_views_shared_with_me").append(r).removeClass("dN")}o||$("#hasMoreViews").hide()}}})},handleCustomizationSwitch:function(){customViewObject&&(customViewObject.customizedViewList?this.cvMenu():(customViewObject.viewBy="created_by_me",Customization.getCanvasViewList()))},cvMenu:function(e){var t=$("#customizationIcon"),a=t.offset().left-15,i=t.offset().top+30,s=t.siblings("#cvMenu"),l=s.length?s:$("#customizedViewMenu");if(!l.html()||e){var n={module:customViewObject.module,customizedViewList:customViewObject.customizedViewList,viewid:customViewObject.viewid,cvid:customViewObject.cvId,customizedViewLimit:customViewObject.customizedViewLimit,isCustomizedLimitExceed:customViewObject.isCustomizedLimitExceed,isEngLocale:"en_US,en_GB".indexOf(Crm.userDetails.LOCALE)>-1,hasMoreViews:customViewObject.hasMoreViews};l.html(Handlebars.templates.customizedviewmenu(n))}for(var o in customViewObject.customizedViewList){var d="#cv_views_"+o;$(d+" li").length>0&&$(d).removeClass("dN")}l.css({left:a,top:i}),l.toggle(),sE()},getFaviconUrl:function(e,t){var a,i,s;return e.indexOf("//")>0?(a=e.split("/"),i=e.split("/")[2],s=a[0]+"//"+i+t+".ico"):s=(i=e.split("/")[0]).indexOf("www")<0?"https://www."+i+t+".ico":"https://"+i+t+".ico",s},startTimerForMapping:function(){Customization.mappingStart=new Date},stopTimerMapping:function(e){var t=new Date,a=Utils.getTimeDiff(Customization.mappingStart,t);Customization.mappingTime=Math.floor(a.hours)+"h "+Math.floor(a.minutes)+"m "+Math.floor(a.seconds)+"s";var i=$(".not-mapped-field").length,s=$(".mapped-field").length;Crm.trackSpotLightAction("Canvas - Field Mapping Next Click ",{Module:e,"Mapped Count":s,"UnMapped Count":i,TimeSpent:Customization.mappingTime}),Crm.client_tracking("Canvas - Field Mapping Next Click ")},replaceEmptyImgDC:function(e){e=$(e);for(var t=["src","data-cvsrc","data-fileid","onerror"],a=t.length,i=0;i<a;i++)e.removeAttr(t[i]);e.attr("src",networkUtils.getImageUrl("image_profile_canvas_1d7b1e9_.svg",ResourceConstants.CRM)).addClass("canvasDummyImge cd_people_image")},quickCreatePop:function(e,t,a){if(t){var i=document.querySelector("crux-lookup-filter-modal");i&&i.component?i.component.close():$(".lyteModalClose").click()}var s=objectUtils.getMatchedKey(moduleApiMapping,e.lookup.module.api_name),l=moduleRecordMapping[s].module_name,n=$L("#inputId",$L("#AjaxEditComponent"))[0];n||(n=$L("#inputId",$L("#CanvasAjaxEdit_"+e.id))[0]);var o=Lyte.registeredMixins["crm-detailcanvas-utils"];o.ajaxLookupFldId=void 0,a&&(o.ajaxLookupFldId=e.id);var d=n?n.value:"",r=!!t,c="Crm_"+l+"_"+e.column_name,p=Crm.getCrmBasePath()+"/QuickCreateAction.do?module="+encodeURIComponent(l)+"&searchmodule="+encodeURIComponent(l)+"&fldName="+encodeURIComponent(c)+"&fldId="+encodeURIComponent(c)+"&fldLabel="+encodeURIComponent(l)+"&fldValue="+encodeURIComponent(d)+"&newModel=true";if("Reporting_To"===e.api_name){var u=$L("crm-detailview-canvas")[0].component.getData("record");if(u.Account_Name){var m={};m.accounts=[u.Account_Name],p=p+"&productId="+u.Account_Name.id+"&accDetails="+encodeURIComponent(JSON.stringify(m))+"&accountid="+u.Account_Name.id+"&accountname="+encodeURIComponent(u.Account_Name.name)}}commonUtils.openCustomLookup(p,void 0,"searchCreatePopup",void 0,void 0,void 0,void 0,void 0,(function(t){if(!t){var a=$("#ac-recordname").children().find("input"),i=a.attr("maxlength");d.length>i&&(d=d.substring(0,i)),r||a.val(d),$(".zc_ajax_pop_wrapper").eq(0).addClass("dNImp")}$("#lookupFldId_"+e.id).closest("lyte-drop-box").addClass("dNImp")}))},canvasDvRecordPopup:function(e,t,a,i){e=moduleRecordMapping[e],(store.peekRecord(e.id,t)?Promise.resolve(store.peekRecord(e.id,t)):store.findRecord(e.id,t,{approved:"both",converted:"both"})).then((function(t){var s=t=t[0]?t[0]:t;s.First_Name=t.First_Name,s.Last_Name=t.Last_Name,s.Salutation=t.Salutation;var l=Crm.userDetails.NAME_FORMAT;l=l.split(",");var n=[];l.forEach((function(e){"Salutation"!==e&&(e=e.replace(" ","_")),s[e]&&n.push(s[e])})),n=n.join(" "),Crm.showExistingEmailQuickInfo(n,t.Owner.name,a,e.singular_label,"",i)}))}};function ComponentProcessor(e){this.components=e,this.groupComponents=function(e,t){this.resultObj||(this.resultObj={});for(var a=e.length,i=0;i<a;i++){var s=e[i],l=s.children;l&&l.length?this.groupComponents(l):!t||"Owner_Photo"!=s.data_type&&"Image"!=s.data_type?t&&"Tags"==s.data_type?this.resultObj.Tags?this.resultObj.Tags.push(s):this.resultObj.Tags=[s]:this.resultObj[s._type]?this.resultObj[s._type].push(s):this.resultObj[s._type]=[s]:this.resultObj.Image?this.resultObj.Image.push(s):this.resultObj.Image=[s]}return this.resultObj},this.matchGalleryComponents=function(e,t){this.resultArr||(this.resultArr=[]);for(var a=t.length,i=0;i<a;i++){var s=t[i].children;if(s&&s.length){var l=this.matchGalleryComponents(e,s);l&&this.resultArr.push(l)}t[i].id===e&&t[i]._type&&this.resultArr.push(t[i])}return this.resultArr},this.getAllComponents=function(e,t){for(var a=t.length,i=0;i<a;i++){var s=t[i].children;s&&s.length>0?this.getAllComponents(e,s):e.push(t[i])}},this.removeUnwantedKeys=function(e){delete e.field_label,delete e.display_value,delete e.ui_type,delete e.componentid,delete e.COLUMNNAME,delete e.FIELDID,delete e.FIELDLABEL,delete e.UITYPE,delete e.responseIndex}}var LVCGallery={galleryTypes:[{name:I18n.getMsg("crm.canvas.gallary.people"),display_name:I18n.getMsg("crm.canvas.gallary.people")},{name:I18n.getMsg("crm.label.org"),display_name:I18n.getMsg("crm.label.org")},{name:"Deal",display_name:"Deals"},{name:I18n.getMsg("crm.canvas.gallary.product"),display_name:I18n.getMsg("crm.canvas.gallary.product")},{name:"HelpDesk",display_name:I18n.getMsg("crm.canvas.gallary.helpdesk")},{name:"RealEstate",display_name:I18n.getMsg("Real Estate")},{name:I18n.getMsg("crm.canvas.gallary.automobile"),display_name:I18n.getMsg("crm.canvas.gallary.automobile")},{name:"Others",display_name:"Others"}],canvas_module:[],isSameModule:!1,moduleLength:{},selectedGalleryType:"",liveData:{},cache:{gallery:{}},render:function(e,t){if(Crm.userDetails.permissions.Crm_Implied_Manage_CustomViews||Crm.userDetails.permissions.Crm_Implied_Customize_Zoho_CRM){LVCGallery.moduleLength={};for(var a=[],i=Object.keys(moduleApiMapping).length,s=0,l=0;s<i;s++)Object.keys(t.views)[l]===moduleApiMapping[Object.keys(moduleApiMapping)[s]]&&(a.push(Object.keys(moduleApiMapping)[s]),l++,s=0);LVCGallery.moduleLength=t.views,LVCGallery.renderSkeleton(e,a),LVCGallery.renderAllType(e,"all"),LVCGallery.fixHeight()}else renderingUtils.displayPermissionDenied()},renderAllType:function(e,t){if(LVCGallery.selectedGalleryType===t&&$(".galleryitem").length>0)$("#cvgalleryrightpanel").scrollTop(0);else{LVCGallery.changeGalleryType(t);var a=$("#galleryviews"),i="<span class='f18 crm-font-bold loadingspan'>"+I18n.getMsg("crm.load")+"</span>";a.html(i),"all"==t?LVCGallery.switchGalleryType(e,LVCGallery.galleryTypes[0].name):(Customization.viewType=null,LVCGallery.switchGalleryType(e,LVCGallery.canvas_module[0],!0)),LVCGallery.bindScrollEvent()}},renderSkeleton:function(e,t){var a=[];LVCGallery.canvas_module=[],a=t;for(var i=crmTab.tabList.length,s=document.querySelector("crm-tab"),l=0;l<i;l++)if(a.contains(crmTab.tabList[l])&&crmTab.tabList[l]!=e){if(!s.component.getData("tabModules").filter((function(e){return e.api_name===crmTab.tabList[l]})).length)continue;LVCGallery.canvas_module.push(crmTab.tabList[l])}var n={module:e,types:LVCGallery.galleryTypes,isOthers:!!LVCGallery.canvas_module.length},o=Handlebars.templates.customizationgallery(n);$("#show").html(o)},changeGalleryType:function(e){var t=$("#cvgalleryleftpanel");t.find(".LVCGalMenu").removeClass("LVCGalAct"),t.find("#gallery-type-"+e).addClass("LVCGalAct"),LVCGallery.selectedGalleryType=e,$("#cvgalleryrightpanel").scrollTop(0)},switchGalleryType:function(e,t,a){if("all"!==LVCGallery.selectedGalleryType&&!a){var i="<span class='f18 crm-font-bold'>"+I18n.getMsg("crm.load")+"</span>";$("#galleryviews").html(i)}if(a)if(LVCGallery.isSameModule){var s=Customization.getLiveData(t),l=new listViewHandler(s);Customization.getViewsData(t,l,void 0,!0)}else Customization.manageViews(t,!0);else{var n=LVCGallery.getGalleryObj(t);n?LVCGallery.renderGalleryContent(n,t):LVCGallery.fetchGalleryContent(e,t).then((function(e){e=JSON.parse(e),LVCGallery.cacheGalleryObj(e),LVCGallery.renderGalleryContent(e,t)}))}},renderGalleryContent:function(e,t){commonUtils.showHideLoadingDiv();var a=$("#galleryviews"),i=e[t],s=i.length,l="<div class='mB10 fs LVCGalCategory' data-gal-type='"+t+"'><span class='f16  crm-font-bold color_6a mR5'>"+t+"</span><span id='listofpeoplecount'>"+s+"</span></div>";"all"!==LVCGallery.selectedGalleryType?(a.html(l),$("#cvgalleryrightpanel").off("scroll")):($(".LVCGalCategory").length||a.empty(),a.append(l));for(var n=0;n<s;n++){var o=i[n];o.id=t+n,a.append(Handlebars.templates.customizationgalleryrow({id:o.id})),$("#customizedholder_"+t+n).html(jSortable.getHtml(o)).attr("id","rendered_"+t+n).data("view",JSON.parse(JSON.stringify(o))).css("pointer-events","none")}var d=$("#cvgalleryrightpanel"),r=d.scrollTop(),c=d.outerHeight()+1,p=d[0].scrollHeight;"all"===LVCGallery.selectedGalleryType&&r+c>=p&&LVCGallery.renderNextGalleryContent(d)},fixHeight:function(){var e=$("#cvgalleryleftpanel"),t=$("#cvgalleryrightpanel"),a=e.offset().top+50;e.height(renderingUtils.windowHeight-a-40),t.height(renderingUtils.windowHeight-a-40)},fetchGalleryContent:function(e,t){return new Promise((function(a,i){(new crmRequestPool).initiate({type:"GET",action:Crm.getCrmBasePath()+"/CustomView.do?action=getCustomisedViewGallery&module="+e+"&type="+t,success:function(e){a(e)}})}))},bindScrollEvent:function(){$("#cvgalleryrightpanel").on("scroll",$L.debounce((function(){var e=$("#cvgalleryrightpanel"),t=e.scrollTop(),a=e.outerHeight()+1,i=e[0].scrollHeight,s=e.attr("data-load");t>0&&t+a>=i&&"loading"!=s&&LVCGallery.renderNextGalleryContent(e)})))},renderNextGalleryContent:function(e){e.attr("data-loading");var t,a="",i=$(".LVCGalCategory"),s=i.length-1,l=i.eq(s).data("gal-type"),n=$("#cvgalleryrightpanel");if(LVCGallery.canvas_module.contains(l)){var o=LVCGallery.isSameModule?LVCGallery.canvas_module.indexOf(l):LVCGallery.canvas_module.indexOf(l)+1;if(void 0===(a=LVCGallery.canvas_module[o]))return void n.off("scroll");t=!0}else for(var d=LVCGallery.galleryTypes.length,r=0;r<d;r++)if(LVCGallery.galleryTypes[r].name===l){if(r!==d-1){a=LVCGallery.galleryTypes[r+1].name;break}a=LVCGallery.canvas_module[0],t=!0}if(null!=a&&""!==a){var c=customViewObject.module||"Home";LVCGallery.switchGalleryType(c,a,t)}else n.off("scroll"),e.attr("data-load")},getLiveData:function(e){var t="";return $("[name=listviewrow]").map((function(e,a){t+=$(a).attr("id")+","})),commonUtils.showHideLoadingDiv(!0),new Promise((function(a,i){(new crmRequestPool).initiate({type:"GET",action:Crm.getCrmBasePath()+"/ShowDetails.do?fetchCustomizedViewSampleData=true&module="+e+"&entityIds="+t,success:function(e){commonUtils.showHideLoadingDiv(),a(e)},error:function(e){"403"!=e.status&&"400"!=e.status||renderingUtils.displayPermissionDenied(),commonUtils.showHideLoadingDiv()}})}))},cacheGalleryObj:function(e){$.extend(LVCGallery.cache.gallery,LVCGallery.cache.gallery,e)},getGalleryObj:function(e){if(LVCGallery.cache.gallery[e]){var t={};return t[e]=LVCGallery.cache.gallery[e],t}},moduleFieldMapping:function(e,t){for(var a=t.length,i=0;i<a;i++){var s=t[i].children;s&&s.length&&LVCGallery.moduleFieldMapping(e,s),["label","separator","icon"].indexOf(t[i]._type)>-1||(t[i].id?t[i].display_value=$("#rendered_"+e+" [data-rowcomponentid="+t[i].id+"]").html():t[i].display_value=$("#rendered_"+e+" #upComingActionstd").html())}},renderFieldMapping:function(e,t){if(t){var a=Customization.getCacheViewInfo(e);LVCGallery.moduleFieldMapping(e,a.components)}else a=$("#rendered_"+e).data("view");if(a){t=$("#gallerymodule").val();LVCGallery.getLiveData(t).then((function(i){LVCGallery.liveData[t]=i,new listViewHandler(i).addSampleData(void 0,0);var s=i.customizationJSON.components,l={galleryComponents:$.map($("#galleryitem_"+e).find(".field_valueHolder"),(function(e){return $(e).data("component")})),groupedComponents:(new ComponentProcessor).groupComponents(s,!0),viewId:e};$("#manage-gallery-cv").hide(),$("#field-mappingDiv-cv").show(),jSortable.galleryCreateNode(a.grid_size),jSortable.cdGalleryViewEdit(a);var n=$("#grid3");if(0==a.row_size){var o=$u.max(a.components,(function(e){return e.ui.position.startY+e.ui.position.height})),d=o.ui.position.startY+o.ui.position.height;a.row_size=d}n.css({width:a.grid_size,height:a.row_size});var r=n.find(".grid-stack-item");jSortable.resizeHeight(r);var c=Handlebars.templates.customizationfieldmapping(l);n.find(".field_valueHolder").each((function(){var e=$(this).parent(".cd_mapping_field");e.length?e.addClass("not-mapped-field cvmapping-field"):$(this).addClass("not-mapped-field cvmapping-field")})),$(".cvmapping-field").each((function(e,t){if(0==$(t).find(".cd_people_image").length){var a=$(t).width();$(t).css({width:a,overflow:"hidden"})}})),$("#saveGallery").attr("onclick","Customization.checkValidMapping(this)"),thirdPartyUtils.bindSelect2("#cvfieldMappingdropdown select"),$("#cvfieldMappingdropdown").remove(),$("body").append(c),Customization.fieldmappingBindClick(),Customization.startTimerForMapping(),Crm.trackSpotLightAction("Canvas - Gallery Click",{Gallery:e,Module:t}),Crm.client_tracking("Canvas - Gallery Click")}))}},bindCanvasScrollEvent:function(){$("#canvasview-tablescroll").on("scroll",$L.debounce((function(){(new listViewHandler).loadRecordImages()}),100))}},CrmFieldConstants={OWNER_PHOTO:0,TEXTFIELD:1,WEBSITE:21,TWITTER:22,DATE:24,DATE1:14,DATE2:24,DATE_LONG:202,EMAIL:25,DATE3:333,TAGS:209,PHONE:33,DECIMAL:38,IMAGE:66,IMAGE1:67,IMAGE2:68,MULTIPICKLIST:100,DATETIME:200,BOOLEAN_YES:300,BOOLEAN_NO:301,FORMULA:116,DATETIME_EVENT_START:786,TEXTAREA:3,CUSTOMTEXTAREA:110,TERRITORY:999,LAYOUT:208,WIZARD:207,TEXTAREA1:110,TEXT:1e3,PICK_LIST:2,STAGE:26},CrmField=function(e,t){this.fromGallery=t,this.fieldMetaJson=e,this.fieldId=this.fieldMetaJson.id,this.defKey=this.fieldId+"_defaultvalue",this.defValString="{{"+this.fieldId+"_defaultvalue}}",this.defValEncodedForAttribute=this.getEncodedKey(this.defKey,2),this.defValEncodedForURL=this.getEncodedKey(this.defKey,3),this.defValEncodedForJS=this.getEncodedKey(this.defKey,4)};CrmField.prototype.getHTML=function(){var e="";switch(this.fieldMetaJson.UITYPE){case CrmFieldConstants.OWNER_PHOTO:e+=this.handleOwnerPhoto();break;case CrmFieldConstants.EMAIL:e+=this.handleEmailField();break;case CrmFieldConstants.WEBSITE:e+=this.handleWebsiteField();break;case CrmFieldConstants.TWITTER:e+=this.handleTwitterField();break;case CrmFieldConstants.PHONE:e+=this.handlePhoneField();break;case CrmFieldConstants.TAGS:e+=this.handleTagFields();break;case CrmFieldConstants.IMAGE:case CrmFieldConstants.IMAGE1:case CrmFieldConstants.IMAGE2:e+=this.handleImageFields();break;case CrmFieldConstants.BOOLEAN_YES:case CrmFieldConstants.BOOLEAN_NO:e+=this.handleBooleanFields();break;case CrmFieldConstants.FORMULA:e+=this.handleFormulaFields();break;case CrmFieldConstants.DATETIME:case CrmFieldConstants.DATETIME_EVENT_START:case CrmFieldConstants.DATE1:case CrmFieldConstants.DATE2:case CrmFieldConstants.DATE3:e+=this.handleDateTimeFields();break;case CrmFieldConstants.TEXTAREA:case CrmFieldConstants.CUSTOMTEXTAREA:e+=this.handleTextAreaField();break;case CrmFieldConstants.STAGE:case CrmFieldConstants.PICK_LIST:e+=this.handlePickListField();break;default:e+=this.handleTextField()}return e},CrmField.UITYPES={FILE_UPLOAD:555,IMAGE_UPLOAD:556,OWNER:8,USERLOOKUP:221,PRODUCT_HANDLER:55,SINGLE_LINE:1,DATE:24,DATE_LONG:202,DATETIME:786,DATE_TIME2:333,END_DATE_TIME:14,MULTI_LINE_CF:110,NUMERIC_FIELD:32,PHONE:33,PERCENT:34,PRICING_DETAILS:51,LONG_INTEGER:52,WEBSITE:21,EMAIL:25,FAX:35,CURRENCY:36,DECIMAL:38,MULTI_PICK_LIST:100,GLOBAL_TAX:96,PICK_LIST:2,SKYPE_FIELD:37,TEXT_FIELD:11,TWITTER:22,FIRST_NAME:27,LAST_NAME:127,TASK_SUBJECT:62,TEXT_AREA:3,DATE_TIME1:30,LONG_DATE_TIME:333,DATE_TIME2:14,DATE_TIME_LONG:333,CREATED_TIME:200,CREATED_BY:20,AGGREGATE_FIELD:117,BIG_DECIMAL:40,STAGE:26,RECORD_CURRENCY:39,ACCOUNT_NAME_LOOKUP:4,CAMPAIGN_NAME_LOOKUP:5,PRODUCT_NAME_LOOKUP:6,CONTACT_LOOKUP:7,VENDOR_NAME_LOOKUP:9,POTENTIAL_ID:10,SALESORDER_ID:12,CONTACT_ID:13,QUOTE_ID:15,ROLE_NAME:16,MULTI_MODULE_LOOK_UP_ENTITY:132,LOOK_UP_ENTITY:133,SYSTEM_SINGLE_LOOK_UP_ENTITY:135,MULTISELECT_LOOK_UP:444,MULTISELECT_USERLOOKUP:445,BOOLEAN_DEF:300,BOOLEAN_DEF_NOT:301,CURRENCY_ROUND_OFF:143,CURRENCY_ROUND_DOWN:144,CURRENCY_ROUND_UP:145,LAYOUT:208,WIZARD:207,TAGS:209,AUTONUMBER:111,SUBFORMS:500,OWNER_PHOTO:0,IMAGE:66,IMAGE1:67,IMAGE2:68,TEXTAREA:3,CUSTOMTEXTAREA:110,COMMENTCONTENTS:99,PHOTO_FILEID:66,PROFILE_PIC:67,PRODUCT_IMAGE:68,TAGMODULEREFID:209,SUBFORM:500,LINKINGMXN1:500,ADD_PARTICIPANT:41,FORMULA:116,LINE_ITEM_DOUBLE_CURRENCY:77,RECURRING_EVENTS:123,LAYOUT_LOOKUP:136,SERVICE_DURATION:80,SERVICE_TIMING:82,MULTI_DATE_SELECT:81,IMAGE_UPLOAD:556,LINETAX:47,INPUT_BOX:19,ADWORD_FIELDS:31,BIG_INTEGER:46,PRODUCT_DETAILS:50,PLAIN_TEXT_DYNAMIC_FIELDS:60,ADWORD_AD_FIELD:103,EVENT_REMINDER:104,DATA_PROCESSING_BASIS:134,MODULE_LIST:137},CrmField.wizardIncludedFieldUiTypes=[CrmField.UITYPES.OWNER,CrmField.UITYPES.USERLOOKUP,CrmField.UITYPES.PRODUCT_HANDLER,CrmField.UITYPES.SINGLE_LINE,CrmField.UITYPES.DATE,CrmField.UITYPES.DATE_LONG,CrmField.UITYPES.DATETIME,CrmField.UITYPES.DATE_TIME1,CrmField.UITYPES.DATE_TIME2,CrmField.UITYPES.DATE_TIME_LONG,CrmField.UITYPES.MULTI_LINE_CF,CrmField.UITYPES.NUMERIC_FIELD,CrmField.UITYPES.PHONE,CrmField.UITYPES.PERCENT,CrmField.UITYPES.FAX,CrmField.UITYPES.LONG_INTEGER,CrmField.UITYPES.WEBSITE,CrmField.UITYPES.EMAIL,CrmField.UITYPES.STAGE,CrmField.UITYPES.CURRENCY,CrmField.UITYPES.DECIMAL,CrmField.UITYPES.MULTI_PICK_LIST,CrmField.UITYPES.PICK_LIST,CrmField.UITYPES.SKYPE_FIELD,CrmField.UITYPES.TEXT_FIELD,CrmField.UITYPES.TWITTER,CrmField.UITYPES.FIRST_NAME,CrmField.UITYPES.LAST_NAME,CrmField.UITYPES.TASK_SUBJECT,CrmField.UITYPES.TEXT_AREA,CrmField.UITYPES.DATE_TIME1,CrmField.UITYPES.AGGREGATE_FIELD,CrmField.UITYPES.BIG_DECIMAL,CrmField.UITYPES.RECORD_CURRENCY,CrmField.UITYPES.ACCOUNT_NAME_LOOKUP,CrmField.UITYPES.CAMPAIGN_NAME_LOOKUP,CrmField.UITYPES.PRODUCT_NAME_LOOKUP,CrmField.UITYPES.CONTACT_LOOKUP,CrmField.UITYPES.VENDOR_NAME_LOOKUP,CrmField.UITYPES.POTENTIAL_ID,CrmField.UITYPES.CONTACT_ID,CrmField.UITYPES.QUOTE_ID,CrmField.UITYPES.ROLE_NAME,CrmField.UITYPES.LOOK_UP_ENTITY,CrmField.UITYPES.BOOLEAN_DEF,CrmField.UITYPES.BOOLEAN_DEF_NOT,CrmField.UITYPES.CURRENCY_ROUND_OFF,CrmField.UITYPES.CURRENCY_ROUND_DOWN,CrmField.UITYPES.CURRENCY_ROUND_UP,CrmField.UITYPES.LAYOUT,CrmField.UITYPES.AUTONUMBER,CrmField.UITYPES.SUBFORM,CrmField.UITYPES.STAGE,CrmField.UITYPES.FILE_UPLOAD,CrmField.UITYPES.IMAGE_UPLOAD],CrmField.UITYPEHINT={8:I18n.getMsg("crm.field.label.user.lookup"),221:I18n.getMsg("crm.field.label.user.lookup"),55:I18n.getMsg("crm.field.label.user.lookup"),1:I18n.getMsg("crm.field.label.single.line"),24:I18n.getMsg("crm.field.label.date"),202:I18n.getMsg("crm.field.label.date"),786:I18n.getMsg("crm.field.label.date.time"),30:I18n.getMsg("crm.field.label.date.time"),14:I18n.getMsg("crm.field.label.date.time"),333:I18n.getMsg("crm.field.label.date.time"),110:I18n.getMsg("crm.field.label.text.area"),32:I18n.getMsg("crm.field.label.integer"),33:I18n.getMsg("crm.field.label.phone"),34:I18n.getMsg("crm.field.label.percentage"),35:I18n.getMsg("crm.field.label.phone"),52:I18n.getMsg("crm.field.label.long.integer"),21:I18n.getMsg("crm.field.label.url"),25:I18n.getMsg("crm.field.label.email"),26:I18n.getMsg("crm.value.label.option1"),36:I18n.getMsg("crm.field.label.currency"),38:I18n.getMsg("crm.field.label.decimal"),100:I18n.getMsg("crm.value.label.option1"),2:I18n.getMsg("crm.value.label.option1"),37:I18n.getMsg("crm.field.label.single.line"),11:I18n.getMsg("crm.field.label.single.line"),22:I18n.getMsg("crm.field.label.single.line"),27:I18n.getMsg("crm.field.label.single.line"),127:I18n.getMsg("crm.field.label.single.line"),62:I18n.getMsg("crm.field.label.text.area"),3:I18n.getMsg("crm.field.label.text.area"),117:I18n.getMsg("crm.subform.aggregate"),40:I18n.getMsg("crm.field.label.decimal"),39:I18n.getMsg("crm.field.label.currency"),4:I18n.getMsg("crm.field.label.lookup"),5:I18n.getMsg("crm.field.label.lookup"),6:I18n.getMsg("crm.field.label.lookup"),7:I18n.getMsg("crm.field.label.lookup"),9:I18n.getMsg("crm.field.label.lookup"),10:I18n.getMsg("crm.field.label.long.integer"),13:I18n.getMsg("crm.field.label.lookup"),15:I18n.getMsg("crm.field.label.long.integer"),16:I18n.getMsg("crm.field.label.single.line"),133:I18n.getMsg("crm.field.label.lookup"),300:I18n.getMsg("crm.value.label.choice2"),301:I18n.getMsg("crm.value.label.choice2"),143:I18n.getMsg("crm.field.label.currency"),144:I18n.getMsg("crm.field.label.currency"),145:I18n.getMsg("crm.field.label.currency"),111:I18n.getMsg("crm.field.label.auto.number"),555:I18n.getMsg("crm.label.widgets.fileupload"),556:I18n.getMsg("crm.image.name")},CrmField.prototype.getEncodedKey=function(e,t){var a="{{"+e+"}}";return 2===t?a="{{encodeForHTMLAttribute "+e+"}}":3===t?a="{{encodeURL "+e+"}}":4===t&&(a="{{encodeJS "+e+"}}"),a},CrmField.prototype.handleTextField=function(){return"{{#unless "+this.fieldId+"_skipencoding}}"+this.defValString+"{{else}}{{{"+this.defKey+"}}}{{/unless}}"},CrmField.prototype.handleTextAreaField=function(){return"{{#canvasEmptyCheck this '"+this.fieldId+"'}}<pre style='word-wrap: break-word; white-space:pre-wrap;'>{{#unless "+this.fieldId+"_skipencoding}}"+this.defValString+"{{else}}{{{"+this.defKey+"}}}{{/unless}}</pre>{{/canvasEmptyCheck}}"},CrmField.prototype.handlePhoneField=function(){if(!0!==this.fieldMetaJson.donotshow||Crm.userDetails.CLIENT_ACCOUNT){var e="{{#canvasEmptyCheck this '"+this.fieldId+"'}}{{#if ISCALLALLOWED}}";if(!0===this.fieldMetaJson.outbound)e+="<span class='phoneRtl cd_style_inherit' style='min-width:100%'>"+this.defValString+"<a href='javascript:;' class='cd_style_inherit calliconOuter' onmouseover='CTIAPI.showCallButtonlabel(this)' onmouseout=\"CTIAPI.hideCallButtonlabel(this)\" onclick=\"sE();ctiApiNotifier.click2Call('"+this.defValEncodedForJS+"','"+Crm.userDetails.ZGID+"','"+Crm.userDetails.USER_ID+"','{{ENTITYID}}','','{{MODULE}}','{{ENTITYNAME}}')\"><i class='callIcon'></i><span id='calllabel1'>"+I18n.getMsg("Call")+"</span></a></span>";else if(Crm.userDetails.ZPBENABLED){e+="<span class='phoneRtl cd_style_inherit' style='min-width:100%'><zpb-phone number='"+this.defValString+"' module='{{MODULE}}' recordid='{{ENTITYID}}' callbackparamfn=asyncFn(crmCallsNew.getClick2CallPromise,'{{ENTITYID}}','{{MODULE}}','{{ENTITYNAME}}')>"+this.defValString+"</zpb-phone></span>"}else e+="<span onmouseover='editmouseover(this, \"phone\");' onmouseout='editmouseout(this, \"phone\");' class='phoneRtl cd_style_inherit' style='min-width:100%'>"+this.defValString+"<a style='visibility:hidden;' class='ico-call3 phoneRtl cd_style_inherit' title='"+I18n.getMsg("crm.phoneNo.Link.Title")+"' href='skype:"+this.defValEncodedForJS+"?call' onclick='sE();'></a></span>";return e+="{{else}}<span onmouseover='editmouseover(this, \"phone\");' onmouseout='editmouseout(this, \"phone\");' class='phoneRtl cd_style_inherit' style='min-width:100%'>"+this.defValString+"</span>{{/if}}{{/canvasEmptyCheck}}"}return"{{#canvasEmptyCheck this '"+this.fieldId+"'}}<span onmouseover='editmouseover(this, \"phone\");' onmouseout='editmouseout(this, \"phone\");' class='phoneRtl cd_style_inherit' style='min-width:100%'>"+this.defValString+"</span>{{/canvasEmptyCheck}}"},CrmField.prototype.handleEmailField=function(){var e="";return this.fromGallery||(e+='href="mailto:'+this.defValString+'" '),"{{#canvasEmptyCheck this '"+this.fieldId+"'}}<a class='cd_style_inherit'"+e+">"+this.defValString+"</a>{{/canvasEmptyCheck}}"},CrmField.prototype.handleWebsiteField=function(){var e='href ="'+this.getEncodedKey(this.fieldId+"_href",1)+'"';return"{{#canvasEmptyCheck this '"+this.fieldId+'\'}}<a class=\'cd_style_inherit\' data-cid="dummy" class="cd_style_inherit" '+e+' target="_blank">'+this.defValString+"</a>{{/canvasEmptyCheck}}"},CrmField.prototype.handleTwitterField=function(){var e=RebrandLinkUtil.getProperty("TW_URL");return"{{#canvasEmptyCheck this '"+this.fieldId+"'}}<a class='cd_style_inherit link' data-cid='dummy' href='"+e+"/"+this.defValEncodedForURL+"' target='_blank' >"+this.defValString+"</a>{{/canvasEmptyCheck}}"},Handlebars.registerHelper("processTags",(function(e,t){return e=""==e?[]:e,crmListView.displayTags(e,t,"p0")})),Handlebars.registerHelper("split_color",(function(e){return CrmTags.gettagname(e,"tagcolor")})),Handlebars.registerHelper("color_number",(function(e){var t=CrmTags.gettagname(e,"tagcolor");return CrmTags.color_number(t)})),Handlebars.registerHelper("split_name",(function(e){return CrmTags.gettagname(e,"tagname")})),CrmField.prototype.handleTagFields=function(){return Customization.isBuilder||customViewObject.fluidWidth?"<ul class='listview_taglists p0 m0 dIB'>{{#each "+this.fieldId+"_defaultvalue}}<li class='tagElementList f14 bR2 dIB bdr1px cxTagBgSpan cxTagCol{{color_number this}}' style='background-color:{{split_color this}}'> {{split_name this}}</li>{{/each}}</ul>":"{{{processTags "+this.fieldId+"_defaultvalue "+this.fieldMetaJson.ui.position.width+"}}}"},CrmField.prototype.handleDateTimeFields=function(){return"{{#canvasEmptyCheck this '"+this.fieldId+"'}}<span class='cd_style_inherit'>"+this.defValString+"</span>{{/canvasEmptyCheck}}"},CrmField.prototype.handleBooleanFields=function(){return" {{#ifEquals "+this.defKey+' "true"}}<img src="'+Search.spacerImg+'" class="yes"/>{{else}}<img src="'+Search.spacerImg+'" class="no-new" width="9" height="9"/>{{/ifEquals}}'},CrmField.prototype.handleFormulaFields=function(){return"boolean"===this.fieldMetaJson.RETURNTYPE?this.handleBooleanFields():"datetime"===this.fieldMetaJson.RETURNTYPE?this.handleDateTimeFields():this.handleTextField()},CrmField.prototype.handleImageFields=function(){return'{{#if hasZiaVisionApproval}}<img onerror="emptyImgRemove(this);" id="img_{{ENTITYID}}" lt-prop-title="{{getVisionTitle approveStatus}}" src="{{getVisionImgSrc approveStatus}}" class="cd_people_image h100p w100p"/>{{else}}<img onerror="emptyImgRemove(this);" id="img_{{ENTITYID}}" data-cvsrc="'+Crm.getCrmBasePath()+'/EntityImageAttach.do?action_module={{MODULE}}&entityId={{ENTITYID}}&actionName=readImage&encfileId=" data-fileid="'+this.defValString+'" class="cd_people_image entityImg"/>{{/if}}'},CrmField.prototype.handleOwnerPhoto=function(){return"<img onerror='emptyImgRemove(this);' data-cvsrc='"+Crm.getCrmBasePath()+"/EntityImageAttach.do?action_module=Users&entityId={{"+this.fieldId+"_USERID}}&actionName=readImage&fileid=' data-fileid='{{"+this.fieldId+"_USERID}}' class='cd_people_image'/>"},CrmField.prototype.handlePickListField=function(){if(this.fieldMetaJson.colorcode_enabled){var e={enable_colour_code:!0,pick_list_values:this.fieldMetaJson.picklistmap};return"{{#ifNotEquals "+this.defKey+' ""}}<span class="colorAppliedPicklist" data-zcqa="colorcode_value_{{ENTITYID}}_'+this.fieldId+'" style="{{getColorCodeStyleForPickList this \''+this.fieldId+"' '"+$ESAPI.encoder().encodeForHTML(JSON.stringify(e))+"'}}\">{{#unless "+this.fieldId+"_skipencoding}}"+this.defValString+"{{else}}{{{"+this.defKey+"}}}{{/unless}}</span>{{/ifNotEquals}}"}return"{{#unless "+this.fieldId+"_skipencoding}}"+this.defValString+"{{else}}{{{"+this.defKey+"}}}{{/unless}}"},Handlebars.registerHelper("getColorCodeStyleForPickList",(function(e,t,a){var i=store.peekRecord("field",t);if(i&&!0===i.enable_colour_code&&a)return getPicklistStyleObj(e[t+"_defaultvalue"],i.pick_list_values)})),CrmField.prototype.getContext=function(){return this.context},CrmField.prototype.setContext=function(e){this.context=e},CrmField.getDataType=function(e){var t="";switch(e){case 32:case 98:t="integer";break;case 24:case 202:t="date";break;case 300:case 301:t="boolean";break;case 34:t="percent";break;case 38:case 40:case 343:t="double";break;case 52:case 41:case 208:case 207:t="bigint";break;case 111:t="autonumber";break;case 21:t="website";break;case 1:case 11:case 22:case 27:case 50:case 127:case 35:case 37:case 51:case 123:case 1234:case 99:case 999:case 31:case 103:case 62:case 19:case 17:case 1e3:t="text";break;case 77:case 36:case 143:case 144:case 145:t="currency";break;case 33:t="phone";break;case 25:t="email";break;case 2:case 26:case 39:t="picklist";break;case 786:case 333:case 30:case 14:case 200:t="datetime";break;case 4:case 5:case 6:case 7:case 9:case 10:case 12:case 13:case 15:case 55:case 135:case 133:t="lookup";break;case 8:t="ownerlookup";break;case 100:case 18:t="multiselectpicklist";break;case 110:case 3:t="textarea";break;case 116:t="formula";break;case 221:t="userlookup";break;case 132:t="multi_module_lookup"}return t};var componentHandler=function(){};componentHandler.prototype.handleCustomButton=function(e){var t=' data-params=\'{"buttonId" : "'+e.key+'", "entityId" : "{{ENTITYID}}", "moduleName" : "{{MODULE}}", "position" : "eachRecord" , "buttonName" : "'+$ESAPI.encoder().encodeForHTMLAttribute(e.name)+'", "buttonDesc": "'+$ESAPI.encoder().encodeForHTMLAttribute(e.desc)+"\"}' ";return'<input type="button" id="eachRecord" class="newbutton outlinegreenlight" onclick="CustomButtonJSObjectInit.execute(\''+e.key+"','eachRecord','{{ENTITYID}}','','{{MODULE}}');sE();\" "+t+" value='"+$ESAPI.encoder().encodeForHTML(e.name)+"' />"},componentHandler.prototype.handleCustomLink=function(e,t,a){if(e.ignore)return"";var i="<span class='detLftLinkIcon svgIconsImg'></span>";"false"===e.error&&(i='<img class="" style= "vertical-align: middle;margin-right: 5px;width: 16px;height: 16px;border: 0;" src='+$ESAPI.encoder().encodeForHTMLAttribute(e.faviconurl)+' onerror="detailView.showCustomLinkFavoriteImg(this);"/>');var s="";if(e.field_label){var l="";a||(l="onclick=\"evalCustomLink('"+e.id+"', '{{encodeJS MODULE}}','{{encodeJS ENTITYID}}');sE();\""),s='<a class="fontsmooth cP p10 cd_style_inherit" title="'+$ESAPI.encoder().encodeForHTMLAttribute(e.field_label)+'" href="javascript:;"'+l+" >"+i+$ESAPI.encoder().encodeForHTML(e.field_label)+"</a>"}return s},componentHandler.prototype.handleUpcomingActivity=function(){return'<div class="dIFlex">','<span class="fL w20 h18 {{getActivityIcon upcomingTime.seType}}"></span>',"<span class=\"fL dIB pR0 pointer lh16 mT2 h_duedate {{upcomingTime.class}}\" onmouseover=\"crmListView.showActivityDetails(this, '{{upcomingTime.activityId}}', '{{encodeJS upcomingTime.subject}}', '{{upcomingTime.seType}}');\" onmouseout=\"$('#actDetailsDiv,#wf_tooltip').hide();\">{{upcomingTime.value}}</span>","</div>","{{/if}}</span>","<span id='upComingActionstd'>{{#if upcomingTime}}<div class=\"dIFlex\"><span class=\"fL w20 h18 {{getActivityIcon upcomingTime.seType}}\"></span><span class=\"fL dIB pR0 pointer lh16 mT2 h_duedate {{upcomingTime.class}}\" onmouseover=\"crmListView.showActivityDetails(this, '{{upcomingTime.activityId}}', '{{encodeJS upcomingTime.subject}}', '{{upcomingTime.seType}}');\" onmouseout=\"$('#actDetailsDiv,#wf_tooltip').hide();\">{{upcomingTime.value}}</span></div>{{/if}}</span>"},componentHandler.prototype.getComponentHTML=function(e,t,a){if(e.ignore)return"";switch(e._type){case"field":var i=new CrmField(e,a);return i.setContext("listview"),i.getHTML();case"button":return this.handleCustomButton(e,a);case"link":return this.handleCustomLink(e,t,a);case"upcoming_activity":return this.handleUpcomingActivity()}};var listViewHandler=function(e){if(!e)return this;this.customViewJSON=e,this.customizationJSON=this.customViewJSON.customizationJSON};listViewHandler.prototype=new componentHandler,listViewHandler.prototype.getViewObject=function(){return this.customizationJSON},listViewHandler.prototype.getCustomViewObj=function(){return this.customViewJSON},listViewHandler.prototype.isInternalComponent=function(e){return["label","separator","icon"].indexOf(e._type)>-1},listViewHandler.prototype.renderListView=function(){this.preProcess(),this.getSingleRow(),$("#defaultCanvas").text(this.getViewObject().name)},listViewHandler.prototype.getSingleRow=function(e,t){for(var a=this.getViewObject(),i=jSortable.getHtml(a),s=$(i),l=s.find("[data-component]"),n=l.length,o=0;o<n;o++){var d=l.eq(o),r=d.data("component");if(!this.isInternalComponent(r)){var c=this.getComponentHTML(r,a.module,t);d.html(c)}}var p=Handlebars.compile(s.outerHTML()),u=this.getCustomViewObj();u.body.length||u.body.push({CONTENT:"",ENTITYID:"-1",MODULE:u.module,approveStatus:"1",recordInsideProcess:"0"});var m=u.fromIndex,g=u.toIndex;for(o=m-1;o<g;o++){var v=u.body[o];v&&(v.recordNum=o+1,this.processDataForComponents(v,this.getViewObject().components,t),this.baseDiv&&this.baseDiv.append("<div id='customizedholder_"+v.ENTITYID+"'></div>"),$("#customizedholder_"+v.ENTITYID).html(p(v)))}t&&($(".mcbuttonGroup").remove(),$(".manageview-list-top").remove()),null!=u.body[0]&&"-1"===u.body[0].ENTITYID&&u.body.pop(),"manageView"!=e&&setTimeout((function(){(new listViewHandler).loadRecordImages()}),1e3)},listViewHandler.prototype.loadRecordImages=function(){var e=$("[data-cvsrc]");if(e.length&&!(e.eq(0).parents("#editor_container").length>0))for(var t=$("[name=listviewrow]").eq(0).outerHeight(),a=$("#canvasview-tablescroll"),i=(a=a.length>0?a:$("#manageviews")).position().top,s=i+a.outerHeight(),l=e.length,n=0;n<l;n++){var o=e.eq(n),d=o.parents("[name=listviewrow]").position();if(d.top+t>0&&d.top>=i&&d.top<=s){var r=o.attr("data-fileid");""===r?emptyImgRemove(o):o.attr("src",Crm.getPortalURL(o.attr("data-cvsrc")+r)),o.removeAttr("data-cvsrc")}}},listViewHandler.prototype.loadPrevRecordImages=function(e,t){if(e)var a=$("#manageviews").find("[data-cvsrc]");else if(t)a=$("#galleryviews").find("[data-cvsrc]");else a=$("#customizationpreviewdiv").find("[data-cvsrc]");if(a.length)for(var i=a.length,s=0;s<i;s++){var l=a.eq(s),n=l.attr("data-fileid");""===n?emptyImgRemove(l):l.attr("src",Crm.getPortalURL(l.attr("data-cvsrc")+n)),l.removeAttr("data-cvsrc")}},listViewHandler.prototype.processDataForComponents=function(e,t,a){for(var i=t.length,s=0;s<i;s++){var l=t[s],n=l.children;n&&n.length?this.processDataForComponents(e,n,a):"field"===l._type?this.processDataForFields(l,e,a):"upcoming_activity"===l._type&&this.processDataForUpcomingActivity(l,e)}},listViewHandler.prototype.processDataForFields=function(e,t,a){var i=e,s=i.FIELDID,l=i.responseIndex,n=t.CONTENT[l]||"";if("object"==typeof n)if(4==i.UITYPE&&"Accounts"===t.MODULE)n=n.DISPLAYLABEL;else if("User"===n.MODULE||"Users"===n.MODULE){var o=n.ENTITYID;n='<span class="lv_data_user ellipsistext cd_style_inherit" data-params=\'{"userId":"'+n.ENTITYID+"\"}'>"+$ESAPI.encoder().encodeForHTML(n.DISPLAYLABEL)+"</span>",t[s+"_USERID"]=o,t[s+"_skipencoding"]=!0}else if("BEST_TIME"===e.COLUMNNAME)n=crmBstTime.getListViewString(n);else if(void 0===n.DISPLAYLABEL)n=void 0;else{var d="Crm_Implied_View_"+n.MODULE;crmListView.changedPermissionsForZBModules.hasOwnProperty(d)&&(d=crmListView.changedPermissionsForZBModules[d]),d=Crm.userDetails.permissions[d];var r="<a ";a||(d?(r+='data-cid="detailView" data-params=\'{"relContactId":"'+(t.relContactId?t.relContactId:null)+'","module":"'+n.MODULE+'","id":"'+n.ENTITYID+'","lookback":"true"}\' href="'+Crm.getCrmBasePath()+"/EntityInfo.do?id="+n.ENTITYID+"&module="+n.MODULE+'"',["Calls","Tasks","Events"].indexOf(t.MODULE)&&4===i.UITYPE&&(r+="onmouseover=\"showRelatedFields_new('"+n.MODULE+"','"+n.ENTITYID+'\',this)" onmouseout="hideLoadingDiv();"')):r+='href="javascript:;" title="Permission denied" data-permission="false"'),r+='id="listView_'+n.ENTITYID+'"',r+=' class="link cd_style_inherit"',r+=">",n=r+=$ESAPI.encoder().encodeForHTML(n.DISPLAYLABEL)+"</a>",t[s+"_skipencoding"]=!0}else if("CALLDURATION"==i.COLUMNNAME&&":00"==n&&(n=""),i.UITYPE===CrmFieldConstants.WEBSITE){var c=-1!=n.search(/^http(s?):\/\//g)?n:"http://"+n;t[s+"_href"]=c}else if(i.UITYPE===CrmFieldConstants.MULTIPICKLIST)n=n.replace(/;/g,"; ");else if(i.UITYPE===CrmFieldConstants.DECIMAL)["TIMESPENT","AVERAGETIMESPENT"].indexOf(i.COLUMNNAME)>-1?n=Utils.convertTimeInDoubleToReadableForm(n):!0!==i.separator&&(n=parseFloat(n)||"");else if(i.UITYPE===CrmFieldConstants.TAGS)n=n?n.split(","):void 0;else if((0===t.MODULE.indexOf("CustomModule")||0===t.MODULE.indexOf("LinkingModule"))&&"NAME"===e.COLUMNNAME||e.COLUMNNAME==crmConstants.listViewMandatoryColumns[t.MODULE]||"FULLNAME"==e.COLUMNNAME){var p=t.relContactId?t.relContactId:null,u=this.getCustomViewObj(),m=u.module;d="Crm_Implied_View_"+m;crmListView.changedPermissionsForZBModules.hasOwnProperty(d)&&(d=crmListView.changedPermissionsForZBModules[d]),d=Crm.userDetails.permissions[d];r="<a ";if("object"==typeof CrmTracking)CrmTracking.isEntityOnline(m,t.ENTITYID)&&(r="<span data-id='online-entity-"+t.ENTITYID+"-lview' class='online-entity lft5 vat'></span><a ");a||(r+=d?'data-cid="detailView" href="'+Crm.getCrmBasePath()+"/EntityInfo.do?id="+t.ENTITYID+"&module="+t.MODULE+'"':'href="javascript:;" title="permission denied" data-permission="false"'),r+='id="listView_'+t.ENTITYID+'" data-params=\'{"relContactId":"'+p+'","module":"'+t.MODULE+'","id":"'+t.ENTITYID+'","cvid":"'+u.cvId+'","recordNum":"'+t.recordNum+'","lookback":"true"',"Activities"==m&&(r+=',"fromActivityListView":"true"'),r+="}'",r+=' class="link cd_style_inherit"',n=r+=">"+$ESAPI.encoder().encodeForHTML(n)+"</a>",t[s+"_skipencoding"]=!0}else if("Mailing Street"===e.FIELDLABEL||"Billing Street"===e.FIELDLABEL||"Street"===e.FIELDLABEL){if(""!==n){var g=n.split("~~~"),v=void 0===g[0]||""===g[0]||"null"===g[0]?"":g[0],_=g[1];n=r=_&&""!==_&&"null"!==_?'<div class="fromAddress cd_style_inherit" onmouseenter="newshowtt(\''+$ESAPI.encoder().encodeForHTMLAttribute(_)+'\')"  onmouseout="newhidett()">'+$ESAPI.encoder().encodeForHTML(v)+"</div>":'<div class="fromAddress cd_style_inherit">'+$ESAPI.encoder().encodeForHTML(v)+"</div>",t[s+"_skipencoding"]=!0}}else"Campaigns"==m&&"TYPE"===e.COLUMNNAME&&t.CAMPAIGN_TYPE in[1,2,3]&&(n='<div class="cd_style_inherit">'+$ESAPI.encoder().encodeForHTML(n)+'<span class="camTypeDetIcon svgIconsImg ico-info2 mL8 cP" data-cid="campTypeOnClick" data-params=\'{"campaignId":"'+t.ENTITYID+"\"}'></span></div>",t[s+"_skipencoding"]=!0);n||(n="",t[s+"_skipencoding"]=!0),t[s+"_defaultvalue"]=n},listViewHandler.prototype.processDataForUpcomingActivity=function(e,t){Handlebars.helpers.getUpdatedUpComingActionsJson(t.ENTITYID,t)},listViewHandler.prototype.preProcess=function(e){var t=this.getViewObject(),a=e||t.components;this.preProcessComponents(a)},listViewHandler.prototype.preProcessComponents=function(e){for(var t=e.length,a=0;a<t;a++){var i=e[a],s=i.children;s&&s.length?this.preProcessComponents(s):"field"===i._type?this.preProcessFields(i):"button"===i._type?this.preProcessButtons(i):"link"===i._type&&this.preProcessLinks(i)}},listViewHandler.prototype.preProcessFields=function(e){for(var t=e.id,a=this.getCustomViewObj().heading,i=!1,s=a.length,l=0;l<s;l++){var n=a[l];if(n.FIELDID===t){26!=n.UITYPE&&2!=n.UITYPE||1!=n.colorcode_enabled||(n.picklistmap=void 0),$.extend(e,e,n),e.field_label=n.FIELDLABEL,e.responseIndex=l,e.UITYPE===CrmFieldConstants.PHONE&&(e.donotshow=n.donotshow,e.outbound=this.getCustomViewObj().outbound),"SMOWNERID"===n.COLUMNNAME&&"Owner_Photo"===e.data_type&&(e.field_label=n.FIELDLABEL+" "+I18n.getMsg("crm.label.image"),e.UITYPE=0),n.UITYPE===CrmFieldConstants.TAGS&&(e.data_type="Tags"),i=!0;break}}i||(e.ignore=!0)},listViewHandler.prototype.preProcessButtons=function(e){var t=this.getCustomViewObj().customButtonListViewEachRecordMap,a=!1;if(t){for(var i=t.cbArray,s=i.length,l=0;l<s;l++){var n=i[l];if(n.key===e.id){$.extend(e,e,n),a=!0;break}}a||(e.ignore=!0)}else e.ignore=!0},listViewHandler.prototype.preProcessLinks=function(e){if(!0!==e.ignore&&!e.field_label){var t=this.getViewObject().components.filter((function(t){return t.id===e.id}));t.length?(t=t[0],$.extend(e,e,t)):e.ignore=!0}},listViewHandler.prototype.handleEmptyValues=function(e){e.upcomingTime||(e.upcomingTime={class:"h_latertask",seType:"Tasks",value:I18n.getMsg("Today")})},listViewHandler.prototype.addSampleData=function(e){var t=this.getCustomViewObj();t.body&&t.body.length||t.body.push({CONTENT:"",ENTITYID:"-1",MODULE:t.module,approveStatus:"1",recordInsideProcess:"0"});var a=t.body[Customization.shuffleIndex];e=e||this.getViewObject().components;this.preProcess(e),this.processDataForComponents(a,e),this.handleEmptyValues(a);var i=[];(new ComponentProcessor).getAllComponents(i,e);for(var s,l,n=i.length,o=0;o<n;o++){var d=i[o];if(!this.isInternalComponent(d)){var r=this.getComponentHTML(d),c=Handlebars.compile(r)(a);301===d.UITYPE&&(c="<img src='"+Search.spacerImg+"' class='yes'/>"),c=p(c),d.display_value=c,209!==d.UITYPE||(s=d,l=c,-1!=[CrmFieldConstants.BOOLEAN_NO,CrmFieldConstants.IMAGE,CrmFieldConstants.IMAGE1,CrmFieldConstants.IMAGE2,CrmFieldConstants.OWNER_PHOTO].indexOf(s.UITYPE)||l.replace(/<[^>]*>/g," ").replace(/\s{2,}/g," ").trim())||(d.display_value=$ESAPI.encoder().encodeForHTML(d.field_label))}}function p(e){return e=e.replace(/data-cid|onclick|href|onmouseover/g,"garud")}};var CustomizationLoader={loadEditor:function(e){this.loadJs((function(){Customization.generateView(e)}))},loadJs:function(e){networkUtils.loadFeatureScripts(["zcrm_customization_builder.js",networkUtils.getI18nJSUrl("customization")],(function(){e()}))},cvGettingStarted:function(e){var t={};t.module=e,t.isEngLocale="en_US,en_GB".indexOf(Crm.userDetails.LOCALE)>-1,$("#show").html(Handlebars.templates.CanvasIntro(t)),$("#customizedViewEnable").show(),Crm.trackSpotLightAction("Canvas - View Click",{Module:e}),Crm.client_tracking("Canvas - View Click")},cvgettingVideo:function(){var e=renderingUtils.windowHeight;$(".cvvideoContainer").show(),$("#cvvideopopupcontainer").css({top:"0px",height:e}).show(),$("#cvvideopopupcontainer iframe").attr("src","https://www.youtube-nocookie.com/embed/fZll-nKmPtc?autoplay=1"),$(document).keyup((function(e){27==e.keyCode&&($("#cvvideopopupcontainer").hide(),$("#cvvideopopupcontainer iframe").attr("src",""))}))},cvgettingVideoClose:function(){$("#cvvideopopupcontainer").hide(),$("#cvvideopopupcontainer iframe").attr("src","")}};!function(){var e=Handlebars.template,t=Handlebars.templates=Handlebars.templates||{};t.CustomizationViewEditorSkeleton=e({compiler:[7,">= 4.0.0"],main:function(e,t,a,i,s){return'<span class="editorHoverTooltipTxtBack"> <span class="editorHoverTooltipTxt"></span> </span> <div id="cv_body" class="cv_body"> \x3c!-- <div class="cv_gallery" id="cv_gallery"></div>--\x3e \x3c!-- <div class="cv_editor_tool" id="cv_editor_tool"></div>--\x3e <div class="cv_view_section" id="cv_view_section"> <div class="cv_view_side"> </div> <div class="cv_view_body" id="cv_view_body"></div> </div> \x3c!-- <div class="manage_view" id="manage_view"></div>--\x3e </div>'},useData:!0}),t.customizationfieldmapping=e({1:function(e,t,a,i,s){var l,n=e.lambda,o=e.escapeExpression,d=null!=t?t:{};return' <select class="curv2px" id="gallery_'+o(n(s&&s.key,t))+'" onchange="Customization.updateGalleryView(this)" data-viewcomponentid=\''+o(n(null!=t?t.id:t,t))+"'> <option value='skip'>"+o(a.getI18n.call(d,"crm.button.skip",{name:"getI18n",hash:{},data:s}))+"</option> "+(null!=(l=a.each.call(d,t,{name:"each",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:"")+" </select> "},2:function(e,t,a,i,s){var l;return" "+(null!=(l=a.if.call(null!=t?t:{},null!=t?t.id:t,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.program(5,s,0),data:s}))?l:"")+" "},3:function(e,t,a,i,s){var l=e.lambda,n=e.escapeExpression;return' <option value="'+n(l(null!=t?t.id:t,t))+"-"+n(l(null!=t?t.data_type:t,t))+'" type="'+n(l(null!=t?t.data_type:t,t))+"\" data-id='"+n(l(null!=t?t.FIELDID:t,t))+"'>"+n(l(null!=t?t.field_label:t,t))+"</option> "},5:function(e,t,a,i,s){var l=e.lambda,n=e.escapeExpression;return' <option value="'+n(l(null!=t?t._type:t,t))+'"  type="'+n(l(null!=t?t._type:t,t))+"\" data-id='"+n(l(null!=t?t.FIELDID:t,t))+"'>"+n(l(null!=t?t.field_label:t,t))+"</option> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,i,s){var l;return"<div  id='cvfieldMappingdropdown'> "+(null!=(l=a.each.call(null!=t?t:{},null!=t?t.groupedComponents:t,{name:"each",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+" </div>"},useData:!0}),t.customizationgallery=e({1:function(e,t,a,i,s){return' <a id="video-helplink" class="mT6 dIB video-helplink fR mR25" target="_blank" href=\'https://www.youtube-nocookie.com/embed/fZll-nKmPtc\' onClick=\'Crm.trackSpotLightAction("Canvas - Video Help Click",{"Module":"'+e.escapeExpression(e.lambda(null!=t?t.module:t,t))+'"});Crm.client_tracking("Canvas - Video Help Click");\'></a> '},3:function(e,t,a,i,s,l,n){var o=e.lambda,d=e.escapeExpression,r=null!=t?t:{};return" <li class='m0 setUpList cP LVCGalMenu' data-zcqa=\"gallery-type-"+d(o(null!=t?t.name:t,t))+'" id="gallery-type-'+d(o(null!=t?t.name:t,t))+'" data-gallery-index="'+d(a.incre.call(r,s&&s.index,{name:"incre",hash:{},data:s}))+'" onclick="LVCGallery.changeGalleryType(\''+d(a.encodeJS.call(r,null!=t?t.name:t,{name:"encodeJS",hash:{},data:s}))+"');LVCGallery.switchGalleryType('"+d(a.encodeJS.call(r,null!=n[1]?n[1].module:n[1],{name:"encodeJS",hash:{},data:s}))+"','"+d(a.encodeJS.call(r,null!=t?t.name:t,{name:"encodeJS",hash:{},data:s}))+"')\">"+d(o(null!=t?t.display_name:t,t))+"</li> "},5:function(e,t,a,i,s){var l=e.escapeExpression;return' <li class=\'m0 setUpList cP LVCGalMenu\' data-zcqa="gallery-type-OtherModules" id="gallery-type-OtherModules" onclick="LVCGallery.renderAllType(\''+l(e.lambda(null!=t?t.module:t,t))+"','"+l(a.getI18n.call(null!=t?t:{},"crm.canvas.gallary.othermodules",{name:"getI18n",hash:{},data:s}))+"');LVCGallery.changeGalleryType('OtherModules')\">My Organization Canvas</li> "},7:function(e,t,a,i,s){var l=e.escapeExpression,n=null!=t?t:{};return' <a id="video-helplink" class="mT5 dIB video-helplink fR mR25 lh18 f12 pL25 color_1" target="_blank" href=\'https://www.youtube-nocookie.com/embed/TBYAf3elhhk\' onClick=\'Crm.trackSpotLightAction("Canvas - Video Help Click",{"Module":"'+l(e.lambda(null!=t?t.module:t,t))+'"});Crm.client_tracking("Canvas - Video Help Click");\'>'+l(a.getI18n.call(n,"crm.skyeye.setup.head2",{name:"getI18n",hash:{},data:s}))+" "+l(a.getI18n.call(n,"crm.login.page.videos",{name:"getI18n",hash:{},data:s}))+"</a> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,i,s,l,n){var o,d=e.lambda,r=e.escapeExpression,c=null!=t?t:{};return'<div id="mainResult"> <div class=\'choose-template-container \' id=\'manage-gallery-cv\'> <div class="cvpadding headNormalPost pR " > <link-to lt-prop-route="crm.tab.module" lt-prop-td=\'{"clearCache" : true}\' lt-prop-dp=\'["'+r(d(null!=t?t.module:t,t))+'"]\' lt-prop-custom> <span class="backtoIcon dIB mL20 mT5 mR10"></span> </link-to> <span class=" f22 black">'+r(a.getI18n.call(c,"crm.email.add.template",{name:"getI18n",hash:{},data:s}))+'</span> <a id="context-helplink" class="fR mT3" href="javascript:;" onClick="openHelp(\''+r(a.getHelpUrl.call(c,"help.canvasview",{name:"getHelpUrl",hash:{},data:s}))+"');Crm.trackSpotLightAction('Canvas - Help Click',{'Module':'"+r(d(null!=t?t.module:t,t))+"'});Crm.client_tracking('Canvas - Help Click');\">"+r(a.getI18n.call(c,"crm.help.layout",{name:"getI18n",hash:{},data:s}))+"</a> "+(null!=(o=a.if_nq.call(c,a.getRebrandKey.call(c,"Brand",{name:"getRebrandKey",hash:{},data:s}),"skyDesk",{name:"if_nq",hash:{},fn:e.program(1,s,0,l,n),inverse:e.noop,data:s}))?o:"")+" </div> <div class='choose-template-content'> <table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" id=\"panelTab\"> <tbody> <tr> <td width='310px' class='vat'> <div id='cvgalleryleftpanel'> <ul class='m0 p0 fontsmooth col333'> <li class='m0 setUpList cP LVCGalMenu LVCGalAct' data-zcqa=\"gallery-type-all\" id=\"gallery-type-all\" onclick=\"LVCGallery.renderAllType('"+r(d(null!=t?t.module:t,t))+"','"+r(a.getI18n.call(c,"crm.msg.all",{name:"getI18n",hash:{},data:s}))+"')\">"+r(a.getI18n.call(c,"crm.msg.all",{name:"getI18n",hash:{},data:s}))+"</li> "+(null!=(o=a.each.call(c,null!=t?t.types:t,{name:"each",hash:{},fn:e.program(3,s,0,l,n),inverse:e.noop,data:s}))?o:"")+" "+(null!=(o=a.if.call(c,null!=t?t.isOthers:t,{name:"if",hash:{},fn:e.program(5,s,0,l,n),inverse:e.noop,data:s}))?o:"")+"  </ul> </div> </td > <td class='vat'> <div class='choose-temp-manage-view  ' id='cvgalleryrightpanel'> <input type=\"hidden\" value=\""+r(d(null!=t?t.module:t,t))+'" id="gallerymodule"></input> <div class=\'blank-template-container mT5\'> <link-to lt-prop-route="crm.settings.canvas.create" lt-prop-td=\'{"clearCache" : true }\' lt-prop-qp=\'{"module":"'+r(d(null!=t?t.module:t,t))+"\"}' onClick=\"Crm.trackSpotLightAction('"+r(d(null!=t?t.module:t,t))+" - canvas View');\" lt-prop-custom> <div class='cvblankcontainer  mtHover mB50' data-zcqa=\"CreateCustomizedView\" > <span class='f16 color_3 dB mB8 crm-font-regular'>"+r(a.getI18n.call(c,"crm.canvas.gallary.blanktemplate",{name:"getI18n",hash:{},data:s}))+"</span> <span class='dB f13 color_6 crm-font-regular'>"+r(a.getI18n.call(c,"crm.canvas.gallary.own.design",{name:"getI18n",hash:{},data:s}))+'</span> </div> </link-to>  </div> <div id="galleryviews" class=\'mT25\'> loading.. </div> </div> </td> </tr> </tbody> </table> </div> <div id="gallerymapping"  class="zcrm-modal zcrm-effect zcrm-show" style="display: none;top:0px"> <div class="grid_outer pR" id="grid_outer"> <div class="grid_inner" id="grid_inner"> <div></div> </div> </div> </div> </div> <div> <div class="choose-field-container" id=\'field-mappingDiv-cv\'> <div class="headNormalPost pR "> <a class="navarrow-icon mR10 mT5" href="javascript:;" onclick=\'$("#field-mappingDiv-cv").hide();$("#manage-gallery-cv").show()\'></a> <span class="f22 black">Field Mapping </span> <a id="context-helplink" class="fR f13 pL25 color_1 mT2 field-mapping-video" href="javascript:;" onClick="openHelp(\''+r(a.getHelpUrl.call(c,"help.canvasview",{name:"getHelpUrl",hash:{},data:s}))+"');Crm.trackSpotLightAction('Canvas - Help Click',{'Module':'"+r(d(null!=t?t.module:t,t))+"'});Crm.client_tracking('Canvas - Help Click');\">"+r(a.getI18n.call(c,"crm.help.layout",{name:"getI18n",hash:{},data:s}))+"</a> "+(null!=(o=a.if_nq.call(c,a.getRebrandKey.call(c,"Brand",{name:"getRebrandKey",hash:{},data:s}),"skyDesk",{name:"if_nq",hash:{},fn:e.program(7,s,0,l,n),inverse:e.noop,data:s}))?o:"")+' </div> <div class="p20 pT0 pB15 choose-field-mapping-cv"> <div id="selectedgallery" class=\'boderc4 p40\'> <div id="grid3" class="grid-stack"></div> </div> <div id="mappingfields" class=\'mT30 dN\'></div> </div> <div class="alignright p15 box-shadow-newpopup">  <input type="button" class="newgraybtn" value="'+r(a.getI18n.call(c,"crm.creator.cancelbutton",{name:"getI18n",hash:{},data:s}))+'"  onclick=\'$("#field-mappingDiv-cv").hide();$("#manage-gallery-cv").show();Crm.trackSpotLightAction("Canvas - Field Mapping Cancel Click",{"Module":"'+r(d(null!=t?t.module:t,t))+'"});Crm.client_tracking("Canvas - Field Mapping Cancel Click");\' > <input type="button" class="primarybtn" value="'+r(a.getI18n.call(c,"crm.button.next",{name:"getI18n",hash:{},data:s}))+'" id="saveGallery"> </div> </div> </div> '},useData:!0,useDepths:!0}),t.customizationgalleryrow=e({compiler:[7,">= 4.0.0"],main:function(e,t,a,i,s){var l=e.lambda,n=e.escapeExpression;return' <div class="mB40  galleryitem" id="galleryitem_'+n(l(null!=t?t.id:t,t))+"\"> <div class='gallery-freezelayer' onclick=\"LVCGallery.renderFieldMapping('"+n(l(null!=t?t.id:t,t))+"')\"><input class='gallaryselectbtn crm-font-bold primarybtn' value='"+n(a.getI18n.call(null!=t?t:{},"crm.template.component.heading",{name:"getI18n",hash:{},data:s}))+"' data-zcqa='gallery_select_"+n(l(null!=t?t.id:t,t))+"' type='button' onclick=\"LVCGallery.renderFieldMapping('"+n(l(null!=t?t.id:t,t))+'\');sE(event);" ></input></div> <div> <div class="gallerylist-container p15 vam"  data-zcqa=\'gallery_select_'+n(l(null!=t?t.id:t,t))+"' onclick=\"LVCGallery.renderFieldMapping('"+n(l(null!=t?t.id:t,t))+'\')"> <div id="customizedholder_'+n(l(null!=t?t.id:t,t))+'"></div> </div>   </div> </div> '},useData:!0}),t.detailview_canvaseditor=e({compiler:[7,">= 4.0.0"],main:function(e,t,a,i,s){var l=e.lambda,n=e.escapeExpression;return' <div class="container" style="top: 50px"> <div class="dN" id="cv_editor_module" value="'+n(l(null!=t?t.module:t,t))+'"/> <div class="dN" id="cv_editor_layout" value="'+n(l(null!=t?t.layoutId:t,t))+'"/> <div class="modal"> <div class="modal-box"> <div id="canvas-preview-pop"></div> <span class="close">&times;</span> </div> </div> <div class="topcontainer"> <div class="canvasname"> <span> <input class="canvasnamefield" placeholder="Enter Canvas name" type="text" name="cavasname" id="canvasname"> </span> <span class="fr"> <button id="preview" class="savebtn" onclick="canvasEditor.preview()"> Preview </button> </span> <span class="fr"> <button class="savebtn" onclick="Customization.saveDvCustomizedView(this)"> Save </button> </span> </div> </div> <div class="right-menu" id="zcanvas_menu"></div> <div class="left-editor"> <div class="editor" id="zcanvas_editor"></div> <div class="toolbar"></div> <div class="canvas-actions"></div> <div id="gobi"></div> </div> </div>'},useData:!0}),t.editorsection=e({1:function(e,t,a,i,s){var l,n=null!=t?t:{},o=e.escapeExpression;return' <div class="cv_edi_name dIB vam"> <span>Canvas <span class="f16 color_6 crm-font-regular">&#8234;('+o(a.getI18n.call(n,"crm.canvas.editor.subtitle",{name:"getI18n",hash:{},data:s}))+')&#8236;&rlm;</span></span> <a id="context-helplink" class="mT5 dIB mR0 f13" href="javascript:;" onClick="openHelp(\''+o(a.getHelpUrl.call(n,"help.canvasview",{name:"getHelpUrl",hash:{},data:s}))+"');Crm.trackSpotLightAction('Canvas - Help Click',{'Module':'"+o(e.lambda(null!=t?t.module:t,t))+"'});Crm.client_tracking('Canvas - Help Click');\">"+o(a.getI18n.call(n,"crm.help.layout",{name:"getI18n",hash:{},data:s}))+"</a> "+(null!=(l=a.if_nq.call(n,a.getRebrandKey.call(n,"Brand",{name:"getRebrandKey",hash:{},data:s}),"skyDesk",{name:"if_nq",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:"")+" </div> "},2:function(e,t,a,i,s){return' <a id="video-helplink" class="mT8 dIB video-helplink" target="_blank" href=\'https://www.youtube-nocookie.com/embed/fZll-nKmPtc\' onClick=\'Crm.trackSpotLightAction("Canvas - Video Help Click",{"Module":"'+e.escapeExpression(e.lambda(null!=t?t.module:t,t))+'"});Crm.client_tracking("Canvas - Video Help Click");\'></a> '},4:function(e,t,a,i,s){var l,n=e.lambda,o=e.escapeExpression,d=null!=t?t:{};return' <div class="cv_edi_name dIB vam"> <input type="text" id="customizedviewname"  data-zcqa="canvas_viewName" class="viewName" value="'+o(n(null!=t?t.name:t,t))+'" maxlength="50" ></input> <input type="hidden" id="viewId" value="'+o(n(null!=t?t.id:t,t))+'"></input> <a id="context-helplink" data-zcqa="canvas_helplink" class="mT5 dIB mR0 f13" href="javascript:;" onClick="openHelp(\''+o(a.getHelpUrl.call(d,"help.canvasview",{name:"getHelpUrl",hash:{},data:s}))+"');Crm.trackSpotLightAction('Canvas - Help Click',{'Module':'"+o(n(null!=t?t.module:t,t))+"'});Crm.client_tracking('Canvas - Help Click');\">"+o(a.getI18n.call(d,"crm.help.layout",{name:"getI18n",hash:{},data:s}))+"</a> "+(null!=(l=a.if_nq.call(d,a.getRebrandKey.call(d,"Brand",{name:"getRebrandKey",hash:{},data:s}),"skyDesk",{name:"if_nq",hash:{},fn:e.program(5,s,0),inverse:e.noop,data:s}))?l:"")+" </div> "+(null!=(l=a.unless.call(d,null!=t?t.ispersonalAccount:t,{name:"unless",hash:{},fn:e.program(7,s,0),inverse:e.noop,data:s}))?l:"")+" "},5:function(e,t,a,i,s){return' <a id="video-helplink" class="mT6 dIB video-helplink mR10" target="_blank" href=\'https://www.youtube-nocookie.com/embed/fZll-nKmPtc\' onClick=\'Crm.trackSpotLightAction("Canvas - Video Help Click",{"Module":"'+e.escapeExpression(e.lambda(null!=t?t.module:t,t))+'"});Crm.client_tracking("Canvas - Video Help Click");\'></a> '},7:function(e,t,a,i,s){var l=e.lambda,n=e.escapeExpression;return" <span class='vam  dIB mL10'><a href=\"javascript:;\" data-zcqa='canvas_openSharingDiv' onclick=\"Customization.openSharingDiv('"+n(l(null!=t?t.id:t,t))+"');Crm.trackSpotLightAction('Canvas - Sharing Click',{'Module':'"+n(l(null!=t?t.module:t,t))+"'});Crm.client_tracking('Canvas - Sharing Click');\"  id=\"sharingdiv\">"+n(a.getI18n.call(null!=t?t:{},"setupsearch.sharing",{name:"getI18n",hash:{},data:s}))+"</a></span> "},9:function(e,t,a,i,s){var l,n=null!=t?t:{},o=e.escapeExpression,d=e.lambda;return' <div class="pp-header f21 crm-font-regular bxShTp">'+o(a.getI18n.call(n,"crm.canvas.title.view","Canvas",{name:"getI18n",hash:{},data:s}))+'</div> <div class="pp-content" > <table width="700" cellspacing="0" cellpadding="7"> <tr> <td><input type="text" id="customizedviewname" maxlength="50"\n\t\t\t\t\t\t\t\tclass="viewName" value="'+o(d(null!=t?t.name:t,t))+'"  placeholder="Specify a canvas name"></input> <input type="hidden"\n\t\t\t\t\t\t\t\tid="viewId" value="'+o(d(null!=t?t.id:t,t))+'" ></input></td> </tr> </table> <form name="accessDivForm"> <div id=\'accessDIV\' class="pT10"></div> </form> </div> <div class="pp-footer pR"> <span class="cvf11 color_9 cvsharenote">'+o(a.getI18n.call(n,"canvas.maximum.limit",null!=t?t.customizedViewLimit:t,{name:"getI18n",hash:{},data:s}))+'</span> <input type="button" class="newgraybtn" data-zcqa=\'canvas_Cancel\' value="Cancel"onclick="crmui.hidePopup(\'cviewName\');Crm.trackSpotLightAction(\'Canvas - Final Save Cancel CLick\'); // No I18N"> <input type="button" class="primarybtn" value="Save" data-zcqa=\'canvas_cvSave\' onclick="'+(null!=(l=a.unless.call(n,null!=t?t.id:t,{name:"unless",hash:{},fn:e.program(10,s,0),inverse:e.program(12,s,0),data:s}))?l:"")+'"> </div> '},10:function(e,t,a,i,s){return"Customization.saveCustomizedView(this);"},12:function(e,t,a,i,s){return"Customization.updateCustomizedView();"},14:function(e,t,a,i,s){var l=null!=t?t:{},n=e.escapeExpression;return' <div class="pp-header f21 crm-font-regular bxShTp">'+n(a.getI18n.call(l,"setupsearch.sharing",{name:"getI18n",hash:{},data:s}))+'</div> <div class="pp-content"> <form name="accessDivForm"> <div id=\'accessDIV\' class="pT10"></div> </form> </div> <div class="pp-footer pR"> <span class="cvf11 color_9 cvsharenote">'+n(a.getI18n.call(l,"canvas.maximum.limit",null!=t?t.customizedViewLimit:t,{name:"getI18n",hash:{},data:s}))+'</span> <input type="button" class="newgraybtn" data-zcqa=\'canvas_cvsharenoteCancel\' value="'+n(a.getI18n.call(l,"Cancel",{name:"getI18n",hash:{},data:s}))+'" onclick="crmui.hidePopup(\'cviewName\');"> <input type="button" class="primarybtn" data-zcqa=\'canvas_cvsharenoteSave\' value="'+n(a.getI18n.call(l,"Done",{name:"getI18n",hash:{},data:s}))+'" onclick="crmui.hidePopup(\'cviewName\');"> </div> '},compiler:[7,">= 4.0.0"],main:function(e,t,a,i,s){var l,n=e.lambda,o=e.escapeExpression,d=null!=t?t:{};return' <div id="cv_editor_section" class="cv_editor_section"> <div class="dN" id="cv_editor_module" value="'+o(n(null!=t?t.module:t,t))+'"></div> <div class="cv_editor_header" id="cv_editor_header"> '+(null!=(l=a.unless.call(d,null!=t?t.id:t,{name:"unless",hash:{},fn:e.program(1,s,0),inverse:e.program(4,s,0),data:s}))?l:"")+" <div class=\"fR\"> <span class='crm-font-regular color_6 fs cvpreviewicon'  data-zcqa=\"canvasPreview\" id='canvasPreview' >"+o(a.getI18n.call(d,"crm.button.preview",{name:"getI18n",hash:{},data:s}))+'</span> <button class="btn_small primarybtn mL20" data-zcqa="savecustomizedview" id="savecustomizedview" disabled=true onclick="Customization.handleSaveOption(\''+o(n(null!=t?t.id:t,t))+"')\">"+o(a.getI18n.call(d,"Save",{name:"getI18n",hash:{},data:s}))+'</button> <button class="btn_small newgraybtn" data-zcqa="cancelcustomizedview" onclick="jSortable.cancel();">'+o(a.getI18n.call(d,"Cancel",{name:"getI18n",hash:{},data:s}))+'</button> </div> </div> <div class="outer-left-container" id="cv_editorBody"> <div class="sideBarFieldLimit" id="sideBarFieldLimit"> <p class="CanvasFontSemibold">'+o(a.getI18n.call(d,"crm.field.limit.reaches.v4",{name:"getI18n",hash:{},data:s}))+'</p> <div class="CanvasFontRegular">'+o(a.getI18n.call(d,"crm.canvas.maximum.field.limit",{name:"getI18n",hash:{},data:s}))+'</div> </div> <div class="side_bar" id="grid2" data-gs-animate="true"> <div class="sidebar_search pR" id="sidebar_search"> <input type="text" data-zcqa=\'canvas_field_search\' placeholder="'+o(a.getI18n.call(d,"crm.label.search",{name:"getI18n",hash:{},data:s}))+'" onkeyup="jSortable.search(this)" id="sidemenuSearchInput"> <span class="IP_searchIconNew dIB pA"></span> </div> <div class="sidebar_scroll_container" id="fields_outer_container"> <div class="sidebar_fields cv_sb_tab" id="sidebar_fields"></div> <h6 openDiv="sidebar_buttons" name="sidebar_buttonsHeading" id="sidebar_fieldsHeading">BUTTONS</h6> <div class="sidebar_buttons cv_sb_tab" id="sidebar_buttons" name="sidebar_buttons"></div> <h6 openDiv="sidebar_buttons" name="sidebar_links" id="sidebar_linksHeading">LINKS</h6> <div class="sidebar_links cv_sb_tab " id="sidebar_links" name="sidebar_links"></div> <h6 openDiv="sidebar_others" name="sidebar_others" id="sidebar_othersHeading">'+o(a.getI18n.call(d,"canvas.others",{name:"getI18n",hash:{},data:s}))+'</h6> <div class="sidebar_links cv_sb_tab " id="sidebar_others" name="sidebar_others"></div> <div id="noFields" class="noFields f14 mT10 color_3">No Fields Available</div> \x3c!--<h6 openDiv="sidebar_fields">AVAILABLE FIELDS</h6>--\x3e <span class=\'mB80 dIB\'></span> </div> <div class="dN pL15 mT10 color_3 fL" id="sidebarnomatch"> '+o(a.getI18n.call(d,"crm.label.no.results.match",{name:"getI18n",hash:{},data:s}))+' </div> \x3c!--<h6 openDiv="sidebar_separators">SEPARATORS</h6> <div class="sidebar_separators oH cv_sb_tab" id="sidebar_separators"> <div class="cv_separator grid-stack-item"\n                data-gs-x="0" data-gs-y="1"\n                data-gs-width="12" data-gs-height="1"><div class="grid-stack-item-content">.</div></div> <div class="cv_separator grid-stack-item"\n                data-gs-x="0" data-gs-y="1"\n                data-gs-width="12" data-gs-height="1"><div class="grid-stack-item-content">/</div></div> <div class="cv_separator grid-stack-item"\n                data-gs-x="0" data-gs-y="1"\n                data-gs-width="12" data-gs-height="1"><div class="grid-stack-item-content">-</div></div> <div class="cv_separator grid-stack-item"\n                data-gs-x="0" data-gs-y="1"\n                data-gs-width="12" data-gs-height="1"><div class="grid-stack-item-content">*</div></div> </div>--\x3e </div> </div> <div class="outer-right-container" id="editor_container"> \x3c!-- <div class="cv_delete_layer"> <div class="cv_delete"></div> <div class="cv_save"> <input class="greenbtn btn_small floatL pA" type="button" value="Save"  style="margin: 15px 20px;" onclick="crmui.showPopup(\'cviewName\');$(\'#viewName\').focus();"> </div> </div> --\x3e <div class="grid_outer pR" id="grid_outer"> <div class="grid_inner" id="grid_inner"> \x3c!--<table class="grid_checkbox"> <tr> <td> <span class="customCheckBox"></span> </td> <td> <span class="customCheck_followup"></span> </td> </tr> </table>--\x3e <div class="grid-stack grid-stack-6" id="grid1"> \x3c!-- <div id="cv_bg_patten" class="cd_bg_patten"> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> </div> onclick=\'jSortable.hideOtherOptions();sE();\'\n--\x3e </div> </div> <ul class="separator_dropdown" id="icon_dropdown" style="display:none"> <li data-value="" class="mR5 mB5 cviconreset pT0 pB0" id="emptyIcon"></li> <li data-value="font-icon-call" class="mR5 mB5 font-icon-call"></li> <li data-value="font-icon-zevent" class="mR5 mB5 font-icon-zevent"></li> <li data-value="font-icon-zfacebook" class="font-icon-zfacebook mB5 mR5"></li> <li data-value="font-icon-zgplus" class="mR5 mB5 font-icon-zgplus"></li> <li data-value="font-icon-zmail" class="mR5 mB5 font-icon-zmail"></li> <li data-value="font-icon-zmobile" class="mR5 mB5 font-icon-zmobile"></li> <li data-value="font-icon-ztwitter" class="mR5 mB5 font-icon-ztwitter"></li> <li data-value="font-icon-ztast" class="mR5 mB5 font-icon-ztast"></li> <li data-value="font-icon-zlinkedin" class="mR5 mB5 font-icon-zlinkedin"></li> <li data-value="font-icon-businesscard" class="mR5 mB5 font-icon-businesscard"></li> <li data-value="font-icon-campaign" class="font-icon-campaign mB5 mR5"></li> <li data-value="font-icon-phone" class="mR5 mB5 font-icon-phone"></li> <li data-value="font-icon-mobile" class="mR5 mB5 font-icon-mobile"></li> <li data-value="font-icon-task" class="mR5 mB5  font-icon-task" id="cdDefault_Icon"></li> <li data-value="font-icon-user" class="mR5 mB5  font-icon-user"></li> <li data-value="font-icon-zip" class="mR5 mB5  font-icon-zip"></li> <li data-value="font-icon-audio" class="mR5 mB5 font-icon-audio"></li> <li data-value="font-icon-location" class="mR5 mB5 font-icon-location"></li> <li data-value="font-icon-armour" class="mR5 mB5 font-icon-armour"></li> <li data-value="font-icon-at" class="font-icon-at mB5 mR5"></li> <li data-value="font-icon-bed" class="mR5 mB5 font-icon-bed"></li> <li data-value="font-icon-building" class="mR5 mB5 font-icon-building"></li> <li data-value="font-icon-bulb" class="mR5 mB5 font-icon-bulb"></li> <li data-value="font-icon-car" class="mR5 mB5 font-icon-car"></li> <li data-value="font-icon-card" class="mR5 mB5 font-icon-card"></li> <li data-value="font-icon-case" class="font-icon-case mB5 mR5"></li> <li data-value="font-icon-feed" class="mR5 mB5 font-icon-feed"></li> <li data-value="font-icon-female" class="mR5 mB5 font-icon-female"></li> <li data-value="font-icon-flag" class="mR5 mB5  font-icon-flag" id="cdDefault_Icon"></li> <li data-value="font-icon-flight" class="mR5 mB5  font-icon-flight"></li> <li data-value="font-icon-folder" class="mR5 mB5  font-icon-folder"></li> <li data-value="font-icon-gift" class="mR5 mB5 font-icon-gift"></li> <li data-value="font-icon-globe" class="font-icon-globe mB5 mR5"></li> <li data-value="font-icon-headset" class="mR5 mB5 font-icon-headset"></li> <li data-value="font-icon-heart" class="mR5 mB5 font-icon-heart"></li> <li data-value="font-icon-notes" class="font-icon-notes mB5 mR5"></li> <li data-value="font-icon-spoon" class="mR5 mB5 font-icon-spoon"></li> <li data-value="font-icon-star" class="mR5 mB5 font-icon-star"></li> <li data-value="font-icon-tag" class="mR5 mB5 font-icon-tag"></li> <li data-value="font-icon-ticket" class="mR5 mB5 font-icon-ticket"></li> <li data-value="font-icon-tie" class="mR5 mB5 font-icon-tie"></li> <li data-value="font-icon-timer" class="font-icon-timer mB5 mR5"></li> <li data-value="font-icon-train" class="mR5 mB5 font-icon-train"></li> <li data-value="font-icon-trophy" class="mR5 mB5 font-icon-trophy"></li> <li data-value="font-icon-coffee" class="mR5 mB5  font-icon-coffee" id="cdDefault_Icon"></li> <li data-value="font-icon-drop" class="mR5 mB5  font-icon-drop"></li> <li data-value="font-icon-education" class="mR5 mB5  font-icon-education"></li> <li data-value="font-icon-fax" class="mR5 mB5 font-icon-fax"></li> <li data-value="font-icon-home" class="mR5 mB5 font-icon-home"></li> <li data-value="font-icon-male" class="mR5 mB5 font-icon-male"></li> <li data-value="font-icon-map" class="font-icon-map mB5 mR5"></li> <li data-value="font-icon-medicine" class="mR5 mB5 font-icon-medicine"></li> <li data-value="font-icon-umbrella" class="mR5 mB5 font-icon-umbrella"></li> <li data-value="font-icon-videocam" class="mR5 mB5  font-icon-videocam" id="cdDefault_Icon"></li> <li data-value="font-icon-warn" class="mR5 mB5  font-icon-warn"></li> </ul> <ul class="separator_dropdown" id="separator_dropdown" style="display:none"> <li data-value="" class="mR5 mB5"><span class=\'noseperatoricon\'></span></li> <li data-value="&middot;" class="mR5 mB5">&middot;</li> <li data-value="&#43;" class="mR5 mB5">&#43;</li> <li data-value="&#124;" class="mR5 mB5">&#124;</li> <li data-value="&minus;" class="mB5 mR5">&minus;</li> <li data-value="&frasl;" class="mR5 mB5">&frasl;</li> <li data-value="&#92" class="mB5">&#92</li> <li data-value="&diams;" class="mR5 mB5">&diams;</li> <li data-value="&amp;" class="mR5 mB5">&amp;</li> <li data-value="&#9656;" class="mR5 mB5">&#9656;</li> <li data-value="&#44;" class="mR5 mB5 cvlh16">&#44;</li> <li data-value="&#58" class="mR5 mB5">&#58</li> <li data-value="&rarr;" class="mR5 mB5 cvlh22">&rarr;</li> <li data-value="&larr;" class="mR5 mB5 cvlh22">&larr;</li> <li data-value="&#47&#47;" class="mB5">&#47&#47;</li> </ul> <ul class="labelalign_dropdown dN pF" id="labelalign_dropdown" data-close="true" > <li id="canvasMenuLabelTop" data-alignclass="txtalnLt" data-align="left" data-alignimgclass="tE_leftalin" onclick="jSortable.labelPosition(this,\'top\');"> <span>Top align</span> </li> <li id="canvasMenuLabelLeft" data-alignclass="txtalnMid" data-align="middle" data-alignimgclass="tE_midlalin" onclick="jSortable.labelPosition(this,\'Left\');"> <span>Left align</span> </li> </ul> <div class="pA suffle_data_container" > <span data-zcqa="canvas_suffle_data" class=\'suffle_data\' onclick="Customization.shuffleData(\''+o(n(null!=t?t.module:t,t))+"');\" title='"+o(a.getI18n.call(d,"crm.canvas.editor.suffledata",{name:"getI18n",hash:{},data:s}))+'\'></span> <span data-zcqa="canvas_cvtopundoicon" class=\'cvtopundoicon vam cv_disable\' id="canvasUndo" onclick="jSortable.cd_undo();sE(event)" title=\''+o(a.getI18n.call(d,"crm.canvas.editor.undo",{name:"getI18n",hash:{},data:s}))+'\'></span> <span data-zcqa="canvas_cvtopredoicon"  class=\'cvtopredoicon vam cv_disable\' id="canvasRedo" onclick="jSortable.cd_redo();sE(event)" title=\''+o(a.getI18n.call(d,"crm.canvas.editor.redo",{name:"getI18n",hash:{},data:s}))+'\'></span> <span class="color_5 cvf12 cvdeletelabel  cP  p0 cv_disable" data-zcqa="canvas_cdDeleteIcon" id="cdDeleteIcon" onclick="jSortable.deleteElement()"></span> </div> </div> <div id="textEditorMenu" class=\'textEditorMenu cv_disable\' data-tool=\'{"color":"333333","background_color":"","align":"left","font_size":"14","font_style":"CanvasFontRegular", "italic": false, "labelAlign": "left", "text_transform": "","line_through": false}\' onclick="sE()"> <div class=\'cvtextToolbar\' id="cvtextToolbar"> <ul   class=\'textEditorMenuTool pL20 pR0\'> <li class="tE_selectFontStyle cv_tooldropdown border_ddd pT0" id="tE_selectFontStyle" data-zcqa="canvas_tE_selectFontStyle"> <span class="cd_tool_fonttype_style" id="cdToolFTypeS">'+o(a.getI18n.call(d,"crm.canvas.editor.style.sample",{name:"getI18n",hash:{},data:s}))+'</span> <ul class="cd_toolfonttype_dropdown oA" id="cd_toolfonttype_dropdown" data-close="true"> <li class="cv_font cvf15 black" data-style=\'{"color":"000","background_color":"","align":"left","font_size":"15","font_style":"CanvasFontRegular"}\' data-zcqa="canvas_style_sample1" >'+o(a.getI18n.call(d,"crm.canvas.editor.style.sample1",{name:"getI18n",hash:{},data:s}))+'</li> <li class="cv_font cvf18 color_8" data-style=\'{"color":"000","background_color":"","align":"left","font_size":"22","font_style":"CanvasFontLight"}\'  data-zcqa="canvas_style_sample2" >'+o(a.getI18n.call(d,"crm.canvas.editor.style.sample2",{name:"getI18n",hash:{},data:s}))+' 1</li> <li class="cv_font cvf18" style=\'color:#1d7fed;\' data-style=\'{"color":"1d7fed","background_color":"","align":"left","font_size":"18","font_style":"CanvasFontSemibold"}\'  data-zcqa="canvas_style_sample3" >'+o(a.getI18n.call(d,"crm.canvas.editor.style.sample2",{name:"getI18n",hash:{},data:s}))+'</li> <li class="cv_font cvf18" style=\'color:#268c0f\' data-style=\'{"color":"268c0f","background_color":"","align":"left","font_size":"18","font_style":"CanvasFontLight"}\'  data-zcqa="canvas_style_sample4" >'+o(a.getI18n.call(d,"crm.canvas.editor.style.sample2",{name:"getI18n",hash:{},data:s}))+'</li> <li class="cv_font cvf16 crm-font-bold" style=\'color:#e1a514;\' data-style=\'{"color":"e1a514","background_color":"","align":"left","font_size":"16","font_style":"CanvasFontSemibold"}\'  data-zcqa="canvas_style_sample5" >'+o(a.getI18n.call(d,"crm.canvas.editor.style.sample3",{name:"getI18n",hash:{},data:s}))+'</li> <li class="cv_font cvf16 crm-font-bold" style=\'color:#444444;\' data-style=\'{"color":"444444","background_color":"","align":"left","font_size":"16","font_style":"CanvasFontSemibold"}\'  data-zcqa="canvas_style_sample6" >'+o(a.getI18n.call(d,"crm.canvas.editor.style.sample4",{name:"getI18n",hash:{},data:s}))+'</li> <li data-style=\'{"color":"ffffff","background_color":"bebebe","padding":"4px","align":"left","font_size":"14","font_style":"CanvasFontRegular"}\' data-zcqa="canvas_style_sample7"><span class="cv_font cvf14 fontStyleHightlights1 p4" style=\'color:#ffffff;\'  data-zcqa="canvas_tE_selectFontStyle" >'+o(a.getI18n.call(d,"crm.canvas.editor.style.sample5",{name:"getI18n",hash:{},data:s}))+'</span></li> <li data-style=\'{"color":"ffffff","background_color":"85c1d2","padding":"4px","align":"left","font_size":"12","font_style":"CanvasFontRegular"}\' data-zcqa="canvas_style_sample8"><span class="cv_font cvf12 fontStyleHightlights p4" style=\'color:#ffffff;\'  data-zcqa="canvas_tE_selectFontStyle" >'+o(a.getI18n.call(d,"crm.canvas.editor.style.sample5",{name:"getI18n",hash:{},data:s}))+'<span></li> <li class="cv_font cvf15 black" data-style=\'{"color":"000000","background_color":"","align":"left","font_size":"14","font_style":"CanvasFontRegular"}\'  data-zcqa="canvas_style_sample9" >'+o(a.getI18n.call(d,"crm.canvas.editor.style.sample6",{name:"getI18n",hash:{},data:s}))+'</li> <li class="cv_font cvf14 color_6" data-style=\'{"color":"666666","background_color":"","align":"left","font_size":"13","font_style":"CanvasFontRegular"}\'  data-zcqa="canvas_style_sample10" >'+o(a.getI18n.call(d,"crm.canvas.editor.style.sample7",{name:"getI18n",hash:{},data:s}))+'</li> <li class="cv_font cvf13 color_7" data-style=\'{"color":"777777","background_color":"","align":"left","font_size":"13","font_style":"CanvasFontRegular"}\'  data-zcqa="canvas_style_sample11" >'+o(a.getI18n.call(d,"crm.canvas.editor.style.sample8",{name:"getI18n",hash:{},data:s}))+'</li> <li class="cv_font cvf12 gtxt2" data-style=\'{"color":"aaaaaa","background_color":"","align":"left","font_size":"12","font_style":"CanvasFontRegular"}\'  data-zcqa="canvas_style_sample11" >'+o(a.getI18n.call(d,"crm.canvas.editor.style.sample9",{name:"getI18n",hash:{},data:s}))+'</li> </ul> </li> <li class="tE_selectFont cv_tooldropdown border_ddd pT0" id="tE_selectFont" data-zcqa="canvas_tE_selectFont"> <span class="cd_tool_fontSize" id="cdToolFS">14</span> <ul class="font_dropdown oA" id="font_dropdown" data-close="true"> <li class="cv_font cd_fs11" data-zcqa="canvas_cd_fs11"  style="font-size: 11px">11'+o(a.getI18n.call(d,"webform.width.px",{name:"getI18n",hash:{},data:s}))+'</li> <li class="cv_font cd_fs12" data-zcqa="canvas_cd_fs12" style="font-size: 12px">12'+o(a.getI18n.call(d,"webform.width.px",{name:"getI18n",hash:{},data:s}))+'</li> <li class="bld cv_font cd_fs13" data-zcqa="canvas_cd_fs13" style="font-size: 13'+o(a.getI18n.call(d,"webform.width.px",{name:"getI18n",hash:{},data:s}))+'">13px</li> <li class="cv_font cd_fs14" data-zcqa="canvas_cd_fs14" style="font-size: 14px">14'+o(a.getI18n.call(d,"webform.width.px",{name:"getI18n",hash:{},data:s}))+'</li> <li class="cv_font cd_fs15" data-zcqa="canvas_cd_fs15" style="font-size: 15px">15'+o(a.getI18n.call(d,"webform.width.px",{name:"getI18n",hash:{},data:s}))+'</li> <li class="cv_font cd_fs16" data-zcqa="canvas_cd_fs16" style="font-size: 16px">16'+o(a.getI18n.call(d,"webform.width.px",{name:"getI18n",hash:{},data:s}))+'</li> <li class="cv_font cd_fs17 mB5" data-zcqa="canvas_cd_fs17" style="font-size: 17px">17'+o(a.getI18n.call(d,"webform.width.px",{name:"getI18n",hash:{},data:s}))+'</li> <li class="cv_font cd_fs18 mB5" data-zcqa="canvas_cd_fs18" style="font-size: 18px">18'+o(a.getI18n.call(d,"webform.width.px",{name:"getI18n",hash:{},data:s}))+'</li> <li class="cv_font cd_fs19 mB5" data-zcqa="canvas_cd_fs19" style="font-size: 19px">19'+o(a.getI18n.call(d,"webform.width.px",{name:"getI18n",hash:{},data:s}))+'</li> <li class="cv_font cd_fs20 mB5" data-zcqa="canvas_cd_fs20" style="font-size: 20px">20'+o(a.getI18n.call(d,"webform.width.px",{name:"getI18n",hash:{},data:s}))+'</li> <li class="cv_font cd_fs21 mB8" data-zcqa="canvas_cd_fs21" style="font-size: 21px">21'+o(a.getI18n.call(d,"webform.width.px",{name:"getI18n",hash:{},data:s}))+'</li> <li class="cv_font cd_fs22 mB8" data-zcqa="canvas_cd_fs22" style="font-size: 22px">22'+o(a.getI18n.call(d,"webform.width.px",{name:"getI18n",hash:{},data:s}))+'</li> <li class="cv_font cd_fs23 mB8" data-zcqa="canvas_cd_fs23" style="font-size: 23px">23'+o(a.getI18n.call(d,"webform.width.px",{name:"getI18n",hash:{},data:s}))+'</li> <li class="cv_font cd_fs24 mB8" data-zcqa="canvas_cd_fs24" style="font-size: 24px">24'+o(a.getI18n.call(d,"webform.width.px",{name:"getI18n",hash:{},data:s}))+'</li> <li class="cv_font cd_fs26 mB8" data-zcqa="canvas_cd_fs25" style="font-size: 26px">26'+o(a.getI18n.call(d,"webform.width.px",{name:"getI18n",hash:{},data:s}))+'</li> </ul> </li> <li class="tE_font_style mR15 cv_tooldropdown border_ddd pT0" id="tE_font_style" data-zcqa="canvas_tE_font_style"> <span class="cd_tool_fontStyle" id="fontNameHodler" data-fontname="CanvasFontRegular">'+o(a.getI18n.call(d,"crm.canvas.editor.fontstyle.regular",{name:"getI18n",hash:{},data:s}))+'</span> <ul class="fontstyle_dropdown oA" id="fontstyle_dropdown" data-close="true"> <li  data-fontName="CanvasFontThin" data-zcqa="canvas_cd_ProximaNovaThin" class=\'f14 CanvasFontThin\'>'+o(a.getI18n.call(d,"crm.canvas.editor.fontstyle.thin",{name:"getI18n",hash:{},data:s}))+'</li> <li  data-fontName="CanvasFontLight" data-zcqa="canvas_cd_ProximaNovaLight" class=\'f14 CanvasFontLight\'>'+o(a.getI18n.call(d,"crm.canvas.editor.fontstyle.light",{name:"getI18n",hash:{},data:s}))+'</li> <li data-fontName="CanvasFontRegular" data-zcqa="canvas_cd_ProximaNovaRegular" class=\'f14 CanvasFontRegular\'>'+o(a.getI18n.call(d,"crm.canvas.editor.fontstyle.regular",{name:"getI18n",hash:{},data:s}))+' </li> <li  data-fontName="CanvasFontSemibold" data-zcqa="canvas_cd_ProximaNovaSemibold" class=\'f14 CanvasFontSemibold\'>'+o(a.getI18n.call(d,"crm.canvas.editor.fontstyle.semibold",{name:"getI18n",hash:{},data:s}))+'</li> <li  data-fontName="CanvasFontBold" data-zcqa="canvas_cd_ProximaNovaBold" class=\'f14 CanvasFontBold\'>'+o(a.getI18n.call(d,"crm.canvas.editor.fontstyle.bold",{name:"getI18n",hash:{},data:s}))+'</li> <li  data-fontName="CanvasFontXbold" data-zcqa="canvas_cd_ProximaNovaXbold" class=\'f14 CanvasFontXbold\'>'+o(a.getI18n.call(d,"crm.canvas.editor.fontstyle.extrabold",{name:"getI18n",hash:{},data:s}))+'</li> </ul> </li> <li class="tE_font_styleitalic mR5 border_ddd" id="cd_italic" data-zcqa="canvas_cd_italic"  onclick="jSortable.canvasItalic(this)" data-enable="false"> <span class="cd_tool_fontStyle p0 vat  italic" data-value="false"></span> </li> <li class="tE_font_styleitalic mR5 border_ddd" id="cd_strikethrough" data-zcqa="canvas_cd_strikethrough" onclick="jSortable.canvasStrikeThrough(this)" data-enable="false"> <span class="cd_tool_fontStyle p0  strikethrough"  data-value="false"></span> </li> <li class="tE_fontCaps  tE_font_styleitalic border_ddd mR15" data-zcqa="canvas_tE_font_styleitalic" id="cd_caps" onclick="jSortable.canvasCaps(this)" data-enable="false"> <span class="tE_fontCaps dIB"></span> </li> <li id="tE_color" data-zcqa="canvas_tE_color" class="cv_tooldropdown border_ddd pB2" onclick=\'jSortable.colorPickerToggle(this);\'> <span class="tE_color mR6"></span> <div class="fontcolor_dropdown" id="fontcolor_dropdown" onclick=\'sE(event)\' data-close="true"> <span class=\'cvf12 color_9 dB mB8\'>'+o(a.getI18n.call(d,"crm.canvas.editor.text.colors",{name:"getI18n",hash:{},data:s}))+'</span> <div class=\'text-color-code\'> <span style="background: #000000;" data-zcqa="canvas_txtcolor_000000" data-textcolor="000000"></span> <span style="background: #333333;" data-zcqa="canvas_txtcolor_333333" data-textcolor="333333"></span> <span style="background: #4c4c4c;" data-zcqa="canvas_txtcolor_4c4c4c" data-textcolor="4c4c4c"></span> <span style="background: #666666;" data-zcqa="canvas_txtcolor_666666" data-textcolor="666666"></span> <span  style="background: #7f7f7f;" data-zcqa="canvas_txtcolor_7f7f7f" data-textcolor="7f7f7f"></span> <span  style="background: #999999;" data-zcqa="canvas_txtcolor_999999" data-textcolor="999999"></span> <span style="background: #b2b2b2;" data-zcqa="canvas_txtcolor_b2b2b2" data-textcolor="b2b2b2"></span> <span  style="background: #cccccc;" data-zcqa="canvas_txtcolor_cccccc" data-textcolor="cccccc"></span> <span  style="background: #e5e5e5;" data-zcqa="canvas_txtcolor_e5e5e5" data-textcolor="e5e5e5"></span> <span class=\'bdr_gray\' style="background: #ffffff;" data-zcqa="canvas_txtcolor_ffffff" data-textcolor="ffffff"></span> <span  style="background: #2c7bd0;" data-zcqa="canvas_txtcolor_2c7bd0" data-textcolor="2c7bd0"></span> <span  style="background: #03a87c;" data-zcqa="canvas_txtcolor_03a87c" data-textcolor="03a87c"></span> <span  style="background: #b92b27;" data-zcqa="canvas_txtcolor_b92b27" data-textcolor="b92b27"></span> <span style="background: #27b0b9;" data-zcqa="canvas_txtcolor_27b0b9" data-textcolor="27b0b9"></span> <span id="colorTransparentNode" class=\'bdr_gray cvresetcolor\' data-zcqa="canvas_txtcolor_colorTransparentNode" style="background:#fff ;" data-textcolor="transparent"></span> </div> <div class=\'mT10\'> <span class=\'cvf12 color_9 vam\'>'+o(a.getI18n.call(d,"crm.canvas.editor.hex",{name:"getI18n",hash:{},data:s}))+'</span> <span class=\'bdr_gray curv1px p4 dIB cvlH11\'> <span style="background: #e1e9ec;" id="cd_textColorHolder" class=\'selected-color bdr_gray color_9 vam\' ></span> <span class=\'vam dIB\'># </span> <input type="text" data-zcqa="canvas_selectedTextColor" id=\'selectedTextColor\' class=\'vat\' value="e1e9ec" oninput="jSortable.colorPickerCopyPaste(this,\'color\')"></span> <span class="cvcolorpicker vam mL2" data-zcqa="canvas_text_cvcolorpicker" id="textColorId"></span> </div> <div class=\'mT20\'> <span class=\'cvf12 color_9 dB mB8\'>'+o(a.getI18n.call(d,"crm.canvas.editor.bg.colors",{name:"getI18n",hash:{},data:s}))+'</span> </div> <div class=\'background-listof-color-code\' > <span style="background: #90acb7;" data-bgcolor="90acb7" data-zcqa="canvas_bg_90acb7"></span> <span style="background: #5d7d74;" data-bgcolor="5d7d74" data-zcqa="canvas_bg_5d7d74"></span> <span style="background: #c9b583;" data-bgcolor="c9b583" data-zcqa="canvas_bg_c9b583"></span> <span style="background: #27b0b9;" data-bgcolor="27b0b9" data-zcqa="canvas_bg_27b0b9"></span> <span id="bgTransparentNode" data-bgcolor="transparent" data-zcqa="canvas_bg_transparent" class=\'bdr_gray cvresetcolor\' style="background:#fff ;" data-textcolor=""></span> </div> <div class=\'mT10\'> <span class=\'cvf12 color_9 vam\'>'+o(a.getI18n.call(d,"crm.canvas.editor.hex",{name:"getI18n",hash:{},data:s}))+'</span> <span class=\'bdr_gray curv1px p4 dIB cvlH11\'> <span style="background: #0077b5;" id="cd_textBgHolder" class=\'selected-color vam color_9 bdr_gray\' ></span> <span class=\'vam dIB\'># </span> <input type="text" id=\'selectedBgColor\' data-zcqa="canvas_bg_selectedBgColor"  value="ffffff"  class=\'vat\' oninput="jSortable.colorPickerCopyPaste(this,\'bg\')"></span> <span class="cvcolorpicker vam mL2" id="textBgId" data-zcqa="canvas_bg_cvcolorpicker" ></span> </div> </div> </li> <li class="tE_select_align  cv_tooldropdown border_ddd" data-zcqa="canvas_tE_select_align" id="tE_select_align"> <span id="cdToolAlignImg" class="cd_tool_align tE_leftalin mR3" ></span> <ul class="align_dropdown dN" id="align_dropdown" data-close="true"> <li data-alignClass="txtalnLt" data-align="left" data-alignImgClass="tE_leftalin" data-zcqa="canvas_align_tE_leftalin"> <span class="tE_leftalin "></span> <span>'+o(a.getI18n.call(d,"crm.canvas.editor.label.option2",{name:"getI18n",hash:{},data:s}))+'</span> </li> <li data-alignClass="txtalnMid" data-align="middle" data-alignImgClass="tE_midlalin" data-zcqa="canvas_align_tE_midlalin"> <span class="tE_midlalin "></span> <span>'+o(a.getI18n.call(d,"crm.canvas.editor.label.option4",{name:"getI18n",hash:{},data:s}))+'</span> </li> <li data-alignClass="txtalnRt" data-align="right" data-alignImgClass="tE_rightalin" data-zcqa="canvas_align_tE_rightalin"> <span class="tE_rightalin "></span> <span>'+o(a.getI18n.call(d,"crm.canvas.editor.label.option3",{name:"getI18n",hash:{},data:s}))+'</span> </li> </ul> </li> <li class=\'cvseparatormenu  cv_disable cv_tooldropdown border_ddd\' data-zcqa="canvas_canvasMenuSeparatoru" id="canvasMenuSeparator" title=\''+o(a.getI18n.call(d,"crm.canvas.editor.separator",{name:"getI18n",hash:{},data:s}))+'\' onclick="jSortable.separatorDropDownShow(this, \'bottom\');renderingUtils.stopEvent(event);"> \x3c!--<label for="cviconmenu" class="dIB" onclick="renderingUtils.stopEvent(event);"> <input type="checkbox" class="smallonOffcb" id="cvseparatormenu" onclick="jSortable.showHideIcon();renderingUtils.stopEvent(event);"> <span class="smallonOffSwt"> <span class="smallonOffBtn"></span> </span> </label>--\x3e <span class=\'cvseparatormenudb color_5 cvf12 dIB vam cP\' id="cdSeparatorMenuDropdown"> &middot;</span> </li> <li class="tE_padding cv_disable cP border_ddd mR10 pT0" data-zcqa="canvas_tE_cd_padding" id="cd_padding" onclick=\'jSortable.spacingOpen(this)\'> <span class="cd_tool_fonttype_style p0 cvf12 color_5 cv_tooldropdown" id="cdToolFTypeS"><span class=\'mR6\'>'+o(a.getI18n.call(d,"crm.canvas.editor.spacing.text",{name:"getI18n",hash:{},data:s}))+'</span></span> <div class="cd_toolpaddingOuterBox" id="cd_toolpaddingOuterBox" onclick="sE();" data-close="true"> <div class=\'cd_toolpaddingInnerBox pR\'> <span class=\'cvpadding-top-border cvborderHover\'></span> <span class=\'cvpadding-left-border cvborderHover\'></span> <span class=\'cvpadding-right-border cvborderHover\'></span> <span class=\'cvpadding-bottom-border cvborderHover\'></span> <span class=\'cvpadding-top-box\' data-pos=\'top\' onmouseenter=\'jSortable.cvpaddingBorterShow(this);\' onmouseleave=\'jSortable.cvpaddingBorterHide(this);\'> <span class=\'cvpadding-top-iarrow pR\' data-zcqa="canvas_padding_top_decre" onclick="jSortable.paddingAddSub(\'top\', \'decre\')"></span> <input id="cd_paddingTop" class="cvpadding-top-input color_0 f10"  data-zcqa="canvas_padding_top_input" type="number" name="quantity" maxlength="2" min="0" max="39" step="1" value="0" size="2" onKeyPress="this.oldValue=this.value" oninput="jSortable.addPadding(this, \'top\');"> <span class=\'cvpadding-top-darrow pR\' data-zcqa="canvas_padding_top_incre" onclick="jSortable.paddingAddSub(\'top\', \'incre\')"></span> </span> <span class=\'cvpadding-bottom-box\' data-pos=\'bottom\' onmouseenter=\'jSortable.cvpaddingBorterShow(this);\' onmouseleave=\'jSortable.cvpaddingBorterHide(this);\'> <span class=\'cvpadding-top-iarrow\' data-zcqa="canvas_padding_bottom_decre" onclick="jSortable.paddingAddSub(\'bottom\', \'decre\')"></span> <input  id="cd_paddingBottom" class="cvpadding-top-input color_0 f10" data-zcqa="canvas_padding_bottom_input" type="number" name="quantity" maxlength="2"  min="0" max="39" step="1" value="0" size="2" onKeyPress="this.oldValue=this.value" oninput="jSortable.addPadding(this, \'bottom\');"> <span class=\'cvpadding-top-darrow \' data-zcqa="canvas_padding_bottom_decre" onclick="jSortable.paddingAddSub(\'bottom\', \'incre\')"></span> </span> <span class=\'cvpadding-left-box\' data-pos=\'left\' onmouseenter=\'jSortable.cvpaddingBorterShow(this);\' onmouseleave=\'jSortable.cvpaddingBorterHide(this);\'> <span class=\'cvpadding-left-iarrow\' data-zcqa="canvas_padding_left_decre" onclick="jSortable.paddingAddSub(\'left\', \'decre\')"></span> <input  id="cd_paddingLeft" class="cvpadding-left-input color_0 f10" data-zcqa="canvas_padding_left_input" type="number" name="quantity" maxlength="2" min="0" max="39" step="1" value="0" size="2" onKeyPress="this.oldValue=this.value" oninput="jSortable.addPadding(this, \'left\');"> <span class=\'cvpadding-left-darrow\' data-zcqa="canvas_padding_left_decre" onclick="jSortable.paddingAddSub(\'left\', \'incre\')"></span> </span> <span class=\'cvpadding-right-box\' data-pos=\'right\' onmouseenter=\'jSortable.cvpaddingBorterShow(this);\' onmouseleave=\'jSortable.cvpaddingBorterHide(this);\'> <span class=\'cvpadding-right-iarrow\' data-zcqa="canvas_padding_right_decre" onclick="jSortable.paddingAddSub(\'right\', \'decre\')"></span> <input  id="cd_paddingRight" class="cvpadding-right-input color_0 f10" data-zcqa="canvas_padding_right_input" type="number" name="quantity" maxlength="2" min="0" max="39" step="1" value="0" size="2" onKeyPress="this.oldValue=this.value" oninput="jSortable.addPadding(this, \'right\');"> <span class=\'cvpadding-right-darrow\' data-zcqa="canvas_padding_right_decre" onclick="jSortable.paddingAddSub(\'right\', \'incre\')"></span> </span> <div data-spacingtype="inner" id="cd_paddingMargin" class=\'cd_toolpaddingWhitebox\' onclick="jSortable.paddingMarginChange(this)"> \x3c!--<span class="padding_container">Inner</span>--\x3e \x3c!--<div id="canvasPadding" class="canvas_padding">Inner</div> <div id="canvasMargin" class="canvas_margin">Outer</div>--\x3e </div> </div> </div> </li> </ul> <ul class=\'textEditorMenuTool pL20 pR0\' style=\'padding-bottom:7px !important;\' > <li class=\'cvlabelmenu mR10 p0\' id="cvLabelMenu" data-zcqa="canvas_cvLabelMenu"> <label for="cvlabelmenu"  class="dIB" onclick="renderingUtils.stopEvent();"> <input type="checkbox" class="smallonOffcb" id="cvlabelmenu" checked=true onclick="jSortable.hideOtherOptions();jSortable.labelHandling();" > <span class="smallonOffSwt"> <span class="smallonOffBtn"></span> </span> </label> <span class=\'cvlabelmenudb color_5 cvf12 dIB vam cP\' onclick="jSortable.hideOtherOptions();jSortable.labelalignDropDownShow(this, \'bottom\');renderingUtils.stopEvent(event);"> '+o(a.getI18n.call(d,"crm.label.label",{name:"getI18n",hash:{},data:s}))+' </span> </li> <li class=\'cviconmenu mR20 p0\' id="cvIconMenu" data-zcqa="canvas_cvIconMenu" onclick="jSortable.hideOtherOptions();renderingUtils.stopEvent(event);" title=\''+o(a.getI18n.call(d,"crm.canvas.editor.icon.toottip",{name:"getI18n",hash:{},data:s}))+'\'> <label for="cviconmenu" class="dIB" onclick="renderingUtils.stopEvent(event);"> <input type="checkbox" class="smallonOffcb" id="cviconmenu" onclick="jSortable.hideOtherOptions();jSortable.showHideIcon();"> <span class="smallonOffSwt"> <span class="smallonOffBtn"></span> </span> </label> <span class=\'cviconmenudb color_5 cvf12 dIB vam cP\' id="cdIconMenuDropdown" onclick="jSortable.iconDropDownShow(this, \'bottom\');"> '+o(a.getI18n.call(d,"crm.canvas.editor.icon",{name:"getI18n",hash:{},data:s}))+" </span> </li> <li class='p0' > <ul class='cvcopypaste m0 p0'> <li class='m0 p0 fL' data-zcqa=\"canvas_canvasMenuCp\" id=\"canvasMenuCp\" onclick=\"jSortable.cdCopyStyle();\" title='"+o(a.getI18n.call(d,"crm.canvas.editor.copystyle.tooltip",{name:"getI18n",hash:{},data:s}))+"'><a class='cvf12 color_5'>"+o(a.getI18n.call(d,"crm.canvas.editor.copystyle",{name:"getI18n",hash:{},data:s}))+'</a></li> <li class=\'m0 p0 fL\' data-zcqa="canvas_canvasMenuPs" id="canvasMenuPs" onclick="jSortable.cdPasteStyle();" title=\''+o(a.getI18n.call(d,"crm.canvas.editor.pastestyle.tooltip",{name:"getI18n",hash:{},data:s}))+"'><a class='cvf12 color_5 '>"+o(a.getI18n.call(d,"crm.canvas.editor.pastestyle",{name:"getI18n",hash:{},data:s}))+"</a></li> </ul> </li> <li class='color_5 cvf12 cvgrouplabel cP border_ddd' data-zcqa=\"canvas_canvasMenuUngroup\" id=\"canvasMenuUngroup\" onclick=\"jSortable.removeFromGroup(this);Crm.trackSpotLightAction('Canvas - UnGroup Click');\" title='Remove a field and its value from an existing group'>"+o(a.getI18n.call(d,"crm.canvas.editor.ungroup",{name:"getI18n",hash:{},data:s}))+'</li> \x3c!--<li class=\'color_5 cvf12 cvdeletelabel  cP  p0\' data-zcqa="canvas_cdDeleteIcon" id="cdDeleteIcon" onclick=\'jSortable.deleteElement()\'></li> <li class=\'cP mR10 p0\' onclick="jSortable.cd_undo();sE(event)"><span class=\'cvtopundoicon vam\'></span></li> <li class=\'cP p0 mR0\' onclick="jSortable.cd_redo();sE(event)"><span class=\'cvtopredoicon vam\'></span></li>--\x3e <input type="checkbox" name="vehicle" value="Bike " class=\'dN\' onclick="jSortable.livedemoHideShow(this);"> \x3c!--<li class="tE_lable" onclick="jSortable.addLabel()">Lable</li> <li class="tE_icon mR20" id="tE_icon"> <span class="tE_icon_holder">Icon</span> <ul class="icon_dropdown oA" id="icon_dropdown" style="display:none" data-close="true"> <li data-value="icon-call" class="mR5 mB5 icon-call"></li> <li data-value="icon-zevent" class="mR5 mB5 icon-zevent"></li> <li data-value="icon-zfacebook" class="icon-zfacebook mB5 mR5"></li> <li data-value="icon-zgplus" class="mR5 mB5 icon-zgplus"></li> <li data-value="icon-zmail" class="mR5 mB5 icon-zmail"></li> <li data-value="icon-zmap" class="icon-zmap mB5 mR5"></li> <li data-value="icon-zmobile" class="mR5 mB5 icon-zmobile"></li> <li data-value="icon-ztwitter" class="mR5 mB5 icon-ztwitter"></li> <li data-value="icon-ztast" class="mR5 mB5 icon-ztast"></li> <li data-value="icon-zlinkedin" class="mR5 mB5 icon-zlinkedin"></li> <li data-value="icon-businesscard" class="mR5 mB5 icon-businesscard"></li> <li data-value="icon-campaign" class="icon-campaign mB5 mR5"></li> <li data-value="icon-phone" class="mR5 mB5 icon-phone"></li> <li data-value=" icon-mobile" class="mR5 mB5 icon-mobile"></li> <li data-value=" icon-task" class="mR5 mB5  icon-task"></li> <li data-value="icon-user" class="mR5 mB5  icon-user"></li> <li data-value="icon-zip" class="mR5 mB5  icon-zip"></li> <li data-value="icon-mobile" class="mR5 mB5  icon-zip"></li> </ul> </li>--\x3e \x3c!--<li class="tE_merge cv_disable">Merge</li>--\x3e \x3c!--<li class="tE_separator cv_disable"> <span class="cd_tool_separator fL" id="separator_holder">&diams;</span> <ul class="separator_dropdown oA" id="separator_dropdown" style="display:none" data-true="true"> <li data-value="&middot;" class=" mB5">&middot;</li> <li data-value="&#124;" class="mR5 mB5">&#124;</li> <li data-value="&minus;" class="mB5 mR5">&minus;</li> <li data-value="&frasl;" class="mR5 mB5">&frasl;</li> <li data-value="&#92" class="mB5 mR5">&#92</li> <li data-value="&diams;" class="mR5 mB5">&diams;</li> <li data-value="&rarr;" class="mR5 mB5">&rarr;</li> <li data-value="&#32;" class="mB5 mR5">&#32;</li> <li data-value="&#45;" class="mR5 mB5">&#45;</li> <li data-value="&#44;" class="mR5 mB5">&#44;</li> <li data-value="&#47&#47;" class="mB5 mR5">&#47&#47;</li> <li data-value="&#58" class="mR5 mB5">&#58</li> <li data-value="&amp;" class="mR5 mB5">&amp;</li> </ul> </li>--\x3e \x3c!--<li onclick="jSortable.cd_undo();sE(event)" class=\'cvundo mT7 mL10\'></li> <li onclick="jSortable.cd_redo();sE(event)" class=\'cvredo mT7 mL5 mR10\'></li>--\x3e </ul> </div> <div class=\'cvimagesToolbar dN\' id="cvimagesToolbar"> <ul class=\'textEditorMenuTool pL20 pR0\'> <li> <span> <span class=\'cvf12 color_5 mR10\'>'+o(a.getI18n.call(d,"crm.canvas.editor.radius",{name:"getI18n",hash:{},data:s}))+': </span> <span class=" pR" > <span class=\'cvrangesliderbg\'></span> <input type=\'range\'  data-zcqa="canvas_cvrangeslider" class=\'cvrangeslider\' min="0" max="50" value="0"/  oninput="jSortable.radiusRange(event,this)"onchange="jSortable.radiusRange(event,this)"> </span> </span> </span> </span> </li> \x3c!--<li class="color_5 cvf12 cvdeletelabel cP p0" data-zcqa="canvas_cvdeletelabel" onclick="jSortable.deleteElement()"></li>--\x3e </ul> </div> <div class=\'cvspecialToolbar dN\' id="cvspecialToolbar"> <ul class=\'textEditorMenuTool pL20 pR0\'> \x3c!--<li class="color_5 cvf12 cvdeletelabel cP mR15 p0" onclick="jSortable.deleteElement()"></li>--\x3e </ul> </div> </div> \x3c!-- <ul id="textEditorMenu" class="textEditorMenu pA cv_disable"> <li class="tE_selectFont"> <span>14</span> <ul class="font_dropdown oA" id="font_dropdown"> <li class="cv_font cd_fs11" style="font-size: 11px">11px</li> <li class="cv_font cd_fs12" style="font-size: 12px">12px</li> <li class="bld cv_font cd_fs13" style="font-size: 13px">13px</li> <li class="cv_font cd_fs14" style="font-size: 14px">14px</li> <li class="cv_font cd_fs15" style="font-size: 15px">15px</li> <li class="cv_font cd_fs16" style="font-size: 16px">16px</li> <li class="cv_font cd_fs17" style="font-size: 17px">17px</li> <li class="cv_font cd_fs18" style="font-size: 18px">18px</li> <li class="cv_font cd_fs19" style="font-size: 19px">19px</li> <li class="cv_font cd_fs20" style="font-size: 20px">20px</li> <li class="cv_font cd_fs21" style="font-size: 21px">21px</li> <li class="cv_font cd_fs22" style="font-size: 22px">22px</li> <li class="cv_font cd_fs23" style="font-size: 23px">23px</li> <li class="cv_font cd_fs24" style="font-size: 24px">24px</li> <li class="cv_font cd_fs26" style="font-size: 26px">26px</li> <li class="cv_font cd_fs29" style="font-size: 29px">29px</li> <li class="cv_font cd_fs32" style="font-size: 32px">32px</li> </ul> </li> <li id="tE_color" class="tE_color"> <span class="dIB"></span> </li> <li class="tE_font_style pR" id="tE_font_style" > <span>CanvasFontRegular</span> </li> \x3c!--<li class="tE_bold" id="tE_bold">Bold</li> <li class="tE_italic">Italic</li>-- <li class=""><span class="tE_leftalin"></span></li> <li class=""><span class="tE_midlalin"></span></li> <li class=""><span class="tE_rightalin"></span></li> <li class="tE_merge cv_disable">Merge</li> <li class="tE_lable" onclick="jSortable.lable()"> <span class="cv_customCheckBox"></span> Lable </li> <li class="tE_icon cv_disable" onclick="jSortable.icon()"> <span class="cv_customCheckBox"></span> Icon </li> </ul> --\x3e <div id="table_demo" class="table_demo"> <table id="struture_demo" class="struture_demo"></table> <table id="tableRow" class="tableRow"></table> <table id="tableRowdummy" class="tableRowdummy"></table> </div> <div id="customizationpreviewdiv" class=\'newPopup ppTop  is-scroll newPopupStyleEle\'> <h2 class=" mB0 pp-header">'+o(a.getI18n.call(d,"crm.button.preview",{name:"getI18n",hash:{},data:s}))+'<span data-zcqa=\'canvas_preview_close\' class="newPopupCloseIcon svgIcons ico-close-small2 cP op08 dIB fR" onclick=\'crmui.hidePopup("customizationpreviewdiv");\'></span></h2> <div class="pp-content bottomForc" id=\'customizationpreviewdivdata\'> </div> </div> <div id="cviewName" name="cviewName" class="newPopup ppTop p0 newPopupStyleEle" style="display: none;top:0px"> '+(null!=(l=a.unless.call(d,null!=t?t.id:t,{name:"unless",hash:{},fn:e.program(9,s,0),inverse:e.program(14,s,0),data:s}))?l:"")+' </div> \x3c!-- <div id="cv_demo" class="cv_demo"> //<div>Instant Preview</div> <div class="grid-stack-demo" id="grid-demo" data-gs-animate="true" > <div class="cB"></div> </div> <div id="table_demo" class="table_demo"> <table id="tableRow" class="tableRow"></table> <table id="tableRowdummy" class="tableRowdummy"></table> </div> </div> --\x3e </div> <ul id="cview_contextmenu" class="cview_contextmenu" style="display: none;"> <li id="cd_addLabel"  data-zcqa="canvas_tool_cd_addLabel" class="cd_addLabel" onclick="jSortable.addLabel(\'add\');">'+o(a.getI18n.call(d,"crm.canvas.editor.show.label",{name:"getI18n",hash:{},data:s}))+'</li> <li id="cd_HideLabel" data-zcqa="canvas_tool_cd_HideLabel" class="cd_hideLabel" onclick="jSortable.addLabel(\'remove\');">'+o(a.getI18n.call(d,"crm.canvas.editor.hide.label",{name:"getI18n",hash:{},data:s}))+'</li> <li id="cd_LabelTop" data-zcqa="canvas_tool_cd_LabelTop" class="" onclick="jSortable.labelPosition(this,\'top\');">'+o(a.getI18n.call(d,"crm.canvas.editor.label.top",{name:"getI18n",hash:{},data:s}))+'</li> <li id="cd_LabelLeft" data-zcqa="canvas_tool_cd_LabelLeft" class="" onclick="jSortable.labelPosition(this,\'left\');">'+o(a.getI18n.call(d,"crm.canvas.editor.label.left",{name:"getI18n",hash:{},data:s}))+'</li> <li id="cd_addIcon" data-zcqa="canvas_tool_cd_addIcon" class="cd_addIcon pR" onclick="jSortable.iconDropDownShow(this,\'side\');"> <span>'+o(a.getI18n.call(d,"crm.canvas.editor.show.icon",{name:"getI18n",hash:{},data:s}))+'</span> </li> \x3c!--<li id="cd_hideIcon" class="" onclick="$(\'#emptyIcon\').trigger(\'click\')">Hide Icon</li>--\x3e <li id="cd_changeIcon" data-zcqa="canvas_tool_cd_changeIcon" class="cd_addIcon pR" onclick="jSortable.iconDropDownShow(this,\'side\');"> <span>'+o(a.getI18n.call(d,"crm.canvas.editor.change.icon",{name:"getI18n",hash:{},data:s}))+'</span> \x3c!--<ul class="separator_dropdown" id="icon_dropdown" style="display:none"> <li data-value="icon-call" class="mR5 mB5 icon-call"></li> <li data-value="icon-zevent" class="mR5 mB5 icon-zevent"></li> <li data-value="icon-zfacebook" class="icon-zfacebook mB5 mR5"></li> <li data-value="icon-zgplus" class="mR5 mB5 icon-zgplus"></li> <li data-value="icon-zmail" class="mR5 mB5 icon-zmail"></li> <li data-value="icon-zmap" class="icon-zmap mB5 mR5"></li> <li data-value="icon-zmobile" class="mR5 mB5 icon-zmobile"></li> <li data-value="icon-ztwitter" class="mR5 mB5 icon-ztwitter"></li> <li data-value="icon-ztast" class="mR5 mB5 icon-ztast"></li> <li data-value="icon-zlinkedin" class="mR5 mB5 icon-zlinkedin"></li> <li data-value="icon-businesscard" class="mR5 mB5 icon-businesscard"></li> <li data-value="icon-campaign" class="icon-campaign mB5 mR5"></li> <li data-value="icon-phone" class="mR5 mB5 icon-phone"></li> <li data-value=" icon-task" class="mR5 mB5  icon-task"></li> <li data-value="icon-user" class="mR5 mB5  icon-user"></li> <li data-value="icon-zip" class="mR5 mB5  icon-zip"></li> </ul>--\x3e </li> <li id="cd_HideIcon" data-zcqa="canvas_tool_cd_HideIcon" class="cd_hideLabel" onclick="jSortable.deleteElement()">'+o(a.getI18n.call(d,"crm.canvas.editor.hide.icon",{name:"getI18n",hash:{},data:s}))+'</li> <li id="tE_separator" data-zcqa="canvas_tool_tE_separator" class="tE_separator pR" onclick="jSortable.separatorDropDownShow(this, \'left\');"> <span>'+o(a.getI18n.call(d,"crm.canvas.editor.separator",{name:"getI18n",hash:{},data:s}))+'</span> \x3c!--<ul class="separator_dropdown" id="separator_dropdown" style="display:none"> <li data-value="" class="mR5 mB5"><span class=\'noseperatoricon\'></span></li> <li data-value="&middot;" class="mR5 mB5">&middot;</li> <li data-value="&#43;" class="mR5 mB5">&#43;</li> <li data-value="&#124;" class="mR5 mB5">&#124;</li> <li data-value="&minus;" class="mB5 mR5">&minus;</li> <li data-value="&frasl;" class="mR5 mB5">&frasl;</li> <li data-value="&#92" class="mB5">&#92</li> <li data-value="&diams;" class="mR5 mB5">&diams;</li> <li data-value="&amp;" class="mR5 mB5">&amp;</li> <li data-value="&#9656;" class="mR5 mB5">&#9656;</li> <li data-value="&#44;" class="mR5 mB5 cvlh16">&#44;</li> <li data-value="&#58" class="mR5 mB5">&#58</li> <li data-value="&rarr;" class="mR5 mB5 cvlh22">&rarr;</li> <li data-value="&larr;" class="mR5 mB5 cvlh22">&larr;</li> <li data-value="&#47&#47;" class="mB5">&#47&#47;</li> </ul>--\x3e </li> <li id="cd_style_copy" data-zcqa="canvas_tool_cd_style_copy" class="cd_style_copy dN" onclick="jSortable.cdCopyStyle()"> '+o(a.getI18n.call(d,"crm.canvas.editor.copystyle",{name:"getI18n",hash:{},data:s}))+' </li> <li id="cd_style_paste" data-zcqa="canvas_tool_cd_style_paste" class="cd_style_pastem dN" onclick="jSortable.cdPasteStyle()"> '+o(a.getI18n.call(d,"crm.canvas.editor.pastestyle",{name:"getI18n",hash:{},data:s}))+' </li> <li id="cd_radius" data-zcqa="canvas_tool_cd_radius" class="pR" onclick="jSortable.rangeOpen(this)"> <span>'+o(a.getI18n.call(d,"crm.canvas.editor.radius",{name:"getI18n",hash:{},data:s}))+'</span> <div class="cd_range " id="cd_range" style="display:none"> <span class=\'pR\'> <span class="cvrangesliderbg"></span> <input type="range" min="0" max="50" value="0" id="borderRadiusBar" class="cvrangeslider" oninput="jSortable.radiusRange(event,this)" onchange="jSortable.radiusRange(event,this)"> </span> </div> </li> <li id=\'cd_removeFromGroup\' data-zcqa="canvas_tool_cd_addLabel" class=\'cd_removeFromGroup dN\' onclick=\'jSortable.removeFromGroup()\'> '+o(a.getI18n.call(d,"crm.canvas.editor.remove.form.group",{name:"getI18n",hash:{},data:s}))+' </li> <li id="cd_rightClick_delete" data-zcqa="canvas_tool_cd_rightClick_delete" onclick="jSortable.deleteElement()"> '+o(a.getI18n.call(d,"crm.button.mass.delete",{name:"getI18n",hash:{},data:s}))+" </li> \x3c!--<li id='cd_style_round' class='cd_style_round dN' onclick='jSortable.imageRadius(\"round\")'> Rounded </li> <li id='cd_style_squre' data-zcqa=\"canvas_tool_cd_style_squre\"  class='cd_style_round dN' onclick='jSortable.imageRadius()'> Square </li>--\x3e \x3c!--<li id=\"cd_contexUntMerge\" class=\"cd_contextUnMerge\" onclick=\"jSortable.unmergeNew()\">Un Group</li>--\x3e </ul> </div> "},useData:!0}),t.galleryPage=e({compiler:[7,">= 4.0.0"],main:function(e,t,a,i,s){var l=null!=t?t:{},n=e.escapeExpression;return'<div class="cvGallery_head">GALLERY</div> \x3c!--view1--\x3e <div class="cv_gallery_outer pR"> <table class="cview_table" style="height: 70px;"> <tbody> <tr> <td class="cv_custom_section" style="width: 82px;"> <div id="image" class="components" oncontextmenu="return false" index="0"> <img src="images/dumpic0.jpg" title="profile" style="height:62px;width:62px;"></div> <span class="cv_settingicon" onclick="crmView.cvSettingsClick(this)"><span></span></span></td> <td class="cv_custom_section" style="width: 155px;"> <table class="cv_insert_tbl" style="height: 25px;"> <tbody> <tr> <td> <div id="firstname" class="components" oncontextmenu="return false" index="0"><span name="firstname" style=" color: rgb(6, 106, 194); font-size:1.8rem;">Juliette</span></div> <span class="cv_settingicon" onclick="crmView.cvSettingsClick(this)"><span></span></span> </td> </tr> </tbody> </table> <table class="cv_insert_tbl" style="height: 24px;"> <tbody> <tr> <td> <div id="company" class="components" oncontextmenu="return false" index="10"><span name="company">QWERTY Logistics</span></div> <span class="cv_settingicon" onclick="crmView.cvSettingsClick(this)"><span></span></span> </td> </tr> </tbody> </table> <table class="cv_insert_tbl" style="height: 21px;"> <tbody> <tr> <td> <div id="leadsource" class="components" oncontextmenu="return false" index="14"><span name="leadsource" class="ui-draggable">Website</span></div> <span class="cv_settingicon" onclick="crmView.cvSettingsClick(this)"><span></span></span> </td> </tr> </tbody> </table> </td> <td class="cv_custom_section" style="width: 195px;"> <table class="cv_insert_tbl" style="height: 25px;"> <tbody> <tr> <td> <div id="secondaryemail" class="components" oncontextmenu="return false" index="0"><span name="secondaryemail" class="ui-draggable">mccallister@yahoo.com</span></div> <span class="cv_settingicon" onclick="crmView.cvSettingsClick(this)"><span></span></span> </td> </tr> </tbody> </table> <table class="cv_insert_tbl" style="height: 24px;"> <tbody> <tr> <td> <div id="phone" class="components" oncontextmenu="return false" index="10"><span name="phone" class="ui-draggable">202-555-0176</span> </div> <span class="cv_settingicon" onclick="crmView.cvSettingsClick(this)"><span></span></span></td> </tr> </tbody> </table> <table class="cv_insert_tbl" style="height: 21px;"> <tbody> <tr> <td> <div id="fax" class="components" oncontextmenu="return false" index="11"><span name="fax" class="ui-draggable">(619) 555-1350</span> </div> <span class="cv_settingicon" onclick="crmView.cvSettingsClick(this)"><span></span></span></td> </tr> </tbody> </table> </td> <td class="cv_custom_section" style="width: 701px;"> <table class="cv_insert_tbl" style="height: 25px;"> <tbody> <tr> <td> <div id="modifiedtime" class="components" oncontextmenu="return false" index="17"><span name="modifiedtime" class="ui-draggable basic_edit bld" style="font-weight: bold;">2011-04-13 00:36:51</span> </div> <span class="cv_settingicon" onclick="crmView.cvSettingsClick(this)"><span></span></span></td> </tr> </tbody> </table> <table class="cv_insert_tbl" style="height: 45px;"> <tbody> <tr> <td> <div id="leadowner" class="components" oncontextmenu="return false" index="10"><span name="leadowner" class="ui-draggable">Robert Jennifer</span> </div> <span class="cv_settingicon" onclick="crmView.cvSettingsClick(this)"><span></span></span></td> </tr> </tbody> </table> </td> </tr> </tbody> </table> <input class="greenbtn btn_big floatL pA cvgallerybtn" type="button" value="Select" onclick="jSortable.selectFromGallery(\'view1\')"> </div> \x3c!--view2--\x3e <div class="cv_gallery_outer pR"> <table class="cview_table" style="height: 97px;"> <tbody> <tr> <td class="cv_custom_section" style="width: 83px;"> <div id="image" class="components" oncontextmenu="return false" index="2"> <img src="images/dumpic1.jpg" title="profile" style="height:70px;width:70px;" class="circle_img"></div> <span class="cv_settingicon" onclick="crmView.cvSettingsClick(this)"><span></span></span></td> <td class="cv_custom_section" style="width: 195px;"> <table class="cv_insert_tbl" style="height: 23px;"> <tbody> <tr> <td class=""> <div id="firstname" class="components" oncontextmenu="return false" index="0"><span name="firstname" class="bld ui-draggable" style="font-weight: bold;">Dave</span> </div> <span class="cv_settingicon" onclick="crmView.cvSettingsClick(this)"><span></span></span></td> </tr> </tbody> </table> <table class="cv_insert_tbl" style="height: 22px;"> <tbody> <tr> <td class=""> <span class="cv_settingicon" onclick="crmView.cvSettingsClick(this)"><span></span></span><div id="company" class="components" oncontextmenu="return false" index="0"><span name="company" class="ui-draggable" style="color: rgb(66, 125, 227);">Galaxy Corp</span></div></td> </tr> </tbody> </table> <table class="cv_insert_tbl" style="height: 27px;"> <tbody> <tr> <td class=""> <div id="secondaryemail" class="components" oncontextmenu="return false" index="23"><span name="secondaryemail" class="basic_edit ui-draggable" style="color: rgb(255, 255, 255); background-color: rgb(47, 189, 177);">jhony@yahoo.com</span> </div> </td> </tr> </tbody> </table><table class="cv_insert_tbl" style="height: 25px;"> <tbody> <tr> <td class=""> <div id="mobilenumber" class="components" oncontextmenu="return false" index="0"><span name="mobilenumber" class="ui-draggable">936819897</span></div></td> </tr> </tbody> </table> </td> <td class="cv_custom_section" style="width: 130px;"> <table class="cv_insert_tbl" style="height: 23px;"> <tbody> <tr> <td class=""> <div id="country" class="components" oncontextmenu="return false" index="17"><span name="country" class="ui-draggable">India</span> </div> <span class="cv_settingicon" onclick="crmView.cvSettingsClick(this)"><span></span></span></td> </tr> </tbody> </table> <table class="cv_insert_tbl" style="height: 22px;"> <tbody> <tr> <td class=""> <div id="city" class="components" oncontextmenu="return false" index="14"><span name="city" class="ui-draggable">New Jersey</span> </div> <span class="cv_settingicon" onclick="crmView.cvSettingsClick(this)"><span></span></span></td> </tr> </tbody> </table> <table class="cv_insert_tbl" style="height: 52px;"> <tbody> <tr> <td class=""> <div id="state" class="components" oncontextmenu="return false" index="13"><span name="state" class="ui-draggable">california</span> </div> <span class="cv_settingicon" onclick="crmView.cvSettingsClick(this)"><span></span></span></td> </tr> </tbody> </table> </td> <td class="cv_custom_section" style="width: 723px;"> <table class="cv_insert_tbl" style="height: 23px;"> <tbody> <tr> <td class=""> <div id="modifiedtime" class="components" oncontextmenu="return false" index="13"><span name="modifiedtime" class="ui-draggable"style="color: rgb(218, 232, 240); background-color: rgb(8, 126, 204);">2012-06-23 02:46:41</span> </div> </td> </tr> </tbody> </table><table class="cv_insert_tbl" style="height: 74px;"> <tbody> <tr> <td class=""> <div id="leadowner" class="components" oncontextmenu="return false" index="9"><span name="leadowner" class="ui-draggable">Clive Zake</span></div></td> </tr> </tbody> </table> </td> </tr> </tbody> </table> \x3c!-- <table class="cview_table"> <tbody> <tr> <td class="cv_custom_section ui-droppable" style="width: 9%;"> <div id="image" class="components" oncontextmenu="return false" index="2"><img src="'+n(a.getCrmImageUrl.call(l,"gallery2.jpg",{name:"getCrmImageUrl",hash:{},data:s}))+'" title="profile" class="circle_img" style="height:62px;width:62px;"></div></td> <td class="cv_custom_section ui-droppable" style="width: 22.3562%;"> <table class="cv_insert_tbl" style="height: 26%;"><tbody><tr><td class="ui-droppable"><div id="firstname" class="components" oncontextmenu="return false" index="0">Juliette</div></td></tr></tbody></table><table class="cv_insert_tbl" style="height: 27%;"><tbody><tr><td class="ui-droppable"><div id="company" class="components" oncontextmenu="return false" index="5">QWERTY Logistics</div></td></tr></tbody></table><table class="cv_insert_tbl" style="height: 26%;"><tbody><tr><td class="ui-droppable"><div id="secondaryemail" class="components" oncontextmenu="return false" index="23">mccallister@yahoo.com</div></td></tr></tbody></table><table class="cv_insert_tbl" style="height: 17%;"><tbody><tr><td class="ui-droppable"><div id="mobilenumber" class="components" oncontextmenu="return false" index="1">9379236819</div></td></tr></tbody></table></td><td class="cv_custom_section ui-droppable" style="width: 20.4082%;"><table class="cv_insert_tbl" style="height: 26%;"><tbody><tr><td class="ui-droppable"><div id="country" class="components" oncontextmenu="return false" index="17">India</div></td></tr></tbody></table><table class="cv_insert_tbl" style="height: 27%;"><tbody><tr><td class="ui-droppable"><div id="city" class="components" oncontextmenu="return false" index="14">New Orleans</div></td></tr></tbody></table><table class="cv_insert_tbl" style="height: 26%;"><tbody><tr><td class="ui-droppable"><div id="state" class="components" oncontextmenu="return false" index="13">Caracas</div></td></tr></tbody></table><table class="cv_insert_tbl" style="height: 21%;"><tbody><tr><td class="ui-droppable"></td></tr></tbody></table></td><td class="cv_custom_section ui-droppable" style="width: 48%;"><table class="cv_insert_tbl" style="height: 24%;"><tbody><tr><td class="ui-droppable"><div id="modifiedby" class="components" oncontextmenu="return false" index="13">Robert Jennifer</div></td></tr></tbody></table><table class="cv_insert_tbl" style="height: 76%;"><tbody><tr><td class="ui-droppable"><div id="modifiedtime" class="components" oncontextmenu="return false" index="13">2011-04-13 00:36:51</div></td></tr></tbody></table></td> </tr> </tbody> </table>--\x3e <input class="greenbtn btn_big floatL pA cvgallerybtn" type="button" value="Select" onclick="jSortable.selectFromGallery(\'view2\')"> </div> \x3c!--view3--\x3e <div class="cv_gallery_outer pR"> <table class="cview_table" style="height: 71px;"> <tbody> <tr> <td class="cv_custom_section" style="width: 79px;"> <div id="image" class="components" oncontextmenu="return false" index="2"><img src="images/dumpic2.jpg" title="profile" style="height:62px;width:62px;"></div> <span class="cv_settingicon" onclick="crmView.cvSettingsClick(this)"><span></span></span></td> <td class="cv_custom_section" style="width: 1057px;"> <table class="cv_insert_tbl" style="height: 38px;"> <tbody> <tr> <td style="width: 126px;" class=""> <div id="firstname" class="components" oncontextmenu="return false" index="0"><span name="firstname" class="ui-draggable">Prince</span> </div> <span class="cv_settingicon" onclick="crmView.cvSettingsClick(this)"><span></span></span></td> <td class="cv_custom_section" style="width: 288px;"> <div id="company" class="components" oncontextmenu="return false" index="5"><span name="company" class="basic_edit ui-draggable" style="color: rgb(17, 156, 144);">Globex Corporation</span> </div> <span class="cv_settingicon" onclick="crmView.cvSettingsClick(this)"><span></span></span></td> <td class="cv_custom_section" style="width: 252px;"> <div id="fax" class="components" oncontextmenu="return false" index="7"><span name="fax" class="ui-draggable">(526) 485-2430</span> </div> <span class="cv_settingicon" onclick="crmView.cvSettingsClick(this)"><span></span></span></td><td class="cv_custom_section" style="width: 385px;"><div id="leadowner" class="components" oncontextmenu="return false" index="0"><span name="leadowner" class="ui-draggable">Jake Jhonson</span></div><span class="cv_settingicon" onclick="crmView.cvSettingsClick(this)"><span></span></span></td> </tr> </tbody> </table> <table class="cv_insert_tbl" style="height: 33px;"> <tbody> <tr> <td class="" style="width: 208px;"> <div id="secondaryemail" class="components" oncontextmenu="return false" index="22"><span name="secondaryemail" class="ui-draggable">zaketer@outlook.com</span> </div> <span class="cv_settingicon" onclick="crmView.cvSettingsClick(this)"><span></span></span></td> <td class="cv_custom_section" style="width: 204px;"> <div id="brandname" class="components" oncontextmenu="return false" index="33"><span name="brandname" class="ui-draggable">by AAZEEM</span></div><span class="cv_settingicon" onclick="crmView.cvSettingsClick(this)"><span></span></span></td> <td class="cv_custom_section" style="width: 632px;"> <div id="mobilenumber" class="components" oncontextmenu="return false" index="1"><span name="mobilenumber" class="ui-draggable">9600056940</span> </div> <span class="cv_settingicon" onclick="crmView.cvSettingsClick(this)"><span></span></span></td> </tr> </tbody> </table> </td> </tr> </tbody> </table> <input class="greenbtn btn_big floatL pA cvgallerybtn" type="button" value="Select" onclick="jSortable.selectFromGallery(\'view3\')"> </div> \x3c!--view4--\x3e <div class="cv_gallery_outer pR"> <table class="cview_table" style="height: 74px;"> <tbody> <tr> <td class="cv_custom_section" style="width: 81px;"> <div id="image" class="components" oncontextmenu="return false" index="0"> \x3c!--<table class="cv_insert_tbl" style=""> <tbody> <tr> <td class="ui-droppable"> <div class="cv_row_handle ui-draggable"></div> </div> </td> </tr> </tbody> </table>--\x3e <img src="images/dumpic4.jpg" title="profile" style="height:62px;width:62px;"></div> <span class="cv_settingicon" onclick="crmView.cvSettingsClick(this)"><span></span></span></td> <td class="cv_custom_section" style="width: 1055px;"> <table class="cv_insert_tbl" style="height: 29px;"> <tbody> <tr> <td class=""> <span class="cv_settingicon" onclick="crmView.cvSettingsClick(this)"><span></span></span><div id="productdetails" class="components" oncontextmenu="return false" index="0"><span name="productdetails" class="ui-draggable" style="color: rgb(27, 53, 158); font-size:1.8rem; ">Super Built-up Area : 1575 Sq.Ft. @ 6999 / Sq.Ft.</span></div></td> </tr> </tbody> </table> <table class="cv_insert_tbl" style="height: 24px;"> <tbody> <tr> <td style="width: 127px;" class=""> <div id="street" class="components" oncontextmenu="return false" index="19"><span name="street" class="ui-draggable">59 Rogers Ave.</span> </div> <span class="cv_settingicon" onclick="crmView.cvSettingsClick(this)"><span></span></span></td> <td class="cv_custom_section" style="width: 104px;"> <div id="state" class="components" oncontextmenu="return false" index="20"><span name="state" class="ui-draggable">Caracas</span> </div> <span class="cv_settingicon" onclick="crmView.cvSettingsClick(this)"><span></span></span></td> <td class="cv_custom_section" style="width: 145px;"> <div id="city" class="components" oncontextmenu="return false" index="19"><span name="city" class="ui-draggable">New Orleans</span> </div> <span class="cv_settingicon" onclick="crmView.cvSettingsClick(this)"><span></span></span></td> <td class="cv_custom_section" style="width: 662px;"> <div id="country" class="components" oncontextmenu="return false" index="20"><span name="country" class="ui-draggable" style="color: rgb(158, 113, 37); font-size:1.4rem;">India</span> </div> <span class="cv_settingicon" onclick="crmView.cvSettingsClick(this)"><span></span></span></td> </tr> </tbody> </table> <table class="cv_insert_tbl" style="height: 21px;"> <tbody> <tr> <td class=""> <div id="description" class="components" oncontextmenu="return false" index="0"><span name="description" class="ui-draggable" style="color: rgb(59, 33, 2);">Radiance mandarin, An upcoming residential development by radiance realty is located in thoraipakkam, Chennai south. The project offers well designed 1-4 bhk apartments which are approved by leading financial institutions including axis bank, Icici bank and hdfc bank</span> </div> <span class="cv_settingicon" onclick="crmView.cvSettingsClick(this)"><span></span></span></td> </tr> </tbody> </table> </td> </tr> </tbody> </table> <input class="greenbtn btn_big floatL pA cvgallerybtn" type="button" value="Select" onclick="crmView.toggle(2, this, \'4\')"> </div> \x3c!--view5--\x3e <div class="cv_gallery_outer pR"> <table class="cview_table"> <tbody> <tr> <td class="cv_custom_section ui-droppable" style="width: 9%;"> <div id="image" class="components" oncontextmenu="return false" index="0"><img src="images/dumpic8.jpg" title="profile" style="height:62px;width:62px;"></div></td> <td class="cv_custom_section ui-droppable" style="width: 91%;"> <table class="cv_insert_tbl" style="height: 13%;"><tbody><tr><td class="ui-droppable"><div id="productname" class="components" oncontextmenu="return false" index="31" style="font-weight: bold; color: rgb(0, 5, 108);">Style Homez Luxurious Hand Tufted Soft Feel Cotton Bath Mat, Grey Color</div></td></tr></tbody></table><table class="cv_insert_tbl" style="height: 29%;"><tbody><tr><td class="ui-droppable"><div id="brandname" class="components" oncontextmenu="return false" index="31">by Style HomeZ</div></td></tr></tbody></table><table class="cv_insert_tbl" style="height: 56%;"><tbody><tr><td class="ui-droppable" style="width: 58%;"><div id="cost" class="components" oncontextmenu="return false" index="0">249.00</div></td><td class="cv_custom_section ui-droppable" style="width: 33%;"><div id="company" class="components" oncontextmenu="return false" index="7">QWERTY Logistics</div></td></tr></tbody></table></td> </tr> </tbody> </table> <input class="greenbtn btn_big floatL pA cvgallerybtn" type="button" value="Select" onclick="crmView.toggle(2, this,\'5\')"> </div> \x3c!--view6 <div class="cv_gallery_outer pR"> <table class="cview_table"> <tbody> <tr> <td class="cv_custom_section" style=""> <div id="image" class="components componentImg" oncontextmenu="return false" index="0"><img src="'+n(a.getCrmImageUrl.call(l,"gallery6.jpg",{name:"getCrmImageUrl",hash:{},data:s}))+'" title="profile" style="height:62px;width62px;"> </div> </td> <td class="cv_custom_section" style=""> <table class="cv_insert_tbl" style=""> <tbody> <tr> <td class="" style=""> <div id="firstname" class="components" oncontextmenu="return false" index="0" style="margin-right: 20px;"></div> </td><td class="cv_custom_section" style=""><div id="mobilenumber" class="components" oncontextmenu="return false" index="3" style="margin-right: 20px;">7708924567</div></td><td class="cv_custom_section" style=""><div id="leadname" class="components" oncontextmenu="return false" index="5" style="margin-right: 20px;">Macrina</div></td><td class="cv_custom_section" style=""><div id="company" class="components" oncontextmenu="return false" index="5" style="margin-right: 20px;">Palm Beach Polo @ Wellington</div></td> </tr> </tbody> </table> <table class="cv_insert_tbl" style=""> <tbody> <tr> <td class="" style=""> <div id="company" class="components" oncontextmenu="return false" index="4" style="margin-right: 20px;">Palm Beach Polo @ Wellington</div> </td><td class="cv_custom_section" style=""><div id="leadowner" class="components" oncontextmenu="return false" index="6" style="margin-right: 20px;">Zake Gnaiger</div></td><td class="cv_custom_section" style=""><div id="phone" class="components" oncontextmenu="return false" index="5" style="margin-right: 20px;">345-678-2345</div></td><td class="cv_custom_section" style=""><div id="leadsource" class="components" oncontextmenu="return false" index="6" style="margin-right: 20px;">Win A Free Cart Promo</div></td> </tr> </tbody> </table> </td> </tr> </tbody> </table> <input class="greenbtn btn_big floatL pA cvgallerybtn" type="button" value="Select" onclick="crmView.toggle(2, this,\'5\')"> </div>--\x3e '},useData:!0}),t.sidemenu=e({1:function(e,t,a,i,s){var l,n=e.lambda,o=e.escapeExpression,d=null!=t?t:{};return' <div class="grid-stack-item mT5"\n        data-gs-x="0" data-gs-y="0"\n        data-gs-width="12" data-gs-height="2" data-zcqa="dv_'+o(n(null!=t?t.field_label:t,t))+'" data-array="'+o(a.objToString.call(d,t,{name:"objToString",hash:{},data:s}))+'" field-lable="false" fields-type="field" fields-name="'+o(a.encodeForHTMLAttribute.call(d,a.toUpperCase.call(d,null!=t?t.field_label:t,{name:"toUpperCase",hash:{},data:s}),{name:"encodeForHTMLAttribute",hash:{},data:s}))+'" title="'+o(n(null!=t?t.field_label:t,t))+'" id="component_'+(null!=(l=a.ifEquals.call(d,null!=t?t.data_type:t,"Owner_Photo",{name:"ifEquals",hash:{},fn:e.program(2,s,0),inverse:e.program(4,s,0),data:s}))?l:"")+'"> <div class="grid-stack-item-content txtalnLt sidebar_spacing"> <span class="cd_field field_valueHolder sidebar_DragIcon" field="true"  id="dv_'+o(a.toUpperCase.call(d,null!=t?t.field_label:t,{name:"toUpperCase",hash:{},data:s}))+'">'+o(n(null!=t?t.field_label:t,t))+" </span> </div> </div> "},2:function(e,t,a,i,s){return e.escapeExpression(e.lambda(null!=t?t.data_type:t,t))},4:function(e,t,a,i,s){return e.escapeExpression(e.lambda(null!=t?t.id:t,t))},compiler:[7,">= 4.0.0"],main:function(e,t,a,i,s){var l;return(null!=(l=a.each.call(null!=t?t:{},t,{name:"each",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+" "},useData:!0}),t.sidemenu_btn=e({1:function(e,t,a,i,s){var l=e.escapeExpression,n=e.lambda;return' <div class="grid-stack-item mT5"\n    data-gs-x="0" data-gs-y="1"\n    data-gs-width="12" data-gs-height="1" data-array="'+l(a.objToString.call(null!=t?t:{},t,{name:"objToString",hash:{},data:s}))+'" fields-type="button" title="button" fields-name="button" field-lable="false" id="component_'+l(n(null!=t?t.id:t,t))+'"> <div class="cv_fieldsbtn grid-stack-item-content sidebar_spacing">   <span class="cd_btn cd_field field_valueHolder">'+l(n(null!=t?t.name:t,t))+"</span> </div> </div> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,i,s){var l;return null!=(l=a.each.call(null!=t?t:{},t,{name:"each",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:""},useData:!0}),t.sidemenu_links=e({1:function(e,t,a,i,s){var l,n=null!=t?t:{},o=e.escapeExpression,d=e.lambda;return' <div class="grid-stack-item mT5"\n        data-gs-x="0" data-gs-y="0"\n        data-gs-width="12" data-array="'+o(a.objToString.call(n,t,{name:"objToString",hash:{},data:s}))+'" field-lable="false" fields-type="link" fields-name="'+o(a.encodeForHTMLAttribute.call(n,a.toUpperCase.call(n,null!=t?t.field_label:t,{name:"toUpperCase",hash:{},data:s}),{name:"encodeForHTMLAttribute",hash:{},data:s}))+'" title="'+o(d(null!=t?t.field_label:t,t))+'" id="component_'+o(d(null!=t?t.id:t,t))+'"> <div class="grid-stack-item-content txtalnLt sidebar_spacing"> <span field="true" id="dv_'+o(a.toUpperCase.call(n,null!=t?t.field_label:t,{name:"toUpperCase",hash:{},data:s}))+'" class="cd_link cd_field field_valueHolder"> \x3c!-- <span class=\'detLftLinkIcon svgIconsImg\'></span><a href="javascript:;">'+o(d(null!=t?t.field_label:t,t))+"</a> --\x3e "+(null!=(l=d(null!=t?t.display_value:t,t))?l:"")+" </span> </div> </div> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,i,s){var l;return null!=(l=a.each.call(null!=t?t:{},t,{name:"each",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:""},useData:!0}),t.sidemenu_others=e({1:function(e,t,a,i,s){var l=null!=t?t:{},n=e.escapeExpression,o=e.lambda;return' <div class="grid-stack-item mT5"\n    data-gs-x="0" data-gs-y="0"\n    data-gs-width="12" data-gs-height="2" data-array="'+n(a.objToString.call(l,t,{name:"objToString",hash:{},data:s}))+'" field-lable="false" fields-type="field" fields-name="'+n(a.encodeForHTMLAttribute.call(l,a.toUpperCase.call(l,null!=t?t.field_label:t,{name:"toUpperCase",hash:{},data:s}),{name:"encodeForHTMLAttribute",hash:{},data:s}))+'" title="'+n(o(null!=t?t.field_label:t,t))+'" id="component_'+n(o(null!=t?t.id:t,t))+'"> <div class="grid-stack-item-content sidebar_spacing txtalnLt"> <span class="cd_others cd_field field_valueHolder" field="true" id="dv_'+n(a.toUpperCase.call(l,null!=t?t.field_label:t,{name:"toUpperCase",hash:{},data:s}))+'">'+n(o(null!=t?t.field_label:t,t))+" </span> </div> </div> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,i,s){var l;return(null!=(l=a.each.call(null!=t?t:{},t,{name:"each",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+" "},useData:!0}),t.view1=e({compiler:[7,">= 4.0.0"],main:function(e,t,a,i,s){return' <ul id="textEditorMenu" class="textEditorMenu" style="display: none;"> <li id="tE_fontsize" class="tE_fontsize"> <div class="tE_fsfont fL">Font Size</div> <div class="tE_fontSelect fL"> <div class="tE_selectFont fL" id="cv_fsvalue" onclick="jSortable.cvFontsizetab(this)">14</div> <div class="fL tE_plus" onclick="jSortable.addFontsize(\'add\')"><span></span></div> <div class="fL tE_minus" onclick="jSortable.subFontsize(this)"><span></span></div> </div> <div class="tE_textChange"> <div class="tE_bold" onclick="jSortable.cvBold()"><span></span></div> <div class="tE_italic" onclick="jSortable.cvItalic()"><span></span></div> <div id="tE_color" class="tE_underline"><span></span></div> <div id="tE_bg" class="tE_bg"><span></span></div> </div> <div class="tE_format"> <div class="tE_formatIcon"><span></span></div> </div> </li> </ul> <div class="grid-stack-item ui-draggable ui-resizable ui-resizable-autohide" data-gs-x="1" data-gs-y="2" data-gs-width="2" data-gs-height="1"> <div class="grid-stack-item-content ui-draggable-handle">MOBILE NUMBER</div> <div class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se" style="z-index: 90; display: none;"></div><div class="textEditIcon" onclick="jSortable.editorMenu(this)"></div></div><div class="grid-stack-item ui-draggable ui-resizable ui-resizable-autohide" data-gs-x="1" data-gs-y="0" data-gs-width="2" data-gs-height="1"> <div class="grid-stack-item-content ui-draggable-handle">CREATED TIME</div> <div class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se" style="z-index: 90; display: none;"></div><div class="textEditIcon" onclick="jSortable.editorMenu(this)"></div></div><div class="grid-stack-item ui-draggable ui-resizable ui-resizable-autohide" data-gs-x="0" data-gs-y="0" data-gs-width="1" data-gs-height="3"> <div class="grid-stack-item-content ui-draggable-handle">IMAGE</div> <div class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se" style="z-index: 90; display: none;"></div><div class="textEditIcon" onclick="jSortable.editorMenu(this)"></div></div><div class="grid-stack-item ui-draggable ui-resizable ui-resizable-autohide" data-gs-x="1" data-gs-y="1" data-gs-width="2" data-gs-height="1"> <div class="grid-stack-item-content ui-draggable-handle">COMPANY</div> <div class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se" style="z-index: 90; display: none;"></div><div class="textEditIcon" onclick="jSortable.editorMenu(this)"></div></div><div class="grid-stack-item ui-draggable ui-resizable ui-resizable-autohide" data-gs-x="3" data-gs-y="0" data-gs-width="2" data-gs-height="1"> <div class="grid-stack-item-content ui-draggable-handle">LAST NAME</div> <div class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se" style="z-index: 90; display: none;"></div><div class="textEditIcon" onclick="jSortable.editorMenu(this)"></div></div><div class="grid-stack-item ui-draggable ui-resizable ui-resizable-autohide" data-gs-x="3" data-gs-y="1" data-gs-width="2" data-gs-height="1"> <div class="grid-stack-item-content ui-draggable-handle">LEAD NAME</div> <div class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se" style="z-index: 90; display: none;"></div><div class="textEditIcon" onclick="jSortable.editorMenu(this)"></div></div><div class="grid-stack-item ui-draggable ui-resizable ui-resizable-autohide" data-gs-x="3" data-gs-y="2" data-gs-width="2" data-gs-height="1"> <div class="grid-stack-item-content ui-draggable-handle">FAX</div> <div class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se" style="z-index: 90; display: none;"></div><div class="textEditIcon" onclick="jSortable.editorMenu(this)"></div></div><div class="grid-stack-item ui-draggable ui-resizable ui-resizable-autohide" data-gs-x="5" data-gs-y="0" data-gs-width="2" data-gs-height="1"> <div class="grid-stack-item-content ui-draggable-handle">LEAD SOURCE</div> <div class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se" style="z-index: 90; display: none;"></div><div class="textEditIcon" onclick="jSortable.editorMenu(this)"></div></div><div class="grid-stack-item ui-draggable ui-resizable ui-resizable-autohide" data-gs-x="5" data-gs-y="1" data-gs-width="2" data-gs-height="1"> <div class="grid-stack-item-content ui-draggable-handle">LEAD STATUS</div> <div class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se" style="z-index: 90; display: none;"></div><div class="textEditIcon" onclick="jSortable.editorMenu(this)"></div></div><div class="grid-stack-item ui-draggable ui-resizable ui-resizable-autohide" data-gs-x="5" data-gs-y="2" data-gs-width="2" data-gs-height="1"> <div class="grid-stack-item-content ui-draggable-handle">INDUSTRY</div> <div class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se" style="z-index: 90; display: none;"></div><div class="textEditIcon" onclick="jSortable.editorMenu(this)"></div></div> '},useData:!0})}();