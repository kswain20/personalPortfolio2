function DWRutil(){}if(DWRutil._path="/crm/dwr",DWRutil.logger=[],DWRutil.getMassUpdateParameters=function(e,n,t){DWREngine._execute(DWRutil._path,"DWRutil","getMassUpdateParameters",e,n,t)},DWRutil.getCurrentTimeInUserFormat=function(e,n){DWREngine._execute(DWRutil._path,"DWRutil","getCurrentTimeInUserFormat",e,n)},DWRutil.isAllowToDeactivateUser=function(e,n){DWREngine._execute(DWRutil._path,"DWRutil","isAllowToDeactivateUser",e,n)},DWRutil.duplicateNameCheck=function(e,n,t,i){DWREngine._execute(DWRutil._path,"DWRutil","duplicateNameCheck",e,n,t,i)},DWRutil.getTwHandlerVal=function(e,n){DWREngine._execute(DWRutil._path,"DWRutil","getTwHandlerVal",e,n)},DWRutil.validateFormulaExpression=function(e,n,t,i){DWREngine._execute(DWRutil._path,"DWRutil","validateFormulaExpression",e,n,t,i)},DWRutil.validateCustomLinkExpression=function(e,n,t){DWREngine._execute(DWRutil._path,"DWRutil","validateCustomLinkExpression",e,n,t)},DWRutil.isEmailOptOut=function(e,n,t){DWREngine._execute(DWRutil._path,"DWRutil","isEmailOptOut",e,n,t)},DWRutil.getSortedValues=function(e,n,t){DWREngine._execute(DWRutil._path,"DWRutil","getSortedValues",e,n,t)},DWRutil.isCustomViewField=function(e,n,t,i,r,a,o){DWREngine._execute(DWRutil._path,"DWRutil","isCustomViewField",e,n,t,i,r,a,o)},DWRutil.isCustomViewLayout=function(e,n,t,i){DWREngine._execute(DWRutil._path,"DWRutil","isCustomViewLayout",e,n,t,i)},DWRutil.getVendorEmailByVendorId=function(e,n){DWREngine._execute(DWRutil._path,"DWRutil","getVendorEmailByVendorId",e,n)},DWRutil.validateCustomLinkCount=function(e,n,t){DWREngine._execute(DWRutil._path,"DWRutil","validateCustomLinkCount",e,n,t)},DWRutil.getObject=function(e){try{if(window[e])return window[e];if(window.opener&&window.opener[e])return window.opener[e];if(parent[e])return parent[e]}catch(e){this.logger.push(e.toString())}return null},DWRutil.setObject=function(e){var n=DWRutil.getObject(e);n&&!window[e]&&(window[e]=n)},DWRutil.getModuleFromFieldLabel=function(e){e&&(e=e[0]);var n={COMMENTCONTENTS:"Comments",CONTACTNAME:"Contact",ENTITYNAME:"Related To"};n[e]&&(e=n[e]);var t=(""+e).split(" "),i=null;if(t.length>=2){var r=moduleRecordMapping,a=t[0]+t[1],o=t[0];if("PurchaseOrder"==a||"SalesOrder"==a||"PriceBook"==a)i=r[a+="s"].singular_label;else if(0==e.indexOf("Parent Account"))i=r.Accounts.singular_label;else if("Activity"==o)i=r.Activities.singular_label;else if(r[o]&&"custom"==r[o].generated_type)i=r[o].singular_label;else if("CustomModule"==o){var l=getObj("module");l||(l=getObj("searchModule")),i=r[l.value].singular_label}else i=r[a=o+"s"]?r[a].singular_label:null}return i},DWRutil.setObject("I18n"),DWRutil.setObject("Crm"),null==DWREngine)var DWREngine={};DWREngine.setErrorHandler=function(e){DWREngine._errorHandler=e},DWREngine.setWarningHandler=function(e){DWREngine._warningHandler=e},DWREngine.setTimeout=function(e){DWREngine._timeout=e},DWREngine.setPreHook=function(e){DWREngine._preHook=e},DWREngine.setPostHook=function(e){DWREngine._postHook=e},DWREngine.XMLHttpRequest=1,DWREngine.IFrame=2,DWREngine.setMethod=function(e){e==DWREngine.XMLHttpRequest||e==DWREngine.IFrame?DWREngine._method=e:DWREngine._handleError("Remoting method must be one of DWREngine.XMLHttpRequest or DWREngine.IFrame")},DWREngine.setVerb=function(e){"GET"==e||"POST"==e?DWREngine._verb=e:DWREngine._handleError("Remoting verb must be one of GET or POST")},DWREngine.setOrdered=function(e){DWREngine._ordered=e},DWREngine.setAsync=function(e){DWREngine._async=e},DWREngine.setTextHtmlHandler=function(e){DWREngine._textHtmlHandler=e},DWREngine.defaultMessageHandler=function(e){"object"==typeof e&&"Error"==e.name&&e.description?alert("Error: "+e.description):-1==e.toString().indexOf("0x80040111")&&alert(e)},DWREngine.beginBatch=function(){DWREngine._batch?DWREngine._handleError("Batch already started."):DWREngine._batch={map:{callCount:0},paramCount:0,ids:[],preHooks:[],postHooks:[]}},DWREngine.endBatch=function(e){var n=DWREngine._batch;null!=n?(e&&e.preHook&&n.preHooks.unshift(e.preHook),e&&e.postHook&&n.postHooks.push(e.postHook),DWREngine._preHook&&n.preHooks.unshift(DWREngine._preHook),DWREngine._postHook&&n.postHooks.push(DWREngine._postHook),null==n.method&&(n.method=DWREngine._method),null==n.verb&&(n.verb=DWREngine._verb),null==n.async&&(n.async=DWREngine._async),null==n.timeout&&(n.timeout=DWREngine._timeout),n.completed=!1,DWREngine._batch=null,DWREngine._ordered?0==DWREngine._batches.length?(DWREngine._sendData(n),DWREngine._batches[DWREngine._batches.length]=n):DWREngine._batchQueue[DWREngine._batchQueue.length]=n:(DWREngine._sendData(n),DWREngine._batches[DWREngine._batches.length]=n)):DWREngine._handleError("No batch in progress.")},DWREngine._errorHandler=DWREngine.defaultMessageHandler,DWREngine._warningHandler=null,DWREngine._preHook=null,DWREngine._postHook=null,DWREngine._batches=[],DWREngine._batchQueue=[],DWREngine._handlersMap={},DWREngine._method=DWREngine.XMLHttpRequest,DWREngine._verb="POST",DWREngine._ordered=!1,DWREngine._async=!0,DWREngine._batch=null,DWREngine._timeout=0,DWREngine._DOMDocument=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.5.0","Msxml2.DOMDocument.4.0","Msxml2.DOMDocument.3.0","MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XMLDOM"],DWREngine._XMLHTTP=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],DWREngine._execute=function(e,n,t,i){var r=!1;null==DWREngine._batch&&(DWREngine.beginBatch(),r=!0);for(var a,o,l=[],u=0;u<arguments.length-3;u++)l[u]=arguments[u+3];if(null==DWREngine._batch.path)DWREngine._batch.path=e;else if(DWREngine._batch.path!=e)return void DWREngine._handleError("Can't batch requests to multiple DWR Servlets.");var c=l[0],s=l[l.length-1];if("function"==typeof c)o={callback:l.shift()},a=l;else if("function"==typeof s)o={callback:l.pop()},a=l;else if(null!=s&&"object"==typeof s&&null!=s.callback&&"function"==typeof s.callback)o=l.pop(),a=l;else if(null==c)null==s&&l.length>2&&DWREngine._handleError("Ambiguous nulls at start and end of parameter list. Which is the callback function?"),o={callback:l.shift()},a=l;else{if(null!=s)return void DWREngine._handleError("Missing callback function or metadata object.");o={callback:l.pop()},a=l}var g=Math.floor(10001*Math.random()),D=(g+"_"+(new Date).getTime()).toString(),h="c"+DWREngine._batch.map.callCount+"-";for(DWREngine._batch.ids.push(D),null!=o.method&&(DWREngine._batch.method=o.method,delete o.method),null!=o.verb&&(DWREngine._batch.verb=o.verb,delete o.verb),null!=o.async&&(DWREngine._batch.async=o.async,delete o.async),null!=o.timeout&&(DWREngine._batch.timeout=o.timeout,delete o.timeout),null!=o.preHook&&(DWREngine._batch.preHooks.unshift(o.preHook),delete o.preHook),null!=o.postHook&&(DWREngine._batch.postHooks.push(o.postHook),delete o.postHook),null==o.errorHandler&&(o.errorHandler=DWREngine._errorHandler),null==o.warningHandler&&(o.warningHandler=DWREngine._warningHandler),DWREngine._handlersMap[D]=o,DWREngine._batch.map[h+"scriptName"]=n,DWREngine._batch.map[h+"methodName"]=t,DWREngine._batch.map[h+"id"]=D,u=0;u<a.length;u++)DWREngine._serializeAll(DWREngine._batch,[],a[u],h+"param"+u);DWREngine._batch.map.callCount++,r&&DWREngine.endBatch()},DWREngine._sendData=function(e){if(0!=e.map.callCount){for(var n=0;n<e.preHooks.length;n++)e.preHooks[n]();var t;e.preHooks=null,e.timeout&&0!=e.timeout&&(e.interval=setInterval((function(){DWREngine._abortRequest(e)}),e.timeout)),t=1==e.map.callCount?e.map["c0-scriptName"]+"."+e.map["c0-methodName"]+".dwr":"Multiple."+e.map.callCount+".dwr",e.method==DWREngine.XMLHttpRequest&&(window.XMLHttpRequest?e.req=new XMLHttpRequest:!window.ActiveXObject||navigator.userAgent.indexOf("Mac")>=0&&navigator.userAgent.indexOf("MSIE")>=0||(e.req=DWREngine._newActiveXObject(DWREngine._XMLHTTP)));var i,r="";if(e.req){e.map.xml="true",e.async&&(e.req.onreadystatechange=function(){DWREngine._stateChange(e)});var a=navigator.userAgent.indexOf("Safari/");if(a>=0){var o=navigator.userAgent.substring(a+7);parseInt(o,10)<400&&e.verb}if("GET"==e.verb){for(i in e.map.callCount=""+e.map.callCount,e.map){var l=encodeURIComponent(i),u=encodeURIComponent(e.map[i]);""==u&&DWREngine._handleError("Found empty qval for qkey="+l),r+=l+"="+u+"&"}try{e.req.open("GET",e.path+"/exec/"+t+"?"+r,e.async),e.req.send(null),e.async||DWREngine._stateChange(e)}catch(e){DWREngine._handleMetaDataError(null,e)}}else{for(i in e.map)"function"!=typeof e.map[i]&&(r+=i+"="+e.map[i]+"\n");try{e.req.open("POST",e.path+"/exec/"+t,e.async),e.req.setRequestHeader("Content-Type","text/plain"),e.req.send(r),e.async||DWREngine._stateChange(e)}catch(e){DWREngine._handleMetaDataError(null,e)}}}else{e.map.xml="false";var c="dwr-if-"+e.map["c0-id"];if(e.div=document.createElement("div"),e.div.innerHTML="<iframe src='javascript:void(0)' frameborder='0' width='0' height='0' id='"+c+"' name='"+c+"'></iframe>",document.body.appendChild(e.div),e.iframe=document.getElementById(c),e.iframe.setAttribute("style","width:0px; height:0px; border:0px;"),"GET"==e.verb){for(i in e.map)"function"!=typeof e.map[i]&&(r+=encodeURIComponent(i)+"="+encodeURIComponent(e.map[i])+"&");r=r.substring(0,r.length-1),e.iframe.setAttribute("src",e.path+"/exec/"+t+"?"+r),document.body.appendChild(e.iframe)}else{for(i in e.form=document.createElement("form"),e.form.setAttribute("id","dwr-form"),e.form.setAttribute("action",e.path+"/exec"+t),e.form.setAttribute("target",c),e.form.target=c,e.form.setAttribute("method","POST"),e.map){var s=document.createElement("input");s.setAttribute("type","hidden"),s.setAttribute("name",i),s.setAttribute("value",e.map[i]),e.form.appendChild(s)}document.body.appendChild(e.form),e.form.submit()}}}},DWREngine._stateChange=function(batch){if(!batch.completed&&4==batch.req.readyState)try{var reply=batch.req.responseText;if(null==reply||""==reply)DWREngine._handleMetaDataWarning(null,"No data received from server");else{var contentType=batch.req.getResponseHeader("Content-Type");contentType.match(/^text\/plain/)||contentType.match(/^text\/javascript/)?-1==reply.search("DWREngine._handle")?DWREngine._handleMetaDataWarning(null,"Invalid reply from server"):eval(reply):DWREngine._textHtmlHandler&&contentType.match(/^text\/html/)?DWREngine._textHtmlHandler():DWREngine._handleMetaDataWarning(null,"Invalid content type from server: '"+contentType+"'")}DWREngine._clearUp(batch)}catch(e){null==e&&(e="Unknown error occured"),DWREngine._handleMetaDataWarning(null,e)}finally{if(0!=DWREngine._batchQueue.length){var sendbatch=DWREngine._batchQueue.shift();DWREngine._sendData(sendbatch),DWREngine._batches[DWREngine._batches.length]=sendbatch}}},DWREngine._handleResponse=function(e,n){var t=DWREngine._handlersMap[e];if(DWREngine._handlersMap[e]=null,t)try{t.callback&&t.callback(n)}catch(e){DWREngine._handleMetaDataError(t,e)}if(DWREngine._method==DWREngine.IFrame){var i=DWREngine._batches[DWREngine._batches.length-1];i.map["c"+(i.map.callCount-1)+"-id"]==e&&DWREngine._clearUp(i)}},DWREngine._handleServerError=function(e,n){var t=DWREngine._handlersMap[e];DWREngine._handlersMap[e]=null,n.message?DWREngine._handleMetaDataError(t,n.message,n):DWREngine._handleMetaDataError(t,n)},DWREngine._eval=function(script){return eval(script)},DWREngine._abortRequest=function(e){if(e&&!e.completed){var n;clearInterval(e.interval),DWREngine._clearUp(e),e.req&&e.req.abort();for(var t=0;t<e.ids.length;t++)n=DWREngine._handlersMap[e.ids[t]],DWREngine._handleMetaDataError(n,"Timeout")}},DWREngine._clearUp=function(e){if(e.completed)DWREngine._handleError("Double complete");else{e.div&&e.div.parentNode.removeChild(e.div),e.iframe&&e.iframe.parentNode.removeChild(e.iframe),e.form&&e.form.parentNode.removeChild(e.form),e.req&&delete e.req;for(var n=0;n<e.postHooks.length;n++)e.postHooks[n]();e.postHooks=null;for(n=0;n<DWREngine._batches.length;n++)if(DWREngine._batches[n]==e){DWREngine._batches.splice(n,1);break}e.completed=!0}},DWREngine._handleError=function(e,n){DWREngine._errorHandler&&DWREngine._errorHandler(e,n)},DWREngine._handleWarning=function(e,n){DWREngine._warningHandler&&DWREngine._warningHandler(e,n)},DWREngine._handleMetaDataError=function(e,n,t){e&&"function"==typeof e.errorHandler?e.errorHandler(n,t):DWREngine._handleError(n,t)},DWREngine._handleMetaDataWarning=function(e,n,t){e&&"function"==typeof e.warningHandler?e.warningHandler(n,t):DWREngine._handleWarning(n,t)},DWREngine._serializeAll=function(e,n,t,i){if(null!=t)switch(typeof t){case"boolean":e.map[i]="boolean:"+t;break;case"number":e.map[i]="number:"+t;break;case"string":e.map[i]="string:"+encodeURIComponent(t);break;case"object":t instanceof String?e.map[i]="String:"+encodeURIComponent(t):t instanceof Boolean?e.map[i]="Boolean:"+t:t instanceof Number?e.map[i]="Number:"+t:t instanceof Date?e.map[i]="Date:"+t.getTime():e.map[i]=t instanceof Array?DWREngine._serializeArray(e,n,t,i):DWREngine._serializeObject(e,n,t,i);break;case"function":break;default:DWREngine._handleWarning("Unexpected type: "+typeof t+", attempting default converter."),e.map[i]="default:"+t}else e.map[i]="null:null"},DWREngine._lookup=function(e,n,t){for(var i,r=0;r<e.length;r++)if(e[r].data==n){i=e[r];break}return i?"reference:"+i.name:(e.push({data:n,name:t}),null)},DWREngine._serializeObject=function(e,n,t,i){var r=DWREngine._lookup(n,t,i);if(r)return r;if(t.nodeName&&t.nodeType)return DWREngine._serializeXml(e,n,t,i);var a,o="Object:{";for(a in t){e.paramCount++;var l="c"+DWREngine._batch.map.callCount+"-e"+e.paramCount;DWREngine._serializeAll(e,n,t[a],l),o+=encodeURIComponent(a)+":reference:"+l+", "}return", "==o.substring(o.length-2)&&(o=o.substring(0,o.length-2)),o+="}"},DWREngine._serializeXml=function(e,n,t,i){var r,a=DWREngine._lookup(n,t,i);return a||(r=window.XMLSerializer?(new XMLSerializer).serializeToString(t):t.toXml,"XML:"+encodeURIComponent(r))},DWREngine._serializeArray=function(e,n,t,i){var r=DWREngine._lookup(n,t,i);if(r)return r;for(var a="Array:[",o=0;o<t.length;o++){0!=o&&(a+=","),e.paramCount++;var l="c"+DWREngine._batch.map.callCount+"-e"+e.paramCount;DWREngine._serializeAll(e,n,t[o],l),a+="reference:",a+=l}return a+="]"},DWREngine._unserializeDocument=function(e){var n;if(window.DOMParser){if(!(n=(new DOMParser).parseFromString(e,"text/xml")).documentElement||"parsererror"==n.documentElement.tagName){var t=n.documentElement.firstChild.data;throw t+="\n"+n.documentElement.firstChild.nextSibling.firstChild.data}return n}if(window.ActiveXObject)return(n=DWREngine._newActiveXObject(DWREngine._DOMDocument)).loadXML(e),n;var i=document.createElement("div");return i.innerHTML=e,i},DWREngine._newActiveXObject=function(e){for(var n,t=0;t<e.length;t++)try{n=new ActiveXObject(e[t]);break}catch(e){}return n},void 0===window.encodeURIComponent&&(DWREngine._utf8=function(e){var n,t;e=""+e;for(var i="",r=0;r<e.length;)if(!((n=e.charCodeAt(r++))>=56320&&n<57344)){if(n>=55296&&n<56320){if(r>=e.length)continue;if((t=e.charCodeAt(r++))<56320||n>=56832)continue;n=t-56320+(n-55296<<10)+65536}i+=n<128?String.fromCharCode(n):n<2048?String.fromCharCode(192+(n>>6),128+(63&n)):n<65536?String.fromCharCode(224+(n>>12),128+(n>>6&63),128+(63&n)):String.fromCharCode(240+(n>>18),128+(n>>12&63),128+(n>>6&63),128+(63&n))}return i},DWREngine._hexchars="0123456789ABCDEF",DWREngine._toHex=function(e){return DWREngine._hexchars.charAt(e>>4)+DWREngine._hexchars.charAt(15&e)},DWREngine._okURIchars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_-",window.encodeURIComponent=function(e){e=DWREngine._utf8(e);for(var n="",t=0;t<e.length;t++)-1==DWREngine._okURIchars.indexOf(e.charAt(t))?n+="%"+DWREngine._toHex(e.charCodeAt(t)):n+=e.charAt(t);return n}),void 0===Array.prototype.splice&&(Array.prototype.splice=function(e,n){if(0==arguments.length)return e;if("number"!=typeof e&&(e=0),e<0&&(e=Math.max(0,this.length+e)),e>this.length){if(!(arguments.length>2))return[];e=this.length}arguments.length<2&&(n=this.length-e),n="number"==typeof n?Math.max(0,n):0,removeArray=this.slice(e,e+n),endArray=this.slice(e+n),this.length=e;for(var t=2;t<arguments.length;t++)this[this.length]=arguments[t];for(t=0;t<endArray.length;t++)this[this.length]=endArray[t];return removeArray}),void 0===Array.prototype.shift&&(Array.prototype.shift=function(e){for(var n=this[0],t=1;t<this.length;++t)this[t-1]=this[t];return this.length--,n}),void 0===Array.prototype.unshift&&(Array.prototype.unshift=function(){for(var e=unshift.arguments.length,n=this.length-1;n>=0;--n)this[n+e]=this[n];for(n=0;n<e;++n)this[n]=unshift.arguments[n]}),void 0===Array.prototype.push&&(Array.prototype.push=function(){for(var e=this.length,n=0;n<push.arguments.length;++n)this[e]=push.arguments[n],e++}),void 0===Array.prototype.pop&&(Array.prototype.pop=function(){var e=this[this.length-1];return this.length--,e});