Lyte.Component.register("crm-salesiq-portals-dropdown",{_template:'<template tag-name="crm-salesiq-portals-dropdown"> <lyte-dropdown id="salesiqChoosePortalDD" on-option-selected="{{method(\'selectedPortal\')}}" lt-prop-selected="{{lbind(selectedScreenName)}}" lt-prop-placeholder="{{getI18n(\'All Portals\')}}" data-zcqa="salesiqPortalList"> <template is="registerYield" yield-name="yield"> <lyte-drop-box class="crmBoxDropbox"> <lyte-drop-body> <lyte-drop-item data-value="All Portals" data-zcqa="salesiqEachPortal">All Accounts</lyte-drop-item> <template is="forIn" object="{{portals}}" value="value" key="key"> <lyte-drop-item data-value="{{key}}" data-zcqa="salesiqEachPortal">{{value}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"componentDynamic",position:[1,1,1]},{type:"attr",position:[1,1,3]},{type:"forIn",position:[1,1,3],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}],_observedAttributes:["rid","portals","selectedScreenName","selectedPortalName","isCanvas","module","entityId","isLoaded"],data:function(){return{rid:Lyte.attr("string"),portals:Lyte.attr("object"),selectedScreenName:Lyte.attr("string",{default:"All Portals"}),selectedPortalName:Lyte.attr("string",{default:"All Portals"}),isCanvas:Lyte.attr("boolean",{default:!1}),module:Lyte.attr("string"),entityId:Lyte.attr("string"),isLoaded:Lyte.attr("boolean",{default:!1})}},init:function(){if(!this.getData("isLoaded")){var t=this;store.findRecord("dummy",{},{type:"configured"},!1,!1,{url:"crm/v2/Visits/portals"}).then((function(e){e.configured&&t.setData("portals",e.configured),t.setData("isLoaded",!0)}))}},methods:{selectedPortal:function(){var t={},e=this.getData("portals");t.id=this.getData("entityId"),t.module=this.getData("module"),t.rid=this.getData("rid"),t.isSortRequest=!1;var a=this.getData("selectedScreenName");"All Portals"!=a?(t.portalName=e[a],this.setData("selectedPortalName",e[a]),t.allPortals=!1):(this.setData("selectedPortalName","All Portals"),t.allPortals=!0),this.getData("isCanvas")?Lyte.triggerEvent("relatedList",{id:this.getData("rid")}):crmRelatedList.ajaxReq(t)}}});
