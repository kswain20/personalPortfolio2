Lyte.Mixin.register("zia-insights-utils",{getInsights:function(i,e,r){var s=["US","EU","IN","China","AU"].contains(Crm.userDetails.DEPLOYMENT),n=["A","U","C","Z"].contains(Crm.userDetails.LICENSE_TYPE);if(!1!==(!0===i.presence_sub_menu&&!0===i.visible&&"linking"!==i.generated_type&&["Visits","Forecasts"].indexOf(i.module_name)<0)&&!1!==s&&!1!==n){var t=store.peekRecord("zia-insights",e);if(t)return t.promise;var a="";if(r)Object.keys(r).forEach((function(i,e){a+=e>0?",":"?",a+=i+"="+r[i]}));var o={};o.url="crm/v2.2/"+i.api_name+"/"+e+"/actions/zia_insights";var u=a.trim();""!==u&&(o.url+=u);var c=store.findAll("dummy",null,!1,!1,o),m={};return m.id=e,m.promise=c,store.createRecord("zia-insights",m).promise.then((function(i){return new Promise(((e,r)=>{var s=i.zia_insights;s?e({zia_insights:JSON.parse(JSON.stringify(s))}):r(void 0)}))}),(function(){return new Promise((i=>{i(void 0)}))}))}}}),store.registerModel("zia-insights",{});
