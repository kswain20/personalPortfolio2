var speedBenchmarkStart = +new Date();if(function(e){var t=[],o=t.slice,a=t.push,r=t.indexOf,i=t.concat,s={},l=s.toString,n=s.hasOwnProperty,p=n.toString,c=p.call(Object),d=e.document;function u(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?s[l.call(e)]||"object":typeof e}function h(e){var t=!!e&&"length"in e&&e.length,o=u(e);return!g.isFunction(e)&&!g.isWindow(e)&&("array"===o||0===t||"number"==typeof t&&t>0&&t-1 in e)}function m(e){return-1!==e.indexOf(":visible")}function y(e,t,o){var r,i;if(m(e))if((r=e.split(",")).length>1)for(i=0;i<r.length;i++)y(r[i],t,o);else a.apply(o,function(e,t){var o,a=e.indexOf(":visible"),r=e.substring(0,a),i=0,s=[];for(o=t.querySelectorAll(r||"*");i<o.length;i++)f(o[i])&&s.push(o[i]);return s}(r[0],t));else!function(e,t,o){var r=t.querySelectorAll(e);a.apply(o,r)}(e,t,o)}function f(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}var g=function(e,t){return new D(e,t)};g.isFunction=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType};var v=/^(?:\s*(<[\w\W]+>)|#([\w-]+))$/,x=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,P=/<|&#?\w+;/,b=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,D=function(t,o){var a,r,i,s,l=H;if(!t)return this;if("string"==typeof t){if(!(r="<"===t[0]&&">"===t[t.length-1]&&t.length>3?[null,t,null]:v.exec(t))||!r[1]&&o)return!o||o instanceof D?(o||l).find(t):this.constructor(o).find(t);if(r[1]){if(o=o instanceof D?o[0]:o,g.merge(this,g.parseHTML(r[1],o&&o.nodeType?o.ownerDocument:document)),x.test(r[1])&&g.isPlainObject(o))for(i in o)g.isFunction(this[i])?this[i](o[i]):this.attr(i,o[i]);return this}return a=document.getElementById(r[2]),(s=this.pushStack(a?[a]:[])).isId=!0,s}return t.nodeType?(this[0]=t,this.length=1,this.singular=!0,this):(s=g.makeArray(t,this),t===e&&(s.singular=!0),s)};D.prototype={splice:t.splice,constructor:g,length:0,push:t.push,sort:t.sort,indexOf:t.indexOf},g.prototype=D.prototype,g.extend=D.prototype.extend=function(){var e,t,o,a,r,i=1,s=!1,l=arguments.length,n=arguments[0]||{};for("boolean"==typeof n&&(s=n,n=arguments[i]||{},i++),l==i&&(n=this,i--),g.isFunction(n)||"object"==typeof n||(n={});i<arguments.length;i++)for(e in a=arguments[i])(t=a[e])!==(o=n[e])&&"__proto__"!==e&&(t&&s?Array.isArray(t)?(r=o&&Array.isArray(o)?o:[],n[e]=g.extend(s,r,t)):g.isPlainObject(t)?(r=g.isPlainObject(o)?o:{},n[e]=g.extend(s,r,t)):void 0!==t&&(n[e]=t):n[e]=a[e]);return n};var L,C,_,S,w,T={startsWith:function(e,t){return 0===t.indexOf(e)},endsWith:function(e,t){return t.indexOf(e)===t.length-e.length},includes:function(e,t){return-1!==t.indexOf(e)}},E=function(e,t,o,a){if("number"==typeof o)o=o.toString();else if("string"!=typeof o&&"any"!=e&&"empty"!=e)return!1;switch(o=function(e,t){return!1===t.caseSensitive&&(e=e.toLowerCase()),t.trim&&(e=e.trim()),e}(o,a),e){case"any":return!0;case"empty":return!o;case"equals":return t===o;case"notEquals":return t!=o;default:return!!t&&T[e](t,o)}};function A(e){var t,o=!1,a=[],r=0,i=0,s=e.slice(0);if(e.sort((function(e,t){var a;return e===t?(o=!0,0):1&(a=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)?e===document||e.ownerDocument===d&&d.contains(e)?-1:t===document||t.ownerDocument===d&&d.contains(t)?1:s?s.indexOf(e)-s.indexOf(t):0:4&a?-1:1})),o){for(;t=e[r++];)t===e[r]&&(i=a.push(r));for(;i--;)e.splice(a[i],1)}return e}function M(e){return Math.round(parseFloat(e))}function N(){this.expando=g.expando+g.dataid++}g.extend({userAgent:(C=navigator.userAgent,_=C.match(/(opera|CriOS|FxiOS|EdgiOS|OPT|chrome|safari|firefox|msie|trident(?=\/))\/?\s*([\d.]+)/i)||[],/trident/i.test(_[1])?{browser:"IE",version:((L=/\brv[ :]+([\d.]+)/g.exec(C)||[])[1]||"").split(".")[0],detailedVersion:["IE",L[1]]}:"Chrome"===_[1]&&null!=(L=C.match(/\b(OPR|Edge|UCBrowser|SamsungBrowser|YaBrowser|Edg|Falkon)\/([\d.]+)/))?("Edg"!==L[1]&&"EdgA"!==L[1]||(L[1]="Edge"),{browser:L[1],version:(L[2]||"").split(".")[0],detailedVersion:[L[1],L[2],_[1],_[2]]}):(_=_[2]?[_[1],_[2]]:[navigator.appName,navigator.appVersion],null==(L=C.match(/version\/([\d.]+)/i))||/android/i.test(C)||_.splice(1,1,L[1]),"CriOS"!==_[0]&&"FxiOS"!==_[0]&&"EdgiOS"!==_[0]&&"OPT"!==_[0]||(_[2]="Safari"),"MSIE"===_[0]&&(_[0]="IE"),{browser:_[0],version:(_[1]||"").split(".")[0],detailedVersion:_})),regex:{rnothtmlwhite:/[^\x20\t\r\n\f]+/g},_meta:{support:{}},_processInput:function(e,t,o,a,r,i,s){var l,n=e.length,p=0,c=null==t;if("object"===u(t))for(l in r=!0,t)g._processInput(e,l,t[l],a,!0);else if(void 0!==o&&(r=!0,g.isFunction(o)||(s=!0),c&&(s?(a.call(e,o),a=null):(c=a,a=function(e,t,o){return c.call(g(e),o)})),a))for(;p<n;p++)a(e[p],t,s?o:o.call(e[p],p,a(e[p],t)));return r?e:c?a.call(e):n?a(e[0],t):i},_camelCase:function(e){return e.replace(I,"ms-").replace(R,O)},_removeDupes:function(e,t,o){if(e.length>1){var a=A(e);return o.pushStack(t?a.reverse():a)}return o.pushStack(e)},_checkMatch:function(e,t){return!(t&&!g._matches(e,t))},_matches:function(e,t){var o,a,r,i,s=e.matches||e.matchesSelector||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector;if(!m(t))return s.call(e,t);if(!((o=t.split(",")).length>1))return r=(t=o[0]).indexOf(":visible"),i=t.substring(0,r),s.call(e,i||"*")&&f(e);for(a=0;a<o.length;a++)if(g._matches(e,o[a]))return!0},expando:"lytedom"+Math.random().toString().replace(/\D/g,""),isWindow:function(e){return null!=e&&e===e.window},map:function(e,t){var o,a,r=e.length,s=[];if(h(e))for(o=0;o<r;o++)null!=(a=t(e[o],o))&&s.push(a);else for(o in e)null!=(a=t(e[o],o))&&s.push(a);return i.apply([],s)},grep:function(t,o,a){for(var r=0,i=!a,s=(t||[]).length,l=[];r<s;r++){!!o.call(e,t[r],r)===i&&l.push(t[r])}return l},each:function(e,t){var o,a;if(h(e))for(a=e.length,o=0;o<a&&!1!==t.call(e[o],o,e[o]);o++);else for(o in e)if(!1===t.call(e[o],o,e[o]))break;return e},merge:function(e,t){var o,a,r=t.length||0;for(o=e.length||0,a=0;a<r;a++)e[o+a]=t[a];return e.length=r+o,e},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},makeArray:function(e,t){var o=t||[];return null!=e&&(h(Object(e))?g.merge(o,"string"==typeof e?[e]:e):a.call(o,e)),o},inArray:function(e,t,o){return null==t?-1:r.call(t,e,o)},isPlainObject:function(e){var t,o;return!(!e||"[object Object]"!==l.call(e))&&(!(t=Object.getPrototypeOf(e))||"function"==typeof(o=n.call(t,"constructor")&&t.constructor)&&p.call(o)===c)},parseXML:function(e){var t,o=new DOMParser;try{t=o.parseFromString(e,"text/xml")}catch(e){t=void 0}if(!t||t.getElementsByTagName("parsererror").length)throw new Error("Unable to parse"+e);return t},Evaluate:function(e){var t=document.createElement("script");t.text=e,document.head.appendChild(t).parentNode.removeChild(t)},removeLeaks:function(e){for(var t,o,a=0;a<e.length;a++){if(t=e[a][g._dataPriv.expando]){if(t.events)for(o in t.events)g.ev.removeEvents(e[a],o,t.handle);t=void 0}t&&(t=void 0)}},search:function(e,t,o,a,r,i){var s,l,n=[],p=!1;e.constructor!=Array&&"object"==typeof e&&(e=[e],l="object"),r?(p=r.recursive||!1,!1===r.caseSensitive&&(o=o.toLowerCase()),r.trim&&(o=o.trim())):r={},t&&"string"==typeof t&&(t=t.split(".")),a?"equals"!==a&&"number"==typeof o&&(o=o.toString()):a="includes",t&&(s=t[0]);for(var c=0;c<e.length;c++){var d,u=e[c];if(s){if(u instanceof Object&&s in u){if(1===t.length&&E(a,o,u[s],r))n.push(u);else if(u[s]instanceof Array||u[s]instanceof Object){var h=this.search(u[s],t.slice(1),o,a,r,!0);if(p&&h)return h;if(h){var m={};m[s]=h,n.push(m)}}}else if(u instanceof Array){h=this.search(u,t,o,a,r,!0);if(p&&h)return p;h&&n.push(h)}}else if(E(a,o,u,r))n.push(u);else if(u instanceof Array){var h=this.search(u,s,o,a,r,!0);if(p&&h)return h;h&&n.push(h)}if(p&&u[r.children])if(h=this.search(u[r.children],t,o,a,r,!0))d=n.length?n.concat(h):h,n=d}return i?!!n.length&&(p?n:"object"===l?n[0]:n):n}}),g.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){s["[object "+t+"]"]=t.toLowerCase()})),"undefined"!=typeof document&&(S=document.createElement("input"),w=document.createElement("select").appendChild(document.createElement("option")),S.type="checkbox",g._meta.support.checkOn=""!==S.value,g._meta.support.optSelected=w.selected,(S=document.createElement("input")).value="t",S.type="radio",g._meta.support.radioValue="t"===S.value,function(){function t(){if(i){var t,l=document.documentElement;s.style.cssText="position: absolute; left: 0px;width:300px;height:5px;",i.style.cssText="position:relative;width:200px;margin: auto; top: 1%;box-sizing:border-box;padding: 20px;",l.appendChild(s).appendChild(i),t=e.getComputedStyle(i),o=50===M(t.marginLeft),a="1%"!==t.top,r=200===M(t.width),l.removeChild(s),i=null}}var o,a,r,i=document.createElement("div"),s=document.createElement("div");g.extend(g._meta.support,{reliableMarginLeft:function(){return t(),o},reliablePixelPosition:function(){return t(),a},reliableBoxSizing:function(){return t(),r}})}()),g.needsContext=/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i,g.dataid=0,g.extend(N.prototype,{cache:function(e){var t=e[this.expando];return t||(t={},e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0})),t},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][g._camelCase(t)]},hasData:function(e){var t=e[this.expando];return void 0!==t&&!g.isEmptyObject(t)},access:function(e,t,o){return void 0===t||t&&"string"==typeof t&&void 0===o?this.get(e,t):(this.set(e,t,o),void 0!==o?o:t)},set:function(e,t,o){var a,r=this.cache(e);if("string"==typeof t)r[g._camelCase(t)]=o;else for(a in t)r[g._camelCase(a)]=t[a];return r},remove:function(e,t){var o,a=e[this.expando];if(void 0!==a){if(void 0!==t){o=(t=Array.isArray(t)?t.map(g._camelCase):(t=g._camelCase(t))in a?[t]:t.match(g.regex.rnothtmlwhite)||[]).length;for(;o--;)delete a[t[o]]}(void 0===t||g.isEmptyObject(a))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}}}),g._dataPriv=new N;var k=new N;function F(e){var t,o,a=0,r="",i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(o=e.firstChild;o;o=o.nextSibling)r+=F(o)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[a++];)r+=F(t);return r}D.prototype.extend({toArray:function(){return o.call(this)},add:function(e,t){return this.pushStack(A(g.merge(this.get(),g(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))},slice:function(){return this.pushStack(o.apply(this,arguments))},has:function(e){var t=g(e,this),o=t.length;return this.filter((function(){for(var e=0;e<o;e++)if(this!==t[e]&&this.contains(t[e]))return!0}))},is:function(e){return $(this,"string"==typeof e&&g.needsContext.test(e)?g(e):e||[],!1).length>0},not:function(e){return this.pushStack($(this,e||[],!0))}}),D.prototype.extend({eq:function(e){var t=this.length;return e=e<0?t+e:e,this.pushStack(e<0||e>t-1?[]:[this[e]])},last:function(){return this.eq(-1)},first:function(){return this.eq(0)},end:function(){return this.prevObject||this.constructor()},map:function(e){return this.pushStack(g.map(this,(function(t,o){return e.call(t,o,t)})))},filter:function(e){return this.pushStack($(this,e||[],!1))},find:function(e){var t,o,a=this,r=this.length;if("string"!=typeof e)return this.pushStack(g(e).filter((function(){for(o=0;o<r;o++)if(a[o]!==this&&a[o].contains(this))return!0})));for(t=this.pushStack([]),o=0;o<r;o++)y(e,this[o],t);return t.length>1?A(t):t},pushStack:function(e){var t;return(t=g.merge(this.constructor(),e)).prevObject=this,t},each:function(e){return g.each(this,e)},get:function(e){return null==e?o.call(this):e<0?this[e+this.length]:this[e]},empty:function(){return this.each((function(e,t){1===t.nodeType&&(g.removeLeaks(t.getElementsByTagName("*")),t.textContent="")})),this},text:function(e){return g._processInput(this,null,e,(function(e){return void 0===e?F(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),arguments.length)},clone:function(e,t){return e=!0===e,t=null==t?e:t,this.map((function(){return g.clone(this,e,t)}))}});var I=/^-ms-/,R=/-([a-z])/g;function O(e,t){return t.toUpperCase()}function $(e,t,o){return"string"==typeof t?(o&&(t=":not("+t+")"),function(e,t){for(var o=[],a=0,r=t.length;a<r;a++)g._matches(t[a],e)&&o.push(t[a]);return o}(t,g.grep(e,(function(e){return 1===e.nodeType})))):g.isFunction(t)?g.grep(e,(function(e,a){return!!t.call(e,a,e)!==o})):1===t.nodeType?g.grep(e,(function(e){return e===t!==o})):g.grep(e,(function(e){return r.call(t,e)>-1!==o}))}"undefined"!=typeof document&&function(){var e=document.createDocumentFragment().appendChild(document.createElement("div")),t=document.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),g._meta.support.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",g._meta.support.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var B={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};B.tbody=B.tfoot=B.colgroup=B.caption=B.thead,B.th=B.td,g.extend({parseHTML:function(e,t){var o=x.exec(e);return o?[t.createElement(o[1])]:function(e,t){var o,a,r,i,s=document.createDocumentFragment(),l=[];if(P.test(e)){for(i=s.appendChild(document.createElement("div")),o=(b.exec(e)[1]||"").toLowerCase(),a=B[o]||B._default,i.innerHTML=a[1]+e+a[2],r=a[0];r--;)i=i.lastChild;g.merge(l,i.childNodes),(i=s.firstChild).textContent=""}return l}(e)}}),g.extend({hasData:function(e){return k.hasData(e)||g._dataPriv.hasData(e)},data:function(e,t,o){return k.access(e,t,o)},removeData:function(e,t){k.remove(e,t)},_data:function(e,t,o){return g._dataPriv.access(e,t,o)},_removeData:function(e,t){g._dataPriv.remove(e,t)}}),D.prototype.extend({data:function(e,t){var o,a,r,i=this[0],s=i&&i.attributes;if(void 0===e){if(this.length&&(r=k.get(i),1===i.nodeType&&!g._dataPriv.get(i,"hasDataAttrs"))){for(o=s.length;o--;)s[o]&&0===(a=s[o].name).indexOf("data-")&&(a=g._camelCase(a.slice(5)),U(i,a,r[a]));g._dataPriv.set(i,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each((function(){k.set(this,e)})):g._processInput(this,null,t,(function(t){var o;if(i&&void 0===t)return void 0!==(o=k.get(i,e))||void 0!==(o=U(i,e))?o:void 0;this.each((function(){k.set(this,e,t)}))}),arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){k.remove(this,e)}))}});var q=/[A-Z]/g,V=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/;function U(e,t,o){var a;if(void 0===o&&1===e.nodeType)if(a="data-"+t.replace(q,"-$&").toLowerCase(),"string"==typeof(o=e.getAttribute(a))){try{o=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:V.test(e)?JSON.parse(e):e)}(o)}catch(e){}k.set(e,t,o)}else o=void 0;return o}var H="undefined"!=typeof document?g(document):{};g.parse=JSON.parse,e.$L=g,e.lyteDomObj=D}("undefined"==typeof window?this:window),function(e){var t=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.msRequestAnimationFrame||function(e){return setTimeout(e,25)},o=function(){this.readOps=[],this.writeOps=[]};o.prototype={constructor:o,scheduled:!1,measure:function(e,t){return e=t?e.bind(t):e,this.readOps.push(e),this.stagingFn(),e},mutate:function(e,t){return e=t?e.bind(t):e,this.writeOps.push(e),this.stagingFn(),e},stagingFn:function(){this.scheduled||(this.scheduled=!0,t(this.executeTasks.bind(this)))},executeTasks:function(){var e;try{this.execute(this.readOps),this.execute(this.writeOps)}catch(t){e=t}if(this.scheduled=!1,(this.readOps.length||this.writeOps.length)&&this.stagingFn(),e){if(!this.catch)throw e;this.catch(e)}},execute:function(e){for(var t;t=e.shift();)t()},clear:function(e){return this.remove(this.readOps,e)||this.remove(this.writeOps,e)},remove:function(e,t){var o=e.indexOf(t);return-1!==o&&!!e.splice(o,1)},catch:null},e.$L.fastdom=new o}("undefined"!=typeof window?window:this),function(e){var t=/\r/g,o=["Top","Right","Bottom","Left"],a=/^(?:input|select|textarea|button)$/i,r=/^(?:a|area)$/i,i=/^--/,s=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,l=new RegExp("^(?:([+-])=|)("+s+")([a-z%]*)$","i"),n=/^(none|table(?!-c[ea]).+)/,p=new RegExp("^("+s+")(?!px)[a-z%]+$","i"),c={letterSpacing:"0",fontWeight:"400"},d=/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,u={set:function(e,t,o){return!1===o?$L.removeAttr(e,t):e.setAttribute(t,t),t}};function h(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}function m(e,t,o){var a,r,i=parseFloat(function(e,t){return $L.css(e,t)}(e,t));o&&o[3]||$L.cssNumber[t];return o&&(a=i||0,r=o[1]?a+(o[1]+1)*o[2]:+o[2]),r}function y(e){return Array.isArray(e)?e:function(e){return(e&&e.match&&e.match($L.regex.rnothtmlwhite)||[]).join(" ")}(e).match($L.regex.rnothtmlwhite)||[]}function f(e){return e.getAttribute&&e.getAttribute("class")||""}function g(t){var o=t.ownerDocument.defaultView;return o&&o.opener||(o=e),o.getComputedStyle(t)}function v(e,t,o){var a;return(o=o||g(e))&&(a=o.getPropertyValue(t)||o[t]),void 0!==a?a+"":a}function x(e,t,a,r,i,s){var l="width"===t?1:0,n=0,p=0;if(a===(r?"border":"content"))return 0;for(;l<4;l+=2)"margin"===a&&(p+=$L.css(e,"margin"+o[l],!0,i)),r?("content"===a&&(p-=$L.css(e,"padding"+o[l],!0,i)),"margin"!==a&&(p-=$L.css(e,"border"+o[l]+"Width",!0,i))):(p+=$L.css(e,"padding"+o[l],!0,i),"padding"!==a?p+=$L.css(e,"border"+o[l]+"Width",!0,i):n+=$L.css(e,"border"+o[l]+"Width",!0,i));return!r&&s>=0&&(p+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-s-p-n-.5))),p}function P(e,t,o){var a=g(e),r=v(e,t,a),i="border-box"===$L.css(e,"boxSizing",!1,a),s=i;if(p.test(r)){if(!o)return r;r="auto"}return s=s&&($L._meta.support.reliableBoxSizing()||r===e.style[t]),("auto"===r||!parseFloat(r)&&"inline"===$L.css(e,"display",!1,a))&&(r=e["offset"+t[0].toUpperCase()+t.slice(1)],s=!0),(r=parseFloat(r)||0)+x(e,t,o||(i?"border":"content"),s,a,r)+"px"}function b(e,t,o){var a,r,i={};for(r in t)i[r]=e.style[r],e.style[r]=t[r];for(r in a=o.call(e),t)e.style[r]=i[r];return a}$L.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var o="pageYOffset"===t;lyteDomObj.prototype[e]=function(a){return $L._processInput(this,e,a,(function(e,a,r){var i;if($L.isWindow(e)?i=e:9===e.nodeType&&(i=e.defaultView),null==r)return i?i[t]:e[a];i?i.scrollTo(o?i.pageXOffset:r,o?r:i.pageYOffset):e[a]=r}))}})),$L.each({Height:"height",Width:"width"},(function(e,t){$L.each({padding:"inner"+e,content:t,"":"outer"+e},(function(o,a){lyteDomObj.prototype[a]=function(r,i){var s=o||(!0===r||!0===i?"margin":"border");return $L._processInput(this,t,"boolean"!=typeof r?r:void 0,(function(t,o,r){var i;return $L.isWindow(t)?0===a.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===r?$L.css(t,o,s):$L.style(t,o,r,s)}))}}))})),lyteDomObj.prototype.extend({path:function(){for(var e,t,o=this[0],a=[];o&&1===o.nodeType&&"BODY"!==o.tagName;){if(e=1,t="",t+=o.nodeName.toLowerCase(),o.id)t+="#"+o.id;else{for(;o.previousElementSibling;)o=o.previousElementSibling,e++;t+=":nth-child("+e+")"}a.unshift(t),o=o.parentNode}return a.join(" > ")},closest:function(e,t){var o=0,a=this.length,r=[];if(!$L.needsContext.test(e))for(;o<a;o++){var i=this[o];do{if(1===i.nodeType&&$L(i).is(e)){r.push(i);break}i=i.parentNode}while(i&&i!==t)}return $L._removeDupes(r,!1,this)},css:function(e,t){return $L._processInput(this,e,t,(function(e,t,o){var a=0,r={};if(Array.isArray(t)){for(;a<t.length;a++)r[t[a]]=$L.css(e,t[a]);return r}return null!=o?$L.style(e,t,o):$L.css(e,t)}))},removeProp:function(e){return $L.each(this,(function(){delete this[$L.propNames[e]||e]}))},removeAttr:function(e){return $L.each(this,(function(t,o){$L.removeAttr(o,e)}))},attr:function(e,t){return $L._processInput(this,e,t,$L.attr)},prop:function(e,t){return $L._processInput(this,e,t,$L.prop)},siblings:function(e){var t;return t=$L.map(this,(function(t,o){var a,r=[],i=t.parentElement.children;for(a=0;a<i.length;a++)t!==i[a]&&1===i[a].nodeType&&$L._checkMatch(i[a],e)&&r.push(i[a]);return r})),$L._removeDupes(t,!1,this)},children:function(e){var t;return t=$L.map(this,(function(t,o){var a,r=[],i=t.children,s=i.length;for(a=0;a<s;a++)1===i[a].nodeType&&$L._checkMatch(i[a],e)&&r.push(i[a]);return r})),this.pushStack(t)},prevUntil:function(e,t){var o;return o=$L.map(this,(function(o,a){for(var r=[];(o=o.previousSibling)&&(1!==o.nodeType||!$L(o).is(e));)1===o.nodeType&&$L._checkMatch(o,t)&&r.push(o);return r})),$L._removeDupes(o,!0,this)},nextUntil:function(e,t){var o;return o=$L.map(this,(function(o,a){for(var r=[];(o=o.nextSibling)&&(1!==o.nodeType||!$L(o).is(e));)1===o.nodeType&&$L._checkMatch(o,t)&&r.push(o);return r})),$L._removeDupes(o,!1,this)},parentsUntil:function(e,t){var o;return o=$L.map(this,(function(o,a){for(var r=[];(o=o.parentNode)&&(1!==o.nodeType||!$L(o).is(e));)1===o.nodeType&&$L._checkMatch(o,t)&&r.push(o);return r})),$L._removeDupes(o,!0,this)},parents:function(e){var t;return t=$L.map(this,(function(t,o){for(var a=[];(t=t.parentNode)&&9!==t.nodeType;)1===t.nodeType&&$L._checkMatch(t,e)&&a.push(t);return a})),$L._removeDupes(t,!0,this)},parent:function(e){var t=$L.map(this,(function(t,o){var a=t.parentNode;return a&&11!==a.nodeType&&$L._checkMatch(a,e)?a:null}));return $L._removeDupes(t,!1,this)},offsetParent:function(){return this.map((function(e,t){for(var o=t.offsetParent;o&&"static"===$L.css(o,"position");)o=o.offsetParent;return o||document.documentElement}))},offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t,o){$L.offset.setOffset(o,e,t)}));var t,o,a=this[0];return a?a.getClientRects().length?(t=a.getBoundingClientRect(),o=a.ownerDocument.defaultView,{top:t.top+o.pageYOffset,left:t.left+o.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,o,a=this[0],r={top:0,left:0};if("fixed"===$L.css(a,"position"))t=a.getBoundingClientRect();else{for(t=this.offset(),o=a.ownerDocument,e=a.offsetParent||o.documentElement;e&&(e===o.body||e===o.documentElement)&&"static"===$L.css(e,"position");)e=e.parentNode;e&&e!==a&&1===e.nodeType&&((r=$L(e).offset()).top+=parseFloat($L.css(e,"borderTopWidth",!0)),r.left+=parseFloat($L.css(e,"borderLeftWidth",!0)))}return{top:t.top-r.top-parseFloat($L.css(a,"marginTop",!0)),left:t.left-r.left-parseFloat($L.css(a,"marginLeft",!0))}}},next:function(e){var t=$L.map(this,(function(t,o){do{t=t.nextSibling}while(t&&1!=t.nodeType);return t&&1===t.nodeType&&$L._checkMatch(t,e)?t:null}));return this.pushStack(t)},nextAll:function(e){var t=$L.map(this,(function(t,o){var a=[];do{(t=t.nextSibling)&&1===t.nodeType&&$L._checkMatch(t,e)&&a.push(t)}while(t);return a}));return $L._removeDupes(t,!1,this)},prev:function(e){var t=$L.map(this,(function(t,o){do{t=t.previousSibling}while(t&&1!=t.nodeType);return t&&1===t.nodeType&&$L._checkMatch(t,e)?t:null}));return this.pushStack(t)},prevAll:function(e){var t=$L.map(this,(function(t,o){var a=[];do{(t=t.previousSibling)&&1===t.nodeType&&$L._checkMatch(t,e)&&a.push(t)}while(t);return a}));return $L._removeDupes(t,!0,this)},contents:function(){var e=$L.map(this,(function(e){return e.nodeName&&"iframe"===e.nodeName.toLowerCase()?e.contentDocument:(e.nodeName&&"template"===e.nodeName.toLowerCase()&&(e=e.content||e),$L.merge([],e.childNodes))}));return this.pushStack(e)},toggleClass:function(e,t){var o,a,r,i,s=this;return $L.isFunction(e)?s.each((function(o,a){$L(a).toggleClass(e.call(a,o,f(a),t),t)})):"boolean"==typeof t?(t?s.addClass(e):s.removeClass(e),this):"string"==typeof t?(i=[].slice.call(arguments),this.toggleClass(i)):$L.each(s,(function(t,i){if(1===i.nodeType)if("string"==typeof e||Array.isArray(e)){var s=y(e);if(s.length)for(o=0;o<s.length;o++)(a=$L(i)).hasClass(s[o])?a.removeClass(s[o]):a.addClass(s[o])}else(r=f(i))&&$L._dataPriv.set(i,"__classname__",r),r||!1===e?i.setAttribute("class",""):i.setAttribute("class",$L._dataPriv.get(i,"__classname__"))}))},addClass:function(e){var t,o,a,r,i=this,s=this.length;if($L.isFunction(e))return i.each((function(t,o){$L(o).addClass(e.call(o,t,f(o)))}));if(arguments.length>1)return r=[].slice.call(arguments),this.addClass(r);for(a=y(e),t=0;t<s;t++)if(1===i[t].nodeType)for(o=0;o<a.length;o++)"string"==typeof a[o]&&a[o]&&(i[t].classList?i[t].classList.add(a[o]):i[t].className+=" "+a[o]);return this},removeClass:function(e){var t,o,a,r=this,i=this.length,s=0,l=0,n=!1;if($L.isFunction(e))return r.each((function(t,o){$L(o).removeClass(e.call(o,t,f(o)))}));if(!arguments.length)return this.attr("class","");if(arguments.length>1)return t=[].slice.call(arguments),this.removeClass(t);for(o=y(e),s=0;s<i;s++)if(1===r[s].nodeType){for(a=" "+(a=f(r[s]))+" ",l=0;l<o.length;l++)"string"==typeof o[l]&&o[l]&&(r[s].classList?r[s].classList.remove(o[l]):(n=!0,a.replace(" "+o[l]+" "," ")));n&&(r[s].setAttribute("class",a),n=!1)}return this},hasClass:function(e){var t,o=this.length;for(e=" "+e+" ",t=0;t<o;t++)if(1===this[t].nodeType&&-1!==(" "+f(this[t])+" ").indexOf(e))return!0;return!1},val:function(e){var o,a,r,i=this[0];if(void 0===e){if(i){if((r=$L.valHooks[i.type]||$L.valHooks[i.nodeName.toLowerCase()])&&"get"in r&&void 0!==(o=r.get(i,"value")))return o;o=i.value}return"string"==typeof o?o.replace(t,""):null==o?"":o}return a=$L.isFunction(e),this.each((function(t,o){var r;null==(r=a?e.call(o,t,$L(o).val()):e)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=$L.map(r,(function(e){return null==e?"":e+""})));var i=$L.valHooks[this.type]||$L.valHooks[this.tagName.toLowerCase()];i&&"set"in i&&void 0!==i.set(this,r,"value")||(this.value=r)}))}}),$L.cssHooks={borderWidth:{set:L},padding:{set:L},marginLeft:{get:function(e,t){if(t&&!$L._meta.support.reliableMarginLeft())return e.getBoundingClientRect().left-b(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left}))+"px"}},opacity:{get:function(e,t){if(t){var o=v(e,"opacity");return""===o?"1":o}}}};var D={position:"absolute",visibility:"hidden",display:"block"};function L(e,t,o){var a=l.exec(t);return a?Math.max(0,a[2]-(o||0))+(a[3]||"px"):t}$L.each(["top","left"],(function(e,t){$L.cssHooks[t]={get:function(e,o){if(o&&!$L._meta.support.reliablePixelPosition()){var a=v(e,t);return p.test(a)?$L(e).position()[t]+"px":a}}}})),$L.each(["width","height"],(function(e,t){$L.cssHooks[t]={get:function(e,o,a){if(o)return!n.test($L.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?P(e,t,a):b(e,D,(function(){return P(e,t,a)}))},set:function(e,o,a){var r,i=a&&g(e),s=a&&"border-box"===$L.css(e,"boxSizing",!1,i),n=a&&x(e,t,a,s,i);return n&&(r=l.exec(o))&&"px"!==(r[3]||"px")&&(e.style[t]=o,o=$L.css(e,t)),L(e,o,n)}}})),$L.offset={setOffset:function(e,t,o){var a,r,i,s,l,n,p=$L.css(e,"position"),c=$L(e),d={};return"static"===p&&c.css("position","relative"),l=c.offset(),i=$L.css(e,"top"),n=$L.css(e,"left"),("absolute"===p||"fixed"===p)&&(i+n).indexOf("auto")>-1?(s=(a=c.position()).top,r=a.left):(s=parseFloat(i)||0,r=parseFloat(n)||0),$L.isFunction(t)&&(t=t.call(e,o,$L.extend({},l))),null!=t.top&&(d.top=t.top-l.top+s),null!=t.left&&(d.left=t.left-l.left+r),c.css("top",d.top),c.css("left",d.left),c}},$L.extend({cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},propNames:{cellpadding:"cellPadding",cellspacing:"cellSpacing",class:"className",colspan:"colSpan",contenteditable:"contentEditable",for:"htmlFor",frameborder:"frameBorder",maxlength:"maxLength",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},attrHooks:{type:{set:function(e,t){if(!$L._meta.support.radioValue&&h(e,"input")&&"radio"===t){var o=e.value;return e.setAttribute(type,t),o&&(e.value=o),t}}}},removeAttr:function(e,t){var o,a=0;for(t=t&&t.match($L.regex.rnothtmlwhite)||[];o=t[a++];)e.removeAttribute(o)},style:function(e,t,o,a){var r,s,n=i.test(t),p=typeof o;e&&1===e.nodeType&&(r=e.style,s=$L.cssHooks[t]||$L.cssHooks[o],"string"===p&&(ret=l.exec(o))&&ret[1]&&(o=m(e,t,ret),p="number"),"number"===p&&(o+=$L.cssNumber[t]?"":"px"),o=s&&"set"in s?s.set(e,o,a):o,n?r.setProperty(e,o):r[t]=o)},css:function(e,t,o,a){var r,i,s=$L._camelCase(t);return(i=$L.cssHooks[t]||$L.cssHooks[s])&&"get"in i&&(r=i.get(e,!0,o)),void 0===r&&(r=v(e,t,a)),"normal"===r&&t in c&&(r=c[t]),o?parseFloat(r)||0:r},attr:function(e,t,o){var a,r;return t=t.toLowerCase(),a=$L.attrHooks[t]||d.test(t)&&u,void 0!==o?null===o?void $L.removeAttr(e,t):a&&"set"in a&&void 0!==(r=a.set(e,t,o))?r:(e.setAttribute(t,o+""),o):a&&"get"in a&&null!==(r=a.get(e,t))?r:null==(r=e.getAttribute(t))?void 0:r},prop:function(e,t,o){var a,r;return t=$L.propNames[t]||t,a=$L.propHooks[t],void 0===o?a&&"get"in a&&void 0!==(r=a.get(e,t))?r:e[t]:a&&"set"in a&&void 0!==(r=a.set(e,o,t))?r:e[t]=o},valHooks:{checkbox:{set:function(e,t){Array.isArray(t)&&(e.checked=$L.inArray($L(e).val(),t)>-1)},get:function(e){null===e.getAttribute("value")||e.value}},radio:{set:function(e,t){if(Array.isArray(t))return e.checked=$L.inArray($L(e).val(),t)>-1},get:function(e){return null===e.getAttribute("value")?"on":e.value}},select:{get:function(e){var t,o,a,r=e.options,i=e.selectedIndex,s="select-one"===e.type,l=s?null:[],n=s?i+1:r.length;for(a=i<0?n:s?i:0;a<n;a++)if(((o=r[a]).selected||a===i)&&!o.disabled&&(!o.parentNode.disabled||!h(o.parentNode,"optgroup"))){if(t=$L(o).val(),s)return t;l.push(t)}return l},set:function(e,t){for(var o,a,r=e.options,i=$L.makeArray(t),s=r.length;s--;)((a=r[s]).selected=$L.inArray($L.valHooks.option.get(a),i)>-1)&&(o=!0);return o||(e.selectedIndex=-1),i}},option:{get:function(e){var t=$L.attr(e,"value");return null!=t?t:($L(e).text().match($L.regex.rnothtmlwhite)||[]).join(" ")}}}}),$L.propHooks={tabIndex:{get:function(e){var t=e.getAttribute("tabindex");return t?parseInt(t,10):a.test(e.nodeName)||r.test(e.nodeName)&&e.href?0:-1}}}}(null==window?this:window),function(e){var t=[],o="initial",a=/^key/,r=/^(?:mouse|pointer|contextmenu|drag|drop)|click/;function i(){for(var e;e=t.shift();)e.call()}function s(e){for(var t in e)if(e[t].length>0)return!1;return!0}function l(e,t,o,a,r,i){var l;return"boolean"==typeof o&&(o=d),"function"!=typeof o?e:(l=o,i&&(o=function(e){var t,a=e.delegateTarget,r=$L._dataPriv.get(a),i=e.type,n=r.events[i];for(t=0;t<n.length;t++)if(n[t].handler===o){n.splice(t,1);break}s(r.events)&&a.removeEventListener(i,r.handle),l.apply(this,arguments)}),o.unId||(o.unId=$L.ev.unId++),$L.each(e,(function(e,i){var s,l,n,p,c=$L._dataPriv.get(i);for(c.events||(c.events={}),s=(p=t.match($L.regex.rnothtmlwhite)).length,(n=c.handle)||(c.handle=n=function(e){$L.ev.triggered!==e.type&&$L.ev.dispatch.apply(i,arguments)});s--;)l=p[s],c.events[l]||(c.events[l]=[]),c.events[l].push({handler:o,type:l,selectors:a,data:r}),i.addEventListener(l,n)})))}function n(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType}function p(e){e.stopPropagation()}$L.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){lyteDomObj.prototype[t]=function(e){return this.on(t,e)}})),lyteDomObj.prototype.ready=function(e){return t.push(e),"initial"===o&&"ready"!==document.readyState&&"complete"!==document.readyState?(o="registered",document.addEventListener("DOMContentLoaded",(function(){i()}))):"ready"!==document.readyState&&"complete"!==document.readyState||i(),this},$L.each(["blur","focus","focusin","focusout","resize","bindScroll","click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave","change","select","submit","keydown","keypress","keyup","contextmenu"],(function(e,t){lyteDomObj.prototype[t]=function(e,o){var a="bindScroll"===t?"scroll":t;return arguments.length>0?this.on(a,null,e,o):this.trigger(a)}})),$L.debounce=function(e,t,o){var a,r=function(){var r,i=arguments,s=this,l=function(){r=e.apply(s,i)},n=!t&&o;return n?l():(a&&clearTimeout(a),a=setTimeout(l,t)),r};return r.cancel=function(){clearTimeout(a),a=null},r},lyteDomObj.prototype.extend({on:function(e,t,o,a){return $L.ev.add(this,e,t,o,a)},one:function(e,t,o,a){return $L.ev.add(this,e,t,o,a,!0)},off:function(e,t,o){var a,r;if(e.preventDefault&&e.handleObj)return r=e.handleObj,$L(e.delegateTarget).off(e.type,r.selector,r.handler),this;if("object"==typeof e){for(a in e)this.off(a,t,e[a]);return this}return!1!==t&&"function"!=typeof t||(o=t,t=void 0),!1===o&&(o=d),$L.each(this,(function(){$L.ev.removeEvents(this,e,t,o)}))},trigger:function(e,t){return this.each((function(o,a){$L.ev.trigger(e,t,a)}))},triggerHandler:function(e,t){var o=this[0];if(o)return $L.ev.trigger(e,t,o,!0)}}),$L.ev={unId:1,removeEvents:function(e,t,o,a){var r,i,s,l,n,p,c,d=$L._dataPriv.hasData(e)&&$L._dataPriv.get(e),u=(d||{}).events,h=0;if(u){for(s=(r=(t||"").match($L.regex.rnothtmlwhite)||[]).length;h<s;h++){for(n=u[l=r[h]]||[],i=0;i<n.length;i++)c=(p=n[i]).handler,o&&o!==p.selector&&("**"!==o||!p.selector)||a&&c.unId!==a.unId||(n.splice(i,1),i--);n.length||(e.removeEventListener(l,d.handle),delete u[l])}$L.isEmptyObject(u)&&$L._dataPriv.remove(e,"events handle")}},add:function(e,t,o,a,r,i){var s;if("object"==typeof t){if("string"==typeof o)for(s in t)$L.ev.add(e,s,o,a,t[s],i);else for(s in t)$L.ev.add(e,s,void 0,o,t[s],i);return e}return null==a&&null==r?l(e,t,o,void 0,void 0,i):null==r?"string"==typeof o?l(e,t,a,o,void 0,i):l(e,t,a,void 0,o,i):l(e,t,r,o,a,i)},trigger:function(t,o,a,r){var i,s,l,c,d,u,h,m=[a||document],y=0,f="string"==typeof t?t:t.type;o=void 0===o?[]:o;if(s=u=a=a||document,i=a.parentNode,d="on"+(f=(t=t[$L.expando]?t:new $L.Event(f,"object"==typeof t&&t)).type),t.target||(t.target=a),l=$L.merge([t],o),h=$L.ev.special[f]||{},r||!h.trigger||!1!==h.trigger.apply(a,o)){if(!r&&!h.noBubble&&!$L.isWindow(a)){for(;i;i=i.parentNode)m.push(i),s=i;s===(a.ownerDocument||document)&&m.push(s.defaultView||s.parentWindow||e)}for(;(i=m[y++])&&!t.isPropagationStopped();)u=i,(c=($L._dataPriv.get(i,"events")||{})[f]&&$L._dataPriv.get(i,"handle"))&&c.apply(i,l),(c=d&&i[d])&&c.apply&&n(i)&&(t.result=c.apply(i,l),!1===t.result&&t.preventDefault());return r||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(m.pop(),l)||!n(a)||d&&$L.isFunction(a[f])&&!$L.isWindow(a)&&((s=a[d])&&(a[d]=null),$L.ev.triggered=f,t.isPropagationStopped()&&u.addEventListener(f,p),a[f](),t.isPropagationStopped()&&u.removeEventListener(f,p),$L.ev.triggered=void 0,s&&(a[d]=s)),t.result}},addProp:function(e,t){Object.defineProperty($L.Event.prototype,e,{enumerable:!0,configurable:!0,get:$L.isFunction(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},dispatch:function(e){var t,o,a,r,i,s,l,n,p,c=this,d=e.expando?e:new $L.Event(e),u=$L._dataPriv.get(c),h=u.events[d.type],m=[],y=[],f={context:c,handler:[]};for(d.delegateTarget=this,m[0]=d,t=1;t<arguments.length;t++)m[t]=arguments[t];for(t=0;t<h.length;t++)if(a=(o=h[t]).handler,r=o.selectors,p=o.data,!r||"click"===d.type&&d.button>=1)"click"===d.type&&d.button>=1||f.handler.push(o);else for(i=e.target;i!==c;i=i.parentNode)1!==i.nodeType||"click"===e.type&&!0===i.disabled||$L._matches(i,r)&&(d.currentTarget=i,y.push({context:i,handler:[o]}));for(y.push(f),t=0;t<y.length&&!d.isPropagationStopped();t++)for(a=y[t].handler,l=y[t].context,d.currentTarget=l,i=0;i<a.length&&!d.isImmediatePropagationStopped();i++)n=a[i].handler,p=a[i].data,d.data=p,d.handleObj=a[i],s=n.apply(l,m),!1===(d.result=s)&&(d.preventDefault(),d.stopPropagation());return d.result},triggered:void 0,special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==document.activeElement&&this.focus)return this.focus(),!1}},blur:{trigger:function(){if(this!==document.activeElement&&this.blur)return this.blur(),!1}},click:{trigger:function(){if("input"===this.nodeName.toLowerCase()&&"checkbox"===this.type&&this.click)return this.click(),!1}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}};var c=function(){return!0},d=function(){return!1};$L.Event=function(e,t){if(this===$L)return new $L.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented?c:d,this.target=e.target):this.type=e,t&&$L.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[$L.expando]=!0},$L.Event.prototype={constructor:$L.event,isDefaultPrevented:d,isPropagationStopped:d,isImmediatePropagationStopped:d,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=c,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=c,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=c,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},$L.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&a.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&r.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},$L.ev.addProp)}(null==window?this:window),function(e){var t,o=/^(HEAD|GET)$/,a=/\?/,r=new Date,i=/(.*?):\s*(.*?)[\r\n]/g,s=/#.*$/,l=/([?&])_=[^&]*/;function n(e){var t=[];return $L.each(e,(function(){var e,o,a;e=this.name,o=this.value,a=$L.isFunction(o)?o():o,t[t.length]=encodeURIComponent(e)+"="+encodeURIComponent(a)})),t.join("&")}function p(e){return"string"==typeof e?e:Array.isArray(e)?n(e):function(e){var t=[];for(var o in e)t[t.length]=o+"="+e[o];return t.join("&")}(e)}function c(e,t){for(var o in t)o=o.toLowerCase(),e.hasOwnProperty(o)||(e[o]=t[o])}function d(e){return"text"!==(e.responseType||"text")||"string"!=typeof e.responseType}function u(e,t,o){for(var a;a=e.shift();)a.apply(t,o)}"undefined"!=typeof document&&((t=document.createElement("a")).href=e.location.href),$L.extend({active:0,ajaxSettings:{contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/,script:/\b(?:java|ecma)script\b/},converters:{"* text":String,"text text":function(e){return e},"text html":function(e){return e},"text json":JSON.parse,"text xml":$L.parseXML,"text javascript":$L.Evaluate},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},accepts:{"*":"*/*",text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript",script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"}},ajaxSetup:function(e){for(var t in e)$L.ajaxSettings[t]=e[t]},ajax:function(e,n){"object"==typeof e&&(e=(n=e).url),function(e){var t,o=["accepts","converters","contents","headers"],a=$L.ajaxSettings;for(t in a)~o.indexOf(t)?c(e[t]?e[t]:e[t]={},a[t]):e[t]=null==e[t]?a[t]:e[t]}(n||(n={})),n.url||(n.url=e);var h,m,y,f,g,v,x,P,b,D,L,C,_,S,w,T=[],E=[],A=[],M=n.xhr,N=(n.type||"GET").toUpperCase(),k=o.test(N),F=n.context||n,I=n.context&&(n.context instanceof lyteDomObj||n.nodeType)?$L(n.context):$L.ev,R=n.beforeSend,O="cancelled",$={},B={readyState:0,setRequestHeader:function(e,t){return null==D&&t&&($[e]=t),this},overrideMimeType:function(e){return null==D&&(n.mimeType=e),this},getAllResponseHeaders:function(){return D?x:null},getResponseHeader:function(e){var t;if(D){if(!P)for(P={};t=i.exec(x);)P[t[1].toLowerCase()]=t[2];return(t=P[e.toLowerCase()])||null}},abort:function(e){var t=e||O;return q&&q.abort(),V(0,t),this},then:function(e,t){return T.push(e),E.push(t),n.async||(_?u(T,F,[S,this.statusText,this]):u(E,F,[this,this.statusText,w])),this},fail:function(e){return E.push(e),n.async||_||u(E,F,[this,this.statusText,w]),this},always:function(e){return A.push(e),n.async||u(A,F,[this,this.statusText]),this},done:function(e){return T.push(e),!n.async&&_&&u(T,F,[S,this.statusText,this]),this}};if(n.dataTypes=(n.dataType||"*").toLowerCase().match($L.regex.rnothtmlwhite),h=n.async="boolean"!=typeof n.async||n.async,m=n.global="boolean"!=typeof n.global||n.global,b=n.processData="boolean"!=typeof n.processData||n.processData,t&&null==n.crossDomain){C=document.createElement("a");try{C.href=n.url,C.href=C.href,n.crossDomain=C.protocol+"//"+C.host!=t.protocol+"//"+t.host}catch(e){n.crossDomain=!0}}for(v in y=n.url.replace(s,""),b&&(k?(f=n.url.slice(y.length),n.data&&(y=function(e,t){var o;return o=p(t),e+(a.test(e)?"&":"?")+o}(y,n.data)),!1===n.cache&&(y=y.replace(l,"$1"),f=(a.test(y)?"&":"?")+"_="+r+++f),n.url=y+f):n.data&&(n.data=p(n.data))),$L.ev&&m&&0==$L.active++&&$L.ev.trigger("ajaxStart"),(n.data&&!k&&!1!==n.contentType||n.contentType)&&B.setRequestHeader("Content-Type",n.contentType||"application/x-www-form-urlencoded; charset=UTF-8"),n.headers)B.setRequestHeader(v,n.headers[v]);if(B.setRequestHeader("Accept",n.dataTypes[0]&&n.accepts[n.dataTypes[0]]?n.accepts[n.dataTypes[0]]+("*"!==n.dataTypes[0]?",*/*; q=0.01;":""):n.accepts["*"]),R&&(!1===R.call(F,B,n)||D))return B.abort();if(O="abort",n.success&&T.push(n.success),n.error&&E.push(n.error),n.complete&&A.push(n.complete),B.readyState=1,I&&I.trigger&&m&&I.trigger("ajaxSend",[B,n]),D)return B;var q=M||new XMLHttpRequest;for(L in q.open(N,n.url,h),n.xhrFields)q[L]=n.xhrFields[L];for(v in n.mimeType&&B.overrideMimeType(n.mimeType),n.crossDomain||$["X-Requested-With"]||($["X-Requested-With"]="XMLHttpRequest"),$)q.setRequestHeader(v,$[v]);function V(e,t,o,a,r){var i=t;D||(D=!0,x=a||"",B.readyState=e>0?4:0,(_=e>=200&&e<300||304===e)?(o=function(e,t,o,a){var r,i,s=t.dataTypes,l=t.contents;"*"===s[0]&&(r=t.mimeType||o.getResponseHeader("content-type"));if(r)for(i in l)if(l[i].test(r)){s[0]=i;break}"*"===s[0]&&(s[0]=a);return function(e,t,o,a,r){var i,s,l;if(e===t)return{data:o,state:"success"};if("HEAD"===r.type)return;for(var n in s=e+" "+t,r.converters)if(n.toLowerCase()===s){l=r.converters[n];break}a.responseText=o;try{i=l?l(o):""}catch(e){return{data:void 0,state:"parseerror",error:e}}$L.ajaxSettings.responseFields[t]&&(a[$L.ajaxSettings.responseFields[t]]=i);return{data:i,state:"success"}}(a,s[0],e,o,t)}(o,n,B,r),304==e?i="notmodified":204==e||"HEAD"==n.type?i="nocontent":(i=o.state,S=o.data,w=o.error,_=!w)):(B.responseText=o,!e&&i||(i="error",e=e<0?0:e),w=i),B.status=e,B.statusText=(i||t)+"",_&&T.length>0?u(T,F,[S,i,B]):w&&E.length>0&&u(E,F,[B,i,w]),I&&I.trigger&&m&&I.trigger(_?"ajaxSuccess":"ajaxError",[B,n,_?S:w]),A.length>0&&u(A,F,[B,i]),I&&I.trigger&&m&&(I.trigger("ajaxComplete",[B,n]),$L.ev&&!--$L.active&&$L.ev.trigger("ajaxStop")))}return g=!k&&n.data||null,q.onload=function(){var e=d(q);V(q.status,q.statusText,e?q.response:q.responseText,q.getAllResponseHeaders(),e?"binary":"text")},q.onerror=q.onabort=function(){var e=d(q);V(q.status,q.statusText,e?q.response:q.responseText,q.getAllResponseHeaders(),e?"binary":"text")},n.async&&(q.timeout=n.timeout?n.timeout:0,q.ontimeout=function(){V(0,"timeout")}),q.send(g),B},getScript:function(e,t,o){return $L.get(e,t,o)},getJSON:function(e,t){return $L.get(e,void 0,t)}}),$L.each(["get","post"],(function(e,t){$L[t]=function(e,o,a,r){return $L.isFunction(o)&&(r=r||a,a=o,o=void 0),$L.ajax($L.extend({type:t,url:e,data:o,dataType:r,success:a},$L.isPlainObject(e)&&e))}}))}("undefined"==typeof window?this:window),function(e){e._setRtlScrollType_=function(){var e="reverse",t=document.createElement("div");t.innerHTML='<div dir="rtl" style="width: 1px; height: 1px; position: fixed; top: 0px; left: 0px; overflow: hidden"><div style="width: 2px"><span style="display: inline-block; width: 1px"></span><span style="display: inline-block; width: 1px"></span></div></div>';var o=t.children[0];return document.body.appendChild(o),o.scrollLeft>0?e="default":"undefined"!=typeof Element&&Element.prototype.scrollIntoView?(o.children[0].children[1].scrollIntoView(),o.scrollLeft<0&&(e="negative")):(o.scrollLeft=1,0===o.scrollLeft&&(e="negative")),e},"undefined"!=typeof document&&("ready"!==document.readyState&&"complete"!==document.readyState?document.addEventListener("DOMContentLoaded",(function(){$L.rtlScrollType=e._setRtlScrollType_()})):"ready"!==document.readyState&&"complete"!==document.readyState||($L.rtlScrollType=e._setRtlScrollType_()))}("undefined"==typeof window?this:window),function(e){var t,o,a={"ease-in":function(e){return e*e},"ease-out":function(e){return e*(2-e)},linear:function(e){return e},"ease-in-out":function(e){return e<.5?2*e*e:(4-2*e)*e-1}};function r(t,o,i,l,n,p,c,d,u,h){var m,y=Date.now(),f=p-(c=c-(y-i)),g=$L.Tween.propHooks[t];m=function(e,t){return a[t](e)}((f=c<0?p:f)/p,d),"set"in g?g.set(u,n+l*m,h):this[t]=n+l*m,h._stopped||(c>0?this["rAF"+t]=e.requestAnimationFrame(r.bind(this,t,o,y,l,n,p,c,d,u,h)):s(u.get(0),!1))}function i(e,t){var o=$L.Tween.propHooks[e];return"get"in o?o.get(t):t.get(0)[e]}function s(e,a){if(o.data[e.lyteAnimateId][0]){var r=o.data[e.lyteAnimateId][0],i=r.nonstandard||0,s=r.standard;t.get(e,"animeProp","animate");a?r.standard=s=!0:(i--,r.nonstandard=i),s&&i<=0&&o.dequeue(e)}}function l(e){e.lyteAnimateId||o.add(e);var a=e.nodeName,r=t.get(e,"displayValue");if(r)return r;if(e.hasAttribute("lyte-rendered"))r="block";else{var i=e.ownerDocument,s=i.body.appendChild(i.createElement(a));r=i.defaultView.getComputedStyle(s).display,i.body.removeChild(s),"none"===r&&(r="block")}return t.set(e,"displayValue",r),r}function n(e,t){for(var o={},a=["left","right","top","bottom"],r=0;r<a.length;r++)o["margin-"+a[r]]=o["padding-"+a[r]]=e;return t&&(o.width=o.height=o.opacity=e),o}function p(e,a){for(var r=[],i=0;i<e.length;i++){var s=e[i];o.add(s);var n=s.style.display;a?("none"==n&&(r[i]=t.get(s,"display"),r[i]||(r[i]="")),""==n&&"none"==$L(s).css("display")&&(r[i]=l(s))):"none"!=n&&(r[i]="none",t.set(s,"display",n))}for(var p=0;p<e.length;p++)$L(e[p]).css("display",r[p]);return e}function c(){return p([this])}function d(e,t){if(function(e,t){if("hide"==t&&e||"show"==t&&!e)return!1;return!0}(e,t))return e.constructor==Boolean?p([this],e):$L.each(this,(function(){d("none"!=$L(this).css("display"))}))}function u(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function h(){this.data={}}function m(e){e.target==this&&t.get(this,"endCallback").call(this,e)}function y(){}function f(e,t,o,a){var r=e[t].toString();if(/^(\()/g.exec(r))return r;var i=/cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|auto|vmin|vmax|%+$/gi,s=r.match(i),l=r.match(/^\+=|\-=|\*=|\/=/g);if("none"==a[o]||/matrix/gi.test(a[o]))s="";else if(null==s){var n=a[o].match(i);s=null==n?"":"auto"==n[0]?"px":n[0]}else s=s[0],r=r.slice(0,r.indexOf(s));if(l){var p=parseInt(a[o]),c=r.split("=");switch(p=NaN==p?0:p,c[0]){case"/":r=p/parseFloat(c[1]);break;case"-":r=p-parseFloat(c[1]);break;case"*":r=p*parseFloat(c[1]);break;default:r=p+parseFloat(c[1])}}return r+s}function g(){var a=!$L.isWindow(this)&&this.ownerDocument.defaultView;$L.fastdom.measure(function(){var n=a;if(a){var p=a.getComputedStyle(this);if(!(n="none"==p.display)&&!this.offsetParent)return void P.call(this)}var c=o.data[this.lyteAnimateId][0];if(c){var d=c.value,u=Object.keys(d),h=[],m={},y={},g=t.get(this,"animeProp","original");g||(g={},t.set(this,"animeProp","original",g)),$L.fastdom.mutate(function(){if(c=o.data[this.lyteAnimateId][0]){for(var p,v=!0,x={},b=$L(this),D=!1,L=0;L<u.length;L++){var C,_=u[L].replace(/(-\w)/g,(function(e){return e[1].toUpperCase()})),S=d[u[L]],w=null;if(!(a&&/show|hide|toggle/.test(S)&&("hide"==S||!n&&"toggle"==S?w="hide":("show"==S||n&&"toggle"==S)&&(w="show"),"show"==w&&!n||"hide"==w&&n))&&(a&&v&&(n?null==this._lytedisplay?this.style.display=l(this):this.style.display=this._lytedisplay||"":this._lytedisplay=this.style.display,p=a.getComputedStyle(this),this.getBoundingClientRect(),v=!1),-1==h.indexOf(_)&&h.push(_),x[_]=x[_]=C=_ in(p||{}),D=D||!!C,n?("show"!=w?m[_]=C?p[_]:i(_,b):(g[_]=this.style[_],m[_]=0),y[_]=C?w?p[_]:f(d,u[L],_,p):d[u[L]]):("hide"!=w?y[_]=C?f(d,u[L],_,p):d[u[L]]:(g[_]=this.style[_],y[_]=0),m[_]=C?p[_]:i(_,b)),parseFloat(y[_])==parseFloat(m[_])||/auto/.test(y[_])||/auto/.test(m[_]))){delete m[_],delete y[_];var T=h.indexOf(_);T>-1&&h.splice(T,1)}}t.set(this,"animeProp","from",m),t.set(this,"animeProp","to",y),t.set(this,"animeProp","mode",w),t.set(this,"animeProp","animate",h),t.set(this,"animeProp","standardObj",x),c.standard=!D,!D&&$L.isEmptyObject(y)&&s(this),D&&($L.each(m,function(e,t){x[e]&&(this.style[e]=t)}.bind(this)),P.call(this)),$L.each(y,function(a,s){var l=c.nonstandard||0;x[a]||(c.nonstandard=l+1,function(a,s,l){var n,p=Date.now(),c=$L(l),d=($L.Tween.propHooks[a],i(a,c)),u=s-d,h=o.data[l.lyteAnimateId][0].options,m=h.duration||1,y=t.get(l,"animeProp"),f=h.start,g=h.fired;n=h.timingFunction="ease"===h.timingFunction?"ease-in-out":h.timingFunction,f&&!g&&(h.fired=!0,f.call(l,{options:h,from:y.from,to:y.to,value:h.value,startTime:p,target:l,transitionProperty:Object.keys(y.to)})),l["rAF"+a]=e.requestAnimationFrame(r.bind(l,a,s,p,u,d,m,m,n,c,h))}(a,s,this))}.bind(this))}}.bind(this))}}.bind(this))}function v(){if(document.body.contains(this)){for(var e=o.data[this.lyteAnimateId][0].options,t=["timingFunction","duration","delay"],a="",r=Object.keys(o.data[this.lyteAnimateId][0].value||{}),i=0;i<t.length;i++)if(t[i]in e){var s="";"delay"!=t[i]&&"duration"!=t[i]||/[ms|s]+/gi.test(e[t[i]])||(s="ms"),a+="transition-"+u(t[i])+":"+e[t[i]]+s+";"}if(r.length){a+="transition-property : ";for(var l=0;l<r.length;l++)a+=l>0?","+u(r[l]):u(r[l])}return a+";"}}function x(){this.style.removeProperty("transition")}function P(){if((t.get(this,"animeProp","animate")||[]).length){x.call(this);var e=v.call(this);t.set(this,"endCallback",(function(e){"timeout"!=e.type&&e.stopPropagation();var a=t.get(this,"animeProp","animate");if(o.data[this.lyteAnimateId].length){var r=t.get(this,"propertyCount");if("timeout"==e.type&&(r=a.length-1),t.set(this,"propertyCount",++r),a.length==r){clearTimeout(this._anitime),delete this._anitime,x.call(this);var i=t.get(this,"animeProp","mode"),l=t.get(this,"animeProp","original");i?"hide"==i?"timeout"==e.type?(c.call(this),$L.each(l,function(e,t){$L(this).css(e,t)}.bind(this)),s(this,!0)):setTimeout(function(){c.call(this),$L.each(l,function(e,t){$L(this).css(e,t)}.bind(this)),s(this,!0)}.bind(this),20):($L.each(l,function(e,t){$L(this).css(e,t)}.bind(this)),s(this,!0)):s(this,!0),setTimeout(function(){this.style.overflow=this._orioverflow,delete this._orioverflow}.bind(this),20)}}})),this._orioverflow=this.style.overflow,this.style.overflow="hidden",t.set(this,"propertyCount",0),this._styletime=setTimeout(function(){delete this._styletime;var t=$L(this).attr("style");$L(this).attr("style",(t?t+";":"")+e),setTimeout(b.bind(this),20)}.bind(this),20)}else s(this,!0)}function b(){var e=o.data[this.lyteAnimateId][0];if(e){var a=e.options,r=Date.now(),i=a.fired;t.set(this,"animeProp","startTime",r);var s=t.get(this,"animeProp");a.start&&!i&&(a.fired=!0,a.start.call(this,{options:a,from:s.from,to:s.to,value:o.data[this.lyteAnimateId][0].value,startTime:r,target:this,transitionProperty:Object.keys(s.to)}));var l=this;$L.each(t.get(this,"animeProp","to"),(function(e,t){$L(l).css(e,t)})),this._anitime=setTimeout(m.bind(this,{type:"timeout",target:this}),function(e){var t=0;if(/\d+/.test(e)){var o=e.match(/(\d+)(s|ms){0,}$/);t=parseFloat(o[1])*("s"==o[2]?1e3:1)}return t}(a.duration.toString())+10)}else x.call(this),this.removeEventListener("transitionend",m)}function D(e,t,o){var a={};return o&&o.constructor==Function&&(a.complete=o),t&&(t.constructor==Function?a.complete=t:t.constructor==Object?$L.extend(a,t):t.constructor==String&&(a.timingFunction=t)),null!=e&&(e.constructor==Object?$L.extend(a,e):e.constructor==Number?a.duration=e:e.constructor==Function&&(a.complete=e)),null!=a.delay&&/[s]+/gi.test(a.delay)&&(options.delay=1e3*parseInt(options.delay)),"duration"in a||(a.duration=400),/[s]+/gi.test(a.duration)&&(options.duration=1e3*parseInt(options.duration)),a.timingFunction||(a.timingFunction="ease"),a}function L(e,t,o){$L(this).css(e,this.style[e].replace(/([0-9.-]+)/,(function(e){return(parseFloat(e)-t)*o+t})))}function C(a,r){if(a){t.get(this,"propertyCount");t.set(this,"propertyCount",(t.get(this,"animeProp","animate")||[]).length-1),m.call(this,{target:this,type:"timeout"}),r&&o.dequeueAll(this)}else{var i=o.data[this.lyteAnimateId];if(!i)return;clearTimeout(this._anitime),delete this._anitime;for(var l=i[0].options,n=t.get(this,"animeProp"),p=Date.now(),c=n.from,d=(n.to,n.startTime),u=1-Math.max(0,d+l.duration-p)/l.duration,h=Object.keys(n.to||{}),y=t.get(this,"animeProp","standardObj"),f=0;f<h.length;f++)if(y[h[f]]){s(this,!0);var g=c[h[f]];"none"!=g||/deg/gi.test(g)||(g=1),g=parseInt(g),g=isNaN(g)?0:g,L.call(this,h[f],g,u)}else e.cancelAnimationFrame(this["rAF"+h[f]]),s(this,!1);$L(this).css("transition",""),r&&o.dequeueAll(this)}}$L.Tween={propHooks:{}},h.prototype={add:function(e){if(e.lyteAnimateId)return e.lyteAnimateId;var t="lyteAnimate"+parseInt(Math.random()*Math.pow(10,6));return e.lyteAnimateId=t,this.data[t]=[],e[e.lyteAnimateId]={},t},queue:function(e,t,o){for(var a=0;a<e.length;a++){var r=e[a],i=r.lyteAnimateId;i||(i=this.add(r)),this.data[i].push({elem:r,options:t,value:o,properties:Object.keys(o)}),1==this.data[i].length&&(r.addEventListener("transitionend",m),this.next(r))}},dequeue:function(e){var a,r,i,s,l;a=e,s=((o.data[a.lyteAnimateId][0]||{}).options||{}).complete,l={},s&&(r=t.get(a,"animeProp","animate"),i=t.get(a,"animeProp"),l.transitionProperty=r,l.from=i.from,l.to=i.to,l.startTime=i.startTime,s.call(a,l)),this.data[e.lyteAnimateId].splice(0,1),this.next(e)},dequeueAll:function(e){this.data[e.lyteAnimateId]=this.data[e.lyteAnimateId].splice(),this.next(e)},next:function(e){clearTimeout(e._nextime),e._nextime=setTimeout(this.call.bind(this),13,e)},call:function(e){delete e._nextime,e.lyteAnimateId&&this.data[e.lyteAnimateId][0]?g.call(e):(this.data[e.lyteAnimateId]=[],e.removeEventListener("transitionend",m))}},y.prototype={set:function(){arguments.length<3||(3==arguments.length?(null==arguments[0][arguments[0].lyteAnimateId]&&(arguments[0][arguments[0].lyteAnimateId]={}),arguments[0][arguments[0].lyteAnimateId][arguments[1]]=arguments[2]):4==arguments.length&&(null==arguments[0][arguments[0].lyteAnimateId][arguments[1]]&&(arguments[0][arguments[0].lyteAnimateId][arguments[1]]={}),arguments[0][arguments[0].lyteAnimateId][arguments[1]][arguments[2]]=arguments[3]))},get:function(){if(!(arguments.length<1))return 1==arguments.length?arguments[0][arguments[0].lyteAnimateId]:2==arguments.length?arguments[0][arguments[0].lyteAnimateId][arguments[1]]:3==arguments.length&&arguments[0][arguments[0].lyteAnimateId][arguments[1]]?arguments[0][arguments[0].lyteAnimateId][arguments[1]][arguments[2]]:void 0}},t=new y,o=new h,lyteDomObj&&(lyteDomObj.prototype.animate=function(){if(arguments.length){var e=D(arguments[1],arguments[2],arguments[3]);o.queue(this,e,arguments[0])}return this},lyteDomObj.prototype.fadeTo=function(e,t,a,r){if(null!=t&&t.constructor==Number&&t<1){var i=t;t=e,e=i}e=e||0;var s=D(t,a,r);return o.queue(this,s,e.constructor==Object?e:{opacity:e}),this},$L.each({fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"},slideUp:{height:"hide",paddingTop:"hide",paddingBottom:"hide"},slideDown:{height:"show",paddingTop:"show",paddingBottom:"show"},slideToggle:{height:"toggle",paddingTop:"toggle",paddingBottom:"toggle"}},(function(e,t){lyteDomObj.prototype[e]=function(e,o,a){return this.animate(t,e,o,a)}})),lyteDomObj.prototype.stop=function(e,t){return $L.each(this,(function(){C.call(this,null==t||t,e)}))},lyteDomObj.prototype.finish=function(e){return $L.each(this,(function(){var e=o.data[this.lyteAnimateId];if(e&&e.length){for(var t=1;t<e.length;t++)e[t].options.duration=1;C.call(this,!0,!1)}}))},$L.each({show:n("show",!0),hide:n("hide",!0),toggle:n("toggle",!0)},(function(e,t){lyteDomObj.prototype[e]=function(o,a,r){return o&&o.constructor!=Boolean?this.animate(t,o,a,r):$L.each(this,(function(){d.call(this,"none"==$L(this).css("display"),e)}))}})))}(window),function(e){$L.migrateEnabled=!0;var t={};function o(e){t[e]||(t[e]=!0,console.warn("The "+e+" has been removed and is now being supported through the migrate plugin."))}var a={};function r(e,t,o,a){if("string"!=typeof e&&e.length)for(var r=e.length,l=0;l<r;l++)a?i(e[l],t,o):s(e[l],o.name);else a?i(e,t,o):s(e,t,o.name)}function i(e,t,o){var a=(new Date).getTime;e["_"+t]||(e["_"+t]={}),o.name?e["_"+t][o.name]=o:e["_"+t][a]=o}function s(e,t,o){e["_"+t].hasOwnProperty(o)&&delete e["_"+t][o]}function l(t){e.event=t||e.event;for(var o=t.target;o&&o!==document&&!o.hasOwnProperty("_"+t.type);)o=o.parentElement?o.parentElement:document,t._currentTarget=o;if(o&&o.hasOwnProperty("_"+t.type)){var a=!1;do{for(key in o["_"+t.type]){o["_"+t.type][key].call(t.target,t)||a||(a=!0)}o=o.parentElement}while(!a&&o)}}Object.defineProperty(lyteDomObj.prototype,"e",{get:function(){return o(".e property"),this.singular||this.isId?this[0]:this}}),lyteDomObj.prototype.iterator=function(e){o("iterator function"),this.each((function(t,o){e.call(void 0,o)}))},lyteDomObj.prototype.insertBefore=function(e){o("insertBefore function"),this.iterator((function(t){t.parentElement.insertBefore(e,t)}))},lyteDomObj.prototype.insertAfter=function(e){o("insertAfter function"),this.iterator((function(t){t.after(e)}))},lyteDomObj.prototype.html=function(e){if(o("html function"),!e&&""!==e)return this[0].innerHTML;this.iterator((function(t){t.innerHTML=e}))},lyteDomObj.prototype.append=function(e){o("append function"),this.iterator((function(t){t.appendChild(e)}))},lyteDomObj.prototype.replace=function(e){this.iterator((function(t){t.parentElement.replaceChild(e,t)}))},lyteDomObj.prototype.empty=function(){return o("empty function"),this.iterator((function(e){for(;e&&e.lastChild;)e.removeChild(e.lastChild)})),this},lyteDomObj.prototype.bind=function(t,i){o("bind function"),r(this.e,t,i,!0),a[t]||(this.e===e&&e.addEventListener(t,l),document.addEventListener(t,l),a[t]=!0)},lyteDomObj.prototype.unbind=function(e,t){o("unbind function"),this.e["_"+e].hasOwnProperty(t.name)?r(this.e,e,t):console.error("Improper function name")},lyteDomObj.prototype.hide||(lyteDomObj.prototype.hide=function(e){o("hide function"),this.iterator((function(e){e.style.display="none"}))}),lyteDomObj.prototype.show||(lyteDomObj.prototype.show=function(e){o("show function"),this.iterator((function(e){e.style.display="inherit"}))}),console.warn("Lyte-Dom-Migrate has been enabled. Some of the removed functions are now being supported through migrate plugin.")}(window),function(e){"use strict";function t(){return d.createDocumentFragment()}function o(e){return d.createElement(e)}function a(e,t){if(!e)throw new Error("Failed to construct "+t+": 1 argument required, but only 0 present.")}function r(e){if(1===e.length)return i(e[0]);for(var o=t(),a=O.call(e),r=0;r<e.length;r++)o.appendChild(i(a[r]));return o}function i(e){return"string"==typeof e?d.createTextNode(e):e}for(var s,l,n,p,c,d=e.document,u=Object.prototype.hasOwnProperty,h=Object.defineProperty||function(e,t,o){return u.call(o,"value")?e[t]=o.value:(u.call(o,"get")&&e.__defineGetter__(t,o.get),u.call(o,"set")&&e.__defineSetter__(t,o.set)),e},m=[].indexOf||function(e){for(var t=this.length;t--&&this[t]!==e;);return t},y=function(e){var t=void 0===e.className,o=t?e.getAttribute("class")||"":e.className,a=t||"object"==typeof o,r=(a?t?o:o.baseVal:o).replace(v,"");r.length&&R.push.apply(this,r.split(x)),this._isSVG=a,this._=e},f={get:function(){return new y(this)},set:function(){}},g="dom4-tmp-".concat(Math.random()*+new Date).replace(".","-"),v=/^\s+|\s+$/g,x=/\s+/,P=function(e,t){return this.contains(e)?t||this.remove(e):(void 0===t||t)&&(t=!0,this.add(e)),!!t},b=e.DocumentFragment&&DocumentFragment.prototype,D=e.Node,L=(D||Element).prototype,C=e.CharacterData||D,_=C&&C.prototype,S=e.DocumentType,w=S&&S.prototype,T=(e.Element||D||e.HTMLElement).prototype,E=e.HTMLSelectElement||o("select").constructor,A=E.prototype.remove,M=e.ShadowRoot,N=e.SVGElement,k=/ /g,F=function(e){var t="querySelectorAll"===e;return function(o){var a,r,i,s,l,n,p=this.parentNode;if(p){for(s=(i=this.getAttribute("id")||g)===g?i:i.replace(k,"\\ "),n=o.split(","),r=0;r<n.length;r++)n[r]="#"+s+" "+n[r];o=n.join(",")}if(i===g&&this.setAttribute("id",i),l=(p||this)[e](o),i===g&&this.removeAttribute("id"),t)for(r=l.length,a=new Array(r);r--;)a[r]=l[r];else a=l;return a}},I=function(e){"query"in e||(e.query=T.query),"queryAll"in e||(e.queryAll=T.queryAll)},R=["matches",T.matchesSelector||T.webkitMatchesSelector||T.khtmlMatchesSelector||T.mozMatchesSelector||T.msMatchesSelector||T.oMatchesSelector||function(e){var t=this.parentNode;return!!t&&-1<m.call(t.querySelectorAll(e),this)},"closest",function(e){for(var t,o=this;(t=o&&o.matches)&&!o.matches(e);)o=o.parentNode;return t?o:null},"prepend",function(){var e=this.firstChild,t=r(arguments);e?this.insertBefore(t,e):this.appendChild(t)},"append",function(){this.appendChild(r(arguments))},"before",function(){var e=this.parentNode;e&&e.insertBefore(r(arguments),this)},"after",function(){var e=this.parentNode,t=this.nextSibling,o=r(arguments);e&&(t?e.insertBefore(o,t):e.appendChild(o))},"replace",function(){this.replaceWith.apply(this,arguments)},"replaceWith",function(){var e=this.parentNode;e&&e.replaceChild(r(arguments),this)},"remove",function(){var e=this.parentNode;e&&e.removeChild(this)},"query",F("querySelector"),"queryAll",F("querySelectorAll")],O=R.slice,$=R.length;$;$-=2)if((l=R[$-2])in T||(T[l]=R[$-1]),"remove"===l&&(E.prototype[l]=function(){return 0<arguments.length?A.apply(this,arguments):T.remove.call(this)}),/^(?:before|after|replace|replaceWith|remove)$/.test(l)&&(!C||l in _||(_[l]=R[$-1]),!S||l in w||(w[l]=R[$-1])),/^(?:append|prepend)$/.test(l))if(b)l in b||(b[l]=R[$-1]);else try{t().constructor.prototype[l]=R[$-1]}catch(e){}if(I(d),b)I(b);else try{I(t().constructor.prototype)}catch(e){}var B;M&&I(M.prototype),o("a").matches("a")||(T[l]=(B=T[l],function(e){return B.call(this.parentNode?this:t().appendChild(this),e)})),y.prototype={length:0,add:function(){for(var e,t=0;t<arguments.length;t++)e=arguments[t],this.contains(e)||R.push.call(this,l);this._isSVG?this._.setAttribute("class",""+this):this._.className=""+this},contains:function(e){return function(t){return-1<($=e.call(this,l=function(e){if(!e)throw"SyntaxError";if(x.test(e))throw"InvalidCharacterError";return e}(t)))}}([].indexOf||function(e){for($=this.length;$--&&this[$]!==e;);return $}),item:function(e){return this[e]||null},remove:function(){for(var e,t=0;t<arguments.length;t++)e=arguments[t],this.contains(e)&&R.splice.call(this,$,1);this._isSVG?this._.setAttribute("class",""+this):this._.className=""+this},toggle:P,toString:function(){return R.join.call(this," ")}},!N||"classList"in N.prototype||h(N.prototype,"classList",f),"classList"in d.documentElement?((p=o("div").classList).add("a","b","a"),"a b"!=p&&("add"in(n=p.constructor.prototype)||(n=e.TemporaryTokenList.prototype),c=function(e){return function(){for(var t=0;t<arguments.length;)e.call(this,arguments[t++])}},n.add=c(n.add),n.remove=c(n.remove),n.toggle=P)):h(T,"classList",f),"contains"in L||h(L,"contains",{value:function(e){for(;e&&e!==this;)e=e.parentNode;return this===e}}),"head"in d||h(d,"head",{get:function(){return s||(s=d.getElementsByTagName("head")[0])}}),function(){for(var t,o=e.requestAnimationFrame,a=e.cancelAnimationFrame,r=["o","ms","moz","webkit"],i=r.length;!a&&i--;)o=o||e[r[i]+"RequestAnimationFrame"],a=e[r[i]+"CancelAnimationFrame"]||e[r[i]+"CancelRequestAnimationFrame"];a||(o?(t=o,o=function(e){var o=!0;return t((function(){o&&e.apply(this,arguments)})),function(){o=!1}},a=function(e){e()}):(o=function(e){return setTimeout(e,15,15)},a=function(e){clearTimeout(e)})),e.requestAnimationFrame=o,e.cancelAnimationFrame=a}();try{new e.CustomEvent("?")}catch(t){e.CustomEvent=function(e,t){function o(e,t,o,a){this.initEvent(e,t,o),this.detail=a}return function(a,r){var i=d.createEvent(e);if("string"!=typeof a)throw new Error("An event name must be provided");return"Event"==e&&(i.initCustomEvent=o),null==r&&(r=t),i.initCustomEvent(a,r.bubbles,r.cancelable,r.detail),i}}(e.CustomEvent?"CustomEvent":"Event",{bubbles:!1,cancelable:!1,detail:null})}try{new Event("_")}catch(t){if(t=function(e){function t(e,t){a(arguments.length,"Event");var o=d.createEvent("Event");return t||(t={}),o.initEvent(e,!!t.bubbles,!!t.cancelable),o}return t.prototype=e.prototype,t}(e.Event||function(){}),e.Event){var q=e.Event;Object.keys(q).forEach((function(e,o){t[e]=q[e]}))}h(e,"Event",{value:t}),Event!==t&&(Event=t)}try{new KeyboardEvent("_",{})}catch(t){t=function(t){var o,r=0,i={char:"",key:"",location:0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,altGraphKey:!1,repeat:!1,locale:navigator.language,detail:0,bubbles:!1,cancelable:!1,keyCode:0,charCode:0,which:0};try{var s=d.createEvent("KeyboardEvent");s.initKeyboardEvent("keyup",!1,!1,e,"+",3,!0,!1,!0,!1,!1),r="+"==(s.keyIdentifier||s.key)&&3==(s.keyLocation||s.location)&&(s.ctrlKey?s.altKey?1:3:s.shiftKey?2:4)||9}catch(e){}function l(e,t,o){try{t[e]=o[e]}catch(e){}}function n(t,s){a(arguments.length,"KeyboardEvent"),s=function(e,t){for(var o in t)t.hasOwnProperty(o)&&!t.hasOwnProperty.call(e,o)&&(e[o]=t[o]);return e}(s||{},i);var n,p=d.createEvent(o),c=s.ctrlKey,u=s.shiftKey,h=s.altKey,m=s.metaKey,y=s.altGraphKey,f=r>3?function(e){for(var t=[],o=["ctrlKey","Control","shiftKey","Shift","altKey","Alt","metaKey","Meta","altGraphKey","AltGraph"],a=0;a<o.length;a+=2)e[o[a]]&&t.push(o[a+1]);return t.join(" ")}(s):null,g=String(s.key),v=String(s.char),x=s.location,P=s.keyCode||(s.keyCode=g)&&g.charCodeAt(0)||0,b=s.charCode||(s.charCode=v)&&v.charCodeAt(0)||0,D=s.bubbles,L=s.cancelable,C=s.repeat,_=s.locale,S=s.view||e;if(s.which||(s.which=s.keyCode),"initKeyEvent"in p)p.initKeyEvent(t,D,L,S,c,h,u,m,P,b);else if(0<r&&"initKeyboardEvent"in p){switch(n=[t,D,L,S],r){case 1:n.push(g,x,c,u,h,m,y);break;case 2:n.push(c,h,u,m,P,b);break;case 3:n.push(g,x,c,h,u,m,y);break;case 4:n.push(g,x,f,C,_);break;default:n.push(char,g,x,f,C,_)}p.initKeyboardEvent.apply(p,n)}else p.initEvent(t,D,L);for(g in p)i.hasOwnProperty(g)&&p[g]!==s[g]&&l(g,p,s);return p}return o=0<r?"KeyboardEvent":"Event",n.prototype=t.prototype,n}(e.KeyboardEvent||function(){}),h(e,"KeyboardEvent",{value:t}),KeyboardEvent!==t&&(KeyboardEvent=t)}try{new MouseEvent("_",{})}catch(t){t=function(t){function o(t,o){a(arguments.length,"MouseEvent");var r=d.createEvent("MouseEvent");return o||(o={}),r.initMouseEvent(t,!!o.bubbles,!!o.cancelable,o.view||e,o.detail||1,o.screenX||0,o.screenY||0,o.clientX||0,o.clientY||0,!!o.ctrlKey,!!o.altKey,!!o.shiftKey,!!o.metaKey,o.button||0,o.relatedTarget||null),r}return o.prototype=t.prototype,o}(e.MouseEvent||function(){}),h(e,"MouseEvent",{value:t}),MouseEvent!==t&&(MouseEvent=t)}}(window),function(e){function t(e,t){function o(e){if(!this||this.constructor!==o)return new o(e);this._keys=[],this._values=[],this._itp=[],this.objectOnly=t,e&&function(e){this.add?e.forEach(this.add,this):e.forEach((function(e){this.set(e[0],e[1])}),this)}.call(this,e)}return t||y(e,"size",{get:u}),e.constructor=o,o.prototype=e,o}function o(e){return this.has(e)&&(this._keys.splice(m,1),this._values.splice(m,1),this._itp.forEach((function(e){m<e[0]&&e[0]--}))),-1<m}function a(e){return this.has(e)?this._values[m]:void 0}function r(e,t){if(this.objectOnly&&t!==Object(t))throw new TypeError("Invalid value used as weak collection key");if(t!=t||0===t)for(m=e.length;m--&&!f(e[m],t););else m=e.indexOf(t);return-1<m}function i(e){return r.call(this,this._values,e)}function s(e){return r.call(this,this._keys,e)}function l(e,t){return this.has(e)?this._values[m]=t:this._values[this._keys.push(e)-1]=t,this}function n(e){return this.has(e)||this._values.push(e),this}function p(){(this._keys||0).length=this._values.length=0}function c(){return d(this._itp,this._values)}function d(e,t,o){var a=[0],r=!1;return e.push(a),{next:function(){var i,s=a[0];return!r&&s<t.length?(i=o?[t[s],o[s]]:t[s],a[0]++):(r=!0,e.splice(e.indexOf(a),1)),{done:r,value:i}}}}function u(){return this._values.length}function h(e,t){for(var o=this.entries();;){var a=o.next();if(a.done)break;e.call(t,a.value[1],a.value[0],this)}}var m,y=Object.defineProperty,f=function(e,t){return isNaN(e)?isNaN(t):e===t};"undefined"==typeof WeakMap&&(e.WeakMap=t({delete:o,clear:p,get:a,has:s,set:l},!0)),"undefined"!=typeof Map&&"function"==typeof(new Map).values&&(new Map).values().next||(e.Map=t({delete:o,has:s,get:a,set:l,keys:function(){return d(this._itp,this._keys)},values:c,entries:function(){return d(this._itp,this._keys,this._values)},forEach:h,clear:p})),"undefined"!=typeof Set&&"function"==typeof(new Set).values&&(new Set).values().next||(e.Set=t({has:i,add:n,delete:o,clear:p,keys:c,values:c,entries:function(){return d(this._itp,this._values,this._values)},forEach:h})),"undefined"==typeof WeakSet&&(e.WeakSet=t({delete:o,add:n,clear:p,has:i},!0))}("undefined"!=typeof exports&&"undefined"!=typeof global?global:window),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.ES6Promise=t()}(this,(function(){"use strict";function e(e){return"function"==typeof e}function t(){var e=setTimeout;return function(){return e(o,1)}}function o(){for(var e=0;e<P;e+=2)(0,E[e])(E[e+1]),E[e]=void 0,E[e+1]=void 0;P=0}function a(e,t){var o=arguments,a=this,r=new this.constructor(i);void 0===r[M]&&f(r);var s=a._state;return s?function(){var e=o[s-1];L((function(){return y(s,r,e,a._result)}))}():u(a,r,e,t),r}function r(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(i);return n(t,e),t}function i(){}function s(e){try{return e.then}catch(e){return I.error=e,I}}function l(t,o,i){o.constructor===t.constructor&&i===a&&o.constructor.resolve===r?function(e,t){t._state===k?c(e,t._result):t._state===F?d(e,t._result):u(t,void 0,(function(t){return n(e,t)}),(function(t){return d(e,t)}))}(t,o):i===I?(d(t,I.error),I.error=null):void 0===i?c(t,o):e(i)?function(e,t,o){L((function(e){var a=!1,r=function(e,t,o,a){try{e.call(t,o,a)}catch(e){return e}}(o,t,(function(o){a||(a=!0,t!==o?n(e,o):c(e,o))}),(function(t){a||(a=!0,d(e,t))}),e._label);!a&&r&&(a=!0,d(e,r))}),e)}(t,o,i):c(t,o)}function n(e,t){e===t?d(e,new TypeError("You cannot resolve a promise with itself")):function(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}(t)?l(e,t,s(t)):c(e,t)}function p(e){e._onerror&&e._onerror(e._result),h(e)}function c(e,t){e._state===N&&(e._result=t,e._state=k,0!==e._subscribers.length&&L(h,e))}function d(e,t){e._state===N&&(e._state=F,e._result=t,L(p,e))}function u(e,t,o,a){var r=e._subscribers,i=r.length;e._onerror=null,r[i]=t,r[i+k]=o,r[i+F]=a,0===i&&e._state&&L(h,e)}function h(e){var t=e._subscribers,o=e._state;if(0!==t.length){for(var a=void 0,r=void 0,i=e._result,s=0;s<t.length;s+=3)a=t[s],r=t[s+o],a?y(o,a,r,i):r(i);e._subscribers.length=0}}function m(){this.error=null}function y(t,o,a,r){var i=e(a),s=void 0,l=void 0,p=void 0,u=void 0;if(i){if((s=function(e,t){try{return e(t)}catch(e){return R.error=e,R}}(a,r))===R?(u=!0,l=s.error,s.error=null):p=!0,o===s)return void d(o,new TypeError("A promises callback cannot return that same promise."))}else s=r,p=!0;o._state!==N||(i&&p?n(o,s):u?d(o,l):t===k?c(o,s):t===F&&d(o,s))}function f(e){e[M]=O++,e._state=void 0,e._result=void 0,e._subscribers=[]}function g(e,t){this._instanceConstructor=e,this.promise=new e(i),this.promise[M]||f(this.promise),x(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?c(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&c(this.promise,this._result))):d(this.promise,new Error("Array Methods must be provided an Array"))}function v(e){this[M]=O++,this._result=this._state=void 0,this._subscribers=[],i!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof v?function(e,t){try{t((function(t){n(e,t)}),(function(t){d(e,t)}))}catch(t){d(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}var x=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},P=0,b=void 0,D=void 0,L=function(e,t){E[P]=e,E[P+1]=t,2===(P+=2)&&(D?D(o):A())},C="undefined"!=typeof window?window:void 0,_=C||{},S=_.MutationObserver||_.WebKitMutationObserver,w="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),T="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,E=new Array(1e3),A=void 0;A=w?function(){return process.nextTick(o)}:S?function(){var e=0,t=new S(o),a=document.createTextNode("");return t.observe(a,{characterData:!0}),function(){a.data=e=++e%2}}():T?function(){var e=new MessageChannel;return e.port1.onmessage=o,function(){return e.port2.postMessage(0)}}():void 0===C&&"function"==typeof require?function(){try{var e=require("vertx");return void 0!==(b=e.runOnLoop||e.runOnContext)?function(){b(o)}:t()}catch(e){return t()}}():t();var M=Math.random().toString(36).substring(16),N=void 0,k=1,F=2,I=new m,R=new m,O=0;return g.prototype._enumerate=function(e){for(var t=0;this._state===N&&t<e.length;t++)this._eachEntry(e[t],t)},g.prototype._eachEntry=function(e,t){var o=this._instanceConstructor,n=o.resolve;if(n===r){var p=s(e);if(p===a&&e._state!==N)this._settledAt(e._state,t,e._result);else if("function"!=typeof p)this._remaining--,this._result[t]=e;else if(o===v){var c=new o(i);l(c,e,p),this._willSettleAt(c,t)}else this._willSettleAt(new o((function(t){return t(e)})),t)}else this._willSettleAt(n(e),t)},g.prototype._settledAt=function(e,t,o){var a=this.promise;a._state===N&&(this._remaining--,e===F?d(a,o):this._result[t]=o),0===this._remaining&&c(a,this._result)},g.prototype._willSettleAt=function(e,t){var o=this;u(e,void 0,(function(e){return o._settledAt(k,t,e)}),(function(e){return o._settledAt(F,t,e)}))},v.all=function(e){return new g(this,e).promise},v.race=function(e){var t=this;return new t(x(e)?function(o,a){for(var r=e.length,i=0;i<r;i++)t.resolve(e[i]).then(o,a)}:function(e,t){return t(new TypeError("You must pass an array to race."))})},v.resolve=r,v.reject=function(e){var t=new this(i);return d(t,e),t},v._setScheduler=function(e){D=e},v._setAsap=function(e){L=e},v._asap=L,v.prototype={constructor:v,then:a,catch:function(e){return this.then(null,e)}},v.polyfill=function(){var e=void 0;if("undefined"!=typeof global)e=global;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var o=null;try{o=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===o&&!t.cast)return}e.Promise=v},v.Promise=v,v})),void 0===window.Promise&&(window.Promise=window.ES6Promise),function(e){"use strict";var t;if((t=document.createEvent("Event")).initEvent("foo",!0,!0),t.preventDefault(),!t.defaultPrevented){var o=Event.prototype.preventDefault;Event.prototype.preventDefault=function(){this.cancelable&&(o.call(this),Object.defineProperty(this,"defaultPrevented",{get:function(){return!0},configurable:!0}))}}var a=/Trident/.test(navigator.userAgent);if((!window.CustomEvent||a&&"function"!=typeof window.CustomEvent)&&(window.CustomEvent=function(e,t){t=t||{};var o=document.createEvent("CustomEvent");return o.initCustomEvent(e,Boolean(t.bubbles),Boolean(t.cancelable),t.detail),o},window.CustomEvent.prototype=window.Event.prototype),!window.Event||a&&"function"!=typeof window.Event){var r=window.Event;if(window.Event=function(e,t){t=t||{};var o=document.createEvent("Event");return o.initEvent(e,Boolean(t.bubbles),Boolean(t.cancelable)),o},r)for(var i in r)window.Event[i]=r[i];window.Event.prototype=r.prototype}if(!window.MouseEvent||a&&"function"!=typeof window.MouseEvent){var s=window.MouseEvent;if(window.MouseEvent=function(e,t){t=t||{};var o=document.createEvent("MouseEvent");return o.initMouseEvent(e,Boolean(t.bubbles),Boolean(t.cancelable),t.view||window,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget),o},s)for(var i in s)window.MouseEvent[i]=s[i];window.MouseEvent.prototype=s.prototype}if(Array.from||(Array.from=function(e){return[].slice.call(e)}),!Object.assign){var l=function(e,t){for(var o,a=Object.keys(t),r=0;r<a.length;r++)e[o=a[r]]=t[o]};Object.assign=function(e,t){for(var o,a=[].slice.call(arguments,1),r=0;r<a.length;r++)(o=a[r])&&l(e,o);return e}}}(window.WebComponents),function(){var e="undefined"==typeof HTMLTemplateElement;/Trident/.test(navigator.userAgent)&&function(){var e=Document.prototype.importNode;Document.prototype.importNode=function(){var t=e.apply(this,arguments);if(t.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var o=this.createDocumentFragment();return o.appendChild(t),o}return t}}();var t=Node.prototype.cloneNode,o=Document.prototype.createElement,a=Document.prototype.importNode,r=function(){if(!e){var t=document.createElement("template"),o=document.createElement("template");o.content.appendChild(document.createElement("div")),t.content.appendChild(o);var a=t.cloneNode(!0);return 0===a.content.childNodes.length||0===a.content.firstChild.content.childNodes.length||!(document.createDocumentFragment().cloneNode()instanceof DocumentFragment)}}(),i=function(){};if(e){var s=document.implementation.createHTMLDocument("template"),l=!0,n=document.createElement("style");n.textContent="template{display:none;}";var p=document.head;p.insertBefore(n,p.firstElementChild),i.prototype=Object.create(HTMLElement.prototype);var c=!document.createElement("div").hasOwnProperty("innerHTML");function d(e){Object.defineProperty(e,"innerHTML",{get:function(){for(var e="",t=this.content.firstChild;t;t=t.nextSibling)e+=t.outerHTML||t.data.replace(u,h);return e},set:function(e){for(s.body.innerHTML=e,i.bootstrap(s);this.content.firstChild;)this.content.removeChild(this.content.firstChild);for(;s.body.firstChild;)this.content.appendChild(s.body.firstChild)},configurable:!0})}i.decorate=function(e){if(!e.content){var t;for(e.content=s.createDocumentFragment();t=e.firstChild;)e.content.appendChild(t);if(c)e.__proto__=i.prototype;else if(e.cloneNode=function(e){return i._cloneNode(this,e)},l)try{d(e)}catch(e){l=!1}i.bootstrap(e.content)}},d(i.prototype),i.bootstrap=function(e){for(var t,o=e.querySelectorAll("template"),a=0,r=o.length;a<r&&(t=o[a]);a++)i.decorate(t)},document.addEventListener("DOMContentLoaded",(function(){i.bootstrap(document)})),Document.prototype.createElement=function(){"use strict";var e=o.apply(this,arguments);return"template"===e.localName&&i.decorate(e),e};var u=/[&\u00A0<>]/g;function h(e){switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case" ":return"&nbsp;"}}}(e||r)&&(i._cloneNode=function(e,o){var a=t.call(e,!1);return this.decorate&&this.decorate(a),o&&(a.content.appendChild(t.call(e.content,!0)),this.fixClonedDom(a.content,e.content)),a},i.prototype.cloneNode=function(e){return i._cloneNode(this,e)},i.fixClonedDom=function(e,t){if(t.querySelectorAll)for(var o,a,r=t.querySelectorAll("template"),i=e.querySelectorAll("template"),s=0,l=i.length;s<l;s++)a=r[s],o=i[s],this.decorate&&this.decorate(a),o.parentNode.replaceChild(a.cloneNode(!0),o)},Node.prototype.cloneNode=function(e){var o;if(this instanceof DocumentFragment){if(!e)return this.ownerDocument.createDocumentFragment();o=this.ownerDocument.importNode(this,!0)}else o=t.call(this,e);return e&&i.fixClonedDom(o,this),o},Document.prototype.importNode=function(e,t){if("template"===e.localName)return i._cloneNode(e,t);var o=a.call(this,e,t);return t&&i.fixClonedDom(o,e),o},r&&(window.HTMLTemplateElement.prototype.cloneNode=function(e){return i._cloneNode(this,e)})),e&&(window.HTMLTemplateElement=i)}(),function(){"use strict";var e=new function(){},t=new Set("annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph".split(" "));function o(e){var o=t.has(e);return e=/^[a-z][.0-9_a-z]*-[\-.0-9_a-z]*$/.test(e),!o&&e}function a(e){var t=e.isConnected;if(void 0!==t)return t;for(;e&&!(e.__CE_isImportDocument||e instanceof Document);)e=e.parentNode||(window.ShadowRoot&&e instanceof ShadowRoot?e.host:void 0);return!(!e||!(e.__CE_isImportDocument||e instanceof Document))}function r(e,t){for(;t&&t!==e&&!t.nextSibling;)t=t.parentNode;return t&&t!==e?t.nextSibling:null}function i(e,t,o){o=o||new Set;for(var a=e;a;){if(a.nodeType===Node.ELEMENT_NODE){var s=a;t(s);var l=s.localName;if("link"===l&&"import"===s.getAttribute("rel")){if((a=s.import)instanceof Node&&!o.has(a))for(o.add(a),a=a.firstChild;a;a=a.nextSibling)i(a,t,o);a=r(e,s);continue}if("template"===l){a=r(e,s);continue}if(s=s.__CE_shadowRoot)for(s=s.firstChild;s;s=s.nextSibling)i(s,t,o)}a=a.firstChild?a.firstChild:r(e,a)}}function s(e,t,o){e[t]=o}function l(){this.a=new Map,this.o=new Map,this.f=[],this.b=!1}function n(e,t){e.b=!0,e.f.push(t)}function p(e,t){e.b&&i(t,(function(t){return c(e,t)}))}function c(e,t){if(e.b&&!t.__CE_patched){t.__CE_patched=!0;for(var o=0;o<e.f.length;o++)e.f[o](t)}}function d(e,t){var o=[];for(i(t,(function(e){return o.push(e)})),t=0;t<o.length;t++){var a=o[t];1===a.__CE_state?e.connectedCallback(a):m(e,a)}}function u(e,t){var o=[];for(i(t,(function(e){return o.push(e)})),t=0;t<o.length;t++){var a=o[t];1===a.__CE_state&&e.disconnectedCallback(a)}}function h(e,t,o){var a=(o=o||{}).w||new Set,r=o.s||function(t){return m(e,t)},s=[];if(i(t,(function(t){if("link"===t.localName&&"import"===t.getAttribute("rel")){var o=t.import;o instanceof Node&&(o.__CE_isImportDocument=!0,o.__CE_hasRegistry=!0),o&&"complete"===o.readyState?o.__CE_documentLoadHandled=!0:t.addEventListener("load",(function(){var o=t.import;if(!o.__CE_documentLoadHandled){o.__CE_documentLoadHandled=!0;var i=new Set(a);i.delete(o),h(e,o,{w:i,s:r})}}))}else s.push(t)}),a),e.b)for(t=0;t<s.length;t++)c(e,s[t]);for(t=0;t<s.length;t++)r(s[t])}function m(e,t){if(void 0===t.__CE_state){var o=t.ownerDocument;if((o.defaultView||o.__CE_isImportDocument&&o.__CE_hasRegistry)&&(o=e.a.get(t.localName))){o.constructionStack.push(t);var r=o.constructor;try{try{if(new r!==t)throw Error("The custom element constructor did not produce the element being upgraded.")}finally{o.constructionStack.pop()}}catch(e){throw t.__CE_state=2,e}if(t.__CE_state=1,t.__CE_definition=o,o.attributeChangedCallback)for(o=o.observedAttributes,r=0;r<o.length;r++){var i=o[r],s=t.getAttribute(i);null!==s&&e.attributeChangedCallback(t,i,null,s,null)}a(t)&&e.connectedCallback(t)}}}function y(e,t){this.c=e,this.a=t,this.b=void 0,h(this.c,this.a),"loading"===this.a.readyState&&(this.b=new MutationObserver(this.f.bind(this)),this.b.observe(this.a,{childList:!0,subtree:!0}))}function f(e){e.b&&e.b.disconnect()}function g(){var e=this;this.b=this.a=void 0,this.f=new Promise((function(t){e.b=t,e.a&&t(e.a)}))}function v(e){if(e.a)throw Error("Already resolved.");e.a=void 0,e.b&&e.b(void 0)}function x(e){this.i=!1,this.c=e,this.m=new Map,this.j=function(e){return e()},this.g=!1,this.l=[],this.u=new y(e,document)}l.prototype.connectedCallback=function(e){var t=e.__CE_definition;t.connectedCallback&&t.connectedCallback.call(e)},l.prototype.disconnectedCallback=function(e){var t=e.__CE_definition;t.disconnectedCallback&&t.disconnectedCallback.call(e)},l.prototype.attributeChangedCallback=function(e,t,o,a,r){var i=e.__CE_definition;i.attributeChangedCallback&&-1<i.observedAttributes.indexOf(t)&&i.attributeChangedCallback.call(e,t,o,a,r)},y.prototype.f=function(e){var t=this.a.readyState;for("interactive"!==t&&"complete"!==t||f(this),t=0;t<e.length;t++)for(var o=e[t].addedNodes,a=0;a<o.length;a++)h(this.c,o[a])},x.prototype.define=function(e,t){var a,r,i,s,l,n=this;if(!(t instanceof Function))throw new TypeError("Custom element constructors must be functions.");if(!o(e))throw new SyntaxError("The element name '"+e+"' is not valid.");if(this.c.a.get(e))throw Error("A custom element with name '"+e+"' has already been defined.");if(this.i)throw Error("A custom element is already being defined.");this.i=!0;try{var p=function(e){var t=c[e];if(void 0!==t&&!(t instanceof Function))throw Error("The '"+e+"' callback must be a function.");return t},c=t.prototype;if(!(c instanceof Object))throw new TypeError("The custom element constructor's prototype is not an object.");a=p("connectedCallback"),r=p("disconnectedCallback"),i=p("adoptedCallback"),s=p("attributeChangedCallback"),l=t.observedAttributes||[]}catch(e){return}finally{this.i=!1}t={localName:e,constructor:t,connectedCallback:a,disconnectedCallback:r,adoptedCallback:i,attributeChangedCallback:s,observedAttributes:l,constructionStack:[]},function(e,t,o){e.a.set(t,o),e.o.set(o.constructor,o)}(this.c,e,t),this.l.push(t),this.g||(this.g=!0,this.j((function(){return function(e){if(!1!==e.g){e.g=!1;for(var t=e.l,o=[],a=new Map,r=0;r<t.length;r++)a.set(t[r].localName,[]);for(h(e.c,document,{s:function(t){if(void 0===t.__CE_state){var r=t.localName,i=a.get(r);i?i.push(t):e.c.a.get(r)&&o.push(t)}}}),r=0;r<o.length;r++)m(e.c,o[r]);for(;0<t.length;){r=(i=t.shift()).localName;for(var i=a.get(i.localName),s=0;s<i.length;s++)m(e.c,i[s]);(r=e.m.get(r))&&v(r)}}}(n)})))},x.prototype.get=function(e){if(e=this.c.a.get(e))return e.constructor},x.prototype.whenDefined=function(e){if(!o(e))return Promise.reject(new SyntaxError("'"+e+"' is not a valid custom element name."));var t=this.m.get(e);return t||(t=new g,this.m.set(e,t),this.c.a.get(e)&&!this.l.some((function(t){return t.localName===e}))&&v(t)),t.f},x.prototype.v=function(e){f(this.u);var t=this.j;this.j=function(o){return e((function(){return t(o)}))}},window.CustomElementRegistry=x,x.prototype.define=x.prototype.define,x.prototype.get=x.prototype.get,x.prototype.whenDefined=x.prototype.whenDefined,x.prototype.polyfillWrapFlushCallback=x.prototype.v;var P=window.Document.prototype.createElement,b=window.Document.prototype.createElementNS,D=window.Document.prototype.importNode,L=window.Document.prototype.prepend,C=window.Document.prototype.append,_=window.DocumentFragment.prototype.prepend,S=window.DocumentFragment.prototype.append,w=window.Node.prototype.cloneNode,T=window.Node.prototype.appendChild,E=window.Node.prototype.insertBefore,A=window.Node.prototype.removeChild,M=window.Node.prototype.replaceChild,N=Object.getOwnPropertyDescriptor(window.Node.prototype,"textContent"),k=window.Element.prototype.attachShadow,F=Object.getOwnPropertyDescriptor(window.Element.prototype,"innerHTML"),I=window.Element.prototype.getAttribute,R=window.Element.prototype.setAttribute,O=window.Element.prototype.removeAttribute,$=window.Element.prototype.getAttributeNS,B=window.Element.prototype.setAttributeNS,q=window.Element.prototype.removeAttributeNS,V=window.Element.prototype.insertAdjacentElement,U=window.Element.prototype.prepend,H=window.Element.prototype.append,Y=window.Element.prototype.before,j=window.Element.prototype.after,W=window.Element.prototype.replaceWith,z=window.Element.prototype.remove,G=window.HTMLElement,K=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML"),Z=window.HTMLElement.prototype.insertAdjacentElement;function X(e,t,o){function r(t){return function(o){for(var r=[],i=0;i<arguments.length;++i)r[i-0]=arguments[i];i=[];for(var s=[],l=0;l<r.length;l++){var n=r[l];if(n instanceof Element&&a(n)&&s.push(n),n instanceof DocumentFragment)for(n=n.firstChild;n;n=n.nextSibling)i.push(n);else i.push(n)}for(t.apply(this,r),r=0;r<s.length;r++)u(e,s[r]);if(a(this))for(r=0;r<i.length;r++)(s=i[r])instanceof Element&&d(e,s)}}o.h&&(t.prepend=r(o.h)),o.append&&(t.append=r(o.append))}var J,Q=window.customElements;if(!Q||Q.forcePolyfill||"function"!=typeof Q.define||"function"!=typeof Q.get){var ee=new l;J=ee,window.HTMLElement=function(){function t(){var t=this.constructor;if(!(a=J.o.get(t)))throw Error("The custom element being constructed was not registered with `customElements`.");var o=a.constructionStack;if(!o.length)return o=P.call(document,a.localName),Object.setPrototypeOf(o,t.prototype),o.__CE_state=1,o.__CE_definition=a,c(J,o),o;var a,r=o[a=o.length-1];if(r===e)throw Error("The HTMLElement constructor was either called reentrantly for this constructor or called multiple times.");return o[a]=e,Object.setPrototypeOf(r,t.prototype),c(J,r),r}return t.prototype=G.prototype,t}(),function(){var e=ee;s(Document.prototype,"createElement",(function(t){if(this.__CE_hasRegistry){var o=e.a.get(t);if(o)return new o.constructor}return t=P.call(this,t),c(e,t),t})),s(Document.prototype,"importNode",(function(t,o){return t=D.call(this,t,o),this.__CE_hasRegistry?h(e,t):p(e,t),t})),s(Document.prototype,"createElementNS",(function(t,o){if(this.__CE_hasRegistry&&(null===t||"http://www.w3.org/1999/xhtml"===t)){var a=e.a.get(o);if(a)return new a.constructor}return t=b.call(this,t,o),c(e,t),t})),X(e,Document.prototype,{h:L,append:C})}(),X(ee,DocumentFragment.prototype,{h:_,append:S}),function(){var e=ee;function t(t,o){Object.defineProperty(t,"textContent",{enumerable:o.enumerable,configurable:!0,get:o.get,set:function(t){if(this.nodeType===Node.TEXT_NODE)o.set.call(this,t);else{var r=void 0;if(this.firstChild){var i=this.childNodes,s=i.length;if(0<s&&a(this)){r=Array(s);for(var l=0;l<s;l++)r[l]=i[l]}}if(o.set.call(this,t),r)for(t=0;t<r.length;t++)u(e,r[t])}}})}s(Node.prototype,"insertBefore",(function(t,o){if(t instanceof DocumentFragment){var r=Array.prototype.slice.apply(t.childNodes);if(t=E.call(this,t,o),a(this))for(o=0;o<r.length;o++)d(e,r[o]);return t}return r=a(t),o=E.call(this,t,o),r&&u(e,t),a(this)&&d(e,t),o})),s(Node.prototype,"appendChild",(function(t){if(t instanceof DocumentFragment){var o=Array.prototype.slice.apply(t.childNodes);if(t=T.call(this,t),a(this))for(var r=0;r<o.length;r++)d(e,o[r]);return t}return o=a(t),r=T.call(this,t),o&&u(e,t),a(this)&&d(e,t),r})),s(Node.prototype,"cloneNode",(function(t,o){return t=w.call(this,t),o||(this.ownerDocument.__CE_hasRegistry?h(e,t):p(e,t)),t})),s(Node.prototype,"removeChild",(function(t){var o=a(t),r=A.call(this,t);return o&&u(e,t),r})),s(Node.prototype,"replaceChild",(function(t,o){if(t instanceof DocumentFragment){var r=Array.prototype.slice.apply(t.childNodes);if(t=M.call(this,t,o),a(this))for(u(e,o),o=0;o<r.length;o++)d(e,r[o]);return t}r=a(t);var i=M.call(this,t,o),s=a(this);return s&&u(e,o),r&&u(e,t),s&&d(e,t),i})),N&&N.get?t(Node.prototype,N):n(e,(function(e){t(e,{enumerable:!0,configurable:!0,get:function(){for(var e=[],t=0;t<this.childNodes.length;t++)e.push(this.childNodes[t].textContent);return e.join("")},set:function(e){for(;this.firstChild;)A.call(this,this.firstChild);T.call(this,document.createTextNode(e))}})}))}(),function(){var e=ee;function t(t,o){Object.defineProperty(t,"innerHTML",{enumerable:o.enumerable,configurable:!0,get:o.get,set:function(t){var r=this,s=void 0;if(a(this)&&(s=[],i(this,(function(e){e!==r&&s.push(e)}))),o.set.call(this,t),s)for(var l=0;l<s.length;l++){var n=s[l];1===n.__CE_state&&e.disconnectedCallback(n)}return this.ownerDocument.__CE_hasRegistry?h(e,this):p(e,this),t}})}function o(t,o){s(t,"insertAdjacentElement",(function(t,r){var i=a(r);return t=o.call(this,t,r),i&&u(e,r),a(t)&&d(e,r),t}))}k&&s(Element.prototype,"attachShadow",(function(e){return this.__CE_shadowRoot=k.call(this,e)})),F&&F.get?t(Element.prototype,F):K&&K.get?t(HTMLElement.prototype,K):n(e,(function(e){t(e,{enumerable:!0,configurable:!0,get:function(){return w.call(this,!0).innerHTML},set:function(e){var t="template"===this.localName,o=t?this.content:this,a=P.call(document,this.localName);for(a.innerHTML=e;0<o.childNodes.length;)A.call(o,o.childNodes[0]);for(e=t?a.content:a;0<e.childNodes.length;)T.call(o,e.childNodes[0])}})})),s(Element.prototype,"setAttribute",(function(t,o){if(1!==this.__CE_state)return R.call(this,t,o);var a=I.call(this,t);R.call(this,t,o),o=I.call(this,t),e.attributeChangedCallback(this,t,a,o,null)})),s(Element.prototype,"setAttributeNS",(function(t,o,a){if(1!==this.__CE_state)return B.call(this,t,o,a);var r=$.call(this,t,o);B.call(this,t,o,a),a=$.call(this,t,o),e.attributeChangedCallback(this,o,r,a,t)})),s(Element.prototype,"removeAttribute",(function(t){if(1!==this.__CE_state)return O.call(this,t);var o=I.call(this,t);O.call(this,t),null!==o&&e.attributeChangedCallback(this,t,o,null,null)})),s(Element.prototype,"removeAttributeNS",(function(t,o){if(1!==this.__CE_state)return q.call(this,t,o);var a=$.call(this,t,o);q.call(this,t,o);var r=$.call(this,t,o);a!==r&&e.attributeChangedCallback(this,o,a,r,t)})),Z?o(HTMLElement.prototype,Z):V?o(Element.prototype,V):console.warn("Custom Elements: `Element#insertAdjacentElement` was not patched."),X(e,Element.prototype,{h:U,append:H}),function(e){var t=Element.prototype;function o(t){return function(o){for(var r=[],i=0;i<arguments.length;++i)r[i-0]=arguments[i];i=[];for(var s=[],l=0;l<r.length;l++){var n=r[l];if(n instanceof Element&&a(n)&&s.push(n),n instanceof DocumentFragment)for(n=n.firstChild;n;n=n.nextSibling)i.push(n);else i.push(n)}for(t.apply(this,r),r=0;r<s.length;r++)u(e,s[r]);if(a(this))for(r=0;r<i.length;r++)(s=i[r])instanceof Element&&d(e,s)}}Y&&(t.before=o(Y)),Y&&(t.after=o(j)),W&&s(t,"replaceWith",(function(t){for(var o=[],r=0;r<arguments.length;++r)o[r-0]=arguments[r];r=[];for(var i=[],s=0;s<o.length;s++){var l=o[s];if(l instanceof Element&&a(l)&&i.push(l),l instanceof DocumentFragment)for(l=l.firstChild;l;l=l.nextSibling)r.push(l);else r.push(l)}for(s=a(this),W.apply(this,o),o=0;o<i.length;o++)u(e,i[o]);if(s)for(u(e,this),o=0;o<r.length;o++)(i=r[o])instanceof Element&&d(e,i)})),z&&s(t,"remove",(function(){var t=a(this);z.call(this),t&&u(e,this)}))}(e)}(),document.__CE_hasRegistry=!0;var te=new x(ee);Object.defineProperty(window,"customElements",{configurable:!0,enumerable:!0,value:te})}}.call(self),!window.ZSEC){if(window.ZSEC||Object.defineProperty(window,"ZSEC",{value:{},writable:!1,configurable:!1,enumerable:!1}),Object.defineProperty(ZSEC,"util",{value:{},writable:!1,configurable:!1,enumerable:!1}),function(){if(!Object.defineProperty||!function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}()){var e=Object.defineProperty;Object.defineProperty=function(t,o,a){if(e)try{return e(t,o,a)}catch(e){}if(t!==Object(t))throw TypeError("Object.defineProperty called on non-object");return Object.prototype.__defineGetter__&&"get"in a&&Object.prototype.__defineGetter__.call(t,o,a.get),Object.prototype.__defineSetter__&&"set"in a&&Object.prototype.__defineSetter__.call(t,o,a.set),"value"in a&&(t[o]=a.value),t}}}(),ZSEC.util.defineProperty=function(e,t,o,a,r,i,s){if(a||!(t in e))return r=1==r,i=1==i,s=1==s,Object.defineProperty(e,t,{value:o,writable:r,configurable:i,enumerable:s})},ZSEC.util.defineProperty(ZSEC,"version","4.0",!0),ZSEC.util.defineProperty(ZSEC,"constants",ZSEC.constants||{},!0),ZSEC.util.ArrayIndexOf=Array.prototype.indexOf,ZSEC.util.ArrayIndexOf||(ZSEC.util.ArrayIndexOf=function(e){if(null==this)throw TypeError();var t=Object(this),o=t.length>>>0;if(0===o)return-1;var a=0;if(arguments.length>0&&(a=Number(arguments[1]),isNaN(a)?a=0:0!==a&&a!==1/0&&a!==-1/0&&(a=(a>0||-1)*Math.floor(Math.abs(a)))),a>=o)return-1;for(var r=a>=0?a:Math.max(o-Math.abs(a),0);r<o;r++)if(r in t&&t.charAt(r)===e)return r;return-1}),String.prototype.codePointAt)ZSEC.util.defineProperty(String.prototype,"codePointAt",String.prototype.codePointAt,!0);else{var codePointAt=function(e){if(null==this)throw TypeError();var t=String(this),o=t.length,a=e?Number(e):0;if(a!=a&&(a=0),!(a<0||a>=o)){var r,i=t.charCodeAt(a);return i>=55296&&i<=56319&&o>a+1&&(r=t.charCodeAt(a+1))>=56320&&r<=57343?1024*(i-55296)+r-56320+65536:i}};ZSEC.util.defineProperty(String.prototype,"codePointAt",codePointAt,!1)}if(String.fromCodePoint)ZSEC.util.defineProperty(String,"fromCodePoint",String.fromCodePoint,!0);else{var stringFromCharCode=String.fromCharCode,floor=Math.floor,fromCodePoint=function(){var e,t,o=[],a=-1,r=arguments.length;if(!r)return"";for(var i="";++a<r;){var s=Number(arguments[a]);if(!isFinite(s)||s<0||s>1114111||floor(s)!=s)throw RangeError("Invalid code point: "+s);s<=65535?o.push(s):(e=55296+((s-=65536)>>10),t=s%1024+56320,o.push(e,t)),(a+1==r||o.length>16384)&&(i+=stringFromCharCode.apply(null,o),o.length=0)}return i};ZSEC.util.defineProperty(String,"fromCodePoint",fromCodePoint,!1)}!function(){var e={log:function(e){if(navigator&&navigator.userAgent){var t=navigator.userAgent.match(/opera|chrome|safari|firefox|msie|trident(?=\/)/i);if(t&&t[0].search(/trident|msie/i)<0)return window.console.log("%cSTOP!","color:red;font-size:xx-large;font-weight:bold;"),void window.console.log("%cThis is a browser feature intended for developers. Do not enter or paste code which you don't understand. It may allow attackers to steal your information or impersonate you.\nSee https://en.wikipedia.org/wiki/Self-XSS for more details","font-size:large;")}window.console.log("STOP!\nThis is a browser feature intended for developers. Do not enter or paste code which you don't understand. It may allow attackers to steal your information or impersonate you.\nSee https://en.wikipedia.org/wiki/Self-XSS for more details")}};ZSEC.util.defineProperty(ZSEC,"Console",e,!0,!1,!1,!0)}(),ZSEC.Console.log()}if(window.DOMPurifyCopy=window.DOMPurify?window.DOMPurify:void 0,!window.ZSEC.HTMLPurifier){function addToSet(e,t){for(var o=t.length;o--;)e[t[o]]=!0;return e}function addObjsToSet(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=!0);return e}function removeFromSet(e,t){var o={};for(var a in e)e.hasOwnProperty(a)&&a!=t&&(o[a]=e[a]);return o}window.DOMPurify=function e(t){var o=function(t){return e(t)};if(o.version="0.8.5",o.removed=[],!t||!t.document||9!==t.document.nodeType)return o.isSupported=!1,o;var a=t.document,r=a,i=t.DocumentFragment,s=t.HTMLTemplateElement,l=t.Node,n=t.NodeFilter,p=t.NamedNodeMap||t.MozNamedAttrMap,c=t.Text,d=t.Comment,u=t.DOMParser;if("function"==typeof s){var h=a.createElement("template");h.content&&h.content.ownerDocument&&(a=h.content.ownerDocument)}var m=a.implementation,y=a.createNodeIterator,f=a.getElementsByTagName,g=a.createDocumentFragment,v=r.importNode,x={};o.isSupported=void 0!==m.createHTMLDocument&&9!==a.documentMode;var P=function(e,t){for(var o=t.length;o--;)"string"==typeof t[o]&&(t[o]=t[o].toLowerCase()),e[t[o]]=!0;return e},b=null,D=P({},[]),L=null,C=P({},[]),_=null,S=null,w=!0,T=!0,E=!1,A=!1,M=!1,N=/\{\{[\s\S]*|[\s\S]*\}\}/gm,k=/<%[\s\S]*|[\s\S]*%>/gm,F=!1,I=!0,R=!1,O=!1,$=!1,B=!0,q=!0,V=P({},["audio","head","math","script","svg","video","style"]),U=P({},["audio","video","img","source","image"]),H=P({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),Y=null,j=a.createElement("form"),W=function(e){"object"!=typeof e&&(e={}),b="ALLOWED_TAGS"in e?P({},e.ALLOWED_TAGS):D,L="ALLOWED_ATTR"in e?P({},e.ALLOWED_ATTR):C,_="FORBID_TAGS"in e?P({},e.FORBID_TAGS):{},S="FORBID_ATTR"in e?P({},e.FORBID_ATTR):{},w=!1!==e.ALLOW_ARIA_ATTR,T=!1!==e.ALLOW_DATA_ATTR,E=e.ALLOW_UNKNOWN_PROTOCOLS||!1,A=e.SAFE_FOR_JQUERY||!1,M=e.SAFE_FOR_TEMPLATES||!1,F=e.WHOLE_DOCUMENT||!1,R=e.RETURN_DOM||!1,O=e.RETURN_DOM_FRAGMENT||!1,$=e.RETURN_DOM_IMPORT||!1,I=!1!==e.FORCE_BODY,B=!1!==e.SANITIZE_DOM,q=!1!==e.KEEP_CONTENT,M&&(T=!1),O&&(R=!0),e.ADD_URI_SAFE_ATTR&&P(H,e.ADD_URI_SAFE_ATTR),q&&(b["#text"]=!0),Object&&"freeze"in Object&&Object.freeze(e),Y=e},z=function(e){o.removed.push({element:e});try{e.parentNode.removeChild(e)}catch(t){e.outerHTML=""}},G=function(e,t){o.removed.push({attribute:t.getAttributeNode(e),from:t}),t.removeAttribute(e)},K=function(e){var t,o;I&&(e="<remove></remove>"+e);try{t=(new u).parseFromString(e,"text/html")}catch(e){}return t&&t.documentElement||((o=(t=m.createHTMLDocument("")).body).parentNode.removeChild(o.parentNode.firstElementChild),o.outerHTML=e),"function"==typeof t.getElementsByTagName?t.getElementsByTagName(F?"html":"body")[0]:f.call(t,F?"html":"body")[0]},Z=function(e){return y.call(e.ownerDocument||e,e,n.SHOW_ELEMENT|n.SHOW_COMMENT|n.SHOW_TEXT,(function(){return n.FILTER_ACCEPT}),!1)},X=function(e){return!(e instanceof c||e instanceof d||"string"==typeof e.nodeName&&"string"==typeof e.textContent&&"function"==typeof e.removeChild&&e.attributes instanceof p&&"function"==typeof e.removeAttribute&&"function"==typeof e.setAttribute)},J=function(e){return"object"==typeof l?e instanceof l:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},Q=function(e){var t,a;if(le("beforeSanitizeElements",e,null),X(e))return z(e),!0;if(t=e.nodeName.toLowerCase(),le("uponSanitizeElement",e,{tagName:t,allowedTags:b}),!b[t]||_[t]){if(q&&!V[t]&&"function"==typeof e.insertAdjacentHTML)try{e.insertAdjacentHTML("AfterEnd",e.innerHTML)}catch(e){}return z(e),!0}return"style"!=t?(!A||e.firstElementChild||e.content&&e.content.firstElementChild||!/</g.test(e.textContent)||(o.removed.push({element:e.cloneNode()}),e.innerHTML=e.textContent.replace(/</g,"&lt;")),M&&3===e.nodeType&&(a=(a=(a=e.textContent).replace(N," ")).replace(k," "),e.textContent!==a&&(o.removed.push({element:e.cloneNode()}),e.textContent=a))):!A||e.firstElementChild||e.content&&e.content.firstElementChild||!/</g.test(e.textContent)||(o.removed.push({element:e.cloneNode()}),e.innerHTML=e.textContent.replace(/</g,"\\3c ")),le("afterSanitizeElements",e,null),!1},ee=/^data-[-\w.\u00B7-\uFFFF]/,te=/^aria-[-\w]+$/,oe=/^(?:(?:https?|mailto|tel):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))/i,ae=/^(?:\w+script|data):/i,re=/[\x00-\x20\xA0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,ie=function(e){var t,r,i,s,l,n,p,c;if(le("beforeSanitizeAttributes",e,null),n=e.attributes){for(p={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:L},c=n.length;c--;)if(r=(t=n[c]).name,i=t.value.trim(),s=r.toLowerCase(),p.attrName=s,p.attrValue=i,p.keepAttr=!0,le("uponSanitizeAttribute",e,p),i=p.attrValue,"name"===s&&"IMG"===e.nodeName&&n.id?(l=n.id,n=Array.prototype.slice.apply(n),G("id",e),G(r,e),n.indexOf(l)>c&&e.setAttribute("id",l.value)):("id"===r&&e.setAttribute(r,""),G(r,e)),p.keepAttr&&(!B||"id"!==s&&"name"!==s||!(i in a)&&!(i in j))){if(M&&(i=(i=i.replace(N," ")).replace(k," ")),T&&ee.test(s));else if(w&&te.test(s));else{if(!L[s]||S[s])continue;if(H[s]);else if(oe.test(i.replace(re,"")));else if("src"!==s&&"xlink:href"!==s||0!==i.indexOf("data:")||!U[e.nodeName.toLowerCase()])if(E&&!ae.test(i.replace(re,"")));else if(i)continue}try{e.setAttribute(r,i),o.removed.pop()}catch(e){}}le("afterSanitizeAttributes",e,null)}},se=function(e){var t,o=Z(e);for(le("beforeSanitizeShadowDOM",e,null);t=o.nextNode();)le("uponSanitizeShadowNode",t,null),Q(t)||(t.content instanceof i&&se(t.content),ie(t));le("afterSanitizeShadowDOM",e,null)},le=function(e,t,a){x[e]&&x[e].forEach((function(e){e.call(o,t,a,Y)}))};return o.sanitize=function(e,a){var s,n,p,c,d,u;if(e||(e="\x3c!--\x3e"),"string"!=typeof e&&!J(e)){if("function"!=typeof e.toString)throw new TypeError("toString is not a function");e=e.toString()}if(!o.isSupported){if("object"==typeof t.toStaticHTML||"function"==typeof t.toStaticHTML){if("string"==typeof e)return t.toStaticHTML(e);if(J(e))return t.toStaticHTML(e.outerHTML)}return e}if(W(a),o.removed=[],e instanceof l)1===(n=(s=K("\x3c!--\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===n.nodeName?s=n:s.appendChild(n);else{if(!R&&!F&&-1===e.indexOf("<"))return e;if(!(s=K(e)))return R?null:""}for(I&&z(s.firstChild),d=Z(s);p=d.nextNode();)3===p.nodeType&&p===c||Q(p)||(p.content instanceof i&&se(p.content),ie(p),c=p);if(R){if(O)for(u=g.call(s.ownerDocument);s.firstChild;)u.appendChild(s.firstChild);else u=s;return $&&(u=v.call(r,u,!0)),u}return F?s.outerHTML:s.innerHTML},o.addHook=function(e,t){"function"==typeof t&&(x[e]=x[e]||[],x[e].push(t))},o.removeHook=function(e){x[e]&&x[e].pop()},o.removeHooks=function(e){x[e]&&(x[e]=[])},o.removeAllHooks=function(){x={}},o}(window),function(e){var t={ALLOW_ARIA_ATTR:!0,ALLOW_DATA_ATTR:!0,ALLOW_UNKNOWN_PROTOCOLS:!1,SAFE_FOR_JQUERY:!1,SAFE_FOR_TEMPLATES:!1,WHOLE_DOCUMENT:!1,RETURN_DOM:!1,RETURN_DOM_FRAGMENT:!1,RETURN_DOM_IMPORT:!1,FORCE_BODY:!0,SANITIZE_DOM:!0,KEEP_CONTENT:!0,STYLE_VALIDATION:!0,REMOVE_ONEVENTS:!0,ALLOWED_STYLE:"NONE"};t.ALLOWED_TAGS="a|abbr|acronym|address|area|article|aside|audio|b|bdi|bdo|big|blink|blockquote|body|br|button|canvas|caption|center|cite|code|col|colgroup|content|data|datalist|dd|decorator|del|details|dfn|dir|div|dl|dt|element|em|fieldset|figcaption|figure|font|footer|form|h1|h2|h3|h4|h5|h6|head|header|hgroup|hr|html|i|img|input|ins|kbd|label|legend|li|main|map|mark|marquee|menu|menuitem|meter|nav|nobr|ol|optgroup|option|output|p|pre|progress|q|rp|rt|ruby|s|samp|section|select|shadow|small|source|spacer|span|strike|strong|sub|summary|sup|table|tbody|td|template|textarea|tfoot|th|thead|time|title|tr|track|tt|u|ul|var|video|wbr|#text".split("|"),t.ALLOWED_ATTR="accept|action|align|alt|autocomplete|background|bgcolor|border|cellpadding|cellspacing|checked|cite|class|clear|color|cols|colspan|coords|datetime|default|dir|disabled|download|enctype|face|for|headers|height|hidden|high|href|hreflang|id|ismap|label|lang|list|loop|low|max|maxlength|media|method|min|multiple|name|noshade|novalidate|nowrap|open|optimum|pattern|placeholder|poster|preload|pubdate|radiogroup|readonly|rel|required|rev|reversed|role|rows|rowspan|spellcheck|scope|selected|shape|size|span|srclang|start|src|step|summary|tabindex|title|target|type|usemap|valign|value|width|xmlns|sandbox".split("|"),t.ALLOWED_STYLE_PROPS="azimuth|background|background-attachment|background-color|background-image|background-position|content|background-repeat|border-collapse|border-color|border-top-color|border-right-color|border-bottom-color|border-left-color|bottom|caption-side|clear|color|cue-after|cue-before|direction|display|elevation|empty-cells|float|font-size|font-size-adjust|font-stretch|font-style|font-variant|font-weight|height|left|letter-spacing|line-height|list-style-image|list-style-position|list-style-type|marker-offset|max-height|max-width|min-height|min-width|orphans|outline-color|overflow|page-break-after|page-break-before|page-break-inside|pause-after|pause-before|pitch|pitch-range|position|richness|right|size|speak|speak-header|speak-numeral|speak-punctuation|speech-rate|stress|table-layout|text-indent|text-transform|top|unicode-bidi|vertical-align|visibility|volume|white-space|widows|width|word-spacing|border-style|border-top-style|border-right-style|border-bottom-style|border-left-style|border-top-width|border-right-width|border-bottom-width|border-left-width|border-width|margin|margin-top|margin-right|margin-bottom|margin-left|outline-style|outline-width|padding|padding-top|padding-right|padding-bottom|padding-left|border|border-top|border-right|border-bottom|border-left|cue|list-style|marks|outline|pause|text-decoration|border-spacing|clip|counter-increment|clip|cursor|text-shadow|font|font-family|page|play-during|text-align|voice-family".split("|"),t.FORBID_TAGS=[],t.FORBID_ATTR=[],t.ALLOWED_TAGS_OBJ={},t.ALLOWED_ATTR_OBJ={},t.FORBID_TAGS_OBJ={},t.FORBID_ATTR_OBJ={},t.ADD_URI_SAFE_ATTR=[],t.EXTENDS=["GLOBAL_ATTRIBUTES","GLOBAL_TAGS","FORBID_TAGS","FORBID_ATTR","GLOBAL_APPEND_ATTRIBUTES","GLOBAL_ATTRIBUTE_RULES","ADD_URI_SAFE_ATTR","TAG_RULES"],t.TAG_RULES={a:{APPEND_ATTRIBUTES:[{NAME:"rel",VALUE:"noopener noreferrer",CRITERIA:[{NAME:"target",CONTAINS:"_blank"}]}]}},t.GLOBAL_APPEND_ATTRIBUTES=[],t.GLOBAL_ATTRIBUTE_RULES={},ZSEC.util.defineProperty(ZSEC,"HTMLPurifier",function e(t,o){function a(e){if(!e||e.constructor!==Object)return t;var o={};for(var a in t)t.hasOwnProperty(a)&&(a in e?a in L&&(1==e[a]||0==e[a]?o[a]=e[a]:o[a]=t[a]):o[a]=t[a]);return o.SAFE_FOR_TEMPLATES&&(o.ALLOW_DATA_ATTR=!1),o.RETURN_DOM_FRAGMENT&&(o.RETURN_DOM=!0),o.KEEP_CONTENT&&(o.ALLOWED_TAGS_OBJ["#text"]=!0),o}function r(e){for(var t in e)e.hasOwnProperty(t)&&e[t].constructor==String&&(e[t]&&E[t]?!0:e[t]&&("cssText"==t||/^\d.*/.test(t)||(e[t]="",S=!0)))}function i(e){for(var t=e.length-1;t>=0;t--){var o=e[t];1==o.type&&o.selectorText||8==o.type&&o.keyText?o.style&&r(o.style):4!=o.type&&7!=o.type||!o.cssRules||i(o.cssRules)}}function s(e,t){for(var o=t.length-1;o>=0;o--)1!=t[o].type&&4!=t[o].type&&7!=t[o].type||e.push(t[o].cssText)}function l(e,t,o){o=null==o?e.IS_MANDATORY:o;if(e.NAME&&!t.hasAttribute(e.NAME.toLowerCase()))return e.IS_FORBIDDEN||!o;if(e.IS_FORBIDDEN)return!1;var a=t.getAttribute(e.NAME.toLowerCase());if(null!=a||(a=""),a.constructor==String){if(e.DONT_TRIM||(a=a.trim()),e.CASE_SENSITIVE||(a=a.toLowerCase()),e.MAX_LENGTH&&a.length>e.MAX_LENGTH)return!1;if(e.MIN_LENGTH&&a.length<e.MIN_LENGTH)return!1;if(null!=e.REGEX){if(e.REGEX.constructor==RegExp&&-1==a.search(e.REGEX))return!1;if(e.REGEX.constructor==Array)for(i=0;i<e.REGEX.length;i++)if(-1==a.search(e.REGEX[i]))return!1}}if(e.LIST&&-1==e.LIST.indexOf(a))return!1;if("INTEGER"==e.TYPE||"FLOAT"==e.TYPE){var r;try{r="INTEGER"==e.TYPE?window.parseInt(a,10):window.parseFloat(a)}catch(e){return!1}if(window.isNaN(r))return!1;if(null!=e.GREATER_THAN&&r<=e.GREATER_THAN)return!1;if(null!=e.GREATER_THAN_OR_EQUAL&&r<e.GREATER_THAN_OR_EQUAL)return!1;if(null!=e.LESSER_THAN&&r>=e.LESSER_THAN)return!1;if(null!=e.LESSER_THAN_OR_EQUAL&&r>e.LESSER_THAN_OR_EQUAL)return!1;if(null!=e.EQUAL&&r!=e.EQUAL)return!1;if(null!=e.NOT_EQUAL&&r==e.NOT_EQUAL)return!1}else if(a.constructor==String){if(null!=e.STARTS_WITH&&0!=a.indexOf(e.STARTS_WITH))return!1;if(null!=e.ENDS_WITH&&a.lastIndexOf(e.ENDS_WITH)!=a.length-e.ENDS_WITH.length)return!1;if(null!=e.CONTAINS){if(e.CONTAINS.constructor==String&&-1==a.indexOf(e.CONTAINS))return!1;if(e.CONTAINS.constructor==Array)for(i=0;i<e.CONTAINS.length;i++)if(-1==a.indexOf(e.CONTAINS[i]))return!1}if(null!=e.NOT_CONTAINS){if(e.NOT_CONTAINS.constructor==String&&a.indexOf(e.NOT_CONTAINS)>-1)return!1;if(e.NOT_CONTAINS.constructor==Array)for(var i=0;i<e.NOT_CONTAINS.length;i++)if(a.indexOf(e.NOT_CONTAINS[i])>-1)return!1}if(null!=e.EQUAL&&a!==e.EQUAL)return!1;if(null!=e.NOT_EQUAL&&a===e.NOT_EQUAL)return!1}return!0}function n(e){if(!e)return e;if(e.constructor==Object)for(var t in e)e.hasOwnProperty(t)&&(e[t]=c(e[t]));return e}function p(e){if(!e)return e;if(e.constructor==Array)for(var t=0;t<e.length;t++)if(e[t].CRITERIA)for(var o=0;o<e[t].CRITERIA.length;o++)e[t].CRITERIA[o]=c(e[t].CRITERIA[o]);return e}function c(e){if(e){var t=["STARTS_WITH","ENDS_WITH","CONTAINS","EQUAL","NOT_EQUAL","LIST"];if(!e.CASE_SENSITIVE)for(var o=0;o<t.length;o++){var a=t[o];e[a]&&(e[a]=d(e[a]))}}return e}function d(e){if(e&&e.constructor==String)return e.toLowerCase();if(e.constructor==Array)for(var t=0;t<e.length;t++)e[t]=d(e[t]);return e}function u(e,t){if(!e||e.constructor==Object)return e;for(var o={},a=0;a<e.length;a++){var r=e[a];o[r[t]]=r}return o}function h(e,t){if(e)for(var o=0;o<e.length;o++){var a=e[o];if(!t.hasAttribute(a.NAME.toLowerCase())){var r=!0;if(a.CRITERIA)for(var i=0;i<a.CRITERIA.length;i++)if(!l(a.CRITERIA[i],t,!0)){r=!1;break}r?t.setAttribute(a.NAME,a.VALUE):null!=a.DEFAULT_VALUE&&t.setAttribute(a.NAME,a.DEFAULT_VALUE)}}}function m(e,t){if(!t||t.constructor!==Object)return e;if(!e||e.constructor!==Object)return t;for(var o in t)t.hasOwnProperty(o)&&o in e?(null==e[o].APPEND_ATTRIBUTES&&(e[o].APPEND_ATTRIBUTES=t[o].APPEND_ATTRIBUTES),null==e[o].ATTRIBUTE_RULES&&(e[o].ATTRIBUTE_RULES=t[o].ATTRIBUTE_RULES)):e[o]=t[o];return e}function y(e,t,o){return!(t&&!l(t,e)&&(void 0!==t.DEFAULT_VALUE?e.setAttribute(o,t.DEFAULT_VALUE):e.removeAttribute(o),1))}function f(e){if("object"==typeof e){for(var o in e.ALLOWED_TAGS=e.GLOBAL_TAGS,e.ALLOWED_ATTR=e.GLOBAL_ATTRIBUTES,w)!w.hasOwnProperty(o)||null!=e[o]||o in _||(e[o]=t[o]);if(e.TAG_RULES=u(e.TAG_RULES,"NAME"),e.TAG_RULES&&e.TAG_RULES.constructor==Object)for(var a in e.TAG_RULES)if(e.TAG_RULES.hasOwnProperty(a)){var r=e.TAG_RULES[a];r.ATTRIBUTE_RULES=n(u(r.ATTRIBUTE_RULES,"NAME")),r.APPEND_ATTRIBUTES=p(r.APPEND_ATTRIBUTES)}if(e.GLOBAL_ATTRIBUTE_RULES=n(u(e.GLOBAL_ATTRIBUTE_RULES,"NAME")),e.GLOBAL_APPEND_ATTRIBUTES=p(e.GLOBAL_APPEND_ATTRIBUTES),e.EXTENDS)for(var i=0;i<e.EXTENDS.length;i++){var s=e.EXTENDS[i];switch("GLOBAL_TAGS"==s&&(s="ALLOWED_TAGS"),"GLOBAL_ATTRIBUTES"==s&&(s="ALLOWED_ATTR"),s){case"ALLOWED_TAGS":case"ALLOWED_ATTR":case"FORBID_TAGS":case"FORBID_ATTR":e[s+="_OBJ"]={},t[s]&&(e[s]=addObjsToSet(e[s],t[s]));break;case"ADD_URI_SAFE_ATTR":case"GLOBAL_APPEND_ATTRIBUTES":if(e[s]||(e[s]=[]),!t[s]||t[s].constructor!==Array)break;e[s]=e[s].concat(t[s]);break;case"GLOBAL_ATTRIBUTE_RULES":if(e.GLOBAL_ATTRIBUTE_RULES||(e.GLOBAL_ATTRIBUTE_RULES={}),t.GLOBAL_ATTRIBUTE_RULES&&t.GLOBAL_ATTRIBUTE_RULES.constructor==Object)for(var l in t.GLOBAL_ATTRIBUTE_RULES)t.GLOBAL_ATTRIBUTE_RULES.hasOwnProperty(l)&&!e.GLOBAL_ATTRIBUTE_RULES[l]&&(e.GLOBAL_ATTRIBUTE_RULES[l]=t.GLOBAL_ATTRIBUTE_RULES[l]);break;case"TAG_RULES":e.TAG_RULES||(e.TAG_RULES={}),e.TAG_RULES=m(e.TAG_RULES,t.TAG_RULES)}}for(var c in C)C.hasOwnProperty(c)&&(e[c+"_OBJ"]||(e[c+"_OBJ"]={}),null!=e[c]?e[c].constructor===Array&&(e[c+"_OBJ"]=addToSet(e[c+"_OBJ"],e[c])):e[c]=[]);for(var d=0;d<D.length;d++){var h=D[d];e[h]||(e[h]=[])}for(var y in"ALL"==e.ALLOWED_STYLE?(e.FORBID_TAGS_OBJ=removeFromSet(e.FORBID_TAGS_OBJ,"style"),e.FORBID_ATTR_OBJ=removeFromSet(e.FORBID_ATTR_OBJ,"style"),e.ALLOWED_TAGS_OBJ=addToSet(e.ALLOWED_TAGS_OBJ,["style"]),e.ALLOWED_ATTR_OBJ=addToSet(e.ALLOWED_ATTR_OBJ,["style"])):"INLINE"==e.ALLOWED_STYLE?(e.FORBID_ATTR_OBJ=removeFromSet(e.FORBID_ATTR_OBJ,"style"),e.ALLOWED_ATTR_OBJ=addToSet(e.ALLOWED_ATTR_OBJ,["style"]),e.FORBID_TAGS_OBJ=addToSet(e.FORBID_TAGS_OBJ,["style"]),e.ALLOWED_TAGS_OBJ=removeFromSet(e.ALLOWED_TAGS_OBJ,"style")):"INTERNAL"==e.ALLOWED_STYLE?(e.FORBID_TAGS_OBJ=removeFromSet(e.FORBID_TAGS_OBJ,"style"),e.ALLOWED_TAGS_OBJ=addToSet(e.ALLOWED_TAGS_OBJ,["style"]),e.FORBID_ATTR_OBJ=addToSet(e.FORBID_ATTR_OBJ,["style"]),e.ALLOWED_ATTR_OBJ=removeFromSet(e.ALLOWED_ATTR_OBJ,"style")):"NONE"==e.ALLOWED_STYLE&&(e.FORBID_TAGS_OBJ=addToSet(e.FORBID_TAGS_OBJ,["style"]),e.FORBID_ATTR_OBJ=addToSet(e.FORBID_ATTR_OBJ,["style"]),e.ALLOWED_TAGS_OBJ=removeFromSet(e.ALLOWED_TAGS_OBJ,"style"),e.ALLOWED_ATTR_OBJ=removeFromSet(e.ALLOWED_ATTR_OBJ,"style")),C)if(C.hasOwnProperty(y)){for(var f in e[y+"_OBJ"])e[y+"_OBJ"].hasOwnProperty(f)&&e[y].push(f);e[y+"_OBJ"]=addToSet(e[y+"_OBJ"],e[y])}ZSEC.configValidator&&ZSEC.configValidator.HTMLPurifierValidation(e,w,C,g,v)}else for(var x in e={},t)t.hasOwnProperty(x)&&(e[x]=t[x].valueOf());return e}var g=addToSet({},["script"]),v=addToSet({},[]),x=["ALLOW_ARIA_ATTR","ALLOW_DATA_ATTR","ALLOW_UNKNOWN_PROTOCOLS","SAFE_FOR_JQUERY","SAFE_FOR_TEMPLATES","WHOLE_DOCUMENT","RETURN_DOM","RETURN_DOM_FRAGMENT","RETURN_DOM_IMPORT","FORCE_BODY","SANITIZE_DOM","KEEP_CONTENT","ALLOWED_STYLE_PROPS"],P=["ALLOWED_TAGS","ALLOWED_ATTR","FORBID_TAGS","FORBID_ATTR"],b=["ALLOWED_TAGS_OBJ","ALLOWED_ATTR_OBJ","FORBID_TAGS_OBJ","FORBID_ATTR_OBJ"],D=["ADD_URI_SAFE_ATTR","GLOBAL_APPEND_ATTRIBUTES","GLOBAL_ATTRIBUTE_RULES","TAG_RULES"],L=addToSet({},x),C=addToSet({},P),_=(addToSet({},b),addToSet({},D));_=addToSet(_,P),_=addToSet(_,b);var S,w=addToSet({},x.concat(["STYLE_VALIDATION","ALLOWED_STYLE","EXTENDS","REMOVE_ONEVENTS","GLOBAL_ATTRIBUTES","GLOBAL_TAGS"],P,b,D)),T={iframe:{NAME:"iframe",ATTRIBUTE_RULES:{sandbox:{NAME:"sandbox",NOT_CONTAINS:["allow-top-navigation","allow-popups-to-escape-sandbox"],DEFAULT_VALUE:"allow-popups allow-forms allow-scripts allow-same-origin"}},APPEND_ATTRIBUTES:[{NAME:"sandbox",VALUE:"allow-popups allow-forms allow-scripts allow-same-origin"}]}},E=addToSet({},t.ALLOWED_STYLE_PROPS);!function(){for(var e in t.FORBID_TAGS_OBJ=addObjsToSet(t.FORBID_TAGS_OBJ,g),t.FORBID_ATTR_OBJ=addObjsToSet(t.FORBID_ATTR_OBJ,v),C)C.hasOwnProperty(e)&&(t[e+"_OBJ"]=addToSet(t[e+"_OBJ"],t[e]));o.removeAllHooks(),S=!1,"NONE"==t.ALLOWED_STYLE&&(t.FORBID_TAGS_OBJ=addToSet(t.FORBID_TAGS_OBJ,["style"]),t.FORBID_ATTR_OBJ=addToSet(t.FORBID_ATTR_OBJ,["style"])),"INLINE"!=t.ALLOWED_STYLE&&"ALL"!=t.ALLOWED_STYLE||(t.STYLE_VALIDATION&&o.addHook("afterSanitizeAttributes",(function(e){if(!e.ownerDocument.baseURI){var t=document.createElement("base");t.href=document.baseURI,e.ownerDocument.head.appendChild(t)}if(e.hasAttribute("style")){var o="";S=!1,r(e.style),(o=S?e.style.cssText:e.getAttribute("style")).length?e.setAttribute("style",o):e.removeAttribute("style")}})),"INLINE"==t.ALLOWED_STYLE&&(t.FORBID_TAGS_OBJ=addToSet(t.FORBID_TAGS_OBJ,["style"]),t.FORBID_ATTR_OBJ=removeFromSet(t.FORBID_ATTR_OBJ,"style"))),"INTERNAL"!=t.ALLOWED_STYLE&&"ALL"!=t.ALLOWED_STYLE||(t.STYLE_VALIDATION&&o.addHook("uponSanitizeElement",(function(e,t){if("style"===t.tagName&&null!=e.sheet){var o=e.sheet.cssRules;if(S=!1,i(o),S){var a=[];s(a,o),e.textContent=a.join("\n")}}})),"INTERNAL"==t.ALLOWED_STYLE&&(t.FORBID_ATTR_OBJ=addToSet(t.FORBID_ATTR_OBJ,["style"]),t.FORBID_TAGS_OBJ=removeFromSet(t.FORBID_TAGS_OBJ,"style"))),"ALL"==t.ALLOWED_STYLE&&(t.FORBID_TAGS_OBJ=removeFromSet(t.FORBID_TAGS_OBJ,"style"),t.FORBID_ATTR_OBJ=removeFromSet(t.FORBID_ATTR_OBJ,"style")),(t.GLOBAL_ATTRIBUTE_RULES||t.TAG_RULES)&&o.addHook("afterSanitizeAttributes",(function(e){for(var o=e.nodeName.toLowerCase(),a=t.GLOBAL_ATTRIBUTE_RULES,r=t.TAG_RULES&&t.TAG_RULES[o]&&t.TAG_RULES[o].ATTRIBUTE_RULES,i=T&&T[o]&&T[o].ATTRIBUTE_RULES,s=e.attributes.length;s--;){var l=e.attributes[s].name;y(e,r&&r[l]||a&&a[l],l)&&y(e,i&&i[l],l)}})),(t.GLOBAL_APPEND_ATTRIBUTES||t.TAG_RULES)&&o.addHook("afterSanitizeAttributes",(function(e){var o=e.nodeName.toLowerCase();h(t.TAG_RULES&&t.TAG_RULES[o]&&t.TAG_RULES[o].APPEND_ATTRIBUTES,e),h(t.GLOBAL_APPEND_ATTRIBUTES,e),h(T&&T[o]&&T[o].APPEND_ATTRIBUTES,e)})),t.REMOVE_ONEVENTS&&o.addHook("uponSanitizeAttribute",(function(e,t){0==t.attrName.indexOf("on")&&(t.keepAttr=!1)}))}();var A=function(t){return t=f(t),e(t,o(window))};return A.isSupported=o.isSupported,A.removed="",ZSEC.util.defineProperty(A,"sanitize",(function(e,t){var r=a(t),i=o.sanitize(e,r);return A.removed=o.removed,i}),!1,!1,!0),A}(t,DOMPurify(window)),!0,!1,!1,!0),delete window.DOMPurify}()}window.DOMPurifyCopy&&(window.DOMPurify=window.DOMPurifyCopy,window.DOMPurifyCopy=void 0),window.ZSEC.Encoder||function(e){function t(e){for(var t=[],o=0;o<e.length;o++)t.push(e[o].charCodeAt(0));return t}var o={},a="34=&quot|38=&amp|60=&lt|62=&gt|160=&nbsp|161=&iexcl|162=&cent|163=&pound|164=&curren|165=&yen|166=&brvbar|167=&sect|168=&uml|169=&copy|170=&ordf|171=&laquo|172=&not|173=&shy|174=&reg|175=&macr|176=&deg|177=&plusmn|178=&sup2|179=&sup3|180=&acute|181=&micro|182=&para|183=&middot|184=&cedil|185=&sup1|186=&ordm|187=&raquo|188=&frac14|189=&frac12|190=&frac34|191=&iquest|192=&Agrave|193=&Aacute|194=&Acirc|195=&Atilde|196=&Auml|197=&Aring|198=&AElig|199=&Ccedil|200=&Egrave|201=&Eacute|202=&Ecirc|203=&Euml|204=&Igrave|205=&Iacute|206=&Icirc|207=&Iuml|208=&ETH|209=&Ntilde|210=&Ograve|211=&Oacute|212=&Ocirc|213=&Otilde|214=&Ouml|215=&times|216=&Oslash|217=&Ugrave|218=&Uacute|219=&Ucirc|220=&Uuml|221=&Yacute|222=&THORN|223=&szlig|224=&agrave|225=&aacute|226=&acirc|227=&atilde|228=&auml|229=&aring|230=&aelig|231=&ccedil|232=&egrave|233=&eacute|234=&ecirc|235=&euml|236=&igrave|237=&iacute|238=&icirc|239=&iuml|240=&eth|241=&ntilde|242=&ograve|243=&oacute|244=&ocirc|245=&otilde|246=&ouml|247=&divide|248=&oslash|249=&ugrave|250=&uacute|251=&ucirc|252=&uuml|253=&yacute|254=&thorn|255=&yuml|338=&OElig|339=&oelig|352=&Scaron|353=&scaron|376=&Yuml|402=&fnof|710=&circ|732=&tilde|913=&Alpha|914=&Beta|915=&Gamma|916=&Delta|917=&Epsilon|918=&Zeta|919=&Eta|920=&Theta|921=&Iota|922=&Kappa|923=&Lambda|924=&Mu|925=&Nu|926=&Xi|927=&Omicron|928=&Pi|929=&Rho|931=&Sigma|932=&Tau|933=&Upsilon|934=&Phi|935=&Chi|936=&Psi|937=&Omega|945=&alpha|946=&beta|947=&gamma|948=&delta|949=&epsilon|950=&zeta|951=&eta|952=&theta|953=&iota|954=&kappa|955=&lambda|956=&mu|957=&nu|958=&xi|959=&omicron|960=&pi|961=&rho|962=&sigmaf|963=&sigma|964=&tau|965=&upsilon|966=&phi|967=&chi|968=&psi|969=&omega|977=&thetasym|978=&upsih|982=&piv|8194=&ensp|8195=&emsp|8201=&thinsp|8204=&zwnj|8205=&zwj|8206=&lrm|8207=&rlm|8211=&ndash|8212=&mdash|8216=&lsquo|8217=&rsquo|8218=&sbquo|8220=&ldquo|8221=&rdquo|8222=&bdquo|8224=&dagger|8225=&Dagger|8226=&bull|8230=&hellip|8240=&permil|8242=&prime|8243=&Prime|8249=&lsaquo|8250=&rsaquo|8254=&oline|8260=&frasl|8364=&euro|8465=&image|8472=&weierp|8476=&real|8482=&trade|8501=&alefsym|8592=&larr|8593=&uarr|8594=&rarr|8595=&darr|8596=&harr|8629=&crarr|8656=&lArr|8657=&uArr|8658=&rArr|8659=&dArr|8660=&hArr|8704=&forall|8706=&part|8707=&exist|8709=&empty|8711=&nabla|8712=&isin|8713=&notin|8715=&ni|8719=&prod|8721=&sum|8722=&minus|8727=&lowast|8730=&radic|8733=&prop|8734=&infin|8736=&ang|8743=&and|8744=&or|8745=&cap|8746=&cup|8747=&int|8756=&there4|8764=&sim|8773=&cong|8776=&asymp|8800=&ne|8801=&equiv|8804=&le|8805=&ge|8834=&sub|8835=&sup|8836=&nsub|8838=&sube|8839=&supe|8853=&oplus|8855=&otimes|8869=&perp|8901=&sdot|8968=&lceil|8969=&rceil|8970=&lfloor|8971=&rfloor|10216=&lang|10217=&rang|9674=&loz|9824=&spades|9827=&clubs|9829=&hearts|9830=&diams";a=a.split("|");for(var r=0;r<a.length;r++){var i=a[r].split("=");o[i[0]]=i[1]}var s={characterToEntityMap:o,IMMUNE_HTML:t(new Array(",",".","-","_"," ")),IMMUNE_HTMLATTR:t(new Array(",",".","-","_")),IMMUNE_CSS:t(new Array),IMMUNE_JAVASCRIPT:t(new Array(",",".","_"))};ZSEC.util.defineProperty(ZSEC,"Encoder",function(e){function t(e,t,o,a){if(null==t||null==t||"string"!=typeof t)return t;for(var r="",i=0;i<t.length;i++)if(a){var s=t.codePointAt(i);r+=o(e,s,a),s>65535&&i++}else r+=o(e,t.charCodeAt(i));return r}for(var o={},a=e.characterToEntityMap,r=[],i=0;i<255;i++)r[i]=i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122?null:i.toString(16);var s=function(e){return e<256?r[e]:e.toString(16)},l=function(e,t){if(-1!=ZSEC.util.ArrayIndexOf.call(e,t))return String.fromCodePoint(t);var o=s(t);if(null==o)return String.fromCodePoint(t);if(t<=31&&"\t"!=t&&"\n"!=t&&"\r"!=t||t>=127&&t<=159||" "==t)return" ";var r=a[t];return null!=r?r+";":"&#x"+o+";"},n=function(e,t){if(-1!=ZSEC.util.ArrayIndexOf.call(e,t))return String.fromCharCode(t);if(null==s(t))return String.fromCharCode(t);var o=t.toString(16);if(t<256){var a="00".substr(o.length);return"\\x"+a+o.toUpperCase()}return"\\u"+(a="0000".substr(o.length))+o.toUpperCase()},p=function(e,t){if(-1!=ZSEC.util.ArrayIndexOf.call(e,t))return String.fromCodePoint(t);var o=s(t);return null==o?String.fromCodePoint(t):"\\"+o+" "};return o.encodeForHTML=function(o){return t(e.IMMUNE_HTML,o,l,!0)},o.encodeForHTMLAttribute=function(o){return t(e.IMMUNE_HTMLATTR,o,l,!0)},o.encodeForJavaScript=function(o){return t(e.IMMUNE_JAVASCRIPT,o,n,!1)},o.encodeForCSS=function(o){return t(e.IMMUNE_CSS,o,p,!0)},Object.freeze&&Object.freeze(o),o}(s),!0,!1,!1,!0)}();var _createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var a=t[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,o,a){return o&&e(t.prototype,o),a&&e(t,a),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function ReplaceWith(e){var t=this.parentNode,o=arguments.length,a=+(t&&"object"===(void 0===e?"undefined":_typeof(e)));if(t){for(;o-- >a;)t&&"object"!==_typeof(arguments[o])&&(arguments[o]=document.createTextNode(arguments[o])),t||!arguments[o].parentNode?t.insertBefore(this.previousSibling,arguments[o]):arguments[o].parentNode.removeChild(arguments[o]);a&&t.replaceChild(this,e)}}[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach((function(e){e.hasOwnProperty("after")||Object.defineProperty(e,"after",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=Array.prototype.slice.call(arguments),t=document.createDocumentFragment();e.forEach((function(e){var o=e instanceof Node;t.appendChild(o?e:document.createTextNode(String(e)))})),this.parentNode.insertBefore(t,this.nextSibling)}})})),Element.prototype.replaceWith||(Element.prototype.replaceWith=ReplaceWith),CharacterData.prototype.replaceWith||(CharacterData.prototype.replaceWith=ReplaceWith),DocumentType.prototype.replaceWith||(DocumentType.prototype.replaceWith=ReplaceWith),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){return(void 0===t||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e});var Lyte={version:"3.1.2",$:{consoleTime:[]},registeredMixins:{},registeredServices:{},Mixin:{},Service:{},debug:!1,performance:!1,toBeRegistered:[],registeredCustomComponent:{}};Lyte.$.assetsDiv=document.createElement("div"),Lyte.$.assetsDiv.setAttribute("id","lyteAssetsDiv"),Lyte.registerErrorCodes=function(e){Object.assign(Lyte.errorCodes,e)},Lyte.establishObserverBindings=function(e,t,o,a){var r=this;t&&(r=t);for(var i=0;i<e.length;i++)for(var s=e[i].properties,l=0;l<s.length;l++){var n,p=!1;if(-1!==s[l].indexOf(".[]"))p=!0,n=Lyte.getProperty.call(this,s[l].substring(0,s[l].indexOf(".[]")),t,o);else{if(-1!==s[l].indexOf(".*")){var c=s[l].split(".")[0];if(!!!(!t&&this.component.__data[c]&&this.component.__data[c].watch||t&&a&&a.fieldList&&a.fieldList[c]&&a.fieldList[c].watch))continue}n=Lyte.getProperty.call(this,s[l],t,o)}n._observers||Object.defineProperty(n,"_observers",{value:new Set,enumerable:!1,writable:!0,configurable:!0}),n._observers.add({callee:r,observer:e[i],isArrayObserver:p})}},Lyte.getProperty=function(e,t,o){var a=e.split("."),r=this;t?(r=o,o[a[0]]||(o[a[0]]={}),r=o[a[0]]):(r._properties[a[0]]||(r._properties[a[0]]={}),r=r._properties[a[0]]),Object.defineProperty(r,"_path",{enumerable:!1,value:a[0]});for(var i=1;i<a.length;i++)r[a[i]]||(r[a[i]]={},Object.defineProperty(r[a[i]],"_path",{enumerable:!1,value:r._path+"."+a[i]})),r=r[a[i]];return r},Lyte.getErrorMessage=function(e){var t=Array.from(arguments).slice(1);return Lyte.errorCodes[e]?Lyte.errorCodes[e].replace(/{(\d+)}/g,(function(e,o){return t[o]})):e},Lyte.error=function(){var e=arguments[0],t=e.stack;e=t?e:Error(Lyte.getErrorMessage.apply(Lyte,arguments)),Lyte.onerror&&Lyte.onerror.call(this,e,arguments[1]),Lyte.triggerEvent("error",e,arguments[1]);var o=e.stack&&-1==e.stack.indexOf(e.message);t&&!o&&(e=JSON.parse(JSON.stringify(e,Object.getOwnPropertyNames(e)))),arguments[1]?console.error(e.stack?o?e:e.stack:e.message,arguments[1]):console.error(e.stack?o?e:e.stack:e.message)},Lyte.warn=function(){var e=arguments[0];e=e.stack?JSON.parse(JSON.stringify(e,Object.getOwnPropertyNames(e))):Error(Lyte.getErrorMessage.apply(Lyte,arguments)),console.warn(e.stack?-1!=e.stack.indexOf(e.message)?e.stack.replace("Error: ",""):e:e.message)};var requiredMixins={};function domContentLoaded1(){document.head.appendChild(Lyte.$.assetsDiv);var e=Lyte.toBeRegistered;if(e.length){for(var t=0;t<e.length;t++)customElements.define(e[t].name,e[t].def);Lyte.toBeRegistered=[]}}Lyte.Mixin.register=function(e,t){var o;if(Lyte.registeredMixins[e]=t,o=requiredMixins[e])for(var a in o)Lyte.$.requiredMixins[a](t,o[a],a)},Lyte.Mixin.get=function(e){return Lyte.registeredMixins[e]},Lyte.Service.register=function(e,t){Lyte.registeredServices[e]=t},Lyte.Service.get=function(e){return Lyte.registeredServices[e]},Lyte.$.requiredMixins=function(e,t,o){var a=requiredMixins[e]?requiredMixins[e]:requiredMixins[e]={};a[o]?a[o].push(t):a[o]=[t]},Lyte.Mixin.exists=function(e){return!!Lyte.registeredMixins[e]},Lyte.log=function(e,t,o){Lyte.debug&&(o?console.log("%c"+e,"color:"+o):console.log(e))},Lyte.time=function(e){var t;Lyte.performance&&(-1!=(t=Lyte.$.consoleTime.indexOf(e))?(Lyte.$.consoleTime.splice(t,1),console.timeEnd(e)):(Lyte.$.consoleTime.push(e),console.time(e)))},Lyte.isRecord=function(e){return!!(e&&e.$&&e.$.hasOwnProperty("isModified"))},Lyte.isComponent=function(e){return!!(e&&e.$node&&e.__data)},Lyte.$.reqFiles={},Lyte.injectResources=function(e,t,o){var a=[],r=[];return t=t||function(){},o=o||function(){},new Promise((function(t){i(e,t)})).then((function(){o(a,r)}));function i(e,o){if(e){Array.isArray(e)||(e=[e]),e.length||o();var s=-e.length;e.forEach((function(e){"string"==typeof e?function(e,o,i){Lyte.$.reqFiles[e]?Lyte.$.reqFiles[e].push(i):(Lyte.$.reqFiles[e]=[i],o&&"error"!=o.event.type?(-1!=Lyte.removeFromCache.arr.indexOf(e)&&Lyte.removeFromCache.arr.splice(Lyte.removeFromCache.arr.indexOf(e),1),n.call(o.tag,o.event,!0),i()):function(e,o){var i={".js":"script",".css":"link"},s=e.match(/\.[a-zA-Z]+(?=\?|$)/),l=document.createElement(i[s]);if(!s)return void Lyte.error("Type of file is not specified in injectResources.");".css"==s?(l.setAttribute("href",e),l.setAttribute("type","text/css"),l.setAttribute("rel","stylesheet")):l.setAttribute("src",e);l.onerror=l.onload=function(e){"error"==e.type?r.push(e):a.push(e),o&&o.call(this,e)};var n=t.internal||{};n.tag=l,Lyte.triggerEvent("onBeforeInject",n),Lyte.$.assetsDiv.appendChild(l)}(e,(function(o){Lyte.$.reqFiles[e].forEach((function(e){e()})),n.call(this,o),t.call(this,o)})))}(e,Lyte.injectResources.availableTags[e],(function(){l()})):Array.isArray(e)?new Promise((function(t){i(e,t)})).then((function(){l()})):new Promise((function(t){i(e.parent,t)})).then((function(){new Promise((function(t){i(e.child,t)})).then((function(){l()}))}))}))}else o();function l(){0==++s&&o()}function n(e,t){var o=this.getAttribute("src")||this.getAttribute("href");delete Lyte.$.reqFiles[o],t||(Lyte.injectResources.availableTags[o]&&Lyte.injectResources.availableTags[o].tag.remove(),this.onerror=this.onload=void 0,Lyte.injectResources.availableTags[o]={tag:this,event:{type:e.type}})}}},Lyte.injectResources.availableTags=[],Lyte.removeFromCache=function(e){Lyte.removeFromCache.assign(e),Lyte.removeFromCache.arr.length&&(Lyte.removeFromCache.arr.forEach((function(e){Lyte.injectResources.availableTags[e]&&(Lyte.injectResources.availableTags[e].tag.remove(),delete Lyte.injectResources.availableTags[e])})),Lyte.removeFromCache.arr=[])},Lyte.removeFromCache.arr=[],Lyte.removeFromCache.assign=function(e){e="*"==e?Object.keys(Lyte.injectResources.availableTags):Array.isArray(e)?e:[e],Lyte.removeFromCache.arr=Lyte.removeFromCache.arr.concat(e)},Lyte.checkProperty=function(e,t,o,a,r,i,s){var l="extends";switch(e){case"type":if(Lyte.Transform.hasOwnProperty(a)&&null!=t){if(Array.isArray(t)){if("array"!=Lyte.Transform[a][l])return{code:"ERR03",message:Lyte.errorCodes.ERR03,expected:a}}else if(Lyte.Transform[a][l]!=(void 0===t?"undefined":_typeof(t)))return{code:"ERR03",message:Lyte.errorCodes.ERR03,expected:a}}else if(null!=t)if(Array.isArray(t)){if("array"!=a)return{code:"ERR03",message:Lyte.errorCodes.ERR03,expected:a}}else if(a!=(void 0===t?"undefined":_typeof(t)))return{code:"ERR03",message:Lyte.errorCodes.ERR03,expected:a};break;case"mandatory":if(a&&(null==t||null==t||""===t))return{code:"ERR02",message:Lyte.errorCodes.ERR02};break;case"maximum":if("number"==typeof t&&t>a)return{code:"ERR04",message:Lyte.errorCodes.ERR04,expected:a};break;case"minimum":if("number"==typeof t&&t<a)return{code:"ERR05",message:Lyte.errorCodes.ERR05,expected:a};break;case"maxLength":case"maxItems":if(t&&t.length>a)return{code:"ERR06",message:Lyte.errorCodes.ERR06,expected:a};break;case"minLength":case"minItems":if(t&&t.length<a)return{code:"ERR07",message:Lyte.errorCodes.ERR07,expected:a};break;case"pattern":if("string"==typeof t&&!new RegExp(a).test(t))return{code:"ERR08",message:Lyte.errorCodes.ERR08,expected:a};break;case"uniqueItems":if(Array.isArray(t)&&a)for(var n=[],p=0;p<t.length;p++){var c=t[p];if(-1!=n.indexOf(c))return{code:"ERR09",message:Lyte.errorCodes.ERR09};n.push(c)}break;case"constant":if(Array.isArray(t)){if(!(d=t.length==a.length&&t.every((function(e,t){return e===a[t]}))))return{code:"ERR10",message:Lyte.errorCodes.ERR10,expected:a}}else if("object"==(void 0===t?"undefined":_typeof(t))){if(!(d=store.adapter.$.compareObjects(t,a)))return{code:"ERR10",message:Lyte.errorCodes.ERR10,expected:a}}else if(t&&t!=a)return{code:"ERR10",message:Lyte.errorCodes.ERR10,expected:a};break;case"items":if(Array.isArray(t))for(p=0;p<t.length;p++)for(var e in a){if(1!=(d=Lyte.checkProperty(e,t[p],p,a[e])))return d}break;case"properties":if("object"==(void 0===t?"undefined":_typeof(t))&&!Array.isArray(t))for(var o in t)for(var e in a){if(1!=(d=Lyte.checkProperty(e,t[o],o,a[e])))return d}break;case"validation":var d;if(1!=(d=Lyte.customValidator[a].apply(r,[o,t,s])))return d}return!0},Lyte.types=["string","object","number","boolean","array"],Lyte.attr=function(e,t){var o={};if(o.type=e,null==t&&(t={}),-1==this.types.indexOf(e)&&!Lyte.Transform.hasOwnProperty(e))throw new Error("Not a valid field type - "+e);return Object.assign(o,t),o},Lyte.defineRelation=function(e,t,o){var a={type:"relation",relType:t,relatedTo:e};return o&&(a.opts=o),a},Lyte.belongsTo=function(e,t){return this.defineRelation(e,"belongsTo",t)},Lyte.hasMany=function(e,t){return this.defineRelation(e,"hasMany",t)},Lyte.Transform={},Lyte.customValidator={},Lyte.registerDataType=function(e,t){var o="extends";this.Transform.hasOwnProperty(e)?Lyte.error("Custom Field Type - "+e+" -  already exists."):null!=t[o]&&-1!=Lyte.types.indexOf(t[o])?this.Transform[e]=t:Lyte.error("Not a valid field type - "+t[o])},Lyte.registerValidator=function(e,t){this.customValidator.hasOwnProperty(e)?Lyte.error("Custom Validator with name - "+e+" - already exists"):this.customValidator[e]=t},Lyte.patterns={email:/^([A-Za-z0-9._%\-'+/]+@[A-Za-z0-9.-]+\.[a-zA-Z]{2,22})$/,url:/(^(ht|f)tp(s?):\/\/[0-9a-zA-Z][-.\w]*(:[0-9])*(\/?)([a-zA-Z0-9\-.?,:'/\\+=&amp;%$#_[\]@!()*;~]*)?$)/,ampm:/^(AM|PM|am|pm)$/,hour:/^(0?[0-9]|1[0-9]|2[0-4])$/,minute:/^(0?[0-9]|[1-5][0-9]|60)$/,boolean:/^(true|false|TRUE|FALSE)$/,alphaNumeric:/([a-zA-Z0-9])+/,alphabetsOnly:/([a-zA-Z])+/,numeric:/([0-9])+/,phoneNo:/^[0-9a-zA-Z+.()\-;\s]+$/},Lyte.validate=function(e,t,o,a){var r=a.__data[t],i=!1,s=r?r.type:void 0;for(var l in r)if(!0!==(i=Lyte.checkProperty(l,o,t,r[l],e,s)))return i;return!1},Lyte.registerPattern=function(e,t){this.patterns[e]=t},Lyte.errorCodes={ERR01:"Primary key cannot be modified",ERR02:"Mandatory field cannot be empty",ERR03:"Type of value does not match the specified data type",ERR04:"Value is greater than the maximum value allowed",ERR05:"Value is less than the minimum value allowed",ERR06:"Length of string/array is greater than the maximum limit allowed",ERR07:"Length of string/array is less than the minimum limit allowed",ERR08:"String does not match the specified pattern",ERR09:"Values in array are not unique",ERR10:"Value is not equal to the specified constant",ERR11:"Model of related field is not defined",ERR12:"Model of backward relation is not defined",ERR13:"Record not found",ERR14:"Model does not match the related field model",ERR15:"Error in creating a record as a relation",ERR16:"Record with primary key already exists",ERR17:"Value cannot be changed because record has been deleted",ERR18:"Action not defined",ERR19:"Model not defined",ERR20:"Key not specified",ERR21:"'belongsTo' relationship expects a single object/id",ERR22:"Type not specified for polymorphic relation",ERR23:"Primary Key value not present",ERR24:"Error while relating record",ERR25:"Backward relation not present"},Lyte.registeredGlobalEvents=Lyte.__lyteRegisteredEvents={},Lyte.triggerEvent=function(){var e=Array.prototype.slice.call(arguments,1),t=arguments[0],o=!1,a=this.__lyteRegisteredEvents[t];if(a)for(var r=0;r<a.listeners.length;r++){var i=a.listeners[r];if(i){var s=i.apply(this,e);if(!1===s){o=!0;break}}}else a=this.__lyteRegisteredEvents[t]={listeners:[]};var l=new CustomEvent(t,{detail:e});o||document.dispatchEvent(l)},Lyte.addEventListener=function(e,t){if("function"==typeof t){var o=this.__lyteRegisteredEvents[e];return o||(o=this.__lyteRegisteredEvents[e]={listeners:[]}),e+"-"+(o.listeners.push(t)-1)}Lyte.error("Second parameter to Lyte.Component.addGlobalEventListener() must be a function")},Lyte.removeEventListener=function(e){if(e){var t=e.split("-"),o=this.__lyteRegisteredEvents[t[0]];o&&o.listeners[t[1]]?o.listeners[t[1]]=null:Lyte.error("No such listener registered")}else Lyte.error("listener unique id not specified")},Lyte.extendEventListeners=function(e){e&&"object"==(void 0===e?"undefined":_typeof(e))&&!e.hasOwnProperty("__lyteRegisteredEvents")&&Object.defineProperties(e,{__lyteRegisteredEvents:{value:{}},addEventListener:{value:Lyte.addEventListener},removeEventListener:{value:Lyte.removeEventListener},triggerEvent:{value:Lyte.triggerEvent}})},Lyte.deepCopyObject=function(e){for(var t,o,a,r,i,s,l=[{source:e,target:Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e))}],n=[e],p=l[0].target,c=[p];t=l.shift();){for(o=Object.keys(t.source),a=0;a<o.length;a++)(r=Object.getOwnPropertyDescriptor(t.source,o[a]))&&(r.value&&"object"==_typeof(r.value)?(i=r.value,r.value=Array.isArray(i)?[]:i instanceof Set?new Set:Object.create(Object.getPrototypeOf(i)),-1==(s=n.indexOf(i))?(n.push(i),c.push(r.value),Object.defineProperty(t.target,o[a],r),l.push({source:i,target:r.value})):(r.value=c[s],Object.defineProperty(t.target,o[a],r))):Object.defineProperty(t.target,o[a],r));Lyte.isRecord(t.source)&&(Object.defineProperty(t.target,"$",{value:{}}),t.target.$.isNew=t.source.$.isNew,t.target.$.isModified=t.source.$.isModified,t.target.$.isDeleted=t.source.$.isDeleted,t.target.$.pK=t.source.$.pK,t.target.$._attributes=t.source.$._attributes,t.target.$.isCloned=!0,t.target.$.model={_name:t.source.$.model._name},t.source.$.hasOwnProperty("deepNest")&&(t.target.$.deepNest=t.source.$.deepNest),t.source.$.hasOwnProperty("partialType")&&(t.target.$.partialType=t.source.$.partialType)),Array.isArray(t.source)&&t.source.partial&&Object.defineProperty(t.target,"partial",{value:t.source.partial})}return p},Lyte.nestScpId=1,Lyte.nestScp={},Lyte.establishObjectBinding=function(e,t,o,a){var r,i,s;if(!o||(i=(r=e.$.model)?r.fieldList[t]:void 0))if(a&&e._scp&&e._scp.length)e._scp.forEach((function(o,a){var r=o.path?o.path.split("."):[];r.push(t),Lyte.bindObj(e,t,o.id,r,new Map)}));else if((!o||i.watch)&&e[t]){e._scpObj||Object.defineProperty(e,"_scpObj",{value:{}});var l,n=e._scpObj;l=n[t]=n[t]||Lyte.nestScpId++,s=o?{model:r._name,attr:t,pK:e.$.pK}:{data:e[t]},Lyte.nestScp[l]=s;var p=[];o&&p.push(t),Lyte.bindObj(e,t,l,p,new Map)}},Lyte.bindObj=function(e,t,o,a,r){r=r||new Map;var i=null!=t?e[t]:e;if(Array.isArray(i))r.get(i)||(r.set(i,!0),i.forEach((function(e,t){a.push(t),Lyte.bindObj(i,t,o,a,r),a.pop()}))),Lyte.estObjScp(i,o,a);else if(i&&"object"==(void 0===i?"undefined":_typeof(i))){if(!r.get(i))for(var s in r.set(i,!0),i)a.push(s),Lyte.bindObj(i,s,o,a,r),a.pop();Lyte.estObjScp(i,o,a)}},Lyte.estObjScp=function(e,t,o){e._scp||Object.defineProperty(e,"_scp",{value:[],enumerable:!1,configurable:!0});var a={};a.id=t,a.path=o?o.join("."):o,e._scp.push(a)},Lyte.cmpObjs=function(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var o in e){if(!t.hasOwnProperty(o))return!1;if(0==Lyte.cmpData(e[o],t[o]))return!1}return!0},Lyte.cmpData=function(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(var o=e.length,a=0;a<o;a++)if(0==Lyte.cmpData(e[a],t[a]))return!1}else{if(e&&t&&"object"==(void 0===e?"undefined":_typeof(e))&&"object"==(void 0===t?"undefined":_typeof(t)))return Lyte.cmpObjs(e,t);if(Lyte&&Lyte.isRecord(e)&&Lyte.isRecord(t)){if(e.$.model._name!=e.$.model._name||Lyte.getpKVal(e)!==Lyte.getpKVal(t))return!1}else if(e!==t)return!1}return!0},Lyte.nestScpRemove=function(e,t){var o=e._scp;o&&o.length&&((o.filter((function(e){return e.id==t}))||[]).forEach((function(e){var t=o.indexOf(e);o.splice(t,1)})),o.length||delete e._scp)},Lyte.removeNestScp=function(e,t,o){if(o=o||new Map,Array.isArray(e))o.get(e)||(o.set(e,!0),e.forEach((function(e,a){Lyte.removeNestScp(e,t,o)}))),Lyte.nestScpRemove(e,t);else if(e&&"object"==(void 0===e?"undefined":_typeof(e))){if(!o.get(e))for(var a in o.set(e,!0),e)Lyte.removeNestScp(e[a],t,o);Lyte.nestScpRemove(e,t)}},Lyte.resolvePromises=function(e){if("string"==typeof e||e instanceof Promise)return e;if(Array.isArray(e))return function(e){var t=[],o=!1;if(e.every((function(e,t){return!(e instanceof Promise)||(o=!0,!1)})),!o)return Promise.resolve(e);return new Promise((function(o,a){Promise.all(e).then((function(a){e.forEach((function(e,o){t[o]=a[o]})),o(t)}),(function(e){a(e),Lyte.error("Error on resolve promises",e)}))}))}(e);if("object"==(void 0===e?"undefined":_typeof(e)))return function(e){var t=[],o=[],a=Object.keys(e);if(a.forEach((function(a){var r=e[a];r instanceof Promise&&(t.push(a),o.push(r))})),o.length){var r={};return new Promise((function(i,s){Promise.all(o).then((function(o){a.forEach((function(a){-1!=t.indexOf(a)?r[a]=o[t.indexOf(a)]:r[a]=e[a]})),i(r)}),(function(e){s(e),Lyte.error("Error on resolve promises",e)}))}))}return Promise.resolve(e)}(e)},Lyte.createCustomElement=function(e,t){var o=t.constructor;delete t.constructor,this.defProperty=function(e,t,o){var a={};o.get&&(a.get=o.get),o.set&&(a.set=o.set),Object.defineProperty(e,t,a)};var a=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o&&o.apply(e,Array.from(arguments)),e}return _inherits(t,HTMLElement),t}(),r=t.static;if(r){for(var i in r)"object"===_typeof(r[i])?this.defProperty(a,i,r[i]):Object.defineProperty(a,i,{value:r[i]});delete t.static}for(var i in t)"object"===_typeof(t[i])?this.defProperty(a.prototype,i,t[i]):Object.defineProperty(a.prototype,i,{value:t[i]});t.static=r[i],t.constructor=o,"complete"===document.readyState||"interactive"===document.readyState?customElements.define(e,a):Lyte.toBeRegistered.push({name:e,def:a}),Lyte.registeredCustomComponent[e]=a},"complete"===document.readyState||"interactive"===document.readyState?domContentLoaded1():document.addEventListener("DOMContentLoaded",(function(e){domContentLoaded1()}),!0),function(){var e=XMLHttpRequest.prototype.send;function t(e,t,a,r){var i=Lyte.__nodeXHRMap=Lyte.__nodeXHRMap||new Map,s=i.get(t);s||i.set(t,new Map),s=i.get(t);var l=t.lyteState=t.lyteState||[],n=r||a;-1==l.indexOf(n)&&l.push(n),t.setAttribute("lyte-state","");var p=s.get(e);if(p||(s.set(e,[]),p=s.get(e)),r)return p.push({state:r}),{target:t,event:e};p.push({isXHR:!0,xhr:a});a.addEventListener("readystatechange",(function r(i){4==a.readyState&&(o(a,e,t),a.removeEventListener("readystatechange",r))}))}function o(e,t,o){var a=Lyte.__nodeXHRMap,r=a.get(o);if(r){var i=r.get(t);if(i&&i){var s=i,l=-1;if(s.every((function(t,o){return!(t&&t.isXHR&&t.xhr==e||"string"==typeof e&&t.state==e)||(l=o,!1)})),-1!=l){s.splice(l,1);var n=o.lyteState.indexOf(e);if(o.lyteState.splice(n,1),!s.length){r.delete(t);var p=o&&Array.isArray(o.lyteState)?o.lyteState.indexOf(e):-1;-1!=p&&o.lyteState.splice(p,1),o&&o.lyteState&&0==o.lyteState.length&&(o.lyteState=null,o.removeAttribute("lyte-state"))}r.size||a.delete(o)}}}}XMLHttpRequest.prototype.send=function(){var o,a=window.event,r=a?a.target:void 0;if(Lyte.getConfig("stateHandling"))if(a)o=a.type,/^(click|dblclick)$/.test(o)&&r&&r.getAttribute&&"false"!=r.getAttribute("lyte-state-handling")&&t(o,r,this);else{var i=Lyte&&Lyte.Router?Lyte.Router.getRouteInstance():void 0;if(i){var s=i.transition?i.transition.ev:void 0;if(s&&s.target&&s.target.getAttribute&&"false"!=s.target.getAttribute("lyte-state-handling")){var l=Lyte.__transXHRMap=Lyte.__transXHRMap||new Map;l.set(i.transition,{currentAction:s,XHR:this}),t(s.type,s.target,this)}}}e.apply(this,arguments)},Lyte.addEventListener("transitionStart",(function(e){var t=e.nextTrans;t&&e.prevTrans&&window.event&&(window.event.target?t.ev=window.event:409!=e.prevTrans.state&&308!=e.prevTrans.state||!e.prevTrans.ev||(t.ev=e.prevTrans.ev))})),Lyte.addEventListener("afterRouteTransition",(function(e){if(e&&e.trans){var t=Lyte.__transXHRMap;if(409==e.trans.state||308==e.trans.state){if(window.event||(e.trans.nested=!0),t){var a=t.get(e.trans);a&&(o(a.XHR,a.currentAction.type,a.currentAction.target),t.delete(e.trans))}}else 200==e.trans.state&&t&&t.delete(e.trans);e.trans.ev&&delete e.trans.ev}})),Lyte.addEventListener("beforeRouteTransition",(function(e){e&&e.prevTrans&&e.prevTrans.nested&&(e.trans.ev=e.prevTrans.ev,e.trans.fromPrevTrans=!0)})),Lyte.setState=function(e){e||console.error("Please provide a state name");var o=window.event;if(/^(click|dblclick)$/.test(o.type)){var a=o.target;if(1==Lyte.getConfig("stateHandling")&&a&&a.getAttribute&&"false"!=a.getAttribute("lyte-state-handling"))if(!a.getAttribute("lyte-state")){var r=Lyte.__stateMap=Lyte.__stateMap||new Map;if(r.get(e))console.error("There is already a open state by the name",e);else{var i=t(o.type,a,void 0,e);r.set(e,i)}}}},Lyte.removeState=function(e){e||console.error("Please provide a state name");var t=Lyte.__stateMap;if(t){var a=t.get(e);a&&(t.delete(e),o(e,a.event,a.target))}},Lyte.setConfig=function(e,t){(Lyte.__config=Lyte.__config||{})[e]=t},Lyte.getConfig=function(e){var t=Lyte.__config;if(t)return t[e]}}(),function(e){Lyte.Router=new function(t){var o,a,r,i,s,l,n,p,c,d="function",u="route",h="pending",m="completed",y="aborted",f="parseRouteMapping",g="constructRunLoop",v="RouteTransition",x="getDependencies",P="getResources",b="beforeModel",D="model",L="afterModel",C="redirect",_="renderTemplate",S="afterRender",w="beforeExit",T="didDestroy",E="willTransition",A="didTransition",M="onError",N="onBeforeLoad",k="beforeRouteTransition",F="afterRouteTransition",I="beforeTemplateDestroy",R="resources",O="dependencies",$="lt-prop",B="lt-prop-route",q="lt-prop-fragment",V="lt-prop-dp",U="lt-prop-qp",H="lt-prop-td",Y="lt-prop-trans",j="lt-prop-refresh-route",W="link-to",z="LINK-TO",G="stateChange",K=_+" hook should return either component or HTML. Rendering of HTML directly into the DOM within the "+_+" hook is deprecated.",Z="Error while parsing ltProp in link-to",X="MediumOrchid",J=Lyte.time,Q=Lyte.log,ee=JSON.parse,te=this,oe=document,ae=oe.location,re={routeHash:{},urlCache:{},stickyRoutes:{}},ie=!0,se=!1,le=function(){},ne={},pe={getResources:R,getDependencies:O};function ce(e,t,o,a,r){t&&("object"!=(void 0===t?"undefined":_typeof(t))||Array.isArray(t)?je.call(this,{stopTrans:!0,err:Error(st(203)).stack,instance:o,hook:a,index:r}):e.setData(t))}function de(e,t){var o;if(t){if(!(o=t.outlet?t.outlet.querySelector(e):void 0))return de(e,t.parent)}else(o=oe.querySelector(e))||lt(428,e);return o}function ue(e,t){var o=(t=t||a).routes[e];return{queryParams:o.__lp.queryParams,dynamicParam:o.__lp.dynamicParam}}function he(e){return!e.aborted&&!e.paused}function me(t){var o=t.replace?"replaceState":"pushState",a=re.history?at(we(t.url,!0)):"#"+at(t.url);return t.title=t.title||oe.title,a?e.history[o](t.state,t.title,a):e.history[o](t.state,t.title),t}function ye(){return history.state&&history.state.meta}function fe(){return history.state&&history.state.data}function ge(e){return{meta:{matched:e.matched,url:e.url,index:e.replace&&ye()?ye().index:ie?history.length-1:history.length},data:e.data}}function ve(e){return te.history||function(){function e(){return this}function t(e,t,o,a){a||ye().index++,me({state:{meta:ye(),data:e},title:t,url:o})}te.history=new e,Object.defineProperty(e.prototype,"state",{get:function(){return fe()},set:function(e){return se?se=!1:Lyte.warn("setting on data will not be pushed to history. If needed, use `LR.history.replaceState`."),e}}),e.prototype.replaceState=function(){t.apply(Array.from(arguments).push(!0))},e.prototype.pushState=function(){t.apply(Array.from(arguments))}}(),te.history.fromHistory=!!e.fromHistory&&((te.history.index=e.state.meta.index)<history.length-1?"back":history.state?"reload":"forward"),se=!0,te.history.state=fe()||{},te.history.initial=ie,te.history}function xe(){!re.deferInit&&te.init&&te.init()}function Pe(e,t){if(2!=e.button&&!e.defaultPrevented){var o=t||e.currentTarget;if("A"!==o.children[0].tagName||!(1==e.ctrlKey||1==e.metaKey||2==e.which||o.children[0].hasAttribute("target")&&"_self"!==o.children[0].getAttribute("target"))){e.preventDefault();var a,r=te.getRouteInstance().transition,i=Object.assign({},o.matched);i.route=Array.isArray(i.route)?i.route.join("."):i.route,a=r&&te.checkIfSameRoute(i,r.info)&&o.hasAttribute(j)?te.getRouteInstance(o.getAttribute(j)).refresh():te.transitionTo(o.matched);var s,l={};if(s=o.getAttribute(Y))try{l=ee(s)}catch(e){lt(498,Y,this.outerHTML)}var n=o.getAttribute(H);if(n=n||l.data){if("string"==typeof n)try{n=ee(n)}catch(e){lt(498,H,this.outerHTML)}l.data=n}for(var p in l)a[p]=l[p]}}}function be(e){return e.split(".").filter((function(e){return""!=e}))}function De(e){return null!=e}function Le(e){J(f);var t=re.routes?re.routes:re.routes={},o={},a=[],r=[];return n={route:function(e,i,s){if("object"==(void 0===i?"undefined":_typeof(i))){if(i.path){if(tt(i.path,"?")){var l=i.path.split("?");i.defQP=Qe(l[1]),i.path=l[0]}}else i.path=at(e);i.queryParams&&(i.defQP=i.queryParams)}else(void 0===i?"undefined":_typeof(i))==d&&(s=i),i={path:at(e)};if(o=Fe(a,re.routeHash)[i.path]={__lp:{}},"/"==i.path)a.push("/");else{var n=i.path;(vt(n)||xt(n))&&rt(n).every((function(e,t,a){if(vt(e)||xt(e)){var r;if(vt(e))r=e.replace(":","");else{r=e.replace("*",""),i.wildcard=o.__lp.wildcard=!0,i.sufix=o.__lp.sufix=[];for(var s,l=t+1;s=a[l];l++)o.__lp.sufix.push(s)}return i.dkey=o.__lp.dkey=r,i.dIndex=o.__lp.dIndex=t,!1}return!0})),a.push(n)}var p=Fe(r,t)||t;r.push(e),o.__lp.route=Array.from(r),p[e]?Object.assign(p[e].__lp,i):p[e]={__lp:i},s&&s.call(this,{}),r.pop(),a.pop()}},e.call(n,{}),J(f),t}function Ce(e){o={replace:e.replace,title:a?a.title:oe.title,fromHistory:!1};var t=function(e){var t=o.url=Te(e),a=ut(e);return Ae(t,Tt(a)),t}(e);return Q("Transitioning to "+e.route.join(".")+" "+t,u),i._trans}function _e(){if(re.history){var e=Se(ae.pathname+ae.search+(ae.hash||""));return at(e=we(e))}return at(Se(ae.hash.replace("#","")))}function Se(e){return e||me({replace:!0,state:ge({replace:!0,data:fe()||void 0,url:e="/"}),url:e}),e}function we(e,t){var o;if((o=re.baseURL)&&e){if(o=at(o),0==e.indexOf(o)&&!t)return e.replace(o,"");if(t&&0!=e.indexOf(o))return o+e}return e}function Te(e){if(e&&e.route){var t;Array.isArray(e.route)?t=e.route.join("."):e.route=be(t=e.route),e.queryParams=e.queryParams||{},e.dynamicParams=e.dynamicParams||[];var o=!!a,r=e.dynamicParams.length!=e.route.length,i=0,s=this.tagName==z,l=re.routes,n=templateUrl="",p={};return e.route.forEach(function(t,c){if(o&&a.matched.route[c]!=t&&(o=!1),!(l=Fe(t,l))&&!l.__lp&&l.__lp.path)return lt(422,e.route,c),!1;var d=l.__lp.def;d||s||lt(422,e.route,c);var u,h=l.__lp.path;if(d&&d.__lp){if(d.queryParams){u=l.__lp.defQP;var m=d.__lp.qpdef;for(var y in m)e.queryParams.hasOwnProperty(y)||(o&&m[y].sticky?e.queryParams[y]=d.__lp.queryParams[y]:u&&u.hasOwnProperty(y)&&(p[y]=e.queryParams[y]=u[y])),!s&&m[y].refreshModel&&(e.refreshModel=!0)}}else if(u=l.__lp.defQP)for(var y in u)e.queryParams&&!e.queryParams.hasOwnProperty(y)&&(e.queryParams[y]=u[y]);if(l.__lp.dkey){var f=rt(h),g=rt(h),v=r?i:c;if(!e.dynamicParams||!e.dynamicParams[v])return lt(499,t,s?this:void 0),!1;f[l.__lp.dIndex]=encodeURI(e.dynamicParams[v]),g[l.__lp.dIndex]=at("<<dp>>"),templateUrl+=at(g.join("/")),n+=at(f.join("/")),i++}else templateUrl+=at(h),n+=at(h)}.bind(this)),re.stickyRoutes[t]||(re.urlCache[t]={url:it(templateUrl),defQP:p}),Ee(n,e)}}function Ee(e,t){if(e="/"==e[e.length-1]&&1!=e.length?e.slice(0,-1):e,t.queryParams){var o=!0;for(var a in t.queryParams)null!=t.queryParams[a]&&(o?(e+="?",o=!1):e+="&",e+=a+"="+encodeURIComponent(t.queryParams[a]))}return re.history&&t.fragment&&(e=e+"#"+t.fragment),it(e)}function Ae(e,t){J(v),(t=t||(!ie&&ye()&&ye().matched&&ye().url==_e()?ut(ye().matched):nt(e)))&&t.matched.route.length&&(clearTimeout(c),t.prevTrans=t.prevTrans||Lyte.Router.__lp.prevTrans,function(e,t){(i=new Ie(t)).url=e,i.runLoop={},i._trans=function(e){var t=new gt(e);return e.state=t.state=201,t}(i),Lyte.extendEventListeners(i._trans),i.routes=function(e){for(var t,o,a=e.matched,r=[],s=e.prevTrans,l=!0,n=0;o=a.route[n];n++){if(!(t=te.__lp.getDefinition(i.matched._routes[n])))return!1;s&&l&&s.matched&&s.matched.route[n]==o?r.push(new Lt(a,r,t,n,s.routes[n])):(r[n]=new Lt(a,r,t,n),l=!1)}return s=void 0,r}(t),l?(o=l,i._trans.data=fe()||{},l.replace=!0,l=void 0):i._trans.data&&te.history.replaceState(i._trans.data)}(e,t),Lyte.triggerEvent("transitionStart",{prevTrans:r?r._trans:r,nextTrans:i?i._trans:i}),c=setTimeout((function(){a&&102==a.state&&i&&te.checkIfSameRoute(i.info,a.info)&&!a.aborted&&JSON.stringify(a._data)==JSON.stringify(i._trans.data)?1==a.iPause&&a.resume():(a&&102==a.state&&a.abort({state:409}),(a=i)._data=a._trans.data?Lyte.deepCopyObject(a._trans.data):void 0,t.previous=!0,t.transComp=t.transComp||Me(t.prevTrans,t.matched,t.R),a.runLoop=ke(p=t),o&&a._trans.data&&(o.data=a._trans.data),a.run())}),0))}function Me(e,t,o){var a,r,i=!0,s=!0,l=[],n=[],p=[];if(e){var c=e.matched;if(t.route.forEach((function(d,u){s&&d==c.route[u]?(r=o?o[u]:te.__lp.getDefinition(d.slice(0,u)),i&&function(e,t,o,a){var r=!0,i=Fe(e.__lp.objPath,re.routes);if(!e.queryParams&&!i.__lp.dkey)return!0;if(i.__lp.dkey&&o.dynamicParams[t]!=a.dynamicParams[t])return!1;e.queryParams&&a.refreshModel&&e.queryParams.every((function(t){return!r||!e.__lp.qpdef[t].refreshModel||!a.queryParams&&!o.queryParams||a.queryParams[t]==o.queryParams[t]||(r=!1)}));return r}(r,u,c,t)?(n.push(d),e.routes[u].__lp.rendered?l.push(d):(i=!1,p.push(d))):(i=!1,p.push(d))):(s=!1,null==a&&e.routes[u]&&e.routes[u].__lp.rendered&&(a=u),p.push(d))})),c.route.length>t.route.length){var d=t.route.length;null==a&&e.routes[d].__lp.rendered&&(a=d)}}else p=p.concat(t.route);return{rendered:l,unRendered:p,common:n,templateToRemove:a}}ne.getDependencies=ne.getResources=function(e,t){var o=this.R[t],a=o[e],r=Ue.call(this,a,this.routes[t],e,t,ue(t));return o.__lp[pe[e]+"Loaded"]=!a,a&&he(this)&&(o.__lp[pe[e]]=r,r&&e==x&&console.warn("Requesting files in getDependencies will stall execution of route till download completes. Please validate files before requesting."),Re.call(this,{reqType:pe[e],r:o,index:t})),Ve()},ne[b]=ne[D]=ne[L]=ne[C]=function(e,t){var o=this.routes[t],a=[this.R[t][e],o,ue(t)];return-1!=[L,C].indexOf(e)&&a.splice(2,0,o.currentModel),Ve.apply(this,a)},ne.onError=function(e,t,o,r,i){Ge.call(a,a.prom);var s=this.routes[t];for(a._trans.triggerEvent(M,{error:o,hook:e});t>=0&&!this.aborted&&this.paused&&(Q("onError of "+s.routeName,u,X),0!=He.call(this,M,t,[o,this._trans,ue(t),e]));t--);Ye(o,e,s.routeName,r,i)},ne.willTransition=function(e,t){return 0==He.call(r,e,t,[a._trans])&&Je(a.runLoop.previous,e),Ve()},ne[k]=function(){if(o&&he(this)){o.state=ge({replace:o.replace,data:a._trans.data,url:a.url,matched:a.matched});var e={prevTrans:r&&r._trans||void 0,trans:a._trans,history:ve(o)};te[k](e.prevTrans,e.trans,e.history),a._trans.triggerEvent(k,e),Lyte.triggerEvent(k,e)}return Ve()},ne.afterRouteTransition=function(e){te.afterRouteTransition(e),a._trans.triggerEvent(F,{trans:e}),Lyte.triggerEvent(F,{trans:e})},ne[N]=function(){return new Promise((function(e,t){for(var o=a.matched.route.length,r=1;r<=o&&he(a);r++){var i=o-r;if(0==He.call(a,N,i,[ue(i)])||r==o){e();break}}}))},ne[S]=ne.didTransition=function(e,t){return new Promise(function(o,r){var i=setTimeout(function(){if(e==S){var i=this.routes[t];i.__lp.rendered=!0,Ve.call(this,this.R[t][e],i,i.currentModel,ue(t),i.component).then((function(e){a.routes[t+1]||a._trans.triggerEvent(S),o(e)}),(function(e){r(e)}))}else ne.removeTemplate.call(this),0==He.call(this,e,t,[ue(t),a._trans])&&(Je(a.runLoop.current,e),t=0),o(),0==t&&ot({state:200})}.bind(this,e,t),0);this.fns.push(i)}.bind(this))},ne.beforeExit=function(e,t){var o=r.routes[t],a=r.R[t][e];return Ve.call(this,a,o,o.currentModel,ue(t,r))},ne[_]=function(e,t){var o=this.R[t],a=this.routes[t];if(o[e]){ne.removeTemplate.call(this);var r=Ue.call(this,o[e],a,e,t,a.currentModel,ue(t));if(he(this))if(r&&(a.outletName=r.outlet)){var i,s=a.currentModel;if(a.outlet=i=de(r.outlet,a.parent)){var l={outlet:r.outlet,route:a};if(r.component)if(a.component&&!r.reRender&&a.component.tagName.toLocaleLowerCase()==r.component&&a.outlet==i&&i.contains(a.component))ce.call(this,a.component,s,a,e,t);else{Lyte.triggerEvent(I,l);var n=oe.createElement(r.component);n._route=a.__lp.objPath,ce.call(this,n,s,a,e,t),i.innerHTML="",i.appendChild(a.component=n)}else if(r.html){a.component=void 0,Lyte.triggerEvent(I,l),i.innerHTML=r.html;var p=i.getElementsByTagName("script");p.length&&function(e){for(var t,o=0;t=e[o];o++){for(var a,r=t.parentNode,i=oe.createElement("script"),s=0;a=t.attributes[s];s++)i.setAttribute(a.name,a.value);i.innerHTML=t.innerHTML,r.appendChild(i),r.removeChild(t)}}(Array.from(p))}}}else Lyte.warn(K)}else he(this)&&this.runLoop.templateToRemove&&this.R.length==t+1&&ne.removeTemplate.call(this);return Ve()},ne.removeTemplate=function(){var e=this.runLoop.templateToRemove;this.cleared||(r&&e&&function(e){e.forEach((function(e){for(var t,o=e.routes.length-1;o>=e.index;o--)delete(t=e.routes[o]).__lp.rendered,t.outlet&&(Lyte.triggerEvent(I,{outlet:t.outletName,route:t}),t.outlet.innerHTML="",a.info.route!=t.transition.info.route&&$e.call(this,t,o,e))}))}(e),this.cleared=!0,s!=this&&(s=this),delete this.runLoop.templateToRemove,Lyte.removeFromCache())},this.configureDefaults=function(e){e=e||{},re.history="html5"==e.history,re.baseURL=e.baseURL,re.deferInit=e.deferInit||!1,re.queryParamOptions={sticky:!e.queryParamOptions||!e.queryParamOptions.hasOwnProperty("sticky")||e.queryParamOptions.sticky},this.__lp.config=re},this.__lp={version:"3.1.0",pendingReg:[],getDefinition:function(e,t){return"*"==e?re.routes:(t=Fe(e,t=t||re.routes))&&t.__lp&&t.__lp.def||void 0}},this.configureRoutes=function(t){this.__lp.config||this.configureDefaults(),Le.call(this,t),this.__lp.pendingReg.forEach((function(e){yt.apply({},e)})),this.__lp.pendingReg=[],"complete"===oe.readyState||"interactive"===oe.readyState?xe():e.addEventListener("DOMContentLoaded",(function(){xe()}))},this.init=function(t){var o;return delete this.init,e.onpopstate=function(e){var t;ye()&&(t=ye().url)||(t=re.history?_e():Se((e&&e.newURL||ae.hash).replace(/.*#/,"")));l={fromHistory:!0,url:t},e&&history.state&&(l.data=history.state),Ae(t)},re.history?e.onpopstate():Ae((l={fromHistory:!0,url:_e()}).url),(o=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,HTMLElement),_createClass(t,[{key:"attributeChangedCallback",value:function(e,t,o){if(this.matched&&this.hasAttribute("lyte-rendered")){var a=this.children[0];e===$?(this.handleLtProp(),this.hasAttribute("lt-prop-custom")||this.setCustomAttributes(a,!0),"A"===a.tagName&&this.constructHref(a)):/^(lt-prop-route|lt-prop-fragment|lt-prop-dp|lt-prop-qp)$/.test(e)?(this.getMatchedObject(),"A"===a.tagName&&this.constructHref(a,e,t,o)):this.hasAttribute("lt-prop-custom")||a.setAttribute(e.substring(8),o)}}},{key:"connectedCallback",value:function(){if(this.ltProp=this.ltProp||{},this.handleLtProp(),this.hasAttribute("lyte-rendered"))this.matched||this.getMatchedObject();else{var e;if(this.hasAttribute("lt-prop-custom")||this.ltProp.custom)this.getMatchedObject(),(e=this.children[0])&&"A"===e.tagName&&this.constructHref(e);else{for(e=oe.createElement("a");this.childNodes[0];)e.appendChild(this.childNodes[0]);this.setCustomAttributes(e),this.getMatchedObject(),this.constructHref(e),this.appendChild(e)}Lyte.Component?this._linkToEventId=Lyte.Component.addLyteEventListener(this,"click",(function(e){Pe(e,this)}),this):this.addEventListener("click",Pe),this.setAttribute("lyte-rendered","")}}},{key:"modifyLinkToTagsInRoute",value:function(e){var t=Array.isArray(this.matched.route)?this.matched.route.join("."):this.matched.route;if(re.stickyRoutes[t]){var o=re.routes,a=void 0;if(e){if(!this.matched)return;a=e}else a=this.matched.route;if(!a)return;(a=Array.isArray(a)?a:be(a)).forEach(function(t,r){if(!(o=Fe(t,o))||!o.__lp)return lt(422,a,r),!1;var i=o.__lp.def.__lp;if(e){var s=i.linkTags.indexOf(this);-1!==s&&i.linkTags.splice(s,1)}else i.qpdef&&i.linkTags.push(this)}.bind(this))}}},{key:"disconnectedCallback",value:function(){var e=this.modifyLinkToTagsInRoute.bind(this);Lyte.Component.shouldIgnoreDisconnect()||(this.matched&&this.matched.route&&e(this.matched.route),this._linkToEventId&&Lyte.Component.removeLyteEventListener(this,this._linkToEventId))}},{key:"handleLtProp",value:function(){var e=this.getAttribute($);if(e)try{this.ltProp=ee(e)}catch(e){Lyte.warn(Z)}}},{key:"setCustomAttributes",value:function(e,t){for(var o in this.ltProp)/^(id|class|style|target)$/.test(o)&&e.setAttribute(o,this.ltProp[o]);if(!t)for(var a,r,i=0;a=this.attributes[i];i++)(r=a.nodeName)!==$&&/^(lt-prop-id|lt-prop-rel|lt-prop-class|lt-prop-style|lt-prop-target)$/.test(r)&&e.setAttribute(r.substring(8),a.nodeValue)}},{key:"constructHref",value:function(e,t,o){var a,r=this.modifyLinkToTagsInRoute.bind(this);(a=te.getURL.call(this,this.matched))&&(e.setAttribute("href",a),t===B?(r(o),r()):r())}}],[{key:"observedAttributes",get:function(){return[B,V,q,U,$,"lt-prop-class","lt-prop-id","lt-prop-rel","lt-prop-title","lt-prop-style","lt-prop-target"]}}]),t}()).prototype.getMatchedObject=function(){var e=this.matched||{},t=this.getAttribute.bind(this),o=t(V)||this.ltProp.dp||[],a=t(U)||this.ltProp.qp||{};if(e.route=t(B)||this.ltProp.route,e.fragment=t(q)||this.ltProp.fragment,!(o instanceof Array))try{o=ee(o)}catch(e){return void lt(498,"dynamicParams",this.outerHTML)}if(!(a instanceof Object))try{a=ee(a)}catch(e){lt(498,"queryParams",this.outerHTML)}return e.dynamicParams=o||[],e.queryParams=a||{},this.matched=e},customElements.define(W,o),this},this.beforeScroll=this[k]=this.afterRouteTransition=le,this.checkIfSameRoute=function(e,t){if(e.route==t.route&&e.fragment==t.fragment&&e.dynamicParams.length===t.dynamicParams.length&&Pt(e.queryParams,t.queryParams)){if(e.dynamicParams.length)for(var o,a=0;o=e.dynamicParams[a];a++)if(o!=t.dynamicParams[a])return!1;return!0}return!1},this.addRoutes=function(e){Lyte.warn("addRoutes function will be deprecated from next version"),Object.assign(re.routes,Le.call(n,e))},this.replaceWith=function(){var e=Dt.call(this,bt.apply(this,arguments));if(e)return e.replace=!0,Ce(e)},this.transitionTo=function(){var e;if(e=Dt.call(this,bt.apply(this,arguments)))return Ce(e)},this.getURL=function(e){if(e){e.route||(e=bt.apply(this,arguments));var t,o,a=this.tagName==z,r=re.urlCache;if(sticky=re.queryParamOptions.sticky,!sticky&&(o=r[Array.isArray(e.route)?e.route.join("."):e.route])){for(var i in t=o.url,e.dynamicParams&&e.dynamicParams.length?e.dynamicParams.forEach((function(e,o){t=t.replace("<<dp>>",e)})):-1!=t.indexOf("<<dp>>")&&lt(499,e.route,a?this:void 0),o.defQP)!e.queryParams[i]&&o.defQP[i]&&(e.queryParams[i]=o.defQP[i]);t=Ee(t,e)}else t=a?Te.apply(this,arguments):Te.call(this,e);return t=re.history?we(t,!0):"#"+t}},this.getRoute=function(e){var t=nt(we(e),!0);return t&&(t.dynamicParams=t.dynamicParams.filter(De),t.route=t.route.join(".")),t};var Ne=[b,D,L,C,_,S];function ke(e){J(g);var t=e.transComp,o=[],l={},n=[],p=[],c=[],u=[];if(e.previous){var m=[{hook:k}];if(r){for(var y,f=r.matched.route.length-1;y=r.matched.route[f];f--){var v=a.matched.route[f];v&&y==v||p.push({hook:w,index:f}),c.push({hook:E,index:f})}return J(g),{previous:c.concat(m).concat(p),current:p}}return J(g),{previous:m}}return t.rendered&&t.rendered.length&&t.rendered.forEach((function(e,t){a.routes[t].__lp.rendered=!0,o.push({hook:C,index:t}),u.push({hook:A,index:a.matched.route.length-t-1})})),t.unRendered&&t.unRendered.length&&t.unRendered.forEach((function(e,r){r=t.rendered.length+r,(!t.redirected||t.redirected&&t.redirected.index!=r)&&(n=n.concat([{hook:x,index:r},{hook:P,index:r}]));var s=a.routes[r];(_typeof(s.forceFetch)==d?Ue.call(this,s.forceFetch,s,"forceFetch",r,ue(r)):s.forceFetch)?(l[r]=[{hook:b,index:r},{hook:D,index:r},{hook:L,index:r}],i.routes[r].__lp.fetchStatus=h,[C,_,S].forEach((function(e){o.push({hook:e,index:r})}))):Ne.forEach((function(e){t.redirected&&t.redirected.index==r&&e!=C?-1==[b,D,L].indexOf(e)&&o.push({hook:e,index:r}):o.push({hook:e,index:r})})),u.push({hook:A,index:a.matched.route.length-r-1})})),(o={previous:[],current:[{hook:N}].concat(n.concat(o).concat(u)),forceFetch:l}).templateToRemove=r&&r.runLoop.templateToRemove?r.runLoop.templateToRemove:[],null!=t.templateToRemove&&o.templateToRemove.push({index:t.templateToRemove,routes:s.routes}),J(g),o}function Fe(e,t){if(t)return e?(Array.isArray(e)||"string"!=typeof e||(e=be(e)),e.every((function(e){return t&&t[e]?(t=t[e],!0):t=!1})),t):t}function Ie(e){this.matched=e.matched,this.target=e.matched.target,this.fns=[],this.pending={},this.info={route:e.matched.target,queryParams:e.matched.queryParams,dynamicParams:e.matched.dynamicParams.filter(De)},e.matched.fragment&&(this.info.fragment=e.matched.fragment),this.R=e.R,this.running=this.aborted=this.paused=!1,this.abort=function(e){this.aborted||(!function(e){e.runningProm&&e.runningProm.reject(y),e.fRunningProm&&e.fRunningProm.reject(y)}(this),this.aborted=!0,e||(e={state:308}),this.running&&Q("Transition aborted.",u),e.iAbort||delete this.runLoop.templateToRemove,ot(e))}.bind(this),this.pause=function(e){return Q("Transition paused.",u),e&&e.iPause?this.iPause=!0:(this.iPause=!1,this.state=this._trans.state=307,this._trans.triggerEvent(G,this.state)),this.paused=a.prom||!0,this.resume=this._trans.resume=function(e){if((e=e||this).prom==e.eProm){if(delete e._trans.resume,delete e.resume,Q("Transition resumed.",u),e.paused){var t,o=e.prom;if(1!=e.paused&&(t=e.paused.state),e.runLoop[t])if("forceFetch"==t){var a=e.runLoop.forceFetch[o.index];a[0]&&o.hook==a[0].hook&&a.splice(0,1)}else e.runLoop[t][0]&&e.runLoop[t][0].hook==e.paused.hook&&e.runLoop[t][0].index==e.paused.index&&Je(e.runLoop[t],e.paused.hook,e.paused.index);e.paused=!1,e.state=e._trans.state=102,this._trans.triggerEvent(G,e.state),this.forceFetchRunning?e.runLoop.forceFetch[o.index][0]?e.run(e.runLoop.forceFetch[o.index][0]):(e.routes[o.index].__lp.fetchStatus=m,null!=e.pending.forceFetch&&e.pending.forceFetch==o.index&&(delete e.pending.forceFetch,e.run())):(t&&"forceFetch"==t&&!e.runLoop.forceFetch[o.index][0]&&(e.routes[o.index].__lp.fetchStatus=m),e.run())}}else e.pendingResume||(e.pendingResume=e.resume,delete e._trans.resume,delete e.resume)}.bind(this),this._trans}.bind(this)}function Re(e){var t=function(){};t.internal={};var o=e.reqType,r=e.r,i=e.index,s=t.internal.hook=a.prom.hook,l=o==O?"errorDependencies":"errorResources",n=this;t.internal.route=r.__lp.objPath,Lyte.injectResources(r.__lp[o],t,(function(e,t){var p;(r.__lp[o+"Loaded"]=!0,t.length)?n.aborted||(n.paused||n.pause({iPause:!0}),ne.onError.call(n,s,i,r.__lp[l]=t,424)):a.pending&&null!=(p=a.pending[o])&&p==i&&(delete a.pending[o],null!=(p=a.pending.forceFetch)&&p==i&&a.forceFetchRunning&&(delete a.pending.forceFetch,Ke.call(a,a.runLoop.forceFetch,a.fRunningProm.resolve,a.runLoop.forceFetch[i][0])),Xe.call(a,a.runLoop,"current",a.runningProm.resolve))}))}var Oe=function(e,t){return 0!=e.__lp[t+"Loaded"]};function $e(e,t,o){Q("didDestroy of "+e.routeName,u,X),Ue.call(this,e.didDestroy,e,T,e.currentModel,t,ue(t,o))}var Be=[x,P,b,D,L];function qe(e){return tt(Be,e)}function Ve(e,t){if(e){var o,r=arguments,i=a,s=a.prom,l=s.hook,n=s.index,p=qe(l),c=this;return Promise.resolve(new Promise((function(a,d){try{var u=e.apply(t,Array.from(r).slice(2));p&&u&&(u=Lyte.resolvePromises(u)),o=Promise.resolve(u)}catch(e){return void je.call(c,{hook:l,index:n,stopTrans:p,err:e,instance:t,promise:{resolve:a,reject:d}})}o.then((function(e){a(e)}),(function(e){i.prom=s,l==D&&(t.currentModel=e),je.call(c,{hook:l,index:n,stopTrans:p,err:e,instance:t,PR:!0})}))})))}return Promise.resolve()}function Ue(e,t,o,a){if(e){var r=qe(o);try{return e.apply(t,Array.from(arguments).slice(4))}catch(e){return void je.call(this,{hook:o,index:a,stopTrans:r,err:e,instance:t})}}}function He(e,t,o){var a,r=this.routes[t];if(r.actions&&(a=r.actions[e]))try{if(0==a.apply(r,o))return!1}catch(t){return Ye(t,e,r.routeName),!1}}function Ye(e,t,o,a,r){if("string"==typeof e||"object"==(void 0===e?"undefined":_typeof(e))&&e.stack&&!e.$){e.stack||(e=Error(e)),e.$=!0;var i=st(a||420,t,o);e.stack=e.stack.replace(e.message,e.message=e.message+"\n\t"+i),lt(e)}else lt(a,t,o,e,r&&r.PR)}function je(e){var t=e.instance,o=e.stopTrans,r=e.err,i=e.hook,s=e.index;o?(a.pause(),ne.onError.call(this,i,s,r,420,e)):(Ye(r,i,t.routeName),tt([E,A,w],i)?e.promise&&e.promise.resolve():a.abort({state:4,iAbort:!0}))}function We(e,t,o,a,r){a=a||le,r=r||function(e){e!=y&&lt(e)},new Promise(function(a,r){"nestedForcedPromises"==t?(this.fRunningProm={resolve:a,reject:r},e.call(this,this.runLoop.forceFetch,a)):(this.runningProm={resolve:a,reject:r},e.call(this,this.runLoop,o,a))}.bind(this)).then(a,r)}function ze(){We.call(this,Xe,"nestedPromises","previous",function(){!p||a.running||a.aborted||(a.state=a._trans.state=102,a._trans.triggerEvent(G,a.state),o&&(o.state.data=a._trans.data||o.state.data,me(o)),te.__lp.trans=a,p.previous=!1,a.runLoop=ke(p),p=o=void 0,a.running=!0),We.call(this,Xe,"nestedPromises","current")}.bind(this))}function Ge(e){if(this.eProm=e,this.pendingResume){var t=this.pendingResume;delete this.pendingResume,t()}}function Ke(e,t,o){if(he(this)&&e){if(!o){for(var r in e){var i=e[r],s=i[0];s&&(Oe(this.R[s.index],O)?i[0].running||Ke.call(this,e,t,i[0]):this.pending.dependencies=s.index)}return}this.R[o.index];var l=this.routes[o.index];if(o.state="forceFetch",a.prom=o,o.hook==b&&!Oe(l,O))return void(this.pending.dependencies=o.index);Ze(o),e[o.index][0].running=!0,e[o.index].splice(0,1),ne[o.hook].call(this,o.hook,o.index).then(function(r){Ge.call(a,a.prom),o.hook==L?(l.__lp.fetchStatus=m,null!=this.pending.forceFetch&&this.pending.forceFetch==o.index&&(delete this.pending.forceFetch,Xe.call(this,this.runLoop,"current",this.runningProm.resolve))):o.hook==D?(l.currentModel=r,e[o.index][0]&&e[o.index][0].hook==L&&Ke.call(this,e,t,e[o.index][0])):e[o.index][0]&&e[o.index][0].hook==D&&Ke.call(this,e,t,e[o.index][0])}.bind(this))}else this.forceFetchRunning=!1}function Ze(e){if(Lyte.debug){var t=e.hook,o=e.index;if(-1!=[k,N].indexOf(e.hook))return void Q(t,u,X);var i="previous"==e.state?r.R[o]:a.R[o];Q(t+" of route "+i.routeName,u,X)}}function Xe(e,t,o){if(he(this)){var r=e[t];if(r&&r.length){var i=r[0],s=this.R[i.index],l=this.routes[i.index];if(i.hook==b&&!Oe(s,O))return void(this.pending.dependencies=i.index);if(i.hook==_&&!Oe(s,R))return void(this.pending.resources=i.index);if(i.hook==C&&s.forceFetch&&l.__lp.fetchStatus==h)return this.forceFetchRunning||(this.forceFetchRunning=!0,We.call(this,Ke,"nestedForcedPromises")),void(this.pending.forceFetch=i.index);i.state=t,a.prom=i,Ze(i),J(i.hook+i.index),ne[i.hook].call(this,i.hook,i.index).then(function(r){Ge.call(a,a.prom),J(i.hook+i.index),i.hook==D&&(l.currentModel=r),this.runningProm.resolve==o&&(Je(e[t],i.hook,i.index),Xe.call(this,e,t,o))}.bind(this))}else o&&o()}else this.paused&&this.runningProm&&this.runningProm.reject(y)}function Je(e,t,o){for(var a,r=0;a=e[r];r++)if(a.hook==t)if(null!=o){if(o==a.index){e.splice(r,1);break}}else e.splice(r,1),r--}function Qe(e){if(e){var t,o={},a=tt(e,"?")?e.split("?")[1]:e;return(a=tt(a,"&")?a.split(/&/g):[a]).forEach((function(e){o[(t=e.split("="))[0]]=t[1]?decodeURIComponent(t[1]):t[1]})),o}}function et(e,t){e.forEach((function(){t.shift()}))}function tt(e,t){return-1!=e.indexOf(t)}function ot(e){if(a.running){if(a==i&&(i=void 0),a.fns.forEach((function(e){clearTimeout(e)})),a.pendingResume=void 0,a.running=!1,a.state=a._trans.state=e.state,a._trans.triggerEvent(G,a.state),ie||200==a.state){var t;if(te.__lp.prevTrans=r=a,J(v),Q("Transition completed.",u),re.history&&a.info.fragment)(t=oe.getElementById(a._trans.info.fragment))&&t.scrollIntoView&&0!=te.beforeScroll(a._trans)&&t.scrollIntoView();ne.afterRouteTransition(a._trans)}else e.iAbort||s==a?(te.__lp.prevTrans=r=a,a.state&&201!=a.state&&ne.afterRouteTransition(a._trans)):(a.state&&201!=a.state&&ne.afterRouteTransition(a._trans),te.__lp.trans=a=r);ie&&(ie=!1)}else r&&(te.__lp.trans=a=r)}function at(e){return"/"==e[0]?e:"/"+e}function rt(e){return e.match(/[^/?]+/g)||[]}function it(e){return e=(e=e.replace(/\/\//g,"/")).replace(/\/\?/g,"?")}function st(){var e,t=arguments;switch(t[0]){case 400:e="url '"+t[1]+"' is not defined in router.";break;case 422:e="There is no route definition for the route "+t[1].splice(0,t[2]+1).join(".")+".";break;case 424:e="File not loaded in "+t[1]+" of route "+t[2]+".";break;case 498:e="Invalid argument "+t[1]+(t[2]?" provided in "+t[2]:".");break;case 499:e=t[1]?"Dynamic params for the route "+t[1]+" is not provided"+(t[2]&&t[2].outerHTML?" in "+t[2].outerHTML:"."):"Transition tried without arguments.";break;case 420:e=(t[3]?"Promise rejected":"Error")+" in "+t[1]+" of route "+t[2]+".";break;case 428:e="There is no outlet named "+t[1]+".";break;case 203:e="Data provided for component is not valid."}return"LR "+t[0]+": "+e}function lt(){Lyte.error(arguments[0].stack?arguments[0]:st.apply(this,arguments),arguments[3])}function nt(e,t){if(e){var o,a=[];if(re.history){var r=e.split("#");(o=r[1])&&(e=r[0])}var i=e.split("?");if("/"==(e=decodeURI(i[0]))){if(!Fe(["/"],re.routeHash))return void lt(400,e);a.push([e])}else{var s,l=i[1],n=rt(e),p=0,c=[0],d=[];d.dynamicParams=[],function e(t){for(var o in t)if(!s){var r,i=t[o];if("__lp"!=o){var l=rt(o);if(l&&!1!==(r=pt(l,n,p,i,d)))if(c.push(r),p=c[c.length-1],n.length==p){var u=Array.from(d.concat(o));if(i["/"]&&(u=u.concat("/")),a.push(u),!i.__lp.wildcard&&!i.__lp.dkey)return void(/[:*]/.test(u.join(""))||(s=u));c.pop(),p=c[c.length-1]}else{var h=Object.keys(i);if(d.push(o),n[p])if(i.__lp.wildcard&&!i.__lp.sufix.length&&1==h.length){var m=Array.from(d);i["/"]&&(m=m.concat("/")),a.push(m)}else h.length>1&&e(i);d.pop(),c.pop(),p=c[c.length-1]}}}}(re.routeHash)}if(s)return dt(t,s,e,l,o);if(1==a.length)return dt(t,a[0],e,l,o);if(a.length){return dt(t,function e(t,o,a){a=a||0;for(var r,i=i||function(e){var t=[],o=0;e.forEach((function(e){o=e.length>o?e.length:o}));for(var a,r=0;a=e[r];r++)for(var i=0;i<o;i++)t[i]=t[i]||[],t[i][r]=a[i];return t}(t),s=Math.max.apply(Math,_toConsumableArray(i[a])),l=function(e){p.push(o[e]),c.push(t[e])},n=function(e,t){null!=e[a]&&(d.push(p[t]),u.push(c[t]))};r=ct(i[a],s,o,t);){a+=1;var p=[],c=[];r.forEach(l);var d=[],u=[];return c.forEach(n),d.length?1==d.length?d[0]:e(u,d,a):p[0]}return o[i[a].indexOf(s)]}(function(e){var t=[];return e.forEach((function(e){e=Array.from(e);var o=0,a=[];"/"==e[0]&&e.shift(),"/"==e[e.length-1]&&e.pop();var r=-1;e.every((function(t,i){var s=!0;return rt(t).every((function(t,l){return r++,t==n[r]?(o++,e.length==i+1&&a.push(o),!0):-1!=t.indexOf(":")?(a.push(o),o=0,!0):(-1!=t.indexOf("*")&&(s=!1),a.push(o),!1)})),s})),t.push(a)})),t}(a),a),e,l,o)}lt(400,e)}else lt(400,"")}function pt(e,t,o,a,r){var i;if(!a.__lp.wildcard&&!a.__lp.dkey&&((i=Fe(r,re.routeHash).__lp)&&i.wildcard&&!(o+=t.slice(o).indexOf(e[0]))))return!1;for(var s,l=0;s=e[l];l++,o++)if(s!=t[o]&&!vt(s))if(xt(s))a.__lp.sufix.length&&(o=t.indexOf(a.__lp.sufix[0])-1);else{if("/"!=e[o])return!1;o--}return o}function ct(e,t,o,a){var r=[];return e.forEach((function(e,o){e==t&&r.push(o)})),1!=r.length&&r}function dt(t,o,a,r,i){var s,n,p={route:Fe(o,re.routeHash).__lp.route,queryParams:r?Qe(r):{}};if(re.history&&(p.fragment=i),p.dynamicParams=function(e,t){var o,a,r=re.routes,i=[],s=rt(e.split("?")[0]);return t.route.forEach((function(e,t,l){var n=(r=Fe([e],r)).__lp;if(n.wildcard)if(n.sufix.length){var p=s.slice(0,s.indexOf(n.sufix[0]));a=decodeURI(p.join("/")),et(p.concat(n.sufix),s)}else a=decodeURI(s.join("/"));else n.dkey?(o=s[n.dIndex],et(rt(n.path),s),a=decodeURI(o)):(et(rt(n.path),s),a=void 0);i.push(a)})),i}(a,p),t)return p;var c=ut(Dt(p));return 0!=c&&(c.matched.hasOwnProperty("refreshModel")||Te(c.matched),s=Te(n=Lyte.deepCopyObject(c.matched)),Pt(n.queryParams,p.queryParams)||(l=me({replace:!0,data:e.history.state,url:s,fromHistory:!0}))),c}function ut(e){var t=re.routes,o=[];try{e.route.every((function(a,r){var i;if(!(t=Fe([a],t))||!t.__lp||!(i=t.__lp.def))throw Error(st(422,e.route,r));i.queryParams&&(i.__lp.queryParams={},i.queryParams.forEach((function(t){i.__lp.queryParams[t]=e.queryParams[t]}))),i.__lp.dynamicParam=e.dynamicParams[r];var s=i.__lp.linkTags;return s.length&&s.forEach((function(e){"A"===e.firstChild.tagName&&e.firstChild.setAttribute("href",te.getURL(e.getMatchedObject()))})),o.push(i)}))}catch(e){return lt(e),!1}return{R:o,matched:e}}function ht(e,t,o,i){e&&e.mixins&&(Array.isArray(e.mixins)||(e.mixins=[e.mixins]),e.mixins.forEach((function(e){if(Lyte.registeredMixins[e])if(e=Lyte.registeredMixins[e],i){var s=te.getRouteInstance(o,r),l=te.getRouteInstance(o,a);s||l?function(e,t,o,a){for(var r in e)"actions"==r?(t.actions||(a.actions=o.actions=t.actions={}),o.actions=a.actions=Object.assign(t.actions,e.actions)):o[r]=a[r]=t[r]=e[r]}(e,t,s=s||{},l=l||{}):mt(e,t)}else mt(e,t);else i||Lyte.$.requiredMixins(e,o,"router")})))}function mt(e,t){for(var o in e)"actions"==o?t.actions=Object.assign(t.actions||{},e.actions):t[o]=e[o]}function yt(e,t,o){ht(o,t,e),t.__lp={options:o,objPath:e.replace(/\//g,"."),linkTags:[]};var a=re.queryParamOptions.sticky;t.queryParams&&(t.__lp.qpdef={},t.queryParams.forEach((function(o,r){if("string"==typeof o)t.__lp.qpdef[o]={sticky:a,refreshModel:!0},null==re.stickyRoutes[e]&&(re.stickyRoutes[e]=a);else if("object"==(void 0===o?"undefined":_typeof(o))){for(var i in o)t.__lp.qpdef[i]={sticky:o[i].hasOwnProperty("sticky")?o[i].sticky:a,refreshModel:!o[i].hasOwnProperty("refreshModel")||o[i].refreshModel},!re.stickyRoutes[e]&&t.__lp.qpdef[i].sticky&&(re.stickyRoutes[e]=!0);t.queryParams[r]=i}}))),e=be(e),t.routeName=e[e.length-1],function(e,t){var o=re.routes,a=e.length-1;e.forEach((function(e,r){if(a===r){var i=o[e];i&&i.__lp?i.__lp.def=t:i?i.__lp={def:t}:o[e]={__lp:{def:t}}}else o[e]||(o[e]={});o=o[e]}))}(e,t)}Ie.prototype.run=function(e){e?Ke.call(this,this.runLoop.forceFetch,this.fRunningProm.resolve,e):(ze.call(this),oe.title=this.title=this.routes[this.routes.length-1].title||oe.title)},Lyte.$.requiredMixins.router=function(e,t){t.forEach((function(t){var o=te.__lp.getDefinition(t);e&&o&&ht(o.__lp.options,o,t,!0)}))},this.registerRoute=function(e,t,o){re.routes?yt.apply({},arguments):this.__lp.pendingReg.push(arguments)};var ft=["runLoop","running","paused","R","routes",y,"prom","run",h,"matched","fns"];function gt(e){for(var t in e)-1==ft.indexOf(t)&&("info"==t?this.info=Lyte.deepCopyObject(e[t]):this[t]=e[t])}function vt(e){return tt(e,":")}function xt(e){return tt(e,"*")}function Pt(e,t){var o=Object.keys(e),a=Object.keys(t);if(o.length!=a.length)return!1;for(var r in e)if(e[r]!=t[r])return!1;return!0}function bt(e){var t;return"object"==(void 0===e?"undefined":_typeof(e))?t=e:(t={queryParams:{},dynamicParams:[]},Array.from(arguments).forEach((function(e,o){Array.isArray(e)?lt(498,JSON.stringify(e)):0==o?t.route=e:"object"==(void 0===e?"undefined":_typeof(e))?t.queryParams=e:t.dynamicParams.push(e)}))),t}function Dt(e){if(e._routes)return e;if(e.route){var t={route:Array.isArray(e.route)?e.route:be(e.route),queryParams:e.queryParams||{},dynamicParams:[],fragment:e.fragment,target:"",_routes:[]};if(e.dynamicParams)if(e.dynamicParams.length==t.route.length)t.dynamicParams=Array.from(e.dynamicParams);else var o=Array.from(e.dynamicParams);try{t.route.forEach((function(e,a){t.target=t.target?t.target+"."+e:e;var r=be(t.target);t._routes.push(r);var i=Fe(t.route.slice(0,a+1),re.routes);if(!i)throw Error(st(400,t.target));o&&t.dynamicParams.push(i.__lp.dkey?o.shift():void 0)}))}catch(e){return lt(e),!1}return t}this.tagName==z?lt(498,B,this.outerHTML):lt(499)}this.getRouteInstance=function(e,t){var o,r;if(te&&!te.init&&(o=t||te.__lp&&te.__lp.trans||a)&&o.routes)return"*"==e?o.routes:(e=e||o.target,o.routes.every((function(t,a){return(t=o.routes[o.routes.length-1-a]).__lp.objPath!=e||(r=t,!1)})),r)};var Lt,Ct=[x,P,b,D,L,C,_,S,w];function _t(e,t){for(var o in e.__lp={},t)"rendered"!=o&&(e.__lp[o]=t[o])}function St(e,t){var o=Object.assign({},e);return o.route=t.route||Array.from(e.route),o.dynamicParams=t.dynamicParams||Array.from(e.dynamicParams),o.queryParams=t.queryParams||Object.assign(e.queryParams),o}Lt=function(e,t,r,s,l){var n=l||r;for(var p in n)!l&&tt(Ct,p)||("__lp"==p?_t(this,r.__lp):this[p]=n[p]);function c(e){var t=Te(e),r=ut(e);return o={data:a.data,url:t,fromHistory:!1},Ae(t,Tt(r)),i._trans}this.parent=t[s-1],this.transition=i._trans,this.replaceWith=te.replaceWith,this.transitionTo=te.transitionTo,this.removeFromCache=function(e){Lyte.removeFromCache.assign(e)},this.refresh=function(e){var t=ut(a.matched),r=be(this.__lp.objPath).length-1,s=Array.from(a.matched.route);if(t.transComp={unRendered:s.splice(r),rendered:s},a.abort({state:308,iAbort:!0}),o={replace:!0,data:a.data,fromHistory:!1,url:a.url},Ae(a.url,t),e&&e.refreshTemplate)for(var l,n=r;l=i.routes[n];n++)delete l.component;return i._trans},this.setTitle=function(e){oe.title=this.title=e},this.getQueryParams=function(){return this.__lp.queryParams||{}},this.getDynamicParam=function(){return this.__lp.dynamicParam},this.getRouteInstance=function(e){return te.getRouteInstance(e)},this.setDynamicParam=function(e){if(e&&this.__lp.dynamicParam&&this.__lp.dynamicParam!=e){var t=Array.from(a.matched.dynamicParams);return t.splice(this.__lp.objPath.split(".").length-1,1,e),c(St(a.matched,{dynamicParams:t}))}return a._trans},this.setQueryParams=function(e,t,o){var r,i={};"object"==(void 0===e?"undefined":_typeof(e))?(i=e,o=t):i[e]=t,"object"==(void 0===o?"undefined":_typeof(o))&&(r=o.refresh),r=o;var s=St(a.matched,{queryParams:Object.assign({},a.matched.queryParams,i)});return Pt(a.matched.queryParams,s.queryParams)?a._trans:(s.refreshModel=null==s.refreshModel?r:s.refreshModel,c(s))},this.init&&this.init(),void 0!==Lyte.Component&&(this.throwEvent=Lyte.Component.throwEvent)};var wt=[x,P,b,D,L,C,_,S];function Tt(e){if(a)if(a.running){var t=e.matched,o=Me(a,t,e.R);if(102==a.state&&a.prom&&a.prom.hook==C){var r=wt.indexOf(a.prom.hook)<=5?a.prom.index:a.prom.index+1,i=Me(s,t,e.R);o.common.length<i.common.length?(a.runLoop.templateToRemove.length&&a.runLoop.templateToRemove.pop(),o.rendered.length<i.rendered.length&&(e.prevTrans=s),(o=i).redirected=a.prom):o.common.length-1>=r&&a.prom.index<=o.common.length-1&&(o.redirected=a.prom)}var l={route:t.target,queryParams:t.queryParams,dynamicParams:t.dynamicParams.filter(De)};te.checkIfSameRoute(a.info,l)&&!a.aborted?a.pause({iPause:!0}):a.abort({state:409,iAbort:!0}),e.transComp=o}else a&&!a.aborted&&a.abort({state:409,iAbort:!0});return e}return this}}(window),function(e){var t=Lyte;t.Security={_ourSanitizerInstance_:{},_userSanitizerInstance_:{},_eM:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},_eR:/[&<>"'`=]/g,_eF:function(e){return this._eM[e]},escape:function(e){return"string"!=typeof e&&(e=""+e),e.replace(this._eR,this._eF.bind(this))}};var o={GLOBAL_TAGS:[],GLOBAL_ATTRIBUTES:[],FORBID_TAGS:[],FORBID_ATTR:[]};t.Security._ourSanitizerInstance_=ZSEC.HTMLPurifier(o),t.Security._ourSanitizerInstance_._GLOBAL_TAGS=o.GLOBAL_TAGS,t.Security._ourSanitizerInstance_._GLOBAL_ATTRIBUTES=o.GLOBAL_ATTRIBUTES,o.GLOBAL_ATTRIBUTES.push("yield-name","lt-prop-route","lt-prop-dp","lt-prop-fragment","lt-prop-qp","lt-prop","lt-prop-class","lt-prop-id","lt-prop-rel","lt-prop-title","lt-prop-style","lt-prop-target","lt-prop-td","lt-prop-custom","lt-prop-target","lt-prop-id","lt-prop-class","lt-prop-style","lt-prop-rel","lt-prop-title"),o.GLOBAL_TAGS.push("link-to"),t.Security._ourSanitizerInstance_._FORBID_TAGS=o.FORBID_TAGS,t.Security._ourSanitizerInstance_._FORBID_ATTR=o.FORBID_ATTR,t.Security.createSanitizer=function(e){e.GLOBAL_ATTRIBUTES||(e.GLOBAL_ATTRIBUTES=[]),e.FORBID_TAGS||(e.FORBID_TAGS=[]),e.FORBID_ATTR||(e.FORBID_ATTR=[]),e.GLOBAL_TAGS||(e.GLOBAL_TAGS=[]),e.GLOBAL_ATTRIBUTES.push("yield-name","lt-prop-route","lt-prop-dp","lt-prop-fragment","lt-prop-qp","lt-prop","lt-prop-class","lt-prop-id","lt-prop-rel","lt-prop-title","lt-prop-style","lt-prop-target","lt-prop-td","lt-prop-custom","lt-prop-target","lt-prop-id","lt-prop-class","lt-prop-style","lt-prop-rel","lt-prop-title"),e.GLOBAL_TAGS.push("link-to");for(var o=Array.from(e.GLOBAL_TAGS),a=[],r=0;r<o.length;r++){L._registeredComponents[o[r]]?a=L._registeredComponents[o[r]].observedAttributes:Lyte.registeredCustomComponent[o[r]]&&(a=Lyte.registeredCustomComponent[o[r]].observedAttributes);for(var i=0;i<a.length;i++)-1==e.GLOBAL_ATTRIBUTES.indexOf(a[i])&&e.GLOBAL_ATTRIBUTES.push(a[i])}return t.Security._userSanitizerInstance_=ZSEC.HTMLPurifier(e),t.Security._userSanitizerInstance_._GLOBAL_TAGS=e.GLOBAL_TAGS,t.Security._userSanitizerInstance_._GLOBAL_ATTRIBUTES=e.GLOBAL_ATTRIBUTES,t.Security._userSanitizerInstance_._FORBID_TAGS=e.FORBID_TAGS,t.Security._userSanitizerInstance_._FORBID_ATTR=e.FORBID_ATTR,t.Security._userSanitizerInstance_};var a=["focus","focusin","focusout","resize","scroll","click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","change","select","submit","keydown","keypress","keyup","contextmenu"];function r(){Object.defineProperty.apply(Object,arguments)}function s(e,t){e[t]||r(e,t,{value:new Set,enumerable:!1,writable:!0,configurable:!0})}function l(e,t){e[t]||r(e,t,{value:[],enumerable:!1,writable:!0,configurable:!0})}function n(){return document.createDocumentFragment()}function p(e){return document.createElement(e)}function c(e,t,o){e.insertBefore(t,o)}function d(e,t,o){e[t].delete(o),e[t].size||delete e[t]}t.registerErrorCodes({LC001:"Error while parsing custom prop handler attribute {0}. Check if the value provided is a valid JSON",LC002:"{0} Component is not compiled. Please compile using Lyte CLI",LC003:"Helper named {0} is not defined",LC004:"Action named {0} doesn't exists",LC005:"Lyte.objectUtils doesn't support {0} function",LC006:"Lyte.arrayUtils doesn't support {0} function",LC007:"Component name not specified in Lyte.Component.render",LC008:"Specified outlet {0} doesn't exists - Lyte.Component.render",LC009:"Method named {0} doesn't exists in {1} component",LC010:"Parent Node / reference Node not provided for insertBefore method"});var u=navigator.userAgent;if(u.match(/rv:11/)&&(t._ie=!0,e.action=function(){}),u.match("Edge")){var h=p("div");h.innerHTML="<template><div>c</div></template>",h.querySelector("template").childNodes.length?t._ie=!0:t._ed=!0,h.remove()}var m=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.attributes.t||(C.frSpecial=!0),e}return _inherits(t,HTMLElement),t}();if(t._ie||t._ed){var y=n();y.appendChild(document.createTextNode("  dummy ")),y.childNodes[0].replaceWith(document.createTextNode("changed")),"changed"!==y.childNodes[0].textContent&&(t._rwpf=!0),t._ms=!0}t.Component={},Lyte.Compile={};var f=t.Component;function g(){}t.arrayUtils=function(){return C.aF.apply(C,arguments)},t.objectUtils=function(){return C.oF.apply(C,arguments)},f.register=function(){C.registerComponent.apply(C,arguments)},f.registerHelper=function(){C.registerHelper.apply(C,arguments)},f.set=function(){C.set.apply(C,arguments)},f.registeredHelpers={},f.registeredComponents={},f.registerCustomPropHandler=function(e){C.String.dasherize(e);e=C.String.toCamelCase(e),-1===C.customPropHandlers.indexOf(e)&&(C.customPropHandlers.push(e),D.prototype[e]=function(){var t=arguments.length,o=arguments[0],a=this.component.data;if(!o){var r={};for(var i in a)if(i.startsWith(e)){var s=i.substring(e.length);r[s=C.String.lowerCaseFirstLetter(s)]=a[i]}return r}if("string"==typeof o){if(!(t>1)){var l=e+C.String.upperCaseFirstLetter(o);return a[l]}this.set(e+C.String.upperCaseFirstLetter(o),arguments[1])}else if("object"===(void 0===o?"undefined":_typeof(o)))for(var n in o){var p=e+C.String.upperCaseFirstLetter(n);this.set(p,o[n])}},C.customPropRegex=new RegExp("^("+C.customPropHandlers.join("|")+")"))},f.unregisterComponent=function(e){if(f.registeredComponents[e]){var o=C._registeredComponents[e];if(o.activeInstances>0)t.warn("There are active instances of the component "+e+" and hence cannot be unregistered");else{o._properties={},o.component=o._mixins=o._actions=o._template=o._dynamicNodes=null,o._callBacks={},o._observers=[],o._data=void 0,o._methods={},o.prototype.get=g,o.prototype.set=g,delete f.registeredComponents[e];var a=document.querySelector("template[tag-name="+e+"]");a&&a.remove();var r=o._helperTemplate;r&&r.remove(),o._depthTemp&&o._depthTemp.remove()}}else t.warn("Component "+e+" not yet registered")};var v="undefined"!=typeof HTMLElement?HTMLElement:Element;function x(){t._ie||document.body.appendChild(C.lyteComponentsDiv),document.body.appendChild(C.hDiv);for(var o=a,r=0;r<o.length;r++){var i=o[r];document.body.addEventListener(i,P,!0)}var s=C.toBeRegistered;if(s.length){for(var l=0;l<s.length;l++)customElements.define(s[l].name,s[l].def);C.toBeRegistered=[]}if(/iPad|iPhone|iPod/.test(u)&&!e.MSStream){var n=p("style");n.innerHTML="* { cursor : pointer}",document.head.appendChild(n)}}t.appendTemplateDiv=function(){document.body.appendChild(C.tDiv),document.body.appendChild(C.h1Div)},document.addEventListener("change",(function(e){var t=e.target||e.srcElement;if(t._attributeDetails){var o="value";"checkbox"!==t.type&&"radio"!==t.type||(o="checked");var a=[],r=t._attributeDetails[o];if(r&&r.isLbind){var i=t;if(!t._callee){for(;i&&!C.isCustomElement(i)&&"LYTE-YIELD"!==i.tagName;){if("BODY"===i.tagName){i=null;break}i=i.parentNode}i&&"LYTE-YIELD"===i.tagName?t._callee=i._registerYield._callee:t._callee=i}var s=t._callee;t&&C.adCx(t,a);var l=C.getNew(s.component.data,r.dynamicValue);l.context&&(C.set(l.context,l.lastKey,t[o]),t&&C.rmCx(t,a))}}}));var P=function(o){var a,r=o.type,i=o.target;if(/^(click|dblclick)$/.test(r)&&i.getAttribute&&null!=i.getAttribute("lyte-state"))o.preventDefault();else{o.currentTarget!==document.body&&(i=o.currentTarget),e.event||(a=!0,e.event=o);for(var s=!1;i&&i.getAttribute&&(!i.getAttribute(r)||i.hasAttribute("disabled"))&&"BODY"!=i.tagName&&(!C.hasLyteEvents(i,r)||!(s=C.handleLyteEvents(i,o)));)i=i.parentNode;if(!s&&i){var l=i;if(!i._callee){for(;l&&!C.isCustomElement(l)&&"LYTE-YIELD"!==l.tagName;){if("BODY"===l.tagName){l=null;break}l=l.parentNode}l&&"LYTE-YIELD"===l.tagName?i._callee=l._registerYield._callee:i._callee=l===i?void 0:l}if(i._evBoundEvents&&i._evBoundEvents[r]){i._callee?i._callee.constructor._actions:i.constructor._actions;var n=i._evBoundEvents[r],p=t.deepCopyObject(n);C.skipArgProcessing(p,o,i),C.throwAction.call(i,i,r,p,void 0,void 0,i,o,void 0,!0)}else if(i.getAttribute&&i.getAttribute(r)&&i._boundEvents&&i._boundEvents[r]){i._callee.constructor._actions,i.getAttribute(r).split(" => ")[1];var c=i._boundEvents[r],d=t.deepCopyObject(c);C.skipArgProcessing(d,o,i),C.throwAction.call(i._callee,i._callee,r,d,void 0,void 0,i,o)}if("LABEL"===i.tagName){var u=i.querySelector("input");if(u&&u.getAttribute(r)){i._callee.constructor._actions,u.getAttribute(r).split(" => ")[1];var h=i._boundEvents[r],m=t.deepCopyObject(h);C.skipArgProcessing(m,o,i),C.throwAction.call(i._callee,i._callee,r,m,void 0,void 0,u,o)}}a&&(e.event=void 0)}}},b=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,HTMLElement),_createClass(t,[{key:"connectedCallback",value:function(){var e;(this._callee=this._callee||C.getCallee(this.parentNode,this),!this._registerYield&&this._callee)&&(this._callee._fR&&this._callee._fR._yieldCallee?this._registerYield={_callee:this._callee._fR._yieldCallee.component.$node}:this._callee._yields&&(e=this.attributes["yield-name"])&&(e=e.nodeValue)&&this._callee._yields[e]&&(this._registerYield={_callee:this._callee._yields[e]._callee}))}},{key:"disconnectedCallback",value:function(){if(!C.ignoreDisconnect&&!this._deleted&&(this._deleted=!0,this._properties)){var e=[];C.adCx(this,e),C.removeSelectedBindingDeep(this._properties,this.component.data);var t=this._registerYield;if(t){var o=[],a="delete";for(var r in C.adCx(t,o),this._dynamicProperty)if(this._dynamicProperty[r].isActualNode)this._dynamicProperty[r].isActualNode._helperNodes[a](this);else{var i=t._callee.getProperty(r)._helperNodes;i&&i[a](this)}this._dynamicProperty={};for(var s=0;s<this._helpers.length;s++)t._callee.removeHelpers(this._helpers[s]);this._helpers=[],C.rmCx(t,o),C.rmCx(this,e)}}}},{key:"getProperty",value:function(e){var t=e.split("."),o=this;o._properties[t[0]]||(o._properties[t[0]]={}),r(o=o._properties[t[0]],"_path",{enumerable:!1,value:t[0]});for(var a=1;a<t.length;a++)o[t[a]]||(o[t[a]]={},r(o[t[a]],"_path",{enumerable:!1,value:o._path+"."+t[a]})),o=o[t[a]];return o}}]),t}();customElements.define("lyte-yield",b);var D=function(e){function o(){_classCallCheck(this,o);var e=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));if(!f.registeredComponents[e.localName])return _possibleConstructorReturn(e);e.constructor.activeInstances++;var t,a=e.attributes._lyteprop,i=(t=a=a?a.nodeValue:void 0)?C.fRP[t]:void 0,s=e.component=i?i.component:new e.constructor.component;e._properties={},s.methods={};var l=void 0;if(!i){l=s.data={};var n=e.constructor._data?e.constructor._data():{};for(var p in n){var c=n[p];l[p]=c.default,c.watch&&/^(object|array)$/.test(c.type)&&Lyte.establishObjectBinding(l,p,!1)}l.errors={},s.__data=n,r(l,"__component__",{value:e,configurable:!0,writable:!0,enumerable:!1})}for(var d in e.constructor._methods)s.methods[d]=e.constructor._methods[d];if(s.$node)for(var u in s.$node)e[u]=s.$node[u];if(s.$node=e,i)e._fR=i,delete C.fRP[t];else for(var u in e.callback("constructor"),e._actions=e._actions?e._actions:{},e._callee=e._callee||e.getCallee(e.parentNode),l){C.handleValidation(l,u,l[u],s)&&(l[u]=void 0)}return e}return _inherits(o,e),_createClass(o,[{key:"getMethods",value:function(e){return this.component.getMethods(e)}},{key:"hasAction",value:function(e){return this.component.hasAction(e)}},{key:"setMethods",value:function(e,t){return this.component.setMethods(e,t)}},{key:"getData",value:function(e){return this.component.getData(e)}},{key:"setData",value:function(e,t){return this.component.setData(e,t)}},{key:"getCallee",value:function(e){return C.getCallee(e,this)}},{key:"afterConnected",value:function(){var e=this.constructor;if(this.getAttribute("_lyteprop"))return"";for(var t=e._observedAttributes,o=0;o<t.length;o++){var a=t[o];r(this.getProperty(a),"__fromComponent",{value:!0,enumerable:!1})}this.getProperty("errors");var i=this.component,s=i.data;if(this._initProperties){var l=this._initProperties;for(var n in l){var p=void 0,c=i.__data[n];p=!c||c.type===C.getDataType(l[n])||void 0===l[n]&&"boolean"!==c.type?l[n]:C.typeCast(l[n],i.__data[n].type),C.handleValidation(s,n,p,i)||(s[n]=p,c&&/^(object|array)$/.test(c.type)&&c.watch&&Lyte.establishObjectBinding(s,n))}this._initProperties=void 0}if(this._initMethods){var d=this._initMethods;for(var u in d)i.methods[u]=d[u];this._initMethods=void 0}this.callback("init"),this.onCallBack("init"),this.registerYields(),s.lyteUnbound&&(C.unbound=!0);var h="";return s.lyteFastRender?(h=this.renderFast(e._dynamicNodes,e._sta,i),requestAnimationFrame((function(){requestAnimationFrame((function(){C.callCC()}))}))):h=this.renderNodes(e._template,e._dynamicNodes,void 0,void 0,void 0,void 0,this.constructor._tC),h}},{key:"renderComponent",value:function(e,t){var o=e.componentName,a=e.staticAttrs,r=L._registeredComponents[o];if(!r)return"";var i=new r.component;t.component=i,i.data={};var s=r._data?r._data():{};for(var l in s)i.data[l]=s[l].default;i.data.errors={},i.__data=s;var n=L._registeredComponents[o]._observedAttributes;for(var p in t.data=t.data||{},a)-1!==n.indexOf(p)&&(t.data[p]=a[p]);var c=t.data;if(c)for(var d in c){var u=void 0;u=!i.__data[d]||i.__data[d].type===C.getDataType(c[d])||void 0===c[d]&&"boolean"!==i.__data[d].type?c[d]:C.typeCast(c[d],i.__data[d].type),C.handleValidation(i.data,d,u,i)||(i.data[d]=u)}for(var p in i.methods={},r._methods)i.methods[p]=r._methods[p];i.$node={querySelector:g,localName:o},i.init&&i.init.apply(i);var h=void 0;if(r._callBacks&&(h=r._callBacks.init))for(var m=0;m<h.length;m++)h[m].value.apply(i);return t.unbound=!0,delete i.$node.querySelector,this.renderFast(L._registeredComponents[o]._dynamicNodes,L._registeredComponents[o]._sta,i,t)}},{key:"renderFast",value:function(e,o,a,r){var i,s,l=this;a&&(s=this.component,this.component=a);for(var n=this.component.data,p="",c=o,d=o.cc,u=0;u<d.length;u++)if(null!=d[u]){var h=d[u],m=e[h];if(m.dynamicValue){var y=C.getDD(n,m.newDynamicValue);y=null==y||null==y?"":y,p+=Lyte.Security.escape(y)}else if(m.helperInfo){C.ffr=!0;var g=this.processHelper({name:m.helperInfo.name,args:this.processArgs(this,m,[],void 0,void 0,!0)},void 0);C.ffr=!1,g=null==g||null==g?"":g,p+="unescape"===m.helperInfo.name?g:Lyte.Security.escape(g)}else if(m.type)switch(m.type){case"for":var v,x=e[h-1].attr.items;x.dynamicValue?v=C.getDD(n,x.newDynamicValue):x.helperInfo&&(v=this.processHelper({name:x.helperInfo.name,args:this.processArgs(this,x,[],void 0,void 0,!0)},void 0));var P=m._args.item||"item",b=m._args.index||"index",D="";if(v&&v.length){for(var L=n[P],_=n[b],S=0;S<v.length;S++){var w=v[S];n[P]=w,n[b]=S,D+=this.renderFast(m.dynamicNodes,m._sta,void 0,r)}n[P]=L,n[b]=_}p+=D;break;case"forIn":var T,E=e[h-1].attr.object;E.dynamicValue?T=C.getDD(n,E.newDynamicValue):E.helperInfo&&(T=this.processHelper({name:E.helperInfo.name,args:this.processArgs(this,E,[],void 0,void 0,!0)},void 0));var A=m._args.value||"value",M=m._args.key||"key",N="",k=void 0;if(T&&(k=Object.keys(T))){for(var F=n[A],I=n[M],R=0;R<k.length;R++){var O=k[R];n[A]=T[O],n[M]=O,N+=this.renderFast(m.dynamicNodes,m._sta,void 0,r)}n[P]=F,n[b]=I}p+=N;break;case"if":case"switch":var $,B,q=e[h-1].attr.value;if(q.dynamicValue?$=C.getDD(n,q.newDynamicValue):q.helperInfo&&($=this.processHelper({name:q.helperInfo.name,args:this.processArgs(this,q,[],void 0,void 0,!0)},void 0)),$)B="if"===m.type?"true":$.toString();else if("if"===m.type)B="false";else switch($){case void 0:B="undefined";break;case null:B="null";break;case!1:B="false";break;case"":B='""'}var V=m.cases[B];if(V)for(;V&&(p+=this.renderFast(V.dynamicNodes,V._sta,void 0,r),V.additional);)V=V.additional.next?m.cases[V.additional.next]:m.default;else(V=m.default)&&V._sta&&(p+=this.renderFast(V.dynamicNodes,V._sta,void 0,r));break;case"attr":for(var U=void 0,H=void 0,Y=e.length,j=h+1;j<Y;j++){var W=e[j];if("registerYield"!==W.type&&"componentDynamic"!==W.type&&"insertYield"!==W.type&&"component"!==W.type)break;if(("componentDynamic"===e[j].type||"insertYield"===e[j].type||"component"===e[j].type)&&e[j].position.toString()==e[h].position.toString()){if("componentDynamic"!=e[j].type){U=e[j];break}if(f.registeredComponents[e[j].componentName]){U=e[j];break}}}var z=void 0;U&&(z="component"!==U.type,i=C.fRC++,H=C.fRP[i]={data:{}}),U&&"component"===U.type||(p=p.substring(0,p.length-11));var G=m.attr,K={};for(var Z in G)if(G[Z].dynamicValue){var X=G[Z].newDynamicValue?C.getDD(n,G[Z].newDynamicValue):this.get(G[Z].dynamicValue);H?(H.data[G[Z].camelCase]=X,"string"==typeof X&&z&&(p=p+(X=this.formatValue(Z,X))+" ")):p=p+(X=this.formatValue(Z,X))+" "}else if(G[Z].helperInfo)if("action"===G[Z].helperInfo.name){var J=G[Z].helperInfo.args[0],Q=void 0;J.startsWith('"')||J.startsWith("'")?Q=J.substring(1,J.length-1):(t.warn("Deprecation warning. Action name "+J+" must be in quotes"),Q=J);var ee=this.processArgs(this,G[Z],[],"__lyteEvent__","__lyteNode__");K[G[Z].globalEvent||-1!==G[Z].name.indexOf("-")?G[Z].name:G[Z].name.substr(2)]={name:Q,args:G[Z].helperInfo.args,actArgs:ee,globalEvent:!!G[Z].globalEvent,skipArgProcessing:!0}}else if("method"===G[Z].helperInfo.name){var te;r?r.methods:this.component.methods;if(H)!function(){var e=H.methods=H.methods||{},t=r?r.component:l.component,o=l.processArgs(l,G[Z],[],"__lyteEvent__","__lyteNode__");te=function(){this.$node;var e=o.slice(1),a=o[0],r=Array.from(arguments),i=e.concat(r);return t.methods[a].apply(t,i)},e[G[Z].camelCase]=te}()}else{var oe=this.processHelper({name:G[Z].helperInfo.name,args:this.processArgs(this,G[Z],[],void 0,void 0,!0)},void 0);H?(H.data[G[Z].camelCase]=oe,"string"==typeof oe&&z&&(p=p+(oe=this.formatValue(Z,oe))+" ")):p=p+(oe=this.formatValue(Z,oe))+" "}if(Object.keys(K).length){var ae=C.fRC++;p=p+"lyteaction="+ae+" ",C.fRP[ae]=K,K.componentName=this.component.$node.localName||"undefined"}H&&"component"!==U.type&&"insertYield"!==U.type&&(p=p+"_lyteprop="+i+" "),m.attrHandling||(c[u+1]=c[u+1].substr(1),m.attrHandling=!0);break;case"insertYield":var re=void 0!==i?C.fRP[i]:void 0;re&&delete C.fRP[i],i=void 0;var ie=void 0,se=m.yieldName||re.data.yieldName;re&&delete re.data.yieldName;var le=void 0;if(r&&r.yields)ie=r.yields[se],le=r._yieldCallee;else{if(!(ie=this._yields[se]))break;le=ie._callee}if(ie){var ne=void 0,pe=void 0;le instanceof HTMLElement?ne=le:(ne=this,pe=this.component,this.component=le.component);var ce={},de=[];if(ie._cx&&C.adCx(ie,de),re)for(var Z in re.data)ce[Z]=ne.component.data[Z],ne.component.data[Z]=re.data[Z];for(var ue in p+=ne.renderFast(ie.dynamicNodes||ie._dynamicNodes,ie._sta,ne.component,le),ce)ne.component.data[ue]=ce[ue];ie._cx&&C.rmCx(ie,de),pe&&(ne.component=pe)}break;case"component":if(void 0!==i){var he=C.fRP[i],me=he.data.componentName;me&&(f.registeredComponents[me]?(p=p+"<"+me+" _lyteprop="+i+">",i=void 0,p=(p+=this.renderComponent({componentName:me},he,n))+"</"+me+">"):p+="component not registered")}break;case"componentDynamic":var ye=void 0!==i?C.fRP[i]:{};i=void 0,p+=this.renderComponent(m,ye,n);break;case"registerYield":var fe=void 0;void 0!==i?fe=C.fRP[i]:(i=C.fRC++,fe=C.fRP[i]={}),fe.yields=fe.yields||{},fe.yields[m._args["yield-name"]]=m,fe._yieldCallee||(fe._yieldCallee=r||{component:this.component})}else p+=c[u]}else p+=c[u];return a&&(this.component=s),p}},{key:"formatValue",value:function(e,t){var o=void 0===t?"undefined":_typeof(t);""===t&&(o="undefined");var a=void 0,r="src"==e||"href"==e;switch(o){case"boolean":return t?e:"";case"object":return a=void 0!==Record&&t instanceof Record?JSON.stringify(t.$.toJSON()):JSON.stringify(t),e+'="'+(r?a:Lyte.Security.escape(a))+'"';case"undefined":return e;default:return e+'="'+(r?t:Lyte.Security.escape(t))+'"'}}},{key:"renderNodes",value:function(e,o,a,i,s,l,n){i=i||{};var d=void 0,u=this.constructor,h=!1;t._ms||!e?(h=!0,d=C.getContentForIE(n,u)):e.hasAttribute("depth")?(h=!0,d=C.getContentForIE(e,u)):d=e.content.cloneNode(!0,"lyte");for(var m=[],y=[],f=void 0,g=0;g<o.length;g++){var v=o[g],x=v.type,P=d;if(P=S(P,v.position),o._cache||(o._cache={}),"componentDynamic"===x)i.node?P._cx=i:a&&(P._cx=a._cx);else if("text"===x)this.bindNode(P,void 0,a,i,o[g],y,s,void 0,o._cache);else if("attr"===x){if(P._attributeDetails=v.attr,"LYTE-YIELD"===P.nodeName){P._callee=this,P.component={},P.component.data={},r(P.component.data,"__component__",{value:P,configurable:!0,writable:!0,enumerable:!1}),P._properties={};for(var b=0;b<P.attributes.length;b++){var D=P.attributes[b];"is"!==D.nodeName&&"yield-name"!==D.nodeName&&(P._properties[C.String.toCamelCase(D.nodeName)]={})}}var L=[];for(var _ in v.attr){var w=v.attr[_];w._depthTemp=v._depthTemp;var T=_;if(w&&(w.dynamicValue||w.helperInfo)){i.node?P._cx=i:a&&(P._cx=a._cx);var E=void 0,A=void 0;if(w.helperInfo&&"action"===w.helperInfo.name){P._boundEvents=P._boundEvents||{},A=(E=w.helperInfo.args[0]).startsWith('"')||E.startsWith("'")?E.substring(1,E.length-1):E;var M=w.globalEvent||-1!==T.indexOf("-")?T:T.substr(2);P._boundEvents[M]={name:A,args:w.helperInfo.args}}if(!w.globalEvent){P.hasAttribute(T)||P.setAttribute(T,"{{dummy}}");var N=this.bindNode(P.attributes.getNamedItem(T),L,a,i,w,void 0,s,void 0,o._cache);N!==P.attributes.getNamedItem(T)&&(P._removedAttributes=P._removedAttributes||{},P._removedAttributes[T]=N)}}}v.attr&&Object.keys(v.attr).length&&(P._callee=this);for(var k=0;k<L.length;k++)P.removeAttribute(L[k])}else if(/^(for|forIn|component)$/.test(x)){i.node?P._cx=i:a&&(P._cx=a._cx),P._dynamicNodes=v.dynamicNodes,t._ms&&(P._tC=v.templateContent),v.actualTemplate&&(P._tC=v.actualTemplate);var F=void 0;switch(x){case"for":P._ht=v._ht,F=this.updateForHelper(P,{type:"default"},i.node?i:void 0,s,v._sta);break;case"forIn":P._ht=v._ht,F=this.updateForInHelper(P,{type:"default"},i.node?i:void 0,s);break;case"component":F=this.updateDynamicComponent(P,!1,i.node?i:void 0,s)}F&&m.push(F)}else if(/^(if|switch)$/.test(x)){P._cases=v.cases,P._default=v.default,P._ht=v._ht,i.node?P._cx=i:a&&(P._cx=a._cx),v.actualTemplate&&(P._tC=v.actualTemplate,P._origTemplate||(t._ie?P._origTemplate=p("template"):P._origTemplate=v._depthTemp.cloneNode(!0),P.hasAttribute("value")&&P._origTemplate.setAttribute("value",P.getAttribute("value"))));var I=this.updateSwitchHelper(x,P,i.node?i:void 0,void 0,s);if(I){if(m.push(I),I.toAppendMain.querySelector("template[is=break]")){P._isStopped="break",d=Lyte.Compile.getTrimmedContent(d,v.position,void 0),f=v.position;break}if(I.toAppendMain.querySelector("template[is=continue]")){P._isStopped="continue",d=Lyte.Compile.getTrimmedContent(d,v.position,void 0);break}}}else"registerYield"===x?(P._dynamicNodes=v.dynamicNodes,P._sta=v._sta,P._ht=v._ht,t._ms&&(P._tC=v.templateContent),i.node?P._cx=i:a&&(P._cx=a._cx),P._callee=this):"insertYield"===x&&(i.node?P._cx=i:a&&(P._cx=a._cx),P.component=P.component||{data:{}},P._properties=P._properties||{},this.updateYield(P,!1,i.node?i:void 0))}o._cache=void 0;for(var R=0;R<y.length;R++){var O=y[R].dynamicPositions,$=O.initialNode,B=O.dynamicNodeValue,q=B.childNodes.length;q||(B.appendChild(document.createTextNode("")),q=1);var V=B.childNodes[0];if(t._rwpf&&"#document-fragment"===$.parentNode.nodeName){for(;B.childNodes.length;)c($.parentNode,B.childNodes[0],$);$.remove()}else $.replaceWith.apply($,B.childNodes);y[R].dynamicPositions={startingNode:V,length:q}}return f&&((l=l||{}).stop=!0),a?i.type?(a._helpers[i.itemIndex]=m,h&&(d=u.createDocFragment1(d)),d):(a._helpers=a._helpers||[],a._helpers.push.apply(a._helpers,m),h&&(d=u.createDocFragment1(d)),d):(this.executeBlockHelpers(m),h&&(d=u.createDocFragment1(d)),d)}},{key:"executeBlockHelpers",value:function(e,t){for(var o=0;o<e.length;o++){var a=e[o].lastNode,r=a.parentNode;a._placeHolder&&(r=(a=a._placeHolder).parentNode),c(r,e[o].toAppendMain,a),e[o]=e[o].lastNode}}},{key:"updateBlockHelpers",value:function(e,t){for(var o=0;o<e.length;o++)switch(e[o].getAttribute("is")){case"for":this.updateForHelper(e[o],{type:"default"},t);break;case"if":this.updateSwitchHelper("if",e[o],t);break;case"forIn":this.updateForInHelper(e[o],{type:"default"},t);break;case"switch":this.updateSwitchHelper("switch",e[o],t);break;case"component":this.updateDynamicComponent(e[o],!1,t);break;case"insertYield":break;case"yield":case"registerYield":t&&(e[o]._cx=t);break;default:"LYTE-YIELD"===e[o].tagName&&this.updateYield(e[o],!1,t)}}},{key:"attributeChangedCallback",value:function(e,o,a){var r=this.constructor;if(!(r._observedMethodAttributes&&r._observedMethodAttributes[e]||this.__lyteIgnore)){var i=C.String.toCamelCase(e),s=C.customPropHandlers.indexOf(i);if(-1===s){if(o!==a){var l=this.attributes.getNamedItem(e);if(l){if(l.__lyteIgnore)return void(this.attributes.getNamedItem(e).__lyteIgnore=!1)}else if(this["__"+e])return void(this["__"+e]=!1);var n=this.component,p=n.__data[i].type;if("string"!==p){var c={attr:e,tagName:this.tagName};if(a=C.typeCast(a,p,c),c.isError)return void t.warn("data type of the value provided for attribute "+e+" of "+this.tagName+" is not valid")}var d=n.data;d[i]!==a?this.set(i,null===a?void 0:a):C.clearError(d,i)}}else{var u=C.customPropHandlers[s],h=a;if(h)try{for(var m in h=JSON.parse(h)){var y=u+C.String.upperCaseFirstLetter(m);this.set(y,h[m])}}catch(o){t.error("LC001",e)}}}}},{key:"removeHelpersSpecificIndex",value:function(e,t){if(e._helpers[t])for(var o=0;o<e._helpers[t].length;o++)this.removeHelpers(e._helpers[t][o]);if(e._forContent[t]){for(var a=0;a<e._forContent[t].length;a++)e._forContent[t][a].remove();var r=this;Object.keys(e._items[t]._dynamicProperty).forEach((function(t){if(e._dynProps[t]--,!e._dynProps[t]){var o=r.getProperty(t);o._helperNodes&&o._helperNodes.delete(e)}})),e._items[t]={_dynamicProperty:{},itemProperty:{},indexProperty:{}}}}},{key:"removeHelpers",value:function(e,t,o){if(!o){e.remove();var a="component"===e.getAttribute("is")?this.__dc:this.__h,r=a.indexOf(e);-1!=r&&a.splice(r,1)}var i="delete",s=[];if(C.adCx(e,s),e._forContent)if("for"===e.getAttribute("is")){if(e._helpers)for(var l=0;l<e._helpers.length;l++){for(var n=0;n<e._helpers[l].length;n++)this.removeHelpers(e._helpers[l][n]);e._helpers[l]=[]}for(var p=0;p<e._forContent.length;p++)for(var c=0;c<e._forContent[p].length;c++)e._forContent[p][c].remove();var d=e.getAttribute("item");if(e._items.length){for(var u=e._items[0].itemProperty,h=0;h<e._items.length;h++){var m=e._items[h]._dynamicProperty;for(var y in m){var f=this.getProperty(y);f._helperNodes&&f._helperNodes[i](e)}}if(u)for(var g=0;g<e._items.length;g++)this.removeBindings(_defineProperty({},d,e._items[g].itemProperty),_defineProperty({},d,e._attributes.items[g]))}t||e._actualBinding&&(e._attributes.items&&e._attributes.items._bindings&&e._actualBinding._createdBinding&&e._attributes.items._bindings[i](e._actualBinding),e._actualBinding._forHelpers&&e._actualBinding._forHelpers[i](e),e._removedAttributes&&e._removedAttributes.items&&!e._removedAttributes.items.helperValue&&e._removedAttributes.items._multipleProperty&&e._removedAttributes.items._multipleProperty[0].actProp._forHelpers&&e._removedAttributes.items._multipleProperty[0].actProp._forHelpers[i](e)),e._items=[]}else{if(e._helpers)for(var v=Object.keys(e._helpers),x=0;x<v.length;x++){for(var P=0;P<e._helpers[v[x]].length;P++)this.removeHelpers(e._helpers[v[x]][P]);e._helpers[v[x]]=[]}for(var b in e._forContent)for(var D=0;D<e._forContent[b].length;D++)e._forContent[b][D].remove();var L=e._items,_=e.getAttribute("key");for(var S in L){var w=L[S],T=w.itemProperty,E=w._dynamicProperty;for(var A in E){var M=this.getProperty(A);M._helperNodes&&M._helperNodes[i](e)}T&&this.removeBindings(_defineProperty({},_,e._items[S].itemProperty),_defineProperty({},_,e._attributes.object[S]))}t||(e._actualBinding&&(e._attributes.object&&e._attributes.object._bindings&&e._actualBinding._createdBinding&&e._attributes.object._bindings[i](e._actualBinding),e._actualBinding._forHelpers&&e._actualBinding._forHelpers[i](e)),e._removedAttributes.items&&!e._removedAttributes.items.helperValue&&e._removedAttributes.items._multipleProperty&&e._removedAttributes.items._multipleProperty[0].actProp._forHelpers[i](e),e._propBindingObject&&e._attributes.object&&e._attributes.object._bindings&&e._attributes.object._bindings[i](e._propBindingObject)),e._items={}}else if(e._caseContent||e._yieldContent){if(e._helpers){for(var N=0;N<e._helpers.length;N++)this.removeHelpers(e._helpers[N]);e._helpers=[]}if(e._caseContent){for(var k=0;k<e._caseContent.length;k++)e._caseContent[k].remove();for(var F in e._dynamicProperty)if(e._dynamicProperty[F].isActualNode)e._dynamicProperty[F].isActualNode._helperNodes[i](e);else{var I=this.getProperty(F)._helperNodes;I&&I[i](e)}e._dynamicProperty={}}else{for(var R=0;R<e._yieldContent.length;R++)e._yieldContent[R].remove();e._dynamicProperty={}}}else if(e._renderedComponent)for(var O in e._renderedComponent)e._renderedComponent[O]&&(e._renderedComponent[O].remove(),e._renderedComponent[O]=null);C.rmCx(e,s)}},{key:"updateYield",value:function(e,o,a){var r=this.constructor;e._callee||(e._callee=this);var i=e._callee._yields[e.getAttribute("yield-name")];if(i){e._registerYield=i;var s=i._callee||e._callee._callee;if(s){i._callee||(i._callee=s),e._dynamicProperty=e._dynamicProperty||{};var l={},n=[];C.adCx(i,n),Object.keys(e._properties).forEach((function(t){l[t]={},l[t].value=s.component.data[t],l[t].property=s._properties[t],s._properties[t]=e._properties[t],s.component.data[t]=e.component.data[t]})),t._ms||!i._ht||i._htA||(i._htA=!0,i.content.append(i._ht.content.cloneNode(!0)));var c=s.renderNodes(i,i._dynamicNodes||[],e,{node:e},!0,void 0,i._tC);e.component.data.lyteUnbound||C.establishBindings(e._properties,e.component.data),s.executeBlockHelpers(e._helpers),Object.keys(e._properties).forEach((function(e){s.component.data[e]=l[e].value,s._properties[e]=l[e].property})),C.rmCx(i,n),e.appendChild(c)}else{if(t._ms){var d=p("div");d.innerHTML=i.outerHTML,t._ie&&(d.firstChild.innerHTML=i.innerHTML);var u=d.childNodes[0];r.splitTextNodes(u),u=r.createDocFragment1(u),e.appendChild(u)}else e.appendChild(i.content.cloneNode(!0,"lyte"));e._helpers=[]}}}},{key:"updateDynamicComponent",value:function(e,t,o,a){var r=void 0;e._callee=this;var i=e.hasAttribute("lyte-keep-alive");e._renderedComponent||(e._renderedComponent={},this.__dc.push(e)),e._cx=o||e._cx,e._dynamicProperty=e._dynamicProperty||{};var s=e.getAttribute("component-name")||(e._attributes?e._attributes["component-name"]:void 0);if(s){var l=void 0,n=!1;if(t){if(i&&(C.ignoreDisconnect=!0),e._renderedComponent[e._currentComponent]){var d=e._renderedComponent[e._currentComponent];i?C.hDiv.appendChild(d):d.remove()}C.ignoreDisconnect=!1,i||(e._dynamicProperty={}),e._renderedComponent[s]&&i?l=e._renderedComponent[s]:(l=p(s),n=!0)}else l=p(s),n=!0;if(!i&&e._currentComponent&&(e._renderedComponent[e._currentComponent]=null),n){for(var u=0;u<e.attributes.length;u++)"is"!==e.attributes[u].name&&"component-name"!==e.attributes[u].name&&"lyte-keep-alive"!==e.attributes[u].name&&l.setAttribute(e.attributes[u].name,e.attributes[u].value);if(e._attributes)for(var h in e._attributes)"component-name"!==h&&l.setData(C.String.toCamelCase(h),e._attributes[h]);var m=this.renderNodes(e,e._dynamicNodes,e,void 0,a,void 0,e._tC);l.appendChild(m)}return n&&(l._toRegEvnts=e._toRegEvnts),t?(C.ignoreDisconnect=!0,c(e.parentNode,l,e),C.ignoreDisconnect=!1):r={toAppendMain:l,lastNode:e},e._renderedComponent[s]=l,e._currentComponent=s,l._callee=this,l._actions=e._actions,l.setMethods(e._initMethods),l._attributeDetails=e._attributeDetails,l._boundEvents=e._boundEvents,l._cx=e._cx,r}}},{key:"updateForHelper",value:function(e,o,a,r,i){if("TEMPLATE"!==e.tagName){if(Object.keys(e).forEach((function(t){"innerHTML"!==t&&"innerText"!==t&&(e._origTemplate[t]=e[t])})),t._ie){var s=p("div");s.innerHTML=e._tC,e._origTemplate.innerHTML=s.children[0].innerHTML,this.constructor.splitTextNodes(e._origTemplate),e.hasAttribute("depth")&&e._origTemplate.setAttribute("depth",e.getAttribute("depth"))}var l=e._origTemplate._placeHolder=document.createTextNode("");e._origTemplate.setAttribute("item",e.getAttribute("item")),e._origTemplate.setAttribute("index",e.getAttribute("index")),e.hasAttribute("unbound")&&e._origTemplate.setAttribute("unbound","true"),C.replaceWithPf(e,e._origTemplate._placeHolder),(e=e._origTemplate).setAttribute("is","for"),C.apdNode(e,this),l._helper=e}else if(!e._placeHolder){var d=document.createTextNode("");C.replaceWithPf(e,d),e._placeHolder=d,d._helper=e,C.apdNode(e,this)}e._sta=e._sta||i;var u=this;if(e._callee=this,e._attributes=e._attributes||{},"update"===o.type&&e._currentItems===e._attributes.items)return{};e._cx=a||e._cx;var h=e.getAttribute("index");h||(e.setAttribute("index","index"),h="index");var m=e.getAttribute("item");m||(e.setAttribute("item","item"),m="item");var y=u.component.data[m],f=u.component.data[h],g=u._properties[m],v=u._properties[h];u._properties[m]=u._properties[h]={};var x=e._attributes.items,P=(e.content,e._dynamicNodes),b=e;e._items||(e._items=[]),e._dynProps=e._dynProps||{};var D=void 0,L=void 0,_=o.firstIndex,S=o.secondIndex,w=o.thirdIndex,T=_+S;if(o)switch(o.type){case"remove":D=_;for(var E=_,A=S;A>0;A--,E++)this.removeHelpersSpecificIndex(e,E);for(var M=_+S;M<e._items.length;M++)e._items[M]._cx.itemIndex=e._items[M]._cx.itemIndex-S;e._items.splice(_,S),e._helpers.splice(_,S),e._forContent.splice(_,S);break;case"insert":L=_,D=S,e._forContent[_]&&(b=e._forContent[_][0]);for(var N=[],k=[],F=[],I=S,R=_;I>0;I--,R++)N.push([]),k.push({}),F.push([]);e._helpers.splice.apply(e._helpers,[_,0].concat(N)),e._items.splice.apply(e._items,[_,0].concat(k));for(var O=_+S;O<e._items.length;O++)e._items[O]._cx.itemIndex=e._items[O]._cx.itemIndex+S;e._forContent.splice.apply(e._forContent,[_,0].concat(F));break;case"replace":L=_,D=S,this.removeHelpersSpecificIndex(e,_);n();e._forContent[_+1]&&(b=e._forContent[_+1][0]);for(var $=[],B=[],q=[],V=S,U=_;V>0;V--,U++)$.push([]),q.push([]),B.push({});e._helpers.splice.apply(e._helpers,[_,1].concat($)),e._items.splice.apply(e._items,[_,1].concat(B));for(var H=_+S;H<e._items.length;H++)e._items[H]._cx.itemIndex=e._items[H]._cx.itemIndex+S-1;e._forContent.splice.apply(e._forContent,[_,1].concat(q));break;case"splice":L=_,D=S;for(var Y=w,j=0;Y>0;Y--,j++)this.removeHelpersSpecificIndex(e,_+j);n();e._forContent[_+w]&&(b=e._forContent[_+w][0]);for(var W=[],z=[],G=[],K=S,Z=_;K>0;K--,Z++)W.push([]),G.push([]),z.push({});e._helpers.splice.apply(e._helpers,[_,w].concat(W)),e._items.splice.apply(e._items,[_,w].concat(z));for(var X=_+S;X<e._items.length;X++)e._items[X]._cx.itemIndex=e._items[X]._cx.itemIndex+S-w;e._forContent.splice.apply(e._forContent,[_,w].concat(G));break;case"update":e.getAttribute("item");for(var J=0;J<e._items.length;J++)this.removeHelpersSpecificIndex(e,J);e._items=[];case"default":e._forContent=[],e._helpers=[],L=0,D=x?x.length:0;break;default:t.error("Error in updateForHelper")}b||(b=e),b!=e&&e._helpers.length>0&&(o.type,1)&&(b=C.findLastNodeL(b,T,e));var Q=void 0,ee=!1,te=C.unbound;if((e.hasAttribute("unbound")||e._attributes&&e._attributes.unbound&&"false"!==e._attributes.unbound)&&(ee=!0,C.unbound=!0),!e._fRender&&("lyteFastRender"==e.getAttribute("unbound")||e._attributes&&"lyteFastRender"==e._attributes.unbound)&&(e._fRender=!0),e._currentItems=x,!t._ms&&D-L>0&&e._ht&&!e._htA&&(e.content.append(e._ht.content.cloneNode(!0)),e._htA=!0),"remove"!==o.type){for(var oe="",ae=[],re=n(),ie=L,se=D;se>0;ie++,se--){e._helpers[ie]=[],e._items[ie]={_dynamicProperty:{},itemProperty:{},indexProperty:{}},u.component.data[m]=x[ie],u.component.data[h]=ie;var le={};le[m]={},le[m]._data=x[ie],le[m]._dyn=[m],le[h]={},le[h]._data=ie,le[h]._dyn=[h],u._properties[m]={},u._properties[h]={};var ne={itemValue:m,itemIndex:ie,type:"for",node:e,indexValue:h};e._items[ie]._cx=ne;var pe={},ce=void 0;if(e._fRender)oe+=this.renderFast(P,e._sta,this.component);else P._cache=le,ce=this.renderNodes(e.hasAttribute("depth")?e._depthTemp:e,P,e,ne,r,pe,e._tC);for(var de=Object.keys(e._items[ie]._dynamicProperty),ue=0;ue<de.length;ue++){var he=de[ue];e._dynProps[he]?e._dynProps[he]++:e._dynProps[he]=1}if(e._items[ie].itemProperty=this.getProperty(m),e._items[ie].indexProperty=this.getProperty(h),C.unbound||C.establishBindings(_defineProperty({},m,e._items[ie].itemProperty),_defineProperty({},m,e._attributes.items[ie])),e._fRender?ae.push(e._forContent[ie]=[]):e._forContent[ie]=Array.from(ce.childNodes),this.executeBlockHelpers(e._helpers[ie],e),e._fRender||re.appendChild(ce),pe.stop)break}if(e._fRender){var me,ye=document.createElement("template");if(ye.innerHTML=oe,re.appendChild(ye.content),C.processAction(re),t._ie){me=[];for(var fe=re.childNodes,ge=0;ge<fe.length;ge++)1==fe[ge].nodeType&&me.push(fe[ge])}else me=re.children;for(ge=0;ge<ae.length;ge++)ae[ge].push(me[ge]);requestAnimationFrame((function(){requestAnimationFrame((function(){C.callCC()}))}))}C.unbound=te,"default"===o.type?Q={toAppendMain:re,lastNode:b}:b._placeHolder?c(b._placeHolder.parentNode,re,b._placeHolder):c(b.parentNode,re,b),!ee&&e._removedAttributes&&e._removedAttributes.items&&!e._removedAttributes.items.helperValue&&e._removedAttributes.items._multipleProperty&&C.establishBindings({items:e._removedAttributes.items._multipleProperty[0].actProp},{items:x})}C.unbound=te;for(var ve=D;ve<e._items.length;ve++)e._items[ve].indexProperty&&C.affectChanges(e._items[ve].indexProperty);return u.component.data[m]=y,u.component.data[h]=f,u._properties[m]=g,u._properties[h]=v,e._currentItems=x,Q}},{key:"updateForInHelper",value:function(e,o,a,r){if("TEMPLATE"!==e.tagName){if(Object.keys(e).forEach((function(t){"innerHTML"!==t&&"innerText"!==t&&(e._origTemplate[t]=e[t])})),t._ie){var i=p("div");i.innerHTML=e._tC,e._origTemplate.innerHTML=i.children[0].innerHTML,this.constructor.splitTextNodes(e._origTemplate),e.hasAttribute("depth")&&e._origTemplate.setAttribute("depth",e.getAttribute("depth"))}var l=e._origTemplate._placeHolder=document.createTextNode("");e._origTemplate.setAttribute("key",e.getAttribute("key")),e._origTemplate.setAttribute("value",e.getAttribute("value")),e.hasAttribute("unbound")&&e._origTemplate.setAttribute("unbound","true"),C.replaceWithPf(e,e._origTemplate._placeHolder),(e=e._origTemplate).setAttribute("is","forIn"),C.apdNode(e,this),l._helper=e}else if(!e._placeHolder){var d=document.createTextNode("");C.replaceWithPf(e,d),e._placeHolder=d,C.apdNode(e,this),d._helper=e}var u=this;if(e._callee=this,e._attributes=e._attributes||{},"update"===o.type&&e._currentObject===e._attributes.object)return{};a=a||e._cx,e._cx=a;var h=e.getAttribute("key");h||(h="key",e.setAttribute("key","key"));var m=e.getAttribute("value");m||(m="value",e.setAttribute("value","value"));var y=u.component.data[h],f=u.component.data[m],g=u._properties[h],v=u._properties[m];u._properties[h]=u._properties[m]={};var x=e._attributes.object,P=(e.content,e._dynamicNodes),b=e,D=[];if(e._items||(e._items={}),e._dynProps=e._dynProps||{},o)switch(o.type){case"delete":this.removeHelpersSpecificIndex(e,o.property);var L=e._keysArray.indexOf(o.property);L>-1&&e._keysArray.splice(L,1),e._helpers&&delete e._helpers[o.property],delete e._propBindingObject[o.property];break;case"add":D=[o.property],e._keysArray.push(o.property);break;case"update":e._keysArray.forEach((function(t,o,a){this.removeHelpersSpecificIndex(e,t)}),this),e._keysArray=D=x?Object.keys(x):[],e._helpers={},e._items={},e._propBindingObject={};break;case"default":e._forContent={},e._helpers={},e._keysArray=D=x?Object.keys(x):[];break;default:t.error("Error in updateForHelper")}var _=void 0;if(!x){var S=n();"default"!==o.type?c(b.parentNode,S,b):_={toAppendMain:S,lastNode:b}}var w=C.unbound;if((e.hasAttribute("unbound")||e._attributes&&e._attributes.unbound)&&(!0,C.unbound=!0),e._currentObject=x,!t._ms&&D.length&&e._ht&&!e._htA&&(e.content.append(e._ht.content.cloneNode(!0)),e._htA=!0),x&&"remove"!==o.type){var T=n();e._propBindingObject=e._propBindingObject||{},D.forEach((function(t,o,a){e._helpers[t]=[],e._items[t]={_dynamicProperty:{},itemProperty:{}},u.component.data[h]=t,u.component.data[m]=x[t],u._properties[h]={},u._properties[m]={};var i={};i[h]={},i[h]._data=t,i[h]._dyn=[h],i[m]={},i[m]._data=x[t],i[m]._dyn=[m];var s={itemIndex:t,itemValue:m,keyValue:h,type:"forIn",node:e};e._items[t]._cx=s,P._cache=i;var l=this.renderNodes(e.hasAttribute("depth")?e._depthTemp:e,P,e,s,r,void 0,e._tC);Object.keys(e._items[t]._dynamicProperty).forEach((function(t){e._dynProps[t]?e._dynProps[t]++:e._dynProps[t]=1})),e._items[t].itemProperty=this.getProperty(m),e._propBindingObject[t]=e._items[t].itemProperty,e._forContent[t]=Array.from(l.childNodes),this.executeBlockHelpers(e._helpers[t],e),T.appendChild(l)}),this),C.unbound||(s(e._attributes.object,"_bindings"),e._attributes.object._bindings.add(e._propBindingObject),C.establishBindings(e._propBindingObject,e._attributes.object)),C.unbound=w,"default"!==o.type?b._placeHolder?c(b._placeHolder.parentNode,T,b._placeHolder):c(b.parentNode,T,b):_={toAppendMain:T,lastNode:b}}return C.unbound=w,u.component.data[h]=y,u.component.data[m]=f,u._properties[h]=g,u._properties[m]=v,e._currentObject=x,_}},{key:"updateSwitchHelper",value:function(e,o,a,r,i){if(t._ms||!o._ht||o._htA||(o.content.append(o._ht.content.cloneNode(!0)),o._htA=!0),"TEMPLATE"!==o.tagName){if(Object.keys(o).forEach((function(e){"innerHTML"!==e&&"innerText"!==e&&(o._origTemplate[e]=o[e])})),t._ie){var s=p("div");s.innerHTML=o._tC,o._origTemplate.innerHTML=s.children[0].innerHTML,this.constructor.splitTextNodes(o._origTemplate),o.hasAttribute("depth")&&o._origTemplate.setAttribute("depth",o.getAttribute("depth"))}var l=o._origTemplate._placeHolder=document.createTextNode("");C.replaceWithPf(o,o._origTemplate._placeHolder),(o=o._origTemplate).setAttribute("is",e),C.apdNode(o,this),l._helper=o}else if(!o._placeHolder){var d=document.createTextNode("");C.replaceWithPf(o,d),o._placeHolder=d,d._helper=o,C.apdNode(o,this)}var u=o;o._callee||(o._callee=this),a=a||o._cx,o._cx=a,o._dynamicProperty=o._dynamicProperty?o._dynamicProperty:{};var h=void 0,m=void 0;if(""===o.getAttribute("value")||o.getAttribute("value")?m=o.getAttribute("value"):o._attributes&&(m=o._attributes.value),m)h="if"===e?"true":m.toString();else if("if"===e)h="false";else switch(m){case void 0:h="undefined";break;case null:h="null";break;case!1:h="false";break;case"":h='""';break;case 0:h="0"}if(h!==o._currentCase){o._currentCase=h;var y=o._depthTemp||o,f=o._cases[h],g=void 0;if(!f&&(f=o._default,g=t._ms?f.templateContent:y.content.querySelector("[default]"),t._ms||!f._ht||g._htA||(g._htA=!0,g.content.append(f._ht.content.cloneNode(!0))),o._isDefault=!0,!g)){o._caseContent&&o._caseContent.length&&this.removeHelpers(o,void 0,!0),o._caseContent=[];var v=document.createTextNode("");if(o._caseContent.push(v),o._currentCaseName=h,o._helpers=o._helpers||[],r)return void(u._placeHolder?c(u._placeHolder.parentNode,v,u._placeHolder):c(u.parentNode,v,o));var x=n();return x.append(v),{lastNode:u,toAppendMain:x}}o._caseContent&&o._caseContent.length&&this.removeHelpers(o,void 0,!0);var P=f,b=h,D=void 0;D=g||(t._ms?{}:y.content.querySelector("[case='"+C.cssEscape(b)+"']"));for(var L=[];P;){t._ms||!P._ht||D._htA||(D._htA=!0,D.content.append(P._ht.content.cloneNode(!0)));var _=P.dynamicNodes,S=this.renderNodes(D,_,o,void 0,i,void 0,P.templateContent);if(L.push(S),!P.additional)break;P.additional.next?(D=t._ms?{}:o.content.querySelector("[case='"+C.cssEscape(P.additional.next)+"']"),P=o._cases[P.additional.next]):(D=t._ms?{}:o.content.querySelector("[default]"),P=o._default)}o._caseContent=[];for(var w=n(),T=0;T<L.length;T++)11==L[T].nodeType?o._caseContent=o._caseContent.concat(Array.from(L[T].childNodes)):o._caseContent.push(L[T]),w.append(L[T]);if(this.executeBlockHelpers(o._helpers,o),r){var E=void 0;return w.querySelector("template[is=break]")?E="break":w.querySelector("template[is=continue]")&&(E="continue"),o._placeHolder?c(o._placeHolder.parentNode,w,o._placeHolder):c(o.parentNode,w,o),E}return{toAppendMain:w,lastNode:o}}}},{key:"dummy",value:function(e,t){this.constructor._properties[boundValue].observer}},{key:"callObservers",value:function(e,t){var o=this.constructor._properties[e],a=o?o.observer:void 0;if(a)for(var r=0;r<a.length;r++)-1!==t.indexOf(".")&&a[r].path!==t||this["_"+a[r].functionName].apply(this)}},{key:"bindNode",value:function(e,o,a,r,i,n,c,d,u){var h=r.itemValue,m=r.itemIndex,y=r.type,f=r.indexValue,g=i.dynamicValue,v=i.helperInfo,x=void 0,P=e.ownerElement,b=[];2===e.nodeType&&(e={nodeName:e.nodeName,ownerElement:e.ownerElement,nodeType:2,nodeValue:e.nodeValue,_attributeDetails:e._attributeDetails}),e._callee=this;var D=!1;if(v&&Object.keys(v).length){D=!0;e.nodeName;x=e.helperValue=v;var L=[];if("action"===v.name){var _=v.args[0];v.args[0]=_.startsWith("'")?_.replace(/'/g,""):_,y?P._cx=r:a&&(P._cx=a._cx),_=v.args.slice(0,1)[0];var S=v.args.slice(1,v.args.length),w=!1,T=e.nodeName;return-1!=T.indexOf("-")&&(w=!0),L=[P,T,w,{name:_,args:S}],void this.processHelper({name:v.name,args:L},e)}if(L="method"===v.name?v.args:this.processArgs(this,{helperInfo:v},b,void 0,e,void 0,u),x=this.processHelper({name:v.name,args:L},e),"unescape"===v.name)e={dynamicPositions:{initialNode:e,dynamicNodeValue:x},_callee:e._callee,helperValue:e.helperValue},x=void 0,n.push(e)}else{v={},e.syntaxValue=g;var E=[];x=C.get(this.component.data,g,E,u),b.push(E)}if(2==e.nodeType){var A=e.ownerElement.tagName;if("INPUT"==A||"TEXTAREA"==A||"DIV"==A&&e.ownerElement.hasAttribute("contenteditable")){e.ownerElement._rA=e.ownerElement._rA||[];e.ownerElement._rA.push(e)}P._origTemplate?e.ownerElement=P._origTemplate:(P.hasAttribute("lyte-for")||P.hasAttribute("lyte-if")||P.hasAttribute("lyte-switch")||P.hasAttribute("lyte-forIn"))&&"TEMPLATE"!==P.tagName&&(t._ie?(e.ownerElement=p("template"),e.ownerElement.setAttribute("is",i._depthTemp)):e.ownerElement=i._depthTemp.cloneNode(!0),P._origTemplate=e.ownerElement)}var M=void 0;if("unbound"!==v.name&&!C.unbound){var N=void 0;a&&(N=y?a._items[m]._dynamicProperty:a._dynamicProperty);for(var k=0;k<b.length;k++){for(var F=b[k],I=0;I<F.length;I++){var R=this.getProperty(F[I]);if(a){var O=F[I].search(/\W/),$=void 0;($=-1!==O?F[I].substring(0,O):F[I])===h||$===f||r.node&&r.node._properties&&r.node._properties[$]?(e._cx=r,l(R,"_dynamicNodes"),R._dynamicNodes.push(e),$!==f&&(M=R)):(s(R,"_helperNodes"),R._helperNodes.add(a),N[F[I]]?N[F[I]].push(e):(N[F[I]]=[]).push(e))}else l(R,"_dynamicNodes"),R._dynamicNodes.push(e);if(P&&(P.hasAttribute("lyte-for")||P.hasAttribute("lyte-if")||P.hasAttribute("lyte-switch")||P.hasAttribute("lyte-forIn"))||P&&"TEMPLATE"===P.tagName&&/^(for|forIn)$/.test(P.getAttribute("is"))&&!D){var B=P.getAttribute("is");("for"===B&&"items"===e.nodeName||"forIn"===B&&"object"===e.nodeName)&&(R._forHelpers||s(R,"_forHelpers"),e.ownerElement._actualBinding=R,R._forHelpers.add(e.ownerElement))}c&&C.establishSelectedBinding(R,this.component.data,this)}F.length>1&&(e._multipleProperty=e._multipleProperty||[],e._multipleProperty.push({dynamicProp:M?void 0:N,actProp:this.getProperty(F[0]),helperNode:a,dynamicValues:F}))}}if(x="boolean"===!(void 0===x||_typeof(x))&&"number"===!(void 0===x||_typeof(x))?x||"":x,2===e.nodeType){var q=e._parentNode?e._parentNode:e.ownerElement;if(q.tagName)q.getAttribute("is");var V=C.isCustomElement(q,!0);V&&(q.set?q.set(C.String.toCamelCase(e.nodeName),x):(q._initProperties=q._initProperties||{},q._initProperties[C.String.toCamelCase(e.nodeName)]=x));var U=x;
//!== "string"
if(V&&"string"!=typeof x&&!d)q._attributes=q._attributes||{},q._attributes[e.nodeName]=x,"TEMPLATE"===q.nodeName&&D&&("for"===q.getAttribute("is")&&"items"===e.nodeName||"forIn"===q.getAttribute("is")&&"object"===e.nodeName&&!C.unbound)&&(e.ownerElement._actualBinding={_forHelpers:(new Set).add(q),_createdBinding:!0},x&&(s(x,"_bindings"),x._bindings.add(e.ownerElement._actualBinding))),o.push(e.nodeName);else if("boolean"==typeof x)q._attributes=e.ownerElement._attributes||{},q._attributes[e.nodeName]=x,x?q.setAttribute(e.nodeName,""):o.push(e.nodeName);else{var H;if(x&&"object"===(void 0===x?"undefined":_typeof(x)))if(void 0!==Record&&x instanceof Record)H=JSON.stringify(x.$.toJSON());else try{H=JSON.stringify(x)}catch(t){Lyte.error("Data passed for property '"+e.nodeName+"' of '"+e.ownerElement.nodeName.toLocaleLowerCase()+"' cannot be serialized. The component '"+e.ownerElement.nodeName.toLocaleLowerCase()+"' might not be registered before its use.")}else H=null==x||null==x?"":x;if(x=H,C.isControlHelper(e.ownerElement))q._attributes=e.ownerElement._attributes||{},q._attributes[e.nodeName]=x,o.push(e.nodeName);else{var Y=void 0===x?"":x;e.ownerElement.setAttribute(e.nodeName,Y)}}"LYTE-YIELD"===q.tagName&&(q.component.data[C.String.toCamelCase(e.nodeName)]=U),/^(INPUT|TEXTAREA|SELECT)$/.test(q.nodeName)&&("value"===e.nodeName?q.value=void 0===x?"":x:"checked"===e.nodeName&&(q.checked=x)),x||-1===C.booleanAttrList.indexOf(e.nodeName)||o.push(e.nodeName)}else e.nodeValue=void 0===x?"":x;return e}},{key:"debounce",value:function(e,t){var o;return function(){var a=this,r=arguments;function i(){e.apply(a,r),o=null}o&&clearTimeout(o),o=setTimeout(i,t||100)}}},{key:"getProperty",value:function(e){var t=e.split("."),o=this;o._properties[t[0]]||(o._properties[t[0]]={}),r(o=o._properties[t[0]],"_path",{enumerable:!1,value:t[0]});for(var a=1;a<t.length;a++)o[t[a]]||(o[t[a]]={},r(o[t[a]],"_path",{enumerable:!1,value:o._path+"."+t[a]})),o=o[t[a]];return o}},{key:"updateNode",value:function(e,t){var o=this.component,a="delete",r=[],i=void 0;if(e._multipleProperty)for(var n=0;n<e._multipleProperty.length;n++)if(e._multipleProperty[n]&&e._multipleProperty[n].dynamicValues.lastIndexOf(t)>0){r[n]=!1;var p=void 0;if((i=e._multipleProperty[n]).dynamicProp){if(r[n]=i,p=i.dynamicProp[i.actProp._path]){var c=p.indexOf(e);p.splice(c,1)}var d=i.helperNode;if(0===p.length)if("if"===d.getAttribute("is"))i.actProp._helperNodes[a](d),delete i.dynamicProp[i.actProp._path];else if(delete i.dynamicProp[i.actProp._path],d._items){for(var u=!0,h=0;h<d._items.length;h++)if(d._items[h]._dynamicProperty&&d._items[h]._dynamicProperty[i.actProp._path]){u=!1;break}u&&i.actProp._helperNodes[a](d)}}if(!r[n]&&(r[n]="dynamicNodes",p=i.actProp._dynamicNodes)){var m=p.indexOf(e);p.splice(m,1),p.length||delete i.actProp._dynamicNodes}}if(e.syntaxValue||e.helperValue){var y=void 0,f=void 0;if(e._cx||2===e.nodeType&&e.ownerElement._cx){y=e._cx||e.ownerElement._cx;var g=[];C.changeContext(y.node,g,y)}else if("LYTE-YIELD"===e.tagName&&e._callee._cx){f=!0,y=e._callee._cx;g=[];C.changeContext(y.node,g,y,!0)}var v=void 0,x=[];if(e.helperValue){var P=v=e.helperValue;if(v=this.processHelper({name:P.name,args:this.processArgs(this,{helperInfo:P},x,void 0,e)},e),"unescape"===P.name){for(var b=e.dynamicPositions,D=b.startingNode,L=b.length;L>1;){var _=D.nextSibling;D.remove(),D=_,L--}var S=v.childNodes.length;S||(v.appendChild(document.createTextNode("")),S=1);var w=v.childNodes[0];D.replaceWith.apply(D,v.childNodes);var T={startingNode:w,length:S};e.dynamicPositions=T,v=void 0}}else{var E=e.syntaxValue,A=void 0;-1===E.indexOf(".")&&-1===E.indexOf("[")||(A=E,E=E.substring(0,E.indexOf(".")));var M=A?C.get(o.data,A,x):o.data[E];v="boolean"===!(void 0===M||_typeof(M))&&"number"===!(void 0===M||_typeof(M))?M||"":M}if(x[0]instanceof Array||(x=[x]),r)for(n=0;n<r.length;n++)if(r[n]){var N=e._multipleProperty[n],k=this.getProperty(x[n][0]),F=this.getProperty(x[n][0].substring(0,x[n][0].indexOf("."))),I=this.getData(x[n][0].substring(0,x[n][0].indexOf(".")));if("dynamicNodes"===r[n])l(k,"_dynamicNodes"),k._dynamicNodes.push(e);else{s(k,"_helperNodes"),k._helperNodes.add(N.helperNode);var R=N.dynamicProp;R[k._path]?R[k._path].push(e):(R[k._path]=[]).push(e)}C.establishBindings(F,I),e._multipleProperty[n].actProp=k,e._multipleProperty[n].dynamicValues=x[n]}if(2===e.nodeType){var O=[],$=e._parentNode?e._parentNode:e.ownerElement;if("TEMPLATE"===$.tagName&&"component"===$.getAttribute("is")&&"component-name"!==e.nodeName)if($.hasAttribute("lyte-keep-alive"))for(var B in $._renderedComponent)O.push($._renderedComponent[B]);else O.push($._renderedComponent[$.getAttribute("component-name")]);O.push($);for(var q=0;q<O.length;q++){var V=O[q];
//!== "string"
if(V.set?V.set(C.String.toCamelCase(e.nodeName),v,!0):(V._initProperties=V._initProperties||{},V._initProperties[C.String.toCamelCase(e.nodeName)]=v),"LYTE-YIELD"===V.tagName&&V.component.data&&e.nodeName&&V.component.data[e.nodeName]!==v&&C.set(V.component.data,C.String.toCamelCase(e.nodeName),v,void 0,V),V._attributes=V._attributes||{},C.isCustomElement(V,!0)&&"string"!=typeof v){if("TEMPLATE"===e.ownerElement.nodeName){if(e.helperValue&&("for"===e.ownerElement.getAttribute("is")&&"items"===e.nodeName||"forIn"===e.ownerElement.getAttribute("is")&&"object"===e.nodeName)){var U=e.ownerElement._attributes[e.nodeName],H=v;C.removeSelectedBindingDeep(e.ownerElement._actualBinding,U),H&&(s(H,"_bindings"),H._bindings.add(e.ownerElement._actualBinding),C.establishBindings(e.ownerElement._actualBinding,H)),"object"===e.nodeName&&C.removeSelectedBindingDeep(e.ownerElement._propBindingObject,U)}V["__"+e.nodeName]=!0,V.removeAttribute(e.nodeName)}}else if("boolean"==typeof v)V._attributes=V._attributes||{},V._attributes[e.nodeName]=v,v?V.setAttribute(e.nodeName,""):V.removeAttribute(e.nodeName);else{var Y;if(v&&"object"===(void 0===v?"undefined":_typeof(v)))if(void 0!==Record&&v instanceof Record)Y=JSON.stringify(v.$.toJSON());else try{Y=JSON.stringify(v)}catch(t){Lyte.error("Data passed for property '"+e.nodeName+"' of '"+e.ownerElement.nodeName.toLocaleLowerCase()+"' cannot be serialized. The component '"+e.ownerElement.nodeName.toLocaleLowerCase()+"' might not be registered before its use.")}else Y=null==v||null==v?"":v;var j=void 0===(v=Y)?"":v,W=e.ownerElement;W.hasAttribute(e.nodeName)?"INPUT"==W.tagName&&"value"==e.nodeName&&W.validity.badInput||W.setAttribute(e.nodeName,j):e.nodeValue=j}if(V._attributes[e.nodeName]=v,/^(INPUT|TEXTAREA|SELECT)$/.test(V.nodeName))if("value"===e.nodeName){var z=void 0===v?"":v;V.value!==z&&(V.value=z)}else"checked"===e.nodeName&&(V.checked=v);v||-1===C.booleanAttrList.indexOf(e.nodeName)||V.removeAttribute(e.nodeName);var G=V._isStopped,K=void 0;switch(V.getAttribute("is")){case"for":this.updateForHelper(V,{type:"update"});break;case"if":K=this.updateSwitchHelper("if",V,void 0,!0,!0);break;case"forIn":this.updateForInHelper(V,{type:"update"});break;case"switch":this.updateSwitchHelper("switch",V,void 0,!0,!0);break;case"component":"component-name"===e.nodeName&&this.updateDynamicComponent(V,"update")}var Z=void 0;G&&G!==K?Z=K?"break"===K?"MS":"SM":"break"===G?"SM":"SS":"break"===K?Z="MS":"continue"===K&&(Z="SS"),Z&&this.handleBreak(V._cx,Z)}}else e.nodeValue=void 0===v?"":v;y&&C.removeContext(y.node,g,y,f)}}},{key:"handleBreak",value:function(e,t){if(e){for(var o=e.node,a=e.itemIndex,r=(o.getAttribute("item"),e.node._forContent),i="M"===t[0]?r.length:a+1,s=a;s<i;s++){for(var l=r[s],n=0;n<l.length;n++)l[n].remove(),(l[n]._forContent||l[n]._caseContent)&&this.removeHelpers(l[n]);r[s]=[],C.removeSelectedBindingDeep(o._items[s].itemProperty,o._attributes.items[s]),o._helpers[s]=[],o._items[s]={_dynamicProperty:{},itemProperty:{},indexProperty:{}}}var p=o._attributes.items.length;"M"===t[1]?this.updateForHelper(o,{firstIndex:a,secondIndex:p-a,type:"replace"},void 0,{}):this.updateForHelper(o,{firstIndex:a,secondIndex:1,type:"replace"},void 0,{})}}},{key:"createCustomEvent",value:function(e,t,o){var a=new CustomEvent(e);t._actions[e]=a,t._actions[e].processAction=o}},{key:"isEmptyString",value:function(e){return!("string"==typeof e)||""===e}},{key:"processArgs",value:function(e,t,o,a,r,i,s){var l=t.newHelperInfo&&i?t.newHelperInfo.args:t.helperInfo.args;o=o||[],l=Array.isArray(l)?Array.from(l):l;for(var n=0;n<l.length;n++)if(l[n]&&l[n].type)this.internalHelpers(e,l,n,o,a,r,i,s);else if(this.isEmptyString(l[n]))i&&l[n]instanceof Array&&(l[n]=C.getDD(e.component.data,l[n]));else if(l[n].startsWith("'")&&l[n].endsWith("'"))l[n]=l[n].substr(1,l[n].length-2);else{l[n]=l[n].trim();var p=[];"event"===l[n]&&a?l[n]=a:"this"===l[n]&&r?l[n]=2===r.nodeType?r.ownerElement:r:l[n]=C.get(e.component.data,l[n],p,s),o.push(p)}return l}},{key:"internalHelpers",value:function(e,t,o,a,r,i,s,l){var n=t[o].value,p=this.processHelper({name:n.name,args:this.processArgs(e,{helperInfo:n},a,r,i,s,l)});t[o]=p}},{key:"processHelper",value:function(e,o){var a=[];if("method"===e.name&&a.push(this,o),"lbind"===e.name&&a.push(o.ownerElement),f.registeredHelpers[e.name])return f.registeredHelpers[e.name].apply(this,a.concat(e.args));t.error("LC003",e.name)}},{key:"getActionProperty",value:function(e){var t=this._properties;return t?t[e].value:void 0}},{key:"hasInternalBindings",value:function(e){return e.match(/[(]{1}[^)]+[)]{1}/)}},{key:"getArgValues",value:function(e,t){for(var o=[],a=0;a<e.length;a++)o.push(t[e[a]].value);return o}},{key:"createEventListeners",value:function(e,t,o){if(e._callee||e===this||(e._callee=this),-1==a.indexOf(t)){var r=t.substr(2);e.getAttribute(r);f.registeredComponents[e.localName]&&!e.component||"TEMPLATE"===e.tagName&&"component"===e.getAttribute("is")?(e._toRegEvnts=e._toRegEvnts||{},e._toRegEvnts[t.substr(2)]={listener:P,attrVal:this.tagName.toLowerCase()+" => "+o.name}):(e.setAttribute(r,this.tagName.toLowerCase()+" => "+o.name),e.addEventListener(t.substr(2),P)),e.hasAttribute(t)&&(e[t]=void 0),e.removeAttribute(t)}}},{key:"registerYields",value:function(){var e=this;this._yields={};for(var o=this.querySelectorAll("template[is=registerYield],template[is=yield]"),a=function(a){var r=void 0;if(o[a].hasAttribute("from-parent")&&e._callee&&(r=e._callee._yields[o[a].getAttribute("yield-name")])){var i=void 0;t._ie?((i=document.createElement("div")).innerHTML=r.outerHTML,i=i.childNodes[0],e.constructor.splitTextNodes(i)):i=r.cloneNode(!0),Object.keys(r).forEach((function(e){i[e]=r[e]})),e._yields[o[a].getAttribute("yield-name")]=i}else e._yields[o[a].getAttribute("yield-name")]=o[a]},r=0;r<o.length;r++)a(r)}},{key:"connectedCallback",value:function(){if(!this.hasAttribute("lyte-rendered")&&f.registeredComponents[this.localName]&&!this._ccCalled){var e=this._fR;if(e||(this._callee=this._callee||this.getCallee(this.parentNode)),this.__h=[],this.__dc=[],e){var t=e.methods;t&&this.setMethods(t),C.ccDelay.push(this),this._ccCalled=!0}else this.actualConnectedCallback();(this._initProperties&&this._initProperties.hasOwnProperty("lyteViewPort")?this._initProperties.lyteViewPort:this.component.data.lyteViewPort)&&(C.isViewPortPending||(requestAnimationFrame((function(){requestAnimationFrame((function(){C.executePendingViewPort()}))})),C.isViewPortPending=!0),C.pendingViewPortElements.push(this))}}},{key:"actualConnectedCallback",value:function(){var e=this.component.data,o=this._fR;o&&(this._callee=this._callee||this.getCallee(this.parentNode));var a=this.constructor._templateAttributes;if(a&&a.attr)for(var r in a.attr){var i=a.attr[r];if(!this.hasAttribute(i.name)&&!e.hasOwnProperty(i.name)||i.globalEvent){if(i.helperInfo&&"action"===i.helperInfo.name){this._evBoundEvents=this._evBoundEvents||{};var l=i.helperInfo.args[0],n=void 0;n=l.startsWith('"')||l.startsWith("'")?l.substring(1,l.length-1):l;var p=i.globalEvent||-1!==i.name.indexOf("-")?i.name:i.name.substr(2);this._evBoundEvents[p]={name:n,args:i.helperInfo.args,from:"component"};var c=this.getAttribute(i.name),d=this.constructor._template.getAttribute(i.name);this.setAttribute(i.name,d+(c?" ; "+c:""))}i.globalEvent||(i.from="component",i.staticValue?this.setAttribute(a.attr[r].name,i.staticValue):(this.setAttribute(a.attr[r].name,"{{dummy}}"),this.bindNode(this.attributes.getNamedItem(a.attr[r].name),[],void 0,{},a.attr[r],void 0,void 0,!0)))}}for(var u in this._toRegEvnts)this.addEventListener(u,this._toRegEvnts[u].listener),this.hasAttribute(u)?this.setAttribute(u,this.getAttribute(u)+" ; "+this._toRegEvnts[u].attrVal):this.setAttribute(u,this._toRegEvnts[u].attrVal);this._toRegEvnts={};var h=C.unbound,m=this.afterConnected();if(C.unbound||o||(Lyte.establishObserverBindings.call(this,this.constructor._observers),s(e,"_bindings"),e._bindings.add(this._properties),C.establishBindings(this._properties,e)),C.unbound=h,"string"==typeof m){if(m)if(C.frSpecial){var y=document.createElement("template");y.innerHTML=m,this.innerHTML="",this.appendChild(y.content)}else this.innerHTML=m;C.processAction(this)}else{if(this.component.data.lyteViewPort)if(t._ie){for(var f=0;f<m.childNodes.length;f++)if(m.childNodes[f].tagName){this._dummyViewPortF=m.childNodes[f];break}for(f=m.childNodes.length-1;f>=0;f--)if(m.childNodes[f].tagName){this._dummyViewPortL=m.childNodes[f];break}}else this._dummyViewPortF=m.children[0],this._dummyViewPortL=m.children[m.children.length-1];this.appendChild(m)}var g=this.component.__data,v=this.attributes;this.__lyteIgnore=!0;for(var x=v.length-1;x>-1;x--){var P=L.String.toCamelCase(v[x].nodeName);g[P]&&g[P].hideAttr&&this.removeAttribute(v[x].nodeName)}this.__lyteIgnore=!1,this.setAttribute("lyte-rendered",""),o||Lyte._ignoreOnReady||this.dispatchEvent(new CustomEvent("onReady")),this.callback("didConnect"),this.onCallBack("didConnect"),o&&this.removeAttribute("_lyteprop")}},{key:"onCallBack",value:function(e){var o=this.constructor._callBacks[e];if(o)for(var a=0;a<o.length;a++)try{o[a].value.call(this.component)}catch(e){t.error(e)}}},{key:"callback",value:function(e){var o,a=this.component[e];if(a){arguments.length>1&&(o=Array.from(arguments)).splice(0,1);try{a.apply(this.component,o||[])}catch(e){t.error(e)}}}},{key:"establishObserverBindings",value:function(){for(var e=this.constructor._observers,t=0;t<e.length;t++)for(var o=e[t].properties,a=0;a<o.length;a++){var r=void 0,i=!1;-1!==o[a].indexOf(".[]")?(i=!0,r=this.getProperty(o[a].substring(0,o[a].indexOf(".[]")))):r=this.getProperty(o[a]),s(r,"_observers"),r._observers.add({callee:this,observer:e[t],isArrayObserver:i})}}},{key:"removeBindings",value:function(e,t){for(var o in e){var a=t[o];a&&a._bindings&&a._bindings.delete(e[o]),"object"===_typeof(e[o])&&a&&this.removeBindings(e[o],a)}}},{key:"actualDisconnected",value:function(){var e=this;if(e.component){e._cx=null,e._callee=null,e.component.$node=null,e.component.__data=null,e.component.data.__component__=null,e.component.data=null,e.component=null,e.__dc=e.__dc||[],e.__h=e.__h||[];for(var t=0;t<e.__dc.length;t++){var o=e.__dc[t];if(o.hasAttribute("lyte-keep-alive"))for(var a=Object.keys(o._renderedComponent),r=0;r<a.length;r++){var i=a[r];i!==o._currentComponent&&o._renderedComponent[i].remove()}}for(t=0;t<e.__h.length;t++)e.__h[t].remove();e.__h=[],e.__dc=[];var s=e._yields;for(var l in s)s[l]._callee=null;e=null}}},{key:"disconnectedCallback",value:function(){if(!C.ignoreDisconnect&&this.component){if(this.component.data.lyteViewPort){var e=L.pendingViewPortElements.indexOf(this);-1!=e&&L.pendingViewPortElements.splice(e,1)}if(this.component._bindings=null,this._fR||C.removeSelectedBindingDeep(this._properties,this.component.data),this.__h&&this.__h.length>0){var t=this,o=Array.from(this.__h);o.forEach((function(e){e._actualBinding&&t.removeHelpers(e)})),o=[]}for(var a in this._properties)this._properties[a]={};this.callback("didDestroy"),this.onCallBack("didDestroy"),C.dcc||(C.dcc=[],requestAnimationFrame((function(){requestAnimationFrame((function(){try{for(var e,t=0;e=C.dcc[t];t++)e.actualDisconnected()}catch(e){}C.dcc=void 0}))}))),C.dcc.push(this),this.constructor.activeInstances--}}}],[{key:"updateValue",value:function(e,t,o){for(var a=t.split("."),r=e,s=0;s<a.length-1;s++)r=r[a[s]];r[a[i]]=o}},{key:"createDocFragment1",value:function(e){if(e.content)return e.content;for(var t=e.childNodes,o=n(),a=t.length,r=0;r<a;r++)o.appendChild(t[0]);return o}},{key:"_registerComponent",value:function(e,o){var a=C.lyteComponentsDiv,r=t.$.assetsDiv,i=this._template;if(this._template&&"string"==typeof this._template){this._template.replace(/\\'/g,"'");var s=p("div");for(s.innerHTML=this._template;s.firstChild;)"STYLE"===s.firstChild.nodeName?(r.querySelector("style[from-component='"+e+"']")&&r.querySelector("style[from-component='"+e+"']").remove(),s.firstChild.setAttribute("from-component",e),r.appendChild(s.firstChild)):a.appendChild(s.firstChild)}else document.querySelector("template[tag-name='"+e+"']")&&a.appendChild(document.querySelector("template[tag-name='"+e+"']"));if(this._template=a.querySelector("template[tag-name='"+e+"']"),this._helperTemplate=document.createElement("template"),this._helperTemplate.setAttribute("_lyteht",e),C.h1Div.appendChild(this._helperTemplate),this._template){if(C.needDummyComponentsDiv)if(t._ie){var l=t.Compile.getTemplateFromString(i);C.dummyLyteComponentsDiv.appendChild(l)}else C.dummyLyteComponentsDiv.appendChild(this._template.cloneNode(!0));this._template&&this._template.content;var n,c=-1!==this._observedAttributes.indexOf("lyteUnbound"),d=t._ie?this._template:this._template.content;if(c&&(t._ie?((n=document.createElement("div")).innerHTML=this._template.outerHTML,n=n.childNodes[0]):n=this._template.cloneNode(!0)),this.splitTextNodes(d),c&&this.splitTextNodes(n),!this._dynamicNodes)if(t.Compile.getDynamicNodes){var u=t.Compile.getDynamicNodes(e,void 0,t._ie?d:void 0);if(u.errors)return console.error("Error in the component",u.componentName,u.errors),!1;this._dynamicNodes=u.dynamicNodes}else t.error("LC002",e);if(this._dynamicNodes){_(d,this._dynamicNodes,e,this,n?t._ie?n:n.content:void 0),t._ed?this._tC=this._template.outerHTML:t._ie&&(this._tC=d.outerHTML),this._templateAttributes=this._templateAttributes||{type:"attr",attr:{},position:[]};var h=[this._templateAttributes];if(_(this._template,h,e,this),this._templateAttributes=h[0],this._templateAttributes&&this._templateAttributes.attr){var m=this._template.attributes;try{for(var y=0;y<m.length;y++)this._templateAttributes.attr[m[y].name]||"tag-name"===m[y].name||"use-strict"===m[y].name||(this._templateAttributes.attr[m[y].name]={name:m[y].name,staticValue:m[y].value},this._template.removeAttribute(m[y].name),y--)}catch(e){t.error("Error with templateAttributes. ")}}}this._sta=n?C.processStatic(n):void 0}}},{key:"splitTextNodes",value:function(e){if(e&&e.childNodes&&e.childNodes.length)for(var o=e.childNodes.length-1;o>=0;o--)this.splitTextNodes(e.childNodes[o]);if("TEMPLATE"!==e.tagName||t._ie||this.splitTextNodes(e.content),e.nodeType===e.TEXT_NODE){var a=e.nodeValue;if(a){var r=a.match(/{{[^}]*?(?:(?:('|")[^\1]*?\1)[^}]*?)*}}/g);if(!r)return;for(var i=[],s=0;s<r.length;s++){var l=a.indexOf(r[s]),n=l+r[s].length;l&&i.push(document.createTextNode(a.substring(0,l))),i.push(document.createTextNode(a.substring(l,n))),a=a.substring(n)}if((a.trim()||!e.nextSibling||3!==e.nextSibling.nodeType||e.nextSibling.nodeValue.trim())&&i.push(document.createTextNode(a)),t._rwpf&&"#document-fragment"===e.parentNode.nodeName){for(var p=0;p<i.length;p++)c(e.parentNode,i[p],e);e.remove()}else e.replaceWith.apply(e,i)}}}},{key:"observedAttributes",get:function(){for(var e=[],t=0;t<this._observedAttributes.length;t++)e[t]=C.String.dasherize(this._observedAttributes[t]);return C.customPropHandlers.forEach((function(t,o){e.push(C.String.dasherize(t))})),e}}]),o}(v);Function.prototype.on=function(){return{type:"callBack",value:"observer"===this.type?this.value:this,properties:arguments,observes:"observer"===this.type?this:void 0}},Function.prototype.observes=function(){return{type:"observer",value:this,properties:arguments,on:Function.prototype.on}},Function.prototype.computed=function(){return{type:"computed",value:this,properties:arguments}};var L={fRP:{},fRC:0,customPropRegex:"",customPropHandlers:[],_registeredComponents:{},_reRegisteredComponents:[],toBeRegistered:[],updateCustomCrmComponent:function(e,t){for(var o in e)if(e[o]&&"observer"===e[o].type)e[o].fnName=o,t._observers.push(e[o]);else if(e[o]&&"callBack"===e[o].type){for(var a=e[o].properties,r=0;r<a.length;r++)t._callBacks[a[r]]||(t._callBacks[a[r]]=[]),e[o].fnName=o,t._callBacks[a[r]].push(e[o]);e[o].observes&&(e[o].observes.fnName=o,t._observers.push(e[o].observes))}else t.component.prototype[o]=e[o];return e},dataFromMixin:function(e,t,o,a){for(var r=e.length,i=0;i<r;i++)for(var s in e[i])"actions"===s?Object.assign(t,e[i][s]):"methods"===s?Object.assign(o,e[i][s]):a[s]=e[i][s];return{actionsFromMixin:t,methodsFromMixin:o,newDefinition:a}},throwEvent:function(e){var t=this.$node?this.$node:this,o=t._actions?t._actions[e]:void 0,a=[];if(arguments.length>1)for(var r=1;r<arguments.length;r++)a.push(arguments[r]);C.throwAction.call(t,t._callee,e,void 0,!0,a,t),this.$node&&t.dispatchEvent(o||new CustomEvent(e,{detail:a}))},throwAction:function(e,o,a,r,i,s,l,n,p){var c=void 0;if(this._route&&r)c=(e=t.Router.getRouteInstance(this._route)).actions||(e.actions={});else if(this.routeName){var d=this.parent;d&&(c=d.component?(e=d.component).constructor._actions:(e=d).actions||(e.actions={}))}else e&&(c=e.constructor._actions);if(e){var u=i||[];if(a=a||(this._actions&&this._actions[o]?this._actions[o].processAction:void 0)){var h=[];s&&C.adCx(s,h);var m=void 0;if(m=a.skipArgProcessing?a.args:this.processArgs(e,{helperInfo:a},void 0,l,s),u.splice.apply(u,[0,0].concat(m)),s&&C.rmCx(s,h),c[a.name])if(r)c[a.name].apply(this._callee.component,u),n=!0;else{var y=s.parentNode,f=c[a.name].apply(this.component,u);if(l.currentTarget===document.body||p||(f=!1),n=!0,!1!==f&&!l.cancelBubble)if(a.from&&s.getAttribute(l.type)&&s._boundEvents&&s._boundEvents[l.type]){s._callee.constructor._actions;var g=s._boundEvents[l.type],v=t.deepCopyObject(g);C.skipArgProcessing(v,l,s),C.throwAction.call(s._callee,s._callee,l.type,v,void 0,void 0,s,l,n)}else{if(C.hasLyteEvents(s,o))f=!C.handleLyteEvents(s,l);if(!1===f)return;if(C.isCustomElement(s)&&(e=y),y){for(var x=void 0;y&&(!y.getAttribute(o)||y.hasAttribute("disabled"))&&"BODY"!=y.tagName&&(!C.hasLyteEvents(y,o)||!(x=C.handleLyteEvents(y,l)));)y=y.parentNode;if(x||!y||"BODY"===y.tagName)return;if(y._callee||(y._callee=y.getCallee?y.getCallee(y):C.getCallee(y)),y&&l.type===o&&!l.cancelBubble)if(y._evBoundEvents&&y._evBoundEvents[o]){var P=y._evBoundEvents[o],b=t.deepCopyObject(P);C.skipArgProcessing(b,l,y),C.throwAction.call(y,y,o,b,void 0,void 0,y,l,n)}else if(y&&y._boundEvents&&y._boundEvents[o]){var D=y._boundEvents[o],L=t.deepCopyObject(D);C.skipArgProcessing(L,l,y),C.throwAction.call(y._callee,y._callee,o,L,void 0,void 0,y,l,n)}}}}else t.error("LC004",a.name)}else if(r){var _=c[o]||c[C.String.toCamelCase(o)]||c[C.String.dasherize(o)];if(_){var S=C.isCustomElement(e)?e.component:e;n=!0,!1!==_.apply(S,u)&&C.throwAction.call(e,e._callee,o,a,r,i,void 0,void 0,n)}else C.throwAction.call(e,e._callee,o,a,r,i,void 0,void 0,n)}}else n||t.warn("Nothing handled the action "+o+".")},isControlHelper:function(e){return"TEMPLATE"===e.tagName&&e.getAttribute("is")&&"component"!==e.getAttribute("is")||e.hasAttribute("lyte-for")||e.hasAttribute("lyte-if")||e.hasAttribute("lyte-switch")||e.hasAttribute("lyte-forIn")},isCustomElement:function(e,t){return e.hasAttribute&&(("TEMPLATE"===e.tagName||e.attributes["lyte-for"]||e.attributes["lyte-if"]||e.attributes["lyte-switch"]||e.attributes["lyte-forIn"])&&t||e.nodeName&&-1!==e.nodeName.indexOf("-")&&(f.registeredComponents[e.localName]||"LYTE-YIELD"===e.tagName))},componentSet:function(e,t,o,a){o||this.get(e)!==t?C.set(this.data,e,t,void 0,a):C.clearError(this.data,e)},componentGet:function(e){return e?C.get(this.data,e):this.data},nodeGet:function(e){return e?this.component.get(e):this.component.data},nodeSet:function(e,t,o){this.component.set(e,t,void 0,o)},registerComponent:function(e,o,a){if(-1==C._reRegisteredComponents.indexOf(e)&&f.registeredComponents[e])t.warn("Component "+e+" already registered");else{var r=void 0;C._registeredComponents[e]?r=C._registeredComponents[e]:((r=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),t}(D))._properties={},r.activeInstances=0,r._depthTemp=document.createElement("template"),r.prototype.throwAction=this.throwAction),r.prototype.get=this.nodeGet,r.prototype.set=this.nodeSet;var i=[];(a=a||{}).mixins&&a.mixins.forEach((function(t){Lyte.Mixin.exists(t)?i.push(Lyte.registeredMixins[t]):Lyte.$.requiredMixins(t,e,"component")})),r.component=h;var s=h.prototype;s.set=this.componentSet,s.get=this.componentGet,s.throwEvent=this.throwEvent,s.executeMethod=C.executeMethod,s.getData=C.componentGetData,s.setData=C.componentSetData,s.getMethods=C.componentGetMethods,s.setMethods=C.componentSetMethods,s.hasAction=C.componentHasAction,r._mixins=a.mixins;i.length;var l={},n={},p={};i.length&&C.dataFromMixin(i,l,n,p),o=Object.assign(p,o),r._actions=Object.assign({},l,o.actions),r._template=o._template,delete o._template,r._dynamicNodes=o._dynamicNodes,delete o._dynamicNodes,r._templateAttributes=o._templateAttributes,delete o._templateAttributes,r._callBacks={},r._observers=[];var c=o.data?o.data:void 0,d=Object.assign({},n,o.methods);r._observedAttributes=o._observedAttributes||[],r._observedMethodAttributes=o._observedMethodAttributes||{},delete o._observedAttributes,delete o._observedMethodAttributes,delete o.data,delete o.methods,o=C.updateCustomCrmComponent(o,r),r._data=c,r._methods=d,r._registerComponent(e,r),f.registeredComponents[e]=!0,C._registeredComponents[e]||("complete"===document.readyState||"interactive"===document.readyState?customElements.define(e,r):C.toBeRegistered.push({name:e,def:r}));var u=r._depthTemp;!C._ie&&u&&u.content.childNodes.length?(u.setAttribute("data-id","depthTemp_"+e),C.lyteComponentsDiv.appendChild(u)):delete r._depthTemp,C._registeredComponents[e]=r}function h(){}},registerHelper:function(e,t){f.registeredHelpers[e]=t},registerMixin:function(e,o){t.Mixin.register.call(t,e,o)},typeCast:function(e,t,o){if(null===e)return e;try{switch(t){case"string":return"object"===(void 0===e?"undefined":_typeof(e))?JSON.stringify(e):e.toString();case"number":if(""==e)return;var a=+e;if(isNaN(a))throw"TypeCast exception";return a;case"array":case"object":return JSON.parse(e);case"boolean":return!(!e&&""!==e||"false"===e);default:return e}}catch(t){return o&&(o.isError=!0),e}},getDataType:function(e){var t=void 0===e?"undefined":_typeof(e);return"object"===t&&e instanceof Array?"array":t},handleValidation:function(e,o,a,r){var i=t.validate(e,o,a,r);return i?(C.set(r.data.errors,o,i),r.$node.callback&&r.$node.callback("onError",o,i)):C.clearError(e,o),i},clearError:function(e,o){e.errors&&e.errors[o]&&t.objectUtils(e.errors,"delete",o)},apdNode:function(e,t){C.tDiv.appendChild(e),t.__h.push(e)},update:function(e,t,o,a,i,l,n,p){var c=e.__component__,d=!0,u=void 0,h=void 0;if(!i){if(i=e[t],c&&"LYTE-YIELD"!==c.tagName){if((h=c.component.__data[t])&&(u=h.type)&&(d=!h.hideAttr,u===C.getDataType(o)||void 0===o&&"boolean"!==u||(o=C.typeCast(o,u))),o===i)return void C.clearError(e,t);if(C.handleValidation(e,t,o,c.component))return}e.hasOwnProperty(t)||e instanceof Array?e[t]=o:C.oF(e,"add",t,o,!0)}var m=!!c,y=C.String.dasherize(t);if(c&&n&&("string"==typeof o&&c.getAttribute(y)!==o||c.hasAttribute(y))&&(!C.customPropRegex.exec(t)||c.hasAttribute(y))&&d)if(o&&"object"===(void 0===o?"undefined":_typeof(o))){var f=void 0;try{f=JSON.stringify(o),c.attributes.getNamedItem(y).__lyteIgnore=!0,c.setAttribute(y,f)}catch(e){}}else{var g=C.typeCast(o,"string");if(c.getAttribute(y)!==g){var v=c.attributes.getNamedItem(y);v&&(v.__lyteIgnore=!0),g=g||"",c.setAttribute(y,g)}}if(o&&"string"!=typeof o&&"boolean"!=typeof o&&"number"!=typeof o){if(i&&"object"===(void 0===i?"undefined":_typeof(i))&&i._bindings){if(o._bindings||r(o,"_bindings",{enumerable:!1,writable:!0,value:new Set,configurable:!0}),c&&c.component.data===e&&-1===t.indexOf(".")){var x=c.getProperty(t);if(this.removeSelectedBindingDeep(x,i),o._bindings.add(x),this.establishBindings(x,o),x._forHelpers)for(var P=x._forHelpers.toArrayLyte(),b=0;b<P.length;b++){var D=P[b];D._propBindingObject&&this.removeSelectedBindingDeep(D._propBindingObject,i)}this.affectChanges(x,void 0,i,l,e[t])}else if(e._bindings)for(var L=e._bindings.toArrayLyte(),_=0;_<L.length;_++){var S=L[_][t];if(S){if(this.removeSelectedBindingDeep(S,i),o._bindings.add(S),this.establishBindings(S,o),S._forHelpers)for(var w=S._forHelpers.toArrayLyte(),T=0;T<w.length;T++){var E=w[T];E._propBindingObject&&this.removeSelectedBindingDeep(E._propBindingObject,i)}this.affectChanges(S,void 0,i,l,e[t])}}}else if(e._bindings){s(o,"_bindings");for(var A=e._bindings.toArrayLyte(),M=0;M<A.length;M++){var N=A[M];N[t]&&(o._bindings.add(N[t]),this.establishBindings(N[t],o),this.affectChanges(N[t],void 0,i,l,e[t]))}}h=h||(c&&"LYTE-YIELD"!==c.tagName?c.component.__data[t]:void 0),(a&&Lyte.isRecord(e)||e&&e.hasOwnProperty("_scp")&&e._scp.length||h&&/^(object|array)$/.test(h.type)&&h.watch)&&Lyte.establishObjectBinding(e,t,a,!0)}else{if(i&&"object"===(void 0===i?"undefined":_typeof(i))&&i._bindings&&e._bindings)for(var k=e._bindings.toArrayLyte(),F=0;F<k.length;F++){var I=k[F];if(I[t]&&(this.removeSelectedBindingDeep(I[t],i),I[t]._forHelpers))for(var R=I[t]._forHelpers.toArrayLyte(),O=0;O<R.length;O++){var $=R[O];$._propBindingObject&&this.removeSelectedBindingDeep($._propBindingObject,i)}}if(e._bindings)for(var B=e._bindings.toArrayLyte(),q=0;q<B.length;q++){var V=B[q];V[t]&&this.affectChanges(V[t],void 0,i,l,e[t])}}if(e._scp&&(Lyte.cmpData(i,o)||this.callDeepObservers(e,{type:"deepChange",oldValue:i,newValue:o},t),i&&e._scp.forEach((function(e){Lyte.removeNestScp(i,e.id)}))),e._scpObj&&e._scpObj.hasOwnProperty(t)&&Lyte.removeNestScp(i,e._scpObj[t]),m&&!p&&c._attributeDetails&&c._callee){var U=c._attributeDetails[C.String.dasherize(t)],H=void 0;if(U&&U.isLbind&&(H=U.dynamicValue),H){var Y=void 0;c._cx&&(Y=[],C.changeContext(c._cx.node,Y,c._cx));var j=C.getNew(c._callee.component.data,H);if(!j.context)return;var W=!1;j.context===c._callee.component.data?c._callee._properties[j.lastKey]&&c._callee._properties[j.lastKey].__fromComponent&&(W=!0):W=!0,W&&C.set(j.context,j.lastKey,o),Y&&C.removeContext(c._cx.node,Y,c._cx)}}},getContentForIE:function(e,o,a,r){if("string"==typeof e){a=!0;var i=p("div");i.innerHTML=e,e=i.childNodes[0],o.splitTextNodes(e)}if(e.getAttribute&&e.getAttribute("depth")){Lyte._ms&&r&&(r._content=i);var s=parseInt(e.getAttribute("depth"));e=t._ie?e:a?e.content:e.content.cloneNode(!0);for(var l=0;l<s;l++)e=e.childNodes[0]}return e},replaceWithPf:function(e,o){t._rwpf?(c(e.parentNode,o,e),e.remove()):e.replaceWith(o)},getCallee:function(e,t){for(;e&&!C.isCustomElement(e)&&"LYTE-YIELD"!==e.tagName;){if("BODY"===e.tagName){e=null;break}e=e.parentNode}return e&&"LYTE-YIELD"===e.tagName?e._registerYield?e._registerYield._callee:void 0:t===e?void 0:e},set:function(e,o,a,r,i){var s=-1;o instanceof Object&&o||(s=(o+="").lastIndexOf("."));var l=o;if(-1!==s){var n=o.substring(0,s);o=o.substring(s+1),e=C.get(e,n)}if("string"!=typeof o||e[o]!==a){if(e._setterScope)var p=e._setterScope;var c=[];Array.isArray(e._scp)&&e._scp.forEach((function(e){var t,o,a,r=Lyte.nestScp[e.id],i={};r.model&&(a=r.attr,o=store.peekRecord(r.model,r.pK)),i.path=e.path,i.id=e.id,i.attr=a,i.data=r.data,o&&(t=o.$.model.fieldList[a])&&t.watch&&(i.data=Lyte.deepCopyObject(o[a]),i.rec=o,i.isRec=!0),c.push(i)})),l=l===o?l:void 0;var d={};if(o instanceof Object)if(!t.isRecord(e)||r||e.$.isCloned)for(var u in o)C.set(e,u,o[u],r,i);else{for(var h in o){var m=o[h],y=e.$.model.fieldList[h];!(y=y?y.type:void 0)||void 0===m&&"boolean"!==y||y===C.getDataType(m)||(o[h]=C.typeCast(m,y))}var f=store.$.setData(e.$,o,void 0,void 0,void 0,d);if(f.$.isError)return f}else if(!t.isRecord(e)||r||e.$.isCloned)C.update(e,o,a,r,void 0,p,l,i);else{e[o];var g=e.$.model.fieldList[o];!(g=g?g.type:void 0)||void 0===a&&"boolean"!==g||g===C.getDataType(a)||(a=C.typeCast(a,g));var v=store.$.setData(e.$,o,a,void 0,void 0,d);if(v.$.isError)return v}c&&c.length&&c.forEach((function(e){e.isRec&&store.$.deepValueChange(e.rec,e.attr,e.rec[e.attr],e)}))}else e.__component__?C.clearError(e,o):t.isRecord(e)&&!e.$.isCloned&&store.$.clrRecErr(e.$,o)},adCx:function(e,t){var o="LYTE-YIELD"===e.tagName;!e._cx||o&&"LYTE-YIELD"===e._cx.node.tagName?o&&e._callee._cx&&C.changeContext(e._callee._cx.node,t,e._callee._cx,!0):C.changeContext(e._cx.node,t,e._cx,o)},rmCx:function(e,t){var o="LYTE-YIELD"===e.tagName;!e._cx||o&&"LYTE-YIELD"===e._cx.node.tagName?o&&e._callee._cx&&C.removeContext(e._callee._cx.node,t,e._callee._cx,!0):C.removeContext(e._cx.node,t,e._cx,o)},changeContext:function(e,t,o,a){if(o){var r="LYTE-YIELD"===e.tagName;if(!e._cx||r&&"LYTE-YIELD"===e._cx.node.tagName?("LYTE-YIELD"===e.tagName||a)&&e._callee&&e._callee._cx&&C.changeContext(e._callee._cx.node,t,e._callee._cx):C.changeContext(e._cx.node,t,e._cx,"LYTE-YIELD"===e.tagName||a),r){var i=e._registerYield._callee;i&&i._cx&&C.changeContext(i._cx.node,t,i._cx)}var s=void 0,l=void 0;if(o.type){if("for"===o.type){if(s=e.getAttribute("index"),l=e.getAttribute("item"),0===e._items.length)return}else if(s=e.getAttribute("key"),l=e.getAttribute("value"),0===Object.keys(e._items).length)return;var n=e._callee,p=n.component.data[l],c=n.component.data[s],d=n._properties[l],u=n._properties[s],h="for"===o.type?e._currentItems:e._currentObject;n.component.data[l]=h[o.itemIndex],n.component.data[s]=o.itemIndex,n._properties[l]=e._items[o.itemIndex].itemProperty,n._properties[s]=e._items[o.itemIndex].indexProperty;var m={initialItemValue:p,initialIndexValue:c,initialItemProp:d,initialIndexProp:u};t.push(m)}else{var y={},f=e._registerYield._callee;Object.keys(o.node._properties).forEach((function(e){y[e]={},y[e].value=f.component.data[e],y[e].property=f._properties[e],f._properties[e]=o.node._properties[e],f.component.data[e]=o.node.component.data[e]})),t.push(y)}}},removeContext:function(e,t,o,a){if(o){var r="LYTE-YIELD"===e.tagName;if(!e._cx||r&&"LYTE-YIELD"===e._cx.node.tagName?("LYTE-YIELD"===e.tagName||a)&&e._callee&&e._callee._cx&&C.removeContext(e._callee._cx.node,t,e._callee._cx):C.removeContext(e._cx.node,t,e._cx,"LYTE-YIELD"===e.tagName||a),r){var i=e._registerYield._callee;i&&i._cx&&C.removeContext(i._cx.node,t,i._cx)}var s=void 0,l=void 0;if(o.type){if("for"===o.type){if(s=e.getAttribute("index"),l=e.getAttribute("item"),0===e._items.length)return}else if(s=e.getAttribute("key"),l=e.getAttribute("value"),0===Object.keys(e._items).length)return;var n=e._callee,p=(e._attributes.items,t.shift());n.component.data[l]=p.initialItemValue,n.component.data[s]=p.initialIndexValue,n._properties[l]=p.initialItemProp,n._properties[s]=p.initialIndexProp}else{var c=e._registerYield._callee,d=t.shift();Object.keys(o.node._properties).forEach((function(e){c.component.data[e]=d[e].value,c._properties[e]=d[e].property}))}}},oF:function(){var e=arguments[0],o=arguments[1],a=arguments[2],r=arguments[3],i=arguments[4],s=arguments[5];if("add"!==o||i){var l={};if(l.type=o,l.property=a,/^(add|delete)$/.test(o)){var n=e._bindings;if("delete"===o?C.set(e,a,void 0,s):e[a]=r,n)for(var p=n.toArrayLyte(),c=0;c<p.length;c++){var d=p[c],u=d._forHelpers;if(u)for(var h=u.toArrayLyte(),m=0;m<h.length;m++){var y=h[m],f=(y.getAttribute("key"),[]);"add"===o&&C.adCx(y,f),y._callee.updateForInHelper(y,l),"add"===o&&C.rmCx(y,f)}}"delete"===o&&delete e[a]}else t.error("LC005",o)}else C.set(e,a,r,s)},aF:function(){var e=arguments[0],o=arguments[1];if(!/^(replaceAt|removeAt|shift)$/.test(o)||e.length){var a=arguments[2],r=void 0,i=[];switch(e._scp&&/^(replaceAt|splice|removeAt|remove|insertAt)$/.test(o)&&e._scp.forEach((function(e){var t,o,a={},r=Lyte.nestScp[e.id];r.model&&(o=r.attr,t=store.peekRecord(r.model,r.pK)),a.path=e.path,a.id=e.id,a.attr=o,a.data=r.data,t&&(model=t.$.model,field=model.fieldList[o],field&&field.watch&&(a.data=Lyte.deepCopyObject(t[o]),a.rec=t,a.isRec=!0)),i.push(a)})),o){case"replaceAt":var l=parseInt(arguments[2]);if(l>e.length)return t.warn("index provided for replaceAt is greater than array length"),[];var n=arguments[3];n instanceof Array||(n=[n]);var p=e.splice.apply(e,[l,1].concat(n)),c={firstIndex:l,secondIndex:n.length,type:"replace"};if(e._bindings)for(var d=e._bindings.toArrayLyte(),u=0;u<d.length;u++){var h=d[u];if(h._forHelpers)for(var m=h._forHelpers.toArrayLyte(),y=0;y<m.length;y++){for(var f=m[y],g=l+p.length,v=f.getAttribute("item"),x=l,P=0;x<g;x++,P++)C.removeSelectedBindingDeep(_defineProperty({},v,f._items[x].itemProperty),_defineProperty({},v,p[P]));var b=[];C.adCx(f,b),f._callee.updateForHelper(f,c),C.rmCx(f,b)}for(var D in h){var L=parseInt(D);if(!isNaN(L)&&L>=c.firstIndex){var _=L-c.firstIndex,S=void 0;if(S=_<=c.thirdIndex?p[_]:e[c.firstIndex-1+c.secondIndex+_],this.removeSelectedBindingDeep(h[D],S),h[D]._forHelpers)for(var w=h[D]._forHelpers.toArrayLyte(),T=0;T<w.length;T++){var E=w[T];E._propBindingObject&&this.removeSelectedBindingDeep(E._propBindingObject,S)}e[L]&&"object"===_typeof(e[L])&&(s(e[L],"_bindings"),this.establishBindings({dummy:h[D]},{dummy:e[L]})),this.affectChanges(h[D])}}}return r={type:"array",insertedItems:n,removedItems:p,index:l},i&&i.length&&i.forEach((function(t){t.isRec&&store.$.deepValueChange(t.rec,t.attr,e,t),n.forEach((function(e,o){if(e&&(Array.isArray(e)||"object"==(void 0===e?"undefined":_typeof(e)))){var a=t.path.split(",");Lyte.bindObj(e,void 0,t.id,a&&a.length?a:[])}}))})),C.callArrayObservers(e,r),p[0];case"splice":var A=parseInt(arguments[2]);if(A>e.length)return t.warn("index provided is greater than array length"),[];var M=arguments.length>3?arguments[3]:e.length-A,N=arguments.length>4?arguments[4]:[];N instanceof Array||(N=[N]);var k=e.splice.apply(e,[A,M].concat(N)),F={firstIndex:A,secondIndex:N.length,thirdIndex:M,type:"splice"};if(e._bindings)for(var I=e._bindings.toArrayLyte(),R=0;R<I.length;R++){var O=I[R];if(O._forHelpers)for(var $=O._forHelpers.toArrayLyte(),B=0;B<$.length;B++){for(var q=$[B],V=A+k.length,U=q.getAttribute("item"),H=A,Y=0;H<V;H++,Y++)C.removeSelectedBindingDeep(_defineProperty({},U,q._items[H].itemProperty),_defineProperty({},U,k[Y]));var j=[];C.adCx(q,j),q._callee.updateForHelper(q,F),C.rmCx(q,j)}for(var W in O){var z=parseInt(W);if(!isNaN(z)&&z>=F.firstIndex){var G=z-F.firstIndex,K=void 0;if(K=G<=F.thirdIndex?k[G]:e[F.firstIndex-F.thirdIndex+F.secondIndex+G],this.removeSelectedBindingDeep(O[W],K),O[W]._forHelpers){var Z=O[W]._forHelpers.toArrayLyte();for(T=0;T<Z.length;T++){var X=Z[T];X._propBindingObject&&this.removeSelectedBindingDeep(X._propBindingObject,K)}}e[z]&&"object"===_typeof(e[z])&&(s(e[z],"_bindings"),this.establishBindings({dummy:O[W]},{dummy:e[z]})),this.affectChanges(O[W])}}}return r={type:"array",index:A,insertedItems:N,removedItems:k},i&&i.length&&i.forEach((function(t){t.isRec&&store.$.deepValueChange(t.rec,t.attr,e,t),N.forEach((function(e,o){if(e&&(Array.isArray(e)||"object"==(void 0===e?"undefined":_typeof(e)))){var a=t.path.split(",");Lyte.bindObj(e,void 0,t.id,a&&a.length?a:[])}})),k.forEach((function(e){Lyte.removeNestScp(e,t.id)}))})),C.callArrayObservers(e,r),k;case"push":var J=arguments[2];J instanceof Array||(J=[J]),C.aF(e,"insertAt",e.length,J);break;case"pop":return C.aF(e,"remove",e.length-1)[0];case"shift":case"shiftObject":return C.aF(e,"remove",0)[0];case"removeAt":case"remove":var Q=parseInt(arguments[2]);if(Q>e.length)return t.warn("index provided for removeAt is greater than array length"),[];var ee=arguments[3]?parseInt(arguments[3]):1,te={firstIndex:Q,secondIndex:ee,type:"remove"},oe=e.splice(Q,ee);if(e._bindings)for(var ae=e._bindings.toArrayLyte(),re=0;re<ae.length;re++){var ie=ae[re];if(ie._forHelpers)for(var se=ie._forHelpers.toArrayLyte(),le=0;le<se.length;le++){for(var ne=se[le],pe=Q+oe.length,ce=ne.getAttribute("item"),de=Q,ue=0;de<pe;de++,ue++)C.removeSelectedBindingDeep(_defineProperty({},ce,ne._items[de].itemProperty),_defineProperty({},ce,oe[ue]));var he=[];C.adCx(ne,he),ne._callee.updateForHelper(ne,te),C.rmCx(ne,he)}for(var me in ie){var ye=parseInt(me);if(!isNaN(ye)&&ye>=te.firstIndex){var fe=ye-te.firstIndex,ge=void 0;if(ge=fe<te.secondIndex?oe[fe]:e[te.firstIndex-te.secondIndex+fe],this.removeSelectedBindingDeep(ie[me],ge),ie[me]._forHelpers){var ve=ie[me]._forHelpers.toArrayLyte();for(T=0;T<ve.length;T++){var xe=ve[T];xe._propBindingObject&&this.removeSelectedBindingDeep(xe._propBindingObject,ge)}}e[ye]&&"object"===_typeof(e[ye])&&(s(e[ye],"_bindings"),this.establishBindings({dummy:ie[me]},{dummy:e[ye]})),this.affectChanges(ie[me])}}}return r={type:"array",removedItems:oe,index:Q},i&&i.length&&i.forEach((function(t){t.isRec&&store.$.deepValueChange(t.rec,t.attr,e,t),oe.forEach((function(e){Lyte.removeNestScp(e,t.id)}))})),C.callArrayObservers(e,r),oe;case"removeObject":a=[a];case"removeObjects":a instanceof Array||(a=[a]),a==e&&(a=Array.from(a));for(var Pe=0;Pe<a.length;Pe++){var be=e.indexOf(a[Pe]);-1!==be&&C.aF(e,"removeAt",be)}break;case"unshift":case"unshiftObject":case"unshiftObjects":var De=arguments[2];De instanceof Array||(De=[De]),C.aF(e,"insertAt",0,De);break;case"insertAt":var Le=parseInt(arguments[2]),Ce=arguments[3],_e=Ce.length;Ce instanceof Array||(Ce=[Ce]);for(var Se=Le;Se>e.length;Se--)Ce.unshift(void 0),Le--;var we={firstIndex:Le,secondIndex:Ce.length,type:"insert"};if(e.splice.apply(e,[Le,0].concat(Ce)),e._bindings)for(var Te=e._bindings.toArrayLyte(),Ee=0;Ee<Te.length;Ee++){var Ae=Te[Ee];if(Ae._forHelpers)for(var Me=Ae._forHelpers.toArrayLyte(),Ne=0;Ne<Me.length;Ne++){var ke=Me[Ne],Fe=[];C.adCx(ke,Fe),ke._callee.updateForHelper(ke,we),C.rmCx(ke,Fe)}for(var Ie in Ae){var Re=parseInt(Ie);if(!isNaN(Re)&&Re>=we.firstIndex){if(this.removeSelectedBindingDeep(Ae[Ie],e[Re+we.secondIndex]),Ae[Ie]._forHelpers){var Oe=Ae[Ie]._forHelpers.toArrayLyte();for(T=0;T<Oe.length;T++){var $e=Oe[T];$e._propBindingObject&&this.removeSelectedBindingDeep($e._propBindingObject,oldObject)}}e[Re]&&"object"===_typeof(e[Re])&&(s(e[Re],"_bindings"),this.establishBindings({dummy:Ae[Ie]},{dummy:e[Re]})),this.affectChanges(Ae[Ie])}}}var Be=parseInt(arguments[2]);r={type:"array",insertedItems:arguments[3]instanceof Array?arguments[0].slice(Be,Be+_e):[arguments[3]],index:Be},i&&i.length&&i.forEach((function(t){t.isRec&&store.$.deepValueChange(t.rec,t.attr,e,t),Ce.forEach((function(e,o){if(e&&(Array.isArray(e)||"object"==(void 0===e?"undefined":_typeof(e)))){var a=t.path.split(",");Lyte.bindObj(e,void 0,t.id,a&&a.length?a:[])}}))})),C.callArrayObservers(e,r);break;case"concat":C.aF(e,"insertAt",e.length,arguments[2]);break;default:return void t.error("LC006",o)}}else t.warn(o+" operation cannot be performed on empty array")},callDeepObservers:function(t,o,a){var r=o.type;t._scp.forEach((function(i){var s,l,n=Lyte.nestScp[i.id],p=!1;if(n.model?(s=n.attr,l=store.peekRecord(n.model,n.pK),p=!0):l=n.data,l._bindings)for(var c=l._bindings.toArrayLyte(),d=0;d<c.length;d++){var u=c[d],h=void 0;if(p?u.hasOwnProperty(s)&&u[s].hasOwnProperty("*")&&(h=u[s]["*"]):u.hasOwnProperty("*")&&(h=u["*"]),h)for(var m,y=h._observers?h._observers.toArrayLyte():[],f=0;f<y.length;f++){var g=y[f];o.path=o.path||i.path,"deepChange"==o.type&&(m=a?i.path.concat("."+a):i.path,o.path=""+m),o.type="deepChange",o.data=l;var v=h._path.split(".");if(v.pop(),o.item=v.join("."),g.callee&&g.callee.component)g.observer.value.call(g.callee.component,o);else{var x=t._setterScope?t._setterScope:e;if(Array.isArray(x))for(var P=x.length,b=0;b<P;b++){var D=x[b];g.observer.value.call(D,o)}else g.observer.value.call(x,o)}}"array"==r&&u.length&&this.affectChanges(u.length)}}))},callArrayObservers:function(t,o){if(t._scp&&this.callDeepObservers(t,Object.assign({},o)),t._bindings)for(var a=t._bindings.toArrayLyte(),r=0;r<a.length;r++){var i=a[r],s=a[r]._path;if(i._observers)for(var l=i._observers.toArrayLyte(),n=0;n<l.length;n++){var p=l[n];if(p.isArrayObserver)if(o&&(o.item=s),p.callee&&p.callee.component)p.observer.value.call(p.callee.component,o);else{var c=t._setterScope?t._setterScope:e;if(Array.isArray(c))for(var d=c.length,u=0;u<d;u++){var h=c[u];p.observer.value.call(h,o)}else p.observer.value.call(c,o)}}i.length&&this.affectChanges(i.length)}},establishUpdateBindings:function(e,t,o){for(var a=e.toArrayLyte(),r=0;r<a.length;r++){var i=a[r];i[t]&&(s(o,"_bindings"),o._bindings.add(i[t]),this.establishBindings(i[t],o))}},establishSelectedBinding:function(e,t,o){if(e)for(var a=e._path.split("."),r=o.getProperty(a[0]),i=t[a[0]],l=0;l<a.length&&(i&&"object"===(void 0===i?"undefined":_typeof(i)));l++)s(i,"_bindings"),i._bindings.add(r),r=r[a[l+1]],i=i[a[l+1]]},establishBindings:function(e,t){if(e._helperNodes)for(var o=e._path,a=e._helperNodes.toArrayLyte(),r=0;r<a.length;r++){var i=a[r]._dynamicProperty?a[r]._dynamicProperty[o]:void 0;if(i)for(var l=0;l<i.length;l++){var n=i[l].ownerElement;if(n&&"TEMPLATE"===n.tagName&&"for"===n.getAttribute("is")&&n._items){n.getAttribute("item");for(var p=0;p<n._items.length;p++){var c=t[p],d=n.getAttribute("item");c&&"object"===_typeof(n._items[p])&&this.establishBindings(n._items[p].itemProperty,_defineProperty({},d,c))}}}}for(var u in e){var h=t[u];h&&"string"!=typeof h&&"number"!=typeof h&&"boolean"!=typeof h?(h._bindings||s(h,"_bindings"),h._bindings.add(e[u]),"object"===_typeof(e[u])&&this.establishBindings(e[u],h)):(t._bindings||s(t,"_bindings"),t._bindings.add(e))}},removeSelectedBindingDeep:function(e,t){if(t){for(var o in t._bindings&&d(t,"_bindings",e),e){var a=t[o];a&&a._bindings&&d(a,"_bindings",e[o]),"object"===_typeof(e[o])&&a&&this.removeSelectedBindingDeep(e[o],a)}if(e._forHelpers)for(var r=e._forHelpers.toArrayLyte(),i=0;i<r.length;i++){var s=r[i];if("for"===s.getAttribute("is")){s.getAttribute("item");for(var l=s._attributes.items,n=s._items,p=0;p<n.length;p++)this.removeSelectedBindingDeep(n[p].itemProperty,l[p])}else s._propBindingObject&&t._bindings&&(d(t,"_bindings",s._propBindingObject),this.removeSelectedBindingDeep(s._propBindingObject,t))}}},removeAllBindings:function(e,t){for(var o in e)t[o]&&t[o]._bindings&&d(t[o],"_bindings",e[o]),t[o]&&"string"!=typeof t[o]&&C.removeAllBindings(e[o],t[o])},affectChanges:function(t,o,a,r,i){if(t._dynamicNodes)for(var s=0;s<t._dynamicNodes.length;s++)t._dynamicNodes[s]._callee.updateNode(t._dynamicNodes[s],t._path);var l=t._path;if(t._helperNodes)for(var n=[],p=t._helperNodes.toArrayLyte(),c=0;c<p.length;c++)if(t._helperNodes.has(p[c]))if("for"===p[c].getAttribute("is")&&p[c]._items){var d=[];C.adCx(p[c],d);for(var u=p[c].getAttribute("index"),h=p[c].getAttribute("item"),m=p[c]._callee,y=m.component.data[h],f=m.component.data[u],g=m._properties[h],v=m._properties[u],x=p[c]._attributes.items,P=0;P<p[c]._items.length;P++)if(m.component.data[h]=x[P],m.component.data[u]=P,m._properties[h]=p[c]._items[P].itemProperty,p[c]._items[P]._dynamicProperty[l]){n=p[c]._items[P]._dynamicProperty[l];for(var b=0;b<n.length;b++)n[b]._callee.updateNode(n[b],l)}m.component.data[h]=y,m.component.data[u]=f,m._properties[h]=g,m._properties[u]=v,C.rmCx(p[c],d)}else if("forIn"===p[c].getAttribute("is")&&p[c]._items){var D=[];C.adCx(p[c],D);var L=p[c].getAttribute("key"),_=p[c].getAttribute("value"),S=p[c]._callee,w=S.component.data[_],T=S.component.data[L],E=S._properties[_],A=S._properties[L],M=p[c]._attributes.object;for(var N in p[c]._items)if(S.component.data[_]=M[N],S.component.data[L]=N,S._properties[_]=p[c]._items[N].itemProperty,p[c]._items[N]._dynamicProperty[l]){n=p[c]._items[N]._dynamicProperty[l];for(var k=0;k<n.length;k++)n[k]._callee.updateNode(n[k],l)}S.component.data[_]=w,S.component.data[L]=T,S._properties[_]=E,S._properties[L]=A,C.rmCx(p[c],D)}else{var F=[];if((n=p[c]._dynamicProperty[t._path]||[]).length){C.adCx(p[c],F);for(var I=0;I<n.length;I++)n[I]._callee.updateNode(n[I],t._path);C.rmCx(p[c],F)}}if(t._observers)for(var R=t._observers.toArrayLyte(),O=0;O<R.length;O++){var $=R[O],B={type:"change",oldValue:a,newValue:i,item:t._path};if($.callee&&$.callee.component)$.observer.value.call($.callee.component,B);else{var q=r||e;if(Array.isArray(q))for(var V=q.length,U=0;U<V;U++){var H=q[U];$.observer.value.call(H,B)}else $.observer.value.call(q,B)}}if(Array.isArray(t))for(var Y=0;Y<t.length;Y++)for(var j in t[Y])this.affectChanges(t[Y][j],!0,a?a[Y]?a[Y][j]:a[Y]:a,r,i?i[Y]?i[Y][j]:i[Y]:i);else for(var W in t){var z=a?a[W]:a,G=i?i[W]:i;"*"==W&&t[W].hasOwnProperty("_observers")&&(z=a,G=i),this.affectChanges(t[W],!0,z,r,G)}},skipArgProcessing:function(e,t,o){if(e.skipArgProcessing){var a=e.args=e.actArgs;a.shift();var r=a.indexOf("__lyteEvent__"),i=a.indexOf("__lyteNode__");-1!==r&&(a[r]=t),-1!==i&&(a[i]=o)}else e.args.shift()},getDV:function(e){for(var t,o,a=[],r=a,i=[],s="",l=[],n=[],p=[],c=0;c<e.length;c++)if("."!==e[c])if("["!==e[c]){if(('"'===e[c]||"'"===e[c])&&e[c++]===t){for(;"s"===e[c]&&"]"!=e[c];)c++;l.pop(),o=!0}"]"!==e[c]?s=s.concat(e[c]):(n.pop(),s.length&&(!0===o||isNaN(parseInt(s))?r.push(s):p.length&&(r=p.pop(),i.length&&Array.isArray(r[r.length-1])&&!r[r.length-1].length&&r.pop(),r.push(s),!n.length&&i.length&&i.shift())),!n.length&&i.length?(a.push(i.shift()),r=a):p.length&&!i.length&&(r=p.pop()),s="",o="")}else{for(n.push(c),s.length&&r.push(s);"s"===e[c+1];)c++;'"'===e[c+1]||"'"===e[c+1]?(l.push(e[c+1]),t=e[c+1],c++):i.length?(r.push([]),p.push(r),r=r[r.length-1]):(i.push([]),p.push(r),r=i[i.length-1]),s=""}else s.length&&r.push(s),s="";return s.length&&a.push(s),(l.length||n.length)&&console.log("check the syntax",l,n),a},ccDelay:[],callCC:function(){this.ccDelay.forEach((function(e){e.component&&e.actualConnectedCallback()})),this.ccDelay=[]},getDD:function(e,t){var o=e;return t.forEach((function(t,a){if(Array.isArray(t)){if(null==e)return;var r=C.getDD(o,t);if(null==r)return;e=e[r]}else{if(null==e)return;e=e[t]}})),e},processStatic:function(e){for(var t=e.innerHTML.split("__**"),o=[],a=0;a<t.length;a++)t[a].startsWith("--Lyte")?o.push(parseInt(t[a].substring(6))):o.push(void 0);return t.cc=o,t},findLastNodeL:function(e,t,o){var a,r=0;switch(null!=t&&(r=t),o.getAttribute("is")){case"for":o._helpers[r]&&(a=o._helpers[r][0]),e||o._forContent[0]&&(e=o._forContent[0][0]);break;case"forIn":o._helpers[o._keysArray[0]]&&(a=o._helpers[o._keysArray[0]][0]),e||o._forContent[o._keysArray[0]]&&(e=o._forContent[o._keysArray[0]][0]);break;case"if":case"switch":a=o._helpers[r],e||(e=o._caseContent[0]);break;case"component":return e=e._renderedComponent[e._currentComponent]||e}return e||(e=o._placeHolder),a&&e==a._placeHolder&&(e=this.findLastNodeL(void 0,void 0,a)),e},processAction:function(e){Array.from(e.querySelectorAll("[lyteaction]")).forEach((function(e){var o=e.attributes.lyteaction.value;e._boundEvents=C.fRP[o],delete C.fRP[o];var a=e._boundEvents._cx,r=e._boundEvents;delete r._cx;var i=r.componentName;for(var s in delete r.componentName,e._boundEvents)if(-1!==s.indexOf("-")){e._actions=e._actions||{},e._actions[s]=new CustomEvent(s),e._actions[s].processAction=e._boundEvents[s],e._boundEvents[s].actArgs.shift();var l=e._boundEvents[s].actArgs.indexOf("__lyteNode__");-1!==l&&(e._boundEvents[s].actArgs[l]=e),e._boundEvents[s].args=e._boundEvents[s].actArgs,delete e._boundEvents[s]}else{var n=t.deepCopyObject(e._boundEvents[s].args),p=n.splice(0,1)[0],c=w(p=p.startsWith("'")?p.replace(/'/g,""):p,n);e.setAttribute(s.startsWith("on")?s.substr(2):s,i+" => "+c),e._boundEvents[s].globalEvent||e.addEventListener(s,P)}e._boundEvents._cx=a,e.removeAttribute("lyteaction")}))},get:function(e,t,o,a){if(o||(o=[]),a&&a.hasOwnProperty(t))return nodeValue=a[t]._data,a[t]._dyn&&a[t]._dyn.forEach((function(e){o.push(e)})),nodeValue;try{var r=t.match(/([^[\]]+|\[\])/g),i=e;o.push(r[0]);for(var s=r[0].split("."),l=0;l<s.length;l++)e=e[s[l]];for(var n=1;n<r.length;n++){var p=r[n];if(p.startsWith(".")){for(var c=p.substring(1).split("."),d=0;d<c.length;d++)e=e[c[d]];o[o.length-1]=o[o.length-1]+p}else if(p.startsWith("'")||p.startsWith('"')||!isNaN(p))isNaN(p)?(o[o.length-1]=o[0]+"."+p.substring(1,p.length-1),e=e[p.substring(1,p.length-1)]):(o[o.length-1]=o[0]+"."+p,e=e[p]);else{o.length;var u=this.get(i,p,o);o[0]=o[0]+"."+u,e=e[u]}}return a&&(a[t]={},a[t]._data=e,a[t]._dyn=o),e}catch(e){return}},getNew:function(e,t){try{var o=t.match(/([^[\]]+|\[\])/g),a=e,r=o[0].split(".");if(o.length<2){if(r.length<2)return{context:a,lastKey:r[0]};for(var i=0;i<r.length-1;i++)e=e[r[i]];return{context:e,lastKey:r[i]}}for(var s=0;s<r.length;s++)e=e[r[s]];for(var l=1;l<o.length-1;l++){var n=o[l];if(n.startsWith("."))for(var p=n.substring(1).split("."),c=0;c<p.length;c++)e=e[p[c]];else if(n.startsWith("'")||n.startsWith('"')||!isNaN(n))e=e[n.substring(1,n.length-1)];else{e=e[this.get(a,n)]}}var d=o[l];if(d.startsWith(".")){for(var u=d.substring(1).split("."),h=0;h<u.length-1;h++)e=e[u[h]];d=u[h]}else d=d.startsWith("'")||d.startsWith('"')||!isNaN(d)?d.substring(1,d.length-1):this.get(a,d);return{context:e,lastKey:d}}catch(e){return}},componentGetData:function(e){return e?this.get(e):this.data},componentSetData:function(e,t){if("string"==typeof e)this.set(e,t);else if(e instanceof Object)for(var o in e)this.set(o,e[o])},componentGetMethods:function(e){return e?this.methods[e]:this.methods},componentHasAction:function(e){return!(!e||!this.$node._actions[e])},componentSetMethods:function(e,t){if("string"==typeof e)this.methods[e]=t;else if(e instanceof Object)for(var o in e)this.methods[o]=e[o]},render:function(e,o,a){if(e){var r=p(e);if(o&&r.setData(o),a){var i=void 0;(i="string"==typeof a?document.querySelector(a):a)?(i.appendChild(r),r._callee=r.getCallee?r.getCallee(i):void 0):t.error("LC008",a)}return r}t.error("LC007")},String:{cache_c:{},cache_d:{},upperCaseFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},lowerCaseFirstLetter:function(e){return e.charAt(0).toLowerCase()+e.slice(1)},toCamelCase:function(e){return this.cache_c[e]||(this.cache_c[e]=e.replace(/(-\w)/g,(function(e){return e[1].toUpperCase()}))),this.cache_c[e]},dasherize:function(e){return this.cache_d[e]||(this.cache_d[e]=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()),this.cache_d[e]}},appendChild:function(e,t){C.ignoreDisconnect=!0,e.appendChild(t),C.ignoreDisconnect=!1},replaceWith:function(){var e=Array.from(arguments),t=e.shift();C.ignoreDisconnect=!0;for(var o,a=t.parentNode,r=0;o=e[r];r++)a.insertBefore(o,t);t.remove(),C.ignoreDisconnect=!1},insertBefore:function(e,o,a){if(C.ignoreDisconnect=!0,!a){if(!e)return t.error("LC010"),void(C.ignoreDisconnect=!1);a=e.parentNode}c(a,o,e||null),C.ignoreDisconnect=!1},insertAfter:function(){var e=Array.from(arguments),t=e.shift();C.ignoreDisconnect=!0,t.after.apply(t,e),C.ignoreDisconnect=!1},executeMethod:function(){var e=Array.prototype.slice.call(arguments,1),o=C.String.toCamelCase(arguments[0]);if(this.methods[o])return this.methods[o].apply(this,e);t.error("LC009",o,this.$node.tagName)},getProperData:function(e){var o=e.dataType,a=e.attr,r=e.newValue,i=e.tagName;switch(o){case"boolean":r=!(!r||"false"===r);break;case"object":try{(r=JSON.parse(r))instanceof Object||t.warn("data type of the value provided for attribute "+a+" of "+i+" is not valid")}catch(e){return void t.warn("attribute "+a+" is not a valid JSON string.")}break;case"array":try{(r=JSON.parse(r))instanceof Array||t.warn("data type of the value provided for attribute "+a+" of "+i+" is not valid")}catch(e){return void t.warn("attribute "+a+" is not a valid JSON string.")}break;case"number":var s=+r;if(r!==s+"")return void t.warn("data type of the value provided for attribute "+a+" of "+i+" is not valid");r=s}return e.newValue=r,!0},cssEscape:function(e){return e?e.replace(/['"]/g,"\\$&"):e}};t.typeCast=L.typeCast,t.getDataType=L.getDataType,f.chromeBugFix=function(){var e=u.match(/Chrom(e|ium)\/([0-9]+)\./);(e=e?parseInt(e[2],10):0)>62&&(this.chI=[],document.addEventListener("focus",(function(e){var t=e.target;"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&"DIV"!==t.tagName||-1==Lyte.Component.chI.indexOf(t)&&Lyte.Component.chI.push(t)}),!0),this.chromeBugFix=function(){var e=Lyte.Component.chI,t=e.length,o=["_callee","_attributeDetails","_attributes","_removedAttributes","_yields","_rA","_cx"],a=[],r=[];document.querySelectorAll("[lyte-keep-alive]").forEach((function(e,t){for(var o in e._renderedComponent)r.push.apply(r,Array.from(e._renderedComponent[o].querySelectorAll("input")))}));for(var i,s=t-1;i=e[s];s--)document.compareDocumentPosition(i)%2&&-1==r.indexOf(i)&&(e.splice(s,1),i.remove(),a.push(i),i._rA=i._rA||[],i._rA.forEach((function(e){e.ownerElement=void 0})),o.forEach((function(e){i[e]=void 0})),Array.from(i.attributes).forEach((function(e){i.removeAttribute(e.nodeName)})))},Lyte.addEventListener("afterRouteTransition",(function(){Lyte.Component.chromeBugFix()})),Lyte.Router||setInterval((function(){Lyte.Component.chromeBugFix(),L.String.cache_c={},L.String.cache_d={}}),3e5))};var C=L;function _(e,o,a,r,i){for(var s=function(s){var l=o[s],x=l.type,P=l.position,b=S(e,P),D=void 0;switch(i&&(D=S(i,P)),x){case"text":var T=Lyte.Compile.getMustache(b.nodeValue),E=void 0;T&&(E=Lyte.Compile.getHelper(T));var A=T;E?(l.helperInfo=E,D&&(l.newHelperInfo=Lyte.Compile.getHelper(T,!0),C.replaceWithPf(D,document.createTextNode("__**--Lyte"+s+"__**")))):A&&(l.dynamicValue=A,l.newDynamicValue=C.getDV(A),D&&C.replaceWithPf(D,document.createTextNode("__**--Lyte"+s+"__**")));break;case"insertYield":if(D){D.appendChild(document.createTextNode("__**--Lyte"+s+"__**"));var M=D.attributes["yield-name"];l.yieldName=M?M.nodeValue:void 0}break;case"componentDynamic":if(D){for(D.appendChild(document.createTextNode("__**--Lyte"+s+"__**")),l.componentName=D.localName,n=Array.from(D.attributes),l.staticAttrs={},y=0;y<n.length;y++)l.staticAttrs[C.String.toCamelCase(n[y].nodeName)]=n[y].nodeValue;delete l.staticAttrs._lyteprop}break;case"attr":for(var N=[],k=[],F=b,I=l.attr=l.attr||{},R=0;R<F.attributes.length;R++)if(-1!==F.attributes[R].nodeValue.indexOf("{{")){var O=F.attributes[R].nodeValue,$=Lyte.Compile.getMustache(O),B=void 0;if($?B=Lyte.Compile.getHelper($):/{{.*}}/.test(O)&&!/\\{{.*}}/.test(O)&&(B=Lyte.Compile.splitMixedText(O)),B&&("action"===B.name||"method"===B.name)&&/^(onfocus|onfocusin|onfocusout|onresize|onscroll|onclick|ondblclick|onmousedown|onmouseup|onmousemove|onmouseover|onmouseout|onchange|onselect|onsubmit|onkeydown|onkeypress|onkeyup|oncontextmenu)$/.test(F.attributes[R].name)){I[F.attributes[R].name.substr(2)]={name:F.attributes[R].name.substr(2),camelCase:C.String.toCamelCase(F.attributes[R].name.substr(2)),helperInfo:B,newHelperInfo:Lyte.Compile.getHelper($,!0),globalEvent:!0};var q=t.deepCopyObject(B.args),V=q.splice(0,1)[0],U=w(V=V.startsWith("'")?V.replace(/'/g,""):V,q);F.setAttribute(F.attributes[R].name.substr(2),a+" => "+U),D&&D.setAttribute(F.attributes[R].name.substr(2),a+" => "+U),N.push(F.attributes[R].name)}else if(B||$){var H={};F.attributes[R].name.startsWith("lbind:")?(N.push(F.attributes[R].name),k.push({name:F.attributes[R].name.substring(6),value:F.attributes[R].nodeValue}),H.isLbind=!0,H.name=F.attributes[R].name.substring(6),H.camelCase=C.String.toCamelCase(H.name)):(H.name=F.attributes[R].name,H.camelCase=C.String.toCamelCase(H.name)),B?"lbind"===B.name?(H.dynamicValue=B.args[0],H.newDynamicValue=C.getDV(B.args[0]),H.isLbind=!0):(H.helperInfo=B,H.newHelperInfo=Lyte.Compile.getHelper($,!0)):(H.dynamicValue=$,H.newDynamicValue=C.getDV($)),!0,I[H.name]=H}}if(N.length)for(var Y=0;Y<N.length;Y++)F.removeAttribute(N[Y]),D&&D.removeAttribute(N[Y]);if(D){for(f in I)D.removeAttribute(f);D.setAttribute("_lyteAttr","__**--Lyte"+s+"__**","")}if(k.length)for(var j=0;j<k.length;j++)F.setAttribute(k[j].name,k[j].value);break;case"for":case"forIn":case"registerYield":"TEMPLATE"==b.tagName&&(l._ht=b.innerHTML),l._ht&&(b.innerHTML=l._ht,D&&(D.innerHTML=l._ht,r.splitTextNodes(D)),r.splitTextNodes(b));case"component":p=t._ie?b:b.content,D||"registerYield"!=x&&!b.hasAttribute("unbound")||(t._ms?((D=document.createElement("div")).innerHTML=l.actualTemplate?l.actualTemplate:b.outerHTML,D=D.childNodes[0],r.splitTextNodes(D)):D=b.cloneNode(!0));var W=void 0;c=D?t._ie?D:D.content:void 0;if(l.actualTemplate&&(p=C.getContentForIE(l.actualTemplate,r,void 0,t._ms?l:void 0),D&&(c=C.getContentForIE(l.actualTemplate,r))),_(p,l.dynamicNodes,a,r,c),c){var z=l.actualTemplate?c:D;l._sta=C.processStatic(z)}t._ms&&(l.actualTemplate?(l.templateContent=p.outerHTML,l._content&&(l.actualTemplate=l._content.innerHTML,delete l._content)):l.templateContent=b.outerHTML,b.innerHTML=""),l.actualTemplate&&(W=x,t._ie||((W=document.createElement("template")).setAttribute("is",x),W.innerHTML=p.innerHTML,r.splitTextNodes(W),r._depthTemp.content.appendChild(W)),(o[s-1]&&o[s-1].position.toString()===o[s].position.toString()?o[s-1]:o[s])._depthTemp=W),D&&(l._args={},"registerYield"===x?C.replaceWithPf(D,document.createTextNode("__**--Lyte"+s+"__**")):"component"===x?C.replaceWithPf(D,document.createTextNode((D.hasAttribute("_lyteattr")?D.getAttribute("_lyteattr"):"")+"__**--Lyte"+s+"__**")):C.replaceWithPf(D,document.createTextNode("__**--Lyte"+s+"__**")),Array.from(D.attributes).forEach((function(e){l._args[e.nodeName]=e.nodeValue}))),l._ht&&(l._ht=b.cloneNode(!0),r._helperTemplate.content.append(l._ht),b.innerHTML="");break;case"if":case"switch":"TEMPLATE"==b.tagName&&(l._ht=b.innerHTML),l._ht&&(b.innerHTML=l._ht,D&&(D.innerHTML=l._ht,r.splitTextNodes(D)),r.splitTextNodes(b)),b;var G=void 0;if(c=D?t._ie?D:D.content:void 0,l.actualTemplate&&(b=C.getContentForIE(l.actualTemplate,r,void 0),D)){var K=C.getContentForIE(l.actualTemplate,r);c=t._ie?K:K.content}if(d="default",t._ms){for(u={},m=t._ed?b.content.childNodes:b.childNodes,y=0;y<m.length;y++)"TEMPLATE"===m[y].tagName&&(m[y].getAttribute("case")?u[m[y].getAttribute("case")]=m[y]:m[y].hasAttribute("default")&&(h=m[y]));for(f in l.cases){var Z=void 0;v=C.getContentForIE(u[f],void 0,!0),c&&(Z=C.getContentForIE(c.querySelector("[case='"+L.cssEscape(f)+"']"))),"TEMPLATE"==v.tagName&&(l.cases[f]._ht=v.innerHTML),l.cases[f]._ht&&(v.innerHTML=l.cases[f]._ht,Z&&(Z.innerHTML=l.cases[f]._ht,r.splitTextNodes(Z)),r.splitTextNodes(v)),_(v,l.cases[f].dynamicNodes,a,r,Z?C.getContentForIE(Z):void 0),u[f].remove(),c&&(l.cases[f]._sta=C.processStatic(Z)),l.cases[f].templateContent=u[f].outerHTML}if(l[d].dynamicNodes){var X=void 0;v=C.getContentForIE(h,void 0,!0),c&&(X=c.querySelector("[default]")),"TEMPLATE"==v.tagName&&(l[d]._ht=v.innerHTML),l[d]._ht&&(v.innerHTML=l[d]._ht,X&&(X.innerHTML=l[d]._ht,r.splitTextNodes(X)),r.splitTextNodes(v)),_(v,l[d].dynamicNodes,a,r,X?C.getContentForIE(X):void 0),h.remove(),l[d].templateContent=h.outerHTML,c&&(l[d]._sta=C.processStatic(X))}}else{for(var J in g=b.content||b,l.cases){var Q=void 0;c&&(Q=C.getContentForIE(c.querySelector("[case='"+L.cssEscape(J)+"']"))),"TEMPLATE"==(v=C.getContentForIE(g.querySelector("[case='"+C.cssEscape(J)+"']"),void 0,!0)).tagName&&(l.cases[J]._ht=v.innerHTML),l.cases[J]._ht&&(v.innerHTML=l.cases[J]._ht,Q&&(Q.innerHTML=l.cases[J]._ht,r.splitTextNodes(Q)),r.splitTextNodes(v)),_("TEMPLATE"===v.tagName?v.content:v,l.cases[J].dynamicNodes,a,r,Q),c&&(l.cases[J]._sta=C.processStatic(Q)),l.cases[J]._ht&&(l.cases[J]._ht=v.cloneNode(!0),r._helperTemplate.content.append(l.cases[J]._ht),v.innerHTML="")}if(l[d].dynamicNodes){var ee=void 0;c&&(ee=C.getContentForIE(c.querySelector("[default]"))),"TEMPLATE"==(v=C.getContentForIE(g.querySelector("[default]"),void 0,!0)).tagName&&(l[d]._ht=v.innerHTML),l[d]._ht&&(v.innerHTML=l[d]._ht,ee&&(ee.innerHTML=l[d]._ht,r.splitTextNodes(ee)),r.splitTextNodes(v)),_("TEMPLATE"===v.tagName?v.content:v,l[d].dynamicNodes,a,r,ee),c&&(l[d]._sta=C.processStatic(ee)),l[d]._ht&&(l[d]._ht=v.cloneNode(!0),r._helperTemplate.content.append(l[d]._ht),v.innerHTML="")}}l.actualTemplate&&(G=x,t._ie||((G=document.createElement("template")).setAttribute("is",x),G.innerHTML=b.innerHTML,r.splitTextNodes(G),r._depthTemp.content.appendChild(G)),o[s-1]&&o[s-1].position.toString()===o[s].position.toString()?o[s-1]._depthTemp=G:o[s]._depthTemp=G),D&&C.replaceWithPf(D,document.createTextNode("__**--Lyte"+s+"__**")),l._ht&&(l._ht=b.cloneNode(!0),r._helperTemplate.content.append(l._ht),b.innerHTML="")}},l=0;l<o.length;l++){var n,p,c,d,u,h,m,y,f,g,v;s(l)}}function S(e,o){for(var a=e,r=0;r<o.length;r++)a="TEMPLATE"!=a.tagName||t._ie?a.childNodes[o[r]]:a.content.childNodes[o[r]];return a}function w(e,t){for(var o=0;o<t.length;o++)t[o]&&"object"===_typeof(t[o])&&(t[o]=w(t[o].value.name,t[o].value.args));return e?e+"("+t.toString()+")":t.toString()}customElements.define("lyte-safari-test-component",m),document.createElement("div").innerHTML="<lyte-safari-test-component t></lyte-safari-test-component>",f.render=C.render,f.insertBefore=C.insertBefore,f.insertAfter=C.insertAfter,f.replaceWith=C.replaceWith,f.appendChild=C.appendChild,C.tDiv=p("div"),C.tDiv.setAttribute("id","dummy-templates-div"),C.tDiv.setAttribute("style","display:none"),C.hDiv=p("div"),C.hDiv.setAttribute("id","keep-alive-div"),C.hDiv.setAttribute("style","display:none"),C.h1Div=p("div"),C.h1Div.setAttribute("id","lyte-helper-div"),C.h1Div.setAttribute("style","display:none"),C.lyteComponentsDiv=p("div"),C.lyteComponentsDiv.setAttribute("id","lyte-components-div"),Set.prototype.toArrayLyte=function(){return"Set"===this.constructor.name?Array.from(this):Array.from(this._values)},"complete"===document.readyState||"interactive"===document.readyState?x():document.addEventListener("DOMContentLoaded",(function(e){x()}),!0),C.registerHelper("unbound",(function(e){return e})),C.registerHelper("action",(function(e,t,o,a){o?(e._actions=e._actions?e._actions:{},e._actions[t]||(this.createCustomEvent(t,e,a),e.removeAttribute(t))):this.createEventListeners(e,t,a)})),C.registerHelper("lbind",(function(e){return this.getData(e)})),C.registerHelper("method",(function(e,o,a){e=arguments[0],o=arguments[1],a=arguments[2];var r=arguments[0].component,i=o?o.ownerElement:null,s=arguments[1].nodeName;o=null;var l=Array.prototype.slice.call(arguments,2),n=function(){var e=this.$node,o=[];C.adCx(e,o);var i=this.$node.processArgs(this.$node._callee,{helperInfo:{args:l}},[],void 0,this.$node),s=i.splice(0,1)[0];C.rmCx(e,o);var n=Array.from(arguments),p=i.concat(n);if(r.methods[s])return r.methods[s].apply(r,p);t.error("LC009",a,r.$node.tagName)};if(!i)return n;i.set?i.component.methods[C.String.toCamelCase(s)]=n:i.setMethods(C.String.toCamelCase(s),n)})),C.registerHelper("unescape",(function(e,t,o){if(C.ffr)return e;if(Lyte.Security.ignoreSanitizer){var a=document.createElement("div");return a.innerHTML=e,a}if(t&&Object.keys(t)&&Object.keys(t).length>0){if(Object(t.GLOBAL_TAGS).length>0)-1!=(s=t.GLOBAL_TAGS.indexOf("link-to"))&&t.GLOBAL_TAGS.splice(s,1);if(t&&t.GLOBAL_ATTRIBUTES&&Object.keys(t.GLOBAL_ATTRIBUTES).length>0)for(var r=["yield-name","lt-prop-route","lt-prop-dp","lt-prop-fragment","lt-prop-qp","lt-prop","lt-prop-class","lt-prop-id","lt-prop-rel","lt-prop-title","lt-prop-style","lt-prop-target","lt-prop-td","lt-prop-custom","lt-prop-target","lt-prop-id","lt-prop-class","lt-prop-style","lt-prop-rel","lt-prop-title"],i=0;i<r.length;i++){var s;-1!=(s=t.GLOBAL_ATTRIBUTES.indexOf(r[i]))&&t.GLOBAL_ATTRIBUTES.splice(s,1)}}if(t&&t.GLOBAL_TAGS){null==t.GLOBAL_ATTRIBUTES&&(t.GLOBAL_ATTRIBUTES=[]);for(var l=Array.from(t.GLOBAL_TAGS),n=[],p=0;p<l.length;p++){L._registeredComponents[l[p]]?n=L._registeredComponents[l[p]].observedAttributes:Lyte.registeredCustomComponent[l[p]]&&(n=Lyte.registeredCustomComponent[l[p]].observedAttributes?Lyte.registeredCustomComponent[l[p]].observedAttributes:[]);for(i=0;i<n.length;i++)-1==t.GLOBAL_ATTRIBUTES.indexOf(n[i])&&t.GLOBAL_ATTRIBUTES.push(n[i])}}var c=document.createElement("div");if(o&&Object.keys(o).length)if(t&&Object.keys(t).length){Lyte.Security.addGlobalObject(o,t);var d=o.sanitize(e);Lyte.Security.removeGlobalObject(o,t)}else d=o.sanitize(e);else if(t&&Object.keys(t).length){Lyte.Security.addGlobalObject(Lyte.Security._ourSanitizerInstance_,t);d=Lyte.Security._ourSanitizerInstance_.sanitize(e);Lyte.Security.removeGlobalObject(Lyte.Security._ourSanitizerInstance_,t)}else d=Lyte.Security._ourSanitizerInstance_.sanitize(e);return c.innerHTML=d,c})),C.registerHelper("escape",(function(e,t){return"url"==t?ZSEC.Encoder.encodeForHTMLAttribute(e):"js"==t?ZSEC.Encoder.encodeForJavaScript(e):"css"==t?ZSEC.Encoder.encodeForCSS(e):e})),C.registerHelper("debugger",(function(){})),C.registerHelper("log",(function(){console.log.apply(e,Array.from(arguments))})),C.registerHelper("ifEquals",(function(e,t){return e===t})),C.registerHelper("if",(function(e,t,o){return e?t:o})),C.registerHelper("negate",(function(e){return!e})),C.registerHelper("ifNotEquals",(function(e,t){return e!==t})),C.registerHelper("concat",(function(){for(var e="",t=arguments.length,o=0;o<t;o++)null!=arguments[o]&&(e+=arguments[o]);return e})),r(HTMLElement.prototype,"setData",{enumerable:!1,value:function(e,t){if(this._initProperties=this._initProperties||{},"string"==typeof e)this._initProperties[e]=t;else if(e instanceof Object)for(var o in e)this._initProperties[o]=e[o]}}),r(HTMLElement.prototype,"setMethods",{enumerable:!1,value:function(e,t){if(this._initMethods=this._initMethods||{},"string"==typeof e)this._initMethods[e]=t;else if(e instanceof Object)for(var o in e)this._initMethods[o]=e[o]}}),C.registerHelper("encAttr",(function(e){return ZSEC.Encoder.encodeForHTMLAttribute(encodeURIComponent(e))})),C.registerHelper("expHandlers",(function(e,t,o,a){var r=arguments.length;if("++"==t){if("postfix"==o)return e++;if("prefix"==o)return++e}else if("--"==t){if("postfix"==o)return e--;if("prefix"==o)return--e}else{if("=="==t)return e==o;if("==="==t)return e===o;if("!="==t)return e!=o;if("!=="==t)return e!==o;if("&&"==t)return e&&o;if("||"==t)return e||o;if("+"==t)return r>2?e+o:e;if("-"==t)return r>2?e-o:-e;if("*"==t)return e*o;if("/"==t)return e/o;if("%"==t)return e%o;if("<"==t)return e<o;if(">"==t)return e>o;if("<="==t)return e<=o;if(">="==t)return e>=o;if("|"==t)return e|o;if("&"==t)return e&o;if("!"==t)return!e;if("="==t)return e=o;if("+="==t)return e+o;if("-="==t)return e-o;if("*="==t)return e*o;if("/="==t)return e/o;if("?:"==t)return e?o:a}})),f.register("lyte-event-listener",{_template:'<template tag-name="lyte-event-listener"></template>',_dynamicNodes:[],_observedAttributes:["eventName"],init:function(){var e=this,o=t.addEventListener(this.get("eventName"),(function(){var t=Array.prototype.slice.call(arguments);t.splice(0,0,"on-fire"),e.throwEvent.apply(e,t)}));this.regId=o},data:function(){return{eventName:t.attr("string")}},didDestroy:function(){t.removeEventListener(this.regId)}}),f.registerCustomPropHandler("ltProp"),f.shouldIgnoreDisconnect=function(){return C.ignoreDisconnect},f.addLyteEventListener=function(e,t,o,a){return e._lyteEvents=e._lyteEvents||{},e._lyteEvents[t]=e._lyteEvents[t]||[],t+"-"+e._lyteEvents[t].push({func:o,fromEventListener:!0,context:a})},f.removeLyteEventListener=function(e,o){if(o){var a=o.split("-"),r=(a[0],parseInt(a[1]));e._lyteEvents&&e._lyteEvents[a[0]]&&!isNaN(r)?e._lyteEvents[a[0]][a[1]-1]={}:t.error("Invalid listenerId / listener is not available")}else t.error("No listenerId provided")},f.throwEvent=C.throwEvent,C.hasLyteEvents=function(e,t){return!(!e._lyteEvents||!e._lyteEvents[t])},C.handleLyteEvents=function(t,o){for(var a,r=t._lyteEvents[o.type],i=0;i<r.length;i++)if(r[i].func&&(!1===r[i].func.call(r[i].context?r[i].context:e,o)||o.cancelBubble)){a=!0;break}return a&&o.stopPropagation(),a},Object.defineProperty(e,"LyteComponent",{get:function(){return t.warn("Usage of LyteComponent is deprecated. Use Lyte.Component instead"),L}}),f.chromeBugFix(),C.booleanAttrList=["async","autocomplete","autofocus","autoplay","border","challenge","checked1","compact","contenteditable","controls","default","defer","disabled","formNoValidate","frameborder","hidden","indeterminate","ismap","loop","multiple","muted","nohref","noresize","noshade","novalidate","nowrap","open","readonly","required","reversed","scoped","scrolling","seamless","selected","sortable","spellcheck","translate"],Lyte.$.requiredMixins.component=function(e,t){var o=[],a={},r={},i={};o.push(e),t.forEach((function(e){var t=e,s=L._registeredComponents[t];o.length&&L.dataFromMixin(o,a,r,i),s._actions=Object.assign(s._actions,a);var l=Object.assign(s._methods,r);delete i.methods,L.updateCustomCrmComponent(i,s),s._methods=l,L._registeredComponents[t]=s}))},Lyte.Security.addGlobalObject=function(e,t){for(var o in t)Array.isArray(t[o])&&t[o].forEach((function(t){-1==e["_"+o].indexOf(t)&&e["_"+o].push(t)}))},Lyte.Security.removeGlobalObject=function(e,t){for(var o in t)Array.isArray(t[o])&&t[o].forEach((function(t){var a=e["_"+o].indexOf(t);-1!=a&&e["_"+o].splice(a,1)}))},Lyte.Compile.getTrimmedContent=function(e,t,o){var a=e;if(o){t=[];for(var r=o.parentNode;t.unshift(this.getArrayIndex(r.childNodes,o)),r=r.parentNode,o=o.parentNode,r;);}for(var i=0;i<t.length;i++){for(var s=e.childNodes.length-1;s>t[i];s--)e.childNodes[s].remove();e=e.childNodes[t[i]]}return a},Lyte.Compile.getArrayIndex=function(e,t){for(var o=0;o<e.length;o++)if(e[o]===t)return o},Lyte.Compile.splitMixedText=function(e){for(var t=[],o=0,a={name:"concat",args:[]},r=0;r<e.length;r++){var i=r;if("\\"!==e[r-1]&&"{"===e[r]&&"{"===e[++r])t.push("{{"),a.args.push("'"+e.substr(o,i-o)+"'"),o=r+1;else if("}"===e[r]&&"}"===e[++r]&&t.length){t.pop(o);var s=e.substr(o,i-o),l=this.getHelper(s);l?(s=l,a.args.push({type:"helper",value:s})):a.args.push(s),o=r+1}}return o<e.length&&a.args.push("'"+e.substr(o,e.length-o)+"'"),a},Lyte.Compile.getHelper=function(e,t){var o=/\((?:[^)]*|(?:(?:"(?:[^"\\]|\\.)*?")|(?:'([^'\\]|\\.)*?')|[\w\s!@#$%^&*)([\]+=.,_-]*?)*?)\)$/.exec(e);if(o)return this.getHelperInfo(e,o,t)},Lyte.Compile.getHelperInfo=function(e,t,o){var a={};a.name=e.substr(0,t.index).replace(/\s/g,""),t=t?t[0].trim():t;var r=this.getHelperArgs(t.substr(1,t.length-2),o);return!1!==r&&(a.args=r,a)},Lyte.Compile.getHelperArgs=function(e,t){for(var o=[],a=[],r=0,i=0;i<e.length;i++)if(o.length||","!==e.charAt(i))"("===e.charAt(i)?"'"!=o[o.length-1]&&'"'!=o[o.length-1]&&(o.push(e.charAt(i)),e.charAt(i)):")"===e.charAt(i)?"("===o[o.length-1]&&o.pop():"'"===e.charAt(i)&&"\\"!==e.charAt(i-1)?"'"===o[o.length-1]?o.pop():'"'!==o[o.length-1]&&(o.push(e.charAt(i)),e.charAt(i)):'"'===e.charAt(i)&&"\\"!==e.charAt(i-1)&&('"'===o[o.length-1]?o.pop():"'"!==o[o.length-1]&&(o.push(e.charAt(i)),e.charAt(i)));else{var s=e.substr(r,i-r);(s=s.trim())&&s.startsWith('"')&&s.endsWith('"')&&(s="'"+(s=s.slice(1,-1))+"'"),s=this.getHelperArgValue(s,t),a.push(s),r=i+1}if(o.length)return!1;var l=e.substr(r,e.length-r);(l=l.trim())&&l.startsWith('"')&&l.endsWith('"')&&(l="'"+(l=l.slice(1,-1))+"'");try{l=this.getHelperArgValue(l,t)}catch(e){return!1}if(a.push(l),t){var n=[];a.forEach((function(e){"string"==typeof e&&"'"!==e[0]&&"event"!==e&&"this"!==e?n.push(C.getDV(e)):n.push(e)})),a=n}return a},Lyte.Compile.getHelperArgValue=function(e,t){switch(e){case"undefined":return;case"true":return!0;case"false":return!1;case"null":return null;case"":return;default:return e&&e.startsWith("'")&&e.endsWith("'")?e=(e=e.replace(/\\\'/g,"'")).replace(/\\\"/g,'"'):/\([\w\s,')(]*/.test(e)?{type:"helper",value:this.getHelper(e,t)}:isNaN(e)?e:parseInt(e)}},Lyte.Compile.getMustache=function(e){if(e=e&&"string"==typeof e?e.trim():e,/^{{(?=[\s]*[\w-_]+)/.test(e)){var t=e.match(/{{[a-zA-Z0-9_.[\]()]*(?![\\])}}/g);if(t&&t.length>1)return;if(!this.syntaxCheck(e)||!/{{[^}]*?(?:(?:('|")[^\1]*?\1)[^}]*?)*}}$/.test(e))return;var o=e.match(/[\w!@#$%^&*)(+=.,_-]+[\s]*[(]{0,1}(?:"([^"]|\\")*?"|'([^']|\\')*?'|[\w\s!@#$%^&*)([\]+=.,_-]*?)*?[)]{0,1}[\s]*(?=}})/g);if(o&&o.length>1)return;return o=o?o[0].trim():o}},Lyte.Compile.syntaxCheck=function(e){for(var t,o=[],a=0;a<e.length;a++)"'"===e[a]?"'"===t&&"\\"!==e[a-1]?(o.pop(),t=void 0):o.length||(t=e[a],o.push(t)):'"'===e[a]&&('"'===t&&"\\"!==e[a-1]?(o.pop(),t=void 0):o.length||(t=e[a],o.push(t)));return!o.length},L.pendingViewPortElements=[],L.isInViewPort=function(t){var o=t.getBoundingClientRect();return o.top>=0&&o.left>=0&&o.bottom<=(e.innerHeight||document.documentElement.clientHeight)&&o.right<=(e.innerWidth||document.documentElement.clientWidth)},L.executePendingViewPort=function(){if(L.pendingViewPortElements.length){for(var e=Array.from(L.pendingViewPortElements),t=[],o=e.length-1;o>=0;o--)(C.isInViewPort(e[o]._dummyViewPortF)||C.isInViewPort(e[o]._dummyViewPortL))&&(e[o]._dummyViewPortF=e[o]._dummyViewPortL=void 0,t.push(L.pendingViewPortElements.splice(o,1)[0]));C.isViewPortPending=!1;for(var a=0;a<t.length;a++)t[a].setData("lyteViewPort",!1);t.length&&requestAnimationFrame((function(){requestAnimationFrame((function(){C.executePendingViewPort()}))}))}},e.addEventListener("resize",(function(){requestAnimationFrame((function(){requestAnimationFrame((function(){C.executePendingViewPort()}))}))})),document.addEventListener("scroll",(function(){var e=f.viewPortSettings.debounce;e?(C.viewPortScrollDebounce&&clearTimeout(C.viewPortScrollDebounce),C.viewPortScrollDebounce=setTimeout((function(){requestAnimationFrame((function(){requestAnimationFrame((function(){C.executePendingViewPort()}))})),C.viewPortScrollDebound=void 0}),e)):requestAnimationFrame((function(){requestAnimationFrame((function(){C.executePendingViewPort()}))}))}),!0),L.core={},L.core._constructor=D,L.core._registerComponent=D._registerComponent,L.core.registerComponent=C.registerComponent,L.core.executeBlockHelpers=D.prototype.executeBlockHelpers,L.core.updateForHelper=D.prototype.updateForHelper,L.core.updateForInHelper=D.prototype.updateForInHelper,L.core.updateSwitchHelper=D.prototype.updateSwitchHelper,f.viewPortSettings={debounce:0,executePendingViewPortElements:function(){L.executePendingViewPort()}}}(window),Lyte.registerErrorCodes({LD01:"Primary key value might be missing in the response data that is received, {0}",LD02:"{0} - {1} is not registered",LD03:"Cannot set the error {0} for {1}",LD04:"No such record to merge, {0}",LD05:"Model( {0} ) of related property - {1} not found in model - {2}",LD06:"Backward relation not present in model( {0} ), for the property {1} of model( {2} )",LD07:"{0} type not handled in handleArrayOperations",LD08:"{0} {1} will be deprecated from next version {2}",LD09:"deserializeKey cannot be processed for payload with more than two keys. Please use payloadKey callback instead or try modifying the same in normalizeResponse callback",LD10:"Response data not in a format lyte data store expects",LD11:"Deprecation Warning! findRecord response payload will not accept an array. It will be deprecated from the next version",LD12:"Response ( {0} ) is not in a format, lyte data store expects",LD13:"Response doesn't contain payload data in {0} (modelName) key of the response object",LD14:"Cannot register {0} - {1}, as it already exists.",LD15:"Primary key value might be missing in the response data that is received, {0}",LD16:"Primary key value expected for the record, {0}",LD17:"Record with the primary key value already exists",LD18:"No { 0 } present",LD19:"Deprecation Warning! findAll will not accept response payload values other than an array or any empty value. Current implementation which allows this will be deprecated from the next version",LD20:"Record cannot be saved as a state when it is not either a new or a modified record or in a error state.",LD21:"No such state ( {0} ) saved for the record.",LD22:"For create / createRecord, response with a primary key value should be received",LD23:"PrimaryKey field {1} in {0} cannot have default value",LD24:"Response couldn't be parsed, {0}"});var $Record=function(){Object.assign(this,{inIDB:!1,isModified:!1,isNew:!1,isDeleted:!1,isError:!1,events:[],validatedOnCreate:!0,error:{}})},Record=function(e,t){var o=store.modelFor(e);Object.assign(this,t),Object.defineProperties(this,{$:{writable:!0,value:new $Record}});var a=store.$.getpKVal(this,o);Object.defineProperties(this.$,{pK:{value:a,writable:!0},model:{value:o},record:{value:this},_attributes:{value:{},writable:!0},_relationships:{value:{},writable:!0},isDirty:{value:function(){var e,t=this.record;return!!t.$.isModified||!!(e=store.$.isDirty(t,this.model.relations)).length&&e}},undoStack:{value:store.$.genUnRedoStack(),writable:!0},redoStack:{value:store.$.genUnRedoStack(),writable:!0}});var r=store.$.saveParent;r&&this!==r&&store.$.defProp(this.$,"parent",r);var i=o._fldGrps.default,s=o._fldGrps.watch,l=o._fldGrps.hasMany;for(var n in i){var p=i[n],c=t[n];void 0!==c&&""!==c||(this[n]=store.$.getDefaultVal(this,p.default))}for(var d in s)Lyte.establishObjectBinding(this,d,!0);for(var u in l){var h=l[u];if(this.hasOwnProperty(u))this[u]=Array.isArray(this[u])?Array.from(this[u]):this[u];else if(store.modelFor(h.relatedTo)){var m=store.serializer[h.relatedTo];store.adapter.$.getFromAdapter(m,"initHasManyRelation",!0)&&(this[u]=[])}}var y=o._properties;Object.keys(y).length&&(this._bindings||store.$.defProp(this,"_bindings",new Set,!1,!0),this._bindings.add(y),store.$.establishObserverBindings(this,y))};Object.defineProperties($Record.prototype,{get:{value:function(e){return this.record[e]}},set:{value:function(e,t){return this.isDeleted?store.$.setRecErr(this,this.model._pK,"ERR17"):store.$.setData(this,e,t),this.record}},getDirtyAttributes:{value:function(){var e=[],t=this._attributes;if(Object.keys(t).length)for(var o in t)e.push(o);return e}},rollBackAttributes:{value:function(e){Array.isArray(e)||(e=[e]);for(var t=this.record,o=[],a=this.model,r=this._attributes,i=0;i<e.length;i++){var s=e[i];if(r.hasOwnProperty(s)){var l=a.fieldList[s],n=r[s];if("relation"==l.type)store.$.rllBckRecArr(n,t,a,l),(t.$.dN&&t.$.dN.hasOwnProperty(s)?t.$.dN[s]:new Map).forEach((function(e,o){store.$.deleteDeepNest(t,s,o)}));else store.$.cmpSet(t,s,n,!0);o.push(s),delete r[s],store.$.clrRecErr(this,s)}}if(Object.keys(this._attributes).length||(this.hasOwnProperty("dN")&&(!this.dN||Object.keys(this.dN).length)||t.$.isNew||store.$.removeParentNesting(t),store.$.cmpSet(this,"isModified",!1),this.isNew||store.$.deleteFromArray(a.dirty,this.get(a._pK))),o.length>0){var p=[t,o];this.emit("change",p),a.emit("change",p),this.undoStack=store.$.genUnRedoStack(),this.redoStack=store.$.genUnRedoStack()}}},rollBack:{value:function(e){var t=this.model,o=t._pK;e?this.rollBackState(e):(this.isModified&&(this.rollBackAttributes(this.getDirtyAttributes()),delete this._savedState),this.isDeleted?store.$.rollBackDelete(t,this.get(o)):this.isNew?store.$.rollBackNew(t,this.record,o):this.isError&&store.$.clrRecErr(this)),store.$.removeOnSave(this.model._name,this.record.$.pK)}},deleteRecord:{value:function(){var e=this.model,t=this.record;e._pK;store.$.removeFromStore(e,t.$.pK,void 0)}},destroyRecord:{value:function(e,t){return this.deleteRecord(),this.save(e,t,"destroyRecord")}},addEventListener:{value:function(e,t){return store.$.eventListeners.add(this,e,t)}},removeEventListener:{value:function(e){store.$.eventListeners.remove(this,e)}},emit:{value:function(e,t){store.$.eventListeners.emit(this,e,t)}},triggerAction:{value:function(e,t,o,a,r){var i=this.model,s=i.actions;return(s?s[e]:void 0)?store.adapter.$.handleAction(e,i,this.record,t,o,a,r):Promise.reject({code:"ERR18",message:Lyte.errorCodes.ERR18,data:e})}},save:{value:function(e,t,o,a){var r,i=this.model,s=this.record,l=this.isDirty(),n=o&&o.validateOnSave,p=o&&o.skipValidation,c=i.fieldList;if(this.isDeleted){if(!this.isNew)return store.adapter.$.del(i._name,s,!0,a,e,t)}else{if(this.isNew){var d=this;return p||s.$.validatedOnCreate&&!n||(r=store.$.validateRecord(this.record,c)),!p&&(0==r||d&&d.error&&Object.keys(d.error).length>0)?Promise.reject(d.error):store.adapter.$.create(i._name,s,!0,e,t)}if(this.isModified||l&&l.length){if(!p&&o&&n&&(r=store.$.validateRecord(this.record,c)),!p&&(0==r||s&&s.$&&s.$.isError))return Promise.reject(s.$.error);var u=store.$.updateJSON(this.record,i,l);return store.adapter.$.put(i._name,u,s,!0,e,t)}}return Promise.resolve()}},getInitialValues:{value:function(e){var t=!1;e?(Array.isArray(e)||(e=[e]),t=!0):e=this.getDirtyAttributes();for(var o={},a=this.record,r=this._attributes,i=0;i<e.length;i++)if(null!=a[e]&&a[e[i]].add){o[e[i]]=a[e[i]].slice(0);for(var s=r[e[i]],l=a[e[i]].model._pK,n=s.length-1;n>=0;n--)if("added"==s[n]._type)for(var p=0;p<s[n].records.length;p++){var c=store.$.getIndex(o[e[i]],l,s[n].records[p].$.pK);-1!=c&&o[e[i]].splice(c,1)}else if("removed"==s[n]._type)for(p=s[n].records.length-1;p>=0;p--)o[e[i]].splice(s[n]._indices[p],0,s[n].records[p]);else"changed"==s[n]._type&&(o[e[i]]=Array.isArray(s[n].records)?Array.from(s[n].records):s[n].records)}else o[e[i]]=r[e[i]];return t?o[e[0]]:o}},toJSON:{value:function(e){return Object.assign({},store.$.toJSON(this.model._name,this.record,e||!0))}},undo:{value:function(e,t){var o=this.undoStack._order_.length;for(t=t||(o?o-1:o);o-- >t;)store.$.unredoOp(1,this,e)}},getCurrentState:{value:function(){return this.undoStack._order_.length}},redo:{value:function(e){store.$.unredoOp(2,this,e)}},validate:{value:function(e){var t={},o=this.model.fieldList;Array.isArray(e)&&e.forEach((function(e,a){o[e]&&(t[e]=o[e])})),0==Object.keys(t).length&&(t=o);var a=this.record;store.$.validateRecord(a,t)}},saveState:{value:function(e){if(this.isNew||this.isModified){for(var t,o=this._savedState=this._savedState||{},a=e;!a;)t=Math.floor(1e5*Math.random()+1),a=o.hasOwnProperty(t)?a:t;var r=this.toJSON("state");store.$.defProp(r,"$",{},!1,!0),this.model._arrPk.forEach((function(e){delete r[e]}));var i=this.undoStack,s=this.redoStack,l=this._attributes;if(i&&Object.keys(i).length){var n=i._order_;i=r.$.undoStack=store.$.deepCopyStack(i),store.$.defProp(i,"_order_",Lyte.deepCopyObject(n),!1,!0)}if(s&&Object.keys(s).length){n=s._order_;s=r.$.redoStack=store.$.deepCopyStack(s),store.$.defProp(s,"_order_",Lyte.deepCopyObject(n),!1,!0)}return l&&Object.keys(l).length&&(r.$._attributes=store.$.deepCopyAttrs(this.model,l)),this._savedState[a]=r,a}Lyte.warn("LD20")}},clearState:{value:function(e){e?delete this._savedState[e]:this._savedState={}}},rollBackState:{value:function(e){var t=this._savedState,o=t?t[e]:void 0;o?(this.dN&&(this.dN={}),store.$.setData(this,o,void 0,{},!0),store.$.updateDn(this.record),this.undoStack=o.$.undoStack||store.$.genUnRedoStack(),this.redoStack=o.$.redoStack||store.$.genUnRedoStack(),this._attributes=o.$._attributes||{},store.$.checkAttrs(this.record),delete this._savedState[e]):Lyte.warn("LD21",e)}}});var Model=function(e,t){Object.assign(this,{_name:e,fieldList:{id:{type:"string",primaryKey:!0,defined:!1}},relations:{},_properties:{},_fldGrps:{default:{},hasMany:{},watch:{}},data:[],dirty:[],_deleted:new Map,events:{}}),store.$.defProp(this.data,"_recMap",new Map);var o=[];for(var a in t)store.$.registerField(this,a,t[a],o);this._pK||(this._pK="id"),this.isComp=!1;var r=this._pK.split(",");r.length>1&&(this.isComp=!0),this._arrPk=r,void 0!==Lyte&&Lyte.establishObserverBindings(o,!0,this._properties,this),store.$.defArrUtls(this.data),store.$.defUtls(this.data,this),store.$.defProp(this,"extends",store.$.extendModel)};Model.prototype.addEventListener=function(e,t){return store.$.eventListeners.add(this,e,t)},Model.prototype.removeEventListener=function(e){store.$.eventListeners.remove(this,e)},Model.prototype.emit=function(e,t){store.$.eventListeners.emit(this,e,t)},Model.prototype.on=function(e,t){return this.addEventListener(e,t)};var store={model:{},$:{request:{},toRelate:{},idbQueue:[],idbQ:{},idbQ2:{},nestScp:{},nestScpId:1,changeRelPkMaps:function(e,t,o){var a=e.$.model,r=a.relations;for(var i in r){r[i].forEach((function(r){var i,s=r.relKey,l=r.relType;if(e.hasOwnProperty(s)){var n=e[s];"hasMany"==(i=store.$.getBackwardRel(a,r,store.model[r.relatedTo])).relType&&("belongsTo"==l&&Lyte.isRecord(n)?n[i.relKey]&&n[i.relKey]._recMap&&n[i.relKey]._recMap.delete(t)&&n[i.relKey]._recMap.set(o,e):"hasMany"==l&&Array.isArray(n)&&n.forEach((function(a){Lyte.isRecord(a)&&a[i.relKey]&&a[i.relKey]._recMap&&a[i.relKey]._recMap.delete(t)&&a[i.relKey]._recMap.set(o,e)})))}}))}var s=e.$._relationships;for(var l in s){var n=s[l];for(var p in n){n[p].forEach((function(a){var r=a[p];Array.isArray(r)&&r._recMap&&r._recMap.delete(t)&&r._recMap.set(o,e)}))}}},updateNestScp:function(e){if(Lyte.isRecord(e)){var t=e._scpObj||{};for(var o in t){var a=t[o];Lyte.nestScp&&Lyte.nestScp.hasOwnProperty(a)&&(Lyte.nestScp[a].pK=e.$.pK)}}},getDefaultVal:function(e,t){return"function"!=typeof t?t:t.call(e)},deepValueChange:function(e,t,o,a){var r={emit:!1,attr:[],oldRec:{}};store.$.estAttrs(e,t,o,r,a),store.$.checkAttrs(e),store.$.changeCallbck(e,r)},updateDn:function(e){var t=e.$.model.relations;for(var o in t){t[o].forEach((function(t){var o=t.opts,a=t.relKey,r=t.relType;if(o&&o.deepNest&&e.hasOwnProperty(a)){var i=e[a];"belongsTo"==r&&(i.$.isModified||i.$.dN&&Object.keys(i.$.dN).length)?store.$.setDeepNest(e,a,i.$.pK,"updated"):"hasMany"==r&&Array.isArray(i)&&i.forEach((function(t){(t.$.isModified||t.$.dN&&Object.keys(t.$.dN).length)&&store.$.setDeepNest(e,a,t.$.pK,"updated")}))}}))}},genUnRedoStack:function(){var e={};return store.$.defProp(e,"_order_",[],!1),e},deepCopyStack:function(e){if(e&&"object"==(void 0===e?"undefined":_typeof(e)))for(var t in e=Object.assign({},e))if(Array.isArray(e[t])){var o=e[t]=Array.from(e[t]);o.forEach((function(e,t){o[t]=Object.assign(e)}))}return e},deepCopyAttrs:function(e,t){var o=e.fieldList;t=Object.assign({},t);for(var a in t){var r=t[a];o[a]&&"relation"==o[a].type&&Array.isArray(r)&&(r=t[a]=Array.from(r)).forEach((function(e,t){r[t]=Object.assign({},e),e.hasOwnProperty("records")&&e.records&&(e.records=Array.from(e.records)),e.hasOwnProperty("_indices")&&e._indices&&(e._indices=Array.from(e._indices))}))}return t},addTo_Del:function(e,t,o){var a={index:o,data:t};(e._deleted=e._deleted||new Map).set(t.$.pK,a)},scExtd:function(e,t,o,a){var r="adapter"==e?store.adapter:store.serializer;if(t)return r.hasOwnProperty(t)&&Lyte.warn("LD14",e,t),r[t]="adapter"==e?new Adapter(o,a,t):new Serializer(o,a,t),r.application&&"application"!=t&&(r[t].$super=r.application,r.application.__extendedBy.push(t)),r.application||"application"==t||(r.__toAddSuper=r.__toAddSuper||{},r.__toAddSuper.hasOwnProperty("application")||(r.__toAddSuper.application=[]),r.__toAddSuper.application.push(t)),r[t]},cB:function(e,t){return e.func.apply(e.scope,t.concat(e.name))},consArg:function(){for(var e=arguments,t=[],o=0;o<e.length;o++)t.push(e[o]);return t},cbScp:function(e,t,o){for(var a=(o=o?store.serializer:store.adapter)[e],r=o.application;;){if(a&&a[t]&&"function"==typeof a[t])return{scope:a,func:a[t],name:t};if(!a||!a.$super)return r&&r[t]&&"function"==typeof r[t]?{scope:r,func:r[t],name:t}:void 0;a=a.$super}},comparePk:function(e,t){var o=e.$.pK,a=void 0===o?"undefined":_typeof(o);if("string"==a||"number"==a)return o===t;if("object"==(void 0===o?"undefined":_typeof(o))){var r=Object.keys(o).length,i=0;for(var s in o)o[s]===t[s]&&i++;return r===i}},getpKVal:function(e,t){var o=(t=t||e.$.model)._arrPk;if(1==o.length)return e[o[0]];var a={};return o.forEach((function(t){a[t]=e[t]})),a},unredoOp:function(e,t,o){var a,r;1==e?(a=t.undoStack,r=t.redoStack):(a=t.redoStack,r=t.undoStack);var i=[],s={};if(o?(i=Array.isArray(o)?o:[o]).forEach((function(e){if(a[e].length)for(var t=a._order_.length-1;t>=0;t--){var o=a._order_[t],r=o.indexOf(e);if(r>-1){o.splice(r,1),o.length||a._order_.splice(t,1);break}}})):i=a._order_&&a._order_.length?a._order_.pop():i,i.length){for(var l=0;l<i.length;l++){var n,p=i[l];"update"==(n=a[p].pop())._type?n.hasOwnProperty("val")?store.$.setData(t,p,n.val,s):n.hasOwnProperty("records")&&store.$.setData(t,p,n.records,s):1==e&&"propAdd"==n._type?void 0!==Lyte?(s[p]={_type:"propDelete",val:t.record[p]},n.hasOwnProperty("val")&&store.$.setData(t,p,n.val,{}),Lyte.objectUtils?Lyte.objectUtils(t.record,"delete",p):delete t.record[p]):delete t.record[p]:2==e&&"propDelete"==n._type?(s[p]={_type:"propAdd"},store.$.setData(t,p,n.val,s)):"added"==n._type?t.record.$.get(p).remove(n.records,void 0,s):"removed"==n._type&&(store.$.rllBckRecArr([n],t.record,t.model,t.model.fieldList[p]),n._type="added",s[p]=n)}var c=Object.keys(s);for(l=0;l<c.length;l++){r[p=c[l]]=r[p]||[],r[p].push(s[p])}c.length&&r._order_.push(c)}},unregisterModel:function(e){var t=store.modelFor(e);if(t){t.data.length&&store.unloadAll(e);var o=t.extendedBy;if(o&&Object.keys(o).length)for(var a in o)store.unregisterModel(a);var r=t.extend;if(r)delete store.modelFor(r).extendedBy[e];delete store.model[e]}else Lyte.warn("LD02","Model ",e)},updateFieldValidation:function(e,t){var o=e.data,a=e.fieldList;o.forEach((function(e){var o=!!(e.$.error&&e.$.error.hasOwnProperty(t)&&e.$.error[t].hasOwnProperty("value")),r=o?e.$.error[t].value:void 0;store.$.clrRecErr(e.$,t),o?store.$.validateField(e,t,a[t],void 0,{old:!0,value:r}):store.$.validateField(e,t,a[t],void 0),o&&e.$.error&&0===Object.keys(e.$.error)&&e.$.set(t,r)}))},validateRelatedRecord:function(e,t,o){var a=store.model[o.relatedTo].fieldList;if(o&&o.opts&&e&&e.hasOwnProperty(t)&&o.opts&&"record"==o.opts.serialize){if("belongsTo"==o.relType&&Lyte.isRecord(e[t]))return this.validateRecord(e[t],a);if("hasMany"==o.relType&&Array.isArray(e[t])){var r=!0,i=this;return e[t].forEach((function(e,t){Lyte.isRecord(e)&&!1===i.validateRecord(e,a)&&(r=!1)})),r}}},validateRecord:function(e,t){var o,a=!0;for(var r in t)o=this.validateField(e,r,t[r],undefined),!0===a&&!1===o&&(a=!1);return!(!1===a||!0===e.$.isError&&e.$.error&&Object.keys(e.$.error).length)},validateField:function(e,t,o,a,r){var i,s=r&&r.old?r.value:e[t],l=e.$;if("relation"==o.type){if(!1===this.validateRelatedRecord(e,t,o))return!1,false}else if(o.mandatory&&!e.$.error.hasOwnProperty(t)&&(void 0===s||""===s||Array.isArray(s)&&0===s.length))store.$.setRecErr(l,t,{code:"ERR02",message:Lyte.errorCodes.ERR02,value:s});else if(i=!0,r||e.hasOwnProperty(t)&&!e.$.error.hasOwnProperty(t)){for(var n in o){var p=Lyte.checkProperty(n,s,t,o[n],e,void 0,Lyte.isRecord(e)?e.$.model._name:void 0);if(!0!==p){"object"==(void 0===p?"undefined":_typeof(p))&&(p.value=s),store.$.setRecErr(l,t,p),i=!1;break}}r&&i&&store.$.cmpSet(e,t,s,!0),i&&store.$.clrRecErr(l,t)}},partialData:function(e,t,o,a,r){var i=e[t];if(!i||!Array.isArray(i))return!0;i.partial||store.$.defPar(i);var s=i.partial=i.partial||new Map;s.get(o)||s.set(o,{});var l=!1;switch(s.get(o).type){case"added":"removed"==a&&(s.delete(o),l=!0);break;case"removed":"added"==a&&(s.delete(o),l=!0);break;case"modified":case"updated":if("added"==a)break;default:var n={type:a};r&&(n.polymorphicType=r),s.set(o,n)}return l&&!s.size?(s.size||store.$.deleteDeepNest(e,t,o),!0):void 0},removeParentNesting:function(e){var t=e.$.model,o=e.$.pK,a=t.relations;for(var r in a){a[r].forEach((function(a){var r,i,s,l,n=store.model[a.relatedTo];n&&((r=store.$.getBackwardRel(t,a,n))&&r.opts&&(i=r.opts.deepNest,s="partial"==r.opts.serialize,l=a.relKey?e[a.relKey]:store.$.getRelatedRecord(e,a.relatedTo,a.dummy)),i&&(Array.isArray(l)?l.forEach((function(e){Lyte.isRecord(e)&&store.$.deleteDeepNest(e,r.relKey,o)})):Lyte.isRecord(l)&&store.$.deleteDeepNest(l,r.relKey,o)),s&&(l&&!Array.isArray(l)&&(l=[l]),Array.isArray(l)&&l.forEach((function(e){var t=r.relKey?e[r.relKey]:void 0;t&&t.partial&&t.partial.get(o)&&t.partial.delete(o)}))))}))}},deleteDeepNest:function(e,t,o){var a=e.$.dN;a&&(a[t]&&void 0===o?delete a[t]:a[t]&&a[t].get(o)&&(a[t].delete(o),Object.keys(a[t]).length||delete a[t]),Object.keys(a).length||(delete e.$.dN,e.$.isModified||e.$.isNew||store.$.removeParentNesting(e)))},updateJSON:function(e,t,o){var a={},r=t._arrPk,i=e.$._attributes;for(var s in i)a[s]=e[s];var l=o;1==o&&(l=store.$.isDirty(e,t.relations)||[]);for(var n=0;n<l.length;n++)a[l[n]]=e[l[n]];return r.forEach((function(t){a[t]=e[t]})),a},removeDeepNest:function(e){if(Lyte.isRecord(e)&&(e.$.dN&&Object.keys(e.$.dN).length)){e.$.dN={};var t=e.$.model.relations;for(var o in t){t[o].forEach((function(t){var o=t.opts;if(o&&(o.deepNest||"partial"==o.serialize)){var a=e[t.relKey];Array.isArray(a)?a.forEach((function(e){Lyte.isRecord(e)&&(store.$.removeDeepNest(e),e.$.isNew||e.$.isModified||e.$.dN&&(!e.$.dN||0!=Object.keys(e.$.dN).length)||store.$.removeParentNesting(e))})):Lyte.isRecord(a)&&(store.$.removeDeepNest(a),a.$.isNew||a.$.isModified||a.$.dN&&(!a.$.dN||0!=Object.keys(a.$.dN).length)||store.$.removeParentNesting(a))}}))}}},addDeepNest:function(e,t){var o,a=t?store.model[e.$.model.extend]:e.$.model,r=e.$.pK,i=a.relations;for(var s in i){i[s].forEach((function(t){var i,s,l;if((o=t.relKey?e[t.relKey]:store.$.getRelatedRecord(e,t.relatedTo,t.dummy))&&((i=store.$.getBackwardRel(a,t,store.model[t.relatedTo]))&&i.opts&&(s=i.opts.deepNest,l="partial"==i.opts.serialize),s&&store.$.makeDirty("dirty",o,"updated",i,r),l&&e&&o)){var n=o;Array.isArray(n)?n.forEach((function(e){store.$.partialData(e,i.relKey,r,"modified")})):Lyte.isRecord(n)&&store.$.partialData(n,i.relKey,r,"modified")}}))}a.extend&&this.addDeepNest(e,!0)},getRelatedRecord:function(e,t,o){if(e){var a=e.$._relationships;if(a[t]&&a[t][o])return a[t][o]}},makeDirty:function(e,t,o,a,r){var i=a.relKey;Array.isArray(t)?t.forEach((function(e){store.$.setDeepNest(e,i,r,o)})):Lyte.isRecord(t)&&store.$.setDeepNest(t,i,r,o)},setDeepNest:function(e,t,o,a){var r=e.$.dN=e.$.dN||{},i=r[t]=r[t]||new Map;i.has(o)||i.set(o,{}),i.get(o).type=a,store.$.addDeepNest(e)},isDirty:function(e,t,o,a){var r=[];for(var i in t)for(var s=t[i],l=0;l<s.length;l++){if((i=s[l]).opts&&i.opts.serialize){var n=i.relKey,p=i.relType,c=e[n];if(o)if(o==store.$.getBackwardRel(a,i,store.model[i.relatedTo])&&a._name!=i.relatedTo)continue;if("record"==i.opts.serialize){if(store.$.isRelDirty(i,c,i)){r.push(n);continue}}else if("partial"==i.opts.serialize)if("hasMany"==p){if(c&&c.partial&&c.partial.size){r.push(n);continue}}else if(Lyte.isRecord(c)&&c.$.isModified||e&&e.$&&e.$.partial&&e.$.partial.hasOwnProperty(n)){r.push(n);continue}i.opts.deepNest&&e.$.dN&&e.$.dN[n]&&r.push(n)}}return r},isRelDirty:function(e,t,o){var a=e.relType,r=store.model[e.relatedTo],i=r.relations;if(!store.$.isEmpty(t))if("hasMany"==a&&Array.isArray(t)&&t.length){for(var s=t.length,l=0;l<s;l++)if(1==t[l].$.isModified)return!0;for(var n=0;n<s;n++){var p=t[n];if(this.isDirty(p,i,o,r).length)return!0}}else if("belongsTo"==a&&Lyte.isRecord(t)){if(1==t.$.isModified)return!0;if(this.isDirty(t,i,o,r).length)return!0}return!1},handleCachedResponse:function(e,t){var o=store.$.cachedBatch=store.$.cachedBatch||{},a=o[e]||[],r=0;return a.forEach((function(e,o){t.splice(e.ind+r++,0,e.data)})),delete o[e],t},addToCachedBatch:function(e){var t=store.$.currentBatch,o=store.$.cachedBatch=store.$.cachedBatch||{},a=o[t]=o[t]||[],r=(store.$.batch[t]||[]).length;a.push({ind:r,data:e})},establishToRelated:function(e,t){var o=e.$.model,a={};t.forEach((function(t){var r=store.peekRecord(t.model,t.pkVal);if(r){var i=r.$.model;store.$.getRelations(i,t.key,o,a),store.$.establishLink(a.forward,a.backward,r,e,void 0,!0)}}))},checkObjAndAddToArr:function(e,t,o){var a=o.length,r=-1;return e.forEach((function(e,i){var s=0;for(var l in o)e[l]==t[l]&&s++;s!=a||(r=i)})),-1==r&&e.push(t),r},addToRelate:function(e,t,o,a){var r=o.forward.relatedTo,i=store.$.toRelate[r]=store.$.toRelate[r]||new Map;i.has(a)||i.set(a,[]);var s=i.get(a),l={model:e,pkVal:t.$.pK,key:o.forward.relKey};s.push(l)},addOnSave:function(e,t,o,a,r,i){store.$.onSave=store.$.onSave||{};var s=store.$.onSave[e]=store.$.onSave[e]||{},l=s[t[r]]=s[t[r]]||{},n=t[o]||[];"belongsTo"==a.relType&&(n=Array.isArray(t[o])?t[o]:[t[o]]),n.forEach((function(e){var t=l[a.relKey]=l[a.relKey]||[];store.$.checkAndAddToArray(t,e[i])}))},addToIDBonSave:function(e,t){var o=store.model[e].fieldList,a=store.$.onSave?store.$.onSave[e]:void 0;if(a){var r=store.model[e]._pK,i=t&&r?a[t[r]]:void 0;if(i){for(var s in i){var l=i[s],n=o[s].relatedTo;l.forEach((function(e){var t=store.peekRecord(n,e);if(t){var o=t.$.parent;if(Lyte.isRecord(o)){var a=o.$.model,r=a._name,i=a._pK;store.$.checkAndAddToIDBQ(r,"updateRecord",store.peekRecord(r,o[i]).$.toJSON(!0))}else store.$.checkAndAddToIDBQ(n,"updateRecord",store.peekRecord(n,e).$.toJSON(!0))}}))}store.$.removeOnSave(e,t[r])}}},removeOnSave:function(e,t){var o=store.$.onSave?store.$.onSave[e]:void 0;o&&o[t]&&delete o[t]},checkAndAddToIDBQ:function(e,t,o){var a={model:e,type:t,data:o};(store.$.idbQ2[e]=store.$.idbQ2[e]||[]).push(a)},checkAndRemoveKey:function(e,t,o){for(var a in e){var r=t[a];r&&"relation"==r.type&&(o&&!this.checkPresenceInArray(o,a)?delete e[a]:this.removeNotNeededKeys(r.relatedTo,e[a]))}},removeNotNeededKeys:function(e,t){var o=store.model[e],a=o.fieldList,r=o.idb?o.idb.deserializeKeys:void 0;if(o){var i=this;Array.isArray(t)?t.forEach((function(e){i.checkAndRemoveKey(e,a,r)})):this.checkAndRemoveKey(t,a,r)}return t},idbQ2Push:function(e,t,o,a,r){try{var i=store.model[e];if(i.hasOwnProperty("idb")){t=Lyte.deepCopyObject(t);var s={model:e,type:a},l=(i._pK,store.$.idbQ2[e]=store.$.idbQ2[e]||[]);switch(a){case"action":return void delete l[a];case"update":case"create":s.data=[],t.forEach((function(e){s.data.push(Lyte.isRecord(e)?e.$.toJSON():e)}));break;case"updateRecord":case"createRecord":case"delete":s.data=t;break;case"destroyRecord":case"deleteRecord":s.id=t;break;case"findRecord":s.key=r;case"findAll":t[e]=this.removeNotNeededKeys(e,t[e]),s.queryParams=o,s.data=t;break;case"pushPayload":t=this.removeNotNeededKeys(e,t),s.data=t}l.push(s)}}catch(e){console.log("Error while adding to IDBQueue ",e)}},isEmpty:function(e){return null==e||""===e||null==e},isEmptyObj:function(e){return null!==e&&"object"==(void 0===e?"undefined":_typeof(e))&&0==Object.keys(e).length},isEmptyArray:function(e){return!(!Array.isArray(e)||0!=e.length)},registerField:function(e,t,o,a){if("observer"==o.type)a.push(o);else if("callBack"==o.type){o.observes&&a.push(o.observes);for(var r=o.properties,i=0;i<r.length;i++)"didLoad"===r[i]||"init"===r[i]?(e.didLoad||(e.didLoad=[]),e.didLoad.push(o.value)):"add"!==r[i]&&"change"!==r[i]||e.on(r[i],o.value);"didLoad"==t&&(e.didLoad||(e.didLoad=[]),e.didLoad.push(o.value))}else if("didLoad"==t)e.didLoad||(e.didLoad=[]),e.didLoad.push(o);else if(Object.keys(o).length){if(o.primaryKey&&(e.fieldList.id&&0==e.fieldList.id.defined&&delete e.fieldList.id,o.hasOwnProperty("default")&&(Lyte.warn("LD23",e._name,t),delete o.default),null!=e._pK?(e._pK=e._pK+","+t,e.isComposite=!0):e._pK=t),o.baseKey){if(e.bK)return void Lyte.warn("Only one baseKey is allowed for a model");e.bK=t}e.fieldList[t]=o,o.hasOwnProperty("default")&&(e._fldGrps.default[t]=o),o.hasOwnProperty("watch")&&/^(array|object)$/.test(o.type)&&(e._fldGrps.watch[t]=o)}if("relation"===o.type){o.relKey=t;var s=o.relatedTo,l=e.fieldList[t];e.relations[s]||(e.relations[s]=[]),e.relations[o.relatedTo].push(l),"hasMany"==o.relType&&(e._fldGrps.hasMany[t]=o)}},setError:function(e,t,o){e.$.hasOwnProperty("error")?Array.isArray(t)?t.forEach((function(t){store.$.cmpSet(e.$.error,t,o)})):store.$.cmpSet(e.$.error,t,o):Lyte.error("LD03",e,t)},unRegCb:function(e,t){var o=store[e][t];if(o)if(o){var a=o.__extendedBy;if(a.length){if(store[e].__toAddSuper=store[e].__toAddSuper||{},store[e].__toAddSuper[t]?a.forEach((function(o){store[e].__toAddSuper[t].push(o)})):store[e].__toAddSuper[t]=a.slice(),a.forEach((function(t){store[e][t].$super=void 0})),store[e].application&&"application"!=t){var r=store[e].application;a.forEach((function(t){store[e][t].$super=r,store[e].application.__extendedBy.push(t)}))}store[e].application||(store[e].__toAddSuper.application?a.forEach((function(t){store[e].__toAddSuper.application.push(t)})):store[e].__toAddSuper.application=a.slice())}o.$super&&o.$super.__extendedBy.splice(o.$super.__extendedBy.indexOf(t),1),delete store[e][t]}else Lyte.error(e," not present - ",t);else Lyte.error(e," not present - ",t)},eventListeners:{add:function(e,t,o){return e.events=e.events||{},e.events[t]=e.events[t]||[],e.events[t].push({f:o}),t+"-"+(e.events[t].length-1)},remove:function(e,t){var o;if(t)if(/^(add|remove|change)$/.test(t))o=t,e.events&&e.events[o]&&delete e.events[o];else{var a=t?t.split("-"):void 0;if(a){var r=e.events[a[0]];r&&a[1]&&(r[a[1]]=null)}}else{var i=e.events;for(var s in i)i&&i[s]&&delete i[s]}},emit:function(e,t,o){for(var a=e.events&&e.events[t]?e.events[t]:[],r=0;r<a.length;r++)a[r]&&a[r].f.apply(null,o)}},extendCallback:function(e,t,o){var a,r,i=e[t];if(o&&"string"==typeof o&&((r=i[o])||(i.__toAddSuper=i.__toAddSuper||{},i.__toAddSuper.hasOwnProperty(o)||(i.__toAddSuper[o]=[]),i.__toAddSuper[o].push(this.__name))),r&&r.is==t&&(!this.$super||"application"==this.$super.__name)){if(this.$super=r,r.__extendedBy.push(this.__name),i.application){var s=i.application.__extendedBy.indexOf(this.__name);s>-1&&i.application.__extendedBy.splice(s,1)}if((a=i.__toAddSuper)&&a.application){var l=a.application.indexOf(this.__name);l>-1&&i.__toAddSuper.application.splice(l,1)}}return this},super:function(){var e=this.$super,t=arguments[0][0][arguments[0][0].length-1],o=[],a=arguments[0][0],r=e[t];if("function"==typeof r){for(var i in delete a[a.length-1],a)a.hasOwnProperty(i)&&o.push(a[i]);return r.apply(e,o)}if(r)return r},extendModel:function(e,t){var o=t||this;if(e&&store.model[e]){var a=Object.assign({},store.model[e].fieldList);for(var r in a)"relation"==a[r].type&&delete a[r];var i={},s="id"==o._pK&&0==o.fieldList.id.defined;for(var r in a){var l=a[r];s&&l.primaryKey&&l.defined;l.primaryKey?i[r]=l:o.fieldList[r]=l}var n=Object.keys(i),p=n.length;if(s&&p){for(var r in delete o.fieldList.id,i)o.fieldList[r]=i[r];1==p?(o._pK=n[0],o._arrPk=Array.from(n)):(o.isComp=!0,o._arrPk=Array.from(n),o._pK=o._arrPk.toString())}var c=o._name;if(store.model[c].extend=e,store.model[e].extendedBy=store.model[e].extendedBy||{},store.model[e].extendedBy[c]=!0,!store.adapter[c]&&store.adapter[e]&&(store.adapter[c]=store.adapter[e]),!store.serializer[c]&&store.serializer[e]&&(store.serializer[c]=store.serializer[e]),store.model[e].actions){var d=o.actions=o.actions||{};for(var r in store.model[e].actions)d.hasOwnProperty(r)||(d[r]=store.model[e].actions[r])}}},demoLishObserverBindings:function(e,t,o){for(key in o||(o=e),t){if(e[key]instanceof Object){if(o&&e[key]._setterScope){var a=e[key]._setterScope.indexOf(o);-1!=a&&e[key]._setterScope.splice(a,1)}Object.keys(t[key]).length&&this.demoLishObserverBindings(e[key],t[key],e)}if(e._setterScope&&e!=o){var r=e._setterScope.indexOf(o);-1!=r&&e._setterScope.splice(r,1)}}},establishObserverBindings:function(e,t,o){for(key in o||(o=e),t){if(e[key]instanceof Object)e[key]._bindings||store.$.defProp(e[key],"_bindings",new Set,!1,!0),o&&!e[key]._setterScope&&store.$.defProp(e[key],"_setterScope",[]),-1==e[key]._setterScope.indexOf(o)&&e[key]._setterScope.push(o),e[key]._bindings.add(t[key]),Object.keys(t[key]).length&&this.establishObserverBindings(e[key],t[key],e);e._setterScope||(store.$.defProp(e,"_setterScope",[]),e._setterScope.push(e))}},setData:function(e,t,o,a,r){var i={emit:!1,attr:[],oldRec:{}},s=e.model,l=!1,n=e.record;if(t instanceof Object)for(var p in t)this.setValue(e,p,t[p],i,r),s&&s._properties&&s._properties.hasOwnProperty(p)&&(l=!0);else this.setValue(e,t,o,i,r),s&&s._properties&&s._properties.hasOwnProperty(t)&&(l=!0);return l&&store.$.establishObserverBindings(n,s._properties),!r&&i.emit&&store.$.changeCallbck(n,i,a),n},changeCallbck:function(e,t,o){var a=[e,t.attr],r=e.$;if(r.emit("change",a),r.model.emit("change",a),store.emit("change",[r.model._name,r.record,t.attr]),o)for(var i in t.oldRec)o[i]=t.oldRec[i];else{for(var s=0;s<t.attr.length;s++){i=t.attr[s];r.undoStack[i]=r.undoStack[i]||[],r.undoStack[i].push(t.oldRec[i])}r.undoStack._order_.push(t.attr)}},setValue:function(e,t,o,a,r,i){var s=e.model,l=s._pK,n=e.record;if(t!=s._pK){var p=s.fieldList[t],c=p&&p.opts?p.opts.watch:void 0;n.hasOwnProperty(t),n[t];if(!p)return void store.$.cmpSet(n,t,o,!0);if(!p.mandatory||null!=o&&null!=o&&""!==o){if(p.relType){var d,u,h=p.relType,m={},y=store.modelFor(p.relatedTo),f=y,g=f._pK,v=y._pK,x=(P=y.isComp)||y.fieldList[g].type,P=y.isComp;g=y._pK,x=P?"object":y.fieldList[g].type;if(this.getRelations(s,p.relKey,y,m),n[t]&&"hasMany"==h){if(d=[],n[t].forEach((function(e){d.push(e.$.pK)})),n[t]===o)return;if(Array.isArray(o)&&o.length===n[t].length){for(var b=o.length,D=0,L=0;L<b&&(val=o[L],Lyte.isRecord(val)?u=val:val&&("undefined"==typeof val?"undefined":_typeof(val))==x&&(u=store.peekRecord(val._type?val._type:p.relatedTo,val)),Lyte.isRecord(u)&&u===n[t][L]);L++)D++;if(D&&D==b)return}store.$.addOnSave(s._name,n,t,p,l,v),this.toDemolishLink(s,n,m.forward),this.handleArrOp(n[t],"removeAt",void 0,0,n[t].length)}else if(n[t]&&Lyte.isRecord(n[t])&&"belongsTo"==h){if(d=n[t].$.pK,Lyte.isRecord(o)?u=o:o&&(void 0===o?"undefined":_typeof(o))==x&&(u=store.peekRecord(o._type?o._type:p.relatedTo,o)),Lyte.isRecord(u)&&u===n[t])return;store.$.addOnSave(s._name,n,t,p,l,v),this.toDemolishLink(s,n,m.forward),store.$.cmpSet(n,t,{},!0)}if(Array.isArray(o)){if("belongsTo"==h)return this.revertToOldVal(n,t,d,m),void store.$.setRecErr(e,t,"ERR21",o)}else o=[o];"hasMany"==h&&store.$.isEmptyArray(o)&&(store.$.cmpSet(n,t,[],!0),store.$.establishObserverBindings(n,n.$.model._properties),store.$.defArrUtls(n[t]),store.$.defPolyUtls(n[t]),store.$.defUtls(n[t],y,n,t));var C=[];for(L=0;L<o.length;L++)if(!(this.isEmpty(o[L])||"belongsTo"==h&&this.isEmptyObj(o[L])||"hasMany"==h&&this.isEmptyArray(o[L]))){var _=o[L],S=o[L]&&o[L]._type?o[L]._type:p.relatedTo;if(!P&&o[L]&&_typeof(o[L])==x){if(null==(_=store.peekRecord(o[L]._type?o[L]._type:p.relatedTo,o[L])))this.addToRelate(s._name,n,m,o[L]);else if(_.$&&_.$.isError){C.push({code:"ERR15",message:Lyte.errorCodes.ERR15,error:Object.assign({},_)});continue}}else if(o[L]&&"object"==_typeof(o[L])){if(_.$&&_.$.isError){C.push({code:"ERR15",message:Lyte.errorCodes.ERR15,error:Object.assign({},_)});continue}if(!Lyte.isRecord(_)&&(P&&(_=store.peekRecord(o[L]._type?o[L]._type:p.relatedTo,o[L]))||(_=this.newRecord(S,o[L])),_.$.isError)){C.push({code:"ERR15",data:o[L],message:Lyte.errorCodes.ERR15,error:Object.assign({},_)});continue}}1!=(A=this.establishLink(m.forward,m.backward,n,_,void 0,!!r||void 0))?C.push({code:A,data:o[L],message:Lyte.errorCodes[A]}):store.$.addOnSave(s._name,n,t,p,l,v)}if(C.length&&C.length==o.length)return this.revertToOldVal(n,t,d,m),void("belongsTo"==p.relType?store.$.setRecErr(e,t,C[0]):store.$.setRecErr(e,t,C));if(C.length>1?store.$.setRecErr(e,t,C):store.$.clrRecErr(e,t),!r){var w=n.$._attributes;w.hasOwnProperty(t)||(w[t]=[]),w[t].push({_type:"changed",records:d}),a.emit=!0,a.attr.push(t);var T={};T.records=d,T._type="update",a.oldRec[t]=T;var E=n.$.getInitialValues(t),A=!0;if(E&&Array.isArray(n[t])&&E.length==n[t].length){A=!1;for(L=0;L<E.length;L++)if(!store.$.compareRecords(E[L],n[t][L],g,void 0,f)){A=!0;break}}A||delete w[t]}}else if(o!==n[t]){for(var M in p){if(1!=(k=Lyte.checkProperty(M,o,t,p[M],n,void 0,s._name)))return"object"==(void 0===k?"undefined":_typeof(k))&&(k.value=o),void store.$.setRecErr(e,t,k)}r?(c&&/^(array|object)$/.test(p.type)&&Lyte.establishObjectBinding(n,t,!0),store.$.cmpSet(n,t,o,!0)):store.$.estAttrs(n,t,o,a,i)}else if(o===n[t]&&n.$.isError&&n.$.error[t]){var N=!0;for(var M in p){var k;1!=(k=Lyte.checkProperty(M,o,t,p[M],n,void 0,s._name))&&(N=!1)}N&&store.$.clrRecErr(e,t)}}else store.$.setRecErr(e,t,{code:"ERR02",message:Lyte.errorCodes.ERR02,value:o});store.$.checkAttrs(n)}else n[t]!==o&&store.$.setRecErr(e,t,"ERR01",o)},estAttrs:function(e,t,o,a,r){var i=e.$._attributes,s=e.$.model,l=i[t],n=i.hasOwnProperty(t);n?(r&&Lyte.cmpData(n?l:r.data,e[t])||o&&"object"==(void 0===o?"undefined":_typeof(o))&&!r&&store.adapter.$.compareObjects(l,o)||l==o)&&delete i[t]:i[t]=r?r.data:this.createCopy(e[t]);var p=e.hasOwnProperty(t),c=r?r.data:e[t];if(!r){var d={};s._properties&&s._properties.hasOwnProperty(t)&&(d[t]=s._properties[t],store.$.demoLishObserverBindings(e,d)),store.$.cmpSet(e,t,o,!0)}store.$.clrRecErr(e.$,t);var u={_type:"update"};u.val=c,p||(u._type="propAdd"),a.emit=!0,a.attr.push(t),a.oldRec[t]=u},checkAttrs:function(e){var t=e.$.model;Object.keys(e.$._attributes).length?(store.$.cmpSet(e.$,"isModified",!0),store.$.addDeepNest(e),this.checkAndAddToArray(t.dirty,e[t._pK])):(store.$.cmpSet(e.$,"isModified",!1),e.$.isNew||e.$.hasOwnProperty("dN")&&(!e.$.dN||Object.keys(e.$.dN).length)||store.$.removeParentNesting(e),e.$.isNew||this.deleteFromArray(t.dirty,e.$.pK))},checkForCorrectRelation:function(e,t){var o=e.relatedTo;return!!Lyte.isRecord(t)&&(e.opts&&e.opts.polymorphic?!!t.$.model.extend&&e.relatedTo===t.$.model.extend:!(!e||!t)&&o===t.$.model._name)},removeKeys:function(e,t){for(var o in t)if(e.hasOwnProperty(o)){var a=e[o];("belongsTo"===a.type||"hasMany"===a.type&&t[o])&&this.removeNotDefinedKeys(a.relatedTo,t[o],!(!a.opts||!a.opts.polymorphic)||void 0)}else delete t[o]},removeNotDefinedKeys:function(e,t,o){var a=e.fieldList;if(Array.isArray(t))for(var r=0;r<t.length;r++){var i=t[r];this.removeKeys(o&&Lyte.isRecord(i)?i.$.model.fieldList:a,i)}else this.removeKeys(o&&Lyte.isRecord(t)?t.$.model.fieldList:a,t)},add:function(e,t,o){var a,r=this.record,i=r.$.model,s=this.key,l=i.fieldList[s],n={};store.$.getRelations(i,l.relKey,store.modelFor(l.relatedTo),n),Array.isArray(e)||(e=[e]);var p=store.modelFor(n.forward.relatedTo),c=p._pK,d=[],u=[],h=p.isComp;r.$._attributes.hasOwnProperty(s)&&r.$._attributes[s].length&&(a=r.$.getInitialValues(s));for(var m=0;m<e.length;m++){var y=e[m];if(h&&"object"==(void 0===y?"undefined":_typeof(y))&&Object.keys(y).length===p._arrPk.length){if(this.polymorphic&&!t){d.push({code:"ERR22",data:e[m],message:Lyte.errorCodes.ERR22});continue}y=store.peekRecord(t||n.forward.relatedTo,y)}if(!h&&p.fieldList[c].type.toLowerCase()==(void 0===y?"undefined":_typeof(y))||h&&"object"==(void 0===y?"undefined":_typeof(y))&&Object.keys(y).length===p._arrPk.length){if(this.polymorphic&&!t){d.push({code:"ERR22",data:e[m],message:Lyte.errorCodes.ERR22});continue}y=store.peekRecord(t||n.forward.relatedTo,y)}else"object"!=(void 0===y?"undefined":_typeof(y))||Lyte.isRecord(y)||(y=store.$.newRecord(y._type?y._type:t||l.relatedTo,y));var f=y&&y._type?y._type:t||void 0;if(null==y)d.push({code:"ERR13",data:e[m],message:Lyte.errorCodes.ERR13});else if(y.$&&y.$.isError)d.push({code:"ERR15",data:e[m],message:Lyte.errorCodes.ERR15,error:y});else if(Lyte.isRecord(y)&&!store.$.hasDuplicateRelation(y,r[s],c,f,p)){var g=store.$.establishLink(n.forward,n.backward,r,y);1!=g?d.push({code:g,data:e[m],message:Lyte.errorCodes[g]}):u.push(y)}}if(u.length){var v=r.$._attributes;v[s]?store.$.hasRecordsArrayChanged(r,s,a)?v[s].push({_type:"added",records:u}):(delete r.$._attributes[s],Object.keys(r.$._attributes).length||(store.$.cmpSet(r.$,"isModified",!1),delete v[s],r.$.isNew||(store.$.deleteFromArray(i.dirty,r.$.pK),(!r.$.dN||r.$.dN&&!Object.keys(r.$.dN).length)&&store.$.removeParentNesting(r)))):(v[s]=[{_type:"added",records:u}],store.$.cmpSet(r.$,"isModified",!0),store.$.checkAndAddToArray(i.dirty,r[i._pK])),store.$.emit("change",r,[s]);var x={_type:"added",records:u};if(o)o[s]=x;else{r.$.undoStack[s]=r.$.undoStack[s]||[],r.$.undoStack[s].push(x),r.$.undoStack._order_.push([s])}}return d.length>0?store.$.setRecErr(r.$,s,d):store.$.clrRecErr(r.$,s),r},remove:function(e,t,o){var a,r=this.record,i=r.$.model,s=this.key,l=i.fieldList[s],n={};store.$.getRelations(i,l.relKey,store.modelFor(l.relatedTo),n),Array.isArray(e)||(e=[e]);var p,c=store.modelFor(n.forward.relatedTo),d=c._pK,u=c.isComp,h=[],m=[],y=[];r.$._attributes.hasOwnProperty(s)&&r.$._attributes[s].length&&(a=r.$.getInitialValues(s));for(var f=0;f<e.length;f++){var g=e[f];if(!u&&c.fieldList[d].type.toLowerCase()==_typeof(e[f])||u&&"object"==(void 0===g?"undefined":_typeof(g))&&Object.keys(g).length===c._arrPk.length){if(1==this.polymorphic&&!t){h.push({code:"ERR22",data:e[f],message:Lyte.errorCodes.ERR22});continue}p=store.peekRecord(t||n.forward.relatedTo,e[f])}else Lyte.isRecord(e[f])&&(p=e[f]);var v=p&&p._type?p._type:t||void 0;if(p){var x=store.$.getIndex(r[s],d,p.$.get(d),v);store.$.demolishLink(p,d,store.peekRecord(i._name,r.$.pK),n.forward.relKey,void 0,void 0,void 0,!0),null!=n.backward&&store.$.demolishLink(r,i._pK,store.peekRecord(v||n.forward.relatedTo,p.$.pK),n.backward.relKey,n.forward),m.push(p),y.push(x)}}if(m.length){var P=r.$._attributes;P[s]?store.$.hasRecordsArrayChanged(r,s,a)?P[s].push({_type:"removed",records:m,_indices:y}):(delete r.$._attributes[s],Object.keys(r.$._attributes).length||(store.$.cmpSet(r.$,"isModified",!1),delete P[s],r.$.isNew||(store.$.deleteFromArray(i.dirty,r.$.pK),(!r.$.dN||r.$.dN&&!Object.keys(r.$.dN).length)&&store.$.removeParentNesting(r)))):(P[s]=[{_type:"removed",records:m,_indices:y}],store.$.cmpSet(r.$,"isModified",!0),store.$.checkAndAddToArray(i.dirty,r[i._pK])),store.$.emit("change",r,[s]);var b={_type:"removed",records:m,_indices:y};if(o)o[s]=b;else{r.$.undoStack[s]=r.$.undoStack[s]||[],r.$.undoStack[s].push(b),r.$.undoStack._order_.push([s])}}h.length>0?store.$.setRecErr(r.$,s,h):store.$.clrRecErr(r.$,s)},filter:function(e,t,o){var a=0;for(var r in t)e[r]===t[r]&&a++;if(a===o)return!0},filterBy:function(e){for(var t=Object.keys(e).length,o=[],a=0;a<this.length;a++)store.$.filter(this[a],e,t)&&o.push(this[a]);return o.filterBy||(store.$.defArrUtls(o),store.$.defUtls(o,this.model)),o},idbSerialize:function(e,t,o,a,r,i){var s=t.forward.relatedTo,l=o._pK,n=a._pK;Array.isArray(e)?e.forEach((function(o,p){Lyte.isRecord(o)&&o.$.inIDB||store.$.checkPresenceInArray(store.$.recStack[s],o[n])?e[p]=o[n]:(store.$.removeBackwardRel(o,t,l,r,!0),store.$.removeSelfCircularReference(a._name,o,i))})):e&&Lyte.isRecord(e)&&(Lyte.isRecord(e)&&e.$.inIDB||this.checkPresenceInArray(store.$.recStack[s],e[n])?obj[relKey]=e[n]:(this.removeBackwardRel(e,t,l,r,!0),this.removeSelfCircularReference(a._name,e,i)))},idSerialize:function(e,t,o,a){var r=t.forward.opts?t.forward.opts.polymorphic:void 0,i=t.forward.relKey,s=e[i=t.forward.relKey],l=store.model[t.backward.relatedTo],n=store.model[t.forward.relatedTo],p=store.$.getpKVal(e,l);if(Array.isArray(s))if(r)e[i]=this.polymorphicToJSON(t.forward,s);else{var c=[];if(a)var d=a[i]||[],u=!1;s.forEach((function(e){e.$.isNew&&1!=o&&"state"!=o?(u=!0,store.$.rSerialize(e,t,n,l._pK,p,o,d),c.push(e)):(d&&d.push({}),c.push(e.$.pK&&"object"==_typeof(e.$.pK)?Object.assign({},e.$.pK):e.$.pK))})),!u&&a&&a.hasOwnProperty(i)&&delete a[i],e[i]=c}else if(s&&Lyte.isRecord(s))if(s.$.isNew&&1!=o&&"state"!=o){if(a)d=a[i]||{};store.$.rSerialize(s,t,n,l._pK,p,o,d)}else e[i]=r?this.polymorphicToJSON(t.forward,s):s.$.pK&&"object"==_typeof(s.$.pK)?Object.assign({},s.$.pK):s.$.pK},recordSerialize:function(e,t,o,a,r,i,s,l,n){var p=r._pK;if(Array.isArray(o)){if(0==o.length)return delete e[t],0;o=Array.from(o);for(var c=n[t]=n[t]||[],d=0;d<o.length;d++)o[d]&&Lyte.isRecord(o[d])&&this.rSerialize(o[d],a,i,p,s,l,c)}else if(o&&Lyte.isRecord(o)){c=n[t]=n[t]||{};c=this.rSerialize(o,a,i,p,s,l,c),n[t]=c}},rSerialize:function(e,t,o,a,r,i,s){var l=t.forward.relatedTo,n=t.forward.opts?t.forward.opts.polymorphic:void 0;if(this.removeBackwardRel(e,t,a,r),s){var p,c={},d=e.$.isNew?"added":e.$.isModified?"modified":"related";n&&(p=e.$.model._name,e.$.polymorphicType=p,o=store.model[p]),Object.defineProperties(c,{pkVal:{value:e.$.pK},type:{value:d},model:{value:n?p:l}}),Array.isArray(s)&&s.push(c)}return this.removeSelfCircularReference(o._name,e,i,void 0,c),c},partialSerialize:function(e,t,o,a,r,i,s,l,n){var p=a.forward,c=r._pK,d=a.forward.relatedTo,u=a.forward.opts?a.forward.opts.polymorphic:void 0;if("hasMany"==p.relType)if(o&&o.partial){var h=o.partial,m=i._pK;if(n&&(D=n[t]=n[t]||[],store.$.defProp(D,"partial",!0)),h){var y,f,g=[],v=this;h.forEach((function(e,t){if(f=t,/^(added|modified)$/.test((y=e).type)){var r="related",s=store.$.getIndex(o,m,f,void 0,store.model[d]);if(-1!=s){var n,p=o[s],h=p;u&&p&&(n=p._type?p._type:p.$.model._name,i=store.model[n]);var x=store.peekRecord(i._name,f);if(v.removeBackwardRel(p,a,c,f),p.$.isNew)r="added";else if(p.$.isModified){r="modified";var P=store.$.isDirty(x,i.relations);h=store.$.updateJSON(p,i,P)}else{P=store.$.isDirty(x,i.relations);h=store.$.updateJSON(p,i,P)}if(D){var b={};Object.defineProperties(b,{pkVal:{value:f},type:{value:r},model:{value:u?n:d}}),D.push(b)}v.removeSelfCircularReference(i._name,h,l,void 0,b),Lyte.isRecord(h)?h.$.partialType=y.type:(store.$.defProp(h,"$",{}),store.$.defProp(h.$,"partialType",y.type),h.$.hasOwnProperty("pK")||store.$.defProp(h.$,"pK",f)),u&&(h.$.polymorphicType=n),g.push(h)}}else if("removed"==y.type){var L={};if(f&&"object"==(void 0===f?"undefined":_typeof(f))?Object.assign(L,Object.assign({},f)):L[m]=f,D){b={};Object.defineProperties(b,{pkVal:{value:f},type:{value:"removed"},model:{value:u&&y.polymorphicType?y.polymorphicType:d}}),D.push(b)}store.$.defProp(L,"$",{}),L.$.partialType="removed",u&&y.polymorphicType&&(L.$.polymorphicType=y.polymorphicType),L.$.hasOwnProperty("pK")||(L.$.pK=f),g.push(L)}})),g.length?o=e[t]=g:delete e[t]}}else delete e[t];else if("belongsTo"==p.relType&&o&&Lyte.isRecord(o)){var x;u&&o&&(x=o._type?o._type:o.$.model._name,i=store.model[x]),this.removeBackwardRel(o,a,c,f);var P,b=o;if(o.$.isNew?this.removeBackwardRel(o,a,c,s):(P=store.$.isDirty(o,i.relations),b=store.$.updateJSON(o,i,P)),n){var D=n[t]=n[t]||{},L=o.$.isNew?"added":o.$.isModified?"modified":"related";Object.defineProperties(D,{pkVal:{value:o.$.pK},type:{value:L},model:{value:u?x:d}})}u&&(b.$||store.$.defProp(b,"$",{}),b.$.polymorphicType=x),this.removeSelfCircularReference(i._name,b,l,void 0,D),o=e[t]=b}},removeSelfCircularReference:function(e,t,o,a,r){var i=store.model[e],s=i.fieldList,l=(i.extend,store.$.getpKVal(t,i));store.$.recStack[e]=store.$.recStack[e]||[];store.$.checkAndAddToArray(store.$.recStack[e],l);var n=store.peekRecord(e,l),p=Lyte.isRecord(n)?n.$.partial:void 0,c=t&&t.$?t.$.polymorphicType:void 0;for(var d in t){var u,h,m,y,f=s[d],g=!1;if(!(!("create"==a||Lyte.isRecord(t)&&t.$.isNew)||i._pK!=d)&&1!=o)delete t[d];else if(f)if(f&&"relation"!=f.type&&!o&&Lyte.Transform[f.type]&&Lyte.Transform[f.type].serialize&&t.hasOwnProperty(d))t[d]=Lyte.Transform[f.type].serialize(t[d]);else if(p&&p.hasOwnProperty(d)){var v={},x=store.model[f.relatedTo]._pK;p[d].forEach((function(e,o){if(v[x]=o,store.$.defProp(v,"$",{}),store.$.defProp(v.$,"partialType","removed"),store.$.defProp(v.$,"pK",o),r){var a=r[d]=r[d]||{};Object.defineProperties(a,{pkVal:{value:o},type:{value:"removed"},model:{value:f.relatedTo},parent:{value:n}})}t[d]=v}))}else if(1!=o&&"state"!=o||!t[d]||"object"!=_typeof(t[d])||!f||"relation"==f.type){if(t[d]&&f&&"relation"==f.type){if(h=f.relatedTo,y=f.relType,null==(m=store.modelFor(h)))continue;var P=f.relKey,b={};g?this.getRelations(u,f.relKey,m,b):this.getRelations(i,P,m,b);var D=f.opts,L=D?D.serialize:void 0,C=t[P];if("idb"==o)store.$.idbSerialize(C,b,i,m,l,o);else if(o||"id"==L)store.$.idSerialize(t,b,o,r);else if("record"===L){if(0==store.$.recordSerialize(t,d,C,b,i,m,l,o,r))continue}else{if("partial"!==L){delete t[P];continue}store.$.partialSerialize(t,d,C,b,i,m,l,o,r)}((C=t?t[P]:void 0)&&"hasMany"==y&&Array.isArray(C)&&0==C.length||"belongsTo"==y&&"object"==(void 0===C?"undefined":_typeof(C))&&0==Object.keys(C).length)&&delete t[P]}}else t[d]=Lyte.deepCopyObject(t[d]);else c&&(u=store.modelFor(c),f=u.fieldList[d],g=!0),delete t[d]}},removeBackwardRel:function(e,t,o,a,r){if(r)delete e[t.backward.relKey];else if(null!=t.backward){var i=e[t.backward.relKey];if(Array.isArray(i)){for(var s=0;s<i.length;s++)if(this.comparePk(i[s],a))return i.splice(s,1),void(0==i.length&&delete e[t.backward.relKey])}else i&&Lyte.isRecord(i)&&this.comparePk(i,a)&&delete e[t.backward.relKey]}},polymorphicToJSON:function(e,t){var o=e.opts;if(o&&o.polymorphic){if(Array.isArray(t)){var a=[];return t.forEach((function(e){a.push(store.$.polyToJSON(e))})),a}return store.$.polyToJSON(t)}},polyToJSON:function(e){var t=e?e._type:void 0,o=store.modelFor(t),a=o?o._pK:void 0,r={},i=e.$.pK;return"object"==(void 0===i?"undefined":_typeof(i))?r=Object.assign({},i):r[a]=i,r._type=e._type,r},toJSONObj:function(e,t,o,a,r){var i,s,l,n=e._name,p=e._pK;return i=1==o||"state"==o?Object.assign({},t):Lyte.deepCopyObject(t),s=Lyte.isRecord(i)?i.$.pK:store.peekRecord(n,store.$.getpKVal(i,e)).$.pK,s=i[p],r&&!r.has(s)&&(r.set(s,{}),l=r.get(s)),this.removeSelfCircularReference(n,i,o,a,l),"idb"==o&&this.removeNotNeededKeys(n,i),i},toJSON:function(e,t,o,a,r){var i,s=store.model[e];if(store.$.recStack={},Array.isArray(t)){for(var l=[],n=0;n<t.length;n++)i=this.toJSONObj(s,t[n],o,a,r),l.push(i);return l}return t&&("object"===(void 0===t?"undefined":_typeof(t))||Lyte.isRecord(t))&&(i=this.toJSONObj(s,t,o,a,r)),store.$.recStack={},i},createCopy:function(e){if(Array.isArray(e)){if(e.save){for(var t=[],o=0;o<e.length;o++){var a=Lyte.deepCopyObject(e[o]);t.push(a)}return t}}else if(e&&(Lyte.isRecord(e)||"object"==(void 0===e?"undefined":_typeof(e))))return Lyte.deepCopyObject(e);return e},compareRecords:function(e,t,o,a,r){o=r._arrPk;if(Lyte.isRecord(e)&&Lyte.isRecord(t)&&o.length){if(a&&e._type&&a!==e._type)return!1;for(var i=o.length,s=0;s<i;s++){var l=o[s];if(e[l]&&t[l]&&e[l]!==t[l])return!1}return!0}return!1},hasRecordInArray:function(e,t,o,a,r){if(Lyte.isRecord(t)&&o)for(var i=e.length,s=0;s<i;s++){var l=e[s];if(!a||l._type===a)if(r){if(this.compareRecords(l,t,o,void 0,t.$.model))return!0}else if(a&&l._type&&a===t._type&&l[o]===t[o]||l[o]===t[o])return!0}return!1},hasDuplicateRelation:function(e,t,o,a,r){var i=r.isComp;return Array.isArray(t)?i||t.isPolymorphic||!t._recMap?this.hasRecordInArray(t,e,o,a,i):t._recMap.get(e[o]):!(!t||!Lyte.isRecord(t))&&this.compareRecords(e,t,o,a,r)},checkPresenceInArray:function(e,t){return e&&e.some((function(e){return e===t}))},checkAndAddToArray:function(e,t){if(this.checkPresenceInArray(e,t))return-1;e.push(t)},deleteFromArray:function(e,t){var o=e.indexOf(t);-1!=o&&e.splice(o,1)},genPk:function(e,t,o){var a;e.forEach((function(e){a=o[e].type;var r=t[e]=Math.floor(1e5*Math.random()+1);"string"==a&&(t[e]=r.toString())}))},generateRandomPk:function(e,t,o,a){for(this.genPk(o,t,a);this.isDuplicateRecord(e,t,o.toString());)this.genPk(o,t,a)},pkPresence:function(e,t){var o=!0;return t.forEach((function(t){e.hasOwnProperty(t)&&e[t]||(o=!1)})),o},newRecord:function(e,t,o){var a=store.modelFor(e);if(null==a)return new error1("id",_defineProperty({code:"ERR19",data:e,message:Lyte.errorCodes.ERR19},"data",e));null==t&&(t={});var r=a.fieldList,i={},s=new error1,l=a._arrPk;for(var n in this.pkPresence(t,l)?this.isDuplicateRecord(a,t,l)&&store.$.setError(s,l,{code:"ERR17",message:Lyte.errorCodes.ERR17}):this.generateRandomPk(a,t,l,r),r){"hasMany"==(b=r[n]).relType&&(i[n]=[]);var p=t[n];if("relation"!=b.type&&(void 0!==p&&""!==p||b.hasOwnProperty("default")&&(p=i[n]=store.$.getDefaultVal(i,b.default)),!o))for(var c in b){if(1!=(P=Lyte.checkProperty(c,p,n,b[c],t,i,e))){store.$.setError(s,n,P);break}}}for(var d in t)i[d]=t[d];i=new Record(e,i),store.$.cmpSet(i.$,"isNew",!0);var u=a.relations;for(var h in u)for(var m=u[h],y=0;y<m.length;y++){var f=m[y],g=f.relKey,v=f.opts?f.opts.polymorphic:void 0;if(i&&i[g]){var x=t[g];i[g]=void 0;var P,b=m[y],D={};if(1!=(P=this.getRelations(a,b.relKey,store.modelFor(b.relatedTo),D))){store.$.setError(s,b.relKey,{code:P,data:m,message:Lyte.errorCodes[P]});continue}var L=store.modelFor(b.relatedTo),C=L._pK,_=L.isComp,S=_?void 0:L.fieldList[L._pK].type;if(Array.isArray(x)){if("belongsTo"==m[y].relType){store.$.setError(s,b.relKey,{code:"ERR21",data:x,message:Lyte.errorCodes.ERR21});continue}}else x=[x];s[b.relKey]=[];for(var w=0;w<x.length;w++){var T=void 0,E=b.relatedTo;if(x[w]&&Lyte.isRecord(x[w]))T=x[w];else if(_&&"object"==_typeof(x[w])){var A;if(-1!=(A=store.$.getIndex(L.data,C,store.$.getpKVal(x[w],L))))T=L.data[A];else{if(v){if(!x[w]||!x[w].hasOwnProperty("_type")){store.$.setError(s,b.relKey,{code:"ERR22",data:x[w],message:Lyte.errorCodes.ERR22});continue}E=x[w]._type}T=this.newRecord(E,x[w])}}else if(x[w]&&_typeof(x[w])==S.toLowerCase())T=store.peekRecord(E,x[w]);else if(x[w]&&"object"==_typeof(x[w])){if(v){if(!x[w]||!x[w].hasOwnProperty("_type")){store.$.setError(s,b.relKey,{code:"ERR22",data:x[w],message:Lyte.errorCodes.ERR22});continue}E=x[w]._type}T=this.newRecord(E,x[w])}T&&T.$&&T.$.isError?store.$.setError(s,b.relKey,{code:"ERR15",data:x[w],message:Lyte.errorCodes.ERR15,error:Object.assign({},T)}):T&&T.$&&!T.$.isError&&1!=(P=this.establishLink(D.forward,D.backward,i,T,void 0,false))&&store.$.setError(s,b.relKey,{code:P,data:x[w],message:Lyte.errorCodes[P]})}if(0==s[b.relKey].length&&delete s[b.relKey],"hasMany"==m[y].relType){var M=g;null==i[M]&&(i[M]=[]),i[M].add||(v&&store.$.defProp(i[M],"polymorphic",!0),store.$.defArrUtls(i[M]),store.$.defUtls(i[M],store.modelFor(m[y].relatedTo),i,M),store.$.defPolyUtls(i[M]))}}}if(s&&s.$&&Object.keys(s.$.error).length>0)return s;var N=store.$.toRelate[a._name],k=i.$.pK;if(N&&N.has(k)&&(store.$.establishToRelated(i,N.get(k)),N.delete(k)),a.didLoad){var F=a.didLoad;for(y=0;y<F.length;y++)F[y].apply(i)}return this.handleArrOp(a.data,"push",i),this.checkAndAddToArray(a.dirty,i.$.pK),a.emit("add",[i]),store.emit("add",[a._name,i]),o&&(i.$.validatedOnCreate=!1),i},toInsertData:function(e,t,o){var a=store.modelFor(e),r=this.insertIntoStore(a,t[e],o,!0);return delete a.rel,r},insertIntoStore:function(e,t,o,a,r){var i;if(Array.isArray(t)){i=[];for(var s=0;s<t.length;s++)i[s]=this.insertIntoStore(e,t[s],o,a,r),i[s]&&i[s].$&&i[s].$.isError&&(i.$=i.$||store.$.defProp(i,"$",{}),store.$.cmpSet(i.$,"isError",!0))}else if(t&&Object.keys(t).length){var l=e;if(t._type&&e.extendedBy&&(l=e.extendedBy[t._type]?store.modelFor(t._type):void 0),Lyte.isRecord(t))return;if(this.isDuplicateRecord(l,t,l._pK))i=this.validateAndMerge(l,t,r);else{var n=new Record(l._name,t);l.data.push(n);var p=store.$.toRelate[l._name],c=n.$.pK;o&&(store.$.saveParent=n),i=this.validateAndPush(l,n,r),p&&p.has(c)&&(store.$.establishToRelated(n,p.get(c)),p.delete(c))}o&&(store.$.saveParent=void 0),a&&(store.$.recStack={})}return i},removeFromStore:function(e,t,o,a){var r=e.data;if(0!=r.length){Array.isArray(t)||(t=[t]);for(var i=e._pK,s=0;s<t.length;s++){var l=this.getIndex(r,i,t[s]);if(-1!=l){var n,p,c=r[l],d=c.$.pK,u=e.relations;Object.keys(u).length&&this.toDemolishRelation(e,l,a),(n=this.handleArrOp(r,"removeAt",void 0,l,1))&&!o&&(store.$.cmpSet(n[0].$,"isDeleted",!0),(n[0].$.isNew||n[0].$.isModified)&&store.$.deleteFromArray(e.dirty,n[0].$.pK),n[0].$.isNew||store.$.addTo_Del(e,n[0],l)),e.emit("remove",[n[0]]),store.emit("remove",[e._name,n[0]]),Array.isArray(e.dirty)&&-1!=(p=e.dirty.indexOf(d))&&e.dirty.splice(p,1),e._properties&&store.$.demoLishObserverBindings(c,e._properties)}}}},getIndex:function(e,t,o,a,r){return(r?r.isComp:t.split(",").length>1)?this.getCompInd(e,o,a,r):this.getInd(e,t,o,a)},getCompInd:function(e,t,o,a){for(var r=0;e&&r<e.length;r++){var i=e[r];if((!o||e[r]._type===o)&&store.adapter.$.compareObjects(store.$.getpKVal(i,a),t))return r}return-1},getInd:function(e,t,o,a){for(var r=0;e&&r<e.length;r++){var i=e[r];if((!a||i._type===a)&&i[t]==o)return r}return-1},isDuplicateRecord:function(e,t){var o=e.data,a=e._pK,r=e.isComposite;if(o.length){if(!r&&e.data._recMap){var i=t[a];return void 0!==e.data._recMap.get(i?i.toString():i)}return o.some((function(o){if(store.adapter.$.compareObjects(store.$.getpKVal(t,e),store.$.getpKVal(o)))return!0}))}return!1},validateAndPush:function(e,t,o){e.rel||(e.rel={});for(var a=e._arrPk,r=a.length,i=0;i<r;i++){var s=a[i];if(!t.hasOwnProperty(s))return n=e.data.indexOf(t),e.data.splice(n,1),new error1(s,{code:"ERR23",data:t,message:Lyte.errorCodes.ERR23});if(null==t[s]||null==t[s])return n=e.data.indexOf(t),e.data.splice(n,1),new error1(s,{code:"ERR26",data:t,message:Lyte.errorCodes.ERR26})}var l=null==t.$.pK||"object"==_typeof(t.$.pK)?t.$.pK:t.$.pK.toString();e.data._recMap.set(l,t),t=this.validateJSON(e,t,void 0,void 0,o);var n=e.data.indexOf(t);if(e.data.splice(n,1),this.handleArrOp(e.data,"push",t),e.didLoad){var p=e.didLoad;for(i=0;i<p.length;i++)p[i].apply(t)}return e.emit("add",[t]),store.emit("add",[e._name,t]),t},validateAndMerge:function(e,t,o){e.rel||(e.rel={});var a=store.peekRecord(e._name,store.$.getpKVal(t,e));if(!a||!Lyte.isRecord(a))return Lyte.error("LD04",t),!1;if(this.mergeData(a,t,o),e.didLoad)for(var r=e.didLoad,i=0;i<r.length;i++)r[i].apply(a);return a},mergeData:function(e,t,o){if(e&&t){var a,r=e.$.model,i=!1;for(var s in t)if(a=r.fieldList[s]){if("relation"!=a.type){t[s]&&Lyte.Transform.hasOwnProperty(a.type)&&Lyte.Transform[a.type].hasOwnProperty("deserialize")&&(t[s]=Lyte.Transform[a.type].deserialize(t[s]));var l={};r._properties&&r._properties.hasOwnProperty(s)&&(l[s]=r._properties[s],store.$.demoLishObserverBindings(e,l)),store.$.cmpSet(e,s,t[s],!0),r._properties&&r._properties.hasOwnProperty(s)&&(i=!0)}else if(a&&"relation"==a.type){var n={},p={};store.$.getRelations(e.$.model,s,store.modelFor(a.relatedTo),p);var c=store.model[p.forward.relatedTo],d=this.compareRelations(e,t,s,a,o?o[s]:void 0,n);this.mergeRecords(n,d,r,c,e,s,t,p,o)}}else store.$.cmpSet(e,s,t[s],!0);i&&store.$.establishObserverBindings(e,r._properties)}},mergeRecords:function(e,t,o,a,r,i,s,l,n){if(!l){l={};store.$.getRelations(o,i,a,l)}var p=o._pK;if("hasMany"==l.forward.relType&&store.$.isEmptyArray(s[i])&&(store.$.cmpSet(r,i,[],!0),store.$.establishObserverBindings(r,r.$.model._properties),store.$.defArrUtls(r[i]),store.$.defPolyUtls(r[i]),store.$.defUtls(r[i],a,r,i)),Array.isArray(e.add)&&e.add.forEach((function(e){store.$.createAndRelate(o,a,r,i,e,l,n)})),Array.isArray(e.remove)&&e.remove.forEach((function(e){store.$.demolishLink(r,p,store.peekRecord(a._name,e),l.backward.relKey,l.forward,l.backward,!0),store.$.demolishLink(store.peekRecord(a._name,e),a._pK,r,l.forward.relKey,l.backward,l.forward,!0)})),r&&r.hasOwnProperty(i)&&(store.$.deleteDeepNest(r,i),Array.isArray(r[i])&&r[i].hasOwnProperty("partial"))){var c=r[i].partial,d=[];c.forEach((function(e,t){d.push(t),r[i].partial.delete(t)}))}switch(t){case 0:Lyte.isRecord(r[i])&&(store.$.demolishLink(r,p,r[i],l.backward.relKey,l.forward,l.backward,!0),store.$.demolishLink(r[i],a._pK,r,l.forward.relKey,l.backward,l.forward,!0)),store.$.createAndRelate(o,a,r,i,s[i],l,n);break;case 1:break;case 2:this.mergeData(r[i],s[i])}},compareRelations:function(e,t,o,a,r,i){var s=store.modelFor(a.relatedTo),l=s._pK;if("belongsTo"==a.relType)return this.compareRecordWithObj(e[o],t[o],l,r);var n=!1;if(r&&r.partial&&(n=!0),!n&&(!e.hasOwnProperty(o)||e&&e.hasOwnProperty(o)&&(store.$.isEmpty(e[o])||store.$.isEmptyArray(e[o]))))return i?void(t[o]||[]).forEach((function(e){(i.add=i.add||[]).push(e)})):0;for(var p=t[o]?t[o].length:0,c=[],d=0;d<p;d++){var u=t[o][d];if(!r||!r[d]||"removed"!=r[d].type){var h=this.getIndex(e[o],l,"object"==(void 0===u?"undefined":_typeof(u))?store.$.getpKVal(u,s):u);if(-1!=h){c.push(e[o][h].$.pK);var m=this.compareRecordWithObj(e[o][h],u,l,r?r[d]:void 0);1==m&&0,2==m?this.mergeData(e[o][h],u,r?r[d]:void 0):0==m&&0}else{i&&(i.add=i.add||[]).push(u),0}}}i&&!n&&(e[o]||[]).forEach((function(e){var t=e.$.pK;-1==c.indexOf(t)&&(i.remove=i.remove||[]).push(t)}))},compareRecordWithObj:function(e,t,o,a){if(!e||!Lyte.isRecord(e))return 0;var r=e.$.model,i=(r._pK,r.isComp),s=r.fieldList;if(!i){var l=r.fieldList[o];if((void 0===t?"undefined":_typeof(t))==l.type)return e[o]==t?1:0}if(t&&"object"==(void 0===t?"undefined":_typeof(t))){if(!store.$.comparePk(e,store.$.getpKVal(t,r)))return 0;for(var n in t){if(l=s[n]){if("relation"==l.type){var p={},c=this.compareRelations(e,t,n,l,a?a[n]:void 0,p);this.mergeRecords(p,c,r,store.modelFor(l.relatedTo),e,n,t,void 0,a)}else if(e[n]!=t[n])return 2}else if(e[n]!=t[n])return 2}return 1}return 0},validateJSON:function(e,t,o,a,r){var i=a?a.toValidate:void 0,s=i&&Object.keys(i).length?i:e.fieldList,l=!!e.extend;for(var n in t)if(!o||-1!=o.indexOf(n)){var p=s[n];if(p){if("relation"==p.type&&t[n]){var c=a&&a.toPartialAdd?a.toPartialAdd[n]:void 0;if(1!=(m=this.handleRelation(n,e,p,t,c,r)))return new error1(n,{code:m,data:t,message:Lyte.errorCodes[m]});"hasMany"!=p.relType||t[n].add||(store.$.defArrUtls(t[n]),store.$.defPolyUtls(t[n]),store.$.defUtls(t[n],store.model[p.relatedTo],t,n))}else if(p.type){var d=p;void 0===t[n]&&d.default&&(t[n]=store.$.getDefaultVal(t,d.default)),t[n]&&Lyte.Transform.hasOwnProperty(d.type)&&Lyte.Transform[d.type].hasOwnProperty("deserialize")&&(t[n]=Lyte.Transform[d.type].deserialize(t[n]))}}else if(l){var u=store.modelFor(e.extend),h=u.fieldList[n];if(h&&"relation"==h.type){var m;c=a&&a.toPartialAdd?a.toPartialAdd[n]:void 0;if(1!=(m=this.handleRelation(n,u,h,t,c)))return new error1(n,{code:m,data:t,message:Lyte.errorCodes[m]});"hasMany"!=h.relType||t[n].add||(store.$.defArrUtls(t[n]),store.$.defPolyUtls(t[n]),store.$.defUtls(t[n],u,t,n))}}}return t},handleRelation:function(e,t,o,a,r,i){var s={};if(t.rel.hasOwnProperty(e))s=t.rel[e];else{var l=this.getRelations(t,e,store.modelFor(o.relatedTo),s);if(!0!==l)return l;t.rel[e]=s}return this.solveRelation(s,t,store.modelFor(o.relatedTo),e,a,r,i)},getRelations:function(e,t,o,a){if(null==o)return Lyte.error("LD05",e.fieldList[t].relatedTo,t,e._name),"ERR11";if(a.forward=e.fieldList[t],a.backward=this.getBackwardRel(e,a.forward,o),void 0===a.backward){var r={type:"relation",relatedTo:e._name,dummy:a.forward.relKey,relKey:void 0};o.relations[e._name]=o.relations[e._name]||[],o.relations[e._name].push(r),a.backward=r}return!0},getBackwardRel:function(e,t,o){var a,r,i;if(t.opts){if(a=t.opts.inverse,r=t.opts.polymorphic,null===a)return;if(r){var s=o.extendedBy;if(s)for(var l in s){var n=store.modelFor(l);if(n.relations[e._name]){o=n;break}}}}if(a&&""!=a)i=a;else{var p,c=o.relations[e._name],d=store.modelFor(e.extend);!c&&d&&o.relations[d._name]&&(c=o.relations[d._name],p=!0),i=c&&1==c.length&&(!p||p&&c[0].opts&&c[0].opts.polymorphic)?c[0].relKey:void 0}if(!i){var u=o.relations[e._name],h=store.modelFor(e.extend);if(!u&&h&&o.relations[h._name]&&o.relations[h._name].opts&&o.relations[h._name].opts.polymorphic&&(u=o.relations[h._name]),t.dummy&&u){for(var m=0;m<u.length;m++)if(u[m]&&u[m].relKey&&u[m].relKey==t.dummy){i=u[m].relKey;break}}else if(u)for(m=0;m<u.length;m++){if(u[m]&&u[m].opts&&u[m].opts.inverse&&u[m].opts.inverse===t.relKey){i=u[m].relKey;break}if(u[m]&&u[m].dummy&&u[m].dummy==t.relKey){i=u[m];break}}}return i&&i.dummy?i:i?o.fieldList[i]:void 0},solveRelation:function(e,t,o,a,r,i,s){e.backward;var l=e.forward,n=s?s[a]:void 0,p=n&&n.partial,c=(t._pK,[]);if(i)c=i;else if(p){if(Array.isArray(r[a]))c=r[a].splice(0,r[a].length)}else{if(r[a]&&(r[a].add||Lyte.isRecord(r[a])))return!0;if(Array.isArray(r[a])){if("belongsTo"==l.relType)return"ERR21"}else r[a]=[r[a]];c=r[a].splice(0,r[a].length),"belongsTo"==l.relType&&(r[a]=void 0)}for(var d=0;d<c.length;d++){var u;if(1!=(u=this.createAndRelate(t,o,r,a,c[d],e,n)))return u}return!0},createAndRelate:function(e,t,o,a,r,i,s){if(!i.backward&&(i.forward.relatedTo===e._name&&(i.backward=i.forward),void 0===i.backward))return"ERR12";var l,n=e._pK,p=t.isComp,c=s&&s.hasOwnProperty(r[n])?s[r[n]]:s;if(p||(void 0===r?"undefined":_typeof(r))!=t.fieldList[t._pK].type?"object"!=(void 0===r?"undefined":_typeof(r))||Lyte.isRecord(r)||(l=this.insertIntoStore(t,r,void 0,void 0,c)):l=store.peekRecord(t._name,r),l&&l.$&&l.$.isError){store.$.cmpSet(o.$,"isError",!0);var d={code:"ERR24",message:Lyte.errorCodes.ERR24,data:o,error:l.$.error};store.$.cmpSet(o.$.error,a,d)}else l?this.hasDuplicateRelation(l,o[a],t._pK,r._type,t)||this.establishLink(i.forward,i.backward,o,l,void 0,!0,!1):this.addToRelate(e._name,o,i,r);return!0},singleEstablishLink:function(e,t,o){var a=o.$._relationships,r=t.$.model._name,i=e.relKey;a[r]=a[r]||{},a[r][i]=a[r][i]||[],this.hasDuplicateRelation(t,a[r][i],t.$.model._pK,void 0,t.$.model)||a[r][i].push(t)},establishLink:function(e,t,o,a,r,i,s){if(!a)return"ERR13";if(!this.checkForCorrectRelation(e,a))return"ERR14";var l=e.relKey,n=a._type;if("belongsTo"==e.relType)o[l]!==a&&store.$.cmpSet(o,l,a,!0),o.$.partial&&Object.keys(o.$.partial).length&&o.$.partial[l]&&delete o.$.partial[l];else if("hasMany"===e.relType){if(o[l]||store.$.cmpSet(o,l,[],!0),!o[l].model){var p=a.$.model;n&&(store.$.defProp(o[l],"polymorphic",!0),p=store.modelFor(p.extend)),store.$.establishObserverBindings(o,o.$.model._properties),store.$.defArrUtls(o[l]),store.$.defPolyUtls(o[l]),store.$.defUtls(o[l],p,o,l)}var c,d=e?store.modelFor(e.relatedTo):void 0;0!=s&&this.hasDuplicateRelation(a,o[l],e?d._pK:void 0,n,d)||(null!=r?this.handleArrOp(o[l],"insertAt",a,r):this.handleArrOp(o[l],"push",a)),!i&&e.opts&&"partial"==e.opts.serialize&&(c=store.$.partialData(o,l,a.$.pK,"added"))}var u=!1;if(i||(u=!c),e==t)return!0;if(null===t)return a.hasOwnProperty(h)&&delete a[h],!0;if(t.dummy)this.singleEstablishLink(e,o,a);else{var h=t.relKey,m=a.$.model;if(!this.checkForCorrectRelation(t,o))return"ERR14";if("belongsTo"==t.relType)null!=a[h]&&a[t.relKey]!==o&&this.toDemolishLink(m,a,t,i),a[h]!==o&&store.$.cmpSet(a,h,o,!0),a.$.partial&&Object.keys(a.$.partial).length&&a.$.partial[h]&&delete a.$.partial[h];else if("hasMany"===t.relType){a[h]||store.$.cmpSet(a,h,[],!0),a[h].model||(store.$.defArrUtls(a[h]),store.$.defPolyUtls(a[h]),store.$.defUtls(a[h],o.$.model,a,h));var y=t?store.modelFor(t.relatedTo):void 0;this.hasDuplicateRelation(o,a[h],t?y._pK:void 0,n,y)||this.handleArrOp(a[h],"push",o),!i&&t.opts&&"partial"==t.opts.serialize&&store.$.partialData(a,h,o.$.pK,"added")}}return u&&store.$.addDeepNest(a),!0},toDemolishRelation:function(e,t,o){var a=e.data[t],r=e.relations;for(var i in r)for(var s=r[i],l=0;l<s.length;l++){var n=s[l],p=store.modelFor(n.relatedTo);if(p){var c=p._pK,d=n.relKey;if(e._name==p._name){var u,h=p.data;for(u=0;u<h.length;u++){var m=h[u];if(Array.isArray(m[d]))for(var y=0;y<m[d].length;y++){m[d][y][c]==a[c]&&this.handleArrOp(m[d],"removeAt",void 0,y,1)}else Lyte.isRecord(m[d])&&m[d][c]==a[c]&&(m[d]=void 0)}}if(!a[n.relKey]&&!n.dummy)continue;this.toDemolishLink(e,a,n,o)}}},toDemolishLink:function(e,t,o,a){var r=t[o.relKey],i=e._pK,s=store.modelFor(o.relatedTo);if(s){relPriKey=s._pK,relatedModelName=o.relatedTo,bRelation=this.getBackwardRel(e,o,s),serialize=o.opts?o.opts.serialize:void 0,o.dummy&&(r=this.getRelatedRecord(t,o.relatedTo,o.dummy));if(bRelation)if(Array.isArray(r))for(var l=0;l<r.length;l++)this.demolishLink(t,i,r[l],bRelation.relKey,o,bRelation,a);else Lyte.isRecord(r)&&this.demolishLink(t,i,r,bRelation.relKey,o,bRelation,a)}},demolishSingleRelation:function(e,t,o,a,r){var i,s;Lyte.isRecord(e)&&(i=e.$._relationships)&&i[t]&&i[t][o]&&(i=i[t][o],(s=this.getIndex(i,r,a[r]))>-1&&i.splice(s,1))},demolishLink:function(e,t,o,a,r,i,s,l){var n,p=o[a],c=o.$.model,d=e.$.pK,u=p?p.polymorphic:void 0;if(Array.isArray(p)){var h=this.getIndex(p,t,d,e._type),m=o.$._attributes,y=m.hasOwnProperty(a)&&m[a]&&m[a].length?o.$.getInitialValues(a):void 0;-1!=h&&(u&&(n=p[h].$.model._name),this.handleArrOp(o[a],"removeAt",void 0,h,1)),!l&&y&&(store.$.hasRecordsArrayChanged(o,a,y)||(delete o.$._attributes[a],Object.keys(o.$._attributes).length||(store.$.cmpSet(o.$,"isModified",!1),o.$.isNew||(store.$.deleteFromArray(c.dirty,o[c._pK]),(!o.$.dN||o.$.dN&&!Object.keys(o.$.dN).length)&&store.$.removeParentNesting(o)))))}else p&&("object"==(void 0===p?"undefined":_typeof(p))||Lyte.isRecord(p))?null!=Lyte&&null!=Lyte.objectUtils?Lyte.objectUtils(o,"delete",a,void 0,void 0,!0):delete o[a]:this.demolishSingleRelation(o,e.$.model._name,r.relKey,e,t);if(i||(i=c.fieldList[a]),!s){var f,g;if(i){i.opts&&(f="partial"==i.opts.serialize,g=i.opts.deepNest);var v=i?i.relType:void 0}if("belongsTo"==v&&f&&!e.$.isNew){var x=o.$.partial=o.$.partial||{};(x=x[a]=x[a]||new Map).has(d)||x.set(d,{}),(x=x.get(d)).type="removed"}i&&f&&(g=!store.$.partialData(o,a,d,"removed",n)&&g),g&&(store.$.makeDirty("dirty",o,"removed",i,d),store.$.addDeepNest(o))}},rllBckRecArr:function(e,t,o,a){var r={},i=o._pK,s=store.modelFor(a.relatedTo)._pK;store.$.getRelations(o,a.relKey,store.modelFor(a.relatedTo),r);for(var l=e.length-1;l>=0;l--){var n=e[l].records;if("added"==e[l]._type)for(var p=0;p<n.length;p++){(h=n[p]).$.hasOwnProperty("pK")&&(this.demolishLink(h,s,t,r.forward.relKey),null!=r.backward&&this.demolishLink(t,i,h,r.backward.relKey,r.forward))}else if("removed"==e[l]._type)for(p=n.length-1;p>=0;p--){(h=n[p]).$.hasOwnProperty("pK")&&this.establishLink(r.forward,r.backward,t,h,e[l]._indices[p])}else if("changed"==e[l]._type){var c=t[a.relKey];Array.isArray(c)||(c=[c]);for(var d=c.length,u=0;u<d;u++){null!=(h=c[0])&&h.$.hasOwnProperty("pK")&&(this.demolishLink(h,s,t,r.forward.relKey),null!=r.backward&&this.demolishLink(t,i,h,r.backward.relKey,r.forward))}Array.isArray(n)||(n=[n]);for(p=0;p<n.length;p++){var h;"string"==typeof(h=n[p])&&(h=store.peekRecord(r.forward.relatedTo,h)),null!=h&&h.$.hasOwnProperty("pK")&&this.establishLink(r.forward,r.backward,t,h,void 0)}}}},sortBy:function(e,t){var o=store.$.mapBy.call(this,e),a=this.model.fieldList[e];a&&"string"==a.type?(o.sort(),"desc"==t&&o.reverse()):(o.sort((function(e,t){return e-t})),"desc"==t&&o.sort((function(e,t){return t-e})));for(var r=this.slice(0),i=[],s=0;s<o.length;s++)if(null!=o[s]){var l=store.$.getIndex(r,e,o[s]);i.push(r[l]),r.splice(l,1)}return r.length>0&&(i="desc"==t?i.concat(r):r.concat(i)),store.$.defArrUtls(i),store.$.defUtls(i,this.model),i},mapBy:function(e){return this.map((function(t){return t.$.get(e)}))},revertToOldVal:function(e,t,o,a){if(null!=o&&0!=o.length){Array.isArray(o)||(o=[o]);for(var r=0;r<o.length;r++){var i=a.forward.relatedTo,s=store.peekRecord(i,o[r]);this.establishLink(a.forward,a.backward,e,s,void 0)}}},removePartial:function(e,t){var o=e.$.partial;o&&o[t]&&delete o[t]},findCurrentInd:function(e,t){var o,a,r=e._deleted,i=!1;return r.forEach((function(e,r){i&&e.index<o&&a--,r==t&&(i=!0,a=o=e.index)})),a},modifyDelInd:function(e,t){var o,a=e._deleted,r=!1;a.forEach((function(e,a){r&&e.index>=o&&(e.index=e.index+1),a==t&&(r=!0,o=e.index)}))},rollBackDelete:function(e,t,o){var a=[];if(t){var r=e._deleted.get(t),i=e._pK;a=[r]}else e._deleted.forEach((function(e){a.push(e)}));for(var s=this,l=a.length-1;l>=0;l--){var n=(r=a[l]).data;if(Lyte.isRecord(n)){store.$.cmpSet(n.$,"isDeleted",!1);var p=store.$.isDuplicateRecord(e,n);o?s.handleArrOp(e.data,"insertAt",n,r.index):s.handleArrOp(e.data,"push",n);var c=e.relations;if(c)for(var d in c){(c[d]||[]).forEach((function(t){var o,a,r=t.relKey;if(n.hasOwnProperty(r)){a=store.modelFor(t.relatedTo),o=s.getBackwardRel(e,t,a);var i=n[r];Array.isArray(i)?i.forEach((function(e,a){s.establishLink(t,o,n,e,void 0)})):s.establishLink(t,o,n,n[r],void 0)}}))}(n.$.isNew||n.$.isModified)&&this.checkAndAddToArray(e.dirty,n[e._pK]),store.$.clrRecErr(n.$,i,"ERR17"),p||e.data._recMap.set("object"==_typeof(n.$.pK)?n.$.pK:n.$.pK.toString(),n),e.emit("add",[n]),store.emit("add",[e._name,n]),e._deleted.delete(n.$.pK)}}},rollBackNew:function(e,t,o){var a=t.$.pK,r=this.getIndex(e.data,o,a);store.$.toDemolishRelation(e,r),this.handleArrOp(e.data,"removeAt",void 0,r,1),store.$.cmpSet(t.$,"isNew",!1),store.$.cmpSet(t,"$",{}),e.emit("remove",[t]),store.emit("remove",[e._name,t]),this.deleteFromArray(e.dirty,a)},emit:function(e,t,o,a){t.$.emit(e,[t,o,a]),t.$.model.emit(e,[t,o,a]),store.emit(e,[t.$.model._name,t,o,a])},hasRecordsArrayChanged:function(e,t,o){var a=o||e.$.getInitialValues(t),r=!0;e.$.model._pK;if(a&&a.length==e[t].length){r=!1;for(var i=0;i<a.length;i++)if(-1==e[t].indexOf(a[i]))return!0}return r},setRecErr:function(e,t,o,a){store.$.cmpSet(e,"isError",!0);var r=o;if("object"==(void 0===r?"undefined":_typeof(r)))store.$.cmpSet(e.error,t,r);else{if("string"==typeof o)r=Lyte.errorCodes[o]?{code:o,message:Lyte.errorCodes[o]}:o;store.$.cmpSet(e.error,t,r),a&&store.$.cmpSet(e.error[t],"value",a)}store.$.emit("error",e.record,t,r)},clrRecErr:function(e,t,o){var a=Lyte.objectUtils,r=e.error;if(o)e.error.code==o&&(void 0!==a?a(r,"delete",t):delete r[t]);else if(t)void 0!==a?a(r,"delete",t):delete r[t];else if(void 0!==a)for(var i in r)a(r,"delete",i);else e.error={};0==Object.keys(e.error).length&&store.$.cmpSet(e,"isError",!1)},cacheQuery:function(e,t,o,a){var r=store.model.cachedQueries;(r=(r=store.model.cachedQueries=r||{})[e]=r[e]||[]).push({queryParams:t,data:o,status:a})},cacheRecordQuery:function(e,t,o,a,r){var i=store.model.cachedRecordQueries;(i=(i=(i=store.model.cachedRecordQueries=i||{})[e]=i[e]||{})[t]=i[t]||[]).push({queryParams:o,data:a,status:r})},handleArrOp:function(e,t,o,a,r){r=null!=r?r:0;var i,s=void 0!==Lyte.arrayUtils;switch(t){case"push":e.model&&e.sortBy&&(null==e._recMap&&store.$.defProp(e,"_recMap",new Map),e._recMap.set("object"==_typeof(o.$.pK)?o.$.pK:o.$.pK.toString(),o)),i=s?Lyte.arrayUtils(e,t,o):e.push(o);break;case"removeAt":if(e.model&&e.sortBy)for(var l=r,n=0;n<l;n++){var p=e[a+n]?e[a+n].$.pK:void 0;(p="object"==(void 0===p?"undefined":_typeof(p))?p:p.toString())&&e._recMap&&e._recMap.delete(p)}i=s?Lyte.arrayUtils(e,t,a,r):e.splice(a,r);break;case"insertAt":e.model&&e.sortBy&&(null==e._recMap&&store.$.defProp(e,"_recMap",new Map),e._recMap.set("object"==_typeof(o.$.pK)?o.$.pK:o.$.pK.toString(),o)),i=s?Lyte.arrayUtils(e,t,a,o):e.splice(a,r,o);break;default:Lyte.error("LD07",t)}return i},defArrUtls:function(e){Object.defineProperties(e,{filterBy:{value:store.$.filterBy},sortBy:{value:store.$.sortBy},mapBy:{value:store.$.mapBy}})},defPolyUtls:function(e){Object.defineProperties(e,{add:{value:store.$.add},remove:{value:store.$.remove}})},defUtls:function(e,t,o,a){t&&store.$.defProp(e,"model",t),o&&store.$.defProp(e,"record",o,!1,!0),a&&store.$.defProp(e,"key",a)},defPar:function(e){store.$.defProp(e,"partial",new Map)},cmpSet:function(e,t,o,a){void 0!==Lyte.Component?Lyte.Component.set(e,t,o,a):e[t]=o},defProp:function(e,t,o,a,r){a=!!a,r=!!r,Object.defineProperty(e,t,{value:o,enumerable:a,writable:r})}}};function Adapter(e,t,o){var a=this;for(var r in t&&t.mixins&&t.mixins.length&&t.mixins.forEach((function(e){if(Lyte.Mixin.exists(e)){var t=Lyte.registeredMixins[e];for(var r in t)a[r]=t[r]}else Lyte.$.requiredMixins(e,{name:o,scope:store},"adapter")})),e)this[r]=e[r];if(this.__extendedBy=[],store.adapter.__toAddSuper&&store.adapter.__toAddSuper.hasOwnProperty(o)){for(var i=store.adapter.__toAddSuper[o],s=0;s<i.length;s++){var l,n=store.adapter[i[s]];if(n&&"adapter"==n.is)n.$super=this,this.__extendedBy.push(i[s]),"application"!=o&&(store.adapter.__toAddSuper.application&&(l=store.adapter.__toAddSuper.application.indexOf(n.__name))>-1&&store.adapter.__toAddSuper.application.splice(l,1),store.adapter.application&&(l=store.adapter.application.__extendedBy.indexOf(n.__name))>-1&&store.adapter.application.__extendedBy.splice(l,1))}delete store.adapter.__toAddSuper[o]}store.$.defProp(this,"is","adapter"),store.$.defProp(this,"__name",o)}function Serializer(e,t,o){for(key in e)this[key]=e[key];var a=this;t&&t.mixins&&t.mixins.length&&t.mixins.forEach((function(e){if(Lyte.Mixin.exists(e)){var t=Lyte.registeredMixins[e];for(var r in t)a[r]=t[r]}else Lyte.$.requiredMixins(e,{name:o,scope:store},"serializer")})),this.__extendedBy=[];var r=store.serializer;if(r.__toAddSuper&&r.__toAddSuper.hasOwnProperty(o)){for(var i=r.__toAddSuper[o],s=0;s<i.length;s++){var l=r[i[s]];if(l&&"serializer"==l.is&&(l.$super=this,this.__extendedBy.push(i[s]),"application"!=o)){var n;if(r.__toAddSuper.application)(n=r.__toAddSuper.application.indexOf(l.__name))>-1&&r.__toAddSuper.application.splice(n,1);if(r.application)(n=r.application.__extendedBy.indexOf(l.__name))>-1&&r.application.__extendedBy.splice(n,1)}}delete r.__toAddSuper[o]}store.$.defProp(this,"is","serializer"),store.$.defProp(this,"__name",o)}Object.defineProperties(Adapter.prototype,{super:{value:function(){return store.$.super.call(this,arguments)}},extends:{value:function(e){store.$.extendCallback.call(this,store,"adapter",e)}}}),store.adapter={$:{getFromAdapter:function(e,t,o){for(var a=e?e[t]:void 0;void 0===a;)if(e&&e.$super)a=(e=e.$super)?e[t]:void 0;else{if(!(e=o?store.serializer.application:store.adapter.application)||!e.hasOwnProperty(t)){switch(t){case"host":a=window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.host;break;case"namespace":a="";break;case"actionNamespace":a="action";break;case"batchNamespace":a="batch";break;default:a=void 0}break}if(void 0===(a=e[t]))break}return a},buildURL:function(e,t,o,a,r,i,s,l){var n=store.adapter[o],p=this.getFromAdapter(n,"host"),c="";store.$.makeBatch||void 0!==p&&(c+=p,"/"!=p[p.length-1]&&(c+="/"));var d=this.getFromAdapter(n,"namespace");if(""!==d&&"/"!=d[d.length-1]?c+=d+"/":c+=d,"batch"!=e&&(c+=o,a&&"object"!=(void 0===a?"undefined":_typeof(a))&&(c+="/"+a)),"action"==e){c+="/"+this.getFromAdapter(n,"actionNamespace");var u=store.modelFor(o).actions;c+="/"+(u[s].endPoint?u[s].endPoint:s)}else"batch"==e&&(c+=this.getFromAdapter(store.adapter.application,"batchNamespace"));i||(i={});var h,m=store.$.cbScp(o,"headersForRequest"),y={method:t||""};if(m&&(h=store.$.consArg(e,i,l,s,a),y.headers=store.$.cB(m,h)),(m=store.$.cbScp(o,"buildURL"))&&(h=store.$.consArg(o,e,i,r,c,s,l,a),c=store.$.cB(m,h)),(m=store.$.cbScp(o,"methodForRequest"))&&(h=store.$.consArg(t,e,i,l,s,a),y.method=store.$.cB(m,h)),!store.$.makeBatch&&Object.keys(i).length){c+="?";var f=0;for(var g in i){0!==f&&(c+="&");var v=i[g];v&&"object"==(void 0===v?"undefined":_typeof(v))&&(v=JSON.stringify(v)),c+=g+"="+encodeURIComponent(v),f++}}return n&&1==n.withCredentials&&(y.withCredentials=!0),y.url=c,y.qP=i,y},get:function(e,t,o,a,r,i,s){var l=store.modelFor(t),n=store.$.makeBatch;if(l){i=null==i?store.adapter.$.getFromAdapter(store.adapter[t],"customData"):i;var p=this.buildURL(e,"GET",t,o,void 0,a,void 0,i),c=this;if("findAll"==e&&a&&store.model.cachedQueries&&store.model.cachedQueries[t]){for(var d=store.model.cachedQueries[t],u=0;u<d.length;u++){var h=d[u].queryParams;if(this.compareObjects(h,a,!0)){m=[d[u].data,"cache",void 0,d[u].status];break}}if(m)return new Promise((function(e){n&&store.$.addToCachedBatch(Array.isArray(m)?m[0][t]:m),e(m)}))}else if("findRecord"==e&&a&&store.model.cachedRecordQueries&&store.model.cachedRecordQueries[t]&&store.model.cachedRecordQueries[t][o]){var m;for(d=store.model.cachedRecordQueries[t][o],u=0;u<d.length;u++){h=d[u].queryParams;if(this.compareObjects(h,a,!0)){m=[d[u].data,"cache",void 0,d[u].status];break}}if(m)return new Promise((function(e){n&&store.$.addToCachedBatch(Array.isArray(m)?m[0][t]:m),e(m)}))}else{var y,f;if(y=store.$.cbScp(t,"findRecord"==e?"reloadRecord":"reloadAll"))if("findRecord"==e?f=store.peekRecord(t,o):"findAll"==e&&(f=store.peekAll(t)),!store.$.cB(y,[f,a,i])){var g={};return g[t]=f,new Promise((function(e){n&&store.$.addToCachedBatch(g[t]),e([g,"cache"],"success",void 0,!0)}))}}if("POST"==p.method)if(y=store.$.cbScp(t,"serialize",1)){var v=store.$.consArg(e,void 0,void 0,i,t,a);p.data=store.$.cB(y,v)}return new Promise((function(l,d){var u,h=store.modelFor(t).idb,m=c.getFromAdapter(store.adapter[t],"processRequest"),y=!0,f=!1,g=[t,e,o,p,l,d,"get",void 0,i],v={cacheQuery:r,cacheData:s,customD:i};if(m){y=!1;var x=c.callGeneric(e,t,void 0,void 0,i,a,o,p.url);x instanceof Promise?(f=!0,x.then((function(a){a=""==a?JSON.parse("{}"):JSON.parse(a),u=c.getResponse(a,t,e,o,p,void 0,i,v),l([u])}),(function(e){d(e)}))):y=!0}n&&!f?store.adapter.$.constructBatch.apply(store.adapter.$,g).then((function(a){var r=a.content;store.adapter.$.getSuccess(t,e,o,p,void 0,l,d,r,a,void 0,v)}),(function(a){store.adapter.$.getFailure(t,e,o,p,void 0,l,d,v,a.content,a.code)})):h?store.adapter.$.getFromIDB(h,t,e,a,o,p).then((function(r){var i,s=store.$.cbScp(t,"idbResponse",1);s&&(i=store.$.consArg(t,e,a,o,r),r=store.$.cB(s,i)),0==r?store.adapter.$.sendXHR.apply(store.adapter.$,g).then((function(a){store.adapter.$.getSuccess(t,e,o,p,a,l,d,void 0,void 0,void 0,v)}),(function(a){store.adapter.$.getFailure(t,e,o,p,a,l,d,v)})):store.adapter.$.getSuccess(t,e,o,p,void 0,l,d,r,void 0,"idb",v)}),(function(a){store.adapter.$.sendXHR.apply(store.adapter.$,g).then((function(a){store.adapter.$.getSuccess(t,e,o,p,a,l,d,void 0,void 0,void 0,v)}),(function(a){store.adapter.$.getFailure(t,e,o,p,a,l,d,v)}))})):y&&store.adapter.$.sendXHR.apply(store.adapter.$,g).then((function(a){store.adapter.$.getSuccess(t,e,o,p,a,l,d,void 0,void 0,void 0,v)}),(function(a){store.adapter.$.getFailure(t,e,o,p,a,l,d,v)}))}))}return Lyte.warn("LD02","Model",t),Promise.reject({code:"ERR19",message:Lyte.errorCodes.ERR19,data:t})},constructBatch:function(e,t,o,a){return new Promise((function(e,t){var o=store.$.currentBatch,r=store.$.batch[o]=store.$.batch[o]||[],i=store.$.batchPromise[o]=store.$.batchPromise[o]||[],s={};s.method=a.method,s.uri="/"+a.url,s.parameters=a.qP,s.content="string"==typeof a.data?JSON.parse(a.data):void 0,r.push(s),i.push({resolve:e,reject:t})}))},getFromIDB:function(e,t,o,a,r,i,s){return new Promise((function(i,s){if(worker){var l=e.queryCache?"getCachedData":"findAll"==o?"getAll":"get",n={resolve:i,reject:s,type:l,model:t,req:o,key:r};"getCachedData"==l&&(n.queryParams=a),LyteIDB.postMessage(n)}else s()}))},sendXHR:function(e,t,o,a,r,i,s,l,n){return new Promise((function(r,i){var s=new XMLHttpRequest;for(var l in s.open(a.method,a.url,!0),a.headers)s.setRequestHeader(l,a.headers[l]);s.withCredentials=!!a.withCredentials;var p,c=store.$.cbScp(e,"parseRequest");c&&(p=store.$.consArg(t,e,s,a?a.qP:void 0,o,n),store.$.cB(c,p)),store.emit("beforeRequest",[s,e,t,o,a.qP]),s.send(a.data),s.onreadystatechange=function(){if(4==s.readyState)return store.emit("afterRequest",[s,e,t,o,a.qP]),"2"==s.status.toString()[0]||"3"==s.status.toString()[0]?r(s):i(s)}}))},getSuccess:function(e,t,o,a,r,i,s,l,n,p,c){var d,u,h=l,m=r,y=c.customD;r&&r.status;if("idb"!=p){if(m&&(h=(h=m.responseText)&&0!=h.length?JSON.parse(h):JSON.parse("{}")),n&&(d=n.index,u=n.batch,m=n.resp),m){var f,g=store.$.cbScp(e,"parseResponse");if(g&&(f=store.$.consArg(t,e,m,h,a?a.qP:void 0,o,y,c),(h=store.$.cB(g,f))instanceof Promise))return this.handleParseResponsePromise(h,e,t,o,a,r,void 0,d,u,i,s,c)}return this.findParseRequestPromise(h,e,t,o,a,r,d,u,i,c)}i(r?[h,r.statusText,r]:null!=d?[h,"batch",{index:d,batch:u}]:[h])},getFailure:function(e,t,o,a,r,i,s,l,n,p){var c=l.customD;if(r){var d,u,h=store.$.cbScp(e,"parseResponse"),m=r.responseText;if(m)try{m=""==m?JSON.parse("{}"):JSON.parse(m)}catch(e){Lyte.warn("LD24",e)}if(h&&(d=store.$.consArg(t,e,r,m,a?a.qP:void 0,o,c,l),(u=store.$.cB(h,d))instanceof Promise))return this.handleParseResponsePromise(u,e,t,o,a,r,void 0,void 0,void 0,i,s,l)}else n&&s({code:p,status:"requestFailure",data:n});s(r)},getResponse:function(e,t,o,a,r,i,s,l){i&&i.status;e=store.serializer.$.normalizeResponse(t,o,e,a,i?i.status:i,r,s,l);var n,p=store.$.cbScp(t,"extractMeta",1),c=e,d=r?r.qP:void 0;if("object"!=(void 0===c?"undefined":_typeof(c))&&(c=JSON.parse(c)),p){n=store.$.consArg(c,t,o,d,s,l);var u=store.$.cB(p,n);store.$.isEmpty(u)||(c.meta=u)}var h=Object.keys(c),m=h.length;if(m){if(p=store.$.cbScp(t,"payloadKey",1)){n=store.$.consArg(t,o,a,d,s,l);var y=store.$.cB(p,n);if(y&&y!=t){var f=c[y];c[t]=f,delete c[y]}}if(p=store.$.cbScp(t,"deserializeKey",1)){Lyte.warn("LD08","deserializeKey","callback","Please use payloadKey callback instead"),m>2&&Lyte.error("LD09");var g=0;2==m&&"meta"==h[0]&&(g=1),n=store.$.consArg(t,o);var v=store.$.cB(p,n),x=c[h[g]];delete c[h[g]],c[v]=x}store.serializer.$.normalize(t,o,c,a,i?i.status:i,r.headers,s,l,r)}return c},create:function(e,t,o,a,r){var i=o?"createRecord":"create",s=new Map;a=null==a?store.adapter.$.getFromAdapter(store.adapter[e],"customData"):a;var l=this.buildURL(i,"POST",e,void 0,t,r,void 0,a),n=store.$.toJSON(e,t,void 0,"create",s);return this.sendingData(e,n,l,i,a,t),this.handleRequest(l,e,t,i,n,a,s)},put:function(e,t,o,a,r,i){var s=store.model[e],l=s.bK,n=s.isComp;r=null==r?store.adapter.$.getFromAdapter(store.adapter[e],"customData"):r;var p=a?"updateRecord":"update",c=new Map,d=a?n&&l?o[l]:o.$.pK:void 0,u=this.buildURL(p,"PATCH",e,d,t,i,void 0,r),h=store.$.toJSON(e,t,void 0,void 0,c);return this.sendingData(e,h,u,p,r,o),this.handleRequest(u,e,o,p,h,r,c,d)},del:function(e,t,o,a,r,i){var s=store.model[e],l=s.bK,n=s.isComp;r=null==r?store.adapter.$.getFromAdapter(store.adapter[e],"customData"):r;var p=a||"deleteRecord",c=o?n&&l?t[l]:t.$.pK:void 0,d=this.buildURL(p,"DELETE",e,c,t,i,void 0,r),u=[];o||(u=t.map((function(e){return e.$.pK})));var h=o?t?t.$.pK:void 0:u;return this.sendingData(e,h,d,p,r,t),this.handleRequest(d,e,t,p,h,r,void 0,c)},sendingData:function(e,t,o,a,r,i){var s=store.$.cbScp(e,"serializeKey",1),l=e,n={},p=o?o.qP:void 0,c={};for(var d in o)c[d]=o[d];if(c.type=a,c.model=e,s){var u=store.$.consArg(e,a,r,p);l=store.$.cB(s,u)}if(t=this.serializeRecords(e,t,i,c,"serializeRecord",r),l?(Array.isArray(t)||"object"==(void 0===t?"undefined":_typeof(t))||Lyte.isRecord(t))&&(n[l]=t):n=t,s=store.$.cbScp(e,"serialize",1)){u=store.$.consArg(a,n,i,r,e,p);n=store.$.cB(s,u)}("deleteRecord"!==a&&"destroyRecord"!==a||s&&n&&null!=n&&""!==n)&&(o.data=n)},serializeRecords:function(e,t,o,a,r,i){var s,l=store.modelFor(e),n=l.relations;if(o||"normalizeRecord"==r||(o=store.peekRecord(l._name,t.$.pK)),Array.isArray(t)){s=[];for(var p=0;p<t.length;p++){var c=t[p];c&&"object"===(void 0===c?"undefined":_typeof(c))?s.push(this.serializeSingleRecord(l._name,c,o?o[p]:void 0,a,n,r,i)):s.push(c)}}else t&&(s="object"===(void 0===t?"undefined":_typeof(t))?this.serializeSingleRecord(l._name,t,o,a,n,r,i):t);return s},serializeSingleRecord:function(e,t,o,a,r,i,s){var l,n=store.$.cbScp(e,i,1);n&&(l="serializeRecord"==i?store.$.consArg(a,t,o,e,s):store.$.consArg(a,t,e,s),t=store.$.cB(n,l));for(var p in r)for(var c=r[p],d=c.length,u=0;u<d;u++){var h,m,y,f,g=c[u],v=t[g.relKey];if("relation"==g.type&&v&&("normalizeRecord"==i||"serializeRecord"==i&&g.opts&&g.opts.serialize&&"id"!=g.opts.serialize))if(h=o?o[g.relKey]:void 0,m=g.relatedTo,y=g.opts?g.opts.serialize:void 0,f=g.opts?g.opts.polymorphic:void 0,"hasMany"===g.relType){Array.isArray(v)||(v=[v]);for(var x=v.length,P=[],b=0;b<x;b++){var D=m;f&&("normalizeRecord"==i?D=v[b]&&v[b]._type?v[b]._type:m:"serializeRecord"==i&&("record"==y?D=h&&Lyte.isRecord(h[b])?h[b].$.model._name:m:"partial"==y&&(D=v[b]&&v[b].$?v[b].$.polymorphicType:m))),P.push(this.serializeRecords(D,v[b],void 0,a,i,s))}t[g.relKey]=P}else{D=m;f&&("normalizeRecord"==i?D=t[g.relKey]&&t[g.relKey]._type?t[g.relKey]._type:m:"serializeRecord"==i&&(D=Lyte.isRecord(o[g.relKey])?o[g.relKey].$.model._name:m)),t[g.relKey]=this.serializeRecords(D,t[g.relKey],o?o[g.relKey]:void 0,a,i,s)}}return t},handleAction:function(e,t,o,a,r,i,s){var l;o&&Lyte.isRecord(o)&&(l=o.$.get(t._pK));var n=t._name,p="action";a=null==a?store.adapter.$.getFromAdapter(store.adapter[t._name],"customData"):a;var c=this.buildURL(p,i||"POST",t._name,l,o,r,e,a);c.data=s;var d=store.$.cbScp(t._name,"serialize",1);if(d){var u=store.$.consArg("action",s,o,a,n,r,e);c.data=store.$.cB(d,u)}return this.handleRequest(c,t._name,void 0,p,void 0,a,void 0,void 0,e)},handleRequest:function(e,t,o,a,r,i,s,l,n){!e.data||"object"!=_typeof(e.data)&&!Lyte.isRecord(e.data)&&!Array.isArray(e.data)||e.data instanceof FormData||(e.data=JSON.stringify(e.data));var p,c=this;return new Promise((function(r,d){var u=c.getFromAdapter(store.adapter[t],"processRequest"),h=!0,m=store.$.makeBatch,y=!1;if(u){h=!1;var f,g=c.callGeneric(a,t,e.data,o,i,e?e.qP:void 0,l,e.url,n);g instanceof Promise?(y=!0,g.then((function(l){l=""==l?JSON.parse("{}"):JSON.parse(l),f=c.genericResponse(l,t,a,o,e,void 0,s,i),r(f)}),(function(e){d(e)}))):h=!0}if(m&&!y)store.adapter.$.constructBatch(t,a,l,e).then((function(s){var c=s.content;store.adapter.$.handleSuccess(t,a,p,o,e,r,c,s,void 0,d,l,i,n)}),(function(s){store.adapter.$.handleFailure(t,a,p,o,e,r,s.content,void 0,d,l,i,s.code,n)}));else if(h){var v=[t,a,l,e,r,d,"other",o,i];store.adapter.$.sendXHR.apply(store.adapter.$,v).then((function(p){store.adapter.$.handleSuccess(t,a,p,o,e,r,void 0,void 0,s,d,l,i,n)}),(function(p){store.adapter.$.handleFailure(t,a,p,o,e,r,void 0,s,d,l,i,void 0,n)}))}}))},handleSuccess:function(e,t,o,a,r,i,s,l,n,p,c,d,u){var h,m,y,f=o?o.responseText:void 0;o&&o.status;if(s)f=s;else if(f&&0!=f.length)if("action"==t)try{s=JSON.parse(f)}catch(e){s=f}else s=JSON.parse(f);else s=JSON.parse("{}");o&&(h=o),l&&(m=l.index,y=l.batch,h=l.resp);var g={customD:d};if(h){var v,x=store.$.cbScp(e,"parseResponse");if(x&&(v=store.$.consArg(t,e,h,s,r?r.qP:void 0,c,d,void 0,u),(s=store.$.cB(x,v))instanceof Promise))return this.handleParseResponsePromise(s,e,t,a,r,o,n,m,y,i,p,g)}return this.otherParseRequestPromise(s,e,t,a,r,o,n,m,y,i,p,d)},handleFailure:function(e,t,o,a,r,i,s,l,n,p,c,d,u){if(o){var h,m,y=store.$.cbScp(e,"parseResponse"),f=o.responseText;if(f)try{f=""==f?JSON.parse("{}"):JSON.parse(f)}catch(e){Lyte.warn("LD24",e)}if(y&&(m=store.$.consArg(t,e,o,f,r?r.qP:void 0,p,c,void 0,u),(h=store.$.cB(y,m))instanceof Promise))return this.handleParseResponsePromise(h,e,t,a,r,o,l,void 0,void 0,i,n,c)}else s&&n({code:d,status:"requestFailure",data:s});n(o)},updateIDB:function(e,t,o){o&&!Array.isArray(o)&&(o=[o]);var a=store.model[e];if(a.hasOwnProperty("idb")&&(!a.idb||a.idb.hasOwnProperty("queryCache"))){var r=store.$.idbQ2[e]=store.$.idbQ2[e]||[];if(o)switch(t){case"update":case"updateRecord":o.forEach((function(t,o){if(t&&Lyte.isRecord(t)){var a=store.model[e].relations,i=t.$.parent;if(i){var s=i.$.model._name;(store.$.idbQ2[s]=store.$.idbQ2[s]||[]).push({type:"updateRecord",model:s,data:i.$.toJSON(!0)})}else r.push({type:"updateRecord",model:e,data:t.$.toJSON(!0)});store.adapter.$.updateRelationsIDB(t,a),store.$.addToIDBonSave(e,t)}}));break;case"delete":case"deleteRecord":case"destroyRecord":var i,s;store.modelFor(e)._pK;o.forEach((function(t,o){if(t&&Lyte.isRecord(t)){var a=store.model[e].relations;(i=t.$.parent)?(s=i.$.model._name,(store.$.idbQ2[s]=store.$.idbQ2[s]||[]).push({type:"updateRecord",model:i.$.model._name,data:i.$.toJSON(!0)})):r.push({type:"deleteRecord",model:e,key:t.$.pK}),store.adapter.$.updateRelationsIDB(t,a),store.$.removeOnSave(e,t.$.pK)}}));break;case"create":case"createRecord":o.forEach((function(t,o){if(t&&Lyte.isRecord(t)){var a=store.model[e].relations;r.push({type:"createRecord",model:e,data:t.$.toJSON(!0)}),store.adapter.$.updateRelationsIDB(t,a),store.$.addToIDBonSave(e,t)}}))}}},updateRelationsIDB:function(e,t){for(var o in t){t[o].forEach((function(t){var o=t.relKey,a=t.relatedTo,r=store.$.idbQ2[a]=store.$.idbQ2[a]||[],i=e[o];i&&(Array.isArray(i)?i.forEach((function(e){Lyte.isRecord(e)&&!e.$.parent&&e.$.inIDB&&r.push({type:"updateRecord",model:a,data:e.$.toJSON(!0)})})):Lyte.isRecord(i)&&!i.$.parent&&i.$.inIDB&&r.push({type:"updateRecord",model:a,data:i.$.toJSON(!0)}))}))}},callGeneric:function(e,t,o,a,r,i,s,l,n){var p,c=store.$.cbScp(t,"processRequest");if(c){var d=store.$.consArg(e,t,o,a,r,i,s,l,n);p=store.$.cB(c,d)}return p},genericResponse:function(e,t,o,a,r,i,s,l){var n,p,c=e,d=(i&&i.status,r?r.qP:void 0);if(n=store.$.cbScp(t,"extractMeta",1))if(c){f=store.$.consArg(c,t,o,d,l);var u=store.$.cB(n,f);store.$.isEmpty(u)||(c.meta=u),p=!0}else p=!1;if(c&&"action"!=o){if(c=store.serializer.$.buildJSON(t,o,c,Lyte.isRecord(a)?a[store.modelFor(t)._pK]:void 0,i?i.status:void 0,r,l,d),0==p&&n&&c){f=store.$.consArg(c,t,o,d,l);u=store.$.cB(n,f);store.$.isEmpty(u)||(c.meta=u)}var h=Object.keys(c),m=h.length;if(n=store.$.cbScp(t,"deserializeKey",1)){Lyte.warn("LD08","deserializeKey","callback","Please use payloadKey callback instead"),m>2&&Lyte.error("LD09");var y=0;"meta"==h[0]&&(y=1);var f=store.$.consArg(t,o),g=store.$.cB(n,f),v=c[h[y]];delete c[h[y]],c[g]=v}this.handleResponse(a,c[t],store.modelFor(t),o,s)}return c},removePartialKeys:function(e,t,o){var a=t.relations,r=e.$.pK;for(var i in a){a[i].forEach((function(o){var a;if((a=store.$.getBackwardRel(t,o,store.model[o.relatedTo]))&&"hasMany"==a.relType&&a.opts&&"partial"==a.opts.serialize){var i=o.relKey,s=a.relKey,l=e[i];if(l)if(Array.isArray(l))l.forEach((function(e){var t=e[s];t&&t.partial&&t.partial.get(r)&&t.partial.delete(r)}));else if(l[s]){var n=l[s];n&&n.partial&&n.partial.get(r)&&n.partial.delete(r)}}}))}},checkResponse:function(e,t,o,a,r,i){this.removePartialKeys(e,t,a),r&&Object.keys(r).length&&this.mergeNewDataKeys(r,e,o);var s,l=!1;if(e.$.isNew){var n=t._arrPk;s=e.$.pK,n.forEach((function(t){e.hasOwnProperty(t)&&o.hasOwnProperty(t)&&store.$.cmpSet(e,t,o[t],!0)}));var p=store.$.getpKVal(e);store.$.cmpSet(e.$,"pK",p),t.data._recMap&&(t.data._recMap.delete("object"==(void 0===s?"undefined":_typeof(s))?s:s.toString()),t.data._recMap.set("object"==(void 0===p?"undefined":_typeof(p))?p:p.toString(),e)),store.$.updateNestScp(e),c=store.$.validateAndMerge(t,o,r),l=!0,store.$.cmpSet(e.$,"isNew",!1),0==c&&Lyte.error("LD01",o)}if(e.$.isModified){var c;if(s=s||e.$.pK,!e.$.isDeleted&&o&&!l)o&&(c=store.$.validateAndMerge(t,o,r)),l=!0,0==c&&Lyte.error("LD15",o);store.$.cmpSet(e.$,"isModified",!1),e.$._attributes={}}t.dirty.length&&store.$.deleteFromArray(t.dirty,s),e.$.isDeleted&&(store.$.cmpSet(e.$,"isDeleted",!1),t._deleted.delete(e.$.pK)),r&&Object.keys(r).length&&o&&!l&&(o&&(c=store.$.validateAndMerge(t,o,r)),0==c&&Lyte.error("LD15",o));for(var d=e.$.isDirty(),u=0;u<d.length;u++){var h=e[d[u]];if(Array.isArray(h))for(var m=0;m<h.length;m++)Lyte.isRecord(h[m])&&store.$.cmpSet(h[m].$,"isModified",!1);else Lyte.isRecord(h)&&store.$.cmpSet(h.$,"isModified",!1)}e.$.undoStack=store.$.genUnRedoStack(),e.$.redoStack=store.$.genUnRedoStack(),delete e.$._savedState,store.$.clrRecErr(e.$),store.$.removeDeepNest(e)},mergeNewDataKeys:function(e,t,o){if(1==e.partial){var a=this;Array.isArray(e)&&e.forEach((function(e,r){var i=store.model[e.model]._pK,s=store.$.getIndex(t,i,e.pkVal);a.mergeNewDataKeys(e,t?t[s]:void 0,o?o[r]:void 0),t.partial.delete(e.pkVal)}))}else if(e&&e.type){if("added"==e.type){var r=store.model[e.model],i=(r._pK,r._arrPk),s=t.$.pK,l="object"==(void 0===s?"undefined":_typeof(s))?s:s.toString();i.forEach((function(e){o&&o.hasOwnProperty(e)?store.$.cmpSet(t,e,o[e],!0):Lyte.error("LD16",t)}));var n=store.$.getpKVal(t);store.$.cmpSet(t.$,"pK",store.$.getpKVal(t));var p="object"==(void 0===n?"undefined":_typeof(n))?n:n.toString();r.data._recMap.delete(l),r.data._recMap.set(p,t),store.$.changeRelPkMaps(t,l,p),store.$.updateNestScp(t),store.$.cmpSet(t.$,"isNew",!1),store.$.cmpSet(t.$,"isModified",!1),t.$._attributes={},store.$.deleteFromArray(store.model[e.model].dirty,s)}else if("modified"==e.type||"related"==e.type)store.$.cmpSet(t.$,"isModified",!1),t.$._attributes={},store.$.deleteFromArray(store.model[e.model].dirty,t.$.pK);else if("removed"==e.type){var c=store.model[e.model],d=e.pkVal,u=c._deleted.get(d);if(u){var h=u.data;store.$.cmpSet(h.$,"isDeleted",!1),c._deleted.delete(d)}return void(e.parent&&(e.parent.$.partial={}))}if(store.$.clrRecErr(t.$),"removed"!=e.type)for(var m in e){var y=e[m];this.mergeNewDataKeys(y,t[m],o?o[m]:void 0)}t.$.partial&&Object.keys(t.$.partial)&&(t.$.partial=new Map),t.$.undoStack=store.$.genUnRedoStack(),t.$.redoStack=store.$.genUnRedoStack(),delete t.$._savedState}else if(Array.isArray(e)){a=this;e.forEach((function(e,r){a.mergeNewDataKeys(e,t[r],o?o[r]:void 0)}))}else if("object"==(void 0===e?"undefined":_typeof(e)))for(var m in e){y=e[m];this.mergeNewDataKeys(e[m],t[m],o?o[m]:void 0)}},handleResponse:function(e,t,o,a,r,i){var s,l,n,p=o._pK;if(Array.isArray(e))for(var c=0;c<e.length;c++)n=(l=e[c]).$.pK,s=r&&l&&n?r.get(n):void 0,this.checkResponse(e[c],o,Array.isArray(t)?t[c]:t,p,s,i);else n=e.$.pK,s=r&&e&&n?r.get(n):void 0,this.checkResponse(e,o,t,p,s,i)},compareObjects:function(e,t,o){if(!(e instanceof Object&&t instanceof Object))return!1;if(Object.keys(e).length!=Object.keys(t).length)return!1;for(var a in e){var r=e[a],i=t[a];if(o&&Array.isArray(r)&&Array.isArray(i)){if(r.length!=i.length)return!1;for(var s=r.length,l=0;l<s;l++)if(r[l]!=i[l])return!1}else if(null==i||r!=i)return!1}return!0},handleBatchPromise:function(e){var t,o,a=e.response,r=e.batch;(t=store.$.cbScp("application","normalizeResponse",1))&&(o=store.$.consArg(void 0,"batch",e.response),a=store.$.cB(t,o)),a.batch_requests.forEach((function(e,t){var o=store.$.batchPromise[r][t],a=e.status.toString(),i=a[0];"2"==i?o.resolve({content:e.content,index:t,batch:r,resp:e}):"4"!=i&&"5"!=i||(store.$.batchResponse[r][t]=void 0,o.reject({content:e.content,index:t,batch:r,resp:e,code:a}))})),delete store.$.batch[r],delete store.$.batchPromise[r]},handleParseResponsePromise:function(e,t,o,a,r,i,s,l,n,p,c,d){e.then((function(e){"findRecord"==o||"findAll"==o?store.adapter.$.findParseRequestPromise(e,t,o,a,r,i,l,n,p,d):store.adapter.$.otherParseRequestPromise(e,t,o,a,r,i,s,l,n,p,c,d?d.customD:void 0)}),(function(e){c(i)}))},findParseRequestPromise:function(e,t,o,a,r,i,s,l,n,p){var c=Object.assign({},p);delete c.customD;var d=this.getResponse(e,t,o,a,r,i,p?p.customD:void 0,c);n(i?[d,i.statusText,i]:null!=s?[d,"batch",{index:s,batch:l}]:[d])},otherParseRequestPromise:function(e,t,o,a,r,i,s,l,n,p,c,d){var u=this.genericResponse(e,t,o,a,r,i,s,d);null!=l&&(store.$.batchResponse[n][l]=u),"action"!=o&&this.updateIDB(t,o,a),p(u)},requestHandle:function(e,t,o,a,r,i){var s,l={method:a.method,url:a.url,qP:a.qP};if(o&&(l.key=o),a.data&&(l.data=a.reqData),store.$.request&&store.$.request[t]&&store.$.request[t][e]){s=store.$.request[t][e];for(var n=!1,p=0;p<s.length;p++){var c=s[p];if(this.compareReqObjects(c,l)){if(!r)return void store.$.request[t][e].splice(p,1);n=!0}}if(n)return Promise.resolve();store.$.request[t][e].push(l)}else r&&(store.$.request[t]=store.$.request[t]||{},store.$.request[t][e]=store.$.request[t][e]||[],store.$.request[t][e].push(l))},compareReqObjects:function(e,t){if(Object.keys(e).length!=Object.keys(t).length)return!1;var o,a=Object.keys(e);for(o=0;o<a.length;o++){var r=a[o];if(val1=e[r],val2=t[r],"qP"==r){if(!store.adapter.$.compareObjects(val1,val2,!0))return!1}else if(val1 instanceof Object&&val2 instanceof Object){if(!store.adapter.$.compareReqObjects(val1,val2))return!1}else if(val1!=val2)return!1}return!0}}},store.$.defProp(store.adapter,"extends",(function(e,t,o){return store.$.scExtd("adapter",e,t,o)}),!1),Lyte.$.requiredMixins.serializer=Lyte.$.requiredMixins.adapter=function(e,t,o){Object.keys(e).length&&t.forEach((function(t,a){var r=t.scope,i=t.name,s=r[o][i];if(s)for(var l in e)s[l]=e[l]}))},Object.defineProperties(Serializer.prototype,{super:{value:function(){return store.$.super.call(this,arguments)}},extends:{value:function(e){store.$.extendCallback.call(this,store,"serializer",e)}}}),store.serializer={$:{buildJSON:function(e,t,o,a,r,i,s,l){var n=i?i.headers:void 0,p=store.$.cbScp(e,"normalizeResponse",1),c=o;if(p){var d=store.$.consArg(e,t,c,a,r,n,i?i.qP:void 0,s);c=store.$.cB(p,d)}var u,h=/^(findRecord|findAll)$/.test(t);if(!h&&c&&"object"==(void 0===c?"undefined":_typeof(c))&&(p=store.$.cbScp(e,"payloadKey",1))){d=store.$.consArg(e,t,void 0,l,s);var m=store.$.cB(p,d);if(m&&m!=e){var y=c[m];c[e]=y,delete c[m]}}if(h||c&&c[e]){if(u=c[e],!0,p=store.$.cbScp(e,"normalize",1))if(Array.isArray(u))for(var f=0;f<u.length;f++){d=store.$.consArg(e,t,u[f],s);u[f]=store.$.cB(p,d)}else{d=store.$.consArg(e,t,u,s);u=store.$.cB(p,d)}var g="pushPayload"!=t?{url:i.url,method:i.method,headers:i.headers,type:t,qP:i.qP,withCredentials:i.withCredentials,model:e}:void 0;u=store.adapter.$.serializeRecords(e,u,void 0,g,"normalizeRecord",s),c[e]=u}return c},normalizeResponse:function(e,t,o,a,r,i,s,l){var n=i?i.headers:void 0,p=store.$.cbScp(e,"normalizeResponse",1),c=o;if(p){var d=store.$.consArg(e,t,c,a,r,n,i?i.qP:void 0,s,l);c=store.$.cB(p,d)}return c},normalize:function(e,t,o,a,r,i,s,l,n){var p=o,c=!1;(/^(findRecord|findAll)$/.test(t)||p[e])&&(p=p[e],c=!0);var d=store.$.cbScp(e,"normalize",1);if(d)if(Array.isArray(p))for(var u=0;u<p.length;u++){var h=store.$.consArg(e,t,p[u],s,l);p[u]=store.$.cB(d,h)}else{h=store.$.consArg(e,t,p,s,l);p=store.$.cB(d,h)}c&&(o={},p=store.adapter.$.serializeRecords(e,p,void 0,{url:n.url,method:n.method,headers:n.headers,type:t,qP:n.qP,withCredentials:n.withCredentials,model:e},"normalizeRecord",s),o[e]=p)}}},store.$.defProp(store.serializer,"extends",(function(e,t,o){return store.$.scExtd("serializer",e,t,o)})),Object.defineProperties(store,{triggerUpdate:{value:function(e,t,o,a,r){var i={};if(null==(l=store.modelFor(e)))return Lyte.warn("LD02","Model",e),Promise.reject({code:"ERR19",message:Lyte.errorCodes.ERR19,data:e});var s=store.peekRecord(e,t);if(s){var l,n=(l=s.$.model)._arrPk;return(o||Object.keys(l.fieldList)).forEach((function(e){i[e]=s[e]})),n.forEach((function(e){i[e]=s[e]})),store.adapter.$.put(e,i,s,!0,r,a)}return Promise.reject("No such record found")}},batch:{value:function(e){return new Promise((function(t,o){store.$.makeBatch=!0,store.$.batch=store.$.batch||{},store.$.batchPromise=store.$.batchPromise||{};var a=void 0===store.$.currentBatch?Object.keys(store.$.batch).length:store.$.currentBatch+1,r=store.$.currentBatch=a;try{e()}catch(e){throw store.$.makeBatch=!1,e}store.$.makeBatch=!1;var i={batch:store.$.batch[r]},s=store.adapter.$.buildURL("batch","POST","application",void 0,i),l=i.batch;if(store.$.isEmpty(l)){if(store.$.cachedBatch&&store.$.cachedBatch[r]&&store.$.cachedBatch[r].length){var n=store.$.handleCachedResponse(r,[]);return t(n)}return t()}var p=store.$.cbScp("application","serialize",1);if(p){var c=store.$.consArg("batch",i);i=store.$.cB(p,c)}var d=new XMLHttpRequest;for(var u in d.open("POST",s.url,!0),s.headers)d.setRequestHeader(u,s.headers[u]);d.withCredentials=!!s.withCredentials,d.send(JSON.stringify(i)),d.onreadystatechange=function(){if(4==d.readyState)if("2"==d.status.toString()[0]||"3"==d.status.toString()[0]){var e=JSON.parse(d.responseText);store.$.batchResponse=store.$.batchResponse||{},store.$.batchResponse[r]=[],store.adapter.$.handleBatchPromise({response:e,batch:r,resolve:t}),setTimeout((function(){var e=store.$.handleCachedResponse(r,store.$.batchResponse[r]);t(e),store.$.batchResponse[r]=[]}),0)}else setTimeout((function(){o()}),0)}}))}},pushPayload:{value:function(e,t,o){var a=store.modelFor(e);if(a){var r,i=t;if(o){t=store.serializer.$.buildJSON(e,"pushPayload",t);var s=store.$.cbScp(e,"deserializeKey",1);if(r=t?Object.keys(t).length:void 0,s){Lyte.warn("LD08","deserializeKey","callback","Please use payloadKey callback instead"),r>2&&Lyte.error("LD09");var l=Object.keys(t),n=0;2==l.length&&"meta"==l[0]&&(n=1);var p=store.$.consArg(e,"pushPayload"),c=store.$.cB(s,p),d=t[l[n]];delete t[l[n]],t[c]=d}i=t[e]}return store.$.idbQ2Push(e,t,void 0,"pushPayload"),t=store.$.insertIntoStore(a,i,!0),delete a.rel,t}Lyte.warn("LD02","Model",e)}},registerModel:{value:function(e,t,o){if(!store.model.hasOwnProperty(e)){var a,r,i;if(o&&"object"==(void 0===o?"undefined":_typeof(o))&&(a=o.extends||void 0,r=o.actions||void 0,i=o.idb||void 0),a){var s=Object.assign({},store.model[a].fieldList);for(var l in s)"relation"==s[l].type&&delete s[l];t=Object.assign(t,s)}var n=store.model[e]=new Model(e,t);return a&&store.$.extendModel(a,n),r&&(n.actions=r),i&&(n.idb=i),n}Lyte.warn("LD14","Model",e)}},unregisterModel:{value:function(e){Array.isArray(e)?e.forEach((function(e){store.$.unregisterModel(e)})):store.$.unregisterModel(e)}},unregisterAdapter:{value:function(e){Array.isArray(e)?e.forEach((function(e){store.$.unRegCb("adapter",e)})):store.$.unRegCb("adapter",e)}},unregisterSerializer:{value:function(e){Array.isArray(e)?e.forEach((function(e){store.$.unRegCb("serializer",e)})):store.$.unRegCb("serializer",e)}},addField:{value:function(e,t,o,a,r){var i,s=store.modelFor(e),l=[];if(o&&"object"==(void 0===o?"undefined":_typeof(o)))store.$.registerField(s,t,o,l),i="relation"==o.type?"relation":"attr";else{var n=Lyte.attr(o,a);store.$.registerField(s,t,n,l)}"relation"==i||r||store.$.updateFieldValidation(s,t)}},modelFor:{value:function(e){return store.model[e]}},createRecord:{value:function(e,t,o){return this.$.newRecord(e,t,o)}},deleteRecord:{value:function(e,t){this.$.removeFromStore(store.modelFor(e),t,void 0)}},findAll:{value:function(e,t,o,a,r){return store.adapter.$.get("findAll",e,void 0,t,o,r,a).then((function(){var r=arguments,i=r[0][0],s=r[0][2],l=s?s.status:r[0][3],n="cache"==r[0][1],p="batch"==r[0][1]?r[0][2]:void 0,c="idb"==r[0][1];if(!1===a)return!n&&o&&Object.keys(t).length>0&&store.$.cacheQuery(e,t,i,l),null!=p&&(store.$.batchResponse[p.batch][p.index]=i),i;if(i&&!i.save){if(!n){if(!i||!i.hasOwnProperty(e))return void Lyte.error("LD13",e);c||store.$.idbQ2Push(e,i,t,"findAll");var d=i[e];if(null==d||store.$.isEmptyArray(d))i[e]=[];else{Array.isArray(d)||Lyte.warn("LD19");var u=store.$.toInsertData(e,i,!0);i[e]=u}i.hasOwnProperty("meta")&&(i[e].$||store.$.defProp(i[e],"$",{}),i[e].$.meta=i.meta),o&&Object.keys(t).length>0&&store.$.cacheQuery(e,t,i)}return null!=p&&(store.$.batchResponse[p.batch][p.index]=i[e]),i[e]}return arguments}),(function(e){return Promise.reject(e)}))}},findRecord:{value:function(e,t,o,a,r,i){return null==t?Promise.reject({code:"ERR20",message:Lyte.errorCodes.ERR20}):store.adapter.$.get("findRecord",e,t,o,a,i,r).then((function(){var i=arguments[0][0],s="cache"==arguments[0][1],l=arguments[0][2],n=l?l.status:arguments[0][3],p="batch"==arguments[0][1]?arguments[0][2]:void 0,c="idb"==arguments[0][1];if(!1===r)return!s&&a&&Object.keys(o).length>0&&store.$.cacheRecordQuery(e,t,o,i,n),null!=p&&(store.$.batchResponse[p.batch][p.index]=i),i;if(i){if(!s){var d;if(!i||!i.hasOwnProperty(e))return void Lyte.error("LD13",e);if(c||store.$.idbQ2Push(e,i,o,"findRecord",t),!Lyte.isRecord(i)){var u=i[e];if((store.$.isEmpty(u)||store.$.isEmptyObj(u))&&(i[e]={},d=!0),("object"!=(void 0===u?"undefined":_typeof(u))||Array.isArray(u))&&Lyte.warn("LD11"),!d){var h=store.$.insertIntoStore(store.model[e],u,!0,!0);i[e]=h}i.hasOwnProperty("meta")&&(Lyte.isRecord(h)?h.$.meta=i.meta:(u=i[e],store.$.defProp(u,"$",{meta:i.meta})))}!s&&a&&Object.keys(o).length>0&&store.$.cacheRecordQuery(e,t,o,i)}return null!=p&&(store.$.batchResponse[p.batch][p.index]=i[e]),i[e]}return arguments}),(function(e){return Promise.reject(e)}))}},peekRecord:{value:function(e,t,o){var a=this.modelFor(e);if(a)if(!0===o){var r=a._deleted.get(t);if(r&&r.data)return r.data}else{var i=a.isComp;if(t=null==t?"":t,!i&&a.data._recMap)return a.data._recMap.get(t.toString());var s=a.data,l=(this.model[e]._pK,s.filter((function(e){if(store.$.comparePk(e,t))return e})));if(l[0])return l[0]}else Lyte.warn("LD02","Model ",e)}},peekAll:{value:function(e){var t=this.modelFor(e);if(t)return t.data;Lyte.warn("LD02","Model ",e)}},deleteMany:{value:function(e,t){this.$.removeFromStore(store.modelFor(e),t,void 0)}},unloadRecord:{value:function(e,t){if(r=this.modelFor(e)){null==t&&Lyte.warn("LD18","key");var o,a=store.peekRecord(e,t),r=store.modelFor(e);if(a){o=a.$.pK,this.$.removeFromStore(r,o,!0,!0),r._deleted.delete(t);var i=this.model.cachedRecordQueries;i&&i[e]&&i[e][t]&&(i[e][t]=[])}}else Lyte.warn("LD02","Model ",e)}},unloadAll:{value:function(e,t){if(r=this.modelFor(e)){var o=[],a=t||store.peekAll(e),r=this.modelFor(e);if(a)for(var i=0;i<a.length;i++)o.push(a[i].$.pK);this.$.removeFromStore(r,o,!0,!0),this.model[e].dirty=[],this.model[e]._deleted=new Map;var s=this.model.cachedQueries;s&&s[e]&&(s[e]=[]);var l=this.model.cachedRecordQueries;if(l){var n=l;for(var p in n)delete n[p]}}else Lyte.warn("LD02","Model ",e)}},triggerAction:{value:function(e,t,o,a,r,i){var s=store.modelFor(e);return null==s?(Lyte.warn("LD02","Model",e),Promise.reject({code:"ERR19",message:Lyte.errorCodes.ERR19,data:e})):(s.actions?s.actions[t]:void 0)?store.adapter.$.handleAction(t,s,store.peekAll(e),o,a,r,i).then((function(e){return e}),(function(e){return Promise.reject(e)})):Promise.reject({code:"ERR18",message:Lyte.errorCodes.ERR18})}},rollBack:{value:function(e){var t=this.modelFor(e);if(null!=t){for(var o=t._pK,a=Array.from(t.dirty),r=a.length,i=0;i<r;i++){var s=this.peekRecord(e,a[i]);s&&s.$.isDeleted||(s&&s.$.isNew?this.$.rollBackNew(t,s,o):s&&s.$.isModified&&s.$.rollBackAttributes(s.$.getDirtyAttributes()))}this.$.rollBackDelete(t,void 0,!0)}else Lyte.warn("LD02","Model",e)}},create:{value:function(e,t,o,a,r){var i=store.modelFor(e);if(null==i)return Lyte.warn("LD02","Model",e),Promise.reject({code:"ERR19",message:Lyte.errorCodes.ERR19,data:e});if(Array.isArray(t)){var s=this;t.forEach((function(t){var o=s.$.newRecord(e,t);if(o.$.isError)return Promise.reject(o)}))}else if(t&&"object"==(void 0===t?"undefined":_typeof(t))){var l=this.$.newRecord(e,t);if(l.$.isError)return Promise.reject(l)}for(var n,p=i.dirty,c=p.length,d=[],u=0;u<c;u++){var h=store.peekRecord(e,p[u]);if(h&&h.$.isNew){if(r&&-1==r.indexOf(h))continue;if(n=new error1,store.$.validateRecord(h,i.fieldList),h.$.isError&&Object.keys(h.$.error).length>0)return Promise.reject(n);d.push(h)}}return d.length?store.adapter.$.create(e,d,!1,o,a):Promise.resolve()}},update:{value:function(e,t,o,a){if(null==(r=this.modelFor(e)))return Lyte.warn("LD02","Model",e),Promise.reject({code:"ERR19",message:Lyte.errorCodes.ERR19,data:e});var r,i=[],s=[],l=a||store.peekAll(e),n=(r=store.model[e]).relations;return l.forEach((function(t){if(Lyte.isRecord(t)&&t.$.model._name==e){var o=t,a=store.$.isDirty(o,n);if(o&&o.$.isModified&&!o.$.isNew||a&&a.length){var l=store.$.updateJSON(o,r,a);i.push(l),s.push(o)}}})),i.length?store.adapter.$.put(e,i,s,!1,t,o):Promise.resolve()}},delete:{value:function(e,t,o,a,r){var i=store.modelFor(e);if(null==i)return Lyte.warn("LD02","Model",e),Promise.reject({code:"ERR19",message:Lyte.errorCodes.ERR19,data:e});t&&this.deleteRecord(e,t);var s=[];if(i._deleted.forEach((function(e,t){s.push(e.data)})),r){var l=[];r.forEach((function(e){-1!=s.indexOf(e)&&l.push(e)})),s=l}return s.length?store.adapter.$.del(e,s,void 0,"delete",o,a).then((function(e){return e}),(function(e){return Promise.reject(e)})):Promise.resolve()}},registerAdapter:{value:store.adapter.extends},registerSerializer:{value:store.serializer.extends},clearCachedQuery:{value:function(e,t,o){var a=t&&"object"==(void 0===t?"undefined":_typeof(t))?t:o&&"object"==(void 0===o?"undefined":_typeof(o))?o:void 0,r=[];if(a){if(a){if(t&&"object"==(void 0===t?"undefined":_typeof(t)))(s=this.model.cachedQueries)&&s[e]&&(r=s[e]);else(l=this.model.cachedRecordQueries)&&l[e]&&l[e][t]&&(r=l[e][t]);for(var i=0;i<r.length;i++)if(this.adapter.$.compareObjects(r[i].queryParams,a,!0)){r.splice(i,1);break}}}else if(e){var s=this.model.cachedQueries,l=this.model.cachedRecordQueries;s&&s.hasOwnProperty(e)&&delete s[e],l&&l.hasOwnProperty(e)&&(t?delete l[e][t]:delete l[e])}else this.model.cachedQueries=[],this.model.cachedRecordQueries={}}},getErrorMessage:{value:function(e){return Lyte.errorCodes[e]}},setErrorMessages:{value:function(e){Object.assign(Lyte.errorCodes,e)}},addEventListener:{value:function(e,t){return store.$.eventListeners.add(store,e,t)}},removeEventListener:{value:function(e){store.$.eventListeners.remove(store,e)}},emit:{value:function(e,t){store.$.eventListeners.emit(store,e,t)}},getPrimaryKey:{value:function(e){var t=store.model[e];if(t)return t._pK;Lyte.warn("LD02","Model ",e)}}});var error1=function(e,t){Object.defineProperties(this,{$:{value:{isError:!0,error:{}}}}),e&&store.$.setError(this,e,t)};Lyte.developmentVariables={production:!0},Lyte.Compile.debug=!0;var _LC=LyteComponent;LyteComponent.needDummyComponentsDiv=!0,LyteComponent.dummyLyteComponentsDiv=document.createElement("div"),LyteComponent.dummyLyteComponentsDiv.setAttribute("id","dummy-lyte-components-div"),Lyte._ie||("complete"===document.readyState||"interactive"===document.readyState?document.body.appendChild(LyteComponent.dummyLyteComponentsDiv):document.addEventListener("DOMContentLoaded",(function(){document.body.appendChild(LyteComponent.dummyLyteComponentsDiv)}),!0)),Lyte.Compile.elifHold=!1,Lyte.Compile.getArgString=function(e,t){for(var o=0;o<t.length;o++)"object"==typeof t[o]&&(t[o]=this.getArgString(t[o].value.name,t[o].value.args));return e?e+"("+t.toString()+")":t.toString()},Lyte.Compile.trimAttr=function(e,t,o){var a;a=e.replace(/((const)|(continue)|(default)|(delete)|(do)|(else)|(enum)|(export)|(extends)|(finally)|(for)|(function)|(if)|(import)|(in)|(instanceof)|(new)|(return)|(super)|(switch)|(try)|(typeof)|(var)|(void)|(while)|(with))(?!\w)/g,"__LyteHelper$1__");try{var r=expHandlers.handleExpression(Espree.parse(a),!0);r&&r!==a&&(e="{{"+(r=r.replace(/__LyteHelper(\w*?)__/g,"$1"))+"}}")}catch(r){e=a=a.replace(/__LyteHelper(\w*?)__/g,"$1"),o.push({message:r.message+t.nodeName+"in the value "+e})}return e},Lyte.Compile.getDynamicNodes=function(e,t,o){var a;window.pending=!0;var r,i,s=[],l=[];if((i=o||document.querySelector("template[tag-name='"+e+"']"))?r=Lyte._ie?i:i.content:(e,s.push({message:"Cannot find template "+e}),a={componentName:e,errors:s,warning:l}),r){this.splitTextNodes(r,l);var n=[];null!=i.getAttribute("use-strict")&&(r.querySelector("script")&&s.push({message:"Security: Script tags should not be included",strict:!0}),r.querySelector("style")&&s.push({message:"Security: Style tags should not be included",strict:!0}));var p=[];this.newGetDeepNodes(e,i,p,[],void 0,!0,s,l),this.processTemplate(r,n,e,null!==i.getAttribute("use-strict"),s,l),a=s.length?{componentName:e,errors:s,warnings:l}:{componentName:e,dynamicNodes:n,_templateAttributes:p[0],template:JSON.stringify(i.outerHTML)}}return window.pending=!1,a},Lyte.Compile.splitTextNodes=function(e,t){if("TABLE"===e.tagName&&e.children[0]&&"TBODY"!==e.children[0].tagName){var o=e.cloneNode(),a=document.createElement("tbody");a.innerHTML=e.innerHTML,o.appendChild(a),e.replaceWith(o),e=o}if(e.hasAttribute)if(e.hasAttribute("lyte-for")){var r=e.getAttribute("lyte-for"),i={};if(e.hasAttribute("lyte-options"))try{i=JSON.parse(e.getAttribute("lyte-options"))}catch(e){i={}}var s=r.split(" ");"TEMPLATE"===e.tagName?l=e:(l=document.createElement("template"),e.removeAttribute("lyte-for"),e.removeAttribute("lyte-options"),l.innerHTML=e.outerHTML,e.replaceWith(l),e=l),e.removeAttribute("lyte-for"),e.removeAttribute("lyte-options"),l.setAttribute("items",s[0]),l.setAttribute("item",s[2]||"item"),l.setAttribute("index",s[3]||"index"),l.setAttribute("is","for"),i.unbound&&l.setAttribute("unbound",i.unbound)}else if(e.hasAttribute("lyte-for-in")){r=e.getAttribute("lyte-for-in"),i={};if(e.hasAttribute("lyte-options"))try{i=JSON.parse(e.getAttribute("lyte-options"))}catch(e){i={}}var l;s=r.split(" ");"TEMPLATE"===e.tagName?(l=e,e.removeAttribute("lyte-for-in"),e.removeAttribute("lyte-options")):(l=document.createElement("template"),e.removeAttribute("lyte-for-in"),e.removeAttribute("lyte-options"),l.innerHTML=e.outerHTML,e.replaceWith(l),e=l),l.setAttribute("object",s[0]),l.setAttribute("value",s[2]||"value"),l.setAttribute("key",s[3]||"key"),l.setAttribute("is","forIn"),i.unbound&&l.setAttribute("unbound",i.unbound)}else if(e.hasAttribute("lyte-if")){var n=this.handleLyteIf(e);e.replaceWith(n),e=n}else e.hasAttribute("lyte-switch")&&this.handleLyteSwitch(e);if(e&&e.childNodes&&e.childNodes.length)for(var p=e.childNodes.length-1;p>=0;p--){var c=e.childNodes[p];c.hasAttribute?c.hasAttribute("lyte-if-else")||c.hasAttribute("lyte-else")?c.previousElementSibling&&(c.previousElementSibling.hasAttribute("lyte-if")||c.previousElementSibling.hasAttribute("lyte-else-if"))||t.push({message:"Element with lyte-else must be preceded by a element having lyte-if or lyte-else :\n \t"+c.cloneNode().outerHTML}):("false"==e.childNodes[p].getAttribute("case")&&(this.elifHold=!0),this.splitTextNodes(e.childNodes[p],t)):this.splitTextNodes(e.childNodes[p],t)}if("TEMPLATE"!==e.tagName||Lyte._ie||this.splitTextNodes(e.content?e.content:this.createDocFragment(e)),e.nodeType===e.TEXT_NODE){var d=e.nodeValue;if(d){var u=d.match(/{{[^}]*?(?:(?:('|")[^\1]*?\1)[^}]*?)*}}/g);if(!u)return;var h=[];for(p=0;p<u.length;p++){var m=d.indexOf(u[p]),y=m+u[p].length;m&&h.push(document.createTextNode(d.substring(0,m))),h.push(document.createTextNode(d.substring(m,y))),d=d.substring(y)}h.push(document.createTextNode(d)),e.replaceWith.apply(e,h)}}},Lyte.Compile.processTemplate=function(e,t,o,a,r,i){var s=e.querySelector("template[is=break]");s&&this.getTrimmedContent(e,void 0,s);var l=e.querySelector("template[is=continue]");if(l&&this.getTrimmedContent(e,void 0,l),this.helperNodes=[],e.hasChildNodes())for(var n=0;n<e.childNodes.length;n++){var p=[];p.push(n);if(e.childNodes[n].tagName){var c=e.childNodes[n].tagName,d=e.childNodes[n].getAttribute("is");"TEMPLATE"===c&&d?this.newGetDeepNodes(o,e.childNodes[n],t,p,d,a,r,i):this.newGetDeepNodes(o,e.childNodes[n],t,p,void 0,a,r,i)}else this.newGetDeepNodes(o,e.childNodes[n],t,p,void 0,a,r,i)}},Lyte.Compile.newGetDeepNodes=function(e,t,o,a,r,i,s,l){var n;if(8!=t.nodeType){if(t.tagName&&-1!==t.tagName.indexOf("-")&&"LYTE-YIELD"!==t.tagName&&(n={type:"componentDynamic",position:a.slice()}),"LYTE-YIELD"===t.tagName)n={type:"insertYield",position:a.slice()};else if("registerYield"===r||"yield"===r){var p=[];this.processTemplate(Lyte._ie?t:t.content,p,e,i,s,l),n={type:"registerYield",position:a.slice(),dynamicNodes:p}}else if("insertYield"===r)o.push({type:"insertYield",position:a.slice()});else if("for"===r){if(t._forTemplate={},c=t){t._forTemplate.content=c.content;p=[];this.processTemplate(Lyte._ie?t._forTemplate:t._forTemplate.content,p,e,i,s,l),n={type:"for",position:a.slice(),dynamicNodes:p},t=this.replaceParentNode(t,"for",n)}}else if("forIn"===r){var c;if(t._forInTemplate={},c=t){t._forInTemplate.content=c.content;p=[];this.processTemplate(Lyte._ie?t._forInTemplate:t._forInTemplate.content,p,e,i,s,l),n={type:"forIn",position:a.slice(),dynamicNodes:p}}t=this.replaceParentNode(t,"forIn",n)}else if("switch"===r||"if"===r){for(var d,u={},h={},m=t.content.querySelector("[default]"),y=t.content.querySelectorAll("[case]"),f=0;f<y.length;f++){var g=y[f];d=y[f];var v=g.getAttribute("case");if("switch"===r&&""==v&&(v='""'),"TEMPLATE"!==g.tagName||g.getAttribute("is")){var x=document.createElement("template"),P=g.cloneNode(!0);x.content.appendChild(P),x.setAttribute("case",v),P.removeAttribute("case"),d=x,g=x.content,y[f].replaceWith(x)}else g.setAttribute("case",v),g=g.content;p=[];if(this.processTemplate(g,p,e,i,s,l),"if"===r&&this.replaceCaseNode(d),""===v&&(v='""'),u[v]={dynamicNodes:p},"if"!==r)(L=g.querySelector("template[is=break]"))?L.remove():y[f+1]?u[v].additional={next:y[f+1].getAttribute("case")}:m&&(u[v].additional={default:!0}),this.replaceCaseNode(d)}if(m){var b,D,L;if("TEMPLATE"!==m.tagName||m.getAttribute("is")){x=document.createElement("template"),P=m.cloneNode(!0);x.content.appendChild(P),x.setAttribute("default",""),P.removeAttribute("default"),b=x.content,D=x,m.replaceWith(x)}else b=m.content,D=m;(L=D.content.querySelector("template[is=break]"))&&L.remove();p=[];this.processTemplate(b,p,e,i,s,l),h={dynamicNodes:p},this.replaceCaseNode(D)}n={type:r,position:a.slice(),cases:u,default:h},t=this.replaceParentNode(t,r,n)}else if("component"===r){t._componentTemplate={},t._componentTemplate.content=t.content;p=[];this.processTemplate(t._componentTemplate.content,p,e,i,s,l),n={type:"component",position:a.slice(),dynamicNodes:p}}else if(3==t.nodeType){if(-1!==t.nodeValue.indexOf("{{")){var C,_,S=t.nodeValue;if("undefined"!=typeof Espree&&"undefined"!=typeof expHandlers)if(_=S.match(/{{[^}]*?(?:(?:[^\1]*?\1)[^}]*?)*}}/g)){for(var w=0;w<_.length;w++)C=this.trimAttr(_[w],t,s),S=S.replace(_[w],C);t.nodeValue=S}var T,E=this.getMustache(t.nodeValue);if(E&&"object"==typeof E&&!1===E.bool&&s.push({message:"Syntax error in node "+E.err+" in "+t.nodeName+" for the attribute: "+t.nodeName+" - "+t.nodeValue+" in the component "+e}),E){if(!1===(T=this.getHelper(E)))return void s.push({message:"Syntax Error in node "+t.nodeName+"for :"+t.nodeValue+" in the component "+e})}else s.push({message:"Syntax Error in node "+t.nodeName+"for :"+t.nodeValue+" in the component "+e});var A=E;T?window.newBuild?o.push({type:"text",position:a.slice()}):o.push({type:"text",position:a.slice(),helperInfo:T}):A&&(window.newBuild?o.push({type:"text",position:a.slice()}):o.push({type:"text",position:a.slice(),dynamicValue:A}))}return void a.pop()}if(t.hasAttributes&&t.hasAttributes()){var M=!1,N=[],k={},F=[];for(f=0;f<t.attributes.length;f++)if(-1!==t.attributes[f].nodeValue.indexOf("{{")){S=t.attributes[f].nodeValue;if("undefined"!=typeof Espree&&"undefined"!=typeof expHandlers&&(_=S.match(/{{[^}]*?(?:(?:[^\1]*?\1)[^}]*?)*}}/g))){for(w=0;w<_.length;w++)C=this.trimAttr(_[w],t,s),S=S.replace(_[w],C);t.attributes[f].nodeValue=S}var I,R=this.getMustache(S);if(R&&"object"==typeof R&&!1===R.bool){s.push({message:"Syntax error in node "+R.err+" in "+t.nodeName+" for the attribute: "+t.attributes[f].nodeName+" - "+t.attributes[f].nodeValue+" in the component "+e});continue}if(R){if(!1===(I=this.getHelper(R))){s.push({message:"Syntax error in node "+t.nodeName+" for the attribute:"+t.attributes[f].nodeName+"- "+t.attributes[f].nodeValue});continue}}else/{{.*}}/.test(S)&&!/\\{{.*}}/.test(S)&&(I=this.splitMixedText(S));if(I&&("action"===I.name||"method"===I.name)&&/^(onfocus|onfocusin|onfocusout|onresize|onscroll|onclick|ondblclick|onmousedown|onmouseup|onmousemove|onmouseover|onmouseout|onmouseenter|onmouseleave|onchange|onselect|onsubmit|onkeydown|onkeypress|onkeyup|oncontextmenu)$/.test(t.attributes[f].name)){M=!0,k[t.attributes[f].name.substr(2)]={name:t.attributes[f].name.substr(2),helperInfo:I,globalEvent:!0};var O=this.deepCopyObject(I.args),$=O.splice(0,1)[0];"string"==typeof $&&$.startsWith("'")?$=$.startsWith("'")?$.replace(/'/g,""):$:s.push({message:" action or method must start with string on "+t.nodeName+" for the attribute:"+t.attributes[f].nodeName+"- "+t.attributes[f].nodeValue});var B=this.getArgString($,O);window.newBuild||t.setAttribute(t.attributes[f].name.substr(2),e+" => "+B),N.push(t.attributes[f].name)}else if(I||R){M=!0;var q={};t.attributes[f].name.startsWith("lbind:")?(N.push(t.attributes[f].name),F.push({name:t.attributes[f].name.substring(6),value:t.attributes[f].nodeValue}),q.isLbind=!0,q.name=t.attributes[f].name.substring(6)):q.name=t.attributes[f].name,I?"lbind"===I.name?(q.dynamicValue=I.args[0],q.isLbind=!0):q.helperInfo=I:q.dynamicValue=R,M=!0,k[q.name]=q}}else if(/^(onfocus|onfocusin|onfocusout|onresize|onscroll|onclick|ondblclick|onmousedown|onmouseup|onmousemove|onmouseover|onmouseout|onmouseenter|onmouseleave|onchange|onselect|onsubmit|onkeydown|onkeypress|onkeyup|oncontextmenu|ondragstart|ondrag|ondragenter|ondragleave|ondragover|ondrop|ondragend|onload|onunload|onabort|onerror|onscroll|onreset|onblur)$/.test(t.attributes[f].nodeName)&&i)s.push({message:"Strict-Mode: Please specify action in "+t.nodeName+" for attribute-"+t.attributes[f].nodeName,strict:!0});else if(/{.*}/.test(t.attributes[f].nodeValue))try{JSON.parse(t.attributes[f].nodeValue)}catch(o){l.push({message:"Syntax error in node "+t.nodeName+" for the attribute:"+t.attributes[f].nodeName+"- "+t.attributes[f].nodeValue+" in the component "+e})}else if(/{.*:/.test(t.attributes[f].nodeValue)||/{/.test(t.attributes[f].nodeValue))try{JSON.parse(t.attributes[f].nodeValue)}catch(o){s.push({message:"Syntax error in node "+t.nodeName+" for the attribute:"+t.attributes[f].nodeName+"- "+t.attributes[f].nodeValue+" in the component "+e});continue}if(!window.newBuild){if(N.length)for(f=0;f<N.length;f++)t.removeAttribute(N[f]);if(F.length)for(f=0;f<F.length;f++)t.setAttribute(F[f].name,F[f].value)}if(k&&M)if(window.newBuild){var V={},U=Object.keys(k);-1!==U.indexOf("style")&&(V.style=k.style),-1===U.indexOf("type")||"BUTTON"!==t.tagName&&"INPUT"!==t.tagName||(V.type=k.type),"INPUT"===t.tagName&&"number"===t.getAttribute("type")&&(V.value=k.value),Object.keys(V).length?o.push({type:"attr",position:a.slice(),attr:V}):o.push({type:"attr",position:a.slice()})}else o.push({type:"attr",position:a.slice(),attr:k})}if(t.hasChildNodes()&&"TEMPLATE"!==t.tagName)for(f=0;f<t.childNodes.length;f++)if(a.push(f),t.childNodes[f].tagName){var H=t.childNodes[f].tagName;r=t.childNodes[f].getAttribute("is");H&&r?this.newGetDeepNodes(e,t.childNodes[f],o,a,r,i,s,l):this.newGetDeepNodes(e,t.childNodes[f],o,a,void 0,i,s,l)}else this.newGetDeepNodes(e,t.childNodes[f],o,a,void 0,i,s,l);n&&o.push(n),a.pop()}else a.pop()},Lyte.Compile.createDocFragment=function(e){for(var t=e.cloneNode(!0).childNodes,o=document.createDocumentFragment(),a=t.length,r=0;r<a;r++)o.appendChild(t[0]);return o},Lyte.Compile.getDynamicValue=function(e){for(var t,o,a=[],r=a,i=[],s="",l=[],n=[],p=[],c=0;c<e.length;c++)if("."!==e[c])if("["!==e[c]){if(('"'===e[c]||"'"===e[c])&&e[c++]===t){for(;"s"===e[c]&&"]"!=e[c];)c++;l.pop(),o=!0}"]"!==e[c]?s=s.concat(e[c]):(n.pop(),s.length&&(!0===o||isNaN(parseInt(s))?r.push(s):p.length&&(r=p.pop(),i.length&&Array.isArray(r[r.length-1])&&!r[r.length-1].length&&r.pop(),r.push(s),!n.length&&i.length&&i.shift())),!n.length&&i.length?(a.push(i.shift()),r=a):p.length&&!i.length&&(r=p.pop()),s="",o="")}else{for(n.push(c),s.length&&r.push(s);"s"===e[c+1];)c++;'"'===e[c+1]||"'"===e[c+1]?(l.push(e[c+1]),t=e[c+1],c++):i.length?(r.push([]),p.push(r),r=r[r.length-1]):(i.push([]),p.push(r),r=i[i.length-1]),s=""}else s.length&&r.push(s),s="";return s.length&&a.push(s),l.length||n.length,a},Lyte.Compile.deepCopyObject=function(e){for(var t,o,a,r,i,s,l=[{source:e,target:Object.create(Object.getPrototypeOf(e))}],n=[e],p=l[0].target,c=[p];t=l.shift();)for(o=Object.getOwnPropertyNames(t.source),a=0;a<o.length;a++)(r=Object.getOwnPropertyDescriptor(t.source,o[a])).value&&"object"==typeof r.value?(i=r.value,r.value=Array.isArray(i)?[]:Object.create(Object.getPrototypeOf(i)),-1==(s=n.indexOf(i))?(n.push(i),c.push(r.value),Object.defineProperty(t.target,o[a],r),l.push({source:i,target:r.value})):(r.value=c[s],Object.defineProperty(t.target,o[a],r))):Object.defineProperty(t.target,o[a],r);return p},Lyte.Compile.replaceCaseNode=function(e){for(var t,o,a=0;a<e.content.children.length;a++)if("TEMPLATE"!==e.content.children[a].tagName){/^(TR|TD|TH)$/.test(e.content.children[a].tagName)&&(t=e.content.children[a].tagName);break}t&&("TR"===t?((o=e.cloneNode()).innerHTML="<table><tbody>"+e.innerHTML+"</tbody></table>",o.setAttribute("depth",2)):((o=e.cloneNode()).innerHTML="<table><tbody><tr>"+e.innerHTML+"</tr></tbody></table>",o.setAttribute("depth",3)),e.replaceWith(o))},Lyte.Compile.replaceParentNode=function(e,t,o){if(!e.parentElement)return e;var a,r=e.parentElement.tagName,i=e.cloneNode();if(e.parentElement&&/^(SELECT|TR|TABLE|TBODY)$/.test(r)){switch(r){case"SELECT":a="option";break;case"TR":i.innerHTML="<table><tbody><tr>"+e.innerHTML+"</tr></tbody></table>",i.setAttribute("depth",3),a="td";break;case"TABLE":case"TBODY":i.innerHTML="<table><tbody>"+e.innerHTML+"</table></tbody>",i.setAttribute("depth",2),a="tr"}var s=document.createElement(a);document.createElement(r);switch(t){case"for":s.setAttribute("is","for"),s.setAttribute("lyte-for","true"),e.hasAttribute("unbound")&&s.setAttribute("unbound",e.getAttribute("unbound"));break;case"if":case"switch":s.setAttribute("is",t),s.setAttribute("lyte-"+t,"true");break;case"forIn":s.setAttribute("is","forIn"),s.setAttribute("lyte-forIn","true"),e.hasAttribute("unbound")&&s.setAttribute("unbound",e.getAttribute("unbound"))}for(var l=e.attributes,n=0;n<l.length;n++)s.setAttribute(l[n].nodeName,l[n].nodeValue);return"SELECT"===r||"for"!==t&&"forIn"!==t?o.actualTemplate=e.outerHTML:(o.actualTemplate=i.outerHTML,o.tagName=r,i.hasAttribute("depth")&&s.setAttribute("depth",i.getAttribute("depth"))),e.replaceWith(s),s}return e},Lyte.Compile.siblingNullCheck=function(e){return null===e.previousSibling.nodeValue||null===e.nextSibling.nodeValue?null:1},Lyte.Compile.handleLyteIf=function(e){var t;e.hasAttribute("lyte-if")?(t=e.getAttribute("lyte-if"),e.removeAttribute("lyte-if")):e.hasAttribute("lyte-else-if")&&(t=e.getAttribute("lyte-else-if"),e.removeAttribute("lyte-else-if"));var o,a=document.createElement("template");if(a.setAttribute("is","if"),a.setAttribute("value",t),this.elifHold&&(a.setAttribute("el",!0),this.elifHold=!1),"TEMPLATE"===e.tagName?(o=e.cloneNode()).innerHTML=e.innerHTML:(o=document.createElement("template")).innerHTML=e.outerHTML,a.content.appendChild(o),o.setAttribute("case","true"),e.nextElementSibling){var r,i,s=e.nextElementSibling;s.hasAttribute("lyte-else")?i="lyte-else":s.hasAttribute("lyte-else-if")&&(i="lyte-else-if"),i&&("lyte-else"===i?(s.removeAttribute("lyte-else"),"TEMPLATE"===s.tagName?(r=s.cloneNode()).innerHTML=s.innerHTML:((r=document.createElement("template")).setAttribute("case","false"),r.innerHTML=s.outerHTML),r.setAttribute("case","false"),this.siblingNullCheck(s)&&s.previousSibling&&s.nextSibling&&""===s.nextSibling.nodeValue.trim()&&""===s.previousSibling.nodeValue.trim()&&s.nextSibling.remove(),s.remove()):((r=document.createElement("template")).setAttribute("case","false"),r.innerHTML=this.handleLyteIf(s).outerHTML,this.siblingNullCheck(s)&&s.previousSibling&&s.nextSibling&&""===s.nextSibling.nodeValue.trim()&&""===s.previousSibling.nodeValue.trim()&&s.nextSibling.remove(),s.remove()),a.content.appendChild(r))}return a},Lyte.Compile.handleLyteSwitch=function(e){var t,o,a,r=e.getAttribute("lyte-switch");"TEMPLATE"===e.tagName?((t=e).removeAttribute("lyte-switch"),o=Array.from(t.content.children),a="template"):(e.removeAttribute("lyte-switch"),(t=document.createElement("template")).setAttribute("nt",!0),o=Array.from(e.children));for(var i=0;i<o.length;i++){var s=o[i];if(s.hasAttribute("lyte-case")){var l="TEMPLATE"===s.tagName,n=s,p=s.hasAttribute("lyte-break"),c=s.getAttribute("lyte-case");if(s.removeAttribute("lyte-case"),s.removeAttribute("lyte-break"),s.hasAttribute("lyte-if")?(l=!1,s=this.handleLyteIf(s)):s.hasAttribute("lyte-switch")&&(l=!1,this.handleLyteSwitch(s)),l?(t.content.appendChild(s),s.setAttribute("case",c),s.removeAttribute("lyte-case")):((n=document.createElement("template")).setAttribute("case",c),s.removeAttribute("lyte-case"),n.content.appendChild(s),t.content.appendChild(n)),p){var d=document.createElement("template");d.setAttribute("is","break"),n.content.appendChild(d),s.removeAttribute("lyte-break")}}}var u=a?e.content.querySelector("[lyte-default]"):e.querySelector("[lyte-default]");if(u){var h="TEMPLATE"===u.tagName;if(u.removeAttribute("lyte-default"),u.hasAttribute("lyte-if")?(h=!1,u=this.handleLyteIf(u)):u.hasAttribute("lyte-switch")&&(h=!1,this.handleLyteSwitch(u)),h)t.content.appendChild(u),u.setAttribute("default","");else{var m=document.createElement("template");m.setAttribute("default",""),m.content.appendChild(u),t.content.appendChild(m)}}t.setAttribute("value",r),t.setAttribute("is","switch"),a?e=t:e.innerHTML=t.outerHTML},Lyte.Component.compileDynamicTemplate=function(e,t){if(e&&e.hasAttribute("lyte-rendered")){if(t){if("string"==typeof t){var o=document.createElement("div");o.innerHTML=t,t=o.childNodes[0]}var a=document.createElement("template");Lyte._ie?a.appendChild(t):a.content.appendChild(t);var r=Lyte.Compile.getDynamicNodes(e.tagName,void 0,a);return e.renderNodes(a,r.dynamicNodes,void 0,{},!0,{},a.outerHTML)}console.error("No template is provided for appending")}else console.error("Provided element is not a component / not rendered yet")},Lyte.Component.doDomProcessing=function(e,t){LyteComponent.ignoreDisconnect=!0,t?e.call(t):e(),LyteComponent.ignoreDisconnect=!1},Lyte.Component.getComponentTemplate=function(e){var t=LyteComponent.dummyLyteComponentsDiv.querySelector("template[tag-name='"+e+"']");if(t){if(t.content)return t.content;var o=document.createElement("div");return o.innerHTML=t.outerHTML,o.querySelector("template")}console.error("No such component is registered")},Lyte.Compile.getTemplateFromString=function(e,t){var o=document.createElement("div");return o.innerHTML=e,o.remove(),o.firstChild};var _lyteUiComponentsLocale={January:"January",February:"February",March:"March",April:"April",May:"May",June:"June",July:"July",August:"August",September:"September",October:"October",November:"November",December:"December",Jan:"Jan",Feb:"Feb",Mar:"Mar",Apr:"Apr","short.may":"May",Jun:"Jun",Jul:"Jul",Aug:"Aug",Sep:"Sep",Oct:"Oct",Nov:"Nov",Dec:"Dec",Mon:"Mon",Tue:"Tue",Wed:"Wed",Thu:"Thu",Fri:"Fri",Sat:"Sat",Sun:"Sun",today:"Today",PM:"PM",AM:"AM",hour:"hrs",min:"mins","no.results.found":"No Results Found","Recently.Used.Colors":"Recently Used Colours","Theme.Colors":"Theme Colours","Standard.Colors":"Standard Colours","Advanced.Colors":"Advanced Colours","Back.to.Basic.Colors":"Back to Basic Colours",Close:"Close",Available:"Available",Selected:"Selected","No.Fill":"No Fill","Choose.Color":"Choose Colour","Copy.Color.value.to.Clipboard":"Copy the colour value to the clipboard",yesterday:"Yesterday",thisWeek:"This week",thisMonth:"This month",last7days:"Last 7 days",last30days:"Last 30 days",specificDate:"Specific date",customRange:"Custom Range",Select:"Select","lyte.fileupload.Drag file here or browse to upload":"Drag file here or browse to upload","lyte.fileupload.Attachment failed":"Attachment failed","lyte.fileupload.Retry":"Retry",HEX:"HEX",RGB:"RGB",HSV:"HSV",CMYK:"CMYK",Alpha:"Alpha","Color.value.copied":"Colour value copied"};_lyteUiComponentsLocale={January:"January",February:"February",March:"March",April:"April",May:"May",June:"June",July:"July",August:"August",September:"September",October:"October",November:"November",December:"December",Jan:"Jan",Feb:"Feb",Mar:"Mar",Apr:"Apr","short.may":"May",Jun:"Jun",Jul:"Jul",Aug:"Aug",Sep:"Sep",Oct:"Oct",Nov:"Nov",Dec:"Dec",Mon:"Mon",Tue:"Tue",Wed:"Wed",Thu:"Thu",Fri:"Fri",Sat:"Sat",Sun:"Sun","no.results.found":"No Results Found",today:"Today",PM:"PM",AM:"AM",hour:"hrs",min:"mins","Recently.Used.Colors":"Recently Used Colours","Theme.Colors":"Theme Colours","Standard.Colors":"Standard Colours","Advanced.Colors":"Advanced Colours","Back.to.Basic.Colors":"Back to Basic Colours",Close:"Close",Available:"Available",Selected:"Selected","No.Fill":"No Fill","Choose.Color":"Choose Colour","Copy.Color.value.to.Clipboard":"Copy the colour value to the clipboard",yesterday:"Yesterday",thisWeek:"This week",thisMonth:"This month",last7days:"Last 7 days",last30days:"Last 30 days",specificDate:"Specific date",customRange:"Custom Range",Select:"Select","lyte.fileupload.Drag file here or browse to upload":"Drag file here or browse to upload","lyte.fileupload.Attachment failed":"Attachment failed","lyte.fileupload.Retry":"Retry",HEX:"HEX",RGB:"RGB",HSV:"HSV",CMYK:"CMYK",Alpha:"Alpha","Color.value.copied":"Colour value copied"};if(window._lyteUiUtils=window._lyteUiUtils||{version:"3.35.2"},function(){var e={};_lyteUiUtils.resolveDefaultValue=function(o,a,r){var i=e[o]||{};return a in i?t(i[a]):r},_lyteUiUtils.registerDefaultValues=function(t){for(var o in t){var a=t[o];e[o]=a}};var t=function(e){var t={};if("object"!=typeof e)return e;for(var o in e)t[o]=e[o];return t}}(),_lyteUiUtils.getVisibleDropdowns=function(){for(var e,t=document.querySelectorAll("lyte-drop-box:not(.lyteDropdownHidden)"),o=[],a=0;a<t.length;a++)(e=t[a].origindd)&&o.push(e);return o},_lyteUiUtils.closeDropdowns=function(){for(var e=_lyteUiUtils.getVisibleDropdowns()||[],t=0;t<e.length;t++)e[t].close()},_lyteUiUtils.i18n=function(e,t){return _lyteUiComponentsLocale[(t?"lyte."+t+"."+e:e)||""]||e},_lyteUiUtils.getRTL=function(){return null!=this.Rtl&&null!=this.Rtl?this.Rtl:this.Rtl="rtl"==window.getComputedStyle(document.body).getPropertyValue("direction")},_lyteUiUtils.isIos=/ip(hone|ad|od)/i.test(navigator.userAgent)||/macintosh/i.test(navigator.userAgent)&&"ontouchend"in document,_lyteUiUtils.isAndroid=/android/i.test(navigator.userAgent),_lyteUiUtils.isMobile=_lyteUiUtils.isIos||_lyteUiUtils.isAndroid,_lyteUiUtils.escape=function(e){return(e||"").replace(/(\\|\'|\"|\?)/g,"\\$1")},_lyteUiUtils.appendChild=function(e,t){return Lyte.Component&&Lyte.Component.appendChild?Lyte.Component.appendChild(e,t):LyteComponent.appendChild(e,t)},_lyteUiUtils.insertBefore=function(e,t){return Lyte.Component&&Lyte.Component.insertBefore?Lyte.Component.insertBefore(e,t):LyteComponent.insertBefore(e,t)},_lyteUiUtils.insertAfter=function(e,t){return Lyte.Component&&Lyte.Component.insertAfter?Lyte.Component.insertAfter(e,t):LyteComponent.insertAfter(e,t)},_lyteUiUtils.getScrollBarWidth=function(){if(null!=this._scrollwidth)return this._scrollwidth;var e=document.createElement("p");e.style.width="100%",e.style.height="200px";var t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t);var o=e.offsetWidth;t.style.overflow="scroll";var a=e.offsetWidth;return o==a&&(a=t.clientWidth),document.body.removeChild(t),this._scrollwidth=o-a,this._scrollwidth},_lyteUiUtils.replaceWith=function(e,t){return Lyte.Component&&Lyte.Component.replaceWith?Lyte.Component.replaceWith(e,t):LyteComponent.replaceWith(e,t)},_lyteUiUtils.registeredCustomElements=_lyteUiUtils.registeredCustomElements||{},_lyteUiUtils.mergeObjects=function(e,t){var o={};for(var a in t)o[a]=t[a];for(var a in e)a in t||(o[a]=!1);return o},_lyteUiUtils.setAttribute=function(e,t,o){var a=_lyteUiUtils.mergeObjects(o,t);for(var r in a)!1===a[r]?e.removeAttribute(r):e.setAttribute(r,a[r])},_lyteUiUtils.trapFocus=function(e,t){var o,a=t||LytePopup.components[LytePopup.components.length-1].actualModalDiv;if(0!=(o=$L(a.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex]:not([tabindex="-1"]), *[contenteditable]')).filter((function(e,t){return $L(t).is(":visible")&&-1!=t.tabIndex&&!t.disabled}))).length)if(t)o.length>1&&(o[0].classList.contains("lyteModalClose")||o[0].classList.contains("lytePopoverClose"))?o[1].focus():o[0].focus();else{var r=document.activeElement;if(a.contains(r)){var i,s=o.length;for(n=0;n<o.length;n++)if(o[n]==r){i=n;break}e.shiftKey?0==i&&(o.get(s-1).focus(),e.preventDefault()):i==s-1&&(o.get(0).focus(),e.preventDefault())}else if(a.classList.contains("lyteModal")||a.classList.contains("lytePopover"))_lyteUiUtils.trapFocus(null,a);else if(a.classList.contains("alertPopup"))for(var l=a._callee.ltProp("buttons"),n=0;n<l.length;n++)if("accept"==l[n].type){a.querySelectorAll("button")[n].focus();break}}},_lyteUiUtils.getBrowser=function(){return navigator.userAgent.search("rv:11")>=0?"ie":navigator.userAgent.search("Edge")>=0?"edge":navigator.userAgent.search("Chrome")>=0?"chrome":navigator.userAgent.search("Firefox")>=0?"firefox":navigator.userAgent.search("Safari")>=0&&navigator.userAgent.search("Chrome")<0?"safari":void 0},_lyteUiUtils.isNegativeScroll=function(){if(null!=this._negativeScrollChrome)return this._negativeScrollChrome;var e,t=document.body.appendChild($L("<div style='position: absolute; left: 0; top: 0; overflow: hidden; width: 10px;height: 1px;'><div style='width: 20px; height: 1px;'></div></div>").get(0));return t.scrollLeft=-5,e=t.scrollLeft<0,document.body.removeChild(t),this._negativeScrollChrome=e,e},_lyteUiUtils.getCorrectNumberCode=function(e){return e>=96&&e<=105?e-48:e},_lyteUiUtils.capitalize=function(e){return(e||"").replace(/^./,(function(e){return e.toUpperCase()}))},Lyte.Component.registerHelper("lyteUiReturnOnlyKey",(function(e){var t=Object.keys(e);return!!t&&t[0]})),Lyte.Component.registerHelper("lyteUiReturnOnlyValue",(function(e){return e[Object.keys(e)[0]]})),Lyte.Component.registerHelper("lyteUiSetURL",(function(e,t){return t?e:""})),Lyte.Component.registerHelper("lyteUiCheckEmpty",(function(e){return e&&e[0].emptyBlock&&e[6].emptyBlock})),Lyte.Component.registerHelper("lyteUiDisableCalendarNav",(function(e,t){var o,a,r=e.getFullYear(),i=e.getMonth(),s=this.component.isYYFormat(),l=this.component.isHavingTimezone,n=l?Number($L.moment().format("YYYY")):(new Date).getFullYear();if(a=s?{minYear:n-(o=l?$L.moment():{uL:19,lL:80}).lL,maxYear:n+o.uL}:{minYear:1900,maxYear:2100},"previous"===t&&r===a.minYear&&0===i||"next"===t&&r===a.maxYear&&11===i)return"lyteCalDisableNav"})),Lyte.Component.registerHelper("lyteUiI18n",(function(e,t){return _lyteUiUtils.i18n(e,t)})),Lyte.Component.registerHelper("lyteUiOptGroupCheck",(function(e){if(e.constructor==Object&&1==Object.keys(e).length){var t=e[Object.keys(e)[0]];if(t.constructor==Object||t.constructor==Array)return!0}return!1})),Lyte.Component.registerHelper("lyteUiCheckForType",(function(e,t,o,a){if(a){var r=0,i=0;for(var s in e)i++,s==t&&r++,s==o&&r++;return 2!=r&&1==i}return"object"==typeof e})),Lyte.Component.registerHelper("lyteListBoxIndex",(function(e,t){return t||0===t?t+" "+e:e})),Lyte.Component.registerHelper("lyteListBoxParentIndex",(function(e,t,o){return t[o]?t[o]:""})),Lyte.Component.registerHelper("lyteUiChildPadding",(function(e){return"Arrow"===e?"padding-left:20px;":"Plus"===e?"padding-left:25px;":"padding-left:27px;"})),Lyte.Component.registerHelper("lyteUiHaveChildren",(function(e,t){return!!(e[t]&&e[t].length>0)})),Lyte.Component.registerHelper("lyteUiIsObject",(function(e){return"[object Object]"===Object.prototype.toString.call(e)})),Lyte.Component.registerHelper("lyteUiIsArray",(function(e){return"[object Array]"===Object.prototype.toString.call(e)})),Lyte.Component.registerHelper("lyteUiGiveProper",(function(e,t){for(var o=[],a=0;a<e.length;a++)e[a].menu==t&&o.push(e[a]);return o})),Lyte.Component.registerHelper("lyteUiAddClassModal",(function(e,t,o){var a=e;return o&&(a+=" draggable"),t&&(a+=" "+e+"Show"),a})),Lyte.Component.registerHelper("lyteUiAddShowClass",(function(e,t,o){return!0===e?t+" "+o:t})),Lyte.Component.registerHelper("lyteUiCatwise",(function(e,t){return e==t[this.get("ltPropCategory")]})),Lyte.Component.registerHelper("lyteUiCheckClassForDate",(function(e){return!!e&&-1!=e.indexOf("lyteCalGray")})),Lyte.Component.registerHelper("lyteUiConcat",(function(){for(var e="",t=arguments.length,o=0;o<t;o++)null!=arguments[o]&&(e+=arguments[o]);return e})),Lyte.Component.registerHelper("lyteUiConcatTypeClass",(function(e,t,o){return""!==e?e+t+" "+o:o})),Lyte.Component.registerHelper("lyteUiGetContainerClass",(function(e,t){return t||(t=""),1==e?"lyteDropdownContainer tick-selection "+t:"lyteDropdownContainer "+t})),Lyte.Component.registerHelper("lyteUiGetDropdownClass",(function(e){return e&&"true"==e.toString().toLowerCase()?"lyteDropdownElement1 lyteDropdown-disabled":"lyteDropdownElement1"})),Lyte.Component.registerHelper("lyteUiIfEquals",(function(e,t){return e===t})),Lyte.Component.registerHelper("lyteUiLabelCheck",(function(e,t){return e==t})),Lyte.Component.registerHelper("lyteUiObjectCheck",(function(e){return"string"==typeof e})),Lyte.Component.registerHelper("lyteUiReturnValueBy",(function(e,t){return t||0==t?e[t]:e})),Lyte.Component.registerHelper("lyteUiSetWH",(function(e){return 2*parseInt(e)})),Lyte.Component.registerHelper("lyteUiSetRadius",(function(e,t){return parseInt(e)-parseInt(t)/2})),Lyte.Component.registerHelper("lyteUiSetDashArray",(function(e,t){return 6.28318*(parseInt(e)-parseInt(t)/2)})),Lyte.Component.registerHelper("lyteUiSetOffset",(function(e,t,o){return 6.28318*(parseInt(e)-parseInt(t)/2)*(1-parseInt(o)/100)})),Lyte.Component.registerHelper("lyteUiTextTransform",(function(e){return"translate(0,-"+2*parseInt(e)+"px)"})),Lyte.Component.registerHelper("lyteUiMakeSortable",(function(e){return console.log(e),document.getElementById(e).classList.add("sortable"),!0})),Lyte.Component.registerHelper("lyteUiCheckTabPosition",(function(e){return"bottom"!==e.pos})),Lyte.Component.registerHelper("lyteUiGetValue",(function(e,t){return e[t]})),Lyte.Component.registerHelper("lyteUiIsEmptyArray",(function(e){return 0==e.length})),Lyte.Component.registerHelper("lyteUiRgbToHex",(function(e){var t="#";if(/rgba/.test(e)){for(var o=e.substring(5,e.length-1).split(","),a=0;a<3;a++)(r=parseInt(o[a]).toString(16).toUpperCase()).length<2&&(r="0"+r),t+=r;t+=(Math.round(255*parseFloat(o[3]))+65536).toString(16).substr(-2).toUpperCase()}else if(/rgb/.test(e))for(o=e.substring(4,e.length-1).split(","),a=0;a<3;a++){var r;(r=parseInt(o[a]).toString(16).toUpperCase()).length<2&&(r="0"+r),t+=r}return t})),Lyte.Component.registerHelper("lyteUiCPInsertBreak",(function(e){return(e+1)%10==0})),Lyte.Component.registerHelper("lyteUiCheckInRange",(function(e,t,o,a){var r=this.component;if(t=t||"",""===(e=e||"")&&""===t)return!0;if(""!==e&&""===t){var i=r.stringToDate(e,a);if((l=r.stringToDate(o,a))>=i)return!0}else if(""!==e&&""!==t){i=r.stringToDate(e,a);var s=r.stringToDate(t,a);if((l=r.stringToDate(o,a))>=i&&l<=s)return!0}else{var l;if(s=r.stringToDate(t,a),(l=r.stringToDate(o,a))<=s)return!0}return!1})),Lyte.Component.registerHelper("lyteUiIsEmptyObject",(function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0})),Lyte.Component.registerHelper("lyteUiCheckDisabled",(function(e,t){for(var o=0;o<e.length;o++)if(t===e[o])return"true";return"false"})),Lyte.Component.registerHelper("lyteUiTreeLevelHelp",(function(e,t){return""!==e?(e+" "+t++).split(" ").length-1:0})),Lyte.Component.registerHelper("lyteUiTreeMaxLevelHelp",(function(e,t,o){return(e+" "+t++).split(" ").length<=o})),Lyte.Component.registerHelper("lyteUiTreeClassHelp",(function(e,t,o,a){return"open"!==e&&t?a:o})),Lyte.Component.registerHelper("lyteTreeMaxChild",(function(e,t,o){return(e+" "+t++).split(" ").length-1>=o?"lyteTreeMaxedChild":""})),Lyte.Component.registerHelper("lyteUiTreeIndexHelp",(function(e,t){return(e+" "+t++).trim()})),Lyte.Component.registerHelper("lyteUiTreeHasChildHelp",(function(e){return e.hasChild?"lyteTreeHasChild":""})),Lyte.Component.registerHelper("lyteUiTreeChildHelp",(function(e,t,o){return void 0!==e[o]&&0!==e[o].length||e.hasChild?"":t})),Lyte.Component.registerHelper("stringify",(function(e){return JSON.stringify(e)})),Lyte.Component.registerHelper("lyteUiConcatAlertClass",(function(e,t){return("center"==e?"lyteAlertCenterContent":"")+" "+t})),Lyte.Component.registerHelper("lyteUiSetIndexString",(function(e,t){return e+1+" of "+t})),Lyte.Component.registerHelper("lyteUiRTL",(function(){return _lyteUiUtils.getRTL()})),Lyte.Component.registerHelper("lyteIsIos",(function(){return _lyteUiUtils.isIos})),Lyte.Component.registerHelper("lyteIsAndroid",(function(){return _lyteUiUtils.isAndroid})),Lyte.Component.registerHelper("lyteUiGetMonthOrYear",(function(e,t){return"M"==t?e.split(" ")[0]:e.split(" ")[1]})),Lyte.Component.registerHelper("lyteUiDisplayOrHide",(function(e){return"rgba(0, 0, 0, 0)"==e?"lyteColorPicker__colorpan lyteColorPicker__hide":"lyteColorPicker__colorpan"})),Lyte.Component.registerHelper("lyteUiMsgBoxConcatClass",(function(e,t,o,a){return""!==t?e+" "+t+o+" "+a:e+" "+a})),Lyte.Component.registerHelper("lyteUiFileSize",(function(e,t,o){var a=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],r=0;return 0==(r=t?Math.max(r,a.indexOf(t)):Math.floor(Math.log(e)/Math.log(1e3)))&&1==e?"1 Byte":parseInt(e/Math.pow(1e3,r)*Math.pow(10,o))/Math.pow(10,o)+" "+a[r]})),Lyte.Component.registerHelper("lyteUiAddClassRating",(function(e,t,o){var a="";return"{{dummy}}"!=e.className&&(a=e.className),t&&(a+=" "+t),o?-1==a.indexOf("lyteRatingReadOnly")&&(a+=" lyteRatingReadOnly"):-1!=a.indexOf("lyteRatingReadOnly")&&(a=a.replace("lyteRatingReadOnly","")),a})),Lyte.Component.registerHelper("lyteUiGetArrayValueByIndex",(function(e,t){return e[t%e.length]})),Lyte.Component.registerHelper("lyteUiIfEqualsAny",(function(){var e=arguments[0];for(i=1;i<arguments.length;i++)if(e==arguments[i])return!0;return!1})),Lyte.Component.registerHelper("lyteUiGetNextArrayValueByIndex",(function(e,t){return e[t+1]})),Lyte.Component.registerHelper("lyteUiArrayLastIndex",(function(e){return e.length-1})),Lyte.Component.registerHelper("lyteUiGetViewBox",(function(e){return"heart"===e?"1.5 0.5 20 20":"star"===e?"5.5 2.5 23 23":"0 0 21 21"})),Lyte.Component.registerHelper("lyteUiGetFillOrStroke",(function(e,t,o){return"heart"===e||"star"===e?"; fill:"+t+";":"lineStar"===e||"lineHeart"===e?"; fill:transparent;; stroke:"+(o||t)+";":"; stroke:"+(o||t)+";"})),Lyte.Component.registerHelper("lyteUiCheckHalfRatingSvg",(function(e,t){return!!(e&&t>0&&t<1)})),Lyte.Component.registerHelper("lyteUiProgressbarLabel",(function(e,t,o){return e||t+(o?"%":"")})),Lyte.Component.registerHelper("lyteUiGetStackValue",(function(e,t,o){return t<e.length&&e[t][o]})),Lyte.Component.registerHelper("lyteUiAttribute",(function(e,t){return t&&e||!1})),Lyte.Component.registerHelper("lyteUiAddPE",(function(e){return"noColor"===e?"lyteColorPicker__pe":""})),Lyte.Component.registerHelper("lyteUiClockPairNumber",(function(e){return 1==e.length&&(e=0+e),e})),Lyte.Component.registerHelper("lyteUiDateRPHeaderClass",(function(e){return"dropdown"!=e?"lyteDateRPMonthHeader lyteDateRPStringHeader":"lyteDateRPMonthHeader"})),Lyte.Component.registerHelper("lyteUiSetAlphaLabel",(function(e){return e||_lyteUiUtils.i18n("Alpha")})),Lyte.Component.registerHelper("lyteUiRowLength",(function(e){var t=this.getData("sum");return e=parseInt(e,10),this.setData("sum",t+e),e&&e<12&&e>0&&t<=12})),Lyte.Component.registerHelper("lyteUiImageFile",(function(e){return!(!e.src||"image"!==e.fileType)})),Lyte.Component.registerHelper("lyteUiIsInArray",(function(e,t,o){t=t||[];for(var a=0;a<t.length;a++)if(t[a][o]===e[o])return!0;return!1})),Lyte.Component.registerHelper("lyteUiCapitalizeName",(function(e){return _lyteUiUtils.capitalize(e)})),!LytePopup){var LytePopup={components:[],bodywrapperCount:0,onEscape:function(e){e=e||window.event;var t=!1,o=!1,a=!1,r=document.activeElement;"key"in e?(t="Escape"==e.key||"Esc"==e.key,o="Tab"==e.key,a="Enter"==e.key):(t=27==e.keyCode,o=9==e.keyCode,a=13==e.keyCode),t&&LytePopup.closePopup(void 0,!0),o&&LytePopup.components.length>0&&LytePopup.trapFocus(e),a&&r&&(r.classList.contains("alertClose")||r.classList.contains("lyteModalClose")||r.classList.contains("lytePopoverClose"))&&r.click()},bindDocumentKeydown:function(){document.addEventListener("keydown",LytePopup.onEscape,!0)},checkAndRemoveWrapper:function(){var e=Array.from(document.querySelectorAll(".lyteAlertOpened")).concat(Array.from(document.querySelectorAll(".lyteModalOpened")),Array.from(document.querySelectorAll(".lytePopoverOpened")));if(0==e.length)document.body.classList.remove("bodyWrapper");else{for(var t=0;t<e.length;t++)if(e[t].ltProp("freeze"))return;document.body.classList.remove("bodyWrapper")}},hideOrShowFreeze:function(e,t,o){var a,r="",i="",s="",l="";if("open"==e&&LytePopup.components.length>1){for(var n=LytePopup.components.length-2;n>=0;n--)if(r="LYTE-MODAL"==LytePopup.components[n].$node.tagName?"lyte-modal-freeze":"LYTE-POPOVER"==LytePopup.components[n].$node.tagName?"lyte-popover-freeze":".alertFreezeLayer",i="LYTE-MODAL"==t.$node.tagName?"lyte-modal-freeze":"LYTE-POPOVER"==t.$node.tagName?"lyte-popover-freeze":".alertFreezeLayer",s=LytePopup.components[n].childComp.querySelector(r),l=t.childComp.querySelector(i),a=t.getData("ltPropDimmer")&&t.getData("ltPropDimmer").opacity?t.getData("ltPropDimmer").opacity:"",s&&l){s.style.transition="none",l.style.transition="none",s.style.zIndex=15,s.style.opacity=0,l.style.visibility="visible",l.style.opacity=a,setTimeout(LytePopup.removeTransition,100,l,s),s.style.zIndex="",t.addedFreezeDetails=!0;break}}else if("close"==e&&LytePopup.components.length>1&&LytePopup.components[LytePopup.components.length-1]===t)for(n=LytePopup.components.length-2;n>=0;n--){if(r="LYTE-MODAL"==LytePopup.components[n].$node.tagName?"lyte-modal-freeze":"LYTE-POPOVER"==LytePopup.components[n].$node.tagName?"lyte-popover-freeze":".alertFreezeLayer",i="LYTE-MODAL"==t.$node.tagName?"lyte-modal-freeze":"LYTE-POPOVER"==t.$node.tagName?"lyte-popover-freeze":".alertFreezeLayer",s=LytePopup.components[n].childComp.querySelector(r),l=t.childComp.querySelector(i),a=LytePopup.components[n].getData("ltPropDimmer")&&LytePopup.components[n].getData("ltPropDimmer").opacity?LytePopup.components[n].getData("ltPropDimmer").opacity:"",s&&l){l.style.transition="none",s.style.transition="none",s.style.zIndex=15,l.style.opacity=0,s.style.visibility="visible",s.style.opacity=a,setTimeout(LytePopup.removeTransition,100,l,s),s.style.zIndex="",l.style.visibility="";break}if(s&&o){s.style.transition="none",s.style.zIndex=15,s.style.visibility="visible",s.style.opacity=a,setTimeout(LytePopup.removeTransition,100,l,s),s.style.zIndex="";break}}},removeTransition:function(e,t){e&&(e.style.transition=""),t&&(t.style.transition="")},addPopup:function(e){LytePopup.closePopup();var t=LytePopup.components.length;if(t>0){var o,a,r;a="LYTE-MODAL"==LytePopup.components[t-1].$node.tagName?".modalWrapper":"LYTE-POPOVER"==LytePopup.components[t-1].$node.tagName?".popoverWrapper":".alertWrapper",r="LYTE-MODAL"==e.$node.tagName?".modalWrapper":"LYTE-POPOVER"==e.$node.tagName?".popoverWrapper":".alertWrapper";var i=e.childComp.querySelector(r);(o=Number(document.defaultView.getComputedStyle(LytePopup.components[LytePopup.components.length-1].childComp.querySelector(a),null).getPropertyValue("z-index")))+2>Number(document.defaultView.getComputedStyle(i,null).getPropertyValue("z-index"))&&(i.style.zIndex=o+2)}LytePopup.components[t]=e,(e.getData("ltPropFreeze")||"LYTE-ALERT"==e.$node.tagName)&&LytePopup.hideOrShowFreeze("open",e)},closePopup:function(e,t){if(t){var o=LytePopup.components[LytePopup.components.length-1];o&&o.$node.ltProp("closeOnEscape")&&o.$node.ltProp("show",!1)}else if(e){var a=LytePopup.components.indexOf(e);a>-1&&LytePopup.components.splice(a,1)}else for(var r=LytePopup.components.length-1;r>=0;r--)LytePopup.components[r].$node&&!LytePopup.components[r].$node.ltProp("allowMultiple")&&LytePopup.components[r].$node.ltProp("show",!1)},getScrollParent:function(e){var t=e instanceof HTMLElement&&window.getComputedStyle(e).overflowY,o="visible"!==t&&"hidden"!==t,a=e&&o?e.scrollHeight:0,r=e&&o?e.clientHeight:0;return e?o&&a>r?e:LytePopup.getScrollParent(e.parentNode)||document.body:null},trapFocus:function(e,t){var o,a=t||LytePopup.components[LytePopup.components.length-1].actualModalDiv;if(0!=(o=$L(a.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex]:not([tabindex="-1"]), *[contenteditable]')).filter((function(e,t){return $L(t).is(":visible")&&-1!=t.tabIndex&&!t.disabled}))).length)if(t)o.length>1&&(o[0].classList.contains("lyteModalClose")||o[0].classList.contains("lytePopoverClose"))?o[1].focus():o[0].focus();else{var r,i=document.activeElement;if(!a.contains(i)&&((r=$L(i).closest("lyte-drop-box")[0])&&(r=r.origindd),!a.contains(r)))return LytePopup.initializeFocus(a),void(e&&e.preventDefault());for(var s,l=o.length,n=0;n<o.length;n++)if(o[n]==i){s=n;break}e.shiftKey?0==s&&(o.get(l-1).focus(),e.preventDefault()):s==l-1&&(o.get(0).focus(),e.preventDefault())}},initializeFocus:function(e){if(e.classList.contains("lyteModal")||e.classList.contains("lytePopover"))LytePopup.trapFocus(null,e);else if(e.classList.contains("alertPopup"))for(var t=e._callee.ltProp("buttons"),o=0;o<t.length;o++)if("accept"==t[o].type){e.querySelectorAll("button")[o].focus();break}},transitionEnd:function(e){if(e.target==this&&LytePopup.components.length>0){var t=LytePopup.components[LytePopup.components.length-1],o=t.actualModalDiv;!t.getData("ltPropPreventFocus")&&LytePopup.initializeFocus(o),this.removeEventListener("transitionend",LytePopup.transitionEnd)}},bindTransitionEnd:function(e){e&&e.addEventListener("transitionend",LytePopup.transitionEnd)}};LytePopup.bindDocumentKeydown()}var ratingNum=0;_lyteUiUtils.convert_diacritics=function(e){return[{value:"A",regex:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{value:"AA",regex:/[\uA732]/g},{value:"AE",regex:/[\u00C6\u01FC\u01E2]/g},{value:"AO",regex:/[\uA734]/g},{value:"AU",regex:/[\uA736]/g},{value:"AV",regex:/[\uA738\uA73A]/g},{value:"AY",regex:/[\uA73C]/g},{value:"B",regex:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{value:"C",regex:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{value:"D",regex:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{value:"DZ",regex:/[\u01F1\u01C4]/g},{value:"Dz",regex:/[\u01F2\u01C5]/g},{value:"E",regex:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{value:"F",regex:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{value:"G",regex:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{value:"H",regex:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{value:"I",regex:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{value:"J",regex:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{value:"K",regex:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{value:"L",regex:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{value:"LJ",regex:/[\u01C7]/g},{value:"Lj",regex:/[\u01C8]/g},{value:"M",regex:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{value:"N",regex:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{value:"NJ",regex:/[\u01CA]/g},{value:"Nj",regex:/[\u01CB]/g},{value:"O",regex:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{value:"OI",regex:/[\u01A2]/g},{value:"OO",regex:/[\uA74E]/g},{value:"OU",regex:/[\u0222]/g},{value:"P",regex:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{value:"Q",regex:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{value:"R",regex:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{value:"S",regex:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{value:"T",regex:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{value:"TZ",regex:/[\uA728]/g},{value:"U",regex:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{value:"V",regex:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{value:"VY",regex:/[\uA760]/g},{value:"W",regex:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{value:"X",regex:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{value:"Y",regex:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{value:"Z",regex:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{value:"a",regex:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{value:"aa",regex:/[\uA733]/g},{value:"ae",regex:/[\u00E6\u01FD\u01E3]/g},{value:"ao",regex:/[\uA735]/g},{value:"au",regex:/[\uA737]/g},{value:"av",regex:/[\uA739\uA73B]/g},{value:"ay",regex:/[\uA73D]/g},{value:"b",regex:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{value:"c",regex:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{value:"d",regex:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{value:"dz",regex:/[\u01F3\u01C6]/g},{value:"e",regex:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{value:"f",regex:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{value:"g",regex:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{value:"h",regex:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{value:"hv",regex:/[\u0195]/g},{value:"i",regex:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{value:"j",regex:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{value:"k",regex:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{value:"l",regex:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{value:"lj",regex:/[\u01C9]/g},{value:"m",regex:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{value:"n",regex:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{value:"nj",regex:/[\u01CC]/g},{value:"o",regex:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{value:"oi",regex:/[\u01A3]/g},{value:"ou",regex:/[\u0223]/g},{value:"oo",regex:/[\uA74F]/g},{value:"p",regex:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{value:"q",regex:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{value:"r",regex:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{value:"s",regex:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{value:"t",regex:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{value:"tz",regex:/[\uA729]/g},{value:"u",regex:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{value:"v",regex:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{value:"vy",regex:/[\uA761]/g},{value:"w",regex:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{value:"x",regex:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{value:"y",regex:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g}].forEach((function(t){e=e.replace(t.regex,t.value)})),e},Lyte.Component.register("lyte-multislider",{_template:'<template tag-name="lyte-multislider"> <div class="lyteSlide{{if(ltPropDisabled,\' lyteSliderDisabled\',\'\')}}" onkeydown="{{action(\'keydown\',event)}}" tabindex="{{ltPropTabindex}}" style="width: {{ltPropWidth}}; height: {{ltPropHeight}}"> <div class="lyteRangeSlider {{ltPropDirection}}" onclick="{{action(\'click\',event)}}" style="background-color: {{ltPropNonFillColor}}"> <template is="for" items="{{ltPropValue}}" item="item" index="index"> <div class="lyteSliderFill {{ltPropValue[index].class}}" id="{{{{ltPropValue[index].id}}}}" data-order="{{index}}" style="background-color: {{if(ltPropColor[index],ltPropColor[index],ltPropFillColor)}};left: 0; top: 0;right: 0"></div> <div data-order="{{index}}" class="lyteSliderHandler {{ltPropHandler}} lyteHandler{{index}} {{item.class}}" lt-prop-title="{{if(ltPropTooltip,item.value,\'\')}}" ontouchstart="{{action(\'mousedown\',event,this,index)}}" onmousedown="{{action(\'mousedown\',event,this,index)}}" lt-prop-tooltip-config="{{ltPropTooltipConfig}}" lt-prop-tooltip-style="{{ltPropTooltipStyle}}" lt-prop-tooltip-class="{{ltPropTooltipClass}}" role="{{lyteUiAttribute(\'slider\',ltPropAria)}}" tabindex="{{lyteUiAttribute(item.tabindex,true)}}" aria-valuemin="{{lyteUiAttribute(item.min,ltPropAria)}}" aria-valuemax="{{lyteUiAttribute(item.max,ltPropAria)}}" aria-valuenow="{{lyteUiAttribute(item.value,ltPropAria)}}" aria-valuetext="{{lyteUiAttribute(concat(item.text,item.value),ltPropAria)}}" aria-label="{{lyteUiAttribute(item.label,ltPropAria)}}" onfocus="{{action(\'focus\',this,event)}}"></div> </template> <div class="lyteSliderFill endFill" id="endFill" style="right: 0;bottom: 0;left: 0;background-color: {{ltPropFillColor}}"></div> <template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield yield-name="lyteMultiSlider"></lyte-yield> </template><template case="false"> <div class="lyteScaleOption {{ltPropHandler}}"> <template is="for" items="{{divLength}}" index="indexVal"> <span class="lyteScaleLine" style="{{item}}"> <span></span> <span class="lyteScalLable">{{scaleVal[indexVal]}}</span> </span> </template> </div> </template></template> </div> </div> </template>',_dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["'width: '","ltPropWidth","'; height: '","ltPropHeight"]}}}},{type:"attr",position:[1,1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["'background-color: '","ltPropNonFillColor"]}}}},{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["'background-color: '",{type:"helper",value:{name:"if",args:["ltPropColor[index]","ltPropColor[index]","ltPropFillColor"]}},"';left: 0; top: 0;right: 0'"]}}}},{type:"attr",position:[3]}]},{type:"attr",position:[1,1,3],attr:{style:{name:"style",helperInfo:{name:"concat",args:["'right: 0;bottom: 0;left: 0;background-color: '","ltPropFillColor"]}}}},{type:"attr",position:[1,1,5]},{type:"if",position:[1,1,5],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"item"}}},{type:"text",position:[1,3,0]}]}]}},default:{}}],_observedAttributes:["ltPropMin","ltPropMax","ltPropValue","ltPropDirection","ltPropHandler","ltPropWidth","ltPropFillColor","ltPropNonFillColor","ltPropHeight","ltPropContent","ltPropScaleInterval","ltPropDiscrete","ltPropScaleAppend","ltPropScalePrepend","ltPropColor","ltPropTooltipStyle","ltPropTooltipConfig","ltPropTooltip","ltPropDigits","ltPropMinDiff","ltPropYield","ltPropTabindex","ltPropAria","divLength","scaleVal","secArr"],init:function(){this._dir=_lyteUiUtils.getRTL(),this._mv=this.mousemove.bind(this),this._mp=this.mouseup.bind(this),this.getMethods("beforeRender")&&this.executeMethod("beforeRender",this.$node)},didConnect:function(){this.$node.reRender=function(){this.initObs.call(this),this.dctWrk.call(this)}.bind(this)},dcnt:function(){this._prevent||(clearTimeout(this._time),this._time=setTimeout(this.dctWrk.bind(this),20))}.observes("ltPropValue.[]","ltPropValue","ltPropDirection","ltPropWidth","ltPropHeight","ltPropMin","ltPropMax","ltPropContent.[]","ltPropContent").on("didConnect"),didDestroy:function(){clearTimeout(this._time),clearTimeout(this._time2)},rtlfunc:function(e,t,o){if(this._dir&&"top"!=e&&"clientY"!=e){if(t)return"right"==e?o-t.left:"clientX"==e?o-t.clientX:o-t.right;if("left"==e)return"right"}return t?t[e]:e},hgtObs:function(){var e=this.data,t="lyteHorizontal"==e.ltPropDirection;this._prevent=!0,this.$node.ltProp("width",e.ltPropWidth||(t?"200px":"30px")),this.$node.ltProp("height",e.ltPropHeight||(t?"30px":"200px")),delete this._prevent}.on("init"),initWrk:function(e){this._prevent||(clearTimeout(this._time2),this._time2=setTimeout(this.initObs.bind(this),0,e))}.observes("ltPropContent.[]","ltPropContent","ltPropDiscrete","ltPropScaleInterval","ltPropValue.[]","ltPropValue").on("init"),initObs:function(e){var t=this.data,o="lyteHorizontal"==t.ltPropDirection,a=t.ltPropContent,r=a.length,i=r,s=t.ltPropDiscrete,l=t.ltPropScaleInterval,n=[],p=[],c=this.rtlfunc("left"),d=t.ltPropScalePrepend,u=t.ltPropScaleAppend,h=[],m=t.ltPropValue,y=t.ltPropYield;if(o||(c="top"),this._prevent=!0,r?(t.ltPropMax=100,t.ltPropMin=0,t.ltPropScaleInterval=t.ltPropDiscrete=100/(r-1),r--):(s?l=t.ltPropScaleInterval=s:l||(l=t.ltPropScaleInterval=.1*Math.abs(parseFloat(t.ltPropMax)-parseFloat(t.ltPropMin))),r=Math.abs(parseFloat(t.ltPropMax)-parseFloat(t.ltPropMin))/t.ltPropScaleInterval),!y){p.push(c+": 0"),n.push(d+(i?a[0]:t.ltPropMin)+u);for(var f=1;f<r;f++)p.push(c+":"+100*f/r+"%"),n.push(d+(i?a[f]:t.ltPropMin+l*f*(t.ltPropMin>t.ltPropMax?-1:1))+u);if(i){var g=t.ltPropDiscrete;for(f=0;f<m.length;f++){var v=a.indexOf(m[f].max);h.push({id:f-1,value:a.indexOf(m[f].value)*g,min:Math.max(0,a.indexOf(m[f].min)*g),max:Math.min(100,(-1!=v?v:100)*g)})}}p.push(c+": 100%"),n.push(d+(i?a[i-1]:t.ltPropMax)+u),this.setData("divLength",p),this.setData("scaleVal",n)}this.setData("secArr",i?h:m.slice()),delete this._prevent},dctWrk:function(e,t,o,a){var r=this.data,i=r.secArr.slice().sort((function(e,t){return e.value<t.value?-1:1})),s=(e=e||[],"lyteHorizontal"==r.ltPropDirection),l=r.ltPropContent,n=(l.length,[]),p="width",c=this.rtlfunc("left"),d=(t=t||this.$node.querySelector(".lyteSlide").getBoundingClientRect(),parseFloat(r.ltPropMax)),u=parseFloat(r.ltPropMin),h=this.$node.querySelectorAll(".lyteSliderHandler[ data-order ]"),m=(n=[],this.$node.querySelectorAll(".lyteSliderFill"));s||(p="height",c="top");for(var y=d<u?t[p]:0,f=0;f<i.length;f++){var g=r.secArr.indexOf(i[f]);e.length&&-1==e.indexOf(g)?n.push(void 0):(n.push({node:h[g],id:i.indexOf(i[f])}),n[f].bcr=o||h[g].getBoundingClientRect(),n[f].style=this.getLeft(t[p],n[f].bcr[p],i[f].value,d,u),v=this.findPrevmin.call(this,g,i[f].value))}for(f=0;f<n.length;f++)if(n[f]){var v=m[n[f].id-1];y?(n[f].style=y-n[f].style-n[f].bcr[p],n[f].node.style[c]=n[f].style+"px",m[n[f].id].style[c]=n[f].style+n[f].bcr[p]/2+"px",m[n[f].id].style[p]=Math.max(0,(v?parseFloat(v.style[c]):y)-n[f].bcr[p]/2-n[f].style)+"px",n[f].id+2==m.length&&(m[n[f].id+1].style[c]="0",m[n[f].id+1].style[p]=Math.max(0,n[f].style+n[f].bcr[p]/2)+"px",m[n[f].id+1].setAttribute("range-max",this.convert(l,u))),0==n[f].id&&m[n[f].id].setAttribute("range-min",this.convert(l,d))):(n[f].node.style[c]=n[f].style+"px",m[n[f].id+1].style[c]=n[f].style+n[f].bcr[p]/2+"px",m[n[f].id].style[p]=Math.max(0,n[f].style+n[f].bcr[p]/2-(v?parseFloat(v.style[c])+parseFloat(v.style[p]):0))+"px",n[f].id+2==m.length&&(m[n[f].id+1].style[p]=Math.abs(y-Math.max(t[p]-n[f].style-n[f].bcr[p]/2,0))+"px",m[n[f].id+1].setAttribute("range-max",this.convert(l,d))),0==n[f].id&&m[n[f].id].setAttribute("range-min",this.convert(l,u))),m[n[f].id].setAttribute("range-max",this.convert(l,i[n[f].id].value)),m[n[f].id+1].setAttribute("range-min",this.convert(l,i[n[f].id].value))}!a&&this.getMethods("afterRender")&&this.executeMethod("afterRender",this.$node)},setValues:function(e,t,o){var a={};return null==o?(a.left=0,a.width=t+e):(a.left=parseFloat(o.style)+e,a.width=t-a.left+e),a},findPrevmin:function(e,t,o,a,r){var i,s,l=this.data.secArr.slice();if(null!=t){for(var n=0;n<l.length;n++)-1==[e,r,a].indexOf(n)&&(l[n].value<=t&&!o?i&&l[n].value>i?(i=l[n].value,s=n):i||(i=l[n].value,s=n):l[n].value>=t&&o&&(i&&l[n].value<i?(i=l[n].value,s=n):i||(i=l[n].value,s=n)));return[s,i]}return l.sort((function(e,t){return e.value<t.value?-1:1})),[s=this.data.secArr.indexOf(l[l.length-1]),this.data.secArr[s].value]},findPrevmin1:function(e,t,o){for(var a,r,i=this.data.secArr.slice(),s=0;s<i.length;s++)s!=e&&(o?t<i[s].value&&(r&&i[s].value<r?(r=i[s].value,a=s):r||(r=i[s].value,a=s)):t>i[s].value&&(r&&i[s].value>r?(r=i[s].value,a=s):r||(r=i[s].value,a=s)));return[a,r]},getLeft:function(e,t,o,a,r){var i=(o-Math.min(r,a))*e/(Math.max(r,a)-Math.min(r,a));return Math.round(100*Math.min(Math.max(i-.5*t,-.5*t),e-.5*t))/100},getValue:function(e,t,o,a,r,i){var s=Math.pow(10,this.data.ltPropDigits);return o>a?Math.min(Math.max(r||a,Math.round((a+(o-a)*t/e)*s)/s),i||o):Math.min(Math.max(r||o,Math.round((o+(a-o)*(e-t)/e)*s)/s),i||a)},convert:function(e,t){if(e.length)return e[Math.round(t/this.data.ltPropDiscrete)];var o=Math.pow(10,this.data.ltPropDigits);return parseInt(t*o)/o},data:function(){return{ltPropMin:Lyte.attr("number",{default:0}),ltPropMax:Lyte.attr("number",{default:void 0}),ltPropValue:Lyte.attr("array",{default:[]}),ltPropDirection:Lyte.attr("string",{default:"lyteHorizontal"}),ltPropHandler:Lyte.attr("string",{default:"lyteArrow"}),ltPropWidth:Lyte.attr("string",{default:""}),ltPropFillColor:Lyte.attr("string",{default:""}),ltPropNonFillColor:Lyte.attr("string",{default:""}),ltPropHeight:Lyte.attr("string",{default:""}),ltPropContent:Lyte.attr("array",{default:[]}),ltPropScaleInterval:Lyte.attr("number"),ltPropDiscrete:Lyte.attr("number"),ltPropScaleAppend:Lyte.attr("string",{default:""}),ltPropScalePrepend:Lyte.attr("string",{default:""}),ltPropColor:Lyte.attr("array",{default:[]}),ltPropTooltipStyle:Lyte.attr("string",{default:""}),ltPropTooltipConfig:Lyte.attr("object",{default:{margin:5,position:"top"}}),ltPropTooltip:Lyte.attr("boolean",{default:!1}),ltPropDigits:Lyte.attr("number",{default:2}),ltPropMinDiff:Lyte.attr("number",{default:0}),ltPropYield:Lyte.attr("boolean",{default:!1}),ltPropTabindex:Lyte.attr("number",{default:0}),ltPropAria:Lyte.attr("boolean",{default:!1}),divLength:Lyte.attr("array",{default:[]}),scaleVal:Lyte.attr("array",{default:[]}),secArr:Lyte.attr("array",{default:[]})}},mousemove:function(e,t){var o,a,r=this._sel,i=this.$node.querySelector(".lyteSlide").getBoundingClientRect(),s=this.data,l="lyteHorizontal"==s.ltPropDirection,n="clientX",p=this.rtlfunc("left"),c="width",d=this._idx,u=s.secArr,h=(this.$node.querySelectorAll(".lyteSliderFill"),s.ltPropDiscrete),m=s.ltPropContent,y=window.innerWidth,f=parseFloat(s.ltPropMax),g=parseFloat(s.ltPropMin),v=[],x=[],P=this.data.ltPropMinDiff,b=e,D="touchmove"==e.type;if(!D||1==e.touches.length){if(D&&(b=e.touches[0]),l||(n="clientY",p="top",c="height"),a=parseFloat(r.style[p]),isNaN(a)&&(this.dctWrk.call(this,[],i,this._bcr,!0),a=parseFloat(r.style[p])),/mousemove|touchmove/.test(e.type)&&(t=parseInt(100*(this.rtlfunc(n,b,y)-this.rtlfunc("right"==p?"left":p,i,y)-this._xoff-parseFloat(r.style[p])))/100),this._prevent=!0,h){var L=this.getValue(i[c],a+t,f,g),C=Math.min(Math.max(Math.round(L/h)*h,0));if(C==s.secArr[d].value&&L!=f&&L!=g||L==s.secArr[d].value)return void delete this._prevent;L!=f&&L!=g||(C=L),t=!m.length&&f<g?this.getLeft(i[c],this._bcr[c],s.secArr[d].value,f,g)-this.getLeft(i[c],this._bcr[c],C,f,g):this.getLeft(i[c],this._bcr[c],C,f,g)-a}m.length&&(P*=h),!isNaN(P)&&(null!=(v=this.findPrevmin1(d,u[d].value))[0]?v[1]+=1*P:v[1]=Math.min(f,g),null!=(x=this.findPrevmin1(d,u[d].value,!0))[0]?x[1]-=1*P:x[1]=Math.max(f,g),t<0&&u[d].frmMax||t>0&&u[d].frmMin)||(o=u[d].value,Lyte.objectUtils(u[d],"add","value",this.getValue(i[c],a+t+this._bcr[c]/2,f,g,Math.max(u[d].min||v[1],v[1]||u[d].min),Math.min(u[d].max||x[1],x[1]||u[d].max))),Lyte.Component.set(s.ltPropValue[d],"value",this.convert(m,u[d].value)),v=this.findPrevmin(d,u[d].value),null!=P&&(v[1]==u[d].value?t>0&&!u[d].frmMax?u[d].frmMin=!0:u[d].frmMin||(u[d].frmMax=!0):(delete u[d].frmMax,delete u[d].frmMin)),this.dctWrk.call(this,[],i,this._bcr,!0),delete this._prevent,e.preventDefault(),/mousemove|touchmove/.test(e.type)&&this.getMethods("onChange")&&o!=u[d].value&&this.executeMethod("onChange",d,s.ltPropValue[d],e,this.$node),r.tooltip&&r.tooltip.refresh&&r.tooltip.refresh({clientX:Math.max(Math.min(e.clientX,i.right),i.left)},r.tooltip.tooltipSpan))}},mouseup:function(e){var t,o="touchend"==e.type;document.removeEventListener(o?"touchmove":"mousemove",this._mv,!0),document.removeEventListener(o?"touchend":"mouseup",this._mp,!0),this.getMethods("onSelect")&&(t=this.executeMethod("onSelect",this._idx,this.data.ltPropValue[this._idx],e,this.$node)),delete this._sel,delete this._xoff,delete this._idx,delete this._bcr,delete this._prevent,0!=t&&o&&e.preventDefault()},callBack:function(e,t){this.getMethods("onSelect")&&this.executeMethod("onSelect",e,this.data.ltPropValue[e],t,this.$node),this.getMethods("onChange")&&this.executeMethod("onChange",e,this.data.ltPropValue[e],t,this.$node)},actions:{mousedown:function(e,t,o){if(2!=e.button){var a="touchstart"==e.type,r=e;if(!(a&&1!=e.touches.length||(a&&(r=e.touches[0]),this.getMethods("onBeforeSelect")&&0==this.executeMethod("onBeforeSelect",t,e,o,this.$node)))){$L.fastdom.mutate(function(){var e=this.$node.querySelector(".lyteMultiSliderSelected");e&&e!=t&&e.classList.remove("lyteMultiSliderSelected"),t.classList.add("lyteMultiSliderSelected")}.bind(this));var i=t.getBoundingClientRect(),s="lyteHorizontal"==this.data.ltPropDirection,l="clientX",n=this.rtlfunc("left"),p=window.innerWidth;s||(l="clientY",n="top","height"),this._xoff=this.rtlfunc(l,r,p)-this.rtlfunc("right"==n?"left":n,i,p),this._sel=t,this._idx=o,this._bcr=i,document.addEventListener(a?"touchmove":"mousemove",this._mv,!0),document.addEventListener(a?"touchend":"mouseup",this._mp,!0),a&&e.preventDefault()}}},click:function(e){var t=e.target,o="width",a="clientX",r=this.rtlfunc("left"),i=this.data,s=!!i.ltPropContent.length;if(!t.classList.contains("lyteSliderHandler")&&t.classList.contains("lyteSliderFill")){"lyteHorizontal"!=this.data.ltPropDirection&&(o="height",a="clientY",r="top");var l,n,p,c=this.$node.querySelector(".lyteSlide").getBoundingClientRect(),d=this.$node.querySelectorAll(".lyteSliderHandler"),u=1,h=window.innerWidth;d.length&&(l=this.getValue(c[o],this.rtlfunc(a,e,h)-this.rtlfunc("right"==r?"left":r,c,h),i.ltPropMax,i.ltPropMin),p=this.findPrevmin1(null,l),((n=this.findPrevmin1(null,l,!0))[1]||Math.max(i.ltPropMax,i.ltPropMin))-l>l-(p[1]||Math.min(i.ltPropMax,i.ltPropMin))?(p[0]=null!=p[0]?p[0]:p[0]||n[0],this._sel=d[p[0]],this._idx=p[0]):(n[0]=null!=n[0]?n[0]:p[0],this._sel=d[n[0]],this._idx=n[0]),l-i.secArr[this._idx].value<0&&(u=-1),!s&&i.ltPropMin>i.ltPropMax&&(u*=-1),this._bcr=this._sel.getBoundingClientRect(),this.mousemove.call(this,e,u*this.getLeft(c[o],this._bcr[o]/2,Math.abs(l-i.secArr[this._idx].value)+(s?0:Math.min(i.ltPropMin,i.ltPropMax)),i.ltPropMax,i.ltPropMin)),this.callBack.call(this,this._idx,e),$L.fastdom.mutate(function(){var e=this.$node.querySelector(".lyteMultiSliderSelected");e&&e!=this._sel&&e.classList.remove("lyteMultiSliderSelected"),this._sel.classList.add("lyteMultiSliderSelected"),delete this._bcr,delete this._idx,delete this._sel}.bind(this)))}},keydown:function(e){var t=e.keyCode||e.which;if(-1!=[37,38,39,40,36,35].indexOf(t)){var o=this.$node.querySelector(".lyteSliderHandler.lyteMultiSliderSelected");if(o){var a=this.data,r="lyteHorizontal"==a.ltPropDirection,i=r?"width":"height",s=1,l=!!a.ltPropContent.length;if(!a.ltPropAria&&(/^(38|40)$/.test(t)&&r||!r&&/^(39|37)$/.test(t)))return;/^(38|37)$/.test(t)?s=-1:/^(39|40)$/.test(t)&&(s=1),this._bcr=o.getBoundingClientRect(),this._idx=parseInt(o.getAttribute("data-order")),this._sel=o;var n,p=this.$node.querySelector(".lyteSlide").getBoundingClientRect()[i];/^(35|36)$/.test(t)?a.ltPropAria&&36==t?(n=a[l?"secArr":"ltPropValue"][this._idx].value-a.ltPropMin,s=-1):a.ltPropAria&&35==t&&(n=a.ltPropMax-a[l?"secArr":"ltPropValue"][this._idx].value):n=a.ltPropScaleInterval+(l?0:Math.min(a.ltPropMin,a.ltPropMax)),this.mousemove(e,s*(this.getLeft(p,this._bcr[i],n,a.ltPropMax,a.ltPropMin)+this._bcr[i]/2)),this.callBack.call(this,this._idx,e),delete this._bcr,delete this._idx,delete this._sel,e.preventDefault()}}},focus:function(e,t){var o=this.$node.querySelector(".lyteSliderHandler.lyteMultiSliderSelected");o!=e&&(o&&o.classList.remove("lyteMultiSliderSelected"),e.classList.add("lyteMultiSliderSelected"))}}}),Lyte.Component.register("lyte-wormhole",{_template:'<template tag-name="lyte-wormhole"> <lyte-yield yield-name="lyte-content"></lyte-yield> </template>',_dynamicNodes:[{type:"insertYield",position:[1]}],_observedAttributes:["ltPropQuery"],data:function(){return{ltPropQuery:Lyte.attr("string")}},didConnectFunc:function(){var e=this.data.ltPropQuery?document.querySelector(this.data.ltPropQuery):document.body;e?this.getMethods("onBeforeAppend")&&0==this.executeMethod("onBeforeAppend",this.$node,e)||(_lyteUiUtils.appendChild(e,this.$node),this.appended=!0,this.getMethods("onAppend")&&this.executeMethod("onAppend",this.$node,e)):console.error("Provide valid outlet to append")}.observes("ltPropQuery").on("didConnect")}),Lyte.Component.register("lyte-menu",{_template:'<template tag-name="lyte-menu"> <lyte-menu-box class="{{ltPropWrapperClass}}" onmousemove="{{action(\'mousemove\',event,this)}}"> <template is="if" value="{{ltPropBindToBody}}"><template case="true"> <template is="if" value="{{expHandlers(ltPropYield,\'==\',false)}}"><template case="true"> <lyte-menu-body id="{{ltPropId}}" class="{{ltPropClass}}" tabindex="1"> <template is="for" items="{{ltPropContent}}" item="menu" index="indexVal"><template is="if" value="{{lyteUiOptGroupCheck(menu)}}"><template case="true"> <lyte-menu-group elemorder="{{indexVal}}"> <template is="if" value="{{lyteUiReturnOnlyKey(menu)}}"><template case="true"> <lyte-menu-header> {{lyteUiReturnOnlyKey(menu)}} </lyte-menu-header> </template></template> <template is="for" items="{{lyteUiReturnOnlyValue(menu)}}" item="menu1" index="indexVal1"><template is="if" value="{{expHandlers(lyteUiIsObject(menu1),\'==\',false)}}"><template case="true"> <lyte-menu-item grporder="{{indexVal}}" elemorder="{{indexVal1}}" data-value="{{menu1}}"> <lyte-menu-label>{{menu1}}</lyte-menu-label> </lyte-menu-item> </template><template case="false"> <lyte-menu-item grporder="{{indexVal}}" elemorder="{{indexVal1}}" id="{{menu1.id}}" class="{{menu1.class}}" data-value="{{menu1[ltPropSystemValue]}}"> <lyte-menu-label>{{menu1[ltPropUserValue]}}</lyte-menu-label> <template is="if" value="{{menu1[ltPropDescription]}}"><template case="true"> <lyte-menu-description> {{menu1[ltPropDescription]}}</lyte-menu-description> </template></template> </lyte-menu-item> </template></template></template> </lyte-menu-group> </template><template case="false"><template is="if" value="{{expHandlers(lyteUiIsObject(menu),\'==\',false)}}"><template case="true"> <lyte-menu-item elemorder="{{indexVal}}" data-value="{{menu}}"> <lyte-menu-label>{{menu}}</lyte-menu-label> </lyte-menu-item> </template><template case="false"> <lyte-menu-item elemorder="{{indexVal}}" id="{{menu.id}}" class="{{menu.class}}" data-value="{{menu[ltPropSystemValue]}}"> <lyte-menu-label>{{menu[ltPropUserValue]}}</lyte-menu-label> <template is="if" value="{{menu[ltPropDescription]}}"><template case="true"> <lyte-menu-description> {{menu[ltPropDescription]}}</lyte-menu-description> </template></template> </lyte-menu-item> </template></template></template></template></template> </lyte-menu-body> </template><template case="false"> <lyte-yield yield-name="yield"></lyte-yield> </template></template> </template></template> </lyte-menu-box> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"insertYield",position:[1]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1]}],_observedAttributes:["ltPropContent","ltPropId","ltPropClass","ltPropQuery","ltPropEvent","ltPropYield","ltPropUserValue","ltPropSystemValue","ltPropCallout","ltPropPosition","ltPropDescription","ltPropTabIndex","ltPropFreeze","ltPropShow","ltPropWidth","ltPropHeight","ltPropQueryClass","ltPropBoundary","ltPropScope","ltPropPreventInsideClick","ltPropAnimate","ltPropSetCss","ltPropWrapperClass","ltPropWrapperId","ltPropBindToBody","ltPropAria","ltPropAriaAttributes","ltPropOffset","ltPropHeightResetOnScroll","eventListeners","pos","parIndex","lyteUnbound"],init:function(){var e=this.getData("ltPropEvent"),t=this.checkElementForMenu.bind(this);if(this.setData("eventListeners.event",t),this._close=this.closing.bind(this),this._trsend=this.tranEnd.bind(this),this._hoverclose=this.hoverClose.bind(this),document.addEventListener(/^(mouseenter|mousemove|mouseover|hover)$/.test(e)?"mousemove":e,t,!0),!document.getElementsByClassName("lytemenufreezelayer")[0]&&this.getData("ltPropFreeze")){this.appendFreeze.call(this,"lytemenufreezelayer left lyteMenuHidden"),this.appendFreeze.call(this,"lytemenufreezelayer top lyteMenuHidden"),this.appendFreeze.call(this,"lytemenufreezelayer bottom lyteMenuHidden"),this.appendFreeze.call(this,"lytemenufreezelayer right lyteMenuHidden");var o=this.appendFreeze.call(this,"lytemenufreezelayer nogroup lyteMenuHidden");o.addEventListener("wheel",this.preventEvent),o.addEventListener("touchmove",this.preventEvent)}document.hasOwnProperty("_lyteMenu")||(document.documentElement.addEventListener("click",lyteCloseMenu,!0),document.documentElement.addEventListener("keydown",this.keydownCheck,!0),document.documentElement.addEventListener("keypress",menukeypress,!0),window.addEventListener("orientationchange",this.resizeFunc,!0),window.addEventListener("resize",this.resizeFunc,!0),document._lyteMenu={},document._lyteMenu.eventFlag=!0),this.getMethods("beforeRender")&&this.executeMethod("beforeRender",this.$node)},rtlfunc:function(e,t,o){if(this._dir){if(t)return"right"==e?o-t.left:o-t.right;if("left"==e)return"right"}return t?t[e]:"left"},actions:{mousemove:function(e,t){for(var o=e.target;o&&"BODY"!=o.tagName&&"LYTE-MENU-ITEM"!=o.tagName;)o=o.parentNode;if(o&&"LYTE-MENU-ITEM"==o.tagName){var a=t.querySelector(".lyteMenuSelection");if(a==o)return;a?(a.classList.remove("lyteMenuSelection"),o.classList.add("lyteMenuSelection")):a||o.classList.add("lyteMenuSelection")}}},arrayFrom:function(e){for(var t=[],o=0;o<e.length;o++)t.push(e[o]);return t.slice()},appendFreeze:function(e){var t=document.createElement("div");return t.setAttribute("class",e),document.body.appendChild(t)},resizeFunc:function(e){e&&"resize"==e.type&&_lyteUiUtils.isMobile||(clearTimeout(this._resizeTimeout),this._resizeTimeout=setTimeout(function(){for(var t=document.getElementsByTagName("lyte-menu"),o=0;o<t.length;o++){var a=t[o],r=a.component;a.classList.contains("lyteMenuClosed")||(r.hasOwnProperty("parentMenu")||(r.callScrollFunc(e),r.getData("ltPropFreeze")&&!r.parentMenu&&setTimeout(r.setZIndex.bind(r),100)))}}.bind(this),e&&"orientationchange"==e.type?500:16))},keydownCheck:function(e){var t=e.which||e.keyCode;if(27==t)lyteCloseMenu(e,void 0,!0);else if(/^(38|40|13|36|35)$/.test(t))for(var o=document.getElementsByTagName("lyte-menu"),a=0;a<o.length;a++){if(!o[a].classList.contains("lyteMenuClosed")&&null!=o[a].getAttribute("lyte-rendered"))if(!(r=o[a].component).childMenu){r.traverseList.call(r,e),(/^(38|40)$/.test(t)||r.data.ltPropAria&&/^(35|36)$/.test(t))&&e.preventDefault();break}}else if(/^(37|39)$/.test(t))for(o=document.getElementsByTagName("lyte-menu"),a=0;a<o.length;a++){if(!o[a].classList.contains("lyteMenuClosed")&&null!=o[a].getAttribute("lyte-rendered"))if((r=o[a].component).parentMenu&&!r.childMenu&&r.data.ltPropAria){$L(".lyteMenuSelection",r.childComp).length?((/right/i.test(r.data.pos)&&37==t||/left/i.test(r.data.pos)&&39==t)&&r.$node.ltProp("show",!1),e.preventDefault()):r.scrIntoView($L("lyte-menu-item:not(.lyteMenuSelection)",r.childComp).eq(0).addClass("lyteMenuSelection").get(0));break}}else if(32==t)for(o=document.getElementsByTagName("lyte-menu"),a=0;a<o.length;a++)if(!o[a].classList.contains("lyteMenuClosed")&&null!=o[a].getAttribute("lyte-rendered")){(r=o[a]).component.childComp;var r,i=e.target,s=r.component;if(s.eligibleForClose(s,i))break;if(r.ltProp("freeze")){e.preventDefault();break}}},searchFilter:function(e){if(this._typed="",e){for(var t=this.childComp.getElementsByTagName("lyte-menu-item"),o={},a=0;a<t.length;a++){var r=t[a].textContent.trim().toLowerCase().indexOf(e);-1!=r&&(r<o.index||null==o.index)&&(o.item=t[a],o.index=r)}if(o.item){var i=this.childComp.getElementsByClassName("lyteMenuSelection")[0];if(o.item==i)return;i&&i.classList.remove("lyteMenuSelection"),o.item.classList.add("lyteMenuSelection"),this.scrIntoView.call(this,o.item)}}},scrIntoView:function(e){e&&$L.fastdom.measure(function(){var t=e.getBoundingClientRect(),o=this.findscrElem.call(this,e),a=o.getBoundingClientRect();$L.fastdom.mutate(function(){t.bottom>a.bottom?o.scrollTop+=parseInt(t.bottom-a.bottom):t.top<a.top&&(o.scrollTop+=parseInt(t.top-a.top))}.bind(this))}.bind(this))},findscrElem:function(e){for(var t=e.parentNode;t&&"LYTE-MENU-BODY"!=t.nodeName;){var o=window.getComputedStyle(t).getPropertyValue("overflow-y");if(t.scrollHeight>t.offsetHeight&&("auto"==o||"scroll"==o))break;t=t.parentNode}return t},didDestroy:function(){if(this.childComp){for(var e=this.childComp.getElementsByTagName("lyte-menu-item"),t=0;t<e.length;t++){e[t].getAttribute("lyte-shortcut")&&e[t].setAttribute("lyte-shortcut",JSON.stringify({}))}this.childComp.parentElement&&this.childComp.parentElement.removeChild(this.childComp),delete this.childComp.parent,delete this.childComp}var o=this.getData("eventListeners"),a=this.getData("ltPropEvent");if(0==document.body.querySelectorAll("lyte-menu").length){var r=document.body.querySelectorAll("div.lytemenufreezelayer");for(t=0;t<r.length;t++)document.body.removeChild(r[t]);document._lyteMenu&&(delete document._lyteMenu,document.documentElement.removeEventListener("keydown",this.keydownCheck,!0),document.documentElement.removeEventListener("keypress",menukeypress,!0),document.documentElement.removeEventListener("click",lyteCloseMenu,!0),window.removeEventListener("resize",this.resizeFunc,!0),window.removeEventListener("orientationchange",this.resizeFunc,!0))}else this.data.ltPropShow&&this.data.ltPropFreeze&&(document.body.classList.remove("lyteBodyWrapper"),document.menu==this&&delete document.menu,this.removeFreeze());window.removeEventListener("scroll",this.addScrollPos,!0);var i,s=this.getData("ltPropQuery"),l=this.getData("parIndex");if((s||null!=l)&&(s&&(i=document.querySelectorAll(s)),document.removeEventListener(/^(mouseenter|mousemove|mouseover|hover)$/.test(a)?"mousemove":a,o.event,!0),s))for(t=0;t<i.length;t++)delete i[t].menu;clearTimeout(this._typetime),this.menuBody&&(delete this.menuBody.parent,delete this.menuBody),document.menu==this&&delete document.menu},closestFind:function(e,t){for(var o=this.getData("parIndex"),a=this.arrayFrom.call(this,null!=o?this.$node.parentNode.parentNode.querySelectorAll("lyte-menu-item:nth-of-type("+ ++o+")"):document.querySelectorAll(t.trim())),r=0;r<e.length;r++)if(-1!=Array.prototype.indexOf.call(a,e[r]))return e[r];return null},isHoverAnimate:function(){return this.data.ltPropAnimate&&/^(mouseenter|mousemove|mouseover|hover)$/.test(this.data.ltPropEvent)},checkElementForMenu:function(e){if(!e.menuFlag){var t=this.getData("ltPropQuery"),o=this.closestFind.call(this,e.path?e.path:this.composePath.call(this,e),t);if(null!=o){var a=this.isHoverAnimate();if(!a&&this._evtadded)return void(this.data.ltPropAnimate&&0==parseInt(this.menuBody.style.height)&&this.setData("ltPropShow",!1));"contextmenu"==e.type&&(e.preventDefault(),lyteCloseMenu(e,this.$node));var r=!this.childComp.classList.contains("lyteMenuHidden");if(r&&this.$node.element!=o){if(!a){this.childComp.classList.remove("lyteAnimate"),this._hideStarts=!0,this._closest=o,this._event=e;var i=new Promise(function(t,o){this._promResolve=t,this._promReject=o,this.hideMenu.call(this,!0,e)}.bind(this));return void Promise.resolve(i).then(function(){this.openingMenu(this._closest,this._event),delete this._closest,delete this._event,delete this._promReject,delete this._promResolve}.bind(this),function(){delete this._closest,delete this._event,delete this._promReject,delete this._promResolve}.bind(this))}this._openstart&&this.tranEnd(),this.data.ltPropAnimate=!1,this._hideStarts?(clearTimeout(this._time3),this.closing(!0,e)):this.hideMenu(!0,e),this.data.ltPropAnimate=!0}else if(r&&this.$node.element==o){if(!a)return;if(this._openstart)return}this.openingMenu(o,e)}else"contextmenu"==e.type&&lyteCloseMenu(e,void 0,!0)}},openingMenu:function(e,t){"LYTE-MENU-ITEM"==e.tagName&&"click"==t.type&&t.stopPropagation(),t.menuFlag=!0,this.$node.element=e,e.menu=this.$node,this.parentMenu||("contextmenu"!=t.type?this._open_fast=$L.fastdom.mutate(this.$node.toggle.bind(this.$node,t)):this.$node.toggle(t||{}))},didConnect:function(){var e=this.$node.getElementsByTagName("lyte-menu-box")[0];this.$node.toggle=function(e,t){delete this._open_fast,this.childComp.classList.contains("lyteMenuHidden")||t?(["mousedown","mouseup"].indexOf(e.type)>-1&&(document._lyteMenu.preventClick=!1),this.openMenu.call(this,e)):this.childMenu||-1!=e.type.indexOf("mouse")||this._hideStarts||this.hideMenu.call(this,!0,e)}.bind(this),this.$node.setCss=this.setCss.bind(this),e.parent=this.$node,this.childComp=e,e.classList.add("lyteMenuHidden"),this.$node.classList.add("lyteMenuClosed"),e.style.width=this.getData("ltPropWidth"),this.data.ltPropCallout&&/^(mouseenter|mousemove|mouseover|hover)$/.test(this.data.ltPropEvent)&&this.childComp.classList.add("lyteHoverMenu"),this.getMethods("afterRender")&&this.executeMethod("afterRender",this.$node),$L.fastdom.measure(function(){this._dir=_lyteUiUtils.getRTL()}.bind(this))},bToBody:function(){if(this.data.ltPropBindToBody&&this.childComp.parentNode!=document.body){var e=this.childComp.querySelector("lyte-menu-body");e.addEventListener("click",this.optionSelect.bind(this)),e.parent=this.$node,this.menuBody=e;var t=document.createElement("span");t.setAttribute("class","lyteArrow"+(this.data.ltPropCallout?"":" lyteMenuHidden")),e.insertBefore(t,e.children[0]),this.menuBody.style.height=this.data.ltPropHeight,this._dir&&this.menuBody.classList.add("lyteRTL"),_lyteUiUtils.appendChild(document.body,this.childComp)}else this.data.ltPropBindToBody||(this.$node.ltProp("show",!1),this.menuBody&&(delete this.menuBody.parent,delete this.menuBody))}.observes("ltPropBindToBody").on("didConnect"),calloutObs:function(e){var t=this.childComp.querySelector("span.lyteArrow");e.newValue?t.classList.remove("lyteMenuHidden"):t.classList.add("lyteMenuHidden")}.observes("ltPropCallout"),data:function(){return{ltPropContent:Lyte.attr("array",{default:[]}),ltPropId:Lyte.attr("string",{default:""}),ltPropClass:Lyte.attr("string",{default:""}),ltPropQuery:Lyte.attr("string",{default:""}),ltPropEvent:Lyte.attr("string",{default:"click"}),ltPropYield:Lyte.attr("boolean",{default:!1}),ltPropUserValue:Lyte.attr("string",{default:""}),ltPropSystemValue:Lyte.attr("string",{default:""}),ltPropCallout:Lyte.attr("boolean",{default:!1}),ltPropPosition:Lyte.attr("string",{default:"down"}),ltPropDescription:Lyte.attr("string",{default:""}),ltPropTabIndex:Lyte.attr("number",{default:0}),ltPropFreeze:Lyte.attr("boolean",{default:!0}),ltPropShow:Lyte.attr("boolean",{default:!1}),ltPropWidth:Lyte.attr("string",{default:"auto"}),ltPropHeight:Lyte.attr("string",{default:"auto"}),ltPropQueryClass:Lyte.attr("string",{default:"lyteMenuSelected"}),ltPropBoundary:Lyte.attr("object",{default:{}}),ltPropScope:Lyte.attr("string",{default:""}),ltPropPreventInsideClick:Lyte.attr("boolean",{default:!1}),ltPropAnimate:Lyte.attr("boolean",{default:!1}),ltPropSetCss:Lyte.attr("boolean",{default:!0}),ltPropWrapperClass:Lyte.attr("string",{default:""}),ltPropWrapperId:Lyte.attr("string",{default:""}),ltPropBindToBody:Lyte.attr("boolean",{default:!0}),ltPropAria:Lyte.attr("boolean",{default:!1}),ltPropAriaAttributes:Lyte.attr("object",{default:{role:"menu"}}),ltPropOffset:Lyte.attr("object",{default:{}}),ltPropHeightResetOnScroll:Lyte.attr("boolean",{default:!0}),eventListeners:Lyte.attr("object",{default:{}}),pos:Lyte.attr("string",{default:""}),parIndex:Lyte.attr("number"),lyteUnbound:Lyte.attr("boolean",{default:!1})}},firePosCallBack:function(){this.getMethods("onPositionChanged")&&this.executeMethod("onPositionChanged",this.getData("pos"),this.$node)}.observes("pos"),contentChangeObs:function(){this.contentChange.call(this)}.observes("ltPropContent.[]"),contentChange:function(){this.childComp.classList.contains("lyteMenuHidden")||(this.setCss.call(this),this.menuBody.style.removeProperty("height"))},setContextCss:function(e,t){var o=this.$node.element,a=this.childComp;$L.fastdom.measure(function(){var r=e,i=o.getBoundingClientRect();e||(e={clientX:i.left+i.width/2,clientY:i.top+i.height/2});var s=a.getBoundingClientRect(),l=this.menuBody.getBoundingClientRect(),n=window.getComputedStyle(this.menuBody),p="content-box"==n.boxSizing?parseFloat(n.paddingTop)+parseFloat(n.paddingBottom):0,c=l.height-p,d=window.innerHeight,u=window.innerWidth,h=this.data.ltPropOffset||{},m=h.top||0,y=h.bottom||0,f=h.left||0,g=h.right||0,v=(window.pageXOffset||document.documentElement.scrollLeft)*(this._dir?-1:1),x=window.pageYOffset||document.documentElement.scrollTop,P=this.rtlfunc.call(this,"left"),b=null!=this.__cX?this.__cX+this.rtlfunc("left",i,u):this._dir?u-e.clientX:e.clientX,D=null!=this.__cY?this.__cY+i.top:e.clientY;switch(t||(t=this.data.ltPropPosition),t){case"up":a.style[P]=b+v+"px",a.style.top=D>d-D?D+x+"px":D-s.height+x+"px",this.setData("pos","up");break;default:a.style[P]=b+v+"px",a.style.top=D<d-D?D+x+"px":D-s.height+x+"px",this.setData("pos","down")}s.left<f?a.style[P]=b+f+"px":this.rtlfunc.call(this,"right",s,u)>u-g&&(a.style[P]=b-s.width+"px"),r&&(parseFloat(a.style.top)-x+c>d-y&&D<=d&&(this.menuBody.style.height=d-y-parseFloat(a.style.top)+x+"px",c=parseFloat(this.menuBody.style.height)),parseFloat(a.style.top)-x<m&&D>=m&&(this.menuBody.style.height=parseFloat(a.style.top)-x-m+c+"px",a.style.top=x+m+"px",c=parseFloat(this.menuBody.style.height)),this._hgt=c,null==this.__cX&&(this.__cX=b-this.rtlfunc("left",i,u)),null==this.__cY&&(this.__cY=D-i.top))}.bind(this))},openMenu:function(e,t){var o,a,r=this.getData("ltPropEvent");if(e=e||{},t||(a=this.targetElem.call(this,e.target))[0]&&(a[0].originMenu=a[1].component),t&&"contextmenu"!=r){if(!this.$node.element){var i=this.getData("ltPropQuery");this.$node.element=document.body.querySelector(i.trim())}"LYTE-MENU-ITEM"==this.$node.element.tagName?a=this.targetElem.call(this,this.$node.element):a||(a=[])}this.getMethods("onBeforeOpen")&&(o=this.executeMethod("onBeforeOpen",this.$node,e,this.$node.element)),a&&a[0]&&"LYTE-MENU"==a[1].tagName&&(a[1].ltProp("show")||(o=!1)),0!=o&&this.$node.element?(this.data.ltPropBindToBody||this.$node.ltProp("bindToBody",!0),this.childComp.scrollTop=0,this.childComp.classList.remove("lyteMenuHidden","lyteAnimate"),this.$node.classList.remove("lyteMenuClosed"),this.$node.element&&this.$node.element.setAttribute("aria-expanded","true"),this.childComp.style.display="block",this.getData("ltPropHeight")?this.menuBody.style.height=this.getData("ltPropHeight"):this.menuBody.style.removeProperty("height"),a[0]&&"LYTE-MENU"==a[1].tagName&&(a[1].component.childMenu=this,this.parentMenu=a[1].component,a[1].component.childComp.addEventListener("mousemove",this.mouseleave)),this.parentMenu||this.$node.element.classList.add(this.getData("ltPropQueryClass")),this.parentMenu||"LYTE-MENU-ITEM"==this.$node.element.tagName||lyteCloseMenu(e,this.$node),this.getData("ltPropFreeze")&&!this.parentMenu?this.setZIndex.call(this):document.menu||(window.addEventListener("scroll",this.addScrollPos,!0),document.menu=this),!/^(mouseenter|mousemove|mouseover|hover)$/.test(r)||this.childMenu||this.parentMenu||a[0]||document.addEventListener("mousemove",this._hoverclose),this._openFastdom=$L.fastdom.measure(function(){this.menuBody.getBoundingClientRect(),window.innerHeight,window.pageYOffset||document.documentElement.scrollTop;this._dontCall=!0,this.$node.ltProp("show",!0),delete this._dontCall,delete this._openFastdom,"contextmenu"==this.getData("ltPropEvent")?this.setContextCss.call(this,e):this.setCss.call(this),"contextmenu"!=e.type&&this.getData("ltPropAnimate")&&0!=this._hgt&&(this._openstart=!0,this.menuBody.style.height=0,-1!=["up","upLeft","upRight"].indexOf(this.getData("pos"))&&(this.childComp.style.top=parseInt(this.childComp.style.top)+this._hgt+"px"),this._time1=setTimeout(this.animeClassAdd.bind(this),20)),this.getMethods("onOpen")&&this.executeMethod("onOpen",this.$node,e,this.$node.element)}.bind(this))):(this._dontCall=!0,delete this.$node.element,this.setData("ltPropShow",!1),delete this._dontCall,this._promReject&&this._promReject())},animeClassAdd:function(){this.childComp.classList.add("lyteAnimate"),this._time2=setTimeout(this.heightSet.bind(this),20)},heightSet:function(){var e=window.getComputedStyle(this.menuBody);this._transdur=Math.max(400,this.returntran(e.transitionDuration)+this.returntran(e.transitionDelay)+20),this._evtadded=!0,this.childComp.addEventListener("transitionend",this._trsend),-1!=["up","upLeft","upRight"].indexOf(this.getData("pos"))&&(this.childComp.style.top=parseInt(this.childComp.style.top)-this._hgt+"px"),this.menuBody.style.height=this._hgt+"px"},tranEnd:function(e){this.childComp.removeEventListener("transitionend",this._trsend),this.childComp.classList.remove("lyteAnimate"),clearTimeout(this._time2),clearTimeout(this._time1),this.clearFastdom(),this._dont_modify&&(this.menuBody.style.height="",delete this._dont_modify),delete this._openstart},clearFastdom:function(){$L.fastdom.clear(this._openFastdom),$L.fastdom.clear(this._open_fast),delete this._open_fast,delete this._openFastdom},composePath:function(e){for(var t=[],o=e.target;o&&"HTML"!=o.tagName;)t.push(o),o=o.parentNode;return t},elementsFromPointCal:function(e,t){for(var o=[],a=document.elementFromPoint(e,t);a!=document&&a!=document.documentElement&&a!=document.body&&"LYTE-MENU-BODY"!=a.tagName&&(a._pe=a.style.pointerEvents,a.style.pointerEvents="none",o.push(a),a!=(a=document.elementFromPoint(e,t))););for(var r=0;r<o.length;r++)o[r].style.pointerEvents=o[r]._pe,delete o[r]._pe;return o},eligibleForClose:function(e,t){return!!t&&(!(!e.childComp||!e.childComp.contains(t))||!!e.childMenu&&this.eligibleForClose(e.childMenu,t))},hoverClose:function(e){if(this.$node){var t=document.elementsFromPoint?document.elementsFromPoint(e.clientX,e.clientY):this.elementsFromPointCal(e.clientX,e.clientY);-1!=t.indexOf(this.$node.element)||-1!=t.indexOf(this.childComp)||this.eligibleForClose(this,t[0])||this.hideMenu(!0,e)}},mouseleave:function(e){var t=this.parent.component,o=t.targetElem.call(t,e.target);t.childMenu&&o[1]==t.$node&&o[0]!=t.childMenu.$node.element&&o[0]&&(this.removeEventListener("mousemove",t.childMenu.mouseleave),t.childMenu.hideMenu.call(t.childMenu,!0,e))},hideToggle:function(e){this._dontCall||(0==e.newValue?this.hideMenu(!0,{}):this.openMenu({},!0))}.observes("ltPropShow"),hideMenu:function(e,t,o){var a;if(this.tranEnd(),this.childMenu){if(this.childMenu.childComp.contains(t.target)&&!o)return;if(!this.childMenu.hideMenu.call(this.childMenu,e,t,o))return}if(this.getMethods("onBeforeClose")&&(a=this.executeMethod("onBeforeClose",this.$node,t)),0!=a)return this.clearFastdom(),delete this.__cX,delete this.__cY,this.parentMenu?(delete this.parentMenu.childMenu,delete this.parentMenu):(delete document.menu,window.removeEventListener("scroll",this.addScrollPos,!0)),this._arguments=arguments,-1!=/^(mouseenter|mousemove|mouseover|hover)$/.test(this.data.ltPropEvent)&&document.removeEventListener("mousemove",this._hoverclose),this._hideStarts=!0,this.menuBody&&this.data.ltPropAnimate&&"contextmenu"!=this.data.ltPropEvent&&this._hgt?(this.menuBody.style.height=this._hgt+"px",this.childComp.classList.add("lyteAnimate"),this._time3=setTimeout(function(){"0px"!=this.menuBody.style.height?(this.menuBody.style.height=0,-1!=["up","upLeft","upRight"].indexOf(this.getData("pos"))&&(this.childComp.style.top=parseInt(this.childComp.style.top)+this._hgt+"px"),this.menuBody.removeEventListener("transitionend",this._close),this.menuBody.addEventListener("transitionend",this._close),this._hidetimeout=setTimeout(this.closing.bind(this,e,t),this._transdur)):this.closing(e,t)}.bind(this),20)):(delete this._arguments,this.closing(e,t)),!0;this._dontCall=!0,this.setData("ltPropShow",!0),delete this._dontCall,delete this._hideStarts,this._promReject&&this._promReject()},closing:function(){var e,t;this._arguments?(e=this._arguments[0],t=this._arguments[1],this.menuBody.style.height=this._hgt+"px",delete this._hgt,delete this._arguments):(e=arguments[0],t=arguments[1]),this.menuBody&&this.menuBody.removeEventListener("transitionend",this._close),this.childComp.classList.add("lyteMenuHidden"),delete this._hideStarts,this.$node.classList.add("lyteMenuClosed"),this.getData("ltPropFreeze")&&!this.parentMenu&&this.setZIndex.call(this,e),this._dontCall=!0,this.$node.ltProp("show",!1),this.$node.element&&(this.$node.element.removeAttribute("aria-expanded"),this.$node.element.classList.remove(this.getData("ltPropQueryClass"))),delete this._dontCall,delete this.$node.element,delete this._evtadded,this.childComp.classList.remove("lyteAnimate"),this.childComp.style.left="",this.childComp.style.top="";var o=this.childComp.querySelector(".lyteMenuSelection");o&&o.classList.remove("lyteMenuSelection"),clearTimeout(this._hidetimeout),delete this._hidetimeout,$L.fastdom.measure(function(){this.getMethods("onClose")&&this.executeMethod("onClose",this.$node,t),this._promResolve&&$L.fastdom.mutate(this._promResolve.bind(this)),this.clearFastdom()}.bind(this))},targetElem:function(e){var t;for(e=e.correspondingElement||e;e&&"LYTE-MENU-BODY"!=e.tagName&&"BODY"!=e.tagName;)"LYTE-MENU-ITEM"==e.tagName&&(t=e),e=e.parentNode;return[t,e?e.parent:null]},optionSelect:function(e){var t,o=this.targetElem.call(this,e.target)[0];if((1==e.ctrlKey||1==e.metaKey||2==e.which)&&null!=e.target.href&&-1!=e.target.href.indexOf("javascript:")&&"_blank"==e.target.target)return!1;if(this.getMethods("onMenuClick")&&o){var a;if(this.getData("ltPropYield"))a=o.getAttribute("data-value");else{var r=this.getData("ltPropContent");if(o.hasAttribute("grporder")){var i=r[parseInt(o.getAttribute("grporder"))];a=i[Object.keys(i)[0]][parseInt(o.getAttribute("elemorder"))]}else a=r[parseInt(o.getAttribute("elemorder"))]}t=this.executeMethod("onMenuClick",a,e,this.$node,this.$node.element,{element:o,submenu:!!o.originMenu})}this.childMenu&&!t&&e.stopPropagation(),(o||!o&&this.getData("ltPropPreventInsideClick"))&&lyteCloseMenu(e,void 0,!0)},setLeftExceedForDown:function(e,t,o,a,r,i){var s=o;return r+this.rtlfunc.call(this,"left",s,i)+s.width-a.width},setLeftNotExceedForDown:function(e,t,o,a){var r=t;return o+this.rtlfunc.call(this,"left",r,a)},setTopAboveForDown:function(e,t,o,a,r){return r+o.top-a.height},setTopBelowForDown:function(e,t,o){var a=t;return o+a.top+a.height},setLeftForRight:function(e,t,o,a){var r=t;return o+this.rtlfunc.call(this,"left",r,a)+r.width},setRightForRight:function(e,t,o,a,r,i){var s=o,l=a;return r+this.rtlfunc.call(this,"left",s,i)-l.width},setTopForRight:function(e,t,o){return o+t.top},setTopForRightAbove:function(e,t,o,a,r){var i=o;return r+i.top+i.height-a.height},setCorrectClass:function(e){for(var t=this.childComp.querySelector(".lyteArrow"),o=t.classList,a=0;a<o.length;a++)"lyteArrow"!=o[a]&&o[a]!=e&&(t.classList.remove(o[a]),a--);t.classList.add(e)},setCss:function(e){var t=this.childComp;if(t&&!t.classList.contains("lyteMenuHidden")&&this.getData("ltPropSetCss")){var o,a,r,i=this.getData("ltPropCallout"),s=t,l=this.$node.element,n=window.innerWidth,p=this.getData("ltPropScope");if(p){var c={target:l},d=this.closestFind.call(this,this.composePath.call(this,c),p);if(d){var u=d.getBoundingClientRect();a=this.rtlfunc.call(this,"left",u,n)<0?0:this.rtlfunc.call(this,"left",u,n),o=n>this.rtlfunc.call(this,"right",u,n)?this.rtlfunc.call(this,"right",u,n):n,r=!0}}r||(o=n,a=0);var h,m,y,f,g=window.innerHeight,v=0,x=s.getBoundingClientRect(),P=this.menuBody.getBoundingClientRect(),b=window.getComputedStyle(this.menuBody),D="content-box"==b.boxSizing?parseFloat(b.paddingTop)+parseFloat(b.borderTopWidth)+parseFloat(b.borderBottomWidth)+parseFloat(b.paddingBottom):0,L=P.height-D,C=(window.pageXOffset||document.documentElement.scrollLeft)*(this._dir?-1:1),_=window.pageYOffset||document.documentElement.scrollTop,S=s.offsetHeight,w=s.offsetWidth,T=t.querySelector(".lyteArrow"),E=this.getData("ltPropPosition"),A=l.getBoundingClientRect(),M=T?T.getBoundingClientRect():{width:0,height:0},N=M.height/2,k=M.width/2,F=this.data.ltPropOffset||{};F.left&&(a+=F.left),F.top&&(v+=F.top),F.right&&(o-=F.right),F.bottom&&(g-=F.bottom);var I,R,O,$,B,q,V=this.rtlfunc.call(this,"left",A,n),U=this.rtlfunc.call(this,"left");if(T&&(T.style.removeProperty("left"),T.style.removeProperty("top"),T.style.removeProperty("bottom"),T.style.removeProperty("right")),"down"===E)h=!0,(R=A.top+A.height)+S>g&&(h=g-A.top>A.bottom-v),m=!0,(O=V)+w>o&&O>O+A.width-s.offsetWidth?m=!1:V+w<=o&&(m=!0),A.width>w&&T&&(T.style[U]=(w/2-0)/w*100+"%"),h?(B="down",i?(this.setCorrectClass("lyteArrowTop"),I=this.setTopBelowForDown(l,A,_)+N+"px"):s.style.top=this.setTopBelowForDown(l,A,_)+"px"):(B="up",i?(this.setCorrectClass("lyteArrowBottom"),I=this.setTopAboveForDown(l,s,A,x,_)-N+"px"):s.style.top=this.setTopAboveForDown(l,s,A,x,_)+"px"),m?(i&&(q=Math.max(Math.min(A.width,w)/2-k,k/2)/($=w/100),T.style[U]=q+"%"),s.style.top=I||s.style.top,s.style[U]=this.setLeftNotExceedForDown(l,A,C,n)+"px"):(i&&($=w/100,q=(w-Math.min(A.width,w)/2-k)/$,T.style[U]=q+"%"),s.style.top=I||s.style.top,s.style[U]=this.setLeftExceedForDown(l,s,A,x,C,n)+"px");else if("right"===E)m=!0,m=!(V+A.width+w>o&&V-x.width>a),h=!0,A.top+x.height>g&&(h=g-A.top>A.bottom-v),m?(B="right",i?(this.setCorrectClass("lyteArrowLeft"),I=this.setLeftForRight(l,A,C,n)+k+"px"):s.style[U]=this.setLeftForRight(l,A,C,n)+"px"):(B="left",i?(this.setCorrectClass("lyteArrowRight"),I=this.setRightForRight(l,s,A,x,C,n)-k+"px"):s.style[U]=this.setRightForRight(l,s,A,x,C,n)+"px"),h?(i&&(T.style.top=Math.max(A.height/2-N,N/2)+"px"),s.style[U]=I||s.style[U],s.style.top=this.setTopForRight(l,A,_,n)+"px"):(i&&(T.style.bottom=Math.max(A.height/2-N,N/2)+"px"),s.style[U]=I||s.style[U],s.style.top=this.setTopForRightAbove(l,s,A,x,_,n)+"px");else if("up"===E)y=!0,A.top-x.height<v&&(y=g-A.top<A.bottom-v),m=!0,V+w>o&&V>V+A.width-s.offsetWidth?m=!1:V+w<=o&&(m=!0),A.width>w&&T&&(T.style[U]=(w/2-0)/w*100+"%"),y?(B="up",i?(this.setCorrectClass("lyteArrowBottom"),I=this.setTopAboveForDown(l,s,A,x,_)-N+"px"):s.style.top=this.setTopAboveForDown(l,s,A,x,_)+"px"):(B="down",i?(this.setCorrectClass("lyteArrowTop"),I=this.setTopBelowForDown(l,A,_)+N+"px"):s.style.top=this.setTopBelowForDown(l,A,_,n)+"px"),m?(i&&(q=Math.max(Math.min(A.width,w)/2-k,k/2)/($=w/100),T.style[U]=q+"%"),s.style.top=I||s.style.top,s.style[U]=this.setLeftNotExceedForDown(l,A,C,n)+"px"):(i&&($=w/100,q=(w-Math.min(A.width,w)/2-k)/$,T.style[U]=q+"%"),s.style.top=I||s.style.top,s.style[U]=this.setLeftExceedForDown(l,s,A,x,C,n)+"px");else if("left"===E)f=!0,f=!(V-x.width<a&&V+x.width<o),h=!0,A.top+x.height>g&&(h=g-A.top>A.bottom-v),f?(B="left",i?(this.setCorrectClass("lyteArrowRight"),I=this.setRightForRight(l,s,A,x,C,n)-k+"px"):s.style[U]=this.setRightForRight(l,s,A,x,C,n)+"px"):(B="right",i?(this.setCorrectClass("lyteArrowLeft"),I=this.setLeftForRight(l,A,C,n)+k+"px"):s.style[U]=this.setLeftForRight(l,A,C)+"px"),h?(i&&(T.style.top=Math.max(A.height/2-N,N/2)+"px"),s.style[U]=I||s.style[U],s.style.top=this.setTopForRight(l,A,_)+"px"):(i&&(T.style.bottom=Math.max(A.height/2-N,N/2)+"px"),s.style[U]=I||s.style[U],s.style.top=this.setTopForRightAbove(l,s,A,x,_)+"px");else if("downLeft"===E){if(h=!0,(R=A.top+A.height)+S>g&&(h=g-A.top>A.bottom-v),h||(R=A.top-S),m=!1,i&&this.setCorrectClass(h?"lyteArrowTop":"lyteArrowBottom"),(O=Math.max(V+A.width/2-w,V-w+2*N))<a?(O=a,m=!0):m=!1,s.style.top=R+N*(h?1:-1)+_+"px",s.style[U]=O+C+"px",i)H=m?V+.25*A.width-O+"px":Math.min(w-.25*A.width,w-1.5*N-3)+"px",T.style[U]=H;B=h?"downLeft":"upLeft"}else if("downRight"===E){if(h=!0,(R=A.top+A.height)+S>g&&(h=g-A.top>A.bottom-v),h||(R=A.top-S),m=!0,i&&this.setCorrectClass(h?"lyteArrowTop":"lyteArrowBottom"),(O=Math.min(V+A.width/2,V+A.width-2*N))+w>o?(O=o-w,m=!1):m=!0,s.style.top=R+N*(h?1:-1)+_+"px",s.style[U]=O+C+"px",i)H=m?Math.max(.25*A.width,k/2)+"px":V+.25*A.width-O+"px",T.style[U]=H;B=h?"downRight":"upRight"}else if("upLeft"===E){if(h=!1,(R=A.top-S)<v&&(h=g-A.top>A.bottom-v),h&&(R=A.top+A.height),m=!1,i&&this.setCorrectClass(h?"lyteArrowTop":"lyteArrowBottom"),(O=Math.max(V+A.width/2-w,V-w+2*N))<a?(O=a,m=!0):m=!1,s.style.top=R+N*(h?1:-1)+_+"px",s.style[U]=O+C+"px",i)H=m?V+.25*A.width-O+"px":Math.min(w-.25*A.width,w-1.5*N-3)+"px",T.style[U]=H;B=h?"downLeft":"upLeft"}else if("upRight"===E){if(h=!1,(R=A.top-S)<v&&(h=g-A.top>A.bottom-v),h&&(R=A.top+A.height),m=!0,i&&this.setCorrectClass(h?"lyteArrowTop":"lyteArrowBottom"),(O=Math.min(V+A.width/2,V+A.width-2*N))+w>o?(O=o-w,m=!1):m=!0,s.style.top=R+N*(h?1:-1)+_+"px",s.style[U]=O+C+"px",i)H=m?Math.max(.25*A.width,k/2)+"px":V+.25*A.width-O+"px",T.style[U]=H;B=h?"downRight":"upRight"}else if("downAlignLeft"===E){if(h=!0,(R=A.top+A.height)+S>g&&(h=g-A.top>A.bottom-v),h||(R=A.top-S),m=!1,i&&this.setCorrectClass(h?"lyteArrowTop":"lyteArrowBottom"),(O=Math.max(V+A.width-w,V-w+2*N))<a?(O=Math.max(Math.min(V,V+A.width-2*N),a),m=!0):(O=Math.min(o-w,O),m=!1),s.style.top=R+N*(h?1:-1)+_+"px",s.style[U]=O+C+"px",i)H=m?(A.right-O)/2+"px":Math.min((V-O+Math.max(w,A.width))/2,Math.max(w,A.width)-1.5*N-3)+"px",T.style[U]=H;B=h?"downAlignLeft":"upAlignLeft"}else if("downAlignRight"===E){if(h=!0,(R=A.top+A.height)+S>g&&(h=g-A.top>A.bottom-v),h||(R=A.top-S),m=!0,i&&this.setCorrectClass(h?"lyteArrowTop":"lyteArrowBottom"),(O=Math.min(V,V+A.width-2*N))+w>o?(O=Math.min(Math.max(V+A.width-w,V-w+2*N),o-w),m=!1):(O=Math.max(O,0),m=!0),s.style.top=R+N*(h?1:-1)+_+"px",s.style[U]=O+C+"px",i)H=m?Math.max(.5*(Math.min(this.rtlfunc.call(this,"right",A,n)-O,w)-k),k/2)+"px":.5*(-O+w+V)+"px",T.style[U]=H;B=h?"downAlignRight":"upAlignRight"}else if("upAlignLeft"===E){if(h=!1,(R=A.top-S)<v&&(h=g-A.top>A.bottom-v),h&&(R=A.top+A.height),m=!1,i&&this.setCorrectClass(h?"lyteArrowTop":"lyteArrowBottom"),(O=Math.max(V+A.width-w,V-w+2*N))<a?(O=Math.max(Math.min(V,V+A.width-2*N),a),m=!0):(O=Math.min(o-w,O),m=!1),s.style.top=R+N*(h?1:-1)+_+"px",s.style[U]=O+C+"px",i)H=m?(A.right-O)/2+"px":Math.min((V-O+Math.max(w,A.width))/2,Math.max(w,A.width)-1.5*N-3)+"px",T.style[U]=H;B=h?"downAlignLeft":"upAlignLeft"}else if("upAlignRight"===E){var H;if(h=!1,(R=A.top-S)<v&&(h=g-A.top>A.bottom-v),h&&(R=A.top+A.height),m=!0,i&&this.setCorrectClass(h?"lyteArrowTop":"lyteArrowBottom"),(O=Math.min(V,V+A.width-2*N))+w>o?(O=Math.min(Math.max(V+A.width-w,V-w+2*N),o-w),m=!1):(O=Math.max(O,a),m=!0),s.style.top=R+N*(h?1:-1)+_+"px",s.style[U]=O+C+"px",i)H=m?Math.max(.5*(Math.min(this.rtlfunc.call(this,"right",A,n)-O,w)-k),k/2)+"px":.5*(-O+w+V)+"px",T.style[U]=H;B=h?"downAlignRight":"upAlignRight"}parseFloat(s.style.top)-_+L>g&&A.top<=g&&(this.menuBody.style.height=g-parseFloat(s.style.top)+_-D+"px",L=parseFloat(this.menuBody.style.height),this._dont_modify=!0),parseFloat(s.style.top)-_<v&&A.bottom>=v&&(this.menuBody.style.height=parseFloat(s.style.top)-_+L-v+"px",s.style.top=v+_+"px",L=parseFloat(this.menuBody.style.height),this._dont_modify=!0),this._hgt=L,s.classList.contains("lyteHoverMenu")&&($L(s).removeClass("topPlace","bottomPlace","rightPlace","leftPlace"),/up/.test(B)?s.classList.add("topPlace"):/down/.test(B)?s.classList.add("bottomPlace"):/right/.test(B)?s.classList.add("rightPlace"):/left/.test(B)&&s.classList.add("leftPlace")),h?$L(this.childComp).removeClass("lyteMenuUp").addClass("lyteMenuDown"):$L(this.childComp).removeClass("lyteMenuDown").addClass("lyteMenuUp"),this.setData("pos",B)}},returntran:function(e){var t=0;if(/\d+/.test(e||"")){var o=e.match(/(\d+)(s|ms){0,}$/);t=parseFloat(e)*("s"==o[2]?1e3:1)}return t},checkForBoundary:function(e,t){var o=this.getData("ltPropBoundary");(o.hasOwnProperty("left")&&this.rtlfunc.call(this,"left",e,t)<this.rtlfunc.call(this,"left",o,t)||o.hasOwnProperty("right")&&this.rtlfunc.call(this,"right",e,t)>this.rtlfunc.call(this,"right",o,t)||o.hasOwnProperty("top")&&e.top<o.top||o.hasOwnProperty("bottom")&&e.bottom>o.bottom)&&this.hideMenu.call(this)},traverseList:function(e){var t=e.keyCode||e.which;if(!(this.childComp&&this.childComp.classList.contains("lyteMenuHidden")||13!=t&&40!=t&&38!=t&&36!=t&&35!=t)){var o=this.childComp.querySelector(".lyteMenuSelection");if(!o||!o.offsetParent)if(35!=t){var a=this.childComp.querySelector("lyte-menu-item:not(.lyteSearchHidden)");if(a&&a.offsetParent)return void a.classList.add("lyteMenuSelection")}else $L("lyte-menu-item:not(.lyteSearchHidden)",this.childComp).eq(-1).addClass("lyteMenuSelection");for(var r=this.childComp.querySelectorAll("lyte-menu-item:not(.lyteSearchHidden)"),i=0;i<r.length&&(!r[i].offsetParent||!r[i].classList.contains("lyteMenuSelection"));i++);if(r[i])if(13==t)r[i].dispatchEvent(new Event("click",{bubbles:!0})),e.preventDefault();else if(38==t&&0!=i){var s=i;for(i-=1;i>-1&&(r[i].classList.contains("lyteMenuActive")||r[i].classList.contains("lyteMenuFiltered")||!r[i].offsetParent);i--);-1!=i&&(r[s].classList.remove("lyteMenuSelection"),r[i].classList.add("lyteMenuSelection"),this.scrIntoView.call(this,r[i]))}else if(40==t&&i!=r.length-1){s=i;for(i+=1;i<r.length&&(r[i].classList.contains("lyteMenuActive")||r[i].classList.contains("lyteMenuFiltered")||!r[i].offsetParent);i++);i!=r.length&&(r[s].classList.remove("lyteMenuSelection"),r[i].classList.add("lyteMenuSelection"),this.scrIntoView.call(this,r[i]))}else if(36==t&&r.length&&this.data.ltPropAria){if(o==r[0])return;o.classList.remove("lyteMenuSelection"),r[0].classList.add("lyteMenuSelection"),this.scrIntoView.call(this,r[0])}else if(35==t&&r.length&&this.data.ltPropAria){if(o==$L(r).get(-1))return;o.classList.remove("lyteMenuSelection"),$L(r).get(-1).classList.add("lyteMenuSelection"),this.scrIntoView.call(this,$L(r).get(-1))}}},setFreeze:function(e){var t=document.body.querySelectorAll(".lytemenufreezelayer:not(.nogroup)");$L.fastdom.measure(function(){var o=document.body.querySelector(".lytemenufreezelayer.left"),a=e.getBoundingClientRect(),r=window.innerWidth;$L.fastdom.mutate(function(){o.style.height=a.height+"px",o.style.width=Math.max(a.left,0)+"px",o.style.top=a.top+"px",(o=document.body.querySelector(".lytemenufreezelayer.right")).style.height=a.height+"px",o.style.width=Math.max(r-a.right,0)+"px",o.style.top=a.top+"px",(o=document.body.querySelector(".lytemenufreezelayer.top")).style.height=a.top+"px",(o=document.body.querySelector(".lytemenufreezelayer.bottom")).style.height=window.innerHeight-a.bottom+"px";for(var e=0;e<t.length;e++)t[e].classList.remove("lyteMenuHidden"),t[e].addEventListener("wheel",this.preventEvent),t[e].addEventListener("touchmove",this.preventEvent)}.bind(this))}.bind(this))},preventEvent:function(e){if(!(e.metaKey||e.shiftKey||e.ctrlKey)){var t="touchmove"==e.type;if(t&&1!=e.touches.length)return;("wheel"==e.type||t)&&e.stopImmediatePropagation(),e.preventDefault(),e.stopPropagation()}},addScrollPos:function(e){document.menu&&(e.target!=window&&document.menu.childComp.contains(e.target)||document.menu.callScrollFunc(e,!0))},removeFreeze:function(){if(!document.menu||this.data.ltPropAnimate&&this.data.ltPropFreeze){for(var e=document.body.querySelectorAll(".lytemenufreezelayer"),t=0;t<e.length;t++)e[t].classList.add("lyteMenuHidden"),e[t].removeEventListener("wheel",this.preventEvent);document.body.classList.remove("lyteBodyWrapper")}},setZIndex:function(e){var t=this.$node.element;if(t){for(;t&&"HTML"!=t.tagName;){if(t.classList.contains("lyteMenuGroup")){e?this.removeFreeze.call(this):(this.setFreeze.call(this,t),document.body.classList.add("lyteBodyWrapper"));break}t=t.parentNode}if(t&&"HTML"==t.tagName||!t)if(e&&(!document.menu||document.menu&&!document.menu.data.ltPropFreeze))this.removeFreeze.call(this);else document.body.querySelector(".lytemenufreezelayer.nogroup").classList.remove("lyteMenuHidden"),document.body.classList.add("lyteBodyWrapper")}},ariaObs:function(e){this.data.ltPropAria&&_lyteUiUtils.setAttribute(this.childComp,this.data.ltPropAriaAttributes||{},e?e.oldValue:{})}.observes("ltPropAriaAttributes","ltPropAriaAttributes.{}").on("didConnect"),callScrollFunc:function(e,t){var o=this,a=o.menuBody,r=-1!=a.style.height.indexOf("px"),i=Object.keys(this.data.ltPropBoundary||{}).length,s=t&&i&&o.$node.element?o.$node.element.getBoundingClientRect():void 0,l=t&&i&&o.$node.element?window.innerWidth:void 0,n=o.$node.ltProp("height"),p=this.data.ltPropHeightResetOnScroll,c="contextmenu"==o.$node.ltProp("event");r&&p?(a.style.height=n||"",t&&i&&$L.fastdom.measure(o.checkForBoundary.bind(o,s,l)),$L.fastdom.measure(o[c?"setContextCss":"setCss"].bind(o,e))):(o[c?"setContextCss":"setCss"](e),t&&i&&o.checkForBoundary(s,l)),o.childMenu&&o.childMenu.callScrollFunc()}});var lyteCloseMenu=function(e,t,o){if((0!=document._lyteMenu.preventClick||t)&&(e&&2!=e.button||t||o))for(var a=document.body.querySelectorAll("lyte-menu:not(.lyteMenuClosed)[lyte-rendered]"),r=0;r<a.length;r++)a[r]==t||a[r].component.childComp.classList.contains("lyteMenuHidden")||!o&&a[r].component.childComp.contains(e.target)||a[r].component._hideStarts||a[r].component.hideMenu.call(a[r].component,!t,e,o);e&&"click"==e.type&&(document._lyteMenu.preventClick=!0)};if(!_lyteUiUtils.registeredCustomElements["lyte-menu-item"]){function menukeypress(e){for(var t=document.querySelectorAll("lyte-menu:not(.lyteMenuClosed)[lyte-rendered]"),o=0;o<t.length;o++){var a=t[o].component;if(!a.childMenu){a._typed=a._typed||"",a._typed+=String.fromCharCode(e.which||e.keyCode),clearTimeout(a._typetime),a._typetime=setTimeout(a.searchFilter.bind(a,a._typed.trim().toLowerCase()),400);break}}}_lyteUiUtils.registeredCustomElements["lyte-menu-item"]=!0,Lyte.createCustomElement("lyte-menu-item",{static:{observedAttributes:{get:function(){return["lyte-shortcut"]}}},attributeChangedCallback:function(e,t,o){if("function"==typeof shortcut){if(!o)return;var a=(o=JSON.parse(o)).key,r=o.type,i=o.wait;t=t?JSON.parse(t):{},shortcut.push({newKey:a,type:r,wait:i,oldKey:t.key,value:this})}},connectedCallback:function(){var e=$L(this).closest("lyte-menu-box").get(0);e&&e.parent&&(e.parent.ltProp("aria")&&$L(this).attr("role","menuitem"))},disconnectedCallback:function(){this.getAttribute("lyte-shortcut")&&this.setAttribute("lyte-shortcut",JSON.stringify({}))}})}Lyte.Component.register("lyte-alert",{_template:'<template tag-name="lyte-alert"> <template is="if" value="{{ltPropShowCopy}}"> <template case="true"><lyte-wormhole on-before-append="{{method(&quot;beforeWormholeAppend&quot;)}}"> <template is="registerYield" yield-name="lyte-content"> <div class="alertWrapper {{ltPropWrapperClass}}"> <div class="{{lyteUiConcatAlertClass(ltPropContentAlign,\'alertPopup\')}}"> <template is="if" value="{{ltPropShowCloseButton}}"> <template case="true"><span class="lyte-svg alertClose" onclick="{{action(\'closeAlert\')}}" tabindex="0"></span></template> </template> <template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield yield-name="alert"></lyte-yield> </template><template case="false"> <template is="if" value="{{lyteUiIfEquals(ltPropHeading,\'\')}}"> <template case="false"><div class="alertHeader"> <span class="dBlock">{{ltPropHeading}}</span> </div></template> </template> <div class="alertContent"> <template is="if" value="{{lyteUiIfEquals(ltPropType,\'\')}}"> <template case="false"><div class="alertContentMiddle"> <span class="{{lyteUiConcatTypeClass(ltPropType,\'AlertIcon\',\'lyteStatusIcon\')}}"></span> </div></template> </template> <div class="alertContentMiddle"> <template is="if" value="{{lyteUiIfEquals(ltPropPrimaryMessage,\'\')}}"> <template case="false"><div> <span class="alertPrimaryMsg">{{ltPropPrimaryMessage}}</span> </div></template> </template> <template is="if" value="{{lyteUiIfEquals(ltPropSecondaryMessage,\'\')}}"> <template case="false"><div> <span class="alertSecondaryMsg">{{ltPropSecondaryMessage}}</span> </div></template> </template> </div> <div class="clearFloat"></div> </div> </template></template> <template is="if" value="{{nonYieldFooter}}"><template case="true"> <template is="if" value="{{lyteUiIsEmptyArray(ltPropButtons)}}"> <template case="false"><div class="{{lyteUiConcat(\'alertFooter \',ltPropButtonPosition)}}"> <template is="for" items="{{ltPropButtons}}"> <template is="if" value="{{lyteUiIfEquals(item.type,\'accept\')}}"> <template case="true"><lyte-button class="lyteAlertBtn" onclick="{{action(\'accept\',item.text)}}"> <template is="registerYield" yield-name="text">{{item.text}}</template> </lyte-button></template> </template> <template is="if" value="{{lyteUiIfEquals(item.type,\'reject\')}}"> <template case="true"><lyte-button class="lyteAlertBtn" onclick="{{action(\'reject\',item.text)}}"> <template is="registerYield" yield-name="text">{{item.text}}</template> </lyte-button></template> </template> </template> </div></template> </template> </template></template> </div> <div class="{{lyteUiAddShowClass(ltPropShowCopy,\'\',\'alertFreezeLayer\')}}"></div> </div> </template> </lyte-wormhole></template> </template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"registerYield",position:[0,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}},{type:"attr",position:[1,1,3]},{type:"if",position:[1,1,3],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{false:{dynamicNodes:[{type:"text",position:[0,1,0]}]}},default:{}},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{false:{dynamicNodes:[{type:"attr",position:[0,1]}]}},default:{}},{type:"attr",position:[3,3,1]},{type:"if",position:[3,3,1],cases:{false:{dynamicNodes:[{type:"text",position:[0,1,0]}]}},default:{}},{type:"attr",position:[3,3,3]},{type:"if",position:[3,3,3],cases:{false:{dynamicNodes:[{type:"text",position:[0,1,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,1,5]},{type:"if",position:[1,1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{false:{dynamicNodes:[{type:"attr",position:[0]},{type:"attr",position:[0,1]},{type:"for",position:[0,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"registerYield",position:[0,1],dynamicNodes:[{type:"text",position:[0]}]},{type:"componentDynamic",position:[0]}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"registerYield",position:[0,1],dynamicNodes:[{type:"text",position:[0]}]},{type:"componentDynamic",position:[0]}]}},default:{}}]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]}]},{type:"componentDynamic",position:[0]}]}},default:{}}],_observedAttributes:["ltPropType","ltPropShow","ltPropWrapperClass","ltPropAllowMultiple","ltPropHeading","ltPropPrimaryMessage","ltPropSecondaryMessage","ltPropTop","ltPropButtons","ltPropButtonPosition","ltPropShowCloseButton","ltPropCloseOnEscape","ltPropDimmer","ltPropYield","ltPropAnimation","ltPropContentAlign","ltPropAria","ltPropAriaAttributes","ltPropPreventFocus","nonYieldFooter","triggerShow"],data:function(){return{ltPropType:Lyte.attr("string",{default:""}),ltPropShow:Lyte.attr("boolean",{default:!1}),ltPropWrapperClass:Lyte.attr("string",{default:""}),ltPropAllowMultiple:Lyte.attr("boolean",{default:!1}),ltPropHeading:Lyte.attr("string",{default:""}),ltPropPrimaryMessage:Lyte.attr("string",{default:""}),ltPropSecondaryMessage:Lyte.attr("string",{default:""}),ltPropTop:Lyte.attr("string",{default:"40px"}),ltPropButtons:Lyte.attr("array",{default:[]}),ltPropButtonPosition:Lyte.attr("string",{default:"right"}),ltPropShowCloseButton:Lyte.attr("boolean",{default:!0}),ltPropCloseOnEscape:Lyte.attr("boolean",{default:!0}),ltPropDimmer:Lyte.attr("object",{default:{color:"black",opacity:"0.4"}}),ltPropYield:Lyte.attr("boolean",{default:!1}),ltPropAnimation:Lyte.attr("string",{default:"slideDown"}),ltPropContentAlign:Lyte.attr("string",{default:"left"}),ltPropAria:Lyte.attr("boolean",{default:!1}),ltPropAriaAttributes:Lyte.attr("object",{default:{}}),ltPropPreventFocus:Lyte.attr("boolean",{default:!1}),nonYieldFooter:Lyte.attr("boolean",{default:!0}),triggerShow:Lyte.attr("number",{default:0})}},didConnect:function(){this.$node.ltProp("show")&&this.setData("triggerShow",this.getData("triggerShow")+1)},addAriaValues:function(){if(this.getData("ltPropAria")){var e=this.getData("ltPropAriaAttributes")||{};if("aria-labelledby"in e){var t=this.getAlertWidget("header");t&&t.classList.add(Lyte.Component.registeredHelpers.lyteUiGetValue(e,"aria-labelledby"))}if("aria-describedby"in e){var o=this.getAlertWidget("content");o&&o.classList.add(Lyte.Component.registeredHelpers.lyteUiGetValue(e,"aria-describedby"))}_lyteUiUtils.setAttribute(this.getAlertWidget(),e,{});var a=this.getAlertWidget("close");a&&a.setAttribute("aria-label",Lyte.Component.registeredHelpers.lyteUiGetValue(e,"close-label")||"Close icon at top right position")}},getAlertWidget:function(e){return"header"===e?this.getData("ltPropYield")?this.childComp.querySelector("lyte-alert-header"):this.childComp.querySelector(".alertHeader"):"content"===e?this.getData("ltPropYield")?this.childComp.querySelector("lyte-alert-content"):this.childComp.querySelector(".alertContentMiddle"):"close"===e?this.childComp.querySelector(".alertClose"):this.childComp.querySelector(".alertPopup")},showToggled:function(){if(this.$node.ltProp("show")){this.closeTId&&(clearTimeout(this.closeTId),delete this.closeTId),this.sId&&(clearTimeout(this.sId),delete this.sId,this.setData("ltPropShowCopy",!1),delete this.sId,delete this.actualModalDiv,delete this.childComp);var e=this;this.openTId=setTimeout((function(){delete e.openTId,document.body.classList.add("bodyWrapper"),e.showAlert()}),0)}else{this.openTId&&(clearTimeout(this.openTId),delete this.openTId),this.showTId&&(clearTimeout(this.showTId),delete this.showTId);e=this;this.closeTId=setTimeout((function(){delete e.closeTId,e.closeAlert()}),0)}}.observes("ltPropShow","triggerShow"),printId:function(){console.log("this.openTId ---\x3e "+this.openTId),console.log("this.showTId ---\x3e "+this.showTId),console.log("this.closeTId ---\x3e "+this.closeTId),console.log("this.sId ---\x3e "+this.sId)},closeAlertFn:function(){this.getMethods("onClose")&&this.executeMethod("onClose",this)},showAlert:function(){var e=this;if(this.showTId=setTimeout((function(){if(delete e.showTId,e.actualModalDiv){if(LytePopup.bindTransitionEnd(e.actualModalDiv),"center"==e.getData("ltPropTop")){var t=Math.max(document.documentElement.clientHeight,window.innerHeight||0);e.actualModalDiv.style.top=(t-e.actualModalDiv.getBoundingClientRect().height)/2+"px"}else e.actualModalDiv.style.top=e.getData("ltPropTop");"zoomIn"==e.getData("ltPropAnimation")&&e.actualModalDiv.classList.add("alertOpened"),e.$node.classList.add("lyteAlertOpened"),e.getMethods("onShow")&&e.executeMethod("onShow",e)}else e.getData("ltPropShow")&&e.setData("ltPropShow",!1)}),100),this.setData("ltPropShowCopy",!0),this.addAriaValues(),"slideDown"==this.getData("ltPropAnimation")?this.actualModalDiv.classList.add("lyteAlertSlideDown"):"zoomIn"==this.getData("ltPropAnimation")&&this.actualModalDiv.classList.add("lyteAlertZoomIn"),this.getData("ltPropButtons")&&this.getData("nonYieldFooter")){for(var t,o=this.getData("ltPropButtons"),a=0;a<o.length;a++){t=this.actualModalDiv.querySelectorAll(".lyteAlertBtn")[a];for(var r=Object.keys(o[a]),i=0;i<r.length;i++)t.ltProp(r[i],o[a][r[i]])}t=null}LytePopup.addPopup(this);var s=this.childComp.querySelector(".alertFreezeLayer").style;s.background=this.getData("ltPropDimmer").color,this.addedFreezeDetails||(s.opacity=this.getData("ltPropDimmer").opacity)},closeAlert:function(){if(this.childComp&&this.actualModalDiv){this.addedFreezeDetails&&(LytePopup.hideOrShowFreeze("close",this),delete this.addedFreezeDetails),"slideDown"==this.getData("ltPropAnimation")&&(this.actualModalDiv.style.top="-"+(this.actualModalDiv.getBoundingClientRect().height+this.actualModalDiv.getBoundingClientRect().top+40)+"px");var e=1e3*parseFloat(document.defaultView.getComputedStyle(this.actualModalDiv).getPropertyValue("transition-duration"));"zoomIn"==this.getData("ltPropAnimation")&&this.actualModalDiv.classList.remove("alertOpened");var t=this;this.sId=setTimeout((function(){t.setData("ltPropShowCopy",!1),delete t.sId,delete t.actualModalDiv,delete t.childComp,LytePopup.checkAndRemoveWrapper()}),e-100),this.closeAlertFn(),LytePopup.closePopup(this),this.addedFreezeDetails&&(this.childComp.querySelector(".alertFreezeLayer").style.opacity=0,this.childComp.querySelector(".alertFreezeLayer").style.visibility="")}else LytePopup.closePopup(this);this.$node.classList.remove("lyteAlertOpened")},didDestroy:function(){this.$node.classList.remove("lyteAlertOpened"),this.openTId&&(clearTimeout(this.openTId),delete this.openTId),this.showTId&&(clearTimeout(this.showTId),delete this.showTId),this.closeTId&&(clearTimeout(this.closeTId),delete this.closeTId),this.sId&&(clearTimeout(this.sId),delete this.sId),this.childComp&&(this.addedFreezeDetails&&(LytePopup.hideOrShowFreeze("close",this),delete this.addedFreezeDetails),LytePopup.closePopup(this),this.childComp.remove(),delete this.actualModalDiv,delete this.childComp,LytePopup.checkAndRemoveWrapper())},actions:{closeAlert:function(){this.$node.ltProp("show",!1)},accept:function(e){var t=!0;this.getMethods("onAccept")&&(t=null==(t=this.executeMethod("onAccept",e,this))||t),t&&this.$node.ltProp("show",!1)},reject:function(e){var t=!0;this.getMethods("onReject")&&(t=null==(t=this.executeMethod("onReject",e,this))||t),t&&this.$node.ltProp("show",!1)}},methods:{beforeWormholeAppend:function(e){this.childComp=e,this.actualModalDiv=this.childComp.querySelector(".alertPopup"),this.getData("ltPropYield")&&e.querySelector("lyte-alert-footer")?this.setData("nonYieldFooter",!1):this.setData("nonYieldFooter",!0),this.getData("nonYieldFooter")&&0==this.getData("ltPropButtons").length&&("confirm"==this.getData("ltPropType")?this.setData("ltPropButtons",[{type:"accept",text:"Ok"},{type:"reject",text:"Cancel"}]):this.setData("ltPropButtons",[{type:"accept",text:"Ok"}]))}}}),Lyte.Component.register("lyte-dropdown",{_template:'<template tag-name="lyte-dropdown"> <template is="if" value="{{expHandlers(ltPropHover,\'==\',true)}}"><template case="true"> <template is="if" value="{{expHandlers(multiple,\'==\',true)}}"><template case="true"> <template is="if" value="{{expHandlers(search,\'==\',true)}}"><template case="true"> <template is="if" value="{{expHandlers(drophead,\'==\',\'noyield\')}}"><template case="true"> <lyte-drop-button aria-expanded="{{if(ltPropIsOpen,\'true\',\'false\')}}" aria-haspopup="listbox"> <div class="lyteMultiselect"> <ul class="lyteMultipleSelect"> <template is="for" items="{{ltPropSelectedList}}" item="item" index="indexVal"> <li data-value="{{lyteUiReturnValueBy(item,sysValue)}}"> <span class="lyteDropdownVisible" onmouseenter="{{action(\'toolTipConfig\',this,\'selToolTip\')}}" lt-prop-title="{{if(selToolTip,lyteUiReturnValueBy(item,userValue),\'\')}}" lt-prop-tooltip-config="{{ltPropTooltip}}" lt-prop-tooltip-class="{{ltPropTooltipClass}}">{{lyteUiReturnValueBy(item,userValue)}}</span> <lyte-drop-remove class="lyteCloseIcon"></lyte-drop-remove> </li> </template> <li class="lyteMultiselectInput"> <input onkeydown="{{action(\'preventDefault\',event)}}" type="text" placeholder="{{ltPropPlaceholder}}" class="lyteDropdownTextField" autocomplete="off" tabindex="{{ltPropTabindex}}" onclick="{{action(\'showHide\',event)}}"> </li> </ul> </div> <template is="if" value="{{shouldDisplayIcon}}"><template case="true"> <lyte-icon class="{{ltPropIconClass}}"></lyte-icon> </template></template> </lyte-drop-button> </template><template case="false"> </template></template> </template><template case="false"> <template is="if" value="{{expHandlers(drophead,\'==\',&quot;noyield&quot;)}}"><template case="true"> <div class="lyteDummyEventContainer" aria-haspopup="listbox" aria-expanded="{{if(ltPropIsOpen,\'true\',\'false\')}}" onclick="{{action(\'showHide\',event)}}" onkeyup="{{action(\'checkKey\',event)}}" tabindex="{{ltPropTabindex}}"> <lyte-drop-button> <template is="if" value="{{expHandlers(expHandlers(ltPropSelectedList.length,\'==\',0),\'&amp;&amp;\',expHandlers(ltPropForcePlaceholder,\'!\'))}}"><template case="true"> <span class="lyteDropPlaceholderMultiple">{{ltPropPlaceholder}}</span> </template></template> <ul class="lyteMultipleSelect"> <template is="for" items="{{ltPropSelectedList}}" item="item" index="indexVal"> <li data-value="{{lyteUiReturnValueBy(item,sysValue)}}"> <span class="lyteDropdownVisible" onmouseenter="{{action(\'toolTipConfig\',this,\'selToolTip\')}}" lt-prop-title="{{if(selToolTip,lyteUiReturnValueBy(item,userValue),\'\')}}" lt-prop-tooltip-config="{{ltPropTooltip}}" lt-prop-tooltip-class="{{ltPropTooltipClass}}">{{lyteUiReturnValueBy(item,userValue)}}</span> <lyte-drop-remove class="lyteCloseIcon"></lyte-drop-remove> </li> </template> </ul> <template is="if" value="{{ltPropForcePlaceholder}}"><template case="true"> <span class="lyteDropPlaceholderMultiple">{{ltPropPlaceholder}}</span> </template></template> <template is="if" value="{{shouldDisplayIcon}}"><template case="true"> <lyte-icon class="{{ltPropIconClass}}"></lyte-icon> </template></template> </lyte-drop-button> </div> </template><template case="false"> </template></template> </template></template> </template><template case="false"> <div onmouseenter="{{action(\'showHide\',event,\'enter\')}}" aria-haspopup="listbox" aria-expanded="{{if(ltPropIsOpen,\'true\',\'false\')}}" onmouseleave="{{action(\'closeIt\',event)}}" class="lyteDummyEventContainer" tabindex="{{ltPropTabindex}}" style=""> <template is="if" value="{{expHandlers(drophead,\'==\',&quot;noyield&quot;)}}"><template case="true"> <lyte-drop-button> <template is="if" value="{{ltPropDisplayValue}}"><template case="true"> <span class="lyteMarginRight lyteDropdownLabel" onmouseenter="{{action(\'toolTipConfig\',this,\'showToolTip\')}}" lt-prop-title="{{if(showToolTip,ltPropDisplayValue,\'\')}}" lt-prop-tooltip-config="{{ltPropTooltip}}" lt-prop-tooltip-class="{{ltPropTooltipClass}}">{{ltPropDisplayValue}}</span> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(ltPropSelected,\'!\'),\'&amp;&amp;\',expHandlers(ltPropDisplayValue,\'!\'))}}"><template case="true"> <span class="lyteDropPlaceholderNormal">{{ltPropPlaceholder}}</span> </template></template></template></template> <template is="if" value="{{expHandlers(ltPropSelected,\'&amp;&amp;\',ltPropShowRemoveIcon)}}"><template case="true"> <lyte-drop-remove class="lyteCloseIcon"></lyte-drop-remove> </template></template> <lyte-icon class="{{ltPropIconClass}}"></lyte-icon> </lyte-drop-button> </template><template case="false"><template is="if" value="{{expHandlers(drophead,\'==\',&quot;yield&quot;)}}"><template case="true"> </template></template></template></template> </div> </template></template> </template><template case="false"> <template is="if" value="{{expHandlers(multiple,\'==\',true)}}"><template case="true"> <template is="if" value="{{expHandlers(search,\'==\',true)}}"><template case="true"> <template is="if" value="{{expHandlers(drophead,\'==\',\'noyield\')}}"><template case="true"> <lyte-drop-button onclick="{{action(\'showHide\',event)}}" aria-haspopup="listbox" aria-expanded="{{if(ltPropIsOpen,\'true\',\'false\')}}"> <div class="lyteMultiselect"> <ul class="lyteMultipleSelect"> <template is="for" items="{{ltPropSelectedList}}" item="item" index="indexVal"> <li data-value="{{lyteUiReturnValueBy(item,sysValue)}}"> <span class="lyteDropdownVisible" onmouseenter="{{action(\'toolTipConfig\',this,\'selToolTip\')}}" lt-prop-title="{{if(selToolTip,lyteUiReturnValueBy(item,userValue),\'\')}}" lt-prop-tooltip-config="{{ltPropTooltip}}" lt-prop-tooltip-class="{{ltPropTooltipClass}}">{{lyteUiReturnValueBy(item,userValue)}}</span> <lyte-drop-remove class="lyteCloseIcon"></lyte-drop-remove> </li> </template> <li class="lyteMultiselectInput"> <input onkeydown="{{action(\'preventDefault\',event)}}" type="text" placeholder="{{ltPropPlaceholder}}" class="lyteDropdownTextField" autocomplete="off" tabindex="{{ltPropTabindex}}"> </li> </ul> </div> <template is="if" value="{{shouldDisplayIcon}}"><template case="true"> <lyte-icon class="{{ltPropIconClass}}"></lyte-icon> </template></template> </lyte-drop-button> </template><template case="false"> <div class="lyteDummyEventContainer" tabindex="{{ltPropTabindex}}" style="" onclick="{{action(\'showHide\',event)}}" aria-haspopup="listbox" aria-expanded="{{if(ltPropIsOpen,\'true\',\'false\')}}"> </div> </template></template> </template><template case="false"> <div class="lyteDummyEventContainer" onclick="{{action(\'showHide\',event)}}" tabindex="{{ltPropTabindex}}" aria-haspopup="listbox" aria-expanded="{{if(ltPropIsOpen,\'true\',\'false\')}}"> <template is="if" value="{{expHandlers(drophead,\'==\',&quot;noyield&quot;)}}"><template case="true"> <lyte-drop-button> <template is="if" value="{{expHandlers(expHandlers(ltPropSelectedList.length,\'==\',0),\'&amp;&amp;\',expHandlers(ltPropForcePlaceholder,\'!\'))}}"><template case="true"> <span class="lyteDropPlaceholderMultiple">{{ltPropPlaceholder}}</span> </template></template> <ul class="lyteMultipleSelect"> <template is="for" items="{{ltPropSelectedList}}" item="item" index="indexVal"> <li data-value="{{lyteUiReturnValueBy(item,sysValue)}}"> <span class="lyteDropdownVisible" onmouseenter="{{action(\'toolTipConfig\',this,\'selToolTip\')}}" lt-prop-title="{{if(selToolTip,lyteUiReturnValueBy(item,userValue),\'\')}}" lt-prop-tooltip-config="{{ltPropTooltip}}" lt-prop-tooltip-class="{{ltPropTooltipClass}}">{{lyteUiReturnValueBy(item,userValue)}}</span> <lyte-drop-remove class="lyteCloseIcon"></lyte-drop-remove> </li> </template> </ul> <template is="if" value="{{ltPropForcePlaceholder}}"><template case="true"> <span class="lyteDropPlaceholderMultiple">{{ltPropPlaceholder}}</span> </template></template> <template is="if" value="{{shouldDisplayIcon}}"><template case="true"> <lyte-icon class="{{ltPropIconClass}}"></lyte-icon> </template></template> </lyte-drop-button> </template><template case="false"> </template></template> </div> </template></template> </template><template case="false"> <div onclick="{{action(\'showHide\',event)}}" class="lyteDummyEventContainer" tabindex="{{ltPropTabindex}}" style="" aria-haspopup="listbox" aria-expanded="{{if(ltPropIsOpen,\'true\',\'false\')}}"> <template is="if" value="{{expHandlers(drophead,\'==\',&quot;noyield&quot;)}}"><template case="true"> <lyte-drop-button> <template is="if" value="{{ltPropDisplayValue}}"><template case="true"> <span onmouseenter="{{action(\'toolTipConfig\',this,\'showToolTip\')}}" lt-prop-tooltip-config="{{ltPropTooltip}}" lt-prop-tooltip-class="{{ltPropTooltipClass}}" lt-prop-title="{{if(showToolTip,ltPropDisplayValue,\'\')}}" class="lyteMarginRight lyteDropdownLabel">{{ltPropDisplayValue}}</span> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(ltPropSelected,\'!\'),\'&amp;&amp;\',expHandlers(ltPropDisplayValue,\'!\'))}}"><template case="true"> <span class="lyteDropPlaceholderNormal">{{ltPropPlaceholder}}</span> </template></template></template></template> <template is="if" value="{{expHandlers(ltPropSelected,\'&amp;&amp;\',ltPropShowRemoveIcon)}}"><template case="true"> <lyte-drop-remove class="lyteCloseIcon"></lyte-drop-remove> </template></template> <lyte-icon class="{{ltPropIconClass}}"></lyte-icon> </lyte-drop-button> </template><template case="false"><template is="if" value="{{expHandlers(drophead,\'==\',&quot;yield&quot;)}}"><template case="true"> </template></template></template></template> </div> </template></template> </template></template> <template is="if" value="{{expHandlers(ltPropHover,\'==\',false)}}"><template case="true"> <template is="if" value="{{expHandlers(dropbody,\'==\',&quot;noyield&quot;)}}"><template case="true"> <lyte-drop-box class="lyteDropdownHidden"> <lyte-drop-body> <template is="for" items="{{ltPropOptions}}" item="item" index="indexVal"><template is="if" value="{{lyteUiOptGroupCheck(item)}}"><template case="true"> <lyte-drop-group> <lyte-drop-label>{{lyteUiReturnOnlyKey(item)}}</lyte-drop-label> <template is="for" items="{{lyteUiReturnValueBy(item,lyteUiReturnOnlyKey(item))}}" item="subitem" index="indexval"> <template is="if" value="{{lyteUiIsObject(subitem)}}"><template case="true"> <lyte-drop-item data-value="{{subitem[ltPropSystemValue]}}" disabled="{{lyteUiCheckDisabled(ltPropDisabledList,subitem[ltPropSystemValue])}}">{{subitem[ltPropUserValue]}}</lyte-drop-item> </template><template case="false"> <lyte-drop-item data-value="{{subitem}}" disabled="{{lyteUiCheckDisabled(ltPropDisabledList,subitem)}}">{{subitem}}</lyte-drop-item> </template></template> </template> </lyte-drop-group> </template><template case="false"> <template is="if" value="{{lyteUiIsObject(item)}}"><template case="true"> <lyte-drop-item data-value="{{item[ltPropSystemValue]}}" disabled="{{lyteUiCheckDisabled(ltPropDisabledList,item[ltPropSystemValue])}}">{{item[ltPropUserValue]}}</lyte-drop-item> </template><template case="false"> <lyte-drop-item data-value="{{item}}" disabled="{{lyteUiCheckDisabled(ltPropDisabledList,item)}}">{{item}}</lyte-drop-item> </template></template> </template></template> </template> </lyte-drop-body> </lyte-drop-box> </template><template case="false"> </template></template> <div class="lyteLoadMsg" style="display:none;">Loading</div> </template><template case="false"> <template is="if" value="{{expHandlers(dropbody,\'==\',&quot;noyield&quot;)}}"><template case="true"> <lyte-drop-box> <lyte-drop-body> <template is="for" items="{{ltPropOptions}}" item="item" index="indexVal"><template is="if" value="{{lyteUiOptGroupCheck(item)}}"><template case="true"> <lyte-drop-group> <lyte-drop-label>lyteUiReturnOnlyKey(item)</lyte-drop-label> <template is="for" items="{{lyteUiReturnValueBy(item,lyteReturnOnlyKey(item))}}" item="subitem" index="indexval"> <template is="if" value="{{lyteUiIsObject(subitem)}}"><template case="true"> <lyte-drop-item data-value="{{subitem[ltPropSystemValue]}}" disabled="{{lyteUiCheckDisabled(ltPropDisabledList,subitem[ltPropSystemValue])}}">{{subitem[ltPropUserValue]}}</lyte-drop-item> </template><template case="false"> <lyte-drop-item data-value="{{subitem}}" disabled="{{lyteUiCheckDisabled(ltPropDisabledList,subitem)}}">{{subitem}}</lyte-drop-item> </template></template> </template> </lyte-drop-group> </template><template case="false"> <template is="if" value="{{lyteUiIsObject(item)}}"><template case="true"> <lyte-drop-item data-value="{{item[ltPropSystemValue]}}" disabled="{{lyteUiCheckDisabled(ltPropDisabledList,item[ltPropSystemValue])}}">{{item[ltPropUserValue]}}</lyte-drop-item> </template><template case="false"> <lyte-drop-item data-value="{{item}}" disabled="{{lyteUiCheckDisabled(ltPropDisabledList,item)}}">{{item}}</lyte-drop-item> </template></template> </template></template> </template> </lyte-drop-body> </lyte-drop-box> </template><template case="false"> </template></template> <div class="lyteLoadMsg" style="display:none;">Loading</div> </template></template> <lyte-yield yield-name="yield" style="display: none;" lyte-options="{{ltPropOptions}}"></lyte-yield> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1,1]},{type:"for",position:[1,1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,3]}]},{type:"attr",position:[1,1,1,3,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,1,3,1]},{type:"for",position:[1,1,3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,3]}]},{type:"attr",position:[1,1,5]},{type:"if",position:[1,1,5],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,1,7]},{type:"if",position:[1,1,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1,1]}]},false:{dynamicNodes:[]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,5]},{type:"componentDynamic",position:[1,5]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[]}},default:{}}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1,1]},{type:"for",position:[1,1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,3]}]},{type:"attr",position:[1,1,1,3,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,3,1]},{type:"for",position:[1,3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,3]}]},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,7]},{type:"if",position:[1,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,5]},{type:"componentDynamic",position:[1,5]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[]}},default:{}}]}},default:{}},{type:"attr",position:[5]},{type:"insertYield",position:[5]}],_observedAttributes:["shouldDisplayIcon","changeItToInvoke","dummy1","dummy2","savedPositions","ltPropRemoveMultiple","ltPropYield","ltPropType","ltPropTabindex","ltPropShow","ltPropFreeze","ltPropOptions","ltPropUserValue","ltPropSystemValue","ltPropPosition","ltPropIconClass","ltPropSelected","ltPropCallout","ltPropPlaceholder","ltPropDisabled","ltPropHover","ltPropNoResult","ltPropMaxCount","ltPropInputClass","ltPropBoundary","pos","secondaryPosition","firePos","ltPropAjaxRequest","firstRequest","userValue","sysValue","ltPropDisplayValue","ltPropDisabledList","ltPropAnimate","ltPropSetPos","ltPropTooltip","ltPropBoxClass","ltPropIsOpen","ltPropFocus","ltPropFixPositionOnOpen","ltPropForcePlaceholder","ltPropShowEmptyMessage","ltPropBoxButtonWidth","ltPropPreventScroll","ltPropScope","ltPropAnimateBox","ltPropTooltipClass","ltPropDisplayList","ltPropSelectedList","searchMethod","ltPropFocusOnClose","ltPropButtonClass","ltPropDisableItemTooltip","ltPropPreventParentScroll","ltPropShowRemoveIcon"],init:function(){var e,t=this.getData("ltPropType"),o=this.getData("ltPropSelected");(this._close=this.closeDrop1.bind(this),this._transEnd=this.tranEnd.bind(this),this.getData("ltPropPreventParentScroll")&&this.setData("ltPropFreeze",!1),document.getElementById("lytedropdownfreezelayer"))||((e=document.createElement("div")).setAttribute("id","lytedropdownfreezelayer"),e.style.display="none",e.style.opacity="0.01",e.style.background="#fff",document.body.appendChild(e));this.$node.resetPosition=function(){var e=this.component,t=e.getData("ltPropFixPositionOnOpen");e.setCss(!1,t)},this.$node.toggle=function(e,t){var o=e||void 0;this.component.getData("ltPropDisabled")||this.constructor._actions.showHide.call(this.component,o,t,!0)},this.$node.getDropBox=function(){return this.component.getDropBox()},this.$node.open=function(){this.component.getData("ltPropIsOpen")||this.toggle()},this.$node.close=function(){this.component;this.getData("ltPropIsOpen")&&this.toggle()},this.$node.getInitialSelected=function(e){var t=this.component;return t.setInitialSelected(e),t.getData("ltPropSelected")},this.$node.getDisplayValue=function(){var e,t=this.component,o=t.childComp,a=t.getDropBody(o),r=t.getData("ltPropSelected");return r&&(e=a.querySelector('[data-value="'+window._lyteUiUtils.escape(r)+'"]'))?e.textContent.trim():""},this.$node.closeError=function(){var e=this.component,t=e.childComp,o=e.getData("drophead");0!==e.getDropBody(t).querySelectorAll("lyte-drop-item:not(.lyteDropdownActive):not(.lyteSearchHidden)").length&&e.closeError(t,o)},-1===t.indexOf("multiple")&&-1===t.indexOf("multisearch")||(this.setData("multiple",!0),o||this.setData("ltPropSelected","[]"),-1!==t.indexOf("multisearch")&&this.setData("search",!0),this.setIterator())},setIterator:function(){var e=this.getData("ltPropUserValue"),t=this.getData("ltPropSystemValue");this.setData("userValue",e||"display"),this.setData("sysValue",t||"value")},didDestroy:function(){var e=this.childComp,t=this.$node.mutobserver,o=this.getData("ltPropFreeze"),a=this.getData("ltPropPreventScroll");e&&(!e.classList.contains("lyteDropdownHidden")&&o&&"all"===a&&(document.getElementById("lytedropdownfreezelayer").style.display="none"),!e.classList.contains("lyteDropdownHidden")&&document.body&&document.body.classList.remove("lyteBodyWrapper"),delete e.origindd,e.remove()),t&&t.disconnect(),this.disableParentListeners(),_lyteDropdown.autoClosed===this.$node&&(_lyteDropdown.autoClosed=null),_lyteDropdown.lastDropdownWithAPromise===this.$node&&(_lyteDropdown.lastDropdownWithAPromise=null),this._inputElement&&(this._inputElement.removeEventListener("keyup",this._function),$L(this._inputElement).removeSearch(),this._inputElement=null),delete this.childComp,delete this.$node.toggle,delete this.$node.element,this.$node.mutobserver=null},disableParentListeners:function(){var e=this;this.scrollableParents&&this.scrollableParents.off("scroll",this.resetScroll),this.scrollableParents=void 0,this.lyteScrollBarParents&&(this.lyteScrollBarParents.each((function(t,o){o&&(o.removeEventListener("touchmove",e.disableLyteScrollBar,!0),o.removeEventListener("wheel",e.disableLyteScrollBar,!0))})),this.lyteScrollBarParents=void 0)},prerequisites:function(){var e;this.getDropBody(this.childComp);this.data.ltPropAnimate&&(this._hgtRemoval=!0),this.setCss(!1,!0),this.openSlideAnimate(),this.getData("call")&&this.childComp.removeAttribute("lyte-hidden"),this.getData("call")&&this.getMethods("onShow")&&(e=!0===(e=this.getData("call"))?void 0:e,this.executeMethod("onShow",e,this)),this.setData("call",null)},getChildren:function(e){var t,o=this.getData("drophead"),a=this.getData("dropbody"),r=0,i=this.$node;if("yield"!==o||"yield"!==a)for(;r<e.length;r++)"LYTE-DROPDOWN"!==(t=e[r].tagName)&&"TEMPLATE"!==t&&("LYTE-DROP-BOX"===t?(this.setData("dropbody","yield"),i.querySelector("lyte-drop-box").classList.add("lyteDropdownHidden")):"LYTE-DROP-BUTTON"===t?(this.setData("drophead","yield"),_lyteUiUtils.appendChild(i.querySelector(".lyteDummyEventContainer"),i.querySelector("lyte-drop-button")),r--):this.getChildren(e[r].children))},setBoxClass:function(e){var t=this.getData("ltPropBoxClass"),o=this.childComp||this.$node.querySelector("lyte-drop-box");"noyield"===this.getData("dropbody")&&(e&&$L(o).removeClass(e),t&&$L(o).addClass(t))},setButtonClass:function(e){var t=this.getData("ltPropButtonClass"),o=this.$node.querySelector("lyte-drop-button");e&&$L(o).removeClass(e),t&&$L(o).addClass(t)},iconClassChanged:function(){this.setIconClass()}.observes("ltPropIconClass"),setIconClass:function(){var e=this.getData("multiple"),t=this.getDropButton(),o=this.getData("drophead");e&&"yield"!==o&&(this.hasIconClassChanged()?(t.classList.add("lyteDropdownRemoveIcon"),this.setData("shouldDisplayIcon",!0)):(t.classList.remove("lyteDropdownRemoveIcon"),this.setData("shouldDisplayIcon",!1)))},getDropButton:function(){return this.$node.querySelector("lyte-drop-button")},hasIconClassChanged:function(){var e=this.getData("ltPropIconClass");return e&&"dropdown"!==e},didConnect:function(){var e,t,o,a,r,i,s,l,n,p=this.$node,c=this.childComp,d=this.getData("ltPropNoResult"),u=p.querySelector("lyte-yield"),h=this.getData("ltPropPlaceholder"),m=this.getData("ltPropHover"),y=this.getData("ltPropSelected"),f=this.getData("ltPropOptions")||[],g=this.getData("ltPropType"),v=this.getData("ltPropDisabled"),x=this.getData("ltPropTabindex"),P=this.getData("ltPropShow"),b=this.getData("ltPropDisabledList"),D=(this.getData("ltPropDisplayValue"),this.getData("ltPropSelectedList")||[]);if(this.determine(u),s=this.getData("drophead"),l=this.getData("dropbody"),"yield"!==s&&this.setData("drophead",s="noyield"),"yield"!==l&&this.setData("dropbody",l="noyield"),e=p.querySelector("lyte-drop-box"),this.setBoxClass(),this.setButtonClass(),this.setIconClass(),this.calculateSelected=D.length>0,p.mutobserver=new MutationObserver(function(e){if(this._preventMutObs||this._preventClass)this._preventClass=!1;else if(this._hgtRemoval)delete this._hgtRemoval;else{var t,o,a=this.childComp?this.childComp:p.querySelector("lyte-drop-box");if(!this.getData("ltPropSetPos")&&a&&!a.classList.contains("lyteDropdownHidden")){if(this.getData("multiple")){var r=!1;for(t=0;t<e.length;t++){if("attributes"!==e[t].type||"lyte-hidden"!==e[t].attributeName)if(s="childList"==e[t].type||"selected"==e[t].attributeName||"class"==e[t].attributeName&&!e[t].target.classList.contains("lyteArrow")&&("LYTE-DROP-ITEM"!==e[t].target.tagName||!this.hasClassToggled(e[t],"lyteDropdownSelection")&&!this.hasClassToggled(e[t],"lyteMenuSelected"))||"style"==e[t].attributeName&&"LYTE-DROP-BOX"!=e[t].target.tagName&&!e[t].target.classList.contains("lyteArrow")||"style"===e[t].attributeName&&"LYTE-DROP-BOX"===e[t].target.tagName&&this.isVisibilityModified(e[t].oldValue,e[t].target.getAttribute("style"))){r=!0;break}}if(r)return void this.prerequisites()}else{r=!1;var i=!1;for(t=0;t<e.length;t++)if("style"!=e[t].attributeName||"LYTE-DROP-BOX"!=e[t].target.tagName||this.isVisibilityModified(e[t].oldValue,e[t].target.getAttribute("style"))){if("childList"==e[t].type){i=!1;break}}else i=!0;for(t=0;t<e.length;t++){var s;if("attributes"!==e[t].type||"lyte-hidden"!==e[t].attributeName)if((s="childList"==e[t].type||"style"==e[t].attributeName&&"LYTE-DROP-BOX"!=e[t].target.tagName&&!e[t].target.classList.contains("lyteArrow")||"class"==e[t].attributeName&&"attributes"===e[t].type&&!e[t].target.classList.contains("lyteArrow")&&("LYTE-DROP-ITEM"!==e[t].target.tagName||!this.hasClassToggled(e[t],"lyteDropdownSelection")&&!this.hasClassToggled(e[t],"lyteMenuSelected"))||"style"===e[t].attributeName&&"LYTE-DROP-BOX"===e[t].target.tagName&&this.isVisibilityModified(e[t].oldValue,e[t].target.getAttribute("style")))&&"class"==e[t].attributeName&&"LYTE-DROP-BOX"==e[t].target.tagName){if(!i){r=!0;break}}else s&&!i&&(r=!0)}if(r)return void this.prerequisites()}this.getData("call")&&this.childComp.removeAttribute("lyte-hidden"),this.getData("call")&&this.getMethods("onShow")&&(o=!0===(o=this.getData("call"))?void 0:o,this.executeMethod("onShow",o,this)),this.setData("call",null)}}}.bind(this)),t={attributes:!0,childList:!0,subtree:!0,attributeOldValue:!0},p.mutobserver.observe(e,t),(o=document.createElement("div")).setAttribute("class","lyteDropdownNoResult"),o.textContent=d,o.style.display="none",e.addEventListener("click",function(e){this.actions.processElements.call(this,e)}.bind(this)),m&&e.addEventListener("mouseout",function(e){this.actions.closeIt.call(this,e)}.bind(this)),(a=document.createElement("span")).setAttribute("class","lyteArrow"),e.insertBefore(a,e.children[0]),!h&&!y&&f.length>0){var L,C=f[0],_=!1;C.constructor==Object&&1==Object.keys(C).length&&(L=C[Object.keys(C)[0]]).constructor==Array&&(_=!0),this.setData("preventDisp",!0),_?"[object Object]"===Object.prototype.toString.call(L[0])?this.setData("ltPropSelected",L[0][this.getData("ltPropSystemValue")]):this.setData("ltPropSelected",L[0]):"[object Object]"===Object.prototype.toString.call(C)?this.setData("ltPropSelected",C[this.getData("ltPropSystemValue")]):this.setData("ltPropSelected",C),this.setData("preventDisp",!1)}else h||this.getData("ltPropSelected")||"yield"!=l||"multiple"===g||"multisearch"===g||(r=this.getFirstEnabledItem())&&(this.setData("preventDisp",!0),r.setAttribute("selected",!0),this.setData("preventDisp",!1));this.removeTabIndexForYieldedMultisearch(),i=this.getElementWithTabIndex(),v?(this.disableClickableItem(i),i.setAttribute("tabindex",-1)):(this.enableClickableItem(i),i.setAttribute("tabindex",x)),"multisearch"===g&&(this._inputElement=i,this._function=this.fireCheckKey.bind(this),i.addEventListener("keyup",this._function)),this.toggleDropdownClass(),this.setData("preventDisp",!0),this.setData("changeItToInvoke",this.getData("changeItToInvoke")+1),this.setData("preventDisp",!1),this.setSelectedFromList(!0),P&&(this.setData("ltPropShow",!1),p.toggle(),$L.fastdom.measure((function(){i.focus();var e=p.getBoundingClientRect();(e.left<0||e.top<0)&&p.scrollIntoView()}))),c=this.childComp,(n=this.getDropBody(c)).appendChild(o),this.showNoResultDiv(),n.addEventListener("scroll",function(e){this.callOnScroll(e,this)}.bind(this)),this.getDropBox().addEventListener("mousemove",function(e){var t=e.target,o=e.currentTarget.querySelector(".lyteDropdownSelection");t=_lyteDropdown.traverse(t,["LYTE-DROP-ITEM"]),this.hasMousePositionNotChanged(e)||t===o||(o&&o.classList.remove("lyteDropdownSelection"),t&&"LYTE-DROP-ITEM"===t.tagName&&"true"!==t.getAttribute("disabled")&&t&&t.classList.add("lyteDropdownSelection"))}.bind(this)),f.length>0&&b&&b.length>0&&this.addDisabledClass(p.querySelectorAll("lyte-drop-item"))},removeTabIndexForYieldedMultisearch:function(){var e=this.getData("drophead"),t=this.getData("ltPropType"),o=this.$node.querySelector(".lyteDummyEventContainer");o&&"yield"===e&&"multisearch"===t&&o.removeAttribute("tabindex")},addTabIndexForYieldedMultisearch:function(){var e=this.getData("ltPropType"),t=this.getData("drophead"),o=this.$node.querySelector("input"),a=this.getData("ltPropTabindex"),r=this.getData("ltPropDisabled");o&&"yield"===t&&"multisearch"===e&&!r&&o.setAttribute("tabindex",a)},addTabIndex:function(){this.addTabIndexForYieldedMultisearch()}.observes("ltPropTabindex"),getElementWithTabIndex:function(){return this.$node.querySelector("[tabindex]")||this.$node.querySelector("input")},getFirstEnabledItem:function(){for(var e=this.getDropBody(this.childComp).querySelectorAll("lyte-drop-item"),t=this.getData("ltPropDisabledList")||[],o=0;o<e.length;o++)if(!~t.indexOf(e[o].getAttribute("data-value")))return e[o]},hasMousePositionNotChanged:function(e){var t=e.clientX,o=e.clientY,a=this.prevClientX,r=this.prevClientY;return this.prevClientX=t,this.prevClientY=o,a===t&&r===o},tranEnd:function(e){var t=this.childComp,o=this.getData("ltPropAnimate"),a=this.data.ltPropAnimateBox?t:this.getDropBody(t);o&&(a.style.height="auto"),t.classList.remove("lyteAnimate","lyteDropBoxAnimate"),t.removeEventListener("transitionend",this._transEnd),delete this._prevent,delete this._preventSetcss,delete this._preventMutObs,this.getMethods("onAnimationEnd")&&this.executeMethod("onAnimationEnd",e,this)},openSlideAnimate:function(){if(this.getData("ltPropAnimate")){if(this._preventSetcss)return;if(this._preventAnimate)return;this._preventAnimate=!0,this._preventSetcss=!0,this._preventMutObs=!0;var e=this.childComp?this.childComp:this.$node.querySelector("lyte-drop-box"),t=this.data.ltPropAnimateBox,o=t?e:this.getDropBody(this.childComp);this._oriStyle=o.style.height,o.style.height=0,-1!=["up","upLeft","upRight"].indexOf(this.getData("pos"))&&(e.style.top=parseInt(e.style.top)+this._hgt+"px"),e.classList.add("lyteAnimate"),t&&e.classList.add("lyteDropBoxAnimate"),setTimeout(function(){-1!=["up","upLeft","upRight"].indexOf(this.getData("pos"))&&(e.style.top=parseInt(e.style.top)-this._hgt+"px"),o.style.height=this._hgt+"px",setTimeout(function(){e.addEventListener("transitionend",this._transEnd),this._hgt||this.tranEnd.call(this,{})}.bind(this),20)}.bind(this),20)}},determine:function(e){var t,o,a,r=e.children,i=this.$node;i.querySelector("lyte-dropdown")?this.getChildren(r):(o=e.querySelector("lyte-drop-box"),(t=e.querySelector("lyte-drop-button"))&&(a=i.querySelector(".lyteDummyEventContainer"),this.setData("drophead","yield"),_lyteUiUtils.appendChild(a,t)),o&&(this.setData("dropbody","yield"),o.classList.add("lyteDropdownHidden")))},addClass:function(){this.childComp.classList.add("lyteMultiSelectDropdown")},closeDrop:function(e,t,o,a){if(_lyteDropdown.autoClosed=null,this.setData("ltPropIsOpen",!1),!this._prevent)if(this.getData("ltPropAnimate")&&!a){var r=this.data.ltPropAnimateBox;this._prevent=!0,this._preventSetcss=!0,this._arguments=arguments,this.childComp.classList.add("lyteAnimate"),r&&this.childComp.classList.add("lyteDropBoxAnimate"),setTimeout(function(){var e=this.childComp?this.childComp:this.$node.querySelector("lyte-drop-box"),t=r?e:this.getDropBody(this.childComp);t.style.height=this._hgt+"px",setTimeout(function(){t.style.height=0,-1!=["up","upLeft","upRight"].indexOf(this.getData("pos"))&&(e.style.top=parseInt(e.style.top)+this._hgt+"px"),this._animationStarted=!0,this._elem=t,this._box=e,t.addEventListener("transitionend",this._close),this._hgt||this.closeDrop1.call(this)}.bind(this),20)}.bind(this),20)}else this.closeDrop1(e,t,o)},closeDrop1:function(e,t,o){var a,r=this.$node.querySelector("lyte-drop-button"),i=this.getData("pos"),s=this.getData("multiple"),l=this.getDropBox(),n=this.getData("ltPropPreventScroll"),p=this.getData("ltPropPreventParentScroll");if(this._arguments&&(e=this._arguments[0],t=this._arguments[1],o=this._arguments[2],this._elem.style.height=this._oriStyle,this._box.classList.remove("lyteAnimate","lyteDropBoxAnimate"),this._elem.removeEventListener("transitionend",this._close),delete this._hgt,delete this._oriStyle,delete this._arguments,delete this._elem,delete this._box),s&&(this.getDropBody(e).scrollTop=0),e.classList.add("lyteDropdownHidden"),document.querySelector("#lytedropdownfreezelayer")&&"all"===n&&(document.querySelector("#lytedropdownfreezelayer").style.display="none"),e.style.left="",e.style.top="",(o||p)&&document.body.classList.remove("lyteBodyWrapper"),this.disableParentListeners(),(a=this.removeClass(r.classList,i,"lyteDropButton",!0))&&r.classList.remove(a),this.getMethods("onHide")&&this.executeMethod("onHide",t,this),this.focusButton(),l)var c=this.removeClass(l.classList,i,"lyteDropdown",!0);c&&l.classList.remove(c),this.setData("pos",""),this.setData("secondaryPosition",""),this.setData("savedPositions",{}),delete this._prevent,delete this._preventSetcss,delete this._preventAnimate,delete this._animationStarted},focusButton:function(){var e=this.getData("search"),t=document.activeElement;!this.getData("ltPropFocusOnClose")||e||this.isFocusable(t)||this.setData("ltPropFocus",!0)},isFocusable:function(e){var t;return e=$L(e),!(!_lyteDropdown.isVisible(e.get(0))||e.is(":disabled"))&&(t=e.attr("tabindex"),t=isNaN(t)?-1:t,e.is("button, input, select, textarea, a[href], area[href], iframe")||t>-1)},callOnScroll:function(e){this.getMethods("onScroll")&&this.executeMethod("onScroll",e,this)},addDisabledClass:function(e){for(var t,o=0;o<e.length;o++)"true"==(t=e[o]).getAttribute("disabled")?t.classList.add("lyteDropdown-disabled"):t.classList.contains("lyteDropdown-disabled")&&t.classList.remove("lyteDropdown-disabled")},changeBoxClass:function(e){var t=e.oldValue;this.setBoxClass(t)}.observes("ltPropBoxClass"),changeButtonClass:function(e){var t=e.oldValue;this.setButtonClass(t)}.observes("ltPropButtonClass"),noResultChanged:function(){var e=this.childComp,t=this.getData("ltPropType"),o=this.getData("drophead"),a=this.getDropBody(e).querySelector(".lyteDropdownNoResult"),r=this.getData("ltPropNoResult");e=this.childComp;a.textContent=r,r||(a.style.display="none"),e&&this.showError(e,t,o)}.observes("ltPropNoResult"),showNoResultDiv:function(){var e=this.getData("ltPropShowEmptyMessage"),t=this.childComp,o=this.getDropBody(t),a=o.querySelectorAll("lyte-drop-item"),r=o.querySelector(".lyteDropdownNoResult"),i=this.getData("multiple");r&&(e&&!i?0===a.length?r.style.display="block":r.style.display="none":e||i||(r.style.display="none"))},onChangeInDisabledList:function(){for(var e,t=this.childComp?this.childComp.querySelectorAll("lyte-drop-item"):this.$node.querySelectorAll("lyte-drop-item"),o=0;o<t.length;o++)"true"===(e=Lyte.Component.registeredHelpers.lyteUiCheckDisabled(this.getData("ltPropDisabledList")||[],t[o].dataset.value))&&(t[o].classList.remove("lyteDropdownSelection"),t[o].setAttribute("disabled",e)),"false"===e&&t[o].hasAttribute("disabled")&&t[o].removeAttribute("disabled");this.addDisabledClass(t)}.observes("ltPropDisabledList.[]").on("didConnect"),removeClass:function(e,t,o,a,r){if(!t)return"";r=r||"";for(var i=0,s=e.length,l=o+(a?t[0].toUpperCase()+t.substring(1):{up:"Down",down:"Up",left:"Right",right:"Left"}[t])+r;i<s;i++)if(e[i]===l)return l;return""},firePosCallBack:function(){var e=this.getData("pos"),t=this.getData("widthAdjusted");if(""!==e){var o=this.childComp,a=this.$node.querySelector("lyte-drop-button"),r=this.removeClass(o.classList,e,"lyteDropdown");r&&(this._preventClass=!0,o.classList.remove(r)),o.classList.add("lyteDropdown"+e[0].toUpperCase()+e.substring(1)),(r=this.removeClass(a.classList,e,"lyteDropButton"))&&(this._preventClass=!0,a.classList.remove(r)),a.classList.add("lyteDropButton"+e[0].toUpperCase()+e.substring(1)),2===t&&o.classList.add("lyteDropdownCurve"),this.getMethods("onPositionChanged")&&this.executeMethod("onPositionChanged",e,this)}}.observes("pos","firePos"),secondaryPositionObserver:function(){var e=this.getData("secondaryPosition")||"";if(""!==e){var t=this.childComp,o=this.removeClass(t.classList,e,"lyteDropbox",!1,"AlignToButton");o&&t.classList.remove(o),this._preventClass=!0,t.classList.add("lyteDropbox"+e[0].toUpperCase()+e.substring(1)+"AlignToButton")}}.observes("secondaryPosition"),setLeftExceedForDown:function(e,t,o,a,r){var i=o;return r+i.left+i.width-a},setLeftNotExceedForDown:function(e,t,o){return o+t.left},setTopAboveForDown:function(e,t,o,a,r){var i=r,s=o.top,l=i+s-a.height;return this._animationStarted?i+s:l},setTopBelowForDown:function(e,t,o){var a=t;return o+a.top+a.height},setLeftForRight:function(e,t,o){var a=t;return o+a.left+a.width},setRightForRight:function(e,t,o,a,r){return r+o.left-a},setTopForRight:function(e,t,o){return o+t.top},setTopForRightAbove:function(e,t,o,a,r){var i=r,s=o,l=s.top,n=s.height,p=i+l+n-a.height;return this._animationStarted?i+l+n:p},setCorrectClass:function(e){for(var t=this.childComp.querySelector(".lyteArrow"),o=t.classList,a=0;a<o.length;a++)"lyteArrow"!=o[a]&&o[a]!=e&&(t.classList.remove(o[a]),a--);t.classList.add(e),t.classList.add("lyteArrowIcon")},hasClassToggled:function(e,t){var o=e.oldValue?e.oldValue.trim().split(" "):[],a=e.target,r=o.length,i=a.classList.length;return!(!(~o.indexOf(t)&&!a.classList.contains(t)||!~o.indexOf(t)&&a.classList.contains(t))||1!==Math.abs(r-i))},wasVisibilityAddedOrRemoved:function(e,t){return!!~e.indexOf("visibility")&&!~t.indexOf("visibility")||!!~t.indexOf("visibility")&&!~e.indexOf("visibility")},didValueChange:function(e,t){return!!~e.indexOf("visible")&&!!~t.indexOf("hidden")||!!~e.indexOf("hidden")&&!!~t.indexOf("visible")},isVisibilityModified:function(e,t){if(e=e||"",t=t||"",this.wasVisibilityAddedOrRemoved(e,t)||this.didValueChange(e,t))return!0},adjustWidth:function(e,t,o){var a=this.getData("ltPropBoxButtonWidth");return"min-button"===a?(this.setData("widthAdjusted",1),o>t&&this.setData("widthAdjusted",2),e.style.minWidth=t+"px"):"auto"===a?(this.setData("widthAdjusted",1),e.style.width="auto",e.getBoundingClientRect().width>t&&this.setData("widthAdjusted",2)):(this.setData("widthAdjusted",1),e.style.width=t+"px",e.style.minWidth=t+"px"),e.getBoundingClientRect().width},getDropBody:function(e){var t;return(t=e?e.querySelectorAll("lyte-drop-body"):this.$node.querySelectorAll("lyte-drop-body"))[t.length-1]},toggleCurrent:function(e){var t="lyteDropdownSelection",o=this.getDropBox().querySelector("."+t);o&&o.classList.remove(t),e.classList.add(t)},scrollSel:function(){var e,t,o=this.getData("ltPropSelected"),a=this.childComp,r=this.getDropBody(a),i=e=r.querySelector('[data-value="'+window._lyteUiUtils.escape(o)+'"]');if(this.getData("multiple"))(e=r.querySelector("lyte-drop-item:not(.lyteDropdownActive):not(.lyteSearchHidden)"))&&!e.classList.contains("lyteDropdown-disabled")&&this.toggleCurrent(e);else{for(0===(o||"").length&&(r.scrollTop=0);i&&(i=i.previousElementSibling)&&("LYTE-DROP-ITEM"!==i.tagName&&"LYTE-DROP-LABEL"!==i.tagName||!_lyteDropdown.isVisible(i)););i=i||e,r.scrollTop=i?i.offsetTop:0,e&&!e.classList.contains("lyteDropdown-disabled")?this.toggleCurrent(e):(t=r.querySelector(".lyteDropdownSelection"))&&t.classList.remove("lyteDropdownSelection")}},clone:function(e){var t={};for(var o in e)t[o]=e[o];return t},isFF:function(){return!!~navigator.userAgent.indexOf("Firefox")},isBodyScrollable:function(){var e=this.childComp,t=this.getDropBody(e);return t.scrollHeight>t.offsetHeight},addProperScrollbar:function(){var e=this.childComp,t=this.getDropBody(e);t.classList.contains("lyteDropdownFFScroll")||t.classList.add("lyteDropdownFFScroll"),t.classList.contains("lyteDropdownFFZeroScroll")&&t.classList.remove("lyteDropdownFFZeroScroll")},removeScrollbar:function(){var e=this.childComp,t=this.getDropBody(e);t.classList.contains("lyteDropdownFFZeroScroll")||t.classList.add("lyteDropdownFFZeroScroll"),t.classList.contains("lyteDropdownFFScroll")&&t.classList.remove("lyteDropdownFFScroll")},setCss:function(e,t){var o=this.childComp,a=this.getData("call");if(t||this.setData("savedPositions",{}),o&&!o.classList.contains("lyteDropdownHidden")){var r=this.getData("ltPropCallout"),i=o,s=this.$node.element,l=s||this.$node.querySelector("lyte-drop-button"),n=(window.innerWidth,window.innerHeight,this.getData("savedPositions")),p=this.clone(i.getBoundingClientRect()),c=this.getDropBody(i).getBoundingClientRect(),d=window.pageXOffset||document.documentElement.scrollLeft,u=window.pageYOffset||document.documentElement.scrollTop,h=i.offsetHeight,m=i.offsetWidth,y=o.querySelector(".lyteArrow"),f=this.getData("ltPropPosition"),g=l.getBoundingClientRect(),v=this.isFF(),x=this.getScopeBoundary();this.data.ltPropAnimate&&(this._hgt=this.data.ltPropAnimateBox?p.height:c.height),a&&(this._preventClass=!0,this.scrollSel(),e||(m=this.adjustWidth(i,g.width,m),p.width=m,r||(y.style.width=g.width+"px"))),r&&!i.classList.contains("lyteDropBodyCallout")&&i.classList.add("lyteDropBodyCallout"),v&&this.isBodyScrollable()?this.addProperScrollbar():v&&!this.isBodyScrollable()&&this.removeScrollbar();var P,b,D,L,C,_,S,w,T,E,A,M=_lyteUiUtils.getRTL();"down"===f?(P=!0,P=!(g.top+g.height+h>x.bottom&&g.top>h),b=0,g.left+g.width-m>x.left&&(b=1),g.left+m<=x.right&&(b+=2),b=M?!(1&b||!b):!(!(2&b)&&b),t&&!_lyteDropdown.isEmpty(n)?(b=n.rightPos,P=n.downPos):t&&(n.rightPos=b,n.downPos=P,this.setData("savedPositions",n)),P?r?(this.setCorrectClass("lyteArrowTop"),E=window.getComputedStyle(y,":before").getPropertyValue("border-left-width"),C=this.setTopBelowForDown(l,g,u)+parseFloat(E||"0px")+"px"):i.style.top=this.setTopBelowForDown(l,g,u)+"px":r?(this.setCorrectClass("lyteArrowBottom"),E=window.getComputedStyle(y,":before").getPropertyValue("border-left-width"),C=this.setTopAboveForDown(l,i,g,p,u)-parseFloat(E||"0px")+"px"):i.style.top=this.setTopAboveForDown(l,i,g,p,u)+"px",b?(r&&(A=window.getComputedStyle(y,":before").getPropertyValue("border-left-width"),A=parseFloat(A||"0px"),_=window.getComputedStyle(y,":before").marginLeft,_=Math.abs(parseFloat(_||"0px")),T=(g.width/2-A+_)/(w=m/100),y.style.left=T+"%"),i.style.top=C||i.style.top,i.style.left=this.setLeftNotExceedForDown(l,g,d)+"px"):(r&&(A=window.getComputedStyle(y,":before").getPropertyValue("border-left-width"),A=parseFloat(A||"0px"),_=window.getComputedStyle(y,":before").marginLeft,_=Math.abs(parseFloat(_||"0px")),w=m/100,T=(m-g.width/2-A+_)/w,y.style.left=T+"%"),i.style.top=C||i.style.top,i.style.left=this.setLeftExceedForDown(l,i,g,m,d)+"px"),P?this.setData("pos","down"):this.setData("pos","up"),b?this.setData("secondaryPosition","right"):this.setData("secondaryPosition","left")):"right"===f?(b=0,g.left-p.width>x.left&&(b=1),g.left+g.width+p.width<x.right&&(b+=2),b=M?!(1&b||!b):!(!(2&b)&&b),P=!0,P=!(g.top+p.height>x.bottom),t&&!_lyteDropdown.isEmpty(n)?(b=n.rightPos,P=n.downPos):t&&(n.rightPos=b,n.downPos=P,this.setData("savedPositions",n)),b?r?(this.setCorrectClass("lyteArrowLeft"),A=window.getComputedStyle(y,":before").getPropertyValue("border-left-width"),A=parseFloat(A||"0px"),C=this.setLeftForRight(l,g,d)+A+"px"):i.style.left=this.setLeftForRight(l,g,d)+"px":r?(this.setCorrectClass("lyteArrowRight"),A=window.getComputedStyle(y,":before").getPropertyValue("border-left-width"),A=parseFloat(A||"0px"),C=this.setRightForRight(l,i,g,m,d)-A+"px"):i.style.left=this.setRightForRight(l,i,g,m,d)+"px",P?(r&&(E=window.getComputedStyle(y,":before").getPropertyValue("border-left-width"),E=parseFloat(E||"0px"),S=window.getComputedStyle(y,":before").marginTop,S=Math.abs(parseFloat(S||"0px")),T=100*(g.height/2-E+S)/(w=p.height),y.style.top=T+"%"),i.style.left=C||i.style.left,i.style.top=this.setTopForRight(l,g,u)+"px"):(r&&(E=window.getComputedStyle(y,":before").getPropertyValue("border-left-width"),E=parseFloat(E||"0px"),S=window.getComputedStyle(y,":before").marginTop,S=Math.abs(parseFloat(S||"0px")),T=100*(p.height-g.height/2-E+S)/(w=p.height),y.style.top=T+"%"),i.style.left=C||i.style.left,i.style.top=this.setTopForRightAbove(l,i,g,p,u)+"px"),b?this.setData("pos","right"):this.setData("pos","left"),P?this.setData("secondaryPosition","down"):this.setData("secondaryPosition","up")):"up"===f?(D=!0,D=!(g.top-p.height<x.top&&g.top+g.height+h<x.bottom),b=0,g.left+g.width-m>x.left&&(b=1),g.left+m<=x.right&&(b+=2),b=M?!(1&b||!b):!(!(2&b)&&b),t&&!_lyteDropdown.isEmpty(n)?(b=n.rightPos,D=n.topPos):t&&(n.rightPos=b,n.topPos=D,this.setData("savedPositions",n)),D?r?(this.setCorrectClass("lyteArrowBottom"),E=window.getComputedStyle(y,":before").getPropertyValue("border-left-width"),E=parseFloat(E||"0px"),C=this.setTopAboveForDown(l,i,g,p,u)-E+"px"):i.style.top=this.setTopAboveForDown(l,i,g,p,u)+"px":r?(this.setCorrectClass("lyteArrowTop"),E=window.getComputedStyle(y,":before").getPropertyValue("border-left-width"),E=parseFloat(E||"0px"),C=this.setTopBelowForDown(l,g,u)+E+"px"):i.style.top=this.setTopBelowForDown(l,g,u)+"px",b?(r&&(A=window.getComputedStyle(y,":before").getPropertyValue("border-left-width"),A=parseFloat(A||"0px"),_=window.getComputedStyle(y,":before").marginLeft,_=Math.abs(parseFloat(_||"0px")),T=(g.width/2+_-A)/(w=m/100),y.style.left=T+"%"),i.style.top=C||i.style.top,i.style.left=this.setLeftNotExceedForDown(l,g,d)+"px"):(r&&(A=window.getComputedStyle(y,":before").getPropertyValue("border-left-width"),A=parseFloat(A||"0px"),_=window.getComputedStyle(y,":before").marginLeft,_=Math.abs(parseFloat(_||"0px")),w=m/100,T=(m-g.width/2+_-A)/w,y.style.left=T+"%"),i.style.top=C||i.style.top,i.style.left=this.setLeftExceedForDown(l,i,g,m,d)+"px"),D?this.setData("pos","up"):this.setData("pos","down"),b?this.setData("secondaryPosition","right"):this.setData("secondaryPosition","left")):"left"===f&&(L=0,g.left+g.width+m<x.right&&(L=1),g.left-m>x.left&&(L+=2),L=M?!(1&L||!L):!(!(2&L)&&L),P=!0,P=!(g.top+p.height>x.bottom),t&&!_lyteDropdown.isEmpty(n)?(L=n.leftPos,P=n.downPos):t&&(n.leftPos=L,n.downPos=P,this.setData("savedPositions",n)),L?r?(this.setCorrectClass("lyteArrowRight"),A=window.getComputedStyle(y,":before").getPropertyValue("border-left-width"),A=parseFloat(A||"0px"),C=this.setRightForRight(l,i,g,m,d)-A+"px"):i.style.left=this.setRightForRight(l,i,g,m,d)+"px":r?(this.setCorrectClass("lyteArrowLeft"),A=window.getComputedStyle(y,":before").getPropertyValue("border-left-width"),A=parseFloat(A||"0px"),C=this.setLeftForRight(l,g,d)+A+"px"):i.style.left=this.setLeftForRight(l,g,d)+"px",P?(r&&(E=window.getComputedStyle(y,":before").getPropertyValue("border-left-width"),E=parseFloat(E||"0px"),S=window.getComputedStyle(y,":before").marginTop,S=Math.abs(parseFloat(S||"0px")),T=100*(g.height/2-E+S)/(w=p.height),y.style.top=T+"%"),i.style.left=C||i.style.left,i.style.top=this.setTopForRight(l,g,u)+"px"):(r&&(E=window.getComputedStyle(y,":before").getPropertyValue("border-left-width"),E=parseFloat(E||"0px"),S=window.getComputedStyle(y,":before").marginTop,S=Math.abs(parseFloat(S||"0px")),T=100*(p.height-g.height/2-E+S)/(w=p.height),y.style.top=T+"%"),i.style.left=C||i.style.left,i.style.top=this.setTopForRightAbove(l,i,g,p,u)+"px"),L?this.setData("pos","left"):this.setData("pos","right"),P?this.setData("secondaryPosition","down"):this.setData("secondaryPosition","up")),i.__height=h}},getScopeBoundary:function(){var e,t,o=this.getData("ltPropScope"),a={left:0,top:0,right:window.innerWidth,bottom:window.innerHeight};return"window"!==o&&(e=$L(this.$node).closest(o).get(0))?(t=e.getBoundingClientRect(),{left:Math.max(0,t.left),top:Math.max(0,t.top),right:Math.min(window.innerWidth,t.right),bottom:Math.min(window.innerHeight,t.bottom)}):a},setFreezeLayer:function(){var e=document.getElementById("lytedropdownfreezelayer");"all"===this.getData("ltPropPreventScroll")&&(e.style.display="block",e.classList.add("lyteDropdownZIndex")),document.body.classList.add("lyteBodyWrapper")},isInView:function(e){var t=this.getDropBody(this.childComp),o=t.scrollTop,a=t.offsetHeight,r=e.offsetTop,i=e.offsetHeight;return r>=o&&r+i<=o+a},moveIntoView:function(e){var t=this.getDropBody(this.childComp).scrollTop;e.offsetTop<=t?this.moveDown(e):this.moveUp(e)},moveDown:function(e){this.getDropBody(this.childComp).scrollTop=e.offsetTop},moveUp:function(e){var t=this.getDropBody(this.childComp);t.scrollTop=e.offsetTop+e.offsetHeight-t.offsetHeight},scrollIntoView:function(e,t){var o=this.getDropBody(this.childComp);e.offsetTop,o.scrollTop,o.getBoundingClientRect().height,e.getBoundingClientRect().height;o.contains(e)&&(this.isInView(e)||this.moveIntoView(e))},open:function(){var e,t=this,o=this.getData("ltPropType"),a=this.getData("drophead"),r=this.getData("multiple"),i=this.getData("ltPropFreeze"),s=this.getData("ltPropHover");e=this.childComp=this.$node.querySelector("lyte-drop-box"),this.closeError(e,a),this.hideNodes(),"multisearch"===o&&"yield"!==a&&$L(this.$node.querySelector(".lyteDropdownTextField")).search({scope:e,trim:!0,search:"lyte-drop-item",related:"lyte-drop-group",onSearch:function(e,o,a){var r,i=0,s=t.childComp,l=t.getDropBody(s).querySelector(".lyteDropdownNoResult"),n=t.getData("ltPropNoResult");if(t.getMethods("onSearch")&&(r=t.executeMethod("onSearch",e,o,a,t)),!1===r)return r;for(;i<e.length;i++)if(!e[i].classList.contains("lyteDropdownActive"))return void(l&&(l.style.display="none"));"none"===l.style.display&&n&&(l.style.display="block")}}),_lyteUiUtils.appendChild(document.body,e),e.origindd=this.$node,e.classList.remove("lyteDropdownHidden"),this.preventParentScroll(),!i||r||s||this.setFreezeLayer()},preventParentScroll:function(){if(this.getData("ltPropPreventParentScroll")){var e,t,o=$L(this.$node).parents(),a=this;e=o.filter(this.isScrollable),t=(t=o.filter(this.isLyteScrollBar)).map((function(e,t){return t.parentNode})),e.each((function(e,t){$L(t).data("lyte-scrollTop",t.scrollTop),$L(t).data("lyte-scrollLeft",t.scrollLeft)})),this.scrollableParents=e,this.lyteScrollBarParents=t,this.scrollableParents.on("scroll",this.resetScroll),this.lyteScrollBarParents.each((function(e,t){t&&(t.addEventListener("touchmove",a.disableLyteScrollBar,!0),t.addEventListener("wheel",a.disableLyteScrollBar,!0))})),document.body.classList.add("lyteBodyWrapper")}},disableLyteScrollBar:function(e){e.stopPropagation()},isScrollable:function(e,t){var o=$L(t).css("overflow-y"),a=$L(t).css("overflow-x");return t.clientWidth<t.scrollWidth&&("auto"===a||"scroll"===a)||t.clientHeight<t.scrollHeight&&("auto"===o||"scroll"===o)},isLyteScrollBar:function(e,t){return t.classList.contains("lyteScrollBar")},resetScroll:function(){var e=$L(this).data("lyte-scrollTop"),t=$L(this).data("lyte-scrollLeft");this.scrollTop=e,this.scrollLeft=t},hideNodes:function(){var e,t,o=this.childComp,a=0,r=this.getData("multiple"),i=this.getData("ltPropType"),s=this.getData("drophead"),l=this.getData("ltPropSelected");if(r&&l&&l.length>2){if(!o)return;try{e=JSON.parse(this.getData("ltPropSelected")||"[]")}catch(e){return void console.error("Unable to parse ltPropSelected",e)}for(;a<e.length;a++)(t=o.querySelector('[data-value="'+window._lyteUiUtils.escape(e[a])+'"]'))&&(t.classList.add("lyteDropdownActive"),this.hideGroup(t),this.setData("preventSel",!0),t.setAttribute("selected",!0),this.setData("preventSel",!1))}this.showError(o,i,s)},showNodes:function(e){var t,o,a,r,i=0,s=this.childComp,l=this.getDropBody(s),n=this.getData("multiple"),p=this.getData("ltPropType"),c=this.getData("drophead"),d=this.getData("ltPropSelectedList"),u=this.getData("sysValue"),h=e.newValue,m=e.oldValue;if(n){s&&(r=l.querySelector(".lyteDropdownNoResult"));try{h=JSON.parse(h||"[]").map((function(e){return""+e})),m=JSON.parse(m||"[]").map((function(e){return""+e}))}catch(e){return void console.error("Unable to parse ltPropSelected",e)}for(o=m.length;i<o;i++)if(-1===h.indexOf(m[i])){for(s&&(a=s.querySelector('[data-value="'+window._lyteUiUtils.escape(m[i])+'"]'))&&(a.classList.remove("lyteDropdownActive"),this.showGroup(a),this.setData("preventSel",!0),a.removeAttribute("selected"),this.setData("preventSel",!1)),this.setData("preventSelListObs",!0),t=0;t<d.length;t++)if(""+d[t][u]===m[i]){Lyte.arrayUtils(d,"removeAt",t,1);break}this.setData("preventSelListObs",!1),r&&("multisearch"===p&&"yield"!==c||"multiple"===p)&&(r.style.display="none")}}},selObs:function(e){var t=e.oldValue;if(!this.getData("prev")){if(this.checkLimit(0))return this.setData("prev",!0),this.setData("ltPropSelected",t),void this.setData("prev",!1);this.hideNodes(),this.showNodes(e)}}.observes("ltPropSelected"),toggleDropdownClass:function(){var e=this.$node,t=this.getData("ltPropSelected")||"[]";this.getData("multiple")&&((t=JSON.parse(t)).length>0?e.classList.remove("lyteDropNoOptSelected"):e.classList.add("lyteDropNoOptSelected"))},first:function(){var e=this.getData("ltPropType");this.setData("ltPropShow",!0),this.setData("ltPropIsOpen",!0),this.open(),"multisearch"===e&&this.focusInput()},subsequent:function(e,t,o,a){var r=this.getData("ltPropType"),i=this.getData("drophead");this.setData("ltPropIsOpen",!0),e.classList.remove("lyteDropdownHidden"),this.preventParentScroll(),!t||o||a||this.setFreezeLayer(),"multisearch"===r&&this.focusInput(),this.closeError(e,i),this.showError(e,r,i)},beforeShow:function(e,t,o){var a,r=this,i=this.getDropBox(),s=this.getData("ltPropFreeze"),l=this.getData("multiple"),n=this.getData("ltPropHover");(a=this.executeMethod("onBeforeShow",e,this))&&a.then?(_lyteDropdown.lastDropdownWithAPromise=this.$node,this.setData("blockShowHide",!0),a.then((function(a){r.setData("blockShowHide",!1),r.isNotLastDropdownWithPromise()||(r.setData("call",!!t||e),o?r.first():r.subsequent(i,s,l,n))})).catch((function(e){r.setData("blockShowHide",!1),i.removeAttribute("lyte-hidden"),console.error(e)}))):!1!==a?(r.setData("call",!!t||e),o?r.first():r.subsequent(i,s,l,n)):!1===a&&i.removeAttribute("lyte-hidden")},getDropBox:function(){var e=this.childComp;return e||(e=this.$node.querySelector("lyte-drop-box")),e},isNotLastDropdownWithPromise:function(){var e=_lyteDropdown.lastDropdownWithAPromise;return this.$node!==e},closeError:function(e,t){var o=this.getDropBody(e).querySelector(".lyteDropdownNoResult"),a=this.getData("ltPropType");o&&("yield"!==t&&"multisearch"===a||"multiple"===a)&&(o.style.display="none")},checkLimit:function(e){var t,o=this.getData("ltPropType"),a=this.getData("ltPropMaxCount"),r=this.getData("ltPropSelected");if("multiple"===o||"multisearch"===o)return t=JSON.parse(r||"[]").length+e,a>0&&t>a||void 0},findMarked:function(e,t){var o,a,r=[],i=t.length;try{e=JSON.parse(e||"[]").map((function(e){return""+e}))}catch(e){console.error("Unable to parse ltPropSelected",e)}for(o=0;o<i;o++)a=e.indexOf(t[o].getAttribute("data-value")),r=r.concat(e.splice(a,1));return{removed:r,selected:e}},removeMarked:function(e,t,o,a){var r,i,s,l,n=t.length,p=this.getData("ltPropSelectedList"),c=this.getData("sysValue");for(this.setData("preventSelListObs",!0),r=0;r<n;r++)for(i=0;i<p.length;i++)if(""+p[i][c]==t[r].getAttribute("data-value")){Lyte.arrayUtils(p,"removeAt",i);break}for(this.setData("preventSelListObs",!1),s=this.getDropBody(a),r=0;r<t.length;r++)(l=s.querySelector('[data-value="'+window._lyteUiUtils.escape(t[r].getAttribute("data-value"))+'"]'))&&(l.classList.remove("lyteDropdownActive"),l.classList.remove("lyteSearchHidden"),this.showGroup(l),l.removeAttribute("selected"));this.setData("prev",!0),this.setData("ltPropSelected",JSON.stringify(e)),this.setData("prev",!1)},removeAll:function(e){var t,o,a=this.$node,r=this.childComp,i=this.getData("drophead"),s=a.querySelector("lyte-drop-button").querySelectorAll(".lyteDropMark"),l=this.getData("ltPropSelected"),n=this.getData("ltPropSelected");o=this.findMarked(n,s),t=this.getData("isKeyDown")?"keydown":"click",this.beforeRemove(e,o.removed,t,s)||(this.removeMarked(o.selected,s,i,r),this.closeError(r,i),this.getMethods("onRemove")&&this.executeMethod("onRemove",e,o.removed,this.getData("ltPropSelected"),this,t,s),this.fireOnChange(l,e,s)),e.stopPropagation()},relativePosition:function(e,t){var o=e;if(1===t.length&&t[0]===e)return!0;for(;o=o.previousElementSibling;)if(o.getAttribute("lyte-last"))return!0;return!1},shade:function(e){var t,o=this.$node.querySelector("lyte-drop-button").querySelectorAll(".lyteDropMark");if(!(o.length>1&&e.classList.contains("lyteDropMark"))){t=0===o.length||this.relativePosition(e,o)?"previousElementSibling":"nextElementSibling";do{e.classList.add("lyteDropMark")}while((e=e[t])&&!e.getAttribute("lyte-last"))}},fireCheckKey:function(){this.$node.constructor._actions.checkKey.call(this,event)},fireOnChange:function(e,t,o){var a=this.getData("ltPropSelected");this.hasValueChanged(e)&&this.getMethods("onChange")&&this.executeMethod("onChange",t,a,this,o)},hasValueChanged:function(e){var t=this.getData("ltPropSelected");return this.getData("multiple")?(e=this.stringifyALS(e))!==(t=this.stringifyALS(t)):e!==t},stringifyALS:function(e){return e=e||"[]",e=JSON.parse(e).map((function(e){return""+e})),JSON.stringify(e)},mark:function(e,t,o){t?(_lyteDropdown.unmark(this),this.shade(e)):o?(_lyteDropdown.unmark(this),e.classList.add("lyteDropMark")):(_lyteDropdown.unmark(),e.classList.add("lyteDropMark")),this.setLast(e)},beforeSelect:function(e,t){var o=this.getData("ltPropSelected"),a=!0,r=t.getAttribute("data-value");return this.getMethods("beforeSelect")&&(a=!1!==(a=this.executeMethod("beforeSelect",e,o,this,t,r))),a},focusInput:function(){var e;window._lyteUiUtils.isMobile?(e=this.$node.querySelector("input"))&&e.focus():$L.fastdom.measure((function(){if(this.$node){var e=this.$node.querySelector("input");e&&e.focus()}}),this)},showError:function(e,t,o){var a,r=this.getDropBody(e),i=r.querySelectorAll("lyte-drop-item:not(.lyteDropdownActive):not(.lyteSearchHidden)");this.getData("ltPropNoResult")&&0===i.length&&(a=r.querySelector(".lyteDropdownNoResult"))&&("multisearch"===t&&"yield"!==o||"multiple"===t)&&(a.style.display="block")},beforeRemove:function(e,t,o,a){var r;return this.getMethods("onBeforeRemove")&&(r=0==(r=this.executeMethod("onBeforeRemove",e,t,this.getData("ltPropSelected"),this,o,a))),r},beforeAdd:function(e,t,o){var a;return this.getMethods("onBeforeAdd")&&(a=0==(a=this.executeMethod("onBeforeAdd",e,o,this.getData("ltPropSelected"),this,t))),a},beforeHide:function(e,t,o){var a=!1;if(this.getMethods("onBeforeHide")){if((a=this.executeMethod("onBeforeHide",t,this))&&a.then)return a.then(function(){this.closeDrop(e,t,o)}.bind(this,e,t,o)).catch((function(e){console.error(e)})),!0;a=0==a}return a},beforeScrollClose:function(e){this.getMethods("onBeforeScrollClose")&&this.executeMethod("onBeforeScrollClose",e)},beforeScrollOpen:function(e){this.getMethods("onBeforeScrollOpen")&&this.executeMethod("onBeforeScrollOpen",e)},setHighlight:function(e,t){for(var o,a,r=0;r<e.length&&!e[r].classList.contains("lyteDropdownSelection");r++);e[r]&&e[r]===t&&(a=o=r,(r=_lyteDropdown.find(e,r+1,!0))!=e.length?e[r].classList.add("lyteDropdownSelection"):-1!=(o=_lyteDropdown.find(e,o-1,!1))&&e[o].classList.add("lyteDropdownSelection"),e[a].classList.remove("lyteDropdownSelection"))},setLast:function(e){var t=document.querySelector('[lyte-last="true"]');t&&t.removeAttribute("lyte-last"),e.setAttribute("lyte-last",!0)},optCall:function(e,t,o){this.getMethods("onOptionSelected")&&this.executeMethod("onOptionSelected",e,t,this,o)},setInitialSelected:function(e){var t,o=(e=e||this.getData("ltPropOptions")||[])[0],a=!1;o.constructor==Object&&1==Object.keys(o).length&&(t=o[Object.keys(o)[0]]).constructor==Array&&(a=!0),a?"[object Object]"===Object.prototype.toString.call(t[0])?this.setData("ltPropSelected",t[0][this.getData("ltPropSystemValue")]):this.setData("ltPropSelected",t[0]):"[object Object]"===Object.prototype.toString.call(o)?this.setData("ltPropSelected",o[this.getData("ltPropSystemValue")]):this.setData("ltPropSelected",o)},contentChange:function(e){var t=e.oldValue,o=e.newValue,a=this.getData("ltPropSelected"),r=this.getData("ltPropPlaceholder"),i=(this.getData("ltPropDisplayValue"),"yield"===this.getData("dropbody"));!((t&&0===t.length||!t)&&o&&o.length>0)||a||r||i||this.setInitialSelected(),this.showNoResultDiv()}.observes("ltPropOptions"),hideOptionsBasedOnSelected:function(){var e=this.childComp,t=this.getData("drophead"),o=this.getData("multiple"),a=this.getData("ltPropType");e&&o&&(this.hideNodes(),this.closeError(e,t),this.showError(e,a,t))}.observes("ltPropOptions"),selChange:function(){var e,t,o=this.getData("multiple"),a=this.getData("drophead"),r=this.childComp,i=this.getData("ltPropSelected"),s=this.getData("ltPropDisplayValue"),l=this.getData("preventDisp"),n=r||this.$node.querySelector("lyte-drop-box"),p=(this.getDropBody(n),0);if(!this.prevSelectedList){if(o)this.setSelectedList();else if(!o){for((t=n.querySelector('[data-value="'+window._lyteUiUtils.escape(i)+'"]'))&&this.toggleCurrent(t),e=n.querySelectorAll("[selected]");p<e.length;p++)e[p].getAttribute("data-value")!=i&&e[p].removeAttribute("selected");if("yield"!==a)if(t){var c=t.textContent;(s&&!l||!s)&&this.setData("ltPropDisplayValue",(c||"").trim())}else i||l||this.setData("ltPropDisplayValue","")}t&&t.setAttribute("selected","true"),this.toggleDropdownClass()}}.observes("ltPropOptions","ltPropSelected","changeItToInvoke"),setSelectedList:function(){var e,t=this.getData("ltPropSelected");if(t){try{e=JSON.parse(t||"[]").map((function(e){return""+e}))}catch(e){return void console.error("Could not parse ltPropSelected",e)}this.buildList(e)}},buildList:function(e){this.setData("preventSelListObs",!0);for(var t=0;t<e.length;t++)this.isPresentInList(e[t])||(this.isOptionsGiven()?this.buildWithOptions(e[t]):this.buildManually(e[t]));this.setData("preventSelListObs",!1)},isPresentInList:function(e){for(var t=this.getData("ltPropSelectedList"),o=this.getData("sysValue"),a=0;a<t.length;a++)if(""+t[a][o]===e)return!0;return!1},isOptionsGiven:function(){var e=this.getData("ltPropUserValue"),t=this.getData("ltPropSystemValue");return e||t},buildWithOptions:function(e){for(var t,o=this.getData("ltPropOptions")||[],a=this.getData("sysValue"),r=0;r<o.length&&!t;)this.isOptGroup(o[r])?t=this.getSelectedFromGroup(o[r],e):""+o[r][a]===e&&(t=o[r]),r++;Lyte.arrayUtils(this.getData("ltPropSelectedList"),"push",t)},isOptGroup:function(e){var t=Object.keys(e);t.length;return 1===t.length&&Array.isArray(e[t[0]])},getSelectedFromGroup:function(e,t){var o=Object.keys(e)[0],a=this.getData("sysValue");e=e[o]||[];for(var r=0;r<e.length;r++)if(""+e[r][a]===t)return e[r]},buildManually:function(e){var t=this.childComp,o={value:e,display:((t||this.$node.querySelector("lyte-drop-box")).querySelector('[data-value="'+window._lyteUiUtils.escape(e)+'"]')||{}).textContent};o.display&&Lyte.arrayUtils(this.getData("ltPropSelectedList"),"push",o)},tabIndexChange:function(){var e=this.getData("ltPropDisabled"),t=this.getElementWithTabIndex(),o=this.getData("ltPropTabindex");e?(this.disableClickableItem(t),t.tabIndex=-1):(this.enableClickableItem(t),t.tabIndex=o)}.observes("ltPropDisabled"),disableClickableItem:function(e){"multisearch"===this.getData("ltPropType")&&(e=this.getClickableItem(e)),e&&e.classList&&e.classList.add("lyteDropdown-disabled"),this.$node.classList.add("lyteDropdownDisabled")},enableClickableItem:function(e){"multisearch"===this.getData("ltPropType")&&(e=this.getClickableItem(e)),e&&e.classList&&e.classList.remove("lyteDropdown-disabled"),this.$node.classList.remove("lyteDropdownDisabled")},getClickableItem:function(e){return"noyield"===this.getData("drophead")?_lyteDropdown.traverse(e,["HTML","LYTE-DROP-BUTTON"]):this.$node.querySelector(".lyteDummyEventContainer")},hideGroup:function(e){var t=$L(e).parent();t.get(0)&&"LYTE-DROP-GROUP"===t.get(0).tagName&&0===this.getVisibleItems(t).length&&t.addClass("lyteDropdownHideGroup")},showGroup:function(e){var t=$L(e).parent();t.get(0)&&"LYTE-DROP-GROUP"===t.get(0).tagName&&this.getVisibleItems(t).length>0&&t.removeClass("lyteDropdownHideGroup")},getVisibleItems:function(e){return e.find("lyte-drop-item:not(.lyteDropdownActive):not(.lyteSearchHidden)")},setSelectedFromList:function(e){var t,o,a=this.getData("multiple"),r=this.getData("sysValue");this.getData("ltPropSelected");if(a&&(t=this.getData("ltPropSelectedList"),!e||this.calculateSelected)){o=[];for(var i=0;i<t.length;i++)o.push(""+t[i][r]);this.prevSelectedList=!0,this.setData("ltPropSelected",JSON.stringify(o)),this.prevSelectedList=!1,this.toggleDropdownClass()}},focusDropdown:function(){var e=this.getElementWithTabIndex(),t=this.getData("ltPropFocus"),o=this.getData("search");t&&(!o&&e?e.focus():o&&this.$node.open()),this.data.ltPropFocus=!1}.observes("ltPropFocus").on("didConnect"),showHideEmptyMessage:function(){this.showNoResultDiv()}.observes("ltPropShowEmptyMessage"),setSelectedFromListObs:function(){this.getData("preventSelListObs")||this.setSelectedFromList()}.observes("ltPropSelectedList.[]"),data:function(){return{shouldDisplayIcon:Lyte.attr("boolean",{default:!1}),changeItToInvoke:Lyte.attr("number",{default:1}),dummy1:Lyte.attr("boolean",{default:!0}),dummy2:Lyte.attr("boolean",{default:!1}),savedPositions:Lyte.attr("object",{default:{}}),ltPropRemoveMultiple:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","removeMultiple",!1)}),ltPropYield:Lyte.attr("boolean",{default:!1}),ltPropType:Lyte.attr("string",{default:"default"}),ltPropTabindex:Lyte.attr("number",{default:0}),ltPropShow:Lyte.attr("boolean",{default:!1}),ltPropFreeze:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","freeze",!0)}),ltPropOptions:Lyte.attr("array",{default:[]}),ltPropUserValue:Lyte.attr("string",{default:void 0}),ltPropSystemValue:Lyte.attr("string",{default:void 0}),ltPropPosition:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","position","down")}),ltPropIconClass:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","iconClass","dropdown")}),ltPropSelected:Lyte.attr("string",{default:""}),ltPropCallout:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","callout",!1)}),ltPropPlaceholder:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","placeholder","")}),ltPropDisabled:Lyte.attr("boolean",{default:!1}),ltPropHover:Lyte.attr("boolean",{default:!1}),ltPropNoResult:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","noResult",_lyteUiUtils.i18n("no.results.found"))}),ltPropMaxCount:Lyte.attr("number",{default:0}),ltPropInputClass:Lyte.attr("string",{default:"lyteSearch"}),ltPropBoundary:Lyte.attr("object",{default:{}}),pos:Lyte.attr("string",{default:""}),secondaryPosition:Lyte.attr("string",{default:""}),firePos:Lyte.attr("number",{default:1}),ltPropAjaxRequest:Lyte.attr("object",{default:{}}),firstRequest:Lyte.attr("boolean",{default:!0}),userValue:Lyte.attr("string"),sysValue:Lyte.attr("string"),ltPropDisplayValue:Lyte.attr("string",{default:"",hideAttr:!0}),ltPropDisabledList:Lyte.attr("array",{default:[]}),ltPropAnimate:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","animate",!1)}),ltPropSetPos:Lyte.attr("boolean",{default:!1}),ltPropTooltip:Lyte.attr("object",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","tooltip",{position:"bottom",appearance:"box",margin:5,keeptooltip:!0})}),ltPropBoxClass:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","boxClass","")}),ltPropIsOpen:Lyte.attr("boolean",{default:!1}),ltPropFocus:Lyte.attr("boolean",{default:!1}),ltPropFixPositionOnOpen:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","fixPositionOnOpen",!1)}),ltPropForcePlaceholder:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","forcePlaceholder",!1)}),ltPropShowEmptyMessage:Lyte.attr("boolean",{default:!1}),ltPropBoxButtonWidth:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","boxButtonWidth","min-button")}),ltPropPreventScroll:Lyte.attr("string",{default:"all"}),ltPropScope:Lyte.attr("string",{default:"window"}),ltPropAnimateBox:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","animateBox",!1)}),ltPropTooltipClass:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","tooltipClass","")}),ltPropDisplayList:Lyte.attr("array",{default:[]}),ltPropSelectedList:Lyte.attr("array",{default:[]}),searchMethod:Lyte.attr("string",{default:"contains"}),ltPropFocusOnClose:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","focusOnClose",!0)}),ltPropButtonClass:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","buttonClass","")}),ltPropDisableItemTooltip:Lyte.attr("boolean",{default:!1}),ltPropPreventParentScroll:Lyte.attr("boolean",{default:!1}),ltPropShowRemoveIcon:Lyte.attr("boolean",{default:!1})}},actions:{toolTipConfig:function(e,t){var o=e.offsetWidth,a=e.scrollWidth,r=this.getData("ltPropTooltip");t=t||"showToolTip",this.setData(t,o<a&&!_lyteDropdown.isEmpty(r))},preventDefault:function(e){13===e.keyCode&&e.preventDefault()},closeIt:function(e){var t=e.clientX,o=e.clientY,a=this.$node.querySelector("lyte-drop-button"),r=a.getBoundingClientRect().top,i=a.getBoundingClientRect().height,s=a.getBoundingClientRect().left,l=a.getBoundingClientRect().width,n=this.childComp,p=n.getBoundingClientRect().top,c=n.getBoundingClientRect().height,d=n.getBoundingClientRect().left,u=n.getBoundingClientRect().width;t>Math.floor(s)&&t<Math.floor(s+l)&&o>Math.floor(r)&&o<Math.floor(r+i)||t>Math.floor(d)&&t<Math.floor(d+u)&&o>Math.floor(p)&&o<Math.floor(p+c)||this.$node.toggle(e,"leave")},processElements:function(e){var t,o,a,r=this.childComp,i=e.target,s=this.getData("multiple"),l=this.getData("drophead"),n=this.getData("ltPropFreeze"),p=this.getData("ltPropType"),c=(this.getDropBody(r),this.getData("search")),d=this.getData("ltPropSelected");if(c&&(a=this.$node.querySelector("lyte-search")||this.$node.querySelector("input"),this.focusInput()),(i=_lyteDropdown.traverse(i,["HTML","LYTE-DROP-ITEM"]))&&"HTML"!==i.tagName&&"true"!==i.getAttribute("disabled"))if(s||"yield"===l)if(s){if(this.checkLimit(1))return;if(o=i.getAttribute("data-value"),this.getMethods("onBeforeAdd")&&this.beforeAdd(e,i,o))return;c&&a.setValue&&a.setValue(""),t=r.querySelectorAll("lyte-drop-item"),this.setHighlight(t,i),this.setData("prev",!0),i.setAttribute("selected","true"),this.setData("prev",!1),i.classList.add("lyteDropdownActive"),this.hideGroup(i),this.getMethods("onAdd")&&this.executeMethod("onAdd",e,o,this.getData("ltPropSelected"),this,i),this.showError(r,p,l),this.fireOnChange(d,e,i)}else{if(!this.beforeSelect(e,i))return;if(this.toggleCurrent(i),this.setData("ltPropSelected",i.getAttribute("data-value")),this.optCall(e,this.getData("ltPropSelected"),i),this.fireOnChange(d,e,i),this.beforeHide.call(this,r,e,n))return;this.closeDrop(r,e,n)}else{if(!this.beforeSelect(e,i))return;if(i.setAttribute("selected","true"),this.optCall(e,this.getData("ltPropSelected"),i),this.fireOnChange(d,e,i),this.beforeHide.call(this,r,e,n))return;this.toggleCurrent(i),this.closeDrop(r,e,n)}},closeFun:function(e){for(var t,o,a,r=this.childComp,i=this.getData("drophead"),s=this.getData("ltPropRemoveMultiple"),l=this.getData("ltPropSelected"),n=e.target,p=this.getData("ltPropSelected");!n.getAttribute("data-value")&&n;)n=n.parentElement;n&&(t=n.getAttribute("data-value"),o=this.getData("isKeyDown")?"keydown":"click",this.beforeRemove(e,s?[t]:t,o,s?[n]:n)||(this.closeError(r,i),a=this.findMarked(p,[n]),this.removeMarked(a.selected,[n],i,r),this.getMethods("onRemove")&&this.executeMethod("onRemove",e,s?[t]:t,this.getData("ltPropSelected"),this,o,s?[n]:n),this.fireOnChange(l,e,s?[n]:n)),e.stopPropagation())},checkKey:function(e){var t=this.getData("ltPropType");9==e.keyCode&&(this.$node.constructor._actions.showHide.call(this,e,e.type),"multisearch"==t&&this.focusInput())},showHide:function(e,t,o){var a,r=this.childComp,i=this.getData("ltPropFreeze"),s=this.getData("multiple"),l=this.getData("ltPropType"),n=this.getData("ltPropHover"),p=this.getData("ltPropRemoveMultiple"),c=this.getData("ltPropShow");if(!this.getData("blockShowHide")){if(_lyteDropdown.autoClosed=null,p&&e&&s){for(a=e.target;a&&"LYTE-DROPDOWN"!==a.tagName&&!a.getAttribute("data-value");)a=a.parentNode;if(a&&a.getAttribute("data-value"))return void this.mark(a,e.shiftKey,e.ctrlKey||e.metaKey);_lyteDropdown.unmark()}else _lyteDropdown.unmark();if("enter"==t){if(r&&!r.classList.contains("lyteDropdownHidden"))return;this.$node.querySelector("[tabindex]").focus()}if("leave"!=t||!r||!r.classList.contains("lyteDropdownHidden"))if(this.showNoResultDiv(),c)if(r&&r.classList.contains("lyteDropdownHidden"))r.setAttribute("lyte-hidden",""),this.getMethods("onBeforeShow")?this.beforeShow(e,o,!1):(this.setData("call",!!o||e),this.subsequent(r,i,s,n));else if(!r||!o&&s)r&&"multisearch"===l&&this.focusInput();else{if(this.beforeHide.call(this,r,e,i))return;this.closeDrop(r,e,i)}else r||(this.childComp=this.$node.querySelector("lyte-drop-box")),this.childComp&&this.childComp.setAttribute("lyte-hidden",""),this.getMethods("onBeforeShow")?this.beforeShow(e,o,!0):(this.setData("call",!!o||e),this.first()),s&&this.addClass()}}}}),window.addEventListener("scroll",(function(e){$L.fastdom.measure((function(){var t,o,a,r,i,s,l=_lyteDropdown.getVisibleDropbox(),n=e.target;if(l){for(;n!=document&&"LYTE-DROP-BOX"!==n.tagName&&"HTML"!==n.tagName;)n=n.parentElement;if("LYTE-DROP-BOX"!==n.tagName)if(o=l.origindd){if(i=(a=o.component).childComp,s=_lyteDropdown.buildBounds(a),(r=o.getBoundingClientRect()).top<s.top||r.left<s.left||r.right>s.right||r.bottom>s.bottom){if(a.beforeScrollClose(e),a.beforeHide.call(a,i,e,a.getData("ltPropFreeze")))return;a.closeDrop.call(a,i,e,a.getData("ltPropFreeze"),!0),a.getData("ltPropAnimate")||(_lyteDropdown.autoClosed=o)}o.component._preventSetcss||(t=o.component.getData("ltPropFixPositionOnOpen"),o.component.setCss(!0,t))}else _lyteDropdown.openAutoClosedDropdown(n,e)}else _lyteDropdown.openAutoClosedDropdown(n,e)}))}),!0),document.addEventListener("click",(function(e){var t,o,a,r,i,s,l,n,p,c,d,u=e.target,h=e.target,m=0,y=0;if(_lyteDropdown.isScrollBar(h)||(_lyteDropdown.autoClosed=null),u=_lyteDropdown.traverse(u,["LYTE-DROPDOWN","HTML","LYTE-DROP-BOX","LYTE-DROP-REMOVE"]),_lyteDropdown.focusOut&&(_lyteDropdown.preventClose=!(!u||"HTML"===u.tagName)),u)if("HTML"==u.tagName){for(_lyteDropdown.unmark(),r=document.querySelectorAll("lyte-drop-box:not(.lyteDropdownHidden)");y<r.length;y++)if(i=r[y]){if((s=i.origindd.component).beforeHide.call(s,i,e,s.getData("ltPropFreeze")))continue;l=document.getElementById("lytedropdownfreezelayer"),s.closeDrop.call(s,i,e,l)}(c=document.activeElement)&&"INPUT"===c.tagName&&_lyteDropdown.traverse(c,["LYTE-DROPDOWN"])&&c.blur()}else if("LYTE-DROPDOWN"===u.tagName)for(t=u,o=document.querySelectorAll("lyte-drop-box:not(.lyteDropdownHidden)");m<o.length;m++)o[m].origindd!=t&&(s=(n=o[m].origindd).component,_lyteDropdown.unmark(),s.beforeHide.call(s,s.childComp,e,s.getData("ltPropFreeze"))||s.closeDrop.call(s,s.childComp,e,s.getData("ltPropFreeze")));else if("LYTE-DROP-REMOVE"===u.tagName){for(n=u;"LYTE-DROPDOWN"!=n.tagName;)n.getAttribute("data-value")&&(p=n),n=n.parentElement;a=n.ltProp("type"),n.component.getData("drophead"),"default"===a?n.ltProp("selected",""):("multisearch"===a&&(n.component.focusInput(),(d=n.querySelector("lyte-search")||n.querySelector("input"))&&d.setValue&&d.setValue("")),p.classList.contains("lyteDropMark")?n.component.removeAll(e):(_lyteDropdown.unmark(),n.component.actions.closeFun.call(n.component,e)))}}),!0),window._lyteUiUtils.isIos&&document.addEventListener("focusout",(function(e){var t,o,a,r,i=e.target;(o=_lyteDropdown.traverse(i,"LYTE-DROPDOWN"))&&"INPUT"===e.target.tagName&&(a=o.component,t=a.childComp,r=a.getData("ltPropFreeze"),_lyteDropdown.focusOut=!0,setTimeout((function(){if(_lyteDropdown.preventClose)_lyteDropdown.preventClose=_lyteDropdown.focusOut=!1;else{if(t&&!t.classList.contains("lyteDropdownHidden")){if(a.beforeHide(t,e,r))return;a.closeDrop(t,e,r)}_lyteDropdown.focusOut=!1}}),0))}),!0),document.addEventListener("keydown",(function(e){var t,o,a,r,i,s,l,n,p,c,d,u,h,m=e.keyCode,y=document.querySelector("lyte-drop-box:not(.lyteDropdownHidden)"),f=0;if(32!==m&&40!==m||(h=r=document.activeElement,!(r=_lyteDropdown.traverse(r,["LYTE-DROPDOWN","HTML"]))||("LYTE-DROPDOWN"===r.tagName&&"INPUT"!==h.tagName&&e.preventDefault(),"LYTE-DROPDOWN"!==r.tagName||y&&r===y.origindd)))if(38!=m&&40!=m&&13!=m||!y){if(8===m){if((t=_lyteDropdown.getActive())&&(o=t.component,a=t.querySelector("lyte-drop-button").querySelector(".lyteDropMark")),!(s=_lyteDropdown.getDropdownWithFocusedInput()))return;i=(l=s&&s.component)&&l.getData("ltPropType"),a?(e.preventDefault(),o.setData("isKeyDown",!0),o.removeAll(e),o.setData("isKeyDown",!1)):s&&"multisearch"===i&&_lyteDropdown.isInput(e)&&(n=s.querySelectorAll("lyte-drop-remove")).length>0&&(s.component.setData("isKeyDown",!0),n[n.length-1].click(),s.component.setData("isKeyDown",!1))}else if((27===m||9===m)&&y){if(!(y=_lyteDropdown.traverse(y,["LYTE-DROP-BOX"])))return;if((l=y.origindd.component).beforeHide.call(l,l.childComp,e,l.getData("ltPropFreeze")))return;l.closeDrop.call(l,l.childComp,e,l.getData("ltPropFreeze"))}}else{if(38!=m&&40!=m||e.preventDefault(),i=(l=(s=y.origindd).component).getData("ltPropType"),!(p=(y=l.getDropBox()).querySelector(".lyteDropdownSelection"))||p&&!_lyteDropdown.isVisible(p)){for(d=y.querySelectorAll("lyte-drop-item:not(.lyteSearchHidden):not(.lyteDropdownActive)");f<d.length;f++)if(_lyteDropdown.isVisible(d[f])&&"true"!==d[f].getAttribute("disabled")){c=d[f];break}if(p&&p.classList.remove("lyteDropdownSelection"),c)return void c.classList.add("lyteDropdownSelection")}for(m=e.keyCode,d=y.querySelectorAll("lyte-drop-item"),f=0;f<d.length&&!d[f].classList.contains("lyteDropdownSelection");f++);if(13==m)if(l.getData("multiple")){if(!d[f])return;d[f].click()}else d[f]&&d[f].click();else 38==m&&0!=f?(u=f,-1!=(f=_lyteDropdown.find(d,f-1,!1))&&(l.scrollIntoView(d[f],"up"),d[u].classList.remove("lyteDropdownSelection"),d[f].classList.add("lyteDropdownSelection"))):40==m&&f!=d.length-1&&(u=f,(f=_lyteDropdown.find(d,f+1,!0))<d.length&&(l.scrollIntoView(d[f],"down"),d[u].classList.remove("lyteDropdownSelection"),d[f].classList.add("lyteDropdownSelection")))}else r.constructor._actions.showHide.call(r.component,e,e.type)})),document.addEventListener("keypress",(function(e){var t,o,a,r,i=e.which||e.keyCode,s=0,l=document.querySelectorAll("lyte-drop-box:not(.lyteDropdownHidden)"),n=function(e,t,o){if("contains"===o){if(-1!=e.trim().toLowerCase().indexOf(t.toLowerCase()))return!0}else if("startsWith"===o&&e.trim().substring(0,t.length).toLowerCase()===t.toLowerCase())return!0;return!1};if(l.length>0&&(i>=65&&i<=90||i>=97&&i<=122||i>=48&&i<=57)&&(_lyteDropdown.pressedCharacter=_lyteDropdown.pressedCharacter?_lyteDropdown.pressedCharacter+=String.fromCharCode(i):String.fromCharCode(i),_lyteDropdown.checkDDtimeoutId&&clearTimeout(_lyteDropdown.checkDDtimeoutId),_lyteDropdown.checkDDtimeoutId=setTimeout((function(){_lyteDropdown.pressedCharacter=null}),500),a="LYTE-DROPDOWN"==((a=(document.activeElement||{}).parentElement)||{}).tagName?a:null,l.length>0&&a)){for(s=0;s<l.length&&l[s].origindd!=a;s++);if(a=(l=l[s]).origindd,t=l.querySelectorAll("lyte-drop-item"),r=a.getData("searchMethod"),_lyteDropdown.cachePreviousVal.char&&_lyteDropdown.cachePreviousVal.char==_lyteDropdown.pressedCharacter&&_lyteDropdown.cachePreviousVal.pos+1<t.length&&n(t[_lyteDropdown.cachePreviousVal.pos+1].textContent,_lyteDropdown.pressedCharacter,r))o=_lyteDropdown.cachePreviousVal.pos+1;else for(s=0;s<t.length;s++)if(n(t[s].textContent,_lyteDropdown.pressedCharacter,r)){o=s;break}if(null!=o){for(var p=l.querySelectorAll(".lyteDropdownSelection"),c=0;c<p.length;c++)p[c].classList.remove("lyteDropdownSelection");t[o].classList.add("lyteDropdownSelection");var d=l.querySelector("lyte-drop-body");d.contains(t[o])&&(d.scrollTop+=parseInt(t[o].getBoundingClientRect().top-d.getBoundingClientRect().top))}_lyteDropdown.cachePreviousVal.char=_lyteDropdown.pressedCharacter,_lyteDropdown.cachePreviousVal.pos=o}})),window._lyteUiUtils.isMobile||window.addEventListener("resize",(function(e){delete this._hgt,_lyteDropdown.autoClosed=null;var t,o=document.querySelector("lyte-drop-box:not(.lyteDropdownHidden)");o&&!o.origindd.component._preventSetcss&&(t=o.origindd.component.getData("ltPropFixPositionOnOpen"),o.origindd.component.setCss(!0,t))})),_lyteUiUtils.registeredCustomElements["lyte-drop-box"]||(_lyteUiUtils.registeredCustomElements["lyte-drop-box"]=!0,Lyte.createCustomElement("lyte-drop-box",{static:{observedAttributes:{get:function(){return[]}}},connectedCallback:function(){var e,t=_lyteDropdown.traverse(this,["LYTE-DROPDOWN","BODY"]);"BODY"===t.tagName&&(t=this.origindd),t&&"LYTE-DROPDOWN"===t.tagName&&("multisearch"===(e=t.component).getData("ltPropType")||"multiple"===e.getData("ltPropType")?this.setAttribute("aria-multiselectable","true"):this.setAttribute("aria-multiselectable","false"),this.setAttribute("role","listbox"))}})),_lyteUiUtils.registeredCustomElements["lyte-drop-item"]||(_lyteUiUtils.registeredCustomElements["lyte-drop-item"]=!0,Lyte.createCustomElement("lyte-drop-item",{static:{observedAttributes:{get:function(){return["selected"]}}},connectedCallback:function(){this.setAttribute("option","role"),this._eventRegistered||(this._eventRegistered=!0,this.addEventListener("mouseenter",(function(){var e,t,o,a=this.getAttribute("data-title"),r=this.offsetWidth,i=this.scrollWidth,s=_lyteDropdown.getDropdownFromItem(this);s&&(s.getData("ltPropDisableItemTooltip")||(e=s.getData("ltPropTooltip"),t=s.getData("ltPropTooltipClass"),a=a||this.textContent.trim(),o=r<i&&!_lyteDropdown.isEmpty(e),this.setAttribute("lt-prop-title",o?a:""),o&&(this.setAttribute("lt-prop-tooltip-config",JSON.stringify(e)),this.setAttribute("lt-prop-tooltip-class",t))))})))},attributeChangedCallback:function(e,t,o,a){var r,i,s,l,n,p=this,c=this.getAttribute("data-value");if("selected"==e)if(this.hasAttribute("selected")){if(this.setAttribute("aria-selected","true"),!(p=_lyteDropdown.traverse(p,["LYTE-DROP-BOX","BODY"]))||"BODY"==p.tagName)return;if((r=p.origindd)||(r=p=_lyteDropdown.traverse(p,["LYTE-DROPDOWN","BODY"])),!(i=r.component))return;if(i.getData("preventSel"))return;"multiple"==(s=i.getData("ltPropType"))||"multisearch"==s?(l=i.getData("ltPropSelected"))&&2==l.length||!l?(l=JSON.stringify([c]),i.setData("ltPropSelected",l)):((n=JSON.parse(l)).push(c),i.setData("ltPropSelected",JSON.stringify(n))):i.setData("ltPropSelected",c)}else this.setAttribute("aria-selected","false")}}));var _lyteDropdown={lastDropdownWithAPromise:null,preventClose:!1,autoClosed:null,focusOut:!1,getDropdownFromItem:function(e){if((e=_lyteDropdown.traverse(e,["LYTE-DROP-BOX","BODY"]))&&"BODY"!=e.tagName){var t=e.origindd;return t||(t=e=_lyteDropdown.traverse(e,["LYTE-DROPDOWN","BODY"])),t.component}},getDropdownWithFocusedInput:function(){var e,t=document.activeElement;if(t&&"input"===t.nodeName.toLowerCase()&&(e=_lyteDropdown.traverse(t,["HTML","LYTE-DROPDOWN"])),e&&"lyte-dropdown"===e.nodeName.toLowerCase())return e},getVisibleDropbox:function(){for(var e=(document.body||{}).children||[],t=0;t<e.length;t++)if("LYTE-DROP-BOX"===e[t].tagName&&_lyteDropdown.isVisible(e[t]))return e[t]},isScrollBar:function(e){return e&&(e.classList.contains("lyteScrollContainer")||e.classList.contains("lyteScrollDiv"))},isInBounds:function(e,t){return e.top<t.top&&e.bottom>t.bottom&&e.left<t.left&&e.right>t.right},buildVisibleBounds:function(e,t,o){return{top:t?0:Math.max(e.top,0),left:t?0:Math.max(e.left,0),right:t?window.innerWidth:Math.min(window.innerWidth,e.left+o.offsetWidth),bottom:t?window.innerHeight:Math.min(window.innerHeight,e.top+o.offsetHeight)}},openAutoClosedDropdown:function(e,t){var o,a,r,i,s=e===document,l=_lyteDropdown.autoClosed;l&&(o=s?{}:e.getBoundingClientRect(),a=_lyteDropdown.buildVisibleBounds(o,s,e),i=(r=l.component).childComp,l&&e.contains(l)&&_lyteDropdown.isInBounds(a,l.getBoundingClientRect())&&i.classList.contains("lyteDropdownHidden")&&(r.beforeScrollOpen(t),l.toggle(),_lyteDropdown.autoClosed=null))},isEmpty:function(e){for(var t in e)return!1;return!0},buildBounds:function(e){var t,o,a=e.getData("ltPropBoundary"),r=e.getData("ltPropScope");return"window"!==r&&(t=$L(e.$node).closest(r).get(0))?(o=t.getBoundingClientRect(),{left:Math.max(0,o.left),top:Math.max(0,o.top),right:Math.min(window.innerWidth,o.right),bottom:Math.min(window.innerHeight,o.bottom)}):{left:a.left||0,right:a.right||window.innerWidth,top:a.top||0,bottom:a.bottom||window.innerHeight}},traverse:function(e,t){for(;e&&!~t.indexOf(e.tagName);)e=e.parentNode;return e},find:function(e,t,o){for(var a=o?1:-1,r=e.length;o?t<r:t>-1;t+=a)if(_lyteDropdown.isVisible(e[t])&&"true"!==e[t].getAttribute("disabled"))return t;return o?r:-1},isVisible:function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},pressedCharacter:null,checkDDtimeoutId:null,cachePreviousVal:{},isInput:function(e){var t=e.target;return!(!(t=_lyteDropdown.traverse(t,["LYTE-DROPDOWN"]))||"INPUT"!==e.target.tagName||"text"!==e.target.type||e.target.value)},unmark:function(e){for(var t,o=document.querySelectorAll(".lyteDropMark"),a=0,r=o.length;a<r;a++)(t=e?_lyteDropdown.findParent(o[a]):void 0)&&t==e.$node||o[a].classList.remove("lyteDropMark")},findParent:function(e){return e=_lyteDropdown.traverse(e,["LYTE-DROPDOWN"])},getActive:function(){var e=document.querySelector(".lyteDropMark");return _lyteDropdown.findParent(e)}};function _lyteInput(e){for(var t=window._lyteUiUtils.input,o=Object.keys(t||{}),a=0;a<o.length;a++){var r=t[o[a]].component;"click"==e.type?r.calenderClickHide.call(r,e):r.scrollFunc.call(r,e)}}function addPopoverEvent(e){document.addEventListener("click",(function(e){if(LytePopup._stopPropagation)LytePopup._sourceComp.setData("ltPropStopClick",!1);else{for(var t=e.target;!$L(t).hasClass("popoverWrapper")&&"LYTE-POPOVER-FREEZE"!=t.tagName&&"LYTE-DROP-BOX"!=t.tagName&&"HTML"!=t.tagName;)if(!(t=t.parentElement))return;if("HTML"==t.tagName||"LYTE-POPOVER-FREEZE"==t.tagName){for(var o=LytePopup.components.length-1;o>=0;o--)if("LYTE-POPOVER"==LytePopup.components[o].$node.tagName&&"visible"==LytePopup.components[o].childComp.style.visibility){var a=LytePopup.components[o].$node;if(a&&a.component.getData("visible")&&a.component.getData("ltPropCloseOnBodyClick")){a.component.setData("visible",!1),a.ltProp("show",!1);break}}}else if(t.classList.contains("popoverWrapper")&&LytePopup.components.length>1&&"LYTE-POPOVER"==LytePopup.components[LytePopup.components.length-1].$node.tagName){var r=LytePopup.components[LytePopup.components.length-1];!r.childComp.contains(t)&&r.getData("visible")&&r.getData("ltPropCloseOnBodyClick")&&(r.setData("visible",!1),r.$node.ltProp("show",!1))}}}),!0),window.addEventListener("scroll",(function(e){if(LytePopup.makingVisible)LytePopup.makingVisible=!1;else for(var t,o=LytePopup.components.length-1;o>=0;o--)if(LytePopup.components[o].$node&&"LYTE-POPOVER"==LytePopup.components[o].$node.nodeName&&"visible"==LytePopup.components[o].childComp.style.visibility&&(t=LytePopup.components[o].childComp)&&t._callee.component.$node.ltProp("scrollable")&&LytePopup.components[o].callOnScroll(e)){var a=t.querySelector(".lytePopover");if(!a)return;for(;"LYTE-WORMHOLE"!=a.tagName;)a=a.parentElement;for(var r=e.target;"LYTE-WORMHOLE"!=r.tagName&&"HTML"!=r.tagName&&"#document"!=r.nodeName;)r=r.parentElement;if("LYTE-WORMHOLE"==r.tagName&&r.isEqualNode(a))return;if(a._callee.component.computeOffsetImpl(),a._callee.component.getData("ltPropForceScroll"))return;var i=document.querySelector(a._callee.ltProp("originElem")),s=e.target,l=i.getBoundingClientRect(),n=a._callee.ltProp("boundary"),p=a.querySelector(".lytePopover"),c=a._callee.getData("windowSpacing");if(0===Object.keys(n).length&&n.constructor===Object||(n.top&&p.getBoundingClientRect().top<parseFloat(n.top)||n.bottom&&p.getBoundingClientRect().bottom>parseFloat(n.bottom)||n.left&&p.getBoundingClientRect().left<parseFloat(n.left)||n.right&&p.getBoundingClientRect().right>parseFloat(n.right))&&a._callee.ltProp("show",!1),s.contains(i)){var d=a.querySelector("#lytePopoverArrow");if(d&&d.classList.contains("lytePopoverArrowBottom")&&l.top+l.height/2>window.innerHeight&&a._callee.ltProp("show",!1),d&&(d.classList.contains("lytePopoverArrowLeft")||d.classList.contains("lytePopoverArrowRight"))&&(d.getBoundingClientRect().bottom>=a.querySelector(".lytePopover").getBoundingClientRect().bottom||d.getBoundingClientRect().top<=a.querySelector(".lytePopover").getBoundingClientRect().top)&&a._callee.ltProp("show",!1),"#document"==s.nodeName){var u=Math.max(document.documentElement.clientHeight,window.innerHeight||0),h=Math.max(document.documentElement.clientWidth,window.innerWidth||0);(l.top<c.top||l.bottom+3>=u-c.bottom)&&a._callee.ltProp("show",!1),(l.left<c.left||l.right+3>=h-c.right)&&a._callee.ltProp("show",!1)}else{var m=s.getBoundingClientRect();(m.top+c.top>l.top||m.top+m.height-c.bottom<l.top+l.height)&&a._callee.ltProp("show",!1),(m.left+c.left>l.left||m.left+m.width-c.right<l.left+l.width)&&a._callee.ltProp("show",!1)}}}}),!0),window.addEventListener("resize",(function(e){LytePopup._lytePopoverRTId&&(clearTimeout(LytePopup._lytePopoverRTId),LytePopup._lytePopoverRTId=!1),LytePopup._lytePopoverRTId=setTimeout((function(){for(var t=LytePopup.components.length-1;t>=0;t--)LytePopup.components[t].$node&&"LYTE-POPOVER"==LytePopup.components[t].$node.nodeName&&"visible"==LytePopup.components[t].childComp.style.visibility&&LytePopup.components[t].childComp.querySelector(".lytePopover")&&(LytePopup.components[t].$node.component.setData("resize",!0),LytePopup.components[t].$node.component.updateScrollHandling(e));LytePopup._lytePopoverRTId=!1}),100)}),!0)}function addModalEvent(e){window.addEventListener("resize",(function(e){LytePopup._lyteModalRTId&&(clearTimeout(LytePopup._lyteModalRTId),LytePopup._lyteModalRTId=!1),LytePopup._lyteModalRTId=setTimeout((function(){for(var e=LytePopup.components.length-1;e>=0;e--)if(LytePopup.components[e].$node&&"LYTE-MODAL"==LytePopup.components[e].$node.nodeName&&"visible"==LytePopup.components[e].childComp.style.visibility&&LytePopup.components[e].childComp.querySelector(".lyteModal")){if(LytePopup.components[e].$node.component.setData("resizeCalled",!0),e==LytePopup.components.length-1&&LytePopup.components[e].renderSidewise)continue;LytePopup.components[e].$node.component.updateScrollHandling()}LytePopup._lyteModalRTId=!1}),100)}),!0),document.addEventListener("click",(function(e){for(var t=e.target;!$L(t).hasClass("modalWrapper")&&"LYTE-MODAL-FREEZE"!=t.tagName&&"LYTE-DROP-BOX"!=t.tagName&&"HTML"!=t.tagName;)if(!(t=t.parentElement))return;if("HTML"==t.tagName||"LYTE-MODAL-FREEZE"==t.tagName)for(var o=LytePopup.components.length-1;o>=0;o--){var a;if("LYTE-MODAL"==LytePopup.components[o].$node.tagName&&"visible"==LytePopup.components[o].childComp.style.visibility)if((a=LytePopup.components[o].$node)&&a.component.getData("ltPropOverlayClose")){a.ltProp("show",!1);break}}else t.classList.contains("modalWrapper")&&LytePopup.components.length>1&&"LYTE-MODAL"==LytePopup.components[LytePopup.components.length-1].$node.tagName&&!(a=LytePopup.components[LytePopup.components.length-1]).childComp.contains(t)&&"visible"==a.childComp.style.visibility&&a.getData("ltPropOverlayClose")&&a.$node.ltProp("show",!1)}),!0)}if(_lyteUiUtils.registeredCustomElements["lyte-drop-group"]||(_lyteUiUtils.registeredCustomElements["lyte-drop-group"]=!0,Lyte.createCustomElement("lyte-drop-group",{static:{observedAttributes:{get:function(){return["label"]}}},attributeChangedCallback:function(e,t,o,a){var r,i;"label"==e&&(r=this.querySelector("lyte-drop-label"),i=this.getAttribute("label"),r?r.textContent=i:((r=document.createElement("lyte-drop-label")).textContent=i,this.insertBefore(r,this.children[0])))}})),Lyte.Component.register("lyte-button",{_template:'<template tag-name="lyte-button" onclick="{{action(\'check\',event)}}" onmousedown="{{action(\'check\',event)}}"> <button type="{{ltPropType}}" class="{{finalClass}}" value="{{ltPropValue}}" tabindex="{{ltPropTabindex}}" id="{{ltPropId}}" name="{{ltPropName}}" autofocus="{{ltPropAutofocus}}" disabled="{{ltPropDisabled}}" style="{{finalStyle}}"> <lyte-yield yield-name="text"></lyte-yield> </button> </template>',_dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"finalStyle"},type:{name:"type",dynamicValue:"ltPropType"}}},{type:"insertYield",position:[1,1]}],_templateAttributes:{type:"attr",position:[]},_observedAttributes:["ltPropName","ltPropDisabled","ltPropAutofocus","ltPropAppearance","ltPropId","ltPropType","ltPropValue","ltPropTabindex","ltPropStyle","ltPropSize","ltPropBackgroundColor","ltPropColor","lyteShortcut","ltPropClass","lyteUnbound","ltPropAriaButton"],data:function(){return{ltPropName:Lyte.attr("string",{default:void 0}),ltPropDisabled:Lyte.attr("boolean",{default:!1}),ltPropAutofocus:Lyte.attr("boolean",{default:!1}),ltPropAppearance:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-button","appearance","default")}),ltPropId:Lyte.attr("string",{default:void 0}),ltPropType:Lyte.attr("string",{default:"button"}),ltPropValue:Lyte.attr("string",{default:void 0}),ltPropTabindex:Lyte.attr("string",{default:void 0}),ltPropStyle:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-button","style",void 0)}),ltPropSize:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-button","size","default")}),ltPropBackgroundColor:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-button","backgroundColor",void 0)}),ltPropColor:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-button","color",void 0)}),lyteShortcut:Lyte.attr("string",{default:""}),ltPropClass:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-button","class","")}),lyteUnbound:Lyte.attr("boolean",{default:!1}),ltPropAriaButton:Lyte.attr("object",{default:_lyteUiUtils.resolveDefaultValue("lyte-button","ariaButton",{})})}},ariaObserver:function(e){var t=e.oldValue,o=e.newValue;this.addAriaValues(t,o)}.observes("ltPropAriaButton"),init:function(){this.pushValue()},registerFunction:function(e){var t=this;this.$node[e]=function(){var o=t.$node,a=o.querySelector("button");o.ltProp("disabled")||a[e]()}},didConnect:function(){for(var e=["click","focus","blur"],t=0,o=this.getData("ltPropAriaButton");t<e.length;t++)this.registerFunction(e[t]);this.addAriaValues({},o)},addAriaValues:function(e,t){var o=this.getButtonWidget();_lyteUiUtils.setAttribute(o,t,e)},getButtonWidget:function(){return this.$node.querySelector("button")},didDestroy:function(){var e=this.getData("lyteShortcut");e&&"function"==typeof shortcut&&shortcut.push({newKey:void 0,type:void 0,wait:void 0,oldKey:e.key}),delete this.$node.focus,delete this.$node.blur,delete this.$node.click},shortcutChanged:function(){this.pushValue()}.observes("lyteShortcut"),pushValue:function(){var e=this.getData("lyteShortcut"),t=this.$node;e&&(newObj=JSON.parse(e),Array.isArray(newObj)?newObj.forEach((function(e){e.key&&shortcut.push({newKey:e.key,type:e.type,wait:e.wait,oldKey:void 0,value:t})})):newObj.key&&shortcut.push({newKey:newObj.key,type:newObj.type,wait:newObj.wait,oldKey:void 0,value:t}))},changeClass:function(){var e=this.getData("ltPropClass"),t="",o="lyte-button"+(e?" "+e:""),a=this.getData("ltPropAppearance"),r=this.getData("ltPropSize"),i=this.getData("ltPropColor"),s=this.getData("ltPropBackgroundColor");r=r?r.toLowerCase():"",a=a||"default",s?o+=" lyteBackgroundColorBtn":i?o+=" lyteColorBtn":-1!==a.indexOf("default")?o+=" lyteDefaultBtn":-1!==a.indexOf("primary")?o+=" lytePrimaryBtn":-1!==a.indexOf("secondary")&&(o+=" lyteSecondary"),-1!==a.indexOf("success")?o+=" lyteSuccess":-1!==a.indexOf("failure")&&(o+=" lyteFailure"),"extra-small"===r?o+=" lyteExsm":"small"===r?o+=" lyteSm":"large"===r&&(o+=" lyteLg"),i?t=s?t+"background-color:"+s+";border-color:"+s+";color:"+i+";":t+"background-color: #fff; color:"+i+";border-color:"+i+";":s&&(t=t+"background-color:"+s+";border-color:"+s+";color:white;"),this.getData("ltPropStyle")&&(t+=this.getData("ltPropStyle")),this.setData("finalStyle",t),this.setData("finalClass",o)}.observes("ltPropClass","ltPropBackgroundColor","ltPropColor","ltPropStyle","ltPropSize","ltPropAppearance").on("init"),actions:{check:function(e){this.$node.querySelector("button").disabled&&e.stopPropagation()}}}),Lyte.Component.register("lyte-autocomplete",{_template:'<template tag-name="lyte-autocomplete"> <lyte-dropdown lt-prop="{{stringify(ltPropDropdown)}}" lt-prop-set-pos="{{ltPropSetPos}}" lt-prop-type="{{ltPropDropType}}" lt-prop-yield="true" lt-prop-freeze="{{ltPropFreeze}}" lt-prop-callout="{{ltPropCallout}}" lt-prop-position="{{ltPropPosition}}" lt-prop-hover="{{ltPropHover}}" lt-prop-disabled="{{ltPropDisabled}}" lt-prop-boundary="{{ltPropBoundary}}" lt-prop-tabindex="{{ltPropTabindex}}" lt-prop-animate="{{ltPropAnimate}}" on-option-selected="{{method(\'valSet\')}}" on-show="{{method(\'show\')}}" on-hide="{{method(\'hide\')}}" on-before-show="{{method(\'beforeShow\')}}" on-before-hide="{{method(\'beforeHide\')}}" on-add="{{method(\'add\')}}" on-remove="{{method(\'remove\')}}" on-position-changed="{{\'positionChanged\'}}" on-scroll="{{method(\'scroll\')}}" lt-prop-selected="{{lbind(ltPropSelected)}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-button onkeyup="{{action(\'keyup\',event)}}"> <lyte-input lt-prop="{{stringify(ltPropInput)}}" lt-prop-maxlength="{{ltPropMaxlength}}" lt-prop-auto-update="{{ltPropAutoUpdate}}" on-value-change="{{method(\'valuechange\')}}" lt-prop-tab-index="{{ltPropTabIndex}}" lt-prop-id="{{ltPropId}}" lt-prop-wrapper-style="{{ltPropWrapperStyle}}" lt-prop-class="{{ltPropClass}}" lt-prop-autofocus="{{ltPropAutofocus}}" lt-prop-autocomplete="{{ltPropAutocomplete}}" lt-prop-type="{{ltPropType}}" lt-prop-name="{{ltPropName}}" lt-prop-placeholder="{{ltPropPlaceholder}}" lt-prop-value="{{lbind(ltPropValue)}}" lt-prop-width="100%" lt-prop-height="{{ltPropHeight}}" lt-prop-style="{{ltPropStyle}}" lt-prop-appearance="{{ltPropAppearance}}" lt-prop-direction="vertical" lt-prop-disabled="{{ltPropDisabled}}" lt-prop-readonly="{{ltPropReadonly}}" lt-prop-pattern="{{ltPropPattern}}" rows="{{ltPropRows}}" cols="{{ltPropCols}}" title="{{ltPropInputTitle}}" lt-prop-text-area-resize="{{ltPropTextAreaResize}}" lt-prop-input-title="{{ltPropInputTitle}}" on-focus="{{method(\'focus\')}}" on-blur="{{method(\'blurEvent\')}}" oninput="{{action(\'input\',event)}}" lt-prop-update-delay="{{ltPropUpdateDelay}}" lt-prop-aria="{{ltPropAria}}" lt-prop-aria-attributes="{{ltPropAriaAttributes}}" lt-prop-focus="{{ltPropFocus}}"></lyte-input> <template is="if" value="{{expHandlers(ltPropType,\'==\',\'search\')}}"><template case="true"> <div class="closeIconWrapper lyteAutoCompCloseIconWrapper" onclick="{{action(\'resetValue\',event)}}" style="{{if(ltPropValue,\'display: block;\',\'display: none;\')}}"> <span class="closeIcon lyteAutoCompCloseIcon"></span> </div> <span class="iconSeparator" style="{{if(ltPropValue,\'display: block;\',\'display: none;\')}}"></span> </template></template> </lyte-drop-button> <template is="if" value="{{expHandlers(ltPropYield,\'==\',false)}}"><template case="true"> <lyte-drop-box class="{{ltPropDropdownClass}} lyteautocompleteDropdown" id="{{ltPropDropdownId}}"> <lyte-drop-body> <template is="for" items="{{ltPropContent}}" item="list" index="indexVal"><template is="if" value="{{lyteUiOptGroupCheck(list)}}"><template case="true"> <lyte-drop-group elemorder="{{indexVal}}"> <lyte-drop-label>{{lyteUiReturnOnlyKey(list)}}</lyte-drop-label> <template is="for" items="{{lyteUiReturnOnlyValue(list)}}" item="list1" index="indexVal1"><template is="if" value="{{expHandlers(lyteUiIsObject(list1),\'==\',false)}}"><template case="true"> <lyte-drop-item grporder="{{indexVal}}" elemorder="{{indexVal1}}" data-value="{{list1}}"> <lyte-autocomplete-label keywords="{{list1}}">{{list1}}</lyte-autocomplete-label> </lyte-drop-item> </template><template case="false"> <lyte-drop-item grporder="{{indexVal}}" elemorder="{{indexVal1}}" data-value="{{list1[ltPropLabel]}}" class="{{list1.class}}"> <lyte-autocomplete-label keywords="{{list1[ltPropKeyWords]}}">{{list1[ltPropLabel]}}</lyte-autocomplete-label> <template is="if" value="{{list1[ltPropDescription]}}"><template case="true"> <lyte-autocomplete-description><span class="lyteAutoSeparator">,</span> {{list1[ltPropDescription]}}</lyte-autocomplete-description> </template></template> </lyte-drop-item> </template></template></template> </lyte-drop-group> </template><template case="false"><template is="if" value="{{expHandlers(lyteUiIsObject(list),\'==\',false)}}"><template case="true"> <lyte-drop-item elemorder="{{indexVal}}" data-value="{{list}}"> <lyte-autocomplete-label keywords="{{list}}">{{list}}</lyte-autocomplete-label> </lyte-drop-item> </template><template case="false"> <lyte-drop-item elemorder="{{indexVal}}" data-value="{{list[ltPropLabel]}}" class="{{list1.class}}"> <lyte-autocomplete-label keywords="{{list[ltPropKeyWords]}}">{{list[ltPropLabel]}}</lyte-autocomplete-label> <template is="if" value="{{list[ltPropDescription]}}"><template case="true"> <lyte-autocomplete-description><span class="lyteAutoSeparator">,</span> {{list[ltPropDescription]}}</lyte-autocomplete-description> </template></template> </lyte-drop-item> </template></template></template></template></template> </lyte-drop-body> </lyte-drop-box> </template><template case="false"> <lyte-yield yield-name="yield"></lyte-yield> </template></template> </template> </lyte-dropdown> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"if",args:["ltPropValue","'display: block;'","'display: none;'"]}}}},{type:"attr",position:[3],attr:{style:{name:"style",helperInfo:{name:"if",args:["ltPropValue","'display: block;'","'display: none;'"]}}}}]}},default:{}},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,2]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,2]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"insertYield",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[1]}],_observedAttributes:["ltPropAutocomplete","ltPropPlaceholder","ltPropAutofocus","ltPropMaxlength","ltPropReadonly","ltPropId","ltPropClass","ltPropType","ltPropName","ltPropWidth","ltPropValue","ltPropContent","ltPropLabel","ltPropDescription","ltPropAppearance","ltPropDirection","ltPropExternalSearch","ltPropYield","ltPropHeight","ltPropHighlight","ltPropHighlightClass","ltPropKeyWords","ltPropMinLength","ltPropErrorClass","ltPropDropdownWidth","ltPropDropdownHeight","ltPropDropdownClass","ltPropDropdownId","ltPropMethod","ltPropWrapperStyle","ltPropTabIndex","ltPropTabindex","ltPropFreeze","ltPropCallout","ltPropDisabled","ltPropHover","ltPropBoundary","ltPropPosition","ltPropDropType","ltPropSetPos","ltPropPattern","ltPropAutoUpdate","ltPropValueSet","ltPropPreventInsideClick","ltPropExtSearchOpen","ltPropInputTitle","ltPropErrorMessage","ltPropAnimate","ltPropSelected","ltPropTrim","ltPropFocus","ltPropAria","ltPropAriaAttributes","ltPropUpdateDelay","ltPropRows","ltPropCols","ltPropTextAreaResize","ltPropDiacritic","ltPropDropdown","ltPropInput","timeout","optGroup","autocompleteFlag"],init:function(){this.$node.toggle=function(e,t){return this.dropdown.toggle(e,t)}.bind(this);var e="beforeRender";this.getMethods(e)&&this.executeMethod(e,this.$node)},didDestroy:function(){var e=this,t=e.$node;clearTimeout(e.data.timeout),["autocompleteComp","input","dropdown","dropbody"].forEach((function(t){delete e[t]})),["toggle","setValue","focus","blur","click","select"].forEach((function(e){delete t[e]}))},didConnect:function(){var e,t=this.data,o=$L(document.createElement("div")).addClass("lyteautocompleteError "+(t.ltPropErrorClass||"")).css("display","none").get(0),a="afterRender";o.textContent=t.ltPropErrorMessage||"",this.autocompleteComp=o,e=this.dropdown=$L(this.$node).children("lyte-dropdown").get(0),(this.dropbody=e.component.childComp||$L("lyte-drop-box",e).get(0)).appendChild(o),this.$node.setValue=function(e){e=e||"",$L("lyte-input",this.$node).get(0).ltProp("value",e),this.pressFunc(e,{})}.bind(this),["focus","blur","click","select"].forEach(function(e){this.$node[e]=function(t){$L("lyte-input",this).get(0)[e](t)}}.bind(this)),this.getMethods(a)&&this.executeMethod(a,this.$node)},errObs:function(e){var t=this.autocompleteComp;"ltPropErrorMessage"==e.item?t.textContent=e.newValue:$L(t).removeClass(e.oldValue).addClass(e.newValue)}.observes("ltPropErrorMessage","ltPropErrorClass"),typeObs:function(){var e=$L(this.$node)["search"==this.data.ltPropType?"addClass":"removeClass"]("searchPresent");this.input=e.find("input,textarea").get(0)}.observes("ltPropType").on("didConnect"),arrayFrom:function(e){return Array.from?Array.from(e):Array.apply(Array,e)},optGroupObs:function(){setTimeout(this.optGroup.bind(this,!0),0)}.observes("ltPropContent","ltPropContent.[]"),optGroup:function(e){var t=$L(this.dropbody),o=this.input.value,a=this.data;(!t.hasClass("lyteDropdownHidden")&&o.length||a.ltPropExternalSearch)&&(a.ltPropTrim&&(o=o.trim()),this.contentFiltering(o)),a.ltPropAnimate&&a.ltPropExternalSearch&&(t.find("lyte-drop-body").css("height",""),delete this.dropdown.component._prevent)},classObs:function(e){if(this.data.ltPropYield){var t=$L(this.dropbody);e&&t.removeClass(e.oldValue);var o=this.data.ltPropDropdownClass;o&&t.addClass(o)}}.observes("ltPropDropdownClass").on("didConnect"),heigthSetObs:function(){this.heigthSet()}.observes("ltPropDropdownHeight").on("didConnect"),heigthSet:function(){$L(this.dropbody).find("lyte-drop-body").css("maxHeight",this.data.ltPropDropdownHeight||"")},widthSetObs:function(){this.widthSet()}.observes("ltPropDropdownWidth").on("didConnect"),widthSet:function(){$L(this.dropbody).find("lyte-drop-body").css("width",this.data.ltPropDropdownWidth||"")},data:function(){return{ltPropAutocomplete:Lyte.attr("string",{default:"off"}),ltPropPlaceholder:Lyte.attr("string",{default:""}),ltPropAutofocus:Lyte.attr("boolean",{default:!1}),ltPropMaxlength:Lyte.attr("number",{default:25}),ltPropReadonly:Lyte.attr("boolean",{default:!1}),ltPropId:Lyte.attr("string",{default:"inputId"}),ltPropClass:Lyte.attr("string",{default:""}),ltPropType:Lyte.attr("string",{default:"text"}),ltPropName:Lyte.attr("string",{default:""}),ltPropWidth:Lyte.attr("string",{default:"100%"}),ltPropValue:Lyte.attr("string",{default:""}),ltPropContent:Lyte.attr("array",{default:[]}),ltPropLabel:Lyte.attr("string",{default:""}),ltPropDescription:Lyte.attr("string",{default:""}),ltPropAppearance:Lyte.attr("string",{default:"flat"}),ltPropDirection:Lyte.attr("string",{default:"vertical"}),ltPropExternalSearch:Lyte.attr("boolean",{default:!1}),ltPropYield:Lyte.attr("boolean",{default:!1}),ltPropHeight:Lyte.attr("string",{default:""}),ltPropHighlight:Lyte.attr("boolean",{default:!1}),ltPropHighlightClass:Lyte.attr("string",{default:"lyteautocompleteHighlight"}),ltPropKeyWords:Lyte.attr("string",{default:""}),ltPropMinLength:Lyte.attr("number",{default:1}),ltPropErrorClass:Lyte.attr("string",{default:"lyteautocompleteError"}),ltPropDropdownWidth:Lyte.attr("string",{default:"auto"}),ltPropDropdownHeight:Lyte.attr("string",{default:"300px"}),ltPropDropdownClass:Lyte.attr("string",{default:""}),ltPropDropdownId:Lyte.attr("string",{default:"lyteAutocomplete"}),ltPropMethod:Lyte.attr("string",{default:"contains"}),ltPropWrapperStyle:Lyte.attr("string",{default:""}),ltPropTabIndex:Lyte.attr("string",{default:"0"}),ltPropTabindex:Lyte.attr("string",{default:"-1"}),ltPropFreeze:Lyte.attr("boolean",{default:!1}),ltPropCallout:Lyte.attr("boolean",{default:!1}),ltPropDisabled:Lyte.attr("boolean",{default:!1}),ltPropHover:Lyte.attr("boolean",{default:!1}),ltPropBoundary:Lyte.attr("object",{default:{}}),ltPropPosition:Lyte.attr("string",{default:"down"}),ltPropDropType:Lyte.attr("string",{default:"default"}),ltPropSetPos:Lyte.attr("boolean",{default:!1}),ltPropPattern:Lyte.attr("string",{default:".+"}),ltPropAutoUpdate:Lyte.attr("boolean",{default:!0}),ltPropValueSet:Lyte.attr("boolean",{default:!0}),ltPropPreventInsideClick:Lyte.attr("boolean",{default:!1}),ltPropExtSearchOpen:Lyte.attr("boolean",{default:!1}),ltPropInputTitle:Lyte.attr("string",{default:""}),ltPropErrorMessage:Lyte.attr("string",{default:""}),ltPropErrorClass:Lyte.attr("string",{default:""}),ltPropAnimate:Lyte.attr("boolean",{default:!1}),ltPropSelected:Lyte.attr("string",{default:""}),ltPropTrim:Lyte.attr("boolean",{default:!1}),ltPropFocus:Lyte.attr("boolean",{default:!1}),ltPropAria:Lyte.attr("boolean",{default:!1}),ltPropAriaAttributes:Lyte.attr("object",{default:{}}),ltPropUpdateDelay:Lyte.attr("number",{default:250}),ltPropRows:Lyte.attr("number",{default:void 0}),ltPropCols:Lyte.attr("number",{default:void 0}),ltPropTextAreaResize:Lyte.attr("object",{default:{vertical:!0,horizontal:!0}}),ltPropDiacritic:Lyte.attr("boolean",{default:!1}),ltPropDropdown:Lyte.attr("object",{default:{}}),ltPropInput:Lyte.attr("object",{default:{}}),timeout:Lyte.attr("number",{default:void 0}),optGroup:Lyte.attr("boolean",{default:!1}),autocompleteFlag:Lyte.attr("boolean",{default:!0})}},convertString:function(e,t){e.forEach(function(e){var o=e.tagName||"";if(/^template$/i.test(o))e.remove();else if(o)this.convertString(Array.from(e.childNodes),t);else if(t){for(var a=e.nodeValue,r=a.toLowerCase(),i=r.indexOf(t),s=e;-1!=i;){var l=a.slice(0,i),n=i+t.length,p=a.slice(i,n),c=a.slice(n),d=!0;if(l){var u=document.createTextNode(l);Lyte.Component.insertAfter(s,s=u)}(u=$L(document.createElement("span")).addClass(this.data.ltPropHighlightClass).get(0)).textContent=p,Lyte.Component.insertAfter(s,s=u),i=(r=(a=c).toLowerCase()).indexOf(t)}if(d){if(a){u=document.createTextNode(a);Lyte.Component.insertAfter(s,u)}e.remove()}}}.bind(this))},highlightText:function(e,t){for(var o=e.length,a=Lyte.Component,r=0;r<o;r++){var i=e[r],s=i.getElementsByTagName("lyte-autocomplete-label")[0],l=i.getElementsByClassName("lyteAutoComplete")[0],n=s.cloneNode(!0);n.normalize(),l||(l=$L('<div class = "lyteAutoComplete"></div>').get(0),a.insertBefore(s,l)),$L(s).css("display","none"),l.style.display="",this.convertString(Array.from(n.childNodes),t);var p=Array.from(n.childNodes),c=a.appendChild.bind(a,l);l.innerHTML="",p.forEach(c)}},errorMessage:function(e){var t=this.autocompleteComp,o={display:e?"block":"none"};e&&!t.style.width&&(o.width=window.getComputedStyle(this.$node).getPropertyValue("width")),$L(t).css(o)},actions:{resetValue:function(e){this.$node.setValue(""),this.$node.focus()},keyup:function(e){var t=e.keyCode||e.which;if(-1==[37,13,38,39,40,27].indexOf(t)){var o=this.input.value;this.data.ltPropTrim&&(o=o.trim()),clearTimeout(this.data.timeout),(o.length>=this.data.ltPropMinLength||-1!=[8,91,17,46].indexOf(t))&&13!=t&&(this.data.timeout=setTimeout(this.pressFunc.bind(this,o,e),100))}},input:function(e){if(_lyteUiUtils.isAndroid&&/firefox/gi.test(navigator.userAgent)){clearTimeout(this.data.timeout);var t=e.target.value;this.getData("ltPropTrim")&&(t=t.trim()),t.length>=this.data.ltPropMinLength&&(this.data.timeout=setTimeout(this.pressFunc.bind(this),100,t,e))}}},methods:{valSet:function(e,t){var o=$L((e||window.event).target).closest("lyte-drop-item"),a="onSelect";o.length&&(t=o.find("lyte-autocomplete-label").text());if(t&&(this.getData("ltPropValueSet")&&this.setData("ltPropValue",t.trim()),this.getMethods(a))){var r;if(this.data.ltPropYield)r=o.attr("data-value");else{var i=this.data.ltPropContent,s=o.closest("lyte-drop-group").get(0),l=this.arrayFrom($L(this.dropbody).children("lyte-drop-body").children()),n=o.get(0);if(s){var p=i[l.indexOf(s)];r=p[Object.keys(p)[0]][this.arrayFrom(o.parent().children("lyte-drop-item")).indexOf(n)]}else r=i[l.indexOf(n)]}this.executeMethod(a,r,e,this.$node)}},show:function(){this.optGroupHide.call(this,!0),this.getMethods("onShow")&&this.executeMethod("onShow",arguments[0],arguments[1])},hide:function(){this.getMethods("onHide")&&this.executeMethod("onHide",arguments[0],arguments[1])},beforeShow:function(e,t){var o,a=this.input.value,r="onBeforeShow";return this.getData("ltPropTrim")&&(a=a.trim()),!(a.length<this.data.ltPropMinLength)&&((!this.getMethods(r)||0!=(o=this.executeMethod(r,e,t)))&&(o&&o.then?(o.then(function(){this.dropdown&&this.dropdown!=_lyteDropdown.lastDropdownWithAPromise||setTimeout(this.pressFunc.bind(this),0,a,{})}.bind(this)),o):void(this._bymanual||setTimeout(this.pressFunc.bind(this),0,a,{}))))},beforeHide:function(e,t){return!(this.getData("ltPropPreventInsideClick")&&e&&"click"==e.type&&this.$node.contains(e.target))&&(this.getMethods("onBeforeHide")?this.executeMethod("onBeforeHide",e,t):void 0)},add:function(){var e=arguments,t="onAdd";this.getMethods(t)&&this.executeMethod(t,e[0],e[1],e[2],e[3])},remove:function(){var e=arguments,t="onRemove";this.getMethods(t)&&this.executeMethod(t,e[0],e[1],e[2],e[3])},positionChanged:function(e,t){var o="onPositionChanged";this.getMethods(o)&&this.executeMethod(o,e,t)},scroll:function(){this.getMethods("onScroll")&&this.executeMethod("onScroll",arguments[0],arguments[1])},valuechange:function(e){this.getMethods("onValueChange")&&this.executeMethod("onValueChange",e,this.$node)},blurEvent:function(e){this.getMethods("onBlur")&&this.executeMethod("onBlur",e,this.$node)},focus:function(e,t){this.getMethods("onFocus")&&this.executeMethod("onFocus",e,this.$node)}},filteringArray:function(e,t,o,a){var r=this.data.ltPropMethod,i=[],s=[],l="onSearch",n="lyteSearchHidden";if(o.length)for(var p=e.length,c=0;c<p;c++){var d=!1,u=e[c].trim().toLowerCase(),h=u.indexOf(o);switch(r){case"contains":d=h>=0;break;case"startsWith":d=0==h;break;case"endsWith":-1!=(h=u.lastIndexOf(o))&&(d=h+o.length==u.length)}d?i.push(t[c]):s.push(t[c])}else i=this.arrayFrom(t);this.getMethods(l)&&0==this.executeMethod(l,i,this.autocompleteComp,this.$node,o,a)||(i.forEach((function(e){e.classList.remove(n)})),s.forEach((function(e){e.classList.add(n)})),this.optGroupHide(),this.errorMessage(!i.length),i.length&&this.data.ltPropHighlight&&this.highlightText(t,o))},optGroupHide:function(e){var t="lyte-drop-item",o="lyteSearchHidden",a="lyteDropdownSelection",r=$L(this.dropbody),i=r.find(t+":not(."+o+"):not(.lyteDropdownActive)"),s=r.find(t+"."+a).get(0);if(!e)for(var l=r.find("lyte-drop-group"),n=l.length,p=0;p<n;p++){var c=l.eq(p);c.find(t+"."+o).length==c.find(t).length?c.css("display","none"):c.css("display","block")}$L.fastdom.measure(function(){for(var e,t=i.length,o=0;o<t;o++){var r=i.eq(o),l=r.get(0);if(l.offsetParent&&!r.hasClass("lyteDropdown-disabled")){e=l;break}}$L.fastdom.mutate(function(){e&&s!=e&&($L(s).removeClass(a),$L(e).addClass(a))}.bind(this))}.bind(this))},contentFiltering:function(e,t){var o=this.dropdown,a=[],r=$L(this.dropbody),i="lyteDropdownHidden",s=this.data,l=r.hasClass(i),n=e.length,p=s.ltPropMinLength;if(t=t||{},!(l&&n>=p||!l&&n<p)||(this._bymanual=!0,o.toggle(),delete this._bymanual,!r.hasClass(i))){for(var c=r.find("lyte-drop-item:not(.lyteDropdownActive)"),d=s.ltPropDiacritic,u=c.length,h=0;h<u;h++){var m=c.eq(h).find("lyte-autocomplete-label"),y=m.attr("keywords");if(y)try{y=JSON.parse(y).join(" ")}catch(e){}var f=y||m.text().trim();d&&(f=_lyteUiUtils.convert_diacritics(f)),a.push(f)}d&&(e=_lyteUiUtils.convert_diacritics(e)),this.filteringArray(a,c,e.toLowerCase(),t)}},pressFunc:function(e,t){var o=this.data;if(o.ltPropTrim&&(e=e.trim()),o.ltPropExternalSearch){var a=$L(this.dropbody),r="lyteDropdownHidden",i=this.dropdown,s="onExtSearch";if(e.length>=o.ltPropMinLength||!t.target){if(t.type&&a.hasClass(r)&&o.ltPropExtSearchOpen&&(i.toggle(),a.hasClass(r)))return;this.getMethods(s)&&this.executeMethod(s,e,this.$node,t)}else a.hasClass(r)||i.toggle()}else this.contentFiltering(e,t)}}),Lyte.Component.register("lyte-input",{_template:'<template tag-name="lyte-input"> <template is="switch" value="{{ltPropType}}"> <template case="password"> <template is="if" value="{{ltPropLabel}}"><template case="true"> <label for="{{ltPropId}}" class="lyteLabel">{{ltPropLabel}}</label> </template></template> <div class="lyteField {{if(ltPropValue,\'ltIconShow\',\'\')}} {{ltPropWrapperClass}}" style="{{ltPropWrapperStyle}}"> <input pattern="{{ltPropPattern}}" tabindex="{{ltPropTabIndex}}" type="{{ltPropType}}" value="{{lbind(ltPropValue)}}" id="{{ltPropId}}" class="{{ltPropClass}}" maxlength="{{ltPropMaxlength}}" name="{{ltPropName}}" placeholder="{{ltPropPlaceholder}}" autocomplete="{{ltPropAutocomplete}}" autofocus="{{ltPropAutofocus}}" disabled="{{ltPropDisabled}}" style="{{ltPropStyle}}" readonly="{{ltPropReadonly}}" onfocus="{{action(\'focusClass\',event)}}" onblur="{{action(\'blurThrow\',event)}}" title="{{ltPropInputTitle}}" oninput="{{action(\'input\',event)}}"> <template is="if" value="{{ltPropCloseIcon}}"><template case="true"> <span class="inputCloseIcon" onclick="{{action(\'clsIcon\',event)}}" style="{{if(ltPropValue,\'display: block;\',\'display: none;\')}}"></span> </template></template> </div> </template> <template case="number"> <template is="if" value="{{ltPropLabel}}"><template case="true"> <label for="{{ltPropId}}" class="lyteLabel">{{ltPropLabel}}</label> </template></template> <div class="lyteField {{if(ltPropValue,\'ltIconShow\',\'\')}} {{ltPropWrapperClass}}" style="{{ltPropWrapperStyle}}"> <input pattern="{{ltPropPattern}}" tabindex="{{ltPropTabIndex}}" type="number" value="{{lbind(ltPropValue)}}" id="{{ltPropId}}" class="{{ltPropClass}}" maxlength="{{ltPropMaxlength}}" name="{{ltPropName}}" placeholder="{{ltPropPlaceholder}}" autocomplete="{{ltPropAutocomplete}}" autofocus="{{ltPropAutofocus}}" disabled="{{ltPropDisabled}}" readonly="{{ltPropReadonly}}" style="{{ltPropStyle}}" onkeydown="{{action(\'numberKeydown\',event,this)}}" onfocus="{{action(\'focusClass\',event)}}" onblur="{{action(\'blurThrow\',event)}}" step="{{ltPropStep}}" max="{{ltPropMax}}" min="{{ltPropMin}}" title="{{ltPropInputTitle}}" onpaste="{{action(\'numberPaste\',event,this)}}" oninput="{{action(\'input\',event,this)}}"> <template is="if" value="{{ltPropCloseIcon}}"><template case="true"> <span class="inputCloseIcon" onclick="{{action(\'clsIcon\',event)}}" style="{{if(ltPropValue,\'display: block;\',\'display: none;\')}}"></span> </template></template> </div> </template> <template case="textarea"> <template is="if" value="{{ltPropLabel}}"><template case="true"> <label for="{{ltPropId}}" class="lyteLabel">{{ltPropLabel}}</label> </template></template> <div class="lyteField {{ltPropWrapperClass}}" style="{{ltPropWrapperStyle}}"> <textarea autocomplete="{{ltPropAutocomplete}}" pattern="{{ltPropPattern}}" tabindex="{{ltPropTabIndex}}" id="{{ltPropId}}" class="{{ltPropClass}}" value="{{lbind(ltPropValue)}}" rows="{{ltPropRows}}" cols="{{ltPropCols}}" maxlength="{{ltPropMaxlength}}" name="{{ltPropName}}" autofocus="{{ltPropAutofocus}}" disabled="{{ltPropDisabled}}" readonly="{{ltPropReadonly}}" style="{{ltPropStyle}}" onfocus="{{action(\'focusClass\',event)}}" onblur="{{action(\'blurThrow\',event)}}" title="{{ltPropInputTitle}}" oninput="{{action(\'input\',event)}}"></textarea> <template is="if" value="{{resize}}"><template case="true"> <span class="lyteTextareaResize"></span> </template></template> </div> </template> <template case="date"> <template is="if" value="{{ltPropLabel}}"><template case="true"> <label for="{{ltPropId}}" class="lyteLabel">{{ltPropLabel}}</label> </template></template> <div class="lyteField {{ltPropWrapperClass}}" style="{{ltPropWrapperStyle}}"> <input pattern="{{ltPropPattern}}" tabindex="{{ltPropTabIndex}}" type="text" id="{{ltPropId}}" class="{{ltPropClass}}" name="{{ltPropName}}" placeholder="{{ltPropPlaceholder}}" autocomplete="{{ltPropAutocomplete}}" value="{{lbind(ltPropCurrentDate)}}" autofocus="{{ltPropAutofocus}}" disabled="{{ltPropDisabled}}" readonly="{{ltPropReadonly}}" onkeydown="{{action(\'calendarKeydown\',event,this)}}" onclick="{{action(\'calendarClick\',event,this)}}" onfocus="{{action(\'showcalendar\',event,this)}}" onblur="{{action(\'blurThrow\',event)}}" style="{{ltPropStyle}}" title="{{ltPropInputTitle}}" oninput="{{action(\'input\',event)}}" ondragstart="{{action(\'preventDrag\',event)}}"> </div> <template is="if" value="{{ltPropBindToBody}}"><template case="true"> <lyte-wormhole on-before-append="{{method(\'wormholeAppend\')}}"> <template is="registerYield" yield-name="lyte-content"> <div id="lyteCalendar" class="lyteInputCalendar lyteCalendarHidden {{ltPropCalendarClass}}" onmousedown="{{action(\'calmsdown\',event,this)}}"> <lyte-calendar lt-prop-fill-rows="{{ltPropFillRows}}" lt-prop-number-of-rows="{{ltPropNumberOfRows}}" lt-prop-yield="{{ltPropYield}}" lt-prop-format="{{ltPropFormat}}" lt-prop-end-date="{{lbind(ltPropEndDate)}}" lt-prop-start-date="{{lbind(ltPropStartDate)}}" lt-prop-current-date="{{lbind(ltPropCurrentDate)}}" lt-prop-year="{{lbind(ltPropYear)}}" lt-prop-month-header-format="{{ltPropMonthHeaderFormat}}" on-date-selected="{{method(\'on-dateselected\')}}" lt-prop-min-date="{{ltPropMinDate}}" lt-prop-max-date="{{ltPropMaxDate}}" lt-prop-start-week-day="{{ltPropStartWeekDay}}" lt-prop-header-type="{{ltPropHeaderType}}" on-navigate="{{method(\'calendarNavigate\')}}" on-viewdate-change="{{method(\'viewDateChange\')}}" on-view-change="{{method(\'viewChange\')}}" lt-prop="{{stringify(ltPropCalendarProperties)}}"> <template is="if" value="{{ltPropYield}}"><template case="true"> <template is="registerYield" yield-name="footer"> <lyte-yield yield-name="footer"></lyte-yield> </template> </template></template> </lyte-calendar> </div> </template> </lyte-wormhole> </template></template> </template> <template case="datetime"> <template is="if" value="{{ltPropLabel}}"><template case="true"> <label for="{{ltPropId}}" class="lyteLabel">{{ltPropLabel}}</label> </template></template> <div class="lyteField {{ltPropWrapperClass}}" style="{{ltPropWrapperStyle}}"> <template is="if" value="{{showPlaceholder}}"><template case="true"> <span class="lyteInputDateTimePlaceholder">{{ltPropCommonPlaceholder}}</span> </template></template> <input autocomplete="{{ltPropAutocomplete}}" tabindex="{{ltPropTabIndex}}" type="text" class="{{ltPropClass}}" id="date" placeholder="{{ltPropPlaceholder}}" value="{{lbind(ltPropCurrentDate)}}" onkeydown="{{action(\'calendarKeydown\',event,this)}}" onclick="{{action(\'calendarClick\',event,this)}}" onfocus="{{action(\'showcalendar\',event,this)}}" onblur="{{action(\'blurThrow\',event)}}" oninput="{{action(\'input\',event)}}" ondragstart="{{action(\'preventDrag\',event)}}" disabled="{{ltPropDisabled}}" readonly="{{ltPropReadonly}}"> <input autocomplete="{{ltPropAutocomplete}}" tabindex="{{ltPropTabIndex}}" type="text" placeholder="{{ltPropTimePlaceholder}}" class="{{ltPropTimeClass}}" value="{{ltPropDefaultTime}}" id="time" onblur="{{action(\'timeBlur\',event,this)}}" onfocus="{{action(\'timeFocus\',event,this)}}" onkeydown="{{action(\'timeKeydown\',event,this)}}" onclick="{{action(\'timeClick\',event,this)}}" style="{{ltPropStyle}}" ondragstart="{{action(\'preventDrag\',event)}}" disabled="{{ltPropDisabled}}" oninput="{{action(\'timeInput\',this)}}" readonly="{{ltPropReadonly}}"> </div> <template is="if" value="{{ltPropBindToBody}}"><template case="true"> <lyte-wormhole on-before-append="{{method(\'wormholeAppend\')}}"> <template is="registerYield" yield-name="lyte-content"> <div id="lyteCalendar" class="lyteInputCalendar lyteCalendarHidden {{ltPropCalendarClass}}" onmousedown="{{action(\'calmsdown\',event,this)}}"> <lyte-calendar lt-prop-fill-rows="{{ltPropFillRows}}" lt-prop-number-of-rows="{{ltPropNumberOfRows}}" lt-prop-yield="{{ltPropYield}}" lt-prop-format="{{ltPropFormat}}" lt-prop-end-date="{{lbind(ltPropEndDate)}}" lt-prop-start-date="{{lbind(ltPropStartDate)}}" lt-prop-current-date="{{lbind(ltPropCurrentDate)}}" lt-prop-year="{{lbind(ltPropYear)}}" lt-prop-month-header-format="{{ltPropMonthHeaderFormat}}" on-date-selected="{{method(\'on-dateselected\')}}" lt-prop-min-date="{{ltPropMinDate}}" lt-prop-max-date="{{ltPropMaxDate}}" lt-prop-start-week-day="{{ltPropStartWeekDay}}" lt-prop-header-type="{{ltPropHeaderType}}" on-navigate="{{method(\'calendarNavigate\')}}" on-viewdate-change="{{method(\'viewDateChange\')}}" on-view-change="{{method(\'viewChange\')}}" lt-prop="{{stringify(ltPropCalendarProperties)}}"> <template is="if" value="{{ltPropYield}}"><template case="true"> <template is="registerYield" yield-name="footer"> <lyte-yield yield-name="footer"></lyte-yield> </template> </template></template> </lyte-calendar> </div> </template> </lyte-wormhole> </template></template> <lyte-dropdown style="display: none;" lt-prop-position="{{ltPropPosition}}" lt-prop-yield="true" lt-prop-disabled="{{ltPropDropdownDisabled}}" lt-prop-show="{{ltPropDropdownShow}}" lt-prop-callout="{{ltPropDropdownCallout}}" lt-prop-boundary="{{ltPropBoundary}}" lt-prop-freeze="{{ltPropDropdownFreeze}}" on-hide="{{method(\'hide\')}}" on-show="{{method(\'show\')}}" on-before-hide="{{method(\'beforeHide\')}}" on-before-show="{{method(\'beforeShow\')}}" on-option-selected="{{method(\'optionSelected\')}}" on-position-changed="{{method(\'positionChange\')}}" on-scroll="{{method(\'scroll\')}}" lt-prop-selected="{{ltPropDefaultTime}}" lt-prop-animate="{{ltPropAnimate}}" lt-prop-scope="{{ltPropScope}}" lt-prop="{{stringify(ltPropDropdownProperties)}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-button style="display: none;"></lyte-drop-button> <lyte-drop-box id="{{ltPropDropdownId}}" class="{{ltPropDropdownClass}}"> <template is="if" value="{{ltPropHeaderYield}}"><template case="true"> <lyte-drop-head> <lyte-yield yield-name="timeheader"></lyte-yield> </lyte-drop-head> </template></template> <lyte-drop-body> <template is="for" items="{{dropdownData}}" item="item" index="index"> <lyte-drop-item data-value="{{item.time}}"> <template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield yield-name="yield" item-value="{{item}}"></lyte-yield> </template><template case="false"> <span>{{item.time}}</span> <template is="if" value="{{ltPropShowInterval}}"><template case="true"> <span style="opacity: 0.5;float: right;margin-left: 5px; ">{{item.interval}}</span> </template></template></template></template> </lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </template> <template case="time"> <template is="if" value="{{ltPropLabel}}"><template case="true"> <label for="{{ltPropId}}" class="lyteLabel">{{ltPropLabel}}</label> </template></template> <div class="lyteField {{ltPropWrapperClass}}" style="{{ltPropWrapperStyle}}"> <input tabindex="{{ltPropTabIndex}}" type="text" value="{{ltPropDefaultTime}}" id="{{ltPropId}}" class="{{ltPropClass}}" maxlength="{{ltPropMaxlength}}" name="{{ltPropName}}" placeholder="{{ltPropPlaceholder}}" autocomplete="{{ltPropAutocomplete}}" autofocus="{{ltPropAutofocus}}" disabled="{{ltPropDisabled}}" readonly="{{ltPropReadonly}}" onblur="{{action(\'timeBlur\',event,this)}}" onfocus="{{action(\'timeFocus\',event,this)}}" onkeydown="{{action(\'timeKeydown\',event,this)}}" onclick="{{action(\'timeClick\',event,this)}}" style="{{ltPropStyle}}" title="{{ltPropInputTitle}}" ondragstart="{{action(\'preventDrag\',event)}}" oninput="{{action(\'timeInput\',this)}}"> </div> <template is="if" value="{{ltPropDropdown}}"><template case="true"> <lyte-dropdown style="display: none;" lt-prop-position="{{ltPropPosition}}" lt-prop-yield="true" lt-prop-disabled="{{ltPropDropdownDisabled}}" lt-prop-show="{{ltPropDropdownShow}}" lt-prop-callout="{{ltPropDropdownShow}}" lt-prop-boundary="{{ltPropBoundary}}" lt-prop-freeze="{{ltPropDropdownFreeze}}" on-hide="{{method(\'hide\')}}" on-show="{{method(\'show\')}}" on-before-hide="{{method(\'beforeHide\')}}" on-before-show="{{method(\'beforeShow\')}}" on-option-selected="{{method(\'optionSelected\')}}" on-position-changed="{{method(\'positionChange\')}}" on-scroll="{{method(\'scroll\')}}" lt-prop-selected="{{ltPropDefaultTime}}" lt-prop-animate="{{ltPropAnimate}}" lt-prop-scope="{{ltPropScope}}" lt-prop="{{stringify(ltPropDropdownProperties)}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-button style="display: none;"></lyte-drop-button> <lyte-drop-box id="{{ltPropDropdownId}}" class="{{ltPropDropdownClass}}"> <template is="if" value="{{ltPropHeaderYield}}"><template case="true"> <lyte-drop-head> <lyte-yield yield-name="timeheader"></lyte-yield> </lyte-drop-head> </template></template> <lyte-drop-body> <template is="for" items="{{dropdownData}}" item="item" index="index"> <lyte-drop-item data-value="{{item.time}}"> <template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield yield-name="yield" item-value="{{item}}"></lyte-yield> </template><template case="false"> <span>{{item.time}}</span> <template is="if" value="{{ltPropShowInterval}}"><template case="true"> <span style="opacity: 0.5;float: right;margin-left: 5px; ">{{item.interval}}</span> </template></template></template></template> </lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </template></template> </template> <template default=""> <template is="if" value="{{ltPropLabel}}"><template case="true"> <label for="{{ltPropId}}" class="lyteLabel">{{ltPropLabel}}</label> </template></template> <div class="lyteField{{if(ltPropValue,\' ltIconShow\',\'\')}} {{isBox}} {{ltPropWrapperClass}}" style="{{ltPropWrapperStyle}}"> <input tabindex="{{ltPropTabIndex}}" type="text" value="{{lbind(ltPropValue)}}" id="{{ltPropId}}" class="{{ltPropClass}}" maxlength="{{ltPropMaxlength}}" name="{{ltPropName}}" placeholder="{{ltPropPlaceholder}}" autocomplete="{{ltPropAutocomplete}}" autofocus="{{ltPropAutofocus}}" disabled="{{ltPropDisabled}}" readonly="{{ltPropReadonly}}" onfocus="{{action(\'focusClass\',event)}}" onblur="{{action(\'blurThrow\',event)}}" style="{{ltPropStyle}}" title="{{ltPropInputTitle}}" pattern="{{ltPropPattern}}" oninput="{{action(\'input\',event)}}"> <template is="if" value="{{expHandlers(ltPropType,\'==\',&quot;search&quot;)}}"><template case="true"> <span class="searchIcon"></span> </template></template> <template is="if" value="{{ltPropCloseIcon}}"><template case="true"> <span class="inputCloseIcon" onclick="{{action(\'clsIcon\',event)}}" style="{{if(ltPropValue,\'display: block;\',\'display: none;\')}}"></span> </template></template> </div>  </template> </template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{password:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3],attr:{style:{name:"style",dynamicValue:"ltPropWrapperStyle"}}},{type:"attr",position:[3,1],attr:{style:{name:"style",dynamicValue:"ltPropStyle"},type:{name:"type",dynamicValue:"ltPropType"}}},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"if",args:["ltPropValue","'display: block;'","'display: none;'"]}}}}]}},default:{}}]},number:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3],attr:{style:{name:"style",dynamicValue:"ltPropWrapperStyle"}}},{type:"attr",position:[3,1],attr:{style:{name:"style",dynamicValue:"ltPropStyle"},value:{name:"value",dynamicValue:"ltPropValue",isLbind:!0}}},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"if",args:["ltPropValue","'display: block;'","'display: none;'"]}}}}]}},default:{}}]},textarea:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3],attr:{style:{name:"style",dynamicValue:"ltPropWrapperStyle"}}},{type:"attr",position:[3,1],attr:{style:{name:"style",dynamicValue:"ltPropStyle"},placeholder:{name:"placeholder",dynamicValue:"ltPropPlaceholder"}}},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[]}},default:{}}]},date:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3],attr:{style:{name:"style",dynamicValue:"ltPropWrapperStyle"}}},{type:"attr",position:[3,1],attr:{style:{name:"style",dynamicValue:"ltPropStyle"}}},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"registerYield",position:[1],dynamicNodes:[{type:"insertYield",position:[1]}]}]}},default:{}},{type:"componentDynamic",position:[1,1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]},datetime:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3],attr:{style:{name:"style",dynamicValue:"ltPropWrapperStyle"}}},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3,3]},{type:"attr",position:[3,5],attr:{style:{name:"style",dynamicValue:"ltPropStyle"}}},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"registerYield",position:[1],dynamicNodes:[{type:"insertYield",position:[1]}]}]}},default:{}},{type:"componentDynamic",position:[1,1]}]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[7]},{type:"registerYield",position:[7,1],dynamicNodes:[{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3,3,1]},{type:"for",position:[3,3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1,0]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3,3]},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[7]}]},time:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3],attr:{style:{name:"style",dynamicValue:"ltPropWrapperStyle"}}},{type:"attr",position:[3,1],attr:{style:{name:"style",dynamicValue:"ltPropStyle"}}},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3,3,1]},{type:"for",position:[3,3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1,0]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3,3]},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3],attr:{style:{name:"style",dynamicValue:"ltPropWrapperStyle"}}},{type:"attr",position:[3,1],attr:{style:{name:"style",dynamicValue:"ltPropStyle"}}},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[]}},default:{}},{type:"attr",position:[3,5]},{type:"if",position:[3,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"if",args:["ltPropValue","'display: block;'","'display: none;'"]}}}}]}},default:{}}]}}],_observedAttributes:["ltPropDisabled","ltPropAutofocus","ltPropAutocomplete","ltPropMaxlength","ltPropName","ltPropPlaceholder","ltPropReadonly","ltPropValue","ltPropWidth","ltPropTabIndex","ltPropType","ltPropAppearance","ltPropDirection","ltPropLabel","ltPropId","ltPropClass","ltPropStyle","ltPropWrapperStyle","ltPropHeight","ltPropPattern","ltPropInputTitle","ltPropRows","ltPropCols","ltPropTextAreaResize","ltPropMax","ltPropMin","ltPropStep","ltPropTimeFormat","ltPropHourInterval","ltPropDefaultTime","ltPropMinuteInterval","ltPropDropdown","ltPropShowInterval","ltPropStartTime","ltPropEndTime","ltPropConvertToNearest","ltPropValidateOnBlur","ltPropFillRows","ltPropNumberOfRows","ltPropMinDate","ltPropMaxDate","ltPropStartWeekDay","ltPropMonthHeaderFormat","daysOfWeek","ltPropYear","ltPropFormat","viewDate","ltPropStartDate","ltPropEndDate","ltPropCurrentDate","ltPropBindToBody","ltPropCalendarClass","ltPropHeaderType","ltPropDropdownDisabled","ltPropDropdownShow","ltPropDropdownCallout","ltPropDropdownFreeze","ltPropDropdownId","ltPropDropdownClass","ltPropPosition","ltPropBoundary","ltPropWheel","ltPropYield","ltPropAnimate","ltPropPreventSelection","ltPropPreventKeys","ltPropUpdateDelay","ltPropAutoUpdate","ltPropCallbackDelay","ltPropCloseIcon","ltPropTimePlaceholder","ltPropCommonPlaceholder","ltPropTimeClass","ltPropAria","ltPropAriaAttributes","ltPropFocus","ltPropCalendarProperties","ltPropDropdownProperties","ltPropScope","ltPropHeaderYield","ltPropConvertedDate","ltPropConvertedTime","ltPropPreventDropdownNavigation","ltPropInputWrapperClass","ltPropWrapperClass","eventListeners","selectedField","endMinute","startMinute","dropdownData","originalData","dateRange","meridian","hour","min","selectedDateField","preventObs","resize","pos","isSearch","isBox","dateOrder","showPlaceholder","lyteUnbound"],init:function(){var e=this.data,t=e.ltPropType;"time"!=t&&"datetime"!=t||(this._prevent=!0,this.timeInValChange.call(this),this.startEndTimeObs.call(this),delete this._prevent,-1!=t.indexOf("time")&&e.ltPropDropdown&&(this.dropdownConstruct(),"time"==t&&(e.ltPropDefaultTime=e.ltPropDefaultTime||e.ltPropValue))),"date"!=t&&"datetime"!=t||("date"==t&&(e.ltPropCurrentDate=e.ltPropCurrentDate||e.ltPropValue),this.dateRegexFind()),this.$node.classList.add("lyteInput"),this.$node.classList.add("horizontal"),this.getMethods("beforeRender")&&this.executeMethod("beforeRender",this.$node)},englishDate:function(){if($L.moment&&this.data){var e=this.data.ltPropFormat,t=this.data.ltPropCurrentDate,o="";t&&(o=$L.moment(t,e,{i18n:!0}).format(e)),this.setData("ltPropConvertedDate",o)}},englishTime:function(){if($L.moment&&this.data){var e=this.data.ltPropDefaultTime;if(12==this.data.ltPropTimeFormat){var t="hh:mm A";e=$L.moment(e,t,{i18n:!0}).format(t)}this.setData("ltPropConvertedTime",e)}},didConnect:function(){var e=this.data.ltPropType;if("date"!=e&&"datetime"!=e||(window._lyteUiUtils.input=window._lyteUiUtils.input||{},this.$node._random="LyteInput"+Date.now(),window._lyteUiUtils.input[this.$node._random]=this.$node,this.englishDate()),"time"!=e&&"datetime"!=e||(this.getData("ltPropDropdown")&&(this.dropdown=this.$node.querySelector("lyte-dropdown"),this.dropbox=this.dropdown.component.childComp?this.dropdown.component.childComp:this.dropdown.querySelector("lyte-drop-box"),this.dropdown.element=this.$node.querySelectorAll("input")["datetime"==e?1:0]),this.englishTime()),"time"==e||"date"==e||"datetime"==e){if(this.getData("ltPropWheel")){var t=this.handleWheel.bind(this);this.setData("eventListeners.timeWheel",t),this.$node.addEventListener("wheel",t)}this._manualset=!0,"time"==e?this.setData("ltPropValue",this.data.ltPropDefaultTime):"date"==e&&this.setData("ltPropValue",this.data.ltPropCurrentDate),delete this._manualset}e="textarea"==e?"textarea":"input",["focus","blur","click","select"].forEach(function(t){this.$node[t]=function(o){this.$node.querySelector(e)[t](o)}.bind(this)}.bind(this)),this.getMethods("afterRender")&&this.executeMethod("afterRender",this.$node),$L.fastdom.measure(function(){this._dir=_lyteUiUtils.getRTL(),this._dir&&$L.fastdom.mutate(function(){this.$node.classList.add("lyteRTL"),this.$node.calendarDiv&&this.$node.calendarDiv.classList.add("lyteRTL")}.bind(this))}.bind(this))},didDestroy:function(){this.$node.calendarComp&&(this.$node.calendarComp.remove(),delete this.$node.calendarComp,delete this.$node.calendarDiv,delete this._assCalendar,delete this.$node.revertToSelected);var e=this.getData("eventListeners"),t=this.getData("ltPropType");"date"!=t&&"datetime"!=t||delete window._lyteUiUtils.input[this.$node._random],"time"!=t&&"datetime"!=t||(delete this.dropdown,delete this.dropbox),e.hasOwnProperty("mouseup")&&document.removeEventListener("mouseup",e.mouseup)},rtlfunc:function(e,t,o){if(this._dir){if(t)return"left"==e?o-t.right:"clientX"==e?o-t.clientX:"offsetLeft"==e?o-t.width-t.offsetLeft:o-t.left;if("left"==e)return"right"}return t?t[e]:"left"},calenderClickHide:function(e){if(this.data.ltPropBindToBody){var t=this.$node.calendarDiv,o=e.target.correspondingElement||e.target;if(!t.classList.contains("lyteCalendarHidden")){if(o&&-1!=["LYTE-DROP-BOX","LYTE-DROP-ITEM","LYTE-DROP-BODY"].indexOf(o.tagName)){for(;"LYTE-DROP-BOX"!=o.tagName&&"BODY"!=o.tagName;)o=o.parentNode;"LYTE-DROP-BOX"==o.tagName&&(o=o.origindd)}this.$node.contains(o)||t.contains(o)?o&&/*!tgt.classList.contains( 'lyteCalDateSpan' ) && !tgt.classList.contains( 'lyteCalCdate' ) &&*/t.contains(o)&&(this._byManual=!0,this.$node.focus()):this._hideCalendar(this.$node)}}},scrollFunc:function(e){if(!e||"resize"!=e.type||!_lyteUiUtils.isMobile){var t=this.$node.calendarDiv;$L.fastdom.mutate(function(){e&&"orientationchange"==e.type?setTimeout(this.setCss.bind(this),500):this.setCss(),$L.fastdom.measure(function(){var o=this.data.ltPropBoundary,a=this.$node.getBoundingClientRect(),r=window.innerWidth;t&&e&&"scroll"==e.type&&!t.classList.contains("lyteCalendarHidden")?(o.hasOwnProperty("left")&&this.rtlfunc.call(this,"left",a,r)<o.left||o.hasOwnProperty("right")&&this.rtlfunc.call(this,"right",a,r)>o.right||o.hasOwnProperty("top")&&a.top<o.top||o.hasOwnProperty("bottom")&&a.bottom>o.bottom)&&this._hideCalendar(this.$node,!0):this._closedbyscrl&&(null==o.left||this.rtlfunc.call(this,"left",a,r)>=o.left)&&(null==o.right||this.rtlfunc.call(this,"right",a,r)<=o.right)&&(null==o.top||a.top>=o.top)&&(null==o.bottom||a.bottom<=o.bottom)&&(this._byManual=!0,this.$node.focus(),delete this._byManual,this.showCalendar({},this.$node.querySelector("input")),delete this._closedbyscrl)}.bind(this))}.bind(this))}},textareaFuncObs:function(){if("textarea"==this.getData("ltPropType")){var e=this.getData("ltPropTextAreaResize");e.horizontal||e.vertical?(this.setData("resize",!0),this._resizeBinded||(this.textareaFunc(),this._resizeBinded=!0)):this.setData("resize",!1);var t=$L(".lyteTextareaResize",this.$node),o="lyteTextareaResizeVertical",a="lyteTextareaResizeHorizontal";e.vertical&&e.horizontal||!e.horizontal&&!e.vertical?t.removeClass(o+" "+a+" "):e.vertical?t.addClass(o).removeClass(a+" "):e.horizontal&&t.removeClass(o+" ").addClass(a),e.horizontal||e.vertical||$L(this.$node).addClass("lyteTextareaNoResize")}}.observes("ltPropTextAreaResize","ltPropTextAreaResize.{}").on("didConnect"),btobody:function(e){e.newValue||delete this.$node.revertToToday}.observes("ltPropBindToBody"),disAbs:function(){this.$node.classList[this.data.ltPropDisabled?"add":"remove"]("lyteInputDisabled")}.observes("ltPropDisabled").on("didConnect"),readAbs:function(){this.$node.classList[this.data.ltPropReadonly?"add":"remove"]("lyteInputReadonly")}.observes("ltPropReadonly").on("didConnect"),rsizefun:function(e){var t="touchstart"==e.type,o=e;if(!(t&&1!=e.touches.length||(t&&(o=e.touches[0]),this.getMethods("onResizeStart")&&0==this.executeMethod("onResizeStart",e,this.$node)))){var a=this.$node.querySelector("textarea"),r=this.getData("ltPropTextAreaResize")||{};e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),document.addEventListener(t?"touchmove":"mousemove",this.data.eventListeners.resizeFunc,!0),document.addEventListener(t?"touchend":"mouseup",this.data.eventListeners.mouseup,!0);var i,s,l,n,p,c,d,u,h,m,y,f,g,v=this.$node.querySelector("label");this.data.ltPropDirection;$L.fastdom.measure(function(){v&&(u=v.getBoundingClientRect()),f=window.getComputedStyle(a),y=a.getBoundingClientRect(),m=window.getComputedStyle(a.parentElement),h=this.$node.getBoundingClientRect(),this._resizeDirection=f.resize,n=f.minWidth,p=f.maxWidth,c=f.minHeight,d=f.maxHeight,i=m.height,s=m.width,l=m.paddingLeft,this._ww=g=window.innerWidth}.bind(this)),$L.fastdom.mutate(function(){r.horizontal&&(this.$node.style.width=h.width+"px",v&&(v.style.width=u.width+"px",v.style.minWidth=u.width+"px"),a.style.width=y.width+"px",a.parentElement.style.width="auto",this._iniLeft=this.rtlfunc.call(this,"left",y,g),this._offLeft=this.rtlfunc.call(this,"right",y,g)-this.rtlfunc.call(this,"clientX",o,g),this._minWidth=(-1!=n.indexOf("%")?parseInt(s)*parseInt(n)/100:parseFloat(n))+parseInt(l),this._maxWidth=-1!=p.indexOf("%")?parseInt(s)*parseInt(p)/100:parseFloat(p)),r.vertical&&(this.$node.style.height=h.height+"px",v&&(v.style.height=u.height+"px"),a.style.height=y.height+"px",a.parentElement.style.height="auto",a.parentElement.style.minWidth="auto",this._iniTop=y.top,this._offTop=y.bottom-o.clientY,this._minHeight=-1!=c.indexOf("%")?parseInt(i)*parseInt(c)/100:parseFloat(c),this._maxHeight=-1!=d.indexOf("%")?parseInt(i)*parseInt(d)/100:parseFloat(d)),this.$node.classList.add("resizeStart")}.bind(this))}},textareaFunc:function(){var e=this.textareaResize.bind(this),t=this.mouseup.bind(this);if(this.setData("eventListeners.resizeFunc",e),this.setData("eventListeners.mouseup",t),this.getData("ltPropTextAreaResize")){var o=this.$node.querySelector(".lyteTextareaResize");o.addEventListener("mousedown",this.rsizefun.bind(this),!0),o.addEventListener("touchstart",this.rsizefun.bind(this),!0)}},mouseup:function(e){this.$node.classList.remove("resizeStart");var t=this.getData("eventListeners"),o="touchend"==e.type;document.removeEventListener(o?"touchmove":"mousemove",t.resizeFunc,!0),document.removeEventListener(o?"touchend":"mouseup",t.mouseup,!0),this.getMethods("onResizeEnd")&&this.executeMethod("onResizeEnd",e,this._resize_move,this.$node),delete this._iniLeft,delete this._iniTop,delete this._offLeft,delete this._offTop,delete this._ww,delete this._minHeight,delete this._maxHeight,delete this._minWidth,delete this._maxWidth,delete this._resize_move},textareaResize:function(e){this._resize_move=!0;var t=this.$node.querySelector("textarea"),o="touchmove"==e.type,a=e;if(o){if(1!=a.touches.length)return;a.preventDefault(),a=a.touches[0]}$L.fastdom.measure(function(){var e=t.getBoundingClientRect();if(this._iniLeft){var o=this.rtlfunc.call(this,"clientX",a,this._ww),r=(o>this._iniLeft?o:this._iniLeft)-this._iniLeft+this._offLeft,i=parseFloat(this.$node.style.width)+r-e.width;r>=this._minWidth&&(isNaN(this._maxWidth)||!isNaN(this._maxWidth)&&r<=this._maxWidth)&&(t.style.width=r+"px",this.$node.style.width=i+"px",this._prevent=!0,this.$node.ltProp("width",i),delete this._prevent)}if(this._iniTop){var s=(a.clientY>this._iniTop?a.clientY:this._iniTop)-this._iniTop+this._offTop;i=parseFloat(this.$node.style.height)+s-e.height;s>=this._minHeight&&(isNaN(this._maxHeight)||!isNaN(this._maxHeight)&&s<=this._maxHeight)&&(t.style.height=s+"px",this.$node.style.height=i+"px",this._prevent=!0,this.$node.ltProp("height",s),delete this._prevent)}}.bind(this))},heightFuncObs:function(){this.heightFunc.call(this,arguments[0])}.observes("ltPropHeight").on("didConnect"),heightFunc:function(e){var t=this.getData("ltPropHeight");this._prevent||$L("input,textarea",this.$node).eq(0).css("height",t)},widthfunObs:function(){this.widthfun()}.observes("ltPropWidth").on("didConnect"),widthfun:function(){var e=this.getData("ltPropWidth");this._prevent||(this.$node.style.width=e)},appearanceFunObs:function(){this.appearanceFun()}.observes("ltPropAppearance").on("didConnect"),appearanceFun:function(){var e=this.data.ltPropType,t=$L(this.$node);"box"==this.getData("ltPropAppearance")?("search"==e&&t.find(".lyteField").addClass("lyteInputBoxSearch"),t.addClass("lyteInputBox").removeClass("lyteInput")):("search"==e&&t.find(".lyteField").removeClass("lyteInputBoxSearch"),t.addClass("lyteInput").removeClass("lyteInputBox"))},directionfunObs:function(){this.directionfun()}.observes("ltPropDirection").on("didConnect"),directionfun:function(){var e=$L(this.$node);"vertical"==this.data.ltPropDirection?e.addClass("vertical").removeClass("horizontal"):e.removeClass("vertical").addClass("horizontal")},data:function(){return{ltPropDisabled:Lyte.attr("boolean",{default:!1}),ltPropAutofocus:Lyte.attr("boolean",{default:!1}),ltPropAutocomplete:Lyte.attr("string",{default:"off"}),ltPropMaxlength:Lyte.attr("number",{default:void 0}),ltPropName:Lyte.attr("string",{default:""}),ltPropPlaceholder:Lyte.attr("string",{default:""}),ltPropReadonly:Lyte.attr("boolean",{default:!1}),ltPropValue:Lyte.attr("string",{default:""}),ltPropWidth:Lyte.attr("string",{default:""}),ltPropTabIndex:Lyte.attr("string",{default:"0"}),ltPropType:Lyte.attr("string",{default:""}),ltPropAppearance:Lyte.attr("string",{default:""}),ltPropDirection:Lyte.attr("string",{default:"vertical"}),ltPropLabel:Lyte.attr("string",{default:""}),ltPropId:Lyte.attr("string",{default:""}),ltPropClass:Lyte.attr("string",{default:""}),ltPropStyle:Lyte.attr("string",{default:""}),ltPropWrapperStyle:Lyte.attr("string",{default:""}),ltPropHeight:Lyte.attr("string",{default:""}),ltPropPattern:Lyte.attr("string",{default:".+"}),ltPropInputTitle:Lyte.attr("string",{default:""}),ltPropRows:Lyte.attr("number",{default:void 0}),ltPropCols:Lyte.attr("number",{default:void 0}),ltPropTextAreaResize:Lyte.attr("object",{default:{vertical:!0,horizontal:!0}}),ltPropMax:Lyte.attr("number",{default:void 0}),ltPropMin:Lyte.attr("number",{default:void 0}),ltPropStep:Lyte.attr("number",{default:1}),ltPropTimeFormat:Lyte.attr("number",{default:12}),ltPropHourInterval:Lyte.attr("number",{default:1}),ltPropDefaultTime:Lyte.attr("string",{default:""}),ltPropMinuteInterval:Lyte.attr("number",{default:30}),ltPropDropdown:Lyte.attr("boolean",{default:!1}),ltPropShowInterval:Lyte.attr("boolean",{default:!1}),ltPropStartTime:Lyte.attr("string",{default:""}),ltPropEndTime:Lyte.attr("string",{default:""}),ltPropConvertToNearest:Lyte.attr("boolean",{default:!1}),ltPropValidateOnBlur:Lyte.attr("boolean",{default:!1}),ltPropFillRows:Lyte.attr("boolean",{default:!0}),ltPropNumberOfRows:Lyte.attr("number",{default:6}),ltPropMinDate:Lyte.attr("string",{default:""}),ltPropMaxDate:Lyte.attr("string",{default:""}),ltPropStartWeekDay:Lyte.attr("number",{default:1}),ltPropMonthHeaderFormat:Lyte.attr("string",{default:"MMMM YYYY"}),daysOfWeek:Lyte.attr("array",{default:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}),ltPropYear:Lyte.attr("boolean",{default:!0}),ltPropFormat:Lyte.attr("string",{default:"MM/DD/YYYY"}),viewDate:Lyte.attr("object",{default:{}}),ltPropStartDate:Lyte.attr("string",{default:""}),ltPropEndDate:Lyte.attr("string",{default:""}),ltPropCurrentDate:Lyte.attr("string",{default:""}),ltPropBindToBody:Lyte.attr("boolean",{default:!0}),ltPropCalendarClass:Lyte.attr("string",{default:""}),ltPropHeaderType:Lyte.attr("string",{default:"default"}),ltPropDropdownDisabled:Lyte.attr("boolean",{default:!1}),ltPropDropdownShow:Lyte.attr("boolean",{default:!1}),ltPropDropdownCallout:Lyte.attr("boolean",{default:!1}),ltPropDropdownFreeze:Lyte.attr("boolean",{default:!1}),ltPropDropdownId:Lyte.attr("string",{default:""}),ltPropDropdownClass:Lyte.attr("string",{default:""}),ltPropPosition:Lyte.attr("string",{default:"down"}),ltPropBoundary:Lyte.attr("object",{default:{}}),ltPropWheel:Lyte.attr("boolean",{default:!1}),ltPropYield:Lyte.attr("boolean",{default:!1}),ltPropAnimate:Lyte.attr("boolean",{default:!1}),ltPropPreventSelection:Lyte.attr("boolean",{default:!1}),ltPropPreventKeys:Lyte.attr("boolean",{default:!1}),ltPropUpdateDelay:Lyte.attr("number",{default:250}),ltPropAutoUpdate:Lyte.attr("boolean",{default:!0}),ltPropCallbackDelay:Lyte.attr("number",{default:0}),ltPropCloseIcon:Lyte.attr("boolean",{default:!1}),ltPropTimePlaceholder:Lyte.attr("string",{default:""}),ltPropCommonPlaceholder:Lyte.attr("string",{default:""}),ltPropTimeClass:Lyte.attr("string",{default:""}),ltPropAria:Lyte.attr("boolean",{default:!1}),ltPropAriaAttributes:Lyte.attr("object",{default:{}}),ltPropFocus:Lyte.attr("boolean",{default:!1}),ltPropCalendarProperties:Lyte.attr("object",{default:{}}),ltPropDropdownProperties:Lyte.attr("object",{default:{}}),ltPropScope:Lyte.attr("string",{default:""}),ltPropHeaderYield:Lyte.attr("boolean",{default:!1}),ltPropConvertedDate:Lyte.attr("string",{default:""}),ltPropConvertedTime:Lyte.attr("string",{default:""}),ltPropPreventDropdownNavigation:Lyte.attr("boolean",{default:!1}),ltPropInputWrapperClass:Lyte.attr("string",{default:""}),ltPropWrapperClass:Lyte.attr("string",{default:""}),eventListeners:Lyte.attr("object",{default:{}}),selectedField:Lyte.attr("object",{default:{}}),endMinute:Lyte.attr("number",{default:""}),startMinute:Lyte.attr("number",{default:""}),dropdownData:Lyte.attr("array",{default:[]}),originalData:Lyte.attr("array",{default:[]}),dateRange:Lyte.attr("object",{default:{day:[],month:[],year:[]}}),meridian:Lyte.attr("object",{default:{AM:window._lyteUiUtils?_lyteUiUtils.i18n("AM"):"AM",PM:window._lyteUiUtils?_lyteUiUtils.i18n("PM"):"PM"}}),hour:Lyte.attr("string",{default:_lyteUiUtils.i18n("hour")}),min:Lyte.attr("string",{default:_lyteUiUtils.i18n("min")}),selectedDateField:Lyte.attr("string",{default:""}),preventObs:Lyte.attr("boolean",{default:!0}),resize:Lyte.attr("boolean",{default:!0}),pos:Lyte.attr("string",{default:""}),isSearch:Lyte.attr("boolean",{default:!1}),isBox:Lyte.attr("string",{default:""}),dateOrder:Lyte.attr("array",{default:[]}),showPlaceholder:Lyte.attr("boolean",{default:!1}),lyteUnbound:Lyte.attr("boolean",{default:!1})}},input_wrap_obs:function(e){var t=(e||{oldValue:""}).oldValue,o=this.data.ltPropInputWrapperClass;$L(this.$node).removeClass(t).addClass(o)}.observes("ltPropInputWrapperClass").on("didConnect"),focusObs:function(){this.data.ltPropFocus&&this.$node.focus(),this.$node.ltProp("focus",!1)}.observes("ltPropFocus").on("didConnect"),boxObs:function(){var e=this.data.ltPropType,t=this.data.ltPropAppearance;"search"==e&&"box"==t?this.setData("isBox","lyteInputBoxSearch"):this.setData("isBox","")}.observes("ltPropType","ltPropAppearance").on("init"),getDateFromFormat:function(e,t){if(this.data.ltPropCalendarProperties.i18n){t=this._assCalendar.component.getRelevantFormat(t);return $L.moment(e).i18N(t)}return this._assCalendar.component.getDateFromFormat(e,t)},dateValidation:function(e){if(!this._assCalendar)return!1;var t=this._assCalendar.component.stringToDate(e,this.data.ltPropFormat);return"Invalid Date"!=t&&t},dateRegexFind:function(e){var t,o=this.getData("dateRange"),a=[];t=e?e.newValue:this.getData("ltPropFormat");var r=/D+/gi.exec(t),i=/M+/gi.exec(t),s=/Y+/gi.exec(t);r&&(o.day[0]=r.index,o.day[1]=r.index+r[0].length,a.push({value:o.day[0],name:"day",format:t.match(/D+/gi)[0]})),i&&(o.month[0]=i.index,o.month[1]=i.index+i[0].length,a.push({value:o.month[0],name:"month",format:t.match(/M+/gi)[0]})),s&&(o.year[0]=s.index,o.year[1]=s.index+s[0].length,a.push({value:o.year[0],name:"year",format:t.match(/Y+/gi)[0]})),a.sort((function(e,t){return e.value-t.value})),this.setData("dateOrder",a)},dateRegexObs:function(e){this.dateRegexFind(e)}.observes("ltPropFormat"),constructingArr:function(e,t,o){e<t&&(e+=1440);var a=(e-t)/60,r={};return r.time=this.convertToRailway(e,!0,o).trim(),r.interval=a<1?e-t+" "+this.getData("min"):(a%1==0?a:a.toFixed(1))+" "+this.getData("hour"),r},dropdownConstruct:function(){if(!this._prevent){var e,t=this.getData("startMinute"),o=[],a=this.getData("endMinute"),r=(this.getData("ltPropHourInterval"),this.getData("ltPropMinuteInterval")),i=this.getData("ltPropTimeFormat"),s=[];for(t>=a&&(a+=1440),e=t;e<=a;e+=r){var l=this.constructingArr(e,t,i);-1==s.indexOf(l.time)&&(o.push(l),s.push(l.time))}this.setData("originalData",o)}},constructNewDrop:function(e,t){var o=[],a=this.getData("startMinute");if(12==t){var r=this.convertToRailway(e.value.trim());0!=this.maxValCheck(r)&&o.push(this.constructingArr(r,a,12)),r+=720,0!=this.maxValCheck(r%1440)&&o.push(this.constructingArr(r,a,12))}else{r=this.convertToRailway(e.value.trim());0!=this.maxValCheck(r)&&o.push(this.constructingArr(r,a,24))}this.dropdown.ltProp("selected",""),0==o.length&&this.data.ltPropValidateOnBlur&&(this.data.ltPropStartTime&&o.push({time:this.data.ltPropStartTime,interval:""}),this.data.ltPropEndTime&&o.push({time:this.data.ltPropEndTime,interval:""})),this.setData("dropdownData",o),this.dropdown.ltProp("selected",this.data.ltPropDefaultTime)},getCorrectTime:function(e){if($L.moment){var t=$L.moment();return 12==e?t.i18N("hh:mm A"):t.format("HH:mm")}var o=new Date,a=o.getHours(),r=o.getMinutes().toString(),i=this.getData("meridian"),s=a>11?i.PM:i.AM;return 1==r.length&&(r="0"+r),12==e?(12!=a&&1==(a=(a%12).toString()).length&&(a="0"+a),a+":"+r+" "+s):(a<10&&(a="0"+a),a+":"+r)},timeFormatChange:function(){this.timeInValChange()}.observes("ltPropTimeFormat"),handleWheel:function(e){var t=e.target,o=this.getData("ltPropType");if(!("INPUT"!=t.tagName||Math.abs(e.deltaY)<=Math.abs(e.deltaX))){if("time"==o||"datetime"==o&&"time"==t.id){if(this._emptytimeValue)return;$L.fastdom.mutate(function(){var o=this.getData("selectedField");(!o.prop||t.selectionStart>3)&&(t.selectionStart=0,t.selectionEnd=2,this.setData("selectedField",{prop:"hour",val:0}),o={prop:"hour",val:0}),e.deltaY<-10?this.timeDecrease.call(this,t,{},o.prop,t.selectionStart,t.selectionEnd):e.deltaY>10&&this.timeIncrease.call(this,t,{},o.prop,t.selectionStart,t.selectionEnd)}.bind(this))}else("date"==o||"datetime"==o&&"date"==t.id)&&(e.deltaY<-10?(e.keyCode=40,this.calendarKeydown.call(this,e,t)):e.deltaY>10&&(e.keyCode=38,this.calendarKeydown.call(this,e,t)));e.preventDefault()}},wheelObs:function(e){e.newValue?this.$node.addEventListener("wheel",this.getData("eventListeners.timeWheel")):this.$node.removeEventListener("wheel",this.getData("eventListeners.timeWheel"))}.observes("ltPropWheel"),convertToRailway:function(e,t,o){var a=this.getData("meridian");if(t){i=parseInt(e/60)%24;(s=e%60)<10&&(s="0"+s);r="";return 12==o&&(1==parseInt(i/12)?(i>12&&(i%=12),r=a.PM):(r=a.AM,i=i||12)),i<10&&(i="0"+i),i+":"+s+" "+r}var r,i=parseInt(e.slice(0,2)),s=parseInt(e.slice(3,5));return 5!=e.length?60*((r=e.slice(6,e.length))==a.PM?i%12+12:i%12)+s:60*i+s},maxValCheck:function(e){var t,o=this.getData("endMinute"),a=this.getData("startMinute");if(t="string"==typeof e?this.convertToRailway(e):e,a<o){if(t<=o&&t>=a)return!0}else if(t<1440&&t>=a||t>=0&&t<=o)return!0;return!1},timeInValChange:function(e){var t,o=this.getData("ltPropTimeFormat"),a=this.data.ltPropValue,r=this.data.ltPropType;if(e)t=e.newValue;else if(t=this.getData("ltPropDefaultTime"),(null==a||"datetime"==r)&&!t&&$L.moment&&("time"==r?this.data.ltPropPlaceholder:this.data.ltPropTimePlaceholder||this.data.ltPropCommonPlaceholder))return this._emptytimeValue=!0,void("datetime"==r&&this.checkCommonPlaceHolder());if(!t){var i=this.getData("ltPropStartTime");t=i||this.getCorrectTime(o)}this.setData("ltPropDefaultTime",t.slice(0,12!=o?5:t.length))},checkCommonPlaceHolder:function(){(this.data||{}).ltPropCommonPlaceholder&&this.setData("showPlaceholder",!(this.data.ltPropCurrentDate||this.data.ltPropDefaultTime))},startEndTimeObs:function(e){if(!e||"ltPropStartTime"==e.item){var t=this._emptytimeValue?this.getCorrectTime(this.data.ltPropTimeFormat):this.getData("ltPropDefaultTime"),o=this.getData("ltPropStartTime");o||(this.setData("ltPropStartTime",t),o=t),this.setData("startMinute",this.convertToRailway(o))}if(!e||"ltPropEndTime"==e.item){var a=this.getData("ltPropEndTime");if(!a){var r=Math.max(0,parseInt(o.slice(3,5))-1).toString();1==r.length&&(r="0"+r),a=(o.slice(0,3)+r+" "+o.slice(6,o.length)).trim(),this.setData("ltPropEndTime",a)}this.setData("endMinute",this.convertToRailway(a))}this.data.ltPropDropdown&&this.dropdownConstruct()},timeBoundObs:function(e){if(!e||""!=e.newValue||null!=e.oldValue)if(!e||e&&"ltPropDefaultTime"!=e.item)this.startEndTimeObs(e);else{if(e&&!e.newValue)return void this.timeInValChange();this.setData("preventObs")&&this.setData("ltPropValue",e.newValue),this.englishTime(),this.getMethods("onTimeChange")&&this.executeMethod("onTimeChange",e,this.$node),this._manualset=!0,"time"==this.data.ltPropType?this.setData("ltPropValue",e.newValue):this.checkCommonPlaceHolder(),delete this._manualset}}.observes("ltPropStartTime","ltPropEndTime","ltPropDefaultTime"),dateChangeCallback:function(e){var t=this.data.ltPropCallbackDelay;this._manualset=!0,"date"==this.data.ltPropType&&this.setData("ltPropValue",e.newValue),delete this._manualset,null==t?this.dateCallback(e):setTimeout(this.dateCallback.bind(this),t,e),this.checkCommonPlaceHolder()}.observes("ltPropCurrentDate"),dateCallback:function(e){""==e.newValue&&null==e.oldValue||(this.englishDate(),this.getMethods("onDateChange")&&this.executeMethod("onDateChange",e,this.$node,this._selected),this.checkCommonPlaceHolder(),delete this._selected)},timeCallback:function(e){""==e.newValue&&null==e.oldValue||this.getMethods("onValueChange")&&this.executeMethod("onValueChange",e,this.$node)},valChangeObs:function(e){var t=this.data.ltPropCallbackDelay;if(!this._manualset){var o=this.data.ltPropType;"date"==o?this.setData("ltPropCurrentDate",e.newValue):"time"==o&&this.setData("ltPropDefaultTime",e.newValue)}null==t?this.timeCallback(e):setTimeout(this.timeCallback.bind(this),t,e)}.observes("ltPropValue"),firePosCallBack:function(){var e=this.$node.calendarDiv,t=this.data.pos;$L(e).removeClass("lyteInputCalendarUp lyteInputCalendarDown").addClass("lyteInputCalendar"+(/up/i.test(t)?"Up":"Down")),this.getMethods("onPositionChanged")&&this.executeMethod("onPositionChanged",t,e)}.observes("pos"),setLeftExceedForDown:function(e,t,o,a,r,i){var s=o;return r+this.rtlfunc.call(this,"left",s,i)+s.width-a.width},setLeftNotExceedForDown:function(e,t,o,a){var r=t;return o+this.rtlfunc.call(this,"left",r,a)},setTopAboveForDown:function(e,t,o,a,r){return r+o.top-a.height},setTopBelowForDown:function(e,t,o){var a=t;return o+a.top+a.height},setLeftForRight:function(e,t,o,a){var r=t;return o+this.rtlfunc.call(this,"left",r,a)+r.width},setRightForRight:function(e,t,o,a,r,i){var s=o,l=a;return r+this.rtlfunc.call(this,"left",s,i)-l.width},setTopForRight:function(e,t,o){return o+t.top},setTopForRightAbove:function(e,t,o,a,r){var i=o;return r+i.top+i.height-a.height},setCss:function(){var e=this.$node.calendarDiv;if(e&&!e.classList.contains("lyteCalendarHidden")){var t,o,a,r,i,s=e,l=this.$node.querySelector("input").parentElement,n=0,p=0,c=window.innerWidth,d=window.innerHeight,u=c,h=s.getBoundingClientRect(),m=(window.pageXOffset||document.documentElement.scrollLeft)*(this._dir?-1:1),y=window.pageYOffset||document.documentElement.scrollTop,f=s.offsetHeight,g=s.offsetWidth,v=this.getData("ltPropPosition"),x=l.getBoundingClientRect(),P=this.data.ltPropScope,b=P?$L(this.$node).closest(P).get(0):void 0,D=b?b.getBoundingClientRect():void 0;D&&(n=Math.max(n,D.left),p=Math.max(p,D.top),c=Math.min(c,D.right),d=Math.min(d,D.bottom));var L,C,_=this.rtlfunc.call(this,"left",x,u),S=this.rtlfunc.call(this,"left");"down"===v?(t=!0,(L=x.top+x.height)+f>d&&(t=d-x.top>x.bottom-p),o=!0,(C=_)+g>c&&C>C+x.width-s.offsetWidth&&(o=!1),t?(this.setData("pos","down"),s.style.top=this.setTopBelowForDown(l,x,y)+"px"):(this.setData("pos","up"),s.style.top=this.setTopAboveForDown(l,s,x,h,y,u)+"px"),o?(s.style.top=s.style.top,s.style[S]=this.setLeftNotExceedForDown(l,x,m,u)+"px"):(s.style.top=s.style.top,s.style[S]=this.setLeftExceedForDown(l,s,x,h,m,u)+"px")):"right"===v?(o=!0,_+x.width+g>c&&_-h.width>n&&(o=!1),t=!0,x.top+h.height>d&&(t=d-x.top>x.bottom-p),o?(this.setData("pos","right"),s.style[S]=this.setLeftForRight(l,x,m,u)+"px"):(this.setData("pos","left"),s.style[S]=this.setRightForRight(l,s,x,h,m,u)+"px"),t?(s.style[S]=s.style[S],s.style.top=this.setTopForRight(l,x,y)+"px"):(s.style[S]=s.style[S],s.style.top=this.setTopForRightAbove(l,s,x,h,y)+"px")):"up"===v?(a=!0,x.top-h.height<p&&(a=d-x.top<x.bottom-p),o=!0,_+g>c&&_>_+x.width-s.offsetWidth&&(o=!1),a?(this.setData("pos","up"),s.style.top=this.setTopAboveForDown(l,s,x,h,y)+"px"):(this.setData("pos","down"),s.style.top=this.setTopBelowForDown(l,x,y)+"px"),o?(s.style.top=s.style.top,s.style[S]=this.setLeftNotExceedForDown(l,x,m,u)+"px"):(s.style.top=s.style.top,s.style[S]=this.setLeftExceedForDown(l,s,x,h,m,u)+"px")):"left"===v?(r=!0,_-h.width<n&&_+h.width<c&&(r=!1),t=!0,x.top+h.height>d&&(t=d-x.top>x.bottom-p),r?(this.setData("pos","left"),s.style[S]=this.setRightForRight(l,s,x,h,m,u)+"px"):(this.setData("pos","right"),s.style[S]=this.setLeftForRight(l,x,m,u)+"px"),t?(s.style[S]=s.style[S],s.style.top=this.setTopForRight(l,x,y)+"px"):(s.style[S]=s.style[S],s.style.top=this.setTopForRightAbove(l,s,x,h,y)+"px")):"downLeft"===v?(t=!0,(L=x.top+x.height)+f>d&&(t=d-x.top>x.bottom-p),t||(L=x.top-f),o=!1,(C=_+x.width/2-g)<n&&(C=n,o=!0),s.style.top=L+y+"px",s.style[S]=C+m+"px",i=t?"downLeft":"upLeft",this.setData("pos",i)):"downRight"===v?(t=!0,(L=x.top+x.height)+f>d&&(t=d-x.top>x.bottom-p),t||(L=x.top-f),o=!0,(C=_+x.width/2)+g>c&&(C=c-g,o=!1),s.style.top=L+y+"px",s.style[S]=C+m+"px",i=t?"downRight":"upRight",this.setData("pos",i)):"upLeft"===v?(t=!1,(L=x.top-f)<p&&(t=d-x.top>x.bottom-p),t&&(L=x.top+x.height),o=!1,(C=x[S]+x.width/2-g)<n&&(C=n,o=!0),s.style.top=L+y+"px",s.style[S]=C+m+"px",i=t?"downLeft":"upLeft",this.setData("pos",i)):"upRight"===v&&(t=!1,(L=x.top-f)<p&&(t=d-x.top>x.bottom-p),t&&(L=x.top+x.height),o=!0,(C=_+x.width/2)+g>c&&(C=c-g,o=!1),s.style.top=L+y+"px",s.style[S]=C+m+"px",i=t?"downRight":"upRight",this.setData("pos",i))}},preventFn:function(){this.preventFocus=!0},methods:{wormholeAppend:function(e,t){this.$node.calendarComp=e,e.nodeN=this.$node,this.$node.calendarDiv=e.querySelector("div#lyteCalendar"),this._assCalendar=this.$node.calendarDiv.querySelector("lyte-calendar");var o=this.calendarMousedown.bind(this);this.$node.calendarDiv.addEventListener("mousedown",o,!0),this.setData("eventListeners.mousedown",o),this.$node.revertToToday=this._assCalendar.revertToToday,this.$node.revertToSelected=this._assCalendar.revertToSelected;for(var a=this._assCalendar.querySelectorAll("lyte-dropdown"),r=0;r<a.length;r++){(a[r].component.childComp||a[r].querySelector("lyte-drop-box")).addEventListener("mousedown",this.preventFn.bind(this))}},"on-dateselected":function(){this._selected=!0,this._hideCalendar(this.$node)},hide:function(){$L(this.$node).removeClass("lyteInputDropdownOpen"),this.getMethods("onHide")&&this.executeMethod("onHide",arguments[0],arguments[1],this.$node)},beforeHide:function(){if(this.getMethods("onBeforeHide"))return this.executeMethod("onBeforeHide",arguments[0],arguments[1],this.$node)},show:function(){$L(this.$node).addClass("lyteInputDropdownOpen"),this.getMethods("onShow")&&this.executeMethod("onShow",arguments[0],arguments[1],this.$node)},beforeShow:function(){if(this.getMethods("onBeforeShow"))return this.executeMethod("onBeforeShow",arguments[0],arguments[1],this.$node)},optionSelected:function(){this._calmsfg=!0,delete this._emptytimeValue,this.setData("ltPropDefaultTime",arguments[1].trim()),$L("input",this.$node).get(-1).focus()},scroll:function(){this.getMethods("onScroll")&&this.executeMethod("onScroll",arguments[0],arguments[1])},positionChange:function(){this.getMethods("onPositionChanged")&&this.executeMethod("onPositionChanged",arguments[0],arguments[1])},calendarNavigate:function(e,t,o,a){$L.fastdom.measure(this.setCss.bind(this)),this.getMethods("onNavigate")&&this.executeMethod("onNavigate",e,t,o,a)},viewDateChange:function(e,t){this.getMethods("onViewdateChange")&&this.executeMethod("onViewdateChange",e,t,this.$node)},viewChange:function(e,t,o){$L.fastdom.measure(this.setCss.bind(this)),this.getMethods("onViewChange")&&this.executeMethod("onViewChange",e,t,o,this.$node)}},valUpdate:function(){if(this.$node&&this){delete this._timeout;var e=this.data.ltPropType;if("date"==e||"datetime"==e){var t=this.$node.querySelector("input").value;this.setData("ltPropCurrentDate",t||"")}else if("textarea"==e){t=this.$node.querySelector("textarea").value;this.setData("ltPropValue",t||"")}else{t=this.$node.querySelector("input").value;this.setData("ltPropValue",t||"")}}},fixSelection:function(e,t,o){this.data.ltPropReadonly||(o.selectionStart=t.val+e,o.selectionEnd=o.selectionStart+2,this.timeClick.call(this,{},o,t.val+e))},replaceVal:function(e,t,o,a){var r;r="string"==typeof e?e:e.value;var i=new RegExp("("+r.slice(o,o+a)+")","i");return r.trim().replace(i,t)},retVal:function(e,t,o){return parseInt(e+t)>o?"0"+t:e+t},convertToPm:function(e,t,o){if(12==e){var a=t.slice(6,t.length),r=(t.slice(0,5),t.slice(0,2)),i=t.slice(3,5);return"00"==r&&"AM"==a||"12"==r&&"PM"==a?t:r+":"+i+" "+(o.AM==a?o.PM:o.AM)}return t},hourTimeSet:function(e,t,o,a,r){var i,s=e.value.trim(),l=this.getData("meridian"),n=_lyteUiUtils.getCorrectNumberCode(t.which||t.keyCode)-48,p=s.slice(a+1,r)+n,c=this.data.ltPropTimeFormat,d=this.data.ltPropValidateOnBlur;if("hour"==o?i=12==c?12:24:(delete this._lasttyped,i=60),60==i&&parseInt(p)>=60&&(p="0"+n),"hour"==o)u=this.getCrctHour(s,a,r,i,n,l),this._lasttyped=n+"";else{var u=s.slice(0,a)+p+s.slice(r,s.length);if(!d||d&&"keydown"!=t.type){var h=this.maxValCheck(u);if(0==h&&(u=s.slice(0,a)+this.retVal(s.slice(a,a+1),n,i)+s.slice(r,s.length),0==(h=this.maxValCheck(u))&&(u=s.slice(0,a)+"0"+n+s.slice(r,s.length),0==(h=this.maxValCheck(u))&&(u=this.convertToPm(i,u,l),0==(h=this.maxValCheck(u))))))return!1}}this.setData("ltPropDefaultTime",u),$L.fastdom.mutate((function(){e.selectionStart=a,e.selectionEnd=r}))},_getCrctHour:function(e,t,o){return 0==this.maxValCheck(e)?12==t&&(e=this.convertToPm(t,e,o),0!=this.maxValCheck(e)&&e):e},getCrctHour:function(e,t,o,a,r,i){var s,l,n,p,c=this.data.ltPropValidateOnBlur;if(null!=this._lasttyped){if("00"==(l=this._lasttyped+r)&&12==a&&(p=!0,l="12"),24==a&&parseInt(l)>=24||12==a&&parseInt(l)>=13)n=!1;else{if(s=l+e.slice(o),c)return s;n=this._getCrctHour(s,a,i)}if(0!=n)return n;if(s){var d=this.data.endMinute,u=this.convertToRailway(s);if(u-d<60&&u-d>=0)return this.convertToRailway(d,!0,a).trim()}}if("00"==(l=e.slice(t+1,o)+r)&&12==a){if(!p)return e;l="12"}if(24==a&&parseInt(l)>=24||12==a&&parseInt(l)>=13)n=!1;else{if(s=l+e.slice(o),c)return s;n=this._getCrctHour(s,a,i)}if(0!=n)return n;if("00"==(l=e.slice(0,t+1)+r)&&12==a){if(!p)return e;l="12"}if(24==a&&parseInt(l)>=24||12==a&&parseInt(l)>=13)n=!1;else{if(s=l+e.slice(o),c)return s;n=this._getCrctHour(s,a,i)}if(0!=n)return n;if("00"==(l="0"+r)&&12==a){if(!p)return e;l="12"}if(s=l+e.slice(o),c)return s;if(0!=(n=this._getCrctHour(s,a,i)))return n;if("00"==(l=r+"0")&&12==a){if(!p)return e;l="12"}if(24==a&&parseInt(l)>=24||12==a&&parseInt(l)>=13)n=!1;else{if(s=l+e.slice(o),c)return s;n=this._getCrctHour(s,a,i)}return 0!=n?n:this.data.ltPropConvertToNearest?this.findNearestTime(e,t,o,a,r,i):e},findNearestTime:function(e,t,o,a,r,i){var s;if(null!=this._lasttyped){if(s=this._lasttyped+r,!(24==a&&parseInt(s)>=24||12==a&&parseInt(s)>=13))return this._findNearest(s+e.slice(o),a);!1}return s=e.slice(t+1,o)+r,24==a&&parseInt(s)>=24||12==a&&parseInt(s)>=13?(!1,s=e.slice(0,t+1)+r,24==a&&parseInt(s)>=24||12==a&&parseInt(s)>=13?(!1,s="0"+r,24==a&&parseInt(s)>=24||12==a&&parseInt(s)>=13?(!1,e):this._findNearest(s+e.slice(o),a)):this._findNearest(s+e.slice(o),a)):this._findNearest(s+e.slice(o),a)},_findNearest:function(e,t){var o=this.convertToRailway(e),a=this.data.endMinute,r=this.data.startMinute;return Math.abs(r-o)>Math.abs(a-o)?this.convertToRailway(a,!0,t).trim():this.convertToRailway(r,!0,t).trim()},timeIncrease:function(e,t,o,a,r,i){if(!this.data.ltPropReadonly){var s,l,n,p,c,d=e.value.trim(),u=parseInt(d.slice(a,r)),h=this.getData("ltPropTimeFormat"),m=this.getData("meridian");if("hour"==o?(s=12==h?12:24,l=i?1:this.data.ltPropHourInterval):(s=60,l=this.data.ltPropMinuteInterval),$L.moment&&$L.moment.lyteMoment.prototype.add){var y,f=12==h?"hh:mm A":"HH:mm";d=d.replace(m.AM,"AM").replace(m.PM,"PM"),(y=$L.moment(d,f)).validate()?n=y.add(l,60==s?"minutes":"hours").format(f).replace("AM",m.AM).replace("PM",m.PM):c=!0}if(c){if(p=(u+l)%s,12==s&&p<u&&d.slice(6,d.length)==m.AM)0==p&&(p="12"),d=this.replaceVal.call(this,e,m.PM,6,d.length);else if(12==s&&p<u&&d.slice(6,d.length)==m.PM)12==u&&0!=p||(d=this.replaceVal.call(this,e,m.AM,6,d.length));else if(12==s&&p==u&&d.slice(6,d.length)==m.AM)p="12",d=this.replaceVal.call(this,e,m.PM,6,d.length);else if(60==s&&p<=u){if(0==this.timeIncrease.call(this,e,t,"hour",0,2,!0))return!1;d=e.value.trim()}1==(p=p.toString()).length&&(p="0"+p),n=d.slice(0,a)+p+d.slice(r,d.length)}if(0==this.maxValCheck(n))return!1;this.setData("ltPropDefaultTime",n),$L.fastdom.mutate((function(){e.selectionStart=a,e.selectionEnd=r}))}},timeDecrease:function(e,t,o,a,r,i){if(!this.data.ltPropReadonly){var s,l,n,p,c,d=e.value.trim(),u=parseInt(d.slice(a,r)),h=this.getData("ltPropTimeFormat"),m=this.getData("meridian");if("hour"==o?(s=12==h?12:24,l=i?1:this.getData("ltPropHourInterval")):(s=60,l=this.getData("ltPropMinuteInterval")),$L.moment&&$L.moment.lyteMoment.prototype.subtract){var y,f=12==h?"hh:mm A":"HH:mm";d=d.replace(m.AM,"AM").replace(m.PM,"PM"),(y=$L.moment(d,f)).validate()?n=y.subtract(l,60==s?"minutes":"hours").format(f).replace("AM",m.AM).replace("PM",m.PM):c=!0}if(c){if(p=(u-l+s)%s,12==s&&p>u&&d.slice(6,d.length)==m.AM)d=this.replaceVal.call(this,e,m.PM,6,d.length);else if(12==s&&(p>u||12==u)&&d.slice(6,d.length)==m.PM)d=this.replaceVal.call(this,e,m.AM,6,d.length);else if(12==s&&0==p)d.slice(6,d.length)==m.PM&&(p="12");else if(60==s&&p>=u){if(0==this.timeDecrease.call(this,e,t,"hour",0,2,!0))return!1;d=e.value.trim()}1==(p=p.toString()).length&&(p="0"+p),n=d.slice(0,a)+p+d.slice(r,d.length)}if(0==this.maxValCheck(n))return!1;this.setData("ltPropDefaultTime",n),$L.fastdom.mutate((function(){e.selectionStart=a,e.selectionEnd=r}))}},findCalendarRange:function(e,t,o){if(t.value&&0!=this.dateValidation(t.value)){var a,r=t.selectionStart,i=(t.selectionEnd,this.getData("dateRange"));for(a in i)if(!o||a==this.data.selectedDateField){var s=this.setRangeByMoment(t,i,a);if(s[0]<=r&&s[1]>=r||o){this.data.ltPropPreventSelection?o&&(t.selectionStart=t.selectionEnd=s[1]):(t.selectionStart=s[0],t.selectionEnd=s[1]),this.setData("selectedDateField",a);break}}}},setRangeByMoment:function(e,t,o){var a,r;if($L.moment){var i=this.data.ltPropFormat,s=e.value,l=this.data.ltPropCalendarProperties.i18n,n=$L.moment(s,this._assCalendar.component.getRelevantFormat(i),{i18n:l}),p=l?"i18N":"format";if(n.validate()){for(var c=0,d=i.slice(t[o][0],t[o][1]),u=0;u<this.data.dateOrder.length;u++){var h=this.data.dateOrder[u],m=n[p](h.format);if(h.format==d)break;s=s.replace(m,""),c+=m.length}var y=n[p](d);r=(a=c+s.indexOf(y))+y.length}else a=t[o][0],r=t[o][1]}else a=t[o][0],r=t[o][1];return[a,r]},hideCalendar:function(){for(var e=document.getElementsByTagName("lyte-input"),t=0;t<e.length;t++)e[t]!=this.$node&&e[t].calendarDiv&&!e[t].calendarDiv.classList.contains("lyteCalendarHidden")&&this._hideCalendar(e[t])},_hideCalendar:function(e,t){var o;this.getMethods("onBeforeCalendarClose")&&(o=this.executeMethod("onBeforeCalendarClose",e.calendarDiv,e)),0!=o?o&&o.then?(this._calendarCloseStart=!0,Promise.resolve(o).then(this.mainHideFn.bind(this,e,t))):this.mainHideFn(e,t):this.$node.focus()},mainHideFn:function(e,t){delete this._calendarCloseStart,e.calendarDiv.classList.add("lyteCalendarHidden"),this.$node.classList.remove("calendarOpen"),Array.from(this._assCalendar.querySelectorAll("lyte-dropdown")).forEach((function(e){e.close()})),e.component.getMethods("onCalendarClose")&&e.component.executeMethod("onCalendarClose",e.calendarDiv,e),"drilldown"==this.data.ltPropHeaderType&&this.$node.revertToSelected(),t&&(this.$node.blur(),this._closedbyscrl=!0)},showCalendar:function(e,t){if(this._byManual)delete this._byManual;else if(this.hideCalendar(),!(this.data.ltPropReadonly&&!this.data.ltPropPreventKeys||this._calendarCloseStart)){if(this.getMethods("onBeforeOpen"))if(0==this.executeMethod("onBeforeOpen",e,this.node))return this._prevclick=!0,void setTimeout(function(){delete this._prevclick}.bind(this),100);this.data.ltPropBindToBody||this.setData("ltPropBindToBody",!0),this.$node.calendarDiv.classList.remove("lyteCalendarHidden"),$L.fastdom.measure(this.scrollFunc.bind(this)),$L.fastdom.mutate(function(){this.data.ltPropReadonly||this.findCalendarRange(e,t),this.$node.classList.add("calendarOpen"),"datetime"==this.data.ltPropType&&this.dropdown&&this.dropdown.close(),this.getMethods("onCalendarOpen")&&this.executeMethod("onCalendarOpen",this.$node.calendarDiv,this.$node)}.bind(this))}},calendarMousedown:function(e){this.$node.calendarDiv.contains(e.target.correspondingElement||e.target)&&(this.preventFocus=!0)},timeClick:function(e,t,o){if(!this.data.ltPropReadonly||this.data.ltPropPreventKeys){if(!this.data.ltPropReadonly&&!this._emptytimeValue){var a;switch(Math.min(2,parseInt((null==o?t.selectionStart:o)/3))){case 2:o=6,a=t.value.length,this.setData("selectedField",{prop:"meridian",val:6});break;case 1:o=3,a=5,this.setData("selectedField",{prop:"minute",val:3});break;default:o=0,a=2,this.setData("selectedField",{prop:"hour",val:0})}t.selectionStart=o,t.selectionEnd=a}this.dropbox&&this.dropbox.classList.contains("lyteDropdownHidden")&&"click"==e.type&&(this.dropdown.ltProp("selected",""),this.setData("dropdownData",this.getData("originalData")),this.dropdown.ltProp("selected",this.data.ltPropDefaultTime),this.dropdown.toggle())}},calendarKeydown:function(e,t){if(t.value&&!this.data.ltPropReadonly){var o=e.keyCode,a=this.dateValidation(t.value);if(0!=a){var r=this.getData("selectedDateField");if(-1!=[37,38,39,40,9].indexOf(o)){t.selectionEnd==t.selectionStart&&(this.findCalendarRange(e,t),r=this.data.selectedDateField);var i=t.selectionStart,s=t.selectionEnd;if(-1!=[38,40].indexOf(o)){switch(e.preventDefault(),r){case"year":40==o?a.setFullYear(a.getFullYear()-1):a.setFullYear(a.getFullYear()+1);break;case"month":40==o?a.setMonth(a.getMonth()-1):a.setMonth(a.getMonth()+1);break;default:40==o?a.setDate(a.getDate()-1):a.setDate(a.getDate()+1)}this._assCalendar.component.checkDate(a)&&this.setData("ltPropCurrentDate",this.getDateFromFormat(a,this.getData("ltPropFormat"))),$L.fastdom.measure(this.findCalendarRange.bind(this,{},t,!0))}else{if(t.selectionEnd==t.value.length&&(39==o||!e.shiftKey&&9==o)||0==t.selectionStart&&(37==o||e.shiftKey&&9==o))return;for(var l,n=this.getData("dateRange"),p=this.data.dateOrder,c=0;c<p.length;c++)if(p[c].name==r){l=c;break}if(39==o||!e.shiftKey&&9==o)if(c+1==p.length)i=s=n[r][1]+1;else{var d=this.setRangeByMoment(t,n,p[l+1].name);i=s=Math.abs(.5*(d[0]+d[1]))}else if(37==o||e.shiftKey&&9==o)if(0==c)i=s=n[r][0]+1;else{d=this.setRangeByMoment(t,n,p[l-1].name);i=s=Math.abs(.5*(d[0]+d[1]))}if($L.fastdom.measure(this.findCalendarRange.bind(this,{},t)),this.data.ltPropPreventSelection)return;e.preventDefault()}t.selectionStart=i,t.selectionEnd=s}}}},focusCallback:function(e){this.getMethods("onFocus")&&this.executeMethod("onFocus",e,this.$node)},focusout:function(){if(this.preventFocus)delete this.preventFocus;else{var e=this.$node.calendarDiv;if(!e||e.classList.contains("lyteCalendarHidden"))return;setTimeout(this._hideCalendar.bind(this,this.$node))}},maxLen:function(e){var t=this.data.ltPropMaxlength;return null!=t?e.toString().match(new RegExp(".{0,"+t+"}"))[0]:e},actions:{preventDrag:function(e){e.preventDefault()},clsIcon:function(e){this.$node.ltProp("value",""),this.$node.focus(),this.data.isSearch&&this.throwEvent("on-ip-clear",e),this.getMethods("onClear")&&this.executeMethod("onClear",e,this.$node)},calmsdown:function(e,t){this._calmsfg=!0},numberKeydown:function(e,t){var o=/firefox/gi.test(navigator.userAgent);if(!_lyteUiUtils.isAndroid||o){var a=e.which||e.keyCode,r=t.value,i=/rv:11/gi.test(navigator.userAgent);if(/^(8|9|27|37|39|13|187|189)$/.test(a)||o&&/^173$/i.test(a)||a>=48&&a<=57||a>=96&&a<=105||e.metaKey||e.ctrlKey||/^(38|40)$/.test(a)&&!i)return;if(/^(69|190)$/.test(a)&&(!/\./i.test(r)&&190==a||69==a&&!/e/i.test(r)&&""!=r))return;if(e.preventDefault(),38==a?r=Number(r||0)+Number(t.step):40==a&&(r=Number(r||0)-Number(t.step)),i&&/^(38|40)$/.test(a)){var s=parseInt(this.maxLen(r));isNaN(s)||(s=Math.min(Math.max(s,t.min?t.min:-1/0),t.max?t.max:1/0),isNaN(s)||(t.value=s))}}},numberPaste:function(e,t){var o=e.clipboardData||window.clipboardData,a=t.value+o.getData("text").replace(/\'|\"/g,"");/^([0-9]+|\.(?!e){1,}|\+|\-)([0-9\.\e]{0,}$)/i.test(a)||(a.length!=this.maxLen(a)||/rv:11/gi.test(navigator.userAgent))&&e.preventDefault()},focusClass:function(e){this.$node.classList.add("lyteInputFocus"),this.focusCallback.call(this,e)},blurThrow:function(e,t){delete this._lasttyped;var o=/date/i.test(this.data.ltPropType),a=this.getMethods("onBlur");if(this.$node.classList.remove("lyteInputFocus"),!t){var r=this.getData("ltPropType");if(this._calmsfg)this.valUpdate(),setTimeout(function(){o&&this.focusout.call(this),a&&this.executeMethod("onBlur",e,this.$node)}.bind(this),0),delete this._calmsfg;else{if("number"==r){var i=this.data.ltPropMax,s=this.data.ltPropMin,l=parseFloat(e.target.value),n=!1;isNaN(l)||(-1==[void 0,null,""].indexOf(s)&&s.constructor==Number&&(n=(l=Math.max(s,l))==s),-1==[void 0,null,""].indexOf(i)&&i.constructor==Number&&(l=Math.min(i,l),n=n||l==i),n&&(e.target.value=l))}this.valUpdate.call(this),o&&this.focusout.call(this),a&&this.executeMethod("onBlur",e,this.$node)}}},input:function(e,t){if("number"==this.data.ltPropType){var o,a=t.value,r=this.maxLen(a);o=Math.min(r,null!=t.max&&""!=t.max?t.max:1/0),a===r&&r==o||(r==o?t.value=r:isNaN(o)?t.value=parseFloat(r):t.value=o)}if(this.getData("ltPropAutoUpdate")){clearTimeout(this._iptime);var i=this.data.ltPropUpdateDelay;null!=i?this._iptime=setTimeout(this.valUpdate.bind(this),i):this.valUpdate.call(this)}},showcalendar:function(e,t){this.$node.classList.add("lyteInputFocus"),this.focusCallback.call(this,e),this.showCalendar(e,t)},calendarClick:function(e,t){this._focus&&_lyteUiUtils.isMobile||this.data.ltPropReadonly?delete this._focus:(this._focus||!/date/i.test(this.data.ltPropType)||this._prevclick||$L(this.$node.calendarDiv).hasClass("lyteCalendarHidden")&&this.showCalendar(e,t),this.findCalendarRange(e,t))},calendarKeydown:function(){this.calendarKeydown.apply(this,arguments)},timeBlur:function(e,t){if(this._emptytimeValue&&t.value)this.checkTimeStr(t,!0);else if(this.data.ltPropValidateOnBlur&&!this._emptytimeValue){var o=this._getCrctHour(t.value,this.data.ltPropTimeFormat,this.data.meridian);this.setData("ltPropDefaultTime",o||this._findNearest(t.value,this.data.ltPropTimeFormat))}this.$node.classList.remove("lyteInputFocus"),this.setData("selectedField",{}),this.getMethods("onBlur")&&(this._calmsfg?this.executeMethod("onBlur",e,this.$node):setTimeout(function(){this.executeMethod("onBlur",e,this.$node)}.bind(this),0))},timeInput:function(e){if(this._emptytimeValue)this.checkTimeStr(e);else{var t,o=e.value||"",a=this.data.ltPropTimeFormat,r=this.data.meridian;12==a?(t="hh:mm A",o=o.replace(r.AM,"AM").replace(r.PM,"PM")):t="HH:mm",o&&$L.moment&&!$L.moment(o,t).validate()&&(e.value=this.data.ltPropDefaultTime)}},timeFocus:function(e,t){this.$node.classList.add("lyteInputFocus");t.value.trim();this.setData("selectedField",{prop:"hour",val:0}),t.selectionStart=0,this.fixSelection.call(this,0,{prop:"hour",val:0},t),this.focusCallback.call(this,e)},timeKeydown:function(e,t){if(!this.data.ltPropReadonly&&!this._emptytimeValue){var o=this.getData("selectedField"),a=this.getData("meridian"),r=this.getData("ltPropTimeFormat"),i=!0,s=this.getData("originalData"),l=this.getData("dropdownData"),n=_lyteUiUtils.getCorrectNumberCode(e.which||e.keyCode),p=this.data.ltPropPreventDropdownNavigation,c=this.dropbox&&!$L(this.dropbox).hasClass("lyteDropdownHidden");if(p||!c||!/38|40|13/.test(n))if(p&&c&&/38|40/.test(n)&&e.stopPropagation(),!o.prop||e.ctrlKey||e.metaKey)/^8|46$/i.test(n)&&e.preventDefault();else{var d,u=t.selectionStart,h=t.selectionEnd;if(u==h?(this.timeClick({},t,u),u=t.selectionStart,h=t.selectionEnd,o=this.getData("selectedField")):0==u&&h==t.value.length&&(u=0,h=2,this.timeClick({},t,u),o=this.getData("selectedField")),9!=n&&e.preventDefault(),-1!=[9,37,39].indexOf(n))!e.shiftKey&&37!=n||"hour"==o.prop||39==n?(e.shiftKey&&39!=n||"minute"==o.prop||24!=r)&&(e.shiftKey||"meridian"==o.prop||12!=r)||37==n||(this.fixSelection.call(this,3,o,t),e.preventDefault(),d=!0):(this.fixSelection.call(this,-3,o,t),e.preventDefault(),d=!0),i=!1;else if(n>=48&&n<=57&&"meridian"!=o.prop)"hour"==o.prop?this.hourTimeSet.call(this,t,e,"hour",u,h):"minute"==o.prop&&this.hourTimeSet.call(this,t,e,"minute",u,h),this.data.ltPropDropdown&&this.constructNewDrop(t,r);else if(38!=n&&40!=n||"meridian"==o.prop){if("meridian"==o.prop){var m,y=t.value.trim().slice(6,t.value.length),f=String.fromCharCode(n).toUpperCase();if(0==a.PM.toUpperCase().indexOf(f)?y=a.PM:0==a.AM.toUpperCase().indexOf(f)?y=a.AM:-1!=[38,40].indexOf(n)&&(y=y==a.PM?a.AM:a.PM),y!=a.AM&&"00"==t.value.trim().slice(0,2)&&(m=this.replaceVal.call(this,t,"12",0,2)),y&&(m=this.replaceVal.call(this,m||t,y,u,h)),!this.data.ltPropValidateOnBlur)if(0==this.maxValCheck(m))return!1;this.setData("ltPropDefaultTime",m),i=!1}}else 38==n?this.timeIncrease.call(this,t,e,o.prop,u,h):this.timeDecrease.call(this,t,e,o.prop,u,h),i=!1,d=!0;!d&&this.fixSelection.call(this,0,this.getData("selectedField"),t),i&&$L.fastdom.mutate((function(){t.selectionStart=u,t.selectionEnd=h})),s.length!=l.length&&(n<48||n>57)&&(this.dropdown.ltProp("selected",""),this.setData("dropdownData",s),this.dropdown.ltProp("selected",this.data.ltPropDefaultTime))}}},timeClick:function(){this.timeClick.apply(this,arguments)}},attrObs:function(e){this.data.ltPropAria&&_lyteUiUtils.setAttribute(this.$node.querySelector("input,textarea"),this.data.ltPropAriaAttributes||{},e?e.oldValue:{})}.observes("ltPropAriaAttributes","ltPropAriaAttributes.{}").on("didConnect"),checkTimeStr:function(e,t){if(this._emptytimeValue){var o,a=e.value||"",r=this.data.ltPropTimeFormat,i=this.data.meridian;if(12==r?(o="hh:mm A",a=a.replace(i.AM,"AM").replace(i.PM,"PM")):o="HH:mm",a&&$L.moment(a,o).validate()){var s=this._getCrctHour(e.value,r,i);this.setData("ltPropDefaultTime",s||this._findNearest(e.value,r)),delete this._emptytimeValue}else a&&t&&(this.data.ltPropStartTime==this.data.ltPropDefaultTime&&this.setData("ltPropDefaultTime",""),this.setData("ltPropDefaultTime",this.data.ltPropStartTime),delete this._emptytimeValue)}}}),["click","scroll","resize","orientationchange"].forEach((function(e){window.addEventListener(e,_lyteInput,!0)})),Lyte.Component.register("lyte-number",{_template:'<template tag-name="lyte-number"> <template is="if" value="{{ltPropLabel}}"><template case="true"> <label for="{{ltPropId}}" class="lyteLabel">{{ltPropLabel}}</label> </template></template> <div class="lyteField"> <input type="text" name="{{ltPropName}}" class="{{ltPropClass}}" id="{{ltPropId}}" placeholder="{{ltPropPlaceholder}}" value="{{lbind(ltPropValue)}}" onkeydown="{{action(\'keydown\',event,this)}}" onpaste="{{action(\'paste\',event,this)}}" oninput="{{action(\'input\',event,this)}}" onfocus="{{action(\'focus\',event,this)}}" onblur="{{action(\'blur\',event,this)}}" onwheel="{{action(\'wheel\',event,this)}}" disabled="{{ltPropDisabled}}" readonly="{{ltPropReadonly}}" style="{{ltPropStyle}}" title="{{ltPropInputTitle}}" pattern="{{ltPropPattern}}" autocomplete="{{ltPropAutocomplete}}"> </div> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3,1],attr:{style:{name:"style",dynamicValue:"ltPropStyle"}}}],_observedAttributes:["ltPropValue","ltPropMaxlength","ltPropName","ltPropClass","ltPropId","ltPropPlaceholder","ltPropIgnoreSymbols","ltPropStep","ltPropInverse","ltPropWheel","ltPropMax","ltPropMin","ltPropAutofocus","ltPropDisabled","ltPropReadonly","ltPropStyle","ltPropInputTitle","ltPropPattern","ltPropUpdateDelay","ltPropLabel","ltPropAutocomplete","ltPropAppearance","ltPropDirection","ltPropValidateOnInput","ltPropAutoUpdate","ltPropDecimal","ltPropIncrement","ltPropAria","ltPropAriaAttributes","ltPropRemoveAtCursor","ltPropFireOnInit","ltPropValidateOnEmpty"],didConnect:function(){["focus","blur","click","select"].forEach(function(e){this.$node[e]=function(t){this.$node.querySelector("input")[e](t)}.bind(this)}.bind(this)),this.data.ltPropAutofocus&&this.$node.focus(),this.getMethods("afterRender")&&this.executeMethod("afterRender",this.$node)},init:function(){this.getMethods("beforeRender")&&this.executeMethod("beforeRender",this.$node)},didDestroy:function(){clearTimeout(this._time)},data:function(){return{ltPropValue:Lyte.attr("string",{default:""}),ltPropMaxlength:Lyte.attr("number",{default:void 0}),ltPropName:Lyte.attr("string",{default:void 0}),ltPropClass:Lyte.attr("string",{default:void 0}),ltPropId:Lyte.attr("string",{default:void 0}),ltPropPlaceholder:Lyte.attr("string",{default:""}),ltPropIgnoreSymbols:Lyte.attr("boolean",{default:!1}),ltPropStep:Lyte.attr("number",{default:1}),ltPropInverse:Lyte.attr("boolean",{default:!1}),ltPropWheel:Lyte.attr("boolean",{default:!0}),ltPropMax:Lyte.attr("number",{default:void 0}),ltPropMin:Lyte.attr("number",{default:void 0}),ltPropAutofocus:Lyte.attr("boolean",{default:!1}),ltPropDisabled:Lyte.attr("boolean",{default:!1}),ltPropReadonly:Lyte.attr("boolean",{default:!1}),ltPropStyle:Lyte.attr("string",{default:""}),ltPropInputTitle:Lyte.attr("string",{default:void 0}),ltPropPattern:Lyte.attr("string",{default:".+"}),ltPropUpdateDelay:Lyte.attr("number",{default:250}),ltPropLabel:Lyte.attr("string",{default:""}),ltPropAutocomplete:Lyte.attr("string",{default:"off"}),ltPropAppearance:Lyte.attr("string",{default:"box"}),ltPropDirection:Lyte.attr("string",{default:"vertical"}),ltPropValidateOnInput:Lyte.attr("boolean",{default:!1}),ltPropAutoUpdate:Lyte.attr("boolean",{default:!0}),ltPropDecimal:Lyte.attr("string",{default:"."}),ltPropIncrement:Lyte.attr("boolean",{default:!0}),ltPropAria:Lyte.attr("boolean",{default:!1}),ltPropAriaAttributes:Lyte.attr("object",{default:{}}),ltPropRemoveAtCursor:Lyte.attr("boolean",{default:!1}),ltPropFireOnInit:Lyte.attr("boolean",{default:!1}),ltPropValidateOnEmpty:Lyte.attr("boolean",{default:!0})}},valueObs:function(e){if(!this._init){var t=!e;if(e?e.newValue=e.newValue||"":e={newValue:this.data.ltPropValue||""},this._allowCallback)return delete this._allowCallback,void(this.getMethods("onValueChange")&&this.executeMethod("onValueChange",e,this.$node));var o=e.newValue;if(t&&!this.data.ltPropFireOnInit&&(this._init=!0),this.validate(o))return this._valueUpdate(""),void delete this._init;if(o=this.maxLenValidation(o),(this.data.ltPropValidateOnEmpty&&!e.newValue||e.newValue)&&(o=this.maxMinCheck(o,!0)),e.newValue!=o)this._valueUpdate(o);else if(!this._init){if(t&&e.newValue==o)return;this.getMethods("onValueChange")&&this.executeMethod("onValueChange",e,this.$node)}delete this._init}}.observes("ltPropValue").on("didConnect"),maxMinOns:function(){this._valueUpdate(this.maxMinCheck(this.data.ltPropValue,!0))}.observes("ltPropMax","ltPropMin"),appearanceObs:function(){/box/i.test(this.data.ltPropAppearance)?(this.$node.classList.add("lyteInputBox"),this.$node.classList.remove("lyteInput")):(this.$node.classList.remove("lyteInputBox"),this.$node.classList.add("lyteInput"))}.observes("ltPropAppearance").on("didConnect"),directionObs:function(){/vertical/i.test(this.data.ltPropDirection)?(this.$node.classList.add("vertical"),this.$node.classList.remove("horizontal")):(this.$node.classList.remove("vertical"),this.$node.classList.add("horizontal"))}.observes("ltPropDirection").on("didConnect"),disAbs:function(){this.$node.classList[this.data.ltPropDisabled?"add":"remove"]("lyteNumberDisabled")}.observes("ltPropDisabled").on("didConnect"),readAbs:function(){this.$node.classList[this.data.ltPropReadonly?"add":"remove"]("lyteNumberReadonly")}.observes("ltPropReadonly").on("didConnect"),increment:function(e,t){var o=e.value||"0",a=(Number(o)+this.data.ltPropStep*(t?1:-1)).toString();a!=1/0&&a!=-1/0&&(a=this.maxLenValidation(a),a=this.maxMinCheck(a,!0),e.value=a,e.selectionEnd=a.length,e.selectionStart=a.length,this.data.ltPropAutoUpdate&&this.valueUpdate(e))},actions:{keydown:function(e,t){var o,a=e.which||e.keyCode,r=t.selectionStart,i=t.selectionEnd,s=this.data.ltPropIncrement;if(8==a){if(r==i&&0==i)return;this._prevent=!0}else s&&38==a?(this.increment(t,!this.data.ltPropInverse),o=!0):s&&40==a&&(this.increment(t,this.data.ltPropInverse),o=!0);o&&e.preventDefault()},wheel:function(e,t){this.data.ltPropWheel&&this._focused&&!this.data.ltPropDisabled&&!this.data.ltPropReadonly&&(e.deltaY>10?this.increment(t,!this.data.ltPropInverse):e.deltaY<-10&&this.increment(t,this.data.ltPropInverse),e.preventDefault())},paste:function(e,t){e.preventDefault();var o=e.clipboardData||window.clipboardData,a=t.value,r=t.selectionStart,i=t.selectionEnd,s=this.data.ltPropDecimal,l=o.getData("text").trim().replace(/^(\'|\")|(\'|\")$/,"").replace(new RegExp("[^0-9e\\+\\-\\"+s+"]","g"),""),n=a.slice(0,r)+l+a.slice(i);if(this.validate(n)&&(n=this.convertToNo(n)),Number(a)!=1/0&&Number(a)!=-1/0){if(this.getMethods("onBeforePaste")){var p=this.executeMethod("onBeforePaste",t.value,o.getData("text"),n);if(null!=p&&(n=p,0==p))return}Number(a)!=1/0&&Number(a)!=-1/0&&(((n=this.maxLenValidation(n))||!n&&this.data.ltPropValidateOnEmpty)&&(n=this.maxMinCheck(n,!0)),t.value=n,t.selectionStart=i+l.length,t.selectionEnd=i+l.length,this.data.ltPropAutoUpdate&&this._valueUpdate(t.value))}},input:function(e,t){var o;this._prevent&&(delete this._prevent,this.data.ltPropAutoUpdate&&this.valueUpdate(t),o=!0);var a,r=t.value,i=r,s=t.selectionStart,l=t.selectionEnd,n=!o&&this.validate(r);if(n)if(/insertText/i.test(e.inputType)){var p=parseFloat(e.data);isNaN(p)?(r=r.slice(0,l-e.data.length)+r.slice(l),l=l-e.data.length+1):(p=p.toString(),r=r.slice(0,l-e.data.length)+p+r.slice(l),l=l-e.data.length+1+p.length)}else r=r.slice(0,s-1)+r.slice(l);else{var c=this.maxLenValidation(r,s,l);c!=r&&(this.data.ltPropRemoveAtCursor&&(a=!0),r=c),(c=this.maxMinCheck(r,this.data.ltPropValidateOnInput))!=r&&(r=c,a=!1)}t.value=r,n?(t.selectionStart=Math.min(l-1,r.length),t.selectionEnd=Math.min(l-1,r.length)):i!=r?t.selectionStart=t.selectionEnd=a?s-1:r.length:(t.selectionStart=Math.min(s,r.length),t.selectionEnd=Math.min(l,r.length)),this.data.ltPropAutoUpdate&&this.valueUpdate(t)},focus:function(e,t){this._focused=!0,this.$node.classList.add("lyteInputFocus"),this.getMethods("onFocus")&&this.executeMethod("onFocus",e,this.$node)},blur:function(e,t){delete this._focused,this.$node.classList.remove("lyteInputFocus"),this._valueUpdate(t.value,!0),(t.value||!t.value&&this.data.ltPropValidateOnEmpty)&&(t.value=this.maxMinCheck(t.value,!0)),this.getMethods("onBlur")&&this.executeMethod("onBlur",e,this.$node)}},valueUpdate:function(e){e=e||this.$node.getElementsByTagName("input")[0],null==this.data.ltPropUpdateDelay?this._valueUpdate(e.value):(clearTimeout(this._time),this._time=setTimeout(this._valueUpdate.bind(this,e.value),this.data.ltPropUpdateDelay))},_valueUpdate:function(e,t){if(t){var o=new RegExp("\\"+this.data.ltPropDecimal+"$");/e$/i.test(e)&&(e=e.replace(/e$/,"")),o.test(e)&&(e=e.replace(o,""))}e!=this.data.ltPropValue&&(this._allowCallback=!0,this.$node.ltProp("value",e))},validate:function(e){var t,o,a=/e/gi,r=/(\+|\-)/g,i=this.data.ltPropDecimal,s=new RegExp("\\"+i,"g");return a.test(e)&&(e.match(a).length>1&&(o=!0),/^e/i.test(e)?o=!0:(t=/e/gi.exec(e).index,e=e.replace(a,""))),r.test(e)&&(e.match(r).length>1?o=!0:/^(\+|\-)/g.test(e)?e=e.replace(r,""):o=!0),s.test(e)&&(e.match(s).length>1||null!=t&&t<e.indexOf(i)||/^(\+|\-)/g.test(e)&&1==e.indexOf(i)&&2==t||!/^(\+|\-)/g.test(e)&&0==e.indexOf(i)&&1==t?o=!0:e=e.replace(s,"")),!o&&e.length&&(o=!/^\d+$/.test(e)),o},maxLenValidation:function(e,t,o){var a,r=this.data.ltPropMaxlength,i=e.length,s=this.data.ltPropDecimal,l=this.data.ltPropRemoveAtCursor;if(null==r)return e;if(!this.data.ltPropIgnoreSymbols&&(r+=/^(\+|\-)/.test(e)?1:0,new RegExp("\\"+s).test(e)&&(a=new RegExp("\\"+s,"g").exec(e).index,r++),/e/i.test(e))){var n=/e/i.exec(e).index,p=e.slice(n+1),c=parseInt(p);if(p.length){i--;var d=null!=a?e.slice(a+1,n).length:0;if(d<=c&&(null!=a&&(i--,r--),i-=d),i-=p.length,(i+=c)>r){if(c>i-r)return e.slice(0,n)+"e"+(c-(i-r));e=l&&null!=t&&e.length>r?(e=e.split(/e/i)[0]).slice(0,t-1)+e.slice(o):e.split(/e/i)[0].match(new RegExp(".{0,"+r+"}"))[0]}return e}r++}return l&&null!=t&&e.length>r?e.slice(0,t-1)+e.slice(o):e.match(new RegExp(".{0,"+r+"}"))[0]},maxMinCheck:function(e,t){var o=e,a=this.data.ltPropMax,r=this.data.ltPropMin,i=Number(e.replace(new RegExp("\\"+this.data.ltPropDecimal),".")),s=this.getMethods("onBeforeMaxMinValidation");if(null==a&&null==r)return e;null!=a&&(a<i&&(e=a,e=null==(l=s?this.executeMethod("onBeforeMaxMinValidation","max",o,e,this.$node):e)?e:l));if(t&&null!=r)if(r>i)e=r,e=r,e=null==(l=s?this.executeMethod("onBeforeMaxMinValidation","min",o,e,this.$node):e)?e:l;else if(0==i&&""==e){var l;e=Math.max(i,r),e=null==(l=s?this.executeMethod("onBeforeMaxMinValidation","min",o,e,this.$node):e)?e:l}return e.toString().replace(/\./,this.data.ltPropDecimal)},removeTwice:function(e,t){var o=e.split(t);o.length>1&&(e=o.shift()+t.exec(e)[0]+o.join(""));return e},convertToNo:function(e){var t,o,a=this.data.ltPropDecimal,r=new RegExp("\\"+a),i=/e/i;return e=this.removeTwice(e,r),e=this.removeTwice(e,i),e=this.removeTwice(e,/\+|\-/i),r.test(e)&&i.test(e)&&((t=r.exec(e).index)>(o=i.exec(e).index)||1==Math.abs(t-o))&&(e=e.replace(t>o?i:r,"")),/^e/i.test(e)&&(e=e.replace(/e/i,"")),/\+|\-/.test(e)&&!/^(\+|\-)/.test(e)&&(null!=o&&/\+|\-/.exec(e).index!=o+1||null==o)&&(e=e.replace(/\+|\-/g,"")),e},attrObs:function(e){this.data.ltPropAria&&_lyteUiUtils.setAttribute(this.$node.querySelector("input"),this.data.ltPropAriaAttributes||{},e?e.oldValue:{})}.observes("ltPropAriaAttributes","ltPropAriaAttributes.{}","ltPropType").on("didConnect")}),Lyte.Component.register("lyte-search",{_template:'<template tag-name="lyte-search"> <lyte-input lt-prop-auto-update="{{ltPropAutoUpdate}}" lt-prop-tab-index="{{ltPropTabIndex}}" lt-prop-id="{{ltPropId}}" lt-prop-wrapper-style="{{ltPropWrapperStyle}}" lt-prop-class="{{ltPropClass}}" lt-prop-autofocus="{{ltPropAutofocus}}" lt-prop-autocomplete="{{ltPropAutocomplete}}" lt-prop-type="{{ltPropType}}" lt-prop-name="{{ltPropName}}" lt-prop-placeholder="{{ltPropPlaceholder}}" lt-prop-width="{{ltPropWidth}}" lt-prop-height="{{ltPropHeight}}" onkeyup="{{action(\'keyup\',event,this)}}" lt-prop-style="{{ltPropStyle}}" lt-prop-value="{{lbind(ltPropValue)}}" onkeypress="{{action(\'keypress\',event,this)}}" lt-prop-appearance="{{ltPropAppearance}}" lt-prop-direction="{{ltPropDirection}}" lt-prop-disabled="{{ltPropDisabled}}" lt-prop-readonly="{{ltPropReadonly}}" on-value-change="{{method(\'valuechange\')}}" on-focus="{{method(\'focus\')}}" on-blur="{{method(\'blurEvent\')}}" lt-prop-input-title="{{ltPropInputTitle}}" lt-prop-pattern="{{ltPropPattern}}" lt-prop-maxlength="{{ltPropMaxlength}}" oninput="{{action(\'input\',event)}}" lt-prop-close-icon="{{ltPropCloseIcon}}" is-search="true" lt-prop-update-delay="{{ltPropUpdateDelay}}" lt-prop-aria="{{ltPropAria}}" lt-prop-aria-attributes="{{ltPropAriaAttributes}}" lt-prop-focus="{{lbind(ltPropFocus)}}"></lyte-input> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}],_observedAttributes:["ltPropAutocomplete","ltPropPlaceholder","ltPropAutofocus","ltPropDisabled","ltPropStyle","ltPropMaxlength","ltPropReadonly","ltPropId","ltPropClass","ltPropType","ltPropName","ltPropWidth","ltPropHeight","ltPropValue","ltPropAppearance","ltPropDirection","ltPropQuerySelector","ltPropMinLength","ltPropMethod","ltPropWrapperStyle","ltPropTabIndex","ltPropAjaxRequest","ltPropAutoUpdate","ltPropPattern","ltPropInputTitle","ltPropCloseIcon","ltPropUpdateDelay","ltPropSearchDelay","ltPropCaseSensitive","ltPropComponent","ltPropTrim","ltPropFocus","ltPropDiacritic","ltPropMaintainState","ltPropPreventEmptyKeys","ltPropMultipleSearch","ltPropIgnoreChildren","ltPropAria","ltPropAriaAttributes","timeout","ltPropCheckFromParent"],init:function(){this.getMethods("beforeRender")&&this.executeMethod("beforeRender",this.$node)},didConnect:function(){this.$node.setValue=function(e,t){this.$node.ltProp("value",e),this.pressFunc(e||"",t||{}),clearTimeout(this.data.timeout),clearTimeout(this._iptime),delete this._minlengthfail}.bind(this),this.getMethods("afterRender")&&this.executeMethod("afterRender",this.$node),["focus","blur","click","select"].forEach(function(e){this.$node[e]=function(t){this.$node.querySelector("lyte-input")[e](t)}.bind(this)}.bind(this)),$L.fastdom.measure(function(){_lyteUiUtils.getRTL()&&$L.fastdom.mutate(function(){this.$node.classList.add("lyteRTL")}.bind(this))}.bind(this));var e=this.data.ltPropComponent,t=this.data.ltPropQuerySelector;"accordion"==e?t.related="lyte-accordion-item":"tree"==e&&(t.related=".lyteTreeBodyDiv lyte-yield:not(.noChildClass) lyte-tree-icon")},didDestroy:function(){clearTimeout(this.data.timeout),clearTimeout(this._iptime),delete this.$node.setValue,delete this.$node.focus,delete this.$node.blur,delete this.$node.click,delete this.$node.select},data:function(){return{ltPropAutocomplete:Lyte.attr("string",{default:"off"}),ltPropPlaceholder:Lyte.attr("string",{default:""}),ltPropAutofocus:Lyte.attr("boolean",{default:!1}),ltPropDisabled:Lyte.attr("boolean",{default:!1}),ltPropStyle:Lyte.attr("string",{default:""}),ltPropMaxlength:Lyte.attr("number",{default:25}),ltPropReadonly:Lyte.attr("boolean",{default:!1}),ltPropId:Lyte.attr("string",{default:"inputId"}),ltPropClass:Lyte.attr("string",{default:""}),ltPropType:Lyte.attr("string",{default:"search"}),ltPropName:Lyte.attr("string",{default:""}),ltPropWidth:Lyte.attr("string",{default:"100%"}),ltPropHeight:Lyte.attr("string",{default:""}),ltPropValue:Lyte.attr("string",{default:""}),ltPropAppearance:Lyte.attr("string",{default:"flat"}),ltPropDirection:Lyte.attr("string",{default:"vertical"}),ltPropQuerySelector:Lyte.attr("object",{default:{}}),ltPropMinLength:Lyte.attr("number",{default:1}),ltPropMethod:Lyte.attr("string",{default:"contains"}),ltPropWrapperStyle:Lyte.attr("string",{default:""}),ltPropTabIndex:Lyte.attr("string",{default:"0"}),ltPropAjaxRequest:Lyte.attr("object",{default:{}}),ltPropAutoUpdate:Lyte.attr("boolean",{default:!0}),ltPropPattern:Lyte.attr("string",{default:".+"}),ltPropInputTitle:Lyte.attr("string",{default:""}),ltPropCloseIcon:Lyte.attr("boolean",{default:!1}),ltPropUpdateDelay:Lyte.attr("number",{default:250}),ltPropSearchDelay:Lyte.attr("number",{default:100}),ltPropCaseSensitive:Lyte.attr("boolean",{default:!1}),ltPropComponent:Lyte.attr("string",{default:void 0}),ltPropTrim:Lyte.attr("boolean",{default:!1}),ltPropFocus:Lyte.attr("boolean",{default:!1}),ltPropDiacritic:Lyte.attr("boolean",{default:!1}),ltPropMaintainState:Lyte.attr("boolean",{default:!0}),ltPropPreventEmptyKeys:Lyte.attr("boolean",{default:!1}),ltPropMultipleSearch:Lyte.attr("boolean",{default:!1}),ltPropIgnoreChildren:Lyte.attr("boolean",{default:!1}),ltPropAria:Lyte.attr("boolean",{default:!1}),ltPropAriaAttributes:Lyte.attr("object",{default:{}}),timeout:Lyte.attr("number",{default:void 0}),ltPropCheckFromParent:Lyte.attr("boolean",{default:!1})}},methods:{blurEvent:function(e){this.getMethods("onBlur")&&this.executeMethod("onBlur",e,this.$node)},focus:function(e){this.getMethods("onFocus")&&this.executeMethod("onFocus",e,this.$node)},valuechange:function(e){this.getMethods("onValueChange")&&this.executeMethod("onValueChange",e,this.$node)}},searchList:function(e){var t=[],o=[],a=this.getData("ltPropQuerySelector");"string"==typeof a&&(a=JSON.parse(a));for(var r=0;r<e.childElementCount;r++){for(var i=e.children[r];i.childElementCount;){var s=this.searchList.call(this,i);t=t.concat(s[0]),o=o.concat(s[1]);break}if(!i.childElementCount){var l=i.textContent;if(this.data.ltPropDiacritic&&(l=_lyteUiUtils.convert_diacritics(l)),t.push(l),a.target)for(var n=this.getScope("string"==typeof a.scope?document.body.querySelector(a.scope.trim()):a.scope),p=n.querySelectorAll(a.target),c=i;c!=n;){for(var d=!1,u=0;u<p.length;u++)if(c==p[u]){o.push(c),d=!0;break}if(d)break;c=c.parentElement}else o.push(i)}}return[t,o]},actions:{"on-ip-clear":function(e){this.$node.setValue("",{type:"clear"}),this.getMethods("onClear")&&this.executeMethod("onClear",this.$node)},keypress:function(e){var t=e.keyCode;t>=37&&t<=40||13==t||e.stopPropagation()},keyup:function(e,t){var o=e.which||e.keyCode,a=this.data.ltPropPreventEmptyKeys;if(!([37,13,38,39,40,27].indexOf(o)>-1)){if(clearTimeout(this._iptime),a){if(null==this._iptime)return;delete this._iptime}clearTimeout(this.data.timeout);var r=e.target.value,i=this.data.ltPropMinLength,s=r.length>=i;if(s)delete this._minlengthfail;else{if(a&&this._minlengthfail)return;this._minlengthfail=!0,/^8|91|17|46$/i.test(o)&&(s=!0)}if(s){var l=this.data.ltPropSearchDelay;null!=l?this.timeout=setTimeout(this.pressFunc.bind(this),l,r,e):this.pressFunc.call(this,r,e)}}},input:function(e){var t=this.data.ltPropSearchDelay,o=this.data.ltPropMinLength,a=e.target.value;clearTimeout(this._iptime),a.length>=o&&(null==t?this.pressFunc(a,event):this._iptime=setTimeout(function(){delete this._iptime,this.pressFunc(a,e)}.bind(this),250))}},fNcase:function(e){return this.data.ltPropCaseSensitive||(e=e.toLowerCase()),this.data.ltPropTrim&&(e=e.trim()),e},multi_search:function(e,t){var o=this.data,a=o.ltPropQuerySelector,r=$L(a.scope),i=Array.from(r.find(a.search)),s=o.ltPropDiacritic,l=[],n=[],p=this;i.forEach((function(t){var i=$L(t).closest(a.target,r).get(0),c=p.fNcase(t.textContent);s&&(c=_lyteUiUtils.convert_diacritics(c)),!e||p.switchfn(o.ltPropMethod,e,c)?l.push(i):n.push(i)})),this.getMethods("onSearch")&&0==this.executeMethod("onSearch",l,this.$node,t,e,n)||this.common_hide(l,n,t)},common_hide:function(e,t,o){function a(e,t){e.forEach((function(e){$L(e)[t]("lyteSearchHidden")}))}a(t,"addClass"),a(e,"removeClass"),"ignore"!=o&&this.getMethods("onAfterSearch")&&this.executeMethod("onAfterSearch",e,o,this.$node)},check_label:function(e,t,o,a,r,i,s,l){var n=[],p=[],c="onSearch";Array.from(o).forEach((function(o){var s=o.querySelector(a);if(s)if(e.indexOf(s)+1){for(var l=t.length,c=0;c<l;c++){var d=t[c];o.contains(d)&&(e.push(d),r.push(i[c]),i.splice(c,1),t.splice(c--,1),l--)}n.push(o)}else{for(l=e.length,c=0;c<l;c++){d=e[c];if(o.contains(d)){e.push(s);var u=t.indexOf(s);t.splice(u,1),r.push(i[u]),i.splice(u,1);break}}c==l?p.push(o):n.push(o)}})),this.getMethods(c)&&0==this.executeMethod(c,e,this.$node,s,l,t)||(this.common_hide(n,p,"ignore"),this.common_hide(e,t,s))},filteringArray:function(e,t,o,a,r,i,s){var l=this.getData("ltPropMethod"),n=[],p=[],c=[],d=[];if((o=this.fNcase(o)).length)for(var u=e.length,h=0;h<u;h++){var m=a[h],y=t[h];this.switchfn(l,o,this.fNcase(e[h].trim()))?(n.push(m),c.push(y)):(p.push(m),d.push(y))}else n=Array.apply(Array,a),c=Array.from(t);if(s)return this.check_label(n,p,i,s,c,d,r,o);this.getMethods("onSearch")&&0==this.executeMethod("onSearch",n,this.$node,r&&"clear"==r.type?{}:r,o,p)||(null==this.data.ltPropSearchDelay?this.hideProcess(e,t,l,o,i,r,p,n):$L.fastdom.mutate(this.hideProcess.bind(this,e,t,l,o,i,r,p,n)))},switchfn:function(e,t,o){var a;switch(e){case"contains":a=o.indexOf(t)>=0;break;case"startsWith":a=0==o.indexOf(t);break;case"endsWith":var r=o.lastIndexOf(t);-1!=r&&(a=r+t.length==o.length)}return a},hideProcess:function(e,t,o,a,r,i,s,l){for(var n=this.data.ltPropQuerySelector,p=(a=this.fNcase(a),0);p<e.length;p++)this.additionalHand(t[p],this.switchfn(o,a,this.fNcase(e[p].trim())));for(p=0;p<r.length;p++){if("accordion"==this.data.ltPropComponent&&null==r[p]._state){if(!r[p].querySelector("lyte-accordion-body")){a?r[p].classList.add("lyteSearchHidden"):r[p].classList.remove("lyteSearchHidden");continue}r[p]._state=r[p].classList.contains("lyteAccordionActive")}else if("tree"==this.data.ltPropComponent){null==r[p]._state&&(r[p]._state=r[p].classList.contains("lyteIconOpened"));continue}r[p].querySelectorAll(n.target||n.search).length==r[p].querySelectorAll(".lyteSearchHidden").length?r[p].classList.add("lyteSearchHidden"):r[p].classList.remove("lyteSearchHidden")}var c=this.data.ltPropComponent;if(c){var d={accordion:"accfilter",tree:"treefilter",duallistbox:"listboxfilter"};d[c]&&$L.fastdom.measure(this[d[c]].bind(this,l,s,a,i&&"clear"==i.type))}this.getMethods("onAfterSearch")&&this.executeMethod("onAfterSearch",l,i,this.$node)},listboxfilter:function(e,t,o,a){for(var r=this.data.ltPropQuerySelector,i=$L(this.getScope(r.scope)),s=e.length,l=[],n=0;n<s;n++){var p=$L(e[n]).closest(".lyteListBoxLeftWrap").parent().closest(".lyteListBoxLeftWrap",i);if(p.length){if(p.hasClass("lyteSearchHidden")){var c=p.find(r.search).get(0),d=t.indexOf(c);-1!=d&&(e.push(c),t.splice(d,1),s++,p.removeClass("lyteSearchHidden"))}-1==l.indexOf(p.get(0))&&l.push(p.get(0))}}l.forEach((function(e){var t=$L(e);t.children(".lyteListboxParentElementClose").length&&t.find("lyte-lb-collapse").get(0).click()}))},accfilter:function(e,t,o,a){for(var r=$L(this.getScope(this.data.ltPropQuerySelector.scope)),i=0;i<e.length;i++){for(var s=$L(e[i]).closest("lyte-accordion-item",r),l=0;l<t.length;l++){var n=$L(t[l]).closest("lyte-accordion-item",r);s[0]!=n[0]||(Lyte.arrayUtils(t,"removeAt",l),l--)}if(e[i+1]){n=$L(e[i+1]).closest("lyte-accordion-item",r);s[0]==n[0]&&(Lyte.arrayUtils(e,"removeAt",i+1),i--)}}$L.fastdom.mutate(function(){for(var r=0;r<e.length;r++){var i=!1;i=!(l=$L(e[r]).closest("lyte-accordion-item")).hasClass("lyteAccordionActive"),!o&&this.data.ltPropMaintainState&&(i=null!=l[0]._scope?!i&&!l[0]._scope:!i),i&&l.click()}for(var s=0;s<t.length;s++){var l=$L(t[s]).closest("lyte-accordion-item");a?!l[0]._state&&l.hasClass("lyteAccordionActive")&&l.click():l.hasClass("lyteAccordionActive")&&l.click()}}.bind(this))},treeinremove:function(e){for(var t=0;t<e.length;t++)if(e[t+1]){var o=this.closest(e[t],".lyteTreeBodyDiv")[0],a=this.closest(e[t+1],".lyteTreeBodyDiv")[0];o.contains(a)?Lyte.arrayUtils(e,"removeAt",t+1):a.contains(o)&&(Lyte.arrayUtils(e,"removeAt",t),t--)}},closest:function(e,t){return e.closest?$L(e.closest(t)):$L(e).closest(t)},treefilter:function(e,t,o,a){for(var r=this.data,i=$L(this.getScope(r.ltPropQuerySelector.scope)).get(0),s=e.length,l=t.length,n=".lyteTreeBodyDiv",p="lyteSearchHidden",c=0;c<s;c++)for(var d=(y=this.closest(e[c],n)).get(0),u=0;u<l;u++){var h=this.closest(t[u],n),m=h.get(0);(d.contains(m)||m.contains(d))&&(r.ltPropIgnoreChildren?h.removeClass(p):h.addClass(p),t.splice(u,1),u--,l--)}for(c=0;c<s;c++){var y=e[c];this.removeClse(y,i),o&&i.ltProp("stateAttr",this.closest(y,"lyte-tree-body").attr("data-value")),delete y.__search_ignore}o?t.forEach(function(e){this.closest(e,n).addClass(p)}.bind(this)):this.hiderecurse($L("lyte-yield:not(.noChildClass) lyte-tree-icon",i),a),this.last_tree_element(e,t,i)},last_tree_element:function(e,t,o){var a="lyteTreeBodyDiv",r="lyteSearchHidden",i=function(e){var t=$L(e).closest("."+a,o),s="addClass";t.length&&((t.hasClass(r)||t.next("."+a+":not(."+r+")").length)&&(s="removeClass"),t[s]("lyteTreeBodyDivLastVisibleElem"),i(t.parent()))};e.concat(t).forEach(i)},removeClse:function(e,t){var o=$L(e).closest(".lyteSearchHidden",t);o.length&&(o.removeClass("lyteSearchHidden"),this.removeClse(e,t))},hiderecurse:function(e,t){for(var o=e.length-1;o>=0;o--){var a=e.eq(o),r=a.hasClass("lyteIconOpened");t&&null!=a[0]._state?(a[0]._state&&!r||!a[0]._state&&r)&&setTimeout(a.click.bind(a),20):r&&setTimeout(a.click.bind(a),20),delete a[0]._state}},additionalHand:function(e,t){var o=this.data.ltPropComponent;if(t){if("dropdown"==o){var a=$L(e).closest("lyte-drop-box")[0];a&&a.classList.contains("lyteDropdownHidden")&&(a.origindd?a.origindd.toggle():$L(a).closest("lyte-dropdown").get(0).toggle())}e.classList.remove("lyteSearchHidden")}else if("tree"!=o){if(e.classList.contains("lyteSearchHidden"))return;e.classList.add("lyteSearchHidden")}},pressFunc:function(e,t){if(!this.getMethods("onBeforeSearch")||0!=this.executeMethod("onBeforeSearch",t,this))if(this.data.ltPropMultipleSearch)this.multi_search(e,t);else{var o,a=[],r=[],i=[],s=this.data.ltPropQuerySelector,l=this.data.ltPropDiacritic,n="string"==typeof s.scope?document.body.querySelector(s.scope.trim()):s.scope;if(n=this.getScope(n),s.search&&(r=n.querySelectorAll(s.search.trim())),i=s.target?n.querySelectorAll(s.target.trim()):r,s.search)for(var p=0;p<r.length;p++){var c=r[p].textContent;l&&(c=_lyteUiUtils.convert_diacritics(c)),a[p]=c}else{var d=this.searchList.call(this,n);a=d[0],r=(i=d[1]).slice()}l&&(e=_lyteUiUtils.convert_diacritics(e)),o=s.related&&(s.search||s.target)?o=n.querySelectorAll(s.related):[],this.filteringArray.call(this,a,i,e,r,t,o,s.label),this._prevVal=e}},getScope:function(e){return e=this.getMethods("dynamicScope")?this.executeMethod("dynamicScope",this.$node):e,this.data.ltPropCheckFromParent&&(e=this.$node.parentNode),e}}),Lyte.Component.register("lyte-popover",{_template:'<template tag-name="lyte-popover"> <template is="if" value="{{ltPropBindToBody}}"><template case="true"> <lyte-wormhole case="true" style="{{if(ltPropShowCopy,\'visibility:visible\',\'visibility:hidden\')}}" on-before-append="{{method(&quot;beforeWormholeAppend&quot;)}}"> <template is="registerYield" yield-name="lyte-content"> <div class="popoverWrapper {{ltPropWrapperClass}}"> <div class="{{if(ifEquals(ltPropAnimation,\'zoom\'),\'lytePopover lyteZoom\',\'lytePopover\')}}"> <template is="if" value="{{ifEquals(ltPropType,&quot;callout&quot;)}}"><template case="true"> <span id="lytePopoverArrow" class="lytePopoverArrowIcon"></span> </template></template> <template is="if" value="{{ltPropShowCloseButton}}"> <template case="true"><span class="lytePopoverClose" onclick="{{action(\'close\')}}" tabindex="0"></span></template> </template> <lyte-yield yield-name="popover"></lyte-yield> </div> <template is="if" value="{{ltPropFreeze}}"> <template case="true"><lyte-popover-freeze></lyte-popover-freeze></template> </template> </div> </template> </lyte-wormhole> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"if",args:["ltPropShowCopy","'visibility:visible'","'visibility:hidden'"]}}}},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[]}},default:{}},{type:"attr",position:[1,1,3]},{type:"if",position:[1,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}},{type:"insertYield",position:[1,1,5]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]}},default:{}}],_observedAttributes:["ltPropShow","ltPropType","ltPropFreeze","ltPropShowCloseButton","ltPropCloseOnEscape","ltPropOriginElem","ltPropPosition","ltPropPlacement","ltPropDimmer","ltPropDraggable","ltPropAllowMultiple","ltPropScrollable","ltPropMaxHeight","ltPropMaxWidth","ltPropWidth","ltPropHeight","ltPropWrapperClass","ltPropBoundary","ltPropCloseOnBodyClick","ltPropDuration","ltPropOffset","ltPropBindToBody","ltPropHeaderPadding","ltPropContentPadding","ltPropFooterPadding","ltPropAnimation","ltPropWindowSpacing","ltPropForceScroll","ltPropAutoAlign","ltPropAria","ltPropAriaAttributes","ltPropPreventFocus","ltPropStopClick","ltPropMargin","buttons","ltPropShowCopy","visible","timeOutId","classTobeAdded","keys","first","arrowHidden","arrowEle","returnedFalse","transformOrigin","windowSpacing","lyteUnbound","prevOffsetVal","calculateHW","checkAria","prevRect","margin"],data:function(){return{ltPropShow:Lyte.attr("boolean",{default:!1}),ltPropType:Lyte.attr("string",{default:"callout"}),ltPropFreeze:Lyte.attr("boolean",{default:!0}),ltPropShowCloseButton:Lyte.attr("boolean",{default:!0}),ltPropCloseOnEscape:Lyte.attr("boolean",{default:!0}),ltPropOriginElem:Lyte.attr("string",{default:""}),ltPropPosition:Lyte.attr("string",{default:"bottom"}),ltPropPlacement:Lyte.attr("string",{default:""}),ltPropDimmer:Lyte.attr("object",{default:{color:"black",opacity:"0.4"}}),ltPropDraggable:Lyte.attr("boolean",{default:!1}),ltPropAllowMultiple:Lyte.attr("boolean",{default:!1}),ltPropScrollable:Lyte.attr("boolean",{default:!1}),ltPropMaxHeight:Lyte.attr("string",{default:""}),ltPropMaxWidth:Lyte.attr("string",{default:""}),ltPropWidth:Lyte.attr("string",{default:""}),ltPropHeight:Lyte.attr("string",{default:"auto"}),ltPropWrapperClass:Lyte.attr("string",{default:""}),ltPropBoundary:Lyte.attr("object",{default:{}}),ltPropCloseOnBodyClick:Lyte.attr("boolean",{default:!0}),ltPropDuration:Lyte.attr("number",{default:400}),ltPropOffset:Lyte.attr("object",{default:{}}),ltPropBindToBody:Lyte.attr("boolean",{default:!1}),ltPropHeaderPadding:Lyte.attr("string",{default:"15px 30px"}),ltPropContentPadding:Lyte.attr("string",{default:"15px 30px"}),ltPropFooterPadding:Lyte.attr("string",{default:"15px 30px"}),ltPropAnimation:Lyte.attr("string",{default:"fade"}),ltPropWindowSpacing:Lyte.attr("object"),ltPropForceScroll:Lyte.attr("boolean",{default:!1}),ltPropAutoAlign:Lyte.attr("boolean",{default:!1}),ltPropAria:Lyte.attr("boolean",{default:!1}),ltPropAriaAttributes:Lyte.attr("object",{default:{}}),ltPropPreventFocus:Lyte.attr("boolean",{default:!1}),ltPropStopClick:Lyte.attr("boolean",{default:!1}),ltPropMargin:Lyte.attr("object"),buttons:Lyte.attr("array",{default:[{type:"accept",text:"Ok"}]}),ltPropShowCopy:Lyte.attr("boolean",{default:!1}),visible:Lyte.attr("boolean",{default:!0}),timeOutId:Lyte.attr("number"),classTobeAdded:Lyte.attr("string"),keys:Lyte.attr("object",{default:{37:1,38:1,39:1,40:1}}),first:Lyte.attr("boolean",{default:!0}),arrowHidden:Lyte.attr("boolean",{default:!1}),arrowEle:Lyte.attr("object"),returnedFalse:Lyte.attr("boolean",{default:!1}),transformOrigin:Lyte.attr("string"),windowSpacing:Lyte.attr("object"),lyteUnbound:Lyte.attr("boolean",{default:!1}),prevOffsetVal:Lyte.attr("object"),calculateHW:Lyte.attr("boolean",{default:!1}),checkAria:Lyte.attr("number",{default:0}),prevRect:Lyte.attr("object",{default:void 0}),margin:Lyte.attr("object")}},computeSpacing:function(){var e=Object.assign({},this.getData("ltPropWindowSpacing"));e.left||(e.left=30),e.right||(e.right=30),e.top||(e.top=30),e.bottom||(e.bottom=30),this.setData("windowSpacing",Object.assign({},e));var t=Object.assign({},this.getData("ltPropMargin"));t.left||(t.left=0),t.right||(t.right=0),t.top||(t.top=0),t.bottom||(t.bottom=0),this.setData("margin",Object.assign({},t))}.observes("ltPropWindowSpacing","ltPropMargin").on("init"),addDragHandler:function(){var e=this.actualModalDiv.querySelector("lyte-popover-header");e?(e.parentEle=this,this.$node.ltProp("draggable")?(e.addEventListener("mousedown",this.handleMove,!0),e.addEventListener("touchstart",this.handleMove,!0),e.classList.add("lytePopoverHeaderDraggable")):(e.removeEventListener("mousedown",this.handleMove,!0),e.removeEventListener("touchstart",this.handleMove,!0),e.classList.remove("lytePopoverHeaderDraggable"))):(console.warn("This popover is not draggable because it has no header"),this.$node.ltProp("draggable",!1))},handleMove:function(e){var t=e.currentTarget.parentEle.actualModalDiv;LytePopup.node=t,"mousedown"==e.type?(LytePopup.xPos=e.clientX-this.getBoundingClientRect().left,LytePopup.yPos=e.clientY-this.getBoundingClientRect().top):"touchstart"==e.type&&(LytePopup.xPos=e.touches[0].clientX-this.getBoundingClientRect().left,LytePopup.yPos=e.touches[0].clientY-this.getBoundingClientRect().top);t.getBoundingClientRect();t.style.transitionDuration="0s";var o=t.parentElement.querySelector("#lytePopoverArrow");o&&(this.parentEle.setData("arrowHidden",!0),this.parentEle.setData("arrowEle",o),o.style.display="none"),"mousedown"==e.type?(document.body.addEventListener("mousemove",e.currentTarget.parentEle.handleDrag,!0),document.body.addEventListener("mouseup",e.currentTarget.parentEle.stopDrag,!0)):"touchstart"==e.type&&(document.body.addEventListener("touchmove",e.currentTarget.parentEle.handleDrag,!0),document.body.addEventListener("touchend",e.currentTarget.parentEle.stopDrag,!0))},handleDrag:function(e){var t=LytePopup.node;"mousemove"==e.type?(t.style.left=e.clientX-t.offsetParent.getBoundingClientRect().left-LytePopup.xPos+"px",t.style.top=e.clientY-t.offsetParent.getBoundingClientRect().top-LytePopup.yPos+"px"):"touchmove"==e.type&&(t.style.left=e.touches[0].clientX-t.offsetParent.getBoundingClientRect().left-LytePopup.xPos+"px",t.style.top=e.touches[0].clientY-t.offsetParent.getBoundingClientRect().top-LytePopup.yPos+"px"),window.getSelection().removeAllRanges()},stopDrag:function(e){for(var t=e.target;t&&t!==document;){if(t.parentEle){"mouseup"==e.type?(this.removeEventListener("mousemove",t.parentEle.handleDrag,!0),this.removeEventListener("mouseup",t.parentEle.stopDrag,!0)):"touchend"==e.type&&(this.removeEventListener("touchmove",t.parentEle.handleDrag,!0),this.removeEventListener("touchend",t.parentEle.stopDrag,!0));break}t=t.parentElement?t.parentElement:document}},showToggled:function(){var e=e||window.event;if(this.getData("returnedFalse"))this.setData("returnedFalse",!1);else if(this.$node.ltProp("show")&&!this.$node.ltProp("showCopy"))if(this.tIdBeforeClose&&(clearTimeout(this.tIdBeforeClose),delete this.tIdBeforeClose),this.tIdBeforeShow&&(clearTimeout(this.tIdBeforeShow),delete this.tIdBeforeShow),_lyteUiUtils.getRTL()&&this.getData("ltPropPlacement")&&this.setRTLPosition(),this.$node.ltProp("bindToBody",!0),null==this.getData("ltPropDuration"))this.onBeforeShowHandling(e);else{var t=this;this.tIdBeforeShow=setTimeout((function(){delete t.tIdBeforeShow,t.onBeforeShowHandling(e)}),0)}else if(this.clearFastdomBatch(),this.tIdBeforeShow&&(clearTimeout(this.tIdBeforeShow),delete this.tIdBeforeShow),this.tIdBeforeClose&&(clearTimeout(this.tIdBeforeClose),delete this.tIdBeforeClose),this.$node.ltProp("showCopy"))if(null==this.getData("ltPropDuration"))this.onBeforeCloseHandling(e),this.getData("ltPropBindToBody")||this.removeDOMReferences();else{t=this;this.tIdBeforeClose=setTimeout((function(){delete t.tIdBeforeClose,t.onBeforeCloseHandling(e)}),0)}else this.getData("ltPropBindToBody")||this.removeDOMReferences()}.observes("ltPropShow").on("didConnect"),setRTLPosition:function(){var e=this.getData("ltPropPlacement").trim().split(" ");if(e.length>1){for(var t="",o=0;o<e.length;o++)t+=this.getRTLPosition(e[o])+" ";this.setData("ltPropPlacement",t.trim())}else this.setData("ltPropPlacement",this.getRTLPosition(e[0]))},getRTLPosition:function(e){return"bottomLeft"==e?"bottomRight":"bottomRight"==e?"bottomLeft":"topLeft"==e?"topRight":"topRight"==e?"topLeft":"left"==e?"right":"right"==e?"left":e},clearFastdomBatch:function(){this.fastdomfn1&&($L.fastdom.clear(this.fastdomfn1),delete this.fastdomfn1),this.fastdomfn2&&($L.fastdom.clear(this.fastdomfn2),delete this.fastdomfn2),this.fastdomfn3&&($L.fastdom.clear(this.fastdomfn3),delete this.fastdomfn3),this.fastdomfn4&&($L.fastdom.clear(this.fastdomfn4),delete this.fastdomfn4),this.fastdomfn5&&($L.fastdom.clear(this.fastdomfn5),delete this.fastdomfn5),this.fastdomfn6&&($L.fastdom.clear(this.fastdomfn6),delete this.fastdomfn6),this.fastdomfn7&&($L.fastdom.clear(this.fastdomfn7),delete this.fastdomfn7),this.initCompute&&(clearTimeout(this.initCompute),delete this.initCompute)},changeShow:function(){this.getData("ltPropBindToBody")||(this.clearFastdomBatch(),this.tIdBeforeShow&&(clearTimeout(this.tIdBeforeShow),delete this.tIdBeforeShow),this.tIdBeforeClose&&(clearTimeout(this.tIdBeforeClose),delete this.tIdBeforeClose),this.getData("ltPropFreeze")&&this.addedFreezeDetails&&(LytePopup.hideOrShowFreeze("close",this,!0),delete this.addedFreezeDetails),this.getData("ltPropShow")?this.setData("ltPropShow",!1):(this.setData("ltPropShowCopy",!1),LytePopup.closePopup(this),this.setData("visible",!1),this.removeDOMReferences()))}.observes("ltPropBindToBody"),removeDOMReferences:function(){this.childComp&&delete this.childComp,this.actualModalDiv&&delete this.actualModalDiv},addAriaValues:function(e){if(this.getData("ltPropAria")){var t=this.getData("ltPropAriaAttributes")||{};_lyteUiUtils.setAttribute(this.actualModalDiv,t,e?e.oldValue:{});var o=this.actualModalDiv.querySelector(".lytePopoverClose");o&&o.setAttribute("aria-label",Lyte.Component.registeredHelpers.lyteUiGetValue(t,"close-label")||"Close icon at top right position")}}.observes("ltPropAriaAttributes","ltPropAriaAttributes.{}","checkAria"),callOnResize:function(e){this.getMethods("onResize")&&this.executeMethod("onResize",e,this);var t=this.getData("ltPropOriginElem")?document.querySelector(this.$node.ltProp("originElem")).getBoundingClientRect():null;if(t){var o=Math.max(document.documentElement.clientHeight,window.innerHeight||0),a=Math.max(document.documentElement.clientWidth,window.innerWidth||0);!this.getData("ltPropForceScroll")&&(t.bottom>o||t.right>a||t.left<0||t.top<0)&&this.$node.ltProp("show",!1)}},callOnScroll:function(e){var t;return this.getMethods("onScroll")&&(t=this.executeMethod("onScroll",e,this)),null==t||t},updateScrollHandling:function(e){!this.$node.ltProp("freeze")&&this.$node.ltProp("forceScroll")&&this.$node.ltProp("scrollable",!0);var t,o,a=this.actualModalDiv,r=a.querySelector("lyte-popover-content");this.getData("resize")&&this.getData("ltPropAutoAlign")&&this.$node.mutobserver&&this.$node.mutobserver.disconnect(),a.style.maxWidth="",a.style.maxHeight="",a.style.height=this.$node.ltProp("height")?this.$node.ltProp("height"):"auto",a.style.width=this.$node.ltProp("width")?this.$node.ltProp("width"):"auto",this.fastdomfn1=$L.fastdom.measure((function(){delete this.fastdomfn1;var i=a.getBoundingClientRect(),s=a.parentElement.getBoundingClientRect(),l=window.getComputedStyle(a),n=(l.borderTopWidth?parseFloat(l.borderTopWidth):0)+(l.borderBottomWidth?parseFloat(l.borderBottomWidth):0),p=this.getData("windowSpacing"),c=Math.max(document.documentElement.clientHeight,window.innerHeight||0)-(p.top+p.bottom);this.fastdomfn2=$L.fastdom.mutate((function(){if(delete this.fastdomfn2,this.$node.ltProp("maxWidth")&&(i.width,-1!=this.$node.ltProp("maxWidth").indexOf("%")?parseFloat(this.$node.ltProp("maxWidth"))/100*s.width:parseFloat(this.$node.ltProp("maxWidth")),a.style.maxWidth=this.$node.ltProp("maxWidth"),r?r.style.overflowX="auto":a.style.overflowX="auto"),this.$node.ltProp("maxHeight")){this.childComp.querySelector(".popoverWrapper").classList.add("scrollable"),this.setData("calculateHW",!0),t=i.height-n;var l=-1!=this.$node.ltProp("maxHeight").indexOf("%")?parseFloat(this.$node.ltProp("maxHeight"))/100*s.height:parseFloat(this.$node.ltProp("maxHeight"));a.style.maxHeight=this.$node.ltProp("maxHeight"),o=l-n,r||(a.style.overflowY="auto")}else t=i.height-n,!this.$node.ltProp("height")||-1==this.$node.ltProp("height").indexOf("px")&&-1==this.$node.ltProp("height").indexOf("em")?o=c-20:(o=t,this.setData("calculateHW",!0));if(this.getData("calculateHW")&&r){var p=this.actualModalDiv.querySelector("lyte-popover-header"),d=this.actualModalDiv.querySelector("lyte-popover-footer"),u=0,h=0;this.fastdomfn3=$L.fastdom.measure((function(){delete this.fastdomfn3,p&&(this.$node.ltProp("maxWidth")&&(p.style.overflowX="auto"),u=p.offsetHeight),d&&(this.$node.ltProp("maxWidth")&&(d.style.overflowX="auto"),h=d.offsetHeight),this.fastdomfn4=$L.fastdom.mutate((function(){delete this.fastdomfn4;var t=o-(u+h);r.style.maxHeight=(t>0?t:50)+"px",r.style.overflowY="auto",this.getData("resize")&&this.computeOffsetImpl(e),a=null,r=null,p=null,d=null}),this)}),this)}else this.childComp.querySelector(".popoverWrapper").classList.remove("scrollable"),this.getData("resize")&&this.computeOffsetImpl(e),a=null,r=null}),this)}),this)},scrollHandling:function(){this.getData("ltPropShow")&&this.updateScrollHandling()}.observes("ltPropWidth","ltPropMaxWidth","ltPropHeight","ltPropMaxHeight"),addMutationObserver:function(){if(this.getData("ltPropAutoAlign")){var e,t,o=this.$node,a=this.actualModalDiv;this.setData("prevOffsetVal",{height:this.actualModalDiv.offsetHeight,width:this.actualModalDiv.offsetWidth}),o.mutobserver=new MutationObserver(function(t){if(this.getData("ltPropAutoAlign")){for(var o=this.actualModalDiv,a=this.getData("prevOffsetVal"),r=o.offsetWidth,i=o.offsetHeight,s=0;s<t.length;s++)if(!("attributes"!==t[s].type&&"childList"!=t[s].type&&"subtree"!=t[s].type||a.width==r&&a.height==i)){e=!0,this.setData("prevOffsetVal",{height:i,width:r});break}e&&(e=!1,this.computeOffsetImpl(null,!0))}}.bind(this)),t={attributes:!0,childList:!0,subtree:!0},o.mutobserver.observe(a,t)}},computeOffsetImpl:function(e,t){var o="",a="",r=this.actualModalDiv;$L.fastdom.measure((function(){if(this.$node.ltProp("showCopy")){if(""==this.$node.ltProp("originElem")&&Lyte.Component.registeredHelpers.lyteUiIsEmptyObject(this.$node.ltProp("offset")))return console.error("Please provide values for either ltPropOriginElem or ltPropOffset to open the popover at proper position."),void this.setData("ltPropShow",!1);var i=this.$node.ltProp("originElem")?document.querySelector(this.$node.ltProp("originElem")):null;if(!i&&Lyte.Component.registeredHelpers.lyteUiIsEmptyObject(this.$node.ltProp("offset")))return console.error("The origin element is either not present or may be removed. Kindly check."),void this.setData("ltPropShow",!1);var s,l=r.getBoundingClientRect(),n={top:l.top,right:l.right,bottom:l.bottom,left:l.left,width:r.offsetWidth,height:r.offsetHeight},p=r.parentElement.getBoundingClientRect(),c=Object.assign({},this.getData("windowSpacing")),d=Math.max(document.documentElement.clientHeight,window.innerHeight||0)-c.bottom,u=Math.max(document.documentElement.clientWidth,window.innerWidth||0)-c.right;if(Lyte.Component.registeredHelpers.lyteUiIsEmptyObject(this.$node.ltProp("offset"))){var h=i.getBoundingClientRect();s={top:h.top,right:h.right,bottom:h.bottom,left:h.left,width:h.width,height:h.height}}else s={width:parseInt(this.$node.ltProp("offset").width)||0,height:parseInt(this.$node.ltProp("offset").height)||0,top:parseInt(this.$node.ltProp("offset").top),left:parseInt(this.$node.ltProp("offset").left),bottom:parseInt(this.$node.ltProp("offset").bottom)||parseInt(this.$node.ltProp("offset").top)+(parseInt(this.$node.ltProp("offset").height)||0),right:parseInt(this.$node.ltProp("offset").right)||parseInt(this.$node.ltProp("offset").left)+(parseInt(this.$node.ltProp("offset").width)||0)};var m,y=s,f={},g={},v=this.$node.ltProp("positionNew"),x=!0,P=0,b=0;do{if(this.$node.ltProp("placement"))if(1==(m=this.$node.ltProp("placement").trim().split(" ")).length)switch(x=!0,f=this.positionPopover(this.$node.ltProp("placement"),y,n),v=this.$node.ltProp("placement")){case"bottom":case"top":f.offsetLeft+n.width>u&&(f.offsetLeft=Math.max(c.left,u-n.width)),f.offsetLeft<c.left&&(f.offsetLeft=c.left);break;case"left":case"right":f.offsetTop+n.height>d&&(f.offsetTop=Math.max(c.top,d-n.height)),f.offsetTop<c.top&&(f.offsetTop=c.top)}else if(b<m.length)switch(v=m[b],x=!0,g=f=this.positionPopover(v,y,n),v){case"bottom":if(d<g.offsetTop+n.height||d-(g.offsetTop+n.height)<c.bottom){b++,x=!1;break}g.offsetLeft-n.width<c.left&&(f.offsetLeft=y.left,x=!0),u<f.offsetLeft+n.width&&(f.offsetLeft=u-n.width-10,x=!0);break;case"bottomLeft":case"bottomRight":if(d<g.offsetTop+n.height||d-(g.offsetTop+n.height)<c.bottom){b++,x=!1;break}g.offsetLeft-n.width<c.left&&(f.offsetLeft=y.left,x=!0),u<g.offsetLeft+n.width&&(f.offsetLeft=u-n.width-10,x=!0);break;case"top":if(g.offsetTop<c.top){b++,x=!1;break}g.offsetLeft-n.width<c.left&&(f.offsetLeft=y.left,x=!0),u<f.offsetLeft+n.width&&(f.offsetLeft=u-n.width-10,x=!0);break;case"topLeft":case"topRight":if(g.offsetTop<c.top){b++,x=!1;break}g.offsetLeft-n.width<c.left&&(f.offsetLeft=y.left,x=!0),u<g.offsetLeft+n.width&&(f.offsetLeft=u-n.width-10,x=!0);break;case"left":if(g.offsetTop<c.top){b++,x=!1;break}if(g.offsetLeft<c.left){b++,x=!1,o=y.left+y.width+9,a=y.top;break}g.offsetTop-n.height<c.top&&(f.offsetTop=y.top),d<f.offsetTop+n.height&&(f.offsetTop=d-n.height);break;case"leftCenter":case"leftBottom":if(g.offsetTop<c.top){b++,x=!1;break}if(g.offsetLeft<c.left){b++,x=!1;break}if(d<f.offsetTop+n.height){b++,x=!1;break}break;case"right":if(g.offsetTop<c.top){b++,x=!1;break}if(u<g.offsetLeft+n.width){b++,x=!1,f.offsetLeft=y.left-n.width-9,f.offsetTop=y.top;break}g.offsetTop-n.height<c.top&&(f.offsetTop=y.top),d<f.offsetTop+n.height&&(f.offsetTop=d-n.height);break;case"rightCenter":case"rightBottom":if(g.offsetTop<c.top){b++,x=!1;break}if(u<g.offsetLeft+n.width){b++,x=!1;break}if(d<f.offsetTop+n.height){b++,x=!1;break}}else x=!0;else switch(P++,x=!0,g=f=this.positionPopover(v,y,n),v){case"bottom":if(d<g.offsetTop+n.height||d-(g.offsetTop+n.height)<c.bottom){v="top",x=!1;break}g.offsetLeft-n.width<c.left&&(f.offsetLeft=y.left,x=!0),u<f.offsetLeft+n.width&&(f.offsetLeft=u-n.width-("box"==this.getData("ltPropType")?0:9),x=!0);break;case"bottomLeft":case"bottomRight":if(d<g.offsetTop+n.height||d-(g.offsetTop+n.height)<c.bottom){v="top",x=!1;break}g.offsetLeft-n.width<c.left&&(f.offsetLeft=y.left,x=!0),u<g.offsetLeft+n.width&&(f.offsetLeft=u-n.width-("box"==this.getData("ltPropType")?0:9),x=!0);break;case"top":if(g.offsetTop<c.top){v=_lyteUiUtils.getRTL()?"left":"right",x=!1;break}g.offsetLeft-n.width<c.left&&(f.offsetLeft=y.left,x=!0),u<f.offsetLeft+n.width&&(f.offsetLeft=u-n.width-("box"==this.getData("ltPropType")?0:9),x=!0);break;case"topLeft":if(g.offsetTop<c.top){v="right",x=!1;break}g.offsetLeft-n.width<c.left&&(f.offsetLeft=y.left,x=!0),u<g.offsetLeft+n.width&&(f.offsetLeft=u-n.width-("box"==this.getData("ltPropType")?0:9),x=!0);break;case"topRight":if(g.offsetTop<c.top){v="left",x=!1;break}g.offsetLeft-n.width<c.left&&(f.offsetLeft=y.left,x=!0),u<g.offsetLeft+n.width&&(f.offsetLeft=u-n.width-("box"==this.getData("ltPropType")?0:9),x=!0);break;case"left":if(g.offsetTop<c.top){v="bottom",x=!1;break}g.offsetLeft<c.left&&(v="right",f.offsetLeft=y.left+y.width+("box"==this.getData("ltPropType")?0:9),f.offsetTop=y.top),g.offsetTop-n.height<c.top&&(f.offsetTop=y.top),d<f.offsetTop+n.height&&(f.offsetTop=Math.max(c.top,d-n.height));break;case"right":if(g.offsetTop<c.top){v="bottom",x=!1;break}u<g.offsetLeft+n.width&&(v="left",f.offsetLeft=y.left-n.width-("box"==this.getData("ltPropType")?0:9),f.offsetTop=y.top),g.offsetTop-n.height<c.top&&(f.offsetTop=y.top),d<f.offsetTop+n.height&&(f.offsetTop=Math.max(c.top,d-n.height))}}while(!x&&P<=8);if(this.getData("ltPropForceScroll")&&(-1!=v.indexOf("left")||-1!=v.indexOf("right")?y.height<=n.height?f.offsetTop>y.top?f.offsetTop=y.top:f.offsetTop+n.height<y.bottom&&(f.offsetTop=y.bottom-n.height):f.offsetTop<y.top?f.offsetTop=y.top:f.offsetTop+n.height>y.bottom&&(f.offsetTop=y.bottom-n.height):f.offsetLeft>y.left?f.offsetLeft=y.left:f.offsetLeft+n.width<y.right&&(f.offsetLeft=y.right-n.width)),o=f.offsetLeft,a=f.offsetTop,"callout"===this.$node.ltProp("type")){v.indexOf("bottom")>-1?(f.classTobeAdded="lytePopoverArrowTop",f.posClass="lytePopBottomToOrig"):v.indexOf("top")>-1?(f.classTobeAdded="lytePopoverArrowBottom",f.posClass="lytePopTopToOrig"):v.indexOf("left")>-1?(f.classTobeAdded="lytePopoverArrowRight",f.posClass="lytePopLeftToOrig"):v.indexOf("right")>-1&&(f.classTobeAdded="lytePopoverArrowLeft",f.posClass="lytePopRightToOrig");var D,L=r.querySelector("#lytePopoverArrow");L.classList.remove("lytePopoverArrowTop","lytePopoverArrowBottom","lytePopoverArrowRight","lytePopoverArrowLeft"),L.classList.add(f.classTobeAdded),r.parentElement.classList.contains(f.posClass)||(r.parentElement.classList.remove("lytePopBottomToOrig","lytePopTopToOrig","lytePopLeftToOrig","lytePopRightToOrig"),r.parentElement.classList.add(f.posClass)),$L.fastdom.measure((function(){D={height:L.offsetHeight,width:L.offsetWidth}})),$L.fastdom.mutate((function(){var e=Math.floor(Math.sqrt(D.height*D.height+D.width*D.width)-2);if("lytePopoverArrowTop"===f.classTobeAdded||"lytePopoverArrowBottom"===f.classTobeAdded){var t=Math.abs(o-(y.left+(y.width-e)/2));if(L.style.left=t+"px",L.style.top="",t<13&&s.width<=e+22)t+=i=13-t,L.style.left=t+"px",o-=i;else if(n.width-(t+e)<13&&s.width<=e+22){t-=i=13-(n.width-(t+e)),L.style.left=t+"px",o+=i}t>n.width-2*e&&(t=n.width-2*e,L.style.left=t+"px"),"lytePopoverArrowTop"===f.classTobeAdded&&this.setData("transformOrigin",Math.round(t)+"px top"),"lytePopoverArrowBottom"===f.classTobeAdded&&this.setData("transformOrigin",Math.round(t)+"px bottom")}else{var r=Math.abs(a-(y.top+(y.height-e)/2));if(L.style.left="",L.style.top=r+"px",r<13&&s.height<=e+22)r+=i=13-r,L.style.top=r+"px",a-=i;else if(n.height-(r+e)<13&&s.height<=e+22){var i;r-=i=13-(n.height-(r+e)),L.style.top=r+"px",a+=i}"lytePopoverArrowLeft"===f.classTobeAdded&&this.setData("transformOrigin","left "+Math.round(r)+"px"),"lytePopoverArrowRight"===f.classTobeAdded&&this.setData("transformOrigin","right "+Math.round(r)+"px")}}),this)}else if(v.indexOf("bottom")>-1?f.posClass="lytePopBottomToOrig":v.indexOf("top")>-1?f.posClass="lytePopTopToOrig":"left"===v?f.posClass="lytePopLeftToOrig":"right"===v&&(f.posClass="lytePopRightToOrig"),r.parentElement.classList.contains(f.posClass)||(r.parentElement.classList.remove("lytePopBottomToOrig","lytePopTopToOrig","lytePopLeftToOrig","lytePopRightToOrig"),r.parentElement.classList.add(f.posClass)),"lytePopBottomToOrig"==f.posClass||"lytePopTopToOrig"==f.posClass){var C=Math.abs(o-(y.left+y.width/2));"lytePopBottomToOrig"==f.posClass&&this.setData("transformOrigin",Math.round(C)+"px top"),"lytePopTopToOrig"==f.posClass&&this.setData("transformOrigin",Math.round(C)+"px bottom")}else{var _=Math.abs(a-(y.top+y.height/2));"lytePopRightToOrig"===f.posClass&&this.setData("transformOrigin","left "+Math.round(_)+"px"),"lytePopLeftToOrig"===f.posClass&&this.setData("transformOrigin","right "+Math.round(_)+"px")}this.setData("classTobeAdded",f.classTobeAdded),this.$node.ltProp("positionNew",v),$L.fastdom.mutate((function(){if(o-=p.left?p.left:0,a-=p.top?p.top:0,r.style.left=o+"px",r.style.top=a+"px",this.getData("first"))LytePopup.bindTransitionEnd(this.actualModalDiv),this.callOnShow(),this.setOpacityAndVisibility(),this.setData("first",!1),$L.fastdom.mutate((function(){this.addMutationObserver()}),this);else if(this.getData("resize"))this.callOnResize(e),this.setData("resize",!1),$L.fastdom.mutate((function(){this.addMutationObserver()}),this);else if(t){var i=this.getData("prevRect");i&&(i.left!=o||i.top!=a)&&this.getMethods("onPositionChange")&&this.executeMethod("onPositionChange",this)}this.setData("prevRect",{left:o,top:a})}),this)}}),this),this.$node.ltProp("freeze")&&document.body.classList.add("bodyWrapper")},positionPopover:function(e,t,o){var a,r=0,i=0,s=this.getData("margin");switch(e){case"bottom":r=t.left-(o.width-t.width)/2,i=t.top+t.height+("box"==this.getData("ltPropType")?0:9)+s.top,a="lytePopoverArrowTop";break;case"bottomLeft":r=t.left,i=t.top+t.height+("box"==this.getData("ltPropType")?0:9)+s.top,a="lytePopoverArrowTop";break;case"bottomRight":r=t.left+t.width-o.width,i=t.top+t.height+("box"==this.getData("ltPropType")?0:9)+s.top,a="lytePopoverArrowTop";break;case"top":r=t.left-(o.width-t.width)/2,i=t.top-(o.height+("box"==this.getData("ltPropType")?0:9))-s.bottom,a="lytePopoverArrowBottom";break;case"topLeft":r=t.left,i=t.top-(o.height+("box"==this.getData("ltPropType")?0:9))-s.bottom,a="lytePopoverArrowBottom";break;case"topRight":r=t.left+t.width-o.width,i=t.top-(o.height+("box"==this.getData("ltPropType")?0:9))-s.bottom,a="lytePopoverArrowBottom";break;case"left":r=t.left-o.width-("box"==this.getData("ltPropType")?0:9)+s.left,i=t.top,a="lytePopoverArrowRight";break;case"leftCenter":r=t.left-o.width-("box"==this.getData("ltPropType")?0:9)+s.left,i=t.top+(t.height-o.height)/2,a="lytePopoverArrowRight";break;case"leftBottom":r=t.left-o.width-("box"==this.getData("ltPropType")?0:9)+s.left,i=t.bottom-o.height,a="lytePopoverArrowRight";break;case"right":r=t.left+t.width+("box"==this.getData("ltPropType")?0:9)-s.right,i=t.top,a="lytePopoverArrowLeft";break;case"rightCenter":r=t.left+t.width+("box"==this.getData("ltPropType")?0:9)-s.right,i=t.top+(t.height-o.height)/2,a="lytePopoverArrowLeft";break;case"rightBottom":r=t.left+t.width+("box"==this.getData("ltPropType")?0:9)-s.right,i=t.bottom-o.height,a="lytePopoverArrowLeft"}return{offsetLeft:r,offsetTop:i,classTobeAdded:a}},callOnShow:function(){this.$node.classList.add("lytePopoverOpened"),this.getMethods("onShow")&&this.executeMethod("onShow",this)},setOpacityAndVisibility:function(){if("zoom"===this.getData("ltPropAnimation")){this.actualModalDiv.style.transition="none",this.actualModalDiv.style.transform="scale(0)",this.actualModalDiv.classList.add("lytePopoverVisible");var e=this;setTimeout((function(){e.actualModalDiv.style.transition="",e.actualModalDiv.style.transitionDuration=parseFloat(e.getData("ltPropDuration"))/1e3+"s",LytePopup.makingVisible=!0,e.actualModalDiv.style.transformOrigin=e.getData("transformOrigin"),e.actualModalDiv.style.transform="scale(1)"}),50)}else this.actualModalDiv.style.transitionDuration=parseFloat(this.getData("ltPropDuration"))/1e3+"s",LytePopup.makingVisible=!0,this.actualModalDiv.classList.add("lytePopoverVisible")},onBeforeCloseHandling:function(e){var t=!0;if(this.getMethods("onBeforeClose")&&(t=this.executeMethod("onBeforeClose",e,this)),void 0===t||t)if(delete this.$node.alignPopover,delete this.$node.calculateOffset,this.getData("ltPropFreeze")&&this.addedFreezeDetails&&(LytePopup.hideOrShowFreeze("close",this),delete this.addedFreezeDetails),this.getData("ltPropAutoAlign")&&this.$node.mutobserver&&(this.$node.mutobserver.disconnect(),delete this.$node.mutobserver),this.getData("arrowHidden")&&(this.getData("arrowEle").style.display="",this.setData("arrowHidden",!1),this.setData("arrowEle",null)),_lyteUiUtils.getRTL()&&this.getData("ltPropPlacement")&&this.setRTLPosition(),null==this.getData("ltPropDuration"))this.$node.ltProp({showCopy:!1,show:!1}),this.$node.classList.remove("lytePopoverOpened"),"zoom"==this.getData("ltPropAnimation")?this.actualModalDiv.style.transform="scale(0)":this.actualModalDiv.classList.remove("lytePopoverVisible"),LytePopup.closePopup(this),this.setData("visible",!1),this.$node.ltProp("freeze")&&this.childComp.querySelector("lyte-popover-freeze")&&(this.childComp.querySelector("lyte-popover-freeze").style.opacity=0,this.childComp.querySelector("lyte-popover-freeze").style.visibility=""),this.$node.ltProp("freeze")||this.childComp.querySelector(".popoverWrapper").classList.remove("noFreeze"),!this.getData("ltPropFreeze")&&document.body.classList.contains("lyteStopBodyScrolling")&&document.body.classList.remove("lyteStopBodyScrolling"),this.getMethods("onClose")&&this.executeMethod("onClose",e,this),LytePopup.checkAndRemoveWrapper();else{var o=parseInt(this.getData("ltPropDuration")),a=this;this.tIdClose=setTimeout((function(){a.tIdClose=!1,"zoom"==a.getData("ltPropAnimation")&&(a.actualModalDiv.classList.remove("lytePopoverVisible"),a.actualModalDiv.style.transform=""),a.$node.ltProp({showCopy:!1,show:!1}),a.$node.classList.remove("lytePopoverOpened"),a.getMethods("onClose")&&a.executeMethod("onClose",e,a),LytePopup.checkAndRemoveWrapper(),a.getData("ltPropBindToBody")||a.removeDOMReferences()}),o),this.actualModalDiv.style.transitionDuration=(0==o?0:o>300?o-200:100)/1e3+"s","zoom"==this.getData("ltPropAnimation")?this.actualModalDiv.style.transform="scale(0)":this.actualModalDiv.classList.remove("lytePopoverVisible"),LytePopup.closePopup(this),this.setData("visible",!1),this.childComp.classList.add("lytePopoverDispNone"),$L(this.childComp).find(".lytePopover")[0]&&($L(this.childComp).find(".lytePopover")[0].style.left="",$L(this.childComp).find(".lytePopover")[0].style.top=""),this.$node.ltProp("freeze")&&this.childComp.querySelector("lyte-popover-freeze")&&(this.childComp.querySelector("lyte-popover-freeze").style.opacity=0,this.childComp.querySelector("lyte-popover-freeze").style.visibility=""),this.$node.ltProp("freeze")||this.childComp.querySelector(".popoverWrapper").classList.remove("noFreeze"),!this.getData("ltPropFreeze")&&document.body.classList.contains("lyteStopBodyScrolling")&&document.body.classList.remove("lyteStopBodyScrolling")}else this.setData("returnedFalse",!0),this.getData("visible")||this.setData("visible",!0),this.$node.ltProp("show",!0)},onBeforeShowHandling:function(){var e=!0;if(this.getMethods("onBeforeShow")&&(e=this.executeMethod("onBeforeShow",this)),void 0===e||e){if(this.childComp.classList.remove("lytePopoverDispNone"),this.setData("checkAria",this.getData("checkAria")+1),this.getData("ltPropDraggable")&&this.addDragHandler(),this.updateScrollHandling(),this.$node.ltProp("freeze")||this.childComp.querySelector(".popoverWrapper").classList.add("noFreeze"),this.$node.ltProp("positionNew",this.$node.ltProp("position")),null==this.getData("ltPropDuration"))this.$node.ltProp("showCopy",!0),this.fastdomfn5=$L.fastdom.mutate((function(){delete this.fastdomfn5,this.fastdomfn6=$L.fastdom.measure((function(){delete this.fastdomfn6,this.fastdomfn7=$L.fastdom.mutate((function(){delete this.fastdomfn7,this.computeOffsetImpl()}),this)}),this)}),this);else{var t=this;this.initCompute=setTimeout((function(){delete t.initCompute,t.$node.ltProp("showCopy",!0),t.fastdomfn5=$L.fastdom.mutate((function(){delete t.fastdomfn5,t.fastdomfn6=$L.fastdom.measure((function(){delete t.fastdomfn6,t.fastdomfn7=$L.fastdom.mutate((function(){delete t.fastdomfn7,t.computeOffsetImpl()}),t)}),t)}),t)}),0)}if(this.getData("first")||this.setData("first",!0),$L.fastdom.measure((function(){var e=this.$node.ltProp("originElem")?LytePopup.getScrollParent(document.querySelector(this.$node.ltProp("originElem"))):null;this.getData("ltPropFreeze")||e&&e.isEqualNode(document.body)||document.body.classList.add("lyteStopBodyScrolling")}),this),this.getData("visible")||this.setData("visible",!0),LytePopup.addPopup(this),this.$node.ltProp("freeze")){var o=this.childComp.querySelector("lyte-popover-freeze").style;o.background=this.getData("ltPropDimmer").color,this.addedFreezeDetails||(o.opacity=this.getData("ltPropDimmer").opacity)}this.$node.alignPopover=this.computeOffsetImpl.bind(this),this.$node.calculateOffset=this.updateScrollHandling.bind(this)}else this.$node.ltProp({showCopy:!1,show:!1})},didDestroy:function(){this.$node.classList.remove("lytePopoverOpened"),this.childComp&&(this.clearFastdomBatch(),this.getData("ltPropAutoAlign")&&this.$node.mutobserver&&(this.$node.mutobserver.disconnect(),delete this.$node.mutobserver),this.tIdBeforeClose&&(clearTimeout(this.tIdBeforeClose),this.tIdBeforeClose=!1),this.tIdClose&&(clearTimeout(this.tIdClose),this.tIdClose=!1),this.getData("ltPropFreeze")&&this.addedFreezeDetails&&(LytePopup.hideOrShowFreeze("close",this),delete this.addedFreezeDetails),LytePopup.closePopup(this),this.childComp.remove(),this.removeDOMReferences(),LytePopup.checkAndRemoveWrapper(),!this.getData("ltPropFreeze")&&document.body.classList.contains("lyteStopBodyScrolling")&&document.body.classList.remove("lyteStopBodyScrolling"))},actions:{close:function(){this.$node.ltProp("show",!1)}},methods:{beforeWormholeAppend:function(e){if(this.childComp=e,this.$node.parentElement&&"LYTE-COLORPICKER"==this.$node.parentElement.tagName&&(this.$node.parentElement.component.childComp=this.childComp),this.childComp.querySelector("lyte-popover-header")&&(this.childComp.querySelector("lyte-popover-header").style.padding=this.getData("ltPropHeaderPadding")),this.childComp.querySelector("lyte-popover-content")&&(this.childComp.querySelector("lyte-popover-content").style.padding=this.getData("ltPropContentPadding")),this.childComp.querySelector("lyte-popover-footer")&&(this.childComp.querySelector("lyte-popover-footer").style.padding=this.getData("ltPropFooterPadding")),this.actualModalDiv=this.childComp.querySelector(".lytePopover"),this.childComp.querySelector("lyte-popover-header")&&this.getData("ltPropShowCloseButton")){var t=0,o=0;$L.fastdom.measure((function(){t=this.childComp.querySelector("lyte-popover-header").offsetHeight,o=this.childComp.querySelector(".lytePopoverClose").offsetHeight}),this),$L.fastdom.mutate((function(){this.childComp.querySelector(".lytePopoverClose").style.top=(t-o)/2+"px"}),this)}}},observeClickEvent:function(){LytePopup._stopPropagation=this.getData("ltPropStopClick"),LytePopup._stopPropagation?LytePopup._sourceComp=this:LytePopup._sourceComp&&delete LytePopup._sourceComp}.observes("ltPropStopClick")}),"complete"===document.readyState||"interactive"===document.readyState?addPopoverEvent():document.addEventListener("DOMContentLoaded",(function(e){addPopoverEvent(e)})),Lyte.Component.register("lyte-modal",{_template:'<template tag-name="lyte-modal"> <template is="if" value="{{expHandlers(ltPropBindToBody,\'&amp;&amp;\',expHandlers(ltPropReRenderModal,\'!\'))}}"><template case="true"> <lyte-wormhole case="true" style="{{if(ltPropShowCopy,\'visibility:visible\',\'visibility:hidden\')}}" on-before-append="{{method(&quot;beforeWormholeAppend&quot;)}}"> <template is="registerYield" yield-name="lyte-content"> <div class="modalWrapper {{ltPropWrapperClass}}"> <div class="lyteModal"> <template is="if" value="{{ltPropShowCloseButton}}"> <template case="true"><span class="lyteModalClose" onclick="{{action(\'close\')}}" tabindex="0"></span></template> </template> <lyte-yield yield-name="modal"></lyte-yield> </div> <template is="if" value="{{ltPropFreeze}}"> <template case="true"><lyte-modal-freeze></lyte-modal-freeze></template> </template> </div> </template> </lyte-wormhole> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"if",args:["ltPropShowCopy","'visibility:visible'","'visibility:hidden'"]}}}},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}},{type:"insertYield",position:[1,1,3]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]}},default:{}}],_observedAttributes:["ltPropShow","ltPropFreeze","ltPropShowCloseButton","ltPropCloseOnEscape","ltPropTransition","ltPropOffset","ltPropDimmer","ltPropDraggable","ltPropAllowMultiple","ltPropScrollable","ltPropMaxHeight","ltPropMaxWidth","ltPropWidth","ltPropHeight","ltPropWrapperClass","ltPropBindToBody","ltPropShowCopy","ltPropReRenderModal","ltPropOverlayClose","ltPropAria","ltPropAriaAttributes","ltPropPreventFocus","ltPropSetContentHeight","ltPropCloseDuration","ltPropOverlapModal","ltPropIgnoreInlineDirection","first","resizeCalled","initializedPosition","prevHeight","returnedFalse","prevModalHeight","prevModalWidth","calculateHW","checkAria"],data:function(){return{ltPropShow:Lyte.attr("boolean",{default:!1}),ltPropFreeze:Lyte.attr("boolean",{default:!0}),ltPropShowCloseButton:Lyte.attr("boolean",{default:!0}),ltPropCloseOnEscape:Lyte.attr("boolean",{default:!0}),ltPropTransition:Lyte.attr("object",{default:{animation:"slideFromTop",duration:"0.5"}}),ltPropOffset:Lyte.attr("object",{default:{top:"center",left:"center"}}),ltPropDimmer:Lyte.attr("object"),ltPropDraggable:Lyte.attr("boolean",{default:!1}),ltPropAllowMultiple:Lyte.attr("boolean",{default:!1}),ltPropScrollable:Lyte.attr("boolean",{default:!1}),ltPropMaxHeight:Lyte.attr("string",{default:""}),ltPropMaxWidth:Lyte.attr("string",{default:""}),ltPropWidth:Lyte.attr("string",{default:""}),ltPropHeight:Lyte.attr("string",{default:"auto"}),ltPropWrapperClass:Lyte.attr("string",{default:""}),ltPropBindToBody:Lyte.attr("boolean",{default:!1}),ltPropShowCopy:Lyte.attr("boolean",{default:!1}),ltPropReRenderModal:Lyte.attr("boolean",{default:!1}),ltPropOverlayClose:Lyte.attr("boolean",{default:!1}),ltPropAria:Lyte.attr("boolean",{default:!1}),ltPropAriaAttributes:Lyte.attr("object",{default:{}}),ltPropPreventFocus:Lyte.attr("boolean",{default:!1}),ltPropSetContentHeight:Lyte.attr("boolean",{default:!1}),ltPropCloseDuration:Lyte.attr("number",{default:void 0}),ltPropOverlapModal:Lyte.attr("boolean",{default:!0}),ltPropIgnoreInlineDirection:Lyte.attr("boolean",{default:!1}),first:Lyte.attr("boolean",{default:!0}),resizeCalled:Lyte.attr("boolean",{default:!1}),initializedPosition:Lyte.attr("boolean",{default:!1}),prevHeight:Lyte.attr("number"),returnedFalse:Lyte.attr("boolean",{default:!1}),prevModalHeight:Lyte.attr("number"),prevModalWidth:Lyte.attr("number"),calculateHW:Lyte.attr("boolean",{default:!1}),checkAria:Lyte.attr("number",{default:0})}},addDragHandler:function(){var e=this.actualModalDiv.querySelector("lyte-modal-header");e?(e.parentEle=this,this.$node.ltProp("draggable")?(e.addEventListener("mousedown",this.handleMove,!0),e.addEventListener("touchstart",this.handleMove,!0),e.classList.add("lyteModalHeaderDraggable")):(e.removeEventListener("mousedown",this.handleMove,!0),e.removeEventListener("touchstart",this.handleMove,!0),e.classList.remove("lyteModalHeaderDraggable"))):(console.warn("This modal is not draggable because it has no header"),this.$node.ltProp("draggable",!1))},handleMove:function(e){var t,o=e.currentTarget.parentEle.actualModalDiv;LytePopup.node=o,"mousedown"==e.type&&(t={x:e.clientX,y:e.clientY}),"touchstart"==e.type&&(t={x:e.touches[0].clientX,y:e.touches[0].clientY}),"fadeIn"==e.currentTarget.parentEle.getData("ltPropTransition").animation?(LytePopup.xPos=t.x-this.getBoundingClientRect().left,LytePopup.yPos=t.y-this.getBoundingClientRect().top):(LytePopup.xPos=t.x,LytePopup.yPos=t.y);o.getBoundingClientRect();o.style.transitionDuration="0s",(e.type="mousedown")&&(document.body.addEventListener("mousemove",e.currentTarget.parentEle.handleDrag,!0),document.body.addEventListener("mouseup",e.currentTarget.parentEle.stopDrag,!0)),(e.type="touchstart")&&(document.body.addEventListener("touchmove",e.currentTarget.parentEle.handleDrag,!0),document.body.addEventListener("touchend",e.currentTarget.parentEle.stopDrag,!0))},handleDrag:function(e){var t=LytePopup.node;if(LytePopup.node){var o;if("mousemove"==e.type&&(o={x:e.clientX,y:e.clientY}),"touchmove"==e.type&&(o={x:e.touches[0].clientX,y:e.touches[0].clientY}),"fadeIn"==LytePopup.node.closest("lyte-wormhole")._callee.component.getData("ltPropTransition").animation)t.style.left=o.x-LytePopup.xPos+"px",t.style.top=o.y-LytePopup.yPos+"px";else{var a=LytePopup.node.closest("lyte-wormhole")._callee.component.transform,r=a.x+(o.x-LytePopup.xPos),i=a.y+(o.y-LytePopup.yPos);t.style.transform="translate("+r+"px, "+i+"px)"}window.getSelection().removeAllRanges()}},stopDrag:function(e){for(var t=e.target;t&&t!==document;){if(t.parentEle){"mouseup"==e.type&&(this.removeEventListener("mousemove",t.parentEle.handleDrag,!0),this.removeEventListener("mouseup",t.parentEle.stopDrag,!0)),"touchend"==e.type&&(this.removeEventListener("touchmove",t.parentEle.handleDrag,!0),this.removeEventListener("touchend",t.parentEle.stopDrag,!0));break}t=t.parentElement?t.parentElement:document}if(LytePopup.node){var o=LytePopup.node.closest("lyte-wormhole")._callee.component;if(LytePopup.node.style.transitionDuration=o.getData("ltPropTransition").duration,"fadeIn"!=o.getData("ltPropTransition").animation){var a=new WebKitCSSMatrix(window.getComputedStyle(o.actualModalDiv).transform);o.transform={x:a.m41,y:a.m42}}LytePopup.node=null}},showToggled:function(){var e=e||window.event;if(this.getData("returnedFalse"))this.setData("returnedFalse",!1);else if(this.$node.ltProp("reRenderModal")&&(this.$node.ltProp("show")&&(this.$node.ltProp({showCopy:!1,show:!1}),LytePopup.closePopup(this),this.setData("first",!0),this.setData("initializedPosition",!1)),this.$node.ltProp("reRenderModal",!1)),this.timeOutId&&(delete this.timeOutId,this.closeModal(),LytePopup.closePopup(this)),this.$node.ltProp("show")&&!this.$node.ltProp("showCopy")){if(_lyteUiUtils.getRTL()&&!this.getData("ltPropIgnoreInlineDirection")){"slideFromLeft"==this.getData("ltPropTransition").animation?this.getData("ltPropTransition").animation="slideFromRight":"slideFromRight"==this.getData("ltPropTransition").animation&&(this.getData("ltPropTransition").animation="slideFromLeft");var t=this.getData("ltPropOffset"),o={};for(key in t)"left"==key&&"center"!=t[key]?o.right=t[key]:"right"==key?o.left=t[key]:o[key]=t[key];this.setData("ltPropOffset",o)}-1!=LytePopup.components.indexOf(this)&&(LytePopup.closePopup(this),this.setData("first",!0),this.setData("initializedPosition",!1)),this.$node.ltProp("bindToBody",!0);var a=this;this.beforeShowId=setTimeout((function(){delete a.beforeShowId,a.onBeforeShowHandling()}),0)}else if(this.clearFastdomBatch(),this.$node.ltProp("showCopy")){a=this;this.beforeCloseId=setTimeout((function(){delete a.beforeCloseId,a.onBeforeCloseHandling(e)}),0)}else-1!=LytePopup.components.indexOf(this)&&(LytePopup.closePopup(this),this.setData("first",!0),this.setData("initializedPosition",!1))}.observes("ltPropShow","ltPropReRenderModal").on("didConnect"),clearFastdomBatch:function(){this.fastdomfn1&&$L.fastdom.clear(this.fastdomfn1),this.fastdomfn2&&$L.fastdom.clear(this.fastdomfn2),this.fastdomfn3&&$L.fastdom.clear(this.fastdomfn3),this.fastdomfn4&&$L.fastdom.clear(this.fastdomfn4),this.fastdomfn5&&$L.fastdom.clear(this.fastdomfn5),this.fastdomfn6&&$L.fastdom.clear(this.fastdomfn6),this.fastdomfn7&&$L.fastdom.clear(this.fastdomfn7),this.fastdomfn8&&$L.fastdom.clear(this.fastdomfn8),this.beforeShowId&&clearTimeout(this.beforeShowId)},changeBindToBody:function(){this.getData("ltPropBindToBody")||(this.getData("ltPropFreeze")&&this.addedFreezeDetails&&(LytePopup.hideOrShowFreeze("close",this,!0),delete this.addedFreezeDetails),LytePopup.closePopup(this),this.renderSidewise&&(delete this.renderSidewise,delete this.renderProps),this.actualModalDiv=null,this.childComp=null,this.getData("ltPropShow")?this.setData({ltPropShowCopy:!1,ltPropShow:!1}):this.getData("ltPropShowCopy")&&this.setData("ltPropShowCopy",!1),this.setData("first",!0),this.setData("initializedPosition",!1),this.$node.classList.remove("lyteModalOpened"),LytePopup.checkAndRemoveWrapper())}.observes("ltPropBindToBody"),addAriaValues:function(e){if(this.getData("ltPropAria")){var t=this.getData("ltPropAriaAttributes")||{};_lyteUiUtils.setAttribute(this.actualModalDiv,t,e?e.oldValue:{});var o=this.actualModalDiv.querySelector(".lyteModalClose");o&&o.setAttribute("aria-label",Lyte.Component.registeredHelpers.lyteUiGetValue(t,"close-label")||"Close icon at top right position")}}.observes("ltPropAriaAttributes","ltPropAriaAttributes.{}","checkAria"),updateScrollHandling:function(){this.$node.ltProp("freeze")||this.setData("calculateHW",!0);var e,t,o,a=this.actualModalDiv,r=Math.max(document.documentElement.clientWidth,window.innerWidth||0),i=a.querySelector("lyte-modal-content");a.style.maxWidth="",a.style.maxHeight="",a.style.height=this.$node.ltProp("height")?this.$node.ltProp("height"):"auto",a.style.width=this.$node.ltProp("width")?this.getData("ltPropOverlapModal")||-1==this.$node.ltProp("width").indexOf("%")?this.$node.ltProp("width"):parseFloat(this.$node.ltProp("width"))/100*r+"px":"auto",this.fastdomfn2=$L.fastdom.measure((function(){delete this.fastdomfn2;var r=a.getBoundingClientRect(),s=a.parentElement.getBoundingClientRect(),l=window.getComputedStyle(a),n=(l.borderTopWidth?parseFloat(l.borderTopWidth):0)+(l.borderBottomWidth?parseFloat(l.borderBottomWidth):0),p=Math.max(document.documentElement.clientHeight,window.innerHeight||0)-(this.getData("ltPropFreeze")?parseInt(window.getComputedStyle(a.parentElement).top):0);this.fastdomfn3=$L.fastdom.mutate((function(){if(delete this.fastdomfn3,this.$node.ltProp("maxWidth")?(o=-1!=this.$node.ltProp("maxWidth").indexOf("%")?parseFloat(this.$node.ltProp("maxWidth"))/100*s.width:parseFloat(this.$node.ltProp("maxWidth")),a.style.maxWidth=o+"px",a.style.overflowX="auto"):o=r.width,this.$node.ltProp("maxHeight")){this.childComp.querySelector(".modalWrapper").classList.add("scrollable"),this.setData("calculateHW",!0),e=r.height-n;var l=-1!=this.$node.ltProp("maxHeight").indexOf("%")?parseFloat(this.$node.ltProp("maxHeight"))/100*s.height:parseFloat(this.$node.ltProp("maxHeight"));a.style.maxHeight=l+"px",t=l-n}else e=a.offsetHeight-n+1,this.$node.ltProp("height")&&"auto"!=this.$node.ltProp("height")?(t=e,this.setData("calculateHW",!0)):t=e>p?p-40:e,this.$node.ltProp("scrollable")&&(this.$node.ltProp("height")&&"auto"!=this.$node.ltProp("height")||(t=p-40),this.setData("calculateHW",!0)),i&&i.offsetHeight>e-((this.actualModalDiv.querySelector("lyte-modal-header")?this.actualModalDiv.querySelector("lyte-modal-header").offsetHeight:0)+(this.actualModalDiv.querySelector("lyte-modal-footer")?this.actualModalDiv.querySelector("lyte-modal-footer").offsetHeight:0))&&this.setData("calculateHW",!0);if(this.getData("calculateHW")&&i){var c=this.actualModalDiv.querySelector("lyte-modal-header"),d=this.actualModalDiv.querySelector("lyte-modal-footer"),u=null,h=null;this.fastdomfn4=$L.fastdom.measure((function(){delete this.fastdomfn4,c&&(u=c.offsetHeight),d&&(h=d.offsetHeight);var e=a.getBoundingClientRect().height;this.setData("prevHeight",e),this.fastdomfn5=$L.fastdom.mutate((function(){delete this.fastdomfn5;var e=t-((u||0)+(h||0));i.style.maxHeight=(e>0?e:50)+0+"px",i.style.overflowY="auto","auto"!=this.$node.ltProp("height")&&this.getData("ltPropSetContentHeight")&&(i.style.height=e+"px"),a=null,i=null,c=null,d=null,this.getData("initializedPosition")?this.getData("resizeCalled")&&(this.computeOffsetImplOnResize(),this.setData("resizeCalled",!1)):(this.computeOffsetImpl(),this.setData("initializedPosition",!0))}),this)}),this)}else this.childComp.querySelector(".modalWrapper").classList.remove("scrollable"),a=null,i=null,this.getData("initializedPosition")?this.getData("resizeCalled")&&(this.computeOffsetImplOnResize(),this.setData("resizeCalled",!1)):(this.computeOffsetImpl(),this.setData("initializedPosition",!0));this.$node.ltProp("freeze")||(this.childComp.querySelector(".modalWrapper").classList.add("noFreeze"),this.renderSidewise||(this.actualModalDiv.style.position="fixed"))}),this)}),this)},scrollHandling:function(){this.getData("ltPropShow")&&this.updateScrollHandling()}.observes("ltPropWidth","ltPropMaxWidth","ltPropHeight","ltPropMaxHeight"),callOnShow:function(){this.$node.classList.add("lyteModalOpened"),this.getMethods("onShow")&&this.executeMethod("onShow",this)},callOnResize:function(){this.isResponsibleForSidewiseRender()&&LytePopup.components[LytePopup.components.length-1].$node.component.updateScrollHandling(),this.getMethods("onResize")&&this.executeMethod("onResize",this)},enableTransform:function(e,t,o){this.$node.ltProp("showCopy",!0);var a=this;setTimeout((function(){"x"==t&&(a.actualModalDiv.style.transform="translate("+e+"px,0px)",a.transform={x:e,y:0}),"y"==t&&(a.actualModalDiv.style.transform="translate(0px,"+e+"px)",a.transform={x:0,y:e})}),null!=o?o:void 0)},computeOffsetImplOnResize:function(){$L.fastdom.measure((function(){var e,t,o=this.actualModalDiv,a=o.getBoundingClientRect(),r=window.getComputedStyle(o.parentElement),i=parseInt(r.top),s=parseInt(r.left),l=o.offsetTop,n=Math.max(document.documentElement.clientWidth,window.innerWidth||0)-(this.getData("ltPropFreeze")?s:0),p=Math.max(document.documentElement.clientHeight,window.innerHeight||0)-(this.getData("ltPropFreeze")?i:0),c=this.getData("prevWinH"),d=this.getData("prevWinW"),u=this.transform,h=null,m=null,y=this.getData("ltPropOffset"),f=this.getData("prevModalHeight")-a.height,g=this.getData("prevModalWidth")-a.width;this.calculateForSidewiseRender(),this.renderSidewise&&(this.renderProps.windowWidth=n,n="slideFromRight"==this.getData("ltPropTransition").animation?this.renderProps.left:this.renderProps.windowWidth-this.renderProps.right,e=this.childComp.querySelector("lyte-modal-freeze"),t=this.actualModalDiv.parentElement),"fadeIn"===this.getData("ltPropTransition").animation||"zoom"===this.getData("ltPropTransition").animation?(c=a.height,d=a.width,n<d&&(y.left&&"center"==y.left||y.right&&"center"==y.right?m=(d-n)/2:y.right?m=a.left-(d-n):y.left&&(m=a.left)),n>d&&(y.left&&"center"==y.left||y.right&&"center"==y.right?m=(n-d)/2:y.right?m=a.left+(n-d):y.left&&(m=a.left)),p<c&&(y.top&&"center"==y.top||y.bottom&&"center"==y.bottom?h=(p-a.height)/2:y.bottom?h=l-(c-p):y.top&&(h=l)),p>c&&(y.top&&"center"==y.top||y.bottom&&"center"==y.bottom?h=(p-a.height)/2:y.bottom&&"center"!=y.bottom?h=l+(p-c):y.top&&"center"!=y.top&&(h=l)),$L.fastdom.mutate((function(){h&&(o.style.top=h+"px"),m&&(o.style.left=m+"px"),this.callOnResize()}),this)):(n<d&&(y.left&&"center"==y.left||y.right&&"center"==y.right?m=u.x-(d-n)/2+g/2:y.right?m=u.x-(d-n)+g:y.left&&(m=u.x),this.transform.x=m),n>d&&(y.left&&"center"==y.left||y.right&&"center"==y.right?m=u.x+(n-d)/2+g/2:y.right?m=u.x+(n-d)+g:y.left&&(m=u.x),this.transform.x=m),p<c&&(y.top&&"center"==y.top||y.bottom&&"center"==y.bottom?h=u.y-(c-p)/2+f/2:y.bottom?h=u.y-(a.bottom-p+parseInt(y.bottom)):y.top&&(h=u.y),this.transform.y=h),p>c&&(y.top&&"center"==y.top||y.bottom&&"center"==y.bottom?h=u.y+(p-c)/2+f/2:y.bottom&&"center"!=y.bottom?h=u.y+(p-a.bottom-parseInt(y.bottom)):y.top&&"center"!=y.top&&(h=u.y),this.transform.y=h),$L.fastdom.mutate((function(){if(o.style.transitionDuration="0s","slideFromTop"===this.getData("ltPropTransition").animation||"slideFromBottom"===this.getData("ltPropTransition").animation)n<d&&(y.left&&"center"==y.left||y.right&&"center"==y.right?o.style.left=a.left-(d-n)/2+g/2+"px":y.right?o.style.left=a.left-(d-n)+g+"px":y.left&&(o.style.left=a.left+"px")),n>d&&(y.left&&"center"==y.left||y.right&&"center"==y.right?o.style.left=a.left+(n-d)/2+g/2+"px":y.right?o.style.left=a.left+(n-d)+g+"px":y.left&&(o.style.left=a.left+"px")),o.style.transform="translate(0px,"+this.transform.y+"px)";else if(("slideFromLeft"===this.getData("ltPropTransition").animation||"slideFromRight"===this.getData("ltPropTransition").animation)&&(p<c&&(y.top&&"center"==y.top||y.bottom&&"center"==y.bottom?o.style.top=l-(c-p)/2+f/2+"px":y.bottom?o.style.top=l-(c-p)+"px":y.top&&(o.style.top=l+"px")),p>c&&(y.top&&"center"==y.top||y.bottom&&"center"==y.bottom?o.style.top=l+(p-c)/2+f/2+"px":y.bottom&&"center"!=y.bottom?o.style.top=l+(p-c)+"px":y.top&&"center"!=y.top&&(o.style.top=l+"px")),o.style.transform="translate("+this.transform.x+"px,0px)",this.renderSidewise)){if("slideFromRight"==this.getData("ltPropTransition").animation){var r=this.renderProps.windowWidth-this.renderProps.left;e&&(e.style.right=r+"px"),t&&(t.style.right=r-5+"px")}"slideFromLeft"==this.getData("ltPropTransition").animation&&(e&&(e.style.left=this.renderProps.right+"px"),t&&(t.style.left=this.renderProps.right+1+"px"))}this.callOnResize()}),this)),this.setData("prevModalHeight",a.height),this.setData("prevModalWidth",a.width),this.setData("prevWinH",p),this.setData("prevWinW",n)}),this)},isResponsibleForSidewiseRender:function(){var e=LytePopup.components;return!!(e.length>1&&e[e.length-2]===this&&e[e.length-1].renderSidewise)},computeOffsetImpl:function(e,t){var o=this.nodeName&&"LYTE-MODAL"===this.nodeName?this.component:this;o.fastdomfn6=$L.fastdom.measure((function(){if(delete o.fastdomfn6,o.actualModalDiv){o.calculateForSidewiseRender();var a,r,i=o.actualModalDiv,s=Lyte.deepCopyObject(o.$node.ltProp("offset")),l=i.getBoundingClientRect(),n={top:l.top,right:l.right,bottom:l.bottom,left:l.left,width:i.offsetWidth,height:i.offsetHeight},p=0,c=0;if(o.getData("ltPropFreeze")){var d=window.getComputedStyle(i.parentElement);p=parseInt(d.left),c=parseInt(d.top)}var u=Math.max(document.documentElement.clientWidth,window.innerWidth||0)-p;o.renderSidewise&&(o.renderProps.windowWidth=u,u="slideFromRight"==o.getData("ltPropTransition").animation?o.renderProps.left:o.renderProps.windowWidth-o.renderProps.right,a=o.childComp.querySelector("lyte-modal-freeze"),r=o.actualModalDiv.parentElement);var h=Math.max(document.documentElement.clientHeight,window.innerHeight||0)-c;if(i.style.transitionDuration=(null!=e?e:o.$node.ltProp("transition").duration)+"s",o.setData("prevWinH",h),o.setData("prevWinW",u),o.setData("prevModalHeight",n.height),o.setData("prevModalWidth",n.width),s){if("center"===s.left||"center"===s.right){var m=(u-n.width)/2;m<0&&(m=20),s.left=m}if("center"===s.top||"center"===s.bottom){var y=(h-n.height)/2;y<0&&(y=20),s.top=y}if(s.right&&"center"!==s.right&&(s.right.indexOf("%")>-1?s.left=u-(n.width+u/parseFloat(s.right)):s.left=u-(n.width+parseFloat(s.right))),s.bottom&&"center"!==s.bottom&&(s.bottom.indexOf("%")>-1?s.top=h-(n.height+h/parseFloat(s.bottom)):s.top=h-(n.height+parseFloat(s.bottom))),""!==s.left&&null!=s.left||(o.data.ltPropOffset.left="center",s.left=(u-n.width)/2),""!==s.top&&null!=s.top||(o.data.ltPropOffset.top="center",s.top=(h-n.height)/2),o.getData("ltPropTransition").originElement)if(g=document.querySelector(o.getData("ltPropTransition").originElement)){var f=g.getBoundingClientRect();s.originElementPos={xDiff:f.left+f.width/2-(parseFloat(s.left)+n.width/2),yDiff:f.top+f.height/2-(parseFloat(s.top)+n.height/2)}}else Console.error("The originElement provided does not exist. Kindly Check!");o.fastdomfn7=$L.fastdom.mutate((function(){if(delete o.fastdomfn7,o.getData("first")&&LytePopup.bindTransitionEnd(o.actualModalDiv),"slideFromTop"==o.getData("ltPropTransition").animation){if(i.style.left=parseFloat(s.left)+"px",i.style.top=-1*n.height+"px",t)return void(i.style.transform="translate(0px,"+(parseInt(s.top)+n.height)+"px)");o.enableTransform(parseInt(s.top)+n.height,"y",e)}else if("slideFromBottom"==o.getData("ltPropTransition").animation){if(i.style.left=parseFloat(s.left)+"px",i.style.top=h+1+"px",t)return void(i.style.transform="translate(0px,"+-1*(h-parseInt(s.top)+1)+"px)");o.enableTransform(-1*(h-parseInt(s.top)+1),"y",e)}else if("slideFromLeft"==o.getData("ltPropTransition").animation){if(o.renderSidewise&&(a&&(a.style.left=o.renderProps.right+"px"),r&&(r.style.left=o.renderProps.right+"px")),i.style.top=parseFloat(s.top)+"px",i.style.left=-1*n.width+"px",t)return void(i.style.transform="translate("+(parseInt(s.left)+n.width)+"px,0px)");o.enableTransform(parseInt(s.left)+n.width,"x",e)}else if("slideFromRight"==o.getData("ltPropTransition").animation){if(o.renderSidewise){var l=o.renderProps.windowWidth-o.renderProps.left;a&&(a.style.right=l+"px"),r&&(r.style.right=l-5+"px")}if(i.style.top=parseFloat(s.top)+"px",i.style.left=u+1+"px",t)return void(i.style.transform="translate("+-1*(u-parseInt(s.left)+1)+"px,0px)");o.enableTransform(-1*(u-parseInt(s.left)+1),"x",e)}else if("fadeIn"==o.getData("ltPropTransition").animation){if(i.style.left=parseFloat(s.left)+"px",i.style.top=parseFloat(s.top)+"px",t)return void(i.style.transform="");o.$node.ltProp("showCopy",!0),i.style.opacity=1}else if("zoom"==o.getData("ltPropTransition").animation){o.$node.ltProp("showCopy",!0);var p="scale(0)";if(s.originElementPos&&(p="translateX( "+s.originElementPos.xDiff+"px) translateY( "+s.originElementPos.yDiff+"px) scale(0)"),i.style.left=parseFloat(s.left)+"px",i.style.top=parseFloat(s.top)+"px",i.style.transition="none",t)return i.style.transform=s.originElementPos?"translateX(0) translateY(0) scale(1)":"scale(1)",void setTimeout((function(){i.style.transition=""}),16);i.style.transform=p,i.style.opacity=1,setTimeout((function(){i.style.transition="",i.style.transitionDuration=(null!=e?e:o.$node.ltProp("transition").duration)+"s",s.originElementPos?i.style.transform="translateX(0) translateY(0) scale(1)":i.style.transform="scale(1)"}),50)}o.$node.ltProp("freeze")&&document.body.classList.add("bodyWrapper"),o.getData("first")&&(o.callOnShow(),o.setData("first",!1))}),o)}else{var g;if(o.setData("ltPropOffset",{left:"center",top:"center"}),s.left=(u-n.width)/2,s.top=(h-n.height)/2,o.$node.ltProp("scrollable")||(s.left<0&&(s.left=20),s.top<0&&(s.top=20)),o.getData("ltPropTransition").originElement)if(g=document.querySelector(o.getData("ltPropTransition").originElement)){f=g.getBoundingClientRect();s.originElementPos={xDiff:f.left+f.width/2-(s.left+n.width/2),yDiff:f.top+f.height/2-(s.top+n.height/2)}}else Console.error("The originElement provided does not exist. Kindly Check!");o.fastdomfn8=$L.fastdom.mutate((function(){if(delete o.fastdomfn8,o.getData("first")&&LytePopup.bindTransitionEnd(o.actualModalDiv),"slideFromTop"==o.getData("ltPropTransition").animation){if(i.style.left=parseFloat(s.left)+"px",i.style.top=-1*n.height+"px",t)return void(i.style.transform="translate(0px,"+(parseInt(s.top)+n.height)+"px)");o.enableTransform(parseInt(s.top)+n.height,"y",e)}else if("slideFromBottom"==o.getData("ltPropTransition").animation){if(i.style.left=parseFloat(s.left)+"px",i.style.top=h+1+"px",t)return void(i.style.transform="translate(0px,"+-1*(h-parseInt(s.top)+1)+"px)");o.enableTransform(-1*(h-parseInt(s.top)+1),"y",e)}else if("slideFromLeft"==o.getData("ltPropTransition").animation){if(o.renderSidewise&&(a&&(a.style.left=o.renderProps.right+"px"),r&&(r.style.left=o.renderProps.right+"px")),i.style.top=parseFloat(s.top)+"px",i.style.left=-1*n.width+"px",t)return void(i.style.transform="translate("+(parseInt(s.left)+n.width)+"px,0px)");o.enableTransform(parseInt(s.left)+n.width,"x",e)}else if("slideFromRight"==o.getData("ltPropTransition").animation){if(o.renderSidewise){var l=o.renderProps.windowWidth-o.renderProps.left;a&&(a.style.right=l+"px"),r&&(r.style.right=l-5+"px")}if(i.style.top=parseFloat(s.top)+"px",i.style.left=u+1+"px",t)return void(i.style.transform="translate("+-1*(u-parseInt(s.left)+1)+"px,0px)");o.enableTransform(-1*(u-parseInt(s.left)+1),"x",e)}else if("fadeIn"==o.getData("ltPropTransition").animation){if(i.style.left=parseFloat(s.left)+"px",i.style.top=parseFloat(s.top)+"px",t)return void(i.style.transform="");o.$node.ltProp("showCopy",!0),i.style.opacity=1}else if("zoom"==o.getData("ltPropTransition").animation){o.$node.ltProp("showCopy",!0);var p="scale(0)";if(s.originElementPos&&(p="translateX( "+s.originElementPos.xDiff+"px) translateY( "+s.originElementPos.yDiff+"px) scale(0)"),i.style.left=parseFloat(s.left)+"px",i.style.top=parseFloat(s.top)+"px",i.style.transition="none",t)return i.style.transform=s.originElementPos?"translateX(0) translateY(0) scale(1)":"scale(1)",void setTimeout((function(){i.style.transition=""}),16);i.style.transform=p,i.style.opacity=1,setTimeout((function(){i.style.transition="",i.style.transitionDuration=(null!=e?e:o.$node.ltProp("transition").duration)+"s",s.originElementPos?i.style.transform="translateX(0) translateY(0) scale(1)":i.style.transform="scale(1)"}),50)}o.$node.ltProp("freeze")&&document.body.classList.add("bodyWrapper"),o.getData("first")&&(o.callOnShow(),o.setData("first",!1))}),o)}}}),o)},calculateForSidewiseRender:function(){var e;if(LytePopup.components.length>1&&("LYTE-MODAL"===LytePopup.components[LytePopup.components.length-2].$node.tagName&&(e=LytePopup.components[LytePopup.components.length-2]),!this.getData("ltPropOverlapModal")&&e&&e.getData("ltPropAllowMultiple")&&-1!=["slideFromLeft","slideFromRight"].indexOf(this.getData("ltPropTransition").animation))){this.renderSidewise=!0;var t=e.actualModalDiv.getBoundingClientRect();this.renderProps={prevModal:e,left:Math.round(t.left),right:Math.round(t.right),width:Math.round(t.width)}}},closeModal:function(){var e=this.childComp.querySelector("lyte-modal-freeze");if(this.renderSidewise&&("slideFromRight"==this.getData("ltPropTransition").animation&&(e&&(e.style.right=""),this.actualModalDiv.parentElement.style.right=""),"slideFromLeft"==this.getData("ltPropTransition").animation&&(e&&(e.style.left=""),this.actualModalDiv.parentElement.style.left=""),delete this.renderSidewise,delete this.renderProps),_lyteUiUtils.getRTL()&&!this.getData("ltPropIgnoreInlineDirection")){"slideFromLeft"==this.getData("ltPropTransition").animation?this.getData("ltPropTransition").animation="slideFromRight":"slideFromRight"==this.getData("ltPropTransition").animation&&(this.getData("ltPropTransition").animation="slideFromLeft");var t=this.getData("ltPropOffset"),o={};for(key in t)"left"==key&&"center"!=t[key]?o.right=t[key]:"right"==key?o.left=t[key]:o[key]=t[key];this.setData("ltPropOffset",o)}"zoom"==this.getData("ltPropTransition").animation&&(this.actualModalDiv.style.opacity="0",this.actualModalDiv.style.transform=""),this.$node.ltProp("freeze")||this.childComp.querySelector(".modalWrapper").classList.remove("noFreeze"),this.$node.ltProp({showCopy:!1,show:!1}),this.$node.ltProp("freeze")||(this.actualModalDiv.style.position=""),this.$node.classList.remove("lyteModalOpened"),this.actualModalDiv&&(this.actualModalDiv.style.transform=""),this.getMethods("onClose")&&this.executeMethod("onClose",this),LytePopup.checkAndRemoveWrapper()},onBeforeCloseHandling:function(e){var t=!0,o=Math.max(document.documentElement.clientWidth,window.innerWidth||0),a=Math.max(document.documentElement.clientHeight,window.innerHeight||0);if(this.getMethods("onBeforeClose")&&(t=this.executeMethod("onBeforeClose",e,this)),void 0===t||t){if(this.actualModalDiv&&this.childComp){this.getData("ltPropFreeze")&&this.addedFreezeDetails&&(LytePopup.hideOrShowFreeze("close",this),delete this.addedFreezeDetails);var r=1e3*parseFloat(this.$node.ltProp("transition").duration),i=this;this.timeOutId=setTimeout((function(){delete i.timeOutId,i.closeModal()}),r);var s,l=this.actualModalDiv;this.getData("ltPropCloseDuration")?l.style.transitionDuration=this.getData("ltPropCloseDuration")/1e3+"s":l.style.transitionDuration=r/1e3+"s";var n,p="scale(0)";if($L.fastdom.measure((function(){if(s=l.getBoundingClientRect(),"zoom"==this.getData("ltPropTransition").animation&&this.getData("ltPropTransition").originElement){var e=document.querySelector(this.getData("ltPropTransition").originElement);if(e){var t=e.getBoundingClientRect(),o={top:s.top,right:s.right,bottom:s.bottom,left:s.left,width:l.offsetWidth,height:l.offsetHeight},a={xDiff:t.left+t.width/2-(o.left+o.width/2),yDiff:t.top+t.height/2-(o.top+o.height/2)};p="translateX( "+a.xDiff+"px) translateY( "+a.yDiff+"px) scale(0)"}else Console.error("The originElement provided does not exist. Kindly Check!")}}),this),$L.fastdom.mutate((function(){"slideFromTop"==this.getData("ltPropTransition").animation?(n=-(Math.ceil(s.height)+parseInt(l.style.top)+10)+"px",l.style.transform="translateY("+n+")"):"slideFromBottom"==this.getData("ltPropTransition").animation?(n=a-parseInt(l.style.top)+10+"px",l.style.transform="translateY("+n+")"):"slideFromLeft"==this.getData("ltPropTransition").animation?(n=-(Math.ceil(s.width)+parseInt(l.style.left)+10)+"px",l.style.transform="translateX("+n+")"):"slideFromRight"==this.getData("ltPropTransition").animation?(n=(this.renderProps&&this.renderProps.left||o)-parseInt(l.style.left)+10+"px",l.style.transform="translateX("+n+")"):"fadeIn"==this.getData("ltPropTransition").animation?l.style.opacity=0:"zoom"==this.getData("ltPropTransition").animation&&(l.style.transform=p),delete this.transform,this.$node.classList.contains("lyteModalOpened")||(l.style.transform="")}),this),$L.fastdom.mutate((function(){l=null})),l.classList.remove("lyteModalFromTop","lyteModalFromBottom","lyteModalFromLeft","lyteModalFromRight","lyteModalFadeIn","lyteZoom"),this.$node.ltProp("freeze")&&this.childComp.querySelector("lyte-modal-freeze")){var c=this.childComp.querySelector("lyte-modal-freeze");setTimeout(function(){c.style.opacity=0,c.style.visibility=""}.bind(this),300)}LytePopup.closePopup(this),this.setData("first",!0),this.setData("initializedPosition",!1),this.setData("calculateHW",!1)}this.$node.alignModal=null,this.$node.calculateOffset=null,this.$node.reflectTransitionChange=null}else this.setData("returnedFalse",!0),this.$node.ltProp("show",!0)},onBeforeShowHandling:function(){var e=!0;if(this.getMethods("onBeforeShow")&&(e=this.executeMethod("onBeforeShow",this)),void 0===e||e){this.setData("checkAria",this.getData("checkAria")+1),this.addDragHandler(),this.updateScrollHandling();var t=this.actualModalDiv;t.style.transitionDuration=this.$node.ltProp("transition").duration+"s";var o="lyteModalFrom",a=(this.actualModalDiv.style,this.actualModalDiv.getBoundingClientRect(),Math.max(document.documentElement.clientWidth,window.innerWidth||0));switch(this.$node.ltProp("transition").animation){case"slideFromTop":o+="Top";break;case"slideFromBottom":o+="Bottom";break;case"slideFromLeft":o+="Left";break;case"slideFromRight":o+="Right";break;case"fadeIn":o="lyteModalFadeIn";break;case"zoom":o="lyteZoom"}if(this.fastdomfn1=$L.fastdom.mutate((function(){delete this.fastdomfn1,this.actualModalDiv.classList.add(o),this.actualModalDiv.style.opacity="",t=null}),this),LytePopup.addPopup(this),this.calculateForSidewiseRender(),this.$node.ltProp("freeze")){var r=this.childComp.querySelector("lyte-modal-freeze");this.renderSidewise&&("slideFromRight"==this.getData("ltPropTransition").animation&&(r.style.right=a-this.renderProps.left+"px"),"slideFromLeft"==this.getData("ltPropTransition").animation&&(r.style.left=this.renderProps.right+"px"));var i=r.style;this.getData("ltPropDimmer")&&this.getData("ltPropDimmer").color&&(i.background=this.getData("ltPropDimmer").color),this.addedFreezeDetails||(i.opacity=this.getData("ltPropDimmer")&&this.getData("ltPropDimmer").opacity?this.getData("ltPropDimmer").opacity:"")}this.$node.alignModal=this.computeOffsetImpl.bind(this,0,!0),this.$node.calculateOffset=this.updateScrollHandling.bind(this),this.$node.reflectTransitionChange=this.reflectTransitionChange.bind(this)}else this.setData("returnedFalse",!0),this.$node.ltProp({showCopy:!1,show:!1})},reflectTransitionChange:function(){this.computeOffsetImpl(null,!0)},didDestroy:function(){this.$node.classList.remove("lyteModalOpened"),this.timeOutId&&(clearTimeout(this.timeOutId),delete this.timeOutId),this.beforeCloseId&&(clearTimeout(this.beforeCloseId),delete this.beforeCloseId),this.renderSidewise&&(delete this.renderSidewise,delete this.renderProps),this.childComp&&(this.clearFastdomBatch(),this.getData("ltPropFreeze")&&this.addedFreezeDetails&&(LytePopup.hideOrShowFreeze("close",this),delete this.addedFreezeDetails),LytePopup.closePopup(this),this.childComp.remove(),delete this.actualModalDiv,delete this.childComp,LytePopup.checkAndRemoveWrapper())},actions:{close:function(){this.$node.ltProp("show",!1)}},methods:{beforeWormholeAppend:function(e){this.childComp&&delete this.childComp,this.actualModalDiv&&delete this.actualModalDiv,this.childComp=e,this.actualModalDiv=this.childComp.querySelector(".lyteModal")}}}),"complete"===document.readyState||"interactive"===document.readyState?addModalEvent():document.addEventListener("DOMContentLoaded",(function(e){addModalEvent(e)})),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(e),a=1;a<arguments.length;a++){var r=arguments[a];if(null!=r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(o[i]=r[i])}return o},writable:!0,configurable:!0}),Lyte.Component.register("lyte-calendar",{_template:'<template tag-name="lyte-calendar"> <div class="{{containerClass}}" ontouchstart="{{action(\'record\',event)}}" ontouchend="{{action(\'decide\',event)}}"> <div class="lyteCalendarView"> <div> <template is="if" value="{{navYield}}"><template case="true"> <lyte-yield yield-name="navigator"></lyte-yield> </template><template case="false"> <div class="lyteCalendarNavigator"> <template is="if" value="{{ifNotEquals(ltPropHeaderType,&quot;dropdown&quot;)}}"><template case="true"> <template is="if" value="{{ltPropYear}}"> <template case="true"><span class="lyteCalNav lyteCalyearNavLft" onclick="{{action(\'previous\',\'Y\',event)}}"></span></template> </template> </template></template> <span class="lyteCalNav lyteCaldLft {{lyteUiDisableCalendarNav(viewDate,\'previous\')}}" onclick="{{action(\'previous\',\'M\',event)}}"></span> <span class="lyteCalsCalMon"> <template is="if" value="{{expHandlers(expHandlers(ltPropHeaderType,\'===\',\'dropdown\'),\'||\',expHandlers(ltPropHeaderType,\'===\',\'picklist\'))}}"><template case="true"> <lyte-dropdown lt-prop-freeze="false" lt-prop="{{stringify(ltPropDropdown)}}" on-show="{{method(\'setClass\')}}" class="lyteCalMonthDD" lt-prop-tabindex="1" on-option-selected="{{method(\'optionSelected\',\'M\')}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box> <lyte-drop-body> <template is="for" items="{{monthNames}}" item="item" index="index"> <lyte-drop-item data-value="{{item}}">{{item}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> <template is="if" value="{{expHandlers(ltPropHeaderType,\'===\',\'dropdown\')}}"><template case="true"> <lyte-dropdown lt-prop-freeze="false" lt-prop="{{stringify(ltPropDropdown)}}" on-show="{{method(\'setClass\')}}" class="lyteCalYearDD" lt-prop-tabindex="2" on-option-selected="{{method(\'optionSelected\',\'Y\')}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box> <lyte-drop-body> <template is="for" items="{{years}}" item="item" index="index"> <lyte-drop-item data-value="{{item}}">{{item}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </template><template case="false"> <lyte-picklist lt-prop-options="{{years}}" lt-prop-dropdown="{&quot;freeze&quot;: false, &quot;callout&quot;: true, &quot;tabindex&quot;: 2}" class="lyteCalYearDD" on-option-select="{{method(\'optionSelected\',\'Y\')}}" on-show="{{method(\'setClass\')}}"> </lyte-picklist> </template></template> </template><template case="false"><template is="if" value="{{expHandlers(ltPropHeaderType,\'===\',\'drilldown\')}}"><template case="true"> <template is="if" value="{{expHandlers(viewType,\'===\',\'dateView\')}}"><template case="true"> <span class="lyteDrillCalHeaderButton" onclick="{{action(\'changeToMonthView\',event)}}"> <span class="lyteCalsCalMonth">{{lyteUiGetMonthOrYear(monthHeader,"M")}}</span> <span class="lyteCalsCalYear">{{lyteUiGetMonthOrYear(monthHeader,"Y")}}</span> </span> </template><template case="false"><template is="if" value="{{expHandlers(viewType,\'===\',\'monthView\')}}"><template case="true"> <span class="lyteDrillCalHeaderButton" onclick="{{action(\'changeToDecadeView\',event)}}"> <span class="lyteCalsCalYear">{{currentYear}}</span> </span> </template><template case="false"><template is="if" value="{{expHandlers(viewType,\'===\',\'decadeView\')}}"><template case="true"> <span class="lyteDrillCalHeaderButton lyteDrillCalYearListHeader"> {{decadeStart}} - {{decadeEnd}} </span> </template></template></template></template></template></template> </template><template case="false"> <span class="lyteCalsCalMonth">{{lyteUiGetMonthOrYear(monthHeader,"M")}}</span> <span class="lyteCalsCalYear">{{lyteUiGetMonthOrYear(monthHeader,"Y")}}</span> </template></template></template></template> </span> <span class="lyteCalNav lyteCaldRgt {{lyteUiDisableCalendarNav(viewDate,\'next\')}}" onclick="{{action(\'next\',\'M\',event)}}"></span> <template is="if" value="{{ifNotEquals(ltPropHeaderType,&quot;dropdown&quot;)}}"><template case="true"> <template is="if" value="{{ltPropYear}}"> <template case="true"><span class="lyteCalNav lyteCalyearNavRgt" onclick="{{action(\'next\',\'Y\',event)}}"></span></template> </template> </template></template> </div> </template></template> </div> <div class="lyteCalTableContainer"> <template is="if" value="{{ltPropBodyYield}}"><template case="true"> <lyte-yield yield-name="body"></lyte-yield> </template><template case="false"> <template is="if" value="{{expHandlers(expHandlers(ltPropHeaderType,\'!==\',\'drilldown\'),\'||\',expHandlers(expHandlers(ltPropHeaderType,\'===\',\'drilldown\'),\'&amp;&amp;\',expHandlers(viewType,\'===\',\'dateView\')))}}"><template case="true"> <div class="lyteCalTableRowHeader"> <template is="for" items="{{daysOfWeek}}" item="day" indexval="idod"> <div class="lyteCalTableCellHeader">{{lyteUiI18n(day)}}</div> </template> </div> </template></template> <div class="lyteCalTableRowGroup"> <template is="if" value="{{expHandlers(ltPropHeaderType,\'!==\',\'drilldown\')}}"><template case="true"> <template is="for" items="{{matrix}}" item="vector" indexval="rowid"> <template is="if" value="{{lyteUiCheckEmpty(vector)}}"> <template case="false"> <div class="lyteCalTableRow"> <template is="for" items="{{vector}}" item="date" indexval="cellid"> <template is="if" value="{{lyteUiCheckInRange(ltPropMinDate,ltPropMaxDate,date.val,ltPropFormat)}}"> <template case="true"> <template is="if" value="{{date.emptyBlock}}"> <template case="true"> <div class="lyteCalEmpty"></div> </template> <template case="false"> <div data-date="{{date.val}}" onclick="{{action(\'dateSelected\',event)}}" class="{{date.clsname}}"><span class="lyteCalDateSpan">{{date.date}}</span></div> </template> </template> </template> <template case="false"> <template is="if" value="{{date.emptyBlock}}"> <template case="true"> <div class="lyteCalEmpty"></div> </template> <template case="false"> <div data-date="{{date.val}}" class="{{date.clsname}}"><span class="lyteCalDateSpan">{{date.date}}</span></div> </template> </template> </template> </template> </template> </div> </template> </template> </template> </template><template case="false"> <template is="if" value="{{expHandlers(viewType,\'===\',\'dateView\')}}"><template case="true"> <template is="for" items="{{matrix}}" item="vector" indexval="rowid"> <template is="if" value="{{lyteUiCheckEmpty(vector)}}"> <template case="false"> <div class="lyteCalTableRow"> <template is="for" items="{{vector}}" item="date" indexval="cellid"> <template is="if" value="{{lyteUiCheckInRange(ltPropMinDate,ltPropMaxDate,date.val,ltPropFormat)}}"> <template case="true"> <template is="if" value="{{date.emptyBlock}}"> <template case="true"> <div class="lyteCalEmpty"></div> </template> <template case="false"> <div data-date="{{date.val}}" onclick="{{action(\'dateSelected\',event)}}" class="{{date.clsname}}"><span class="lyteCalDateSpan">{{date.date}}</span></div> </template> </template> </template> <template case="false"> <template is="if" value="{{date.emptyBlock}}"> <template case="true"> <div class="lyteCalEmpty"></div> </template> <template case="false"> <div data-date="{{date.val}}" class="{{date.clsname}}"><span class="lyteCalDateSpan">{{date.date}}</span></div> </template> </template> </template> </template> </template> </div> </template> </template> </template> </template><template case="false"><template is="if" value="{{expHandlers(viewType,\'===\',\'monthView\')}}"><template case="true"> <template is="for" items="{{monthViewData}}" item="row" index="rowIndex"> <div class="lyteCalTableRow"> <template is="for" items="{{row}}" item="column" index="columnIndex"> <div onclick="{{action(\'monthSelected\',event)}}" class="{{column[\'class\']}}" data-date="{{column[\'systemValue\']}}"> {{column[\'displayValue\']}} </div> </template> </div> </template> </template><template case="false"><template is="if" value="{{expHandlers(viewType,\'===\',\'decadeView\')}}"><template case="true"> <template is="for" items="{{decadeViewData}}" item="row" index="rowIndex"> <div class="lyteCalTableRow"> <template is="for" items="{{row}}" item="column" index="columnIndex"> <template is="if" value="{{expHandlers(column.emptyBlock,\'!\')}}"><template case="true"> <div onclick="{{action(\'yearSelected\',event)}}" class="lyteCalTableCell {{column.class}}" data-date="{{column.year}}"> {{column.year}} </div> </template><template case="false"> <div class="lyteCalEmpty"> </div> </template></template> </template> </div> </template> </template></template></template></template></template></template> </template></template> </div> </template></template> </div> <div> <div class="lyteCalBtns"> <template is="if" value="{{expHandlers(showToday,\'&amp;&amp;\',ltPropShowToday)}}"><template case="true"> <p class="lyteCalCurrentDate"><a onclick="{{action(\'today\',event)}}">{{lyteUiI18n(\'today\')}}</a></p> </template></template> <template is="if" value="{{ltPropYield}}"> <template case="true"> <lyte-yield yield-name="footer"></lyte-yield> </template> </template> </div> </div> </div> </div> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1,1]},{type:"if",position:[1,1,1,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"attr",position:[1,5,1]},{type:"if",position:[1,5,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"text",position:[1,3,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]},{type:"text",position:[1,3]}]}},default:{}}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"text",position:[1,0]},{type:"text",position:[3,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,7]},{type:"attr",position:[1,9]},{type:"if",position:[1,9],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[1,1,3,1]},{type:"if",position:[1,1,3,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"text",position:[1,0]}]}]}},default:{}},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{false:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0,0]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0,0]}]}},default:{}}]}},default:{}}]}]}},default:{}}]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{false:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0,0]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0,0]}]}},default:{}}]}},default:{}}]}]}},default:{}}]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]}]}]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]}]},false:{dynamicNodes:[]}},default:{}}]}]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[1,1,5,1,1]},{type:"if",position:[1,1,5,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,0]},{type:"text",position:[1,0,0]}]}},default:{}},{type:"attr",position:[1,1,5,1,3]},{type:"if",position:[1,1,5,1,3],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]}},default:{}}],_observedAttributes:["ltPropStartDate","ltPropEndDate","ltPropCurrentDate","ltPropFormat","ltPropYear","ltPropMonthHeaderFormat","daysOfWeek","monthSystemValues","monthNames","shortHands","todayName","viewDate","changeData","ltPropYield","ltPropMinDate","ltPropMaxDate","ltPropStartWeekDay","navYield","selectDate","currentDatechanged","ltPropFillRows","ltPropNumberOfRows","callFrmDidcnct","monthDD","yearDD","years","ltPropHeaderType","ltPropDropdown","cords","start","prev","tt","showToday","monthViewTableArray","ltPropBodyYield","ltPropShowToday","ltPropI18n"],data:function(){return{ltPropStartDate:Lyte.attr("string",{default:""}),ltPropEndDate:Lyte.attr("string",{default:""}),ltPropCurrentDate:Lyte.attr("string",{default:""}),ltPropFormat:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-calendar","format","MM/DD/YYYY")}),ltPropYear:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-calendar","year",!0)}),ltPropMonthHeaderFormat:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-calendar","monthHeaderFormat","MMMM YYYY")}),daysOfWeek:Lyte.attr("array",{default:[]}),monthSystemValues:Lyte.attr("array",{default:["January","February","March","April","May","June","July","August","September","October","November","December"]}),monthNames:Lyte.attr("array",{default:["January","February","March","April","May","June","July","August","September","October","November","December"]}),shortHands:Lyte.attr("array",{default:["Jan","Feb","Mar","Apr","short.may","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),todayName:Lyte.attr("string",{default:"Today"}),viewDate:Lyte.attr("object",{default:{}}),changeData:Lyte.attr("number",{default:0}),ltPropYield:Lyte.attr("boolean",{default:!1}),ltPropMinDate:Lyte.attr("string",{default:""}),ltPropMaxDate:Lyte.attr("string",{default:""}),ltPropStartWeekDay:Lyte.attr("number",{default:_lyteUiUtils.resolveDefaultValue("lyte-calendar","startWeekDay",1)}),navYield:Lyte.attr("boolean",{default:!1}),selectDate:Lyte.attr("boolean",{default:!0}),currentDatechanged:Lyte.attr("number",{default:0}),ltPropFillRows:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-calendar","fillRows",!0)}),ltPropNumberOfRows:Lyte.attr("number",{default:_lyteUiUtils.resolveDefaultValue("lyte-calendar","numberOfRows",6)}),callFrmDidcnct:Lyte.attr("boolean",{default:!1}),monthDD:Lyte.attr("object"),yearDD:Lyte.attr("object"),years:Lyte.attr("array",{default:[1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2e3,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025,2026,2027,2028,2029,2030,2031,2032,2033,2034,2035,2036,2037,2038,2039,2040,2041,2042,2043,2044,2045,2046,2047,2048,2049,2050,2051,2052,2053,2054,2055,2056,2057,2058,2059,2060,2061,2062,2063,2064,2065,2066,2067,2068,2069,2070,2071,2072,2073,2074,2075,2076,2077,2078,2079,2080,2081,2082,2083,2084,2085,2086,2087,2088,2089,2090,2091,2092,2093,2094,2095,2096,2097,2098,2099,2100]}),ltPropHeaderType:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-calendar","headerType","default")}),ltPropDropdown:Lyte.attr("object",{default:_lyteUiUtils.resolveDefaultValue("lyte-calendar","dropdown",{callout:!0})}),cords:Lyte.attr("object",{default:{}}),start:Lyte.attr("number"),prev:Lyte.attr("boolean"),tt:Lyte.attr("boolean",{default:!0}),showToday:Lyte.attr("boolean",{default:!0}),monthViewTableArray:Lyte.attr("array",{default:[]}),ltPropBodyYield:Lyte.attr("boolean",{default:!1}),ltPropShowToday:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-calendar","showToday",!0)}),ltPropI18n:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-calendar","I18n",!1)})}},toDate:function(){return this.isHavingTimezone?new Date($L.moment().format("MM/DD/YYYY")):new Date},moment:function(e,t,o){var a=this.isHavingTimezone;return a?(o?o.ignore_timezone=a:o={ignore_timezone:a},$L.moment(e,t,o)):t?$L.moment(e,t):$L.moment(e)},changeBodyContainerClass:function(){var e=this.$node.querySelector(".lyteCalTableContainer"),t=this.getData("viewType");"dateView"===t?(e.classList.remove("lyteDrillCalMonthView"),e.classList.remove("lyteDrillCalYearView")):"monthView"===t?(e.classList.add("lyteDrillCalMonthView"),e.classList.remove("lyteDrillCalYearView")):"decadeView"===t&&(e.classList.remove("lyteDrillCalMonthView"),e.classList.add("lyteDrillCalYearView"))}.observes("viewType"),changeDaysOfWeek:function(){var e,t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],o=this.getData("ltPropStartWeekDay"),a=[];for(e=0;e<7;e++)a.push(t[(e+o)%7]);this.setData("daysOfWeek",a)},isYYFormat:function(){var e=this.getData("ltPropFormat");return/\byy\b/gi.test(e)},outsideBoundary:function(e){var t=e.getFullYear()-this.toDate().getFullYear(),o=this.isMomentSupported?$L.moment():{uL:19,lL:80};return t>o.uL||(t<-o.lL||void 0)},didDestroy:function(){delete this.$node.revertToToday},setMonthAndYearDropdown:function(){if(!this.getData("navYield")&&this.isDropdownHeader()&&this.getData("monthDD")&&this.getData("yearDD")){var e,t=this.getData("monthHeader").split(" "),o=this.getData("ltPropMonthHeaderFormat"),a=/MMMM YYYY/gi,r=/MMM YYYY/gi,i=[];if("callFrmDidcnct"==arguments[0].item){a.test(o)?e=this.getData("monthNames"):r.test(o)&&(e=this.getData("shortHands"));for(var s=0;s<e.length;s++)i[s]=_lyteUiUtils.i18n(e[s]);this.setData("monthNames",i)}this.getData("monthDD").component.setData("ltPropSelected",t[0]),this.getData("yearDD").component.setData("ltPropSelected",t[1])}}.observes("monthHeader","callFrmDidcnct"),startWeekDayObserver:function(){this.changeDaysOfWeek()}.observes("ltPropStartWeekDay"),monthHeaderObserver:function(){this.buildDateViewHeader()}.observes("monthNames.[]"),getMonthHeader:function(){var e,t=this.getData("ltPropMonthHeaderFormat"),o="";return/MMMM YYYY/gi.test(t)?(e=this.getData("monthNames"),o=_lyteUiUtils.i18n(e[this.getData("viewDate").getMonth()])+" "+this.getData("viewDate").getFullYear()):/MMM YYYY/gi.test(t)&&(e=this.getData("shortHands"),o=_lyteUiUtils.i18n(e[this.getData("viewDate").getMonth()])+" "+this.getData("viewDate").getFullYear()),o},revert:function(e){var t=new Date(this.getData("viewDate").getTime()),o=this.toDate();o.setDate(1);var a=new Date(o.getTime());this.setData("viewDate",o),this.setAndBuildView("dateView",e),this.setData("showToday",!1),!this.getMethods("onNavigate")||t.getMonth()===a.getMonth()&&t.getFullYear()===a.getFullYear()||this.executeMethod("onNavigate",e,this.getDateFromFormat(t,this.getData("ltPropFormat")),this.getDateFromFormat(a,this.getData("ltPropFormat")),this)},getDateFromFormat:function(e,t){return this.isMomentSupported?this.getDateStringFromMoment(e,t):this.getDateStringManually(e,t)},getDateStringFromMoment:function(e,t){return t=this.getRelevantFormat(t),this.moment(e).format(t)},resolveConflicts:function(e){var t=/(\bd\b|\bdd\b|\bddd\b|\bdddd\b)/.exec(e),o=(t||{}).index,a=(t||[])[0].length||0;return isNaN(o)?e.toUpperCase():e.substring(0,o+a)+(e.substring(o+a)||"").toUpperCase()},isConflictingFormat:function(e){return(e.match(/(\bd\b|\bdd\b|\bddd\b|\bdddd\b)/gi)||[]).length>1},getRelevantFormat:function(e){return this.isConflictingFormat(e)?this.resolveConflicts(e):e.toUpperCase()},getDateStringManually:function(e,t){var o,a=e.getDate(),r=e.getFullYear(),i=e.getMonth()+1;return t=t.toUpperCase(),i<10&&(i="0"+i),a<10&&(a="0"+a),/(MMMM|DD|YYYY).+(MMMM|DD|YYYY).+(YYYY|MMMM|DD)/gi.test(t)?(o=["January","February","March","April","May","June","July","August","September","October","November","December"],t=(t=(t=t.replace("MMMM",o[i-1])).replace("DD",a)).replace("YYYY",r)):/(MMM|DD|YYYY).+(MMM|DD|YYYY).+(YYYY|MMM|DD)/gi.test(t)?(o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],t=(t=(t=t.replace("MMM",o[i-1])).replace("DD",a)).replace("YYYY",r)):(/(YYYY).+(MM).+(DD)/gi.test(t)||/(MM).+(DD).+(YYYY)/gi.test(t)||/(DD).+(MM).+(YYYY)/gi.test(t))&&(t=(t=(t=t.replace("MM",i)).replace("DD",a)).replace("YYYY",r)),t},isLeapYear:function(e){return e%4==0&&e%100!=0||e%400==0},getNumber:function(e,t){return this.isLeapYear.call(this,t)&&1==e?29:[31,28,31,30,31,30,31,31,30,31,30,31][e]},showtoday:function(){var e=this.toDate();e.getMonth()!=this.getData("viewDate").getMonth()||e.getYear()!=this.getData("viewDate").getYear()?this.setData("showToday",!0):this.setData("showToday",!1)},reset:function(e){e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)},checkDate:function(e){var t,o,a=this.getData("ltPropMinDate")||"",r=this.getData("ltPropMaxDate")||"";if(this.reset(e),""===a&&""===r)return!0;if(""!==a&&""===r){if(t=this.stringToDate(a,this.getData("ltPropFormat")),this.reset(t),e>=t)return!0}else if(""!==a&&""!==r){if(t=this.stringToDate(a,this.getData("ltPropFormat")),this.reset(t),o=this.stringToDate(r,this.getData("ltPropFormat")),this.reset(o),e>=t&&e<=o)return!0}else if(o=this.stringToDate(r,this.getData("ltPropFormat")),this.reset(o),e<=o)return!0;return!1},numberOfRowsChange:function(){var e=this.getData("ltPropNumberOfRows");try{if(e<5)throw"Calendar failed to render. The number of rows should be greater than 4."}catch(e){return void console.error(e)}this.setDatesFunction()}.observes("ltPropNumberOfRows"),setDates:function(){this.setDatesFunction()}.observes("ltPropStartDate","ltPropEndDate","changeData","ltPropMinDate","ltPropMaxDate","ltPropFormat","ltPropStartWeekDay"),getNumberOfFirstRowDates:function(e){var t=this.getData("ltPropStartWeekDay");return 0==e?0===t?7:t:e<t?t-e:7-(e-t)},getNumberToSubtract:function(e){var t=this.getData("ltPropStartWeekDay");return 0==e?0==t?0:7-t:e<t?7-(t-e):e-t},getFirstDay:function(e,t){var o;return(o=t-(o=e-7*Math.floor(e/7)-1))<0&&(o=7-o),o},getRemainingDays:function(e,t){var o=e-t;return o-=28},inc:function(e,t){return e>0&&6==t?7:t},setDatesFunction:function(){var e=this.getData("ltPropNumberOfRows"),t=this.getData("ltPropFillRows"),o=(this.getData("ltPropFormat"),!1),a=[],r=this.getData("viewDate"),i=r.getDay(),s=r.getDate(),l=this.getFirstDay(s,i),n=r.getMonth(),p=r.getFullYear(),c=this.getNumber(n,p),d=this.getNumberOfFirstRowDates(l),u=this.getRemainingDays(c,d);e=this.inc(u,e);var h=new Date(n+1+"/1/"+p),m=this.getNumberToSubtract(l);h.setDate(h.getDate()-m);for(var y=this.toDate(),f=0;f<e&&!o;f++){a.push([]);for(var g=0;g<7;g++)if(t||n===h.getMonth())if(t&&this.isYYFormat()&&this.outsideBoundary(h))a[f].push({emptyBlock:!0}),h.setDate(h.getDate()+1),0!=f&&(o=!0);else{var v="lyteCalCdate",x=h.getMonth(),P=new Date(this.getData("viewDate").getTime()).getMonth(),b=h.getDate(),D=this.getData("ltPropCurrentDate")?this.stringToDate(this.getData("ltPropCurrentDate"),this.getData("ltPropFormat")):"nodate",L=h.getYear(),C=this.checkDate(h),_=""!==(this.getData("ltPropMinDate")||"")||""!==(this.getData("ltPropMaxDate")||"");P!==x?(v+=" lyteCalDiffMonth",_?C||(v+=" lyteCalDisabled"):v+=" lyteCalGray"):_&&!C&&(v+=" lyteCalDisabled"),"nodate"!==D&&"Invalid Date"!==D&&x==D.getMonth()&&D.getDate()==b&&D.getYear()==L&&this.getData("selectDate")&&(v+=" lyteCalSel"),y.getMonth()===x&&y.getDate()===b&&y.getYear()===L&&this.getData("selectDate")&&(v+=" lyteCalToday"),0!=h.getDay()&&6!=h.getDay()||(v+=" lyteCalWeekend"),v+=" lyteCalTableCell";var S={};S.date=h.getDate(),S.clsname=v,S.val=this.getDateFromFormat.call(this,h,this.getData("ltPropFormat")),a[f].push(S),h.setDate(h.getDate()+1)}else a[f].push({emptyBlock:!0}),h.setDate(h.getDate()+1),0!=f&&(o=!0)}this.setData("matrix",a)},executeViewDateChanges:function(){this.getMethods("onViewdateChange")&&this.executeMethod("onViewdateChange",this,this.getData("viewDate"))}.observes("viewDate"),getProperMonth:function(e){var t;return(t={jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12}[e=e.toLowerCase()]||{january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12}[e])||0===t?t-1:parseFloat(e)-1},isProperDate:function(e,t,o){return o<=this.getNumber(t,e)},getDateObjFromString:function(e,t){try{var o,a,r=e.match(/([\da-z]+)/gi),i=(t=t.toUpperCase()).match(/([a-z]+)/gi),s=this.toDate(),l=0,n=["Y","M","D"];if(s.setDate(1),3!==r.length)return"Invalid Date";for(;l<i.length;){var p=this.getOrderIndex(i,n[l]);if(0==l)s.setFullYear(o=r[p]);else if(1==l){if((a=this.getProperMonth(r[p]))<0||a>11)return"Invalid Date";s.setMonth(a)}else if(2==l){if(!this.isProperDate(o,a,r[p]))return"Invalid Date";s.setDate(r[p])}if("Invalid Date"===s.toString())return s.toString();l++}return s}catch(e){return"Invalid Date"}},getDateObjFromMoment:function(e,t){var o;if(t=this.getRelevantFormat(t),!e)return"Invalid Date";try{o=this.moment(e,t).getDObj()}catch(e){o="Invalid Date"}return"[object Date]"===Object.prototype.toString.call(o)&&isNaN(o.getTime())&&(o="Invalid Date"),o||"Invalid Date"},stringToDate:function(e,t){return e=this.convertToEnglish(e),this.isMomentSupported?this.getDateObjFromMoment(e,t):this.getDateObjFromString(e,t)},convertToEnglish:function(e){var t=this.getData("ltPropI18n"),o=this.getData("ltPropFormat");return t?this.moment(e,o,{i18n:!0}).format(o):e},getEnglishShorthand:function(e){for(var t=this.getShortHands(),o=-1,a=0,r=this.getData("shortHands"),i=0;i<t.length;i++)~e.indexOf(t[i])&&t[i].length>a&&(o=i,a=t[i].length);return-1!==o&&(e=e.replace(t[o],this.getProperShortHand(r[o]))),e},getShortHands:function(){for(var e=this.getData("shortHands"),t=[],o=0;o<e.length;o++)t.push(_lyteUiUtils.i18n(e[o]));return t},getProperShortHand:function(e){return"short.may"===e?"May":e},getEnglishStandard:function(e){for(var t=this.getStandardMonths(),o=this.getData("monthNames"),a=-1,r=0,i=0;i<t.length;i++)~e.indexOf(t[i])&&t[i].length>r&&(a=i,r=t[i].length);return-1!==a&&(e=e.replace(t[a],o[a])),e},getStandardMonths:function(){for(var e=this.getData("monthNames"),t=[],o=0;o<e.length;o++)t.push(_lyteUiUtils.i18n(e[o]));return t},getOrderIndex:function(e,t){for(var o=0;o<e.length;o++)if(e[o].charAt(0)===t)return o;return-1},buildYears:function(){var e,t=this.buildMinAndMaxYear(),o=t.maxYear,a=[];for(e=t.minYear;e<=o;e++)a.push(e.toString());this.setData("years",a)},buildMinAndMaxYear:function(){var e=this.toDate(),t=this.isYYFormat(),o=e.getFullYear(),a=this.isMomentSupported?$L.moment():{uL:19,lL:80},r=a.uL,i=a.lL;return{maxYear:t?o+r:2100,minYear:t?o-i:1900}},setAndBuildView:function(e,t,o){var a=this.getData("viewType"),r=e;this.setData("viewType",e),"monthView"===e?this.buildMonthView():"decadeView"===e?this.buildDecadeView():"dateView"===e&&this.buildDateView(),o||a===r||this.getMethods("onViewChange")&&this.executeMethod("onViewChange",t,e,this)},buildDateView:function(){this.buildDateViewHeader(),this.buildDateViewContent(),this.showtoday()},buildDateViewHeader:function(){this.setData("monthHeader",this.getMonthHeader())},buildDateViewContent:function(){this.setDatesFunction()},buildMonthView:function(){this.buildMonthViewHeader(),this.buildMonthViewContent()},buildMonthViewHeader:function(){var e=this.getData("viewDate").getFullYear();this.setData("currentYear",e)},buildMonthViewContent:function(){for(var e,t,o=this.getData("monthSystemValues"),a=this.getData("shortHands"),r=0,i=[];r<3;r++)for(i.push([]),e=0;e<4;e++)t=4*r+e,i[r].push({displayValue:_lyteUiUtils.i18n(a[t]),systemValue:o[t],class:this.getProperClassForMonthView(t)});this.setData("monthViewData",i)},getProperClassForMonthView:function(e){var t=this.getData("viewDate").getFullYear(),o=this.getCurrentMonth(),a="lyteCalTableCell";return a+=this.getCurrentYear()===t&&e===o?" lyteDrillCalCurrentMonth":""},getCurrentYear:function(){return this.toDate().getFullYear()},getCurrentMonth:function(){return this.toDate().getMonth()},buildDecadeView:function(){this.buildDecadeViewHeader(),this.buildDecadeViewContent()},buildDecadeViewHeader:function(){var e=this.getData("viewDate").getFullYear(),t=e-e%10,o=t+9;this.setData("decadeStart",t),this.setData("decadeEnd",o)},buildDecadeViewContent:function(){var e,t,o,a=this.getData("viewDate").getFullYear(),r=a-a%10,i=this.buildMinAndMaxYear(),s=this.isYYFormat(),l=i.minYear,n=i.maxYear,p=[];for(e=0;e<3;e++)for(p.push([]),t=0;t<4;t++)o=r+4*e+t-1,s?p[e].push(o>n||o<l?this.emptyCell():this.currentYearCell(o,r)):p[e].push(this.currentYearCell(o,r));this.setData("decadeViewData",p)},emptyCell:function(){return{emptyBlock:!0}},currentYearCell:function(e,t){var o=t+9,a=[],r=this.getCurrentYear();return(e<t||e>o)&&a.push("lyteCalOtherDecadeCell"),r===e&&a.push("lyteDrillCalCurrentYear"),{year:e,emptyBlock:!1,class:a.join(" ")}},buildNavigationalUI:function(){this.getData("ltPropHeaderType");this.isDropdownHeader()&&this.buildYears()},initFn:function(){var e=this;this.addContainerClass(),this.checkForMoment(),this.buildViewDate(),this.changeDaysOfWeek(),this.initializeCalendar(),this.$node.revertToToday=function(){e.revert()},this.$node.revertToSelected=function(){e.revertToSelected()},this.$node.getDateArray=function(t){return e.setData("viewDate",t),e.buildDateViewContent(),e.getData("matrix")}}.observes("currentDatechanged").on("init"),revertToSelected:function(){var e=new Date(this.getData("viewDate").getTime()),t=this.getData("ltPropCurrentDate"),o=this.getData("ltPropFormat"),a=t?this.stringToDate(t,o):this.toDate(),r=this.toDate(),i={};if("Invalid Date"!==a){a.setDate(1);var s=new Date(a.getTime());this.setData("viewDate",a),this.setAndBuildView("dateView",i),s.getMonth()===r.getMonth()&&s.getFullYear()===r.getFullYear()?this.setData("showToday",!1):this.setData("showToday",!0),!this.getMethods("onNavigate")||e.getMonth()===s.getMonth()&&e.getFullYear()===s.getFullYear()||this.executeMethod("onNavigate",i,this.getDateFromFormat(e,this.getData("ltPropFormat")),this.getDateFromFormat(s,this.getData("ltPropFormat")),this)}},addContainerClass:function(){var e=["lyteCalendarPopup"];"drilldown"===this.getData("ltPropHeaderType")&&e.push("lyteDrillDownCalendar"),this.setData("containerClass",e.join(" "))},checkForMoment:function(){this.isMomentSupported=!(!$L||!$L.moment),this.isHavingTimezone=this.isMomentSupported&&!!$L.moment()._timezone},buildViewDate:function(){var e=this.getData("ltPropCurrentDate")?this.stringToDate(this.getData("ltPropCurrentDate"),this.getData("ltPropFormat")):this.toDate();"Invalid Date"===e&&(e=this.toDate()),e.setDate(1),this.setData("viewDate",e)},initializeCalendar:function(){this.buildNavigationalUI(),this.setAndBuildView("dateView",void 0,!0)},didConnect:function(){!this.getData("navYield")&&this.isDropdownHeader()&&(this.setData("monthDD",this.getMonthDropdown()),this.setData("yearDD",this.getYearDropdown()),this.setData("callFrmDidcnct",!0))},isDropdownHeader:function(){var e=this.getData("ltPropHeaderType");return"picklist"===e||"dropdown"===e},getYearDropdown:function(){var e=this.getData("ltPropHeaderType"),t=this.$node.querySelector(".lyteCalYearDD");return"picklist"===e&&(t=t.querySelector("lyte-dropdown")),t},getMonthDropdown:function(){return this.$node.querySelector(".lyteCalMonthDD")},didDestroy:function(){delete this.$node.revertToToday},removeClass:function(){var e=this.$node.querySelector(".lyteCalSel");e&&e.classList.remove("lyteCalSel")},changeViewDate:function(e){var t=this.getData("ltPropCurrentDate"),o=this.getData("ltPropHeaderType");if(!this.getData("preventObs"))if(t)if("Invalid Date"!==this.stringToDate(t,this.getData("ltPropFormat"))){e=this.getData("ltPropCurrentDate");var a=this.stringToDate(e,this.getData("ltPropFormat"));a.setDate(1),("dropdown"!==o||this.isInRange(a))&&(this.setData("viewDate",a),this.buildDateView())}else this.removeClass();else this.removeClass()}.observes("ltPropCurrentDate"),isInRange:function(e){var t=e.getFullYear();return t>=1900&&t<=2100},monthHeaderFormatObserver:function(){this.buildDateViewHeader()}.observes("ltPropMonthHeaderFormat"),changeCurrentDate:function(e,t,o){var a,r,i,s,l,n=new Date(this.getData("viewDate").getTime()),p=this.getData("ltPropFormat"),c=this.isYYFormat();p=this.getRelevantFormat(p),"Y"===e?(a=this.getData("viewDate"),l=this.getDateFromFormat(a,p),this.isMomentSupported?r=this.moment(l,p).add(t,"fullYear",c).getDObj():(a.setYear(a.getFullYear()+t),r=new Date(a.getTime())),this.setData("viewDate",r),this.buildDateView()):"M"===e&&(a=this.getData("viewDate"),l=this.getDateFromFormat(a,p),this.isMomentSupported?r=this.moment(l,p).add(t,"month",c).getDObj():(a.setMonth(a.getMonth()+t),r=new Date(a.getTime())),this.setData("viewDate",r),this.buildDateView()),i=this.getDateFromFormat(n,this.getData("ltPropFormat")),s=this.getDateFromFormat(r,this.getData("ltPropFormat")),this.getMethods("onNavigate")&&this.executeMethod("onNavigate",o,i,s,this)},changeCurrentYear:function(e,t){var o,a=this.getData("viewDate"),r=this.isMomentSupported,i=a.getFullYear(),s=this.getData("ltPropFormat"),l=this.isYYFormat(),n=this.getDateFromFormat(a,s),p=n;r?(s=this.getRelevantFormat(s),a=this.moment(n,s).add(e,"fullYear",l).getDObj()):a.setFullYear(i+e),o=this.getDateFromFormat(a,s),this.setData("viewDate",a),this.getMethods("onNavigate")&&this.executeMethod("onNavigate",t,p,o,this)},changeCurrentDecade:function(e,t){var o,a=this.getData("viewDate"),r=this.getData("ltPropFormat"),i=this.isMomentSupported,s=this.getDateFromFormat(a,r),l=this.isYYFormat(),n=a.getFullYear(),p=s;r=this.getRelevantFormat(r),i?a=this.moment(s,r).add(10*e,"fullYear",l).getDObj():a.setFullYear(n+10*e),o=this.getDateFromFormat(a,r),this.setData("viewDate",a),this.getMethods("onNavigate")&&this.executeMethod("onNavigate",t,p,o,this)},getProper:function(e){for(;e&&!e.classList.contains("lyteCalTableCell");)e=e.parentElement;return e},convertToLang:function(e){var t=this.getData("ltPropI18n"),o=this.getData("ltPropFormat");return t?this.moment(e,o).i18N(o):e},actions:{changeToMonthView:function(e){this.setAndBuildView("monthView",e),this.setData("showToday",!1)},changeToDecadeView:function(e){this.setAndBuildView("decadeView",e),this.setData("showToday",!1)},record:function(e){if(this.setData("prev",!1),e.touches.length>1)this.setData("prev",!0);else{var t=e.targetTouches[0],o={x:t.clientX,y:t.clientY},a=(new Date).getTime();this.setData("cords",o),this.setData("start",a)}},decide:function(e){if(!this.getData("prev")){var t=this.getData("cords"),o=t.x,a=t.y,r=e.changedTouches[0],i=o-r.clientX,s=a-r.clientY,l=this.$node.querySelector(".lyteCalendarPopup").getBoundingClientRect(),n=.2*l.width,p=.15*l.height,c=this.getData("start"),d=(new Date).getTime()-c;p>Math.abs(s)&&n<Math.abs(i)&&d<1e3&&(i<0?this.changeCurrentDate("M",-1,e):i>0&&this.changeCurrentDate("M",1,e))}},previous:function(e,t){var o=this.getData("viewType");"dateView"===o?this.changeCurrentDate(e,-1,t):"monthView"===o?(this.changeCurrentYear(-1,t),this.buildMonthView()):"decadeView"===o&&(this.changeCurrentDecade(-1,t),this.buildDecadeView())},next:function(e,t){var o=this.getData("viewType");"dateView"===o?this.changeCurrentDate(e,1,t):"monthView"===o?(this.changeCurrentYear(1,t),this.buildMonthView()):"decadeView"===o&&(this.changeCurrentDecade(1,t),this.buildDecadeView())},yearSelected:function(e){var t=this.getData("viewDate"),o=this.getProper(e.target).getAttribute("data-date");t.setYear(o),this.setData("viewDate",t),this.setAndBuildView("monthView",e)},monthSelected:function(e){var t=this.getData("viewDate").getFullYear(),o=this.getProper(e.target).getAttribute("data-date");o=this.getData("monthSystemValues").indexOf(o)+1,this.setData("viewDate",new Date(o+"/1/"+t)),this.setAndBuildView("dateView",e)},dateSelected:function(e){var t,o=this.getProper(e.target);0===e.button&&(0!==(t=this.$node.getElementsByClassName("lyteCalSel")).length&&t[0].classList.remove("lyteCalSel"),this.setData("preventObs",!0),this.setData("ltPropCurrentDate",this.convertToLang(o.getAttribute("data-date"))),this.setData("preventObs",!1),o.classList.add("lyteCalSel"),this.getMethods("onDateSelected")&&this.executeMethod("onDateSelected",e,o.getAttribute("data-date"),this))},today:function(e){this.revert(e)}},methods:{optionSelected:function(e,t,o,a){if("M"==e){var r=this.getData("monthNames").indexOf(o);this.changeCurrentDate(e,r-this.getData("viewDate").getMonth(),t)}else"Y"==e&&this.changeCurrentDate(e,parseInt(o)-this.getData("viewDate").getFullYear(),t)},setClass:function(e,t){var o=t.childComp,a=_lyteUiUtils.getRTL(),r=a?"right":"left",i=o.querySelector(".lyteArrow");o.classList.add("lyteCalendarDropdown"),i.style[r]="20%",a&&(i.style.left="auto")}}}),Lyte.Component.register("lyte-navigator",{_template:'<template tag-name="lyte-navigator"> <template is="if" value="{{expHandlers(ltPropType,\'==\',&quot;default&quot;)}}"><template case="true"> <div class="lyteNavigator" onclick="{{action(\'clickEvent\',event)}}"> <template is="if" value="{{expHandlers(ltPropYield,\'==\',false)}}"><template case="true"> <div class="lyteNavigator lyteDoubleBack lyteIconDoubleBack"></div> <div class="lyteNavigator lyteSingleBack lyteIconSingleBack"></div> <template is="if" value="{{expHandlers(ltPropShowOnlyIcon,\'!\')}}"><template case="true"> <div class="lyteNavigatorMidPoint">{{startRecord}} <span class="lyteNavigatorText">{{ltPropMiddleText}}</span> {{endRecord}}</div> </template></template> <div class="lyteNavigator lyteSingleFront lyteIconSingleFront"></div> <div class="lyteNavigator lyteDoubleFront lyteIconDoubleFront"></div> </template><template case="false"> <lyte-yield yield-name="navigatorYield" start-record="{{startRecord}}" end-record="{{endRecord}}"></lyte-yield> </template></template> </div> </template></template> <template is="if" value="{{expHandlers(ltPropType,\'==\',&quot;simple&quot;)}}"><template case="true"> <div class="lyteNavigator" onclick="{{action(\'clickEvent\',event)}}"> <template is="if" value="{{expHandlers(ltPropYield,\'==\',false)}}"><template case="true"> <div class="lytepagination"> <div class="lyteNavArrow lyteDoubleBack hover"></div> <div class="lyteNavArrow lyteSingleBack hover"> </div> <template is="if" value="{{expHandlers(ltPropShowOnlyIcon,\'!\')}}"><template case="true"> <div class="lytepage"> <template is="for" items="{{paginationRange}}" item="page" indexval="pageno"> <div data-value="{{page}}" class="lytesimple">{{unescape(page)}}</div> </template> </div> </template></template> <div class="lyteNavArrow lyteSingleFront hover"> </div> <div class="lyteNavArrow lyteDoubleFront hover"></div> </div> </template><template case="false"> <lyte-yield yield-name="navigatorYield" pagination-range="{{paginationRange}}"></lyte-yield> </template></template> </div> </template></template> <template is="if" value="{{expHandlers(ltPropType,\'==\',&quot;border&quot;)}}"><template case="true"> <div class="lyteNavigator" onclick="{{action(\'clickEvent\',event)}}"> <template is="if" value="{{expHandlers(ltPropYield,\'==\',false)}}"><template case="true"> <div class="lytepagination"> <div class="lyteNavArrowBorder lyteDoubleBack hover lyteborder"></div> <div class="lyteNavArrowBorder lyteSingleBack hover lyteborder"> </div> <template is="if" value="{{expHandlers(ltPropShowOnlyIcon,\'!\')}}"><template case="true"> <div class="lytepage"> <template is="for" items="{{paginationRange}}" item="page" indexval="pageno"> <div data-value="{{page}}" class="lyteborder">{{unescape(page)}}</div> </template> </div> </template></template> <div class="lyteNavArrowBorder lyteSingleFront hover lyteborder"> </div> <div class="lyteNavArrowBorder lyteDoubleFront hover lyteborder"></div> </div> </template><template case="false"> <lyte-yield yield-name="navigatorYield" pagination-range="{{paginationRange}}"></lyte-yield> </template></template> </div> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"text",position:[1,2,0]},{type:"text",position:[1,4]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]}},default:{}}]}},default:{}}],_observedAttributes:["ltPropPerpage","ltPropValue","ltPropRecords","ltPropMoreRecords","ltPropMiddleText","ltPropType","paginationRange","ltPropSelected","ltPropShowOnlyIcon","ltPropShowText","ltPropYield","ltPropAdjustStart"],init:function(){this.getMethods("beforeRender")&&this.executeMethod("beforeRender",this.$node)},didConnect:function(){if(this.buttonDisable.call(this),this.checkButton.call(this),"default"!=this.getData("ltPropType")){var e=this.$node.querySelectorAll("lyte-nav-arrow");this.getData("ltPropShowText")&&this.$node.querySelector(".lytepagination").classList.add("textNavLink"),4==e.length&&(this.$node.querySelector(".lyteDoubleBack").appendChild(e[0]),this.$node.querySelector(".lyteSingleBack").appendChild(e[1]),this.$node.querySelector(".lyteSingleFront").appendChild(e[2]),this.$node.querySelector(".lyteDoubleFront").appendChild(e[3])),2==e.length&&(this.$node.querySelector(".lyteDoubleBack").style.display="none",this.$node.querySelector(".lyteSingleBack").appendChild(e[0]),this.$node.querySelector(".lyteSingleFront").appendChild(e[1]),this.$node.querySelector(".lyteDoubleFront").style.display="none")}this.getMethods("afterRender")&&this.executeMethod("afterRender",this.$node),$L.fastdom.measure(function(){var e="rtl"==window.getComputedStyle(this.$node).getPropertyValue("direction");$L.fastdom.mutate(function(){e&&this.$node.classList.add("lyteRTL")}.bind(this))}.bind(this))},data:function(){return{ltPropPerpage:Lyte.attr("number",{default:_lyteUiUtils.resolveDefaultValue("lyte-navigator","perPage",10)}),ltPropValue:Lyte.attr("number",{default:0}),ltPropRecords:Lyte.attr("number",{default:void 0}),ltPropMoreRecords:Lyte.attr("boolean",{default:!1}),ltPropMiddleText:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-navigator","middleText","to")}),ltPropType:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-navigator","type","default")}),paginationRange:Lyte.attr("array",{default:void 0}),ltPropSelected:Lyte.attr("number",{default:0}),ltPropShowOnlyIcon:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-navigator","showOnlyIcon",!1)}),ltPropShowText:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-navigator","showText",!1)}),ltPropYield:Lyte.attr("boolean",{default:!1}),ltPropAdjustStart:Lyte.attr("boolean",{default:!1})}},buttonDisable:function(){if(!this.data.ltPropYield){var e=this.$node.querySelector(".lyteSingleFront").style,t=this.$node.querySelector(".lyteSingleBack").style,o=this.$node.querySelector(".lyteDoubleBack").style,a=this.$node.querySelector(".lyteDoubleFront").style;e&&(e.display=this.getMethods("onNext")?"":"none"),t&&(t.display=this.getMethods("onPrevious")?"":"none"),o&&(o.display=this.getMethods("onHome")?"":"none"),a&&(a.display=this.getMethods("onEnd")?"":"none")}},activeAdd:function(){if("default"!=this.getData("ltPropType")&&!this.getData("ltPropShowOnlyIcon")){var e=this.$node.querySelector('[data-value="'+this.getData("ltPropSelected")+'"]');null!=e&&e.classList.add("lyteActiveAdd")}},onForward:function(e){var t=this.getData("ltPropValue"),o=this.getData("ltPropPerpage"),a=this.getData("ltPropRecords"),r=(t+=o)>a?a:t;this.getMethods("onNext")&&this.executeMethod("onNext",r,this.$node,e)},onBackward:function(e){var t=parseInt(this.getData("ltPropValue")),o=(t-=parseInt(this.getData("ltPropPerpage")))<0?0:t;this.getMethods("onPrevious")&&this.executeMethod("onPrevious",o,this.$node,e)},goFirst:function(e){if(this.setData("ltPropValue",0,this.$node,e),this.getMethods("onHome")){this.executeMethod("onHome",this.getData("ltPropValue"),this.$node,e);var t=this.$node.querySelector(".lyteSingleFront");t&&t.classList.remove("lyteDisabled")}"default"!=this.getData("ltPropType")&&(this.getData("ltPropSelected")>=1&&this.setData("ltPropSelected",1),this.activeAdd())},goLast:function(e){this.getData("ltPropValue");var t=this.getData("ltPropPerpage"),o=this.getData("ltPropRecords"),a=Math.floor(o/t)*t>=o?o-t:Math.floor(o/t)*t;this.getMethods("onEnd")&&this.executeMethod("onEnd",a,this.$node,e)},onSelect:function(e){this.getData("ltPropValue");var t=this.getData("ltPropPerpage"),o=this.getData("ltPropRecords");var a=parseInt(e.target.getAttribute("data-value"))*t-t>=o?o-t:parseInt(e.target.getAttribute("data-value"))*t-t;this.getMethods("onSelect")&&this.executeMethod("onSelect",a,this.$node,e)},pagination:function(){var e,t,o=this.getData("ltPropSelected"),a=this.getData("ltPropRecords"),r=o-1,i=o+1+1,s=[],l=[];if((t=Math.ceil(a/this.getData("ltPropPerpage")))>5){1==o&&o!=t&&(i+=1),o==t&&1!=o&&(r-=1);for(var n=1;n<t;n++)1==n||n==t||n>=r&&n<i?s.push(n):n>1&&n<r?n=r-1:n>=i&&n<t&&(n=t-1);s.push(t);for(n=0;n<s.length;n++){var p=s[n];e&&p-e!=1&&l.push("..."),l.push(p),e=p}}else for(n=1;n<=t;n++)l.push(n);this.setData("paginationRange",l),this.activeAdd()},paginationObs:function(){this.pagination()}.observes("ltPropSelected","ltPropPerpage","ltPropRecords"),checkButtonObs:function(){this.checkButton.call(this)}.observes("ltPropPerpage","ltPropValue","ltPropRecords","ltPropMoreRecords"),checkButton:function(){var e=this.getData("ltPropValue"),t=this.getData("ltPropPerpage"),o=this.getData("ltPropRecords"),a=this.$node.querySelector(".lyteSingleFront"),r=this.$node.querySelector(".lyteSingleBack"),i=this.$node.querySelector(".lyteDoubleBack"),s=this.$node.querySelector(".lyteDoubleFront");$L.fastdom.mutate(function(){if(i&&e<=0?i.classList.add("lyteDisabled"):i&&i.classList.remove("lyteDisabled"),r&&e<=0?r.classList.add("lyteDisabled"):r&&r.classList.remove("lyteDisabled"),a&&e+t>=o&&!this.getData("ltPropMoreRecords")?a.classList.add("lyteDisabled"):a&&a.classList.remove("lyteDisabled"),s&&e+t>=o?s.classList.add("lyteDisabled"):s&&s.classList.remove("lyteDisabled"),"default"==this.getData("ltPropType")||this.getMethods("onSelect")||this.getData("ltPropYield")||this.$node.querySelector(".lytepage").classList.add("lyteDisabled"),this._settingStartEndValue(),"default"!=this.getData("ltPropType")){this.setData("ltPropSelected",Math.ceil(this.getData("startRecord")/this.getData("ltPropPerpage")));for(var l=this.$node.querySelectorAll('[data-value="..."]'),n=0;n<l.length;n++)l[n].classList.add("lyteDisabled"),l[n].classList.add("dots3")}}.bind(this))},settineStartEndValue:function(){this._settingStartEndValue()}.on("init"),_settingStartEndValue:function(){var e=this.getData("ltPropValue"),t=this.getData("ltPropPerpage"),o=this.getData("ltPropRecords"),a=this.getData("startRecord"),r=this.getData("endRecord"),i=e+1>o?o:e+1,s=e+t>o?o:e+t;this.getData("ltPropAdjustStart")&&"default"==this.getData("ltPropType")&&a&&r&&r-a!=t-1&&r>t&&(s=r?r<t?t:r:t,i=r?r-t+1<1?1:r-t+1:1,this.getMethods("onPerpageChange")&&this.executeMethod("onPerpageChange",i-1,this.$node)),a!=i&&this.setData("startRecord",i),r!=s&&this.setData("endRecord",s)},actions:{clickEvent:function(e){var t=e.target;if(t.getAttribute("data-value"))"..."!=t.getAttribute("data-value")&&this.onSelect(e);else{for(;t&&(!t.className||-1==t.className.indexOf("lyteNavigator")&&-1==t.className.indexOf("lyteDoubleFront")&&-1==t.className.indexOf("lyteSingleFront")&&-1==t.className.indexOf("lyteDoubleBack")&&-1==t.className.indexOf("lyteSingleBack"));)t=t.parentNode;t&&-1!=t.className.indexOf("lyteDoubleFront")?this.goLast(e):t&&-1!=t.className.indexOf("lyteSingleFront")?this.onForward(e):t&&-1!=t.className.indexOf("lyteDoubleBack")?this.goFirst(e):t&&-1!=t.className.indexOf("lyteSingleBack")?this.onBackward(e):e.preventDefault()}}}}),Lyte.Component.register("lyte-checkbox",{_template:'<template tag-name="lyte-checkbox" onkeydown="{{action(\'preventInputClick\',event)}}" onkeyup="{{action(\'preventInputClick\',event)}}"> <template is="switch" value="{{ltPropType}}"> <template case="default"> <label class="lyteCheckbox lyteDefault" onmouseup="{{action(\'mup\',event)}}" onclick="{{action(\'prevent\',event)}}"> <input type="checkbox" id="{{ltPropId}}" name="{{ltPropName}}" value="{{ltPropValue}}" checked="{{ltPropChecked}}" tabindex="{{ltPropTabindex}}" disabled="{{ltPropDisabled}}" class="" readonly="{{ltPropReadonly}}" onclick="{{action(\'checkBoxClicked\',event)}}"> <span class="{{ltPropFinalClass}}"> <span class="{{ltPropFinalLabelClass}}"> <template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield yield-name="yield"></lyte-yield> </template><template case="false"> {{ltPropLabel}} </template></template> </span> </span> </label> </template> <template case="primary"> <label class="lyteCheckbox lytePrimary" onmouseup="{{action(\'mup\',event)}}" onclick="{{action(\'prevent\',event)}}"> <input type="checkbox" id="{{ltPropId}}" name="{{ltPropName}}" value="{{ltPropValue}}" checked="{{ltPropChecked}}" tabindex="{{ltPropTabindex}}" disabled="{{ltPropDisabled}}" class="" readonly="{{ltPropReadonly}}" onclick="{{action(\'checkBoxClicked\',event)}}"> <span class="{{ltPropFinalClass}}"> <span class="{{ltPropFinalLabelClass}}"> <template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield yield-name="yield"></lyte-yield> </template><template case="false"> {{ltPropLabel}} </template></template> </span> </span> </label> </template> <template case="switch"> <label class="" onmouseup="{{action(\'mup\',event)}}" onclick="{{action(\'prevent\',event)}}"> <input type="checkbox" id="{{ltPropId}}" name="{{ltPropName}}" value="{{ltPropValue}}" checked="{{ltPropChecked}}" tabindex="{{ltPropTabindex}}" disabled="{{ltPropDisabled}}" class="lyteHide on-off-sw" readonly="{{ltPropReadonly}}" onclick="{{action(\'checkBoxClicked\',event)}}"> <span class="{{ltPropFinalClass}}"> <span class="on-btn"></span> </span> <span class="{{ltPropFinalLabelClass}}"> <template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield yield-name="yield"></lyte-yield> </template><template case="false"> {{ltPropLabel}} </template></template> </span> </label> </template> <template case="slider"> <label class="lyteCheckSliderLabel" onmouseup="{{action(\'mup\',event)}}" onclick="{{action(\'prevent\',event)}}"> <input type="checkbox" id="{{ltPropId}}" name="{{ltPropName}}" value="{{ltPropValue}}" checked="{{ltPropChecked}}" tabindex="{{ltPropTabindex}}" disabled="{{ltPropDisabled}}" class="lyteHide" readonly="{{ltPropReadonly}}" onclick="{{action(\'checkBoxClicked\',event)}}"> <span class="{{ltPropFinalClass}}"> <span class="{{ltPropFinalLabelClass}}"> <template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield yield-name="yield"></lyte-yield> </template><template case="false"> {{ltPropLabel}} </template></template> </span> </span> </label> </template> </template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{default:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,3]},{type:"attr",position:[1,3,1]},{type:"attr",position:[1,3,1,1]},{type:"if",position:[1,3,1,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]},primary:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,3]},{type:"attr",position:[1,3,1]},{type:"attr",position:[1,3,1,1]},{type:"if",position:[1,3,1,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]},switch:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,3]},{type:"attr",position:[1,5]},{type:"attr",position:[1,5,1]},{type:"if",position:[1,5,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]},slider:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,3]},{type:"attr",position:[1,3,1]},{type:"attr",position:[1,3,1,1]},{type:"if",position:[1,3,1,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]}},default:{}}],_templateAttributes:{type:"attr",position:[]},_observedAttributes:["ltPropType","ltPropId","ltPropDisabled","ltPropChecked","ltPropLabel","ltPropName","ltPropValue","ltPropReadonly","ltPropFireOnInit","ltPropClass","ltPropLabelClass","ltPropTabindex","lyteUnbound","ltPropYield","ltPropAriaCheckbox","ltPropFocus"],data:function(){return{ltPropType:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-checkbox","type","default")}),ltPropId:Lyte.attr("string",{default:void 0}),ltPropDisabled:Lyte.attr("boolean",{default:!1}),ltPropChecked:Lyte.attr("boolean",{default:!1}),ltPropLabel:Lyte.attr("string",{default:void 0}),ltPropName:Lyte.attr("string",{default:void 0}),ltPropValue:Lyte.attr("string",{default:void 0}),ltPropReadonly:Lyte.attr("boolean",{default:!1}),ltPropFireOnInit:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-checkbox","fireOnInit",!1)}),ltPropClass:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-checkbox","class","")}),ltPropLabelClass:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-checkbox","labelClass","")}),ltPropTabindex:Lyte.attr("number",{default:0}),lyteUnbound:Lyte.attr("boolean",{default:!1}),ltPropYield:Lyte.attr("boolean",{default:!1}),ltPropAriaCheckbox:Lyte.attr("object",{default:_lyteUiUtils.resolveDefaultValue("lyte-checkbox","ariaCheckbox",{})}),ltPropFocus:Lyte.attr("boolean",{default:!1})}},ariaObserver:function(e){var t=e.oldValue,o=e.newValue;this.addAriaValues(t,o)}.observes("ltPropAriaCheckbox"),didDestroy:function(){delete this.$node.focus,delete this.$node.blur,delete this.$node.click},reduceOpacity:function(){this.getData("ltPropDisabled")?this.$node.classList.add("lyteCheckDisabled"):this.$node.classList.remove("lyteCheckDisabled")},disabledChange:function(){this.reduceOpacity()}.observes("ltPropDisabled"),setDefaults:function(){var e=this.getData("ltPropType"),t=this.getData("ltPropClass"),o=this.getData("ltPropLabelClass");"switch"===e?this.setData("ltPropFinalClass",t||"lyteCheckSwitch"):"default"===e?this.setData("ltPropFinalClass",t||"lyteCheckBoxDefault"):"primary"===e?this.setData("ltPropFinalClass",t||"lyteCheckBoxPrimary"):"slider"===e&&this.setData("ltPropFinalClass",t||"lyteCheckSlider"),"slider"===e?this.setData("ltPropFinalLabelClass",o||"lyteCheckSliderText"):this.setData("ltPropFinalLabelClass",o||"")},typeObs:function(){this.setDefaults()}.observes("ltPropType","ltPropClass","ltPropLabelClass").on("init"),didDestroy:function(){delete this.$node.focus,delete this.$node.blur,delete this.$node.click},focusInput:function(){var e=this.$node.querySelector("input");document.activeElement!==e&&e.focus()},didConnect:function(){var e=this,t=this.getData("ltPropAriaCheckbox");this.reduceOpacity(),this.$node.click=function(){var t=new Event("click",{bubbles:!0,cancelable:!0}),o=e.$node,a=o.ltProp("checked"),r=o.ltProp("disabled"),i=o.ltProp("readonly"),s=(e.getData("lyteUnbound"),e.$node.querySelector("input"));r||i||(e.setData("eventCache",t),e.clickFn=!0,a?o.ltProp("checked",!1):o.ltProp("checked",!0),e.$node._fR&&(s.checked=o.ltProp("checked"),s.checked?s.setAttribute("checked",""):s.removeAttribute("checked"),e.fireCallBacksFunction({},!1)),e.clickFn=!1,o.dispatchEvent(t))},this.$node.focus=function(){var t=e.$node,o=t.querySelector("input"),a=t.ltProp("disabled"),r=t.ltProp("readonly");a||r||o.focus()},this.$node.blur=function(){var t=e.$node,o=t.querySelector("input"),a=t.ltProp("disabled"),r=t.ltProp("readonly");a||r||o.blur()},this.fireCallBacksFunction.call(this,void 0,!0),this.addAriaValues({},t)},addAriaValues:function(e,t){var o=this.getCheckboxWidget();_lyteUiUtils.setAttribute(o,t,e)},getCheckboxWidget:function(){return this.$node.querySelector("input")},fireCallbacks:function(e,t){if(!this.getData("preventRefire")&&!this.getData("preventObs"))return this.getData("handleLbind")?(this.setData("preventObs",!0),this.setData("ltPropChecked",!this.getData("ltPropChecked")),this.setData("preventObs",!1),void this.setData("handleLbind",!1)):void this.fireCallBacksFunction.call(this,e,t)}.observes("ltPropChecked"),focusCheckbox:function(){this.getData("ltPropFocus")&&this.$node.focus(),this.data.ltPropFocus=!1}.observes("ltPropFocus").on("didConnect"),fireCallBacksFunction:function(e,t){var o=this.getData("ltPropChecked"),a=this.getData("ltPropFireOnInit"),r=this.getData("eventCache");if(this.$node.checked=o||!1,o&&t){if(!a)return;var i=this.$node.querySelector("input");this.getMethods("onBeforeChecked")&&this.executeMethod("onBeforeChecked",i,this,r,"script"),this.getMethods("onChecked")&&this.executeMethod("onChecked",i,this,r,"script"),this.getMethods("onChanged")&&this.executeMethod("onChanged",i,this,r,"script")}else if(this.$node.checked&&!t){i=this.$node.querySelector("input");if(!this.clicked){if(this.setData("preventRefire",!0),this.getMethods("onBeforeChecked")){if(this.data.ltPropChecked=!1,i.checked=!1,!1===this.executeMethod("onBeforeChecked",i,this,r,this.eventType()))return this.isCheckedLbound()?this.setData("handleLbind",!0):(this.data.ltPropChecked=!0,this.setData("ltPropChecked",!1)),void this.setData("preventRefire",!1);this.data.ltPropChecked=!0,i.checked=!0}this.setData("preventRefire",!1)}this.getMethods("onChecked")&&this.executeMethod("onChecked",i,this,r,this.eventType()),this.toggleClass("lyteCboxChecked"),this.getMethods("onChanged")&&this.executeMethod("onChanged",i,this,r,this.eventType())}else if(!this.$node.checked&&!t){i=this.$node.querySelector("input");if(!this.clicked){if(this.setData("preventRefire",!0),this.getMethods("onBeforeUnchecked")){if(this.data.ltPropChecked=!0,i.checked=!0,!1===this.executeMethod("onBeforeUnchecked",i,this,r,this.eventType()))return this.isCheckedLbound()?this.setData("handleLbind",!0):(this.data.ltPropChecked=!1,this.setData("ltPropChecked",!0)),void this.setData("preventRefire",!1);this.data.ltPropChecked=!1,i.checked=!1}this.setData("preventRefire",!1)}this.getMethods("onUnchecked")&&this.executeMethod("onUnchecked",i,this,r,this.eventType()),this.toggleClass("lyteCboxUnchecked"),this.getMethods("onChanged")&&this.executeMethod("onChanged",i,this,r,this.eventType())}},toggleClass:function(e){var t="lyteCboxChecked"===e?"lyteCboxUnchecked":"lyteCboxChecked";this.$node.classList.remove(t),this.$node.classList.add(e)},eventType:function(){var e=this.clicked||this.clickFn,t=this.eveType;return e?t||"click":"script"},isCheckedLbound:function(){return!!this.$node._attributeDetails&&(!!this.$node._attributeDetails["lt-prop-checked"]&&!!this.$node._attributeDetails["lt-prop-checked"].isLbind)},isNodeDestroyed:function(){return!this.$node},fireClick:function(e){var t,o,a=this.getData("sendEvent"),r=this.getData("ltPropDisabled");this.isTimeoutInitiated=!1,this.isNodeDestroyed()||a||r||((t=this.$node.querySelector("input")).checked=!t.checked,(o=new Event("click")).shiftKey=!0,t.dispatchEvent(o))},actions:{preventInputClick:function(e){32===e.keyCode&&e.preventDefault()},mup:function(e){var t;if(this.setData("prevented",!1),this.setData("sendEvent",!1),!this.getData("ltPropDisabled")){var o=this.$node.querySelector("input");t=o.checked,this.getMethods("onBeforeChecked")&&!t?0!=this.executeMethod("onBeforeChecked",o,this,e,"click")||(this.setData("prevented",!0),e.preventDefault()):this.getMethods("onBeforeUnchecked")&&t&&(0!=this.executeMethod("onBeforeUnchecked",o,this,e,"click")||(this.setData("prevented",!0),e.preventDefault()))}},prevent:function(e){var t=this.getData("sendEvent"),o=!!~window.navigator.userAgent.indexOf("Firefox"),a=this.isTimeoutInitiated;t||e.stopPropagation(),o&&!a&&(this.isTimeoutInitiated=!0,setTimeout(this.fireClick.bind(this,e),0))},checkBoxClicked:function(e){var t;return this.setData("sendEvent",!0),this.setData("eventCache",e),this.clicked=!0,this.focusInput(),this.getData("prevented")?(t=this.$node.querySelector("input"),this.setData("prevented",!1),this.setData("preventRefire",!0),t.checked?t.checked=!1:t.checked=!0,this.setData("preventRefire",!1),this.clicked=!1,void this.setData("eventCache",{})):this.getData("ltPropDisabled")?(this.clicked=!1,e.preventDefault(),void this.setData("eventCache",{})):(e.target.checked?this.setData("ltPropChecked",!0):this.setData("ltPropChecked",!1),this.$node._fR&&(this.getData("ltPropChecked")?this.$node.querySelector("input").setAttribute("checked",""):this.$node.querySelector("input").removeAttribute("checked"),this.fireCallBacksFunction({},!1)),this.setData("eventCache",{}),void(this.clicked=!1))}}}),document.addEventListener("keyup",(function(e){var t;if(32===e.keyCode){if("INPUT"!==(t=document.activeElement).tagName)return;for(;"LYTE-CHECKBOX"!==t.tagName&&"HTML"!==t.tagName;)t=t.parentElement;"LYTE-CHECKBOX"===t.tagName&&(t.component.eveType="key",t.click(),t.component.eveType="")}}),!0),Lyte.Component.register("lyte-table",{_template:'<template tag-name="lyte-table"> <div class="lyteTableScroll"> <template is="if" value="{{expHandlers(ltPropYield,\'==\',false)}}"><template case="true"> <lyte-table-structure id="{{ltPropId}}" class="{{ltPropClass}}"> <template is="if" value="{{ltPropHeaderLabelKey}}"><template case="true"> <lyte-colgroup> <template is="for" items="{{ltPropHeader}}" item="list" index="indexVal"> <lyte-col></lyte-col> </template> </lyte-colgroup> <lyte-thead> <lyte-tr> <template is="if" value="{{ltPropHeader.length}}"><template case="true"><template is="for" items="{{ltPropHeader}}" item="list" index="indexVal"> <lyte-th id="{{list.id}}" class="{{list.class}}" index="{{indexVal}}" resize="{{list.resize}}" fixed="{{list.fixed}}" icon="{{list.icon}}"> {{unescape(list[ltPropHeaderLabelKey])}} </lyte-th> </template></template></template> </lyte-tr> </lyte-thead> </template></template> <lyte-tbody> <template is="if" value="{{ltPropInfiniteScroll}}"><template case="true"> <template is="for" items="{{ltPropData}}" item="list" index="indexVal"> <lyte-tr id="{{list.body.id}}" class="{{list.body.class}}"> <template is="for" items="{{ltPropHeader}}" item="header"> <lyte-td> <div style="height: {{ltPropCellHeight}}"> {{unescape(lyteUiGetValue(list.body,header[ltPropBodyLabelKey]))}} </div> </lyte-td> </template> </lyte-tr> </template> </template><template case="false"> <template is="for" items="{{ltPropContent}}" item="list" index="indexVal"> <lyte-tr id="{{list.id}}" class="{{list.class}}"> <template is="for" items="{{ltPropHeader}}" item="header"> <lyte-td>{{unescape(lyteUiGetValue(list,header[ltPropBodyLabelKey]))}}</lyte-td> </template> </lyte-tr> </template> </template></template> </lyte-tbody> <template is="if" value="{{expHandlers(ltPropResize.vertical,\'||\',ltPropResize.horizontal)}}"><template case="true"> <lyte-table-resize onmousedown="{{action(\'tableResize\',event,this)}}"></lyte-table-resize> <template is="if" value="{{ltPropResize.vertical}}"><template case="true"> <lyte-table-vertical-resize onmousedown="{{action(\'tableResize\',event,this)}}"></lyte-table-vertical-resize> </template></template><template is="if" value="{{ltPropResize.horizontal}}"><template case="true"> <lyte-table-horizontal-resize onmousedown="{{action(\'tableResize\',event,this)}}"></lyte-table-horizontal-resize> </template></template></template></template> </lyte-table-structure> </template><template case="false"><template is="if" value="{{ltPropInfiniteScroll}}"><template case="true"> <lyte-yield yield-name="yield" lt-prop-data="{{ltPropData}}"></lyte-yield> </template><template case="false"> <lyte-yield yield-name="yield"></lyte-yield> </template></template></template></template> </div> </template>',_dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1,1]},{type:"if",position:[3,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"for",position:[0],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]}]}},default:{}},{type:"componentDynamic",position:[3,1]},{type:"componentDynamic",position:[3]}]}},default:{}},{type:"attr",position:[1,3,1]},{type:"if",position:[1,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["'height: '","ltPropCellHeight"]}}}},{type:"text",position:[1,1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}]}},default:{}},{type:"componentDynamic",position:[1,3]},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[4]},{type:"if",position:[4],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"insertYield",position:[1]}]}},default:{}}]}},default:{}}],_observedAttributes:["ltPropContent","ltPropHeader","ltPropId","ltPropClass","ltPropBorder","ltPropHeaderLabelKey","ltPropBodyLabelKey","ltPropWidth","ltPropHeight","ltPropResize","ltPropFixedColumnClass","ltPropYield","ltPropScroll","ltPropColumnSortable","ltPropScrollbarOption","ltPropDualResize","ltPropData","ltPropInfiniteScroll","ltPropCellHeight","ltPropContentLength","ltPropPreventScrollbar","lyteUnbound","columns","nonFixedColumn","minWidth1","minWidth2","secondaryData","boundary","rowHeights"],init:function(){var e=navigator.userAgent;this._dir=_lyteUiUtils.getRTL(),this.isIE11Lyte=/rv:11/gi.test(e),this.isEdgeLyte=/Edge/gi.test(e),this._browser=this.isIE11Lyte||this.isEdgeLyte||e.match("Safari"),this.getMethods("beforeRender")&&this.executeMethod("beforeRender",this.$node),this.$node.scrollTable=function(e,t){this.scrollDiv||(this.scrollDiv=this.$node.querySelector("div.lyteTableScroll")),null!=e&&(this.scrollDiv.scrollTop=t),null!=t&&(this.scrollDiv.scrollLeft=e);var o=new Event("scroll",{bubbles:!0});o._byFunc=!0,this.scrollDiv.dispatchEvent(o)}.bind(this),document._tableResize||(document._tableResize=!0,window.addEventListener("resize",resizeTable,!0),window.addEventListener("orientationchange",resizeTable,!0)),this.$node.toggleRows=function(e){$L.fastdom.mutate(function(){for(var t=this.$node.querySelectorAll("lyte-tbody lyte-tr.lytePreventInfiniteScroll"),o=0;o<t.length;o++)e?t[o].classList.remove("lyteHidden"):t[o].classList.add("lyteHidden")}.bind(this))}.bind(this)},rtlfunc:function(e,t,o){if(this._dir&&"top"!=e&&"clientY"!=e){if(t)return"right"==e?o-t.left:"clientX"==e?o-t.clientX:o-t.right;if("left"==e)return"right";if("right"==e)return"left"}return t?t[e]:e},didDestroy:function(){0==document.body.querySelectorAll("lyte-table[lyte-rendered]").length&&document._tableResize&&(window.removeEventListener("resize",resizeTable,!0),window.removeEventListener("orientationchange",resizeTable,!0),delete document._tableResize),!this.data.ltPropPreventScrollbar&&this.scrollDiv&&$L(this.scrollDiv).removeScroll(),delete this.scrollDiv,delete this._dummy,delete this._dummy1,delete this.resizeComponent,delete this.targetElem,delete this.$node.setValue,delete this.$node.scrollTable},initProcess1:function(e){if(!this._prevent&&this.data.ltPropInfiniteScroll){var t=this.$node.querySelector("lyte-table-structure"),o=this.data.ltPropContent||[],a=Math.min(this.data.ltPropContentLength||o.length,o.length),r=[];if(0==o.length&&!e)return;t&&(t.style.height="auto");for(var i=0;i<a;i++)r[i]={body:o[i],checked:!1,index:i};this.setData("ltPropData",r),e&&this._dummy&&(this._dummy.style.height=0,this._dummy.style.transform="translateY(0px)"),e&&this._dummy1&&(this._dummy1.style.transform="translateY(0px)"),delete this._stopScroll,e&&this.scrollDiv&&(this.scrollDiv.scrollTop=0,this.scrollDiv.scrollLeft=0),this._top=0,this._bottom=Math.max(a-1,0),this._boundary={top:0,bottom:a-1}}}.observes("ltPropContent.[]").on("init"),didConnect:function(){var e=this.data.ltPropInfiniteScroll,t=(this.data.secondaryData,this.data.ltPropResize);this.data.ltPropYield&&(t.vertical||t.horizontal)&&this.resizeComponentAppend.call(this);try{var o=this.$node.querySelector("div.lyteTableScroll");if(this.scrollDiv=o,o.comp=this,o._infiniteScroll=e,this.data.ltPropPreventScrollbar)this.getMethods("afterRender")&&this.executeMethod("afterRender",this.$node);else{$L(o).scroll(this.data.ltPropScrollbarOption);var a,r=this.$node.querySelector(".lyteScrollContainer.lyteScrollContainerY"),i=this.$node.querySelector("lyte-th");$L.fastdom.measure(function(){var e=this._dir;i&&r&&0==r.offsetTop&&(a=i.getBoundingClientRect().height,$L.fastdom.mutate(function(){r.style.top=a+"px",e&&this.$node.classList.add("lyteRTL")}.bind(this))),$L.fastdom.mutate(function(){this.data.ltPropDualResize&&this.$node.classList.add("lyteDualResize"),this.getMethods("afterRender")&&this.executeMethod("afterRender",this.$node)}.bind(this))}.bind(this))}}catch(e){}e&&(this.$node.classList.add("infinitescroll"),this.$node.setValue=function(e){this._stopScroll&&this.appendAddData1.call(this,e)}.bind(this),this.$node.removeRow=function(e){this.removeRow(e)}.bind(this),this.$node.scrollToRecord=this.scrollToRecord.bind(this),this.$node.insertRow=this.insertRow.bind(this))},columnWidth:function(e,t,o){var a=0;for(o||(o=0);o<t;o++)a+=e[o].property.width;return a},heightCalc:function(e,t,o){for(var a=0,r=t;r>0&&!(o<(a+=e[r]));r--);return[a,r]},topElem:function(e){if(this.isIE11Lyte||this.isEdgeLyte){var t=e.querySelector("lyte-td");return t?t.getBoundingClientRect():{}}return e.getBoundingClientRect()},cellSet:function(e,t){if(this.isIE11Lyte||this.isEdgeLyte){var o=e.querySelectorAll("lyte-td");if(!t&&o.length)return o[0].style.transform;for(var a=0;a<o.length;a++)o[a].style.transform=t}else{if(!t)return e.style.transform;e.style.transform=t}},scrollTable:function(e,t){var o=e.yScroll,a=this.getData("ltPropData"),r=this.getData("ltPropContent"),i=this.scrollDiv,s=t.tbodyClient,l=t.$nodeClient,n=this.$node.querySelector("lyte-table-structure"),p=this.$node.querySelector("lyte-th"),c=t.neglected,d=t.compNeg;p=p?p.property?p.property.height:p.getBoundingClientRect().height:0;var u=t.topElem,h=t.topElemClient;if(-1==n.style.height.indexOf("px")&&(n.style.height=s.height+"px",this._rowHgt=parseInt(10*h.height)/10,this._step=parseInt(10*(s.height-this._rowHgt*c.length))/10),this._dummy||this.createDummy(t.tbody),null==o&&!i.classList.contains("eventBinded")){var m=parseFloat(this._dummy.style.transform.match(/[\d|.]+/gi)[0]);o=i.scrollTop>m?1:-1}if(o>0){if(parseFloat(l.top+p)>=parseFloat(h.bottom))if(this._boundary.bottom<=r.length-2){var y=Math.max(parseInt((l.top+p-h.bottom)/this._rowHgt),1);this._boundary.bottom+y>r.length-1&&(y=r.length-1-this._boundary.bottom);for(var f=0;f<y;f++){if(this._boundary.bottom+=1,f>=y-a.length&&(Lyte.Component.set(a[this._top],{body:r[this._boundary.bottom],index:this._boundary.bottom}),u.dataOrder=this._boundary.bottom),this._boundary.top=this._boundary.bottom-a.length+1,this.cellSet(u)?this.regex(u):this.cellSet(u,"translateY("+this._step+"px)"),this._dummy.style.transform="translateY("+(parseFloat(this._dummy.style.transform.match(/[\d|.]+/gi)[0])+this._rowHgt)+"px)",this._dummy.style.height=Math.max(parseFloat(this._dummy.style.height)-this._rowHgt,0)+"px",this._browser&&(this._dummy1.style.transform="translateY("+(parseFloat(this._dummy1.style.transform.match(/[\d|.]+/gi)[0])+this._rowHgt)+"px)"),this._bottom=this._top,this._top=(this._top+1)%a.length,this._boundary.bottom>=r.length){this._boundary.bottom=r.length-1,this._top=(this._top+1)%a.length;break}u=this.nthoftype.call(this,t.tbody,this._top+d.length,!0)}}else this.scrollEndMethod1()}else if(o<0){var g=t.bottmElem,v=t.bottmElemClient;if(l.bottom<=v.top){var x=this.cellSet(g).match(/[\d|.]+/gi);if(!x||x&&"0"==x[0])return;y=parseInt(Math.max(parseFloat((v.top-l.bottom)/this._rowHgt),0));var P=Math.max(y-1-this._boundary.top,0);for(f=y-1;f>=0&&0!=y&&0!=this._boundary.top;f--){if(this._boundary.top-=1,f<=a.length-1+P&&(Lyte.Component.set(a[this._bottom],{body:r[this._boundary.top],index:this._boundary.top}),g.dataOrder=this._boundary.top),this._boundary.bottom=this._boundary.top+a.length-1,this.cellSet(g)&&this.regex(g,!0),this._dummy.style.height=parseFloat(this._dummy.style.height)+this._rowHgt+"px",this._dummy.style.transform="translateY("+(parseFloat(this._dummy.style.transform.match(/[\d|.]+/gi)[0])-this._rowHgt)+"px)",this._browser&&(this._dummy1.style.transform="translateY("+(parseFloat(this._dummy1.style.transform.match(/[\d|.]+/gi)[0])-this._rowHgt)+"px)"),this._top=this._bottom,this._bottom=(a.length+this._bottom-1)%a.length,-1==this._boundary.top){this._boundary.top=0,this._boundary.bottom=this._boundary.top+a.length-1;break}g=this.nthoftype.call(this,t.tbody,this._bottom+d.length,!0)}}}},createDummy:function(e){var t=document.createElement("lyte-tr");if(t.classList.add("dummy"),e.appendChild(t),t.setAttribute("style","transform:translateY(0px);height:0px"),this._dummy=t,this._browser){var o=document.createElement("div");o.classList.add("dummy"),this.scrollDiv.appendChild(o),o.setAttribute("style","transform:translateY(0px);height:5px"),this._dummy1=o}},regex:function(e,t){if(this.isIE11Lyte||this.isEdgeLyte)for(var o=e.querySelectorAll("lyte-td"),a=0;a<o.length;a++)this.regex1(o[a],t);else this.regex1(e,t)},regex1:function(e,t){e.style.transform=t?e.style.transform.replace(/[\d|.]+/gi,function(){return Math.max(parseFloat(arguments[0])-this._step,0).toFixed(3)}.bind(this)):e.style.transform.replace(/[\d|.]+/gi,function(){return(parseFloat(arguments[0])+this._step).toFixed(3)}.bind(this))},scrollEndMethod1:function(){this._stopScroll||(this._stopScroll=!0,this.getMethods("scrollEnd")&&this.appendAddData1(this.executeMethod("scrollEnd")))},appendAddData1:function(e){e&&(e.then?Promise.resolve(e).then(function(e){e&&this.apd1.call(this,e)}.bind(this),function(){console.log("error at scroll end promise")}.bind(this)):this.apd1.call(this,e))},apd1:function(e){var t=this.data.ltPropContent;this.data.ltPropData;this._prevent=!0,e.constructor==Array?Lyte.arrayUtils(t,"concat",e):e.constructor==Object&&Lyte.arrayUtils(t,"push",e),delete this._prevent,delete this._stopScroll},nthoftype:function(e,t,o){var a=[],r=e.getElementsByTagName("lyte-tr");if(o)return r[t];for(var i=0;i<r.length;i++)r[i].classList.contains("dummy")||a.push(r[i].querySelectorAll("lyte-td")[t]);return a},scroll:function(e){var t=this.comp,o=this._wheelObj||{bcr:{}};this._scrollLeft=null!=o.scrollLeft?o.scrollLeft:this.scrollLeft,this._scrollTop=null!=o.scrollTop?o.scrollTop:this.scrollTop;var a=this._direction;if(t.scrollCheck.call(this,e,o),0==this._scrollLeft&&"rtl"!=a&&t.getData("ltPropInfiniteScroll")){var r=t.getData("columns");Lyte.arrayUtils(r,"remove",0,r.length);var i=this.querySelectorAll(".lyteTableFixed");if(i.length)for(var s=0;s<i.length;s++)i[s].style.left="0px",i[s].classList.remove("lyteTableFixed")}t.data.ltPropInfiniteScroll&&t.scrollTable.call(t,e,o),delete this._scrollLeft,delete this._scrollTop},scrollCheck:function(e,t){var o=this.getElementsByTagName("lyte-table-structure")[0],a=this._scrollTop,r=this._scrollLeft,i=this.parentElement.component.getData("ltPropScroll"),s=this.parentElement.component,l=this._direction,n=o.getElementsByTagName("lyte-tbody")[0],p=this.getElementsByTagName("lyte-thead")[0],c=[],d=[],u=[];if(p&&(c=p.getElementsByTagName("lyte-th")),(a!=this.prevScollTop||e._byFunc)&&i.vertical){var h=c;if(h.length){for(var m=0;m<h.length;m++)h[m].classList.add("tableRowFixed"),s.transform(!0,h[m],a);if(!a)for(m=0;m<h.length;m++)h[m].classList.remove("tableRowFixed")}}if((r!=this.prevScollLeft||e._byFunc)&&i.horizontal){var y=s.data.columns,f=[];if(p){var g=Array.apply(Array,p.getElementsByTagName("lyte-tr")),v=Array.apply(Array,p.getElementsByClassName("lyteRowCopy"));f=g.concat(v)}var x=s.data.ltPropFixedColumnClass||"";if(f.length){d=f[0].getElementsByTagName("lyte-th");for(var P=0;P<d.length;P++)d[P].classList.contains("lyteFixedColumn")&&u.push(d[P])}for(m=y.length;m<u.length;m++)if(u[m].property.right+s.columnWidth.call(s,u,m)>t.scrollDivClient.right&&"rtl"==l||u[m].property.left<t.scrollDivClient.left+s.columnWidth.call(s,u,m)&&"rtl"!=l){u[m].property.width;var b=u[m].order;if(b+1<d.length){!u[m].classList.contains("lyteTableFixed")&&u[m].classList.add("lyteTableFixed"),y.push(u[m]);for(var D=1;D<f.length;D++){(N=f[D].getElementsByTagName("lyte-th")[b])&&!N.classList.contains("lyteTableFixed")&&N.classList.add("lyteTableFixed")}for(var L=s.nthoftype.call(s,n,b),C=0;C<L.length;C++)!L[C].classList.contains("lyteTableFixed")&&L[C].classList.add("lyteTableFixed"),x&&L[C].classList.add(x)}}for(P=y.length-1;P>=0&&(w=y.length-1,0==r&&(!window.chrome||"rtl"!=l)||(parseFloat((d[y[w].order+1].property.right+y[w].property.width+s.columnWidth.call(s,y,y.length-1)).toFixed(2))<=parseFloat(t.scrollDivClient.right.toFixed(2))||d[y[w].order+1].property.right+2<y[w].property.left)&&"rtl"==l||d[y[w].order+1].property.left>=t.scrollDivClient.left+y[w].property.width+s.columnWidth.call(s,y,y.length-1)&&y[w].property.left>=t.scrollDivClient.left+s.columnWidth.call(s,u,y.length-1)&&"rtl"!=l);P--){d[y[w].order].classList.contains("lyteTableFixed")&&d[y[w].order].classList.remove("lyteTableFixed"),x&&d[y[w].order].classList.remove(x),s.transform(!1,y[w],0);for(D=0;D<f.length;D++){(N=f[D].getElementsByTagName("lyte-th")[y[w].order])&&(N.classList.contains("lyteTableFixed")&&N.classList.remove("lyteTableFixed"),s.transform(!1,N,0))}for(var _=s.nthoftype.call(s,n,y[w].order),S=0;S<_.length;S++)s.transform(!1,_[S],0),_[S].classList.contains("lyteTableFixed")&&_[S].classList.remove("lyteTableFixed"),x&&_[S].classList.remove(x);Lyte.arrayUtils(y,"removeAt",w)}for(var w=0;w<y.length;w++){var T,E=s.nthoftype.call(s,n,y[w].order),A=navigator.userAgent.toLowerCase();T=0==w?"rtl"==l?-1!=A.indexOf("firefox")||-1!=A.indexOf("safari")&&(_lyteUiUtils.isNegativeScroll()||-1==A.indexOf("chrome")&&-1==A.indexOf("chromium"))?r+s.columnWidth.call(s,d,y[w].order,0):-1!=A.indexOf("edge")||-1!=A.indexOf("trident")||-1!=A.indexOf("msie")?-r+s.columnWidth.call(s,d,y[w].order,0):r-1-t.scrollWidth+t.scrollDivClient.width+s.columnWidth.call(s,d,y[w].order,0):r-s.columnWidth.call(s,d,y[w].order,0):"rtl"==l?(-1!=A.indexOf("firefox")||-1!=A.indexOf("safari")&&(_lyteUiUtils.isNegativeScroll()||-1==A.indexOf("chrome")&&A.indexOf("chromium")),s.transform(!1,y[w-1])+s.columnWidth.call(s,d,y[w].order,y[w-1].order+1)):s.transform(!1,y[w-1])-s.columnWidth.call(s,d,y[w].order,y[w-1].order+1);for(var M=0;M<E.length;M++)!E[M].classList.contains("lyteTableFixed")&&E[M].classList.add("lyteTableFixed"),s.transform(!1,E[M],T);s.transform(!1,y[w],T);for(D=0;D<f.length;D++){var N;(N=f[D].getElementsByTagName("lyte-th")[y[w].order])&&(!N.classList.contains("lyteTableFixed")&&N.classList.add("lyteTableFixed"),s.transform(!1,N,T))}}}this.prevScollLeft=r,this.prevScollTop=a},transform:function(e,t,o){var a=t.style.transform||"translateX(0px) translateY(0px)",r=parseFloat(/translateX\((.+)/.exec(a)[1]),i=parseFloat(/translateY\((.+)/.exec(a)[1]);if(null==o)return parseFloat(e?i:r);t.style.transform=e?"translateY("+o+"px) translateX("+r+"px)":"translateY("+i+"px) translateX("+o+"px)"},borderChangeObs:function(){this.borderChange.call(this)}.observes("ltPropBorder").on("didConnect"),borderChange:function(){this.data.ltPropBorder?this.$node.classList.add("border"):this.$node.classList.remove("border")},widthObsObs:function(){this.widthObs.call(this)}.observes("ltPropWidth").on("didConnect"),widthObs:function(){this.$node.querySelector("lyte-table-structure").style.width=this.data.ltPropWidth},heightObsObs:function(){this.heightObs.call(this)}.observes("ltPropHeight").on("didConnect"),heightObs:function(){this.$node.querySelector("lyte-table-structure").style.height=this.data.ltPropHeight},sortableObs:function(){this.sortable.call(this)}.observes("ltPropColumnSortable").on("didConnect"),sortable:function(){var e=this.$node.querySelector("lyte-thead");e&&(this.data.ltPropColumnSortable?(this.colSort=this.sortableColumns.bind(this),e.addEventListener("mousedown",this.colSort),e.addEventListener("touchstart",this.colSort),e.parentElement.classList.add("sortableTable")):(e.removeEventListener("mousedown",this.colSort),e.removeEventListener("touchstart",this.colSort),e.parentElement.classList.remove("sortableTable")))},composePath:function(e){for(var t=[],o=e.target.correspondingElement||e.target;o&&"HTML"!=o.tagName;)t.push(o),o=o.parentNode;return t},sortableColumns:function(e){var t=this.closestFind.call(this,e.path?e.path:this.composePath.call(this,e),"lyte-th:not(.lyteTableFixed)");if(t&&this.$node.contains(t)){var o,a="touchstart"==e.type;if(this.getMethods("onBeforeSelect")&&(o=this.executeMethod("onBeforeSelect",t,e,this.$node)),0!=o){var r=a?e.touches[0]:e;this._ww=window.innerWidth,this.mousemove=this.sortableMouseMove.bind(this),this.offLeft=this.rtlfunc.call(this,"clientX",r,this._ww)-this.rtlfunc.call(this,"left",t.getBoundingClientRect(),this._ww),this.colHead=t,this._thisBccr=this.$node.getBoundingClientRect(),t.classList.add("sortSelect"),document.documentElement.addEventListener(a?"touchmove":"mousemove",this.mousemove),this.mouseup=this.sortableMouseup.bind(this),document.documentElement.addEventListener(a?"touchend":"mouseup",this.mouseup),this.flag=!0,e.preventDefault(),this.getMethods("onSelect")&&this.executeMethod("onSelect",t,e,this.$node)}}},horiScroll:function(e,t){var o,a,r,i=this.rtlfunc.call(this,"left"),s=this.isIE11Lyte||this.isEdgeLyte;if(/mousemove|touchmove/i.test(e.type)&&(o=!0),o){if(this._reqId)return;a=this.rtlfunc.call(this,"clientX",e,t)>Math.min(this.rtlfunc.call(this,"right",this._thisBccr,t),t-2),r=this.rtlfunc.call(this,"clientX",e,t)<=Math.max(0,this.rtlfunc("left",this._thisBccr,innerWidth))}else a=parseFloat(e.style[i])-this._xxoff+parseFloat(e.style.width)>=this.rtlfunc("right",this._thisBccr,t)-1,r=parseFloat(e.style[i])-this._xxoff+parseFloat(e.style.width)>=this.rtlfunc("right",this._thisBccr,t)-1;a?(this.scrollDiv.scrollLeft+=2*(this._dir?-1*(s?-1:1):1),o&&(this.resizeComponent.offLeft-=2),this._reqId=window.requestAnimationFrame(function(){delete this._reqId,this.horiScroll(e,t)}.bind(this))):r?(o&&(this.resizeComponent.offLeft+=2),this.scrollDiv.scrollLeft-=2*(this._dir?-1*(s?-1:1):1),this._reqId=window.requestAnimationFrame(function(){delete this._reqId,this.horiScroll(e,t)}.bind(this))):(window.cancelAnimationFrame(this._reqId),delete this._prevent)},sortableMouseMove:function(e){var t="touchmove"==e.type,o=e;if(!t||1==o.touches.length){if(t&&(o=o.touches[0]),this.flag&&null==this._timeout){var a,r=this.colHead.getBoundingClientRect(),i=document.createElement("div");i.classList.add("lyteTableSortHelper"),i.innerHTML=this.colHead.innerText,this._xxoff=a=(window.pageXOffset||document.documentElement.scrollLeft)*(this._dir?-1:1);var s=window.pageYOffset||document.documentElement.scrollTop;i.style.height=r.height+"px",i.style.width=r.width+"px",i.style[this.rtlfunc.call(this,"left")]=a+this.rtlfunc.call(this,"left",r,this._ww)+"px",i.style.top=s+r.top+"px",this._timeout=setTimeout(function(){document.body.appendChild(i),this.flag=!1}.bind(this),100)}var l=document.querySelector("div.lyteTableSortHelper");if(l){var n=this._dir?"right":"left",p=window.innerWidth,c=Math.max(Math.min(this.rtlfunc.call(this,"clientX",o,this._ww)-this.offLeft,this.rtlfunc.call(this,"right",this._thisBccr,this._ww)-parseFloat(l.style.width)),this.rtlfunc.call(this,"left",this._thisBccr,this._ww));if(parseFloat(c)>this.rtlfunc("left",this._thisBccr,p)&&parseFloat(c)+parseFloat(l.style.width)<this.rtlfunc("right",this._thisBccr,p)&&(window.cancelAnimationFrame(this._reqId),delete this._prevent,delete this._scrollDir),this._prevent)return;l.style[n]=c+this._xxoff+"px",this._prevent=!0,this.horiScroll(l,p),this.getMethods("onDrag")&&this.executeMethod("onDrag",this.colHead,l,e,this.$node)}e.preventDefault(),e.stopPropagation()}},sortableMouseup:function(e){if(this.flag)clearTimeout(this._timeout);else{var t="touchend"==e.type,o=document.getElementsByClassName("lyteTableSortHelper")[0],a=o.getBoundingClientRect(),r=a.left+a.width/2+2,i=a.top+a.height/2,s=this.closestFind.call(this,document.elementsFromPoint?document.elementsFromPoint(r,i):this.elementsFromPointCal.call(this,r,i),"lyte-th:not(.lyteTableFixed)"),l=this.$node.getElementsByTagName("lyte-tbody")[0];if(s!=this.colHead&&s){var n,p=this.colHead.parentElement.getElementsByTagName("lyte-th"),c=Array.prototype.indexOf.call(p,this.colHead),d=Array.prototype.indexOf.call(p,s),u=this.data.ltPropHeader;if(this.getMethods("onBeforeDrop")&&(n=this.executeMethod("onBeforeDrop",this.colHead,s,c,d,u,e,this.$node)),0!=n){if(u.length){var h=Lyte.arrayUtils(u,"removeAt",c),m=Array.prototype.indexOf.call(s.parentElement.getElementsByTagName("lyte-th"),s);Lyte.arrayUtils(u,"insertAt",c<d?m+1:m,h);var y=s.parentElement.getElementsByTagName("lyte-th",s.parentElement)[c<d?m+1:m];s.classList.contains("tableRowFixed")&&(y.classList.add("tableRowFixed"),y.style.top=s.style.top)}else{_lyteUiUtils.insertBefore(d>c?s.nextElementSibling:s,this.colHead);for(var f=this.nthoftype.call(this,l,c),g=this.nthoftype.call(this,l,d),v=0;v<f.length;v++)_lyteUiUtils.insertBefore(d>c?g[v].nextElementSibling:g[v],f[v])}this.getMethods("onDrop")&&this.executeMethod("onDrop",this.colHead,s,c,d,u,e,this.$node)}}document.body.removeChild(o)}document.documentElement.removeEventListener(t?"touchend":"mouseup",this.mouseup),document.documentElement.removeEventListener(t?"touchmove":"mousemove",this.mousemove),this.colHead.classList.remove("sortSelect"),window.cancelAnimationFrame(this._reqId),delete this.mouseup,delete this._xxoff,delete this.mousemove,delete this.offLeft,delete this.colHead,delete this.flag,delete this._timeout,delete this._thisBccr,delete this._ww,delete this._reqId,delete this._prevent,delete this._scrollDir,e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()},elementsFromPointCal:function(e,t){for(var o=[],a=document.elementFromPoint(e,t);a!=document&&a!=document.documentElement&&a!=document.body&&a!=this.$node;)a.style.pointerEvents="none",o.push(a),a=document.elementFromPoint(e,t);for(var r=0;r<o.length;r++)o[r].style.pointerEvents="initial";return o},resizeComponentAppendObs:function(){this.data.ltPropYield&&this.resizeComponentAppend.call(this)}.observes("ltPropResize","ltPropResize.{}"),resizeComponentAppend:function(){var e=this.data.ltPropResize,t=this.$node.getElementsByTagName("lyte-table-structure")[0],o=t.getElementsByTagName("lyte-table-resize")[0],a=t.getElementsByTagName("lyte-table-vertical-resize")[0],r=t.getElementsByTagName("lyte-table-horizontal-resize")[0];if(e.vertical||e.horizontal){if(!o){var i=document.createElement("lyte-table-resize");t.appendChild(i),i.addEventListener("mousedown",this.actions.tableResize.bind(this)),i.addEventListener("touchstart",this.actions.tableResize.bind(this))}}else o&&t.removeChild(o);if(e.vertical){if(!a){i=document.createElement("lyte-table-vertical-resize");t.appendChild(i),i.addEventListener("mousedown",this.actions.tableResize.bind(this)),i.addEventListener("touchstart",this.actions.tableResize.bind(this))}}else a&&t.removeChild(a);if(e.horizontal){if(!r){i=document.createElement("lyte-table-horizontal-resize");t.appendChild(i),i.addEventListener("mousedown",this.actions.tableResize.bind(this)),i.addEventListener("touchstart",this.actions.tableResize.bind(this))}}else r&&t.removeChild(r)},data:function(){return{ltPropContent:Lyte.attr("array",{default:[]}),ltPropHeader:Lyte.attr("array",{default:[]}),ltPropId:Lyte.attr("string",{default:""}),ltPropClass:Lyte.attr("string",{default:""}),ltPropBorder:Lyte.attr("boolean",{default:!1}),ltPropHeaderLabelKey:Lyte.attr("string",{default:""}),ltPropBodyLabelKey:Lyte.attr("string",{default:""}),ltPropWidth:Lyte.attr("string",{default:"100%"}),ltPropHeight:Lyte.attr("string",{default:"100%"}),ltPropResize:Lyte.attr("object",{default:{}}),ltPropFixedColumnClass:Lyte.attr("string",{default:""}),ltPropYield:Lyte.attr("boolean",{default:!1}),ltPropScroll:Lyte.attr("object",{default:{horizontal:!0,vertical:!0}}),ltPropColumnSortable:Lyte.attr("boolean",{default:!1}),ltPropScrollbarOption:Lyte.attr("object",{default:{}}),ltPropDualResize:Lyte.attr("boolean",{default:!1}),ltPropData:Lyte.attr("array",{default:[]}),ltPropInfiniteScroll:Lyte.attr("boolean",{default:!1}),ltPropCellHeight:Lyte.attr("string",{default:"20px"}),ltPropContentLength:Lyte.attr("number"),ltPropPreventScrollbar:Lyte.attr("boolean",{default:!1}),lyteUnbound:Lyte.attr("boolean",{default:!1}),columns:Lyte.attr("array",{default:[]}),nonFixedColumn:Lyte.attr("array",{default:[]}),minWidth1:Lyte.attr("string",{default:""}),minWidth2:Lyte.attr("string",{default:""}),secondaryData:Lyte.attr("array",{default:[]}),boundary:Lyte.attr("object",{default:{}}),rowHeights:Lyte.attr("array",{default:[]})}},actions:{tableResize:function(e){var t="touchstart"==e.type,o=e;if(!t||1==e.touches.length){t&&(o=e.touches[0]);var a=e.target.parentElement;a.previousElementSibling;if(document.Component=this,this.resizeComponent=a,this.targetElem=o.target,(a.parentElement.querySelector("lyte-th:last-of-type")!=a||this.data.ltPropDualResize)&&"LYTE-TH"==a.tagName||"LYTE-TH"!=a.tagName){this._thisBccr=this.$node.getBoundingClientRect();var r=window.innerWidth,i=a.getBoundingClientRect();if(this.data.ltPropDualResize&&(this.oriTab=this.$node.getElementsByTagName("lyte-table-structure")[0],s=this.oriTab.getBoundingClientRect().width),a.offLeft=i.width+this.rtlfunc.call(this,"left",i,r),a.offTop=o.clientY,document.addEventListener(t?"touchend":"mouseup",this.mouseup),document.addEventListener(t?"touchmove":"mousemove",this.resizeFunc),"LYTE-TH"==a.tagName){var s,l,n,p=this.$node.getElementsByTagName("lyte-th"),c=[],d=a.nextElementSibling;$L.fastdom.measure(function(){for(var e=0;e<p.length;e++)p[e].style.width&&a!=p[e]?c.push(null):c.push(p[e].offsetWidth);$L.fastdom.mutate(function(){a.classList.add("resizeSelect"),this.$node.classList.add("resizing");for(var e=0;e<p.length;e++)c[e]&&(p[e].style.width=c[e]+"px");d&&(l=d.style.width),n=a.style.width,$L.fastdom.measure(function(){d&&d.style.removeProperty("width"),this.minWidth.call(this,a,"minWidth1"),d&&(d.style.width=l),this.data.ltPropDualResize||(a.style.removeProperty("width"),this.minWidth.call(this,d,"minWidth2"),a.style.width=n),$L.fastdom.mutate(function(){this.data.ltPropDualResize&&(this.oriTab.style.width=s+"px")}.bind(this))}.bind(this))}.bind(this))}.bind(this))}else{var u=this.$node.getElementsByTagName("lyte-table-structure")[0];u.style.width=u.getBoundingClientRect().width+"px",this.$node.classList.add("tableResing")}}e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}}},minWidth:function(e,t){var o=window.getComputedStyle(e,null).getPropertyValue("min-width"),a=e.style.width;e.style.width="0px"==o?"50px":o,o=e.offsetWidth+"px",e.style.width=a,this.setData(t,o)},resetScrollbar:function(e){this.$node.classList.remove("tableResing"),$L.fastdom.measure(function(){var e=this.$node.getBoundingClientRect(),t=this.$node.getElementsByTagName("lyte-table-structure")[0].getBoundingClientRect(),o=(window.pageXOffset||document.documentElement.scrollLeft)*(this._dir?-1:1),a=window.innerWidth;this.scrollDiv.resetScrollbar&&this.scrollDiv.classList.contains("eventBinded")&&this.scrollDiv.resetScrollbar(!0),$L.fastdom.mutate(function(){var r=this.rtlfunc.call(this,"right",e,a),i=this.rtlfunc.call(this,"right",t,a),s=this.$node.querySelector(".lyteScrollContainer.lyteScrollContainerY:not(.left)"),l=this.$node.querySelector(".lyteScrollContainer.lyteScrollContainerX");s&&(r-i>0?s.style[this.rtlfunc.call(this,"right")]=r-i+o+"px":s.style.removeProperty("right")),l&&(r-i>0?l.style.width=t.width/e.width*100+"%":l.style.removeProperty("width"))}.bind(this))}.bind(this))},mouseup:function(e){var t="touchend"==e.type,o=document.Component,a=o.resizeComponent;o.resetScrollbar.call(o,e),delete document.Component,delete o.oriTab,document.removeEventListener(t?"touchend":"mouseup",o.mouseup),document.removeEventListener(t?"touchmove":"mousemove",o.resizeFunc),$L.fastdom.mutate((function(){a.classList.remove("resizeSelect"),o.$node.classList.remove("resizing"),document.removeEventListener(t?"touchend":"mouseup",o.mouseup),document.removeEventListener(t?"touchmove":"mousemove",o.resizeFunc),delete document.Component,delete o.oriTab,delete this._thisBccr,o.getMethods("onResizeEnd")&&$L.fastdom.mutate((function(){o.executeMethod("onResizeEnd",a,o.$node)}))})),window.cancelAnimationFrame(o._reqId),delete o._reqId,e.stopPropagation()},resizeFunc:function(e){var t="touchmove"==e.type,o=e;if(!t||1==e.touches.length){t&&(o=o.touches[0]);var a=document.Component,r=window.innerWidth,i=a.resizeComponent,s=a.rtlfunc.call(a,"clientX",o,r),l=a.data.ltPropResize,n=s-i.offLeft,p=parseInt(i.style.width);if((l.horizontal||"LYTE-TH"==i.tagName)&&n){var c=n+p;a.getData("tableWidth");if("LYTE-TH"==i.tagName){if(c>Math.ceil(parseFloat(a.getData("minWidth1")))){var d=i.nextElementSibling,u=d?d.getBoundingClientRect().width-n:0;!a.data.ltPropDualResize&&u>Math.ceil(parseFloat(a.getData("minWidth2")))?(d.style.width=u+"px",i.style.width=c+"px"):a.data.ltPropDualResize&&(a.oriTab&&(a.oriTab.style.width=parseInt(a.oriTab.style.width)+n+"px"),i.style.width=c+"px",s>Math.max(a.rtlfunc("left",a._thisBccr,r),0)&&s<Math.min(a.rtlfunc("right",a._thisBccr,r),r)&&(window.cancelAnimationFrame(a._reqId),delete a._reqId))}}else if("LYTE-TH"!=i.tagName&&("LYTE-TABLE-HORIZONTAL-RESIZE"==a.targetElem.tagName||"LYTE-TABLE-RESIZE"==a.targetElem.tagName)){var h=i.parentElement;"LYTE-YIELD"==h.tagName&&(h=h.parentElement),i.style.width=c+"px"}i.offLeft=s,delete i.width}a.horiScroll(o,r),!l.vertical||"LYTE-TH"==i.tagName||"LYTE-TABLE-VERTICAL-RESIZE"!=a.targetElem.tagName&&"LYTE-TABLE-RESIZE"!=a.targetElem.tagName||(i.style.height=o.clientY+i.getBoundingClientRect().height-i.offTop+"px",i.offTop=o.clientY),e.preventDefault(),e.stopPropagation()}},arrayFrom:function(e){return Array.from?Array.from(e):Array.apply(Array,e)},closestFind:function(e,t){for(var o=this.arrayFrom.call(this,document.querySelectorAll(t)),a=0;a<e.length;a++)if(-1!=Array.prototype.indexOf.call(o,e[a]))return e[a];return null},findDomIndex:function(e){for(var t=this.data.ltPropData,o=0;o<t.length;o++)if(t[o].index==e)return o;return-1},insertRow:function(e,t){var o=this._boundary,a=o.top,r=o.bottom,i=this.data.ltPropContent,s=this.data.ltPropData;if(this._prevent=!0,Lyte.arrayUtils(i,"insertAt",e,t),e<=r)for(var l=Math.max(a,e);l<=r;l++){var n=this.findDomIndex(l);Lyte.Component.set(s[n],{index:s[n].index,body:i[l]})}if(this.data.ltPropContentLength>i.length){var p=s.length;Lyte.arrayUtils(s,"push",{index:p,body:i[p],checked:!1}),o.bottom++,this._bottom++,this._rowHgt&&(this._step=this._rowHgt*s.length)}delete this._prevent},removeRow:function(e){var t=this.arrayFrom($L("lyte-tbody lyte-tr:not(.dummy)",this.$node));e.constructor!=Number&&(e=e.dataOrder||t.indexOf(e));var o=this.findDomIndex(e),a=this._boundary,r=a.top,i=a.bottom,s=this.data.ltPropContent,l=this.data.ltPropData;if(this._prevent=!0,-1!=o){if(i==s.length-1){for(var n=e;n<=i;n++){var p=(o+(n-e)+l.length)%l.length;if(n+1==s.length){if(this.regex(t[p],!0),this._dummy)if((c=this._dummy.style).transform="translateY("+(parseFloat(c.transform.match(/[\d|.]+/gi)[0])-this._rowHgt)+"px)",this._dummy1)(d=this._dummy1.style).transform="translateY("+(parseFloat(d.transform.match(/[\d|.]+/gi)[0])-this._rowHgt)+"px)";s[r-1]&&(Lyte.Component.set(l[p],{index:l[p].index,body:s[r-1]}),t[p].dataOrder=r-1)}else Lyte.Component.set(l[p],{index:l[p].index,body:s[n+1]}),t[p].dataOrder--}a.bottom--,a.top--,this._bottom=(this._bottom-1+l.length)%l.length,this._top=(this._top-1+l.length)%l.length}else{for(n=e;n<=i;n++){p=(o+(n-e)+l.length)%l.length;Lyte.Component.set(l[p],{index:l[p].index,body:s[n+1]})}if(this._dummy)(c=this._dummy.style).height=Math.max(0,parseFloat(c.height)-this._rowHgt)+"px"}Lyte.arrayUtils(s,"removeAt",e)}else if(Lyte.arrayUtils(s,"removeAt",e),e<r){for(n=r;n<=i;n++){p=(this._top+n-r+t.length)%t.length;Lyte.Component.set(l[p],{index:l[p].index,body:s[n==s.length?r-1:n]}),n==i&&(this.regex(t[p],!0),this._bottom=(this._bottom-1+l.length)%l.length,this._top=(this._top-1+l.length)%l.length)}var c,d;if(a.bottom--,a.top--,(c=this._dummy.style).transform="translateY("+Math.max(0,parseFloat(c.transform.match(/[\d|.]+/gi)[0])-this._rowHgt)+"px)",this._dummy1)(d=this._dummy1.style).transform="translateY("+Math.max(0,parseFloat(d.transform.match(/[\d|.]+/gi)[0])-this._rowHgt)+"px)"}else e>i&&this._dummy&&(this._dummy.style.height=Math.max(0,parseFloat(this._dummy.style.height)-this._rowHgt)+"px");s.length<this.data.ltPropContentLength&&Lyte.arrayUtils(l,"pop"),delete this._prevent},scrollToRecord:function(e){var t=this.data.ltPropContent.length;null==e||e<0||e>=t||(this._rowHgt||this.$node.scrollTable(),$L.fastdom.clear(this._scrollToRecord),this._scrollToRecord=$L.fastdom.measure(this.processScrollToRecord.bind(this,e)))},processScrollToRecord:function(e){var t,o=this._boundary,a=(o.top,o.bottom),r=this.data.ltPropContent,i=this.data.ltPropData,s=i.length,l=(r.length,this._step),n=this._rowHgt,p=this.scrollDiv,c=p.offsetHeight,d=p.scrollHeight,u=(p.scrollTop,Math.max(0,Math.min(e,r.length-s))),h=u*n;if(r.length<=s)t=Math.max(0,Math.min(d-c,e*n));else if(a>=e)t=h;else{if(u!=e){h+=l-c;var m=$L("lyte-thead",this.$node).get(0);m&&(h+=m.getBoundingClientRect().height)}if(h<=(d=p.scrollHeight)-c)t=h;else{for(var y=this.arrayFrom($L("lyte-tbody lyte-tr:not(.dummy)",this.$node)),f=Math.floor(u/s),g=u%s,v=0;v<s;v++){var x=u+v,P=x%s,b=y[v],D=f+(v<g?1:0);Lyte.Component.set(i[P],{index:x,body:r[x]}),this.cellSet(b,"translateY(0px)");for(var L=0;L<D;L++)this.regex(b)}this._dummy||this.createDummy(this.$node.querySelector("lyte-tbody")),this._dummy.style.transform="translateY("+u*n+"px)",this._dummy1&&(this._dummy1.style.transform="translateY("+u*n+"px)"),t=h,o.top=u,o.bottom=u+s-1,this._top=u%s,this._bottom=(u+s-1)%s}}$L.fastdom.mutate((function(){p.scrollTop=t}))}}),!_lyteUiUtils.registeredCustomElements["lyte-th"]){function resizeTable(e){if(!e||"resize"!=e.type||!_lyteUiUtils.isMobile)for(var t=document.body.querySelectorAll("lyte-table[lyte-rendered]"),o=0;o<t.length;o++){var a=t[o].component;e&&"orientationchange"==e.type?setTimeout(a.resetScrollbar.bind(a),500,e):a.resetScrollbar.call(a,e)}}_lyteUiUtils.registeredCustomElements["lyte-th"]=!0,Lyte.createCustomElement("lyte-th",{static:{observedAttributes:{get:function(){return["fixed","resize","icon"]}}},attributeChangedCallback:function(e,t,o){if("fixed"==e){for(var a=this;"DIV"!=a.tagName;)a=a.parentElement;"enable"==o?this.classList.add("lyteFixedColumn"):this.classList.remove("lyteFixedColumn")}else if("resize"==e){var r;if("enable"==o)(r=document.createElement("lyte-tablehead-resize")).addEventListener("mousedown",this.resize),r.addEventListener("touchstart",this.resize),this.appendChild(r);else(r=this.getElementsByTagName("lyte-tablehead-resize")[0])&&this.removeChild(r)}else"icon"==e&&("disable"==o?this.classList.add("lytePreventIcon"):this.classList.remove("lytePreventIcon"))},resize:function(e){if(!this.parentNode.classList.contains("lyteTableFixed")){var t=$L(e.target).closest("lyte-table")[0];t.component.actions.tableResize.call(t.component,e)}}})}Lyte.Component.register("lyte-text",{_template:'<template tag-name="lyte-text" lt-prop-title="{{if(expHandlers(tooltip,\'&amp;&amp;\',ltPropShow),ltPropValue,\'\')}}" onmouseenter="{{action(\'mouse\')}}"> <template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield class="lyteTextYield" yield-name="lyte-text" lt-prop-value="{{ltPropValue}}"></lyte-yield> </template><template case="false"> {{ltPropValue}} </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}],_templateAttributes:{type:"attr",position:[]},_observedAttributes:["ltPropValue","ltPropShow","ltPropYield","tooltip","lyteUnbound"],data:function(){return{ltPropValue:Lyte.attr("string",{default:""}),ltPropShow:Lyte.attr("boolean",{default:!0}),ltPropYield:Lyte.attr("boolean",{default:!1}),tooltip:Lyte.attr("boolean",{default:!1}),lyteUnbound:Lyte.attr("boolean",{default:!1})}},reset:function(){var e=this.$node.scrollWidth,t=this.$node.offsetWidth;this.setData("tooltip",e>t),this.$node._fR&&(this.data.tooltip&&this.data.ltPropShow?this.$node.setAttribute("lt-prop-title",this.data.ltPropValue):this.$node.removeAttribute("lt-prop-title"))},actions:{mouse:function(){this.reset()}}}),Lyte.Component.register("lyte-gridstack",{_template:'<template tag-name="lyte-gridstack"> <lyte-yield yield-name="lyteGridStack"> </lyte-yield> </template>',_dynamicNodes:[{type:"insertYield",position:[1]}],_observedAttributes:["ltPropScope","ltPropHandler","ltPropMarginLeft","ltPropMarginTop","ltPropUnitX","ltPropUnitY","ltPropResizeDirection","ltPropFloat","ltPropDirection","ltPropUndo","ltPropResize","ltPropBestfit","ltPropMinUnitX","ltPropMinMarginLeft","ltPropBestfitClass","ltPropFreezeMode","ltPropDefaultLength","ltPropDefaultHeight","ltPropDefaultMinLength","ltPropDefaultMinHeight","ltPropDefaultMaxHeight","ltPropDefaultMaxLength","ltPropColumnMode","ltPropColumn","ltPropPrevent","ltPropGridLength","ltPropBestfitType","ltPropForcedReposition","ltPropSquareGrid","ltPropGridSpaceColor","ltPropHitBottom","ltPropGridSelectionClass","ltPropVisibleBoundary","ltPropVisible","ltPropCheckCurrentPosition","ltPropContainment","gridLength","ltPropGridHeight","ltPropMarginLeftCopy","ltPropUnitxCopy","lyteGridStack","elements","oriNode","xElements","yElements","iniData","lyteQuerySelector","direction"],init:function(){var e=navigator.userAgent;this.isSaf={safari:!!window.safari,isIE11Lyte:/rv:11/gi.test(e),isEdgeLyte:/Edge/gi.test(e),chrome:!!window.chrome,firefox:/firefox/gi.test(e)},this._childGrids=[],this.freeezeModeObs.call(this,this.data.ltPropFreezeMode),this.getMethods("beforeRender")&&this.executeMethod("beforeRender",this.$node)},didDestroy:function(){if(document.removeEventListener("keydown",this.data.lyteQuerySelector.keydown),window.removeEventListener("resize",this._resizeFunc,!0),window.removeEventListener("orientationchange",this._resizeFunc,!0),document.removeEventListener("click",this._click),this.$node.removeEventListener("scroll",this._scroll,!0),this._parentGrid){var e=this._parentGrid.component._childGrids;Lyte.arrayUtils(e,"removeAt",e.indexOf(this._parentGridIndex))}this._parentComp&&delete this._parentComp._childGrid,document._lyteCurrentGrid==this&&delete document._lyteCurrentGrid,delete this.scopeElement,delete this._style,this.data.lyteGridStack=[],delete this.data.lyteQuerySelector.previousNode,delete this.$node.addGrid,delete this.$node.removeGrid,delete this.$node.reRender,delete this.$node.setProperty},rtlfunc:function(e,t){return this.data.direction?"left"==e?"right":"right"==e?"left":"clientX"==t?window.innerWidth-e:"bccr"==t?window.innerWidth-e.right:t.offsetParent.getBoundingClientRect().right-t.getBoundingClientRect().right:"bccr"==t?e.left:t&&"clientX"!=t?t.offsetLeft:e},windowResize:function(e){e&&"resize"==e.type&&_lyteUiUtils.isMobile||(clearTimeout(window._gridResize),window._gridResize=setTimeout(function(){if(this.$node.offsetParent){var e=this.data.ltPropMinUnitX,t=this.scopeElement.getBoundingClientRect().width-this.data.gridLength*this.data.ltPropMarginLeft,o=this._initialXRatio*t;this.setData("ltPropUnitxCopy",Math.max(o,e)),this.MarginLeftAndXObs.call(this,!0),this.observerFunc.call(this),delete window._gridResize,this.getMethods("onWindowResize")&&$L.fastdom.measure(function(){$L.fastdom.mutate(function(){this.executeMethod("onWindowResize",event,this.$node)}.bind(this))}.bind(this))}}.bind(this),e&&"orientationchange"==e.type?500:250))},MarginLeft:function(){this.MarginLeftAndXObs.apply(this,arguments)}.observes("ltPropMarginLeft","ltPropUnitX"),MarginLeftAndXObs:function(e){e.constructor==Object&&(this.setData("ltPropUnitxCopy",this.data.ltPropUnitX),this.setData("ltPropMarginLeftCopy",this.data.ltPropMarginLeft));var t=this.getData("ltPropUnitxCopy"),o=this.getData("ltPropMarginLeftCopy");this.setData("gridLength",Math.round((this.scopeElement.getBoundingClientRect().width-o)/(t+o)))},squareGridObs:function(){arguments[0].newValue?(this._originalY=this.getData("ltPropUnitY"),this.setData("ltPropUnitY",this.data.ltPropUnitX)):this._originalY?(this.setData("ltPropUnitY",this._originalY),delete this._originalY):this.setData("ltPropUnitY",50)}.observes("ltPropSquareGrid"),obsfunc:function(){this.getData("ltPropSquareGrid")&&("ltPropUnitX"==arguments[0].item?this.setData("ltPropUnitY",arguments[0].newValue):"ltPropUnitY"==arguments[0].item&&this.setData("ltPropUnitX",arguments[0].newValue)),this._prevObs||this.observerFunc.apply(this,arguments)}.observes("ltPropUnitX","ltPropUnitY","ltPropMarginLeft","ltPropMarginTop"),observerFunc:function(e){var t=this._style;t&&(this.$node.removeChild(t),delete this._style,this.initialValSet.call(this,null,!e))},freezeobs:function(){this.freeezeModeObs.apply(this,arguments)}.observes("ltPropFreezeMode"),freeezeModeObs:function(e){e.constructor!=Object&&e.constructor!=Boolean||(0==e.oldValue||1==e?this.$node.classList.add("gridFreezeMode"):1!=e.oldValue&&0!=e||this.$node.classList.remove("gridFreezeMode"))},columnMode:function(e){if(0==e.newValue){for(var t=this.getData("ltPropHandler"),o=this.getData("iniData"),a=this.scopeElement.querySelectorAll(t),r=0;r<a.length;r++)for(var i in o[r])o[r][i]&&a[r].setAttribute("lyte-grid-"+i,o[r][i]);this.data.ltPropUnitX==(this._originalX||this.getData("ltPropUnitxCopy"))?this.initialValSet(!0):this.setData("ltPropUnitX",this._originalX||this.getData("ltPropUnitxCopy"))}else this._originalX=this.getData("ltPropUnitxCopy"),"ltPropForcedReposition"!=e.item&&(this.columnModeLengthFind(),this.setData("gridLength",this.gridLength(null,this.getData("ltPropUnitxCopy")))),this.initialValSet.call(this)}.observes("ltPropColumn","ltPropColumnMode","ltPropForcedReposition"),bestFitObs:function(e){var t=this._bestfit;t&&(e.newValue&&t.classList.add(e.newValue),e.oldValue&&t.classList.remove(e.oldValue))}.observes("ltPropBestfitClass"),bfObs:function(){var e=this.getData("ltPropBestfit"),t=this.getData("ltPropBestfitType");if(e&&"grid"==t){var o=this.getData("ltPropGridSpaceColor"),a=this.getData("ltPropMarginLeftCopy"),r=this.getData("ltPropMarginTop"),i=this.getData("ltPropUnitxCopy"),s=this.getData("ltPropUnitY");this.scopeElement.style.backgroundImage="linear-gradient(to right,"+o+" "+a+"px,transparent 0px),linear-gradient(to bottom,"+o+" "+r+"px,transparent 0px)",this.scopeElement.style.backgroundSize=i+a+"px "+(s+r)+"px",this._bestfit&&("grid"==arguments[0].newValue&&this._bestfit.classList.add("lyteGrid"),this._bestfit.style.transform="translate(-"+a+"px,-"+r+"px)")}else e&&"default"!=t||(this.scopeElement.style.removeProperty("background-image"),this.scopeElement.style.removeProperty("background-size"),this._bestfit&&(this._bestfit.style.removeProperty("background-image"),this._bestfit.style.removeProperty("background-size"),this._bestfit.style.removeProperty("transform"),"default"==arguments[0].newValue&&this._bestfit.classList.remove("lyteGrid")))}.observes("ltPropBestfit","ltPropBestfitType"),lengthObs:function(){this.setData("gridLength",0),this.$node.reRender()}.observes("ltPropGridLength"),gridColorObs:function(e){"grid"==this.getData("ltPropBestfitType")&&this.getData("ltPropBestfit")&&(this.scopeElement.style.backgroundImage="linear-gradient(to right,"+e.newValue+" "+this.getData("ltPropMarginLeftCopy")+"px,transparent 0px),linear-gradient(to bottom,"+e.newValue+" "+this.getData("ltPropMarginTop")+"px,transparent 0px)")}.observes("ltPropGridSpaceColor"),dataSetting:function(e,t,o,a,r){var i={x:void 0,y:void 0,length:1,height:1,nodeName:"",preX:[],preY:[],preLength:[],preHeight:[],component:void 0};if(o){var s=parseInt(r/a);i.x=void 0,i.y=void 0,i.length=s,i.height=parseInt(this.getData("ltPropDefaultHeight")),this._dopeHgt=i.height}else i=this.initialPosFind.call(this,e);return i.nodeName=e,i.nodeName.dataSet={},i.oldX=[],i.oldY=[],i.oldLength=[],i.oldHeight=[],e.elemNum=t,i.minLength=e.getAttribute("lyte-grid-min-length")?this.returnWid(e.getAttribute("lyte-grid-min-length"),!0):this.returnWid(this.getData("ltPropDefaultMinLength"),!0),i.minHeight=e.getAttribute("lyte-grid-min-height")?this.returnWid(e.getAttribute("lyte-grid-min-height")):this.returnWid(this.getData("ltPropDefaultMinHeight")),i.maxLength=e.getAttribute("lyte-grid-max-length")?this.returnWid(e.getAttribute("lyte-grid-max-length"),!0):this.returnWid(this.getData("ltPropDefaultMaxLength"),!0),i.maxHeight=e.getAttribute("lyte-grid-max-height")?this.returnWid(e.getAttribute("lyte-grid-max-height")):this.returnWid(this.getData("ltPropDefaultMaxHeight")),i.component=this,i},append:function(e,t,o,a){$L.fastdom.mutate((function(){var r=document.createElement("div");e.querySelector(".lyteGridResize."+t[o.indexOf(a)])||(r.setAttribute("class",t[o.indexOf(a)]+" lyteGridResize"),e.appendChild(r))}))},maxPosFind:function(e,t,o,a,r){for(var i=[],s=[],l=[],n=[],p=0;p<e.length;p++){if(!r){var c=this.emptySpaceFind.call(this,{length:a[p].length,height:a[p].height,x:a[p].x,y:a[p].y,nodeName:a[p].nodeName});e[p]._addGrid&&!o||(a[p].x=c[0].x,a[p].y=c[0].y),e[p]._addGrid&&delete e[p]._addGrid}s.push(a[p].length),i.push(a[p].height),l.push(a[p].y+a[p].height),n.push(a[p].x+a[p].length)}r||this.previousPos.call(this,e,!0),t.MaxLength=Math.max.apply(null,s.length?s:[0]),t.MaxHeight=Math.max.apply(null,i.length?i:[0]),t.MaxBottom=Math.max.apply(null,l.length?l:[0]),t.MaxLeft=Math.max.apply(null,n.length?n:[this.getData("gridLength")])},initialValSet:function(e,t){var o=this.getData("lyteQuerySelector"),a=this.getData("lyteGridStack"),r=this.$node.querySelector(this.data.ltPropScope),i=parseFloat(this.getData("ltPropUnitxCopy")),s=parseFloat(this.getData("ltPropUnitY")),l=parseFloat(this.data.ltPropUnitX),n=parseFloat(this.getData("ltPropMarginTop")),p=parseFloat(this.getData("ltPropMarginLeftCopy")),c=parseInt(this.getData("gridLength")),d=this.getData("ltPropColumnMode"),u=this.getData("ltPropColumn"),h=this.bcrrelem?this.bcrrelem:this.scopeElement.getBoundingClientRect(),m=this.getData("ltPropResizeDirection");o.occupied=[],o.currentPos=0,o.verticalMove=!0;var y=r.querySelectorAll(this.data.ltPropHandler);if(r.dataSet={},o.elementCount=[],!t){for(var f=0;f<y.length;f++){if(a[f]=this.dataSetting.call(this,y[f],f,d,u,c),o.elementCount.push(f),1==this.getData("ltPropResize"))if(0==a[f].nodeName.querySelectorAll(".lyteGridResize").length&&"disabled"!=a[f].nodeName.getAttribute("lyte-grid-resize"))for(var g=0;g<m.length;g++){var v=["left","right","bottom","bottomLeft","bottomRight","top","topLeft","topRight"];-1!=v.indexOf(m[g])&&this.append(y[f],["lyteGridStackLeft","lyteGridStackRight","lyteGridStackBottom","lyteGridStackBottomLeft","lyteGridStackBottomRight","lyteGridStackTop","lyteGridStackTopLeft","lyteGridStackTopRight"],v,m[g])}}this.maxPosFind(y,o,d,a)}if(this._initialWindowWidth==window.innerWidth&&(this._initialXRatio=l/(h.width-this.data.gridLength*this.data.ltPropMarginLeft)),$L.fastdom.mutate(function(){if(r.style.height=o.MaxBottom*s+(o.MaxBottom+1)*parseInt(this.getData("ltPropMarginTop"))+"px","grid"==this.getData("ltPropBestfitType")&&this.getData("ltPropBestfit")){var e=this.getData("ltPropGridSpaceColor");this.scopeElement.style.backgroundImage="linear-gradient(to right,"+e+" "+p+"px,transparent 0px),linear-gradient(to bottom,"+e+" "+n+"px,transparent 0px)",this.scopeElement.style.backgroundSize=i+p+"px "+(s+n)+"px"}}.bind(this)),!e){var x,P=this._style;P||((P=document.createElement("style")).type="text/css",P.id="lyteGridStack",this._style=P,$L.fastdom.mutate(function(){this.$node.appendChild(P)}.bind(this)));var b=this.$node.querySelectorAll(this.data.ltPropHandler);if(b&&b.length)for(var D=0;D<b.length;D++)b[D].classList.add("lyteGridstackHandler");var L=h.width;this._initialXRatio=i/(h.width-this.data.gridLength*this.data.ltPropMarginLeft);for(f=1;f<=Math.max(c,o.MaxBottom)+1;f++)f<=c&&(0==this.$node.querySelectorAll("."+this.data.ltPropHandler.replace(/[.|#]/gi,"")+"lytegridx"+(f-1)).length&&(x=this.data.ltPropScope+" "+this.data.ltPropHandler+'[lyte-grid-x = "'+(f-1)+'"]{'+this.rtlfunc("left")+":"+100*((f-1)*i+f*p)/L+"%;}",this.styleFormation.call(this,x,this.data.ltPropHandler.replace(/[.|#]/gi,"")+"lytegridx"+(f-1))),f<=c&&0==this.$node.querySelectorAll("."+this.data.ltPropHandler.replace(/[.|#]/gi,"")+"lytegridlength"+(f-1)).length&&(x=this.data.ltPropScope+" "+this.data.ltPropHandler+'[lyte-grid-length = "'+f+'"]{width:'+100*(f*i+(f-1)*p)/L+"%;}",this.styleFormation.call(this,x,this.data.ltPropHandler.replace(/[.|#]/gi,"")+"lytegridlength"+(f-1)))),f<=o.MaxBottom+1&&(0==this.$node.querySelectorAll("."+this.data.ltPropHandler.replace(/[.|#]/gi,"")+"lytegridy"+(f-1)).length&&(x=this.data.ltPropScope+" "+this.data.ltPropHandler+'[lyte-grid-y = "'+(f-1)+'"]{top:'+((f-1)*s+f*n)+"px;}",this.styleFormation.call(this,x,this.data.ltPropHandler.replace(/[.|#]/gi,"")+"lytegridy"+(f-1))),f<=o.MaxHeight&&0==this.$node.querySelectorAll("."+this.data.ltPropHandler.replace(/[.|#]/gi,"")+"lytegridheight"+(f-1)).length&&(x=this.getData("ltPropScope")+" "+this.data.ltPropHandler+'[lyte-grid-height = "'+f+'"]{height:'+(f*s+(f-1)*n)+"px;}",this.styleFormation.call(this,x,this.data.ltPropHandler.replace(/[.|#]/gi,"")+"lytegridheight"+(f-1))));this.setData("ltPropGridHeight",o.MaxBottom)}this.displayGrid.call(this,null),this.bcrrelem&&delete this.bcrrelem},maxHeight:function(e){for(var t=this.$node.querySelectorAll(this.data.ltPropHandler),o=[],a=[],r=[],i=0;i<t.length;i++)a.push(e[i].length),o.push(e[i].height),r.push(e[i].y+e[i].height);return[Math.max.apply(null,a),Math.max.apply(null,o),Math.max.apply(null,r)]},styleFormation:function(e,t){$L.fastdom.mutate(function(){if(0==this.$node.querySelectorAll("."+t).length){var o=document.createElement("style");o.type="text/css",o.setAttribute("class",t),this._style.appendChild(o),o.append(e)}}.bind(this))},cssConstruct:function(e,t,o){var a,r=this.data.lyteGridStack,i=this.$node.querySelector(this.data.ltPropScope),s=this.data.lyteQuerySelector,l=this.returnWid(e.getAttribute("lyte-grid-height"),null,e),n=(this.returnWid(e.getAttribute("lyte-grid-length"),!0,e),parseInt(e.getAttribute("lyte-grid-x")),parseInt(e.getAttribute("lyte-grid-y"))),p=(this.data.ltPropUnitxCopy,this.data.ltPropUnitY),c=this.data.ltPropMarginTop;this.data.ltPropMarginLeftCopy;if("lyte-grid-height"==t)for(var d=Math.max(l,s.MaxHeight),u=0;u<=d;u++){var h=this.data.ltPropHandler.replace(/[.|#]/gi,"")+"lytegridheight"+u;0==this.$node.querySelectorAll("."+h).length&&(a=this.data.ltPropScope+" "+this.data.ltPropHandler+'[lyte-grid-height = "'+(u+1)+'"]{height:'+((u+1)*p+u*c)+"px;}",this.styleFormation.call(this,a,h))}else if("lyte-grid-y"==t&&n+l>=s.MaxBottom){for(u=s.MaxBottom-l;u<=n+l;u++){h=this.data.ltPropHandler.replace(/[.|#]/gi,"")+"lytegridy"+u;0==this.$node.querySelectorAll("."+h).length&&(a=this.data.ltPropScope+" "+this.data.ltPropHandler+'[lyte-grid-y = "'+u+'"]{top:'+(u*p+(u+1)*c)+"px;}",this.styleFormation.call(this,a,h))}s.previousNode=e}if(-1!=["lyte-grid-height","lyte-grid-y"].indexOf(t)){var m=this.maxHeight(r);if(this.setData("ltPropGridHeight",m[2]),s.MaxBottom>m[2])for(var y=s.MaxBottom;y>m[2];y--)if(this.$node.querySelector("."+this.data.ltPropHandler.replace(/[.|#]/gi,"")+"lytegridy"+y)){var f=this._style;if(f){var g=this.$node.querySelector("."+this.data.ltPropHandler.replace(/[.|#]/gi,"")+"lytegridy"+y);g&&g.parentElement==f&&f.removeChild(g)}}s.MaxBottom=m[2]}i.style.height=s.MaxBottom*p+(s.MaxBottom+1)*c+"px"},setVal:function(e,t,o){e.setAttribute(t,o),"lyte-grid-y"!=t&&"lyte-grid-height"!=t&&"lyte-grid-length"!=t&&"lyte-grid-x"!=t||this.cssConstruct.call(this,e,t),e.dataSet[t]=o},displayGrid:function(e,t){for(var o=this.scopeElement.querySelectorAll(this.data.ltPropHandler),a=this.data.lyteQuerySelector,r=this.data.lyteGridStack,i=0;i<o.length;i++)(i!=e&&!t||t&&i==e)&&(this.setVal(o[i],"lyte-grid-y",r[i].y),this.setVal(o[i],"lyte-grid-x",r[i].x),r[i].length!=r[i].nodeName.getAttribute("lyte-grid-length-old")&&this.setVal(o[i],"lyte-grid-length",r[i].length,!0),r[i].height!=r[i].nodeName.getAttribute("lyte-grid-height-old")&&this.setVal(o[i],"lyte-grid-height",r[i].height));this.scopeElement.dataSet["lt-prop-grid-height"]=a.MaxBottom,this.scopeElement.dataSet["lt-prop-grid-length"]=parseInt(this.data.gridLength),$L.fastdom.mutate(function(){this.positionFind.call(this,o)}.bind(this))},positionFind:function(e){e=e||this.scopeElement.querySelectorAll(this.data.ltPropHandler);for(var t,o=[],a=[],r=[],i=[],s=[],l=[],n=this.getData("lyteGridStack"),p=0;p<e.length;p++)n[p]&&(r.push(n[p].x),i.push(n[p].y),s.push(n[p].x+n[p].length),l.push(n[p].y+n[p].height));t=Math.max(Math.max.apply(null,r),Math.max.apply(null,i),Math.max.apply(null,s),Math.max.apply(null,l));for(var c=0;c<=t;c++){r=[],i=[],s=[],l=[];for(var d=0;d<n.length;d++)n[d].x<=c&&c<=n[d].x+n[d].length&&r.push(d),n[d].y<=c&&c<=n[d].y+n[d].height&&i.push(d);o.push(r),a.push(i)}Lyte.arrayUtils(this.data.xElements,"remove",0,this.data.xElements.length),Lyte.arrayUtils(this.data.xElements,"concat",o),Lyte.arrayUtils(this.data.yElements,"remove",0,this.data.yElements.length),Lyte.arrayUtils(this.data.yElements,"concat",a)},multipleRemoval:function(e){e=e||[];for(var t=0;t<e.length;t++)for(var o=t+1;o<e.length;o++)e[t]==e[o]&&(Lyte.arrayUtils(e,"removeAt",o),o--);return e},similarData:function(e,t){var o=[];if(null!=e&&null!=t){for(var a=0;a<e.length;a++)for(var r=0;r<t.length;r++)if(e[a]==t[r]){o.push(e[a]);break}}else o=e||t;return o},elementCheck:function(e,t,o){var a,r=[],i=this.getData("xElements"),s=1,l=this.getData("lyteGridStack");return l[t.elemNum].length>1?(o?(a=l[t.elemNum].x,s=0):a=l[t.elemNum].x+1,r=this.yElementsFind(a,l[t.elemNum].x+l[t.elemNum].length-s,i)):r=this.similarData.call(this,i[l[t.elemNum].x],i[l[t.elemNum].x+1]),r?this.multipleRemoval.call(this,r):[]},nodeName:function(e){var t=e.target.correspondingElement||e.target;if(t){var o,a=!1,r=this.$node.querySelector(this.data.ltPropScope);if("mousedown"!=e.type&&e.type){if("click"==e.type){for(;t&&t!=r&&t.classList&&"BODY"!=t.tagName&&"HTML"!=t.tagName;){if(t.classList.contains("lyteGridstackHandler")&&t.querySelectorAll(".lyteGridResize").length){a=!0;break}t=t.parentNode}if(a)return t}}else{for(;t&&t!=r&&t.classList&&"BODY"!=t.tagName&&"HTML"!=t.tagName;){if(t.classList.contains("lyteGridStackLeft")){o="left",a=!0;break}if(t.classList.contains("lyteGridStackRight")){o="right",a=!0;break}if(t.classList.contains("lyteGridStackBottom")){o="bottom",a=!0;break}if(t.classList.contains("lyteGridStackBottomLeft")){o="BottomLeft",a=!0;break}if(t.classList.contains("lyteGridStackBottomRight")){o="BottomRight",a=!0;break}if(t.classList.contains("lyteGridStackTop")){o="top",a=!0;break}if(t.classList.contains("lyteGridStackTopLeft")){o="topLeft",a=!0;break}if(t.classList.contains("lyteGridStackTopRight")){o="topRight",a=!0;break}if("LYTE-GRID-CONTENT"==t.tagName){o="content",a=!0;break}t=t.parentNode}if(t!=r&&a)return[o,t.parentElement,t.parentElement.parentElement]}}return null},valueUpdating:function(e,t,o){var a=this.getData("lyteGridStack");a[e][t]!=a[e].nodeName.dataSet[o]&&(a[e].nodeName.dataSet[o+"-old"]=a[e].nodeName.dataSet[o],a[e].nodeName.dataSet[o]=parseInt(a[e][t]))},bottomElementsCount:function(e,t){var o,a,r,i,s,l;"vertical"==t?(l="y",o="x",a="height",r="length",i="xElements",s="yElements","offsetTop","lyte-grid-height","ltPropMarginTop"):(l="x",o="y",a="length",r="height",i="yElements",s="xElements","offsetLeft","lyte-grid-length","ltPropMarginLeftCopy");var n=this.getData("lyteGridStack"),p=this.getData(i),c=this.getData(s),d=[],u=[],h=[];d=n[e.elemNum][a]>1?this.yElementsFind(n[e.elemNum][l]+1,n[e.elemNum][l]+n[e.elemNum][a]-1,c):this.similarData.call(this,c[n[e.elemNum][l]],c[n[e.elemNum][l]+n[e.elemNum][a]]),u=this.multipleRemoval.call(this,u.concat(p[n[e.elemNum][o]+n[e.elemNum][r]])),h=this.multipleRemoval.call(this,h.concat(p[n[e.elemNum][o]])),d=this.multipleRemoval.call(this,d),u.length&&Lyte.arrayUtils(u,"removeAt",u.indexOf(e.elemNum)),h.length&&Lyte.arrayUtils(h,"removeAt",h.indexOf(e.elemNum)),d.length&&Lyte.arrayUtils(d,"removeAt",d.indexOf(e.elemNum));var m=[];return m[m.length]=this.similarData.call(this,d,u).length,m[m.length]=this.similarData.call(this,d,h).length,m},returnY:function(e,t){var o,a,r;return t?(o="offTop",a=this.getData("ltPropMarginTop"),r=this.getData("ltPropUnitY")):(o="offLeft",a=this.getData("ltPropMarginLeftCopy"),r=this.getData("ltPropUnitxCopy")),parseInt(((e[o]-a)/(r+a)).toFixed(0))},scrollCheckY:function(e,t,o,a,r,i,s,l,n,p){if(!this._scrollCheck||p){var c,d="scrollTop",u="top",h="clientY",m="bottom",y="prevEvY",f="height";if(n&&(d="scrollLeft",u="left",h="clientX",m="right",y="prevEvX","prevEvY","clientY",f="width","scrollWidth"),!(t[f]>=s||Math.abs(t[f]-s)<1||_lyteUiUtils.isIos&&t[this.rtlfunc(m)]>r)){var g=Math.max(t[u],0)>Math.min(a[u],i[h])&&!(t[m]<a[m])&&(i[h]<e[y]||null==e[y]),v=Math.min(t[m],r)<Math.max(a[m],i[h])&&!(t[u]>a[u])&&(i[h]>e[y]||null==e[y]),x=(this.$node[d],(this.isSaf.isEdgeLyte||this.isSaf.isIE11Lyte)&&this.data.direction?-1:1);if(P.call(this,t,s,l,!n,-o*x,this.data.direction)&&g)this.$node[d]-=1*o*x,c=!0;else{if(!P.call(this,t,s,l,!n,o*x,this.data.direction)||!v)return window.cancelAnimationFrame(this._reqId),delete this._reqId,delete this._scrollCheck,void(e[y]=i[h]);this.$node[d]+=1*o*x,c=!0}c&&(this._scrollCheck=!0,this._reqId=window.requestAnimationFrame(function(){a=e.getBoundingClientRect(),this.scrollCheckY.call(this,e,t,o,a,r,i,s,this.$node[n?"scrollLeft":"scrollTop"],n,!0)}.bind(this)))}}function P(e,t,o,a,r,i){var s=a?"height":"width";return!(r>0&&o+e[s]>=t||r<0&&-o+e[s]>=t)&&(!!(!a&&this.isSaf.firefox&&i&&r<0&&0==o)||!(r<0&&0==o&&!(r<0&&this.isSaf.safari&&i&&0==o)))}},resetInitial:function(e,t,o,a,r){var i=e.initialLeft,s=e.initialTop;(t>i&&t<a||t<i&&t>a)&&(e.initialLeft=a),(o>s&&o<r||o<s&&o>r)&&(e.initialTop=r)},checkLeftandWidth:function(e,t,o,a,r){var i=null==r?t.width:r;return e+i+o>a.width&&(e=a.width-o-i),e<o&&(e=o),e},checkTop:function(e,t){return e<t&&(e=t),e},widthcheck:function(e,t,o,a){return o.width-a<t.offLeft+e&&(e=o.width-a-t.offLeft),e},mousemoveFun:function(e,t){if(!this._scrollCheck){this._gridMoved=!0;var o=this.elementSorting.call(this,this.data.lyteQuerySelector),a=this.getData("lyteGridStack");o.previousPosFind||(o.previousPosFind=!0,this.getMethods("onDragStart")&&this.executeMethod("onDragStart",this.retNode(o.SelectedNodes,a),this.$node));for(var r=0;r<o.SelectedNodes.length;r++){var i,s,l,n,p=!0,c=[],d=[],u=a[o.SelectedNodes[r]].nodeName,h=u.xPos,m=u.yPos,y=e.querySelectorAll(this.data.ltPropHandler),f=this.rtlfunc(t.clientX,"clientX"),g=t.clientY,v=this.data.gridLength,x=(this.data.ltPropGridHeight,this.data.xElements),P=this.data.yElements,b=this.data.ltPropUnitxCopy,D=this.data.ltPropUnitY,L=this.data.ltPropMarginTop,C=this.data.ltPropMarginLeftCopy,_=this.data.ltPropPrevent,S=u.offLeft,w=u.offTop,T=this.getData("ltPropContainment");u.offLeft=this.rtlfunc("offsetLeft",u),u.offTop=u.offsetTop,u.classList.add("lyteGridStackMove");var E=this.$node.getBoundingClientRect(),A=this.$node.scrollWidth,M=this.$node.scrollHeight,N=u.getBoundingClientRect(),k=window.innerWidth,F=this.$node.scrollLeft,I=this.$node.scrollTop,R=window.innerHeight,O=e.getBoundingClientRect();if(a[i=u.elemNum].length!=parseInt(u.getAttribute("lyte-grid-length"))||a[i].height!=parseInt(u.getAttribute("lyte-grid-height"))||u.offLeft<u.initialLeft&&u.offTop<u.initialTop?p=!0:(a[i].x==parseInt(u.getAttribute("lyte-grid-x"))||u.offTop>u.initialTop+D)&&(p=!1),u.flag){s=f-h;var $=g-m;_.horizontal||(T&&(s=this.checkLeftandWidth(s,N,C,O)),u.style[this.rtlfunc("left")]=s+"px",u.offLeft=s),_.vertical||(T&&($=this.checkTop($,L)),u.style.top=$+"px",u.offTop=$);var B=this.returnY(u);B!=a[i].x&&(n=!0),a[i].x=B>0?B:0,a[i].x=a[i].x>v-a[i].length?v-a[i].length:a[i].x,a[i].x<0&&(a[i].length-=a[i].x,a[i].x=0),this.scrollCheckY.call(this,u,E,D,N,R,t,M,I),this.scrollCheckY.call(this,u,E,b,N,k,t,A,F,!0)}else{var q=a[i].minLength*b+(a[i].minLength-1)*C,V=a[i].maxLength*b+(a[i].maxLength-1)*C,U=a[i].minHeight*D+(a[i].minHeight-1)*L,H=a[i].maxHeight*D+(a[i].maxHeight-1)*L;if(!_.horizontal&&-1!=["right","BottomRight","topRight"].indexOf(u.value)&&u.xOff+f-this.rtlfunc(N,"bccr")>=b){var Y=u.xOff+f-this.rtlfunc(N,"bccr");Y=V>=q?Math.min(Math.max(Y,q),V):Math.max(Y,q),T&&(Y=this.widthcheck(Y,u,O,C)),u.style.width=Y+"px",a[u.elemNum].length=Math.min(parseInt(((Y+C)/(C+b)).toFixed(0)),v-a[u.elemNum].x)}else if(!_.horizontal&&-1!=["left","BottomLeft","topLeft"].indexOf(u.value)&&u.xOff+Math.abs(f-this.rtlfunc(N,"bccr")-N.width)>=b){var j=u.offLeft,W=f-h,z=W-j,G=N.width;T&&(W=this.checkLeftandWidth(W,N,C,O,N.width-z)),(G-=z=W-j)>0&&G>=q&&(G<=V||V<0)&&(u.style.width=G+"px",u.style[this.rtlfunc("left")]=W+"px",u.offLeft=W);var K=Math.max(0,this.returnY(u));a[u.elemNum].length-=K-a[u.elemNum].x,a[i].x=K}if(!_.vertical&&-1!=["BottomRight","BottomLeft","bottom"].indexOf(u.value)&&u.yOff+g-N.top>=D){var Z=u.yOff+g-N.top;u.style.height=H>=U?Math.min(Math.max(Z,U),H)+"px":Math.max(Z,U)+"px",a[u.elemNum].height=parseInt((((u.style.height?parseInt(u.style.height):N.height)+L)/(L+D)).toFixed(0))}else if(!_.vertical&&-1!=["top","topRight","topLeft"].indexOf(u.value)&&u.yOff+Math.abs(g-N.top-N.height)>=D){var X=u.offTop,J=g-m,Q=N.height;T&&(J=this.checkTop(J,L)),(Q-=J-X)>0&&Q>=U&&(Q<=H||H<0)&&(u.style.height=Q+"px",u.style.top=J+"px",u.offTop=J);var ee=Math.max(0,this.returnY(u,!0));a[u.elemNum].height-=ee-a[u.elemNum].y,a[i].y=ee}this._parentGrid&&(u._percentHeight=100*(u.style.height?parseInt(u.style.height):N.height+2*L)/E.height+"%",u._percentLength=100*(u.style.width?parseInt(u.style.width):N.width+2*C)/E.width+"%")}var te=this.bottomElementsCount.call(this,u,"horizontal"),oe=this.bottomElementsCount.call(this,u,"vertical");if(u.initialTop>u.offTop&&!_.vertical?this.verticalMoveBottomToTop.call(this,e,u):u.initialTop<u.offTop&&!_.vertical&&this.verticalMoveTopToBottom.call(this,e,u),_.horizontal||(0!=oe[0]&&u.offLeft>u.initialLeft||!u.flag||0!=oe[1]&&u.initialLeft>u.offLeft&&a[u.elemNum].height<=parseInt(u.getAttribute("lyte-grid-height"))||a[i].length>u.dataSet["lyte-grid-length-old"]&&a[u.elemNum].height<=parseInt(u.getAttribute("lyte-grid-height")))&&(this.topCheck.call(this,u,e),this.getData("ltPropFloat")||this.topMoveFunc.call(this,u,null,null,null,!0)),!_.vertical&&(p||0==te[0]&&u.initialTop<u.offTop||0==te[1]&&u.initialTop>u.offTop||!this.getData("ltPropFloat"))){var ae=parseInt(((u.offTop-L)/(D+L)).toFixed(0));-1!=["top","topLeft","topRight"].indexOf(u.value)?a[i].y=ae:0==te[0]&&u.initialTop<u.offTop?a[i].y<=ae&&(a[i].y=ae):0==te[1]&&u.initialTop>u.offTop&&a[i].y>=ae&&(a[i].y=ae),a[i].y=a[i].y>0?a[i].y:0}if(n||a[u.elemNum].x!=parseInt(u.getAttribute("lyte-grid-x"))||a[u.elemNum].length!=parseInt(u.getAttribute("lyte-grid-length"))||a[u.elemNum].height!=parseInt(u.getAttribute("lyte-grid-height"))){this.valueUpdating.call(this,i,"x","lyte-grid-x"),this.valueUpdating.call(this,i,"y","lyte-grid-y"),this.valueUpdating.call(this,i,"length","lyte-grid-length"),this.valueUpdating.call(this,i,"height","lyte-grid-height"),this.positionFind.call(this,y);var re,ie=0;a=this.getData("lyteGridStack");for((u.initialLeft>u.offLeft||u.initialLeft<u.offLeft||u.dataSet["lyte-grid-length-old"]>a[u.elemNum].length)&&(c=x[a[u.elemNum].x].concat(x[a[u.elemNum].x+a[u.elemNum].length])),d=this.yElementsFind.call(this,a[u.elemNum].y+a[u.elemNum].height,o.MaxBottom,P),-1!=(c=this.multipleRemoval.call(this,this.similarData.call(this,c,d))).indexOf(u.elemNum)&&Lyte.arrayUtils(c,"removeAt",c.indexOf(u.elemNum)),re=0;re<c.length;re++)if(a[u.elemNum].y+a[u.elemNum].height<=a[c[re]].y+1&&(u.initialLeft>u.offLeft&&a[c[re]].x==a[u.elemNum].x+a[u.elemNum].length||u.initialLeft<u.offLeft&&a[u.elemNum].x==a[c[re]].x+a[c[re]].length||u.dataSet["lyte-grid-length-old"]-a[u.elemNum].length==1)&&(l=this.heightGet.call(this,a[c[re]].nodeName))){!1,ie=a[c[re]].y,a[c[re]].y=a[c[re]].y-(this.getData("ltPropFloat")&&a[c[re]].y-l<a[u.elemNum].y?a[c[re]].y-a[u.elemNum].y:l),this.valueUpdating.call(this,c[re],"y","lyte-grid-y"),this.positionFind.call(this,y),this.topMoveFunc.call(this,a[c[re]].nodeName,ie,!1,u),this.displayGrid.call(this,u.elemNum);break}(a[u.elemNum].y<parseInt(u.getAttribute("lyte-grid-y"))||u.initialTop-u.offTop>parseInt(L))&&!this.getData("ltPropFloat")&&this.topMoveFunc.call(this,u,parseInt(u.getAttribute("lyte-grid-y")),!1,u),a[u.elemNum].height>u.dataSet["lyte-grid-height-old"]&&!u.flag?(o.verticalMove=!1,u.setAttribute("lyte-grid-height",a[u.elemNum].height),this.verticalCheck.call(this,a[u.elemNum],a[u.elemNum].y+a[u.elemNum].height,a[u.elemNum].y+a[u.elemNum].height,u,!0),this.displayGrid.call(this,u.elemNum)):a[u.elemNum].height<u.dataSet["lyte-grid-height-old"]&&!u.flag&&(o.verticalMove=!1,u.setAttribute("lyte-grid-height",a[u.elemNum].height),this.topMoveFunc.call(this,u,a[u.elemNum].y,!0),this.displayGrid.call(this,u.elemNum)),this.getData("ltPropFloat")||this.topMoveAllGrid.call(this,u,a)}else this.getData("ltPropCheckCurrentPosition")&&this.positionFind.call(this);l=this.getData("ltPropFloat")?0:this.heightGet.call(this,u),this.getMethods("onDrag")&&this.executeMethod("onDrag",u,t,this.$node),this.resetInitial(u,u.offLeft,u.offTop,S,w)}var se=this._bestfit;if(se&&u&&this.getData("ltPropBestfit")&&1==o.SelectedNodes.length){var le=this.getData("ltPropBestfitType");if(se.style[this.rtlfunc("left")]=a[u.elemNum].x*b+(a[u.elemNum].x+1)*C+"px",se.style.top=(a[u.elemNum].y-l)*D+(a[u.elemNum].y+1-l)*L+"px",se.style.width=a[u.elemNum].length*b+(a[u.elemNum].length-1)*C+("grid"==le?C:0)+"px",se.style.height=a[u.elemNum].height*D+(a[u.elemNum].height-1)*L+("grid"==le?L:0)+"px",se.style.display="block","grid"==le){var ne=this.getData("ltPropGridSpaceColor");se.style.backgroundImage="linear-gradient(to right,"+ne+" "+C+"px,transparent 0px),linear-gradient(to bottom,"+ne+" "+L+"px,transparent 0px)",se.style.backgroundSize=C+b+"px "+(D+L)+"px",se.style.transform="translate(-"+(this.data.direction?0:C)+"px,-"+L+"px)"}}}},topMoveAllGrid:function(e,t){for(var o=this.getData("yElements"),a=e.constructor==Number?e:t[e.elemNum].y+t[2*e.elemNum.height],r=this.similarData(this.elementSorting(this.yElementsFind(e.constructor==Number?e:t[e.elemNum].y+t[e.elemNum].height,Math.min(this.getData("lyteQuerySelector").MaxBottom,isNaN(a)?this.getData("lyteQuerySelector").MaxBottom:a),o))),i=0;i<r.length;i++)if(r[i]!=e.elemNum){var s=this.heightGet.call(this,t[r[i]].nodeName);s&&(t[r[i]].y=t[r[i]].y-s,this.valueUpdating.call(this,r[i],"y","lyte-grid-y"),this.topMoveFunc.call(this,t[r[i]].nodeName,t[r[i]].y),this.displayGrid.call(this,r[i],!0))}},verticalMoveBottomToTop:function(e,t){$L.fastdom.measure(function(){var o,a,r=[],i=0,s=[],l=this.getData("ltPropFloat"),n=this.getData("ltPropMarginTop"),p=this.getData("lyteGridStack"),c=this.getData("ltPropCheckCurrentPosition");s=this.elementCheck.call(this,e,t),o=c?this.returnY(t,!0):p[t.elemNum].y,a=this.getData("yElements")[Math.max(0,o)];var d=t.offTop;for(a&&(s=this.similarData.call(this,s,a)),-1!=s.indexOf(t.elemNum)&&Lyte.arrayUtils(s,"removeAt",s.indexOf(t.elemNum)),h=0;h<s.length;h++){var u=p[s[h]].nodeName.offsetTop;(c?d<u+p[s[h]].nodeName.offsetHeight-.5*n&&(d>u+n||o<=0)&&o<p[s[h]].y+p[s[h]].height&&(o>p[s[h]].y||o<=0)&&t.initialTop>d:d<u+p[s[h]].nodeName.offsetHeight-.5*n&&d>u+n&&p[t.elemNum].y==p[s[h]].y+p[s[h]].height&&t.initialTop>d)&&(r[r.length]=s[h])}if(r.length){r=this.elementSorting.call(this,r||[]),this._occupied=r.slice();for(var h=0;h<r.length;h++){i=this.heightGet.call(this,t,p[r[h]].nodeName),l&&(i=p[r[h]].height>i?i:p[r[h]].height);var m=p[r[h]].y+p[r[h]].height;-1==["top","topLeft","topRight"].indexOf(t.value)&&(p[t.elemNum].y=m-i,this.valueUpdating.call(this,t.elemNum,"y","lyte-grid-y"));var y=p[t.elemNum].y+p[t.elemNum].height<p[r[h]].y-this.heightGet.call(this,p[r[h]].nodeName)?p[r[h]].y-this.heightGet.call(this,p[r[h]].nodeName):p[t.elemNum].y+p[t.elemNum].height;this.verticalCheck.call(this,p[r[h]],m,y+p[r[h]].height,t,!0),p[r[h]].y=y,this.valueUpdating.call(this,r[h],"y","lyte-grid-y"),(!l||h==r.length-1&&0!=h)&&this.topMoveFunc.call(this,t,p[t.elemNum].y+i,!1),l||this.topMoveFunc.call(this,p[r[h]].nodeName,p[r[h]].y,!0)}delete this._occupied,this.displayGrid.call(this)}}.bind(this))},verticalMoveTopToBottom:function(e,t){$L.fastdom.measure(function(){var o,a,r,i=[],s=[],l=0,n=this.getData("lyteGridStack"),p=this.getData("ltPropUnitY"),c=this.getData("ltPropCheckCurrentPosition");for(s=this.elementCheck.call(this,e,t),a=n[t.elemNum].y,(r=this.getData("yElements")[(c?this.returnY(t,!0):a)+n[t.elemNum].height])&&(s=this.similarData.call(this,s,r)),-1!=s.indexOf(t.elemNum)&&Lyte.arrayUtils(s,"removeAt",s.indexOf(t.elemNum)),o=0;o<s.length;o++){var d=n[s[o]].nodeName.offsetTop,u=n[s[o]].nodeName.offsetHeight,h=this.rtlfunc("offsetLeft",n[s[o]].nodeName),m=n[s[o]].nodeName.offsetWidth,y=t.offsetHeight;(c?t.offTop>d+(this.getData("ltPropHitBottom")?u-parseInt(this.getData("ltPropMarginTop")):parseInt(this.getData("ltPropMarginTop"))-y)&&t.initialTop<=t.offTop:t.offTop>d+(this.getData("ltPropHitBottom")?u-parseInt(this.getData("ltPropMarginTop")):parseInt(this.getData("ltPropMarginTop"))-y)&&t.initialTop<=t.offTop&&h+m>t.initialLeft&&t.initialLeft+t.clientWidth>h&&(t.initialTop+y<d||t.initialTop>d+u))&&(i[i.length]=s[o])}if(i.length){var f=[];for(o=0;o<i.length;o++)f.push(n[i[o]].height+n[i[o]].y);for(var g=f.reduce((function(e,t){return Math.max(e,t)})),v=0;v<i.length;v++)this.getData("ltPropFloat")?(n[t.elemNum].y=parseInt(((t.offsetTop-p)/(p+parseInt(this.getData("ltPropMarginTop")))).toFixed(0)),this.verticalCheck.call(this,n[t.elemNum],parseInt(t.getAttribute("lyte-grid-y"))+n[t.elemNum].height,n[t.elemNum].y+n[t.elemNum].height,t,!0)):((l=this.heightGet.call(this,n[i[v]].nodeName,t))&&(n[i[v]].y-=l,this.valueUpdating.call(this,i[v],"y","lyte-grid-y"),g=0==v||n[i[v]].height+n[i[v]].y>n[i[v-1]].height+n[i[v-1]].y?n[i[v]].height+n[i[v]].y:n[i[v-1]].height+n[i[v-1]].y),n[t.elemNum].y=g,o!=i.length-1&&0==o||this.topMoveFunc.call(this,n[i[v]].nodeName));this.valueUpdating.call(this,t.elemNum,"y","lyte-grid-y"),this.verticalCheck.call(this,n[t.elemNum],parseInt(t.getAttribute("lyte-grid-y"))+n[t.elemNum].height,n[t.elemNum].y+n[t.elemNum].height,n[t.elemNum].nodeName,!0),this.displayGrid.call(this)}}.bind(this))},heightGet:function(e,t,o){if(e.elemNum>=0){var a,r,i=[],s=0,l=[],n=[],p=this.getData("lyteGridStack");t||(t=e);var c=this.getData("xElements"),d=this.getData("yElements");l=p[e.elemNum].length>1?this.yElementsFind(p[e.elemNum].x+1,p[e.elemNum].length+p[e.elemNum].x-1,c):this.similarData.call(this,c[p[e.elemNum].x],c[p[e.elemNum].x]);for(var u=p[e.elemNum].y+p[e.elemNum].height-1;u>=0;u--)n=this.yElementsFind(0,p[e.elemNum].y+p[e.elemNum].height-1,d);for(-1!=(l=this.multipleRemoval(this.elementSorting.call(this,this.similarData.call(this,l,n)))).indexOf(e.elemNum)&&Lyte.arrayUtils(l,"removeAt",l.indexOf(e.elemNum)),a=0;a<l.length;a++)(l[a]!=t.elemNum||o)&&p[e.elemNum].y>=p[l[a]].y&&(p[l[a]].x>p[e.elemNum].x&&p[l[a]].x<p[e.elemNum].x+p[e.elemNum].length||p[l[a]].x+p[l[a]].length>p[e.elemNum].x&&p[l[a]].x+p[l[a]].length<p[e.elemNum].x+p[e.elemNum].length||p[l[a]].x>p[e.elemNum].x&&p[l[a]].x+p[l[a]].length<p[e.elemNum].x+p[e.elemNum].length||p[l[a]].x<p[e.elemNum].x&&p[l[a]].x+p[l[a]].length>p[e.elemNum].x+p[e.elemNum].length||p[l[a]].x==p[e.elemNum].x||p[l[a]].x+p[l[a]].length==p[e.elemNum].length+p[e.elemNum].x)&&(i[i.length]=l[a]);for(r=0;r<i.length;r++)0==r?s+=-p[i[0]].y-p[i[0]].height+p[e.elemNum].y:-p[i[r]].y-p[i[r]].height+p[e.elemNum].y<s&&(s=-(p[i[r]].y+p[i[r]].height-p[e.elemNum].y));return 0==i.length&&(s=p[e.elemNum].y),s<0&&(s=0),s}},topMoveFunc:function(e,t,o,a,r){var i,s,l=[],n=this.getData("lyteQuerySelector"),p=n.occupied,c=n.element,d=this.getData("lyteGridStack");for(p.push(e.elemNum),a=a||e,-1!=(l=this.elementSorting.call(this,this.elementCheck.call(this,c,e,r))).indexOf(e.elemNum)&&Lyte.arrayUtils(l,"removeAt",l.indexOf(e.elemNum)),p=p.concat(l),i=0;i<l.length;i++)d[l[i]].nodeName.classList.contains("gridSelected")||(d[e.elemNum].x>=d[l[i]].x&&d[e.elemNum].x+d[e.elemNum].length<=d[l[i]].x||d[e.elemNum].x+d[e.elemNum].length>=d[l[i]].x&&d[e.elemNum].x+d[e.elemNum].length<=d[l[i]].x+d[l[i]].length||d[e.elemNum].x>d[l[i]].x||d[e.elemNum].x+d[e.elemNum].length>d[l[i]].x+d[l[i]].length)&&(d[e.elemNum].y+d[e.elemNum].height<=d[l[i]].y+d[l[i]].height||o)&&(s=this.heightGet.call(this,d[l[i]].nodeName,null,!o),d[l[i]].y=d[l[i]].y-s,this.valueUpdating.call(this,l[i],"y","lyte-grid-y"),this.positionFind.call(this),s&&(this.topMoveFunc.call(this,d[l[i]].nodeName,d[l[i]].y+s,o,a),o||this.displayGrid.call(this,a.elemNum)))},elementSorting:function(e,t){var o;o=t?"x":"y";for(var a=this.getData("lyteGridStack"),r=0;r<e.length;r++)for(var i=r+1;i<e.length;i++)if(a[e[r]][o]>a[e[i]][o]){var s=e[r];e[r]=e[i],e[i]=s}return e},topCheck:function(e,t,o,a,r,i){var s,l,n,p=!1,c=[],d=[],u=[],h=0,m=this.getData("lyteGridStack"),y=this.getData("xElements"),f=this.getData("yElements");for(l=m[e.elemNum].y,d=m[e.elemNum].length>1?this.elementSorting(this.multipleRemoval(this.yElementsFind.call(this,m[e.elemNum].x+1,m[e.elemNum].x+m[e.elemNum].length-1,y))):this.similarData.call(this,y[m[e.elemNum].x],y[m[e.elemNum].x+1]),(u=m[e.elemNum].height>1?this.yElementsFind(l+1,m[e.elemNum].y+m[e.elemNum].height-1,f):this.similarData.call(this,f[m[e.elemNum].y],f[m[e.elemNum].y+1]))&&(d=this.similarData.call(this,d,this.multipleRemoval.call(this,u))),-1!=(d=this.elementSorting.call(this,this.multipleRemoval.call(this,d))).indexOf(e.elemNum)&&Lyte.arrayUtils(d,"removeAt",d.indexOf(e.elemNum)),s=d.length-1;s>-1&&(o?m[e.elemNum].x==e.getAttribute("lyte-grid-x")&&m[e.elemNum].length==e.getAttribute("lyte-grid-length")||(p=!0):((m[e.elemNum].x+m[e.elemNum].length>m[d[s]].x&&m[e.elemNum].x<m[d[s]].x||m[e.elemNum].x<m[d[s]].x+m[d[s]].length&&m[d[s]].x+m[d[s]].length<=m[e.elemNum].x+m[e.elemNum].length)&&l+m[e.elemNum].height>m[d[s]].y&&l<m[d[s]].y||l<m[d[s]].y+m[d[s]].height&&m[d[s]].y+m[d[s]].height<l+m[e.elemNum].height||l>=m[d[s]].y&&m[d[s]].y+m[d[s]].height>=l+m[e.elemNum].height||m[d[s]].y+m[d[s]].height<l+m[e.elemNum].height&&l<m[d[s]].y)&&(p=!0),!p||m[d[s]].nodeName.classList.contains("gridSelected")||!(m[e.elemNum].x<=m[d[s]].x+m[d[s]].length-1||m[d[s]].x+1>=m[e.elemNum].x+m[e.elemNum].length)||(c[c.length]=d[s],h+=m[d[s]].height,"horizontal"==this.getData("ltPropDirection")||a));s--)p=!1;if(c.length){o||this.valueUpdating.call(this,e.elemNum,"x","lyte-grid-x"),c=this.elementSorting.call(this,c,!0);for(var g=0;g<c.length;g++){var v=this.heightGet.call(this,m[c[g]].nodeName),x=m[e.elemNum].height+m[e.elemNum].y-v;if(n=x,"horizontal"==this.getData("ltPropDirection")||r){if(g>0&&(parseInt(m[c[g]].nodeName.getAttribute("lyte-grid-x"))+parseInt(m[c[g]].nodeName.getAttribute("lyte-grid-length"))==this.getData("gridLength")||0==parseInt(m[c[g]].nodeName.getAttribute("lyte-grid-x"))))break;this.rtlfunc("offsetLeft",e)>this.rtlfunc("offsetLeft",m[c[g]].nodeName)&&!r?this.horiMovement.call(this,e,c[g],"left",h,1==c.length||c.length>2&&1!=g,i):(this.rtlfunc("offsetLeft",e)<this.rtlfunc("offsetLeft",m[c[g]].nodeName)||r)&&this.horiMovement.call(this,e,c[g],"right",h,1==c.length||c.length>2&&1!=g,i)}else this.verticalCheck.call(this,m[c[g]],m[c[g]].y+m[c[g]].height,x+v+m[c[g]].height,e,m[e.elemNum].height<m[c[g]].height),m[c[g]].y=(n>m[e.elemNum].height+m[e.elemNum].y?n:m[e.elemNum].height+m[e.elemNum].y)-(this.getData("ltPropFloat")?0:this.heightGet.call(this,m[e.elemNum].nodeName)),this.valueUpdating.call(this,c[g],"y","lyte-grid-y");this.data.ltPropFloat||this.topMoveFunc.call(this,m[c[g]].nodeName,0==g||0!=m[c[g]].x&&m[c[g]].x+m[c[g]].length!=parseInt(this.data.gridLength)),this.displayGrid.call(this,e.elemNum)}}},horiMovement:function(e,t,o,a,r,i){var s=this.getData("lyteGridStack"),l=this.getData("lyteQuerySelector");if(s[t].x="left"==o?s[t].x-(i||1):s[t].x+(i||1),s[t].x<0||s[t].x+s[t].length>parseInt(this.getData("gridLength"))){s[t].x<0?s[t].x=0:s[t].x=parseInt(this.getData("gridLength"))-s[t].length,this.valueUpdating.call(this,t,"x","lyte-grid-x");var n=s[t].y+s[t].height;s[t].y=s[e.elemNum].y+s[e.elemNum].height;var p=this.getData("ltPropHandler");this.positionFind.call(this,this.scopeElement.querySelectorAll(p)),this.verticalCheck.call(this,s[t],n,s[e.elemNum].y+s[e.elemNum].height+s[t].height,e),this.valueUpdating.call(this,t,"y","lyte-grid-y"),this.displayGrid.call(this)}else{this.valueUpdating.call(this,t,"x","lyte-grid-x"),s[t].nodeName.initialLeft=[],s[t].nodeName.initialTop=[];for(var c=0;c<3;c++)s[t].nodeName.initialLeft[c]=this.rtlfunc("offsetLeft",s[t].nodeName),s[t].nodeName.initialTop[c]=s[t].nodeName.offsetTop;if(this.topCheck.call(this,s[t].nodeName,l.element,!0,null,!!i,i),r){var d=this.heightGet.call(this,s[t].nodeName);this.getData("ltPropFloat")||(s[t].y-=d,d&&this.topMoveFunc.call(this,s[t].nodeName))}this.displayGrid.call(this)}},verticalCheck:function(e,t,o,a,r,i){var s,l=[],n=[],p=!1,c=!1,d=[],u=[],h=[],m=this.getData("lyteGridStack");a=a||e.nodeName;var y=this.getData("xElements"),f=this.getData("yElements"),g=this.scopeElement;n="left"==i?n.concat(y[e.x]||[]):"right"==i?n.concat(y[e.x+e.length]||[]):e!=m[a.elemNum]?e.length>1?this.yElementsFind(e.x+1,e.x+e.length-1,y):this.similarData.call(this,y[e.x]||[],y[e.x+1]||[]):this.elementCheck.call(this,g,e.nodeName),n=this.multipleRemoval.call(this,n);for(var v=o-e.height;v<=o;v++)d=d.concat(f[v]||[]);for(d&&(n=this.similarData.call(this,n,this.multipleRemoval.call(this,d))),-1!=(n=this.elementSorting.call(this,n)).indexOf(e.nodeName.elemNum)&&Lyte.arrayUtils(n,"removeAt",n.indexOf(e.nodeName.elemNum)),-1!=n.indexOf(a.elemNum)&&Lyte.arrayUtils(n,"removeAt",n.indexOf(a.elemNum)),i&&(this.similarData.call(this,n,f[e.y+e.height].concat(f[e.y])).length||(n=[])),L=0;L<n.length;L++)n[L]!=e.nodeName.elemNum&&n[L]!=a.elemNum&&(r&&e.y==m[n[L]].y&&(c=!0),(e.y<m[n[L]].y+m[n[L]].height||c||r&&m[n[L]].y+m[n[L]].height>=e.y+e.height)&&(l[l.length]=n[L],p=!0)),p&&(p=!1,u.push(m[l[l.length-1]].height+m[l[l.length-1]].y),l.length>1&&h.push(m[l[l.length-1]].y-(m[l[0]].y+m[l[0]].height)));if(l.length){l=this.elementSorting.call(this,l),s=o;var x=[],P=[];o=Math.max.apply(null,u)-m[l[0]].y+s;for(var b=0;b<l.length;b++){var D=this.heightGet.call(this,m[l[b]].nodeName);if(0==b){if(s<=m[l[b]].y&&r)break;m[l[b]].y-s<1&&(m[l[b]].y=s,D=this.heightGet.call(this,m[l[b]].nodeName),m[l[b]].y-D>=s&&(m[l[b]].y-=D))}else m[l[b]].y=m[l[0]].y+m[l[0]].height+h[b-1],D=this.heightGet.call(this,m[l[b]].nodeName),m[l[b]].y-D>=s&&(m[l[b]].y-=D);this.valueUpdating.call(this,l[b],"y","lyte-grid-y")}x=this.yElementsFind.call(this,Math.min(e.x,m[a.elemNum].x),Math.max(e.x+e.length,m[a.elemNum].x+m[a.elemNum].length),y);for(var L=(x=this.elementSorting.call(this,this.multipleRemoval.call(this,this.similarData.call(this,x,l)))).length-1;L>=0;L--){P=[];var C=[];for(b=m[x[L]].x+1;b<m[x[L]].x+m[x[L]].length;b++)P=P.concat(y[b]);1==m[x[L]].length&&(P=this.similarData.call(this,y[m[x[L]].x],y[m[x[L]].x+1])),C=r?this.elementSorting.call(this,this.multipleRemoval.call(this,this.similarData.call(this,P,this.yElementsFind.call(this,parseInt(m[x[L]].nodeName.getAttribute("lyte-grid-y"))+1,parseInt(m[x[L]].nodeName.getAttribute("lyte-grid-y"))+m[x[L]].height,f)))):this.elementSorting.call(this,this.multipleRemoval.call(this,this.similarData.call(this,P,this.yElementsFind.call(this,parseInt(m[x[L]].nodeName.getAttribute("lyte-grid-y"))+1,parseInt(m[x[L]].nodeName.getAttribute("lyte-grid-y"))+m[x[L]].height,f)).concat(this.similarData.call(this,P,this.yElementsFind.call(this,parseInt(m[x[L]].y)+1,parseInt(m[x[L]].y)+m[x[L]].height,f)))));for(var _=0;_<C.length;_++)if(-1==l.indexOf(C[_])&&e.nodeName.elemNum!=C[_]&&a.elemNum!=C[_]){if(this._occupied&&-1!=this._occupied.indexOf(C[_]))continue;this.additionalCheck.call(this,C[_],m[x[L]].y+m[x[L]].height,l)}}}},yElementsFind:function(e,t,o){for(var a=[],r=e;r<=t;r++)a=a.concat(o[r]||[]);return a},additionalCheck:function(e,t,o){var a=this.getData("xElements"),r=this.getData("yElements"),i=this.getData("lyteGridStack"),s=[],l=[],n=t,p=e;s=s.concat(this.yElementsFind.call(this,parseInt(i[e].nodeName.getAttribute("lyte-grid-y"))+i[e].height,i[e].y+i[e].height,r)),l=i[e].length>1?(l=l.concat(a[i[e].x+1])).concat(a[i[e].x+i[e].length-1]):l.concat(this.similarData.call(this,a[i[e].x],a[i[e].x+1])),-1!=(s=this.similarData.call(this,s,l)).indexOf(e)&&Lyte.arrayUtils(s,"removeAt",s.indexOf(e));for(var c=0;c<s.length;c++)-1==o.indexOf(s[c])&&(o.push(s[c]),this.additionalCheck.call(this,s[c],t+i[e].height,o));if(i[p].y>n){var d=this.heightGet.call(this,i[p].nodeName);i[p].y-d<=n?i[p].y=n:i[p].y-=d}else i[p].y=n;o.push(p),this.valueUpdating.call(this,p,"y","lyte-grid-y")},previousPos:function(e,t){if(e&&e.length){for(var o=this.getData("lyteGridStack"),a=this.getData("lyteQuerySelector"),r=0;r<e.length;r++)a.currentPos<o[r].oldX.length&&(Lyte.arrayUtils(o[r].oldX,"remove",a.currentPos+1,o[r].oldX.length),Lyte.arrayUtils(o[r].oldY,"remove",a.currentPos+1,o[r].oldY.length),Lyte.arrayUtils(o[r].oldLength,"remove",a.currentPos+1,o[r].oldLength.length),Lyte.arrayUtils(o[r].oldHeight,"remove",a.currentPos+1,o[r].oldHeight.length)),o[r].oldX[o[r].oldX.length]=t?o[r].x:o[r].nodeName.getAttribute("lyte-grid-x"),o[r].oldY[o[r].oldY.length]=t?o[r].y:o[r].nodeName.getAttribute("lyte-grid-y"),o[r].oldLength[o[r].oldLength.length]=t?o[r].length:o[r].nodeName.getAttribute("lyte-grid-length"),o[r].oldHeight[o[r].oldHeight.length]=t?o[r].height:o[r].nodeName.getAttribute("lyte-grid-height");a.currentPos=o[0].oldX.length-1}},mousedown:function(e,t){if(!this.getData("ltPropFreezeMode")){var o=this.data.lyteQuerySelector,a=this.data.lyteGridStack,r=this.nodeName.call(this,t?e.touches[0]:e);if(r){this.mvefunc=this.mvefunc||this.mMove.bind(this),this.upfunc=this.upfunc||this.mouseup.bind(this);var i=r[0],s=r[1],l=this.$node.querySelector(this.data.ltPropScope),n=t?e.touches[0]:e;if(e.shiftKey){if(!o.allowMovement){this.getMethods("onBeforeSelect")&&(p=this.executeMethod("onBeforeSelect",r[1],e,this.$node)),0!=p&&((s=r[1]).initialLeft=[],s.initialTop=[],s.classList.contains("gridSelected")?s.classList.remove("gridSelected"):s.classList.add("gridSelected"))}}else if(o.BottomToTopFlag=!0,o.allowMovement=!0,this.mvefunc=this.mMove.bind(this),0==l.querySelectorAll(this.data.ltPropHandler+".gridSelected").length){if(s&&s.classList.contains("gridSelected"))return;var p;if(this.getMethods("onBeforeSelect")&&(p=this.executeMethod("onBeforeSelect",r[1],e,this.$node)),s&&0!=p){if(o.SelectedNodes=[],o.SelectedNodes.push(s.elemNum),o.element=l,s.initialLeft=this.rtlfunc("offsetLeft",s),s.initialTop=s.offsetTop,s.initialy=a[s.elemNum].y,s.initialx=a[s.elemNum].x,s.xPos=this.rtlfunc(n.clientX,"clientX")-this.rtlfunc("offsetLeft",s),s.yPos=n.clientY-s.offsetTop,"content"==i)s.flag=!0;else{s.value=i;var c=s.getBoundingClientRect();-1!=["BottomRight","right","topRight"].indexOf(i)?s.xOff=this.rtlfunc(c,"bccr")+c.width-this.rtlfunc(n.clientX,"clientX"):s.xOff=-this.rtlfunc(c,"bccr")+this.rtlfunc(n.clientX,"clientX"),-1!=["BottomRight","bottom","BottomLeft"].indexOf(i)?s.yOff=c.top+c.height-n.clientY:s.yOff=-c.top+n.clientY,s.flag=!1,this._resizeSelected=!0}if(s.classList.add("gridSelected"),$L(this.data.ltPropHandler+".lyteGridFocused:not(.gridSelected)",this.$node).removeClass("lyteGridFocused"),this.getData("ltPropBestfit")&&!this._bestfit){var d=this.getData("ltPropBestfitClass"),u=document.createElement("div");u.classList.add("lyteBestFit"),"grid"==this.getData("ltPropBestfitType")&&u.classList.add("lyteGrid"),d&&u.classList.add(d),u.style.display="none",this._bestfit=u,$L.fastdom.mutate((function(){l.appendChild(u)}))}document.body.addEventListener(t?"touchmove":"mousemove",this.mvefunc,!0),this.getMethods("onSelect")&&this.executeMethod("onSelect",s,e,this.$node)}}else{o.SelectedNodes=[];s=this.$node.querySelectorAll(this.data.ltPropHandler+".gridSelected");for(var h=0;h<s.length;h++)o.SelectedNodes.push(l.querySelectorAll(this.getData("ltPropHandler")+".gridSelected")[h].elemNum),s[h].left=s[h].offsetLeft,s[h].top=s[h].offsetTop,s[h].flag=!0,s[h].initialLeft=s[h].offsetLeft,s[h].initialTop=s[h].offsetTop,s[h].xPos=this.rtlfunc(n.clientX,"clientX")-s[h].offsetLeft,s[h].yPos=n.clientY-s[h].offsetTop;o.SelectedNodes=this.elementSorting.call(this,o.SelectedNodes),document.body.addEventListener(t?"touchmove":"mousemove",this.mvefunc,!0),this.getMethods("onSelect")&&this.executeMethod("onSelect",s,e,this.$node)}o.previousPosFind=!1}}},mMove:function(e){var t="touchmove"==e.type;t&&1!=e.touches.length||(this.mousemoveFun.call(this,this.scopeElement,t?e.touches[0]:e),t||(e.preventDefault(),e.stopPropagation(),e.preventDefault()))},mouseup:function(e){var t,o=this.getData("lyteQuerySelector"),a=this.getData("lyteGridStack"),r="touchend"==e.type,i=(this.nodeName.call(this,e),this.$node.querySelector(this.data.ltPropScope));this.elementSorting.call(this,o.elementCount);if(!e.shiftKey||o.allowMovement){var s,l,n=this._bestfit;if(o.verticalMove=!0,o.allowMovement=!1,o.SelectedNodes.length){for(l=this.$node.querySelectorAll(this.data.ltPropHandler+".gridSelected"),this._gridMoved&&this.getMethods("onBeforeDrop")&&(s=this.executeMethod("onBeforeDrop",l,event,this.$node,!!this._resizeSelected)),t=o.SelectedNodes.length-1;t>=0;t--){var p=a[o.SelectedNodes[t]].nodeName;if(p.classList.contains("gridSelected")){if(this._gridMoved&&!this.getData("ltPropFloat")&&0!=s){var c=this.heightGet.call(this,p);a[p.elemNum].y-=c,this.topCheck.call(this,p,this.scopeElement),this.topMoveFunc.call(this,p,a[p.elemNum].y+c,!1)}this.displayGrid.call(this),p.classList.remove("gridSelected"),p.classList.remove("lyteGridStackMove"),p.style.removeProperty(this.rtlfunc("left")),p.style.removeProperty("top"),p.style.removeProperty("height"),p.style.removeProperty("width"),Lyte.arrayUtils(o.occupied,"remove",0,o.occupied.length),this._gridMoved&&(0!=s&&this.topCheck.call(this,p,i),0==p.flag&&p._childGrid&&setTimeout(p._childGrid.reRender,150,!0)),delete p.initialy,delete p.xPos,delete p.yPos,delete p.flag,delete p.offLeft,delete p.offTop,delete p.initialx,delete p.instantPreviousX,delete p.instantPreviousY,delete p.val,delete p.xOff,delete p.yOff,delete p.initialLeft,delete p.initialTop,delete p.flag,delete p.value,delete p.prevEvX,delete p.prevEvY}n&&(n.style.display="none"),this.findGrid()}window.cancelAnimationFrame(this._reqId),delete this._reqId,delete this._scrollCheck,e.stopPropagation(),r||e.preventDefault()}if(this._gridMoved)if(0!=s){if(this.displayGrid.call(this),o.SelectedNodes.length&&o.previousPosFind){var d=this.data.ltPropHandler;this.previousPos.call(this,i.querySelectorAll(d))}if(this.getMethods("onDrop")){var u=!!this._resizeSelected;window.requestAnimationFrame(function(){this.executeMethod("onDrop",l,e,this.$node,u)}.bind(this))}}else o.currentPos+=1,this.undoPrevious.call(this);document.body.removeEventListener(r?"touchmove":"mousemove",this.mvefunc,!0),o.SelectedNodes=[],delete this._gridMoved,delete this._resizeSelected}document.removeEventListener(r?"touchend":"mouseup",this.upfunc,!0)},keydown:function(e){document._lyteCurrentGrid==this&&this.getData("ltPropUndo")&&!this.getData("ltPropFreezeMode")&&((e.ctrlKey||e.metaKey)&&e.shiftKey&&90==e.keyCode?this.undoNext.call(this):!e.ctrlKey&&!e.metaKey||e.shiftKey||90!=e.keyCode||this.undoPrevious.call(this))},returnWid:function(e,t,o){if(e){if(e.constructor!=String)return e;var a,r,i,s=e.match(/[\w|.]+(?=%)/gi);return s&&s.length?(t?(i="width",a=this.getData("ltPropUnitxCopy")):(i="height",a=this.getData("ltPropUnitY"),r="ltPropMarginTop"),this.gridLength((this.bcrrelem?this.bcrrelem[i]:this.scopeElement.getBoundingClientRect()[i])*parseFloat(s[0])/100,a,r)):parseInt(e)}},initialPosFind:function(e){var t={},o=this.getData("ltPropForcedReposition");return t.x=e.getAttribute("lyte-grid-x")&&!o?parseInt(e.getAttribute("lyte-grid-x")):void 0,t.y=e.getAttribute("lyte-grid-y")&&!o?parseInt(e.getAttribute("lyte-grid-y")):void 0,t.length=e.getAttribute("lyte-grid-length")?this.returnWid(e.getAttribute("lyte-grid-length"),!0,e):this.returnWid(this.getData("ltPropDefaultLength"),!0),t.height=e.getAttribute("lyte-grid-height")?this.returnWid(e.getAttribute("lyte-grid-height"),null,e):this.returnWid(this.getData("ltPropDefaultHeight")),t},checkPreviousGrid:function(){for(var e=this.$node.parentElement;e&&"BODY"!=e.tagName;){if("LYTE-GRIDSTACK"==e.tagName){this._parentGrid=e,this._parentGridIndex=e.component._childGrids.length,e.component._childGrids.push(this.$node);break}"LYTE-GRID-CONTENT"==e.tagName&&(e.parentElement._childGrid=this.$node,this._parentComp=e.parentElement),e=e.parentElement}return!(!e||"LYTE-GRIDSTACK"!=e.tagName)},retNode:function(e,t){for(var o=[],a=0;a<e.length;a++)t[e[a]]&&o.push(t[e[a]].nodeName);return o},findGrid:function(){var e,t,o=this.$node.getBoundingClientRect(),a=this.getData("lyteGridStack"),r=this.$node.scrollLeft,i=this.$node.scrollTop,s=r+o.width,l=i+o.height,n={left:this.returnY({offLeft:r}),top:this.returnY({offTop:i},!0),right:this.returnY({offLeft:s}),bottom:this.returnY({offTop:l},!0)};this.setData("ltPropVisibleBoundary",n),e=this.similarData(this.multipleRemoval(this.yElementsFind(n.top+1,n.bottom-1,this.getData("yElements"))),this.multipleRemoval(this.yElementsFind(n.left+1,n.right-1,this.getData("xElements")))),t=this.retNode(e,a),this.setData("ltPropVisible",t)},scroll:function(e){this.findGrid(),this.getMethods("onScroll")&&this.executeMethod("onScroll",this.getData("ltPropVisible"),this.getData("ltPropVisibleBoundary"),this.$node)},click:function(e){var t=this.data.ltPropGridSelectionClass;if(t){for(var o=this.nodeName(e),a=this.$node.querySelectorAll("."+t),r=0;r<a.length;r++)a[r].classList.remove(t);o&&o.classList.add(t)}},mousebind:function(e){if(e.target!=this&&2!=e.button){var t="touchstart"==e.type;if(t&&1!=e.touches.length)return;this.component.mousedown.call(this.component,e,t),e.shiftKey||document.addEventListener(t?"touchend":"mouseup",this.component.upfunc,!0),e.stopPropagation()}document._lyteCurrentGrid=this.component},prevent:function(e){1==e.touches.length&&this.nodeName.call(this,e.touches[0])&&(document.activeElement!=document.body&&document.activeElement.blur(),e.preventDefault())},didConnect:function(){var e=this.data.ltPropScope.trim(),t=this.data.ltPropUnitX,o=this.data.ltPropMarginLeft;this.setData("ltPropUnitxCopy",t),this.setData("ltPropMarginLeftCopy",o),this._scroll=this.scroll.bind(this),this._click=this.click.bind(this),this._prevtch=this.prevent.bind(this),this.$node.addEventListener("scroll",this._scroll,!0),document.addEventListener("click",this._click);var a=this.$node.querySelector(e);this.data.lyteQuerySelector;this.scopeElement=a,a.classList.add("lyteGridstackScope"),-1==a.tabIndex&&(a.tabIndex=0),a.lyteData={},a.component=this,a.addEventListener("mousedown",this.mousebind),a.addEventListener("touchmove",this._prevtch),a.addEventListener("touchstart",this.mousebind),this.setData("lyteQuerySelector.keydown",this.keydown.bind(this)),document.addEventListener("keydown",this.getData("lyteQuerySelector").keydown),this.$node.getEmptyPos=function(e){return this.emptySpaceFind.call(this,e||{})}.bind(this),this.$node.addGrid=function(e,t){$L.fastdom.mutate(function(){e._addGrid=!0;var o=this.getData("ltPropColumnMode");t=null!=t?t:{};var a=parseInt(e.getAttribute("lyte-grid-x")),r=parseInt(e.getAttribute("lyte-grid-y")),i=parseInt(e.getAttribute("lyte-grid-length")),s=parseInt(e.getAttribute("lyte-grid-height"));for(var l in isNaN(a)||(t.x=a),isNaN(r)||(t.y=r),isNaN(i)||(t.length=i),isNaN(s)||(t.height=s),t.length&&(t.length=this.returnWid(t.length,!0,e)),t.height&&(t.height=this.returnWid(t.height,null,e)),t)t[l]&&"resize"!=l&&(t[l]=parseInt(t[l]));if(t.nodeName=e,e.classList.add("lyteGridstackHandler"),!o){var n=this.emptySpaceFind.call(this,t);n[1]?(e.setAttribute("lyte-grid-x",n[0].x),e.setAttribute("lyte-grid-y",n[0].y)):(e.setAttribute("lyte-grid-x",null!=t.x&&t.x.constructor==Number?t.x:n[0].x),e.setAttribute("lyte-grid-y",null!=t.y&&t.y.constructor==Number?t.y:n[0].y)),e.setAttribute("lyte-grid-length",t.length?t.length:this.returnWid(this.getData("ltPropDefaultLength"),!0)),e.setAttribute("lyte-grid-height",t.height?t.height:this.returnWid(this.getData("ltPropDefaultHeight"))),e.setAttribute("lyte-grid-min-length",t.minLength?t.minLength:this.returnWid(this.getData("ltPropDefaultMinLength"),!0)),e.setAttribute("lyte-grid-min-height",t.minHeight?t.minHeight:this.returnWid(this.getData("ltPropDefaultMinHeight"))),e.setAttribute("lyte-grid-max-length",t.maxLength?t.maxLength:this.returnWid(this.getData("ltPropDefaultMaxLength"),!0)),e.setAttribute("lyte-grid-max-height",t.maxHeight?t.maxHeight:this.returnWid(this.getData("ltPropDefaultMaxHeight")))}"disabled"==t.resize&&e.setAttribute("lt-prop-resize",t.resize),this.scopeElement.contains(e)||_lyteUiUtils.appendChild(this.scopeElement,e),this.initialValSet.call(this),this.cssConstruct.call(this,e,"lyte-grid-y"),this.getData("iniData").push(this.initialPosFind.call(this,e));var p=this.getData("lyteGridStack");this.previousPos.call(this,p.length),$L.fastdom.mutate(function(){if(n&&0==n[1]&&!o){if(this.topCheck.call(this,e,this.scopeElement,null,!0),!this.getData("ltPropFloat")){this.topCheck.call(this,e,this.scopeElement,null,!0);var t=this.heightGet.call(this,e);t&&(p[e.elemNum].y-=t,this.valueUpdating.call(this,e.elemNum,"lyte-grid-y",p[e.elemNum].y),this.setVal.call(this,e,"lyte-grid-y",p[e.elemNum].y),this.previousPos.call(this,p.length)),this.topMoveFunc.call(this,e,null,null,null,!0)}this.findGrid()}e._childGrid&&e._childGrid.reRender(null,!0),this.getMethods("onItemAdd")&&$L.fastdom.measure(function(){$L.fastdom.mutate(function(){this.executeMethod("onItemAdd",e,this.data.lyteGridStack[e.elemNum],this.$node)}.bind(this))}.bind(this))}.bind(this))}.bind(this))}.bind(this),this.$node.removeGrid=function(e){if(this.scopeElement.contains(e)){var t=this.getData("ltPropHandler"),o=this.getData("lyteGridStack"),a=o[e.elemNum].y+o[e.elemNum].height;Lyte.arrayUtils(this.getData("iniData"),"removeAt",e.elemNum),document.body.contains(e)&&e.parentElement.removeChild(e),Lyte.arrayUtils(this.getData("lyteGridStack"),"remove",0,o.length),this.initialValSet.call(this),this.positionFind.call(this,(/^#/g.test(t)&&/\s/g.test(t),this.scopeElement.querySelectorAll(t))),this.findGrid(),this.topMoveAllGrid(a,o)}}.bind(this),this.$node.reRender=function(e){this._style&&(this.$node.removeChild(this._style),delete this._style);var t=this.getData("lyteGridStack");Lyte.arrayUtils(t,"remove",0,t.length),this.didConnectWrk.call(this,!0,e)}.bind(this),this.$node.setProperty=function(e,t,o){o="height"==t||"length"==t?this.returnWid(o,"length"==t,e):parseInt(o);var a=this.getData("lyteGridStack"),r=["x","y","length","height"],i={};if(-1!=r.indexOf(t)){for(var s in a[e.elemNum])-1!=r.indexOf(s)&&(i[s]=a[e.elemNum][s]);i[t]=o,i.nodeName=e;var l=this.emptySpaceFind.call(this,i);if(l[1])for(var n in l[0])this.setVal.call(this,e,"lyte-grid-"+n,l[0][n])}this.setVal.call(this,e,"lyte-grid-"+t,o);var p=t.replace(/(-\w)/g,(function(e){return e[1].toUpperCase()}));if(a[e.elemNum][p]=o,-1!=r.indexOf(t)){if(this.valueUpdating.call(this,e.elemNum,"lyte-grid-"+t,o),this.previousPos.call(this,a.length),0==l[1]&&this.topCheck.call(this,e,this.scopeElement,null,!0),!this.getData("ltPropFloat")){var c=this.heightGet.call(this,e);c&&(a[e.elemNum].y-=c,this.valueUpdating.call(this,e.elemNum,"lyte-grid-y",a[e.elemNum].y),this.setVal.call(this,e,"lyte-grid-y",a[e.elemNum].y),this.previousPos.call(this,a.length)),this.topMoveFunc.call(this,e,null,null,null,!0)}this.previousPos.call(this,this.scopeElement.querySelectorAll(this.data.ltPropHandler))}e._childGrid&&("height"!=t&&"length"!=t||e._childGrid.reRender(!0)),this.findGrid(),this.getMethods("onPropertyChange")&&$L.fastdom.measure(function(){$L.fastdom.mutate(function(){this.executeMethod("onPropertyChange",e,t,this.data.lyteGridStack[e.elemNum],this.$node)}.bind(this))}.bind(this))}.bind(this),this._resizeFunc=this.windowResize.bind(this),this._initialWindowWidth=window.innerWidth,window.addEventListener("resize",this._resizeFunc,!0),window.addEventListener("orientationchange",this._resizeFunc,!0),this.checkPreviousGrid()||this.didConnectWrk.call(this,!0)},gridLength:function(e,t,o){o=o||"ltPropMarginLeftCopy";var a=parseInt(this.getData(o)),r=t||this.data.ltPropUnitX;return parseInt((((e||(this.bcrrelem?this.bcrrelem.width:this.scopeElement.getBoundingClientRect().width))-a)/(r+a)).toFixed(0))},columnModeLengthFind:function(){this._prevObs=!0;var e,t=this.getData("ltPropGridLength")||this.getData("ltPropColumn"),o=this.getData("ltPropMarginLeftCopy");o=o||this.getData("ltPropMarginLeft"),e=((this.bcrrelem?this.bcrrelem.width:this.scopeElement.getBoundingClientRect().width)-(t+1)*o)/t,e=parseFloat(e.toFixed(2)),this.setData("ltPropUnitX",e),delete this._prevObs},didConnectWrk:function(e,t){$L.fastdom.measure(function(){if(this.$node.offsetParent){this.data.direction=_lyteUiUtils.getRTL(),this.data.direction?this.$node.classList.add("lyteRTL"):this.$node.classList.remove("lyteRTL");var o=this.scopeElement.getBoundingClientRect(),a=this.scopeElement,r=this.getData("lyteQuerySelector");this.bcrrelem=o;var i=this.getData("ltPropColumnMode"),s=this.getData("ltPropHandler"),l=this.getData("iniData");this.getData("lyteGridStack");Lyte.arrayUtils(l,"remove",0,l.length);var n=(/^#/g.test(s)&&/\s/g.test(s),a.querySelectorAll(s));if(this._parentGrid&&!this.getData("ltPropGridLength")){var p=this.gridLength();this.setData("ltPropGridLength",p),this.setData("gridLength",p)}(i||this.getData("ltPropGridLength"))&&this.columnModeLengthFind(),(!this.getData("gridLength")||t||i)&&this.setData("gridLength",this.gridLength()),(!this.$node.ltProp("gridHeight")&&!t||i||t)&&this.$node.ltProp("gridHeight",this.getData("gridLength"));for(var c=0;c<n.length;c++)l.push(this.initialPosFind.call(this,n[c]));$L.fastdom.mutate(this.initialValSet.bind(this));n=a.querySelectorAll(this.data.ltPropHandler);var d=this.data.ltPropUnitX;a.lyteData.gridLength=this.data.gridLength,a.lyteData.gridHeight=r.maxHeight,this._initialXRatio=d/(o.width-this.data.gridLength*this.data.ltPropMarginLeft),$L.fastdom.mutate(function(){if(this._childGrids.length)for(var t=0;t<this._childGrids.length;t++)this._childGrids[t].reRender();e&&this.getMethods("afterRender")&&$L.fastdom.measure(function(){$L.fastdom.mutate(function(){this.findGrid(),this.executeMethod("afterRender",this.$node)}.bind(this))}.bind(this))}.bind(this))}}.bind(this))},data:function(){return{ltPropScope:Lyte.attr("string",{default:""}),ltPropHandler:Lyte.attr("string",{default:""}),ltPropMarginLeft:Lyte.attr("number",{default:10}),ltPropMarginTop:Lyte.attr("number",{default:10}),ltPropUnitX:Lyte.attr("number",{default:50}),ltPropUnitY:Lyte.attr("number",{default:50}),ltPropResizeDirection:Lyte.attr("array",{default:["left","right","bottom","bottomRight","bottomLeft","top","topLeft","topRight"]}),ltPropFloat:Lyte.attr("boolean",{default:!1}),ltPropDirection:Lyte.attr("string",{default:"vertical"}),ltPropUndo:Lyte.attr("boolean",{default:!0}),ltPropResize:Lyte.attr("boolean",{default:!0}),ltPropBestfit:Lyte.attr("boolean",{default:!0}),ltPropMinUnitX:Lyte.attr("number",{default:0}),ltPropMinMarginLeft:Lyte.attr("number",{default:0}),ltPropBestfitClass:Lyte.attr("string",{default:""}),ltPropFreezeMode:Lyte.attr("boolean",{default:!1}),ltPropDefaultLength:Lyte.attr("string",{default:"2"}),ltPropDefaultHeight:Lyte.attr("string",{default:"2"}),ltPropDefaultMinLength:Lyte.attr("string",{default:"1"}),ltPropDefaultMinHeight:Lyte.attr("string",{default:"1"}),ltPropDefaultMaxHeight:Lyte.attr("string",{default:"0"}),ltPropDefaultMaxLength:Lyte.attr("string",{default:"0"}),ltPropColumnMode:Lyte.attr("boolean",{default:!1}),ltPropColumn:Lyte.attr("number",{default:3}),ltPropPrevent:Lyte.attr("object",{default:{horizontal:!1,vertical:!1}}),ltPropGridLength:Lyte.attr("number",{default:void 0}),ltPropBestfitType:Lyte.attr("string",{default:"default"}),ltPropForcedReposition:Lyte.attr("boolean",{default:!1}),ltPropSquareGrid:Lyte.attr("boolean",{default:!1}),ltPropGridSpaceColor:Lyte.attr("string",{default:"#f8f8f8"}),ltPropHitBottom:Lyte.attr("boolean",{default:!1}),ltPropGridSelectionClass:Lyte.attr("string",{default:"lyteGridFocused"}),ltPropVisibleBoundary:Lyte.attr("object",{default:{}}),ltPropVisible:Lyte.attr("array",{default:[]}),ltPropCheckCurrentPosition:Lyte.attr("boolean",{default:!1}),ltPropContainment:Lyte.attr("boolean",{default:!1}),gridLength:Lyte.attr("number",{default:void 0}),ltPropGridHeight:Lyte.attr("number",{default:void 0}),ltPropMarginLeftCopy:Lyte.attr("number",{default:10}),ltPropUnitxCopy:Lyte.attr("number",{default:50}),lyteGridStack:Lyte.attr("array",{default:[]}),elements:Lyte.attr("object",{default:void 0}),oriNode:Lyte.attr("object",{default:void 0}),xElements:Lyte.attr("array",{default:[]}),yElements:Lyte.attr("array",{default:[]}),iniData:Lyte.attr("array",{default:[]}),lyteQuerySelector:Lyte.attr("object",{default:{SelectedNodes:[]}}),direction:Lyte.attr("boolean",{default:!1})}},undoPrevious:function(){var e=this.getData("lyteGridStack"),t=this.getData("lyteQuerySelector"),o=this.scopeElement.querySelectorAll(this.data.ltPropHandler);if(t.currentPos<=e[e.length-1].oldHeight.length&&t.currentPos>=1){for(var a=0;a<o.length;a++)e[a].x=parseInt(e[a].oldX[t.currentPos-1]),e[a].nodeName.dataSet["lyte-grid-x-old"]=e[a].x,e[a].y=parseInt(e[a].oldY[t.currentPos-1]),e[a].nodeName.dataSet["lyte-grid-y-old"]=e[a].y,e[a].length=parseInt(e[a].oldLength[t.currentPos-1]),e[a].nodeName.dataSet["lyte-grid-length-old"]=e[a].length,e[a].height=parseInt(e[a].oldHeight[t.currentPos-1]),e[a].nodeName.dataSet["lyte-grid-height-old"]=e[a].height;this.displayGrid.call(this),t.currentPos=t.currentPos-1>=0?t.currentPos-1:0}},undoNext:function(){var e=this.getData("lyteGridStack"),t=this.getData("lyteQuerySelector"),o=this.scopeElement.querySelectorAll(this.data.ltPropHandler);if(t.currentPos<=e[e.length-1].oldHeight.length-1){for(var a=t.currentPos<e[e.length-1].oldHeight.length-1?t.currentPos+1:e[e.length-1].oldHeight.length-1,r=0;r<o.length;r++)e[r].x=parseInt(e[r].oldX[a]),e[r].nodeName.dataSet["lyte-grid-x-old"]=e[r].x,e[r].y=parseInt(e[r].oldY[a]),e[r].nodeName.dataSet["lyte-grid-y-old"]=e[r].y,e[r].length=parseInt(e[r].oldLength[a]),e[r].nodeName.dataSet["lyte-grid-length-old"]=e[r].length,e[r].height=parseInt(e[r].oldHeight[a]),e[r].nodeName.dataSet["lyte-grid-height-old"]=e[r].height;this.displayGrid.call(this),t.currentPos=a}},emptySpaceFind:function(e,t,o,a){var r=this.getData("lyteGridStack"),i=[],s=this.getData("gridLength"),l=this.getData("ltPropGridHeight");if(t)i=i.concat(o.slice());else{for(f=0;f<s;f++){i.push([]);for(var n=0;n<l;n++)i[f].push(!1)}for(f=0;f<r.length;f++)if(null!=r[f].x&&null!=r[f].y)for(var p=r[f].x;p<r[f].x+r[f].length;p++)for(var c=r[f].y;c<r[f].y+r[f].height;c++)r[f].nodeName!=e.nodeName&&null!=i[p]&&"res"!=i[p][c]?i[p][c]=!0:i[p]&&0==i[p][c]&&(i[p][c]="res")}e.length=null!=e.length?e.length:this.returnWid(this.getData("ltPropDefaultLength"),!0),e.height=null!=e.height?e.height:this.returnWid(this.getData("ltPropDefaultHeight"));for(var d,u=e.x?e.x:0,h=e.y?e.y:0,m=null==e.x||isNaN(e.x)?s+1-e.length:e.x+1,y=null==e.y||isNaN(e.x)?l-1:e.y,f=h;f<=y;f++)for(var g=u;g<m;g++){var v=!0;for(p=g;p<g+e.length;p++){for(var x=f;x<f+e.height;x++)if(i[p]&&1==i[p][x]){v=!1,x-f;break}if(!v)break}if(v&&g<s+1-e.length)return[{x:g,y:f},!t]}if(!t){var P={length:e.length,height:e.height,nodeName:e.nodeName};e.x&&!e.y&&(this.setData("ltPropGridHeight",l+e.height),P.x=e.x),d=this.emptySpaceFind.call(this,P,!0,i)}return d||(this.setData("ltPropGridHeight",l+e.height),d=this.emptySpaceFind.call(this,{length:e.length,height:e.height,nodeName:e.nodeName},!0,i,!0)),d.constructor==Array?d:[d,!1]}}),Lyte.Component.register("lyte-breadcrumb",{_template:'<template tag-name="lyte-breadcrumb"> <div onclick="{{action(\'divClick\',event,this)}}"> <template is="if" value="{{expHandlers(ltPropYield,\'==\',false)}}"><template case="true"> <lyte-breadcrumb-structure class="{{ltPropClass}}"> <template is="for" items="{{ltPropData}}" item="array" index="indexVal"><template is="if" value="{{expHandlers(lyteUiIsObject(array),\'==\',false)}}"><template case="true"><template is="if" value="{{expHandlers(ltPropClass,\'==\',\'lyteBreadcrumbBullet\')}}"><template case="true"> <lyte-breadcrumb-item sporder="{{indexVal}}" onclick="{{action(\'onclick\',event,this,array)}}"> <lyte-breadcrumb-body> {{array}} </lyte-breadcrumb-body> <lyte-breadcrumb-head>{{indexVal}}</lyte-breadcrumb-head> </lyte-breadcrumb-item> </template><template case="false"> <lyte-breadcrumb-item sporder="{{indexVal}}" onclick="{{action(\'onclick\',event,this,array)}}"> <lyte-breadcrumb-body> {{array}} </lyte-breadcrumb-body> </lyte-breadcrumb-item> </template></template></template><template case="false"><template is="if" value="{{expHandlers(ltPropClass,\'==\',\'lyteBreadcrumbBullet\')}}"><template case="true"> <lyte-breadcrumb-item sporder="{{indexVal}}" onclick="{{action(\'onclick\',event,this,array)}}"> <lyte-breadcrumb-body> {{array[ltPropLabel]}} </lyte-breadcrumb-body> <lyte-breadcrumb-head>{{array[ltPropOption]}}</lyte-breadcrumb-head> </lyte-breadcrumb-item> </template><template case="false"> <lyte-breadcrumb-item sporder="{{indexVal}}" onclick="{{action(\'onclick\',event,this,array)}}"> <lyte-breadcrumb-body> {{array[ltPropLabel]}} </lyte-breadcrumb-body> </lyte-breadcrumb-item> </template></template></template></template></template> </lyte-breadcrumb-structure> </template><template case="false"> <lyte-yield yield-name="yield"></lyte-yield> </template></template> </div> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"text",position:[1,3,0]},{type:"componentDynamic",position:[1,3]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"text",position:[1,3,0]},{type:"componentDynamic",position:[1,3]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"insertYield",position:[1]}]}},default:{}}],_observedAttributes:["ltPropClass","ltPropData","ltPropActiveClass","ltPropCompletedClass","ltPropYield","ltPropLabel","ltPropOption","ltPropAria","ltPropAriaValue"],init:function(){this.getMethods("beforeRender")&&this.executeMethod("beforeRender",this.$node)},didDestroy:function(){clearTimeout(this._timeout),delete this.$node.modifyCrumbItems},didConnect:function(){this.ArrayContentChange(),this.$node.modifyCrumbItems=function(e,t,o){this.data.ltPropYield?this.ArrayContentChange():Lyte.arrayUtils(this.data.ltPropData,e,t,o)}.bind(this),this.breadcrumbClass(),$L.fastdom.measure(function(){var e=_lyteUiUtils.getRTL();$L.fastdom.mutate(function(){e&&$L(this.$node).addClass("lyteRTL")}.bind(this))}.bind(this));var e="afterRender";this.getMethods(e)&&this.executeMethod(e,this.$node)},ArrayContentChangeObs:function(){clearTimeout(this._timeout),this._timeout=setTimeout(this.ArrayContentChange.bind(this),0)}.observes("ltPropData.[]","ltPropData"),ArrayContentChange:function(){for(var e=this.data,t=e.ltPropActiveClass,o=e.ltPropCompletedClass,a=e.ltPropAria,r=$L("lyte-breadcrumb-item",this.$node),i=r.length-1,s=r.eq(-1),l=0;l<i;l++){var n=r.eq(l);n.addClass(o).removeClass(t),a&&n.find("a").removeAttr("aria-current")}s.removeClass(o).addClass(t),a&&s.find("a").attr("aria-current",e.ltPropAriaValue)},breadcrumbClassObs:function(){this.breadcrumbClass()}.observes("ltPropClass"),breadcrumbClass:function(){this.data.ltPropYield&&$L("lyte-breadcrumb-structure",this.$node).addClass(this.data.ltPropClass)},data:function(){return{ltPropClass:Lyte.attr("string",{default:"lyteBreadcrumbSlash"}),ltPropData:Lyte.attr("array",{default:[]}),ltPropActiveClass:Lyte.attr("string",{default:"lyteActive"}),ltPropCompletedClass:Lyte.attr("string",{default:"lyteCompleted"}),ltPropYield:Lyte.attr("boolean",{default:!1}),ltPropLabel:Lyte.attr("string",{default:""}),ltPropOption:Lyte.attr("string",{default:""}),ltPropAria:Lyte.attr("boolean",{default:!1}),ltPropAriaValue:Lyte.attr("string",{default:"page"})}},actions:{onclick:function(e,t,o){var a=e.target,r="onClick";if((1==e.ctrlKey||1==e.metaKey||2==e.which)&&null!=e.target.href&&-1!=a.href.indexOf("javascript:")&&"_blank"==a.target)return!1;this.getMethods(r)&&(this.executeMethod(r,t,this.$node,e,o),e.stopPropagation())},divClick:function(e,t){var o=e.target,a="onClick";if((1==e.ctrlKey||1==e.metaKey||2==e.which)&&null!=o.href&&-1!=o.href.indexOf("javascript:")&&"_blank"==o.target)return!1;if(this.getMethods(a)&&this.data.ltPropYield){var r=$L(o.correspondingElement||o).closest("lyte-breadcrumb-item",t);r.length&&this.executeMethod(a,r.get(0),this.$node,e,r.attr("data-value"))}}}}),Lyte.Component.register("lyte-nav",{_template:'<template tag-name="lyte-nav"> <template is="if" value="{{expHandlers(ltPropAlignment,\'!==\',\'vertical\')}}"><template case="true"> <template is="if" value="{{ltPropNavYield}}"><template case="true"> <lyte-yield yield-name="nav" items="{{auxArray}}"></lyte-yield> </template><template case="false"> <template is="for" items="{{auxArray}}" item="item" index="index"> <lyte-nav-item data-value="{{item[ltPropSystemValue]}}" lyte-shortcut="{{lyteUiGetValue(item,\'shortcut\')}}">{{item[ltPropUserValue]}}</lyte-nav-item> </template> </template></template> <template is="if" value="{{expHandlers(ltPropType,\'===\',\'collapse\')}}"><template case="true"> <template is="if" value="{{expHandlers(expHandlers(menuContent.length,\'>\',0),\'||\',showMenu)}}"><template case="true"> <span class="{{ltPropContainerClass}}"> <span class="{{ltPropMenuIcon}}"></span> </span> </template></template> <lyte-menu lt-prop="{{stringify(ltPropMenu)}}" on-menu-click="{{method(\'itemSelected\')}}" on-before-open="{{method(\'beforeOpen\')}}" on-open="{{method(\'open\')}}" on-before-close="{{method(\'beforeClose\')}}" on-close="{{method(\'close\')}}" before-render="{{method(\'befRender\')}}" after-render="{{method(\'aftRender\')}}"> <template is="registerYield" yield-name="yield"> <template is="if" value="{{ltPropMenuYield}}"><template case="true"> <lyte-yield yield-name="menu" items="{{menuContent}}"></lyte-yield> </template><template case="false"> <lyte-menu-body class="{{ltPropNavMenuClass}}"> <template is="for" items="{{menuContent}}" item="item" index="index"> <lyte-menu-item data-value="{{item[ltPropSystemValue]}}" lyte-shortcut="{{lyteUiGetValue(item,\'shortcut\')}}"> <lyte-menu-label> {{item[ltPropUserValue]}} </lyte-menu-label> </lyte-menu-item> </template> </lyte-menu-body> </template></template> </template> </lyte-menu> </template></template> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]}]}},default:{}},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}}],_observedAttributes:["ltPropMenu","ltPropNavYield","ltPropMenuYield","ltPropItems","ltPropUserValue","ltPropSystemValue","ltPropMaxWidth","ltPropType","ltPropNavMenuClass","ltPropMenuIcon","ltPropContainerClass","ltPropClick","ltPropAlignment","ltPropArrow","ltPropSelected","menuContent","auxArray","arrowTop","arrowBot","showMenu"],init:function(){var e=this.getData("ltPropMenu"),t=this.getData("ltPropContainerClass"),o=this;$L.fastdom.measure((function(){_lyteUiUtils.nav_innerWidth||(_lyteUiUtils.nav_innerWidth=document.documentElement.clientWidth)})),Lyte.objectUtils(e,"add","yield",!0),Lyte.objectUtils(e,"add","query","."+t),this.$node.recalculate=function(){o.recalculate()}},didDestroy:function(){for(var e=this.$node.querySelectorAll("lyte-nav-item"),t=0;t<e.length;t++)e[t].getAttribute("lyte-shortcut")&&e[t].setAttribute("lyte-shortcut",JSON.stringify({}))},createOuterDiv:function(){var e=document.createElement("div"),t=this.getData("ltPropArrow");return e.setAttribute("class","lyteNavDiv"),t?e.style.overflow=window._lyteUiUtils.isMobile?"auto":"hidden":(e.style.overflow="auto",e.classList.add("lyteNavDivFullHeight")),e},show:function(e,t){var o=this.getData("ltPropArrow");this.$node&&(o&&(this.setData("topH",e[0].getBoundingClientRect().height),this.setData("botH",e[1].getBoundingClientRect().height),this.dispArrow.call(this,e,t)),this.getMethods("afterRender")&&this.executeMethod("afterRender",this))},construct:function(){for(var e,t=this.getData("ltPropItems")||[],o=0,a=(this.getData("ltPropUserValue"),this.getData("ltPropSystemValue"),[]);o<t.length;o++)e=t[o],Lyte.arrayUtils(a,"push",e);this.setData("auxArray",a)},recalculate:function(){var e,t=this.getCurrentSelected(),o=this.getDataValue(t);this.getData("ltPropClick");this.construct(),(e=this.$node.querySelector('lyte-nav-item[data-value="'+window._lyteUiUtils.escape(o)+'"]'))&&e.setAttribute("selected",!0),this.collapse()},itemsOb:function(){this.recalculate()}.observes("ltPropItems"),selObserver:function(){this.makeSelection()}.observes("ltPropSelected"),makeSelection:function(){this.getData("preventSel")||this.selectItem()},selectItem:function(){this.getData("ltPropSelected")?this.addSelected():this.removeSelected()},removeSelected:function(){var e=this.$node.querySelector('lyte-nav-item[selected="true"]');e&&e.removeAttribute("selected")},addSelected:function(){this.setInNav()||this.setInMenu()},setInNav:function(){var e,t=this.getData("ltPropSelected");return!!(e=this.$node.querySelector('lyte-nav-item[data-value="'+window._lyteUiUtils.escape(t)+'"]'))&&(e.setAttribute("selected",!0),!0)},setInMenu:function(){var e,t=this.$node.querySelector("lyte-menu"),o=this.getData("ltPropSelected"),a=t?t.component.childComp:null;a&&(e=a.querySelector('lyte-menu-item[data-value="'+window._lyteUiUtils.escape(o)+'"]'))&&(this.setData("preventCallback",!0),e.click(),this.setData("preventCallback",!1))},getCurrentSelected:function(){var e=this.getData("ltPropClick");return this.$node.querySelector("lyte-nav-item."+e)},getDataValue:function(e){return e?e.getAttribute("data-value"):""},getWidth:function(e){return e?e.getBoundingClientRect().width:0},getMenuWidth:function(){var e,t;return this.setData("showMenu",!0),e=this.$node.querySelector("."+this.getData("ltPropContainerClass")),t=this.getWidth(e),this.setData("showMenu",!1),t},calculate:function(){if(this.$node){var e,t,o=this.getData("auxArray"),a=[],r=[],i=this.$node.getBoundingClientRect(),s=parseFloat(this.getData("ltPropMaxWidth"))/100,l=i.width*s,n=0,p=(o.length,this.getData("ltPropSystemValue")),c=0,d=this.getCurrentSelected(),u=this.getDataValue(d);for(c=c+this.getWidth(d)+this.getMenuWidth();n<o.length;n++)(t=o[n])[p]!==u&&(c+=this.getWidth(this.$node.querySelector('lyte-nav-item[data-value="'+window._lyteUiUtils.escape(t[p])+'"]')))>l&&(Lyte.arrayUtils(a,"push",t),r.push(n));for(this.setData("menuContent",a);!isNaN(e=r.pop());)Lyte.arrayUtils(o,"removeAt",e,1)}},collapse:function(){$L.fastdom.measure(this.calculate,this)},didConnect:function(){var e,t,o,a=this.getData("ltPropAlignment"),r=this.$node,i=this.getData("ltPropArrow"),s=window._lyteUiUtils.isMobile;if("horizontal"===a)e=this.getData("ltPropType"),(this.getData("ltPropItems")||[]).length>0&&(this.construct(),"collapse"===e&&this.collapse(),this.makeSelection());else if("vertical"===a){if(this.buildVerticalNav(),!i)return;o=r.querySelector(".lyteNavDiv"),this.addEventsForArrows(),t=this.getArrows();var l=this;s?(this.prev=o.scrollTop,o.addEventListener("scroll",(function(e){var a,r,i,s=o.scrollHeight,n=o.scrollTop,p=o.getBoundingClientRect().height,c=l.prev,d=Math.floor(n-c),u=l.getData("stopHandler");l.prev=n,a=t[0].getBoundingClientRect().height,r=t[1].getBoundingClientRect().height,e.preventDefault(),0==d||u||(d>0?("none"===t[0].style.display&&(t[0].style.display="inline-block",i=(a=l.getData("topH"))+r,o.style.height="calc(100% - "+i+"px)"),Math.abs(n+p-s)<=5&&(t[1].style.display="none",o.style.height="calc(100% - "+a+"px)")):("none"===t[1].style.display&&s-(n+p)>=30&&(t[1].style.display="inline-block",i=a+(r=l.getData("botH")),o.style.height="calc(100% - "+i+"px)"),n<=0&&(t[0].style.display="none",o.style.height="calc(100% - "+r+"px)")))}))):o.addEventListener("wheel",(function(e){var a,r,i,s=e.deltaY,n=o.scrollHeight,p=o.getBoundingClientRect().height,c=o.scrollTop;e.preventDefault(),Math.floor(n)!=Math.floor(p)&&(a=t[0].getBoundingClientRect().height,r=t[1].getBoundingClientRect().height,s<0&&(c=o.scrollTop=o.scrollTop-6,"none"===t[1].style.display&&(t[1].style.display="inline-block",i=a+(r=l.getData("botH")),o.style.height="calc(100% - "+i+"px)"),c<=0&&(t[0].style.display="none",o.style.height="calc(100% - "+r+"px)")),s>0&&(c=o.scrollTop=o.scrollTop+6,"none"===t[0].style.display&&(t[0].style.display="inline-block",i=(a=l.getData("topH"))+r,o.style.height="calc(100% - "+i+"px)"),Math.floor(p)+Math.floor(c)>=Math.floor(n)&&(t[1].style.display="none",o.style.height="calc(100% - "+a+"px)")))}))}},addEventsForArrows:function(){this.$node;var e=this.getData("ltPropArrow"),t=this.getArrows(),o=window._lyteUiUtils.isMobile;e&&(o?(t[0].addEventListener("touchstart",this.moveup.bind(this)),t[1].addEventListener("touchstart",this.movedown.bind(this)),t[0].addEventListener("touchend",this.removeup.bind(this)),t[1].addEventListener("touchend",this.removedown.bind(this)),t[0].addEventListener("touchcancel",this.removeup.bind(this)),t[1].addEventListener("touchcancel",this.removedown.bind(this))):(t[0].addEventListener("mouseenter",this.moveup.bind(this)),t[1].addEventListener("mouseenter",this.movedown.bind(this)),t[0].addEventListener("mouseleave",this.removeup.bind(this)),t[1].addEventListener("mouseleave",this.removedown.bind(this))))},buildVerticalNav:function(){var e,t,o,a,r=this.$node,i=r.children,s=i.length;e=this.createOuterDiv(),this.getArrows();for(var l=0;l<s;l++)i[0].prevent=!0,o=i[0],i[0].hasAttribute("selected")&&"false"!==i[0].getAttribute("selected")&&(a=i[0]).removeAttribute("selected"),_lyteUiUtils.appendChild(e,i[0]),o.prevent=!1,o=null;_lyteUiUtils.appendChild(r,e),a&&a.setAttribute("selected","true"),a=null,this.addArrows(),t=this.getArrows(),$L.fastdom.measure(this.show.bind(this,t,e))},addArrows:function(){var e=this.getArrows(),t=this.getData("ltPropArrow"),o=this.$node;t&&(0==e.length?(this.addArrow("arrow-up"),this.addArrow("arrow-down")):(o.insertBefore(e[0],o.children[0]),o.appendChild(e[1])))},getArrows:function(){return this.$node.querySelectorAll("lyte-arrow")},removedown:function(){this.setData("stopHandler",!1),window.cancelAnimationFrame(this.getData("arrowdid"))},removeup:function(){this.setData("stopHandler",!1),window.cancelAnimationFrame(this.getData("arrowuid"))},down:function(e,t,o){var a,r=e.scrollTop,i=e.scrollHeight,s=e.getBoundingClientRect().height;this.setData("stopHandler",!0),r+s<i&&(r=e.scrollTop=e.scrollTop+3),Math.floor(s)+Math.floor(r)>=i&&(t[1].style.display="none",e.style.height="calc(100% - "+o+"px)"),a=window.requestAnimationFrame(this.down.bind(this,e,t,o)),this.setData("arrowdid",a)},up:function(e,t,o){var a,r=e.scrollTop;this.setData("stopHandler",!0),0!==r&&(r=e.scrollTop=e.scrollTop-3),r<=0&&(t[0].style.display="none",e.style.height="calc(100% - "+o+"px)"),a=window.requestAnimationFrame(this.up.bind(this,e,t,o)),this.setData("arrowuid",a)},movedown:function(e){var t,o,a,r=this.$node.querySelector(".lyteNavDiv"),i=this.getArrows();r.getBoundingClientRect().height,r.scrollHeight;i[0].style.display="inline-block",o=this.getData("topH")+(t=this.getData("botH")),r.style.height="calc(100% - "+o+"px)",a=window.requestAnimationFrame(this.down.bind(this,r,i,t)),this.setData("arrowdid",a)},moveup:function(){var e,t,o,a=this.$node.querySelector(".lyteNavDiv"),r=this.getArrows();a.getBoundingClientRect().height,a.scrollHeight;r[1].style.display="inline-block",t=(e=this.getData("topH"))+this.getData("botH"),a.style.height="calc(100% - "+t+"px)",o=window.requestAnimationFrame(this.up.bind(this,a,r,e)),this.setData("arrowuid",o)},addArrow:function(e){var t=document.createElement("i"),o=document.createElement("lyte-arrow"),a=this.$node;t.setAttribute("class",e),o.appendChild(t),-1!==e.indexOf("up")?a.insertBefore(o,a.children[0]):a.appendChild(o)},dispArrow:function(e,t){var o=0,a=0,r=0,i=0;switch(this.getData("arrowTop")&&(a=this.getData("topH"),o=1),this.getData("arrowBot")&&(r=this.getData("botH"),o=1==o?3:2),o){case 1:t.style.height="calc(100% - "+a+"px)",e[1].style.display="none";break;case 2:t.style.height="calc(100% - "+r+"px)",e[0].style.display="none";break;case 3:i=a+r,t.style.height="calc(100% - "+i+"px)"}},recreateFromDv:function(e){for(var t=this.getData("ltPropSystemValue"),o=0,a=(this.getData("ltPropUserValue"),this.getData("ltPropItems")||[]);o<a.length;o++)if(a[o][t]===e)return a[o]},findInd:function(e){for(var t=this.getData("menuContent"),o=0,a=(this.getData("ltPropUserValue"),this.getData("ltPropSystemValue"));o<t.length;o++)if(e==t[o][a])return o},setSelected:function(e){var t=this.$node.querySelector('lyte-nav-item[data-value="'+window._lyteUiUtils.escape(e)+'"]');this.getData("ltPropClick");t&&t.click()},methods:{itemSelected:function(){var e,t,o,a=arguments[4],r=this.getData("ltPropClick"),i=a.element,s=this.getData("auxArray"),l=this.getDataValue(i),n=this.findInd(l),p=this.getData("menuContent"),c=s.length;(e=this.$node.querySelector("lyte-nav-item."+r))&&e.classList.remove(r),o=this.recreateFromDv(l),t=Lyte.arrayUtils(s,"replaceAt",c-1,o),Lyte.arrayUtils(p,"removeAt",n,1),Lyte.arrayUtils(p,"insertAt",n,t),this.setSelected(l),this.$node.recalculate(),this.getMethods("onMenuClick")&&!this.getData("preventCallback")&&this.executeMethod("onMenuClick")},beforeOpen:function(){this.getMethods("onBeforeOpen")&&this.executeMethod("onBeforeOpen")},open:function(){this.getMethods("onOpen")&&this.executeMethod("onOpen")},beforeClose:function(){this.getMethods("onBeforeClose")&&this.executeMethod("onBeforeClose")},close:function(){this.getMethods("onClose")&&this.executeMethod("onClose")},befRender:function(){this.getData("beforeMenuRender")&&this.executeMethod("beforeMenuRender")},aftRender:function(){this.getData("afterMenuRender")&&this.executeMethod("afterMenuRender")}},data:function(){return{ltPropMenu:Lyte.attr("object",{default:_lyteUiUtils.resolveDefaultValue("lyte-nav","menu",{})}),ltPropNavYield:Lyte.attr("boolean",{default:!1}),ltPropMenuYield:Lyte.attr("boolean",{default:!1}),ltPropItems:Lyte.attr("array",{default:[]}),ltPropUserValue:Lyte.attr("string",{default:""}),ltPropSystemValue:Lyte.attr("string",{default:""}),ltPropMaxWidth:Lyte.attr("string",{default:"90%"}),ltPropType:Lyte.attr("string",{default:""}),ltPropNavMenuClass:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-nav","navMenuClass","lyteNavMenuClass")}),ltPropMenuIcon:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-nav","menuIcon","lyteNavKebabMenu")}),ltPropContainerClass:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-nav","containerClass","lyteNavIconContainer")}),ltPropClick:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-nav","click","lyteNavActive")}),ltPropAlignment:Lyte.attr("string",{default:"horizontal"}),ltPropArrow:Lyte.attr("boolean",{default:!0}),ltPropSelected:Lyte.attr("string",{default:""}),menuContent:Lyte.attr("array",{default:[]}),auxArray:Lyte.attr("array",{default:[]}),arrowTop:Lyte.attr("boolean",{default:!1}),arrowBot:Lyte.attr("boolean",{default:!1}),showMenu:Lyte.attr("boolean",{default:!1})}}}),_lyteUiUtils.registeredCustomElements["lyte-nav-item"]||(_lyteUiUtils.registeredCustomElements["lyte-nav-item"]=!0,Lyte.createCustomElement("lyte-nav-item",{connectedCallback:function(){if(!this.prevent){for(var e,t,o=this,a=this;"LYTE-NAV"!=o.tagName&&"HTML"!=o.tagName;)o=o.parentElement;if("HTML"==o.tagName)return;if(e=o.component,"vertical"===(t=e.getData("ltPropAlignment")))for(;a&&!a.classList.contains("lyteNavDiv");)a=a.parentElement;$L.fastdom.measure((function(){var o;e&&!e.$node||(this.hasAttribute("selected")&&this.getAttribute("selected")?a&&"vertical"===t&&(o=this.offsetTop,a.scrollTop=o,0!=o&&e.setData("arrowTop",!0),e.setData("arrowBot",!1)):a&&"vertical"===t&&this.offsetTop+this.getBoundingClientRect().height>a.getBoundingClientRect().height+a.scrollTop&&e.setData("arrowBot",!0))}),this),this._eventRegistered||(this._eventRegistered=!0,this.addEventListener("click",function(){this.setAttribute("selected",!0),e.getMethods("onItemSelected")&&!e.getData("preventCallback")&&e.executeMethod("onItemSelected",this,e)}.bind(this)))}},disconnectedCallback:function(){this.getAttribute("lyte-shortcut")&&this.setAttribute("lyte-shortcut",JSON.stringify({}))},static:{observedAttributes:{get:function(){return["selected","lyte-shortcut"]}}},attributeChangedCallback:function(e,t,o,a){if(!this.prevent){var r,i,s,l,n,p=this;if("lyte-shortcut"===e){if("function"==typeof shortcut){if(!o)return;o=JSON.parse(o),t=t?JSON.parse(t):{},shortcut.push({newKey:o.key,type:o.type,wait:o.wait,oldKey:t.key,value:this})}}else if("selected"==e&&o&&"false"!==o){for(l=this.getAttribute("selected");p&&"LYTE-NAV"!=p.tagName&&"HTML"!=p.tagName;)p=p.parentElement;if(!p||"HTML"==p.tagName)return;i=(r=p.component).getData("ltPropClick"),(s=p.querySelector("."+i))&&s!=this&&s.setAttribute("selected",""),l&&(this.classList.add(i),(n=this.getAttribute("data-value"))&&(r.setData("preventSel",!0),r.setData("ltPropSelected",n),r.setData("preventSel",!1)))}else if("selected"==e){for(p=this;p&&"LYTE-NAV"!=p.tagName&&"HTML"!=p.tagName;)p=p.parentElement;if(!p||"HTML"==p.tagName)return;i=(r=p.component).getData("ltPropClick"),this.classList.remove(i),r.$node.querySelector('lyte-nav-item[selected="true"]')||(r.setData("preventSel",!0),r.setData("ltPropSelected",""),r.setData("preventSel",!1))}}}}));var _lyteUiNav={resize:function(){for(var e,t=document.querySelectorAll("lyte-nav"),o=(t.length,0);o<t.length;o++)(e=t[o].component)&&"collapse"===e.getData("ltPropType")&&e.recalculate()}};function addEvent(e){var t,o,a,r,i=0;document.addEventListener("mouseup",(function(e){for(var t,o=e.target;o.parentElement;)if("lyte-dragdrop"==(o=o.parentElement).tagName.toLowerCase()){t=o.component;break}if(t&&t.getData("isDown"))if(t.setData("isDown",!1),t.getData("isMoved")){if(t.setData("isMoved",!1),t.onBeforeDropFunction(e)){if(t.getData("ltPropMultiselect")&&t.getData("multiSelectedItems").length>1){for(var a=(h=t.getData("placeholder")).getBoundingClientRect(),r=t.getData("multiSelectedItems"),s=0;s<r.length;s++)r[s].style.visibility="hidden";for(document.elementFromPoint(a.left,a.top-4),s=0;s<r.length;s++)r[s].style.visibility="visible";var l="sortableSec"==r[0].parentElement.id?"ltPropAvailablelist":"ltPropSelectedlist",n="sortableSec"==h.parentElement.id?"ltPropAvailablelist":"ltPropSelectedlist",p=[];for(s=0;s<r.length;s++)p.push(t.getElement(r[s]));for(var c=0;c<p.length;c++)Lyte.arrayUtils(t.getData(l),"removeAt",t.getElementPosition(t.getData(l),p[c]),1);for(var d=h.previousElementSibling;d&&"TEMPLATE"==d.tagName;)d=d.previousElementSibling;if(d)Lyte.arrayUtils(t.getData(n),"insertAt",t.getElementPosition(t.getData(n),t.getElement(d))+1,p);else{for(var u=h.nextElementSibling;u&&"TEMPLATE"==u.tagName;)u=u.nextElementSibling;u?Lyte.arrayUtils(t.getData(n),"insertAt",t.getElementPosition(t.getData(n),t.getElement(u)),p):Lyte.arrayUtils(t.getData(n),"push",p)}h.parentElement.removeChild(h),t.setData("multiSelectedItems",[]),t.setData("prevMode",""),t.setData("keyPressed",!1),t.setData("keyValue",""),t.setData("placeholder",""),t.generateArray(),i=0}else{var h,m=t.getData("div"),y=t.getElement(m),f=(d=(h=t.getData("placeholder")).previousElementSibling,"sortableSec"==m.parentElement.id?"ltPropAvailablelist":"ltPropSelectedlist");for(n="sortableSec"==h.parentElement.id?"ltPropAvailablelist":"ltPropSelectedlist";d&&"TEMPLATE"==d.tagName;)d=d.previousElementSibling;if(d)Lyte.arrayUtils(t.getData(f),"removeAt",t.getElementPosition(t.getData(f),y),1),Lyte.arrayUtils(t.getData(n),"insertAt",t.getElementPosition(t.getData(n),t.getElement(d))+1,y);else{for(u=h.nextElementSibling;u&&("TEMPLATE"==u.tagName||u.isEqualNode(m));)u=u.nextElementSibling;u?(Lyte.arrayUtils(t.getData(f),"removeAt",t.getElementPosition(t.getData(f),y),1),Lyte.arrayUtils(t.getData(n),"insertAt",t.getElementPosition(t.getData(n),t.getElement(u)),y)):(Lyte.arrayUtils(t.getData(f),"removeAt",t.getElementPosition(t.getData(f),y),1),Lyte.arrayUtils(t.getData(n),"push",y))}t.$node.querySelector("#sortableSec").contains(t.$node.querySelector("#dummy"))&&t.$node.querySelector("#sortableSec").removeChild(t.$node.querySelector("#dummy")),t.getData("ltPropDraggable")&&t.$node.querySelector("#dropSec").contains(t.$node.querySelector("#dummy"))&&t.$node.querySelector("#dropSec").removeChild(t.$node.querySelector("#dummy")),t.removeDropable(m),t.generateArray()}t.onDropFunction(e)}else{if(t.getData("ltPropMultiselect")&&t.getData("multiSelectedItems").length>1){for(r=t.getData("multiSelectedItems"),c=0;c<r.length;c++)t.removeStyle(r[c]),r[c].classList.remove("lyteDraggableElem");t.removeDropableMultiple(r),t.setData("multiSelectedItems",[]),t.setData("prevMode",""),t.setData("keyPressed",!1),t.setData("keyValue",""),t.setData("placeholder",""),i=0}else t.removeStyle(t.getData("div")),t.getData("div").classList.remove("lyteDraggableElem"),t.removeDropable(t.getData("div"));t.getData("placeholder").remove()}}else{m=t.getData("div");if(t.getData("placeholder").parentElement.replaceChild(m,t.getData("placeholder")),t.$node.querySelector("#sortableSec").contains(t.$node.querySelector("#dummy"))&&t.$node.querySelector("#sortableSec").removeChild(t.$node.querySelector("#dummy")),t.getData("ltPropDraggable")&&t.$node.querySelector("#dropSec").contains(t.$node.querySelector("#dummy"))&&t.$node.querySelector("#dropSec").removeChild(t.$node.querySelector("#dummy")),t.removeStyle(m),t.getData("checkSelection")){var g=t.getData("keyValue");91!=g&&93!=g&&224!=g||(m.classList.remove("lyteDraggableElem"),t.removeFromArray(m)),16==g&&(t.removeClass(),t.setData("multiSelectedItems",[]),t.addToArray(m,"multiple"),t.setData("prevMode","multiple")),0==g&&(t.removeClass(),t.setData("multiSelectedItems",[]),t.getData("multiSelectedItems").push(m),m.classList.add("lyteDraggableElem"),t.setData("prevMode","single")),t.setData("checkSelection",!1)}}else{var v=document.querySelectorAll(".lyteDraggableElem");if(v)for(c=0;c<v.length;c++)v[c].classList.remove("lyteDraggableElem")}}),!1),document.addEventListener("mousemove",(function(e){for(var s,l=e.target;l.parentElement;)if("lyte-dragdrop"==(l=l.parentElement).tagName.toLowerCase()){s=l.component;break}if(s&&s.getData("isDown")){s.setData("isMoved",!0);var n=s.getData("div"),p=n.offsetParent.getBoundingClientRect(),c=n.getBoundingClientRect(),d=c.width,u=c.height;if(t={x:e.clientX,y:e.clientY},n.style.left=t.x-s.getData("offset")[0]-p.left+"px",n.style.top=t.y-s.getData("offset")[1]-p.top+"px",s.getData("ltPropMultiselect")&&s.getData("multiSelectedItems").length>1){for(var h=s.getData("multiSelectedItems"),m=h.indexOf(n),y=m-1;y>=0;y--)h[y].style.left=n.offsetLeft+"px",h[y].style.top=h[y+1].offsetTop-u+"px",h[y].style.boxSizing="border-box",h[y].style.width=d+"px",h[y].style.height=u+"px",h[y].style.position="absolute",h[y].classList.add("lyteDraggableElem");for(y=m+1;y<h.length;y++)h[y].style.left=n.offsetLeft+"px",h[y].style.top=h[y-1].offsetTop+u+"px",h[y].style.boxSizing="border-box",h[y].style.width=d+"px",h[y].style.height=u+"px",h[y].style.position="absolute",h[y].classList.add("lyteDraggableElem");var f=s.getData("placeholder"),g=h.length*u;g>f.getBoundingClientRect().height&&(document.getElementById("sortableSec").contains(document.getElementById("dummy"))&&document.getElementById("sortableSec").removeChild(document.getElementById("dummy")),s.getData("ltPropDraggable")&&document.getElementById("dropSec").contains(document.getElementById("dummy"))&&document.getElementById("dropSec").removeChild(document.getElementById("dummy")),f.style.height=g+"px",f.classList.add("lyteDragDropDropable"),s.setData("placeholder",f),n.parentElement.insertBefore(s.getData("placeholder"),n));var v=s.getTopNBottom("top"),x=s.getTopNBottom("bottom"),P=(f.getBoundingClientRect(),f.parentElement.getBoundingClientRect());if(c=n.getBoundingClientRect(),v<P.top&&f.parentElement.scrollTop>0&&f.parentElement.scrollTop<=f.parentElement.scrollHeight-P.height&&(f.parentElement.scrollTop-=P.top-v),x>P.bottom&&f.parentElement.scrollTop<=f.parentElement.scrollHeight-P.height&&(f.parentElement.scrollTop+=x-P.bottom),s.makeDroppableMultiple(h),elementAtLeft=document.elementFromPoint(c.left-1,e.clientY),elementAtRight=document.elementFromPoint(c.right+1,e.clientY),dropablePlaceLeft=elementAtLeft.closest(".dropable"),dropablePlaceRight=elementAtRight.closest(".dropable"),!s.getData("left")&&dropablePlaceLeft&&c.left<dropablePlaceLeft.getBoundingClientRect().right-c.width/2)c.bottom>dropablePlaceLeft.getBoundingClientRect().bottom?dropablePlaceLeft.after(f):dropablePlaceLeft.parentElement.insertBefore(f,dropablePlaceLeft),s.setData("left",!0),s.setData("right",!1),r="left";else if(!s.getData("right")&&dropablePlaceRight&&c.right>dropablePlaceRight.getBoundingClientRect().left+c.width/2)c.bottom>dropablePlaceRight.getBoundingClientRect().bottom?dropablePlaceRight.after(f):dropablePlaceRight.parentElement.insertBefore(f,dropablePlaceRight),s.setData("right",!0),s.setData("left",!1),r="right";else if(elementAtLeft&&s.checkElement(elementAtLeft)&&s.checkPossiblePosition(elementAtLeft,"multiple")&&c.left<elementAtLeft.getBoundingClientRect().right-c.width/2)elementAtLeft.appendChild(f),s.setData("left",!1),s.setData("right",!1);else if(elementAtRight&&s.checkElement(elementAtRight)&&s.checkPossiblePosition(elementAtRight,"multiple")&&c.right>elementAtRight.getBoundingClientRect().left+c.width/2)elementAtRight.appendChild(f),s.setData("left",!1),s.setData("right",!1);else if(v<i){if(!(o="left"==r?document.elementFromPoint(c.left,v-1):"right"==r?document.elementFromPoint(c.right,v-1):document.elementFromPoint(e.clientX,v-1)))return;if((a=o.closest(".dropable"))&&(c.left>a.parentElement.getBoundingClientRect().right-c.width/2||c.right<a.parentElement.getBoundingClientRect().left+c.width/2))return;a&&a!=s.$node.querySelector("#dummy")&&v<a.getBoundingClientRect().bottom-16&&a.parentElement.insertBefore(f,a),"sortableSec"!==o.id&&"dropSec"!==o.id||!s.checkIfDroppable(o,"multiple")||o.appendChild(f)}else{if(!(o="left"==r?document.elementFromPoint(c.left,x+1):"right"==r?document.elementFromPoint(c.right,x+1):document.elementFromPoint(e.clientX,x+1)))return;if((a=o.closest(".dropable"))&&(c.left>a.parentElement.getBoundingClientRect().right-c.width/2||c.right<a.parentElement.getBoundingClientRect().left+c.width/2))return;a&&a!=s.$node.querySelector("#dummy")&&x>=a.getBoundingClientRect().top+16&&a.after(f),"sortableSec"!==o.id&&"dropSec"!==o.id||!s.checkIfDroppable(o,"multiple")||o.appendChild(f)}i=v}else{P=(f=s.getData("placeholder")).parentElement.getBoundingClientRect();if((c=n.getBoundingClientRect()).top<P.top&&f.parentElement.scrollTop>0&&f.parentElement.scrollTop<=f.parentElement.scrollHeight-P.height&&(f.parentElement.scrollTop-=P.top-c.top),c.bottom>P.bottom&&f.parentElement.scrollTop<=f.parentElement.scrollHeight-P.height&&(f.parentElement.scrollTop+=c.bottom-P.bottom),s.makeDroppable(n),elementAtLeft=document.elementFromPoint(c.left-1,e.clientY),elementAtRight=document.elementFromPoint(c.right+1,e.clientY),droppableLeft=elementAtLeft.closest(".dropable"),droppableRight=elementAtRight.closest(".dropable"),maxAllowableWidth=c.width/2,droppableLeft&&c.left<droppableLeft.getBoundingClientRect().right-maxAllowableWidth)c.bottom>droppableLeft.getBoundingClientRect().bottom?droppableLeft.after(f):droppableLeft.parentElement.insertBefore(f,droppableLeft);else if(droppableRight&&c.right>droppableRight.getBoundingClientRect().left+maxAllowableWidth)c.bottom>droppableRight.getBoundingClientRect().bottom?droppableRight.after(f):droppableRight.parentElement.insertBefore(f,droppableRight);else if(elementAtLeft&&s.checkElement(elementAtLeft)&&s.checkPossiblePosition(elementAtLeft,"single")&&c.left<elementAtLeft.getBoundingClientRect().right-maxAllowableWidth)elementAtLeft.appendChild(f);else if(elementAtRight&&s.checkElement(elementAtRight)&&s.checkPossiblePosition(elementAtRight,"single")&&c.right>elementAtRight.getBoundingClientRect().left+maxAllowableWidth)elementAtRight.appendChild(f);else{if(n.style.visibility="hidden",o=document.elementFromPoint(e.clientX,e.clientY),n.style.visibility="visible",!o)return;if((a=o.closest(".dropable"))&&(c.left>a.getBoundingClientRect().right-maxAllowableWidth||c.right<a.getBoundingClientRect().left+maxAllowableWidth))return;a&&a!=s.$node.querySelector("#dummy")&&(c.top<a.getBoundingClientRect().top&&a.parentElement.insertBefore(f,a),c.bottom>a.getBoundingClientRect().bottom&&a.after(f)),"sortableSec"!==o.id&&"dropSec"!==o.id||!s.checkIfDroppable(o,"single")||o.appendChild(f)}s.getData("placeholder").classList.add("lyteDragDropDropable")}s.onDragFunction(e)}}),!1),document.addEventListener("keydown",(function(e){for(var t=document.querySelectorAll("lyte-dragdrop"),o=0;o<t.length;o++){var a=t[o].component;a.setData("keyPressed",!0);var r=e.which;a.setData("keyValue",r)}}),!1),document.addEventListener("keyup",(function(e){for(var t=document.querySelectorAll("lyte-dragdrop"),o=0;o<t.length;o++){var a=t[o].component;a.setData("keyPressed",!1),a.setData("keyValue",0)}}),!1)}window.addEventListener("resize",(function(e){var t,o=_lyteUiUtils.lyteNavId,a=_lyteUiUtils.isMobile,r=_lyteUiUtils.nav_innerWidth;a&&r?(t=document.documentElement.clientWidth)!==r&&(_lyteUiUtils.nav_innerWidth=t,_lyteUiNav.resize()):a||(window.clearTimeout(o),_lyteUiUtils.lyteNavId=window.setTimeout((function(){_lyteUiNav.resize()}),16))})),Lyte.Component.register("lyte-messagebox",{_template:'<template tag-name="lyte-messagebox"> <template is="if" value="{{ltPropShow}}"> <template case="true"><lyte-wormhole style="visibility: hidden" on-before-append="{{method(&quot;beforeWormholeAppend&quot;)}}" on-append="{{method(&quot;afterWormholeAppend&quot;)}}"> <template is="registerYield" yield-name="lyte-content"> <div class="{{lyteUiMsgBoxConcatClass(ltPropClass,ltPropType,\'MessageIcon\',\'lyteMessageBox\')}}"> <template is="if" value="{{ltPropType}}"><template case="true"> <span class="lyteMessageBoxSymbol"></span> </template></template> <template is="if" value="{{ltPropYield}}"><template case="true"> <span class="lyteMessageBoxContent"> <lyte-yield yield-name="messageboxYield"></lyte-yield> </span> </template><template case="false"> <template is="if" value="{{lyteUiIfEquals(ltPropMessage,\'\')}}"> <template case="false"><div> <span class="lyteMessageBoxContent">{{ltPropMessage}}</span> </div></template> </template> </template></template> <span class="lyteMessageBoxClose" onclick="{{action(\'closeMessageBox\')}}"></span> </div> </template> </lyte-wormhole></template> </template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"registerYield",position:[0,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1,1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{false:{dynamicNodes:[{type:"text",position:[0,1,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,5]}]},{type:"componentDynamic",position:[0]}]}},default:{}}],_observedAttributes:["ltPropType","ltPropShow","ltPropMessage","ltPropDuration","ltPropOffset","ltPropTransition","ltPropYield","ltPropClass","ltPropCloseManually"],init:function(){},data:function(){return{ltPropType:Lyte.attr("string",{default:"success"}),ltPropShow:Lyte.attr("boolean",{default:!1}),ltPropMessage:Lyte.attr("string",{default:""}),ltPropDuration:Lyte.attr("string",{default:"2000"}),ltPropOffset:Lyte.attr("object",{default:null}),ltPropTransition:Lyte.attr("object",{default:{animation:"fadeIn",duration:"0.2s"}}),ltPropYield:Lyte.attr("boolean",{default:!1}),ltPropClass:Lyte.attr("string",{default:""}),ltPropCloseManually:Lyte.attr("boolean",{default:!1})}},setDuration:function(){var e=this.$node.ltProp("duration");""!=e&&this.setData("ltPropDuration",e)}.observes("ltPropDuration"),computeOffsetImpl:function(){var e=this.actualMessageDiv;this.fastdomfn1=$L.fastdom.measure((function(){delete this.fastdomfn1;var t=e.getBoundingClientRect(),o=Object.assign({},this.$node.ltProp("offset")),a=Math.max(document.documentElement.clientWidth,window.innerWidth||0),r=Math.max(document.documentElement.clientHeight,window.innerHeight||0);if(this.$node.ltProp("offset")){if("center"===o.left||"center"===o.right||null==o.left||""==o.left){var i=(a-t.width)/2;i<0&&(i=20),o.left=i+"px"}if("center"===o.top||"center"===o.bottom){var s=(r-t.height)/2;s<0&&(s=20),o.top=s+"px"}o.right&&"center"!==o.right&&(o.right.indexOf("%")>-1?o.left=a-(t.width+a/parseFloat(o.right))+"px":o.left=a-(t.width+parseFloat(o.right))+"px"),o.bottom&&"center"!==o.bottom&&(o.bottom.indexOf("%")>-1?o.top=r-(t.height+r/parseFloat(o.bottom))+"px":o.top=r-(t.height+parseFloat(o.bottom))+"px"),o.top||(o.top=20),this.fastdomfn2=$L.fastdom.mutate((function(){delete this.fastdomfn2,e.style.left=parseFloat(o.left)+"px","slideFromTop"!=this.getData("ltPropTransition").animation?(this.actualMessageDiv.style.visibility="visible",e.style.top=parseFloat(o.top)+"px"):(e.style.top=-1*t.height+"px",this.childComp.style.visibility="visible",this.actualMessageDiv.style.visibility="visible",e.style.transform="translate(0px,"+(parseFloat(o.top)+t.height)+"px)"),this.showMessagebox()}),this)}else{var l;l=(document.body.clientWidth-t.width)/2,this.fastdomfn3=$L.fastdom.mutate((function(){delete this.fastdomfn3,e.style.left=parseFloat(l)+"px","slideFromTop"!=this.getData("ltPropTransition").animation?(this.actualMessageDiv.style.visibility="visible",e.style.top="20px"):(e.style.top=-1*t.height+"px",this.childComp.style.visibility="visible",this.actualMessageDiv.style.visibility="visible",e.style.transform="translate(0px,"+(t.height+20)+"px)"),this.showMessagebox()}),this)}}),this)},closeMessageBoxFn:function(e){this.timeOutId&&(clearInterval(this.timeOutId),this.timeOutId=!1),this.childComp&&document.contains(this.childComp)&&this.childComp.remove(),delete this.actualMessageDiv,delete this.childComp,!e&&this.getMethods("onClose")&&this.executeMethod("onClose",this)},clearFastdom:function(){this.fastdomfn1&&($L.fastdom.clear(this.fastdomfn1),delete this.fastdomfn1),this.fastdomfn2&&($L.fastdom.clear(this.fastdomfn2),delete this.fastdomfn2),this.fastdomfn3&&($L.fastdom.clear(this.fastdomfn3),delete this.fastdomfn3)},showToggled:function(){this.$node.ltProp("show")||this.closeMessageBoxFn()}.observes("ltPropShow").on("didConnect"),showMessagebox:function(){var e=parseInt(this.getData("ltPropDuration")),t=this;this.timeOutId=setInterval((function(){clearInterval(t.timeOutId),t.$node&&!t.getData("ltPropCloseManually")&&("slideFromTop"!=t.getData("ltPropTransition").animation?(t.actualMessageDiv.classList.remove("lyteMessageBoxFadeIn"),t.actualMessageDiv.classList.add("lyteMessageBoxFadeOut"),setTimeout((function(){t.$node&&t.setData("ltPropShow",!1)}),500)):(t.actualMessageDiv.style.transform="",setTimeout((function(){t.$node&&t.setData("ltPropShow",!1)}),500)),t.timeOutId=!1)}),e)},didDestroy:function(){this.clearFastdom(),this.timeOutId&&(clearInterval(this.timeOutId),"slideFromTop"!=this.getData("ltPropTransition").animation&&this.actualMessageDiv?(this.actualMessageDiv.classList.remove("lyteMessageBoxFadeIn"),this.actualMessageDiv.classList.add("lyteMessageBoxFadeOut"),this.setData("ltPropShow",!1)):(this.actualMessageDiv.style.transform="",this.setData("ltPropShow",!1)),this.timeOutId=!1,this.closeMessageBoxFn(!0))},actions:{closeMessageBox:function(){clearInterval(this.timeOutId),this.timeOutId=!1;var e=this;"slideFromTop"!=e.getData("ltPropTransition").animation?(e.actualMessageDiv.classList.remove("lyteMessageBoxFadeIn"),e.actualMessageDiv.classList.add("lyteMessageBoxFadeOut"),setTimeout((function(){e.$node&&e.setData("ltPropShow",!1)}),500)):(e.actualMessageDiv.style.transform="",setTimeout((function(){e.$node&&e.setData("ltPropShow",!1)}),200))}},methods:{beforeWormholeAppend:function(e){this.childComp=e,this.actualMessageDiv=this.childComp.querySelector(".lyteMessageBox"),this.actualMessageDiv.style.position="fixed"},afterWormholeAppend:function(e){"slideFromTop"==this.getData("ltPropTransition").animation?(this.actualMessageDiv.classList.add("lyteMessageBoxSlideFromTop"),this.computeOffsetImpl()):(this.computeOffsetImpl(),this.actualMessageDiv.classList.add("lyteMessageBoxFadeIn"))}}}),Lyte.Component.register("lyte-dragdrop",{_template:'<template tag-name="lyte-dragdrop"> <div class="lyteDragDropFields"> <div class="lyteDragDropColumns"> <div class="lyteDragDropFL lytePosRel"> <span class="lyteDragDropHeading">{{ltPropAvailableLabel}}</span> <div class="lyteDragDropAvailable"> <span class="lyteSelectedNone" id="AvailableNone">{{ltPropAvailablelistEmptyMessage}}</span> <template is="if" value="{{ltPropEnableSearch}}"> <template case="true"> <div class="lytePosRel"> <lyte-search style="display: block;" lt-prop-style="{{ltPropSearchStyle}}" lt-prop-query-selector="{{querySelector}}" lt-prop-appearance="box" lt-prop-error="{{ltPropErrorMessage}}"></lyte-search> </div> <ul class="lyteAvailableUL" id="sortableSec"> <template is="for" items="{{ltPropAvailablelist}}" item="item"> <li class="filterlabel sortableElem" data-pos="{{item.pos}}" data-propvalue="{{item}}" onmousedown="{{action(\'mouseDown\',event)}}" onmouseover="{{action(\'mouseOver\',event)}}" onmouseout="{{action(\'mouseOut\',event)}}"> <span class="item">{{item.name}}</span> <template is="if" value="{{ltPropDraggable}}"> <template case="true"> <template is="if" value="{{ltPropEnableIcon}}"> <template case="true"><span class="lyteDragDropAdd"></span></template> </template> </template> </template> </li> </template> </ul> </template> <template case="false"> <ul class="lyteAvailableUL" id="sortableSec" style="height: 336px;"> <template is="for" items="{{ltPropAvailablelist}}" item="item"> <li class="filterlabel sortableElem" data-pos="{{item.pos}}" data-propvalue="{{item}}" onmousedown="{{action(\'mouseDown\',event)}}" onmouseover="{{action(\'mouseOver\',event)}}" onmouseout="{{action(\'mouseOut\',event)}}"> <span class="item">{{item.name}}</span> <template is="if" value="{{ltPropDraggable}}"> <template case="true"> <template is="if" value="{{ltPropEnableIcon}}"> <template case="true"><span class="lyteDragDropAdd"></span></template> </template> </template> </template> </li> </template> </ul> </template> </template> </div> </div> <template is="if" value="{{ltPropDraggable}}"> <template case="true"> <div class="lyteDragDropFL lytePosRel"> <span class="lyteDragDropHeading">{{ltPropSelectedLabel}}</span> <div class="lyteDragDropSelected"> <span class="lyteSelectedNone" id="SelectedNone">{{ltPropSelectedlistEmptyMessage}}</span> <ul class="lyteSelectedUL" id="dropSec"> <template is="for" items="{{ltPropSelectedlist}}" item="item"> <li data-pos="{{item.pos}}" data-propvalue="{{item}}" onmousedown="{{action(\'mouseDown\',event)}}" onmouseover="{{action(\'mouseOver\',event)}}" onmouseout="{{action(\'mouseOut\',event)}}"> <span>{{item.name}}</span> <template is="if" value="{{ltPropEnableIcon}}"> <template case="true"><span class="lyteDragDropRemove"></span></template> </template> </li> </template> </ul> </div> </div> </template> </template> </div> </div> </template>',_dynamicNodes:[{type:"text",position:[1,1,1,1,0]},{type:"text",position:[1,1,1,3,1,0]},{type:"attr",position:[1,1,1,3,3]},{type:"if",position:[1,1,1,3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[3,1]},{type:"for",position:[3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[]}},default:{}}]}},default:{}}]}]},false:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[]}},default:{}}]}},default:{}}]}]}},default:{}},{type:"attr",position:[1,1,3]},{type:"if",position:[1,1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]},{type:"text",position:[1,3,1,0]},{type:"attr",position:[1,3,3,1]},{type:"for",position:[1,3,3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[]}},default:{}}]}]}},default:{}}],_observedAttributes:["ltPropAvailablelist","ltPropSelectedlist","ltPropMultiselect","ltPropEnableSearch","ltPropEnableIcon","ltPropDraggable","ltPropErrorMessage","ltPropAvailablelistEmptyMessage","ltPropSelectedlistEmptyMessage","ltPropSearchStyle","ltPropAvailableLabel","ltPropSelectedLabel","clickCount","component","placeholder","div","offset","isDown","isMoved","top","bottom","prevScrollTop","multiSelectedItems","keyPressed","keyValue","prevMode","checkSelection","querySelector","left","right","availableList","selectedList","checkOnDidconnect","draggedItems"],init:function(){this.getData("ltPropErrorMessage")||this.setData("ltPropErrorMessage",_lyteUiUtils.i18n("no.results.found")),this.setData("ltPropAvailableLabel",_lyteUiUtils.i18n("Available")),this.setData("ltPropSelectedLabel",_lyteUiUtils.i18n("Selected"))},didConnect:function(){for(var e=document.querySelectorAll("lyte-dragdrop"),t=0;t<e.length;t++)if(e[t]==this.$node){this.$node.querySelector("#sortableSec").classList.add("searchable"+t),this.setData("querySelector",{scope:".searchable"+t,target:".filterlabel",search:".item"});break}this.setData("checkOnDidconnect",!0)},data:function(){return{ltPropAvailablelist:Lyte.attr("array",{default:[]}),ltPropSelectedlist:Lyte.attr("array",{default:[]}),ltPropMultiselect:Lyte.attr("boolean",{default:!0}),ltPropEnableSearch:Lyte.attr("boolean",{default:!0}),ltPropEnableIcon:Lyte.attr("boolean",{default:!0}),ltPropDraggable:Lyte.attr("boolean",{default:!0}),ltPropErrorMessage:Lyte.attr("string",{default:""}),ltPropAvailablelistEmptyMessage:Lyte.attr("string",{default:"Empty List"}),ltPropSelectedlistEmptyMessage:Lyte.attr("string",{default:"Drop Here"}),ltPropSearchStyle:Lyte.attr("string",{default:""}),ltPropAvailableLabel:Lyte.attr("string"),ltPropSelectedLabel:Lyte.attr("string"),clickCount:Lyte.attr("number",{default:0}),component:Lyte.attr("object",{default:null}),placeholder:Lyte.attr("object",{default:null}),div:Lyte.attr("object",{default:null}),offset:Lyte.attr("array",{default:[0,0]}),isDown:Lyte.attr("boolean",{default:!1}),isMoved:Lyte.attr("boolean",{default:!1}),top:Lyte.attr("number",{default:0}),bottom:Lyte.attr("number",{default:0}),prevScrollTop:Lyte.attr("number",{default:0}),multiSelectedItems:Lyte.attr("array",{default:[]}),keyPressed:Lyte.attr("boolean",{default:!1}),keyValue:Lyte.attr("number",{default:0}),prevMode:Lyte.attr("string",{default:""}),checkSelection:Lyte.attr("boolean",{default:!1}),querySelector:Lyte.attr("object",{default:{scope:"#sortableSec",target:".filterlabel",search:".item"}}),left:Lyte.attr("boolean",{default:!1}),right:Lyte.attr("boolean",{default:!1}),availableList:Lyte.attr("array",{default:[]}),selectedList:Lyte.attr("array",{default:[]}),checkOnDidconnect:Lyte.attr("boolean",{default:!1}),draggedItems:Lyte.attr("array",{default:[]})}},makeDroppable:function(e){var t=this.$node.querySelectorAll("#sortableSec>li"),o=this.$node.querySelectorAll("#dropSec>li");if(t.length>0)for(var a=0;a<t.length;a++)t[a]!==e&&t[a].classList.add("dropable");if(o.length>0)for(a=0;a<o.length;a++)o[a]!==e&&o[a].classList.add("dropable")},showMsgForEmpty:function(){this.getData("ltPropAvailablelist").length>0&&(this.$node.querySelector("#AvailableNone").style.visibility="hidden"),0==this.getData("ltPropAvailablelist").length&&(this.$node.querySelector("#AvailableNone").style.visibility="visible"),this.getData("ltPropDraggable")&&(0==this.getData("ltPropSelectedlist").length&&(this.$node.querySelector("#SelectedNone").style.visibility="visible"),this.getData("ltPropSelectedlist").length>0&&(this.$node.querySelector("#SelectedNone").style.visibility="hidden"))}.observes("ltPropAvailablelist.[]","ltPropSelectedlist.[]","checkOnDidconnect"),removeDropable:function(e){var t=this.$node.querySelectorAll("#sortableSec>li"),o=this.$node.querySelectorAll("#dropSec>li");if(t.length>0)for(var a=0;a<t.length;a++)t[a]!==e&&t[a].classList.remove("dropable");if(o.length>0)for(a=0;a<o.length;a++)o[a]!==e&&o[a].classList.remove("dropable")},generateArray:function(){var e=Array.from(this.$node.querySelectorAll("#sortableSec>li")),t=Array.from(this.$node.querySelectorAll("#dropSec>li"));ltPropAvailablelist=[],ltPropSelectedlist=[];for(var o=1;o<=e.length;o++){(a=this.getElement(e[o-1]))&&(a.pos=o,ltPropAvailablelist.push(a))}for(o=1;o<=t.length;o++){var a;(a=this.getElement(t[o-1])).pos=o,ltPropSelectedlist.push(a)}this.setData("availableList",ltPropAvailablelist),this.setData("selectedList",ltPropSelectedlist)},removeClass:function(){for(var e=Array.from(this.$node.querySelectorAll("#sortableSec>li")),t=Array.from(this.$node.querySelectorAll("#dropSec>li")),o=0;o<e.length;o++)e[o].classList.contains("lyteDraggableElem")&&e[o].classList.remove("lyteDraggableElem");for(o=0;o<t.length;o++)t[o].classList.contains("lyteDraggableElem")&&t[o].classList.remove("lyteDraggableElem")},positionalPush:function(e,t){for(var o=this.getData("multiSelectedItems"),a=0,r=0;r<o.length&&!(o[r].offsetTop>e.offsetTop);r++)++a;o.splice(a,0,e),this.setData("multiSelectedItems",o)},addToArray:function(e,t){if("single"===t){var o=[];if((n=this.getData("multiSelectedItems")).length>0){var a=Array.from(this.$node.querySelectorAll("#sortableSec>li")),r=Array.from(this.$node.querySelectorAll("#dropSec>li")),i=n[n.length-1];if(-1==(p=a.indexOf(i)))p=r.indexOf(i),-1==(c=r.indexOf(e))?(this.setData("multiSelectedItems",o),this.removeClass(),this.addToArray(e,t)):(this.positionalPush(e),e.classList.contains("lyteDraggableElem")||e.classList.add("lyteDraggableElem"));else-1==(c=a.indexOf(e))?(this.setData("multiSelectedItems",o),this.removeClass(),this.addToArray(e,t)):(this.positionalPush(e),e.classList.contains("lyteDraggableElem")||e.classList.add("lyteDraggableElem"))}else this.getData("multiSelectedItems").push(e),e.classList.contains("lyteDraggableElem")||e.classList.add("lyteDraggableElem");this.setData("prevMode",t)}if("multiple"==t){if("multiple"==this.getData("prevMode")||""==this.getData("prevMode")){this.removeClass();var s=[];a=Array.from(this.$node.querySelectorAll("#sortableSec>li")),r=Array.from(this.$node.querySelectorAll("#dropSec>li"));if(-1==(c=a.indexOf(e))){c=r.indexOf(e);for(var l=0;l<=c;l++)s.push(r[l]),r[l].classList.add("lyteDraggableElem")}else for(l=0;l<=c;l++)s.push(a[l]),a[l].classList.add("lyteDraggableElem");this.setData("multiSelectedItems",s)}if("single"==this.getData("prevMode")){var n;a=Array.from(this.$node.querySelectorAll("#sortableSec>li")),r=Array.from(this.$node.querySelectorAll("#dropSec>li"));if((n=this.getData("multiSelectedItems")).length>0){var p,c;i=n[n.length-1];if(-1==(p=a.indexOf(i))){if(p=r.indexOf(i),-1==(c=r.indexOf(e)))this.setData("prevMode",t),this.removeClass(),this.addToArray(e,t);else if(-1!=p)if(p<=c)for(l=p;l<=c;l++)-1==n.indexOf(r[l])&&(r[l].classList.add("lyteDraggableElem"),this.positionalPush(r[l]));else for(l=c;l<=p;l++)-1==n.indexOf(r[l])&&(r[l].classList.add("lyteDraggableElem"),this.positionalPush(r[l]))}else if(-1===(c=a.indexOf(e)))this.setData("prevMode",t),this.removeClass(),this.addToArray(e,t);else if(-1!=p)if(p<=c)for(l=p;l<=c;l++)-1==n.indexOf(a[l])&&(a[l].classList.add("lyteDraggableElem"),this.positionalPush(a[l]));else for(l=c;l<=p;l++)-1==n.indexOf(a[l])&&(a[l].classList.add("lyteDraggableElem"),this.positionalPush(a[l]))}else this.setData("prevMode",t),this.removeClass(),this.addToArray(e,t)}this.setData("prevMode",t)}},removeFromArray:function(e){if(this.getData("multiSelectedItems").length>0){var t=this.getData("multiSelectedItems").indexOf(e);this.getData("multiSelectedItems").splice(t,1)}},getTopNBottom:function(e){return"top"===e?this.getData("multiSelectedItems")[0].getBoundingClientRect().top:"bottom"==e?this.getData("multiSelectedItems")[this.getData("multiSelectedItems").length-1].getBoundingClientRect().bottom:void 0},makeDroppableMultiple:function(e){var t=Array.from(this.$node.querySelectorAll("#sortableSec>li")),o=Array.from(this.$node.querySelectorAll("#dropSec>li"));if(-1==t.indexOf(e[0])){if(t.length>0)for(var a=0;a<t.length;a++)t[a].classList.add("dropable");if(o.length>0)for(a=0;a<o.length;a++){flag=!1;for(var r=0;r<e.length;r++)if(o[a]==e[r]){flag=!0;break}flag||o[a].classList.add("dropable")}}else{if(t.length>0)for(a=0;a<t.length;a++){flag=!1;for(r=0;r<e.length;r++)if(t[a]==e[r]){flag=!0;break}flag||t[a].classList.add("dropable")}if(o.length>0)for(a=0;a<o.length;a++)o[a].classList.add("dropable")}},removeDropableMultiple:function(e){var t=Array.from(this.$node.querySelectorAll("#sortableSec>li")),o=Array.from(this.$node.querySelectorAll("#dropSec>li"));if(-1==t.indexOf(e[0])){if(t.length>0)for(var a=0;a<t.length;a++)t[a].classList.remove("dropable");if(o.length>0)for(a=0;a<o.length;a++){flag=!1;for(var r=0;r<e.length;r++)if(o[a]==e[r]){flag=!0;break}flag||o[a].classList.remove("dropable")}}else{if(t.length>0)for(a=0;a<t.length;a++){flag=!1;for(r=0;r<e.length;r++)if(t[a]==e[r]){flag=!0;break}flag||t[a].classList.remove("dropable")}if(o.length>0)for(a=0;a<o.length;a++)o[a].classList.remove("dropable")}},checkElement:function(e){return e==this.$node.querySelector("#sortableSec")||e==this.$node.querySelector("#dropSec")},checkPossiblePosition:function(e,t){var o=Array.from(this.$node.querySelectorAll("#"+e.id+" > li"));if("single"==t){if(!(o.length>0))return!0;var a=o[o.length-1];if(this.getData("div").getBoundingClientRect().top>a.getBoundingClientRect().bottom)return!0}if("multiple"==t){if(!(o.length>0))return!0;a=o[o.length-1];if(this.getTopNBottom("top")>a.getBoundingClientRect().bottom)return!0}return!1},checkIfDroppable:function(e,t){if("multiple"===t){var o=this.getData("multiSelectedItems");if(o[0].parentElement.id===e.id&&"sortableSec"===e.id&&e.querySelectorAll("li").length===o.length&&o[0].getBoundingClientRect().left<e.getBoundingClientRect().left+o[0].getBoundingClientRect().width/2)return!0;if(o[0].parentElement.id===e.id&&"dropSec"===e.id&&e.querySelectorAll("li").length===o.length&&o[0].getBoundingClientRect().right>e.getBoundingClientRect().right-o[0].getBoundingClientRect().width/2)return!0}if("single"===t){var a=this.getData("div");if(a.parentElement.id===e.id&&"sortableSec"===e.id&&1===e.querySelectorAll("li").length&&a.getBoundingClientRect().left<e.getBoundingClientRect().left+a.getBoundingClientRect().width/2)return!0;if(a.parentElement.id===e.id&&"dropSec"===e.id&&1===e.querySelectorAll("li").length&&a.getBoundingClientRect().right>e.getBoundingClientRect().right-a.getBoundingClientRect().width/2)return!0}return!1},appendElement:function(e,t){var o,a=e.target;if("span"==t)a.classList.contains("lyteDragDropAdd")&&this.onClickFunction(e,this.getElement(a.parentElement),"availableList")&&(o=this.getElement(a.parentElement),Lyte.arrayUtils(this.getData("ltPropAvailablelist"),"removeAt",this.getElementPosition(this.getData("ltPropAvailablelist"),o),1),Lyte.arrayUtils(this.getData("ltPropSelectedlist"),"push",o),o=null,this.generateArray(),this.onDropFunction(e)),a.classList.contains("lyteDragDropRemove")&&this.onClickFunction(e,this.getElement(a.parentElement),"selectedList")&&(o=this.getElement(a.parentElement),Lyte.arrayUtils(this.getData("ltPropSelectedlist"),"removeAt",this.getElementPosition(this.getData("ltPropSelectedlist"),o),1),Lyte.arrayUtils(this.getData("ltPropAvailablelist"),"push",o),o=null,this.generateArray(),this.onDropFunction(e));else for(;a;){if(a.parentElement&&"sortableSec"==a.parentElement.id&&this.onClickFunction(e,this.getElement(a),"availableList")){o=this.getElement(a),Lyte.arrayUtils(this.getData("ltPropAvailablelist"),"removeAt",this.getElementPosition(this.getData("ltPropAvailablelist"),o),1),Lyte.arrayUtils(this.getData("ltPropSelectedlist"),"push",o),o=null,this.generateArray(),this.onDropFunction(e);break}if(a.parentElement&&"dropSec"==a.parentElement.id&&this.onClickFunction(e,this.getElement(a),"selectedList")){o=this.getElement(a),Lyte.arrayUtils(this.getData("ltPropSelectedlist"),"removeAt",this.getElementPosition(this.getData("ltPropSelectedlist"),o),1),Lyte.arrayUtils(this.getData("ltPropAvailablelist"),"push",o),o=null,this.generateArray(),this.onDropFunction(e);break}a=a.parentElement}},removeStyle:function(e){e.style.left="",e.style.top="",e.style.boxSizing="",e.style.width="",e.style.height="",e.style.position="",e.style.visibility=""},getElement:function(e){return e.dataset.propvalue?JSON.parse(e.dataset.propvalue):null},getElementPosition:function(e,t){for(var o=0;o<e.length;o++){var a=!0;for(var r in e[o])if(e[o][r]!=t[r]){a=!1;break}if(a)return o}return-1},hideOrShowMessageOnEmpty:function(e,t){"availableList"==e?this.getData("ltPropAvailablelist").length>0?this.$node.querySelector("#AvailableNone").style.visibility="hidden":(t&&(this.$node.querySelector("#AvailableNone").innerHTML=t),this.$node.querySelector("#AvailableNone").style.visibility="visible"):"selectedList"==e&&(this.getData("ltPropSelectedlist").length>0?this.$node.querySelector("#SelectedNone").style.visibility="hidden":(t&&(this.$node.querySelector("#SelectedNone").innerHTML=t),this.$node.querySelector("#SelectedNone").style.visibility="visible"))},selectFunction:function(e,t){var o,a="sortableSec"==t.parentElement.id?"availableList":"selectedList";return this.getMethods("onSelect")&&(o=this.executeMethod("onSelect",e,this.getElement(t),this.getData("ltPropAvailablelist"),this.getData("ltPropSelectedlist"),a)),null==o||o},onDragFunction:function(e){var t;t=this.getData("ltPropMultiselect")?this.getData("multiSelectedItems"):this.getData("div"),this.getMethods("onDrag")&&this.executeMethod("onDrag",e,t)},onBeforeDropFunction:function(e){var t,o=[];if(this.getData("ltPropMultiselect"))for(var a=0;a<this.getData("multiSelectedItems").length;a++)o.push(this.getElement(this.getData("multiSelectedItems")[a]));else o.push(this.getElement(this.getData("div")));return this.setData("draggedItems",o),this.getMethods("onBeforeDrop")&&(t=this.executeMethod("onBeforeDrop",e,o,this.getData("ltPropAvailablelist"),this.getData("ltPropSelectedlist"))),null==t||t},onDropFunction:function(e){this.getMethods("onDrop")&&this.executeMethod("onDrop",e,this.getData("draggedItems"),this.getData("availableList"),this.getData("selectedList"))},onClickFunction:function(e,t,o){var a,r=[];return r.push(t),this.setData("draggedItems",r),this.getMethods("onClick")&&(a=this.executeMethod("onClick",e,t,this.getData("ltPropAvailablelist"),this.getData("ltPropSelectedlist"),o)),null==a||a},actions:{mouseDown:function(e){if(3!=e.which&&(e.preventDefault(),3!=e.which)){var t=this.getData("clickCount");t++,this.setData("clickCount",t);var o,a=this;if(1===t)singleClickTimer=setTimeout((function(){t=0,a.setData("clickCount",t)}),400);else if(2===t)return clearTimeout(singleClickTimer),t=0,this.setData("clickCount",t),void this.appendElement(e);var r=e.target;if(r.classList.contains("lyteDragDropAdd")||r.classList.contains("lyteDragDropRemove")?this.appendElement(e,"span"):o="span"==r.tagName.toLowerCase()?e.target.parentElement:e.target,o&&this.selectFunction(e,o)){var i=o.getBoundingClientRect(),s=o.offsetParent.getBoundingClientRect(),l=o.clientHeight,n=o.clientWidth,p=this.getData("multiSelectedItems");if(this.getData("ltPropMultiselect")){if(p.length>0&&-1!=p.indexOf(o)){this.setData("offset",[e.clientX-i.left,e.clientY-i.top]),this.setData("div",o);var c=this.getData("div");l=o.clientHeight,n=o.clientWidth;c.style.left=i.left-s.left+"px",c.style.top=i.top-s.top+"px",c.style.boxSizing="border-box",c.style.width=n+"px",c.style.height=l+"px",c.style.position="absolute",c.classList.add("lyteDraggableElem"),this.setData("placeholder",document.createElement("li")),(u=this.getData("placeholder")).setAttribute("id","dummy"),u.style.width=n+"px",u.style.height=l+"px",u.style.boxSizing="border-box",c.parentNode.insertBefore(u,c),this.setData("checkSelection",!0)}else{var d=this.getData("keyValue");91==d||93==d||224==d?o.classList.contains("lyteDraggableElem")?(o.classList.remove("lyteDraggableElem"),this.removeFromArray(o)):(o.classList.add("lyteDraggableElem"),this.addToArray(o,"single")):16==d?o.classList.contains("lyteDraggableElem")?(o.classList.remove("lyteDraggableElem"),this.addToArray(o,"multiple")):(o.classList.add("lyteDraggableElem"),this.addToArray(o,"multiple")):0==d&&(o.classList.contains("lyteDraggableElem")?("multiple"==this.getData("prevMode")?(this.removeClass(),this.setData("multiSelectedItems",[]),o.classList.add("lyteDraggableElem"),this.getData("multiSelectedItems").push(o)):(o.classList.remove("lyteDraggableElem"),this.removeFromArray(o)),this.setData("prevMode","single")):(this.removeClass(),this.setData("multiSelectedItems",[]),o.classList.add("lyteDraggableElem"),this.getData("multiSelectedItems").push(o),this.setData("prevMode","single"))),this.setData("offset",[e.clientX-i.left,e.clientY-i.top]),this.setData("div",o);c=this.getData("div"),l=o.clientHeight,n=o.clientWidth;c.style.left=i.left-s.left+"px",c.style.top=i.top-s.top+"px",c.style.boxSizing="border-box",c.style.width=n+"px",c.style.height=l+"px",c.style.position="absolute",c.classList.add("lyteDraggableElem"),this.setData("placeholder",document.createElement("li")),(u=this.getData("placeholder")).setAttribute("id","dummy"),u.style.width=n+"px",u.style.height=l+"px",u.style.boxSizing="border-box",c.parentNode.insertBefore(u,c)}this.setData("isDown",!0)}else{this.removeClass(),o.classList.add("lyteDraggableElem"),this.setData("offset",[e.clientX-i.left,e.clientY-i.top]);this.setData("div",o);var u;c=this.getData("div");this.setData("isDown",!0),c.style.left=i.left-s.left+"px",c.style.top=i.top-s.top+"px",c.style.boxSizing="border-box",c.style.width=n+"px",c.style.height=l+"px",c.style.position="absolute",c.classList.add("lyteDraggableElem"),this.setData("placeholder",document.createElement("li")),(u=this.getData("placeholder")).setAttribute("id","dummy"),u.style.width=n+"px",u.style.height=l+"px",u.style.boxSizing="border-box",c.parentNode.insertBefore(u,c)}}}},mouseOver:function(e){var t;(t="span"==e.target.tagName.toLowerCase()?e.target.parentElement:e.target).classList.contains("lyteDraggableElem")?("sortableSec"==t.parentElement.id&&t.querySelector(".lyteDragDropAdd")&&(t.querySelector(".lyteDragDropAdd").style.visibility="hidden"),"dropSec"==t.parentElement.id&&t.querySelector(".lyteDragDropRemove")&&(t.querySelector(".lyteDragDropRemove").style.visibility="hidden")):("sortableSec"==t.parentElement.id&&t.querySelector(".lyteDragDropAdd")&&(t.querySelector(".lyteDragDropAdd").style.visibility="visible"),"dropSec"==t.parentElement.id&&t.querySelector(".lyteDragDropRemove")&&(t.querySelector(".lyteDragDropRemove").style.visibility="visible"))},mouseOut:function(e){"span"==e.target.tagName.toLowerCase()?target=e.target.parentElement:target=e.target,"sortableSec"==target.parentElement.id&&target.querySelector(".lyteDragDropAdd")&&(target.querySelector(".lyteDragDropAdd").style.visibility="hidden"),"dropSec"==target.parentElement.id&&target.querySelector(".lyteDragDropRemove")&&(target.querySelector(".lyteDragDropRemove").style.visibility="hidden")}}}),"complete"===document.readyState||"interactive"===document.readyState?addEvent():document.addEventListener("DOMContentLoaded",(function(e){addEvent(e)})),Lyte.Component.register("lyte-radiobutton",{_template:'<template tag-name="lyte-radiobutton"> <template is="switch" value="{{ltPropType}}"><template case="default"></template><template case="primary"></template><template case="secondary"> <label class="{{radioclass}}" onmouseup="{{action(\'mup\',event)}}"> <input onkeypress="{{action(\'preventPropagation\',event)}}" type="radio" name="{{ltPropName}}" value="{{ltPropValue}}" class="lyteHide" onclick="{{action(\'valueChanged\',event)}}" disabled="{{ltPropDisabled}}" checked="{{ltPropChecked}}"> <span class="{{ltPropClass}}"> <span class="lyteRadioCheck"> </span> </span> <span class="{{ltPropLabelClass}}"> <template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield yield-name="yield"></lyte-yield> </template><template case="false"> {{ltPropLabel}} </template></template> </span> </label> </template><template case="switch"> <label class="" onmouseup="{{action(\'mup\',event)}}"> <input onkeypress="{{action(\'preventPropagation\',event)}}" type="radio" name="{{ltPropName}}" value="{{ltPropValue}}" checked="{{ltPropChecked}}" disabled="{{ltPropDisabled}}" class="lyteHide on-off-sw" readonly="{{ltPropReadonly}}" onclick="{{action(\'valueChanged\',event)}}"> <span class="{{ltPropClass}}"> <span class="on-btn"></span> </span> <span class="{{ltPropLabelClass}}"> <template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield yield-name="yield"></lyte-yield> </template><template case="false"> {{ltPropLabel}} </template></template> </span> </label> </template><template case="slider"> <label class="lyteRadioSliderLabel" onmouseup="{{action(\'mup\',event)}}"> <input onkeypress="{{action(\'preventPropagation\',event)}}" type="radio" id="{{ltPropId}}" name="{{ltPropName}}" value="{{ltPropValue}}" checked="{{ltPropChecked}}" disabled="{{ltPropDisabled}}" class="lyteHide" readonly="{{ltPropReadonly}}" onclick="{{action(\'valueChanged\',event)}}"> <span class="{{ltPropClass}}"> <span class="{{ltPropLabelClass}}"> <template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield yield-name="yield"></lyte-yield> </template><template case="false"> {{ltPropLabel}} </template></template> </span> </span> </label> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{default:{dynamicNodes:[],additional:{next:"primary"}},primary:{dynamicNodes:[],additional:{next:"secondary"}},secondary:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,3]},{type:"attr",position:[1,5]},{type:"attr",position:[1,5,1]},{type:"if",position:[1,5,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]},switch:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,3]},{type:"attr",position:[1,5]},{type:"attr",position:[1,5,1]},{type:"if",position:[1,5,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]},slider:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,3]},{type:"attr",position:[1,3,1]},{type:"attr",position:[1,3,1,1]},{type:"if",position:[1,3,1,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]}},default:{}}],_observedAttributes:["ltPropType","ltPropName","ltPropDisabled","ltPropChecked","ltPropLabel","ltPropValue","ltPropFireOnInit","ltPropLabelClass","ltPropClass","ltPropYield","ltPropAriaRadio","ltPropFocus","lyteUnbound"],data:function(){return{ltPropType:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-radiobutton","type","default")}),ltPropName:Lyte.attr("string",{default:void 0}),ltPropDisabled:Lyte.attr("boolean",{default:!1}),ltPropChecked:Lyte.attr("boolean",{default:!1}),ltPropLabel:Lyte.attr("string",{default:void 0}),ltPropValue:Lyte.attr("string",{default:void 0}),ltPropFireOnInit:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-radiobutton","fireOnInit",!1)}),ltPropLabelClass:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-radiobutton","labelClass","")}),ltPropClass:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-radiobutton","class","")}),ltPropYield:Lyte.attr("boolean",{default:!1}),ltPropAriaRadio:Lyte.attr("object",{default:_lyteUiUtils.resolveDefaultValue("lyte-radiobutton","ariaRadio",{})}),ltPropFocus:Lyte.attr("boolean",{default:!1}),lyteUnbound:Lyte.attr("boolean",{default:!1})}},ariaObserver:function(e){var t=e.oldValue,o=e.newValue;this.addAriaValues(t,o)}.observes("ltPropAriaRadio"),didDestroy:function(){delete this.$node.focus,delete this.$node.blur,delete this.$node.click},changeStyle:function(){this.changeStyleFunction()}.observes("ltPropType"),changeStyleFunction:function(){var e=this.getData("ltPropType"),t=(this.getData("ltPropChecked"),this.getData("ltPropClass")),o=this.getData("ltPropLabelClass");-1===e.indexOf("slider")&&-1===e.indexOf("switch")&&-1===e.indexOf("default")&&-1===e.indexOf("primary")&&-1===e.indexOf("secondary")&&this.setData("ltPropType","default"),-1!==e.indexOf("default")?(this.setData("radioclass","lyteRadioBtn lyteDefault"),this.setData("ltPropClass",t||"lyteRadioLayer"),this.setData("ltPropLabelClass",o||"lyteRadioLabel")):-1!==e.indexOf("primary")?(this.setData("radioclass","lyteRadioBtn lytePrimary"),this.setData("ltPropClass",t||"lyteRadioLayer"),this.setData("ltPropLabelClass",o||"lyteRadioLabel")):-1!==e.indexOf("secondary")?(this.setData("radioclass","lyteRadioBtn lyteSecondary"),this.setData("ltPropClass",t||"lyteRadioLayer"),this.setData("ltPropLabelClass",o||"lyteRadioLabel")):-1!==e.indexOf("switch")?(this.setData("ltPropClass",t||"lyteRadioSwitch"),this.setData("ltPropLabelClass",o||"lyteRadioLabel")):-1!==e.indexOf("slider")&&(this.setData("ltPropClass",t||"lyteRadioSlider"),this.setData("ltPropLabelClass",o||"lyteRadioSliderText"))},reduceOpacity:function(){this.getData("ltPropDisabled")?this.$node.classList.add("lyteRadioDisabled"):this.$node.classList.remove("lyteRadioDisabled")},disabledChange:function(){this.reduceOpacity()}.observes("ltPropDisabled"),init:function(){this.changeStyleFunction()},didConnect:function(){var e=this,t=this.getData("ltPropAriaRadio");this.reduceOpacity(),this.$node.click=function(){var t=new Event("click",{bubbles:!0,cancelable:!0}),o=e.$node,a=o.ltProp("checked");o.ltProp("disabled")||(o.component.clickFn=!0,a||(o._fR?(o.component.resetValues(),o.component.checkFR(o)):o.ltProp("checked",!0)),o.component.clickFn=!1,o.dispatchEvent(t))},this.$node.focus=function(){var t=e.$node,o=t.querySelector("input");t.ltProp("disabled")||o.focus()},this.$node.blur=function(){var t=e.$node,o=t.querySelector("input");t.ltProp("disabled")||o.blur()},this.callMethodsOnInit(!0),this.addAriaValues({},t)},addAriaValues:function(e,t){var o=this.getRadioWidget();_lyteUiUtils.setAttribute(o,t,e)},getRadioWidget:function(){return this.$node.querySelector("input")},check:function(e,t){this.getMethods("onChecked")&&this.executeMethod("onChecked",e,t,this.eventType())},uncheck:function(e,t){this.getMethods("onUnchecked")&&this.executeMethod("onUnchecked",e,t,this.eventType())},beforeCheck:function(e,t){if(this.getMethods("onBeforeChecked"))return this.executeMethod("onBeforeChecked",e,t,this.eventType())},beforeUncheck:function(e,t){if(this.getMethods("onBeforeUnchecked"))return this.executeMethod("onBeforeUnchecked",e,t,this.eventType())},onchanged:function(e,t){this.getMethods("onChanged")&&this.executeMethod("onChanged",e,t,this.eventType())},checkCurrentRadio:function(){this.eveType="key",this.setData("ltPropChecked",!0),this.eveType=""},checkNextRadio:function(){var e=this.extractAllRadios(),t=this.getCheckableRadio(e,1);-1!==t&&(e[t].component.eveType="key",e[t].ltProp("checked",!0),e[t].component.eveType="")},checkPreviousRadio:function(){var e=this.extractAllRadios(),t=this.getCheckableRadio(e,-1);-1!==t&&(e[t].component.eveType="key",e[t].ltProp("checked",!0),e[t].component.eveType="")},getCheckableRadio:function(e,t){for(var o=this.getIndex(e),a=e.length,r=o,i=0;i<a;i++)if((r+=t)<0?r=a-1:r===a&&(r=0),!e[r].ltProp("disabled")||r===o)return r;return-1},extractAllRadios:function(){for(var e,t=this.getData("ltPropName"),o=0,a=document.querySelectorAll('input[type="radio"][name="'+t+'"]'),r=[];o<a.length;o++){for(e=a[o];"LYTE-RADIOBUTTON"!==e.tagName&&"HTML"!==e.tagName;)e=e.parentElement;"LYTE-RADIOBUTTON"===e.tagName&&r.push(e)}return r},getIndex:function(e){return e.indexOf(this.$node)},extractRadios:function(){for(var e,t=this.getData("ltPropName"),o=0,a=document.querySelectorAll('input[type="radio"][name="'+t+'"]');o<a.length;o++){for(e=a[o];"LYTE-RADIOBUTTON"!==e.tagName&&"HTML"!==e.tagName;)e=e.parentElement;if("LYTE-RADIOBUTTON"===e.tagName&&e.ltProp("checked")&&e!=this.$node)return e}},changeChecks:function(e){var t,o=this.extractRadios(),a=(o&&o.querySelector("input"),o&&o.component),r=this.$node.querySelector("input");if(!e.newValue||!e.oldValue)if(e.newValue){if(this.setData("prevent",!0),this.setData("ltPropChecked",!1),o&&(t=this.beforeUncheck(r,this)),!1===t)return void this.revertState(o,this.$node);if(!1===this.beforeCheck(r,this))return void this.revertState(o,this.$node);o&&(a.setData("prevent",!0),o.ltProp("checked",!1),a.setData("prevent",!1),this.uncheck(r,this)),this.setData("ltPropChecked",!0),this.setData("prevent",!1),this.check(r,this),this.onchanged(r,this)}else if(!e.newValue&&e.oldValue){if(this.setData("prevent",!0),this.setData("ltPropChecked",!0),!1===(t=this.beforeUncheck(r,this)))return void this.revertState(this.$node,{});this.setData("ltPropChecked",!1),this.uncheck(r,this),this.onchanged(r,this),this.setData("prevent",!1)}},change:function(e){var t=this.getData("ltPropName"),o=document.querySelector('input[type="radio"][name="'+t+'"]:checked');this.getData("onChange")?e.newValue?this.check(o,this):this.uncheck(o,this.getData("second")):this.changeChecks(e)},resetValues:function(){for(var e,t=this.getData("ltPropName"),o=document.querySelectorAll('input[type="radio"][name="'+t+'"]'),a=0,r=o.length;a<r;a++)(e=o[a].parentElement.parentElement.component).setData("prev",void 0),e.setData("node",void 0)},valueChanged:function(e){this.fireCallbacks(e)}.observes("ltPropChecked"),fireCallbacks:function(e){var t=e.oldValue,o=e.newValue;t&&!o&&this.resetValues(),this.getData("prevent")||(o&&this.$node.focus(),this.change(e))},focusRadioButton:function(){this.getData("ltPropFocus")&&this.$node.focus(),this.data.ltPropFocus=!1}.observes("ltPropFocus").on("didConnect"),getParentRadio:function(e){for(;e&&"LYTE-RADIOBUTTON"!==e.tagName;)e=e.parentElement;return e},revertState:function(e,t){var o=(e||{}).component,a=(t||{}).component;o&&(o.setData("prevent",!0),o.setData("ltPropChecked",!0),e.querySelector("input").checked=!0,o.setData("prevent",!1)),a&&(a.setData("prevent",!0),a.setData("ltPropChecked",!1),t.querySelector("input").checked=!1,a.setData("prevent",!1))},callMethodsOnInit:function(){var e=this.getData("ltPropFireOnInit"),t=this.getData("ltPropChecked");if(e&&t){var o=this.$node.querySelector("input");o.getAttribute("value");this.beforeCheck(o,this),this.check(o,this),this.onchanged(o,this)}},checkFR:function(e){e.component.setData("ltPropChecked",!0),e.querySelector("input").checked=!0,e.component.fireCallbacks({oldValue:!1,newValue:!0})},uncheckFR:function(e){e.component.setData("ltPropChecked",!1),e.querySelector("input").checked=!1,e.component.fireCallbacks({oldValue:!0,newValue:!1})},eventType:function(){var e=this.clicked||this.clickFn,t=this.eveType;return e?"click":t||"script"},actions:{preventPropagation:function(){32===event.keyCode&&(this.preventClick=!0)},mup:function(e){var t=this.getData("ltPropName"),o=document.querySelector('input[type="radio"][name="'+t+'"]:checked');this.setData("shouldCallUnChecked",!1),o&&(this.setData("prev",o.getAttribute("value")),this.setData("node",o),this.setData("shouldCallUnChecked",!0));var a=this.$node.querySelector("input"),r=a.checked;if(!a.disabled&&!r){if(this.clicked=!0,this.getData("shouldCallUnChecked")&&!1===this.beforeUncheck(a,this))return this.setData("revertState",!0),void(this.clicked=!1);if(!1===this.beforeCheck(a,this))return this.setData("revertState",!0),void(this.clicked=!1)}},valueChanged:function(e){var t=e.target,o=t.getAttribute("value"),a=this.getData("prev"),r=this.getData("node"),i=this.getData("revertState"),s=this.getParentRadio(r),l=this.$node,n=r&&r.parentElement.parentElement.component;t.parentElement.parentElement;if(e.stopPropagation(),this.preventClick)this.preventClick=!1;else if(o!==a){if(i)return this.revertState(s,l),this.setData("node",void 0),void(this.clicked=!1);if(r){for(;"LYTE-RADIOBUTTON"!==r.tagName;)r=r.parentElement;n.setData("onChange",!0),n.setData("second",this),r._fR?this.uncheckFR(r):r.ltProp("checked",!1),n.setData("second",void 0),n.setData("onChange",!1)}(r=this.getData("node"))&&this.setData("node",void 0),this.setData("onChange",!0),this.$node._fR?this.checkFR(this.$node):this.setData("ltPropChecked",!0),this.setData("onChange",!1),this.onchanged(t,this),this.clicked=!1}}}}),document.addEventListener("keydown",(function(e){var t,o,a=e.keyCode;if(37===a||38===a||39===a||40===a||32===a){if("INPUT"!==(t=document.activeElement).tagName)return;for(;"LYTE-RADIOBUTTON"!==t.tagName&&"HTML"!==t.tagName;)t=t.parentElement;if("LYTE-RADIOBUTTON"===t.tagName)switch(o=t.component,e.preventDefault(),a){case 37:case 38:o.checkPreviousRadio();break;case 39:case 40:o.checkNextRadio();break;case 32:o.checkCurrentRadio()}}})),Lyte.Component.register("lyte-tooltip",{_template:'<template tag-name="lyte-tooltip"> </template>',_dynamicNodes:[],_observedAttributes:["ltPropId","ltPropClass","ltPropKeepAlive","ltPropTooltipConfig","ltPropIgnoreClass","tooltips"],init:function(){this.getMethods("beforeRender")&&this.executeMethod("beforeRender",this.$node)},rtlfunc:function(e,t,o){if(this._dir&&"top"!=e&&"clientY"!=e){if(t)return"right"==e?o-t.left:"clientX"==e?o-t.clientX:o-t.right;if("left"==e)return"right";if("right"==e)return"left"}return t?t[e]:e},data:function(){return{ltPropId:Lyte.attr("string",{default:""}),ltPropClass:Lyte.attr("string",{default:""}),ltPropKeepAlive:Lyte.attr("boolean",{default:!1}),ltPropTooltipConfig:Lyte.attr("object",{default:{}}),ltPropIgnoreClass:Lyte.attr("string",{default:"lyteTooltipIgnore"}),tooltips:Lyte.attr("object",{default:{}})}},didConnect:function(){this._dir=_lyteUiUtils.getRTL(),Array.from(document.body.getElementsByTagName("lyte-tooltip")).forEach(function(e){e!=this.$node&&document.body.removeChild(e)}.bind(this)),this._mousemove=this.mousemove.bind(this),this._mousedown=this.mousedown.bind(this),this._mouseup=this.mouseup.bind(this),this._keydown=this.keydown.bind(this),this._toolscroll=this.tooltipScroll.bind(this),document.addEventListener("mousemove",this._mousemove,!0),window.addEventListener("scroll",this._toolscroll,!0),document.addEventListener("keydown",this._keydown,!0),document.addEventListener("mousedown",this._mousedown,!0),document.addEventListener("touchstart",this._mousedown),this.getMethods("afterRender")&&this.executeMethod("afterRender",this.$node),this.$node.trigger=function(e){this.mousemove({target:e||document.body})}.bind(this)},tooltipScroll:function(e){var t=this.data.tooltips;for(var o in t)t[o].classList.add("lyteTooltipHidden")},mousedown:function(e){this._mousedownFlag=!0;var t=e.target.correspondingElement||e.target,o=$L(t),a=/touch/i.test(e.type);if(!(a&&e.touches.length>1)){if(o.hasClass("lyteSliderHandler")&&(delete this.prevTooltipNode,this._slider=!0),o.hasClass("lyteTooltip")){var r=t.nodeName1;this.hover_process(r),this.closeAllTooltip(r,!0)}else this.closeAllTooltip(void 0,!0);document.addEventListener(a?"touchend":"mouseup",this._mouseup,!0)}},mouseup:function(e){if(delete this._mousedownFlag,document.removeEventListener(e.type,this._mouseup,!0),this._slider){delete this._slider;var t=e.target.correspondingElement||e.target;$L(t).hasClass("lyteSliderHandler")&&this.mousemove({target:t})}},keydown:function(e){delete this.prevTooltipNode,this.closeAllTooltip()},tooltipOpenCallback:function(e,t){e.onTooltipShow&&e.onTooltipShow.apply(this,arguments),this.getMethods("onTooltipShow")&&this.executeMethod("onTooltipShow",e,t,e.tooltip)},tooltipCloseCallback:function(e){e.onTooltipHide&&e.onTooltipHide.apply(this,arguments),this.getMethods("onTooltipHide")&&this.executeMethod("onTooltipHide",e)},didDestroy:function(){window.removeEventListener("scroll",this._toolscroll,!0),document.removeEventListener("mousemove",this._mousemove,!0),document.removeEventListener("mousedown",this._mousedown,!0),document.removeEventListener("touchstart",this._mousedown),document.removeEventListener("keydown",this._keydown,!0);var e=this.data.tooltips;for(var t in e){var o=e[t];delete o.nodeName1.tooltipSpan,delete o.nodeName1.tooltip,o.parentNode&&document.body.removeChild(o)}delete this.$node.trigger,delete this._toolscroll,delete this._mousedown,delete this._keydown,delete this._mousemove,this.data.tooltips=[],this.data.tooltips={}},propertySetting:function(e){var t=e.getAttribute("lt-prop-tooltip-config")||"{}";t=JSON.parse(t);for(var o in t)e.tooltip.config[o]=t[o]},createTooltip:function(e,t,o){if(o?this.followcursor(e,t):this.nonFollowcursor(e,t),!this.getData("ltPropKeepAlive")){var a=t.nodeName1.tooltip;1!=a.config.keeptooltip&&"true"!=a.config.keeptooltip&&(a.maxdisp=setTimeout(this.removeTooltip.bind(this,t),a.config.maxdisplaytime))}},followcursor:function(e,t){document.body.contains(t)&&(t._callbackHandled||(this.tooltipOpenCallback(t.nodeName1,t),t._callbackHandled=!0),t.classList.contains("lyteTooltipHidden")?(t.classList.remove("lyteTooltipHidden"),$L.fastdom.measure(this._followcursor.bind(this,e,t))):this._followcursor(e,t))},_followcursor:function(e,t){if(this.data.tooltips[t._random]){var o,a=t.getBoundingClientRect(),r=t.nodeName1.getBoundingClientRect(),i=(window.pageXOffset||document.documentElement.scrollLeft)*(this._dir?-1:1),s=window.pageYOffset||document.documentElement.scrollTop,l=window.innerWidth,n=window.innerHeight,p=Math.min(20,parseInt(t.nodeName1.tooltip.config.margin)),c=this.rtlfunc.call(this,"clientX",e,l),d=e.clientY+s+5+p;if(c+a.width>l)if(c-a.width>0)c-=a.width;else{var u=l-(this.rtlfunc("left",r,l)+r.width/2),h=l-u;c=u>a.width/2&&h>a.width/2?h-.5*a.width:Math.max(0,l-a.width),o=!0}t.style[this.rtlfunc.call(this,"left")]=c+i+"px",t.style.top=d+"px",o&&$L.fastdom.measure(function(){this.data.tooltips[t._random]&&(a=t.getBoundingClientRect()).bottom>n&&e.clientY>n-e.clientY&&(t.style.top=e.clientY-a.height-p-5+s+"px")}.bind(this))}},createsupp:function(e){var t=document.createElement("span");return t.classList.add("lyteTooltipInnerSpan"),e.classList.add("lyteInnerToolAdded"),e.appendChild(t)},rightalign:function(e,t,o,a,r,i,s,l,n,p,c,d,u){if(e+t<o+a.width)return r.classList.remove(n),i||this.nonFollowcursor(s,r,p,!0),!0;if(o<t){if(u)this.createsupp(r).style[l]=.75*d-c+"px";r.style[l]=0}else r.style[l]=o+"px"},refresh:function(e,t){var o=t.nodeName1.tooltip;o.config;t.textContent=o.title=t.nodeName1.getAttribute("lt-prop-title"),this.clear_time(o),this.createTooltip(e,t)},clear_time:function(e,t){(t||["maxdisp","settime","bodyTimeout"]).forEach((function(t){clearTimeout(e[t]),delete e[t]}))},nonFollowcursor:function(e,t,o,a){var r,i="callout"==t.nodeName1.tooltip.config.appearance;t.classList.remove("lyteTooltipHidden"),r=(o=o||t.nodeName1.tooltip.config.position)||"bottom",i&&t.classList.add("lyte"+r[0].toUpperCase()+r.slice(1)),t._callbackHandled||(this.tooltipOpenCallback(t.nodeName1,t),t._callbackHandled=!0),$L.fastdom.measure(function(){if(t.nodeName1.tooltip){var r,s,l=(window.pageXOffset||document.documentElement.scrollLeft)*(this._dir?-1:1),n=window.pageYOffset||document.documentElement.scrollTop,p=window.innerWidth,c=window.innerHeight,d=t.getBoundingClientRect(),u=t.nodeName1.getBoundingClientRect(),h=this.rtlfunc("left",u,p)+l,m=u.top+n,y=Math.min(parseInt(t.nodeName1.tooltip.config.margin),20),f=t.offsetWidth,g=u.width,v=u.height,x=this.rtlfunc("left"),P=window.getComputedStyle(t),b=/content-box/.test(P.boxSizing),D=b?parseFloat(P.paddingLeft):0,L=b?parseFloat(P.paddingRight):0;b&&parseFloat(P.paddingTop),b&&parseFloat(P.paddingBottom);switch(i?(s=window.getComputedStyle(t,":before"),r=parseFloat(s.getPropertyValue("width"))/2*1.414,!isNaN(r)&&r||(r=parseFloat(window.getComputedStyle(t,"left"==o?":before":":after").getPropertyValue("border-left-width")))):r=0,o.toLowerCase()){case"right":var C=(h+=r)+g+y;if(t.style.top=m+v/2-d.height/2+"px",p+l<C+d.width){if(!a&&p-(h+g-l-r)<h-r-l){t.classList.remove("lyteRight"),this.nonFollowcursor.call(this,e,t,"left",!0);break}t.style[x]=C+"px",t.style.width=p-C-D-L+"px",$L.fastdom.mutate((function(){$L.fastdom.measure((function(){t.style.top=m+v/2-t.getBoundingClientRect().height/2+"px"}))}))}else t.style[x]=C+"px";break;case"left":C=(h-=r)-y-f;if(t.style.top=m+v/2-d.height/2+"px",C<l){if(!a&&h+r-l<p-(h+r-l+g)){t.classList.remove("lyteLeft"),this.nonFollowcursor.call(this,e,t,"right",!0);break}t.style[x]="0px",t.style.width=h-l-D-L+"px",$L.fastdom.mutate((function(){$L.fastdom.measure((function(){t.style.top=m+v/2-t.getBoundingClientRect().height/2+"px"}))}))}else t.style[x]=C+"px";break;case"bottom":C=h+g/2-f/2;if(n+c<(_=(m+=r)+v+y)+d.height&&(t.classList.remove("lyteBottom"),!a)){this.nonFollowcursor.call(this,e,t,"top",!0);break}C=this.horicheck(C,l,p,d,t,u,x,r,i),t.style[x]=C+"px",t.style.top=_+"px";break;case"top":C=h+g/2-f/2;if((_=(m-=r)-y-t.clientHeight)<n&&(t.classList.remove("lyteTop"),!a)){this.nonFollowcursor.call(this,e,t,"bottom",!0);break}C=this.horicheck(C,l,p,d,t,u,x,r,i),t.style[x]=C+"px",$L.fastdom.mutate((function(){$L.fastdom.measure((function(){t.style.top=m-y-t.getBoundingClientRect().height+"px"}))}));break;case"bottomright":m+=r;C=h+.75*g-(i?parseFloat(s[x])+r:.2*f);var _=m+v+y;if(this.rightalign(p,l,C,d,t,a,e,x,"lyteBottomright","bottomleft",r,g,i))break;if(c+n<_+d.height){t.classList.remove("lyteBottomright"),a||this.nonFollowcursor.call(this,e,t,"topright",!0);break}t.style.top=_+"px";break;case"topright":m-=r;C=h+.75*g-(i?parseFloat(s[x])+r:.2*f),_=m-t.clientHeight-y;if(this.rightalign(p,l,C,d,t,a,e,x,"lyteTopright","topleft",r,g,i))break;if(_<n){t.classList.remove("lyteTopright"),a||this.nonFollowcursor.call(this,e,t,"bottomright",!0);break}t.style.top=_+"px";break;case"bottomleft":m+=r;C=h+.25*g-(i?parseFloat(s[x]):.8*f)+"px",_=m+v+y+"px";if(parseInt(C)<l){t.classList.remove("lyteBottomleft"),a||this.nonFollowcursor.call(this,e,t,"bottomright",!0);break}if(t.style[x]=C,c+n<parseInt(_)+d.height){t.classList.remove("lyteBottomleft"),a||this.nonFollowcursor.call(this,e,t,"topleft",!0);break}t.style.top=_;break;case"topleft":m-=r;C=h+.25*g-(i?parseFloat(s[x]):.8*f)+"px",_=m-parseInt(t.clientHeight)-y+"px";if(parseInt(C)<l){t.classList.remove("lyteTopleft"),a||this.nonFollowcursor.call(this,e,t,"topright",!0);break}if(t.style[x]=C,parseInt(_)<n){t.classList.remove("lyteTopleft"),a||this.nonFollowcursor.call(this,e,t,"bottomleft",!0);break}t.style.top=_;break;default:var S=r;C=this.rtlfunc.call(this,"clientX",e,p)-f/2+l;if(c+n<(_=m+S+v+y)+d.height&&(t.classList.remove("lyteBottom"),!a)){this.nonFollowcursor.call(this,e,t,"top",!0);break}C=this.horicheck(C,l,p,d,t,u,x,r,i),t.style[x]=C+"px",t.style.top=_+"px"}t.style[this.rtlfunc("right")]="auto"}}.bind(this))},horicheck:function(e,t,o,a,r,i,s,l,n){var p,c;if(e<t?(e=t,p=!0):o+t<e+a.width&&(e=o-a.width+t,c=!0),(p||c)&&n){var d=this.createsupp(r);this.rtlfunc("left",i,o);if(p){var u=this.rtlfunc("left",i,o);d.style[s]=(Math.min(a.width,i.width)+Math.min(u,0))/2+Math.max(0,u)+"px"}else{var h=o-this.rtlfunc("right",i,o);d.style[s]=a.width-(Math.max(0,h)+(Math.min(a.width,i.width)+Math.min(h,0))/2)+"px"}}return e},closeAllTooltip:function(e,t){var o=this.data.tooltips;for(var a in o){var r=o[a];if(r.nodeName1!=e){var i=r.nodeName1.tooltip;if(t&&!i.config.hideOnClick)continue;null==i.bodyTimeout&&(i.bodyTimeout=setTimeout(this.removeTooltip.bind(this),i.config.hidedelay,r))}}},removeTooltip:function(e){if(e.parentNode==document.body){var t=e.nodeName1,o=t.tooltip;this.clear_time(o),this.prevTooltipNode==e.nodeName1&&delete this.prevTooltipNode,delete t.tooltipSpan,delete t.tooltip,document.body.removeChild(e),this.tooltipCloseCallback(t),delete this.data.tooltips[e._random]}},hover_process:function(e){var t=(e||{}).tooltip;t&&this.clear_time(t)},mousemove:function(e){if(!this._mousedownFlag){for(var t=e.target.correspondingElement||e.target;t&&"BODY"!=t.tagName&&t!=document&&"HTML"!=t.tagName;){var o=t.getAttribute?t.getAttribute("lt-prop-title"):"",a=$L(t);if(a.hasClass("lyteTooltip")){var r=t.nodeName1;if(((r.tooltip||{}).config||{}).hidedelay)return this.hover_process(r),this.closeAllTooltip(r)}if(a.hasClass(this.data.ltPropIgnoreClass)){delete this.prevTooltipNode,t=document.body;break}if(o){t.getAttribute("title")&&t.removeAttribute("title"),t.tooltip=t.tooltip||{},t.tooltip.config=$L.extend({position:"",appearance:"callout",margin:0,showdelay:0,hidedelay:0,maxdisplaytime:5e3,keeptooltip:!1,aria:!1,hideOnClick:!0},this.data.ltPropTooltipConfig||{}),t.tooltip.title=o,this.propertySetting(t);var i=t.tooltip;if(this.prevTooltipNode==t||i.tooltipSpan)if("followcursor"==i.config.position&&this.prevTooltipNode==t&&i.tooltipSpan){s=i.tooltipSpan;this.clear_time(i,["maxdisp","settime"]),s._callbackHandled?this.followcursor(e,s):i.settime=setTimeout(this.createTooltip.bind(this),i.config.showdelay,e,s,!0)}else i.tooltipSpan&&"none"==i.tooltipSpan.style.display?(i.tooltipSpan.style.display="",this.clear_time(i),i.settime=setTimeout(this.createTooltip.bind(this),i.config.showdelay,e,i.tooltipSpan,"followcursor"==i.config.position)):this.prevTooltipNode=t;else{this.prevTooltipNode=t;var s=document.createElement("span"),l=$L(s),n=a.attr("lt-prop-tooltip-class"),p=this.getData("ltPropId"),c=this.getData("ltPropClass"),d=Date.now()+"lytetooltip";this.data.tooltips[d]=s,s._random=d,p&&l.attr("id",p),c&&l.addClass(c),l.addClass("lyteTooltip lyteTooltipHidden"),this._dir&&l.addClass("lyteRTL"),l.attr("style",a.attr("lt-prop-tooltip-style")||""),s.style.borderColor||(s.style.borderColor=s.style.backgroundColor),"callout"==i.config.appearance&&"followcursor"!=i.config.position&&(l.addClass("lyteTooltipCallout"),i.config.hideOnClick||(i.refresh=this.refresh.bind(this))),i.tooltipSpan=s,s.nodeName1=t,l.addClass(n||""),i.aria&&l.attr("role","tooltip"),i.settime=setTimeout(this.createTooltip.bind(this),i.config.showdelay,e,s,"followcursor"==i.config.position),s.textContent=i.title,document.body.appendChild(s)}this.closeAllTooltip(t);break}t=t.parentNode}t&&-1!=["BODY","HTML"].indexOf(t.tagName)&&this.prevTooltipNode!=t&&(delete this.prevTooltipNode,this.closeAllTooltip())}}}),"complete"==document.readyState||"interactive"==document.readyState?document.body.querySelectorAll("lyte-tooltip").length||document.body.appendChild(document.createElement("lyte-tooltip")):document.addEventListener("DOMContentLoaded",(function(e){document.body.querySelectorAll("lyte-tooltip").length||document.body.appendChild(document.createElement("lyte-tooltip"))})),Lyte.Component.register("lyte-tabs",{_template:'<template tag-name="lyte-tabs"> <template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield yield-name="tabYield"></lyte-yield> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]}},default:{}}],_observedAttributes:["ltPropYield","ltPropHover","ltPropActiveClass","ltPropPosition","ltPropCloseIcon","prevTarget","ltPropHeight","ltPropType","ltPropMaxWidth","ltPropTabStyle","ltPropMenuWrapperClass","ltPropCurrentTab","menuLabels"],init:function(){this.$node.addTab=function(e){this.component.constructTabs(this,e)},this.$node.deleteTab=function(e){this.component.deleteTabContent(e)},this.$node.openTab=function(e){this.component.openTabContent(e)},this.$node.enableTab=function(e){this.component.enableTab(e)},this.$node.disableTab=function(e){this.component.disableTab(e)},this.$node.addCloseIcon=function(){this.component.checkCloseIcon()}},data:function(){return{ltPropYield:Lyte.attr("boolean",{default:!0}),ltPropHover:Lyte.attr("string",{default:"lyteTabHover"}),ltPropActiveClass:Lyte.attr("string",{default:"lyteTabActive"}),ltPropPosition:Lyte.attr("object",{default:{pos:"top",align:"left"}}),ltPropCloseIcon:Lyte.attr("boolean",{default:!1}),prevTarget:Lyte.attr("object",{default:null}),ltPropHeight:Lyte.attr("string",{default:"400px"}),ltPropType:Lyte.attr("string"),ltPropMaxWidth:Lyte.attr("string",{default:"90%"}),ltPropTabStyle:Lyte.attr("string"),ltPropMenuWrapperClass:Lyte.attr("string"),ltPropCurrentTab:Lyte.attr("object"),menuLabels:Lyte.attr("array",{default:[]})}},didConnect:function(){this.initialFunc(!0)},didDestroy:function(){this.$node.checkTabs&&(clearTimeout(this.$node.checkTabs),this.$node.checkTabs=!1)},initialFunc:function(e){if(this.$node.childElementCount>1||"LYTE-TAB"===this.$node.children[0].tagName){this.checkTabStyle(),this.$node.style.height=this.getData("ltPropHeight");var t=this.$node.querySelector("lyte-tab-head");t.classList.add("lyteTabNav"),"collapse"==this.getData("ltPropType")&&t.classList.add("lyteTabOverflowV");var o,a=this.getData("ltPropPosition"),r=t.querySelectorAll("lyte-tab-title"),i=this.getContent(this.$node.querySelector("lyte-tab-body").children),s=this.getData("ltPropActiveClass");this.setPosition(a),this.checkCloseIcon(t);t.addEventListener("click",function(e){this.showTab(e)}.bind(this),!0),t.addEventListener("mouseover",function(e){this.mouseOver(e)}.bind(this),!0),t.addEventListener("mouseout",function(e){this.mouseOut(e)}.bind(this),!0);for(var l=0;l<r.length;l++)r[l].classList.contains(s)&&(o=l);for(l=0;l<i.length;l++)!o||o!==l&&r[o].getAttribute("lt-prop-id")!==i[l].id?i[l].classList.add("lyteTabHide"):(this.executeOnBeforeOpen(r[o],r[o].getAttribute("lt-prop-id"),null),i[l].classList.add("lyteTabShow"),this.setData("ltPropCurrentTab",{index:o,name:r[o].textContent.trim()}),this.executeOnOpen(r[o],r[o].getAttribute("lt-prop-id")));o||(o=0,this.executeOnBeforeOpen(r[0],r[0].getAttribute("lt-prop-id"),null),r[0].classList.add(s),i[0].classList.remove("lyteTabHide"),i[0].classList.add("lyteTabShow"),this.setData("ltPropCurrentTab",{index:o,name:r[o].textContent.trim()}),this.executeOnOpen(r[0],r[0].getAttribute("lt-prop-id"))),this.setData("prevTarget",r[o]),$L.fastdom.measure((function(){if("auto"==this.getData("ltPropHeight"))"left"!==a.pos&&"right"!==a.pos||(this.$node.querySelector(".lyteTabNav").style.height="auto",this.$node.querySelector("lyte-tab-body").style.height="auto"),"top"!==a.pos&&"bottom"!==a.pos||(this.$node.querySelector("lyte-tab-body").style.height="auto"),this.makeAlignment(this.getData("ltPropPosition")),e&&this.getMethods("afterRender")&&this.executeMethod("afterRender",this.$node);else{var t=window.getComputedStyle(this.$node),o=(t.borderTop?parseFloat(t.borderTop):0)+(t.borderBottom?parseFloat(t.borderBottom):0),r=this.$node.querySelector(".lyteTabNav").getBoundingClientRect().height,i=parseInt(t.height)-o;$L.fastdom.mutate((function(){"left"!==a.pos&&"right"!==a.pos||(this.$node.querySelector(".lyteTabNav").style.height=i+"px",this.$node.querySelector("lyte-tab-body").style.height=i+"px"),"top"!==a.pos&&"bottom"!==a.pos||(this.$node.querySelector("lyte-tab-body").style.height=i-r+"px"),this.makeAlignment(this.getData("ltPropPosition")),e&&this.getMethods("afterRender")&&this.executeMethod("afterRender",this.$node)}),this)}}),this)}else console.error("No content detected")},checkTabStyle:function(){"nested"===this.getData("ltPropTabStyle")&&this.$node.classList.add("lyteNestedTab")},onPositionChange:function(){var e=this.$node;e.classList.remove("lyteTabDefaultLeft","lyteTabDefaultRight","lyteTabDefaultTop","lyteTabDefaultBottom");var t=e.querySelector("lyte-tab-head"),o=e.querySelector("lyte-tab-body"),a=e.querySelectorAll("lyte-tab-title");t.classList.remove("lyteTabAlignStart","lyteTabAlignEnd","lyteTabAlignCenter"),t.removeAttribute("style"),o.removeAttribute("style"),a[0].style.marginLeft="",a[0].style.marginTop="";for(var r=0;r<a.length;r++)a[r].style.float="";e=null,t=null,a=null,o=null,this.initialFunc(!1)}.observes("ltPropPosition"),onHeightChange:function(){this.$node.style.height=this.getData("ltPropHeight"),this.setHeight(this.getData("ltPropPosition"))}.observes("ltPropHeight"),showTab:function(e){for(var t=e.target.correspondingElement||e.target;t&&t.parentNode&&"LYTE-TAB-TITLE"!=t.tagName;)t=t.parentNode;if(t&&"HTML"!=t.tagName&&!t.isEqualNode(document)&&"LYTE-TAB-TITLE"==t.tagName){var o=t.getAttribute("lt-prop-id");if(e.target.classList.contains("lyteTabCloseIcon")){if(!this.deleteTabContent(o))return;if(this.makeAlignment(this.getData("ltPropPosition")),!(t=this.$node.querySelector("lyte-tab-head").querySelectorAll("lyte-tab-title").length>0?this.$node.querySelector("lyte-tab-head").querySelectorAll("lyte-tab-title")[0]:null))return void this.setData("prevTarget",null);o=t.getAttribute("lt-prop-id")}this.openTabContent(t)}},mouseOver:function(e){for(var t=e.target.correspondingElement||e.target;t&&t.parentNode&&"LYTE-TAB-TITLE"!=t.tagName;)t=t.parentNode;if(t&&"HTML"!=t.tagName&&!t.isEqualNode(document)){var o=this.getData("ltPropHover");$L(t).addClass(o)}},mouseOut:function(e){for(var t=e.target.correspondingElement||e.target;t&&t.parentNode&&"LYTE-TAB-TITLE"!=t.tagName;)t=t.parentNode;if(t&&"HTML"!=t.tagName&&!t.isEqualNode(document)){var o=this.getData("ltPropHover");$L(t).removeClass(o)}},getContent:function(e){for(var t=[],o=0;o<e.length;o++)"LYTE-TAB-CONTENT"==e[o].tagName&&t.push(e[o]);return t},getHeader:function(e){for(var t=[],o=0;o<e.length;o++)"LYTE-TAB-TITLE"==e[o].tagName&&t.push(e[o]);return t},constructTabs:function(e,t){var o,a="",r="",i=!1,s=document.createElement("lyte-tab-title"),l=document.createElement("lyte-tab-content");"object"==typeof t&&"LYTE-TAB"===t.tagName?(a=t.getAttribute("lt-prop-title"),r=t.innerHTML,o=t.getAttribute("lt-prop-id")):(a=t.title,r=t.content,o=t.id,i=!0),o||(o=this.generateId(a)),s.innerHTML=a,l.innerHTML=r,s.setAttribute("lt-prop-id",o),l.id=o,l.classList.add("lyteTabHide"),e.querySelector("lyte-tab-head").append(s),e.querySelector("lyte-tab-body").append(l),i&&(this.getData("ltPropCloseIcon")&&this.createCloseIcon(new Array(s)),this.makeAlignment(this.getData("ltPropPosition")))},deleteTabContent:function(e){if(e){var t=!0;if(this.getMethods("onBeforeDelete")&&(t=void 0===(t=this.executeMethod("onBeforeDelete",e,this.$node))||t),!t)return!1;for(var o=this.$node.querySelector("#"+e),a=this.$node.querySelector("lyte-tab-head"),r=a.querySelectorAll("lyte-tab-title"),i=0;i<r.length;i++)if(r[i].getAttribute("lt-prop-id")===e){r[i].classList.contains("lyteTabCustomTitleWidth")&&!0,a.removeChild(r[i]),o&&this.$node.querySelector("lyte-tab-body").removeChild(o);break}return this.getMethods("onDelete")&&this.executeMethod("onDelete",e,this.$node),!0}},enableTab:function(e){if(e){if("string"==typeof e)for(var t=this.$node.querySelector("lyte-tab-head").querySelectorAll("lyte-tab-title"),o=0;o<t.length;o++)if(t[o].getAttribute("lt-prop-id")===e){t[o].classList.contains("lyteTabDisable")&&(t[o].classList.remove("lyteTabDisable"),t[o].classList.contains("lyteTabForceHide")&&Lyte.arrayUtils(this.getData("menuLabels"),"push",this.getMenuLabel(t[o])));break}"object"==typeof e&&e.classList.contains("lyteTabDisable")&&(e.classList.remove("lyteTabDisable"),e.classList.contains("lyteTabForceHide")&&Lyte.arrayUtils(this.getData("menuLabels"),"push",this.getMenuLabel(e)))}},disableTab:function(e){if(e){if("string"==typeof e)for(var t=this.$node.querySelector("lyte-tab-head").querySelectorAll("lyte-tab-title"),o=0;o<t.length;o++)if(t[o].getAttribute("lt-prop-id")===e){if(!t[o].classList.contains("lyteTabDisable"))if(t[o].classList.add("lyteTabDisable"),t[o].classList.contains("lyteTabForceHide"))-1!=(a=this.getData("menuLabels").indexOf(this.getMenuLabel(t[o])))&&Lyte.arrayUtils(this.getData("menuLabels"),"removeAt",a,1);break}var a;if("object"==typeof e&&!e.classList.contains("lyteTabDisable"))if(e.classList.add("lyteTabDisable"),e.classList.contains("lyteTabForceHide"))-1!=(a=this.getData("menuLabels").indexOf(this.getMenuLabel(e)))&&Lyte.arrayUtils(this.getData("menuLabels"),"removeAt",a,1)}},openTabContent:function(e){if(e){var t;if("string"==typeof e)for(var o=this.$node.querySelector("lyte-tab-head").querySelectorAll("lyte-tab-title"),a=this.$node.querySelector("#"+e),r=0;r<o.length;r++)if(o[r].getAttribute("lt-prop-id")===e){if(o[r].classList.contains(this.getData("ltPropActiveClass")))return;if(t=o[r],!this.executeOnBeforeOpen(t,e,this.getData("prevTarget")?this.getData("prevTarget").getAttribute("lt-prop-id"):null))return;this.hideAll(),t.classList.add(this.getData("ltPropActiveClass")),a&&(a.classList.remove("lyteTabHide"),a.classList.add("lyteTabShow")),this.setData("ltPropCurrentTab",{index:r,name:t.textContent.trim()}),this.executeOnOpen(t,e),this.setData("prevTarget",t);break}if("object"==typeof e){if(e.classList.contains(this.getData("ltPropActiveClass")))return;t=e;var i=e.getAttribute("lt-prop-id");a=this.$node.querySelector("#"+i);if(!this.executeOnBeforeOpen(e,i,this.getData("prevTarget")?this.getData("prevTarget").getAttribute("lt-prop-id"):null))return;this.hideAll(),e.classList.add(this.getData("ltPropActiveClass")),a&&(a.classList.remove("lyteTabHide"),a.classList.add("lyteTabShow"));var s;for(o=this.$node.querySelector("lyte-tab-head").querySelectorAll("lyte-tab-title"),r=0;r<o.length;r++)if(o[r].isEqualNode(t)&&o[r].getAttribute("lt-prop-id")===i){s=r;break}this.setData("ltPropCurrentTab",{index:s,name:t.textContent.trim()}),this.executeOnOpen(e,i),this.setData("prevTarget",e)}"collapse"==this.getData("ltPropType")&&this.getData("menuLabels").indexOf(this.getMenuLabel(t))>-1&&this.collapseHeader(!0)}},checkCloseIcon:function(e){this.getData("ltPropCloseIcon")&&(e=e||this.$node.querySelector("lyte-tab-head"),this.createCloseIcon(e.querySelectorAll("lyte-tab-title")))},createCloseIcon:function(e){for(var t=0;t<e.length;t++)if(!e[t].addedCloseIcon){var o=document.createElement("span");o.classList.add("lyteTabCloseIcon"),e[t].appendChild(o),e[t].addedCloseIcon=!0}},setPosition:function(e){switch(e.pos){case"left":this.$node.classList.add("lyteTabDefaultLeft");break;case"right":this.$node.classList.add("lyteTabDefaultRight");break;case"top":this.$node.classList.add("lyteTabDefaultTop");break;case"bottom":this.$node.classList.add("lyteTabDefaultBottom")}},checkHeightOnResize:function(){this.$node.getBoundingClientRect().height!=this.$node.querySelector(".lyteTabNav").getBoundingClientRect().height+this.$node.querySelector("lyte-tab-body").getBoundingClientRect().height&&this.setHeight(this.getData("ltPropPosition"))},setHeight:function(e){"auto"==this.getData("ltPropHeight")?("left"!==e.pos&&"right"!==e.pos||(this.$node.querySelector(".lyteTabNav").style.height="auto",this.$node.querySelector("lyte-tab-body").style.height="auto"),"top"!==e.pos&&"bottom"!==e.pos||(this.$node.querySelector("lyte-tab-body").style.height="auto"),this.makeAlignment(this.getData("ltPropPosition"))):$L.fastdom.measure((function(){var t=window.getComputedStyle(this.$node),o=(t.borderTop?parseFloat(t.borderTop):0)+(t.borderBottom?parseFloat(t.borderBottom):0),a=this.$node.querySelector(".lyteTabNav").getBoundingClientRect().height,r=parseInt(t.height)-o;$L.fastdom.mutate((function(){"left"!==e.pos&&"right"!==e.pos||(this.$node.querySelector(".lyteTabNav").style.height=r+"px",this.$node.querySelector("lyte-tab-body").style.height=r+"px"),"top"!==e.pos&&"bottom"!==e.pos||(this.$node.querySelector("lyte-tab-body").style.height=r-a+"px"),this.makeAlignment(this.getData("ltPropPosition"))}),this)}),this)},hideAll:function(){for(var e=this.$node.querySelector("lyte-tab-head").querySelectorAll("lyte-tab-title"),t=this.getContent(this.$node.querySelector("lyte-tab-body").children),o=this.getData("ltPropActiveClass"),a=0;a<e.length;a++)e[a].classList.contains(o)&&e[a].classList.remove(o);for(var r=0;r<t.length;r++)t[r].classList.contains("lyteTabShow")&&(t[r].classList.remove("lyteTabShow"),t[r].classList.add("lyteTabHide")),t[r].classList.contains("lyteTabHide")||t[r].classList.add("lyteTabHide"),$L(t[r]).hasClass("lyteTabHide")||$L(t[r]).addClass("lyteTabHide")},customizeTitleTab:function(e){$L.fastdom.measure((function(){var t=this.$node.querySelector("lyte-tab-head"),o=this.getWidth(t,!1);if("top"===e||"bottom"===e){var a=0,r=0,i=t.querySelectorAll("lyte-tab-title");"collapse"==this.getData("ltPropType")&&$L.fastdom.measure((function(){for(var e=0;e<i.length;e++)a+=this.getWidth(i[e],!0,!0);a>o&&this.collapseHeader()}),this)}if("afterDelete"===e){i=t.querySelectorAll("lyte-tab-title"),r=o/i.length;$L.fastdom.mutate((function(){for(var e=0;e<i.length;e++)i[e].style.width=r+"px"}))}}),this)},collapseHeader:function(e){var t=this.$node.querySelector("lyte-tab-head"),o=this.getWidth(t,!1),a=t.offsetHeight,r=-1!=this.getData("ltPropMaxWidth").indexOf("%")?parseInt(this.getData("ltPropMaxWidth"))*o/100:parseFloat(this.getData("ltPropMaxWidth")),i=t.querySelectorAll("lyte-tab-title"),s=0,l=-1,n=Array.from(i).findIndex((function(e){return e.classList.contains("lyteTabActive")})),p=[];if(e)for(var c=0;c<i.length;c++)i[c].classList.contains("lyteTabForceHide")&&i[c].classList.remove("lyteTabForceHide");s+=this.getWidth(i[n],!0,!0);for(c=0;c<i.length;c++)if(c!=n&&(s+=this.getWidth(i[c],!0,!0))>r){l=c;break}if(l>-1&&l<i.length){for(c=l;c<i.length;c++)c==n?n>0&&!i[c-1].classList.contains("lyteTabForceHide")&&($L(i[c-1]).addClass("lyteTabForceHide"),$L(i[c-1]).hasClass("lyteTabDisable")||p.push(this.getMenuLabel(i[c-1]))):($L(i[c]).addClass("lyteTabForceHide"),$L(i[c]).hasClass("lyteTabDisable")||p.push(this.getMenuLabel(i[c])));if(this.$node.querySelector("#lyteTabMenu"))Lyte.arrayUtils(this.getData("menuLabels"),"removeAt",0,this.getData("menuLabels").length),Lyte.arrayUtils(this.getData("menuLabels"),"push",p);else{var d=document.createElement("span");d.id="moreMenu";var u=this.createUniqueSlector();d.classList.add(u),d.appendChild(document.createElement("span")),t.appendChild(d),this.createMenu(p,u,"init"),e||"bottom"===this.getData("ltPropPosition").pos&&(t.style.top=t.offsetTop+(Math.ceil(a/2)-1)+"px")}}else-1==l&&this.removeMenu()},createUniqueSlector:function(){for(var e=document.querySelectorAll("lyte-tabs"),t=0;t<e.length;t++)if(e[t].isEqualNode(this.$node))return"menuSel_"+t},getMenuLabel:function(e){var t=e.querySelector(".lyteTabTitleLabel");return t?t.textContent:e.textContent},createMenu:function(e,t,o){if("init"==o){var a=document.createElement("lyte-menu");a.id="lyteTabMenu",this.setData("menuLabels",e),a.ltProp({content:e,query:"."+t,event:"click",callout:!0}),this.getData("ltPropMenuWrapperClass")&&a.ltProp({wrapperClass:this.getData("ltPropMenuWrapperClass")}),a.setMethods({onMenuClick:function(e,t,o,a,r){for(var i,s=arguments[0],l=arguments[2].parentElement.component,n=arguments[3].parentElement,p=n.querySelectorAll("lyte-tab-title"),c=0;c<p.length;c++)if(l.getMenuLabel(p[c])==s&&p[c].classList.contains("lyteTabForceHide")){i=p[c];break}i&&(i.classList.remove("lyteTabForceHide"),l.openTabContent(i)),l.getMethods("onMenuClick")&&l.executeMethod("onMenuClick",e,t,o,a,r,l,i)},onBeforeOpen:function(e,t,o){var a=e.parentElement.component;a.getMethods("onBeforeMenuOpen")&&a.executeMethod("onBeforeMenuOpen",e,t,o,a)},onOpen:function(e,t,o){var a=e.parentElement.component;a.getMethods("onMenuOpen")&&a.executeMethod("onMenuOpen",e,t,o,a)},onBeforeClose:function(e,t){var o=e.parentElement.component;o.getMethods("onBeforeMenuClose")&&o.executeMethod("onBeforeMenuClose",e,t,o)},onClose:function(e,t){var o=e.parentElement.component;o.getMethods("onMenuClose")&&o.executeMethod("onMenuClose",e,t,o)},beforeRender:function(e){var t=e.parentElement.component;t.getMethods("onBeforeMenuRender")&&t.executeMethod("onBeforeMenuRender",e,t)},afterRender:function(e){var t=e.parentElement.component;t.getMethods("onAfterMenuRender")&&t.executeMethod("onAfterMenuRender",e,t)}}),this.$node.appendChild(a)}},removeMenu:function(){var e=this.$node.querySelector("#lyteTabMenu");e&&(e.remove(),this.$node.querySelector("#moreMenu").remove()),this.setData("menuLabels",[])},onMenuLabelChange:function(){this.$node.querySelector("lyte-menu").ltProp({content:this.getData("menuLabels")})},makeAlignment:function(e){var t=this.$node.querySelector("lyte-tab-head");"left"!=e.align&&"top"!=e.align||t.classList.add("lyteTabAlignStart"),"right"!=e.align&&"bottom"!=e.align||("collapse"!=this.getData("ltPropType")||"top"!=e.pos&&"bottom"!=e.pos?t.classList.add("lyteTabAlignEnd"):t.classList.add("lyteTabRightCollapse")),"center"==e.align&&t.classList.add("lyteTabAlignCenter")},executeOnBeforeOpen:function(e,t,o){var a;return this.getMethods("onBeforeOpen")&&(a=this.executeMethod("onBeforeOpen",this.$node.querySelector("#"+t),this.$node.querySelector("#"+o),this,e,this.getData("prevTarget")?this.getData("prevTarget"):null)),void 0===a||a},executeOnOpen:function(e,t){this.getMethods("onOpen")&&this.executeMethod("onOpen",this.$node.querySelector("#"+t),this,e)},generateId:function(e){for(;-1!==e.indexOf(" ");)e=e.replace(" ","_");return e},getWidth:function(e,t,o){t=null==t||t;var a=getComputedStyle(e),r=parseInt(a.paddingLeft)+parseInt(a.paddingRight),i=0;return o&&(i=parseInt(a.marginLeft)+parseInt(a.marginRight)),parseFloat(a.width)+(t?0:-r)+i}}),_lyteUiUtils.registeredCustomElements["lyte-tab-title"]||(_lyteUiUtils.registeredCustomElements["lyte-tab-title"]=!0,Lyte.createCustomElement("lyte-tab-title",{static:{},connectedCallback:function(){var e=this.closest("lyte-tabs");"collapse"==e.getData("ltPropType")&&(e.checkTabs?(clearTimeout(e.checkTabs),e.checkTabs=!1):this.closest("lyte-tab-head").classList.add("lyteTabVH"),e.checkTabs=setTimeout(function(){var t=this.closest("lyte-tabs");if(t){for(var o=t.component,a=this.parentElement,r=o.getWidth(a,!1),i=0,s=a.querySelectorAll("lyte-tab-title"),l=-1,n=0;n<s.length;n++)i+=o.getWidth(s[n],!0,!0),s[n].classList.contains(o.getData("ltPropActiveClass"))&&(l=n);-1==l&&o.openTabContent(s[0]),i>r&&"collapse"==o.$node.ltProp("type")&&o.collapseHeader(),this.closest("lyte-tab-head").classList.remove("lyteTabVH")}e.checkTabs=!1}.bind(this),100))},disconnectedCallback:function(){var e=this.closest("lyte-tabs");e&&e.checkTabs&&(clearTimeout(e.checkTabs),e.checkTabs=!1,this.closest("lyte-tab-head").classList.remove("lyteTabVH"))}})),window.addEventListener("resize",(function(){window._lyteUiUtils.tabResizeTriggered&&(clearTimeout(window._lyteUiUtils.tabResizeTriggered),window._lyteUiUtils.tabResizeTriggered=!1),window._lyteUiUtils.tabResizeTriggered=setTimeout((function(){for(var e=document.querySelectorAll("lyte-tabs"),t=0;t<e.length;t++)"collapse"==e[t].component.getData("ltPropType")&&e[t].component.collapseHeader(!0),e[t].component.checkHeightOnResize();window._lyteUiUtils.tabResizeTriggered=!1}),50)})),Lyte.Component.register("lyte-expresstable",{_template:'<template tag-name="lyte-expresstable"> <div class="lyteExpTableWrapper"> <template is="if" value="{{expHandlers(ltPropStickyTable,\'!\')}}"><template case="true"> <template is="if" value="{{expHandlers(ltPropHeaderLabelKey,\'&amp;&amp;\',tableHeader.length)}}"><template case="true"> <div class="lyteExpTableFakeHeaderWrapper"> <div class="lyteExpTableFixedColHeader"> <template is="if" value="{{expHandlers(ltPropYield,\'==\',false)}}"><template case="true"> <lyte-exptable-thead class="fixedColumnTableHeader lyteExpTableHeaderGroup"> <lyte-exptable-tr class="fixedColumnTableRow lyteExpTableRow"> <template is="for" items="{{fixedTableHeader}}" item="list" index="indexVal"> <lyte-exptable-th class="fixedColumn lyteExpTableHead {{list.class}}" id="{{list.id}}" index="{{indexVal}}" resize="{{list.resize}}" fixed="{{list.fixed}}" icon="{{list.icon}}"> {{list[ltPropHeaderLabelKey]}} </lyte-exptable-th> </template> </lyte-exptable-tr> </lyte-exptable-thead> </template><template case="false"> <lyte-yield class="lyteExpTableFakeHeaderGroup lyteExpTableHeaderGroup" yield-name="headerYield" lt-prop-table-header="{{fixedTableHeader}}"></lyte-yield> </template></template> </div> <div class="lyteExpTableFakeColHeaderWrapper"> <template is="if" value="{{expHandlers(ltPropYield,\'==\',false)}}"><template case="true"> <lyte-exptable-thead class="lyteExpTableFakeColHeader lyteExpTableHeaderGroup"> <lyte-exptable-tr class="originalColumnTableRow lyteExpTableRow"> <template is="for" items="{{tableHeader}}" item="list" index="indexVal"> <lyte-exptable-th id="{{list.id}}" class="originalColumn lyteExpTableHead list.class" index="{{indexVal}}" resize="{{list.resize}}" fixed="{{list.fixed}}" icon="{{list.icon}}"> {{list[ltPropHeaderLabelKey]}} </lyte-exptable-th> </template> </lyte-exptable-tr> </lyte-exptable-thead> </template><template case="false"> <lyte-yield class="lyteExpTableFakeColHeader lyteExpTableHeaderGroup" yield-name="headerYield" lt-prop-table-header="{{tableHeader}}"></lyte-yield> </template></template> </div> </div> </template></template> </template></template> <div class="lyteExpTableOrigTableWrapper "> <template is="if" value="{{expHandlers(ltPropStickyTable,\'!\')}}"><template case="true"> <div class="lyteExpTableFixedColWrapper" onscroll="{{action(\'fixedColScroll\',event)}}"> <lyte-exptable class="lyteExpTableFixedColTable"> <template is="if" value="{{expHandlers(ltPropYield,\'==\',false)}}"><template case="true"> <lyte-exptable-thead class="fixedColumn lyteExpTableHeaderGroup"> <lyte-exptable-tr class="fixedColumn lyteExpTableRow"> <template is="for" items="{{fixedTableHeader}}" item="list" index="indexVal"> <lyte-exptable-th id="{{list.id}}" class="fixedColumn lyteExpTableHead list.class" index="{{indexVal}}" resize="{{list.resize}}" fixed="{{list.fixed}}" icon="{{list.icon}}"> {{unescape(list[ltPropHeaderLabelKey])}} </lyte-exptable-th> </template> </lyte-exptable-tr> </lyte-exptable-thead> <lyte-exptable-tbody class="fixedColumn lyteExpTableRowGroup"> <template is="for" items="{{ltPropContent}}" item="list" index="indexVal"> <lyte-exptable-tr id="{{list.id}}" class="fixedColumn lyteExpTableRow {{list.class}}"> <template is="for" items="{{fixedTableHeader}}" item="header"> <lyte-exptable-td class="fixedColumn lyteExpTableCell">{{unescape(lyteUiGetValue(list,header[ltPropBodyLabelKey]))}}</lyte-exptable-td> </template> </lyte-exptable-tr> </template> </lyte-exptable-tbody> </template><template case="false"> <lyte-yield class="lyteExpTableHeaderGroup" yield-name="headerYield" lt-prop-table-header="{{fixedTableHeader}}"></lyte-yield> <lyte-yield class="lyteExpTableRowGroup" yield-name="contentYield" lt-prop-table-header="{{fixedTableHeader}}"> </lyte-yield> </template></template> </lyte-exptable> </div> </template></template> <template is="if" value="{{expHandlers(ltPropHeaderLabelKey,\'&amp;&amp;\',tableHeader.length)}}"><template case="true"> <div class="lyteExpTableOrigTableInnerWrap" tabindex="0" onscroll="{{action(\'scroll\',event)}}"> <lyte-exptable class="lyteExpOriginalTable"> <template is="if" value="{{expHandlers(ltPropYield,\'==\',false)}}"><template case="true"> <lyte-exptable-thead class="originalColumn lyteExpTableHeaderGroup"> <lyte-exptable-tr class="originalColumn lyteExpTableRow"> <template is="for" items="{{tableHeader}}" item="list" index="indexVal"> <lyte-exptable-th id="{{list.id}}" class="originalColumn lyteExpTableHead list.class" index="{{indexVal}}" resize="{{list.resize}}" fixed="{{list.fixed}}" icon="{{list.icon}}"> {{list[ltPropHeaderLabelKey]}} </lyte-exptable-th> </template> </lyte-exptable-tr> </lyte-exptable-thead> <lyte-exptable-tbody class="originalColumn lyteExpTableRowGroup"> <template is="for" items="{{ltPropContent}}" item="list" index="indexVal"> <lyte-exptable-tr id="{{list.id}}" class="originalColumn lyteExpTableRow {{list.class}}"> <template is="for" items="{{tableHeader}}" item="header"> <lyte-exptable-td class="originalColumn lyteExpTableCell">{{unescape(lyteUiGetValue(list,header[ltPropBodyLabelKey]))}}</lyte-exptable-td> </template> </lyte-exptable-tr> </template> </lyte-exptable-tbody> </template><template case="false"> <lyte-yield class="lyteExpTableHeaderGroup" yield-name="headerYield" lt-prop-table-header="{{tableHeader}}"></lyte-yield> <lyte-yield class="lyteExpTableRowGroup" yield-name="contentYield" lt-prop-table-header="{{tableHeader}}"></lyte-yield> </template></template> </lyte-exptable> </div> </template></template> </div> </div> </template>',_dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]}},default:{}},{type:"attr",position:[1,3,1]},{type:"if",position:[1,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3,1]},{type:"if",position:[1,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1]},{type:"for",position:[3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]},{type:"attr",position:[3]},{type:"insertYield",position:[3]}]}},default:{}},{type:"componentDynamic",position:[1,1]}]}},default:{}},{type:"attr",position:[1,3,3]},{type:"if",position:[1,3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1]},{type:"for",position:[3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]},{type:"attr",position:[3]},{type:"insertYield",position:[3]}]}},default:{}},{type:"componentDynamic",position:[1,1]}]}},default:{}}],_observedAttributes:["ltPropHeader","ltPropContent","ltPropHeaderLabelKey","ltPropBodyLabelKey","ltPropYield","ltPropInfiniteScroll","ltPropYield","ltPropMinWidth","ltPropMaxWidth","ltPropFixedTableScroll","ltPropHeight","ltPropPreventWidth","ltPropColumnSortable","ltPropScrollStep","ltPropHeaderOnly","ltPropPreventTableModify","ltPropSortDummyColumClass","ltPropPreventContentObserver","ltPropStickyTable","fixedTableHeader","fixedTableContent","tableHeader","tableContent","columns","minWidth1","minWidth2"],data:function(){return{ltPropHeader:Lyte.attr("array",{default:[]}),ltPropContent:Lyte.attr("array",{default:[]}),ltPropHeaderLabelKey:Lyte.attr("string",{default:""}),ltPropBodyLabelKey:Lyte.attr("string",{default:""}),ltPropYield:Lyte.attr("boolean",{default:!1}),ltPropInfiniteScroll:Lyte.attr("boolean",{default:!1}),ltPropYield:Lyte.attr("boolean",{default:!1}),ltPropMinWidth:Lyte.attr("string",{default:"50px"}),ltPropMaxWidth:Lyte.attr("string",{default:"1000px"}),ltPropFixedTableScroll:Lyte.attr("boolean",{default:!1}),ltPropHeight:Lyte.attr("string",{default:"auto"}),ltPropPreventWidth:Lyte.attr("boolean",{default:!1}),ltPropColumnSortable:Lyte.attr("boolean",{default:!1}),ltPropScrollStep:Lyte.attr("number",{default:10}),ltPropHeaderOnly:Lyte.attr("boolean",{default:!1}),ltPropPreventTableModify:Lyte.attr("boolean",{default:!1}),ltPropSortDummyColumClass:Lyte.attr("string",{default:""}),ltPropPreventContentObserver:Lyte.attr("boolean",{default:!1}),ltPropStickyTable:Lyte.attr("boolean"),fixedTableHeader:Lyte.attr("array",{default:[]}),fixedTableContent:Lyte.attr("array",{default:[]}),tableHeader:Lyte.attr("array",{default:[]}),tableContent:Lyte.attr("array",{default:[]}),columns:Lyte.attr("array",{default:[]}),minWidth1:Lyte.attr("string",{default:""}),minWidth2:Lyte.attr("string",{default:""})}},didDestroy:function(){this.$node.fixRowHeight=null,this.$node.scrollTo=null,this.$node.setColumnWidth=null,clearTimeout(this._scrollTimeOut),null!=this._initProcessFrame&&window.cancelAnimationFrame(this._initProcessFrame),this._setmeasure&&$L.fastdom.clear(this._setmeasure),this._intersectionObs&&this._intersectionObs.disconnect(),this._intersections=[],delete this._intersectionObs,delete this._vertdiv,delete this._measure,delete this.scrollDiv,delete this.resizeComponent,delete this.targetElem},init:function(){var e=navigator.userAgent;if(this._dir=_lyteUiUtils.getRTL(),this.isIE11Lyte=/rv:11/gi.test(e),this.isEdgeLyte=/Edge/gi.test(e),this._scrollWidth=_lyteUiUtils.getScrollBarWidth(),this._verticalScrollWidth=this._scrollWidth,this._isSafari=/safari/gi.test(e),this._isIE=this.isIE11Lyte||this.isEdgeLyte,this._FF=/firefox/gi.test(navigator.userAgent),this._fixHeaderCount=0,this._tmpScrollTop=0,this._chrome=/Chrome/i.test(navigator.userAgent)&&/Google Inc/i.test(navigator.vendor),this._isNegative=_lyteUiUtils.isNegativeScroll(),!this._FF&&null==this.getData("ltPropStickyTable")){var t=document.createElement("th"),o="IntersectionObserver"in window;t.style.position="sticky","sticky"==t.style.position&&o?this.setData("ltPropStickyTable",!0):(t.style.position="-webkit-sticky","-webkit-sticky"==t.style.position&&o?this.setData("ltPropStickyTable",!0):this.setData("ltPropStickyTable",!1))}this.getMethods("beforeRender")&&this.executeMethod("beforeRender",this.$node),this.setTableHeader(),this.setData("tableContent",this.getData("ltPropContent"));this.getData("tableHeader"),this.getData("fixedTableHeader")},didConnect:function(){if(this.$node.contentObserver=this.callContentObs.bind(this),this.$node.fixRowHeight=function(e){this.getData("ltPropStickyTable")?this.setLeftForInterSection(!0):this.setFixTableRowHeight(e)}.bind(this),this.$node.fixColumn=function(e){this.getData("ltPropStickyTable")?this.setLeftForInterSection(!0):this.setFixTableColumnWidth(e)}.bind(this),this.$node.setColumnWidth=function(e){this.getData("ltPropStickyTable")?this.setLeftForInterSection(!0):this.setFixTableColumnWidth(e)}.bind(this),this.$node.setVisibleFixedHeader=function(){this.getData("ltPropStickyTable")?this.setLeftForInterSection(!0):this.setVisibleFixHeader()}.bind(this),this.$node.setHeaderWidth=function(){this.getData("ltPropStickyTable")?this.setLeftForInterSection(!0):this.fixHeaderHeight()}.bind(this),this.$node.reset=function(){this.setLeftForInterSection(!0)}.bind(this),this._scrollDiv=this.$node.getElementsByClassName("lyteExpTableOrigTableInnerWrap")[0],this.getData("ltPropHeader").length>=1){if(this.getData("ltPropStickyTable")){this.$node.getElementsByClassName("lyteExpTableWrapper")[0].classList.add("lyteExpStickyTable");var e=this.$node.getElementsByClassName("lyteExpTableOrigTableInnerWrap")[0];this.registerInterSection(e),this.setLeftForInterSection(!0),"auto"!=this.getData("ltPropHeight")&&(this.$node.style.height=this.getData("ltPropHeight")),this._originalDiv=this.$node.getElementsByClassName("lyteExpTableOrigTableInnerWrap")[0],this._originalTable=this.$node.getElementsByClassName("lyteExpOriginalTable")[0],this.setWidth()}else this.initProcess();this.getMethods("afterRender")&&this.executeMethod("afterRender",this.$node)}this.$node.scrollTo=function(e,t,o){this._scrolled=!0,null!=e&&(this._originalDiv.scrollLeft=e),null!=t&&(this._originalDiv.scrollTop=t),this._scrolled&&(clearTimeout(this._scrollTimeOut),this._scrollTimeOut=setTimeout(function(){this.actions.scroll.call(this,o,e,t,!0)}.bind(this),20)),delete this._scrolled}.bind(this)},initProcess:function(){var e=this.$node.getElementsByClassName("lyteExpTableOrigTableInnerWrap")[0],t=this._FF;this._originalDiv=e,this._oHeader=this.$node.getElementsByClassName("lyteExpTableFakeColHeader")[0],this._headerDiv=this.$node.getElementsByClassName("lyteExpTableFakeHeaderWrapper")[0],this._originalTable=this.$node.getElementsByClassName("lyteExpOriginalTable")[0],this._fakeOriginalHeader=this.$node.getElementsByClassName("lyteExpTableFakeColHeaderWrapper")[0];var o=this._colwrap||this.$node.getElementsByClassName("lyteExpTableFixedColWrapper")[0],a=this.getData("ltPropHeight");this._scrollWidth;"auto"!=a&&(this.$node.style.height=this.getData("ltPropHeight")),$L.fastdom.measure(function(){var a=this._dir?"left":"right";this._startScrollLeft=t?0:e.scrollLeft,this.setScrollWidth(!0);this._originalDiv.getBoundingClientRect().height;this._resizeScrollLeft=e.scrollLeft,$L.fastdom.mutate(function(){this._headerDiv.style[a]=this._verticalScrollWidth+"px",e.offsetWidth!=e.scrollWidth&&(o.style.height="calc(100% - "+this._scrollWidth+"px)")}.bind(this))}.bind(this)),this.setFixTableColumnWidth(),this.setWidth(),this._prevScollLeft=0,null!=this._initProcessFrame&&window.cancelAnimationFrame(this._initProcessFrame),this._initProcessFrame=window.requestAnimationFrame(function(){this.setVisibleFixHeader(),delete this._initProcessFrame}.bind(this))},setFixedTable:function(){for(var e=(this._originalTable||this.$node.getElementsByClassName("lyteExpOriginalTable")[0]).getElementsByTagName("lyte-exptable-th"),t=this.getData("ltPropHeader"),o=[],a=0;a<t.length;a++)t[a].fixed&&"enable"==t[a].fixed&&0!=e[a].offsetWidth&&Lyte.arrayUtils(o,"push",t[a]);this.setData("fixedTableHeader",o),this.setData("fixedTableContent",this.setData("ltPropContent"))},setTableHeader:function(){for(var e=[],t=this.getData("ltPropHeader"),o=[],a=0;a<t.length;++a)e[a]=t[a],!this.getData("ltPropStickyTable")&&e[a].fixed&&"enable"==e[a].fixed&&Lyte.arrayUtils(o,"push",e[a]);this.setData("tableHeader",e),this.getData("ltPropStickyTable")||this.setData("fixedTableHeader",o)},setWidth:function(){var e=this._originalDiv.getElementsByTagName("lyte-exptable-th"),t=[];$L.fastdom.measure(function(){for(var o=0;o<e.length;++o){var a=e[o].getBoundingClientRect().width;t[o]={},a,t[o].width=a}}.bind(this)),this._widthList=t},setScrollWidth:function(e){if(this._oriwrap=this._oriwrap||this.$node.getElementsByClassName("lyteExpTableOrigTableInnerWrap")[0],this._oriwrap){var t=this._scrollWidth;this._scrollWidth;this._oriwrap.scrollHeight<=this._oriwrap.offsetHeight?(this._verticalScrollWidth=0,t=0):(this._verticalScrollWidth=this._scrollWidth,t=this._scrollWidth),e||$L.fastdom.measure(function(){var e=this._dir?"left":"right";$L.fastdom.mutate(function(){this._headerDiv.style[e]=t+"px"}.bind(this))}.bind(this))}},fixHeaderHeight:function(){this.getData("tableHeader"),this.getData("fixedTableHeader");var e=this._oHeader.getElementsByTagName("lyte-exptable-th"),t=this._originalDiv.getElementsByTagName("lyte-exptable-th"),o=(this._colwrap||this.$node.getElementsByClassName("lyteExpTableFixedColWrapper")[0],[]),a=0,r=0;""!=(this._originalTable||this.$node.getElementsByClassName("lyteExpOriginalTable")[0]).style.width&&this.getData("ltPropPreventWidth")?this.setFixedTableWidth():$L.fastdom.measure(function(){for(var i=0;i<e.length;++i)o[i]=this.getData("ltPropPreventWidth")&&t[i].style.width?parseInt(t[i].style.width):t[i].getBoundingClientRect().width;$L.fastdom.mutate(function(){this.getData("tableHeader"),this.getData("fixedTableHeader");var e=this._oHeader.getElementsByTagName("lyte-exptable-th"),t=this._originalDiv.getElementsByTagName("lyte-exptable-th"),i=this._colwrap||this.$node.getElementsByClassName("lyteExpTableFixedColWrapper")[0];this._fixedDivWrap=this._fixedDivWrap||this.$node.getElementsByClassName("lyteExpTableFixedColHeader")[0];i.getElementsByTagName("lyte-exptable-tr");for(var s=[],l=this.$node.getElementsByClassName("lyteExpTableFixedColHeader")[0],n=l.getElementsByTagName("lyte-exptable-th"),p=i.getElementsByTagName("lyte-exptable-th"),c=0;c<e.length;++c)this.getData("ltPropPreventWidth")||(e[c].style.width=o[c]+"px",t[c].style.width=o[c]+"px"),a+=o[c],t[c].classList.contains("lyteFixedColumn")&&(r+=o[c]);if(this._fixedSum=r,(this._originalTable||this.$node.getElementsByClassName("lyteExpOriginalTable")[0]).style.width=a+"px",this._fakeOriginalHeader.style.width=a+"px",t)for(var d=0;d<t.length;d++)t[d].classList.contains("lyteFixedColumn")&&s.push(t[d]);a=0;for(c=0;c<this._fixHeaderCount;++c){var u=this.getIndex(s[c]);a+=o[u],this.getData("ltPropPreventWidth")||(n[c].style.width=o[u]+"px",p[c].style.width=o[u]+"px")}i.style.width=a+"px",this._fixedDivWrap.style.width=i.style.width,this._fHeader=l,this._fthList=i.getElementsByClassName("lyteExpTableHeaderGroup")[0],this._setHeight=!0,0==this._fixHeaderCount&&(i.style.width="0px",delete this._setHeight,delete this._fHeader,delete this._fthList)}.bind(this))}.bind(this))},setFixedTableWidth:function(){this.getData("tableHeader"),this.getData("fixedTableHeader"),this._oHeader.getElementsByTagName("lyte-exptable-th");var e=this._originalDiv.getElementsByTagName("lyte-exptable-th"),t=this._colwrap||this.$node.getElementsByClassName("lyteExpTableFixedColWrapper")[0];this._fixedDivWrap=this._fixedDivWrap||this.$node.getElementsByClassName("lyteExpTableFixedColHeader")[0];t.getElementsByTagName("lyte-exptable-tr");var o=[],a=this.$node.getElementsByClassName("lyteExpTableFixedColHeader")[0];a.getElementsByTagName("lyte-exptable-th"),t.getElementsByTagName("lyte-exptable-th");if(e)for(var r=0;r<e.length;r++)e[r].classList.contains("lyteFixedColumn")&&o.push(e[r]);for(var i=0,s=0;s<this._fixHeaderCount;++s){var l=this.getIndex(o[s]);i+=e[l].style.width?parseInt(e[l].style.width):e[l].getBoundingClientRect().width}t.style.width=i+"px",this._fixedDivWrap.style.width=t.style.width,this._fHeader=a,this._fthList=t.getElementsByClassName("lyteExpTableHeaderGroup")[0],this._setHeight=!0,0==this._fixHeaderCount&&(t.style.width="0px",delete this._setHeight,delete this._fHeader,delete this._fthList)},setFixTableRowHeight:function(e){var t,o=(this._colwrap||this.$node.getElementsByClassName("lyteExpTableFixedColWrapper")[0]).getElementsByTagName("lyte-exptable-tr"),a=this._originalDiv.getElementsByTagName("lyte-exptable-tr"),r=[],i=this,s=this.$node.getElementsByClassName("lyteExpTableFixedColHeader")[0].getElementsByTagName("lyte-exptable-tr")[0];!e||1!==e.nodeType&&isNaN(e)?($L.fastdom.measure((function(){if(i.$node)for(var e=0;e<a.length;e++)r.push(a[e].getBoundingClientRect().height+"px"),a[e]._relatedRow=o[e],o[e]._relatedRow=a[e]})),$L.fastdom.mutate((function(){if(i.$node){for(var e=0;e<a.length;e++)o[e].style.height=r[e];a.length>0&&s&&(s.style.height=r[0]),i.getMethods("afterSetFixTableRowHeight")&&i.executeMethod("afterSetFixTableRowHeight",i.$node)}}))):(t=1===e.nodeType?Array.from(a).indexOf(e):e,i.getMethods("beforeSetFixTableRowHeight")&&i.executeMethod("beforeSetFixTableRowHeight",i.$node),$L.fastdom.measure((function(){i.$node&&(r=a[t].getBoundingClientRect().height+"px",a[t]._relatedRow=o[t],o[t]._relatedRow=a[t])})),$L.fastdom.mutate((function(){i.$node&&(o[t].style.height=r)})))},setFixTableColumnWidth:function(e){var t,o=(this._oHeader||this.$node.getElementsByClassName("lyteExpTableFakeColHeader")[0]).getElementsByTagName("lyte-exptable-th"),a=this._originalDiv.getElementsByTagName("lyte-exptable-th"),r=this;if(this._originalTable&&(this._originalTable=this.$node.getElementsByClassName("lyteExpOriginalTable")[0]),this._originalTable.style.removeProperty("width"),this._fakeOriginalHeader.style.removeProperty("width"),null==e||1!==e.nodeType&&isNaN(e)){if(!r.$node)return;r.getMethods("beforeSetFixTableColumnWidth")&&r.executeMethod("beforeSetFixTableColumnWidth",r.$node),e||(r.fixHeaderHeight(),$L.fastdom.measure((function(){$L.fastdom.mutate((function(){r.getMethods("afterSetFixTableColumnWidth")&&r.executeMethod("afterSetFixTableColumnWidth",r.$node)}))})))}else t=1===e.nodeType?this.getIndex(e):e,$L.fastdom.mutate((function(){if(r.$node){if(r._widthList&&(a[t].style.width=r._widthList[t].width+"px",o[t].style.width=r._widthList[t].width+"px"),$L(a[t]).hasClass("lyteFixedColumn")&&(ofthList=r._originalDiv.getElementsByClassName("lyteFixedColumn"),fColIndex=Array.from(ofthList).indexOf(a[t]),r._fixHeaderCount>=0)){var e=r._colwrap||r.$node.getElementsByClassName("lyteExpTableFixedColWrapper")[0];fixothList=e.getElementsByTagName("lyte-exptable-th");var i=fixothList[fColIndex].style.width;fixothList[fColIndex].style.width=r._widthList[t].width+"px",_fcolwrap=r.$node.getElementsByClassName("lyteExpTableFixedColHeader")[0],ffixothList=_fcolwrap.getElementsByTagName("lyte-exptable-th"),ffixothList[fColIndex].style.width=r._widthList[t].width+"px";var s=parseInt(e.style.width)-(parseInt(i)-r._widthList[t].width);e.style.width=s+"px",_fcolwrap.style.width=s+"px"}s=r._originalTable.getBoundingClientRect().width;r._originalTable.style.width=s+"px",r._fakeOriginalHeader.style.width=s+"px"}}))},setVisibleFixHeader:function(){for(var e=this.$node.getElementsByClassName("lyteExpTableFixedColHeader")[0].getElementsByTagName("lyte-exptable-th"),t=this._fixHeaderCount,o=this.$node.getElementsByClassName("lyteExpTableFakeColHeaderWrapper")[0].getElementsByClassName("lyteFixedColumn"),a=this.$node,r=0;r<e.length;r++)r+1<=t?(e[r].classList.remove("lyteFixHeaderDisplayNone"),e[r].style.width=o[r].style.width):e[r].classList.add("lyteFixHeaderDisplayNone");t=this._fixHeaderCount;var i=this.$node.getElementsByClassName("lyteExpTableFixedColTable")[0].getElementsByTagName("lyte-exptable-tr");for(r=i.length-1;r>=0;r--)for(var s=i[r].getElementsByTagName(0==r?"lyte-exptable-th":"lyte-exptable-td"),l=0;l<s.length;++l)l+1<=t?s[l].classList.remove("lyteFixHeaderDisplayNone"):0!=l&&s[l].classList.add("lyteFixHeaderDisplayNone");!this._elem&&this.setFixTableRowHeight(),0==t?!a.classList.contains("lyteExpTableNoShadow")&&a.classList.add("lyteExpTableNoShadow"):a.classList.contains("lyteExpTableNoShadow")&&a.classList.remove("lyteExpTableNoShadow")},callHeaderObs:function(){this.getData("ltPropStickyTable")?(this.setTableHeader(),this.setLeftForInterSection(!0)):(this.setTableHeader(),this._fixHeaderCount=0,this.setData("columns",[]),this.getData("ltPropHeader").length>=1&&this.initProcess(),delete this._widthList,this._oHeader.parentNode.style.transform="translateX(0)")},callContentObs:function(){if(this.getData("ltPropStickyTable"))this.setWidth(),this.setLeftForInterSection(!0);else{var e=this.getData("ltPropPreventContentObserver");delete this._widthList,e||this.setFixTableColumnWidth(),this.setFixTableRowHeight(),e||this.setWidth()}},headerObs:function(){this._prevent||this.callHeaderObs()}.observes("ltPropHeader.[]"),contentObs:function(){if(!this.getData("ltPropStickyTable")){if(this.data.ltPropPreventContentObserver)return;this.callContentObs()}}.observes("ltPropContent.[]"),HeightObs:function(){this.getData("ltPropHeight"),this._scrollWidth;this.$node.style.height=this.getData("ltPropHeight");var e=this._colwrap||this.$node.getElementsByClassName("lyteExpTableFixedColWrapper")[0];this.getData("ltPropStickyTable")||(this.setScrollWidth(),$L.fastdom.measure(function(){var t,o=this._originalDiv,a=this._elem?this.prevScollTop:a||o.scrollTop,r=this._elem?this._originalDiv._sL:r||o.scrollLeft,i=this._elem?this._sw:o.scrollWidth,s=this._elem?this._thisBccr.width:o.offsetWidth;null!=i&&null!=r&&null!=s&&(t=this.returntrans(r,s,i)),$L.fastdom.mutate(function(){this._oHeader&&(this._oHeader.parentNode.style.transform="translateX("+t+"px)"),e&&o.offsetWidth!=o.scrollWidth&&(e.style.height="calc(100% - "+this._scrollWidth+"px)")}.bind(this))}.bind(this)))}.observes("ltPropHeight"),fixedTableScrollObs:function(){if(!this.getData("ltPropStickyTable")){var e=this.$node.getElementsByClassName("lyteExpTableFixedColWrapper")[0];this.getData("ltPropFixedTableScroll")?e.style.overflow="":e.style.overflow="hidden"}}.observes("ltPropFixedTableScroll").on("didConnect"),getIndex:function(e){return Array.from(this._originalDiv.getElementsByTagName("lyte-exptable-th")).indexOf(e)},getIndexFromFake:function(e){if(this._oHeader)return Array.from(this._oHeader.getElementsByTagName("lyte-exptable-th")).indexOf(e)},composePath:function(e){for(var t=[],o=e.target.correspondingElement||e.target;o&&"HTML"!=o.tagName;)t.push(o),o=o.parentNode;return t},rtlfunc:function(e,t,o){if(this._dir&&"top"!=e&&"clientY"!=e){if(t)return"right"==e?o-t.left:"clientX"==e?o-t.clientX:o-t.right;if("left"==e)return"right";if("right"==e)return"left"}return t?t[e]:e},getPreviousOffset:function(e){for(;e.previousElementSibling;){var t=e.previousElementSibling,o=t.getBoundingClientRect();if(0!=t.width)return o;e=e.previousElementSibling}},scrollCheck:function(e,t,o){this._colwrap=this._colwrap||this.$node.getElementsByClassName("lyteExpTableFixedColWrapper")[0],this._oriwrap=this._oriwrap||this.$node.getElementsByClassName("lyteExpTableOrigTableInnerWrap")[0],this._tableWrp=this._tableWrp||this.$node.getElementsByClassName("lyteExpTableOrigTableWrapper")[0],this._fixedDivWrap=this._fixedDivWrap||this.$node.getElementsByClassName("lyteExpTableFixedColHeader")[0];var a=this._colwrap.getElementsByClassName("lyteFixedColumn"),r=this._oriwrap.getElementsByClassName("lyteFixedColumn")||[],i=this._tableWrp.getBoundingClientRect(),s=window.innerWidth;if(t!=this._prevScrollLeft||o){for(var l=this.getData("columns"),n=(this.getData("tableHeader"),this.data.ltPropFixedColumnClass,0),p=0;p<a.length;p++)a[p]._off=a[p].getBoundingClientRect(),r[p]._off=r[p].getBoundingClientRect();for(var c=0;c<l.length;c++)n+=l[c]._off.width;this._fixHeaderCount;var d=[],u=this._colwrap;this._fthList||(this._fthList=u.getElementsByClassName("lyteExpTableHeaderGroup")[0]),this._fthList&&(u.scrollTop=e);for(p=l.length;p<a.length;p++){var h=r[p];if(!this._elem||Array.apply(Array,h.parentNode.children).indexOf(h)!=this._index)if(0==h._off.width&&p+1<r.length&&Math.round(this.rtlfunc("left",r[p+1]._off,s)-this.rtlfunc("left",i,s))<n)l.push(a[p]),u.style.width=parseFloat(u.style.width)+r[p]._off.width+"px",n+=r[p]._off.width,this._fixHeaderCount++,this.setVisibleFixHeader(),d.push(p);else{if(!(0!=h._off.width&&Math.round(this.rtlfunc("left",h._off,s)-this.rtlfunc("left",i,s))<n))break;l.push(a[p]),u.style.width=parseFloat(u.style.width)+r[p]._off.width+"px",n+=r[p]._off.width,this._fixHeaderCount++,this.setVisibleFixHeader(),d.push(p)}}for(var m=l.length-1;m>=0;m--)if(-1==d.indexOf(m))if(0==l[m]._off.width&&m-1>=0&&this.rtlfunc("right",l[m-1]._off,s)<=this.rtlfunc("right",r[m-1]._off,s)+(this._isIE?2:0))u.style.width=parseFloat(u.style.width)-r[m]._off.width+"px",this._fixHeaderCount--,this.setVisibleFixHeader(),Lyte.arrayUtils(l,"removeAt",m);else if(0!=l[m]._off.width&&this.rtlfunc("right",l[m]._off,s)<=this.rtlfunc("right",r[m]._off,s)+(this._isIE?2:0)){for(var y=l.length-1;y>=m;y--)u.style.width=parseFloat(u.style.width)-r[y]._off.width+"px",this._fixedDivWrap.style.width=u.style.width,this._fixHeaderCount--,Lyte.arrayUtils(l,"removeAt",y);this.setVisibleFixHeader()}}this.prevScollTop=e,this._prevScrollLeft=t},hideTempHeader:function(e){$L.fastdom.measure(function(){var t=this._colwrap||this.$node.getElementsByClassName("lyteExpTableFixedColWrapper")[0],o=t.scrollTop,a=this._originalDiv.scrollTop;$L.fastdom.mutate(function(){this.getData("ltPropFixedTableScroll")&&(e?t.scrollTop=a:this._originalDiv.scrollTop=o)}.bind(this))}.bind(this)),clearTimeout(this._scrollY),delete this._scrollY},scrollF:function(e,t,o){this.scrollCheck(e,t,o)},verticalScroll:function(e,t){clearTimeout(this._scrollY),this._scrollY=setTimeout(this.hideTempHeader.bind(this,t),200)},fixedScroll:function(e){if(!this.getData("ltPropStickyTable"))if(this._parentScroll)delete this._parentScroll;else{var t=(this._colwrap||this.$node.getElementsByClassName("lyteExpTableFixedColWrapper")[0]).scrollTop,o=this._originalDiv.scrollLeft;if(t!=this.prevScollTop){if(this.getData("ltPropFixedTableScroll"))this._originalDiv.scrollTop=t;o=this._dir?this._startScrollLeft-o:-o,this.prevScollTop=t,clearTimeout(this._fixedscrollY),this.setTranslate=this.setTranslate.bind(this),this._fixedscrollY=setTimeout(this.setTranslate,200)}}},setTranslate:function(){this._originalDiv.scrollTop;clearTimeout(this._fixedscrollY),delete this._fixedscrollY},minWidth:function(e,t){var o=window.getComputedStyle(e,null).getPropertyValue("min-width"),a=e.style.width;e.style.width="0px"==o?"50px":o,o=e.offsetWidth+"px",e.style.width=a,this.setData(t,o)},arrayFrom:function(e){for(var t=[],o=0;o<e.length;o++)t.push(e[o]);return t.slice()},closestFind:function(e,t){for(var o=this.arrayFrom.call(this,document.querySelectorAll(t)),a=0;a<e.length;a++)if(-1!=Array.prototype.indexOf.call(o,e[a]))return e[a];return null},elementsFromPointCal:function(e,t){for(var o=[],a=document.elementFromPoint(e,t);a!=document&&a!=document.documentElement&&a!=document.body&&a!=this.$node;)a.style.pointerEvents="none",o.push(a),a=document.elementFromPoint(e,t);for(var r=0;r<o.length;r++)o[r].style.pointerEvents="initial";return o},setLeftDuringResize:function(e,t){var o=this._originalTable.getElementsByTagName("lyte-exptable-tr");if(index=this.getIndex(t),t.classList.contains("lyteFixedColumn"))for(var a=0;a<o.length;a++)if(0==a)for(var r=o[a].getElementsByTagName("lyte-exptable-th"),i=index+1;i<r.length;i++)r[i].classList.contains("lyteFixedColumn")&&(r[i].style.left=parseInt(r[i].style.left)+e+"px");else{var s=o[a].getElementsByTagName("lyte-exptable-td");for(i=index+1;i<s.length;i++)s[i].classList.contains("lyteFixedColumn")&&(s[i].style.left=parseInt(s[i].style.left)+e+"px")}},resizeFunc:function(e){var t="touchmove"==e.type,o=e;if(!t||1==e.touches.length){t&&(o=o.touches[0]);var a,r,i=document.Component,s=window.innerWidth,l=i.resizeComponent,n=i.rtlfunc("clientX",o,s),p=n-l.offLeft,c=parseFloat(l.style.width),d=i._originalResizeHead,u=(i._originalDiv.scrollLeft,i.$node.getBoundingClientRect().width),h=0,m=-1;if(i._isResizeMoved||(i.hideRows(i._thisBccr),i._isResizeMoved=!0),!i.data.ltPropStickyTable&&$L(d).hasClass("lyteFixedColumn")){i.getIndex(d);var y=i._originalDiv.getElementsByTagName("lyte-exptable-th"),f=(i._colwrap||i.$node.getElementsByClassName("lyteExpTableFixedColWrapper")[0]).getElementsByTagName("lyte-exptable-th"),g=y.length;i._fixedDivWrap=i._fixedDivWrap||i.$node.getElementsByClassName("lyteExpTableFixedColHeader")[0];for(var v=0;v<g;v++){var x=y[v];(D=$L(x)).hasClass("lyteFixedColumn")&&(x==d?(m=h,a=f[h],r=i._fixedDivWrap.getElementsByClassName("lyteFixedColumn")[h]):h++)}}if("LYTE-EXPTABLE-TH"==l.tagName&&p){var P,b=p+c,D=$L(l),L=!a||$L(a).hasClass("lyteFixHeaderDisplayNone"),C=D.hasClass("lyteFixedColumn"),_=Math.ceil(parseFloat(i.getData("minWidth1")));Math.ceil(parseFloat(i.getData("minWidth2")));if(i._originalTable&&(P=(i._originalTable.style.width?parseFloat(i._originalTable.style.width):i._originalTable.getBoundingClientRect().width)+p),!i._dir&&p<0&&e.clientX-l.getBoundingClientRect().left<_||i._dir&&l.getBoundingClientRect().right-e.clientX<_)return;if(L&&(C&&i._fixedSum+p<u-100||!C)&&b>=_){if(i.oriTab&&(i.oriTab.style.width=parseFloat(i.oriTab.style.width)+p+"px"),D.css("width",b+"px"),i.data.ltPropStickyTable&&i.setLeftDuringResize(p,l),C&&(i._fixedSum+=p),i._dir){var S=navigator.userAgent.toLowerCase();window.chrome,navigator.vendor,window.opr,/edge/i.test(S)}$L(i._originalTable).css("width",P),i._fakeOriginalHeader&&$L(i._fakeOriginalHeader).css("width",parseFloat(i._fakeOriginalHeader.style.width||i._originalTable.getBoundingClientRect().width)+p+"px"),$L(d).css("width",b),-1!=m&&(a&&$L(a).css("width",b),r&&$L(r).css("width",b))}n>Math.max(i.rtlfunc("left",i._thisBccr,s),0)&&n<Math.min(i.rtlfunc("right",i._thisBccr,s),s)&&(window.cancelAnimationFrame(i._reqId),delete i._reqId),l.offLeft=n,d&&(d.offLeft=n)}i.horiScrollResize(o,s),e.preventDefault(),e.stopPropagation()}},mouseup:function(e){var t="touchend"==e.type,o=document.Component,a=o.resizeComponent;if(delete document.Component,delete o.oriTab,o._resizeMeasure&&($L.fastdom.clear(o._resizeMeasure),delete o._resizeMeasure),document.removeEventListener(t?"touchend":"mouseup",o.mouseup),document.removeEventListener(t?"touchmove":"mousemove",o.resizeFunc),a.classList.remove("resizeSelect"),o.$node.classList.remove("lyteExpTableResizing"),o._isResizeMoved&&($L(".lyteExpTableHide",o.$node).removeClass("lyteExpTableHide"),$L("lyte-exptable-tr.notModified",o.$node).css("transform","").removeClass("notModified"),delete o._isResizeMoved,o.getData("ltPropStickyTable")||o.setFixTableRowHeight(),o._originalDiv.scrollTop=o._scrolltoMaintain,o._scrollLeftToSet&&(o._originalDiv.scrollLeft=o._scrollLeftToSet),!0),null!=o._tlayout){var r=o.$node.getElementsByClassName("lyteExpOriginalTable")[0];r.style.tableLayout=o._tlayout,r.style.maxWidth="",r.style.maxHeight="",delete o._tlayout}delete o._scrolltoMaintain,delete o._cellshidden,delete o._preventscroll,delete o._scrollLeftToSet,o.getData("ltPropStickyTable")&&o.setLeftForInterSection(),delete document.Component,delete o.oriTab,delete o._thisBccr,delete o._originalResizeHead,o.getMethods("onResizeEnd")&&o.executeMethod("onResizeEnd",a,o.$node),window.cancelAnimationFrame(o._reqId),delete o._reqId,e.stopPropagation()},horiScrollResize:function(e,t){var o,a,r,i=this.rtlfunc.call(this,"left"),s=this.isIE11Lyte||this.isEdgeLyte;if(/mousemove|touchmove/i.test(e.type)&&(o=!0),o){if(this._reqId)return;a=this.rtlfunc.call(this,"clientX",e,t)>Math.min(this.rtlfunc.call(this,"right",this._thisBccr,t),t-2),r=this.rtlfunc.call(this,"clientX",e,t)<=Math.max(0,this.rtlfunc("left",this._thisBccr,innerWidth))}else a=parseFloat(e.style[i])-this._xxoff+parseFloat(e.style.width)>=this.rtlfunc("right",this._thisBccr,t)-1,r=parseFloat(e.style[i])-this._xxoff+parseFloat(e.style.width)>=this.rtlfunc("right",this._thisBccr,t)-1;a?(this._originalDiv.scrollLeft+=2*(this._dir?-1*(s?-1:1):1),o&&(this.resizeComponent.offLeft-=2,this._originalResizeHead&&(this._originalResizeHead.offLeft-=2)),this._reqId=window.requestAnimationFrame(function(){delete this._reqId,delete this._scrollLeftToSet,this.horiScrollResize(e,t),this._cellshidden&&(delete this._cellshidden,window.requestAnimationFrame(function(){this.$node&&$L("lyte-exptable-tr.notModified .lyteExpTableHide",this.$node).removeClass("lyteExpTableHide")}.bind(this)))}.bind(this))):r?(o&&(this.resizeComponent.offLeft+=2,this._originalResizeHead&&(this._originalResizeHead.offLeft+=2)),this._originalDiv.scrollLeft-=2*(this._dir?-1*(s?-1:1):1),this._reqId=window.requestAnimationFrame(function(){delete this._reqId,delete this._scrollLeftToSet,this.horiScrollResize(e,t)}.bind(this))):(window.cancelAnimationFrame(this._reqId),delete this._prevent)},setWidthForOriginalHeader:function(){this._originalTable=this._originalTable||this.$node.getElementsByClassName("lyteExpOriginalTable")[0];var e=Array.from(this._originalTable.getElementsByTagName("lyte-exptable-th")),t=[];e.forEach((function(e){t.push(e.getBoundingClientRect().width+"px")})),e.forEach((function(e,o){e.style.width=t[o]}))},actions:{scroll:function(e,t,o,a){if(this.getData("ltPropStickyTable"))this.stickyScroll(e);else if(!(this._elem&&e&&"scroll"==e.type||this._preventscroll)){delete this._scrolled;var r=this._originalDiv,i=(o=this._elem?this.prevScollTop:o||r.scrollTop,t=this._elem?this._originalDiv._sL:t||r.scrollLeft,this._elem?this._sw:r.scrollWidth),s=this._elem?this._thisBccr.width:r.offsetWidth;if((o!=this.prevScollTop||a&&!this._elem)&&($L.fastdom.mutate(function(){this.getData("ltPropFixedTableScroll")&&((this._colwrap||this.$node.getElementsByClassName("lyteExpTableFixedColWrapper")[0]).scrollTop=o)}.bind(this)),this.verticalScroll(t,!0),this.prevScollTop=o,this._parentScroll=!0),t!=this._prevScollLeft||a){this.scrollF(o,t,a),this._prevScollLeft=t;var l=this.returntrans(t,s,i);this._elem?this.getData("ltPropPreventWidth")?this.setFixedTableWidth():this._FF&&this.fixHeaderHeight():this.getData("ltPropPreventWidth")?this.setFixedTableWidth():this.fixHeaderHeight(),$L.fastdom.mutate(function(){this._oHeader.parentNode.style.transform="translateX("+l+"px)"}.bind(this))}}},tableResize:function(e){var t="touchstart"==e.type,o=e;if(!this._resizeMeasure){if(t){if(o.touches.length>1)return;o=o.touches[0]}var a=o.target.parentNode,r=window.innerWidth;this.getData("ltPropStickyTable")?(i=this.getIndex(a),s=this.getIndex(a.nextElementSibling)):(this._oHeader.getElementsByTagName("lyte-exptable-th"),i=this.getIndexFromFake(a),s=this.getIndexFromFake(a.nextElementSibling));var i,s,l=this._originalDiv.getElementsByTagName("lyte-exptable-th"),n=this.$node.getElementsByClassName("lyteExpOriginalTable")[0],p=n.style.maxWidth,c=n.style.maxHeight,d=l[i],u=l[s],h=a.getBoundingClientRect(),m=u?u.getBoundingClientRect():{},y=$L(d).closest("lyte-exptable").get(0),f="fixed"==window.getComputedStyle(y).tableLayout,g=window.getComputedStyle(d),v=u?window.getComputedStyle(u):{},x=this._originalDiv.scrollLeft,P=this.getData("ltPropStickyTable")&&""==n.style.width?n.getBoundingClientRect().width:void 0;i>=0&&(this._originalResizeHead=l[i]),s>=0&&(this._originalNextResize=l[s]),document.Component=this,this.resizeComponent=a,this.targetElem=o.target,this._preventscroll=!0,this._thisBccr=this.$node.getBoundingClientRect(),this.getMethods("onResizeSelect")&&this.executeMethod("onResizeSelect",a,e,this.$node),this.getData("ltPropStickyTable")&&""==d.style.width&&this.setWidthForOriginalHeader(),P&&(n.style.width=P+"px");var b=n.style.tableLayout;a.offLeft=h.width+this.rtlfunc.call(this,"left",h,r),a.offTop=o.clientY,this._tlayout=b,n.style.tableLayout="auto",n.style.maxWidth=0,n.style.maxHeight=0,this._resizeMeasure=$L.fastdom.measure((function(){var e=d.getBoundingClientRect(),o=u?u.getBoundingClientRect():{width:1/0};delete this._resizeMeasure,$L.fastdom.mutate((function(){if(a.classList.add("resizeSelect"),this.$node.classList.add("lyteExpTableResizing"),this.data.minWidth1=Math.min(e.width,h.width),this.data.minWidth2=Math.min(o.width,m.width||0),f){var r=-1!=(g.minWidth||"").indexOf("px")?parseFloat(g.minWidth):NaN,i=-1!=(v.minWidth||"").indexOf("px")?parseFloat(v.minWidth):NaN;isNaN(r)||(this.data.minWidth1=f?r:Math.max(this.data.minWidth1,r)),isNaN(i)||(this.data.minWidth2=f?i:Math.max(this.data.minWidth2,i))}n.style.maxWidth=p,n.style.maxHeight=c,n.style.tableLayout=b,document.addEventListener(t?"touchmove":"mousemove",this.resizeFunc),delete this._preventscroll,delete this._tlayout,this._originalDiv.scrollLeft=x}),this)}),this),document.addEventListener(t?"touchend":"mouseup",this.mouseup),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}},fixedColScroll:function(e){return this.fixedScroll(e),!1},fixedColWheel:function(e){var t="touchmove"==e.type;if(!(t&&e.touches.length>1)){var o=t?this.getTouch(e.touches[0]):this.getWheel(e);if(o){var a=this._originalDiv,r=a.scrollLeft,i=a.scrollWidth,s=a.clientWidth;(o=this.toPrevent(r,i,s,o))&&(a.scrollLeft=r+o,e.preventDefault())}return!1}}},toPrevent:function(e,t,o,a){var r=t-o,i=0,s=e+a;return this._dir&&(this._FF||this._isSafari&&!this._chrome)&&(r=0,i=o-t),a=Math.max(Math.min(r,s),i)-e},getTouch:function(e){this._touchend||(this._touchend=this.touchend.bind(this),document.addEventListener("touchend",this._touchend,!0));var t=e.clientX,o=e.clientY,a=(null==this._prevTouchX?t:this._prevTouchX)-t,r=(null==this._prevTouchY?o:this._prevTouchY)-o;if(this._prevTouchX=t,this._prevTouchY=o,Math.abs(a)>=Math.abs(r))return a},touchend:function(){document.removeEventListener("touchend",this._touchend,!0),delete this._touchend,delete this._prevTouchX,delete this._prevTouchY},getWheel:function(e){var t=e.deltaMode&&1==e.deltaMode,o=0,a=1;if(Math.abs(e.deltaX||0)>=Math.abs(e.deltaY||0))return o=t?6*e.deltaX:e.deltaX,/edge|trident|msie/i.test(navigator.userAgent)&&this._dir&&(a=-1),o*a},hideRows:function(e){var t,o,a=Array.from(this._originalDiv.getElementsByTagName("lyte-exptable-tr")),r=[],i=this._originalDiv.scrollTop,s=0,l=Math.max(e.top+a[0].getBoundingClientRect().height,-10),n=Math.min(window.innerHeight+10,e.bottom),p=[],c=this.getData("ltPropStickyTable");this._scrollLeftToSet=this._originalDiv.scrollLeft,c||(fakerows=Array.from((this._colwrap||this.$node.getElementsByClassName("lyteExpTableFixedColWrapper")[0]).getElementsByTagName("lyte-exptable-tr")));for(var d=1;d<a.length;d++){var u=a[d],h=u.getBoundingClientRect();if(h.bottom<l)r.push(u),c||r.push(fakerows[d]),s+=h.height;else{if(h.top>n){Lyte.arrayUtils(p,"push",a.slice(d,d+10)),Lyte.arrayUtils(r,"push",a.splice(d+10)),c||(Lyte.arrayUtils(p,"push",fakerows.slice(d,d+10)),Lyte.arrayUtils(r,"push",fakerows.splice(d+10)));break}p.push(u),c||p.push(fakerows[d])}}return o=[],t=i-s,this._originalDiv.scrollTop=0,r.forEach((function(e){e.classList.add("lyteExpTableHide")})),p.forEach((function(e){e.classList.add("notModified"),e.style.transform="translateY(-"+t+"px)"})),this._scrolltoMaintain=i,o},returntrans:function(e,t,o){return this._isIE?e*(this._dir?1:-1):this._dir?this._chrome&&!this._isNegative?o-t-e+this._verticalScrollWidth:this._startScrollLeft-e:-e},bindingEvts:function(e){var t=this.data.ltPropColumnSortable;if(t||e){var o=this.data.ltPropStickyTable,a=this._headerDiv||this.$node.getElementsByClassName(o?"lyteExpTableHeaderGroup":"lyteExpTableFakeHeaderWrapper")[0],r="add";if(a){if(this._sortmousedown)r="remove";else{if(!t)return;this._sortmousedown=this.sortablemousedown.bind(this)}["mousedown","touchstart"].forEach(function(e){a[r+"EventListener"](e,this._sortmousedown,!0)}.bind(this)),$L(this.$node)[r+"Class"]("lyteExpTableColumnSortable"),"remove"==r&&delete this._sortmousedown}}}.observes("ltPropColumnSortable").on("didConnect"),sortablemousedown:function(e){var t,o=e;if(!/lyte-exptablehead-resize/i.test(e.target.tagName)&&0==e.button){if(/touch/i.test(e.type)){if(e.touches.length>1)return;t=!0,o=e.touches[0]}var a=o.target,r=$L(a).closest("lyte-exptable-th").get(0),i=Array.apply(Array,r.parentNode.children).indexOf(r),s=this.data.ltPropStickyTable;if(!(this._fixHeaderCount>i||s&&$L(r).hasClass("lyteTableFixed")||this.getMethods("onBeforeSelect")&&0==this.executeMethod("onBeforeSelect",e,r,i,this.$node))){this._ww=window.innerWidth;var l=this.rtlfunc("clientX",o,this._ww),n=r.getBoundingClientRect(),p=this._originalTable.getElementsByClassName("lyteExpTableRowGroup")[0],c=[],d=p.children,u=p.previousElementSibling.children[0].children[i];if(this._xoff=l-this.rtlfunc("right",n,this._ww),this._colwrap=this._colwrap||this.$node.getElementsByClassName("lyteExpTableFixedColWrapper")[0],this._elem=r,this._index=i,this._sortmousemove=this.sortmousemove.bind(this),this._sortmouseup=this.sortmouseup.bind(this),this._currentIndex=i,this._tbody=p,this._cells=c,this._affectedIndex=[],this._thisBccr=this._originalDiv.getBoundingClientRect(),this._sw=this._originalDiv.scrollWidth,this._prevx=l,this._originalDiv._sL=this._originalDiv.scrollLeft,s){var h={width:this._fixedWidth},m=this.rtlfunc("left");this.rtlfunc("right");h[m]=this._thisBccr[m],"left"==m?h.right=h.width+h.left:h.left=h.right-h.width,this._colwrapbcr=h}else this._colwrapbcr=this._colwrap.getBoundingClientRect();for(var y=r.parentNode.children,f=y[0].getBoundingClientRect(),g=0;g<y.length;g++){var v=y[g],x=(y[g-1]||{})._bcr;if(0==g)v._bcr={left:f.left,right:f.right,width:f.width};else if(this.data.ltPropStickyTable){var P=v.getBoundingClientRect();v._bcr={left:P.left,right:P.right,width:P.width}}else{var b=parseFloat(v.style.width);isNaN(b)&&(b=v.getBoundingClientRect().width),this._dir?v._bcr={left:x.left-b,right:x.left,width:b}:v._bcr={left:x.right,right:x.right+b,width:b}}}if(this.data.ltPropPreventTableModify)r._transformedindex=i;else{if(!this.data.ltPropHeaderOnly){var D=0;for(g=0;g<d.length;g++){var L=d[g].children[i];L._translate=0,c.push(L),L._transformedindex=i;var C=L.getBoundingClientRect().height;if(L.classList.add("lyteExpSortSelected"),(D+=C)>=this._thisBccr.height)break}}c.push(u),u._translate=0,u._transformedindex=i,s||(r._translate=0,c.push(r),r._transformedindex=i)}document.addEventListener(t?"touchmove":"mousemove",this._sortmousemove,!0),document.addEventListener(t?"touchend":"mouseup",this._sortmouseup,!0),this.$node.classList.add("lyteTableSortSelected"),r.classList.add("lyteExpSortSelected"),e.preventDefault(),this.getMethods("onSelect")&&this.executeMethod("onSelect",e,r,i,this.$node)}}},getTd:function(e,t,o){var a,r=e.parentNode.children,i=e._transformedindex;return t>0||0==t&&o?a=this._index<=i?r[i+1]:r[i]:(t<0||0==t&&0==o)&&(a=this._index<i?r[i]:r[i-1]),a},findFormClosest:function(e){var t=$L(e.target).closest(".lyteExpTableFakeColHeader lyte-exptable-th,.lyteExpOriginalTable lyte-exptable-td").get(0);if(t&&/lyte-exptable-td/i.test(t.tagName)){var o=Array.apply(Array,t.parentNode.children).indexOf(t);t=this._elem.parentNode.children[o]}return t},sortmousemove:function(e,t,o){if(!this._preventmove&&this._elem&&!this._movemutate&&!this._movemeasure){var a=e,r=this.rtlfunc("clientX",a,this._ww),i=this._elem,s=(this._tbody,this._cells),l=this._xoff,n=this.data.ltPropPreventTableModify;if(/touch/i.test(e.type)){if(e.touches.length>1)return;a=e.touches[0]}if(n&&!this._moved){var p=document.createElement("div"),c=i.getBoundingClientRect(),d=document.documentElement.scrollLeft,u=document.documentElement.scrollTop;return p.innerHTML=i.innerHTML,$L(p).attr("style",$L(i).attr("style")).addClass(this.data.ltPropSortDummyColumClass,"lyteExpTableDummyColumn"),$L(i).data("sortElement",p),$L(p).data("relatedElement",i),p.style.height=c.height+"px",p.style.width=c.width+"px",p.style.left=d*(this._dir?-1:1)+"px",p.style.top=u+"px",p._bcr={left:c.left,right:c.right,width:c.width},p._translate=p._bcr.left,p._translateY=c.top,p.style.transform="translate("+p._translate+"px,"+p._translateY+"px)",document.body.appendChild(p),void(this._moved=!0)}if((this._prevx!=a.clientX||t)&&(!this.getMethods("onBeforeMove")||0!=this.executeMethod("onBeforeMove",e,i,this._index,i._transformedindex,this.$node))){this._prevx=a.clientX;c=(p=$L(i).data("sortElement")||{})._bcr||i._bcr||i.getBoundingClientRect();var h,m,y,f=r-this.rtlfunc("right",c,this._ww)-l,g=n?this.findFormClosest(a):this.getTd(i,f,o),v=g?g._bcr||g.getBoundingClientRect():{},x=this._originalDiv._sL,P=this._dir?-1:1;if(null==x&&(x=this._originalDiv.scrollLeft),i!=g||p||(g=void 0),this.data.ltPropStickyTable&&g&&$L(g).hasClass("lyteTableFixed")&&(g=void 0),g&&this._moved){if((m=Array.apply(Array,g.parentNode.children).indexOf(g))!=this._index||n){var b=null==g._transformedindex?m:g._transformedindex;p&&i==g&&(b=m),f>0||0==f&&o?this.rtlfunc("right",c,this._ww)+f>this.rtlfunc("left",v,this._ww)+.5*v.width&&(t=b>i._transformedindex):(f<0||0==f&&0==o)&&this.rtlfunc("left",c,this._ww)+f<this.rtlfunc("left",v,this._ww)+.5*v.width&&(t=b<i._transformedindex),t?n||(h=-1==this._affectedIndex.indexOf(m))&&(this._isIE?g.offsetLeft:0,this._affectedIndex.push(m)):g=void 0}}else g=void 0;if(g&&this.getMethods("onBeforeInterChange")&&(y=0==this.executeMethod("onBeforeInterChange",e,i,g,this.$node))&&h&&Lyte.arrayUtils(this._affectedIndex,"removeAt",this._affectedIndex.indexOf(m)),n)p._translate+=f*P,p.style.transform="translate( "+p._translate+"px,"+p._translateY+"px)",g&&!y&&g!=i&&(f<0||0==f&&0==o?i._transformedindex--:i._transformedindex++);else for(var D=0;D<s.length;D++){var L=s[D];if(L._translate+=f*P,L.style.transform="translateX("+L._translate+"px)",this._moved||L.classList.add("lyteExpTablePe"),g&&!y){var C=s[D].parentNode.children[m];h&&(C.classList.add("lyteExpTableAnimate"),C._translate=0),C._translate+=c.width*(f>0||0==f&&o?-1:1)*P,C.style.transform="translateX("+C._translate+"px)",null==C._transformedindex&&(C._transformedindex=m),f<0||0==f&&0==o?(C._transformedindex++,L._transformedindex--):(f>0||0==f&&o)&&(C._transformedindex--,L._transformedindex++)}}p._bcr?(p._bcr.left+=f*P,p._bcr.right+=f*P):(i._bcr.left+=f*P,i._bcr.right+=f*P,g&&!y&&(g._bcr.left+=c.width*(f>0||0==f&&o?-1:1)*P,g._bcr.right+=c.width*(f>0||0==f&&o?-1:1)*P)),$L.fastdom.clear(this._reqId),$L.fastdom.clear(this._measure),delete this._measure,delete this._reqId,this.sorthorizontalscroll({left:c.left,width:c.width,right:c.right},x),g&&this.getMethods("onInterChange")&&this.executeMethod("onInterChange",e,i,g,this.$node),this.getMethods("onMove")&&this.executeMethod("onMove",e,i,this._index,i._transformedindex,this.$node),this._moved=!0}}},sorthorizontalscroll:function(e,t){this.rtlfunc.call(this,"left");var o,a,r,i=this.isIE11Lyte||this.isEdgeLyte,s=this._elem;if(o=this.rtlfunc("left",e,this._ww)<Math.max(this.rtlfunc("right",this._colwrapbcr,this._ww),0),a=this.rtlfunc("left",e,this._ww)+e.width>Math.min(this.rtlfunc("right",this._thisBccr,this._ww),this._ww),(this._FF||this._isIE)&&a&&s._transformedindex==s.parentNode.children.length-1)if(this._dir&&!this._isIE){if(this._sw+t+this._verticalScrollWidth<=this._thisBccr.width)return}else if(t+this._thisBccr.width>=this._sw)return;if(o?(r=t-this.data.ltPropScrollStep*(this._dir?-1*(i?-1:1):1),this._dir?this._chrome?r=Math.min(r,this._sw-this._thisBccr.width):(this._FF||this._isSafari)&&(r=Math.min(r,0)):r=Math.max(r,0)):a?(r=t+this.data.ltPropScrollStep*(this._dir?-1*(i?-1:1):1),r=this._dir?this._chrome?Math.max(r,0):this._FF||this._isSafari?Math.max(r,this._thisBccr.width-this._sw):Math.min(r,this._sw-this._thisBccr.width):Math.min(r,this._sw-this._thisBccr.width)):($L.fastdom.clear(this._reqId),$L.fastdom.clear(this._measure),delete this._measure,delete this._reqId),o||a){this._originalDiv.scrollLeft=r,this._originalDiv._sL+=r-t;for(var l=this._elem.parentNode.children,n=this.data.ltPropStickyTable,p=0;p<l.length;p++){var c=l[p];n&&$L(c).hasClass("lyteTableFixed")||(c._bcr.left-=r-t,c._bcr.right-=r-t)}this._measure=$L.fastdom.measure(function(){delete this._measure,this.actions.scroll.call(this),this._reqId=$L.fastdom.mutate(function(){delete this._reqId,this.sortmousemove({clientX:this._prevx},!0,!!a)}.bind(this))}.bind(this))}},sortmouseup:function(e){var t,o=this._index,a=this._elem,r=a._transformedindex,i=/touch/i.test(e.type);if(this._moved){if(this.getMethods("onBeforeDrop")&&0==this.executeMethod("onBeforeDrop",e,a,o,r,this.$node)&&(t=!0),this.resetcells(),!t){if(o!=r){this._prevent=!0;var s=this.data.ltPropHeader,l=Lyte.arrayUtils(s,"removeAt",o);delete this._prevent,Lyte.arrayUtils(s,"insertAt",r,l)}this.getMethods("onDrop")&&this.executeMethod("onDrop",e,a,o,r,this.$node)}}else this.resetcells(),this.getMethods("onRelease")&&this.executeMethod("onRelease",e,a,this.$node);document.removeEventListener(i?"touchmove":"mousemove",this._sortmousemove,!0),document.removeEventListener(i?"touchend":"mouseup",this._sortmouseup,!0),$L.fastdom.clear(this._reqId),$L.fastdom.clear(this._measure),delete this._measure,delete this._reqId,delete this._sortmouseup,delete this._sortmousemove,delete this._elem,delete this._xoff,delete this._index,delete this._moved,delete this._affectedIndex,delete this._tbody,delete this._cells,delete this._prevx,delete this._thisBccr,delete this._ww,delete this._sw,delete this._colwrapbcr,this.$node.classList.remove("lyteTableSortSelected"),this.$node.scrollTo()},fixcolobs:function(){this._elem&&(this._preventmove=!0,$L.fastdom.measure(function(){this._colwrapbcr=this._colwrap.getBoundingClientRect(),$L.fastdom.mutate(function(){delete this._preventmove}.bind(this))}.bind(this)))}.observes("columns.[]"),resetcells:function(e){var t=this._affectedIndex;e=this._cells;if($L(this._fakeOriginalHeader).css("height",""),this.data.ltPropPreventTableModify){this._elem._transformedindex,this._elem._translate;var o=$L(this._elem).data("sortElement");o&&o.remove(),$L(this._elem).data("sortElement",void 0)}else for(var a=0;a<e.length;a++){var r=e[a],i=r.parentNode.children;r.style.transform="",r.classList.remove("lyteExpSortSelected","lyteExpTablePe"),delete r._transformedindex,delete r._translate;for(var s=0;s<t.length;s++){var l=i[t[s]];l.classList.remove("lyteExpTableAnimate","lyteExpTablePe"),l.style.transform="",delete l._transformedindex,delete l._translate}}},setLeftForInterSection:function(e){$L.fastdom.clear(this._setmeasure),this._setmeasure=$L.fastdom.measure(function(){var t=Array.from(this.getHeaderCells());if(t.length){var o=this.getHeaderWidths(t),a=0;$L.fastdom.mutate(function(){var r=0,i=0,s=this.getTbody(),l=Array.from(s.children),n=[],p=this.rtlfunc("left");t.forEach(function(t,s){var c=t._horizontalIntersectionDiv;c?(n.push(c),c.style[p]=i+"px",t.style[p]=r+"px",a+=o[s],this.makeFixedColumn(l,s,p,r),r+=o[s],this.observe(c),c._sticked&&e&&this.addFixedClass(t)):i+=o[s]}.bind(this)),this._intersections=n,this._fixedSum=a}.bind(this))}}.bind(this))},getHeaderCells:function(){return this.$node.getElementsByClassName("lyteExpOriginalTable")[0].getElementsByTagName("lyte-exptable-th")},getHeaderWidths:function(e){var t=[];return e.forEach((function(e,o){t[o]=e.getBoundingClientRect().width})),t},getTbody:function(){return this._tbody||this.$node.getElementsByClassName("lyteExpTableRowGroup")[0]},makeFixedColumn:function(e,t,o,a){e.forEach((function(e){var r=$L(e);r.hasClass("dummy")||r.children().eq(t).css(o,a).addClass("lyteFixedColumn")}))},observe:function(e){e._observed||(this._intersectionObs.observe(e),e._observed=!0)},addFixedClass:function(e){this.stickyFunction(e,!1,"addClass","lyteTableFixed")},stickyScroll:function(e){e&&e.target==this._scrollDiv&&this._intersections.length&&$L.fastdom.measure(function(){var t=e.target.scrollTop;$L.fastdom.mutate(function(){this._intersections.forEach((function(e){e.style.top=t+"px"}))}.bind(this))}.bind(this))},registerInterSection:function(e){this._intersectionObs=new IntersectionObserver(this.intersection.bind(this),{threshold:[1],root:e})},intersection:function(e){e.forEach(function(e){this.singleIntersection(e)}.bind(this))},singleIntersection:function(e){this._fixedWidth=this._fixedWidth||0;var t=e.target._cell;t&&e.intersectionRatio?this.processUnfix(t,e):t&&this.processFix(t,e)},processUnfix:function(e,t){this.removeFixedClass(e),delete e._horizontalIntersectionDiv._sticked,this.callUnfix(e),$L.fastdom.measure(function(){var t=e._bcr||e.getBoundingClientRect();this._fixedWidth=Math.max(this._fixedWidth-t.width,0),this.adjust_wrap_width()}.bind(this))},adjust_wrap_width:function(){var e=this._colwrapbcr;if(e&&this.data.ltPropStickyTable){var t=this.rtlfunc("left"),o=this._fixedWidth;"left"==t?e.right=e.left+o:e.left=e.right-o}},processFix:function(e,t){this.addFixedClass(e),e._horizontalIntersectionDiv._sticked=!0,this.callFix(e),$L.fastdom.measure(function(){var t=e._bcr||e.getBoundingClientRect();this._fixedWidth=this._fixedWidth+t.width,this.adjust_wrap_width()}.bind(this))},callUnfix:function(e){this.getMethods("onUnFix")&&this.executeMethod("onUnFix",e,this.$node)},callFix:function(e){this.getMethods("onFix")&&this.executeMethod("onFix",e,this.$node)},callDrop:function(e,t,o,a,r,i){this.getMethods("onDrop")&&this.executeMethod("onDrop",e,t,o,a,r,i,this.$node)},callRelease:function(e,t){this.getMethods("onRelease")&&this.executeMethod("onRelease",e,t,this.$node)},callOnBeforeSelect:function(e,t,o){if(this.getMethods("onBeforeSelect"))return!1===this.executeMethod("onBeforeSelect",e,t,this.$node,o)},callOnSelect:function(e,t,o){if(this.getMethods("onSelect"))return!1===this.executeMethod("onSelect",e,t,this.$node,o)},stickyFunction:function(e,t,o,a){var r=this.getIndexForSticky(e),i=this.getTbody(),s=Array.from(i.children),l=t?"css":o,n=t?this._dir?{right:a}:{left:a}:a;t||$L(e)[o](a),s.forEach((function(e){$L(e).children().eq(r)[l](n)}))},getIndexForSticky:function(e){return Array.from(e.parentNode.children).indexOf(e)},removeFixedClass:function(e){this.stickyFunction(e,!1,"removeClass","lyteTableFixed")},removeSticky:function(e){this.stickyFunction(e,!0,this.rtlfunc("left"),"")}}),window.addEventListener("resize",(function(){window.clearTimeout(_lyteUiUtils._expressDebounce),_lyteUiUtils._expressDebounce=setTimeout((function(){for(var e=document.getElementsByTagName("lyte-expresstable"),t=0;t<e.length;t++)e[t]&&!e[t].getData("ltPropStickyTable")&&(e[t].component.setFixTableRowHeight(),e[t].component.fixHeaderHeight())}),250)}),!0),_lyteUiUtils.registeredCustomElements["lyte-exptable-th"]||(_lyteUiUtils.registeredCustomElements["lyte-exptable-th"]=!0,Lyte.createCustomElement("lyte-exptable-th",{static:{observedAttributes:{get:function(){return["fixed","resize","icon"]}}},attributeChangedCallback:function(e,t,o){if("fixed"==e){for(var a=this;"DIV"!=a.tagName;)a=a.parentElement;"enable"==o?this.classList.add("lyteFixedColumn"):this.classList.remove("lyteFixedColumn"),this.checkIntersection("enable"==o)}else if("resize"==e){var r;if("enable"==o)(r=document.createElement("lyte-exptablehead-resize")).addEventListener("mousedown",this.resize),r.addEventListener("touchstart",this.resize),this.appendChild(r);else(r=this.getElementsByTagName("lyte-exptablehead-resize")[0])&&this.removeChild(r)}},checkIntersection:function(e){var t=$L(this).closest("lyte-expresstable").get(0);if(t.getData("ltPropStickyTable"))if(e&&!this._horizontalIntersectionDiv)this.createIntersection(t);else if(!e&&this._horizontalIntersectionDiv){var o=this._horizontalIntersectionDiv;this.removeIntersection(o,t),t.component.removeSticky(this),t.component.removeFixedClass(this)}},createIntersection:function(e){var t=$L(document.createElement("div")).addClass("lyteExpStickyInterSection").get(0);e.getElementsByTagName("lyte-exptable")[0].appendChild(t),this._horizontalIntersectionDiv=t,t._cell=this,e.component.setLeftForInterSection()},removeIntersection:function(e,t){t&&t.component._intersectionObs.unobserve(e),e.remove(),delete e._cell,delete this._horizontalIntersectionDiv},disconnectedCallback:function(){if(!Lyte.Component.shouldIgnoreDisconnect()){var e=this._horizontalIntersectionDiv;if(e){var t=$L(this).closest("lyte-expresstable").get(0);this.removeIntersection(e,t)}}},resize:function(e){var t=$L(e.target).closest("lyte-expresstable")[0];t.component.actions.tableResize.call(t.component,e)}})),Lyte.Component.register("lyte-accordion",{_template:'<template tag-name="lyte-accordion"> <lyte-yield yield-name="yield"> </lyte-yield> </template>',_dynamicNodes:[{type:"insertYield",position:[1]}],_observedAttributes:["ltPropDuration","ltPropHeight","ltPropExclusive","ltPropYield","ltPropDynamic","ltPropNested"],data:function(){return{ltPropDuration:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-accordion","duration","0.2s")}),ltPropHeight:Lyte.attr("string"),ltPropExclusive:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-accordion","exclusive",!0)}),ltPropYield:Lyte.attr("boolean",{default:!0}),ltPropDynamic:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-accordion","dynamic",!1)}),ltPropNested:Lyte.attr("boolean",{default:!1})}},toggleCurrentPanel:function(e){e.click()},moveToNextPanel:function(){var e=this.getAllHeaders(),t=e.length,o=this.getCurrentIndex(e);e[o+1===t?0:o+1].focus()},moveToPreviousPanel:function(){var e=this.getAllHeaders(),t=e.length,o=this.getCurrentIndex(e);e[o-1<0?t-1:o-1].focus()},getCurrentIndex:function(e){return e.indexOf(document.activeElement)},getAllHeaders:function(){for(var e,t=this.$node.querySelector("lyte-yield").children,o=[],a=0;a<t.length;a++)"LYTE-ACCORDION-ITEM"===t[a].tagName&&(e=t[a].querySelector("lyte-accordion-header"))&&o.push(e);return o},execAndCheck:function(e,t){var o,a;return o=_lyteAccordion.findProperParent(t.target).parentElement,a=null==(a=this.executeMethod(e,t,o,this))||a},initiateClose:function(e,t,o){var a=_lyteAccordion.findProperParent(o.target);e.parentElement._immediate?this.closeImmediately(e):window.requestAnimationFrame((function(){e.style.height=e.getBoundingClientRect().height+"px",window.requestAnimationFrame((function(){e.style.height="0px"}))})),e.style.overflow="hidden",e._close=!0,e.parentElement.classList.remove("lyteAccordionActive"),a.setAttribute("aria-expanded",!1),t&&t.call(this,o)},closeImmediately:function(e){e.style.transitionDuration="0s",e.style.height="0px"},execNonRetCalls:function(e){this.getMethods(e[0])&&this.executeMethod.apply(this,e)},isVisible:function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},scrollIntoView:function(e){if(e&&this.isVisible(e)&&e){var t,o=this.$node.getBoundingClientRect().height,a=this.$node.scrollTop+o,r=e.offsetTop,i=e.getAttribute("map"),s=r+e.getBoundingClientRect().height;a<s&&(this.$node.scrollTop=this.$node.scrollTop+(s-a)),t=window.requestAnimationFrame(this.scrollIntoView.bind(this,e)),Lyte.objectUtils(this.getData("rAFMap"),"add",i,t)}},dynamic:function(e){var t;e.style.height="auto",t=e.getBoundingClientRect().height,window.requestAnimationFrame((function(){e.style.height="0px",window.requestAnimationFrame((function(){e.style.height=t+"px"}))}))},static:function(e,t){var o=t.height;this.getData("heights")[e.getAttribute("map")].conf&&o?e.style.height=o:e.style.height=this.getData("heights")[e.getAttribute("map")].height},calculate:function(e,t){var o=this.getData("ltPropDynamic");e.parentElement.classList.add("lyteAccordionActive"),o?this.dynamic(e):this.static(e,t)},initiateOpen:function(e,t,o){var a;this.calculate(e,t),e._close=!1,e.style.overflow="hidden",e.parentElement.classList.add("lyteAccordionActive"),(a=_lyteAccordion.findProperParent(o.target)).setAttribute("aria-expanded","true"),this.scrollIntoView(e),this.execNonRetCalls(["onOpen",o,a.parentElement,this]),this.execNonRetCalls(["onChanged",o,a.parentElement,this])},didDestroy:function(){for(var e=this.$node.querySelectorAll("lyte-accordion-item"),t=0;t<e.length;t++)e[t].getAttribute("lyte-shortcut")&&e[t].setAttribute("lyte-shortcut",JSON.stringify({}))},cancelFrame:function(e,t){if(t.target===e){var o=e.getAttribute("map"),a=e._close,r=this.getData("ltPropDynamic");window.cancelAnimationFrame(this.getData("rAFMap")[o]),e.style.overflow=a?"hidden":"auto",r&&!a&&(e.style.height="auto"),window.clearTimeout(e._callbackId),e._callbackId=setTimeout(function(){a?this.execNonRetCalls(["onAfterClose",this]):this.execNonRetCalls(["onAfterOpen",this])}.bind(this),100)}},setEvent:function(e){e&&e.addEventListener("transitionend",this.cancelFrame.bind(this,e))},calculateHeight:function(e,t){var o=e.style.height;this.getData("heights")[t]={},o?(this.getData("heights")[t].height=o,this.getData("heights")[t].conf=!1):(this.getData("heights")[t].height=e.getBoundingClientRect().height-parseFloat(window.getComputedStyle(e).paddingTop)-parseFloat(window.getComputedStyle(e).paddingBottom)+"px",this.getData("heights")[t].conf=!0)},readHeights:function(){for(var e,t=this.$node.querySelector("lyte-yield").children,o=0,a=this.getData("ltPropDynamic");o<t.length;o++)"LYTE-ACCORDION-ITEM"===t[o].tagName&&(e=t[o].querySelector("lyte-accordion-body"))&&(this.setEvent(e),a||this.calculateHeight(e,o),t[o].classList.contains("lyteAccordionActive")&&this.getData("ltPropExclusive")&&(this.flag=o))},maintainHeightOrder:function(e,t){var o=this.getData("ltPropDynamic");e._close=!1,e.style.height=o?"auto":this.getData("heights")[t].conf&&this.getData("ltPropHeight")?this.getData("ltPropHeight"):this.getData("heights")[t].height},writeHeights:function(){for(var e,t,o=this.$node.querySelector("lyte-yield").children,a=this.getData("ltPropExclusive"),r=0;r<o.length;r++)"LYTE-ACCORDION-ITEM"===o[r].tagName&&(e=o[r].querySelector("lyte-accordion-body"))&&(e.setAttribute("map",r),o[r].classList.contains("lyteAccordionActive")?a&&this.flag!=r?(e._close=!0,o[r].classList.remove("lyteAccordionActive"),e.style.height="0px"):this.maintainHeightOrder(e,r):(e._close=!0,e.style.height="0px"),(t=_lyteAccordion.findHeader(e))&&t.setAttribute("aria-expanded",!e._close));this.didConnectCalled=!0},executeAfterRender:function(){this.execNonRetCalls(["afterRender",this])},attachScrolls:function(e){for(var t,o=this.$node.querySelector("lyte-yield"),a=e?[e]:o.children,r=0;r<a.length;r++)"LYTE-ACCORDION-ITEM"===a[r].tagName&&(t=a[r].querySelector("lyte-accordion-body"))&&(t.style.overflow="auto")},getAllHeights:function(){this.setData("heights",{}),$L.fastdom.measure(this.attachScrolls,this),$L.fastdom.measure(this.readHeights,this),$L.fastdom.mutate(this.writeHeights,this),$L.fastdom.measure(this.executeAfterRender,this)},didConnect:function(){this.setData("rAFMap",{}),this.getAllHeights()},nestedClassObserver:function(){var e=this.$node;this.getData("ltPropNested")?e.classList.add("lyteAccordionNested"):e.classList.remove("lyteAccordionNested")}.observes("ltPropNested").on("didConnect"),initializeItem:function(e){this.flag=void 0,this.getData("rAFMap")||this.setData("rAFMap",{}),this.attachScrolls(e),this.readItemHeight(e),this.writeItemHeight(e)},readItemHeight:function(e){var t=this.getItemIndex(e),o=this.getData("ltPropDynamic"),a=e.querySelector("lyte-accordion-body");a&&(this.setEvent(a),o||this.calculateHeight(a,t))},writeItemHeight:function(e){var t,o=e.querySelector("lyte-accordion-body"),a=this.getItemIndex(e),r=this.getData("ltPropExclusive");o&&(o.setAttribute("map",a),e.classList.contains("lyteAccordionActive")?r?((t=this.getOpenAccordion())&&t.close(),this.maintainHeightOrder(o,a)):this.maintainHeightOrder(o,a):(o._close=!0,o.style.height="0px"))},getOpenAccordion:function(){for(var e=this.$node.querySelector("lyte-yield").children,t=0;t<e.length;t++)if(!1===e[t].querySelector("lyte-accordion-body")._close)return e[t]},isAlreadyOpen:function(){for(var e=this.$node.querySelector("lyte-yield").children,t=0;t<e.length;t++)if(!1===e[t].querySelector("lyte-accordion-body")._close)return!0;return!1},getItemIndex:function(e){for(var t=0;e.previousElementSibling;)"LYTE-ACCORDION-ITEM"===(e=e.previousElementSibling).tagName&&t++;return t},getConfiguration:function(){var e={};return e.transition=this.getData("ltPropDuration"),e.height=this.getData("ltPropHeight"),e.exclusive=this.getData("ltPropExclusive"),e}});var _lyteAccordion={_lyteAccordionHeaderID:0,_lyteAccordionBodyID:0,generateHeaderID:function(){return"lyte_accordion_header_"+_lyteAccordion._lyteAccordionHeaderID++},generateBodyID:function(){return"lyte_accordion_body_"+_lyteAccordion._lyteAccordionBodyID++},findHeader:function(e){for(;e&&"LYTE-ACCORDION-HEADER"!==e.tagName;)e=e.previousElementSibling;return e},findProperParentS:function(e){for(var t,o,a=[],r=!1;"LYTE-YIELD"!=e.tagName&&"HTML"!=e.tagName;)if(t=e,a.push(e),!(e=e.parentElement))return null;for(o=a.length-1;o>-1;o--)if("LYTE-ACCORDION-HEADER"===a[o].tagName||1===a.length&&"LYTE-ACCORDION-ITEM"===a[o].tagName){r=!0;break}return r?t.children[0]:null},findProperParent:function(e){var t;if(e){for(;"LYTE-YIELD"!=e.tagName&&"HTML"!=e.tagName;)if(t=e,!(e=e.parentElement))return{};return"LYTE-ACCORDION-HEADER"===(t.children[0]||{}).tagName?t.children[0]:void 0}}};function stepResize(e){clearTimeout(window._stepresize),window._stepresize=setTimeout((function(){delete window._stepresize;for(var e=document.getElementsByTagName("lyte-step"),t=0;t<e.length;t++){var o=e[t].component;"advanced"==o.data.ltPropType&&o._measureWidth(o.constructForward)}}),0)}document.addEventListener("click",(function(e){var t,o,a,r,i,s,l,n,p,c,d,u,h,m=_lyteAccordion.findProperParentS(e.target),y=0;if(m){for(t=m;"HTML"!=t.tagName&&"LYTE-ACCORDION"!=t.tagName;)if(!(t=t.parentElement))return;if("HTML"!=t.tagName){for(a=(o=t.querySelector("lyte-yield")).children,r=!0;y<a.length;y++)if(a[y].querySelector("lyte-accordion-header")==m){r=!1;break}if(!r){if(i=o.children[y].querySelector("lyte-accordion-body"),n=(l=(s=o.parentElement.component).getConfiguration()).transition,!i||"LYTE-ACCORDION-BODY"!=i.tagName){if(l&&l.exclusive&&(p=s.$node.querySelector(".lyteAccordionActive"))&&(c=p.querySelector("lyte-accordion-body")))if(c.style.transitionDuration=n,s.getMethods("onBeforeClose")){if(!(d=s.execAndCheck("onBeforeClose",e)))return;s.initiateClose(c,(function(e){this.execNonRetCalls(["onClose",e,_lyteAccordion.findProperParent(e.target).parentElement,this])}),e)}else s.initiateClose(c,(function(e){this.execNonRetCalls(["onClose",e,_lyteAccordion.findProperParent(e.target).parentElement,this])}),e);return o.children[y].classList.contains("lyteAccordionActive")?o.children[y].classList.remove("lyteAccordionActive"):o.children[y].classList.add("lyteAccordionActive"),void $L.fastdom.measure((function(){s.execNonRetCalls(["onChanged",e,_lyteAccordion.findProperParent(e.target).parentElement,s])}))}if(u=window.getComputedStyle(i).height,n&&(i.style.transitionDuration=n,(p=s.$node.querySelector(".lyteAccordionActive"))&&(c=p.querySelector("lyte-accordion-body"))&&(c.style.transitionDuration=n)),h=s.$node.querySelector(".lyteAccordionActive"),l&&l.exclusive&&h&&h!=i.parentElement){if((c=h.querySelector("lyte-accordion-body"))&&s.getMethods("onBeforeClose")){if(!(d=s.execAndCheck("onBeforeClose",e)))return;s.initiateClose(c,(function(e){this.execNonRetCalls(["onClose",e,_lyteAccordion.findProperParent(e.target).parentElement,this])}),e)}else(c=h.querySelector("lyte-accordion-body"))&&s.initiateClose(c,(function(e){this.execNonRetCalls(["onClose",e,_lyteAccordion.findProperParent(e.target).parentElement,this])}),e);h.classList.contains("lyteAccordionActive")&&h.classList.remove("lyteAccordionActive")}if("0px"==u)if(s.getMethods("onBeforeOpen")){if(d=s.execAndCheck("onBeforeOpen",e),l=s.getConfiguration(),!d)return;s.initiateOpen(i,l,e)}else s.initiateOpen(i,l,e);else if(s.getMethods("onBeforeClose")){if(!(d=s.execAndCheck("onBeforeClose",e)))return;s.initiateClose(i,(function(e){var t=_lyteAccordion.findProperParent(e.target);this.execNonRetCalls(["onClose",e,t.parentElement,this]),this.execNonRetCalls(["onChanged",e,t.parentElement,this])}),e)}else s.initiateClose(i,(function(e){var t=_lyteAccordion.findProperParent(e.target);this.execNonRetCalls(["onClose",e,t.parentElement,this]),this.execNonRetCalls(["onChanged",e,t.parentElement,this])}),e)}}}}),!0),document.addEventListener("keydown",(function(e){var t,o=e.keyCode,a=document.activeElement,r=a;if("LYTE-ACCORDION-HEADER"===a.tagName&&(38===o||40===o||13===o||32===o)){for(;r&&"LYTE-ACCORDION"!==r.tagName&&"HTML"!==r.tagName;)r=r.parentElement;if("LYTE-ACCORDION"!==r.tagName)return;switch(t=r.component,e.preventDefault(),o){case 13:case 32:t.toggleCurrentPanel(a);break;case 38:t.moveToPreviousPanel();break;case 40:t.moveToNextPanel()}}})),_lyteUiUtils.registeredCustomElements["lyte-accordion-item"]||(_lyteUiUtils.registeredCustomElements["lyte-accordion-item"]=!0,Lyte.createCustomElement("lyte-accordion-item",{static:{observedAttributes:{get:function(){return["lyte-shortcut"]}}},connectedCallback:function(){var e=this,t=this;if(!this._hasConnectedCallbackFired){for(this._hasConnectedCallbackFired=!0;"HTML"!=t.tagName&&"LYTE-ACCORDION"!=t.tagName;)if(!(t=t.parentElement))return;"HTML"!=t.tagName&&(t=t.component,this.open=function(){e.classList.contains("lyteAccordionActive")||e.click()},this.close=function(t){e._immediate=t,e.classList.contains("lyteAccordionActive")&&e.click(),e._immediate=!1},t.didConnectCalled&&t.initializeItem(this))}},attributeChangedCallback:function(e,t,o,a){if("function"==typeof shortcut){if(!o)return;if(!(o=JSON.parse(o)).key)return;var r=o.key,i=o.type,s=o.wait;t||(t={}),shortcut.push({newKey:r,type:i,wait:s,oldKey:t.key,value:this})}}})),_lyteUiUtils.registeredCustomElements["lyte-accordion-header"]||(_lyteUiUtils.registeredCustomElements["lyte-accordion-header"]=!0,Lyte.createCustomElement("lyte-accordion-header",{static:{observedAttributes:{get:function(){return[]}}},connectedCallback:function(){var e=this.getAttribute("id");this.setAttribute("role","button"),this.hasAttribute("tabindex")||this.setAttribute("tabindex","0"),e||this.setAttribute("id",_lyteAccordion.generateHeaderID())}})),_lyteUiUtils.registeredCustomElements["lyte-accordion-body"]||(_lyteUiUtils.registeredCustomElements["lyte-accordion-body"]=!0,Lyte.createCustomElement("lyte-accordion-body",{static:{observedAttributes:{get:function(){return[]}}},connectedCallback:function(){var e=this.getAttribute("id"),t=_lyteAccordion.findHeader(this);this.setAttribute("role","region"),e||(e=_lyteAccordion.generateBodyID(),this.setAttribute("id",e)),t&&(t.setAttribute("aria-controls",e),this.setAttribute("aria-labelledby",t.getAttribute("id")))}})),Lyte.Component.register("lyte-svg",{_template:'<template tag-name="lyte-svg"> <svg class="{{ltPropClass}}" viewBox="{{ltPropViewBox}}"> <use id="{{ltPropId}}" xlink:href="{{lyteUiSetURL(ltPropPath,flag)}}"></use> </svg> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]}],_observedAttributes:["ltPropViewBox","ltPropClass","ltPropPath","ltPropId","flag"],data:function(){return{ltPropViewBox:Lyte.attr("string",{default:""}),ltPropClass:Lyte.attr("string",{default:""}),ltPropPath:Lyte.attr("string"),ltPropId:Lyte.attr("string",{default:""}),flag:Lyte.attr("boolean",{default:!1})}},didConnect:function(){this.setData("flag",!0)}}),Lyte.Component.register("lyte-step",{_template:'<template tag-name="lyte-step"> <div onclick="{{action(\'divClick\',event,this)}}"> <template is="if" value="{{expHandlers(ltPropType,\'!=\',&quot;advanced&quot;)}}"><template case="true"><template is="if" value="{{expHandlers(ltPropYield,\'==\',false)}}"><template case="true"> <lyte-step-structure class="{{ltPropClass}}" onclick="{{action(\'divClick\',event,this)}}"> <template is="for" items="{{ltPropData}}" item="array" index="indexVal"><template is="if" value="{{expHandlers(lyteUiIsObject(array),\'==\',false)}}"><template case="true"><template is="if" value="{{expHandlers(ltPropClass,\'==\',\'lyteStepBullet\')}}"><template case="true"> <lyte-step-item sporder="{{indexVal}}" onclick="{{action(\'onclick\',event,this,array)}}"> <lyte-step-body> {{array}} </lyte-step-body> <lyte-step-head>{{indexVal}}</lyte-step-head> </lyte-step-item> </template><template case="false"> <lyte-step-item sporder="{{indexVal}}" onclick="{{action(\'onclick\',event,this,array)}}"> <lyte-step-body> {{array}} </lyte-step-body> </lyte-step-item> </template></template></template><template case="false"><template is="if" value="{{expHandlers(ltPropClass,\'==\',\'lyteStepBullet\')}}"><template case="true"> <lyte-step-item sporder="{{indexVal}}" onclick="{{action(\'onclick\',event,this,array)}}"> <lyte-step-body> {{array[ltPropLabel]}} </lyte-step-body> <lyte-step-head>{{array[ltPropOption]}}</lyte-step-head> </lyte-step-item> </template><template case="false"> <lyte-step-item sporder="{{indexVal}}" onclick="{{action(\'onclick\',event,this,array)}}"> <lyte-step-body> {{array[ltPropLabel]}} </lyte-step-body> </lyte-step-item> </template></template></template></template></template> </lyte-step-structure> </template><template case="false"> <lyte-yield yield-name="yield"></lyte-yield> </template></template></template><template case="false"> <lyte-yield class="lyteStepAdvanced" yield-name="yield" lt-prop-content="{{dummyContent}}"></lyte-yield> </template></template> </div> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"text",position:[1,3,0]},{type:"componentDynamic",position:[1,3]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"text",position:[1,3,0]},{type:"componentDynamic",position:[1,3]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"insertYield",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]}},default:{}}],_observedAttributes:["ltPropClass","ltPropData","ltPropSelected","ltPropSkip","ltPropActiveClass","ltPropCompletedClass","ltPropWarningClass","ltPropKeepMarked","ltPropYield","ltPropLabel","ltPropOption","ltPropType","ltPropOffset","ltPropIndex","ltPropDataType","ltPropAria","ltPropAriaValue","dummyContent","widthArr","divWidth","forwardWidth","backwardWidth"],init:function(){this.getMethods("beforeRender")&&this.executeMethod("beforeRender",this.$node)},didDestroy:function(){delete this.$node.next,delete this.$node.previous,delete this.$node.goto,delete this._finalCallback,delete this._transEnd,clearTimeout(this._animetime)},didConnect:function(){var e="advanced"==this.getData("ltPropType");this.$node.next=function(e){this.$node.goto(this.data.ltPropSelected+1,e,!0)}.bind(this),this.$node.previous=function(e){this.$node.goto(this.data.ltPropSelected-1,e,!0)}.bind(this),e?(this.$node.goto=function(e,t,o){(this.getData("ltPropSkip")||o)&&this.moveTo(e,t,this.getData("ltPropSelected"))}.bind(this),this.$node.refreshStep=this._measureWidth.bind(this,this.constructForward)):this.$node.goto=function(e,t,o){if(this.component.getData("ltPropSkip")||o){var a=this.querySelectorAll("lyte-step-item"),r=this.component.getData("ltPropSelected"),i=this.component.getData("ltPropWarningClass"),s=a[r],l=this.component.getData("ltPropCompletedClass"),n=this.component.getData("ltPropActiveClass");e>=-1&&a.length&&("incomplete"==t?s.classList.add(i):s.classList.add(l),s.classList.remove(n),e==a.length?e--:-1==e&&e++,a[e].classList.add(n),e==r?(s.classList.remove(i),s.classList.remove(l)):this.component.setData("ltPropSelected",e))}},$L.fastdom.measure(function(){var e=_lyteUiUtils.getRTL();$L.fastdom.mutate(function(){e&&this.$node.classList.add("lyteRTL"),this.breadcrumbClass.call(this)}.bind(this))}.bind(this)),e?this.getMethods("afterRender")&&(this._finalCallback=this.executeMethod.bind(this,this.$node)):this.getMethods("afterRender")&&this.executeMethod("afterRender",this.$node),this._transEnd=this.transfade.bind(this)},selectedElementFindObs:function(e){if("advanced"!=this.getData("ltPropType"))$L.fastdom.mutate(this.selectedElementFind.bind(this));else if(e&&!this._preventselect){this.$node.goto(e.newValue,"",!0);var t=this.getData("ltPropIndex");(e.newValue<t||e.newValue>t+this.getData("dummyContent").length)&&(this._enableAnimate=!0,this.setData("ltPropIndex",e.newValue))}}.observes("ltPropSelected").on("didConnect"),selectedElementFind:function(){var e=parseInt(this.getData("ltPropSelected")),t=this.getData("ltPropActiveClass"),o=$L("lyte-step-item",this.$node),a=this.getData("ltPropCompletedClass"),r=this.getData("ltPropWarningClass");if(o.length){for(var i=this.getData("ltPropKeepMarked")?e:o.length-1,s=0;s<o.length;s++)o.eq(s).removeClass(t),this.data.ltPropAria&&o.eq(s).find("a").removeAttribute("aria-current");o.eq(e).addClass(t).removeClass(r,a),this.data.ltPropAria&&o.eq(e).find("a").attr("aria-current",this.data.ltPropAriaValue);for(var l=0;l<=i;l++)l<e?o.eq(l).hasClass(r)||o[l].classList.add(a):l>e&&o.eq(l).removeClass(r,a)}},ArrayContentChangeObs:function(){this.ArrayContentChange.call(this)}.observes("ltPropData.[]","ltPropData"),ArrayContentChange:function(){null==this.getData("ltPropSelected")?this.setData("ltPropSelected",0):this.selectedElementFind.call(this)},breadcrumbClassObs:function(){this.breadcrumbClass.call(this)}.observes("ltPropClass"),breadcrumbClass:function(){"advanced"!=this.getData("ltPropType")&&this.data.ltPropYield&&this.data.ltPropClass&&this.$node.querySelector("lyte-step-structure").classList.add(this.data.ltPropClass)},data:function(){return{ltPropClass:Lyte.attr("string",{default:"lyteStepSlash"}),ltPropData:Lyte.attr("array",{default:[]}),ltPropSelected:Lyte.attr("number",{default:0}),ltPropSkip:Lyte.attr("boolean",{default:!0}),ltPropActiveClass:Lyte.attr("string",{default:"lyteActive"}),ltPropCompletedClass:Lyte.attr("string",{default:"lyteCompleted"}),ltPropWarningClass:Lyte.attr("string",{default:"lyteWarning"}),ltPropKeepMarked:Lyte.attr("boolean",{default:!1}),ltPropYield:Lyte.attr("boolean",{default:!1}),ltPropLabel:Lyte.attr("string",{default:""}),ltPropOption:Lyte.attr("string",{default:""}),ltPropType:Lyte.attr("string",{default:void 0}),ltPropOffset:Lyte.attr("number",{default:0}),ltPropIndex:Lyte.attr("number",{default:0}),ltPropDataType:Lyte.attr("array",{default:[]}),ltPropAria:Lyte.attr("boolean",{default:!1}),ltPropAriaValue:Lyte.attr("string",{default:"step"}),dummyContent:Lyte.attr("array",{default:[]}),widthArr:Lyte.attr("array",{default:[]}),divWidth:Lyte.attr("number",{default:0}),forwardWidth:Lyte.attr("number",{default:0}),backwardWidth:Lyte.attr("number",{default:0})}},actions:{onclick:function(e,t,o){if((1==e.ctrlKey||1==e.metaKey||2==e.which)&&null!=e.target.href&&-1!=e.target.href.indexOf("javascript:")&&"_blank"==e.target.target)return!1;this.getMethods("onClick")&&(this.executeMethod("onClick",t,this.$node,e,o),e.stopPropagation())},divClick:function(e,t){if("advanced"!=this.getData("ltPropType")){if((1==e.ctrlKey||1==e.metaKey||2==e.which)&&null!=e.target.href&&-1!=e.target.href.indexOf("javascript:")&&"_blank"==e.target.target)return!1;if(this.getMethods("onClick")&&this.getData("ltPropYield"))for(var o=e.target.correspondingElement||e.target;o&&o!=t;){if("LYTE-STEP-ITEM"==o.tagName){this.executeMethod("onClick",o,this.$node,e,o.getAttribute("data-value"));break}o=o.parentNode}}else{if(this._transstart)return;var a=$L(e.target).closest("lyte-step-forward");if(a.length){if(this.getMethods("onBeforeNavigate")&&0==this.executeMethod("onBeforeNavigate","forward",this.getData("ltPropIndex"),this.$node))return;this._enableAnimate=!0,this.setData("ltPropIndex",Math.max(0,this.getData("ltPropIndex")+this.getData("dummyContent").length)),this.getMethods("onNavigate")&&(this._finalCallback=this.executeMethod.bind(this,"onNavigate","forward",this.getData("ltPropIndex"),this.$node))}else if((a=$L(e.target).closest("lyte-step-backward")).length){if(this.getMethods("onBeforeNavigate")&&0==this.executeMethod("onBeforeNavigate","backward",this.getData("ltPropIndex"),this.$node))return;this._transstart=!0,this._transendback=this.constructBackward,$L("lyte-step-structure",this.$node).on("transitionend",this._transEnd).addClass("lyteStepFade"),this.timeout(),this.getMethods("onNavigate")&&(this._finalCallback=this.executeMethod.bind(this,"onNavigate","backward",this.getData("ltPropIndex"),this.$node))}else{if((1==e.ctrlKey||1==e.metaKey||2==e.which)&&null!=e.target.href&&-1!=e.target.href.indexOf("javascript:")&&"_blank"==e.target.target)return!1;(a=$L(e.target).closest("lyte-step-item")).length&&this.getMethods("onClick")&&this.executeMethod("onClick",a.get(0),this.$node,e,a.attr("data-value"))}}}},forwardAdd:function(e,t,o,a,r,i){for(var s=e;s<t.length;s++){if(a+t[s]>o){s--;break}a+=t[s],r.push(i[s])}return{consWid:a,i:s}},backwardAdd:function(e,t,o,a,r,i){for(var s=e-1;s>=0&&!(a+t[s]>o);s--)a+=t[s],r.unshift(i[s]),e=s;return{consWid:a,min:e}},constructBackward:function(e,t){e=e||$L("lyte-step-forward").get(0),t=t||$L("lyte-step-backward").get(0);var o,a=this.getData("ltPropData"),r=Math.min(a.length,this.getData("ltPropIndex")+this.getData("ltPropOffset")),i=0,s=[],l=this.getData("widthArr"),n=this.getData("forwardWidth"),p=this.getData("backwardWidth"),c=this.getData("divWidth");(i+=p,i=(o=this.backwardAdd(r,l,c,i,s,a)).consWid,0==(r=o.min)&&(i-=p,t&&t.classList.add("lyteStepHidden")),i<c)&&(i=(o=this.forwardAdd(r+s.length,l,c,i,s,a)).consWid);if(r+s.length<a.length)for(e&&e.classList.remove("lyteStepHidden"),i+=n;i>c&&s.length;)i-=l[r+s.length],s.pop();this._prevent=!0,this.setData("ltPropIndex",r),delete this._prevent,this._arr=s,this.transend()},transend:function(){this.setData("dummyContent",this._arr),delete this._arr,this._finalCallback&&(this._finalCallback(),delete this._finalCallback),this.moveTo(this.getData("ltPropSelected"),"",this.getData("ltPropSelected"),this.getData("ltPropIndex")+this.getData("dummyContent").length==this.getData("ltPropData").length),$L(".lyteStepFade",this.$node).removeClass("lyteStepFade")},constructForward:function(e,t){e=e||$L("lyte-step-forward").get(0),t=t||$L("lyte-step-backward").get(0);var o=Math.max(0,this.getData("ltPropIndex")-this.getData("ltPropOffset")),a=0,r=[],i=this.getData("widthArr"),s=this.getData("forwardWidth"),l=this.getData("backwardWidth"),n=this.getData("divWidth"),p=this.getData("ltPropData");0!=o?(a+=l,t&&t.classList.remove("lyteStepHidden")):t&&t.classList.add("lyteStepHidden");var c=this.forwardAdd(o,i,n,a,r,p),d=c.i;if(a=c.consWid,d<i.length){for(;a+s>n&&d;)a-=i[d],d--,r.pop();e&&e.classList.remove("lyteStepHidden")}else e&&e.classList.add("lyteStepHidden"),a<n&&(a=(c=this.backwardAdd(o,i,n,a,r,p)).consWid,o=c.min),0==o&&this.getData("ltPropIndex")&&(a-=l,a=this.forwardAdd(o+r.length,i,n,a,r,p));this._prevent=!0,this.setData("ltPropIndex",o),delete this._prevent,this._arr=r,this.transend()},measureWidth:function(){"advanced"==this.getData("ltPropType")&&this._measureWidth(this.constructForward)}.on("didConnect"),indexObs:function(e){this._prevent||(this._enableAnimate?(this._transstart=!0,delete this._enableAnimate,this.timeout(),$L("lyte-step-structure",this.$node).on("transitionend",this._transEnd).addClass("lyteStepFade")):this._measureWidth(this.constructForward))}.observes("ltPropIndex","ltPropData","ltPropData.[]"),_measureWidth:function(e){if("advanced"==this.getData("ltPropType")){var t=[],o=this.getData("ltPropData");this.setData("dummyContent",o);var a=$L("lyte-step-forward").get(0),r=$L("lyte-step-backward").get(0);a&&a.classList.remove("lyteStepHidden"),r&&r.classList.remove("lyteStepHidden"),$L.fastdom.measure(function(){for(var o=$L("lyte-step-item",this.$node),i=0;i<o.length;i++){var s=window.getComputedStyle(o.get(i));t[i]=o.get(i).getBoundingClientRect().width+parseFloat(s.marginLeft)+parseFloat(s.marginRight)}var l=this.$node.querySelector("lyte-step-structure").getBoundingClientRect().width,n=0,p=0;if(a){n=a.getBoundingClientRect().width;var c=getComputedStyle(a);n+=parseFloat(c.marginRight)+parseFloat(c.marginLeft)}if(r){p=r.getBoundingClientRect().width;c=getComputedStyle(r);p+=parseFloat(c.marginRight)+parseFloat(c.marginLeft)}this.setData({divWidth:l,widthArr:t,forwardWidth:n,backwardWidth:p}),$L.fastdom.mutate(e.bind(this,a,r))}.bind(this))}},moveTo:function(e,t,o,a){this._preventselect=!0;var r=this.getData("ltPropData"),i=(this.getData("dummyContent"),this.getData("ltPropIndex")),s=this.getData("ltPropDataType"),l=$L("lyte-step-item",this.$node),n=this.getData("ltPropActiveClass"),p=this.getData("ltPropCompletedClass"),c=this.getData("ltPropWarningClass"),d=this.getData("ltPropKeepMarked");if(a&&l.eq(-1).addClass("lyteStepLast"),e=Math.min(Math.max(0,e||0),r.length-1),null==o){for(var u=0;u<r.length;u++)"active"==s[u]&&(o=u);null==o&&(this.setData("ltPropSelected",0),o=0)}for(u=0;u<r.length;u++){var h,m=null==s[u]?"insertAt":"replaceAt";h=e!=o&&e>o&&u>=o&&u<e?"incomplete"==t?"incomplete":"completed":u==e?"active":u>e?d&&s[u]||"":u>o?"incomplete"==t?"incomplete":"completed":("active"==s[u]?"completed":s[u])||"completed",Lyte.arrayUtils(s,m,u,h),u>=i&&("active"==s[u]?l.eq(u-i).removeClass(p,c).addClass(n):"incomplete"==s[u]?l.eq(u-i).removeClass(p,n).addClass(c):"completed"==s[u]?l.eq(u-i).removeClass(n,c).addClass(p):l.eq(u-i).removeClass(p,n,c),this.data.ltPropAria&&("active"==s[u]?l.eq(u-i).find("a").attr("aria-current",this.data.ltPropAriaValue):l.eq(u-i).find("a").removeAttr("aria-current")))}this.setData("ltPropSelected",e),delete this._preventselect},transfade:function(){clearTimeout(this._animetime),delete this._animetime,delete this._transstart,this._measureWidth(this._transendback||this.constructForward),delete this._transendback,$L(".lyteStepFade",this.$node).off("transitionend")},returntran:function(e){var t=0;if(/(.+)(s|ms)$/.test(e)){var o=e.match(/(.+)(s|ms)$/);t=parseFloat(o[1])*("s"==o[2]?1e3:1)}return t},timeout:function(){var e=$L("lyte-step-structure",this.$node).get(0),t=window.getComputedStyle(e);this._animetime=setTimeout(this._transEnd,10+this.returntran(t.transitionDuration)+this.returntran(t.transitionDelay))}}),window.addEventListener("resize",stepResize,!0),window.addEventListener("orientationchange",stepResize,!0),function(){if(lyteDomObj){var e=navigator.userAgent,t={uA:e,isUbuntu:/ubuntu/gi.test(e),isIpad:/ipad/gi.test(e),safari:/safari/gi.test(e),isIE11Lyte:/rv:11/gi.test(e),isEdgeLyte:/Edge/gi.test(e),mode:{},chrome:!!window.chrome,firefox:/firefox/gi.test(e)};function o(e,t,o){var a,r=document.createElement("div");return r.className=e,r._scrolldiv=this,r.style.visibility="hidden",(a=document.createElement("div")).classList.add("lyteScrollDiv"),t.handlerClass&&a.classList.add(t.handlerClass),t.containerClass&&r.classList.add(t.containerClass),r.appendChild(a),o?(a._direction=o,t.horizontalContainerClass&&r.classList.add(t.horizontalContainerClass),t.horizontalHandlerClass&&a.classList.add(t.horizontalHandlerClass),this._horiDiv=r):(t.verticalContainerClass&&r.classList.add(t.verticalContainerClass),t.verticalHandlerClass&&a.classList.add(t.verticalHandlerClass),this._vertDiv=r),this.parentElement.appendChild(r),r.addEventListener("click",d,!0),a.addEventListener("mousedown",u),this._infiniteScroll||a.addEventListener("touchstart",u),r}function a(e,t,o){e.style[t]!=o&&(e.style[t]=o)}function r(e){for(var t,o=(e=e||{target:this}).target.correspondingElement||e.target;o&&o!=this;){if(o.classList.contains("preventWheel")){t=!0;break}o=o.parentElement}return t}function i(e,t,o,r,i){var s;if(i=i||{},fn=function(e){a(e,"visibility","hidden"),e.classList.remove("visible")},e.scroll)t&&fn(t);else{var l="scroll"==this._scrollData.showOn;-1!=["mouseenter","touchstart"].indexOf(i.type)&&l||(this._enableScroll=!e.frm_reset,!t||l&&e.frm_reset||(clearTimeout(t._entertimeout),clearTimeout(t._leavetimeout),delete t._entertimeout,delete t._leavetimeout,e.scrollbar?fn(t):("touchstart"==i.type?t._entertimeout=setTimeout(a.bind(this,t,"visibility","visible"),150):a(t,"visibility","visible"),t.classList.add("visible"),_.call(this,r,void 0,{},o)))),s=!0}return s}function s(e){this.removeEventListener("wheel",s,!0),this.classList.contains("eventBinded")||n.call(this,{type:"mouseenter"}),e.preventDefault()}function l(e){var t={};return["x","y","bottom","height","top","width","left","right"].forEach((function(o){t[o]=Math.round(e[o])})),t}function n(e,t){if(!(this.classList.contains("eventBinded")&&1!=e||"mouseenter"==e.type&&this._prtmseenr)){var o,a={scrollLeft:this.scrollLeft,scrollTop:this.scrollTop,scrollWidth:this.scrollWidth,scrollHeight:this.scrollHeight,bcr:l(this.getBoundingClientRect())};if(this._wheelObj=a,this.classList.contains("lyteTableScroll")&&L.call(this,a),this._direction=getComputedStyle(this).direction,a.vertbcr=this._vertDiv?this._vertDiv.getBoundingClientRect():{},a.horbcr=this._horiDiv?this._horiDiv.getBoundingClientRect():{},o=i.call(this,y.call(this,!0,a,t),this._vertDiv,a,!0,e),(o=i.call(this,y.call(this,!1,a,t),this._horiDiv,a,!1,e)||o)&&e){if(this._mouseleave=this._mouseleave||c.bind(this.parentElement),"touchstart"==e.type){if(1!=e.touches.length)return;clearTimeout(this._tchtime),document.addEventListener("touchcancel",this._mouseleave,!0)}else this.addEventListener("wheel",f,!0),this.addEventListener("keydown",p,!0),"scroll"==this._scrollData.showOn&&this.addEventListener("mousemove",D,!0);this._allowTouch=!0,document.addEventListener("touchend",this._mouseleave,!0),this.classList.add("eventBinded"),this._tabindex=null==this._tabindex?this.tabIndex:this._tabindex,-1==this.tabIndex&&(this.tabIndex=0)}}}function p(e){if(e.target==this){var o=e.keyCode,a={scrollLeft:this.scrollLeft,scrollTop:this.scrollTop,scrollWidth:this.scrollWidth,scrollHeight:this.scrollHeight,bcr:this.getBoundingClientRect()};if(-1!=[37,38,39,40].indexOf(o)){var r,i,s=this._scrollData.keyStep,l=e.metaKey||e.ctrlKey,n=this._direction;if(38==o)r=l?-a.scrollTop:-s,i=!0;else if(40==o)r=l?a.scrollHeight-a.scrollTop:s,i=!0;else if(39==o){var p;if("rtl"==n)p=t.isIE11Lyte||t.isEdgeLyte?a.scrollWidth-a.scrollLeft:t.firefox||t.safari?-a.scrollLeft:a.scrollWidth-a.bcr.width,r=l?p:s;else r=l?a.scrollWidth-a.bcr.width:s}else r="rtl"==n&&(t.firefox||t.safari)?l?a.bcr.width-a.scrollWidth:-s:l?-a.scrollLeft:-s;0!=r&&g.call(this,a,i,r)&&(this[i?"scrollTop":"scrollLeft"]+=r,b.call(this,e),e.preventDefault())}}}function c(e){if(!((e=e||{}).relatedTarget&&this.contains(e.relatedTarget)||document._scrollmouseup)){if("touchend"==e.type){var t=e.target.correspondingElement||e.target;if(t&&t.classList.contains("lyteScrollContainer"))return}var o=$L(this).children(".lyteScrollContainer"),r=this._scrolldiv;if(o.length){for(var i=0;i<o.length;i++)clearTimeout(o[i]._entertimeout),clearTimeout(o[i]._leavetimeout),delete o[i]._entertimeout,delete o[i]._leavetimeout,o[i].classList.remove("visible"),"touchend"==e.type?o[i]._leavetimeout=setTimeout(a.bind(this,o[i],"visibility","hidden"),150):o[i].style.visibility="hidden";"mouseleave"==e.type?(r.removeEventListener("wheel",f,!0),r.removeEventListener("keydown",p,!0),r.removeEventListener("mousemove",D,!0),r.addEventListener("wheel",s,!0)):"touchend"!=e.type&&"touchcancel"!=e.type||(r._prtmseenr=!0,r._tchtime=setTimeout((function(){delete r._prtmseenr}),500),document.removeEventListener("touchcancel",r._mouseleave,!0)),e.type&&(document.removeEventListener("touchend",r._mouseleave,!0),delete r._allowTouch,r.classList.remove("eventBinded"),delete r._wheelObj,delete r._prevPosY,delete r._mouseleave,delete r._prevPosX,delete r._wheelEvt),delete this._scrolldiv._enableScroll}}}function d(e){if(this.classList.contains("visible")){if("touchmove"==e.type){if(e.touches.length>1)return;e.preventDefault(),e=e.touches[0]}var t,o=this._scrolldiv,a=this.children[0],r=this.getBoundingClientRect(),i=a.getBoundingClientRect(),s={scrollLeft:o.scrollLeft,scrollTop:o.scrollTop,scrollWidth:o.scrollWidth,scrollHeight:o.scrollHeight,bcr:o.getBoundingClientRect()},l="width",n="left",p="scrollLeft",c="scrollWidth",d="clientX";this.classList.contains("lyteTableScroll")&&!s.$nodeClient&&L.call(this,s),s.vertbcr=this._vertDiv?this._vertDiv.getBoundingClientRect():{},s.horbcr=this._vertDiv?this._horiDiv.getBoundingClientRect():{},a._direction||(!0,l="height",n="top",p="scrollTop",c="scrollHeight","bottom",d="clientY"),t=("click"!=e.type?e[d]-(this.prev||e[d]):e[d]-(i[n]+i[l]/2))/(s.bcr[l]+s.bcr[n]-r[n])*s[c],o[p]+=t,b.call(o,e),this.prev=e[d]}}function u(e){var t="touchstart"==e.type;document._scrollmousemove=d.bind(this.parentNode),document._scrollmouseup=h.bind(this.parentNode),document.addEventListener(t?"touchmove":"mousemove",document._scrollmousemove,!0),document.addEventListener(t?"touchend":"mouseup",document._scrollmouseup,!0),e.preventDefault(),e.stopPropagation()}function h(e){var t="touchend"==e.type;document.removeEventListener(t?"touchmove":"mousemove",document._scrollmousemove,!0),document.removeEventListener(t?"touchend":"mouseup",document._scrollmouseup,!0),delete document._scrollmousemove,delete document._scrollmouseup,delete this.prev,this._scrolldiv.contains(e.target.correspondingElement||e.target)||"always"==this._scrolldiv._scrollData.showOn||c.call(this._scrolldiv.parentElement,{type:"mouseleave"})}function m(e){document._scrollmouseup||(document._scrollmouseup=h.bind(this.parentElement),document.addEventListener("mouseup",document._scrollmouseup,!0))}function y(e,t,o){var a="scrollTop",r="scrollHeight",s="height",l=e?this._vertDiv:this._horiDiv,n=this._scrollData,p=n.scrollYMarginOffset;return e||(a="scrollLeft",r="scrollWidth",s="width",p=n.scrollXMarginOffset),t[a]+t.bcr[s]>=t[r]&&0==t[a]?(l&&l.classList.contains("visible")&&i.call(this,{scroll:!0,scrollbar:!0},l),{scroll:!0,scrollbar:!0,frm_reset:o}):{scroll:!1,scrollbar:t[r]-t.bcr[s]<=p,frm_reset:o}}function f(e){if(!r.call(this,e))if("touchmove"==e.type){if(this._allowTouch&&1==e.touches.length){var t=e.touches[0];P.call(this,e,[(this._prevPosX||t.clientX)-t.clientX,(this._prevPosY||t.clientY)-t.clientY]),this._prevPosY=t.clientY,this._prevPosX=t.clientX}}else P.call(this,e)}function g(e,o,a){var r="scrollTop",i="scrollHeight",s="height";o?this._vertDiv:this._horiDiv;return o||(r="scrollLeft",i="scrollWidth",s="width"),!(a>0&&Math.round(e[r]+e.bcr[s])>=e[i]||a<0&&Math.round(-e[r]+e.bcr[s])>=e[i])&&(!!(!o&&t.firefox&&"rtl"==this._direction&&a<0&&0==e[r])||!(a<0&&0==e[r]&&!(a<0&&t.safari&&"rtl"==this._direction&&0==e[r])))}function v(e){var o=this._scrollData,a=o.min,r=o.max,i=o.wheelSpeed,s=i,l=t.uA.toLowerCase(),n=this._infiniteScroll,p=t.isIE11Lyte;-1==l.indexOf("edge")&&-1==l.indexOf("trident")&&-1==l.indexOf("msie")||"rtl"!=this._direction||(i*=-1);var c,d,u=e.deltaMode&&1==e.deltaMode;return e.deltaX>0?c=Math.max(u?6*e.deltaX:e.deltaX,n?0:4):e.deltaX<0&&(c=Math.min(n?0:-4,u?6*e.deltaX:e.deltaX)),e.deltaY>0?d=Math.min(r,Math.max(u?6*e.deltaY:e.deltaY,n?0:4),p?20:1/0):e.deltaY<0&&(d=Math.max(a,Math.min(n?0:-4,u?6*e.deltaY:e.deltaY),p?-20:-1/0)),[c*i,d*s]}function x(e,t){for(var o=e.target;o!=this;){var a=o.scrollTop,r=o.scrollHeight,i=o.offsetHeight,s=window.getComputedStyle(o),l=/scroll|auto/i.test(s.overflowY)||o.classList.contains("lyteScrollBar")&&/hidden/i.test(s.overflowY);if(i<r)if(t){if(i+a<r&&l)return!0}else if(a&&l)return!0;o=o.parentNode}}function P(e,o){var a,r,i=o||v.call(this,e),s=i[0]||0,p=i[1]||0,d=!1,u=this._wheelObj||{},h=this.classList.contains("lyteTableScroll");if(Math.abs(o?s:e.deltaX||0)<Math.abs(o?p:e.deltaY||0)&&(d=!0),!(this._scrollData.nested&&d&&x.call(this,e,p>0))){if("scroll"==this._scrollData.showOn){if(!this._enableScroll)return n.call(this,!0),void e.preventDefault();clearTimeout(this._scrollplugin),this._scrollplugin=setTimeout(c.bind(this.parentElement,{}),this._scrollData.tOut)}if(this._scrollEnd&&(u={scrollLeft:this.scrollLeft,scrollTop:this.scrollTop,scrollWidth:this.scrollWidth,scrollHeight:this.scrollHeight,bcr:l(this.getBoundingClientRect())},this._wheelObj=u,this.classList.contains("lyteTableScroll")&&L.call(this,u)),this._wheelObj){if((a=y.call(this,d,u)).scroll&&d&&(!this._vertDiv||this._vertDiv&&!this._vertDiv.classList.contains("visible"))||a.scroll&&!d&&(!this._horiDiv||this._horiDiv&&!this._horiDiv.classList.contains("visible")))return;if(r=g.call(this,u,d,d?p:s),!this._infiniteScroll&&!r)return void(this._scrollData.preventOnEnd&&e.preventDefault());e.preventDefault(),!r&&h&&d&&this.comp.scrollTable.call(this.comp,{yScroll:p},this._wheelObj)}d?t.isIE11Lyte?this._wheelObj&&(this._wheelObj.scrollTop=Math.max(Math.min(this._wheelObj.scrollTop+p,this._wheelObj.scrollHeight-this._wheelObj.bcr.height),0),h&&(e.yScroll=p,this.comp.scroll.call(this,e)),this.scrollTop+=p):t.isIE11Lyte||(this.scrollTop+=p):t.isIE11Lyte?this._wheelObj&&(this._wheelObj.scrollLeft=Math.max(Math.min(this._wheelObj.scrollLeft+s,this._wheelObj.scrollWidth-this._wheelObj.bcr.width),0),h&&(e.xScroll=s,this.comp.scroll.call(this,e)),this.scrollLeft+=s):this.scrollLeft+=s,(t.safari||t.isIE11Lyte||t.isIpad)&&(this._alive=!0,clearTimeout(this._alivetime),this._alivetime=setTimeout(function(){delete this._alive,delete this._alivetime}.bind(this),16),this._scrollFun.call(this,e))}}function b(e){var o,a,r=t.isIE11Lyte||t.safari||t.isIpad,i=t.isIE11Lyte;if(r&&e&&"scroll"==e.type&&this._alive&&!e._byFunc)C.call(this,t.mode.a,t.mode.b,this._wheelObj||{bcr:{}},e);else{var s={scrollLeft:this.scrollLeft,scrollTop:this.scrollTop,scrollWidth:this.scrollWidth,scrollHeight:this.scrollHeight,bcr:this.getBoundingClientRect()};this._wheelObj=s,this.classList.contains("lyteTableScroll")&&L.call(this,s),this.prevScrlLeft!=s.scrollLeft&&(o=s.scrollLeft-(this.prevScrlLeft||0),a=0,_.call(this,!1,o,e,s)),this.prevScrlTop!=s.scrollTop&&(a=s.scrollTop-(this.prevScrlTop||0),o=0,_.call(this,!0,a,e,s)),t.mode.b=a,t.mode.a=o,i&&(!r||this._alive&&!e._byFunc)||this.classList.contains("lyteTableScroll")&&this.comp.scroll.call(this,e)}}function D(e){clearTimeout(this._scrollplugin),this._scrollplugin=setTimeout(c.bind(this.parentElement),500)}function L(e){var t=this.comp.$node.getElementsByTagName("lyte-th");if(this._infiniteScroll){e.$nodeClient=this.parentElement.getBoundingClientRect();var o=this.getElementsByClassName("lytePreventInfiniteScroll");e.neglected=[];for(var a=0;a<o.length;a++)o[a].classList.contains("lyteHidden")||e.neglected.push(o[a]);if(e.compNeg=o,null!=this.comp._top){e.topElem=[];for(var r=this.getElementsByTagName("lyte-tbody")[0],i=r.getElementsByTagName("lyte-tr"),s=0;s<i.length;s++)i[s].classList.contains("dummy")||e.topElem.push(i[s]);e.topElem=e.topElem[this.comp._top+e.compNeg.length],e.topElemClient=e.topElem?this.comp.topElem(e.topElem):{},e.bottmElem=r.querySelector("lyte-tr:nth-of-type("+(this.comp._bottom+1+e.compNeg.length)+")"),e.bottmElemClient=e.bottmElem?this.comp.topElem(e.bottmElem):{},e.tbody=r,e.tbodyClient=e.tbody?e.tbody.getBoundingClientRect():{}}}e.scrollDivClient=e.bcr;for(var l=0;l<t.length;l++)t[l].property=t[l].getBoundingClientRect(),t[l].order=l;e.calculated=!0}function C(e,o,a,r){delete this._scrollEnd,(Math.ceil(a.scrollLeft+a.bcr.width+this._scrollData.offset.x)>=a.scrollWidth&&("rtl"!=this._direction||!t.chrome)||(t.firefox||t.safari)&&"rtl"==this._direction&&Math.ceil(-a.scrollLeft+a.bcr.width+this._scrollData.offset.x)>=a.scrollWidth||"rtl"==this._direction&&t.chrome&&a.scrollLeft==this._scrollData.offset.x)&&(r.horiScrollEnd=!0),Math.ceil(a.scrollTop+a.bcr.height+this._scrollData.offset.y)>=a.scrollHeight&&(this._scrollEnd=r.vertScrollEnd=!0),r.yScroll=o,r.xScroll=e,r._byPlugin=!0,this._wheelObj=a}function _(e,o,r,i){if(0!=parseInt(Math.abs(o))&&(!e||this._vertDiv)&&(e||this._horiDiv)){var s=this[e?"_vertDiv":"_horiDiv"],l=i[e?"vertbcr":"horbcr"]||s.getBoundingClientRect(),n=s.children[0],p="scrollTop",c="scrollHeight",d="height",u="top",h=this._direction;e||(p="scrollLeft",c="scrollWidth",d="width",u="left");var m=(i.bcr[d]-(l[u]-i.bcr[u]))/i[c],y=i[p]/i[c],f=this._scrollData.minLength,g=f?"auto"!=f?f:0:.1*i.bcr[d];a(n,d,Math.max(m*i.bcr[d],g).toFixed(3)+"px"),"rtl"==h&&n._direction?t.safari&&(_lyteUiUtils.isNegativeScroll()||!window.chrome)||t.firefox?a(n,"transform","translateX("+i[p]/i[c]*100*i.bcr[d]/parseFloat(Math.max(m*i.bcr[d],g).toFixed(3))+"%)"):a(n,"transform","translateX("+-(i[c]-i.bcr[d]-i[p])/i[c]*100*i.bcr[d]/parseFloat(Math.max(m*i.bcr[d],g).toFixed(3))+"%)"):a(n,"transform",(e?"translateY":"translateX")+"("+y*(i.bcr[d]-(l[u]-i.bcr[u])-Math.max(0,g-m*i.bcr[d]))+"px)"),this.prevScrlLeft=i.scrollLeft,this.prevScrlTop=i.scrollTop,r.type&&C.call(this,e?0:o,e?o:0,i,r)}}function S(){for(var e=0;e<this.length;e++){var t=this[e],o=t.parentElement;if(o){t._scrollData&&delete t._scrollData;for(var a=o.querySelectorAll("div.lyteScrollContainer"),r=0;r<a.length;r++)a[r].parentElement==o&&(delete a[r]._entertimeout,delete a[r]._leavetimeout,o.removeChild(a[r]));t.classList.remove("lyteScrollBar","eventBinded"),t.removeEventListener("mouseenter",n,!0),t.removeEventListener("wheel",s,!0),t.removeEventListener("touchstart",n,!0),o.removeEventListener("mouseleave",c,!0),t.removeEventListener("mousedown",m),t.removeEventListener("touchmove",f,{passive:!1}),t.removeEventListener("scroll",b,!0),clearTimeout(t._tchtime),t._mouseleave&&(document.removeEventListener("touchcancel",t._mouseleave,!0),document.removeEventListener("touchend",t._mouseleave,!0)),delete t._wheelObj,delete t._vertDiv,delete t._horiDiv,delete t._scrollFun,delete t._alivetime,delete t._alive,delete t._wheelObj,delete t.resetScrollbar,delete o._scrolldiv,delete t._tchtime,delete t._allowTouch,t.classList.remove("eventBinded"),t.tabIndex=t._tabindex,delete t._tabindex,delete t._wheelObj,delete t._prevPosY,delete t._mouseleave,delete t._prevPosX,delete t._wheelEvt}}return this}function w(){return $L(".lyteScrollBar").scroll("destroy"),window.removeEventListener("scroll",E,!0),this}function T(){for(var e=this,t=0;t<e.length;t++)e[t]._scrollData&&e[t].resetScrollbar(!0,!0);return this}function E(e){var t=e.target.correspondingElement||e.target;t!=document&&t!=document.body&&t._scrollFun&&t._scrollFun.call(t,e),e._byFunc&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())}lyteDomObj.prototype.removeScroll=function(){return S.call(this)},lyteDomObj.prototype.scroll=function(e){if(e&&e.constructor==String)return"destroy"==e?S.call(this):void("destroyScroll"==e?w.call(this):"reset"==e&&T.call(this));var r=function(e,t,o){var a=e[t];null==a&&(a=o),e[t]=a};(e=e||{}).showOn=e.showOn||"hover",e.keyStep=e.keyStep||30,e.wheelSpeed=e.wheelSpeed||1,r(e,"preventOnEnd",!1),e.offset=e.offset||{x:0,y:0},e.tOut=e.scrollTimeout||500,e.nested=e.nested||!1,e.min=e.min||-1/0,e.max=e.max||1/0,r(e,"scrollYMarginOffset",5),r(e,"scrollXMarginOffset",5),e.preventXScroll&&(e.preventHorizontal=!0),e.preventYScroll&&(e.preventVertical=!0);for(var i=this,l=0;l<i.length;l++){var p,d=i[l],u=d.parentElement;a(u,"position","relative"),d._scrollData&&$L(d).removeScroll(),d.resetScrollbar=n.bind(i[l]),u._scrolldiv=d,d._scrollData=e,e.preventVertical||(p=o.call(d,"lyteScrollContainer lyteScrollContainerY",e),"left"==e.verticalPosition&&p.classList.add("left")),e.preventHorizontal||(p=o.call(d,"lyteScrollContainer lyteScrollContainerX",e,!0),"top"==e.horizontalPosition&&p.classList.add("top")),t.firefox&&(d.scrollLeft=0,d.scrollTop=0),d.addEventListener("mouseenter",n,!0),d.addEventListener("touchstart",n,!0),d.addEventListener("touchmove",f,{passive:!1}),d.addEventListener("mousedown",m),d.addEventListener("wheel",s,!0),"always"!=e.showOn?u.addEventListener("mouseleave",c,!0):setTimeout(n.bind(i[l]),100,{}),d.classList.add("lyteScrollBar"),d._scrollFun=b}return this},lyteDomObj.prototype.destroyLyteScroll=function(){return w.call(this)},lyteDomObj.prototype.resetScrollbar=function(){return T.call(this)},window.addEventListener("scroll",E,!0)}}(window),function(e){lyteDomObj&&(lyteDomObj.prototype.manageSortable={keyPressed:!1,keyValue:0,countSortable:0,init:!1,prevSortable:!1,mousedownTriggered:!1,draggedEle:null,_ssData:{},measureQueue:[],mutateQueue:[],isEqual:function(e,t){if(e.length!=t.length)return!1;for(var o=0;o<e.length;o++)if(-1==t.indexOf(e[o]))return!1;return!0},convertToArrayOfItems:function(e){if("string"!=typeof e&&e.length>0)return e;var t=e.split(","),o=[];return t.forEach((function(e,t){var a=$L(e.trim());if(a.length)for(var r=0;r<a.length;r++)-1==o.indexOf(a[r])&&"TEMPLATE"!=a[r].tagName&&o.push(a[r]);else-1==o.indexOf(a)&&"TEMPLATE"!=a.tagName&&o.push(a)})),o},destroy:function(e){if(e.classList.contains("sortable-parent")){for(var t=Array.from(e.children).filter((function(e){return"TEMPLATE"!=e.tagName})),o=e.getSortableClass(),a=0;a<t.length;a++)t[a].classList.remove("sortable-element",o),t[a]._sortableChildData&&(t[a]._sortableChildData=null);e._mousedown&&(e.removeEventListener("mousedown",e.__mouseDownEvent),e.removeEventListener("touchstart",e.__mouseDownEvent,!0),e._mousedown=!1),e.classList.remove("sortable-parent"),e._sortableParentData.multiSortable&&(e._sortableParentData.allSortableClass=null),delete e._sortableParentData,delete e.getSortableClass}else console.info("ALERT! - U have already destroyed its sortable behaviour.")},cancel:function(e){if(e.classList.contains("sortable-parent")){for(var t=this.getChildElements(e),o=t.length-1;o>=0;o--)if(t[o]._pos!=o){for(var a=void 0,r=o;r>=0;r--)if(t[r]._pos==o){a=t[r];break}a&&(o==t.length-1?_lyteUiUtils.appendChild(e,a):_lyteUiUtils.insertBefore(t[o+1],a)),t=this.getChildElements(e)}}else console.info("ALERT! - The element is not a sortable parent.")},getChildElements:function(e){return Array.from(e.children).filter((function(e){return"TEMPLATE"!=e.tagName}))},disable:function(e){for(var t=0;t<e.length;t++){var o=e[t];if(o.classList.contains("sortable-element")){var a={class:"sortable-element",data:Object.assign({},o._sortableChildData)};o.classList.add("sort-disabled-element"),o.classList.remove("sortable-element",o._sortableChildData.sortableElemClass),o._disabledData=a,o._sortableChildData=null}else console.info(o," cannot be disabled as it is not a sortable element.")}},enable:function(e){for(var t=0;t<e.length;t++){var o=e[t];o._disabledData||o.classList.contains("sort-disabled-element")?(o._sortableChildData=Object.assign({},o._disabledData.data),o.classList.remove("sort-disabled-element"),o.classList.add("sortable-element",o._sortableChildData.sortableElemClass),delete o._disabledData):console.info(o," cannot be enabled as it is not a disabled sortable element.")}},alreadySortable:function(e){for(var t=0;t<e.length;t++)if($L(e[t]).hasClass("sortable-parent")&&e[t]._sortableParentData)return{found:!0,class:e[t]._sortableParentData.sortableElemClass};return{found:void 0}},isOver:function(e,t,o){var a,r,i=lyteDomObj.prototype.manageSortable;if(o){if((a=i.prevSortable?i.prevSortable.getBoundingClientRect():null)&&(e.clientX<a.left||e.clientX>a.right||e.clientY<a.top||e.clientY>a.bottom))i.prevSortable&&i.prevSortable._sortableParentData&&i.prevSortable._sortableParentData.onLeave&&i.prevSortable._sortableParentData.onLeave(e,{element:t._element,sortable:i.prevSortable,placeholder:t._placeholder}),i.prevSortable=!1;else if((r=document.querySelectorAll(t.connectToSortable+".sortable-parent")).length)for(var s=r.length-1;s>=0;s--){var l=r[s]._bcr||r[s].getBoundingClientRect();if(r[s]._sortableParentData.droppable&&e.clientX>=l.left&&e.clientX<=l.right&&e.clientY>=l.top&&e.clientY<=l.bottom){(!i.prevSortable||i.prevSortable&&i.prevSortable!=r[s])&&(i.prevSortable=r[s],i.prevSortable._sortableParentData&&i.prevSortable._sortableParentData.onEnter&&i.prevSortable._sortableParentData.onEnter(e,{element:t._element,sortable:i.prevSortable,placeholder:t._placeholder}));break}}}else if((a=i.prevSortable?i.prevSortable._bcr||i.prevSortable.getBoundingClientRect():null)&&(e.clientX<a.left||e.clientX>a.right||e.clientY<a.top||e.clientY>a.bottom))i.prevSortable&&i.prevSortable._sortableParentData&&i.prevSortable._sortableParentData.onLeave&&i.prevSortable._sortableParentData.onLeave(e,{element:t._div,sortable:i.prevSortable,placeholder:t._placeholder}),i.prevSortable=!1;else if((r=t.connectedWith.length?t.connectedWith:[t._parentElem]).length)for(s=r.length-1;s>=0;s--){l=r[s]._bcr||r[s].getBoundingClientRect();if(r[s]._sortableParentData.droppable&&e.clientX>=l.left&&e.clientX<=l.right&&e.clientY>=l.top&&e.clientY<=l.bottom){(!i.prevSortable||i.prevSortable&&i.prevSortable!=r[s])&&(i.prevSortable=r[s],i.prevSortable._sortableParentData&&i.prevSortable._sortableParentData.onEnter&&i.prevSortable._sortableParentData.onEnter(e,{element:t._div,sortable:i.prevSortable,placeholder:t._placeholder}));break}}},getSortableClasses:function(e,t){var o=t||{};return e.forEach((function(e){if(e&&e._sortableParentData){var t=e._sortableParentData.sortableElemClass;o.hasOwnProperty(t)||(o[t]=e)}})),o},enableDroppable:function(e){$L(e).hasClass("sortable-parent")&&(e[0]._sortableParentData.droppable=!0)},disableDroppable:function(e){$L(e).hasClass("sortable-parent")&&(e[0]._sortableParentData.droppable=!1)}},lyteDomObj.prototype.sortable=function(t){var o,a,r,i,s=lyteDomObj.prototype.manageSortable;if(s.init||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),o=t.length-1;o>=0&&t.item(o)!==this;)--o;return o>-1}),Array.from||(Array.from=(o=Object.prototype.toString,a=function(e){return"function"==typeof e||"[object Function]"===o.call(e)},r=Math.pow(2,53)-1,i=function(e){var t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t}(e);return Math.min(Math.max(t,0),r)},function(e){var t=this,o=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var r,s=arguments.length>1?arguments[1]:void 0;if(void 0!==s){if(!a(s))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(r=arguments[2])}for(var l,n=i(o.length),p=a(t)?Object(new t(n)):new Array(n),c=0;c<n;)l=o[c],p[c]=s?void 0===r?s(l,c):s.call(r,l,c):l,c+=1;return p.length=n,p})),s.init=!0),"string"!=typeof t){var l=t||{},n=function(){return navigator.userAgent.search("rv:11")>=0?"ie":navigator.userAgent.search("Edge")>=0?"edge":navigator.userAgent.search("Chrome")>=0?"chrome":navigator.userAgent.search("Firefox")>=0?"firefox":navigator.userAgent.search("Safari")>=0&&navigator.userAgent.search("Chrome")<0?"safari":void 0},p=function(){var t=e.navigator.userAgent,o=e.navigator.platform,a=null;return-1!==["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(o)?a="Mac OS":-1!==["iPhone","iPad","iPod"].indexOf(o)?a="iOS":-1!==["Win32","Win64","Windows","WinCE"].indexOf(o)?a="Windows":/Android/.test(t)?a="Android":!a&&/Linux/.test(o)&&(a="Linux"),a};if(!(this.length>1)){var c=null==this.length?this:this[0];if(c._sortableParentData){var d=c._sortableParentData;l._parentElem=null==l._parentElem?d._parentElem:l._parentElem,l.containment=l.containment?l.containment:d.containment,l.connected=l.connectedWith?s.isEqual(l.connectedWith,d.connectedWith):d.connected,l.connectedWith=l.connectedWith?l.connectedWith:d.connectedWith,l.orientation=l.orientation?l.orientation:d.orientation,l.droppable=null==l.droppable?d.droppable:l.droppable,l.draggable=null==l.draggable?d.draggable:l.draggable,l.sortableElemClass=d.sortableElemClass,l.placeholder=l.placeholder?l.placeholder:d.placeholder,l.disabled=l.disabled?l.disabled:d.disabled,l.onReady=l.onReady?l.onReady:d.onReady,l.onSelect=l.onSelect?l.onSelect:d.onSelect,l.onDragStart=l.onDragStart?l.onDragStart:d.onDragStart,l.onDrag=l.onDrag?l.onDrag:d.onDrag,l.onPlaceholder=l.onPlaceholder?l.onPlaceholder:d.onPlaceholder,l.onBeforeDrop=l.onBeforeDrop?l.onBeforeDrop:d.onBeforeDrop,l.onDrop=l.onDrop?l.onDrop:d.onDrop,l.cancel=null==l.cancel?d.cancel:l.cancel instanceof Array?l.cancel:l.cancel.split(","),l.tolerance=l.tolerance?l.tolerance:d.tolerance,l.items=null==l.items?d.items:l.items instanceof Array?l.items:l.items.split(","),l.cursorAt=null==l.cursorAt?d.cursorAt:l.cursorAt,l.restrict=null==l.restrict?d.restrict:l.restrict instanceof Array?l.restrict:l.restrict.split(","),l.scrollDivX=null==l.scrollDivX?d.scrollDivX:"string"==typeof l.scrollDivX?document.querySelector(l.scrollDivX):l.scrollDivX,l.scrollDivY=null==l.scrollDivY?d.scrollDivY:"string"==typeof l.scrollDivY?document.querySelector(l.scrollDivY):l.scrollDivY,l.omitRestricted=null==l.omitRestricted?d.omitRestricted:l.omitRestricted,l.onEnter=l.onEnter?l.onEnter:d.onEnter,l.onLeave=l.onLeave?l.onLeave:d.onLeave,l.clone=l.clone?l.clone:d.clone,l.preventDefault=l.preventDefault?l.preventDefault:d.preventDefault,l.appendTo=l.appendTo?"parent"!=l.appendTo?$L(l.appendTo)[0]:"parent":d.appendTo,l.helper=l.helper?l.helper:d.helper,l.preventDropAtEnd=null==l.preventDropAtEnd?d.preventDropAtEnd:l.preventDropAtEnd,l.preventDropAtStart=null==l.preventDropAtStart?d.preventDropAtStart:l.preventDropAtStart,l.onMultiSelectDrag=l.onMultiSelectDrag?l.onMultiSelectDrag:d.onMultiSelectDrag,l.gridView=l.gridView?l.gridView:d.gridView,l.multiSortable=l.multiSortable?l.multiSortable:d.multiSortable,l.multiSortable&&l.connectedWith&&(l.allSortableClass=d.allSortableClass?d.allSortableClass:s.getSortableClasses(l.connectedWith,d.allSortableClass)),$L(c).hasClass("sortable-parent")||$L(c).addClass("sortable-parent","lyteSortableParent"),l.executeOnReady&&(l._parentElem.executedOnReady=!1)}else l.connected||l.changed||(++s.countSortable,l.changed=!0),l._parentElem=c,$L(l._parentElem).addClass("sortable-parent","lyteSortableParent"),l.containment=l.containment,l.connectedWith=l.connectedWith?l.connectedWith:[],l.orientation=l.orientation?l.orientation:"default",l.droppable=null==l.droppable||l.droppable,l.draggable=null==l.draggable||l.draggable,l.sortableElemClass=l.sortableElemClass?l.sortableElemClass:c.parentElement&&c.parentElement._sortableParentData?c.parentElement._sortableParentData.sortableElemClass:"horizontal"===l.orientation?"sortable-element-h"+s.countSortable:"vertical"===l.orientation?"sortable-element-v"+s.countSortable:"sortable-element-d"+s.countSortable,l.placeholder=l.placeholder?l.placeholder:"lyteSortablePlaceholder",l.disabled=l.disabled?l.disabled:"lyteSortableDisabledPlaceholder",l.cancel=null==l.cancel?[]:l.cancel instanceof Array?l.cancel:l.cancel.split(","),l.tolerance=l.tolerance?l.tolerance:"intersect",l.items=null==l.items?[]:l.items instanceof Array?l.items:l.items.split(","),l.cursorAt=l.cursorAt,l.restrict=null==l.restrict?[]:l.restrict instanceof Array?l.restrict:l.restrict.split(","),l.scrollDivX=l.scrollDivX?"string"==typeof l.scrollDivX?document.querySelector(l.scrollDivX):l.scrollDivX:void 0,l.scrollDivY=l.scrollDivY?"string"==typeof l.scrollDivY?document.querySelector(l.scrollDivY):l.scrollDivY:void 0,l.omitRestricted=null!=l.omitRestricted&&l.omitRestricted,l.clone=!!l.clone,l.preventDefault=null==l.preventDefault?{mousedown:!function(){var t=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||e.opera),t}(),mousemove:!0}:l.preventDefault,l.appendTo=l.appendTo&&"parent"!=l.appendTo?$L(l.appendTo)[0]:"parent",l.preventDropAtEnd=null==l.preventDropAtEnd||l.preventDropAtEnd,l.preventDropAtStart=null==l.preventDropAtStart||l.preventDropAtStart,l.gridView=!!l.gridView;var u,h,m,y,f=[0,0],g=0,v=0,x="",P="",b=0,D=0,L=null,C=null,_=!1,S=!1,w=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||e.msRequestAnimationFrame,T=e.cancelAnimationFrame||e.mozCancelAnimationFrame,E=0,A=0,M=null,N=function(t){if("Windows"===p()&&s.mouseMoveTriggered)s.mouseMoveTriggered=!1;else if("touchmove"==t.type&&t.preventDefault(),_&&L&&(T(L),_=!1,L=null),S&&C&&(T(C),S=!1,C=null),s.draggedEle&&s.draggedEle.classList.contains("sortable-element-selected")&&s.draggedEle._sortableChildData._isDown){if(y=s.draggedEle){var o=y._sortableChildData;if(o&&o._isDown){(null==o.preventDefault.mousemove||o.preventDefault.mousemove)&&t.preventDefault(),void 0!==document.body.style.MozUserSelect&&(document.body.style.MozUserSelect="none"),P=o._div,x=o._placeholder,f=o._offset,g=o._marginTop,v=o._marginLeft,m=o.sortableElemClass;var a,r=y.getBoundingClientRect(),i=0;(a=o.scrollDivY?o.scrollDivY:"horizontal"!=o.orientation&&oe(o._placedPlaceholder?x:P))&&(!M||M&&M!=a)&&(A=a.scrollHeight-a.offsetHeight,M=a);var l=!1;if(a&&("relative"==e.getComputedStyle(a).position||"fixed"==e.getComputedStyle(a).position)&&(!fe(P)||fe(P)&&a.contains(P))?(l=!0,D=a.scrollTop):D=0,!o._placedPlaceholder){o.onDragStart&&G(o,t),r=fe(y)?y._origin.getBoundingClientRect():y.getBoundingClientRect(),o.containment?o.containmentDimensions=te(o,y):o.containmentDimensions=null;var c=r.width,d=r.height,b=0,N=y.offsetParent;for(E=o.scrollDivX?o.scrollDivX.scrollWidth-o.scrollDivX.clientWidth:0,o._maxScrollWidth=E,o._isRelative&&o.scrollDivX.contains(P)&&(i=o.scrollDivX.scrollLeft),!_lyteUiUtils.isNegativeScroll()&&_lyteUiUtils.getRTL()&&"chrome"==n()&&o._isRelative&&o.scrollDivX.contains(P)&&(i=o.scrollDivX.scrollLeft-o._maxScrollWidth),"table"==N.tagName.toLowerCase()&&""==(b=N.cellSpacing)&&(b=2);("table"==N.tagName.toLowerCase()||"lyte-table-structure"==N.tagName.toLowerCase())&&""==N.style.position;)N=N.offsetParent;var k=re(P);k&&N!=k&&(N=k);var F=N.getBoundingClientRect();return P.style.top=r.top-(F.top+parseInt(b)+parseInt(g))+D+"px",P.style.left=r.left-(F.left+parseInt(v))+i+"px",P.style.boxSizing="border-box",P.style.zIndex=3001,P.style.width=c+"px",P.style.height=d+"px",fe(P)&&(P.style.visibility=""),"tr"!=y.tagName.toLowerCase()&&"lyte-tr"!=y.tagName.toLowerCase()||ae(y),$L(x).attr("id","dummy"),x.style.width=c+"px",x.style.height=d+"px",P.classList.add("lyteSortableElem"),x.style.padding="0px",x.classList.add(o.placeholder),_lyteUiUtils.insertBefore(fe(P)?P._origin:P,x),P.style.position="absolute",P.classList.add("lyteSortableDisablePE"),o._placedPlaceholder=!0,I(o,P.parentElement),o._div=P,o._placeholder=x,o._prevTop=t.clientY,o._prevLeft=t.clientX,o.onDrag&&K(o,t),s.isOver(t,o),void(o._isMoved=!0)}var $=$L.fastdom.measure((function(){if(s.measureQueue.shift(),y){o.containment&&(o.containmentDimensions=te(o,y)),"mousemove"==t.type?u={x:t.clientX,y:t.clientY}:"touchmove"==t.type&&(u={x:t.touches[0].clientX,y:t.touches[0].clientY});var e=P.offsetParent,p=re(P);p&&e!=p&&(e=p);var c,d,b=e.getBoundingClientRect();o._isRelative&&o.scrollDivX.contains(P)&&(i=o.scrollDivX.scrollLeft),!_lyteUiUtils.isNegativeScroll()&&_lyteUiUtils.getRTL()&&"chrome"==n()&&o._isRelative&&o.scrollDivX.contains(P)&&(i=o.scrollDivX.scrollLeft-o._maxScrollWidth),r=P.getBoundingClientRect(),y.parentElement._bcr=y.parentElement.getBoundingClientRect();var T,E,M=a?a.getBoundingClientRect():0;a&&r.left<=M.right&&r.right>=M.left&&(L=w(O.bind(this,o,a,M,A,null,l,u,f,b)),_=!0),o.scrollDivX&&(M=o.scrollDivX.getBoundingClientRect(),(r.left<=M.left||r.right>=M.right-3)&&(C=w(R.bind(this,o,M,u,f,b,o._isRelative)),S=!0));var N=$L.fastdom.mutate((function(){if(s.mutateQueue.shift(),y){if(c=u.x-f[0]-b.left-parseInt(v)+i,d=u.y-f[1]-b.top-parseInt(g)+D,o.containment){var e={top:o.containmentDimensions.top,bottom:o.containmentDimensions.top+(o.containmentDimensions.height-r.height)+D,left:o.containmentDimensions.left,right:o.containmentDimensions.left+(o.containmentDimensions.width-r.width)+i};"vertical"==o.orientation?d+b.top>=o.containmentDimensions.top&&d+b.top<=o.containmentDimensions.top+(o.containmentDimensions.height-r.height)+D&&(P.style.top=d+"px"):(c+b.left>=o.containmentDimensions.left&&c+b.left<=o.containmentDimensions.left+(o.containmentDimensions.width-r.width)+i?P.style.left=c+"px":c+b.left<e.left?P.style.left=e.left-b.left+"px":c+b.left>e.right&&(P.style.left=e.right-b.left+"px"),d+b.top>=o.containmentDimensions.top&&d+b.top<=o.containmentDimensions.top+(o.containmentDimensions.height-r.height)+D?P.style.top=d+"px":d+b.top<e.top?P.style.top=e.top-b.top+"px":d+b.top>e.bottom&&(P.style.top=e.bottom-b.top+"px"))}else"vertical"==o.orientation||(P.style.left=c+"px"),P.style.top=d+"px";r={left:b.left+(c-i),top:b.top+(d-D),right:b.left+(c-i)+r.width,bottom:b.top+(d-D)+r.height},o.onMultiSelectDrag&&J(o,t);var n=$L.fastdom.measure((function(){if(s.measureQueue.shift(),y){if(h=document.elementFromPoint(u.x,u.y),o.multiSortable)if(h){var e=o.allSortableClass;for(var i in e)if(E=$L(h).closest("."+i,e[i])[0])break}else E=null;else E=h?h.closest("."+m):null;if(T=E?E.getBoundingClientRect():{},h){var n=$L.fastdom.mutate((function(){s.mutateQueue.shift(),y&&(E&&ie(E,y.parentElement,y,o.connectedWith,o.containmentDimensions,u)?$L(h).hasClass("sortable-parent")&&se(h,y.parentElement,y,o.connectedWith,o.containmentDimensions,u)&&ne(h,u)&&pe(h,u,y)?(_lyteUiUtils.appendChild(h,x),I(o,h,E)):("pointer"==o.tolerance&&("horizontal"===o.orientation?(t.clientX<o._prevLeft?(_lyteUiUtils.insertBefore(E,x),I(o,h,E)):t.clientX>o._prevLeft&&(_lyteUiUtils.insertAfter(E,x),I(o,h,E)),o._prevLeft=t.clientX):((o.gridView&&t.clientX<o._prevLeft||t.clientY<o._prevTop)&&E.previousElementSibling!=x/*!_placeholder.nextElementSibling || (_placeholder.nextElementSibling && _placeholder.nextElementSibling != droppablePlace)*/?(//!placeholder.nextElementSibling to check if placeholder is the last element and the draggable element's top goes above the last element's top
_lyteUiUtils.insertBefore(E,x),I(o,h,E)):(o.gridView&&t.clientX>o._prevLeft||t.clientY>o._prevTop)&&E.nextElementSibling!=x/*!_placeholder.previousElementSibling || (_placeholder.previousElementSibling && _placeholder.previousElementSibling != droppablePlace)*/&&(_lyteUiUtils.insertAfter(E,x),I(o,h,E)),o._prevTop=t.clientY)),"intersect"==o.tolerance&&("horizontal"===o.orientation?r.left<T.left?(_lyteUiUtils.insertBefore(E,x),I(o,h,E)):r.right>T.right&&(_lyteUiUtils.insertAfter(E,x),I(o,h,E)):(o.gridView&&r.left<T.left||r.top<T.top)&&E.previousElementSibling!=x?(_lyteUiUtils.insertBefore(E,x),I(o,h,E)):(o.gridView&&r.right>T.right||r.bottom>T.bottom)&&E.nextElementSibling!=x&&(_lyteUiUtils.insertAfter(E,x),I(o,h,E)))):h&&$L(h).hasClass("sortable-parent")&&se(h,y.parentElement,y,o.connectedWith,o.containmentDimensions,u)&&ne(h,u)&&pe(h,u,y,l,a)&&(!o.preventDropAtEnd||U(o,h))&&(_lyteUiUtils.appendChild(h,x),I(o,h,E)),o._belowElem=null!=h?h:o._belowElem,o.onDrag&&K(o,t),s.isOver(t,o),o._isMoved=!0,E=null,h=null)}));s.mutateQueue.push(n)}}}));s.measureQueue.push(n)}}));s.mutateQueue.push(N)}}));s.measureQueue.push($)}}}else y=null},k=function(t){t.target;if(_&&L&&(T(L),_=!1,L=null),S&&C&&(T(C),S=!1,C=null),s.measureQueue.length)for(;s.measureQueue.length;)$L.fastdom.clear(s.measureQueue.shift());if(s.mutateQueue.length)for(;s.mutateQueue.length;)$L.fastdom.clear(s.mutateQueue.shift());if("mouseup"==t.type&&(document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",k)),"touchend"==t.type&&(document.removeEventListener("touchmove",N,{capture:!0,passive:!1}),document.removeEventListener("touchend",k,!0)),s.prevSortable&&(s.prevSortable=!1),!(s.draggedEle&&$L(s.draggedEle).hasClass("sortable-element-selected")&&s.draggedEle._sortableChildData._isDown))return F(t),y=null,s.draggedEle=null,void(s.mousedownTriggered=!1);if((y=s.draggedEle).classList.remove("lyteSortableDisablePE"),y){var o=y._sortableChildData;y.parentElement;if(o._isDown){o._isDown=!1,P=o._div;var a=(x=1==document.querySelectorAll("#dummy").length?document.querySelectorAll("#dummy")[0]:o._placeholder).parentElement;if(o._isMoved){o._isMoved=!1,o._toIndex=Y(o,x,Array.from(a.children).filter((function(e){return"TEMPLATE"!=e.tagName&&!$L(e).hasClass("sortable-element-selected")})));var r=!0;if(o.onBeforeDrop&&(r=Z(o,t,x,a)),$L(x).hasClass(o.disabled))return ce(o),s.draggedEle=null,void(s.mousedownTriggered=!1);if(!r)return ce(o),fe(P)&&P.remove(),s.draggedEle=null,void(s.mousedownTriggered=!1);var i=ue(x)?ue(x):he(x),l=i&&i._sortableChildData?Object.assign({},i._sortableChildData):Object.assign({},x.parentElement._sortableParentData);o._fromIndex==o._toIndex&&o._parentElem==a?x.remove():_lyteUiUtils.replaceWith(x,P),de(P),x=null,P._sortableChildData=l,o.onDrop&&X(o,t),fe(P)&&delete P._origin}else de(P),fe(P)&&(delete P._origin,P.remove()),"a"==y.tagName.toLowerCase()&&(e.location.href=y.href);o._div=null,o._placeholder=null,o._placedPlaceholder=!1,o._returnElemBelow=null,o._belowElem=null,o._source=null,o._fromIndex=null}$L(y).removeClass("sortable-element-selected"),f=null,null,null,u=null,h=null,null,g=null,v=null,m=null,y=null,x=null,P=null,M=null}F(t),s.draggedEle=null,s.mousedownTriggered=!1},F=function(e){for(var t=e.target.ownerDocument.querySelectorAll(".lyteSortablePlaceholder"),o=0;o<t.length;o++)if(t[o]._callee){var a=t[o]._callee;_lyteUiUtils.replaceWith(t[o],a),$L(a).removeClass("sortable-element-selected"),de(a),fe(a)&&a.remove()}else t[o].remove();var r=e.target.ownerDocument.querySelectorAll(".sortable-element-selected");for(o=0;o<r.length;o++)$L(r[o]).removeClass("sortable-element-selected"),de(r[o]),fe(r[o])&&r[o].remove()};c.addToSortable=function(e){e._sortableChildData=c._sortableParentData,$L(e).addClass("sortable-element "+c._sortableParentData.sortableElemClass)},c.getSortableClass=function(){return c._sortableParentData.sortableElemClass},c.removeFromSortable=function(e){delete e._sortableChildData,$L(e).removeClass("sortable-element "+c._sortableParentData.sortableElemClass)};var I=function(e,t,o){!e.onPlaceholder||Q(e,t||o.parentElement)?(x.classList.contains(e.disabled)&&x.classList.remove(e.disabled),x.classList.add(e.placeholder)):(x.classList.contains(e.placeholder)&&x.classList.remove(e.placeholder),x.classList.add(e.disabled)),e._returnElemBelow=o||t},R=function(e,t,o,a,r,i){if(e._div){var s=e._div.getBoundingClientRect();if(b=e.scrollDivX.scrollLeft,E=e._maxScrollWidth,!_lyteUiUtils.getRTL()||!_lyteUiUtils.isNegativeScroll()&&_lyteUiUtils.getRTL()&&"chrome"==n()&&!i)if(s.right>=t.right&&b<E)E-b>=5?(e.scrollDivX.scrollLeft+=5,i&&e.scrollDivX.contains(e._div)&&(e._div.style.left=o.x-a[0]-r.left+5+b+"px")):(e.scrollDivX.scrollLeft+=5-(E-b),i&&e.scrollDivX.contains(e._div)&&(e._div.style.left=o.x-a[0]-r.left+(5-(E-b))+b+"px"));else{if(!(s.left<=t.left&&b>0))return T(C),S=!1,void(C=null);i&&e.scrollDivX.contains(e._div)&&(e._div.style.left=o.x-a[0]-r.left-(E-b>5?5:5-(E-b))+b+"px"),e.scrollDivX.scrollLeft-=5}else if(!_lyteUiUtils.isNegativeScroll()&&"chrome"==n()&&i)if(s.right>=t.right&&b<E)E-b>=5?(e.scrollDivX.scrollLeft+=5,i&&e.scrollDivX.contains(e._div)&&(e._div.style.left=o.x-a[0]-r.left+5+(b-E)+"px")):(e.scrollDivX.scrollLeft+=5-(E-b),i&&e.scrollDivX.contains(e._div)&&(e._div.style.left=o.x-a[0]-r.left+(5-(E-b))+b+"px"));else{if(!(s.left<=t.left&&b>0))return T(C),S=!1,void(C=null);i&&e.scrollDivX.contains(e._div)&&(e._div.style.left=o.x-a[0]-r.left-(E-b+5)+"px"),e.scrollDivX.scrollLeft-=5}else if(_lyteUiUtils.isNegativeScroll()&&"chrome"==n()||"firefox"==n()||"safari"==n())if(s.right>=t.right&&b<0)E+b>=5?(e.scrollDivX.scrollLeft+=5,i&&e.scrollDivX.contains(e._div)&&(e._div.style.left=o.x-a[0]-r.left+5+b+"px")):(e.scrollDivX.scrollLeft+=5-(E+b),i&&e.scrollDivX.contains(e._div)&&(e._div.style.left=o.x-a[0]-r.left+(5-(E+b))+b+"px"));else{if(!(s.left<=t.left&&b>-E))return T(C),S=!1,void(C=null);i&&e.scrollDivX.contains(e._div)&&(e._div.style.left=o.x-a[0]-r.left+(b-5)+"px"),e.scrollDivX.scrollLeft-=5}else if("ie"==n()||"edge"==n())if(s.right>=t.right&&b>0)e.scrollDivX.scrollLeft-=b>=5?5:b;else{if(!(s.left<=t.left&&b<E))return T(C),S=!1,void(C=null);i&&e.scrollDivX.contains(e._div)&&(e._div.style.left=o.x-a[0]-r.left-b-5+"px"),e.scrollDivX.scrollLeft+=5}C=w(R.bind(this,e,t,o,a,r,i))}},O=function(e,t,o,a,r,i,s,l,n){$L.fastdom.measure((function(){if(e._div){var p=e._div.getBoundingClientRect(),c=e._placeholder.parentElement.offsetTop-t.offsetTop+5,d=t.scrollTop;$L.fastdom.mutate((function(){if(e._div){if(p.top-parseInt(e._marginTop)<=o.top+c&&d>0)i&&t.contains(e._div)&&(e._div.style.top=s.y-l[1]-n.top-(a-d>=10?10:a-d)+d+"px"),t.scrollTop-=10;else{if(!(p.bottom>=o.bottom-3&&d<a))return 0==d&&p.top-parseInt(e._marginTop)<=o.top+c&&!$(e,"first")?q(e,"first"):d==a&&p.bottom>=o.bottom-3&&!$(e,"last")&&q(e,"last"),T(L),_=!1,void(L=null);a-d>10?(i&&t.contains(e._div)&&(e._div.style.top=s.y-l[1]-n.top+10+d+"px"),t.scrollTop+=10):(i&&t.contains(e._div)&&(e._div.style.top=s.y-l[1]-n.top+a-d+d+"px"),t.scrollTop+=a-d)}L=w(O.bind(this,e,t,o,a,r,i,s,l,n))}}))}}))},$=function(e,t){var o=e._placeholder,a=o.parentElement,r=B(e,a);return"first"===t?r[0]==o:r[r.length-1]==o},B=function(e,t){return e&&e.omitRestricted?Array.from(t.children).filter((function(t){return"TEMPLATE"!=t.tagName&&V(e,t)})):Array.from(t.children).filter((function(e){return"TEMPLATE"!=e.tagName}))},q=function(e,t){var o=e._placeholder,a=o.parentElement,r=B(e,a);if(!e.gridView)if("first"===t){for(var i=0;i<r.length;i++)if(!e.preventDropAtStart||V(e,r[i])&&!r[i].classList.contains("sort-disabled-element")){_lyteUiUtils.insertBefore(r[i],o);break}}else for(i=r.length-1;i>=0;i--)if(!e.preventDropAtEnd||V(e,r[i])&&!r[i].classList.contains("sort-disabled-element")){_lyteUiUtils.insertAfter(r[i],o);break}},V=function(e,t){for(var o=0;o<e.restrict.length;o++)if(t.matches(e.restrict[o]))return!1;return!0},U=function(e,t){var o=B(null,t);return!o.length||V(e,o[o.length-1])},H=function(e,t){if(!e.draggable)return!1;for(var o=0;o<e.cancel.length;o++)for(var a=t;a.parentElement;){if(a.matches(e.cancel[o]))return!1;if($L(a).hasClass("sortable-element"))break;a=a.parentElement}return!0},Y=function(e,t,o){if(e.omitRestricted)for(var a=0;a<o.length;a++)V(e,o[a])||(o.splice(a,1),--a);for(var r=0;r<o.length;r++)if("TEMPLATE"!=o[r].tagName&&t==o[r])return r},j=function(e){var t=fe(e._div)?e._div._origin:e._div;if(e.omitRestricted){for(var o=Array.from(e._source.children).filter((function(e){return"TEMPLATE"!=e.tagName})),a=0;a<o.length;a++)V(e,o[a])||(o.splice(a,1),--a);return o.indexOf(t)}return Array.from(e._source.children).filter((function(e){return"TEMPLATE"!=e.tagName})).indexOf(t)},W=function(e){var t=fe(e._div)?e._div._origin:e._div,o=e._parentElem;return t.classList.contains("sortable-parent")&&t.parentElement.classList.contains("sortable-parent")&&(o=t.parentElement),o},z=function(e,t){var o=e.onSelect(e._div,e._fromIndex,e._source,t);return null==o||o},G=function(e,t){e.onDragStart(e._div,e._source,t)},K=function(e,t){var o=1==document.querySelectorAll("#dummy").length?document.querySelectorAll("#dummy")[0]:e._placeholder;e.onDrag(e._div,e._returnElemBelow,t,o,e._belowElem)},Z=function(e,t,o){var a=e.onBeforeDrop(e._div,e._returnElemBelow,o,e._fromIndex,e._toIndex,e._source,o?o.parentElement:null,t);return null==a||a},X=function(e,t){e.onDrop(e._div,e._div._sortableChildData._parentElem,e._returnElemBelow,e._fromIndex,e._toIndex,e._source,t)},J=function(e,t){var o=1==document.querySelectorAll("#dummy").length?document.querySelectorAll("#dummy")[0]:e._placeholder;e.onMultiSelectDrag(e._div,t,o,o.parentElement)},Q=function(e,t){if(t.id&&"dummy"==t.id)t=t.parentElement;else for(;t&&!$L(t).hasClass("sortable-parent");)t=t.parentElement;var o=1==document.querySelectorAll("#dummy").length?document.querySelectorAll("#dummy")[0]:e._placeholder,a=e.onPlaceholder(e._div,o,e._parentElem,o?o.parentElement:null);return null==a||a},ee=B(l,l._parentElem);l._parentElem.__mouseDownEvent=function(t){if(3!=t.which)if(s.mousedownTriggered)s.mousedownTriggered=!1;else{for(var o=t.target;o;){if($L(o).hasClass("sortable-element")){y=o;break}o=o.parentElement}if(o||(y=null,s.draggedEle=null),y&&H(y._sortableChildData||y.parentElement._sortableParentData,t.target)&&me(y._sortableChildData||y.parentElement._sortableParentData,t.target)){s.draggedEle=y;var a=y._sortableChildData||y.parentElement._sortableParentData;if((null==a.preventDefault.mousedown||a.preventDefault.mousedown)&&t.preventDefault(),y.parentElement&&!y.classList.contains(y.parentElement._sortableParentData.sortableElemClass)&&y.classList.add(y.parentElement._sortableParentData.sortableElemClass),"function"==typeof a.helper){var r=a.helper(y);r&&(r._isHelper=!0,r.classList.add("sortable-helper"),r._sortableChildData=Object.assign({},y._sortableChildData),r.classList.add(y.parentElement._sortableParentData.sortableElemClass),r._origin=y,s.draggedEle=r,"parent"==a.appendTo?_lyteUiUtils.appendChild(y.parentElement,r):_lyteUiUtils.appendChild($L(a.appendTo)[0],r),a=r._sortableChildData,r.style.visibility="hidden")}x=ye(s.draggedEle,a.clone),a._div=P=s.draggedEle;var i=!0;if(a._source=W(a),a._fromIndex=j(a),a.onSelect&&(i=z(a,t)),i){P.classList.add("sortable-element-selected");var l=e.getComputedStyle(P),n=fe(P)?P._origin.getBoundingClientRect():P.getBoundingClientRect();a.scrollDivX&&"relative"==e.getComputedStyle(a.scrollDivX).position?a._isRelative=!0:a._isRelative=!1,l.marginTop&&(g=l.marginTop),l.marginLeft&&(v=l.marginLeft),"mousedown"==t.type?f=[a.cursorAt&&a.cursorAt.left||t.clientX-n.left,a.cursorAt&&a.cursorAt.top||t.clientY-n.top]:"touchstart"==t.type&&(f=[a.cursorAt&&a.cursorAt.left||t.touches[0].clientX-n.left,a.cursorAt&&a.cursorAt.top||t.touches[0].clientY-n.top],document.addEventListener("touchmove",a._parentElem.__mouseMoveEvent,{capture:!0,passive:!1}),document.addEventListener("touchend",a._parentElem.__mouseUpEvent,!0)),a._isDown=!0,a._placeholder=x,a._offset=f,a._marginTop=g,a._marginLeft=v,a._event=t,a._placedPlaceholder=!1,s.draggedEle._sortableChildData||(s.draggedEle._sortableChildData=a),x=null,P=null,y=null,"mousedown"==t.type&&(document.addEventListener("mousemove",N),document.addEventListener("mouseup",k),s.mousedownTriggered=!0,"Windows"===p()&&(s.mouseMoveTriggered=!0))}else a.helper&&s.draggedEle.remove(),s.draggedEle=null,y=null}else y=null}},l._parentElem.__mouseMoveEvent=N,l._parentElem.__mouseUpEvent=k,l._parentElem._sortableParentData=l;for(xe=0;xe<ee.length;xe++)ee[xe]._pos=xe,V(l,ee[xe])&&!ee[xe].classList.contains("sortable-element-selected")&&(ee[xe]._sortableChildData=l,$L(ee[xe]).addClass("sortable-element "+l.sortableElemClass));l.draggable&&!l._parentElem._mousedown&&(l._parentElem.addEventListener("mousedown",l._parentElem.__mouseDownEvent),l._parentElem.addEventListener("touchstart",l._parentElem.__mouseDownEvent,!0),l._parentElem._mousedown=!0),!l.connected&&l.connectedWith.length>0&&(l.connectedWith=s.convertToArrayOfItems(l.connectedWith),l.connectedWith.forEach((function(e){var t=l.connectedWith.concat(),o=t.indexOf(e);t.splice(o,1),t.push(e),l.multiSortable&&d&&d.connectedWith?l.connectedWith=d.connectedWith:$L(e).sortable({_parentElem:$L(e)[0],connectedWith:t,connected:!0,restrict:l.restrict,sortableElemClass:l.sortableElemClass})}))),l.onReady&&!l._parentElem.executedOnReady&&(!function(e){e.onReady(e._parentElem)}(l),l._parentElem.executedOnReady=!0);var te=function(e,t){if("parent"==e.containment)return{left:(o=fe(t)?t._origin.parentElement.getBoundingClientRect():t.parentElement.getBoundingClientRect()).left,right:o.right,top:o.top,bottom:o.bottom,height:o.height,width:o.width,offsetLeft:fe(t)?t._origin.parentElement.offsetLeft:t.parentElement.offsetLeft,offsetTop:fe(t)?t._origin.parentElement.offsetTop:t.parentElement.offsetTop};var o,a=null==$L(e.containment).length?null:$L(e.containment)[0];return{left:(o=a.getBoundingClientRect()).left,right:o.right,top:o.top,bottom:o.bottom,height:o.height,width:o.width,offsetLeft:a.offsetLeft,offsetTop:a.offsetTop}},oe=function(t){for(var o=t.parentElement;t.parentElement;)if(t=t.parentElement,o.scrollHeight>t.clientHeight&&("hidden"!=e.getComputedStyle(t).overflowY&&"visible"!=e.getComputedStyle(t).overflow||t.matches(".lyteScrollBar")/*!(elem.style.overflow && elem.style.overflow == 'hidden')*/))return t;return null},ae=function(e){for(var t=e.children,o=[],a=0;a<t.length;a++)"td"!=t[a].tagName.toLowerCase()&&"lyte-td"!=t[a].tagName.toLowerCase()||(t[a].__prevWidth=t[a].style.width,o[a]=t[a].__prevWidth||t[a].offsetWidth+"px");for(a=0;a<t.length;a++)"td"!=t[a].tagName.toLowerCase()&&"lyte-td"!=t[a].tagName.toLowerCase()||(t[a].style.width=o[a])},re=function(e){for(;e.parentElement;){if(e=e.parentElement,"relative"==getComputedStyle(e).position)return e}return null},ie=function(e,t,o,a,r,i){if("dummy"!=e.id){o.parentElement.id,e.parentElement.id;if(r&&(i.x<r.left||i.x>r.right||i.y<r.top||i.y>r.bottom))return!1;if(o.parentElement==e.parentElement||e.parentElement==o._sortableChildData._parentElem)return!0;if(-1!=a.indexOf(e.parentElement)&&e._sortableChildData.droppable)return!0}return!1},se=function(e,t,o,a,r,i){o.parentElement.id;return(!r||!(i.x<r.left||i.x>r.right||i.y<r.top||i.y>r.bottom))&&(o.parentElement==e||e==t||!(-1==a.indexOf(e)||!le(e)))},le=function(e){for(var t,o=e.children,a=0;a<o.length;a++)if(o[a]!=e.querySelector("#dummy")&&"TEMPLATE"!=o[a].tagName&&$L(o[a]).hasClass("sortable-element")){t=o[a];break}return t&&t._sortableChildData?t._sortableChildData.droppable:e._sortableParentData.droppable},ne=function(t,o){var a=e.getComputedStyle(t),r=t.getBoundingClientRect();return o.x>r.left+parseFloat(a.paddingLeft||0)&&o.x<r.right-parseFloat(a.paddingRight||0)&&o.y>r.top+parseFloat(a.paddingTop||0)&&o.y<r.bottom-parseFloat(a.paddingBottom||0)},pe=function(e,t,o,a,r){for(var i=e.children,s=0,l=[],n=0;n<i.length;n++)"TEMPLATE"!=i[n].tagName&&"dummy"!=i[n].id&&V(e._sortableParentData,i[n])?l.push(i[n]):s++;return s==i.length||(1==l.length&&l[l.length-1]==o||l.length>1&&l[l.length-1]==o&&o.getBoundingClientRect().top>l[l.length-2].getBoundingClientRect().bottom+(a?r.scrollTop:0)||o.getBoundingClientRect().top>l[l.length-1].getBoundingClientRect().bottom+(a?r.scrollTop:0))},ce=function(e){$L(e._div).removeClass("sortable-element-selected"),de(e._div),e._placeholder.remove()},de=function(e){e.style.position="",e.style.top="",e.style.left="",e.style.width="",e.style.height="",e.style.zIndex="",e.style.boxSizing="",$L(e).removeClass("lyteSortableElem"),$L(e).removeClass("lyteSortableDisablePE"),fe(e)&&$L(e).removeClass("sortable-helper"),"tr"!=e.tagName.toLowerCase()&&"lyte-tr"!=e.tagName.toLowerCase()||function(e){for(var t=e.children,o=0;o<t.length;o++)"td"!=t[o].tagName.toLowerCase()&&"lyte-td"!=t[o].tagName.toLowerCase()||(t[o].style.width=t[o].__prevWidth)}(e)},ue=function(e){for(;e.previousElementSibling;)if("TEMPLATE"!=(e=e.previousElementSibling).tagName&&$L(e).hasClass("sortable-element"))return e;return null},he=function(e){for(;e.nextElementSibling;)if("TEMPLATE"!=(e=e.nextElementSibling).tagName&&$L(e).hasClass("sortable-element"))return e;return null},me=function(e,t){if(!(e.items.length>0))return!0;for(var o=0;o<e.items.length;o++)for(var a=document.querySelectorAll(e.items[o]),r=0;r<a.length;r++)if(a[r]==t)return!0;return!1},ye=function(e,t){var o;if(t)for(var a=(o=e.cloneNode(t)).children,r=e.children,i=0;i<a.length;i++){var s=r[i].getBoundingClientRect();a[i].style.width=s.width+"px",a[i].style.height=s.height+"px",a[i].classList.add("lyteSortableDummyTr")}else(o=e.cloneNode()).innerHTML="",o.style.boxSizing="border-box";return o._callee=e,o.classList.remove("sortable-element-selected","sortableElem"),fe(e)&&(o.style.visibility=""),o},fe=function(e){return e.classList.contains("sortable-helper")||e._isHelper};return this}ve=this;l.changed||(++s.countSortable,l.changed=!0);var ge=s.alreadySortable(this);ge.found&&(l.sortableElemClass=ge.class);for(xe=0;xe<ve.length;xe++)$L(ve[xe]).sortable(Object.assign({},l))}else if("destroy"===t)if(this.length>1)for(var ve=this,xe=0;xe<ve.length;xe++)s.destroy(ve[xe]);else s.destroy(this[0]);else if("cancel"===t)if(this.length>1)for(var ve=this,xe=0;xe<ve.length;xe++)s.cancel(ve[xe]);else s.cancel(this[0]);else"disable"===t?s.disable(this):"enable"===t?s.enable(this):"disableDroppable"===t?s.disableDroppable(this):"enableDroppable"===t&&s.enableDroppable(this)})}(window),function(e){lyteDomObj&&(lyteDomObj.prototype.manageDraggable={init:!1,draggedEle:null,isRestricted:function(e,t){e=e instanceof Array?e:e.split(",");for(var o=0;o<e.length;o++)for(var a=document.querySelectorAll(e[o]),r=0;r<a.length;r++)if(t.isEqualNode(a[o]))return!0;return!1},destroy:function(e){if(e.classList.contains("draggable-element")||e.classList.contains("draggable-helper")){if(e.classList.contains("draggable-handle-element"))e.classList.remove("draggable-handle-element"),e.removeEventListener("mousedown",e._draggableData.__mousedown),e.removeEventListener("touchstart",e._draggableData.__mousedown,!0),e._draggableData=null;else for(var t=e.querySelectorAll(".draggable-handle-element"),o=0;o<t.length;o++)t[o].classList.remove("draggable-handle-element"),t[o].removeEventListener("mousedown",t[o]._draggableData.__mousedown),t[o].removeEventListener("touchstart",t[o]._draggableData.__mousedown,!0),t[o]._draggableData=null;e.classList.remove("draggable-element","draggable-helper"),e._mousedown=void 0}else console.info("ALERT! - U have already destroyed its draggable behaviour.")}},lyteDomObj.prototype.draggable=function(t){var o=lyteDomObj.prototype.manageDraggable,a=lyteDomObj.prototype.managerDD;if(o.init||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),o=t.length-1;o>=0&&t.item(o)!==this;)--o;return o>-1}),o.init=!0),"string"!=typeof t||"destroy"!==t){var r=t||{};if(this.length>1)for(j=this,W=0;W<j.length;W++)$L(j[W]).draggable(Object.assign({},r));else if(!r.restrict||!o.isRestricted(r.restrict,this[0])){var i;r._element=this[0],$L(r._element).addClass("draggable-element");var s,l,n,p,c,d,u,h,m,y,f,g={},v=[0,0],x=0,P=0,b=!1;r.placeholder=r.placeholder?r.placeholder:"lyteDraggablePlaceholder",r.containment=void 0===r.containment?document:$L(r.containment)[0],r.orientation=void 0===r.orientation?"default":r.orientation,r.handle=void 0===r.handle?this[0]:r.handle,r.restrict=void 0===r.restrict?[]:r.restrict instanceof Array?r.restrict:r.restrict.split(","),r.helper=r.helper?r.helper:"original",r.connectToSortable=r.connectToSortable?r.connectToSortable:null,r.cursorAt=r.cursorAt,r.disabled=r.disabled?r.disabled:"lyteDraggableDisabledPlaceholder",r.appendTo=r.appendTo&&"parent"!=r.appendTo?$L(r.appendTo)[0]:"parent",r.bubbles=void 0===r.bubbles||r.bubbles,r.scrollDivX=r.scrollDivX?"string"==typeof r.scrollDivX?document.querySelector(r.scrollDivX):r.scrollDivX:void 0,r.scrollDivY=r.scrollDivY?"string"==typeof r.scrollDivY?document.querySelector(r.scrollDivY):r.scrollDivY:void 0,r.scrollSpeed=r.scrollSpeed?parseInt(r.scrollSpeed):10,r.scrollSpeed<1&&(r.scrollSpeed=1);var D=function(t){if("Windows"===Y()&&o.mouseMoveTriggered)o.mouseMoveTriggered=!1;else if(o.draggedEle&&$L(o.draggedEle).hasClass("selected-element")&&o.draggedEle._draggableData._isDown){if(i=o.draggedEle){var r=i._draggableData;if(r&&r._isDown){t.preventDefault(),void 0!==document.body.style.MozUserSelect&&(document.body.style.MozUserSelect="none");var d=r._element;v=r._offset,P=r._marginLeft,x=r._marginTop;var g=r.orientation,D=r._offParent,L=d.getBoundingClientRect(),C=D.getBoundingClientRect();if(m=r.scrollDivY&&r._isRelativeY?r.scrollDivY.scrollTop:0,r.scrollDivX&&r._isRelativeX?(y=r.scrollDivX.scrollLeft,_lyteUiUtils.getRTL()&&!_lyteUiUtils.isNegativeScroll()&&"chrome"==I()&&r._isRelativeX&&(y-=r._maxScrollWidth?r._maxScrollWidth:r.scrollDivX.scrollWidth-r.scrollDivX.offsetWidth)):y=0,r._isRelative&&y,r._isMoved)r._placeholder&&(s=r._placeholder),r._positionedPlceholder&&(b=r._positionedPlceholder);else{var w=e.getComputedStyle(d);w.borderTop&&parseFloat(w.borderTop),w.borderBottom&&parseFloat(w.borderBottom),w.borderLeft&&parseFloat(w.borderLeft),w.borderRight&&parseFloat(w.borderRight);if("string"==typeof r.helper){if("clone"==r.helper){var E=d.cloneNode(!0);_lyteUiUtils.insertAfter(d,E),$L(d).removeClass("selected-element"),$L(E).hasClass("draggable-handle-element")||$L(E).addClass("draggable-handle-element"),E._draggableData=Object.assign({},r),(r=E._draggableData)._element=r.handle=E,i=E,(d=E).addEventListener("mousedown",z),r.connectToSortable&&(r._prevTop=t.clientY)}}else(E=r.helper(d))&&(E._callee=d,$L(d).removeClass("selected-element"),$L(E).hasClass("draggable-handle-element")||$L(E).addClass("draggable-handle-element"),$L(E).hasClass("selected-element")||$L(E).addClass("selected-element"),$L(E).addClass("draggable-helper"),E._draggableData=Object.assign({},r),(r=E._draggableData)._element=r.handle=E,o.draggedEle=i=E,"parent"==r.appendTo?r._parent.appendChild(E):r.appendTo.appendChild(E),(d=E).addEventListener("mousedown",z),r.connectToSortable&&(r._prevTop=t.clientY),C=(D=r._offParent=d.offsetParent).getBoundingClientRect());if(void 0!==a&&(a._current=d),(r=d._draggableData||i._draggableData).connectToSortable&&((s=d.cloneNode(!0))._callee=d,$L(s).removeClass("selected-element"),s.innerHTML="",$L(s).attr("id","lyteDraggableDummy"),$L(s).addClass(r.placeholder),s.style.boxSizing="border-box",s.style.width=L.width+"px",s.style.height=L.height+"px",s.style.padding="0px",d.classList.add("lyteSortableDisablePE")),d.style.top=L.top-C.top-parseInt(x)+m+"px",d.style.left=L.left-C.left-parseInt(P)+y+"px",d.style.zIndex=2e5,"border-box"==w.boxSizing?(d.style.width=L.width+"px",d.style.height=L.height+"px"):(d.style.width=N(d)+"px",d.style.height=M(d)+"px"),d.style.position="absolute",r.onDragStart&&_(r,i,s,t),r.scrollDivY&&(u=r.scrollDivY.scrollHeight-r.scrollDivY.offsetHeight),r.scrollDivX&&(h=r.scrollDivX.scrollWidth-r.scrollDivX.offsetWidth,r._maxScrollWidth=h),r.cursorAt&&_lyteUiUtils.getRTL()){var $=r.cursorAt,B={};for(key in $)"left"==key?B.left=r._element.offsetWidth-$[key]:B[key]=$[key];r._preCursorAt=Object.assign({},r.cursorAt),r.cursorAt=B,v=r._offset=[r.cursorAt.left,r.cursorAt.top]}}"mousemove"==t.type?r._mousePosition={x:t.clientX,y:t.clientY}:"touchmove"==t.type&&(r.touchTarget=t.touches,r._mousePosition={x:t.touches[0].clientX,y:t.touches[0].clientY});var q=!0;if(r.onDrag&&(q=S(r,i,t)),q)if("vertical"===g)d.style.top=r._mousePosition.y-v[1]-C.top-parseInt(x)+m+"px";else if("horizontal"===g)d.style.left=r._mousePosition.x-v[0]-C.left-parseInt(P)+y+"px";else if("default"===g){if(d.style.left=r._mousePosition.x-v[0]-C.left-parseInt(P)+y+"px",d.style.top=r._mousePosition.y-v[1]-C.top-parseInt(x)+m+"px",L=d.getBoundingClientRect(),r.scrollDivY){var U=r.scrollDivY.getBoundingClientRect();L.left<=U.right&&L.right>=U.left&&(n=requestAnimationFrame(k.bind(this,r,r.scrollDivY,U,u,r._isRelativeY,r._mousePosition,v,C)),!0)}if(r.scrollDivX){U=r.scrollDivX.getBoundingClientRect();(L.left<=U.right||L.right>=U.left)&&(f=requestAnimationFrame(F.bind(this,r,U,h,r._mousePosition,v,C,r._isRelativeX)),!0)}if(r.connectToSortable){var H=$L(r.connectToSortable).length?$L(r.connectToSortable)[0]._sortableParentData:null;if(l=H.sortableElemClass,p=document.elementFromPoint(r._mousePosition.x,r._mousePosition.y),lyteDomObj.prototype.manageSortable.isOver(t,r,!0),!p)return;(c=p.closest("."+l))&&c.parentElement._sortableParentData.droppable?$L(p).hasClass("sortable-parent")&&A(p,r)&&R(p,r._mousePosition)&&O(p,r._mousePosition,d)?(_lyteUiUtils.appendChild(p,s),s.style.display="",b=!0):d.getBoundingClientRect().top<=c.getBoundingClientRect().top?(_lyteUiUtils.insertBefore(c,s),s.style.display="",b=!0):d.getBoundingClientRect().bottom>c.getBoundingClientRect().bottom&&(_lyteUiUtils.insertAfter(c,s),s.style.display="",b=!0):p&&$L(p).hasClass("sortable-parent")&&A(p,r)&&R(p,r._mousePosition)&&O(p,r._mousePosition,d)?(_lyteUiUtils.appendChild(p,s),s.style.display="",b=!0):V(p)||$L(p).hasClass("sortable-parent")&&A(p,r)||(document.getElementById("lyteDraggableDummy")&&(document.getElementById("lyteDraggableDummy").style.display="none"),b=!1),b&&(!r.onPlaceholder||T(r,s)?($L(s).hasClass(r.disabled)&&$L(s).removeClass(r.disabled),$L(s).addClass(r.placeholder)):($L(s).hasClass(r.placeholder)&&$L(s).removeClass(r.placeholder),$L(s).addClass(r.disabled))),r._placeholder=s,r._positionedPlceholder=b}}void 0!==a&&a._drag(t),r._isMoved=!0}}}else i=null},L=function(e){if("mouseup"==e.type&&(document.removeEventListener("mousemove",D),document.removeEventListener("mouseup",L)),"touchend"==e.type&&(document.removeEventListener("touchmove",D,!0),document.removeEventListener("touchend",L,!0)),o.draggedEle&&$L(o.draggedEle).hasClass("selected-element")&&o.draggedEle._draggableData._isDown){if(i=o.draggedEle){if((h=i._draggableData).cursorAt&&_lyteUiUtils.getRTL()&&(h.cursorAt=Object.assign({},h._preCursorAt),h._preCursorAt=void 0),h.connectToSortable&&lyteDomObj.prototype.manageSortable.prevSortable&&(lyteDomObj.prototype.manageSortable.prevSortable=!1),s=h._placeholder,h&&h._isDown){h._isDown=!1;var t=h._element;if(h._isMoved){var r=!1;h._isMoved=!1,g=h._initialPos,x=parseInt(h._marginTop),P=parseInt(h._marginLeft);var l=!0;if(h.onBeforeStop&&(l=w(h,e)),l){if(h.connectToSortable&&h._positionedPlceholder){var n=$(s)?$(s):B(s),p=n?n._sortableChildData:s.parentElement._sortableParentData;_lyteUiUtils.replaceWith(s,t),s=null,t._sortableChildData=p,t.removeEventListener("mousedown",z),q(t),r=!0}}else{if("original"!=h.helper)return t.remove(),document.getElementById("lyteDraggableDummy")&&s.remove(),void(o.draggedEle=null);"absolute"===g.pos?(t.style.left=g.x+"px",t.style.top=g.y+"px"):(t.style.left="",t.style.top="",t.style.position=""),h._positionedPlceholder=!1}if(void 0!==a&&(a._drop(e),a._current=null,h.currDroppable&&h.currDroppable._droppableData&&(h.currDroppable._droppableData.entered=!1,h.currDroppable=null)),h.onStop&&(l=E(h,e)),!l){if("original"!=h.helper&&!r)return t.remove(),document.getElementById("lyteDraggableDummy")&&s.remove(),void(o.draggedEle=null);"absolute"===g.pos?(t.style.left=g.x+"px",t.style.top=g.y+"px"):(t.style.left="",t.style.top="",t.style.position="")}}t.style.zIndex="",$L(i).removeClass("selected-element")}h.touchTarget=null,i=null,document.getElementById("lyteDraggableDummy")&&(document.getElementById("lyteDraggableDummy").remove(),s&&(s=null))}for(var c=e.target.ownerDocument.querySelectorAll(".selected-element"),d=e.target.ownerDocument.querySelectorAll(".lyteDraggableDummy"),u=0;u<c.length;u++){var h;(h=(t=c[u])._draggableData).cursorAt&&h._preCursorAt&&_lyteUiUtils.getRTL()&&(h.cursorAt=Object.assign({},h._preCursorAt),h._preCursorAt=void 0),h._placeholder&&(h._placeholder=null,h._positionedPlceholder=!1),h._isDown=!1,h._isMoved=!1,$L(t).removeClass("selected-element")}for(u=0;u<d;u++)d[u].remove();o.draggedEle=null}else i=null},C=function(e,t){return null==(d=e.onStart(e._element,t))||d},_=function(e,t,o,a){e.onDragStart(e._element,t,o,a)},S=function(e,t,o){return null==(d=e.onDrag(e._element,t,o))||d},w=function(e,t){return null==(d=e.onBeforeStop(e._element,e._placeholder,e._positionedPlceholder?e._placeholder.parentElement:null,t,H(e,"onBeforeStop")))||d},T=function(e,t){var o=e.onPlaceholder(e._element,t,e._element.parentElement,t?t.parentElement:null);return null==o||o},E=function(e,t){return e._element.style.display="none","mouseup"==t.type?p=document.elementFromPoint(t.clientX,t.clientY):"touchend"==t.type&&(p=document.elementFromPoint(e.touchTarget[0].clientX,e.touchTarget[0].clientY)),e._element.style.display="",void 0===(d=e.onStop(e._element,e._positionedPlceholder?e._element.parentElement:null,p,t,H(e,"onStop")))||d};r.__mousedown=z,r.__mousemove=D,r.__mouseup=L,r._element._mousedown||("string"!=typeof r.handle&&r.handle.length?r.handle.forEach((function(e){var t=$L(e,r._element)[0];t._draggableData=r,$L(t).addClass("draggable-handle-element"),t.addEventListener("mousedown",r.__mousedown),t.addEventListener("touchstart",r.__mousedown,!0)})):(r.handle._draggableData=r,$L(r.handle).addClass("draggable-handle-element"),r.handle.addEventListener("mousedown",r.__mousedown),r.handle.addEventListener("touchstart",r.__mousedown,!0)),r._element._mousedown=!0),r.onReady&&function(e){e.onReady(e._element)}(r);var A=function(e,t){return!(!e.matches(t.connectToSortable)||!e._sortableParentData.droppable)},M=function(e){var t=getComputedStyle(e),o=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),a=parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth);return e.offsetHeight-o-a},N=function(e){var t=getComputedStyle(e),o=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight),a=parseFloat(t.borderLeftWidth)+parseFloat(t.borderRightWidth);return e.offsetWidth-o-a},k=function(e,t,o,a,r,i,s,l){var p=e._element.getBoundingClientRect(),c=t.scrollTop;if(p.top-parseInt(e._marginTop)<=o.top&&c>0)r&&(e._element.style.top=i.y-s[1]-l.top-(a-c>=e.scrollSpeed?e.scrollSpeed:a-c)+c+"px"),t.scrollTop-=e.scrollSpeed;else{if(!(p.bottom>=o.bottom-3&&c<a))return cancelAnimationFrame(n),!1,void(n=null);a-c>e.scrollSpeed?(r&&(e._element.style.top=i.y-s[1]-l.top+e.scrollSpeed+c+"px"),t.scrollTop+=e.scrollSpeed):(r&&(e._element.style.top=i.y-s[1]-l.top+a-c+c+"px"),t.scrollTop+=a-c)}n=requestAnimationFrame(k.bind(this,e,t,o,a,r,i,s,l))},F=function(e,t,o,a,r,i,s){var l=e._element.getBoundingClientRect();if(y=e.scrollDivX.scrollLeft,!_lyteUiUtils.getRTL()||!_lyteUiUtils.isNegativeScroll()&&_lyteUiUtils.getRTL()&&"chrome"==I()&&!s)if(l.right>=t.right-2&&y<o)o-y>=e.scrollSpeed?(e.scrollDivX.scrollLeft+=e.scrollSpeed,s&&(e._element.style.left=a.x-r[0]-i.left+e.scrollSpeed+y+"px")):(e.scrollDivX.scrollLeft+=e.scrollSpeed-(o-y),s&&(e._element.style.left=a.x-r[0]-i.left+(e.scrollSpeed-(o-y))+y+"px"));else{if(!(l.left<=t.left+2&&y>0))return cancelAnimationFrame(f),!1,void(f=null);s&&(e._element.style.left=a.x-r[0]-i.left-(o-y>e.scrollSpeed?e.scrollSpeed:e.scrollSpeed-(o-y))+y+"px"),e.scrollDivX.scrollLeft-=e.scrollSpeed}else if(!_lyteUiUtils.isNegativeScroll()&&"chrome"==I()&&s)if(l.right>=t.right&&y<o)o-y>=5?(e.scrollDivX.scrollLeft+=5,s&&(e._element.style.left=a.x-r[0]-i.left+5+(y-o)+"px")):(e.scrollDivX.scrollLeft+=5-(o-y),s&&(e._element.style.left=a.x-r[0]-i.left+(5-(o-y))+y+"px"));else{if(!(l.left<=t.left&&y>0))return cancelAnimationFrame(f),!1,void(f=null);s&&(e._element.style.left=a.x-r[0]-i.left-(o-y+5)+"px"),e.scrollDivX.scrollLeft-=5}else if(_lyteUiUtils.isNegativeScroll()&&"chrome"==I()||"firefox"==I()||"safari"==I())if(l.right>=t.right&&y<0)o+y>=5?(e.scrollDivX.scrollLeft+=5,s&&(e._element.style.left=a.x-r[0]-i.left+5+y+"px")):(e.scrollDivX.scrollLeft+=5-(o+y),s&&(e._element.style.left=a.x-r[0]-i.left+(5-(o+y))+y+"px"));else{if(!(l.left<=t.left&&y>-o))return cancelAnimationFrame(f),!1,void(f=null);s&&(e._element.style.left=a.x-r[0]-i.left+(y-5)+"px"),e.scrollDivX.scrollLeft-=5}else if("ie"==I()||"edge"==I())if(l.right>=t.right&&y>0)e.scrollDivX.scrollLeft-=y>=5?5:y;else{if(!(l.left<=t.left&&y<o))return cancelAnimationFrame(f),!1,void(f=null);s&&(e._element.style.left=a.x-r[0]-i.left-y-5+"px"),e.scrollDivX.scrollLeft+=5}f=requestAnimationFrame(F.bind(this,e,t,o,a,r,i,s))},I=function(){return navigator.userAgent.search("rv:11")>=0?"ie":navigator.userAgent.search("Edge")>=0?"edge":navigator.userAgent.search("Chrome")>=0?"chrome":navigator.userAgent.search("Firefox")>=0?"firefox":navigator.userAgent.search("Safari")>=0&&navigator.userAgent.search("Chrome")<0?"safari":void 0},R=function(t,o){var a=e.getComputedStyle(t),r=t.getBoundingClientRect();return o.x>r.left+parseFloat(a.paddingLeft||0)&&o.x<r.right-parseFloat(a.paddingRight||0)&&o.y>r.top+parseFloat(a.paddingTop||0)&&o.y<r.bottom-parseFloat(a.paddingBottom||0)},O=function(e,t,o){for(var a=e.children,r=0,i=[],s=0;s<a.length;s++)"TEMPLATE"!=a[s].tagName&&"dummy"!=a[s].id?i.push(a[s]):r++;return r==a.length||o.getBoundingClientRect().top>i[i.length-1].getBoundingClientRect().bottom},$=function(e){for(;e.previousElementSibling;)if("TEMPLATE"!=(e=e.previousElementSibling).tagName&&$L(e).hasClass("sortable-element"))return e;return null},B=function(e){for(;e.nextElementSibling;)if("TEMPLATE"!=(e=e.nextElementSibling).tagName&&$L(e).hasClass("sortable-element"))return e;return null},q=function(e){e.style.left="",e.style.top="",e.style.zIndex="",e.style.position="",$L(e).addClass("sortable-element "+e._sortableChildData.sortableElemClass),e.classList.remove("draggable-handle-element","draggable-element")},V=function(e){for(;e;){if(e.id&&"lyteDraggableDummy"===e.id)return!0;e=e.parentElement}return!1},U=function(e,t){for(var o=0;o<e.restrict.length;o++)if(t.matches(e.restrict[o]))return!1;return!0},H=function(e,t){if(e.connectToSortable&&e._positionedPlceholder){var o,a;if("onBeforeStop"===t&&(o=e._placeholder,a=e._placeholder.parentElement),"onStop"===t&&(o=e._element,a=e._element.parentElement),a._sortableParentData.omitRestricted){for(var r=Array.from(a.children).filter((function(e){return"TEMPLATE"!=e.tagName})),i=0;i<r.length;i++)U(e,r[i])||(r.splice(i,1),--i);return r.indexOf(o)}return Array.from(a.children).filter((function(e){return"TEMPLATE"!=e.tagName})).indexOf(o)}return-1},Y=function(){var t=e.navigator.userAgent,o=e.navigator.platform,a=null;return-1!==["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(o)?a="Mac OS":-1!==["iPhone","iPad","iPod"].indexOf(o)?a="iOS":-1!==["Win32","Win64","Windows","WinCE"].indexOf(o)?a="Windows":/Android/.test(t)?a="Android":!a&&/Linux/.test(o)&&(a="Linux"),a};return this}}else if(this.length>1)for(var j=this,W=0;W<j.length;W++)o.destroy(j[W]);else o.destroy(this[0]);function z(t){if(3!=t.which){var r=t.target.closest(".draggable-handle-element");if(o.draggedEle=r,r){r._draggableData.bubbles||t.stopPropagation();var i=r._draggableData,s=i._element,l=s.getBoundingClientRect(),n=e.getComputedStyle(s);l.width,l.height;i._offParent=s.offsetParent,i._parent=s.parentElement;var p=!0;if(i.onStart&&(p=C(i,t)),!p)return;g={x:s.offsetLeft,y:s.offsetTop,pos:$L(s).css("position")},i.cursorAt?v=[i.cursorAt.left,i.cursorAt.top]:"mousedown"==t.type?v=[t.clientX-l.left,t.clientY-l.top]:"touchstart"==t.type&&(v=[t.touches[0].clientX-l.left,t.touches[0].clientY-l.top]),"touchstart"==t.type&&(document.addEventListener("touchmove",D,!0),document.addEventListener("touchend",L,!0),i._element.classList.add("stopDefaultMove")),n.marginTop&&(x=n.marginTop),n.marginLeft&&(P=n.marginLeft),i.scrollDivY&&"relative"==e.getComputedStyle(i.scrollDivY).position&&i.scrollDivY.contains(s)?i._isRelativeY=!0:i._isRelativeY=!1,i.scrollDivX&&"relative"==e.getComputedStyle(i.scrollDivX).position&&i.scrollDivX.contains(s)?i._isRelativeX=!0:i._isRelativeX=!1,i._isDown=!0,i._initialPos=g,i._offset=v,i._marginLeft=P,i._marginTop=x,$L(r).addClass("selected-element"),void 0!==a&&(a._current=i._element),"mousedown"==t.type&&(document.addEventListener("mousemove",D),document.addEventListener("mouseup",L),"Windows"===Y()&&(o.mouseMoveTriggered=!0))}else r=null}}})}(window),function(e){if(lyteDomObj){var t,o,a,r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=["January","February","March","April","May","June","July","August","September","October","November","December"],s=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],n=["Su","Mo","Tu","We","Th","Fr","Sa"],p=[31,28,31,30,31,30,31,31,30,31,30,31],c="lyteMoment",d=19,u=80,h={"Etc/GMT+12":-720,"Etc/GMT+11":-660,"Pacific/Midway":-660,"Pacific/Niue":-660,"Pacific/Pago_Pago":-660,"Pacific/Samoa":-660,"US/Samoa":-660,"America/Adak":-540,"America/Atka":-540,"Etc/GMT+10":-600,HST:-600,"Pacific/Honolulu":-600,"Pacific/Johnston":-600,"Pacific/Rarotonga":-600,"Pacific/Tahiti":-600,"SystemV/HST10":-600,"US/Aleutian":-540,"US/Hawaii":-600,"Pacific/Marquesas":-510,AST:-480,"America/Anchorage":-480,"America/Juneau":-480,"America/Metlakatla":-480,"America/Nome":-480,"America/Sitka":-480,"America/Yakutat":-480,"Etc/GMT+9":-540,"Pacific/Gambier":-540,"SystemV/YST9":-540,"SystemV/YST9YDT":-480,"US/Alaska":-480,"America/Ensenada":-420,"America/Los_Angeles":-420,"America/Santa_Isabel":-420,"America/Tijuana":-420,"America/Vancouver":-420,"Canada/Pacific":-420,"Etc/GMT+8":-480,"Mexico/BajaNorte":-420,PST:-480,PST8PDT:-420,"Pacific/Pitcairn":-480,"SystemV/PST8":-480,"SystemV/PST8PDT":-420,"US/Pacific":-420,"America/Boise":-360,"America/Cambridge_Bay":-360,"America/Chihuahua":-360,"America/Creston":-420,"America/Dawson":-420,"America/Dawson_Creek":-420,"America/Denver":-360,"America/Edmonton":-360,"America/Fort_Nelson":-420,"America/Hermosillo":-420,"America/Inuvik":-360,"America/Mazatlan":-360,"America/Ojinaga":-360,"America/Phoenix":-420,"America/Shiprock":-360,"America/Whitehorse":-420,"America/Yellowknife":-360,"Canada/Mountain":-360,"Canada/Yukon":-420,"Etc/GMT+7":-420,MST:-420,MST7MDT:-360,"Mexico/BajaSur":-360,Navajo:-360,PNT:-420,"SystemV/MST7":-420,"SystemV/MST7MDT":-360,"US/Arizona":-420,"US/Mountain":-360,"America/Bahia_Banderas":-300,"America/Belize":-360,"America/Chicago":-300,"America/Costa_Rica":-360,"America/El_Salvador":-360,"America/Guatemala":-360,"America/Indiana/Knox":-300,"America/Indiana/Tell_City":-300,"America/Knox_IN":-300,"America/Managua":-360,"America/Matamoros":-300,"America/Menominee":-300,"America/Merida":-300,"America/Mexico_City":-300,"America/Monterrey":-300,"America/North_Dakota/Beulah":-300,"America/North_Dakota/Center":-300,"America/North_Dakota/New_Salem":-300,"America/Rainy_River":-300,"America/Rankin_Inlet":-300,"America/Regina":-360,"America/Resolute":-300,"America/Swift_Current":-360,"America/Tegucigalpa":-360,"America/Winnipeg":-300,CST:-360,CST6CDT:-300,"Canada/Central":-300,"Canada/Saskatchewan":-360,"Chile/EasterIsland":-360,"Etc/GMT+6":-360,"Mexico/General":-300,"Pacific/Easter":-360,"Pacific/Galapagos":-360,"SystemV/CST6":-360,"SystemV/CST6CDT":-300,"US/Central":-300,"US/Indiana-Starke":-300,"America/Atikokan":-300,"America/Bogota":-300,"America/Cancun":-300,"America/Cayman":-300,"America/Coral_Harbour":-300,"America/Detroit":-240,"America/Eirunepe":-300,"America/Fort_Wayne":-240,"America/Grand_Turk":-240,"America/Guayaquil":-300,"America/Havana":-240,"America/Indiana/Indianapolis":-240,"America/Indiana/Marengo":-240,"America/Indiana/Petersburg":-240,"America/Indiana/Vevay":-240,"America/Indiana/Vincennes":-240,"America/Indiana/Winamac":-240,"America/Indianapolis":-240,"America/Iqaluit":-240,"America/Jamaica":-300,"America/Kentucky/Louisville":-240,"America/Kentucky/Monticello":-240,"America/Lima":-300,"America/Louisville":-240,"America/Montreal":-240,"America/Nassau":-240,"America/New_York":-240,"America/Nipigon":-240,"America/Panama":-300,"America/Pangnirtung":-240,"America/Port-au-Prince":-240,"America/Porto_Acre":-300,"America/Rio_Branco":-300,"America/Thunder_Bay":-240,"America/Toronto":-240,"Brazil/Acre":-300,"Canada/Eastern":-240,Cuba:-240,EST:-300,EST5EDT:-240,"Etc/GMT+5":-300,IET:-240,Jamaica:-300,"SystemV/EST5":-300,"SystemV/EST5EDT":-240,"US/East-Indiana":-240,"US/Eastern":-240,"US/Michigan":-240,"America/Anguilla":-240,"America/Antigua":-240,"America/Aruba":-240,"America/Asuncion":-240,"America/Barbados":-240,"America/Blanc-Sablon":-240,"America/Boa_Vista":-240,"America/Campo_Grande":-240,"America/Caracas":-240,"America/Cuiaba":-240,"America/Curacao":-240,"America/Dominica":-240,"America/Glace_Bay":-180,"America/Goose_Bay":-180,"America/Grenada":-240,"America/Guadeloupe":-240,"America/Guyana":-240,"America/Halifax":-180,"America/Kralendijk":-240,"America/La_Paz":-240,"America/Lower_Princes":-240,"America/Manaus":-240,"America/Marigot":-240,"America/Martinique":-240,"America/Moncton":-180,"America/Montserrat":-240,"America/Port_of_Spain":-240,"America/Porto_Velho":-240,"America/Puerto_Rico":-240,"America/Santiago":-240,"America/Santo_Domingo":-240,"America/St_Barthelemy":-240,"America/St_Kitts":-240,"America/St_Lucia":-240,"America/St_Thomas":-240,"America/St_Vincent":-240,"America/Thule":-180,"America/Tortola":-240,"America/Virgin":-240,"Atlantic/Bermuda":-180,"Brazil/West":-240,"Canada/Atlantic":-180,"Chile/Continental":-240,"Etc/GMT+4":-240,PRT:-240,"SystemV/AST4":-240,"SystemV/AST4ADT":-180,"America/St_Johns":-90,CNT:-90,"Canada/Newfoundland":-90,AGT:-180,"America/Araguaina":-180,"America/Argentina/Buenos_Aires":-180,"America/Argentina/Catamarca":-180,"America/Argentina/ComodRivadavia":-180,"America/Argentina/Cordoba":-180,"America/Argentina/Jujuy":-180,"America/Argentina/La_Rioja":-180,"America/Argentina/Mendoza":-180,"America/Argentina/Rio_Gallegos":-180,"America/Argentina/Salta":-180,"America/Argentina/San_Juan":-180,"America/Argentina/San_Luis":-180,"America/Argentina/Tucuman":-180,"America/Argentina/Ushuaia":-180,"America/Bahia":-180,"America/Belem":-180,"America/Buenos_Aires":-180,"America/Catamarca":-180,"America/Cayenne":-180,"America/Cordoba":-180,"America/Fortaleza":-180,"America/Godthab":-120,"America/Jujuy":-180,"America/Maceio":-180,"America/Mendoza":-180,"America/Miquelon":-120,"America/Montevideo":-180,"America/Nuuk":-120,"America/Paramaribo":-180,"America/Punta_Arenas":-180,"America/Recife":-180,"America/Rosario":-180,"America/Santarem":-180,"America/Sao_Paulo":-180,"Antarctica/Palmer":-180,"Antarctica/Rothera":-180,"Atlantic/Stanley":-180,BET:-180,"Brazil/East":-180,"Etc/GMT+3":-180,"America/Noronha":-120,"Atlantic/South_Georgia":-120,"Brazil/DeNoronha":-120,"Etc/GMT+2":-120,"America/Scoresbysund":0,"Atlantic/Azores":0,"Atlantic/Cape_Verde":-60,"Etc/GMT+1":-60,"Africa/Abidjan":0,"Africa/Accra":0,"Africa/Bamako":0,"Africa/Banjul":0,"Africa/Bissau":0,"Africa/Casablanca":0,"Africa/Conakry":0,"Africa/Dakar":0,"Africa/El_Aaiun":0,"Africa/Freetown":0,"Africa/Lome":0,"Africa/Monrovia":0,"Africa/Nouakchott":0,"Africa/Ouagadougou":0,"Africa/Sao_Tome":0,"Africa/Timbuktu":0,"America/Danmarkshavn":0,"Antarctica/Troll":120,"Atlantic/Canary":60,"Atlantic/Faeroe":60,"Atlantic/Faroe":60,"Atlantic/Madeira":60,"Atlantic/Reykjavik":0,"Atlantic/St_Helena":0,Eire:60,"Etc/GMT":-0,"Etc/GMT+0":-0,"Etc/GMT-0":-0,"Etc/GMT0":-0,"Etc/Greenwich":-0,"Etc/UCT":-0,"Etc/UTC":-0,"Etc/Universal":-0,"Etc/Zulu":-0,"Europe/Belfast":60,"Europe/Dublin":60,"Europe/Guernsey":60,"Europe/Isle_of_Man":60,"Europe/Jersey":60,"Europe/Lisbon":60,"Europe/London":60,GB:60,"GB-Eire":60,GMT:0,GMT0:0,Greenwich:0,Iceland:0,Portugal:60,UCT:0,UTC:0,Universal:0,WET:60,Zulu:0,"Africa/Algiers":60,"Africa/Bangui":60,"Africa/Brazzaville":60,"Africa/Ceuta":120,"Africa/Douala":60,"Africa/Kinshasa":60,"Africa/Lagos":60,"Africa/Libreville":60,"Africa/Luanda":60,"Africa/Malabo":60,"Africa/Ndjamena":60,"Africa/Niamey":60,"Africa/Porto-Novo":60,"Africa/Tunis":60,"Arctic/Longyearbyen":120,"Atlantic/Jan_Mayen":120,CET:120,ECT:120,"Etc/GMT-1":60,"Europe/Amsterdam":120,"Europe/Andorra":120,"Europe/Belgrade":120,"Europe/Berlin":120,"Europe/Bratislava":120,"Europe/Brussels":120,"Europe/Budapest":120,"Europe/Busingen":120,"Europe/Copenhagen":120,"Europe/Gibraltar":120,"Europe/Ljubljana":120,"Europe/Luxembourg":120,"Europe/Madrid":120,"Europe/Malta":120,"Europe/Monaco":120,"Europe/Oslo":120,"Europe/Paris":120,"Europe/Podgorica":120,"Europe/Prague":120,"Europe/Rome":120,"Europe/San_Marino":120,"Europe/Sarajevo":120,"Europe/Skopje":120,"Europe/Stockholm":120,"Europe/Tirane":120,"Europe/Vaduz":120,"Europe/Vatican":120,"Europe/Vienna":120,"Europe/Warsaw":120,"Europe/Zagreb":120,"Europe/Zurich":120,MET:120,Poland:120,ART:120,"Africa/Blantyre":120,"Africa/Bujumbura":120,"Africa/Cairo":120,"Africa/Gaborone":120,"Africa/Harare":120,"Africa/Johannesburg":120,"Africa/Khartoum":120,"Africa/Kigali":120,"Africa/Lubumbashi":120,"Africa/Lusaka":120,"Africa/Maputo":120,"Africa/Maseru":120,"Africa/Mbabane":120,"Africa/Tripoli":120,"Africa/Windhoek":120,"Asia/Amman":180,"Asia/Beirut":180,"Asia/Damascus":180,"Asia/Famagusta":180,"Asia/Gaza":180,"Asia/Hebron":180,"Asia/Jerusalem":180,"Asia/Nicosia":180,"Asia/Tel_Aviv":180,CAT:120,EET:180,Egypt:120,"Etc/GMT-2":120,"Europe/Athens":180,"Europe/Bucharest":180,"Europe/Chisinau":180,"Europe/Helsinki":180,"Europe/Kaliningrad":120,"Europe/Kiev":180,"Europe/Mariehamn":180,"Europe/Nicosia":180,"Europe/Riga":180,"Europe/Sofia":180,"Europe/Tallinn":180,"Europe/Tiraspol":180,"Europe/Uzhgorod":180,"Europe/Vilnius":180,"Europe/Zaporozhye":180,Israel:180,Libya:120,"Africa/Addis_Ababa":180,"Africa/Asmara":180,"Africa/Asmera":180,"Africa/Dar_es_Salaam":180,"Africa/Djibouti":180,"Africa/Juba":180,"Africa/Kampala":180,"Africa/Mogadishu":180,"Africa/Nairobi":180,"Antarctica/Syowa":180,"Asia/Aden":180,"Asia/Baghdad":180,"Asia/Bahrain":180,"Asia/Istanbul":180,"Asia/Kuwait":180,"Asia/Qatar":180,"Asia/Riyadh":180,EAT:180,"Etc/GMT-3":180,"Europe/Istanbul":180,"Europe/Kirov":180,"Europe/Minsk":180,"Europe/Moscow":180,"Europe/Simferopol":180,"Indian/Antananarivo":180,"Indian/Comoro":180,"Indian/Mayotte":180,Turkey:180,"W-SU":180,"Asia/Tehran":270,Iran:270,"Asia/Baku":240,"Asia/Dubai":240,"Asia/Muscat":240,"Asia/Tbilisi":240,"Asia/Yerevan":240,"Etc/GMT-4":240,"Europe/Astrakhan":240,"Europe/Samara":240,"Europe/Saratov":240,"Europe/Ulyanovsk":240,"Europe/Volgograd":240,"Indian/Mahe":240,"Indian/Mauritius":240,"Indian/Reunion":240,NET:240,"Asia/Kabul":270,"Antarctica/Mawson":300,"Asia/Aqtau":300,"Asia/Aqtobe":300,"Asia/Ashgabat":300,"Asia/Ashkhabad":300,"Asia/Atyrau":300,"Asia/Dushanbe":300,"Asia/Karachi":300,"Asia/Oral":300,"Asia/Qyzylorda":300,"Asia/Samarkand":300,"Asia/Tashkent":300,"Asia/Yekaterinburg":300,"Etc/GMT-5":300,"Indian/Kerguelen":300,"Indian/Maldives":300,PLT:300,"Asia/Calcutta":330,"Asia/Colombo":330,"Asia/Kolkata":330,IST:330,"Asia/Kathmandu":345,"Asia/Katmandu":345,"Antarctica/Vostok":360,"Asia/Almaty":360,"Asia/Bishkek":360,"Asia/Dacca":360,"Asia/Dhaka":360,"Asia/Kashgar":360,"Asia/Omsk":360,"Asia/Qostanay":360,"Asia/Thimbu":360,"Asia/Thimphu":360,"Asia/Urumqi":360,BST:360,"Etc/GMT-6":360,"Indian/Chagos":360,"Asia/Rangoon":390,"Asia/Yangon":390,"Indian/Cocos":390,"Antarctica/Davis":420,"Asia/Bangkok":420,"Asia/Barnaul":420,"Asia/Ho_Chi_Minh":420,"Asia/Hovd":420,"Asia/Jakarta":420,"Asia/Krasnoyarsk":420,"Asia/Novokuznetsk":420,"Asia/Novosibirsk":420,"Asia/Phnom_Penh":420,"Asia/Pontianak":420,"Asia/Saigon":420,"Asia/Tomsk":420,"Asia/Vientiane":420,"Etc/GMT-7":420,"Indian/Christmas":420,VST:420,"Asia/Brunei":480,"Asia/Choibalsan":480,"Asia/Chongqing":480,"Asia/Chungking":480,"Asia/Harbin":480,"Asia/Hong_Kong":480,"Asia/Irkutsk":480,"Asia/Kuala_Lumpur":480,"Asia/Kuching":480,"Asia/Macao":480,"Asia/Macau":480,"Asia/Makassar":480,"Asia/Manila":480,"Asia/Shanghai":480,"Asia/Singapore":480,"Asia/Taipei":480,"Asia/Ujung_Pandang":480,"Asia/Ulaanbaatar":480,"Asia/Ulan_Bator":480,"Australia/Perth":480,"Australia/West":480,CTT:480,"Etc/GMT-8":480,Hongkong:480,PRC:480,Singapore:480,"Australia/Eucla":525,"Asia/Chita":540,"Asia/Dili":540,"Asia/Jayapura":540,"Asia/Khandyga":540,"Asia/Pyongyang":540,"Asia/Seoul":540,"Asia/Tokyo":540,"Asia/Yakutsk":540,"Etc/GMT-9":540,JST:540,Japan:540,"Pacific/Palau":540,ROK:540,ACT:570,"Australia/Adelaide":570,"Australia/Broken_Hill":570,"Australia/Darwin":570,"Australia/North":570,"Australia/South":570,"Australia/Yancowinna":570,AET:600,"Antarctica/DumontDUrville":600,"Antarctica/Macquarie":600,"Asia/Ust-Nera":600,"Asia/Vladivostok":600,"Australia/ACT":600,"Australia/Brisbane":600,"Australia/Canberra":600,"Australia/Currie":600,"Australia/Hobart":600,"Australia/Lindeman":600,"Australia/Melbourne":600,"Australia/NSW":600,"Australia/Queensland":600,"Australia/Sydney":600,"Australia/Tasmania":600,"Australia/Victoria":600,"Etc/GMT-10":600,"Pacific/Chuuk":600,"Pacific/Guam":600,"Pacific/Port_Moresby":600,"Pacific/Saipan":600,"Pacific/Truk":600,"Pacific/Yap":600,"Australia/LHI":630,"Australia/Lord_Howe":630,"Antarctica/Casey":660,"Asia/Magadan":660,"Asia/Sakhalin":660,"Asia/Srednekolymsk":660,"Etc/GMT-11":660,"Pacific/Bougainville":660,"Pacific/Efate":660,"Pacific/Guadalcanal":660,"Pacific/Kosrae":660,"Pacific/Norfolk":660,"Pacific/Noumea":660,"Pacific/Pohnpei":660,"Pacific/Ponape":660,SST:660,"Antarctica/McMurdo":720,"Antarctica/South_Pole":720,"Asia/Anadyr":720,"Asia/Kamchatka":720,"Etc/GMT-12":720,Kwajalein:720,NST:720,NZ:720,"Pacific/Auckland":720,"Pacific/Fiji":720,"Pacific/Funafuti":720,"Pacific/Kwajalein":720,"Pacific/Majuro":720,"Pacific/Nauru":720,"Pacific/Tarawa":720,"Pacific/Wake":720,"Pacific/Wallis":720,"NZ-CHAT":765,"Pacific/Chatham":765,"Etc/GMT-13":780,MIT:780,"Pacific/Apia":780,"Pacific/Enderbury":780,"Pacific/Fakaofo":780,"Pacific/Tongatapu":780,"Etc/GMT-14":840,"Pacific/Kiritimati":840,UT:0,EDT:-240,CDT:-300,MDT:-360,PDT:-420},m=new RegExp("("+Object.keys(h).join("|")+")"),y=[{val:"YYYY",type:"year",regex:/\d{4}/,len:4},{val:"GGGG",type:"year",regex:/\d{4}/,len:4,isWEG:!0},{val:"gggg",type:"year",regex:/\d{4}/,len:4,isWEG:!0},{val:"YY",type:"year",regex:/\d{2}/,len:2},{val:"GG",type:"year",regex:/\d{2}/,len:2,isWEG:!0},{val:"gg",type:"year",regex:/\d{2}/,len:2,isWEG:!0},{val:"MMMM",type:"month",regex:/[A-z]{3,}/,long:!0,str:!0,array:i},{val:"MMM",str:!0,type:"month",regex:/[A-z]{3,}/,array:r},{val:"Mo",suff:!0,type:"month",regex:/\d{1,2}(?=st|nd|rd|th)/,max:12},{val:"MM",type:"month",regex:/\d{2}/,len:2,max:12,alt:!0},{val:"M",type:"month",regex:/\d{1,2}/,max:12},{val:"DDDD",type:"date",regex:/\d{3}/,len:3,year:!0},{val:"DDDo",type:"date",suff:!0,regex:/\d{1,3}(?=st|nd|rd|th)/,len:3,year:!0,ignore:/\d{3}(?=st|nd|rd|th)/},{val:"DDD",type:"date",regex:/\d{1,3}/,year:!0,ignore:/\d{3}/},{val:"Do",type:"date",suff:!0,regex:/\d{1,2}(?=st|nd|rd|th)/},{val:"DD",type:"date",regex:/\d{2}/,len:2,alt:!0},{val:"D",type:"date",regex:/\d{1,2}/},{val:"[W]Wo",type:"week",suff:!0,regex:new RegExp("[W]d{1,2}(?=st|nd|th|rd)"),isWEG:!0},{val:"[W]wo",ignore:1,type:"week",suff:!0,regex:new RegExp("[W]d{1,2}(?=st|nd|th|rd)"),isWEG:!0},{val:"[W]WW",type:"week",regex:new RegExp("W(\\d{2})"),len:2,isWEG:!0,match:1},{val:"[W]ww",ignore:1,type:"week",regex:new RegExp("W(\\d{2})"),len:2,isWEG:!0,match:1},{val:"[W]W",type:"week",regex:new RegExp("W(\\d{1,2})"),isWEG:!0,match:1},{val:"[W]w",ignore:1,type:"week",regex:new RegExp("W(\\d{1,2})"),isWEG:!0,match:1},{val:"Wo",type:"week",pref:0,suff:!0,regex:new RegExp("[W]d{1,2}(?=st|nd|th|rd)"),isWEG:!0},{val:"wo",type:"week",pref:0,ignore:1,suff:!0,regex:new RegExp("[W]d{1,2}(?=st|nd|th|rd)"),isWEG:!0},{val:"WW",type:"week",pref:0,regex:new RegExp("(\\d{2})"),len:2,isWEG:!0,match:1},{val:"ww",type:"week",pref:0,ignore:1,regex:new RegExp("(\\d{2})"),len:2,isWEG:!0,match:1},{val:"W",type:"week",pref:0,regex:new RegExp("(\\d{1,2})"),isWEG:!0,match:1},{val:"w",type:"week",pref:0,ignore:1,regex:new RegExp("(\\d{1,2})"),isWEG:!0,match:1},{val:"E",type:"day",regex:/\d{1}/,isWEG:!0},{val:"e",type:"day",regex:/\d{1}/,isWEG:!0,local:!0},{val:"A",type:"meridian",regex:/AM|PM/,str:!0,time:!0},{val:"a",type:"meridian",regex:/am|pm/,str:!0,time:!0,lower:!0},{val:"ZZ",type:"timezone",regex:/(\+|\-)(\d{2})(\d{2})$/,time:!0,len:2},{val:"Z",type:"timezone",regex:/(\+|\-)(\d{2}):(\d{2})$/,time:!0,len:2},{val:"HH",type:"hour",regex:/\d{2}/,railway:!0,time:!0,len:2,max:23},{val:"H",type:"hour",regex:/\d{1,2}/,railway:!0,time:!0,max:23},{val:"hh",type:"hour",regex:/\d{2}/,time:!0,len:2,max:12},{val:"h",type:"hour",regex:/\d{1,2}/,time:!0,max:12},{val:"kk",type:"hour",regex:/\d{2}/,railway:!0,time:!0,len:2,max:24,deduct:-1},{val:"k",type:"hour",regex:/\d{1,2}/,railway:!0,time:!0,max:24,deduct:-1},{val:"mm",type:"minute",regex:/\d{2}/,time:!0,len:2,max:59},{val:"m",type:"minute",regex:/\d{1,2}/,time:!0,max:59},{val:"ss",type:"second",regex:/\d{2}/,time:!0,len:2,max:59},{val:"s",type:"second",regex:/\d{1,2}/,time:!0,max:59},{val:"S",type:"millisecond",regex:/[0-9]{1,}/,time:!0,valForm:/[S]+/},{val:"zz",type:"timezone",regex:m,str:!0,time:!0},{val:"z",type:"timezone",regex:m,str:!0,time:!0},{val:"X",type:"timestamp",regex:/\d{10}/,time:!0},{val:"x",type:"timestamp",regex:/\d{13,}/,time:!0,milli:!0},{val:"dddd",type:"longdate",regex:/[A-z]{3,}/,long:!0,str:!0,array:s},{val:"ddd",type:"longdate",regex:/[A-z]{3}/,str:!0,array:l},{val:"dd",type:"longdate",regex:/[A-z]{2}/,str:!0,array:n},{val:"do",type:"longdate",regex:/\d{1}(?=st|nd|rd|th)/,suff:!0},{val:"d",type:"longdate",regex:/\d{1}/},{val:"Qo",type:"quarter",regex:/\d{1}(?=st|nd|rd|th)/,suff:!0},{val:"Q",type:"quarter",regex:/\d{1}/}];function f(t,o,a){var r=this.parseFormat(this.replaceTxt(t)).reverse();return t=t.replace(/{{|}}/g,""),r.forEach((function(t){var r=t.format.array||[],i=e._lyteUiUtils;"meridian"==t.format.type&&(r=t.format.lower?["am","pm"]:["AM","PM"]),r.forEach((function(e){var r=i?i.i18n(e):e;a&&(r=a(o,e,r,t.format.val)||r),e!=r&&(o=g(o,e,r))}))})),o}function g(e,t,o){return-1!=e.indexOf(o)?g(e.replace(o,t),t,o):e}function v(e,a,r,i){var s,l,n;e&&(this._arg=e),this._format=a,function(e){if(!e)return!0;var t=e.constructor;return t==Array&&!t.length||t==Object&&!Object.keys(e).length}(e)&&(e=new Date),r&&r.constructor==Object&&(i=r.lL,s=r.i18n,l=r.i18n_callback,n=r.ignore_timezone,r=r.uL),n||this.timezone(t,o),s&&a&&e&&e.constructor==String&&(e=f.call(this,a,e,l)),this.uL=null==r?d:r,this.lL=null==i?u:i,x(r)&&x(i)||(this.alt=!!r),this._isValid=I.call(this,e,a)}function x(e){return null!=e}function P(e,t,o){for(var a=0,r=0;r<e;r++)a+=p[r],t&&1==r&&(a+=1);return a+(o||0)}function b(e){return 2==(e+="").length&&(e=M(parseInt(e))),(e=parseInt(e))%4==0&&e%100!=0||e%400==0}function D(e){var t=e.match(/{{/),o=e.match(/}}/);return t&&o?D(e=e.replace(e.slice(t.index,o.index+2),(function(e){for(var t="",o=0;o<e.length-4;o++)t+="*";return t}))):e}function L(e,t){for(var o,a=$L.extend(!0,[],y),r=[],i=0;i<a.length;i++){var s=a[i];if(!e.length)break;if(e.indexOf(s.val)>-1){if(t&&s.alt){o=!0;continue}o&&(s.val=a[i-1].val),o=!1,r.push({format:s,index:e.indexOf(s.val)}),e=e.replace(s.val,Math.pow(10,s.val.length-1)),i--}}return r.sort((function(e,t){return e.index-t.index}))}function C(e,t,o,a){return e=e.replace(t,a||""),o&&(e=e.replace(/st|nd|rd|th/,"")),e}function _(e,t){var o,a;for(a=0;a<e.length;a++)if(new RegExp(e[a]).test(t)){o=e[a];break}return{mon:o,index:a}}function S(e,t,o,a){var s;if(o){var l=_(a?i:r,e);s=l.mon,e=l.index,(!s||e>11)&&(e="Invalid")}else(e=parseInt(e)-1)>11&&(e="Invalid");return{val:e,mon:s}}function w(e){var t,o=parseInt(e[2]);return minute=parseInt(e[3]),t=60*o+minute,"+"==e[1]?-1*t:t}function T(e,t){if(e=parseInt(e),ini=0,ind=0,inc=p[0],e>365+(t?1:0))return{};for(;ini+inc<e;)ini+=inc,ind++,inc=p[ind],t&&1==ind&&(inc+=1);return{day:e-ini,mon:ind}}function E(e){if(null!=e.day||e.week){var t=new Date(e.year,0,1);if(!I.call(this,t))return{};var o=t.getDay(),a=b(e.year||t.getFullYear()),r=1+e.week==1?e.day-o+1:2==e.week?8-o+e.day:8-o+e.day+7*(e.week-2);if(r>365+(a?1:0)&&new Date(e.year+1,0,1).getDay()>4&&(e.year+=1,r-=365+(a?1:0)),r>365+(a?1:0)||0==e.day||e.day>7)return void(e.month=e.year=e.date="Invalid");var i=T(r,a);e.month=i.mon,e.date=i.day}if(e.year){var s=parseInt(e.year);s<100&&(e.year=M(s))}e.month<0&&(e.month="Invalid"),e.date<1&&(e.date="Invalid")}function A(e,t){var o=e.getFullYear(),a=b(o),r=e.getMonth(),i=e.getDate(),s=new Date(o,0),l=s.getDay(),n=s.getDate(),p=e.getDay();if(total=P(r,a),!t){if(0==r&&l>4&&i<=8-l){var c=A(new Date(o-1,11,31));return c.day=(c.day+i)%8||1,c.repYear=!0,c}l>4&&n<=8-l?(i-=8-l,l=0):i--}return{week:Math.ceil((total+l+i)/7),day:p}}function M(e){var t=e+"";if(e=parseInt(e),2==t.length){var o=Number($L.moment().format("YYYY")),a=parseInt(o/100),r=o%100,i=(this.uL,(r-(this.lL||u)+100)%100);e=r>i?e<i?a+1+""+k(e,2):a+""+k(e,2):e<i?a+""+k(e,2):a-1+""+k(e,2)}return e}function N(e,t){for(var o,a,r,i={},s=new Date,l=L(D(t),!0),n=e,c=t=t.replace(/{{|}}/g,""),d=0;d<l.length;d++){var u,m=l[d].format;switch(m.type){case"date":case"year":case"week":case"day":m.regex.test(e)?(u="year"==m.type?e.match(m.regex)[m.match||0]:parseInt(e.match(m.regex)[m.match||0]),i[m.type]=u,e=C(e,m.regex,m.suff),n=C(n,m.regex,m.suff,m.val),"week"==m.type&&(e=C(e,"W")),"day"==m.type&&m.local&&i.day++,m.year&&(i.date=T(i.date).day)):i.year&&i.week?(i[m.type]=1,t=t.replace(m.val,""),c=c.replace(m.val,"")):i[m.type]="Invalid",/date/i.test(m.type)&&0==i[m.type]&&(i[m.type]="Invalid");break;case"month":m.regex.test(e)?(u=S(e.match(m.regex)[0],m.suff,m.str,m.long),i.month=u.val,e=C(e,u.mon||m.regex,m.suff),n=C(n,u.mon||m.regex,m.suff,m.val)):i.month="Invalid",i.month<0&&(i.month="Invalid");break;case"quarter":m.regex.test(e)&&(u=e.match(m.regex)[0],i.quarter=u,e=C(e,u,m.suff),n=C(n,u,m.suff,m.val));break;case"longdate":m.regex.test(e)&&(u=m.str?_(m.array,e.match(m.regex)[0]):parseInt(e.match(m.regex)[0]),i.longdate=x(u.index)?u.index:u,e=C(e,u.mon||u,m.suff),n=C(n,u.mon||u,m.suff,m.val));break;case"hour":case"minute":case"second":case"meridian":m.regex.test(e)&&(m.str?u=e.match(m.regex)[0]:(u=parseInt(e.match(m.regex)[0]),m.railway&&(i.railway=!0)),m.deduct&&u--,i[m.type]=u,m.max&&u>m.max&&(i[m.type]="Invalid"),e=C(e,m.regex),n=C(n,m.regex,m.suff,m.val));break;case"millisecond":m.regex.test(e)&&(u=e.match(m.regex)[0],i.millisecond=parseFloat(u),e=C(e,u).replace(/[S]+/,""),n=C(n,m.regex,m.suff,m.val),c=c.replace(/[S]+/,"S"));break;case"timestamp":m.regex.test(e)&&(u=parseInt(e.match(m.regex)[0]),i.timestamp=u*(m.milli?1:1e3),e=C(e,u),n=C(n,u,m.suff,m.val));break;case"timezone":m.regex.test(e)&&(m.str?(u=e.match(m.regex)[0],u=-h[u]):u=w(e.match(m.regex)),i.timezone=u,e=C(e,m.regex),n=C(n,m.regex,m.suff,m.val))}t=t.replace(m.valForm||m.val,"")}if(o=new Date(s.getFullYear(),x(i.month)?i.month:s.getMonth(),i.date||1,i.hour||0,i.minute||0,i.second||0),x(i.day)||x(i.week)){var y=i.date;x(i.year)||(i.year=o.getFullYear()),x(i.day)||(i.day=1),E.call(this,i),x(y)&&(i.date>y&&i.month++,i.date=y)}if(x(i.longdate)&&i.day&&i.day!=i.longdate?o.setFullYear("Invalid"):x(i.year)&&o.setFullYear(M(i.year)),x(i.month)&&o.setMonth(i.month),x(i.date)&&o.setDate(i.date<=p[o.getMonth()]+(1==o.getMonth()&&b(o.getFullYear())?1:0)?i.date:"Invalid"),x(i.hour)){var f=i.meridian;o.setHours(i.railway?(a=i.hour,(r=f?/pm/i.test(f):i.hour>11)&&a<12?a+=12:12!=a||r||(a=0),a):/pm/i.test(f)?i.hour<12?i.hour+12:i.hour:i.hour%12)}if(x(i.minute)&&o.setMinutes(i.minute),x(i.second)&&o.setSeconds(i.second),x(i.millisecond)&&o.setMilliseconds(i.millisecond),x(i.timestamp)&&(o=new Date(i.timestamp)),x(i.timezone)){var g=o.getTimezoneOffset();if(i.timezone-=g,o.setMinutes(o.getMinutes()+i.timezone),g!=o.getTimezoneOffset()){var v=new Date(this._arg);"Invalid Date"==v.toString()?o.setMinutes(o.getMinutes()-i.timezone):o=v}}else x(this._timezone)&&(i.timezone=this.timezoneOffset(o)-o.getTimezoneOffset(),o.setMinutes(o.getMinutes()+i.timezone));var P="YYYY-MM-DDTHH:mm:ssZ";return c!=P&&e.length==t.length&&c==n&&I.call(this,o)?this._isCorrectFormat=!0:this._format&&c!=P?void 0:I.call(this,new Date(this._arg))}function k(e,t,o,a){var r="";if(a&&e++,o&&(r=function(e){if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}(e)),t){e=e.toString();for(var i=1;i<t;i++)e.length<=i&&(e="0"+e)}return e+r}function F(e){var t,o=L(D(e)),a={},r=this.toDate(),i=this.split_date(r),s=function(){return new Date(r.getTime()+1e3*(r.getTimezoneOffset()-i.timezone)*60)};e=function(e,t){for(var o=0,a=0;a<t.length;a++)e=e.slice(0,t[a].index+o)+t[a].format.val+c+e.slice(t[a].index+o+t[a].format.val.length),o+=10;return e}(e.replace(/{{|}}/g,""),o);for(var l=0;l<o.length;l++){var n=o[l].format;switch(n.type){case"date":e=e.replace(n.val+c,k(n.year?P(i.month-1,b(i.year),i.date):i.date,n.len,n.suff));break;case"month":e=n.str?e.replace(n.val+c,n.array[i.month-1]):e.replace(n.val+c,k(i.month,n.len,n.suff));break;case"year":e=e.replace(n.val+c,2==n.len?k(i.year%100,2):4==(i.year+"").length?i.year:k(i.year,4)),a.year=a.year||[],a.year.push(n);break;case"day":case"week":a.flag=!0,a[n.type]=a[n.type]||[],a[n.type].push(n);break;case"quarter":e=e.replace(n.val+c,k(Math.ceil(i.month/3),null,n.suff));break;case"longdate":var p=(t=t||s()).getDay();e=n.str?e.replace(n.val+c,n.array[p]):e.replace(n.val+c,k(p,null,n.suff));break;case"hour":var d=i.hour;e=e.replace(n.val+c,k(n.railway?d:d>12?d%12:d||12,n.len,null,n.deduct));break;case"minute":e=e.replace(n.val+c,k(i.minute,n.len));break;case"second":e=e.replace(n.val+c,k(i.second,n.len));break;case"millisecond":e=e.replace(n.val+c,k(r.getMilliseconds(),3)).replace(/\\S+/,"");break;case"timezone":var u="";if(!n.str){var h=i.timezone,m=(d=k(Math.abs(parseInt(h/60)),2),k(Math.abs(h%60),2)),y=h<=0?"+":"-";u="ZZ"==n.val?y+d+m:y+d+":"+m}e=e.replace(n.val+c,u);break;case"timestamp":u="","X"==n.val?u+=parseInt(r.getTime()/1e3):u+=r.getTime(),e=e.replace(n.val+c,u);break;case"meridian":var f=i.meridian;n.lower&&(f=f.toLowerCase()),e=e.replace(n.val+c,f)}}if(a.flag){var g=A(t=t||s());if(a.week)for(var v=0;v<a.week.length;v++){var x=a.week[v],C=A(t,x.ignore);e=e.replace(x.val+c,(0==x.pref?"":"W")+k(C.week,x.len,x.suff))}if(a.day)for(v=0;v<a.day.length;v++)e=e.replace(a.day[v].val+c,g.day-(a.day[v].local?1:0));if(g.repYear&&a.year)for(v=0;v<a.year.length;v++)e=e.replace(2==a.year[v].len?i.year%100:i.year,(2==a.year[v].len?i.year%100:i.year)-1)}return e.replace(/{{|}}/g,"")}function I(e,t){var o=e.constructor;if(o==Date)return this._dateObj=e,this._isMoment=!0,"Invalid Date"!=e.toString();if(o==String){if(t){var a=N.call(this,e,t);return a&&this._isCorrectFormat&&(this._format=t),a}if(this.constructFormat)return I.call(this,e,this.constructFormat.call(this,e));console.warn("Its not supported in lyte-moment-basic.js. Add lyte-moment-additional.js for format construction")}else{if(o==Array)return I.call(this,new Date(Date.parse(Date.apply(Date,o))).getTime());if(o==Number)return e*=/^\d{10}$/.test(e)?1e3:1,I.call(this,new Date(e));if(e._isMoment)return I.call(this,e._dateObj.getTime())}}function R(e,t,o){return e.toLocaleString("en-US",{timeZone:t,timeZoneName:o||"short"})}!function(){try{(new Date).toLocaleString("en-US",{timeZone:"Europe/London"})}catch(e){a=!0}}(),v.prototype={isDef:x,find:_,totdate:P,isLeap:b,dayArr:p,getDObj:function(){var e=this._dateObj,t=this._timezone;if(t){if(!this.is_IE)return new Date(R(e,t));e.setMinutes(e.getMinutes()+e.getTimezoneOffset()-this.timezoneOffset(e))}return e},getWeekReverse:A,weekShort:n,weekMid:l,weekLong:s,longMon:i,shortMon:r,week:"W",crctLength:k,formats:y,replace:C,inbuiltFormats:{},getCorrectYear:M,parseFormat:L,replaceTxt:D,is_IE:a,validate:function(){return!!this._isValid},toDate:function(){return this._dateObj},isSame:function(e){return!!(this.validate()&&e&&e._isMoment&&e._isValid)&&this._dateObj.getTime()==e._dateObj.getTime()},format:function(e){if(this.validate())return e=this.inbuiltFormats[e]||e||"YYYY-MM-DDTHH:mm:ssZ",F.call(this,e)},utc:function(e){return this.timezone("UTC")},local:function(e){return this.timezone(void 0)},timezone:function(e,t){return this._timezone=e,x(t)&&(h[e]="string"==typeof t?-w(t.match(/(\+|\-)(\d{2}):(\d{2})$/)):t,this.is_IE=!0),this},getCurrentTimeZone:function(){return this._timezone},parseDate:function(e,t,o){var a=e.match(/(\d+)\/(\d+)\/(\d+),\s(\d+):(\d+):(\d+)\s(AM|PM)/),r={},i=/GMT(\+|-)(\d+):(\d+):(\d+)$/,s=/GMT(\+|-)(\d+):(\d+)$/,l=/GMT(\+|-)(\d+)$/,n=/\s([A-Z]+)$/;["month","date","year","hour","minute","second"].forEach((function(e,t){r[e]=parseInt(a[t+1])})),r.meridian=a[7];var p=r.hour,c={ACDT:"GMT+10:30",ACST:"GMT+9:30",ACT:"GMT-5",ACWST:"GMT+8:45",ADT:"GMT-3",AEDT:"GMT+11",AEST:"GMT+10",AFT:"GMT+4:30",AKDT:"GMT-8",AKST:"GMT-9",AMST:"GMT-3",AMT:"GMT+4",ART:"GMT-3",AST:"GMT+3",AT:"GMT-4/GMT-3",AWST:"GMT+8",AZOST:"GMT+0",AZOT:"GMT-1",AZT:"GMT+4",BDT:"GMT+8",BIT:"GMT-12",BNT:"GMT+8",BOT:"GMT-4",BRST:"GMT-2",BRT:"GMT-3",BST:"GMT+11",BTT:"GMT+6",CAT:"GMT+2",CCT:"GMT+6:30",CDT:"GMT-4",CEST:"GMT+2",CET:"GMT+1",CHADT:"GMT+13:45",CHAST:"GMT+12:45",CHOST:"GMT+9",CHOT:"GMT+8",CHST:"GMT+10",CHUT:"GMT+10",CIST:"GMT-8",CIT:"GMT+8",CKT:"GMT-10",CLST:"GMT-3",CLT:"GMT-4",COST:"GMT-4",COT:"GMT-5",CST:"GMT+8",CT:"GMT-6/GMT-5",CVT:"GMT-1",CWST:"GMT+8:45",CXT:"GMT+7",DAVT:"GMT+7",DDUT:"GMT+10",EASST:"GMT-5",EAST:"GMT-6",EAT:"GMT+3",ECT:"GMT-5",EDT:"GMT-4",EEST:"GMT+3",EET:"GMT+2",EGST:"GMT+0",EGT:"GMT-1",EIT:"GMT+9",EST:"GMT-5",ET:"GMT-5/GMT-4",FET:"GMT+3",FJT:"GMT+12",FKST:"GMT-3",FKT:"GMT-4",FNT:"GMT-2",GALT:"GMT-6",GAMT:"GMT-9",GET:"GMT+4",GFT:"GMT-3",GILT:"GMT+12",GIT:"GMT-9",GMT:"GMT+0",GST:"GMT-2",GYT:"GMT-4",HADT:"GMT-9",HAST:"GMT-10",HKT:"GMT+8",HMT:"GMT+5",HOVST:"GMT+8",HOVT:"GMT+7",ICT:"GMT+7",IDT:"GMT+3",IOT:"GMT+6",IRDT:"GMT+4:30",IRKT:"GMT+8",IRST:"GMT+3:30",IST:"GMT+2",JST:"GMT+9",KGT:"GMT+6",KOST:"GMT+11",KRAT:"GMT+7",KST:"GMT+9",LHDT:"GMT+11",LHST:"GMT+10:30",LINT:"GMT+14",MAGT:"GMT+11",MART:"GMT-9:30",MAWT:"GMT+5",MDT:"GMT-6",MHT:"GMT+12",MIST:"GMT+11",MIT:"GMT-9:30",MMT:"GMT+6:30",MSK:"GMT+3",MST:"GMT+8",MT:"GMT-7/GMT-6",MUT:"GMT+4",MVT:"GMT+5",MYT:"GMT+8",NCT:"GMT+11",NDT:"GMT-2:30",NFT:"GMT+11",NPT:"GMT+5:45",NRT:"GMT+12",NST:"GMT-3:30",NT:"GMT-3:30",NUT:"GMT-11",NZDT:"GMT+13",NZST:"GMT+12",OMST:"GMT+6",ORAT:"GMT+5",PDT:"GMT-7",PET:"GMT-5",PETT:"GMT+12",PGT:"GMT+10",PHOT:"GMT+13",PhST:"GMT+8",PHT:"GMT+8",PKT:"GMT+5",PMDT:"GMT-2",PMST:"GMT-3",PONT:"GMT+11",PST:"GMT-8",PT:"GMT-8/GMT-7",PWT:"GMT+9",PYST:"GMT-3",PYT:"GMT-4",RET:"GMT+4",ROTT:"GMT-3",SAKT:"GMT+11",SAMT:"GMT+4",SAST:"GMT+2",SBT:"GMT+11",SCT:"GMT+4",SGT:"GMT+8",SLST:"GMT+5:30",SRET:"GMT+11",SRT:"GMT-3",SST:"GMT-11",SYOT:"GMT+3",TAHT:"GMT-10",TFT:"GMT+5",THA:"GMT+7",TJT:"GMT+5",TKT:"GMT+13",TLT:"GMT+9",TMT:"GMT+5",TOT:"GMT+13",TRT:"GMT+3",TVT:"GMT+12",ULAST:"GMT+9",ULAT:"GMT+8",USZ1:"GMT+2",UTC:"GMT+0",UYST:"GMT-2",UYT:"GMT-3",UZT:"GMT+5",VET:"GMT-4",VLAT:"GMT+10",VOLT:"GMT+4",VOST:"GMT+6",VUT:"GMT+11",WAKT:"GMT+12",WAST:"GMT+2",WAT:"GMT+1",WEST:"GMT+1",WET:"GMT+0",WFT:"GMT+12",WGST:"GMT-2",WIB:"GMT+7",WIT:"GMT+9",WST:"GMT+8",YAKT:"GMT+9",YEKT:"GMT+5"};return"PM"==a[7]?12!=p&&(r.hour+=12):12==p&&(r.hour=0),function e(a,p){if(i.test(a)){var d=a.match(i);r.timezone=(60*parseInt(d[2])+parseInt(d[3]))*("-"==d[1]?1:-1)}else if(s.test(a))d=a.match(s),r.timezone=(60*parseInt(d[2])+parseInt(d[3]))*("-"==d[1]?1:-1);else if(l.test(a))d=a.match(l),r.timezone=60*parseInt(d[2])*("-"==d[1]?1:-1);else if(p)r.timezone=0;else if(n.test(a)){var u=a.match(n)[1],h={AMT:{"Amazon Time":"GMT-4","Armenia Time":"GMT+4"},AST:{"Atlantic Standard Time":"GMT-4","Arabia Standard Time":"GMT+3"},BST:{"British Summer Time":"GMT+1","Bangladesh Standard Time":"GMT+6","Bougainville Standard Time":"GMT+11"},CDT:{"Central Daylight Time":"GMT-5","Cuba Daylight Time":"GMT-4"},CST:{"Central Standard Time":"GMT-6","Cuba Standard Time":"GMT-5","China Standard Time":"GMT+8"},GST:{"Gulf Standard Time":"GMT+4","South Georgia Time":"GMT-2"},IST:{"Indian Standard Time":"GMT+5:30","Irish Standard Time":"GMT+1","Israel Standard Time":"GMT+2"},MST:{"Mountain Standard Time":"GMT-7","Malaysia Standard Time":"GMT+8"},WGST:{"West Greenland Time":"GMT-3","West Greenland Summer Time":"GMT-2"}}[u],m=c[u];if(h){var y=R(t,o,"long");for(var f in h)if(-1!=y.indexOf(f)){m=h[f];break}}else m?-1!=["AT","CT","ET","MT","PT"].indexOf(u)&&(m=m.replace(/\/(.+)/,"")):m=R(t,o,"long");e(m,!0)}}(e),r},split_date:function(e){if(this.is_IE){var t=this.getDObj(),o=t.getHours();return{year:t.getFullYear(),month:t.getMonth()+1,date:t.getDate(),hour:o,minute:t.getMinutes(),second:t.getSeconds(),meridian:o>11?"PM":"AM",timezone:this.timezoneOffset(e)}}try{var a=R(e,this._timezone);return this.parseDate(a,e,this._timezone)}catch(e){return this.is_IE=!0,this.split_date()}},timezoneOffset:function(e){if(x(this._timezone)){if(this.is_IE){var t=h[this._timezone];return-(x(t)?t:this._timezone)}return this.split_date(e).timezone}return this.validate()?this.toDate().getTimezoneOffset():(new Date).getTimezoneOffset()},utcOffset:function(e){if(this._isValid)return this.timezoneOffset(this.toDate())}},$L.moment=function(e,t,o,a){return new v(e,t,o,a)},$L.moment.lyteMoment=v,$L.moment.setLimits=function(e,t){d=e,u=t},$L.moment.setTimezone=function(e,a){t=e,x(a)&&(o=a)}}}(window),function(e){if($L.moment){var t=$L.moment.lyteMoment.prototype,o=[{val:"YYYY-MM-DD",regex:/^(\d{4}-\d{2}-\d{2})/},{val:"GGGG-["+t.week+"]WW-E",regex:new RegExp("^(\\d{4}-"+t.week+"\\d{2}-\\d)")},{val:"GGGG-["+t.week+"]WW",regex:new RegExp("^(\\d{4}-"+t.week+"\\d{2})")},{val:"YYYY-DDD",regex:/^(\d{4}-\d{3})/},{val:"YYYY-MM",regex:/^(\d{4}-\d{2})/},{val:"YYYYMMDD",regex:/^(\d{8})/},{val:"GGGG["+t.week+"]WWE",regex:new RegExp("^(\\d{4}"+t.week+"\\d{2}\\d)")},{val:"GGGG["+t.week+"]WW",regex:new RegExp("^(\\d{4}"+t.week+"\\d{2})")},{val:"YYYYDDD",regex:/^(\d{4}\d{3})/}],a=[{val:"HH:mm:ss.SSSS",regex:/^\d{2}:\d{2}:\d{2}\.[0-9]{1,}$/},{val:"HH:mm:ss,SSSS",regex:/^\d{2}:\d{2}:\d{2},[0-9]{1,}$/},{val:"HH:mm:ss",regex:/^\d{2}:\d{2}:\d{2}$/},{val:"HH:mm",regex:/^\d{2}:\d{2}$/},{val:"HHmmss.SSSS",regex:/^\d{6}\.[0-9]{1,}$/},{val:"HHmmss,SSSS",regex:/^\d{6},[0-9]{1,}$/},{val:"HHmmss",regex:/^\d{6}$/},{val:"HHmm",regex:/^\d{4}$/},{val:"HH",regex:/^\d{2}$/}];function r(e,t){for(var o=this.formats.slice(),a={},r=e,i=new RegExp(this.week+"|G|E","i").test(e),s=0;s<o.length;s++){var l=o[s];if(t==l.time&&l.regex.test(r)&&i==!!l.isWEG&&!this.isDef(a[l.type])){if(l.ignore&&!l.ignore.test(r)){var n=this.dayArr[a.month]||30;if(parseInt(r.match(l.regex)[0])<n)continue}if(l.str)(p=this.find(l.array,r.replace(/(Y|G)+/,"")).mon)&&(e=this.replace(e,p,!1,l.val),a[l.type]=l.array?this.find(l.array,p).index:p);else{var p=r.match(l.regex)[0];e=this.replace(e,l.regex,l.suff,l.val),a[l.type]=parseInt(p),"week"==l.type&&(e=replace(e,new RegExp(this.week+"(?=\\["+this.week+")")))}r=r.replace(p,"")}}return e}function i(e,t){for(var o=0;o<e.length;o++)if(e[o].regex.test(t))return e[o]}function s(e,t){var o=this.dayArr,a=this.isLeap(t);return o[e]+(1==e&&a?1:0)}function l(e){return this.toDate().setFullYear(parseInt(this.getCorrectYear(this.crctLength(Number(this.format("YYYY"))%100,2)))),this}t.additional=!0,$L.extend(t,{inbuiltFormats:{localDatetime:"YYYY-MM-DDTHH:mm",localSecondDatetime:"YYYY-MM-DDTHH:mm:ss",localMillisecondDatetime:"YYYY-MM-DDTHH:mm:ss.SSS",defaultDate:"YYYY-MM-DD",defaultTime:"HH:mm",defaultTimeSecond:"HH:mm:ss",defaultTimeMillisecond:"HH:mm:ss.SSS",defaultWeek:"GGGG-[W]WW",defaultMonth:"YYYY-MM"},get:function(e){if(e)return this[e]()},set:function(e,t){if(e){if(t.constructor==Object){for(var o in t)this[o](t[o]);return this}return this[e](t)}},constructFormat:function(e){var t,s=i.call(this,o,e);return s?(t=i.call(this,a,e.replace(s.regex,"")),e=t?s.val+t.val:r.call(this,e.replace(s.regex,s.val),!0)):(e=r.call(this,e),e=r.call(this,e,!0)),e},i18N:function(t,o){if(this.validate()){var a=this.parseFormat(this.replaceTxt(t)).reverse();return t=t.replace(/{{|}}/g,""),a.forEach(function(a){var r=a.format.val,i=this.format(r),s=e._lyteUiUtils?_lyteUiUtils.i18n(i):i,l=a.index;t=t.slice(0,l)+(o?o(i,s,r):s)+t.slice(l+r.length)}.bind(this)),t}}}),new Array({prop:"date",array:[t.weekLong,t.weekShort,t.weekMid]},{prop:"day",array:[t.weekLong,t.weekShort,t.weekMid]},{prop:"month",array:[t.shortMon,t.longMon]},{prop:"year"},{prop:"fullYear"},{prop:"hours"},{prop:"minutes"},{prop:"seconds"},{prop:"milliseconds"},{prop:"UTCMilliseconds"},{prop:"time"}).forEach((function(e){t[e.prop]=function(t){if(this.validate()){var o=this.toDate(),a=e.prop[0].toUpperCase()+e.prop.slice(1);if(this.isDef(t)){if(t.constructor==String)for(var r=0;r<e.array.length;r++){var i=this.find(e.array[r],t);if(i.mon){t=i.index;break}}else t.constructor==Number&&Math.floor(t)!=t&&("year"==e.prop?(e.prop="month",t=Math.round(12*t)):t=Math.round(t));return"day"==e.prop?o.setDate(o.getDate()+(t-o.getDay())):o["set"+a](t),this}return o["get"+a]()}}})),$L.extend(t,{week:function(e){if(this.validate()){var t=this.toDate();return this.isDef(e)?(t.setDate(t.getDate()+7*(e-this.week())),this):this.getWeekReverse(t,1).week}},quarter:function(e){if(this.validate()){var t=this.toDate();return this.isDef(e)?(t.getMonth(),t.setMonth(t.getMonth()+3*(e-this.quarter())),this):Math.ceil(t.getMonth()/3)}},add:function(e,t,o){if(e<0)return this.subtract(Math.abs(e),t,o);if(this.validate()){var a=this.toDate();if(this.isDef(t)){if(this._timezone&&"month"==t){for(var r=$L.moment(a),i=0;i<e;i++){var n=Number(r.format("M"))-1,p=n?s.call(this,n,Number(r.format("YYYY"))):31,c=r.getDObj().getTimezoneOffset();r.add(p,"date");var d=r.getDObj().getTimezoneOffset();d!=c&&this.subtract(d-c,"minutes")}return this}c=a.getTimezoneOffset();var u=this.set(t,this.get(t)+e);return o?l.call(this,u):u}}},subtract:function(e,t,o){if(e<0)return this.add(Math.abs(e),t,o);if(this.validate()){var a=this.toDate();if(this.isDef(t)){if(this._timezone&&"month"==t){for(var r=$L.moment(a),i=0;i<e;i++){var n=Number(r.format("M"))-1,p=n>1?s.call(this,n-1,Number(r.format("YYYY"))):31,c=r.getDObj().getTimezoneOffset();r.subtract(p,"date");var d=r.getDObj().getTimezoneOffset();d!=c&&this.subtract(d-c,"minutes")}return this}var u=this.set(t,this.get(t)-e);return o?l.call(this,u):u}}},startOf:function(e){if(this.validate()){var t,o=this.toDate(),a=this.format(),r=Number(a.slice(0,4)),i=Number(a.slice(5,7)),s=Number(a.slice(8,10)),l=Number(a.slice(11,13)),n=Number(a.slice(14,16)),p=Number(a.slice(17,19)),c=o.getMilliseconds(),d=0,u=this.timezoneOffset(o);switch("week"==e&&(d=24*((o.getDay()||7)-1)*60*60*1e3,t=!0,e="hour"),e){case"year":t=!0;case"month":t&&(d+=24*this.totdate(i-1,this.isLeap(r))*60*60*1e3),t=!0;case"date":case"day":t&&(d+=24*(s-1)*60*60*1e3),t=!0;case"hour":t&&(d+=60*l*60*1e3),t=!0;case"minute":t&&(d+=60*n*1e3),t=!0;case"second":t&&(d+=1e3*p)}if(d){o.setTime(o.getTime()-d-c);var h=this.timezoneOffset(o)-u;h&&o.setTime(o.getTime()+60*h*1e3)}return this}},endOf:function(e){if(this.validate()){this.startOf(e);var t=1;return"week"==e&&(e="day",t=7),this.add(t,{hour:"hours",minute:"minutes",second:"seconds",date:"date",day:"day",month:"month",year:"fullYear"}[e]||e),this.subtract(1,"milliseconds"),this}},fromNow:function(e,t){if(this.validate()){var o=$L.moment(e);if(!o.validate())return;var a=this.get("time"),r=o.get("time"),i=parseInt((r-a)/1e3),s={years:{val:27648e3,conv:31536e3},months:{val:2246400,conv:2592e3},days:{val:79200,conv:86400},hours:{val:2700,conv:3600},minutes:{val:44,conv:60},seconds:{val:0,conv:1}};return timestamp=r-a,ns1=t?"conv":"val",ns2=t?"floor":"round",fn=function(e,t){var o,a;for(o in s)if(e>=s[o][ns1]){val=Math[ns2](e/s[o].conv),a=val;var r=e-val*s[o].conv;r>0&&fn(r,t);break}return t[o]={value:a},{property:o,value:a}},obj={past:i<0,timestamp:timestamp},i=Math.abs(i),$L.extend(obj,fn(i,obj))}}})}}(window),function(){var e={line_break:/(\n|\r\n|\r)/,special:/[*#\-_~!`()\[\]\.|"]/,space:/[ ]/,number:/\d/},t={b:"bold",i:"italics",u:"underline",s:"strike",div:"para",table:"table",thead:"thead",tbody:"tbody",tr:"tr",td:"td",th:"th",img:"image",a:"hyperlink",ul:"ul",ol:"ol",li:"li",mark:"mark",blockquote:"blockquote",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5"};function o(e){var t=e.flush();if(t)return new a(t,"text")}function a(e,t){var o={value:e,type:t};return this.get=function(e){return o[e]||""},this}function r(){var e=[];this.push=function(t){e.push(t)},this.flush=function(){var t=e;return e=[],t.join("")}}function i(){var e=[],t=0;this.push=function(t){t&&e.push(t)},this.peek=function(){return e[t]||new a},this.peekback=function(){return e[t-1]||new a},this.eat=function(){return e[t++]||new a},this.pointer=function(e){return isNaN(e)?t:t=e},this.moveback=function(){t--},this.flush=function(){t=0,e=[]}}function s(){var e=[];this.push=function(t){return e.push(t),t},this.pop=function(){e.pop()},this.callStackContains=function(t){return!!~e.indexOf(t)},this.isEmpty=function(){return 0===e.length}}function l(t){return e.space.test(t)}function n(t){return e.line_break.test(t)}function p(t){return t.match(e.special)}function c(e){var t=e||{};return this.getAttribute=function(e){return t[e]},this.getAllAttributes=function(){return t},this}function d(e,o){var a,r=new s,i=function(e){var t={};return e=e||{},["bold","italics","strike","underline","blockquote","mark","para","hyperlink","image","header","h1","h2","h3","h4","h5","ol","ul","li","table","thead","tbody","tr","th","td"].forEach((function(o){t[o]=new c(e[o])})),{getAllAttributes:function(e){return t[e].getAllAttributes()},getAttribute:function(e,o){return t[e].getAttribute(o)||""}}}(o),l=(o||{}).onBeforeAppend;function n(e,t){var o,a,r=$L(e);for(a in o=~["h1","h2","h3","h4","h5"].indexOf(t)?function(e,t){var o={};return $L.extend(o,t),$L.extend(o,e),o}(i.getAllAttributes(t),i.getAllAttributes("header")):i.getAllAttributes(t))r.attr(a,o[a])}var p=function(){return e.pointer()},d=function(t){e.pointer(t)},u=function(e){return"boolean"==typeof e||!e.querySelector("*")&&!e.textContent.trim()},h=function(){return!i.getAttribute("header","ignoreWhiteSpaceJoiner")},m=function(){for(var t=p();!$();){if(!Ne())return d(t),!0;e.eat()}return d(t),!1},y=function(){for(var t=0;"special#"===e.peek().get("type");)t++,e.eat();return t},f=function(e){var o,a=function(e){return t[e]}(e.tagName.toLowerCase());return l&&(o=l.call(window,e,a)),o||e},g=function(e,t){e&&t&&(1===t.nodeType&&(t=f(t)),e.appendChild(t))},v=function(){var t,o,a,r,i=document.createElement("div");return n(i,"para"),t=p(),x()?(t=p(),(a=function(){var t,o;if((t=y())<=5&&(!h()&&!Ne()||h()&&Ne(e.eat()))&&m())return n(o=document.createElement("h"+t),"h"+t),Q(o),o}())?g(i,a):(d(t),Q(i))):P()?(r=e.eat(),t=p(),(a=se())?(g(i,a),Q(i)):(d(t),(a=function(){var e;if(m())return n(e=document.createElement("blockquote"),"blockquote"),Q(e),e}())?g(i,a):(d(t),re(i,r),Q(i)))):H()?g(i,B()):Y()?g(i,q()):D()&&(o=L())?(g(i,o),e.moveback()):(d(t),Q(i)),i},x=function(){var t=p();return b(),"special#"===e.peek().get("type")||(d(t),!1)},P=function(){var e=p();return b(),!!de()||(d(e),!1)},b=function(){for(;Ne();)e.eat()},D=function(){var t=p();return b(),"special|"===e.peek().get("type")||(d(t),!1)},L=function(){var e,t=document.createElement("table"),o=F();return!!o&&(!!(e=k(o.column_count))&&(g(t,o.header),!!(e=C(o.column_count))&&(g(t,e),n(t,"table"),t)))},C=function(e){for(var t,o=document.createElement("tbody");S(_());){if(!(t=w(e)))return!1;g(o,t)}return 0!==o.children.length&&(n(o,"tbody"),o)},_=function(){for(var t=p(),o="";!$();)o+=e.eat().get("value");return d(t),o},S=function(e){return!!~e.indexOf("|")},w=function(t){var o,a=document.createElement("tr"),r=(p(),0);for(b();"special|"===e.eat().get("type");)(o=E())&&(r++,g(a,o));return r<t&&T(a,r,t),!(r>t)&&(n(a,"tr"),a)},T=function(e,t,o){for(var a,r=t;r<o;r++)a=document.createElement("td"),g(e,a),n(a,"td")},E=function(){var e=document.createDocumentFragment(),t=document.createElement("td");return a=!0,Q(e),a=!1,A(e),!u(e)&&(t.appendChild(e),n(t,"td"),t)},A=function(e){M(e),N(e)},M=function(e){var t,o=e.childNodes[0];o&&3===o.nodeType&&(t=(t=o.nodeValue).replace(/^\s+/g,""),o.nodeValue=t)},N=function(e){var t,o=e.childNodes.length,a=e.childNodes[o-1];a&&3===a.nodeType&&(t=(t=a.nodeValue).replace(/\s+$/g,""),a.nodeValue=t)},k=function(t){var o=0;for(b();!$()&&!O();){if("special|"!==e.peek().get("type")&&"special-"!==e.peek().get("type"))return!1;"special|"===e.eat().get("type")&&"special-"===e.peek().get("type")&&o++}return!R()&&o===t},F=function(){for(var t,o,a=document.createElement("thead"),r=document.createElement("tr");"special|"===e.peek().get("type");)e.eat(),(o=I())&&g(r,o);return 0!==(t=r.children.length)&&(g(a,r),!R()&&(n(a,"thead"),n(r,"tr"),{column_count:t,header:a}))},I=function(){var e=document.createDocumentFragment(),t=document.createElement("th");return a=!0,Q(e),a=!1,A(e),!u(e)&&(t.appendChild(e),n(t,"th"),t)},R=function(){for(;!$();){if(!O())return!1;e.eat()}e.eat()},O=function(){return"line_break"===e.peek().get("type")||""===e.peek().get("type")||Ne()},$=function(){return"line_break"===e.peek().get("type")||""===e.peek().get("type")},B=function(){var e=document.createElement("ol");do{g(e,V()),R()}while(U());return n(e,"ol"),e},q=function(){var e=document.createElement("ul");do{g(e,V()),R()}while(U());return n(e,"ul"),e},V=function(){var e=document.createElement("li"),t=document.createDocumentFragment();return Q(t),e.appendChild(t),e},U=function(){var e=p(),t=H()||(d(e),Y());return t||d(e),t},H=function(){var t,o,a,r=p();return b(),o=(t=e.eat()).get("value"),"text"!==t.get("type")||isNaN(o)||(a="special."===e.eat().get("type")&&"space"===e.eat().get("type")),a||d(r),a},Y=function(){var t,o,a,r=p();return b(),(t=e.eat()).get("value"),"special*"!==(o=t.get("type"))&&"special-"!==o||(a="space"===e.eat().get("type")),a||d(r),a},j=function(t){var o,a,i=e.peek().get("value"),s=e.peek().get("type");switch(i){case"*":if(a=p(),o=X())return o;if(d(a),!r.callStackContains("bold")||r.callStackContains("bold")&&(d(a),"space"===e.peekback().get("type")))return e.eat(),o=document.createTextNode("*");if(r.callStackContains("bold"))return!1;break;case"_":return a=p(),G()?(d(a),z()):(d(a),W());case"~":if(a=p(),o=J())return o;if(d(a),!r.callStackContains("strike")||r.callStackContains("strike")&&(d(a),"space"===e.peekback().get("type")))return e.eat(),o=document.createTextNode("~");if(r.callStackContains("strike"))return!1}return!!(Ee()||t&&"space"===s)&&(o=Te(),document.createTextNode(o))},W=function(){var t,o=p();return(t=K())?t:(d(o),!r.callStackContains("italics")||r.callStackContains("italics")&&(d(o),"space"===e.peekback().get("type"))?(e.eat(),t=document.createTextNode("_")):!r.callStackContains("italics")&&void 0)},z=function(){var t,o=p();return(t=Z())?t:(d(o),!r.callStackContains("underline")||r.callStackContains("underline")&&(d(o),"space"===e.peekback().get("type"))?(e.eat(),t=document.createTextNode("_")):!r.callStackContains("underline")&&void 0)},G=function(){var t=e.eat(),o=e.eat();return"special_"===t.get("type")&&"special_"===o.get("type")},K=function(){var t,o,a;return e.eat(),t=p(),r.push("italics"),Ne()||!Q(o=document.createDocumentFragment())||Ne(e.peekback())||"special_"!==e.eat().get("type")?(d(t),u(ret=Se("special_"))||"space"===e.peekback().get("type")||"special_"!==e.eat().get("type")?(r.pop(),!1):((o=document.createDocumentFragment()).appendChild(ret),r.pop(),Ce(o))):((a=document.createDocumentFragment()).appendChild(o),r.pop(),Ce(a))},Z=function(){var t,o,a;return e.eat(),e.eat(),t=p(),r.push("underline"),Ne()||!Q(o=document.createDocumentFragment())||Ne(e.peekback())||"special_"!==e.eat().get("type")||"special_"!==e.eat().get("type")?(d(t),u(ret=Se("underline"))||"space"===e.peekback().get("type")||"special_"!==e.eat().get("type")||"special_"!==e.eat().get("type")?(r.pop(),!1):((o=document.createDocumentFragment()).appendChild(ret),r.pop(),Le(o))):((a=document.createDocumentFragment()).appendChild(o),r.pop(),Le(a))},X=function(){var t,o,a;return e.eat(),t=p(),r.push("bold"),Ne()||!Q(o=document.createDocumentFragment())||Ne(e.peekback())||"special*"!==e.eat().get("type")?(d(t),u(ret=Se("special*"))||"space"===e.peekback().get("type")||"special*"!==e.eat().get("type")?(r.pop(),!1):((o=document.createDocumentFragment()).appendChild(ret),r.pop(),De(o))):((a=document.createDocumentFragment()).appendChild(o),r.pop(),De(a))},J=function(){var t,o,a;return e.eat(),t=p(),r.push("strike"),Ne()||!Q(o=document.createDocumentFragment())||Ne(e.peekback())||"special~"!==e.eat().get("type")?(d(t),u(ret=Se("special~"))||"space"===e.peekback().get("type")||"special~"!==e.eat().get("type")?(r.pop(),!1):((o=document.createDocumentFragment()).appendChild(ret),r.pop(),_e(o))):((a=document.createDocumentFragment()).appendChild(o),r.pop(),_e(a))},Q=function(t){var o,a,r=e.peek();r.get("type");return ee()?(a=p(),o=te(),g(t,o),ce(t),o):Ee()||Ne()?(o=ue(t),ce(t),o):de()?(r=e.eat(),a=p(),(o=se())?(g(t,o),ce(t),o):(d(a),re(t,r),ce(t),r.get("value"))):he()?!!(o=j())&&(g(t,o),ce(t),o):ne()?(r=e.eat(),a=p(),(o=le())?(g(t,o),ce(t),o):(d(a),re(t,r),ce(t),r.get("value"))):ie()?(r=e.eat(),a=p(),(o=ae())?(g(t,o),ce(t),o):(d(a),re(t,r),ce(t),r.get("value"))):!Pe()&&(be(e)?be(e)?t:void 0:(r=e.eat(),a=p(),re(t,r),ce(t),r.get("value")))},ee=function(){var t=p(),o=e.eat(),a=o.get("value"),r=o.get("type"),i=e.peek();return d(t),"text"===r&&(a.startsWith("https://")||a.startsWith("http://")||a.startsWith("www")&&"special."===i.get("type"))},te=function(){var e,t,o,a;return e=t=oe(),o=document.createElement("a"),(e=e.trim()).startsWith("https://")||e.startsWith("http://")||(e="https://"+e),o.href=e,o.setAttribute("target","_blank"),o.setAttribute("rel","noopener noreferrer"),a=document.createTextNode(t),o.appendChild(a),n(o,"hyperlink"),o},oe=function(){for(var t="";!Ne()&&!Pe();)t+=e.eat().get("value");return t},ae=function(){var t,o,a,i,s;return!r.callStackContains("link")&&(t=xe(),"special]"===e.eat().get("type")&&("special("===e.eat().get("type")&&(0!==((a=me())||"").trim().length&&(('special"'!==e.peek().get("type")||(e.eat(),s=ye(),'special"'===e.eat().get("type")))&&("special)"===e.eat().get("type")&&((i=document.createElement("a")).href=a.trim(),i.setAttribute("target","_blank"),i.setAttribute("rel","noopener noreferrer"),0===t.trim().length&&(t=a.trim()),o=document.createTextNode(t),i.appendChild(o),s&&i.setAttribute("title",s),n(i,"hyperlink"),i))))))},re=function(e,t){var o=t.get("value"),a=document.createTextNode(o);e.appendChild(a)},ie=function(){return"special["===e.peek().get("type")},se=function(){var t,o,a="";return!pe()&&("special["===e.eat().get("type")&&(a=ge(),"special]"===e.eat().get("type")&&("special("===e.eat().get("type")&&(t=fe(),"special)"===e.peek().get("type")&&(e.eat(),0!==(t||"").trim().length&&((o=document.createElement("img")).alt=a,o.src=t,n(o,"image"),o))))))},le=function(){var t,o;return!(!r.isEmpty()||0===(o=ve()||"").trim().length||!ne())&&(e.eat(),(t=document.createElement("mark")).appendChild(document.createTextNode(o)),n(t,"mark"),t)},ne=function(){return"special`"===e.peek().get("type")},pe=function(){return r.callStackContains("link")},ce=function(e){var t=p();Q(e)||d(t)},de=function(){return"special!"===e.peek().get("type")},ue=function(e){var t=Te();return e.appendChild(document.createTextNode(t)),t},he=function(){var t=e.peek().get("type");return"special*"===t||"special_"===t||"special~"===t},me=function(){for(var t="";"special)"!==e.peek().get("type")&&'special"'!==e.peek().get("type")&&!Pe();)t+=e.eat().get("value");return t},ye=function(){for(var t="";'special"'!==e.peek().get("type")&&!Pe();)t+=e.eat().get("value");return t},fe=function(){for(var t="";"special)"!==e.peek().get("type")&&!Pe();)t+=e.eat().get("value");return t},ge=function(){for(var t="";"special]"!==e.peek().get("type")&&!Pe();)t+=e.eat().get("value");return t},ve=function(){for(var t="";"special`"!==e.peek().get("type")&&!Pe();)t+=e.eat().get("value");return t},xe=function(){for(var t="";"special]"!==e.peek().get("type")&&!Pe();)t+=e.eat().get("value");return t},Pe=function(){var t=e.peek();return a?""===t.get("type")||"line_break"===t.get("type")||"special|"===t.get("type"):"line_break"===t.get("type")||""===t.get("type")},be=function(e){return Pe()},De=function(e){var t=document.createElement("b");return t.appendChild(e),n(t,"bold"),t},Le=function(e){var t=document.createElement("u");return t.appendChild(e),n(t,"underline"),t},Ce=function(e){var t=document.createElement("i");return t.appendChild(e),n(t,"italics"),t},_e=function(e){var t=document.createElement("s");return t.appendChild(e),n(t,"strike"),t},Se=function(e){for(var t,o=document.createDocumentFragment(),a=!1;(t=j(a))&&!we(e)&&!Pe();)o.appendChild(t),a=!0;return t&&o.appendChild(t),!!we(e)&&o},we=function(t){var o,a;return e.peek().get("type"),"underline"===t?(o=p(),a="space"!==e.peekback().get("type")&&"special_"===e.eat().get("type")&&"special_"===e.eat().get("type"),d(o)):a="space"!==e.peekback().get("type")&&e.peek().get("type")===t,a},Te=function(){for(var t="";Ee()||Ne();)t+=e.eat().get("value");return t},Ee=function(t){return t=t||e.peek(),a?Ae(t):Me(t)},Ae=function(e){return(ke(e)||"special."===e.get("type")||'special"'===e.get("type"))&&!ee()},Me=function(e){return(ke(e)||"special."===e.get("type")||"special|"===e.get("type")||'special"'===e.get("type"))&&!ee()},Ne=function(t){return"space"===(t=t||e.peek()).get("type")},ke=function(t){return"text"===(t=t||e.peek()).get("type")};return function(){for(var t,o=document.createElement("div");""!==e.peek().get("type");)t=v()||document.createDocumentFragment(),"line_break"===e.peek().get("type")&&e.eat(),g(o,t);return o}()}var u=function(e,t){return"dom"===(e=(e||"dom").toLowerCase())?t:"domstring"===e?function(e){var t=document.createElement("div");return t.appendChild(e),t.innerHTML}(t):t};$L.markdown=function(e,t){var s,c,h;return h=(t=t||{}).type,s=d(c=function(e){for(var t,s,c=0,d=e.length,u=new r,h=new i;c<d;c++)n(t=e.charAt(c))?(h.push(o(u)),h.push(new a(t,"line_break"))):(s=p(t))?(h.push(o(u)),h.push(new a(t,"special"+s[0]))):l(t)?(h.push(o(u)),h.push(new a(t,"space"))):u.push(t);return h.push(o(u)),h}(function(e){return"string"!=typeof e?$L._lyteHTMLToText(e):e}(e)),t),c.flush(),u(h,s)}}(),function(){var e={b:{start:"*",end:"*"},p:{start:"",end:"\n"},div:{start:"",end:"\n"},br:{start:"",end:"\n"},span:{start:"",end:""}};function t(a,r){var i="",s=a.childNodes;return $L(s).each((function(a,l){(r=r&&0===a)?1===l.nodeType?i+=t(l)+(o(s)?"\n":""):3===l.nodeType&&(i+=l.nodeValue+(o(s)?"\n":"")):1===l.nodeType?i+=function(t,o){var a=t.nodeName.toLowerCase(),r=e[a];return function(e){var t=e.parentNode,o="br"===e.nodeName.toLowerCase(),a="div"===t.nodeName.toLowerCase()||"p"===t.nodeName.toLowerCase(),r=1===t.childNodes.length;return!o||!a||!r}(t)?r.start+o+r.end:o}(l,t(l)):3===l.nodeType&&(i+=l.nodeValue)})),i}function o(e){return e.length>1}$L._lyteHTMLToText=function(e){return t(e,!0)}}(),function(){if(lyteDomObj){function e(e,t){var o=e._searchPluginData;return t=o.dynamicScope?o.dynamicScope(e):t,o.checkFromParent&&(t=e.parentNode),t}function t(e){if(!([37,13,38,39,40,91,27,16,18].indexOf(e.keyCode)>-1)){this._searchPluginData;clearTimeout(this.timeout),clearTimeout(this._iptime),this.timeout=setTimeout(a.bind(this),100,e)}}function o(e){clearTimeout(this._iptime),this._iptime=setTimeout(a.bind(this),250,e)}function a(e){var t=this;e=e||{};var o=this._searchPluginData,a=l.call(this,e),s=a[0],c=a[1],u=a[2],h=a[3],m=o.caseSensitive,y=o.minLength?o.minLength:0,f=o.method?o.method:"contains",g=e.keyCode||e.which,v=r(m,"LYTE-INPUT"==t.tagName?t.querySelector("input,textarea").value:t.value,o.trim),x=[],P=o.component,b=[];if(o.diacritic&&(v=_lyteUiUtils.convert_diacritics(v)),v.length>=y||8==g||46==g){if(v.length)for(var D=0;D<s.length;D++){i(f,v,L=r(m,s[D].trim()))?x.push(u[D]):b.push(u[D])}else x=Array.apply(Array,u);if(o.onSearch&&0==o.onSearch(x,e,v))return;for(D=0;D<s.length;D++){var L=r(m,s[D].trim());v=v;d.call(this,c[D],i(f,v,L),v)}if(/tree|accordion/.test(P))"accordion"==P?$L.fastdom.measure(n.bind(this,x,b,v)):"tree"==P&&$L.fastdom.measure(p.bind(this,x,b,v));else for(D=0;D<h.length;D++)h[D].querySelectorAll(o.target||o.search).length==h[D].querySelectorAll(".lyteSearchHidden").length?h[D].classList.add("lyteSearchHidden"):h[D].classList.remove("lyteSearchHidden")}}function r(e,t,o){return e||(t=t.toLowerCase()),o&&(t=t.trim()),t}function i(e,t,o){var a;switch(e){case"contains":a=o.indexOf(t)>=0;break;case"startsWith":a=0==o.indexOf(t);break;case"endsWith":var r=o.lastIndexOf(t);-1!=r&&(a=r+t.length==o.length)}return a}function s(e){for(var t=[],o=[],a=0;a<e.childElementCount;a++){for(;e.children[a].childElementCount;){returnedVal=s(e.children[a]),t=t.concat(returnedVal[0]),o=o.concat(returnedVal[1]);break}e.children[a].childElementCount||(t.push(e.children[a].textContent),o.push(e.children[a]))}return[t,o]}function l(){var t=this._searchPluginData,o=e(this,"string"==typeof t.scope?document.querySelector(t.scope):t.scope),a=[],r=[],i=[],l=[];if(t.search){i=o.querySelectorAll(t.search.trim());for(var n=t.target?t.target:t.search,p=0;p<i.length;p++){var c=i[p].textContent;t.diacritic&&(c=_lyteUiUtils.convert_diacritics(c)),a.push(c)}r=o.querySelectorAll(n)}else{var d=s(o);a=d[0],i=(r=d[1]).slice()}return t.related&&(t.target||t.scope)&&(l=o.querySelectorAll(t.related)),[a,r,i,l]}function n(t,o,a){for(var r=$L(e(this,this._searchPluginData.scope))[0],i=0;i<t.length;i++){for(var s=$L(t[i]).closest("lyte-accordion-item",r),l=0;l<o.length;l++){var n=$L(o[l]).closest("lyte-accordion-item",r);s[0]!=n[0]||(Lyte.arrayUtils(o,"removeAt",l),l--)}if(t[i+1]){n=$L(t[i+1]).closest("lyte-accordion-item",r);s[0]==n[0]&&(Lyte.arrayUtils(t,"removeAt",i+1),i--)}}$L.fastdom.mutate((function(){for(var e=r.ltProp("exclusive")?t.length-1:0;e<t.length;e++){var i=!1;i=!(l=$L(t[e]).closest("lyte-accordion-item")).hasClass("lyteAccordionActive"),a||(i=!i),i&&l.click()}for(var s=0;s<o.length;s++){var l;(l=$L(o[s]).closest("lyte-accordion-item")).hasClass("lyteAccordionActive")&&l.click()}}))}function p(t,o,a,r){for(var i=$L(e(this,this._searchPluginData.scope))[0],s=0;s<t.length;s++){var l=$L(t[s]).closest(".lyteTreeBodyDiv");for(j=0;j<o.length;j++){var n=$L(o[j]).closest(".lyteTreeBodyDiv");(l[0].contains(n[0])||n[0].contains(l[0]))&&(n.addClass("lyteSearchHidden"),Lyte.arrayUtils(o,"removeAt",j),j--)}}for(s=0;s<t.length;s++)c(t[s],i),a.length&&i.ltProp("stateAttr",$L(t[s]).closest("lyte-tree-body").attr("data-value"));if(a.length)for(s=0;s<o.length;s++)$L(o[s]).closest(".lyteTreeBodyDiv").addClass("lyteSearchHidden");else!function(e){for(var t=e.length-1;t>=0;t--){var o=e.eq(t);o.hasClass("lyteIconOpened")&&setTimeout(o.click.bind(o),20)}}($L("lyte-yield:not(.noChildClass) lyte-tree-icon",i))}function c(e,t){var o=$L(e).closest(".lyteSearchHidden",t);o.length&&(o.removeClass("lyteSearchHidden"),c(e,t))}function d(e,t,o){var a=this._searchPluginData.component;if(t){if("dropdown"==a){var r=$L(e).closest("lyte-drop-box")[0];r&&r.classList.contains("lyteDropdownHidden")&&(r.origindd?r.origindd.toggle():$L(r).closest("lyte-dropdown").get(0).toggle())}e.classList.remove("lyteSearchHidden")}else if("tree"!=a){if(e.classList.contains("lyteSearchHidden"))return;e.classList.add("lyteSearchHidden")}}lyteDomObj.prototype.search=function(e){if((e=e||{}).scope){var r=this[0];return r._searchPluginData=e,"accordion"==e.component?e.related="lyte-accordion-item":"tree"==e.component&&(e.related=".lyteTreeBodyDiv lyte-yield:not(.noChildClass) lyte-tree-icon"),r.setValueForSearch=r.setValue=function(e){var t=this;e=null!=e?e:"","LYTE-INPUT"==t.tagName?t.ltProp({value:e}):t.value=e;var o=new Event("keyup");o.which=o.keyCode=8,t.dispatchEvent(o)},r.addEventListener("keyup",t),r.addEventListener("input",o),r.reset=a.bind(r),this}console.error("scope is not given")},$L.prototype.removeSearch=function(){for(var a=0;a<this.length;a++){var r,i,s,l=this[a];l._searchPluginData&&(delete l.reset,r=l._searchPluginData.scope,i=l._searchPluginData.target||l._searchPluginData.search,s=l._searchPluginData.related,r&&((r=$L(e(l,r))).find(i).removeClass("lyteSearchHidden"),s&&r.find(s).removeClass("lyteSearchHidden"),delete l._searchPluginData,delete l.setValueForSearch,delete l.setValue,l.removeEventListener("input",o),l.removeEventListener("keyup",t)))}return this}}}(),function(e){var t=function(e){if("object"==typeof e&&null!==e){if("function"==typeof Object.getPrototypeOf){var t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}return"[object Object]"==Object.prototype.toString.call(e)}return!1},o=function(e){return!(!e.contentEditable||"true"!==e.contentEditable)};lyteDomObj&&(lyteDomObj.prototype.caret=function(a,r,i){var s,l=function(){return{css_attr:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderTopWidth","boxSizing","fontFamily","fontSize","fontWeight","height","letterSpacing","lineHeight","marginBottom","marginLeft","marginRight","marginTop","outlineWidth","overflow","overflowX","overflowY","paddingBottom","paddingLeft","paddingRight","paddingTop","textAlign","textOverflow","textTransform","whiteSpace","wordBreak","wordWrap","wordSpacing"],copyCss:function(){var e;return e={position:"absolute",left:-9999,top:0,zIndex:-2e4},"TEXTAREA"===s.domObj.prop("tagName")&&this.css_attr.push("width"),$L(this.css_attr).each((function(t,o){return e[o]=s.domObj.css(o)})),e},createClone:function(e){return this.clone=$L("<div></div>"),this.clone.css(this.copyCss()),this.clone.html(e),_lyteUiUtils.insertAfter(s.element,this.clone[0]),this},getPosition:function(){var e,t,o;return o={left:(t=(e=this.clone.find("#caret")).position()).left,top:t.top,height:e.height()},this.clone[0].remove(),o}}},n=function(t){if(t){var o=null!=t?t.iframe:void 0,a=o.contentWindow;return{iframe:o,window:a,document:o.contentDocument||a.document}}return{iframe:void 0,window:e,document:document}};t(r)?(s=n(r),r=void 0):s=n(i),"LYTE-INPUT"==this[0].tagName?("textarea"==this[0].ltProp("type")&&(s.element=this[0].querySelector("textarea")),"text"==this[0].ltProp("type")&&(s.element=this[0].querySelector("text")),s.domObj=$L(s.element)):(s.element=this[0],s.domObj=this);var p=o(this[0])?new function(){return{contentEditable:!0,setPos:function(e){var t,o,a,r=s.window.getSelection();return r&&(t=0,o=!1,a=function(e,i){var l,n,p,c,d,u;for(u=[],p=0,c=(d=i.childNodes).length;p<c&&(l=d[p],!o);p++)if(3===l.nodeType){if(t+l.length>=e){o=!0,(n=s.document.createRange()).setStart(l,e-t),r.removeAllRanges(),r.addRange(n);break}u.push(t+=l.length)}else u.push(a(e,l));return u},a.call(this,e,s.element)),s.element},getIEPosition:function(){return this.getPosition()},getPosition:function(){var e,t;return t=this.getOffset(),e=s.domObj.offset(),t.left-=e.left,t.top-=e.top,t},getIEPos:function(){var e,t;return t=s.document.selection.createRange(),(e=s.document.body.createTextRange()).moveToElementText(s.element),e.setEndPoint("EndToEnd",t),e.text.length},getPos:function(){var e,t,o;return(o=this.getRange())?((e=o.cloneRange()).selectNodeContents(s.element),e.setEnd(o.endContainer,o.endOffset),t=e.toString().length,e.detach(),t):s.document.selection?this.getIEPos():void 0},getIEOffset:function(){var e,t;return(e=s.document.selection.createRange().duplicate()).moveStart("character",-1),{height:(t=e.getBoundingClientRect()).bottom-t.top,left:t.left,top:t.top}},getOffset:function(e){var t,o,a,r,i;return s.window.getSelection&&(a=this.getRange())?(a.endOffset-1>0&&a.endContainer!==s.element&&((t=a.cloneRange()).setStart(a.endContainer,a.endOffset-1),t.setEnd(a.endContainer,a.endOffset),o={height:(r=t.getBoundingClientRect()).height,left:r.left+r.width,top:r.top},t.detach()),o&&0!==(null!=o?o.height:void 0)||(t=a.cloneRange(),i=s.document.createTextNode("|"),t.insertNode(i),t.selectNode(i),o={height:(r=t.getBoundingClientRect()).height,left:r.left,top:r.top},i.remove(),t.detach())):s.document.selection&&(o=this.getIEOffset()),o&&(o.top+=$L(s.window).scrollTop(),o.left+=$L(s.window).scrollLeft()),o},getRange:function(){var e;if(s.window.getSelection)return(e=s.window.getSelection()).rangeCount>0?e.getRangeAt(0):null}}}:new function(){return{contentEditable:!1,getIEPos:function(){var e,t,o,a,r,i;return t=s.element,a=0,(r=s.document.selection.createRange())&&r.parentElement()===t&&(o=t.value.replace(/\r\n/g,"\n").length,(i=t.createTextRange()).moveToBookmark(r.getBookmark()),(e=t.createTextRange()).collapse(!1),a=i.compareEndPoints("StartToEnd",e)>-1?o:-i.moveStart("character",-o)),a},getPos:function(){return s.document.selection?this.getIEPos():s.element.selectionStart},setPos:function(e){var t,o;return t=s.element,s.document.selection?((o=t.createTextRange()).move("character",e),o.select()):t.setSelectionRange&&t.setSelectionRange(e,e),t},getIEOffset:function(e){var t;return t=s.element.createTextRange(),e||(e=this.getPos()),t.move("character",e),{left:t.boundingLeft,top:t.boundingTop,height:t.boundingHeight}},getOffset:function(e){var t,o;return s.element,s.document.selection?((t=this.getIEOffset(e)).top+=$L(s.window).scrollTop()+s.domObj.scrollTop(),t):(t=s.domObj.offset(),o=this.getPosition(e),{left:t.left+o.left-s.domObj.scrollLeft(),top:t.top+o.top-s.domObj.scrollTop(),height:o.height})},getPosition:function(e){var t,o;return s.element,void 0===e&&(e=this.getPos()),t=s.domObj.val().slice(0,e),o=s.domObj.val().slice(e),(new l).createClone(this.createHTML(t,o)).getPosition()},getIEPosition:function(e){var t,o;return o=this.getIEOffset(e),t=s.domObj.offset(),{left:o.left-t.left,top:o.top-t.top,height:o.height}},createHTML:function(e,t){return"<span style='position: relative; display: inline;'>"+this.htmlEncode(e)+"</span><span id='caret' style='position: relative; display: inline;'>|</span><span style='position: relative; display: inline;'>"+this.htmlEncode(t)+"</span>"},htmlEncode:function(e){return e=e.replace(/<|>|`|"|&/g,"?").replace(/\r\n|\r|\n/g,"<br/>"),/firefox/i.test(navigator.userAgent)&&(e=e.replace(/\s/g,"&nbsp;")),e}}};return"pos"===a?r||0===r?p.setPos(r):p.getPos():"position"===a?s.document.selection?p.getIEPosition(r):p.getPosition(r):"offset"===a?p.getOffset(r):(console.error("Sorry! The method ",a," doesn't match the predefined set of methods. Kindly check."),null)})}(window),function(){var e=function(t){return t instanceof e?t:this instanceof e?void(this.wrapped=t):new e(t)},t=function(t,o){return t._chain?e(o).chain():o};e.some=function(e,t){if(null!=t&&(t=s(t)),Array.isArray(e))for(var o=e.length,a=0;a<o;a++){i=e[a];if(t){if(t(i))return!0}else if(i)return!0}else for(var r in e){var i=e[r];if(t){if(t(i))return!0}else if(i)return!0}return!1},e.every=function(e,t){if(null!=t&&(t=s(t)),Array.isArray(e))for(var o=e.length,a=0;a<o;a++){i=e[a];if(t){if(!t(i))return!1}else if(!i)return!1}else for(var r in e){var i=e[r];if(t){if(!t(i))return!1}else if(!i)return!1}return!0},e.contains=function(e,t){return a(e,t)},e.mixin=function(o){Object.keys(o).forEach((function(a){var r=a,i=e[r]=o[r];e.prototype[r]=function(){var o=[this.wrapped];return Array.prototype.push.apply(o,arguments),t(this,i.apply(e,o))}}))},e.prototype.value=function(){return this.wrapped},e.difference=function(){for(var e=arguments.length,t=[],o=arguments[0],a=0,r=o.length;a<r;a++){for(var i=o[a],s=!1,l=1;l<e&&Array.isArray(arguments[l]);l++)if(-1!==arguments[l].indexOf(i)){s=!0;break}s||t.push(i)}return t};var o=function(e){var t=[];return Array.prototype.push.apply(t,e),t};e.removeFromArray=function(e,t){for(var o=[],r=0,i=e.length;r<i;r++){var s=e[r];a(t,s)||o.push(s)}return o};var a=function(t,o){return t=t||[],Array.isArray(t)?t.indexOf(o)>=0:e.some(t,(function(e){return e===o}))};e.groupBy=function(e,t){return t=s(t),e.reduce((function(e,o){var a=t(o);return e[a]=Array.isArray(e[a])?e[a]:[],e[a].push(o),e}),{})},e.indexBy=function(e,t){return t=s(t),e.reduce((function(e,o){return e[t(o)]=o,e}),{})},e.chain=function(t){var o=e(t);return o._chain=!0,o},e.findWhere=function(e,t){var o=Object.keys(t),a=!0,r=void 0;for(val in e){val=e[val];for(var i=0;i<o.length;i++){var s=o[i];if(val[s]!==t[s]){a=!1;break}}if(a){r=val;break}a=!0}return r},e.intersection=function(){var e=1,t=arguments.length,o=!0,r=arguments;return(arguments[0]||[]).filter((function(i){for(var s=e;s<t;s++){var l=r[s];if(!a(l,i)&&o){o=!1;break}}if(o)return!0;o=!0}))},e.defaults=function(e){var t=arguments.length,o={};if(o=e||{})for(var a=1;a<t;a++)for(var r in arguments[a])o.hasOwnProperty(r)&&void 0!==o[r]||(o[r]=arguments[a][r]);return o},e.negate=function(e){return function(){return!e.apply(this,arguments)}},e.omit=function(t){var r;if("function"!=typeof arguments[1]){var i=[];(i=o(arguments)).shift(),r=function(e,t){return!a(i,t)}}else r=e.negate(arguments[1]);return e.pick(arguments[0],r)},e.pick_array=function(t,o,a){for(var r=e,i=0,s=a.length;i<s;i++){var l=a[i];Array.isArray(l)?r.pick_array(t,o,l):t.hasOwnProperty(l)&&(o[l]=t[l])}return o},e.pick=function(t){var o,a={},r=arguments.length;if("function"!=typeof arguments[1])for(var i=1;i<r;i++){var s=arguments[i];Array.isArray(s)?a=e.pick_array(t,a,s):t[s]&&(a[s]=t[s])}else for(var s in o=arguments[1],t)o(t[s],s,t)&&(a[s]=t[s]);return a},e.extend=function(e){if(e){for(var t=1;t<arguments.length;t++){var o=arguments[t],a=Object.getOwnPropertyNames(o);a.forEach((function(t){e[t]=o[t]}))}return e}},e.isString=function(e){return"string"==typeof e||"object"==typeof e&&"[object String]"===r(e)},e.isEmpty=function(e){if(Array.isArray(e)){if(e.length>0)return!1}else if(e&&"object"==typeof e){if(Object.getOwnPropertyNames(e).length>0)return!1}else if(e)return!1;return!0},e.clone=function(e){var t=typeof e;if(!("function"===t||"object"===t&&e))return e;if(Array.isArray(e))return e.slice();for(var o in newObj={},e)newObj[o]=e[o];return newObj},e.map=function(e,t){t=s(t);for(var o=[],a=0;a<e.length;a++)o.push(t(e[a]));return o};var r=function(e){return{}.toString.call(e)};e.union=function(){var e=arguments.length,t=arguments[0];if("[object Arguments]"===r(t)){for(var o=[],i=0,s=t.length;i<s;i++)o[i]=t[i];t=o}for(var l=1;l<e;l++){var n=arguments[l],p=0;for(s=n.length;p<s;p++){var c=n[p];a(t,c)||t.push(c)}}return t},e.uniq=function(e,t){var o=[];if(!e&&!e.length)return[];var a=[],r=-1;if(null!=t)t=s(t);else a=o;var i=e.length;e:for(++r;r<i;r++){for(var l=e[r],n=t?t(l):l,p=a.length;p--;)if(a[p]===n)continue e;t&&a.push(n),o.push(l)}return o},e.chunk=function(e,t){var o=[],a=[];return e.forEach((function(e){a.length<t&&a.push(e),a.length==t&&0!=t&&(o.push(a),a=[])})),a.length&&o.push(a),o},e.isEqual=function(t,o,a){if(a=!1!==a,t===o)return!0;if(typeof t!=typeof o)return!1;if(null==t||null==o)return t===o;var i=r(t);return"[object RegExp]"===i||"[object String]"===i?""+t==""+o:"[object Number]"===i?+t!=+t?+o!=+t:0==+t?1/+t==1/o:+t==+o:"[object Date]"===i||"[object Boolean]"===i?+t==+o:"object"==typeof t&&"object"==typeof o?Array.isArray(t)==Array.isArray(o)&&(Array.isArray(t)&&Array.isArray(o)?e.checkArrayEquality(t,o,a):e.checkObjectEquality(t,o,a)):typeof t==typeof o},e.checkArrayEquality=function(t,o,a){var r=!0;if(t.length!=o.length)return!1;for(var i=t.length,s=0;s<i;s++){if(typeof t[s]!=typeof o[s])return!1;if("object"==typeof t[s])r=e.isEqual(t[s],o[s],a);else if(t[s]!==o[s])return!1;if(0==r)return r}return r},e.checkObjectEquality=function(t,o,a){if(a)var r=Object.getOwnPropertyNames(o),i=Object.getOwnPropertyNames(t);else r=Object.keys(o),i=Object.keys(t);var s=i.length,l=!0;if(i.length!=r.length)return!1;for(var n=0;n<s;n++){var p=i[n];if(typeof t[p]!=typeof o[p])return!1;if("object"==typeof t[p])l=e.isEqual(t[p],o[p],a);else if(t[p]!==o[p])return!1;if(0==l)return l}return l},e.invert=function(e){var t=Object.keys(e),o={};return t.forEach((function(t){o[e[t]]=t})),o},e.without=function(){for(var t=arguments.length,a=[],r=1;r<t;r++)a.push(arguments[r]);var i=o(arguments[0]);return e.removeFromArray(i||[],a)},e.max=function(e,t){for(var o=(e=e||[])[0],a=!1,r=(t=s(t))(o),i=0;i<e.length;i++){var l=e[i],n=t(l);(n>r||isNaN(r)&&!isNaN(n))&&(r=t(o=l),a=!0)}return!a&&isNaN(r)?-1/0:o},e.min=function(e,t){for(var o=(e=e||[])[0],a=!1,r=(t=s(t))(o),i=0;i<e.length;i++){var l=e[i],n=t(l);(n<r||isNaN(r)&&!isNaN(n))&&(r=t(o=l),a=!0)}return!a&&isNaN(r)?1/0:o};var i=function(e,t,o,a){if(t<o){var r=function(e,t,o,a){for(var r=e[o],i=t-1,s=t;s<o;s++)if(a(e[s])<a(r)){var l=e[++i];e[i]=e[s],e[s]=l}return l=e[i+1],e[i+1]=e[o],e[o]=l,i+1}(e,t,o,a);i(e,t,r-1,a),i(e,r+1,o,a)}return e};e.sortBy=function(e,t){return t=s(t),i(e,0,e.length-1,t)};var s=function(e){var t=typeof e;if(null==e||"function"==t)return e||function(e){return e};if("string"==t||"number"==t){var o=e;e=function(e){return e[o]}}else if(Array.isArray(e)){var a=e;e=function(e){for(var t=0;t<a.length&&null!=e;t++)e=e[a[t]];return e}}else{var r=e;e=function(e){for(var t=Object.getOwnPropertyNames(r),o=t[0],a=0;a<t.length;o=t[++a])if(e[o]!==r[o])return!1;return!0}}return e};e.replace=function(e){return e.normalize("NFKD").replace(/[\u0300-\u036f]/g,"")},e.highlight=function(e,t,o){var a=new RegExp(t,"gi");return calback=l(o),e=e.replace(a,(function(o,a){var r=e.slice(a,a+t.length);return calback(r)}))};var l=function(e){if("string"==typeof e){var t=e;e=function(e){return"<"+t+">"+e+"</"+t+">"}}return e=e||function(e){return"<span>"+e+"</span>"}};e.mixin(e),window.$u=e}(),Lyte.Component.registerCustomPropHandler("cxProp"),window._cruxUtils||(window._cruxUtils={}),window._cruxUtils.getI18n=function(){for(var e=arguments[0],t=[],o=1;o<arguments.length;o++)t.push(arguments[o]);var a=window._cruxUtils._cruxLocale[e]?window._cruxUtils._cruxLocale[e]:e;return a=a.replace(/{\d+}/g,(function(e){return t[e.split("{")[1].split("}")[0]]}))},Lyte.Component.registerHelper("cruxGetI18n",(function(){return _cruxUtils.getI18n.apply(void 0,arguments)})),Lyte.Component.registerHelper("subtract",(function(e,t){return e-t})),Lyte.Component.registerHelper("userFieldValues",(function(e,t,o){var a;return"string"==typeof e[t]?a=e[t]?e[t]:"":"object"==typeof e[t]&&(a=e[t]?o?e[t][o]:e[t].name:""),a})),Lyte.Component.registerHelper("cruxContains",(function(e,t){return e.indexOf(t)>-1})),Lyte.Component.registerHelper("userDispVal",(function(e,t){return"profile"==e?"Administrator"==t?_cruxUtils.getI18n("Administrator"):"Standard"==t?_cruxUtils.getI18n("Standard"):t:t})),Lyte.Component.registerHelper("getSum",(function(){for(var e=0,t=arguments.length,o=0;o<t;o++)e+=arguments[o];return e})),Lyte.Component.registerHelper("ifEquals",(function(e,t){return null!=e&&null!=t&&e.toString()==t.toString()})),Lyte.Component.registerHelper("captialize",(function(e){if(null!=e)return e.toUpperCase()})),Lyte.Component.registerHelper("cruxRebrandProperty",(function(e){return"undefined"!=typeof RebrandLinkUtil?RebrandLinkUtil.getProperty(e):e})),Lyte.Component.registerHelper("cruxEncodeHTML",(function(e){return"undefined"!=typeof $ESAPI?$ESAPI.encoder().encodeForHTML(e):e})),Lyte.Component.registerHelper("cruxEncodeURL",(function(e){return"undefined"!=typeof $ESAPI?$ESAPI.encoder().encodeForURL(e):e})),Lyte.Component.registerHelper("searchIconSelect",(function(){return arguments[1]?"searchLoading":""==arguments[0]||null==arguments[0]?"searchIcon":"clearField"})),Lyte.Component.registerHelper("cruxGetPhotoField",(function(e){if(!(Object.keys(e).indexOf("Record_Image")>-1))return"";var t=e.Record_Image;if(e.hasOwnProperty("Record_Image")){return t?"photoField":"fullNameFirstChar"}})),Lyte.Component.registerHelper("cruxGetFieldValue",(function(e,t,o,a){var r;if(o&&(r=t[o.api_name]),!r)return"";var i=o.data_type;if("formula"===i&&(i=o.formula.return_type),i.indexOf("lookup")>-1)return r.name;if("datetime"===i){if(o.api_name){var s=r.replace(/[+-]\d{2}:\d{2}/,"");l=new Date(s)}else l=new Date(r);return Utils.getDateTimeInUserFormat(l,!0)}if("date"===i){var l=new Date(r+" 00:00:00");return isNaN(l.getTime())&&(l=new Date(r)),Utils.getDateInUserDatePattern(l,!0)}return"multiselectpicklist"===i?r.join(";"):a?(e!==crmModuleConstants.Contacts&&e!==crmModuleConstants.Leads||(r=t.Full_Name),r):"Layout"==o.api_name?r.name:r.toString()})),Lyte.Component.registerHelper("cruxGetEventStart_EndTime",(function(e,t,o){var a=e[t.api_name],r=e[o.api_name],i=new Date(a),s=new Date(r);return e.All_day?i.getUTCDate()==s.getUTCDate()&&i.getUTCMonth()==s.getUTCMonth()&&i.getUTCFullYear()==s.getUTCFullYear()?(i=new Date(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()),Utils.getDateInUserDatePattern(i,!0)):(s=new Date(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()),Utils.getDateInUserDatePattern(i,!0)+" - "+Utils.getDateInUserDatePattern(s,!0)):Utils.getDateTimeInUserFormat(i,!0)+" - "+Utils.getDateTimeInUserFormat(s,!0)})),Lyte.Component.registerHelper("cruxGetAlldayEvent",(function(e,t){return e.All_day?t.filter((function(e){return"All_day"===e.api_name}))[0].field_label:""})),Lyte.Component.registerHelper("cruxReplace",(function(e,t,o){return e?e.replace(new RegExp(t,"g"),o):""})),Lyte.Component.registerHelper("cruxGetCrmBasePath",(function(){return Crm.getCrmBasePath()})),Lyte.Component.registerHelper("cruxShortFileNameLength",(function(e,t){return e.length>t?e.substr(0,t-3)+"...":e})),Lyte.Component.registerHelper("cruxSubstr",(function(e,t){return e.length>t?e.substr(0,t)+"...":e})),Lyte.Component.registerHelper("cruxIfGt",(function(e,t){return e>t})),Lyte.Component.registerHelper("cruxHasProperty",(function(e,t){return!!e&&e.hasOwnProperty(t)})),Lyte.Component.registerHelper("cruxReplaceSpace",(function(e){return e.replace(/ /g,"&nbsp;")})),Lyte.Component.registerHelper("cruxStringSeg",(function(e,t,o){return e?e.substring(t,"number"==typeof o?o:e.length):""})),Lyte.Component.registerHelper("cruxGetItemAtIndex",(function(e,t){return e[t]})),Lyte.Component.registerHelper("cruxClone",(function(e){return Lyte.deepCopyObject(e)})),Lyte.Component.registerHelper("cruxIncrement",(function(e){var t=this.getData(e);return this.setData(e,t+=1),t})),Lyte.Component.registerHelper("cruxGetTagColorIndex",(function(e,t){t||(t={Col1:"#F17574",Col2:"#F48435",Col3:"#E7A826",Col4:"#A8C026",Col5:"#63C57E",Col6:"#1DB9B4",Col7:"#57B1FD",Col8:"#879BFC",Col9:"#D297EE",Col10:"#FD87BD",Col11:"#969696",Col12:"#658BA8",Col13:"#B88562"});var o=Object.keys(t).filter((function(o){return t[o]==e}));return o.length?o[0]:"Col0"})),Lyte.Component.registerHelper("cruxArithResult",(function(){return new Function("return "+Array.from(arguments).join(""))()})),Lyte.Component.registerHelper("cruxAnd",(function(){for(var e=0;e<arguments.length;e++)if(!arguments[e])return!1;return!0})),Lyte.Component.registerHelper("cruxMaskValue",(function(e,t){for(var o="",a=0;a<t.length&&o.length<e.length;a++)o+=t.character;return t.reverse?o=e.substring(0,e.length-t.length)+o:o+=e.substring(t.length),o})),Lyte.Component.registerHelper("cruxNumToStorage",(function(e,t,o){if(!e&&0!==e||"NaN"===e)return"-";if(o)return(e<0?0:e)+" "+_cruxUtils.getI18n.apply(void 0,["Records"]);if(0===e||e<0||"0"===e)return"0 Bytes";var a=t||2,r=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,r)).toFixed(a))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][r]})),Lyte.Component.registerHelper("cruxDashboardSlice",(function(e,t,o){return e.slice(t,o<t+10?o:t+10)})),window._cruxUtils||(window._cruxUtils={}),window._cruxUtils.showCustomAlert=function(e){var t=$L("#cruxCustomAlert");e.params&&e.params.ltPropWrapperClass?e.params.ltPropWrapperClass=e.params.ltPropWrapperClass+" cxAlertWrapper":e.params.ltPropWrapperClass="cxAlertWrapper",e.params=Object.assign({ltPropCloseOnEscape:!0,ltPropSlideDown:"slideDown",ltPropContentAlign:"left",ltPropType:"",ltPropPrimaryMessage:"",ltPropSecondaryMessage:"",ltPropAllowMultiple:!1,ltPropHeading:"",ltPropButtonPosition:"center",ltPropTop:"0",ltPropShowCloseButton:!1,ltPropButtons:[{type:"accept",text:_cruxUtils.getI18n("crm.mb.newversion.msg4"),appearance:"primary"}]},e.params);for(var o=e.params.ltPropButtons.length,a=0;a<o;a++)"accept"==e.params.ltPropButtons[a].type&&null==e.params.ltPropButtons[a].appearance&&(e.params.ltPropButtons[a].appearance="primary");if(t.length>0){if(t[0].ltProp("show"))return;t[0].setData(e.params)}else e.params.id="cruxCustomAlert",t.push(Lyte.Component.render("lyte-alert",e.params,"body"));t[0].setMethods({onShow:function(){this.$node.component.childComp.querySelectorAll(".alertFooter lyte-button").forEach((function(t,o){e.params.ltPropButtons[o]&&e.params.ltPropButtons[o].cxPropZcqa&&t.setAttribute("data-zcqa",e.params.ltPropButtons[o].cxPropZcqa)})),e.show&&e.show(arguments[0])},onAccept:function(){e.accept&&e.accept(arguments[0])},onReject:function(){e.reject&&e.reject(arguments[0])},onClose:function(){var t=e.close;e={},t&&t()}}),t[0].ltProp("show",!0)},window._cruxUtils.removeCustomAlert=function(){$L("#cruxCustomAlert").length>0&&$L("#cruxCustomAlert")[0].remove()},window._cruxUtils.showCustomMessage=function(e){e.params&&e.params.ltPropClass?e.params.ltPropClass=e.params.ltPropClass+" cruxAlertWrapper":e.params.ltPropClass="cxAlertWrapper",e.params.id="cruxCustomMessage";var t=document.getElementById("cruxCustomMessage");t&&t.remove(),e.params.ltPropYield?(t=document.createElement("lyte-messagebox"),Object.keys(e.params).forEach(function(o){if("ltPropMessage"!=o){var a=o.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();t.setAttribute(a,e.params[o])}}.bind(this)),t.innerHTML='<template is = "registerYield" yield-name = "messageboxYield">'+e.params.ltPropMessage+"</template>",Lyte.Component.appendChild($L("body")[0],t)):(document.getElementById("cruxCustomMessage")&&document.getElementById("cruxCustomMessage").ltProp("show",!1),t=Lyte.Component.render("lyte-messagebox",e.params,"body")),t.setMethods({onClose:function(){e.close&&e.close(),arguments[0].$node.remove()}}),t.ltProp("show",!0)},window._cruxUtils.showProfilePermissionModal=function(e){if(e){e.params=e.params?e.params:{};var t=$L("#cruxPermissionPopup")[0];t?(e.params.cxPropSelectedIds=e.params.cxPropSelectedIds?e.params.cxPropSelectedIds:[],t.setData(e.params)):(e.params.id="cruxPermissionPopup",t=Lyte.Component.render("crux-profile-permission-modal",e.params,"body")),t.setMethods({onShow:function(){e.onShow&&e.onShow(arguments[0])},onAddProfile:function(){e.onAddProfile&&e.onAddProfile(arguments[0])},onBeforeRemoveProfile:function(){e.onBeforeRemoveProfile&&e.onBeforeRemoveProfile(arguments[0])},onRemoveProfile:function(){if(e.onRemoveProfile)return e.onRemoveProfile(arguments[0])},onClose:function(){e.onClose&&e.onClose(arguments[0])},onBeforeSave:function(){if(e.onBeforeSave)return e.onBeforeSave(arguments[0])}}),t.setData("cxPropShow",!0)}},window._cruxUtils.showSchedularNotification=function(e){if(e){e.params=e.params?e.params:{};var t=$L("#cruxSchedularPopup")[0];t?t.setData(e.params):(e.params.id="cruxSchedularPopup",t=Lyte.Component.render("crux-schedular-notification-popup",e.params,"body")),t.setMethods({onShow:function(){e.onShow&&e.onShow(arguments[0])},onClose:function(){e.onClose&&e.onClose(arguments[0])}}),t.setData("cxPropShow",!0)}},Lyte.Mixin.register("crux-user-utils",{excludeIds:function(e,t,o,a){for(var r=this.getData("cxPropPrimaryKey"),i=[],s=this.getData("cxPropExclude"),l=t.length,n=o;n<l&&i.length!=a;n++)-1==s.indexOf(t[n][r])?i.push(t[n]):Lyte.arrayUtils(this.getData("currentlyExcludedArray"),"push",t[n]);return this.setData("currentPos",n),this.newConstructedBatch&&this.newConstructedBatch(i),i},constructArray:function(e,t){var o,a=this.getData("cxPropNetworkData");o=this.getData("localData"),null!=this.getData("cxPropCustomPagination")&&null!=this.getData("cxPropCustomPagination")&&0!=this.getData("cxPropCustomPagination")||("userLookup"!=e||"userLookup"==e&&0==this.getData("selectedList")?1!=this.getData("pageNo")&&0!=this.getData("pageNo")||this.setData("noMoreRecords",!0):"userLookup"==e&&1==this.getData("selectedList")&&1==this.getData("pageNo")&&this.setData("noMoreRecords",!0));var r=this.getData("cxPropRecords"),i=this.getData("currentPos");if("userLookup"==e||"lookupComponent"==e)if(0==this.getData("selectedList")||null==this.getData("selectedList"))var s=this.getData("systemData");else var l=this.getData("addedItems");else s=this.getData("systemData");if(i<o.length)r=o.length-i>r?r:o.length-i,"userLookup"==e||"lookupComponent"==e?(0==this.getData("selectedList")||null==this.getData("selectedList")?0===i?this.setData("systemData",this.excludeIds.call(this,e,o,i,r)):Lyte.arrayUtils(s,"push",this.excludeIds.call(this,e,o,i,r)):0===i?this.setData("addedItems",this.excludeIds.call(this,e,o,i,r)):Lyte.arrayUtils(l,"push",this.excludeIds.call(this,e,o,i,r)),this.setData("multiScroll",!1)):(0===i?this.setData("systemData",this.excludeIds.call(this,e,o,i,r)):Lyte.arrayUtils(s,"push",this.excludeIds.call(this,e,o,i,r)),this.setData("multiScroll",!1),this.setData("scrollLoading",!1)),this.updatedList&&this.updatedList();else if(t)this.setData("multiScroll",!1);else if(this.getData("noMoreRecords")){if(!this.getData("cxPropCustomRequest"))return this.getData("isSearch")?store.triggerAction(a.cxPropModuleName,"search",this.queryParams()).then(function(t){""===this.getData("cxPropInputValue")||this.getData("cxPropInputValue")?0!=this.getData("cxPropInputValue").length&&this.setReqData(t,e):this.setReqData(t,e)}.bind(this),function(t){this.errorOnSearch&&("userLookup"!=e&&(this.setData("searchLoading",!1),this.setData("scrollLoading",!1),this.setData("systemData",[])),this.errorOnSearch()),(0,console.error)(t),this.setData("multiScroll",!1)}.bind(this)):store.findAll(a.cxPropModuleName,this.queryParams(),a.cxPropCacheQuery,a.cxPropDataCache,a.cxPropCustomData).then(function(t){this.setReqData(t,e)}.bind(this),function(t){this.errorOnRequest&&("userLookup"!=e&&(this.setData("searchLoading",!1),this.setData("scrollLoading",!1),this.setData("systemData",[])),this.errorOnRequest()),(0,console.error)(t),this.setData("multiScroll",!1)}.bind(this));if(this.customReqFunc){var n=this.queryParams(),p=this.customReqFunc(this.getData("cxPropNetworkData"),n,this.getData("isSearch"),this.getData("cxPropInputValue"));p&&p.then&&Promise.resolve(p).then(function(t){this.getData("isSearch")&&this.getData("cxPropInputValue")?0!=this.getData("cxPropInputValue").length&&this.setReqData(t,e):this.setReqData(t,e)}.bind(this))}}else this.setData("multiScroll",!1);return!0},setReqData:function(e,t){var o=e,a=!0,r=this.getData("cxPropNetworkData");if(this.getData("isSearch"))var i=store.serializer[r.cxPropModuleName].varPayloadKey;var s=this.getData("systemData");this.setData("multiScroll",!1),this.getData("isSearch")?e&&e.constructor==Object?e=e[i]:Array.isArray(e)&&0==e.length&&(a=!1):e&&null!=e[r.cxPropModuleName]?e=e[r.cxPropModuleName]:e&&null!=e[store.serializer[r.cxPropModuleName].varPayloadKey]&&(e=e[store.serializer[r.cxPropModuleName].varPayloadKey]),(null==e||e&&!Array.isArray(e)&&null==e[r.cxPropModuleName]||Array.isArray(e)&&0==e.length||e[0]&&e[0].$&&e[0].$.isError)&&(a=!1),e&&a?(null!=this.getData("cxPropCustomPagination")&&null!=this.getData("cxPropCustomPagination")&&0!=this.getData("cxPropCustomPagination")||this.setData("pageNo",this.getData("pageNo")+1),this.setData("noUsersAvilabel",!1),null!=this.getData("cxPropCustomPagination")&&null!=this.getData("cxPropCustomPagination")&&0!=this.getData("cxPropCustomPagination")||"userLookup"==t&&this.getData("selectedList")&&null!=this.getData("cxPropReqForSelected")&&null!=this.getData("cxPropReqForSelected")&&0==this.getData("cxPropReqForSelected")&&this.setData("pageNo",0),Lyte.arrayUtils(this.getData("localData"),"concat",e),null!=this.getData("cxPropCustomPagination")&&null!=this.getData("cxPropCustomPagination")&&0!=this.getData("cxPropCustomPagination")||("userLookup"==t&&0==this.getData("selectedList")||"userLookup"!=t?e.length<this.getData("cxPropPerPage")&&this.setData("noMoreRecords",!1):"userLookup"==t&&1==this.getData("selectedList")&&e.length<this.getData("cxPropSelectedPerPage")&&this.setData("noMoreRecords",!1)),this.constructArray.call(this,t,!0)):(0==this.getData("currentPos")?(this.setData("systemData",[]),this.setData("noUsersAvilabel",!0)):Lyte.arrayUtils(s,"push",[]),null!=this.getData("cxPropCustomPagination")&&null!=this.getData("cxPropCustomPagination")&&0!=this.getData("cxPropCustomPagination")||this.setData("noMoreRecords",!1)),this.loadMoreData&&(null==this.getData("cxPropCustomPagination")||null==this.getData("cxPropCustomPagination")||0==this.getData("cxPropCustomPagination")?this.loadMoreData():this.loadMoreData(o))},queryParams:function(){var e=JSON.parse(JSON.stringify(this.getData("cxPropQueryParams")||{}));if(this.setCriteria)e=this.setCriteria();return null==e&&(e=JSON.parse(JSON.stringify(this.getData("cxPropQueryParams")||{}))),null!=this.getData("cxPropCustomPagination")&&null!=this.getData("cxPropCustomPagination")&&0!=this.getData("cxPropCustomPagination")||(0!=this.getData("cxPropPerPage")&&(e.per_page=this.getData("cxPropPerPage")),0!=this.getData("pageNo")&&(e.page=this.getData("pageNo"))),e},bodyScroll:function(e,t){if(this.getData("stopScrolling"))this.setData("stopScrolling",!1);else{var o=this.getData("cxPropNetworkData"),a=t.target;a.scrollHeight-10<=Math.ceil(a.offsetHeight)+Math.ceil(a.scrollTop)&&(this.getData("isSearch")||this.getData("preventCacheReset")||(o.cxPropCacheQuery=!1,o.cxPropDataCache=!1,this.setData("cxPropNetworkData",o)),this.getData("multiScroll")||("userLookup"==e?this.getData("noMoreRecords")&&(this.getData("selectedList")?this.setData("searchingSelectedScroll",!0):this.setData("searchingScroll",!0)):this.getData("noMoreRecords")?this.setData("scrollLoading",!0):this.setData("scrollLoading",!1),this.setData("multiScroll",!0),this.constructArray.call(this,e,!1)))}},keyup:function(e,t,o){clearTimeout(this._timeout),this._timeout=setTimeout(function(){this.performKeyUpSearch&&this.performKeyUpSearch(o,this.getData("cxPropInputValue"));var a=this.getData("cxPropInputValue"),r=this.getData("cxPropMinLength");this.setData("currentSearchValue",a),!this.getData("noUsersAvilabel")||null==this.getData("oldSearchValue")&&null==this.getData("oldSearchValue")&&""==this.getData("oldSearchValue")||(-1==this.getData("currentSearchValue").indexOf(this.getData("oldSearchValue"))||this.getData("currentSearchValue").indexOf(this.getData("oldSearchValue"))>0)&&(this.setData("noUsersAvilabel",!1),this.setData("noMoreRecords",!0)),"userLookup"==e&&(this.getData("cxPropInputValue").length>r-1?this.setData("searchingSearch",!0):this.setData("searchingSearch",!1)),a.length>=r?(null!=t&&(this.setData("stopScrolling",!0),0==t.scrollTop?this.setData("stopScrolling",!1):t.scrollTop=0),this.setData("multipleBack",!1),1!=this.getData("isSearch")&&this.setData("noMoreRecords",!0),this.setData("isSearch",!0),"userLookup"!=e&&(this.setData("currentPos",0),this.setData("localData",[]),0!=this.getData("pageNo")&&this.setData("pageNo",1)),"userLookup"==e?this.getData("noUsersAvilabel")?this.setData("searchingSearch",!1):this.filterObserver.call(this,"search",o):(this.getData("cxPropInputValue").length>r-1?this.setData("searchLoading",!0):this.setData("searchLoading",!1),1==this.getData("noUsersAvilabel")?this.setData("searchLoading",!1):this.constructArray.call(this,e,!1))):"userLookup"!=e?this.setData("searchLoading",!1):this.setData("searchingSearch",!1),0!=this.getData("multipleBack")&&null!=this.getData("multipleBack")||(null==this.getData("multipleBack")&&a.length<this.getData("cxPropMinLength")?this.setData("multipleBack",!0):0==a.length&&(this.endKeyUpSearch&&this.endKeyUpSearch(),this.setData("isSearch",!1),"userLookup"==e?(this.setData("noMoreRecords",!0),this.filterObserver.call(this,"removeAll",o)):(this.setData("noMoreRecords",!0),this.setData("currentPos",0),this.setData("localData",[]),0!=this.getData("pageNo")&&this.setData("pageNo",1),this.constructArray.call(this,e,!1)),this.setData("multipleBack",!0))),this.setData("oldSearchValue",this.getData("currentSearchValue"))}.bind(this),300)},escapeString:function(e){var t=e.replace(/\(/g,"\\(").replace(/\)/g,"\\)");return t=t.trim()},cxPropMaxLimitMessageBox:function(){var e=this.getData("messageBoxType");e||(e="warning");var t=this.getData("cxPropMaxLimitMsg");t||(t=_cruxUtils.getI18n("crux.comboBox.max.limit",this.getData("cxPropMaxLimit"),_cruxUtils.getI18n("crm.label.users")));var o=this.getData("cxPropMaxLimitDuration");o||(o="2000"),_cruxUtils.showCustomMessage({params:{ltPropType:e,ltPropMessage:t,ltPropDuration:o,ltPropShow:!0}})},getDefaultFilters:function(){return[{id:"AllUsers",category:_cruxUtils.getI18n("crm.globalsearch.option.all")},{id:"ActiveUsers",category:_cruxUtils.getI18n("webform.status.Active")},{id:"DeactiveUsers",category:_cruxUtils.getI18n("Inactive")},{id:"ConfirmedUsers",category:_cruxUtils.getI18n("Confirmed")},{id:"NotConfirmedUsers",category:_cruxUtils.getI18n("crm.user.component.unconfirmed")},{id:"DeletedUsers",category:_cruxUtils.getI18n("DeletedUser")},{id:"ActiveConfirmedUsers",category:_cruxUtils.getI18n("webform.status.Active")+" "+_cruxUtils.getI18n("Confirmed")},{id:"AdminUsers",category:_cruxUtils.getI18n("crm.feed.group.admin")},{id:"ActiveConfirmedAdmins",category:_cruxUtils.getI18n("crm.user.label.active.confirmed.admins")},{id:"CurrentUser",category:_cruxUtils.getI18n("crm.ln.lable.current")}]},lazyLoad:{getInstance:function(e,t,o,a,r,i,s){return{properties:{requestDetails:{networkDetails:[],requestType:"findAll"},searchRequestDetails:{networkDetails:[],requestType:"triggerAction"},parseResponseKey:{normal:"",search:""},allAvailableRecords:[],displayRecords:[],pageNo:1,perPage:200,allRecordsFetched:!1,batchSize:20,primaryKey:"",queryParams:{},excludeList:[],currentlyEcludedList:[],customPagination:!1,customRequest:!1,isNonPagination:!1,isSearchReq:!1,searchValue:"",currentLoadingStage:"",triggerSearchLength:2},callBacks:{queryParamsFunc:e,beforeNextBatchFunc:s,nextBatchFunc:t,customRequestFunc:i,beforeRequestFunc:r,afterRequestFunc:o,handleErrReqFunc:a},_localVariables:{currentRecordCount:0,preventScrollFuncnalityOnLoad:!1,preventScrollFuncnality:!1,allAvailablePages:{currLen:0},allAvailableBatchs:{currLen:0,batchCount:0},latestBatch:0,previousLoadingStage:"",scrollTimeout:void 0,searchTimeout:void 0,currentSearchValue:"",oldSearchValue:"",multipleBack:!0,emptySearchResp:!1}}},performExclude:function(e,t){var o,a=e.properties.primaryKey,r=[],i=e.properties.excludeList,s=e.properties.allAvailableRecords.length;for(o=e.currentPos;o<s&&r.length!=t;o++)a&&-1!=i.indexOf(e.properties.allAvailableRecords[o][a])?e.properties.currentlyEcludedList.push(e.properties.allAvailableRecords[o]):r.push(e.properties.allAvailableRecords[o]);if(o!==s||r.length===t||e.properties.allRecordsFetched){if(e.currentPos=o,e.callBacks.beforeNextBatchFunc){var l=e.callBacks.beforeNextBatchFunc(r);return l&&l.length<t?this.performExclude(e,t):r}return r}return this.constructNextBatch(e,!1,e.properties.currentLoadingStage),"nextRequest"},constructNextBatch:function(e,t,o){void 0===o&&(e.properties.currentLoadingStage="initial",e._localVariables.previousLoadingStage="initial");var a=e.properties.allAvailableRecords.length;if(e._localVariables.currentRecordCount<a){var r=a-e._localVariables.currentRecordCount>e.properties.batchSize?e.properties.batchSize:a-e._localVariables.currentRecordCount,i=this.performExclude(e,r);return"nextRequest"!==i&&(e._localVariables.allAvailableBatchs.batchCount++,e._localVariables.allAvailableBatchs.currLen=i.length,e._localVariables.allAvailableBatchs[e._localVariables.allAvailableBatchs.batchCount]=i,e.properties.displayRecords.push(i),e.callBacks.nextBatchFunc&&e.callBacks.nextBatchFunc(e,i),e._localVariables.previousLoadingStage=e.properties.currentLoadingStage,e.properties.currentLoadingStage="",e._localVariables.latestBatch++),!0}if(!t||!e.properties.allRecordsFetched){e.callBacks.beforeRequestFunc&&e.callBacks.beforeRequestFunc(e);var s,l=!1;if(e.properties.isSearchReq&&(l=!0),!e.properties.customRequest||!e.callBacks.customRequestFunc)return e.properties.isSearchReq?reqDetails=e.properties.searchRequestDetails:reqDetails=e.properties.requestDetails,"findAll"===reqDetails.requestType?s=1:"triggerAction"===reqDetails.requestType&&(s=3),Lyte.arrayUtils(reqDetails.networkDetails,"insertAt",s,n),store[reqDetails.requestType].apply(store,reqDetails.networkDetails).then(function(t){return this.handleResponse(e,t,l),{response:t,instance:e}}.bind(this),function(t){(e.requestState.requestState=0,e.properties.isSearchReq&&(e.properties.displayRecords=[],e.properties.allAvailableRecords=[]),e.callBacks.handleErrReqFunc)?e.callBacks.handleErrReqFunc():(0,console.error)(t);return!1}.bind(this));var n=this.getQueryParams(e),p=e.callBacks.customRequestFunc(e,n);if(p&&p.then)return Promise.resolve(p).then(function(t){this.handleResponse(e,t,l)}.bind(this))}},getQueryParams:function(e){var t={},o={};for(var a in e.properties.queryParams)t[a]=e.properties.queryParams[a];return e.properties.customPagination&&e.properties.isNonPagination||(t.per_page=e.properties.perPage,t.pageNo=e.properties.pageNo),e.callBacks.currentLoadingStage?(!(o=e.callBacks.currentLoadingStage(e,t))||"object"!=typeof o&&o.constructor==Object)&&(o=t):o=t,t},handleResponse:function(e,t,o){if(!o||"initial"!==e.properties.currentLoadingStage&&""!==e.properties.currentLoadingStage){if(e.callBacks.afterRequestFunc){var a=e.callBacks.afterRequestFunc(e,t);a||(a=t)}e.properties.isSearchReq?(""!==e.properties.searchValue||e.properties.searchValue&&0!=e.properties.searchValue.length)&&this.parseResponse(e,a):this.parseResponse(e,a)}},parseResponse:function(e,t){var o,a,r=!0;o=e.properties.isSearchReq?e.properties.parseResponseKey.search:e.properties.parseResponseKey.normal,t?(t&&t.constructor==Object&&!t[e.properties.parseResponseKey]||Array.isArray(t)&&0==t.length||t[0]&&t[0].$&&t[0].$.isError)&&(r=!1):r=!1,r&&(t.constructor==Object?a=t[o]:Array.isArray(t)?a=t:r=!1,Array.isArray(a)&&0!=a.length&&(r=!1)),r?(e.properties.isSearchReq&&(e._localVariables.emptySearchResp=!1),e.properties.allAvailableRecords.push(t),e.properties.customPagination&&e.properties.isNonPagination?e.properties.isNonPagination&&(e.properties.allRecordsFetched=!0):(e.properties.pageNo++,t.length<e.properties.perPage&&(e.properties.allRecordsFetched=!0)),e._localVariables.allAvailablePages.currLen=e.properties.allAvailableRecords.length,e._localVariables.allAvailablePages[e.properties.pageNo-1]=t,this.constructNextBatch(e,!0,e.properties.currentLoadingStage)):(e.properties.isSearchReq&&(e._localVariables.emptySearchResp=!0),e.properties.allRecordsFetched=!0,e._localVariables.previousLoadingStage=e.properties.currentLoadingStage,e.properties.currentLoadingStage="")},performScroll:function(e,t){e._localVariables.preventScrollFuncnality?(e._localVariables.scrollTimeout&&clearTimeout(e._localVariables.scrollTimeout),e._localVariables.scrollTimeout=setTimeout(function(){if(!e._localVariables.preventScrollFuncnalityOnLoad){var o=t.target;if(o.scrollHeight-10<=Math.ceil(o.offsetHeight)+Math.ceil(o.scrollTop)){e._localVariables.preventScrollFuncnalityOnLoad=!0,e.properties.currentLoadingStage="scroll";var a=this.constructNextBatch(e,!1,"scroll");a&&a.then?Promise.resolve(custProm).then((function(t){e._localVariables.preventScrollFuncnalityOnLoad=!1})):e._localVariables.preventScrollFuncnalityOnLoad=!1}}}.bind(this),100)):e._localVariables.preventScrollFuncnality=!1},performSearch:function(e,t,o){e._localVariables.searchTimeout&&clearTimeout(e._localVariables.searchTimeout),e._localVariables.searchTimeout=setTimeout(function(){var o=e.properties.searchValue,a=e.properties.triggerSearchLength;if(e._localVariables.currentSearchValue=o,!e.properties.emptySearchResp&&e._localVariables.oldSearchValue){var r=e._localVariables.currentSearchValue.indexOf(e._localVariables.oldSearchValue);(-1==r||r>0)&&(e.properties.emptySearchResp=!1,e.properties.allRecordsFetched=!1)}o.length>=a&&(e.properties.emptySearchResp||(t||!t.scrollTop>0&&(e._localVariables.preventScrollFuncnality=!0,t.scrollTop=0),e._localVariables.multipleBack=!1,e.properties.isSearchReq||(e.properties.allRecordsFetched=!1),e.properties.isSearchReq=!0,e._localVariables.currentRecordCount=0,e._localVariables.allAvailableRecords=[],e._localVariables.allAvailablePages={currLen:0},e._localVariables.allAvailableBatchs={currLen:0,batchCount:0},e._localVariables.latestBatch=0,e.propperties.displayRecords=[],e.propperties.pageNo=1,e.properties.currentLoadingStage="search",this.constructNextBatch(e,!1,"search"),e._localVariables.oldSearchValue=e._localVariables.currentSearchValue)),0==o.length&&(e._localVariables.multipleBack||(e._localVariables.multipleBack=!0,e.properties.isSearchReq=!1,e._localVariables.currentRecordCount=0,e._localVariables.allAvailableRecords=[],e._localVariables.allAvailablePages={currLen:0},e._localVariables.allAvailableBatchs={currLen:0,batchCount:0},e._localVariables.latestBatch=0,e.propperties.displayRecords=[],e.propperties.pageNo=1,e.properties.currentLoadingStage="initial",this.constructNextBatch(e,!1,"initial"),e._localVariables.oldSearchValue=""))}.bind(this),300)}}}),Lyte.Component.register("crux-user-dropdown",{_template:'<template tag-name="crux-user-dropdown"> <lyte-dropdown data-zcqa="{{cxPropZcqa}}" class="outerDropdown {{noUserSelected}} {{cxPropClass}} {{if(ifEquals(cxPropAppearance,\'box\'),\'cxBoxDropdown\',\'\')}}" lt-prop-disable-item-tooltip="true" lt-prop-freeze="{{cxPropFreeze}}" lt-prop-tooltip="{&quot;appearance&quot;: &quot;callout&quot;, &quot;keeptooltip&quot;:true}" lt-prop-box-button-width="{{cxPropBoxButtonWidth}}" lt-prop-scope="{{cxPropScope}}" lt-prop-boundary="{{cxPropBoundary}}" lt-prop-position="{{cxPropPosition}}" lt-prop-disabled="{{cxPropDisabled}}" lt-prop-placeholder="{{cxPropPlaceholder}}" lt-prop-display-value="{{if(cxPropSelectedUser.full_name,cxPropSelectedUser.full_name,cxPropNoUserLabel)}}" lt-prop-tabindex="{{cxPropTabindex}}" lt-prop-type="{{cxPropType}}" lt-prop-selected="{{lbind(cxPropSelected)}}" lt-prop-callout="{{cxPropCallout}}" lt-prop-yield="true" on-option-selected="{{method(\'userSelected\')}}" on-show="{{method(\'userShow\')}}" on-before-show="{{method(\'userBeforeShow\')}}" on-hide="{{method(\'userHide\')}}" on-before-hide="{{method(\'userBeforeHide\')}}" on-add="{{method(\'userAdd\')}}" on-remove="{{method(\'userRemove\')}}" on-position-change="{{method(\'userPositionChange\')}}" on-scroll="{{method(\'userScroll\')}}" lt-prop-icon-class="{{cxPropDropdownIconClass}}"> <template is="registerYield" yield-name="yield"> <template is="if" value="{{cxPropUserButtonYield}}"><template case="true"> <lyte-drop-button> <lyte-yield yield-name="userButtonYield"></lyte-yield> </lyte-drop-button> </template><template case="false"><template is="if" value="{{expHandlers(cxPropType,\'==\',\'multiple\')}}"><template case="true"> <lyte-drop-button style="min-height: 0px;"> <template is="if" value="{{expHandlers(addedItems.length,\'==\',0)}}"><template case="true"> <span class="lyteDropPlaceholderMultiple crux_userdrop_multi_placeholder">{{cxPropNoUserLabel}}</span> </template></template> <ul class="lyteMultipleSelect"> <template is="for" items="{{addedItems}}" item="item" index="index"> <li data-value="{{item[cxPropSystemValue]}}"> <span class="lyteDropdownVisible">{{item[cxPropUserValue]}}</span> <lyte-drop-remove class="lyteCloseIcon"></lyte-drop-remove> </li> </template> </ul> </lyte-drop-button> </template></template></template></template> <lyte-drop-box class="userDropbox"> <div class="wrapperdiv displayFlex"> <template is="if" value="{{expHandlers(expHandlers(cxPropDisabled,\'!\'),\'&amp;&amp;\',cxPropFilterable)}}"><template case="true"><template is="if" value="{{cxPropFilterYield}}"><template case="true"> <lyte-dropdown data-zcqa="user_dd_type" class="innerUserDropdown" lt-prop-yield="true" lt-prop-selected="{{lbind(cxPropFilterSelected)}}" lt-prop-tabindex="{{cxPropFilterTabindex}}" on-option-selected="{{method(\'filterSelected\')}}" on-show="{{method(\'filterShow\')}}" on-before-show="{{method(\'filterBeforeShow\')}}" on-hide="{{method(\'filterHide\')}}" on-before-hide="{{method(\'filterBeforeHide\')}}" on-position-change="{{method(\'filterPositionChange\')}}" on-scroll="{{method(\'filterScroll\')}}"> <template is="registerYield" yield-name="yield"> <lyte-yield yield-name="filterYield"></lyte-yield> </template> </lyte-dropdown> </template><template case="false"> <lyte-dropdown data-zcqa="user_dd_type" class="cxUserDropdownInnerFilter filterDropDown" lt-prop-selected="{{cxPropFilterSelected}}" on-option-selected="{{method(\'filterSelected\')}}" on-show="{{method(\'filterShow\')}}" on-before-show="{{method(\'filterBeforeShow\')}}" on-hide="{{method(\'filterHide\')}}" on-before-hide="{{method(\'filterBeforeHide\')}}" on-position-change="{{method(\'filterPositionChange\')}}" on-scroll="{{method(\'filterScroll\')}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box class="crux_dropbox_filter"> <lyte-drop-body> <template is="for" items="{{cxPropFilterOptions}}" item="item" index="index"> <lyte-drop-item data-zcqa="user_dd_type_{{item[cxPropFilterSystemValue]}}" data-value="{{item[cxPropFilterSystemValue]}}" class="{{if(ifEquals(item[cxPropFilterSystemValue],cxPropFilterSelected),\'result-selected\',\'\')}}">{{item[cxPropFilterUserValue]}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </template></template></template></template><template is="if" value="{{expHandlers(expHandlers(cxPropDisabled,\'!\'),\'&amp;&amp;\',cxPropSearchable)}}"><template case="true"> <span data-zcqa="user_dd_search_clear" class="{{if(cxPropInputValue,\'clearField\',\'\')}}" onclick="{{action(\'clearInputField\',event)}}" style="{{if(showSearchLoading,\'display:none\',\'display:inline-block\')}}"></span> <lyte-input data-zcqa="user_dd_search" class="userSearchBox" lt-prop-autocomplete="{{cxPropInputAutocomplete}}" lt-prop-placeholder="{{cxPropInputPlaceholder}}" lt-prop-autofocus="{{cxPropInputAutofocus}}" lt-prop-disabled="{{cxPropInputDisabled}}" lt-prop-style="{{cxPropInputStyle}}" lt-prop-readonly="{{cxPropInputReadonly}}" lt-prop-id="{{cxPropInputId}}" lt-prop-class="{{cxPropInputClass}}" lt-prop-type="text" lt-prop-name="{{cxPropInputName}}" lt-prop-width="{{cxPropInputWidth}}" lt-prop-value="{{lbind(cxPropInputValue)}}" lt-prop-update-delay="{{updateDelay}}" lt-prop-appearance="{{cxPropInputAppearance}}" lt-prop-direction="{{cxPropInputDirection}}" lt-prop-wrapper-style="{{cxPropInputWrapperStyle}}" lt-prop-tab-index="{{cxPropInputTabindex}}" onkeydown="{{action(\'closeDropdown\',event)}}" oninput="{{action(\'findUsers\',event)}}" onfocus="{{action(\'closeInnerDropdown\',event)}}"></lyte-input> <span style="{{if(showSearchLoading,\'display:inline-block\',\'display:none\')}};" class="searchLoadingIcon cxUserDropboxSearchLoadingIcon"></span> </template></template> </div> <lyte-drop-body class="bodyDropBody {{if(ifEquals(cxPropType,\'multiple\'),\'multiSelectDd\')}}" onmouseover="{{action(\'showUserInfoTooltip\',event)}}"> <template is="if" value="{{showLoading}}"><template case="true"> <div class="loadingGifDiv cxUserDropboxInitialLoaderWrap aligncenter"> <span class="cxUserDropboxItemsLoader loadingGif"></span> </div> </template><template case="false"> <template is="for" items="{{systemData}}" item="item" index="index"> <lyte-drop-item data-zcqa="user_dd_list_{{item.full_name}}" class="{{if(cxPropUserYield,\'\',if(ifEquals(cxPropType,\'single\'),if(ifEquals(cxPropSelectedUser.id,item.id),\'result-selected\',\'\'),\'\'))}}" data-value="{{item[cxPropSystemValue]}}" data-order="{{index}}"> <template is="if" value="{{cxPropUserYield}}"><template case="true"> <lyte-yield yield-name="userYield" item-value="{{item}}"></lyte-yield> </template><template case="false"> <template is="if" value="{{expHandlers(item.image_link,\'!\')}}"><template case="true"> <template is="if" value="{{item.loggedinuser}}"><template case="true"> <div class="cruxUserImgWrap loggedInUser"> <span class="cruxUserImg"></span> </div> </template><template case="false"><template is="if" value="{{item.allUsers}}"><template case="true"> <div class="cruxUserImgWrap allUsers"> <span class="allUsersImg"></span> </div> </template><template case="false"> <div class="cruxUserImgWrap noUserPhoto cxUserDropboxNoUserPhoto"> <span class="cruxUserImg"></span> </div> </template></template></template></template> </template><template case="false"> <div class="cruxUserImgWrap"> <img src="{{item.image_link}}" class="cruxUserImg"> </div> </template></template> <div class="userDetail mL10 {{if(item.allUsers,\'cruxDropAlluser\',\'\')}}"> <div class="userPrimaryDetail">{{item[cxPropUserValue]}}</div> <div class="userSecondaryDetail">{{item.email}}</div> </div> </template></template> </lyte-drop-item> </template> <template is="if" value="{{showScrollLoading}}"><template case="true"> <div class="loadingGifDiv aligncenter"> <span class="cxUserDropboxScrollLoaderIcon scrollLoadingGif"></span> </div> </template></template> </template></template> </lyte-drop-body> <div class="noUsersFoundDiv" style="display: none">{{cruxGetI18n("crm.security.group.users.empty")}}</div> </lyte-drop-box> </template> </lyte-dropdown> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,3,1]},{type:"for",position:[1,3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,3]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[3,1,1]},{type:"if",position:[3,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"insertYield",position:[1]}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[3,1,2]},{type:"if",position:[3,1,2],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"if",args:["showSearchLoading","'display:none'","'display:inline-block'"]}}}},{type:"attr",position:[3]},{type:"componentDynamic",position:[3]},{type:"attr",position:[5],attr:{style:{name:"style",helperInfo:{name:"concat",args:["''",{type:"helper",value:{name:"if",args:["showSearchLoading","'display:inline-block'","'display:none'"]}},"';'"]}}}}]}},default:{}},{type:"attr",position:[3,3]},{type:"attr",position:[3,3,1]},{type:"if",position:[3,3,1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1,1]}]}},default:{}},{type:"attr",position:[3]},{type:"text",position:[3,1,0]},{type:"text",position:[3,3,0]}]}},default:{}},{type:"componentDynamic",position:[1]}]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[3,3]},{type:"text",position:[3,5,0]},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[1]}],_observedAttributes:["cxPropFilterYield","cxPropFilterSystemValue","cxPropFilterUserValue","cxPropFilterTabindex","cxPropFilterOptions","cxPropFilterSelected","cxPropAppearance","cxPropCallout","cxPropBoxButtonWidth","cxPropUserFieldProperties","cxPropTabindex","cxPropUserYield","cxPropUserButtonYield","cxPropType","cxPropSelected","cxPropUserValue","cxPropSystemValue","cxPropBoundary","cxPropInputAutocomplete","cxPropInputPlaceholder","cxPropInputAutofocus","cxPropInputDisabled","cxPropInputStyle","cxPropInputReadonly","cxPropInputId","cxPropInputClass","cxPropInputName","cxPropInputWidth","cxPropInputValue","cxPropInputAppearance","cxPropInputDirection","cxPropInputWrapperStyle","cxPropInputTabindex","cxPropPlaceholder","cxPropRecords","cxPropSearchable","cxPropMinLength","cxPropFilterable","cxPropForcedFetch","systemData","addedItems","cxProoPerPage","cxPropSearchPerPage","cxPropSelectedUser","cxPropSelectedUsers","cxPropExclude","cxPropNoUserLabel","cxPropZcqa","cxPropCriteria","cxPropSearchCriteria","cxPropLoginUserRequired","cxPropDisabled","cxPropQueryParam","cxPropAllUserNeeded","cxPropPosition","cxPropClass","cxPropScope","updateDelay","noUserSelected","cxPropMaxLimit","cxPropFreeze","showSearchLoading","cxPropDropdownIconClass"],init:function(){if(this.cacheQuery=!this.getData("cxPropForcedFetch"),this.dataCache=!1,this.currentPos=0,this.localData=[],this.pageNo=1,this.isSearch=!1,this.areRecordsAvailable=!0,this.activeUsersData=[],this.activeUsersPageNo=1,this.allActiveUsersFetched=!1,this.prevSearchChars="",this.doesUserHasFirstName=!0,this.doesUserHasLastName=!0,this.getData("cxPropSearchable")&&this.getData("cxPropMinLength")<2&&this.setData("cxPropMinLength",2),this.getData("cxPropFilterable")){if(this.getData("cxPropFilterYield")&&!this.getData("cxPropFilterSelected")&&this.setData("cxPropFilterSelected","ActiveUsers"),!this.getData("cxPropFilterYield"))if(0===(t=this.getData("cxPropFilterOptions")).length){var e=this.getDefaultFilters();this.setData("cxPropFilterOptions",e),this.getData("cxPropFilterSelected")||this.setData("cxPropFilterSelected",e[0].id)}else{var t=this.getData("cxPropFilterOptions"),o=this.getData("cxPropFilterSystemValue");this.getData("cxPropFilterSelected")||this.setData("cxPropFilterSelected",t[0][o])}}else this.getData("cxPropFilterSelected")||this.setData("cxPropFilterSelected","ActiveUsers");var a=this.getData("cxPropType");if("single"===a){this.getData("cxPropNoUserLabel")||this.getData("cxPropPlaceholder")||this.setData("cxPropNoUserLabel",_cruxUtils.getI18n("crm.label.picklist.none"));var r=this.getData("cxPropSelectedUser");r?this.setData("cxPropSelected",r.id?r.id:""):this.setData("cxPropSelectedUser",{})}else if("multiple"===a){this.getData("cxPropNoUserLabel")||this.setData("cxPropNoUserLabel",_cruxUtils.getI18n("crm.label.picklist.none"));var i=this.getData("cxPropSelectedUsers");i||(i=[],this.setData("cxPropSelectedUsers",i));var s=i?i.length:0;if(s){for(var l=[],n=0;n<s;n++)l[n]=i[n].id;this.setData("cxPropSelected",JSON.stringify(l)),this.setData("addedItems",i)}else this.setData("noUserSelected","cxNoUserSelected lyteDropNoOptSelected")}},data:function(){return{cxPropFilterYield:Lyte.attr("boolean",{default:!1}),cxPropFilterSystemValue:Lyte.attr("string",{default:"id"}),cxPropFilterUserValue:Lyte.attr("string",{default:"category"}),cxPropFilterTabindex:Lyte.attr("string",{default:"0"}),cxPropFilterOptions:Lyte.attr("array",{default:[]}),cxPropFilterSelected:Lyte.attr("string",{default:""}),cxPropAppearance:Lyte.attr("string",{default:""}),cxPropCallout:Lyte.attr("boolean",{default:!1}),cxPropBoxButtonWidth:Lyte.attr("string",{default:"min-button"}),cxPropUserFieldProperties:Lyte.attr("object",{default:{}}),cxPropTabindex:Lyte.attr("string",{default:"0"}),cxPropUserYield:Lyte.attr("boolean",{default:!1}),cxPropUserButtonYield:Lyte.attr("boolean",{default:!1}),cxPropType:Lyte.attr("string",{default:"single"}),cxPropSelected:Lyte.attr("string",{default:""}),cxPropUserValue:Lyte.attr("string",{default:"full_name"}),cxPropSystemValue:Lyte.attr("string",{default:"id"}),cxPropBoundary:Lyte.attr("object",{default:{}}),cxPropInputAutocomplete:Lyte.attr("string",{default:"off"}),cxPropInputPlaceholder:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.label.search.for.users")}),cxPropInputAutofocus:Lyte.attr("boolean",{default:!0}),cxPropInputDisabled:Lyte.attr("boolean",{default:!1}),cxPropInputStyle:Lyte.attr("string",{default:""}),cxPropInputReadonly:Lyte.attr("boolean",{default:!1}),cxPropInputId:Lyte.attr("string",{default:"inputId"}),cxPropInputClass:Lyte.attr("string",{default:""}),cxPropInputName:Lyte.attr("string",{default:""}),cxPropInputWidth:Lyte.attr("string",{default:""}),cxPropInputValue:Lyte.attr("string",{default:""}),cxPropInputAppearance:Lyte.attr("string",{default:"flat"}),cxPropInputDirection:Lyte.attr("string",{default:"vertical"}),cxPropInputWrapperStyle:Lyte.attr("string",{default:""}),cxPropInputTabindex:Lyte.attr("string",{default:"0"}),cxPropPlaceholder:Lyte.attr("string",{default:""}),cxPropRecords:Lyte.attr("number",{default:50}),cxPropSearchable:Lyte.attr("boolean",{default:!0}),cxPropMinLength:Lyte.attr("number",{default:2}),cxPropFilterable:Lyte.attr("boolean",{default:!0}),cxPropForcedFetch:Lyte.attr("boolean",{default:!1}),systemData:Lyte.attr("array",{default:[]}),addedItems:Lyte.attr("array",{default:[]}),cxProoPerPage:Lyte.attr("number",{default:200}),cxPropSearchPerPage:Lyte.attr("number",{default:200}),cxPropSelectedUser:Lyte.attr("object",{default:{},hideAttr:!0}),cxPropSelectedUsers:Lyte.attr("array",{default:[]}),cxPropExclude:Lyte.attr("array",{default:[]}),cxPropNoUserLabel:Lyte.attr("string",{default:""}),cxPropZcqa:Lyte.attr("string",{default:""}),cxPropCriteria:Lyte.attr("string",{default:""}),cxPropSearchCriteria:Lyte.attr("string",{default:""}),cxPropLoginUserRequired:Lyte.attr("boolean",{default:!1}),cxPropDisabled:Lyte.attr("boolean",{default:!1}),cxPropQueryParam:Lyte.attr("object",{default:{}}),cxPropAllUserNeeded:Lyte.attr("boolean",{default:!1}),cxPropPosition:Lyte.attr("string",{default:"down"}),cxPropClass:Lyte.attr("string",{default:""}),cxPropScope:Lyte.attr("string",{default:""}),updateDelay:Lyte.attr("number",{default:void 0}),noUserSelected:Lyte.attr("string",{default:""}),cxPropMaxLimit:Lyte.attr("number",{default:500}),cxPropFreeze:Lyte.attr("boolean",{default:!1}),showSearchLoading:Lyte.attr("boolean",{default:!1}),cxPropDropdownIconClass:Lyte.attr("string")}},didConnect:function(){this.outerDropdown=this.$node.querySelector("lyte-dropdown"),this.outerDropdownBody=this.outerDropdown.querySelector("lyte-drop-body.bodyDropBody"),this.outerDropdownBox=this.outerDropdown.querySelector("lyte-drop-box"),this.innerDropdown=this.outerDropdown.querySelector("lyte-dropdown");var e=this.getData("cxPropType");this.getData("addedItems");if("single"===e&&!this.getData("cxPropUserButtonYield")){var t=this.outerDropdown,o=this.getData("cxPropSelectedUser");if(!o.hasOwnProperty("id")||!o.hasOwnProperty("full_name"))t.querySelector("lyte-drop-button").className="grayColor"}this.addTitle()},didDestroy:function(){var e=this.getData("cxPropFilterOptions"),t=this.getData("cxPropFilterSystemValue");this.pageNo=1,e.forEach(function(e){"ActiveUsers"!==e[t]&&(this.setData("cxPropFilterSelected",e[t]),store.clearCachedQuery("user",this.getQueryParams()))}.bind(this)),clearTimeout(this._timeout)},addTitle:function(){$L.fastdom.measure(function(){this.getData("cxPropSelectedUser");var e=this.getData("addedItems");if(e.length>0)for(var t=this.outerDropdown.querySelectorAll(".lyteMultipleSelect .lyteDropdownVisible"),o=t.length,a=0;a<o;a++)t[a].scrollWidth>t[a].offsetWidth&&(t[a].setAttribute("lt-prop-tooltip-config",JSON.stringify({keeptooltip:!0})),t[a].setAttribute("lt-prop-title",e[a].full_name))}.bind(this))},selectedUsersObserver:function(){var e=this.getData("cxPropSelectedUsers");this.setData("addedItems",e),0===e.length?this.setData("noUserSelected","cxNoUserSelected lyteDropNoOptSelected"):this.setData("noUserSelected",""),this.outerDropdown.ltProp("selected",e.map((function(e){return e.id}))),this.createRemoveErrorDiv()}.observes("cxPropSelectedUsers.[]"),filterableObserver:function(){if(0===this.getData("cxPropFilterOptions").length){var e=this.getDefaultFilters();this.setData("cxPropFilterOptions",e);var t=this.getData("cxPropFilterSelected"),o=e.filter((function(e){return e.id===t})),a=this.outerDropdown.component.childComp;this.innerDropdown=a?a.querySelector("lyte-dropdown"):null,this.innerDropdown&&this.innerDropdown.ltProp("displayValue",o[0].category)}}.observes("cxPropFilterable"),createRemoveErrorDiv:function(){if(this.$node.querySelector("lyte-dropdown").ltProp("show")){for(var e=this.getData("cxPropType"),t=this.$node.querySelector("lyte-dropdown").component.childComp.querySelectorAll("lyte-drop-body.bodyDropBody lyte-drop-item:not(.lyteDropdownActive)"),o=[],a=t.length,r=0;r<a;r++){"none"!==(t[r].style?t[r].style.display:"")&&o.push(t[r])}var i=o.length,s=this.$node.querySelector("lyte-dropdown").component.childComp.querySelector("lyte-drop-body.bodyDropBody");if("multiple"===e&&i>0||"single"===e&&i>0){this.outerDropdownBox;(l=this.outerDropdownBox.querySelector(".noUsersFoundDiv"))&&(l.style.display="none",s.style.display="block")}else if("multiple"===e&&0==i||"single"===e&&0==i){var l;this.outerDropdownBox;(l=this.outerDropdownBox.querySelector(".noUsersFoundDiv"))&&"none"===l.style.display&&(l.style.display="block",s.style.display="none")}}},getQueryParams:function(e){var t={};t.type=this.getData("cxPropFilterSelected");var o=this.getData("cxPropInputValue");if("search"===e){if(o=(o=o.replace(/\(/g,"\\(").replace(/\)/g,"\\)")).trim())if(this.getMethods("setSearchCriteria")){var a=this.executeMethod("setSearchCriteria",o);for(var r in a)t[r]=a[r]}else{var i=this.getData("cxPropSearchCriteria");this.doesUserHasFirstName&&this.doesUserHasLastName?t.criteria=i?"(((first_name:starts_with:"+o+")or(last_name:starts_with:"+o+")or(full_name:starts_with:"+o+")or(email:starts_with:"+o+"))and"+i+")":"((first_name:starts_with:"+o+")or(last_name:starts_with:"+o+")or(full_name:starts_with:"+o+")or(email:starts_with:"+o+"))":this.doesUserHasLastName?t.criteria=i?"(((last_name:starts_with:"+o+")or(full_name:starts_with:"+o+")or(email:starts_with:"+o+"))and"+i+")":"((last_name:starts_with:"+o+")or(full_name:starts_with:"+o+")or(email:starts_with:"+o+"))":this.doesUserHasFirstName&&(t.criteria=i?"(((first_name:starts_with:"+o+")or(full_name:starts_with:"+o+")or(email:starts_with:"+o+"))and"+i+")":"((frist_name:starts_with:"+o+")or(full_name:starts_with:"+o+")or(email:starts_with:"+o+"))")}o.length>=this.getData("cxPropMinLength")?t.per_page=this.getData("cxPropSearchPerPage"):t.per_page=this.getData("cxProoPerPage"),t.page=this.pageNo}else{t.per_page=this.getData("cxProoPerPage"),"ActiveUsers"===this.getData("cxPropFilterSelected")?t.page=this.activeUsersPageNo:t.page=this.pageNo;var s=this.getData("cxPropCriteria");s&&(t.filters=s)}var l=this.getData("cxPropQueryParam");for(var r in l)t[r]=l[r];return t},errorHandling:function(){console.error("Error: user data could not be fetched."),this.setData("showSearchLoading",!1),this.setData("showLoading",!1),this.setData("showScrollLoading",!1),this.localData=[],this.setData("systemData",[]),this.createRemoveErrorDiv.call(this)},usersUtil:function(e,t){this.setData("filterChanged",!1),this.setData("showSearchLoading",!1),this.setData("showLoading",!1);this.$node.querySelector(".outerDropdown").component.childComp.querySelector(".userDropbox lyte-input");var o,a=this.getData("cxPropFilterSelected"),r=this.getData("cxPropAllUserNeeded"),i=[];(!this.isSearch&&r&&i.push({full_name:_cruxUtils.getI18n("AllUsers"),id:"All",email:"",allUsers:!0}),e)?(e.meta?o=e.meta:e.$&&(o=e.$.meta),this.areRecordsAvailable=!!o&&o.more_records):this.areRecordsAvailable=!1;if(e&&e.constructor==Object&&(e=e.user?e.user:e.users),("INVALID_DATA"===e||e&&e.$&&!0===e.$.isError)&&console.error("Error: format of query params for cxPropCriteria is incorrect."),e&&e.constructor===Array&&e.length>0){this.pageNo+=1;var s=this.getData("cxPropFilterSelected"),l=(r=this.getData("cxPropAllUserNeeded"),this.getData("cxPropLoginUserRequired"));this.isSearch||!l&&!r?this.localData=[]:(!l||"AllUsers"!==s&&"ActiveUsers"!==s||i.push({full_name:_cruxUtils.getI18n("current.logged.in.user"),id:"${CURRENTUSER}",email:_cruxUtils.getI18n("current.logged.in.user.definition"),loggedinuser:!0}),this.localData=i),Lyte.arrayUtils(this.localData,"push",e),"ActiveUsers"===a&&(this.activeUsersData=this.localData,this.activeUsersPageNo+=1),(!e||e.length<this.getData("cxProoPerPage"))&&"ActiveUsers"===a&&(this.allActiveUsersFetched=!0),this.currentPos=0,this.paintUsers.call(this),this.outerDropdown.component.childComp&&(this.outerDropdown.component.childComp.querySelector("lyte-drop-body").scrollTop=0)}else"ActiveUsers"===a&&(this.allActiveUsersFetched=!0),this.setData("systemData",i),this.localData=i,this.createRemoveErrorDiv.call(this)},fetchUsers:function(e,t,o){var a=this.getData("cxPropFilterSelected");this.areRecordsAvailable=!0;var r=this.getData("cxPropInputValue"),i=this.prevSearchChars,s=!1;r.startsWith(i)||(s=!0),this.prevSearchChars=r;var l="search"===e&&this.localData.length>0;if("search"!==e||l||(this.setData("showSearchLoading",!1),this.setData("showLoading",!1)),"search"!==e&&"ActiveUsers"!==a||"search"!==e&&"ActiveUsers"===a&&!this.activeUsersData.length>0||"search"===e&&(l||o||s)){if(this.isSearch&&r.length>=this.getData("cxPropMinLength")){if(!r.trim())return;if(this.getMethods("onCustomUserRequest"))(n=this.executeMethod("onCustomUserRequest","user","search",this.getQueryParams(e))).constructor===Promise&&Promise.resolve(n).then(function(e){this.getData("cxPropInputValue")&&this.usersUtil(e,t)}.bind(this),function(){this.errorHandling.call(this)}.bind(this));else store.triggerAction("user","search",this.getQueryParams(e)).then(function(e){this.getData("cxPropInputValue")&&this.usersUtil(e,t)}.bind(this),function(){this.errorHandling.call(this)}.bind(this))}else if("search"===e&&this.isSearch||"search"!==e){if("search"===e&&this.isSearch&&(this.activeUsersPageNo=1),this.dataCache="ActiveUsers"===a&&!1===this.getData("cxPropForcedFetch"),this.getMethods("onCustomUserRequest"))(n=this.executeMethod("onCustomUserRequest","user",this.getQueryParams(),this.cacheQuery,this.dataCache)).constructor===Promise&&Promise.resolve(n).then(function(e){this.usersUtil(e,t)}.bind(this),function(){this.errorHandling.call(this)}.bind(this));else store.findAll("user",this.getQueryParams(),this.cacheQuery,this.dataCache).then(function(e){this.usersUtil(e,t)}.bind(this),function(){this.errorHandling.call(this)}.bind(this))}}else if("search"!==e&&"ActiveUsers"===a&&this.activeUsersData.length>0){var n;if(this.setData("filterChanged",!1),this.getData("cxPropForcedFetch"))if(this.dataCache=!1,this.getMethods("onCustomUserRequest"))(n=this.executeMethod("onCustomUserRequest","user",this.getQueryParams(),this.cacheQuery,this.dataCache)).constructor===Promise&&Promise.resolve(n).then(function(e){this.usersUtil(e,t)}.bind(this),function(){this.errorHandling.call(this)}.bind(this));else store.findAll("user",this.getQueryParams(),this.cacheQuery,this.dataCache).then(function(e){this.usersUtil(e,t)}.bind(this),function(){this.errorHandling.call(this)}.bind(this));else if(this.setData("showSearchLoading",!1),this.setData("showLoading",!1),this.getMethods("onCustomUserRequest"))(n=this.executeMethod("onCustomUserRequest","user",this.getQueryParams())).constructor===Promise&&Promise.resolve(n).then(function(e){this.usersUtil(e,t)}.bind(this),function(){this.errorHandling.call(this)}.bind(this));else store.findAll("user",this.getQueryParams()).then(function(e){this.usersUtil(e,t)}.bind(this),function(){this.errorHandling.call(this)}.bind(this));this.outerDropdown.component.childComp&&(this.outerDropdown.component.childComp.querySelector("lyte-drop-body").scrollTop=0),this.createRemoveErrorDiv.call(this)}},filterObs:function(){var e=this.$node.querySelector("lyte-dropdown.outerDropdown").component.childComp.querySelector(".noUsersFoundDiv");e&&e.setAttribute("style","display:none"),this.getData("cxPropForcedFetch")&&(this.activeUsersPageNo=1,this.allActiveUsersFetched=!1),this.setData("filterChanged",!0),this.setData("showLoading",!0),this.activeUsersPageNo=1,this.pageNo=1,this.setData("cxPropInputValue",""),this.isSearch=!1,this.fetchUsers.call(this)}.observes("cxPropFilterSelected"),fetchUsersByBatch:function(e,t,o){for(var a=[],r=e.length,i=t;i<r&&a.length!=o;i++)a.push(e[i]);return this.currentPos=i,a},paintNextUsers:function(e){this.setData("showScrollLoading",!1);var t,o=this.getData("cxPropFilterSelected");(this.setData("reqPending",!1),e)?(e.meta?t=e.meta:e.$&&(t=e.$.meta),this.areRecordsAvailable=!!t&&t.more_records):this.areRecordsAvailable=!1;e&&e.constructor==Object&&(e=e.user?e.user:e.users),e&&e.constructor===Array?(this.pageNo+=1,e&&(Lyte.arrayUtils(this.localData,"concat",e),"ActiveUsers"===o&&(this.activeUsersData=this.localData,this.activeUsersPageNo+=1)),(!e||e.length<this.getData("cxProoPerPage"))&&"ActiveUsers"===o&&(this.allActiveUsersFetched=!0),this.paintUsers.call(this)):("ActiveUsers"===o&&(this.allActiveUsersFetched=!0),this.createRemoveErrorDiv.call(this))},paintUsers:function(e){var t=this.getData("cxPropFilterSelected"),o=this.outerDropdownBox.classList.contains("lyteDropdownHidden"),a=this.localData,r=this.getData("cxPropRecords"),i=this.currentPos,s=this.getData("systemData");this.getData("addedItems");if(i<a.length){r=a.length-i>r?r:a.length-i;var l=this.fetchUsersByBatch.call(this,a,i,r);0===i?this.setData("systemData",l):Lyte.arrayUtils(s,"push",l);var n=this.getData("cxPropExclude"),p=this.getData("systemData"),c=this.$node.querySelector("lyte-dropdown").component.childComp;c&&p.forEach((function(e){if(-1!==n.indexOf(e.id)){var t=c.querySelector("lyte-drop-item[data-value='"+e.id+"']");t&&(t.style.display="none")}})),"multiple"==this.getData("cxPropType")&&(this.outerDropdown.component.hideNodes.call(this.outerDropdown.component),this.getData("cxPropLoginUserRequired")?this.currentPos-1<=this.getData("cxPropSelectedUsers").length&&this.paintUsers():this.currentPos<=this.getData("cxPropSelectedUsers").length&&this.paintUsers()),this.getData("showScrollLoading")||this.createRemoveErrorDiv()}else if(!o){var d;if("multiple"==this.getData("cxPropType")&&this.outerDropdown.component.hideNodes.call(this.outerDropdown.component),this.areRecordsAvailable)if("ActiveUsers"!==t||"ActiveUsers"===t&&!this.allActiveUsersFetched)if(!this.getData("reqPending"))if(this.setData("reqPending",!0),this.isSearch&&this.getData("cxPropInputValue").length>=this.getData("cxPropMinLength"))if(this.setData("showScrollLoading",!0),this.getMethods("onCustomUserRequest"))(d=this.executeMethod("onCustomUserRequest","user","search",this.getQueryParams(e))).constructor===Promise&&Promise.resolve(d).then(function(e){this.paintNextUsers(e)}.bind(this),function(){this.setData("reqPending",!1),this.errorHandling.call(this)}.bind(this));else store.triggerAction("user","search",this.getQueryParams(e)).then(function(e){this.paintNextUsers(e)}.bind(this),function(){this.setData("reqPending",!1),this.errorHandling.call(this)}.bind(this));else if(this.setData("showScrollLoading",!0),this.getMethods("onCustomUserRequest"))(d=this.executeMethod("onCustomUserRequest","user",this.getQueryParams(),!1,!1)).constructor===Promise&&Promise.resolve(d).then(function(e){this.paintNextUsers(e)}.bind(this),function(){this.setData("reqPending",!1),this.errorHandling.call(this)}.bind(this));else store.findAll("user",this.getQueryParams(),!1,!1).then(function(e){this.paintNextUsers(e)}.bind(this),function(){this.setData("reqPending",!1),this.errorHandling.call(this)}.bind(this))}},excludeObserver:function(){this.getData("cxPropType");var e=this.getData("cxPropExclude"),t=this.getData("systemData"),o=this.$node.querySelector("lyte-dropdown").component.childComp;if(o){for(var a=0;a<e.length;a++){var r=o.querySelector("lyte-drop-item[data-value='"+e[a]+"']");r&&(r.style.display="none")}t.forEach((function(t){if(-1===e.indexOf(t.id)){var a=o.querySelector("lyte-drop-item[data-value='"+t.id+"']");a&&(a.style.display="")}}))}this.createRemoveErrorDiv()}.observes("cxPropExclude.[]"),searchUsers:function(e,t){clearTimeout(this._timeout),this._timeout=setTimeout(function(){this.allActiveUsersFetched=!1;var o=this.getData("cxPropInputValue");if(1!==o.length){var a=o.trim(),r=this.getData("cxPropMinLength");this.$node.querySelector(".outerDropdown").component.childComp.querySelector(".userDropbox lyte-input");this.pageNo=1,(this.isSearch||a.length>=r)&&(this.isSearch=!0,a.length>=r&&(this.setData("showSearchLoading",!0),this.fetchUsers.call(this,"search",e))),0==a.length&&(this.isSearch=!0,this.setData("showSearchLoading",!1),this.fetchUsers.call(this,"search",e,t),this.isSearch=!1)}}.bind(this),300)},openDropdown:function(e,t,o){var a=this.getData("cxPropFilterSelected"),r=!0,i=this.getData("cxPropUserFieldProperties");i&&Object.keys(i).length&&(i.firstName||!1===i.firstName||i.lastName||!1===i.lastName?(r=!1,this.doesUserHasFirstName=i.firstName,this.doesUserHasLastName=i.lastName):r=!0),r&&store.findAll("field",{module:"users"},!1,!1).then(function(e){var t=[];e.constructor===Object?t=e.field?e.field:e.fields:e.constructor===Array&&(t=e);var o=t?t.length:0;if(o){for(var a=!1,r=!1,i=0;i<o&&("first_name"===t[i].api_name?a=!0:"last_name"===t[i].api_name&&(r=!0),!a||!r);i++);this.doesUserHasFirstName=a,this.doesUserHasLastName=r}}.bind(this),function(e){this.doesUserHasFirstName=!1,this.doesUserHasLastName=!1}.bind(this)),this.setData("dataFetched",!0),this.setData("showLoading",!1),this.setData("dataPending",!1),this.localData=[],this.currentPos=0,this.systemData=[];var s,l=[];(this.getData("cxPropAllUserNeeded")&&(l.push({full_name:_cruxUtils.getI18n("AllUsers"),id:"All",email:"",allUsers:!0}),this.localData=l),e)?(e.meta?s=e.meta:e.$&&(s=e.$.meta),this.areRecordsAvailable=!!s&&s.more_records):this.areRecordsAvailable=!1;if(e&&e.constructor==Object&&(e=e.user?e.user:e.users),"INVALID_DATA"===e&&console.error("Error: format of query params for cxPropCriteria is incorrect."),e&&e.constructor===Array&&e.length>0){this.pageNo+=1;var n=this.getData("cxPropFilterSelected"),p=this.getData("cxPropLoginUserRequired");p&&(!p||"AllUsers"!==n&&"ActiveUsers"!==n||l.push({full_name:_cruxUtils.getI18n("current.logged.in.user"),id:"${CURRENTUSER}",email:_cruxUtils.getI18n("current.logged.in.user.definition"),loggedinuser:!0}),this.localData=l),Lyte.arrayUtils(this.localData,"push",e),"ActiveUsers"===n&&(this.activeUsersData=this.localData,this.activeUsersPageNo+=1),e.length<this.getData("cxProoPerPage")&&"ActiveUsers"===n&&(this.allActiveUsersFetched=!0),this.paintUsers.call(this),o.getDropBody(o.childComp).classList.add("_lyteDummyClass")}else"ActiveUsers"===a&&(this.allActiveUsersFetched=!0),this.createRemoveErrorDiv.call(this);this.getMethods("onUserShow")&&this.executeMethod("onUserShow",t,o)},actions:{findUsers:function(e){this.searchUsers(e)},showUserInfoTooltip:function(e){if(!this.getData("cxPropUserYield")){e.stopPropagation();var t=e.target;clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout((function(){t&&(t.classList.contains("userPrimaryDetail")||t.classList.contains("userSecondaryDetail"))&&t.scrollWidth>t.offsetWidth&&(t.setAttribute("lt-prop-tooltip-config",JSON.stringify({keeptooltip:!0,position:"bottom"})),t.setAttribute("lt-prop-title",t.innerText),t.setAttribute("lt-prop-tooltip-class","cxUserDropboxTooltip"))}),300)}},closeDropdown:function(e){var t=e.key?e.key.toLowerCase():"";"esc"!==t&&"escape"!==t||this.$node.querySelector(".outerDropdown").close()},clearInputField:function(e){this.actions.closeInnerDropdown.call(this),this.setData("cxPropInputValue",""),this.outerDropdownBox.querySelector(".userSearchBox").focus(),this.searchUsers(e,!0)},closeInnerDropdown:function(){var e=this.$node.querySelector(".outerDropdown").component.childComp.querySelector(".filterDropDown");e&&e.close()}},methods:{userSelected:function(e,t,o,a){if(e&&e.stopPropagation(),"single"===this.getData("cxPropType")){for(var r,i=this.outerDropdown,s=(this.getData("cxPropFilterSelected"),this.getData("systemData")),l=s.length,n=0;n<l;n++)if(s[n].id===t){r=s[n];break}this.setData("cxPropSelectedUser",r);var p=i.querySelector("lyte-drop-button");if(p.className="",!this.getData("cxPropUserButtonYield")){p.querySelector(".lyteDropdownLabel");this.addTitle()}this.setData("cxPropInputValue",""),this.isSearch=!0,this.searchUsers(void 0,!0)}this.getMethods("onUserSelected")&&this.executeMethod("onUserSelected",e,r,o,a)},userBeforeShow:function(e,t){if(e&&e.stopPropagation(),this.getMethods("onUserBeforeShow")){var o=this.executeMethod("onUserBeforeShow",e,t);if(!1===o)return o}var a=this.getData("cxPropFilterSelected");if(!0===this.getData("cxPropForcedFetch")||!this.getData("dataFetched")&&!this.getData("dataPending")){if(this.setData("dataPending",!0),this.dataCache="ActiveUsers"===a&&!1===this.getData("cxPropForcedFetch"),!0===this.getData("cxPropForcedFetch")&&(this.localData=[],this.setData("systemData",[]),this.currentPos=0,this.pageNo=1,this.activeUsersPageNo=1),this.getMethods("onCustomUserRequest")){var r=this.executeMethod("onCustomUserRequest","user",this.getQueryParams(),this.cacheQuery,this.dataCache);r.constructor===Promise&&Promise.resolve(r).then(function(o){this.openDropdown(o,e,t),t.$node.resetPosition()}.bind(this),function(){this.setData("dataPending",!0),this.errorHandling.call(this)}.bind(this))}else store.findAll("user",this.getQueryParams(),this.cacheQuery,this.dataCache).then(function(o){this.openDropdown(o,e,t),t.$node.resetPosition()}.bind(this),function(){this.setData("dataPending",!0),this.errorHandling.call(this)}.bind(this));this.setData("showLoading",!0)}},userShow:function(e,t){if(!this.getData("showLoading")&&this.getMethods("onUserShow")&&this.executeMethod("onUserShow",e,t),!this.getData("cxPropDisabled")&&this.getData("cxPropSearchable")){var o=this.$node.querySelector("lyte-dropdown");o.ltProp("show")&&o.component.childComp.querySelector(".userSearchBox").focus()}var a=this.outerDropdown.component.childComp,r=a?a.querySelector("lyte-dropdown"):null;if(this.getData("cxPropFilterable")&&r&&!r.ltProp("displayValue")){var i=this.getData("cxPropFilterSelected"),s=this.getData("cxPropFilterOptions").filter((function(e){return e.id===i}));r.ltProp("displayValue",s[0].category)}},userBeforeHide:function(e,t){var o=t.childComp.querySelector("div.wrapperdiv");return(!e||!o.contains(e.target))&&(this.getMethods("onUserBeforeHide")?this.executeMethod("onUserBeforeHide",e,t):void 0)},userHide:function(e,t){var o=t.childComp.querySelector("lyte-dropdown");o&&o.component.childComp&&!o.component.childComp.classList.contains("lyteDropdownHidden")&&o.toggle(),this.setData("cxPropInputValue",""),this.isSearch&&this.searchUsers(void 0,!0),this.getMethods("onUserHide")&&this.executeMethod("onUserHide",e,t)},userAdd:function(e,t,o,a,r){var i=!0,s=JSON.parse(o);s.length>this.getData("cxPropMaxLimit")&&(this.getMethods("onUserDropLimitErr")?this.executeMethod("onUserDropLimitErr"):this.cxPropMaxLimitMessageBox(),i=!1);var l=this.$node.querySelector("lyte-dropdown").component.childComp.querySelector(".wrapperdiv lyte-dropdown");if(l&&l.component.childComp&&!l.component.childComp.classList.contains("lyteDropdownHidden")&&l.toggle(),i){for(var n,p=this.getData("systemData"),c=this.getData("addedItems"),d=this.getData("cxPropSystemValue"),u=p.length,h=0;h<u;h++)if(p[h][d]==t){n=p[h];break}if(this.getMethods("onUserAdd")){var m=c.slice();m.push(n),i=this.executeMethod("onUserAdd",e,n,m,a)}}if(!1===i){var y=s.filter((function(e){return e!==t}));a.$node.ltProp("selected",JSON.stringify(y))}else{Lyte.arrayUtils(c,"push",n);var f=this.outerDropdownBody;f&&parseInt(f.scrollHeight)==parseInt(f.offsetHeight)&&this.paintUsers.call(this);this.$node.querySelector(".lyteMultipleSelect li[data-value='"+n.id+"'] .lyteDropdownVisible");this.addTitle(),this.createRemoveErrorDiv.call(this),this.setData("cxPropSelected",o),this.setData("cxPropSelectedUsers",c),a.$node.resetPosition()}},userRemove:function(e,t,o,a,r,i){for(var s,l=!0,n=this.getData("addedItems"),p=this.getData("cxPropSystemValue"),c=n.length,d=0;d<c;d++)if(n[d][p]==t){s=n[d];break}if(this.getMethods("onUserRemove")){var u=n.filter((function(e){return e.id!==t}));l=this.executeMethod("onUserRemove",e,s,u,a)}if(!1===l)a.$node.ltProp("selected",JSON.stringify(n.map((function(e){return e.id}))));else{if(Lyte.arrayUtils(n,"removeAt",d),this.setData("cxPropSelected",o),this.getMethods("onError")&&this.getData("cxPropSearchable")){var h=this.outerDropdownBody.querySelector("div.userComponent");h&&h.parentElement.removeChild(h)}this.createRemoveErrorDiv.call(this),this.setData("cxPropSelectedUsers",n),a.$node.resetPosition()}},userPositionChange:function(e,t){this.getMethods("onUserPositionChange")&&this.executeMethod("onUserPositionChange",e,t)},userScroll:function(e,t){var o=e.target;clearTimeout(this.timeout1),this.timeout1=setTimeout(function(){o.scrollHeight<=Math.ceil(o.offsetHeight)+Math.ceil(o.scrollTop)&&(this.getData("filterChanged")||(this.isSearch?this.paintUsers.call(this,"search"):this.paintUsers.call(this),this.getMethods("onUserScroll")&&this.executeMethod("onUserScroll",e,t)))}.bind(this),100)},filterSelected:function(e,t,o,a){this.setData("cxPropFilterSelected",t),this.getMethods("onFilterSelected")&&this.executeMethod("onFilterSelected",e,t,o,a)},filterBeforeShow:function(e,t){if(this.getMethods("onFilterBeforeShow"))return this.executeMethod("onFilterBeforeShow",e,t)},filterShow:function(e,t){this.getMethods("onFilterShow")&&this.executeMethod("onFilterShow",e,t)},filterBeforeHide:function(e,t){if(this.getMethods("onFilterBeforeHide"))return this.executeMethod("onFilterBeforeHide",e,t)},filterHide:function(e,t){this.getMethods("onFilterHide")&&this.executeMethod("onFilterHide",e,t)},filterPositionChange:function(e,t){this.getMethods("onFilterPositionChange")&&this.executeMethod("onFilterPositionChange",e,t)},filterScroll:function(e,t){this.getMethods("onFilterScroll")&&this.executeMethod("onFilterScroll",e,t)}}},{mixins:["crux-user-utils"]}),Lyte.Component.register("crux-user-lookup",{_template:'<template tag-name="crux-user-lookup"> <lyte-modal lt-prop-allow-multiple="{{cxPropAllowMultiple}}" lt-prop-close-on-escape="true" class="lookupModal" lt-prop-height="{{cxPropMaxHeight}}" lt-prop-show-close-button="false" lt-prop-max-width="{{cxPropMaxWidth}}" lt-prop-width="{{cxPropModalWidth}}" lt-prop-transition="{&quot;animation&quot;:&quot;slideFromTop&quot;,&quot;duration&quot;:&quot;0.4&quot;}" lt-prop-wrapper-class="popUpWrapper userLookupModal {{if(ifEquals(cxPropType,\'view\'),\'cruxUserView\',\'\')}} {{cxPropWrapperClass}}" lt-prop-offset="{&quot;top&quot;:&quot;0px&quot;,&quot;left&quot;:&quot;center&quot;}" on-before-show="{{method(\'bodyBeforeShow\')}}" on-show="{{method(\'bodyShow\')}}" on-before-close="{{method(\'bodyBeforeClose\')}}" on-close="{{method(\'bodyClose\')}}"> <template is="registerYield" yield-name="modal"> <template is="if" value="{{expHandlers(cxPropHeaderYield,\'!\')}}"><template case="true"> <lyte-modal-header class="headerMinheight"> <template is="if" value="{{expHandlers(cxPropType,\'==\',&quot;view&quot;)}}"><template case="true"> <div class="lookupHeaderStyle"> <span class="lookupHeaderText" data-zcqa="user_view_header_msg">{{cxPropHeaderName}}</span> </div> </template></template> <template is="if" value="{{expHandlers(DselectedList,\'!\')}}"><template case="true"> <div class="displayFlex {{if(cxPropSearchable,\'\',\'cxUserLookupNoSearchCont\')}}"> <template is="if" value="{{cxPropFilterable}}"><template case="true"> <template is="if" value="{{expHandlers(cxPropFilterYield,\'!\')}}"><template case="true"> <lyte-dropdown data-zcqa="user_lookup_type" class="innerDrop pR" lt-prop-callout="{{cxPropUserDropCallout}}" lt-prop-selected="{{cxPropSelectedFilterOption}}" lt-prop-show="{{cxPropUserDropShow}}" lt-prop-freeze="{{cxPropUserDropFreeze}}" lt-prop-disabled="{{cxPropUserDropDisabled}}" lt-prop-boundary="{{cxPropUserDropBoundary}}" on-show="{{method(\'showFilterDropdown\')}}" on-hide="{{method(\'hideFilterDropdown\')}}" on-option-selected="{{method(\'userSelected\')}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box> <lyte-drop-body> <template is="for" items="{{cxPropFilterOptions}}" item="item" index="index"> <lyte-drop-item data-zcqa="user_lookup_type_{{item[cxPropFilterSystemValue]}}" data-value="{{item[cxPropFilterSystemValue]}}">{{item[cxPropFilterUserValue]}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </template><template case="false"> <lyte-dropdown data-zcqa="user_lookup_type" class="innerDrop" lt-prop-yield="true" lt-prop-selected="{{cxPropSelectedFilterOption}}" lt-prop-callout="{{cxPropUserDropCallout}}" lt-prop-show="{{cxPropUserDropShow}}" lt-prop-freeze="{{cxPropUserDropFreeze}}" lt-prop-tabindex="{{cxPropUserDropTabindex}}" lt-prop-disabled="{{cxPropUserDropDisabled}}" lt-prop-boundary="{{cxPropUserDropBoundary}}" on-option-selected="{{method(\'userSelected\')}}" on-show="{{method(\'showFilterDropdown\')}}" on-hide="{{method(\'hideFilterDropdown\')}}"> <template is="registerYield" yield-name="yield"> <lyte-yield yield-name="userDropdownInner"></lyte-yield> </template> </lyte-dropdown> </template></template></template></template><template is="if" value="{{cxPropSearchable}}"><template case="true"> <div class="lookupSearch vam {{if(cxPropFilterable,\'cxLookupFilterpresent\',\'\')}}"> <lyte-input data-zcqa="user_lookup_search" lt-prop-autocomplete="{{cxPropInputAutocomplete}}" lt-prop-placeholder="{{cxPropInputPlaceholder}}" lt-prop-autofocus="{{cxPropInputAutofocus}}" lt-prop-disabled="{{cxPropInputDisabled}}" lt-prop-style="{{cxPropInputStyle}}" lt-prop-readonly="{{cxPropInputReadonly}}" lt-prop-id="{{cxPropInputId}}" lt-prop-class="{{cxPropInputClass}}" lt-prop-type="{{cxPropInputType}}" lt-prop-name="{{cxPropInputName}}" lt-prop-width="{{cxPropInputWidth}}" lt-prop-value="{{lbind(cxPropInputValue)}}" lt-prop-appearance="{{cxPropInputAppearance}}" lt-prop-direction="{{cxPropInputDirection}}" lt-prop-tab-index="{{cxPropInputTabindex}}" oninput="{{action(\'searchKeyup\',event)}}" style="width: 100%;" on-focus="{{method(\'onInputFocus\')}}" on-blur="{{method(\'onInputBlur\')}}"> </lyte-input> <template is="if" value="{{cxPropInputValue.length}}"><template case="true"> <span data-zcqa="user_lookup_search_clear" class="{{if(cxPropInputValue,\'lookupSearchCloseIcon cP\',\'\')}}" onclick="{{action(\'clearInput\',if(cxPropInputValue,true,false))}}" style="{{if(searchingSearch,\'display:none\',\'display:inline-block\')}};"></span> </template></template> <span class="cxUserLookupSearchLoader" style="{{if(searchingSearch,\'\',\'display:none\')}};"></span> </div> </template></template> <template is="if" value="{{expHandlers(cxPropType,\'==\',\'multiple\')}}"><template case="true"> <template is="if" value="{{expHandlers(cxPropReqForSelected,\'!\')}}"><template case="true"> <span data-zcqa="user_lookup_selected" class="userSelection cP mlAuto" onclick="{{action(\'SelectedUserModal\')}}">{{cxPropSelectedLinkMessage}} ({{totalAddedObjects.length}})</span> </template><template case="false"> <span data-zcqa="user_lookup_selected" class="userSelection cP mlAuto" onclick="{{action(\'SelectedUserModal\')}}">{{cxPropSelectedLinkMessage}} ({{cxPropSelectedCount}})</span> </template></template> </template><template case="false"> <template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(cxPropType,\'!=\',&quot;view&quot;),\'&amp;&amp;\',expHandlers(cxPropFilterable,\'!\')),\'&amp;&amp;\',expHandlers(cxPropSearchable,\'!\')),\'&amp;&amp;\',expHandlers(cxPropType,\'==\',&quot;single&quot;))}}"><template case="true"> <span data-zcqa="user_lookup_close" class="userLookupCloseButton lyteModalClose noHeader" onclick="{{action(\'closeUserLookup\')}}"></span> </template><template case="false"> <span data-zcqa="user_lookup_close" class="userLookupCloseButton lyteModalClose" onclick="{{action(\'closeUserLookup\')}}"></span> </template></template> </template></template> </div> </template><template case="false"> <span data-zcqa="user_lookup_back" class="userLookupBackIcon mR5" onclick="{{action(\'bactToLookup\')}}"></span> <span data-zcqa="user_lookup_selected" class="selectedUsersHd">{{cxPropSelectedLinkMessage}}</span> </template></template> </lyte-modal-header> </template><template case="false"> <lyte-modal-header class="headerMinheight"> <lyte-yield yield-name="userHeaderYield"></lyte-yield> </lyte-modal-header> </template></template> <lyte-modal-content class="lookupModalContent" onmouseenter="{{action(\'mouse\',event)}}"> <span class="cxUserLookupListLoader" style="{{if(searchingUser,\'\',\'display:none\')}};"></span> <template is="if" value="{{expHandlers(DselectedList,\'!\')}}"><template case="true"> <lyte-table lt-prop-yield="true" id="cruxUserLookupTable" onscroll="{{action(\'tableScroll\',event)}}" class="{{if(systemData.length,\'userLookupTable\',\'emptyUserLookupTable\')}}"> <template is="registerYield" yield-name="yield"> <lyte-table-structure> <lyte-thead> <lyte-tr> <template is="if" value="{{expHandlers(cxPropType,\'==\',\'single\')}}"><template case="true"> <lyte-th class="lookupTableHeaderWidth lookupFirstMinWidth"></lyte-th> </template><template case="false"><template is="if" value="{{expHandlers(cxPropType,\'==\',&quot;multiple&quot;)}}"><template case="true"> <lyte-th class="lookupTableHeaderWidth lookupFirstMinWidth"><lyte-checkbox data-zcqa="user_lookup_select_all_checkbox" class="{{if(ifEquals(systemData.length,0),\'vh\',\'\')}}" lt-prop-checked="{{lbind(allCheckboxState)}}" lt-prop-name="allSelectCheckbox" on-changed="{{method(\'allCheckboxOnChanged\')}}" on-before-checked="{{method(\'allCheckboxOnBeforeChecked\')}}" on-checked="{{method(\'allCheckboxChecked\')}}" on-unchecked="{{method(\'allCheckboxUnchecked\')}}" on-before-unchecked="{{method(\'allCheckboxbeforeUnchecked\')}}"></lyte-checkbox></lyte-th> </template></template></template></template> <template is="for" items="{{cxPropHeader}}" item="feildName" index="position"> <lyte-th class="lookupTableHeaderColor {{if(ifEquals(cxPropType,\'view\'),\'viewHeaderPadding\',\'\')}}">{{feildName.displayValue}}</lyte-th> </template> </lyte-tr> </lyte-thead> <lyte-tbody id="userLookupTableBody"> <template is="if" value="{{expHandlers(cxPropType,\'==\',\'single\')}}"><template case="true"><template is="for" items="{{systemData}}" item="item" index="index"> <lyte-tr onclick="{{action(\'rowClick\',event,this,index)}}" data-zcqa="user_lookup_list_{{item.full_name}}"> <lyte-td><lyte-radiobutton data-zcqa="user_lookup_list_radiobutton_{{item.full_name}}" lt-prop-type="primary" class="radioLookupTableBodypadding" on-changed="{{method(\'radiobuttonOnChanged\')}}" lt-prop-checked="{{lbind(item.lookup_selected_val)}}" on-before-checked="{{method(\'radiobuttonOnBeforeChecked\')}}" on-checked="{{method(\'radiobuttonChecked\')}}" lt-prop-name="radioButton" lt-prop-value="{{index}}"></lyte-radiobutton></lyte-td> <template is="for" items="{{cxPropHeader}}" item="feildName" index="position"><template is="if" value="{{expHandlers(feildName.yield,\'!\')}}"><template case="true"> <lyte-td class="lookupTableBodyColor"> <template is="if" value="{{expHandlers(feildName.systemValue,\'==\',&quot;full_name&quot;)}}"><template case="true"> <template is="if" value="{{expHandlers(item.image_link,\'!\')}}"><template case="true"> <span class="cxUserLookupNoPhoto cxUserLookupUserImg"></span> </template><template case="false"> <img src="{{item.image_link}}" class="cxUserLookupUserImg"> </template></template> </template></template> <span class="cruxUserLookupText {{if(ifEquals(feildName.systemValue,\'full_name\'),\'cruxUserLookupImage\',\'\')}}" onmouseover="{{action(\'checkForToolTip\',this,userFieldValues(item,feildName.systemValue))}}">{{userDispVal(feildName.systemValue,userFieldValues(item,feildName.systemValue))}}</span> </lyte-td> </template><template case="false"> <lyte-td class="headerMinheight"> <lyte-yield yield-name="{{feildName.systemValue}}" cell-index="{{index}}" cell-value="{{item}}"></lyte-yield> </lyte-td> </template></template></template> </lyte-tr> </template></template><template case="false"><template is="if" value="{{expHandlers(cxPropType,\'==\',\'multiple\')}}"><template case="true"><template is="for" items="{{systemData}}" item="item" index="index"> <lyte-tr onclick="{{action(\'rowClick\',event,this,index)}}" data-zcqa="user_lookup_list_{{item.full_name}}"> <lyte-td class="lookupTableBodypadding"><lyte-checkbox data-zcqa="user_lookup_list_checkbox_{{item.full_name}}" lt-prop-checked="{{lbind(item.lookup_selected_val)}}" lt-prop-value="{{index}}" lt-prop-name="checkbox" on-checked="{{method(\'checkboxChecked\')}}" on-unchecked="{{method(\'checkboxUnchecked\')}}" on-before-checked="{{method(\'checkboxOnBeforeChecked\')}}" on-changed="{{method(\'checkboxOnChanged\')}}" on-before-unchecked="{{method(\'checkboxOnBeforeUnChecked\')}}"></lyte-checkbox></lyte-td> <template is="for" items="{{cxPropHeader}}" item="value" index="position"><template is="if" value="{{expHandlers(value.yield,\'!\')}}"><template case="true"> <lyte-td class="lookupTableBodyColor"> <template is="if" value="{{expHandlers(value.systemValue,\'==\',&quot;full_name&quot;)}}"><template case="true"> <template is="if" value="{{expHandlers(item.image_link,\'!\')}}"><template case="true"> <span class="cxUserLookupNoPhoto cxUserLookupUserImg"></span> </template><template case="false"> <img src="{{item.image_link}}" class="cxUserLookupUserImg"> </template></template> </template></template> <span class="cruxUserLookupText {{if(ifEquals(value.systemValue,\'full_name\'),\'cruxUserLookupImage\',\'\')}}" onmouseover="{{action(\'checkForToolTip\',this,userFieldValues(item,value.systemValue))}}">{{userDispVal(value.systemValue,userFieldValues(item,value.systemValue))}}</span> </lyte-td> </template><template case="false"> <lyte-td class="headerMinheight"> <lyte-yield yield-name="{{value.systemValue}}" cell-index="{{index}}" cell-value="{{item}}"></lyte-yield> </lyte-td> </template></template></template> </lyte-tr> </template></template><template case="false"><template is="if" value="{{expHandlers(cxPropType,\'==\',&quot;view&quot;)}}"><template case="true"><template is="for" items="{{systemData}}" item="item" index="index"> <lyte-tr class="viewLookupTr" data-zcqa="user_view_list_{{item.full_name}}"> <template is="for" items="{{cxPropHeader}}" item="value" index="position"><template is="if" value="{{expHandlers(value.yield,\'!\')}}"><template case="true"> <lyte-td class="lookupTableBodyColor"> <template is="if" value="{{expHandlers(value.systemValue,\'==\',&quot;full_name&quot;)}}"><template case="true"> <template is="if" value="{{expHandlers(item.image_link,\'!\')}}"><template case="true"> <span class="cxUserLookupNoPhoto cxUserLookupUserImg"></span> </template><template case="false"> <img src="{{item.image_link}}" class="cxUserLookupUserImg"> </template></template> </template></template> <span class="cruxUserLookupText {{if(ifEquals(value.systemValue,\'full_name\'),\'cruxUserLookupImage\',\'\')}}" onmouseover="{{action(\'checkForToolTip\',this,userFieldValues(item,value.systemValue))}}">{{userDispVal(value.systemValue,userFieldValues(item,value.systemValue))}}</span> </lyte-td> </template><template case="false"> <lyte-td class="headerMinheight"> <lyte-yield something="" yield-name="headerDetail" cell-index="{{index}}" cell-value="{{item}}" current-header="{{value}}"></lyte-yield> </lyte-td> </template></template></template> </lyte-tr> </template></template></template></template></template></template></template> </lyte-tbody> </lyte-table-structure> <div class="scrollSearchDiv" style="{{if(searchingScroll,\'display:block\',\'display:none\')}};"> <span class="cxUserLookupLazyLoader"></span> </div> </template> </lyte-table> <template is="if" value="{{expHandlers(expHandlers(systemData.length,\'==\',0),\'&amp;&amp;\',expHandlers(firstOpen,\'!\'))}}"><template case="true"><div class="NoUsersLookup">{{cxPropNoUserAvilableMsg}}</div></template></template> </template><template case="false"> <lyte-table lt-prop-yield="true" id="cruxUserLookupTable" onscroll="{{action(\'tableScroll\',event)}}" class="{{if(addedItems.length,\'userLookupTable\',\'emptyUserLookupTable\')}}"> <template is="registerYield" yield-name="yield"> <lyte-table-structure> <lyte-thead> <lyte-tr> <lyte-th class="lookupTableHeaderWidth lookupFirstMinWidth"><lyte-checkbox data-zcqa="user_lookup_select_all_checkbox" class="{{if(ifEquals(addedItems.length,0),\'vh\',\'\')}}" lt-prop-checked="{{if(selectedCheckBoxValue,true,false)}}" lt-prop-name="selectedAllSelectCheckbox" on-changed="{{method(\'allCheckboxOnChanged\')}}" on-before-checked="{{method(\'allCheckboxOnBeforeChecked\')}}" on-checked="{{method(\'allCheckboxChecked\')}}" on-unchecked="{{method(\'allCheckboxUnchecked\')}}" on-before-unchecked="{{method(\'allCheckboxbeforeUnchecked\')}}"></lyte-checkbox></lyte-th> <template is="for" items="{{cxPropHeader}}" item="feildName" index="position"> <lyte-th class="lookupTableHeaderColor">{{feildName.displayValue}}</lyte-th> </template> </lyte-tr> </lyte-thead> <lyte-tbody id="selectedUserLookupTableBody"> <template is="for" items="{{addedItems}}" item="item" index="index"> <lyte-tr onclick="{{action(\'rowClick\',event,this,index)}}" data-zcqa="user_lookup_list_{{item.full_name}}"> <lyte-td class="lookupTableBodypadding"><lyte-checkbox data-zcqa="user_lookup_list_checkbox_{{item.full_name}}" on-changed="{{method(\'checkboxOnChanged\')}}" lt-prop-checked="{{lbind(item.lookup_selected_val)}}" lt-prop-value="{{index}}" lt-prop-name="checkbox" on-checked="{{method(\'checkboxChecked\')}}" on-unchecked="{{method(\'checkboxUnchecked\')}}" on-before-checked="{{method(\'checkboxOnBeforeChecked\')}}" on-before-unchecked="{{method(\'checkboxOnBeforeUnChecked\')}}"></lyte-checkbox></lyte-td> <template is="for" items="{{cxPropHeader}}" item="feildName" index="position"><template is="if" value="{{expHandlers(feildName.yield,\'!\')}}"><template case="true"> <lyte-td class="lookupTableBodyColor"> <template is="if" value="{{expHandlers(feildName.systemValue,\'==\',&quot;full_name&quot;)}}"><template case="true"> <template is="if" value="{{expHandlers(item.image_link,\'!\')}}"><template case="true"> <span class="cxUserLookupNoPhoto cxUserLookupUserImg"></span> </template><template case="false"> <img src="{{item.image_link}}" class="cxUserLookupUserImg"> </template></template> </template></template> <span class="cruxUserLookupText {{if(ifEquals(feildName.systemValue,\'full_name\'),\'cruxUserLookupImage\',\'\')}}" onmouseover="{{action(\'checkForToolTip\',this,userFieldValues(item,feildName.systemValue))}}">{{userDispVal(feildName.systemValue,userFieldValues(item,feildName.systemValue))}}</span> </lyte-td> </template><template case="false"> <lyte-td class="headerMinheight"> <lyte-yield yield-name="{{feildName.systemValue}}" cell-index="{{index}}" cell-value="{{item}}"></lyte-yield> </lyte-td> </template></template></template> </lyte-tr> </template> </lyte-tbody> </lyte-table-structure> <div class="scrollSearchDiv" style="{{if(searchingSelectedScroll,\'display:block\',\'display:none\')}};"> <span class="cxUserLookupLazyLoader"></span> </div> </template> </lyte-table> <template is="if" value="{{expHandlers(addedItems.length,\'==\',0)}}"><template case="true"><div class="NoUsersLookup">{{cxPropNoUserAvilableMsg}}</div></template></template> </template></template> </lyte-modal-content> <template is="if" value="{{expHandlers(expHandlers(cxPropType,\'==\',\'multiple\'),\'&amp;&amp;\',expHandlers(cxPropFooterYield,\'!\'))}}"><template case="true"> <lyte-modal-footer> <lyte-button onclick="{{action(\'closeUserLookup\')}}" data-zcqa="user_lookup_cancel"> <template is="registerYield" yield-name="text"> {{cruxGetI18n(\'crm.button.cancel\')}} </template> </lyte-button> <lyte-button lt-prop-id="LookupAssignButton" lt-prop-disabled="{{lbind(buttonAccessibility)}}" lt-prop-appearance="primary" onclick="{{action(\'assignSelectedUsers\')}}" data-zcqa="user_lookup_assign"> <template is="registerYield" yield-name="text"> {{cruxGetI18n(\'crm.label.assign.manually\')}} </template> </lyte-button> </lyte-modal-footer> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(cxPropType,\'==\',\'single\'),\'&amp;&amp;\',expHandlers(cxPropFooterYield,\'!\'))}}"><template case="true"> <template is="if" value="{{showSelectedFooter}}"><template case="true"> <lyte-modal-footer class="left"> <span data-zcqa="user_lookup_selected" class="singleUserSelected alignSelectedFooter">{{cruxGetI18n(\'crm.label.selected\')}} {{cruxGetI18n(\'crm.auditlog.user\')}}: </span> <template is="if" value="{{showPlaceholderForSelected}}"><template case="true"> <div class="cxUserLookupImgDummy"></div> <div class="cxUserLookupSelNameDummy"></div> </template><template case="false"> <div class="dIB"> <template is="if" value="{{expHandlers(displaySingleUser.image_link,\'!\')}}"><template case="true"> <span class="cxUserLookupNoPhoto"></span> </template><template case="false"> <img src="{{displaySingleUser.image_link}}" class="cxUserLookupUserImg alignSelectedFooter"> </template></template> <span class="alignSelectedFooter">{{userFieldValues(displaySingleUser,"full_name")}}</span> </div> </template></template> </lyte-modal-footer> </template></template> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(cxPropType,\'==\',\'single\'),\'||\',expHandlers(cxPropType,\'==\',\'view\')),\'||\',expHandlers(cxPropType,\'==\',\'multiple\')),\'&amp;&amp;\',cxPropFooterYield)}}"><template case="true"> <lyte-modal-footer> <lyte-yield yield-name="userFooterYield"></lyte-yield> </lyte-modal-footer> </template></template></template></template></template></template> </template> </lyte-modal> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"insertYield",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,2]},{type:"if",position:[1,2],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["''",{type:"helper",value:{name:"if",args:["searchingSearch","'display:none'","'display:inline-block'"]}},"';'"]}}}}]}},default:{}},{type:"attr",position:[1,5],attr:{style:{name:"style",helperInfo:{name:"concat",args:["''",{type:"helper",value:{name:"if",args:["searchingSearch","''","'display:none'"]}},"';'"]}}}}]}},default:{}},{type:"attr",position:[1,4]},{type:"if",position:[1,4],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"text",position:[1,2]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"text",position:[1,2]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[3,0]}]}},default:{}},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"insertYield",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3]},{type:"attr",position:[3,1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["''",{type:"helper",value:{name:"if",args:["searchingUser","''","'display:none'"]}},"';'"]}}}},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1,1,1]},{type:"if",position:[1,1,1,1],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1,0]},{type:"componentDynamic",position:[1,0]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,1,1,3]},{type:"for",position:[1,1,1,3],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3,1]},{type:"if",position:[1,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"for",position:[0],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,0]},{type:"componentDynamic",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"text",position:[1,3,0]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"insertYield",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"for",position:[0],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,0]},{type:"componentDynamic",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"text",position:[1,3,0]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"insertYield",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"for",position:[0],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"text",position:[1,3,0]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"insertYield",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1,3]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3],attr:{style:{name:"style",helperInfo:{name:"concat",args:["''",{type:"helper",value:{name:"if",args:["searchingScroll","'display:block'","'display:none'"]}},"';'"]}}}}]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"text",position:[0,0]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1,1,1,0]},{type:"componentDynamic",position:[1,1,1,1,0]},{type:"componentDynamic",position:[1,1,1,1]},{type:"attr",position:[1,1,1,3]},{type:"for",position:[1,1,1,3],dynamicNodes:[{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3,1]},{type:"for",position:[1,3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,0]},{type:"componentDynamic",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"text",position:[1,3,0]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"insertYield",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,3]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3],attr:{style:{name:"style",helperInfo:{name:"concat",args:["''",{type:"helper",value:{name:"if",args:["searchingSelectedScroll","'display:block'","'display:none'"]}},"';'"]}}}}]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"text",position:[0,0]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[3]},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"registerYield",position:[1,1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"registerYield",position:[1,3,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1,3]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]},{type:"text",position:[1,1,2]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"text",position:[1,3,0]}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}]},{type:"componentDynamic",position:[1]}],_observedAttributes:["cxPropPluralModuleName","cxPropSingularModuleName","cxPropMaxLimitMsg","cxPropAllowMultiple","cxPropCustomRequest","cxPropNoUserAvilableMsg","currentlyExcludedArray","cxPropMaxHeight","cxPropMaxWidth","cxPropLookupWidth","cxPropViewWidth","allCheckboxbeforeUnchecked","allCheckboxState","buttonAccessibility","cxPropWrapperClass","stopScrolling","cxPropQueryParams","selectedCheckBoxValue","cxPropPrimaryKey","cxPropHeader","cxPropHeaderYield","cxPropFooterYield","cxPropNetworkData","displaySingleUser","cxPropSelectedPerPage","searchingScroll","noUsersAvilabel","firstOpen","cxPropModalWidth","cxPropShow","DselectedList","selectedList","cxPropType","cxPropForcedFetch","systemData","localData","pageNo","noMoreRecords","addedItems","totalAddedObjects","currentPos","isSearch","multiScroll","searchingSearch","searchingUser","cxPropCacheQuery","cxPropDataCache","cxPropPerPage","cxPropSelectedIds","cxPropSelectedId","cxPropExclude","cxPropModuleName","cxPropMaxLimit","cxPropHeaderName","cxPropUserDropShow","cxPropUserDropFreeze","cxPropUserDropDisabled","cxPropUserDropBoundary","cxPropUserDropCallout","cxPropUserDropTabindex","cxPropFilter","cxPropFilterYield","cxPropFilterOptions","cxPropSelectedFilterOption","cxPropFilterUserValue","cxPropFilterSystemValue","cxPropSearchable","cxPropFilterable","cxPropRecords","cxPropMinLength","cxPropInputAutocomplete","cxPropInputPlaceholder","cxPropInputAutofocus","cxPropInputDisabled","cxPropInputStyle","cxPropInputReadonly","cxPropInputId","cxPropInputClass","cxPropInputType","cxPropInputName","cxPropInputWidth","cxPropInputValue","cxPropInputAppearance","cxPropInputDirection","cxPropInputWrapperStyle","cxPropInputTabindex","cxPropCriteria","cxPropSearchCriteria","cxPropPreventKeyDown","cxPropReqForSelected","cxPropSelectedCount","cxPropSelectedList","cxPropSetEmptyFilter","cxPropSelectedLinkMessage","cxPropPreventRowClick","showPlaceholderForSelected","showSelectedFooter","cxPropMaxLimitDuration","cxPropSelectedQueryParams","messageBoxType","cxPropUserFieldProperties"],init:function(){if(this.onInDirectChange=!1,this.fixedCacheQuery=this.getData("cxPropNetworkData").cxPropCacheQuery,this.fixedDataCache=this.getData("cxPropNetworkData").cxPropDataCache,this.firstNameAvailability=!0,this.lastNameAvailability=!0,this.onFilterChange=!1,this.preventAllSelection=!1,this.preventCallBacks=!1,this.assignClose=!1,this.preventShowCalling=!1,this.preventWrongClose=!1,this.defaultSelectedIds=[],this.preventAction=!1,this.selectedModalSelectedIds=0,this.selectingFlag=!0,this.filterChange=!1,this.responseData=[],this.onModalClose=!1,this.splitAddedItems=0,this.splitPreAddedItems=0,this.usersAvailable=void 0,this.savedFilter=void 0,this.backButton=!1,this.multipleClicks=!1,this.makeRequest=!1,this.beforeAssign=!1,this.localClose=!1,this.selectedUser=!1,this.headerHeight=void 0,this.modalHeigth=void 0,this.tempLocalData=[],this.tempCurrentPos=void 0,this.tempnoMoreRecords=void 0,this.tempAllselectedCheckbox=void 0,this.tempUserAvilable=void 0,this.temppageNo=void 0,this.tempcxPropPerPage=void 0,this.fixedcxPropPerPage=void 0,this.tempCacheQuery=void 0,this.tempDataCache=void 0,this.inputFocus=!1,this.selectedTotalAddedObjects=[],this.newelySelected=[],this.newelySelectedObject={},this.newelyUnselected=[],this.newelySelectedTempList=[],this.newelySelectedTempObject={},this.preventCheckAllSelection=!1,this.mirrorTotalAddedObjects=[],null==this.getData("cxPropSelectedIds")&&this.setData("cxPropSelectedIds",[]),null==this.getData("cxPropSelectedId")&&this.setData("cxPropSelectedId",""),this.getData("cxPropHeaderYield")&&(this.setData("cxPropFilterable",!1),this.setData("cxPropSearchable",!1)),this.fixedcxPropPerPage=this.getData("cxPropPerPage"),"view"!=this.getData("cxPropType")?this.setData("cxPropModalWidth",this.getData("cxPropLookupWidth")):this.setData("cxPropModalWidth",this.getData("cxPropViewWidth")),this.getData("cxPropHeaderYield"))this.setData("cxPropFilter","");else if(this.getData("cxPropFilterYield"))this.setData("cxPropFilter",this.getData("cxPropSelectedFilterOption"));else{if(0==this.getData("cxPropFilterOptions").length&&this.getData("cxPropFilterable")){var e=this.getDefaultFilters();this.setData("cxPropFilterOptions",e),this.setData("cxPropFilterUserValue","category"),this.setData("cxPropFilterSystemValue","id")}null==this.getData("cxPropSelectedFilterOption")||null==this.getData("cxPropSelectedFilterOption")?(this.setData("cxPropSelectedFilterOption","ActiveUsers"),this.setData("cxPropFilter","ActiveUsers")):this.setData("cxPropFilter",this.getData("cxPropSelectedFilterOption"))}this.getData("cxPropSetEmptyFilter")&&this.setData("cxPropFilter","");var t,o=this.getData("cxPropMaxLimitMsg");""!=o&&null!=o&&null!=o||(t=1==this.getData("cxPropMaxLimit")?this.getData("cxPropSingularModuleName"):this.getData("cxPropPluralModuleName"),o=_cruxUtils.getI18n("crux.comboBox.max.limit",this.getData("cxPropMaxLimit"),t),this.setData("cxPropMaxLimitMsg",o));if(this.getData("cxPropReqForSelected")&&this.getData("cxPropFilterable")){for(var a=this.newelySelectedObject,r=this.newelySelectedTempObject,i=this.getData("cxPropFilterSystemValue"),s=this.getData("cxPropFilterOptions"),l=s.length,n=0;n<l;n++)a[s[n][i]]=[],r[s[n][i]]=[];this.newelySelectedObject=a,this.newelySelectedTempObject=r}},didDestroy:function(){if(!this.getData("cxPropHeaderYield")&&!this.getData("cxPropCustomRequest")){var e=this.getData("cxPropPrimaryKey");this.setData("cxPropPerPage",this.fixedcxPropPerPage),this.setData("pageNo",1);for(var t=this.getData("cxPropFilterOptions"),o=0;o<t.length;o++)this.setData("cxPropFilter",t[o][e]),"ActiveUsers"!=t[o][e]&&store.clearCachedQuery(this.getData("cxPropNetworkData").cxPropModuleName,this.queryParams.call(this));0==this.getData("cxPropFilterable")&&store.clearCachedQuery(this.getData("cxPropNetworkData").cxPropModuleName,this.queryParams.call(this))}this.getMethods("onLookupDestroyed")&&this.executeMethod("onLookupDestroyed"),delete this.bodydrop,delete this.bodybody,delete this.userdrop,delete this.bodybox,delete this.userbody,delete this.userbox},didConnect:function(){this._keydown=this.getKeyDown.bind(this)},customReqFunc:function(e,t,o){if(this.getMethods("onCustomRequest"))return this.executeMethod("onCustomRequest",e,t,this.getData("isSearch"),this.getData("cxPropInputValue"),this.getData("cxPropSelectedList"))},errorOnSearch:function(){this.setData("systemData",[]),this.setData("searchingSearch",!1)},setCriteria:function(){if(this.getData("cxPropHeaderYield")){if(this.getMethods("getCriteria"))t=this.executeMethod("getCriteria")}else{var e=this.getData("cxPropPrimaryKey"),t={},o=this.getData("cxPropQueryParams");for(var a in o)t[a]=o[a];var r=this.getData("cxPropFilter");if(this.getData("cxPropSetEmptyFilter")||(t.type=r),this.getData("isSearch")){if(this.getData("cxPropSearchable")){var i=this.getData("cxPropInputValue").slice().replace(/\(/g,"\\(").replace(/\)/g,"\\)");i=i.trim();var s=this.firstNameAvailability,l=this.lastNameAvailability;if(this.getMethods("setSearchCriteria")){var n=this.executeMethod("setSearchCriteria",i,s,l,t);for(var a in n)t[a]=n[a]}else if("user"==this.getData("cxPropNetworkData").cxPropModuleName){if(s&&l?p="((first_name:starts_with:"+i+")or(last_name:starts_with:"+i+")or(email:starts_with:"+i+")or(full_name:starts_with:"+i+"))":s&&!l?p="((first_name:starts_with:"+i+")or(email:starts_with:"+i+")or(full_name:starts_with:"+i+"))":!s&&l&&(p="((last_name:starts_with:"+i+")or(email:starts_with:"+i+")or(full_name:starts_with:"+i+"))"),null!=this.getData("cxPropSearchCriteria")&&""!=this.getData("cxPropSearchCriteria"))var p="("+p+"and"+this.getData("cxPropSearchCriteria")+")";t.criteria=p,t.type=r}}}else if(this.getData("selectedList")){if(!this.getData("cxPropReqForSelected")){for(var c=this.mirrorTotalAddedObjects,d=[],u=0;u<c.length;u++)null==c[u][e]?d.push(c[u]):d.push(c[u][e]);var h=d.slice(this.splitAddedItems,this.splitAddedItems+this.getData("cxPropSelectedPerPage"));this.splitAddedItems+=this.getData("cxPropSelectedPerPage");var m=this.bodydrop.querySelector("lyte-table-structure").querySelector("input[name=selectedAllSelectCheckbox]");null!=m&&m.parentElement.parentElement.ltProp("checked")&&(this.selectedModalSelectedIds=h.length),this.getData("localData").length+h.length==d.length&&this.setData("noMoreRecords",!1),t={ids:h.join(",")};var y=this.getData("cxPropSelectedQueryParams");for(var a in y)t[a]=y[a]}}else{var f=this.getData("cxPropCriteria");f.length>1&&(t.filters=f)}if(this.getMethods("getCustomQueryParams"))var t=this.executeMethod("getCustomQueryParams",t)}return t},userLookupClose:function(){this.mirrorTotalAddedObjects=[],this.setData("showPlaceholderForSelected",!1),this.setData("showSelectedFooter",!1),this.bodydrop.querySelector(".lyteTableScroll").scrollTop=0,this.onInDirectChange=!1,this.selectedModalSelectedIds=0,this.setData("currentlyExcludedArray",[]),this.preventWrongClose=!1,this.setData("stopScrolling",!1),this.preventShowCalling=!1,this.defaultSelectedIds=[],this.preventAction=!1,this.selectedModalSelectedIds=0;var e=this.getData("cxPropNetworkData");if(0==this.getData("cxPropForcedFetch")&&(e.cxPropCacheQuery=this.fixedCacheQuery,this.setData("cxPropNetworkData",e)),this.setData("displaySingleUser",{}),this.setData("searchingSearch",!1),this.setData("isSearch",!1),this.setData("cxPropInputValue",""),this.setData("isSearch",!1),this.setData("noMoreRecords",!0),"multiple"==this.getData("cxPropType")&&(this.selectingFlag=!0,this.setData("cxPropPerPage",this.fixedcxPropPerPage),this.splitAddedItems=0,this.splitPreAddedItems=0,this.getData("cxPropFooterYield")||this.setData("buttonAccessibility",!0)),this.setData("dataFetched",!1),this.multipleClicks=!1,this.setData("systemData",[]),null!=this.bodydrop.querySelector(".NoUsersLookup")&&(this.bodydrop.querySelector(".NoUsersLookup").style.visibility="hidden"),this.setData("localData",[]),null!=this.bodydrop.querySelector("input[name=allSelectCheckbox]")&&(this.preventAllSelection=!0,this.setData("allCheckboxState",!1),this.preventAllSelection=!1),this.setData("pageNo",1),this.setData("currentPos",0),this.getData("selectedList")&&(this.setData("selectedList",!1),this.setData("cxPropSelectedList",!1),this.setData("DselectedList",!1)),this.onModalClose=!1,this.selectedUser=!1,this.localClose=!1,this.setData("addedItems",[]),this.getData("cxPropReqForSelected")){if(this.newelySelectedTempList=[],this.getData("cxPropFilterable")){var t=this.newelySelectedTempObject;for(var o in t)t[o]=[];this.newelySelectedTempObject=t}if(this.newelyUnselected=[],this.newelySelected=[],this.getData("cxPropFilterable")){for(var o in t=this.newelySelectedObject)t[o]=[];this.newelySelectedObject=t}}},setSelectedFilterValue:function(){if(!this.getData("cxPropHeaderYield"))if(this.getData("cxPropFilterable")){var e=this.getData("cxPropFilterYield");e?(this.setData("cxPropFilter",this.getData("cxPropSelectedFilterOption")),this.getData("selectedList")||this.userdrop.ltProp("selected",this.getData("cxPropSelectedFilterOption")),this.getMethods("onFilterOptionSelected")&&this.executeMethod("onFilterOptionSelected",{},this.getData("cxPropSelectedFilterOption"),this.userdrop.component)):e||null==this.getData("cxPropSelectedFilterOption")||(this.setData("cxPropFilter",this.getData("cxPropSelectedFilterOption")),this.getData("selectedList")||this.userdrop.ltProp("selected",this.getData("cxPropSelectedFilterOption")))}else null==this.getData("cxPropSelectedFilterOption")||null==this.getData("cxPropSelectedFilterOption")?(this.setData("cxPropSelectedFilterOption","ActiveUsers"),this.setData("cxPropFilter","ActiveUsers")):this.setData("cxPropFilter",this.getData("cxPropSelectedFilterOption"))},newConstructedBatch:function(e){for(var t,o,a=this.getData("cxPropPrimaryKey"),r=e.length,i=0;i<r;i++){if(this.setData("preventCall",!0),this.getData("cxPropReqForSelected"))if(this.getData("selectedList")){t=(o=this.newelyUnselected.slice()).length,Lyte.Component.set(e[i],"lookup_selected_val",!0);for(l=0;l<t;l++)o[l][a]==e[i][a]&&Lyte.Component.set(e[i],"lookup_selected_val",!1)}else{if(this.getData("cxPropFilterable")){var s=this.getData("cxPropFilter");o=this.newelySelectedObject[s].slice()}else o=this.newelySelected.slice();t=o.length,Lyte.Component.set(e[i],"lookup_selected_val",!1);for(var l=0;l<t;l++)o[l][a]==e[i][a]&&Lyte.Component.set(e[i],"lookup_selected_val",!0)}else if(t=1,o=this.getData("totalAddedObjects"),"multiple"==this.getData("cxPropType")&&(t=o.length),0==this.getData("selectedList")&&"view"!=this.getData("cxPropType")){Lyte.Component.set(e[i],"lookup_selected_val",!1);for(var l=0;l<t;l++)null!=o[l][a]?o[l][a]==e[i][a]&&Lyte.Component.set(e[i],"lookup_selected_val",!0):null!=o[l]?o[l]==e[i][a]&&Lyte.Component.set(e[i],"lookup_selected_val",!0):o==e[i][a]&&Lyte.Component.set(e[i],"lookup_selected_val",!0)}else Lyte.Component.set(e[i],"lookup_selected_val",!0);this.setData("preventCall",!1)}this.getMethods("updateList")&&this.executeMethod("updateList",e)},updatedList:function(){var e=this.getData("cxPropRecords");if(0!=this.getData("currentPos")){if(null!=this.bodydrop.querySelector("input[name=allSelectCheckbox]")&&1==this.bodydrop.querySelector("input[name=allSelectCheckbox]").checked&&0==this.getData("selectedList")){var t=this.getData("systemData").length;for(this.setData("preventAllCallBacks",!0),r=t-1-e;r<=t-1;r++){var o=!0;if(this.getMethods("beforeCheckboxChecked"))o=this.executeMethod("beforeCheckboxChecked",this.getData("systemData")[r]);if(o||null==o||null==o){if(this.getData("totalAddedObjects").length==this.getData("cxPropMaxLimit")){this.cxPropMaxLimitMessageBox(),t>this.getData("cxPropMaxLimit")&&(this.preventAction=!0,this.setData("allCheckboxState",!1),this.preventAction=!1);break}this.preventCallBacks=!0,this.preventCheckAllSelection=!0,Lyte.Component.set(this.getData("systemData")[r],"lookup_selected_val",!0)}}this.preventCheckAllSelection=!1;var a=this;setTimeout((function(){a.checkAllSelection()}),0),this.preventCallBacks=!1,this.setData("preventAllCallBacks",!1)}if(null!=this.bodydrop.querySelector("input[name=selectedAllSelectCheckbox]")&&0==this.bodydrop.querySelector("input[name=selectedAllSelectCheckbox]").checked&&this.getData("selectedList")){if(!this.onInDirectChange){t=this.getData("addedItems").length;this.setData("preventAllCallBacks",!0);for(var r=t-1;r>t-1-e;r--){var i=!0;if(this.getMethods("beforeCheckboxUnChecked"))i=this.executeMethod("beforeCheckboxUnChecked",this.getData("systemData")[r]);(i||null==i||null==i)&&(this.preventCallBacks=!0,this.preventCheckAllSelection=!0,Lyte.Component.set(this.getData("addedItems")[r],"lookup_selected_val",!1))}this.preventCheckAllSelection=!1;a=this;setTimeout((function(){a.checkAllSelection()}),0),this.preventCallBacks=!1,this.setData("preventAllCallBacks",!1)}for(var s=this.getData("addedItems"),l=0,n=s.length,p=0;p<n;p++)s[p].lookup_selected_val&&(l+=1);this.selectedModalSelectedIds=l}else this.selectedModalSelectedIds=this.getData("addedItems").length}},loadMoreData:function(){if(this.bodybody.classList.contains("crux_transform_0deg")?this.bodybody.classList.remove("crux_transform_0deg"):this.bodybody.classList.add("crux_transform_0deg"),!this.getData("selectedList")){for(var e=0,t=0;t<this.getData("systemData").length;t++)this.getData("systemData")[t].lookup_selected_val&&e++;e==this.getData("systemData").length&&0!=e&&(this.preventAction=!0,this.setData("allCheckboxState",!0),this.preventAction=!1),this.onFilterChange=!1}this.setData("firstOpen",!1),this.setData("searchingScroll",!1),this.setData("searchingSelectedScroll",!1),this.setData("searchingSearch",!1),this.getData("noMoreRecords")&&this.getData("localData").length-this.getData("currentlyExcludedArray").length<this.getData("cxPropRecords")?this.constructArray.call(this,"userLookup",!1):this.setData("searchingUser",!1),this.setData("searchingUser",!1),0==this.getData("selectedList")&&(0==this.getData("systemData").length?this.bodydrop.querySelector(".NoUsersLookup").style.visibility="":this.bodydrop.querySelector("#userLookupTableBody").style.visibility=""),this.selectedUser&&(this.setData("DselectedList",!0),this.bodydrop.querySelector(".lyteModal").style.height=this.bodydrop.querySelector(".lyteModal").getBoundingClientRect().height-(this.headerHeight-this.bodydrop.querySelector("lyte-modal-header").getBoundingClientRect().height)+"px"),$L(this.bodydrop.querySelector(".lyteTableScroll")).resetScrollbar()},storeCurrentSelection:function(){if(null!=this.bodydrop.querySelector("input[name=allSelectCheckbox]")){this.bodydrop.querySelector("lyte-table-structure").querySelector("input[name=allSelectCheckbox]");this.preventAction=!0,this.setData("allCheckboxState",!1),this.preventAction=!1}},filterObserver:function(e,t){"search"==e&&this.getMethods("onSearch")&&this.executeMethod("onSearch",this.getData("cxPropInputValue")),"removeAll"==e&&this.getMethods("onCancelSearch")&&this.executeMethod("onCancelSearch",this.getData("cxPropFilter"));var o=this.getData("cxPropNetworkData");this.setData("currentlyExcludedArray",[]),this.filterChange=!0,this.onFilterChange=!1,this.getData("isSearch")||this.setData("searchingUser",!0),0==this.getData("searchingSearch")&&"search"!==e&&(0==this.getData("systemData").length?this.bodydrop.querySelector(".NoUsersLookup").style.visibility="hidden":this.bodydrop.querySelector("#userLookupTableBody").style.visibility="hidden"),"multiple"==this.getData("cxPropType")&&this.storeCurrentSelection();var a=this.getData("cxPropFilter");if(this.getData("isSearch")||("SelectedUsers"!=a&&0==this.getData("cxPropForcedFetch")&&(o.cxPropCacheQuery=this.fixedCacheQuery,this.setData("cxPropNetworkData",o)),"ActiveUsers"==a&&1==this.getData("pageNo")&&0==this.getData("cxPropForcedFetch")?(o.cxPropDataCache=this.fixedDataCache,this.setData("cxPropNetworkData",o)):(o.cxPropDataCache=!1,this.setData("cxPropNetworkData",o))),"SelectedUsers"==a&&this.getData("cxPropReqForSelected")||"SelectedUsers"==a&&0!=this.getData("totalAddedObjects").length||"SelectedUsers"!=a){if(("SelectedUsers"!=a||"SelectedUsers"==a&&this.getData("cxPropReqForSelected"))&&0!=this.getData("pageNo")&&this.setData("pageNo",1),"SelectedUsers"==a&&(this.getData("cxPropReqForSelected")?0==this.newelyUnselected.length?this.setData("selectedCheckBoxValue",!0):this.setData("selectedCheckBoxValue",!1):this.setData("selectedCheckBoxValue",!0)),"search"!==e||"removeAll"==e||"search"===e){if(this.setData("localData",[]),this.setData("currentPos",0),"search"==e&&this.setData("searchingSearch",!0),this.getData("cxPropReqForSelected")&&!this.getData("isSearch")&&this.getData("selectedList")&&1==this.getData("pageNo")){for(var r=this.newelySelected.slice(),i=r.length,s=0;s<i;s++)Lyte.arrayUtils(this.getData("localData"),"unshift",r[s]),Lyte.arrayUtils(this.getData("addedItems"),"unshift",r[s]);this.setData("currentPos",i)}this.constructArray("userLookup",!1),this.filterChange=!1}}else this.setData("selectedCheckBoxValue",!1),this.filterChange=!1,this.setData("addedItems",this.getData("totalAddedObjects")),this.setData("searchingUser",!1),this.setData("DselectedList",!0),this.bodydrop.querySelector(".lyteModal").style.height=this.bodydrop.querySelector(".lyteModal").getBoundingClientRect().height-(this.headerHeight-this.bodydrop.querySelector("lyte-modal-header").getBoundingClientRect().height)+"px"},setAssign:function(){var e=!0;this.getMethods("onBeforeAssign")&&(e=this.getData("cxPropReqForSelected")?this.executeMethod("onBeforeAssign",this.newelySelected,this.newelySelectedObject,this.newelyUnselected):this.executeMethod("onBeforeAssign",this.responseData)),0!=e&&(this.localClose=!0,this.beforeAssign=!0,this.onModalClose=!0,this.setSelectedFilterValue.call(this),this.assignClose=!0,this.$node.cxProp("show",!1),this.getMethods("onAssign")&&(e=this.getData("cxPropReqForSelected")?this.executeMethod("onAssign",this.newelySelected,this.newelySelectedObject,this.newelyUnselected):this.executeMethod("onAssign",this.responseData)))},fetchUsers:function(e,t,o,a,r){var i=t.slice(this.splitPreAddedItems,this.splitPreAddedItems+this.getData("cxPropSelectedPerPage"));return this.splitPreAddedItems+=this.getData("cxPropSelectedPerPage"),a++,store.findAll(this.getData("cxPropNetworkData").cxPropModuleName,{ids:i.join(",")},this.getData("cxPropNetworkData").cxPropCacheQuery,this.getData("cxPropNetworkData").cxPropDataCache,this.getData("cxPropNetworkData").cxPropCustomData).then(function(t){t&&t.constructor==Object&&(t=t[this.getData("cxPropNetworkData").cxPropModuleName]),r.push(t);for(var i=0;i<t.length;i++)o.push(t[i]);this.responseData=o,a==e&&this.setAssign.call(this)}.bind(this),function(e){(0,console.error)(e)}.bind(this)),a},filterObs:function(){this.onModalClose?this.onModalClose=!1:this.backButton?this.backButton=!1:(this.getData("cxPropInputValue").length>1&&this.getData("isSearch")&&(this.setData("cxPropInputValue",""),this.setData("isSearch",!1)),0!=this.getData("pageNo")&&this.setData("pageNo",1),null!=this.bodydrop.querySelector(".lyteTableScroll")&&(this.bodydrop.querySelector(".lyteTableScroll").scrollTop=0),this.filterObserver.call(this))}.observes("cxPropFilter"),changeCacheOption:function(){var e=this.getData("cxPropNetworkData");0==this.getData("cxPropForcedFetch")?e.cxPropCacheQuery=this.fixedCacheQuery:e.cxPropCacheQuery=!1,this.setData("cxPropNetworkData",e)}.observes("cxPropForcedFetch"),showToggle:function(){if(this.preventShowCalling)this.preventShowCalling=!1;else if(this.getData("cxPropShow")){var e=this.getData("cxPropNetworkData");if(0==this.getData("cxPropForcedFetch")?e.cxPropCacheQuery=this.fixedCacheQuery:e.cxPropCacheQuery=!1,this.setData("cxPropNetworkData",e),this.setData("cxPropNetworkData",e),this.setData("cxPropPrimaryKey",store.getPrimaryKey(this.getData("cxPropNetworkData").cxPropModuleName)),this.setData("searchingUser",!0),this.setData("firstOpen",!0),"single"!=this.getData("cxPropType")||this.getData("cxPropFooterYield"))this.$node.querySelector("lyte-modal").ltProp("show",!0);else{var t=this.getData("cxPropSelectedId");0!=t.length&&(this.setData("showSelectedFooter",!0),this.setData("showPlaceholderForSelected",!0),store.findRecord(this.getData("cxPropNetworkData").cxPropModuleName,t).then(function(e){this.setData("showPlaceholderForSelected",!1),this.setData("displaySingleUser",e[0])}.bind(this))),this.$node.querySelector("lyte-modal").ltProp("show",!0)}}else this.preventWrongClose?this.preventWrongClose=!1:this.$node.querySelector("lyte-modal").ltProp("show",!1)}.observes("cxPropShow").on("didConnect"),lookupOpen:function(){this.bodydrop.querySelector("input[name=allSelectCheckbox]")&&this.bodydrop.querySelector("input[name=allSelectCheckbox]").parentElement.parentElement.ltProp("checked")&&(this.setData("preventAllCheckboxUnchecked",!1),this.setData("allCheckboxState",!1));var e=this.getData("cxPropNetworkData");if(!this.multipleClicks&&(this.multipleClicks=!0,!this.getData("dataFetched"))){if("single"==this.getData("cxPropType")){var t=[];t[0]=this.getData("cxPropSelectedId").slice(),this.setData("totalAddedObjects",t)}else this.defaultSelectedIds=this.getData("cxPropSelectedIds").slice(),this.setData("totalAddedObjects",this.getData("cxPropSelectedIds").slice());if(!this.getData("cxPropHeaderYield"))"ActiveUsers"==this.getData("cxPropFilter")&&0==this.getData("cxPropForcedFetch")?e.cxPropDataCache=this.fixedDataCache:e.cxPropDataCache=!1,this.setData("cxPropNetworkData",e);if("user"==this.getData("cxPropNetworkData").cxPropModuleName){var o=!0,a=this.getData("cxPropUserFieldProperties");a&&Object.keys(a).length&&(a.firstName||!1===a.firstName||a.lastName||!1===a.lastName?(o=!1,this.firstNameAvailability=a.firstName,this.lastNameAvailability=a.lastName):o=!0),o&&store.findAll("field",{module:"users"}).then(function(e){var t;e&&e.constructor==Object?null!=e.field?t=e.field:null!=e.fields&&(t=e.fields):e&&e.constructor==Array&&(t=e),this.lastNameAvailability=!1,this.firstNameAvailability=!1;for(var o=0,a=0;a<t.length&&("first_name"==t[a].api_name&&(this.firstNameAvailability=!0,o++),"last_name"==t[a].api_name&&(this.lastNameAvailability=!0,o++),2!==o);a++);}.bind(this),function(e){(0,console.error)(e)}.bind(this))}this.constructArray.call(this,"userLookup",!1),this.multipleClicks=!1,this.setData("dataFetched",!0),this.usersAvailable=!0}},checkAllSelection:function(){if("SelectedUsers"!=this.getData("cxPropFilter"))for(var e=(a=this.getData("systemData")).length,t=0,o=0;o<e;o++){if(!a[o].lookup_selected_val){this.preventAction=!0,this.setData("allCheckboxState",!1),this.preventAction=!1;break}if(++t==this.getData("cxPropMaxLimit")||t===e){this.preventAction=!0,this.setData("allCheckboxState",!0),this.preventAction=!1;break}}else{this.bodydrop.querySelector("lyte-table-structure").querySelector("input[name=selectedAllSelectCheckbox]");if(this.getData("cxPropReqForSelected")){var a;for(e=(a=this.getData("addedItems").length).length,t=0,o=0;o<e;o++){if(a.lookup_selected_val){this.preventAction=!0,this.setData("allCheckboxState",!1),this.preventAction=!1;break}++t==this.getData("cxPropMaxLimit")&&(this.preventAction=!0,this.setData("allCheckboxState",!0),this.preventAction=!1)}}else this.selectedModalSelectedIds==this.getData("addedItems").length?(this.preventAction=!0,this.setData("selectedCheckBoxValue",!0),this.preventAction=!1):(this.preventAction=!0,this.setData("selectedCheckBoxValue",!1),this.preventAction=!1)}},getKeyDown:function(e){if(!this.getData("cxPropPreventKeyDown")&&!this.inputFocus){var t=!1,o=!1,a=!1;38==e.keyCode?t=!0:40==e.keyCode?o=!0:32==e.keyCode&&(a=!0);var r=document.querySelector(".currentOpenedModal").component.childComp.querySelector("lyte-table"),i=r.querySelector(".currentSelected");if(a&&i)i.click();else if(r)if(i||!t&&!o){if(t){null!==i.previousElementSibling&&(i.classList.remove("currentSelected"),i.previousElementSibling.classList.add("currentSelected"),i=i.previousElementSibling);var s=r.querySelector("lyte-thead").querySelector("lyte-th").getBoundingClientRect().bottom,l=i.getBoundingClientRect().top;l-s<0&&(r.querySelector(".lyteTableScroll").scrollTop=r.querySelector(".lyteTableScroll").scrollTop+(l-s))}else if(o){"TEMPLATE"!=i.nextElementSibling.tagName&&(i.classList.remove("currentSelected"),i.nextElementSibling.classList.add("currentSelected"),i=i.nextElementSibling);r.querySelector("lyte-thead").querySelector("lyte-th");var n=r.querySelector(".lyteTableScroll").getBoundingClientRect().bottom,p=i.getBoundingClientRect().bottom;n-p<0&&(r.querySelector(".lyteTableScroll").scrollTop=r.querySelector(".lyteTableScroll").scrollTop+-1*(n-p))}}else r.querySelector("lyte-tbody").querySelector("lyte-tr").classList.add("currentSelected")}},data:function(){return{cxPropPluralModuleName:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.label.users")}),cxPropSingularModuleName:Lyte.attr("string",{default:_cruxUtils.getI18n("User")}),cxPropMaxLimitMsg:Lyte.attr("string",{default:""}),cxPropAllowMultiple:Lyte.attr("boolean",{default:!1}),cxPropCustomRequest:Lyte.attr("boolean",{default:!1}),cxPropNoUserAvilableMsg:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.security.group.users.empty")}),currentlyExcludedArray:Lyte.attr("array",{default:[]}),cxPropMaxHeight:Lyte.attr("string",{default:"60%"}),cxPropMaxWidth:Lyte.attr("string",{default:"100%"}),cxPropLookupWidth:Lyte.attr("string",{default:"60%"}),cxPropViewWidth:Lyte.attr("string",{default:"40%"}),allCheckboxbeforeUnchecked:Lyte.attr("boolean",{default:!0}),allCheckboxState:Lyte.attr("boolean",{default:!1}),buttonAccessibility:Lyte.attr("boolean",{default:!0}),cxPropWrapperClass:Lyte.attr("string",{default:""}),stopScrolling:Lyte.attr("boolean",{default:!1}),cxPropQueryParams:Lyte.attr("object",{default:{}}),selectedCheckBoxValue:Lyte.attr("boolean",{default:!0}),cxPropPrimaryKey:Lyte.attr("string"),cxPropHeader:Lyte.attr("array",{default:[{systemValue:"full_name",displayValue:_cruxUtils.getI18n("crm.zti.label.user"),yield:!1},{systemValue:"role",displayValue:_cruxUtils.getI18n("cob.role"),yield:!1},{systemValue:"email",displayValue:_cruxUtils.getI18n("zoho.email"),yield:!1},{systemValue:"profile",displayValue:_cruxUtils.getI18n("Profile"),yield:!1}]}),cxPropHeaderYield:Lyte.attr("boolean",{default:!1}),cxPropFooterYield:Lyte.attr("boolean",{default:!1}),cxPropNetworkData:Lyte.attr("object",{default:{cxPropModuleName:"user",cxPropCacheQuery:!0,cxPropDataCache:!1}}),displaySingleUser:Lyte.attr("object",{default:{}}),cxPropSelectedPerPage:Lyte.attr("number",{default:100}),searchingScroll:Lyte.attr("boolean",{default:!1}),noUsersAvilabel:Lyte.attr("boolean",{default:!1}),firstOpen:Lyte.attr("boolean"),cxPropModalWidth:Lyte.attr("string"),cxPropShow:Lyte.attr("boolean",{default:!1}),DselectedList:Lyte.attr("boolean",{default:!1}),selectedList:Lyte.attr("boolean",{default:!1}),cxPropType:Lyte.attr("string",{default:"single"}),cxPropForcedFetch:Lyte.attr("boolean",{default:!1}),systemData:Lyte.attr("array",{default:[]}),localData:Lyte.attr("array",{default:[]}),pageNo:Lyte.attr("number",{default:1}),noMoreRecords:Lyte.attr("boolean",{default:!0}),addedItems:Lyte.attr("array",{default:[]}),totalAddedObjects:Lyte.attr("array",{default:[]}),currentPos:Lyte.attr("number",{default:0}),isSearch:Lyte.attr("boolean",{default:!1}),multiScroll:Lyte.attr("boolean",{default:!1}),searchingSearch:Lyte.attr("boolean",{default:!1}),searchingUser:Lyte.attr("boolean",{default:!0}),cxPropCacheQuery:Lyte.attr("boolean"),cxPropDataCache:Lyte.attr("boolean",{default:!1}),cxPropPerPage:Lyte.attr("number",{default:200}),cxPropSelectedIds:Lyte.attr("array",{default:[]}),cxPropSelectedId:Lyte.attr("string",{default:""}),cxPropExclude:Lyte.attr("array",{default:[]}),cxPropModuleName:Lyte.attr("string",{default:"user"}),cxPropMaxLimit:Lyte.attr("number",{default:500}),cxPropHeaderName:Lyte.attr("string"),cxPropUserDropShow:Lyte.attr("boolean",{default:!1}),cxPropUserDropFreeze:Lyte.attr("boolean",{default:!1}),cxPropUserDropDisabled:Lyte.attr("boolean",{default:!1}),cxPropUserDropBoundary:Lyte.attr("object",{default:{}}),cxPropUserDropCallout:Lyte.attr("boolean",{default:!1}),cxPropUserDropTabindex:Lyte.attr("string",{default:"0"}),cxPropFilter:Lyte.attr("string",{default:"AllUsers"}),cxPropFilterYield:Lyte.attr("boolean",{default:!1}),cxPropFilterOptions:Lyte.attr("array",{default:[]}),cxPropSelectedFilterOption:Lyte.attr("string"),cxPropFilterUserValue:Lyte.attr("string",{default:""}),cxPropFilterSystemValue:Lyte.attr("string",{default:""}),cxPropSearchable:Lyte.attr("boolean",{default:!0}),cxPropFilterable:Lyte.attr("boolean",{default:!0}),cxPropRecords:Lyte.attr("number",{default:20}),cxPropMinLength:Lyte.attr("number",{default:2}),cxPropInputAutocomplete:Lyte.attr("string",{default:"off"}),cxPropInputPlaceholder:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.label.search.for.users")}),cxPropInputAutofocus:Lyte.attr("boolean",{default:!1}),cxPropInputDisabled:Lyte.attr("boolean",{default:!1}),cxPropInputStyle:Lyte.attr("string",{default:""}),cxPropInputReadonly:Lyte.attr("boolean",{default:!1}),cxPropInputId:Lyte.attr("string",{default:"inputId"}),cxPropInputClass:Lyte.attr("string",{default:""}),cxPropInputType:Lyte.attr("string",{default:"search"}),cxPropInputName:Lyte.attr("string",{default:""}),cxPropInputWidth:Lyte.attr("string",{default:"auto"}),cxPropInputValue:Lyte.attr("string",{default:""}),cxPropInputAppearance:Lyte.attr("string",{default:"box"}),cxPropInputDirection:Lyte.attr("string",{default:"vertical"}),cxPropInputWrapperStyle:Lyte.attr("string",{default:"border: 1px solid #ddd; padding: 5px;height: 32px; top: unset;"}),cxPropInputTabindex:Lyte.attr("string",{default:"0"}),cxPropCriteria:Lyte.attr("string",{default:""}),cxPropSearchCriteria:Lyte.attr("string",{default:""}),cxPropPreventKeyDown:Lyte.attr("boolean",{default:!1}),cxPropReqForSelected:Lyte.attr("boolean",{default:!1}),cxPropSelectedCount:Lyte.attr("number",{default:0}),cxPropSelectedList:Lyte.attr("boolean",{default:!1}),cxPropSetEmptyFilter:Lyte.attr("boolean",{default:!1}),cxPropSelectedLinkMessage:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.usrpop.non.selected")}),cxPropPreventRowClick:Lyte.attr("boolean",{default:!0}),showPlaceholderForSelected:Lyte.attr("boolean",{default:!1}),showSelectedFooter:Lyte.attr("boolean",{default:!1}),cxPropMaxLimitDuration:Lyte.attr("string",{default:"2000"}),cxPropSelectedQueryParams:Lyte.attr("object",{default:{}}),messageBoxType:Lyte.attr("string",{default:"warning"}),cxPropUserFieldProperties:Lyte.attr("object",{default:{}})}},actions:{rowClick:function(e,t,o){if(this.getData("cxPropPreventRowClick")){if("single"==this.getData("cxPropType")){if(e.target._callee&&"LYTE-RADIOBUTTON"==e.target._callee.tagName)return;if(0!=!t.querySelector("lyte-radiobutton").ltProp("checked")){var a=!0;if(this.getMethods("beforeRadiobuttonClicked"))a=this.executeMethod("beforeRadiobuttonClicked",this.getData("systemData")[o]);(a||null==a||null==a)&&(this.preventCallBacks=!0,Lyte.Component.set(this.getData("systemData")[o],"lookup_selected_val",!0))}}else if("multiple"==this.getData("cxPropType")){if(e.target._callee&&"LYTE-CHECKBOX"==e.target._callee.tagName)return;if(t.querySelector("lyte-checkbox").ltProp("checked")){if(t.querySelector("lyte-checkbox").ltProp("checked")){var r=!0;if(this.getMethods("beforeCheckboxUnChecked"))r=this.executeMethod("beforeCheckboxUnChecked",this.getData("systemData")[o]);(r||null==r||null==r)&&(this.preventCallBacks=!0,Lyte.Component.set(this.getData("systemData")[o],"lookup_selected_val",!this.getData("systemData")[o].lookup_selected_val))}}else{var i=!0;if(this.getMethods("beforeCheckboxChecked"))i=this.executeMethod("beforeCheckboxChecked",this.getData("systemData")[o]);(i||null==i||null==i)&&(this.preventCallBacks=!0,Lyte.Component.set(this.getData("systemData")[o],"lookup_selected_val",!this.getData("systemData")[o].lookup_selected_val))}}this.preventCallBacks=!1}},clearInput:function(e){e&&(this.setData("cxPropInputValue",""),this.setData("isSearch",!1),null!=this.bodydrop.querySelector(".lyteTableScroll")&&(this.bodydrop.querySelector(".lyteTableScroll").scrollTop=0),this.filterObserver.call(this,"removeAll"),this.bodydrop.querySelector("lyte-input input").focus())},searchKeyup:function(e){var t=this.bodydrop.querySelector(".lyteTableScroll");this.keyup.call(this,"userLookup",t,e)},bactToLookup:function(){var e=this.getData("cxPropNetworkData");if(this.selectedModalSelectedIds=0,0==this.getData("cxPropForcedFetch")&&(e.cxPropCacheQuery=this.tempCacheQuery,e.cxPropDataCache=this.tempDataCache,this.setData("cxPropNetworkData",e)),this.bodydrop.querySelector(".lyteModal").style.height=this.bodydrop.querySelector(".lyteModal").getBoundingClientRect().height+(this.headerHeight-this.bodydrop.querySelector("lyte-modal-header").getBoundingClientRect().height)+"px",this.setData("cxPropPerPage",this.tempcxPropPerPage),this.setData("pageNo",this.temppageNo),this.setData("selectedList",!1),this.setData("cxPropSelectedList",!1),this.setData("DselectedList",!1),this.bodydrop=this.$node.querySelector("lyte-modal").component.childComp,this.bodybody=this.bodydrop.querySelector("div.lyteTableScroll"),this.userdrop=this.bodydrop.querySelector("lyte-dropdown"),this.bodybox=this.bodydrop.querySelector("lyte-drop-box"),this.userdrop&&(this.userbody=this.userdrop.querySelector("lyte-drop-body"),this.userbox=this.userdrop.querySelector("lyte-drop-box")),this.usersAvailable=this.tempUserAvilable,this.setData("QueryParam",null),1==this.tempAllselectedCheckbox&&(this.selectingFlag=!1),0==this.getData("totalAddedObjects").length?(this.selectingFlag=!0,this.setData("allCheckboxState",!1)):this.setData("allCheckboxState",this.tempAllselectedCheckbox),this.setData("noMoreRecords",this.tempnoMoreRecords),this.setData("localData",this.tempLocalData),this.setData("currentPos",this.tempCurrentPos),this.splitAddedItems=0,this.backButton=!0,this.setData("cxPropFilter",this.savedFilter),this.getData("cxPropFilterable")&&!this.getData("cxPropHeaderYield")&&this.bodydrop.querySelector("lyte-dropdown").ltProp("selected",this.savedFilter),this.bodydrop.querySelector(".lyteTableScroll").scrollTop=0,this.setData("totalAddedObjects",this.getData("cxPropSelectedIds").slice()),this.makeRequest)this.makeRequest=!1,this.selectedUser=!1,null!=this.bodydrop.querySelector(".lyteTableScroll")&&(this.bodydrop.querySelector(".lyteTableScroll").scrollTop=0),this.filterObserver.call(this,"removeAll");else{this.selectedUser=!1;var t,o=this.getData("cxPropPrimaryKey"),a=this.bodydrop.querySelector("lyte-table-structure").querySelectorAll("input[name=checkbox]"),r=this.getData("systemData");t=this.getData("cxPropReqForSelected")?this.getData("cxPropFilterable")?this.newelySelectedObject[this.getData("cxPropFilter")]:this.newelySelected:this.getData("cxPropSelectedIds");for(var i=0;i<r.length;i++){var s=!1;if(this.getData("cxPropReqForSelected")){selectedDummyLength=t.length;for(var l=0;l<selectedDummyLength;l++)if(t[l][o]==r[i][o]){s=!0;break}}else t.includes(r[i][o])&&(s=!0);s?Lyte.Component.set(r[i],"lookup_selected_val",!0):(r[i].lookup_selected_val&&Lyte.Component.set(a[i],"lookup_selected_val",!1),!r[i].lookup_selected_val&&this.getData("allCheckboxState")&&(this.setData("preventAllCheckboxUnchecked",!1),this.preventAllSelection=!0,this.setData("allCheckboxState",!1),this.preventAllSelection=!1),Lyte.Component.set(r[i],"lookup_selected_val",!1))}setTimeout(function(){this.bodydrop.querySelector("input[name=allSelectCheckbox]").parentElement.parentElement.ltProp("checked")||(this.selectingFlag=!0)}.bind(this),0)}},SelectedUserModal:function(){if(this.getData("cxPropReqForSelected")){this.setData("addedItems",[]),this.newelySelectedTempList=[];var e=this.newelySelectedTempObject;for(var t in e)e[t]=[];this.newelySelectedTempObject=e}this.mirrorTotalAddedObjects=this.getData("totalAddedObjects").slice();var o=this.getData("cxPropNetworkData");this.selectedTotalAddedObjects=this.getData("totalAddedObjects").slice(),this.selectedModalSelectedIds=this.getData("addedItems").length,0==this.getData("cxPropForcedFetch")&&(this.tempCacheQuery=this.getData("cxPropNetworkData").cxPropCacheQuery,this.tempDataCache=this.getData("cxPropNetworkData").cxPropDataCache),o.cxPropCacheQuery=!1,o.cxPropDataCache=!1,this.setData("cxPropNetworkData",o),this.getData("isSearch")&&(this.setData("cxPropInputValue",""),this.setData("isSearch",!1),this.makeRequest=!0),this.getData("cxPropReqForSelected")&&(this.makeRequest=!0),0==this.getData("systemData").length?this.bodydrop.querySelector(".NoUsersLookup").style.visibility="hidden":this.bodydrop.querySelector("#userLookupTableBody").style.visibility="hidden",this.headerHeight=this.bodydrop.querySelector("lyte-modal-header").getBoundingClientRect().height,this.modalHeigth=this.bodydrop.querySelector(".lyteModal").getBoundingClientRect().height,this.tempcxPropPerPage=this.getData("cxPropPerPage"),this.getData("cxPropReqForSelected")||this.setData("cxPropPerPage",0),this.temppageNo=this.getData("pageNo"),this.getData("cxPropReqForSelected")?this.setData("pageNo",1):this.setData("pageNo",0),this.tempAllselectedCheckbox=this.bodydrop.querySelector("input[name=allSelectCheckbox]").parentElement.parentElement.ltProp("checked"),this.tempLocalData=this.getData("localData"),this.tempCurrentPos=this.getData("currentPos"),this.tempnoMoreRecords=this.getData("noMoreRecords"),this.setData("noMoreRecords",!0),this.tempUserAvilable=this.usersAvailable,this.selectedUser=!0,this.savedFilter=this.getData("cxPropFilter"),this.setData("selectedList",!0),this.setData("cxPropSelectedList",!0),this.setData("cxPropFilter","SelectedUsers")},assignSelectedUsers:function(){if(this.getData("cxPropReqForSelected"))this.setAssign.call(this);else{for(var e,t,o=[],a=[],r=[],i=0,s=0,l=[],n=(e=this.getData("selectedList")?this.selectedTotalAddedObjects:this.getData("totalAddedObjects")).length-1;n>=0;n--)"object"!=typeof e[n]?o.push(e[n]):(r.push(e[n]),this.responseData=r);for(var p=0;p<o.length;p++){var c=store.peekRecord(this.getData("cxPropNetworkData").cxPropModuleName,o[p]);c?r.push(c):l.push(o[p])}if(0==l.length&&0!=r.length)this.responseData=r,this.setAssign.call(this);else if(0==l.length&&0==r.length)this.responseData=[],this.setAssign.call(this);else for(t=l.length<this.getData("cxPropSelectedPerPage")?1:Math.ceil(l.length/this.getData("cxPropSelectedPerPage")),i=0;i<t;i++)s=this.fetchUsers.call(this,t,l,r,s,a)}},tableScroll:function(e){this.getData("cxPropShow")&&(clearTimeout(this._timeout1),this._timeout1=setTimeout(function(){this.bodyScroll.call(this,"userLookup",e)}.bind(this),100))},mouse:function(e){e._fakeEvent&&setTimeout((function(){e.preventDefault(),e.stopPropagation()}),0)},closeUserLookup:function(){this.localClose=!0,this.$node.cxProp("show",!1)},checkForToolTip:function(e,t){e.scrollWidth>e.offsetWidth?e.setAttribute("lt-prop-title",t):null!=e.getAttribute("lt-prop-title")&&e.removeAttribute("lt-prop-title")}},methods:{onInputFocus:function(){this.inputFocus=!0},onInputBlur:function(){this.inputFocus=!1},showFilterDropdown:function(e,t){this.setData("cxPropPreventKeyDown",!0),t.childComp.classList.add("userLookupFilterDropDown")},hideFilterDropdown:function(){this.setData("cxPropPreventKeyDown",!1)},bodyShow:function(){document.addEventListener("keydown",this._keydown),this.$node.querySelector("lyte-modal").classList.add("currentOpenedModal"),this.bodydrop.querySelector("lyte-modal-content").style.height="",null!=this.bodydrop.querySelector("lyte-input input")&&setTimeout(function(){this.bodydrop.querySelector("lyte-input").focus()}.bind(this),500),this.lookupOpen.call(this),this.getMethods("onBodyShow")&&this.executeMethod("onBodyShow")},bodyBeforeClose:function(){var e;if(this.getMethods("onBeforeLookupClose")&&(e=this.executeMethod("onBeforeLookupClose",this.assignClose)),0==e)return this.getData("cxPropShow")||(this.preventShowCalling=!0,this.setData("cxPropShow",!0)),this.localClose=!1,this.assignClose=!1,this.onModalClose=!1,!1;this.bodydrop.querySelector("#cruxUserLookupTable").scrollTable(0,0),this.assignClose?this.assignClose=!1:this.setData("cxPropSelectedIds",this.defaultSelectedIds),this.onModalClose=!0,this.setSelectedFilterValue.call(this),this.localClose||(this.preventWrongClose=!0),this.getData("cxPropShow")&&this.$node.cxProp("show",!1)},bodyClose:function(){this.$node.querySelector("lyte-modal").classList.remove("currentOpenedModal"),document.removeEventListener("keydown",this._keydown),this.userLookupClose(),this.getMethods("onLookupClose")&&this.executeMethod("onLookupClose")},bodyBeforeShow:function(){if(this.bodydrop=this.$node.querySelector("lyte-modal").component.childComp,this.bodybody=this.bodydrop.querySelector("div.lyteTableScroll"),this.userdrop=this.bodydrop.querySelector("lyte-dropdown"),this.bodybox=this.bodydrop.querySelector("lyte-drop-box"),this.userdrop&&(this.userbody=this.userdrop.querySelector("lyte-drop-body"),this.userbox=this.userdrop.querySelector("lyte-drop-box")),this.bodydrop.querySelector("#userLookupTableBody").style.visibility="hidden",this.getMethods("onBodyBeforeShow"))return this.executeMethod("onBodyBeforeShow")},radiobuttonChecked:function(e,t){this.localClose=!0;var o=this.getData("systemData")[e.value],a=[];if(a.push(this.getData("systemData")[e.value]),this.setData("totalAddedObjects",a),this.assignClose=!0,this.$node.cxProp("show",!1),this.getMethods("onAssign"))return this.executeMethod("onAssign",o);this.getMethods("onRadiobuttonClicked")&&this.executeMethod("onRadiobuttonClicked",this.getData("systemData")[e.value])},radiobuttonOnBeforeChecked:function(e,t){var o=!0;if(!this.preventCallBacks&&this.getMethods("beforeRadiobuttonClicked"))o=this.executeMethod("beforeRadiobuttonClicked",this.getData("systemData")[e.value]);if(!o&&null!=o&&null!=o)return!1;if(this.getMethods("onBeforeAssign")){var a=this.getData("systemData")[e.value];return this.executeMethod("onBeforeAssign",a)}},allCheckboxOnBeforeChecked:function(){if(!this.preventAction){var e=!0;if(this.getMethods("beforeAllCheckboxChecked"))e=this.executeMethod("beforeAllCheckboxChecked");if(!e&&null!=e&&null!=e)return!1;if(this.getData("cxPropSelectedIds").length>=this.getData("cxPropMaxLimit"))return this.cxPropMaxLimitMessageBox(),!1}},allCheckboxChecked:function(e,t){if(!this.preventAction){if(1==this.selectingFlag){var o=(this.getData("selectedList")?this.getData("addedItems"):this.getData("systemData")).length;this.setData("preventAllCallBacks",!0);for(var a=0;a<o;a++){if(!(this.getData("cxPropSelectedIds").length<this.getData("cxPropMaxLimit"))){this.getData("selectedList")||this.cxPropMaxLimitMessageBox();break}var r=!0;this.getMethods("beforeCheckboxChecked")&&(r=this.getData("selectedList")?this.executeMethod("beforeCheckboxChecked",this.getData("addedItems")[a]):this.executeMethod("beforeCheckboxChecked",this.getData("systemData")[a])),(r||null==r||null==r)&&(this.preventCallBacks=!0,this.preventCheckAllSelection=!0,this.getData("selectedList")?Lyte.Component.set(this.getData("addedItems")[a],"lookup_selected_val",!0):Lyte.Component.set(this.getData("systemData")[a],"lookup_selected_val",!0))}this.preventCheckAllSelection=!1;var i=this;setTimeout((function(){i.checkAllSelection()}),0),this.preventCallBacks=!1,this.setData("preventAllCallBacks",!1)}else this.selectingFlag=!0;this.getData("selectedList")&&(this.selectedTotalAddedObjects=this.getData("totalAddedObjects").slice()),this.getMethods("onAllCheckboxChecked")&&this.executeMethod("onAllCheckboxChecked")}},allCheckboxbeforeUnchecked:function(e,t,o){if(this.getData("preventAllCheckboxUnchecked")){var a=!0;if(this.getMethods("beforeAllCheckboxUnChecked"))a=this.executeMethod("beforeAllCheckboxUnChecked");if(0==a)return!1;"SelectedUsers"==this.getData("cxPropFilter")&&(this.onInDirectChange=!o||0==Object.keys(o).length)}else this.setData("preventAllCheckboxUnchecked",!0)},allCheckboxUnchecked:function(e,t){if(!this.preventAllSelection){if(!this.preventAction){if(this.getData("selectedList"))this.selectedTotalAddedObjects=[],this.setData("cxPropSelectedIds",[]);else{for(var o=this.getData("systemData"),a=o.length,r=this.getData("cxPropSelectedIds"),i=r.length,s=0;s<a;s++)for(var l=0;l<i;l++)o[s][this.getData("cxPropPrimaryKey")]==r[l]&&(Lyte.arrayUtils(r,"removeAt",l,1),i=r.length);for(var n=this.getData("totalAddedObjects"),p=n.length,c=0;c<a;c++)for(var d=0;d<p;d++)o[c][this.getData("cxPropPrimaryKey")]==n[d][this.getData("cxPropPrimaryKey")]&&(Lyte.arrayUtils(n,"removeAt",d,1),p=n.length)}this.setData("cxPropSelectedIdsLength",this.getData("cxPropSelectedIds").length);var u=(this.getData("selectedList")?this.getData("addedItems"):this.getData("systemData")).length;this.setData("preventAllCallBacks",!0);for(var h=0;h<u;h++){var m=!0;if(this.getMethods("beforeCheckboxUnChecked"))m=this.getData("selectedList")?this.executeMethod("beforeCheckboxUnChecked",this.getData("addedItems")[h]):this.executeMethod("beforeCheckboxUnChecked",this.getData("systemData")[h]);(m||null==m||null==m)&&(this.preventCallBacks=!0,this.preventCheckAllSelection=!0,this.getData("selectedList")?Lyte.Component.set(this.getData("addedItems")[h],"lookup_selected_val",!1):Lyte.Component.set(this.getData("systemData")[h],"lookup_selected_val",!1))}this.preventCheckAllSelection=!1;var y=this;setTimeout((function(){y.checkAllSelection()}),0),this.preventCallBacks=!1,this.setData("preventAllCallBacks",!1),this.onInDirectChange||(this.selectedModalSelectedIds=0)}this.getMethods("onAllCheckboxUnChecked")&&this.executeMethod("onAllCheckboxUnChecked")}},checkboxChecked:function(e,t){if(1!=this.getData("preventCall")){var o,a=this.getData("cxPropPrimaryKey");if(this.getData("cxPropReqForSelected")){if(o="SelectedUsers"!=this.getData("cxPropFilter")?this.getData("systemData")[e.value]:this.getData("addedItems")[e.value],this.getData("selectedList")){for(var r=!1,i=this.newelySelectedTempList.slice(),s=i.length,l=0;l<s;l++)if(o[a]==i[l][a]){r=!0,this.newelySelected.unshift(o),Lyte.arrayUtils(this.newelySelectedTempList,"removeAt",l,1);break}if(r&&this.getData("cxPropFilterable")){var n=!1,p=this.newelySelectedTempObject;for(var c in p){s=p[c].length;for(l=0;l<s;l++)if(o[a]==p[c][l][a]){Lyte.arrayUtils(this.newelySelectedObject[c],"unshift",o),Lyte.arrayUtils(this.newelySelectedTempObject[c],"removeAt",l,1),n=!0;break}if(n)break}}if(!r){s=(i=this.newelyUnselected.slice()).length;for(l=0;l<s;l++)if(o[a]==i[l][a]){Lyte.arrayUtils(this.newelyUnselected,"removeAt",l,1);break}}}else this.newelySelected.unshift(o),this.getData("cxPropFilterable")&&Lyte.arrayUtils(this.newelySelectedObject[this.getData("cxPropFilter")],"unshift",o);this.setData("cxPropSelectedCount",this.getData("cxPropSelectedCount")+1)}else"SelectedUsers"!=this.getData("cxPropFilter")?o=this.getData("systemData")[e.value]:(o=this.getData("addedItems")[e.value],this.selectedModalSelectedIds+=1),Lyte.arrayUtils(this.getData("cxPropSelectedIds"),"push",o[a]),this.setData("cxPropSelectedIdsLength",this.getData("cxPropSelectedIds").length),Lyte.arrayUtils(this.getData("totalAddedObjects"),"unshift",o),this.getData("selectedList")&&this.selectedTotalAddedObjects.unshift(o);if(this.getMethods("onCheckboxChecked")&&this.executeMethod("onCheckboxChecked",o),!this.preventCheckAllSelection){var d=this;setTimeout((function(){d.checkAllSelection()}),0)}}},checkboxUnchecked:function(e,t){if(1!=this.getData("preventCall")){var o,a=this.getData("cxPropPrimaryKey");if(this.getData("cxPropReqForSelected"))if(o="SelectedUsers"!=this.getData("cxPropFilter")?this.getData("systemData")[e.value]:this.getData("addedItems")[e.value],this.getData("selectedList")){var r=!1;p=(n=this.newelySelected.slice()).length;for(u=0;u<p;u++)if(o[a]==n[u][a]){r=!0,Lyte.arrayUtils(this.newelySelected,"removeAt",u,1),this.newelySelectedTempList.unshift(o);break}if(r&&this.getData("cxPropFilterable")){var i=!1,s=this.newelySelectedObject;for(var l in s){p=s[l].length;for(u=0;u<p;u++)if(o[a]==s[l][u][a]){Lyte.arrayUtils(this.newelySelectedObject[l],"removeAt",u,1),this.newelySelectedTempObject[l].unshift(o),reqKey=l,i=!0;break}if(i)break}}r||Lyte.arrayUtils(this.newelyUnselected,"unshift",o),this.setData("cxPropSelectedCount",this.getData("cxPropSelectedCount")-1)}else{var n=this.newelySelected.slice(),p=n.length;for(u=0;u<p;u++)if(o[a]==n[u][a]){Lyte.arrayUtils(this.newelySelected,"removeAt",u,1);break}if(this.getData("cxPropFilterable")){p=(n=this.newelySelectedObject[this.getData("cxPropFilter")].slice()).length;for(u=0;u<p;u++)if(o[a]==n[u][a]){Lyte.arrayUtils(this.newelySelectedObject[this.getData("cxPropFilter")],"removeAt",u,1);break}}this.setData("cxPropSelectedCount",this.getData("cxPropSelectedCount")-1)}else{"SelectedUsers"==this.getData("cxPropFilter")?(o=this.getData("addedItems")[e.value],this.selectedModalSelectedIds>0&&(this.selectedModalSelectedIds-=1)):o=this.getData("systemData")[e.value];for(var c=this.getData("cxPropSelectedIds"),d=c.length,u=0;u<d;u++)if(o[a]==c[u]){Lyte.arrayUtils(this.getData("cxPropSelectedIds"),"removeAt",u,1);break}this.setData("cxPropSelectedIdsLength",this.getData("cxPropSelectedIds").length);for(var h=o[a],m=(y=this.getData("totalAddedObjects")).length,u=0;u<m;u++)if(null!=y[u][a]){if(y[u][a]==h)break}else if(y[u]==h)break;if(Lyte.arrayUtils(y,"removeAt",u),this.setData("totalAddedObjects",y),this.getData("selectedList")){h=o[a],m=(y=this.selectedTotalAddedObjects).length;for(var y,u=0;u<m;u++)if(null!=y[u][a]){if(y[u][a]==h)break}else if(y[u]==h)break;Lyte.arrayUtils(y,"removeAt",u),this.selectedTotalAddedObjects=y}}if(this.getMethods("onCheckboxUnChecked")&&this.executeMethod("onCheckboxUnChecked",o),!this.preventCheckAllSelection){var f=this;setTimeout((function(){f.checkAllSelection()}),0)}}},checkboxOnChanged:function(e,t){1!=this.getData("preventCall")&&(this.getData("cxPropFooterYield")||this.filterChange||this.setData("buttonAccessibility",!1),this.getMethods("onCheckboxChanged")&&this.executeMethod("onCheckboxChanged",this.getData("systemData")[e.value]))},checkboxOnBeforeChecked:function(e,t){if(1!=this.getData("preventCall")){var o,a=this.getData("cxPropMaxLimit"),r=!0;if(!this.preventCallBacks)if(o="SelectedUsers"!=this.getData("cxPropFilter")?this.getData("systemData")[e.value]:this.getData("addedItems")[e.value],this.getMethods("beforeCheckboxChecked"))r=this.executeMethod("beforeCheckboxChecked",o);if(!r&&null!=r&&null!=r)return!1;if(this.getData("cxPropReqForSelected")){if(0!=a&&this.getData("cxPropSelectedCount")==a)return this.cxPropMaxLimitMessageBox(),!1}else if(this.getData("totalAddedObjects").length==this.getData("cxPropMaxLimit"))return this.cxPropMaxLimitMessageBox(),!1}},checkboxOnBeforeUnChecked:function(e,t){if(1!=this.getData("preventCall")){var o,a=!0;if(!this.preventCallBacks)if(o="SelectedUsers"!=this.getData("cxPropFilter")?this.getData("systemData")[e.value]:this.getData("addedItems")[e.value],this.getMethods("beforeCheckboxUnChecked"))a=this.executeMethod("beforeCheckboxUnChecked",o);if(0==a)return!1}},allCheckboxOnChanged:function(e,t){this.getMethods("onAllCheckboxChanged")&&this.executeMethod("onAllCheckboxChanged",this.getData("systemData")[e.value])},radiobuttonOnChanged:function(e,t){this.getMethods("onRadiobuttonChanged")&&this.executeMethod("onRadiobuttonChanged",this.getData("systemData")[e.value])},userSelected:function(e,t,o,a){this.getMethods("onFilterOptionSelected")&&this.executeMethod("onFilterOptionSelected",e,t,o),this.setData("cxPropFilter",t)}}},{mixins:["crux-user-utils"]}),function(e){if(lyteDomObj){var t=(o=new Map,a=new Map,r=0,i={fnId:0},e.addEventListener("message",(function(e){var t=e.data.fnId;t&&a[t]()})),function(e){o[e]||(r++,o[e]=r,a[r]=e),i.fnId=o[e],postMessage(i,"*")});lyteDomObj.prototype.mIManager={KEY:{BACKSPACE:8,TAB:9,RETURN:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,COMMA:188,SPACE:32,HOME:36,END:35},inputBuffer:[],currentDataQuery:null,textarea:null,escapeMap:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},bindResize:!1,id:null,bindScroll:!1,bindClick:!1,searchTriggeredId:!1,mentionRegex:new RegExp("\\@\\[\\d+\\:\\w+\\]","gi"),encodeMsg:function(e,t){var o=lyteDomObj.prototype.mIManager,a="",r=0;return t.forEach((function(t){-1!=e.indexOf(t)&&(a+=o.htmlEncode(e.substring(0,e.indexOf(t)))+t,r=e.indexOf(t)+t.length,e=e.substring(r))})),a+=o.htmlEncode(e)},htmlEncode:function(e){var t=lyteDomObj.prototype.mIManager,o="(?:"+Object.keys(t.escapeMap).join("|")+")",a=RegExp(o),r=RegExp(o,"g");return e=null==e?"":""+e,a.test(e)?e.replace(r,(function(e){return t.escapeMap[e]})):e},mentionsSyntax:function(e){return"["+e.value+":"+e.id+"]"},createElement:function(e,t,o){var a=document.createElement(e);return t&&(a.id=t),o&&$L(a).addClass(o),a},setCaratPosition:function(e,t){if(e.createTextRange){var o=e.createTextRange();o.move("character",t),o.select()}else e.selectionStart?(e.setSelectionRange(t,t),e.focus()):e.focus()},init:function(t){var o=lyteDomObj.prototype.mIManager,a=o.createElement("div",null,"lyteMIWrapper");_lyteUiUtils.insertBefore(t,a),_lyteUiUtils.appendChild(a,t);var r=o.createElement("div",null,"lyteMIDropdown");_lyteUiUtils.insertAfter(t,r),o.copyTextarea(t);var i=e.getComputedStyle(t),s=o.createElement("div",null,"lyteMentions");s.style.fontFamily=i.fontFamily,s.style.fontSize=i.fontSize,s.style.fontWeight=i.fontWeight;var l=o.createElement("div",null,"lyteMentionsInnerDiv");return _lyteUiUtils.appendChild(s,l),_lyteUiUtils.insertBefore(t,s),r},rtrim:function(e){return e.replace(/\s+$/,"")},ltrim:function(e){return e.replace(/^\s+/,"")},highlightContent:function(e,t){return t||t.length?e.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+t+")(?![^<>]*>)(?![^&;]+;)","gi"),"<b>$1</b>"):e},copyTextarea:function(e){var t=lyteDomObj.prototype.mIManager,o=["paddingTop","paddingRight","paddingBottom","paddingLeft","marginTop","marginRight","marginBottom","marginLeft","fontSize","lineHeight","fontFamily","width","fontWeight","border-top-width","border-right-width","border-bottom-width","border-left-width","borderTopStyle","borderTopColor","borderRightStyle","borderRightColor","borderBottomStyle","borderBottomColor","borderLeftStyle","borderLeftColor","box-sizing","-moz-box-sizing","-webkit-box-sizing"];if("textarea"!==e.type)return!1;var a=$L(e),r=$L(t.createElement("div")).css({display:"none","word-wrap":"break-word"}),i=parseInt(a.css("line-height"),10)||parseInt(a.css("font-size"),"10"),s=parseInt(a.css("height"),10)||3*i,l=parseInt(a.css("max-height"),10)||Number.MAX_VALUE;function n(e,t){var o=Math.floor(parseInt(e||a.outerWidth(),10));a[0]._mIData&&a[0]._mIData._overlayDiv&&$L(a[0].previousElementSibling).css("fontSize",a.css("fontSize")),(t||r.outerWidth())!==o&&(r.css({width:o+"px",fontSize:a.css("fontSize")}),"true"===r[0].getAttribute("setHeight")?r[0].setAttribute("setHeight","false"):c(!0))}function p(e,t,o){var r=Math.floor(parseInt(e,10));o!==r&&(a.css({height:r+"px",overflow:t}),n())}r.addClass("lyteMIOffsetDiv");var c=function(e){r[0].style.display="block";var t=a[0].value.replace(/&/g,"&amp;").replace(/ {2}/g,"&nbsp;").replace(/<|>/g,"&gt;").replace(/\n/g,"<br />"),o=r[0].innerHTML.replace(/<br>/gi,"<br />");if(e||t+"&nbsp;"!==o){r[0].innerHTML=t+"&nbsp;";var c=r.outerHeight(),d=a.outerHeight();if(Math.abs(c+i-d)>=3||""===t){r[0].setAttribute("setHeight","true");var u=c;u>=l?p(l,"auto",d):p(u<=s?s:u,"hidden",d)}var h=r.outerWidth(),m=a.outerWidth();m!=h&&(r[0].setAttribute("setHeight","true"),n(m,h)),r[0].style.display=""}};l<0&&(l=Number.MAX_VALUE),_lyteUiUtils.insertAfter(a[0],r[0]);for(var d=o.length;d--;)"width"===o[d].toString()&&"0px"===a.css(o[d].toString())?n():r.css(o[d].toString(),a.css(o[d].toString()));c(!0),a[0]._closureEvnt=c,a[0].addEventListener("input",a[0]._closureEvnt),a[0].addEventListener("change",a[0]._closureEvnt)},callAtTheEndOfResize:function(e){var t=lyteDomObj.prototype.mIManager;clearTimeout(t.id),t.id=setTimeout((function(){var e=document.querySelectorAll('textarea[data-lyte-mentions="true"]');if(e.length>0)for(var t=0;t<e.length;t++){var o,a=$L(e[t]),r=$L(e[t].nextElementSibling),i=Math.floor(parseInt(a.outerWidth(),10));if(a[0]._mIData&&a[0]._mIData._overlayDiv&&$L(a[0].previousElementSibling).css("fontSize",a.css("fontSize")),r.outerWidth()!==i)if(r.css({width:i+"px",fontSize:a.css("fontSize")}),"true"===r[0].getAttribute("setHeight"))r[0].setAttribute("setHeight","false");else"function"==typeof Event?o=new Event("change"):(o=document.createEvent("Event")).initEvent("change",!0,!0),a[0].dispatchEvent(o)}}),200)}},lyteDomObj.prototype.mentionsInput=function(o){var a=lyteDomObj.prototype.mIManager;a.bindResize||(Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),o=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var a=arguments[1],r=0;r<o;){var i=t[r];if(e.call(a,i,r,t))return r;r++}return-1},configurable:!0,writable:!0}),e.addEventListener("resize",a.callAtTheEndOfResize),a.bindResize=!0);var r,i,s=[],l=[],n="",p=function(){a.inputBuffer=[]},c=function(e,t,o){return e.onBeforeAdd(t,o)},d=function(e,t){e.onAdd(t)},u=function(e,t){e.onRemove&&e.onRemove(t)},h=function(e,t){for(var o=0;o<t.length;o++)for(var a=0;a<e.length;a++)t[o].id==e[a].id&&e.splice(a,1);return e},m=function(e,t){return e.indexOf(t)+t.length},y=function(){var e=i.value||"",t=(i._mIData.searchBy,0),o="",r=[];i._mIData.lyteMICollection.forEach((function(s){var l=i._mIData.triggerChar+a.mentionsSyntax({id:s.id,value:s[i._mIData.searchBy]});r.push(l),o=e.substring(0,t),e=o+e.substring(t).replace(s[i._mIData.searchBy],l),t=m(e,l)}));var s=a.encodeMsg(e,r);i._mIData.lyteMICollection.forEach((function(e){var t=i._mIData.triggerChar+a.mentionsSyntax({id:e.id,value:e[i._mIData.searchBy]}),o="<strong class='lyteMentionsStrongDiv'><span>"+e[i._mIData.searchBy]+"</span></strong>";s=s.replace(t,o)})),s=(s=s.replace(/\n/g,"<br />")).replace(/ {2}/g,"&nbsp; "),i._mIData.syntaxMessage=e,i._mIData._overlayDiv.innerHTML=s},f=function(){var e=i._mIData.syntaxMessage,t=i._mIData.searchBy;l=i._mIData.lyteMICollection;for(var o=[],a=[],r=0;r<l.length;r++)l[r][t]&&-1!=e.indexOf(l[r][t]+":"+l[r].id)?o.push(l[r]):a.push(l[r]);i._mIData.lyteMICollection=o,a.length&&u(i._mIData,a)},g=function(e,t){for(var o=0,a=0,r=i._mIData.searchBy,s=i._mIData.lyteMICollection,l=0;l<s.length;l++){if(-1==t.substring(o).indexOf(s[l][r]))break;o=m(t,s[l][r]),++a}i._mIData.lyteMICollection.splice(a,0,e)},v=function(e){i._addedMentions=!0;var t=i.value,o=i._mIData.appendSpaceOnAdd,r=e[i._mIData.searchBy],s=i.selectionEnd-a.currentDataQuery.length-1,l=i.selectionEnd;if(t.substring(s,l)!==i._mIData.triggerChar+a.currentDataQuery){var u=new RegExp("\\"+i._mIData.triggerChar+a.currentDataQuery,"gi");u.exec(t),s=u.lastIndex-n.length-1,l=u.lastIndex}var h=t.substr(0,s),m=t.substr(l,t.length),f=(h+r).length+(o?1:0),v=h+r+(o?" ":"")+m;i._mIData.onBeforeAdd&&!1===c(i._mIData,e,v)?x():(e.position={start:s,end:s+r.length},g(e,h),p(),a.currentDataQuery="",x(),i.value=v,y(),z(i),setTimeout((function(){a.setCaratPosition(i,f)}),50),i._mIData.onAdd&&d(i._mIData,e))},x=function(e,t){var o=e||i;s=[],(t=t||r)||(t=o._mIData.lyteMIList),o._mIData.onHide&&o._mIData.onHide(t,o),o._mIData.dropbody&&(t.innerHTML=""),o._mIData.preventParentScroll&&o._scrollDisabled&&F(o),t.classList.remove("lyteMIDisplayBlock","lyteMIAddOverflow","lyteMIListAppended","lyteMIDropdown__Down","lyteMIDropdown__Up"),o._mIData.dropdownClass&&t.classList.remove(o._mIData.dropdownClass),t.style=""},P=function(e){var t=a.createElement("lyte-mentions-item");t._mentionsData=e;var o=a.highlightContent(e[i._mIData.searchBy],a.currentDataQuery),r=a.createElement("span","","lyteMIItemContent");return r.innerHTML=o,t.appendChild(r),t},b=function(e){l=i._mIData.lyteMICollection;for(var t,o=[],r=[],s=i._mIData.searchBy,n=a.mentionsSyntax,p=i._mIData.triggerChar,c=new RegExp(i._mIData.triggerChar+"\\[(.+?)\\:(.+?)\\]","gi"),d=0,h=0,m=0;m<l.length;m++){var y=l[m][s],f=p+n({id:l[m].id,value:y}),g=e.indexOf(f),v=e.substring(0,g);null===c.exec(v)&&-1!=g?(d+=g+y.length,h=g+f.length,l[m].position={end:d},o.push(l[m]),e=e.substring(h)):(r.push(l[m]),t=l[m].position.end)}if(i._mIData.lyteMICollection=o,r.length)return u(i._mIData,r),{end:t}},D=function(e,t){for(var o=0,a=i._mIData.lyteMICollection;o<a.length&&!(a[o].position.end>t);o++);i._mIData.lyteMICollection.splice(o,0,e)},L=function(e){var t=i._valueMap.newSyntax,o=[];i._mIData.lyteMICollection.forEach((function(e){o.push(i._mIData.triggerChar+a.mentionsSyntax({id:e.id,value:e[i._mIData.searchBy]}))}));var r=a.encodeMsg(t,o);i._mIData.lyteMICollection.forEach((function(e,t){var a=o[t],s="<strong class='lyteMentionsStrongDiv'><span>"+e[i._mIData.searchBy]+"</span></strong>";r=r.replace(a,s)})),r=(r=r.replace(/\n/g,"<br />")).replace(/ {2}/g,"&nbsp; "),i._valueMap={oldSyntax:t,oldText:e},i._mIData.syntaxMessage=t,i._mIData._overlayDiv.innerHTML=r},C=function(e){return Object.assign({},e)},_=function(e){e=C(e),i._addedMentions=!0;var t=oe.appendSpaceOnAdd,o=i._valueMap.oldSyntax,r=i.selectionEnd-a.currentDataQuery.length-1,s=i.selectionEnd,l=me(o,r,"start"),n=l+s-r,u=i._mIData.triggerChar+a.mentionsSyntax({id:e.id,value:e[i._mIData.searchBy]})+(t?" ":""),h=o.substring(0,l)+u+o.substring(n),m=he(h);i._mIData.onBeforeAdd&&!1===c(i._mIData,oe,m)?x():(i._valueMap.newSyntax=h,D(e,r),p(),a.currentDataQuery="",x(),i.value=m,b(h),L(m),S(e.position.end+(t?1:0)),i._mIData.onAdd&&d(i._mIData,oe))},S=function(e){z(i),setTimeout((function(){a.setCaratPosition(i,e),de(i)}),10)},w=function(e){var t=$L(this);r||(r=this.closest(".lyteMIDropdown")),i=r._textarea,oe.removeHighlightCompletely?_(t[0]._mentionsData):v(t[0]._mentionsData),e.stopPropagation()},T=function(e){e&&($L("lyte-mentions-item",r).length&&$L("lyte-mentions-item",r).removeClass(i._mIData.activeItem),$L(e).addClass(i._mIData.activeItem),(s=[]).push(e))},E=function(t,o){var r=document.createElement("div"),i=getComputedStyle(t),s=t.value,l={};for(var n in i)/[\d -]+/g.test(n)||"function"==typeof i[n]||("lineHeight"==n&&(l[n]=i[n]),"letterSpacing"==n&&(l[n]=i[n]),"height"==n&&(l[n]="auto"),"width"==n&&(l[n]=i[n]),"fontSize"==n&&(l[n]=i[n]),"paddingLeft"==n&&(l[n]=i[n]),"paddingRight"==n&&(l[n]=i[n]),"paddingTop"==n&&(l[n]=i[n]),"paddingBottom"==n&&(l[n]=i[n]),"marginLeft"==n&&(l[n]=i[n]),"marginRight"==n&&(l[n]=i[n]),"marginTop"==n&&(l[n]=i[n]),"marginBottom"==n&&(l[n]=i[n]),"borderLeft"==n&&(l[n]=i[n]),"borderRight"==n&&(l[n]=i[n]),"borderTop"==n&&(l[n]=i[n]),"borderBottom"==n&&(l[n]=i[n]),"boxSizing"==n&&(l[n]=i[n]),"whiteSpace"==n&&(l[n]=i[n]),"fontWeight"==n&&(l[n]=i[n]),"fontFamily"==n&&(l[n]=i[n]),"testAlign"==n&&(l[n]=i[n]),"display"==n&&(l[n]=i[n]),"direction"==n&&(l[n]=i[n]),"wordBreak"==n&&(l[n]=i[n]),"wordWrap"==n&&(l[n]=i[n]),"wordSpacing"==n&&(l[n]=i[n]),"position"==n&&(l[n]="relative"));for(var n in l)r.style[n]=i[n];var p=(o?t._prevSelectionStart:t.selectionStart)-(a.currentDataQuery.length+1),c=s.substr(0,p);r.textContent=c;var d=document.createElement("span");d.textContent=s.substr(p,a.currentDataQuery.length+1)||".",r.appendChild(d);var u=document.createElement("div");u.className="lyteMentionsCustomWrapper",u.appendChild(r),document.body.appendChild(u);var h=t.getBoundingClientRect(),m=d.getBoundingClientRect(),y=e.pageXOffset||document.documentElement.scrollLeft,f=e.pageYOffset||document.documentElement.scrollTop,g={x:h.left+y+d.offsetLeft-t.scrollLeft,y:h.top+f+d.offsetTop-t.scrollTop,height:m.height,width:m.width};return u.remove(),g},A=function(e){var t=$L(this).data("lyte-scrollTop"),o=$L(this).data("lyte-scrollLeft");this.scrollTop=t,this.scrollLeft=o},M=function(e){e.stopPropagation()},N=function(e,t){var o=$L(t).css("overflow-y"),a=$L(t).css("overflow-x"),r=["scroll","auto"];return t.clientWidth<t.scrollWidth&&r.indexOf(a)>-1||t.clientHeight<t.scrollHeight&&r.indexOf(o)>-1},k=function(e,t){return t.classList.contains("lyteScrollBar")},F=function(e){var t=e._scrollableParents,o=e._lyteScrollBarParents;t&&(t.off("scroll",e._resetScrollFunc),delete e._scrollableParents,delete e._resetScrollFunc),o&&(o.each((function(t,o){o&&(o.removeEventListener("touchmove",e._disableLyteScrollBar,!0),o.removeEventListener("wheel",e.disableLyteScrollBar,!0))})),delete e._lyteScrollBarParents,delete e._disableLyteScrollBar),delete e._scrollDisabled},I=function(e,t){var o,a=$L(t).parents();o=(o=(a=a.filter(N)).filter(k)).map((function(e,t){return t.parentNode})),a.each((function(e,t){$L(t).data("lyte-scrollTop",t.scrollTop),$L(t).data("lyte-scrollLeft",t.scrollLeft)})),t._disableLyteScrollBar=M,o.each((function(e,o){o&&(o.addEventListener("touchmove",t._disableLyteScrollBar,!0),o.addEventListener("wheel",t._disableLyteScrollBar,!0))})),t._scrollableParents=a,t._lyteScrollBarParents=o,t._scrollDisabled=!0,t._resetScrollFunc=A,a.on("scroll",t._resetScrollFunc),document.body.classList.add("lyteBodyWrapper")},R=function(t,o){var a=t._textarea;if(!o||!a._mIData.preventParentScroll){var r=a.getBoundingClientRect(),i=t.getBoundingClientRect(),s=Math.max(document.documentElement.clientHeight,e.innerHeight||0),l=Math.max(document.documentElement.clientWidth,e.innerWidth||0);e.pageXOffset||document.documentElement.scrollLeft;s+=e.pageYOffset||document.documentElement.scrollTop;var n=E(a,o);if(i.height<s-(n.y+n.height+5))t.style.top=n.y+n.height+5+"px",$L(t).removeClass("lyteMIDropdown__Up"),$L(t).addClass("lyteMIDropdown__Down");else if(i.height<n.y)t.style.top=n.y-i.height+"px",$L(t).removeClass("lyteMIDropdown__Down"),$L(t).addClass("lyteMIDropdown__Up");else{"up"==O(s,n.y,n.height)?(t.style.top="5px",$L(t).height(n.y-5),$L(t).addClass("lyteMIAddOverflow","lyteMIDropdown__Up")):(t.style.top=n.y+n.height+5+"px",$L(t).height(s-(n.y+n.height+5)-5),$L(t).addClass("lyteMIAddOverflow","lyteMIDropdown__Down"))}if(n.x+i.width<r.right)t.style.left=n.x+"px";else{var p=n.x+n.width-i.width;p<0?n.x+n.width<=r.left+r.width/2?(t.style.maxWidth=r.right-n.x+"px",p=n.x):(t.style.maxWidth=i.width+p-10+"px",p=10):p>r.right&&(p=r.left);var c=p+i.width;c>l&&(p+=l-c),t.style.left=p+"px"}o||($L(t).addClass("lyteMIListAppended"),a._mIData.preventParentScroll&&!a._scrollDisabled&&I(t,a),a._mIData.onBeforeShow&&a._mIData.onBeforeShow(t,a),a._prevSelectionStart=a.selectionStart)}},O=function(e,t,o){return t-5>e-(t+o+5)?"up":"down"},$=function(e){if("none"===getComputedStyle(e).maxWidth){var t=getComputedStyle(e._textarea);e.style.maxWidth=parseFloat(t.width)-(parseFloat(t.paddingLeft)+parseFloat(t.paddingRight))+"px"}},B=function(e){if(e.length){for(var t=a.createElement("ul"),o=0;o<e.length;o++){var s=P(e[o]);if(s.addEventListener("click",w,!0),i._mIData.avatars&&e[o].avatar){var l=new Image;l.src=e[o].avatar,s.prepend(l)}t.append(s),s=null}r.append(t),r._appended||(_lyteUiUtils.appendChild(document.body,r),r._appended=!0),T(t.children[0]),i._mIData.dropdownClass&&$L(r).addClass(i._mIData.dropdownClass),$L(r).addClass("lyteMIHide"),$L(r).addClass("lyteMIDisplayBlock"),$(r),R(r),$L(r).removeClass("lyteMIHide")}},q=function(e){var t=i._mIData.mode,o=i._mIData.searchBy,r=a.currentDataQuery,s=[];if(e.length){for(var l=0;l<e.length;l++)switch(t){case"contains":e[l][o].trim().toLowerCase().indexOf(r.toLowerCase())>=0&&s.push(e[l]);break;case"startsWith":e[l][o].trim().toLowerCase().startsWith(r.toLowerCase())&&s.push(e[l]);break;case"endsWith":e[l][o].trim().toLowerCase().endsWith(r.toLowerCase())&&s.push(e[l])}B(i._mIData.allowDuplicates?s:h(s,i._mIData.lyteMICollection))}},V=function(){var e=a.currentDataQuery;if((0==i._mIData.minChars||e&&e.length&&e.length>=i._mIData.minChars)&&(i._mIData.maxChars===1/0||e&&e.length&&e.length<=i._mIData.maxChars)){var t=i._mIData.onDataRequest(e);t&&(t.then?Promise.resolve(t).then((function(t){if(!1===oe.dropbody){r._appended||(_lyteUiUtils.appendChild(document.body,r),r._appended=!0);var o=oe.displayMentions(t,e,r);if(void 0===o||o){if("bindClick"===o){i._mIData.validateCollections=!0;for(var a=$L("lyte-mentions-item",r),s=0;s<a.length;s++)a[s].addEventListener("click",w,!0)}T(r.querySelector("lyte-mentions-item")),$L(r).addClass("lyteMIHide"),$L(r).addClass("lyteMIDisplayBlock"),$(r),R(r),$L(r).removeClass("lyteMIHide")}}else B(t)}),(function(e){console.error(e)})):q(t))}},U=function(e,t,o){var a=t.offsetTop,r=e.scrollTop,i=e.getBoundingClientRect().height,s=t.getBoundingClientRect().height;"down"===o&&r+i<a+s?e.scrollTop=e.scrollTop+a+s-(i+r):"up"===o&&a<r&&(e.scrollTop=a)},H=function(e,t){var o=null,a=e.tagName;if("next"==t)for(;e.nextElementSibling;){if(e.nextElementSibling.tagName===a){o=e.nextElementSibling;break}e=e.nextElementSibling}if("prev"==t)for(;e.previousElementSibling;){if(e.previousElementSibling.tagName===a){o=e.previousElementSibling;break}e=e.previousElementSibling}return o},Y=function(e,t){for(var o,a=(e.match(new RegExp(t,"g"))||[]).length,r=oe.triggerWithSpace;a>0&&e;){if(0==(o=e.lastIndexOf(t)))return o;if(o>0&&(!r||" "==e.charAt(o-1)||"\n"==e.charAt(o-1)))return o;a=((e=e.substring(0,o)).match(new RegExp(t,"g"))||[]).length}return-1},j=function(e){var t=i._mIData.lyteMICollection;if(t.length>0)for(var o=t.length-1;o>=0;o--)if(t[o].position.end<=e.length)return e.substring(t[o].position.end);return e},W=function(e){return!(" "==e.charAt(0)||"\n"==e.charAt(0)||e.indexOf("\n")>-1)},z=function(e){var t;"function"==typeof Event?t=new Event("change"):(t=document.createEvent("Event")).initEvent("change",!0,!0),e.dispatchEvent(t)};if("string"==typeof o){if("setMessage"===o){if(!(i=this.length>0?"LYTE-INPUT"===this[0].tagName&&"textarea"==this[0].ltProp("type")?this[0].querySelector("textarea"):this[0]:null)||!i.getAttribute("data-lyte-mentions"))return console.error(this+" is not Initialized using lyte-mentions plugin.Please check."),null;if("object"!=typeof arguments[1])return i?(console.error("Inappropriate arguments passed. Please pass an object containing a message and a collection to be set."),null):(console.error("Element doesnt exist.Please check."),null);i.value&&this.mentionsInput("reset");var G=arguments[1].message,K=G,Z=arguments[1].collection?arguments[1].collection:i._mIData.onDataRequest(),X=[],J=[],Q=G;Z.forEach((function(e){var t={id:(e=C(e)).id,value:e[i._mIData.searchBy]},o=i._mIData.triggerChar+a.mentionsSyntax(t),r=G.indexOf(o);if(-1!=r){var s=Q.indexOf(o);J.push(Q.substring(0,s)),Q=Q.substring(s+o.length),e.position={start:r,end:r+t.value.length},X.push(e);var l="<strong class='lyteMentionsStrongDiv'><span>"+t.value+"</span></strong>";G=G.replace(o,t.value),K=K.replace(o,l),J.push(l)}})),J.push(Q),K=(K=K.replace(/\n/g,"<br />")).replace(/ {2}/g,"&nbsp; "),i._callee&&"LYTE-INPUT"==i._callee.tagName?i._callee.ltProp("value",G):i.value=G,i._mIData.syntaxMessage=arguments[1].message+" ",J.forEach((function(e,t){if(t%2==0){var o=document.createTextNode(e);i._mIData._overlayDiv.appendChild(o)}else i._mIData._overlayDiv.innerHTML=i._mIData._overlayDiv.innerHTML+e})),i._mIData.lyteMICollection=X,z(i),i._mIData.removeHighlightCompletely&&(i._valueMap={oldSyntax:arguments[1].message,oldText:G}),i.focus()}if("getMessage"===o)return(i=this.length>0?"LYTE-INPUT"===this[0].tagName&&"textarea"==this[0].ltProp("type")?this[0].querySelector("textarea"):this[0]:null)&&i.getAttribute("data-lyte-mentions")?i._mIData.syntaxMessage?i._mIData.syntaxMessage:i.value:i?(console.error(this+" is not Initialized using lyte-mentions plugin.Please check."),null):(console.error("Element doesnt exist.Please check."),null);if("getCollection"===o)return(i=this.length>0?"LYTE-INPUT"===this[0].tagName&&"textarea"==this[0].ltProp("type")?this[0].querySelector("textarea"):this[0]:null)&&i.getAttribute("data-lyte-mentions")?i._mIData.lyteMICollection:i?(console.error(this+" is not Initialized using lyte-mentions plugin.Please check."),null):(console.error("Element doesnt exist.Please check."),null);if("destroy"===o){if(!(i=this.length>0?"LYTE-INPUT"===this[0].tagName&&"textarea"==this[0].ltProp("type")?this[0].querySelector("textarea"):this[0]:null)||!i.getAttribute("data-lyte-mentions"))return i?(console.error(this+" is not Initialized using lyte-mentions plugin.Please check."),null):(console.error("Element doesnt exist.Please check."),null);i.removeAttribute("data-lyte-mentions"),i._mIData.removeHighlightCompletely&&(i.removeEventListener("mouseup",i._lyteMenIpMouseUpEvent),delete i._lyteSetSelection,delete i._lyteMenIpMouseUpEvent),i.scrollableParents&&i._scrollDisabled&&F(i);var ee=i.parentElement;_lyteUiUtils.insertBefore(ee,i),i._mIData._overlayDiv=null,i._mIData.lyteMIList._textarea=null,i._mIData.element=null,i._mIData.lyteMIList.remove(),i._mIData.lyteMIList=null,i._mIData=null,ee.remove(),i.removeEventListener("keydown",i._lyteMenIpKeydownEvent),i.removeEventListener("keypress",i._lyteMenIpKeypressEvent),i.removeEventListener("input",i._lyteMenIpInputEvent),i.removeEventListener("paste",i._lyteMenIpPasteEvent),i.removeEventListener("input",i._closureEvnt),i.removeEventListener("change",i._closureEvnt),delete i._prevSelectionStart,delete i._lyteMenIpKeydownEvent,delete i._lyteMenIpKeypressEvent,delete i._lyteMenIpInputEvent,delete i._lyteMenIpClickEvent,delete i._lyteMenIpBlurEvent,delete i._closureEvnt,delete i._lyteMenIpPasteEvent,delete i._valueMap,delete i._selection,delete i._mIData,delete i._lytePosDropdown,delete i._lyteHideDropdown,delete i.triggerInputEvent,delete i._lyteDisableParentScrollListeners,a.bindResize&&0==document.querySelectorAll('textarea[data-lyte-mentions="true"]').length&&(e.removeEventListener("resize",a.callAtTheEndOfResize),a.bindResize=!1),a.bindClick&&0==document.querySelectorAll('textarea[data-lyte-mentions="true"]').length&&(document.body.removeEventListener("click",a.onClick,!0),a.onClick=null,a.bindClick=!1),a.bindScroll&&0==document.querySelectorAll('textarea[data-lyte-mentions="true"]').length&&(e.removeEventListener("scroll",a.onScroll,!0),a.onScroll=null,a.bindScroll=!1),a.bindSelect&&0==document.querySelectorAll('textarea[data-lyte-mentions="true"]').length&&(document.body.removeEventListener("selectionchange",a.onSelection,!0),a.onSelection=null,a.bindSelect=!1)}if("reset"===o){if(!(i=this.length>0?"LYTE-INPUT"===this[0].tagName&&"textarea"==this[0].ltProp("type")?this[0].querySelector("textarea"):this[0]:null)||!i.getAttribute("data-lyte-mentions"))return i?(console.error(this+" is not Initialized using lyte-mentions plugin.Please check."),null):(console.error("Element doesnt exist.Please check."),null);i._callee&&"LYTE-INPUT"==i._callee.tagName?i._callee.ltProp("value",""):i.value="",i._mIData.removeHighlightCompletely?(i._valueMap={newText:"",newSyntax:""},b(""),L("")):(y(),f()),z(i)}return!0}var te,oe=o||{};if(!(this.length>1)){if("LYTE-INPUT"==this[0].tagName&&"textarea"==this[0].ltProp("type")?(te=this[0].querySelector("textarea"),oe.isLyteInput=!0):te=this[0],te.getAttribute("data-lyte-mentions"))return te._mIData?(te._mIData.mode=oe.mode?oe.mode:te._mIData.mode,te._mIData.activeItem=oe.activeItem?oe.activeItem:te._mIData.activeItem,te._mIData.triggerChar=oe.triggerChar?oe.triggerChar:te._mIData.triggerChar,te._mIData.minChars=null==oe.minChars?te._mIData.minChars:parseInt(oe.minChars),te._mIData.maxChars=void 0===oe.maxChars?te._mIData.maxChars:parseInt(oe.maxChars),te._mIData.avatars=null==oe.avatars?te._mIData.avatars:oe.avatars,te._mIData.searchBy=oe.searchBy?oe.searchBy:te._mIData.searchBy,te._mIData.dropbody=null==oe.dropbody?te._mIData.dropbody:oe.dropbody,te._mIData.listItemTag=null==oe.listItemTag?te._mIData.listItemTag:oe.listItemTag,te._mIData.interval=oe.interval?parseInt(oe.interval):te._mIData.interval,te._mIData.onDataRequest=oe.onDataRequest?oe.onDataRequest:te._mIData.onDataRequest,te._mIData.onAdd=oe.onAdd?oe.onAdd:te._mIData.onAdd,te._mIData.onBeforeAdd=oe.onBeforeAdd?oe.onBeforeAdd:te._mIData.onBeforeAdd,te._mIData.onRemove=oe.onRemove?oe.onRemove:te._mIData.onRemove,te._mIData.displayMentions=oe.displayMentions?oe.displayMentions:te._mIData.displayMentions,te._mIData.onHide=oe.onHide?oe.onHide:te._mIData.onHide):(te._mIData=oe,console.error("ALERT ! You are trying to bind mentions behaviour to a textarea which already has it enabled. Please don't call it twice to avoid abnormal behaviour.")),this;te.setAttribute("data-lyte-mentions",!0),oe.element=te,oe.mode=oe.mode?oe.mode:"contains",oe.activeItem=oe.activeItem?oe.activeItem:"lyteMIActive",oe.triggerChar=oe.triggerChar?oe.triggerChar:"@",oe.minChars=null==oe.minChars?1:parseInt(oe.minChars),oe.maxChars=void 0===oe.maxChars?1/0:parseInt(oe.maxChars),oe.avatars=null==oe.avatars||oe.avatars,oe.searchBy=oe.searchBy?oe.searchBy:"name",oe.lyteMICollection=[],oe.dropbody=null==oe.dropbody||oe.dropbody,oe.listItemTag=null==oe.listItemTag?"li":oe.listItemTag,oe.interval=oe.interval?parseInt(oe.interval):0,oe.allowDuplicates=!!oe.allowDuplicates,oe.removeHighlightCompletely=!!oe.removeHighlightCompletely,oe.triggerWithSpace=void 0===oe.triggerWithSpace||oe.triggerWithSpace,oe.appendSpaceOnAdd=void 0===oe.appendSpaceOnAdd||oe.appendSpaceOnAdd,oe.dropdownClass=void 0===oe.dropdownClass?"":oe.dropdownClass,oe.preventParentScroll=void 0!==oe.preventParentScroll&&oe.preventParentScroll;var ae=function(e){p()},re=function(e){if(r=(i=this)._mIData.lyteMIList,i._mIData.removeHighlightCompletely){var t,o=i._valueMap;o.undoAndRedo&&(o.oldText===i.value&&(t=!0),delete o.undoAndRedo);var s=i._selection,l={start:s.start,end:s.end,currentEnd:i.selectionEnd},p=t?{newValue:o.oldSyntax}:ye(i.value,l),c=p.newValue,d=p.selectionEnd;o.newSyntax=c;var u=he(c),h=b(c);L(u),h&&(i.value=u,S(d)),de(i)}else y();(i._mIData.dropbody||i._mIData.validateCollections)&&!oe.removeHighlightCompletely&&f(),x(),ie(i);var m=Y(a.inputBuffer.join(""),i._mIData.triggerChar);m>-1&&W(a.inputBuffer.slice(m+1).join(""))?(a.searchTriggeredId&&(clearTimeout(a.searchTriggeredId),a.searchTriggeredId=!1),a.searchTriggeredId=setTimeout((function(){a.searchTriggeredId=!1,n=a.inputBuffer.slice(m+1).join(""),a.currentDataQuery=n,V()}),i._mIData.interval)):a.searchTriggeredId&&(clearTimeout(a.searchTriggeredId),a.searchTriggeredId=!1)},ie=function(e){var t=e.value||"";a.inputBuffer=[],e.selectionStart<e.selectionEnd&&(t=t.substring(0,e.selectionStart)),t=j(t.substring(0,e.selectionEnd));var o=Y(t,e._mIData.triggerChar);if(o>-1){var r=t.substring(o);a.inputBuffer=r.split("")}},se=function(){a.bindSelect||(a.onSelection=function(){var e=document.activeElement;e.getAttribute("data-lyte-mentions")&&e._lyteSetSelection(e)},document.body.addEventListener("selectionchange",a.onSelection,!0),a.bindSelect=!0)},le=function(e){i=this;var t=a.KEY;if(!(e.keyCode===t.LEFT&&"%"!==e.key||e.keyCode===t.RIGHT&&"'"!==e.key||e.keyCode===t.HOME&&"$"!==e.key||e.keyCode===t.END&&"#"!==e.key||e.keyCode===t.UP&&"&"!==e.key||e.keyCode===t.DOWN&&"("!==e.key||e.keyCode===t.BACKSPACE||e.keyCode===t.TAB||e.keyCode===t.RETURN||e.keyCode===t.ESC||"Shift"===e.key||"Control"==e.key||"Alt"==e.key||"Meta"==e.key)){var o=i.value||"",r=e.key;i.selectionStart<i.selectionEnd&&r&&(o=o.substring(0,i.selectionStart)+r,a.inputBuffer=[]),o=j(o.substring(0,i.selectionStart))+r;var s=Y(o,i._mIData.triggerChar);if(s>-1){var l=o.substring(s);a.inputBuffer=l.split("")}}},ne=function(e){i=this;var o=a.KEY;if(e.keyCode!==o.LEFT&&e.keyCode!==o.RIGHT&&e.keyCode!==o.HOME&&e.keyCode!==o.END){if(oe.removeHighlightCompletely&&de(i),e.keyCode===o.BACKSPACE||(e.metaKey||e.ctrlKey)&&88==e.keyCode){var l=i.selectionStart-i.selectionEnd;Math.abs(l)>a.inputBuffer.length||e.metaKey&&e.keyCode===o.BACKSPACE?a.inputBuffer=[]:a.inputBuffer=a.inputBuffer.slice(0,(0==l?-1:l)+a.inputBuffer.length)}else if((e.metaKey||e.ctrlKey)&&90==e.keyCode&&(oe.removeHighlightCompletely&&(i._valueMap.undoAndRedo=!0),p()),r||(r=i._mIData.lyteMIList),"block"==$L(r).css("display"))switch(e.keyCode){case o.UP:case o.DOWN:var n,c=null;e.keyCode===o.DOWN?s&&s.length?(c=H(s[0],"next"),n="down"):(c=r.querySelector("lyte-mentions-item"),n="up"):(c=H(s[0],"prev"),n="up"),c&&(T(c),U(r,c,n)),e.preventDefault(),e.stopPropagation();break;case o.RETURN:case o.TAB:s&&s.length&&(s[0].dispatchEvent(new Event("click")),e.preventDefault(),e.stopPropagation())}}else t(p)},pe=function(e){x(e.target)},ce=function(e){i=e.currentTarget._textarea;var t=e.target.closest("lyte-mentions-item");T(t)},de=function(e){e._selection={start:e.selectionStart,end:e.selectionEnd}},ue=function(e,t,o){var a,r=new RegExp(i._mIData.triggerChar+"\\[(.+?)\\:(.+?)\\]","gi");r=new RegExp(r);var s=0,l=0;for(i._mIData.triggerChar.length;null!==(a=r.exec(e));){var n=a[2],p=a[1],c=e.substring(s,a.index);o(c,s,l),l+=c.length,t(a[0],a.index,l,n,p),l+=p.length,s=r.lastIndex}s<e.length&&o(e.substring(s),s,l)},he=function(e){var t="";return ue(e,(function(e,o,a,r,i){t+=i}),(function(e){t+=e})),t},me=function(e,t,o){if("number"!=typeof t)return t;var a;return ue(e,(function(e,r,i,s,l){void 0===a&&i+l.length>t&&(a=o?r+("end"===o?e.length:0):null)}),(function(e,o,r){void 0===a&&r+e.length>=t&&(a=o+t-r)})),void 0===a?e.length:a},ye=function(e,t){var o=i._valueMap,a=o.oldText,r=o.oldSyntax,s=t.start,l=t.end,n=t.currentEnd,p=a.length-e.length;void 0===s&&(s=n+p),void 0===l&&(l=s),s===l&&l===n&&a.length===e.length&&(s-=1);var c=e.slice(s,n),d=Math.min(s,n),u=l;s===n&&(u=Math.max(l,s+p));var h=me(r,d,"start"),m=me(r,u,"end"),y=me(r,d),f=me(r,u),g=null===y||null===f,v=r.substring(0,h)+c+r.substring(m),x={},P=he(r.substring(0,h));if(x.selectionEnd=P.length+c.length,!g){for(var b=he(v),D=0;b!==e&&D<=50;){for(d=0;e[d]===b[d];)d++;c=e.slice(d,n),u=a.lastIndexOf(e.substring(n)),h=me(r,d,"start"),m=me(r,u,"end"),v=r.substring(0,h)+c+r.substring(m),b=he(v),D++}D>50&&console.warn("lyte mentionsInput match failed")}return x.newValue=v,x},fe=function(e){de(e.target)},ge=function(t){if((i=this).selectionStart==i.selectionEnd)var o=j(i.value)+(t.clipboardData||e.clipboardData).getData("text");else{o=i.value.substring(0,i.selectionStart)+(t.clipboardData||e.clipboardData).getData("text");var r=i.value.substring(i.selectionEnd);if(r.length>0){var s=r.indexOf(" ");o+=r.substring(0,s>-1?s:r.length)}}a.inputBuffer=o.split("")},ve=function(){var e;"function"==typeof Event?e=new Event("input"):(e=document.createEvent("Event")).initEvent("input",!0,!0),te.dispatchEvent(e)};return oe.lyteMIList=a.init(te),oe.lyteMIList._textarea=te,oe._overlayDiv=te.previousElementSibling.children[0],oe.isLyteInput||$L(te.previousElementSibling).addClass("lyteMentionsNormalTextarea"),te._mIData=oe,te._lyteMenIpKeydownEvent=ne,te._lyteMenIpKeypressEvent=le,te._lyteMenIpInputEvent=re,te._lyteMenIpClickEvent=ae,te._lyteMenIpBlurEvent=pe,te._lyteMenIpPasteEvent=ge,te._lyteHideDropdown=x,te._lytePosDropdown=R,te._valueMap={oldText:"",oldSyntax:""},te._selection={},te._lyteDisableParentScrollListeners=F,te.addEventListener("keydown",te._lyteMenIpKeydownEvent),te.addEventListener("input",te._lyteMenIpInputEvent),te.triggerInputEvent=ve,te.addEventListener("paste",te._lyteMenIpPasteEvent),oe.lyteMIList.addEventListener("mouseover",ce),te._mIData.removeHighlightCompletely&&(te._lyteSetSelection=de,te._lyteMenIpMouseUpEvent=fe,te.addEventListener("mouseup",te._lyteMenIpMouseUpEvent),se()),a.bindScroll||(a.onScroll=function(e){if(e&&e.target&&!e.target.isEqualNode(document)&&"HTML"!=e.target.tagName&&!e.target.closest(".lyteMIDropdown")){var t=document.querySelectorAll(".lyteMIListAppended");if(t.length>0)for(var o=0;o<t.length;o++)R(t[o],!0)}},e.addEventListener("scroll",a.onScroll,!0),a.bindScroll=!0),a.bindClick||(a.onClick=function(e){for(var t=e.target;t&&("TEXTAREA"!==t.tagName||"true"!==t.getAttribute("data-lyte-mentions"))&&"HTML"!=t.tagName;)t=t.parentElement;if(t&&"TEXTAREA"===t.tagName){t._lyteMenIpClickEvent(e);for(var o=document.querySelectorAll(".lyteMIDropdown.lyteMIDisplayBlock"),a=0;a<o.length;a++){if(!t._mIData.lyteMIList.isEqualNode(o[a]))(r=o[a]._textarea)._lyteHideDropdown(o[a]._textarea)}t._addedMentions=!1}else if(t&&"HTML"===t.tagName)for(o=document.querySelectorAll(".lyteMIDropdown.lyteMIDisplayBlock"),a=0;a<o.length;a++){var r;(r=o[a]._textarea)._lyteHideDropdown(r,o[a])}},document.body.addEventListener("click",a.onClick,!0),a.bindClick=!0),this}for(var xe=this,Pe=0;Pe<xe.length;Pe++)if("LYTE-INPUT"==xe[Pe].tagName&&"textarea"==xe[Pe].ltProp("type")){var be=xe[Pe].querySelector("textarea"),De=Object.assign({},oe);De.isLyteInput=!0,$L(be).mentionsInput(Object.assign({},De))}else $L(xe[Pe]).mentionsInput(Object.assign({},oe))}}var o,a,r,i}(window),Lyte.Component.register("crux-mentions-body",{_template:'<template tag-name="crux-mentions-body"> <ul class="mentionBody {{dropdownClass}}"> <template is="for" items="{{mentions}}" item="mention" index="index"> <lyte-mentions-item class="cruxMentionsLi" onclick="{{action(\'addMention\',event,mention)}}"> <template is="if" value="{{expHandlers(mention.$setype,\'===\',&quot;Users&quot;)}}"><template case="true"> <div class="mentionsLiImage"> <template is="if" value="{{expHandlers(mention.image_link,\'!\')}}"><template case="true"> <span class="mentionsNoPhoto"></span> </template><template case="false"> <img src="{{mention.image_link}}" class="mentionsUserImage"> </template></template> </div> <div class="cruxMentionItem"> <div class="cxMentionsPrimaryDetail">{{mention.full_name}}</div> <div class="cxMentionsSecondaryDetail">{{mention.email}}</div> </div> </template><template case="false"><template is="if" value="{{expHandlers(mention.$setype,\'===\',&quot;Groups&quot;)}}"><template case="true"> <div class="mentionsLiImage groupsLi"> <span class="mentionsGroupIcon"></span> </div> <span><span class="mentionsLiName">{{mention.name}} - </span><span class="mentionsLiLabel">{{cruxGetI18n(\'crm.security.group\')}}</span></span> </template><template case="false"><template is="if" value="{{expHandlers(mention.$setype,\'===\',&quot;Roles&quot;)}}"><template case="true"> <div class="mentionsLiImage rolesLi"> <span class="mentionsRoleIcon"></span> </div> <span><span class="mentionsLiName">{{mention.name}} - </span><span class="mentionsLiLabel">{{cruxGetI18n(\'crm.security.role\')}}</span></span> </template></template></template></template></template></template> </lyte-mentions-item> </template> </ul> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"text",position:[3,1,0]},{type:"text",position:[3,3,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[3,0,0]},{type:"text",position:[3,1,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[3,0,0]},{type:"text",position:[3,1,0]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1]}]}],_observedAttributes:["mentions","textboxSelector","triggerChar","mentionText","mentionedMentions","textareaWidth","bindingClass","features","replWord","lyteDom","dropdownClass"],data:function(){return{mentions:Lyte.attr("array",{default:[]}),textboxSelector:Lyte.attr("string",{default:""}),triggerChar:Lyte.attr("string",{default:""}),mentionText:Lyte.attr("string",{default:""}),mentionedMentions:Lyte.attr("array",{default:[]}),textareaWidth:Lyte.attr("number",{default:0}),bindingClass:Lyte.attr("string",{default:""}),features:Lyte.attr("object",{default:{}}),replWord:Lyte.attr("string",{default:"crm"}),lyteDom:Lyte.attr("object",{}),dropdownClass:Lyte.attr("string",{default:""})}},didConnect:function(){this._textarea=this.$node.parentElement._textarea;var e=this._textarea.getBoundingClientRect().width;this.setData("textareaWidth",e)},didDestroy:function(){$L(this._textarea).mentionsInput("destroy")},actions:{addMention:function(e,t){e&&(e.preventDefault(),e.stopPropagation());var o="";"Users"===t.$setype?o=t.full_name:("Groups"===t.$setype||"Roles"===t.$setype)&&(o=t.name);var a=this._textarea.value,r=this.getData("mentionText").replace(/[*+?^${}()|[\]\\]/g,"\\$&"),i=(this.getData("triggerChar"),this._textarea.selectionEnd),s=this._textarea.selectionEnd-r.length,l=" "!==a.slice(i,i+1)?" ":"",n=a.slice(0,s)+a.slice(s,i).replace(r,o+l)+a.slice(i);n&&(this._textarea.value=n),t.position={start:s-1,end:s+o.length};var p,c=this.getData("mentionedMentions");c.push(t),c=c.sort((function(e,t){return e.position.start<t.position.start})),this._textarea._mIData.lyteMICollection=c,this.setData("mentionedMentions",c),cruxMentionUtil.mentionedMentions=c,this._textarea._addedMentions=!0,"function"==typeof Event?p=new Event("change"):(p=document.createEvent("Event")).initEvent("change",!0,!0),this._textarea.dispatchEvent(p),window.cruxMentionUtil.getTextContent({target:this._textarea}),setTimeout(function(){this._textarea.focus(),this._textarea.selectionEnd=s+o.length+l.length}.bind(this),100),document.querySelector("."+this.getData("bindingClass")).classList.remove("lyteMIDisplayBlock"),this._textarea._lyteDisableParentScrollListeners(this._textarea);var d=this.getData("lyteDom");d.mIManager&&(d.mIManager.inputBuffer=[])}}}),$L&&($L.prototype.cruxMention=function(e){var t,o=this[0],a=e||{};if("TEXTAREA"===o.nodeName?t=o:"LYTE-INPUT"===o.nodeName&&(t=o.querySelector("textarea")),!0===a.destroy){if(t.removeEventListener("input",window.cruxMentionUtil.getTextContent),t&&t._mIData){var r=t._mIData.lyteMIList.querySelector("#cruxMention");r?r.remove():this.mentionsInput("destroy")}}else{var i={textboxSelector:"",searchModules:["users","groups","roles"],minChars:2,triggerChar:"@",componentName:"crux-mentions-body",cxPropCacheQuery:!0,existingMentions:[],queryParam:{},productName:"crm",requestInterval:0,maxMentionNameLength:101,preventParentScroll:!1},s=a.textboxSelector?a.textboxSelector:i.textboxSelector,l=a.searchModules?a.searchModules:i.searchModules,n=a.minChars>0?a.minChars:i.minChars,p=a.triggerChar?a.triggerChar:i.triggerChar,c=a.componentName?a.componentName:i.componentName,d=a.cxPropCacheQuery?a.cxPropCacheQuery:i.cxPropCacheQuery,u=a.existingMentions?a.existingMentions:i.existingMentions,h=a.queryParam?a.queryParam:i.queryParam,m=a.productName?a.productName:i.productName,y=a.requestInterval?a.requestInterval:i.requestInterval,f=a.maxMentionNameLength?a.maxMentionNameLength:i.maxMentionNameLength,g=a.preventParentScroll?a.preventParentScroll:i.preventParentScroll,v=a.dropdownClass?a.dropdownClass:"",x=u.length;if(x)for(var P,b,D,L=t.value,C=0;C<x;C++)D="Users"===u[C].$setype?u[C].full_name:u[C].name,b=(P=L.indexOf("@"+D))+D.length+1,u[C].position={start:P,end:b};window.cruxMentionUtil={},cruxMentionUtil.triggerChar=p,cruxMentionUtil.mentionedMentions=u,cruxMentionUtil.productName=m,window.cruxMentionUtil.getTextContent=function(e){var t,o=e.target,r=o.parentElement.parentElement,i=(t=r.classList.contains("lyteField")?r.parentElement.getAttribute("id"):o.getAttribute("id"))?document.querySelector("crux-mentions-body."+t):null;if(i){for(var s=i.component,l=s.getData("mentionedMentions"),n=cruxMentionUtil.triggerChar,p=o.value,c=p.length,d=[],u=0;u<c;u++)if(p[u]===n){if(p[u-1]&&p[u-1].match(/[a-z,0-9]/i)&&p[u+1]&&p[u+1].match(/[a-z,0-9]/i))continue;d.push(u)}var h=d.length,m=[];for(u=0;u<h;u++)void 0!==d[u+1]?m[u]=p.substring(d[u]+1,d[u+1]):m[u]=p.substring(d[u]+1);var y=m.length;if(l=l.filter((function(e){var t=!1;if("Users"===e.$setype){for(var o=0;o<y;o++)if(-1!==m[o].indexOf(e.full_name)){t=!0;break}}else if("Groups"===e.$setype){for(o=0;o<y;o++)if(-1!==m[o].indexOf(e.name)){t=!0;break}}else if("Roles"===e.$setype)for(o=0;o<y;o++)if(-1!==m[o].indexOf(e.name)){t=!0;break}return t})),s._textarea._mIData.lyteMICollection=l,s.setData("mentionedMentions",l),cruxMentionUtil.mentionedMentions=l,a.cxPropContent&&a.cxPropContent.constructor===Function){var f=cruxMentionUtil.formatMentions(o.value,l);a.cxPropContent(f)}}else a.cxPropContent&&a.cxPropContent.constructor===Function&&(o&&(o._mIData.lyteMICollection=cruxMentionUtil.mentionedMentions),f=cruxMentionUtil.formatMentions(o.value,cruxMentionUtil.mentionedMentions),a.cxPropContent(f))},cruxMentionUtil.formatMentions=function(e,t){var o=cruxMentionUtil.productName,a=cruxMentionUtil.triggerChar;return t.forEach((function(t){"Users"===t.$setype?e=e.replace(a+t.full_name,o+"[user#"+t.id+"#"+t.zuid+"]"+o):"Roles"===t.$setype?e=e.replace(a+t.name,o+"[role#"+t.id+"#"+t.id+"]"+o):"Groups"===t.$setype&&(e=e.replace(a+t.name,o+"[group#"+t.id+"#"+t.id+"]"+o))})),e},"TEXTAREA"===o.nodeName?o.addEventListener("input",window.cruxMentionUtil.getTextContent):"LYTE-INPUT"===o.nodeName&&o.querySelector("textarea").addEventListener("input",window.cruxMentionUtil.getTextContent);var _=this;this.mentionsInput({minChars:n,triggerChar:p,dropbody:!1,interval:y,preventParentScroll:g,onHide:function(e,t){e.classList.remove("lyteMIDisplayBlock")},onDataRequest:function(e){if(e.length>f)return[];if(a.customRequest&&a.customRequest.constructor===Function)return a.customRequest(e);var t={searchword:e,meta_resources:l.join(),display_field:!0,page:1,per_page:200};for(var o in h)t[o]=h[o];return store.findAll("global-search",t,d)},displayMentions:function(e,t){var o=e?e.length:0;if(!(t===_.mIManager.currentDataQuery&&e&&o>0))return!1;for(var r=[],i=[],l=[],n=0;n<o;n++)"Users"===e[n].$setype?r.push(e[n]):"Roles"===e[n].$setype?i.push(e[n]):"Groups"===e[n].$setype&&l.push(e[n]);e=r.concat(i).concat(l);var d=s.startsWith("#")||s.startsWith(".")?s.slice(1):s,h=document.querySelector("#cruxMention."+d),m=document.querySelector(s);if(m&&!h){"TEXTAREA"===m.nodeName?m._mIData.lyteMIList.classList.add(d):"LYTE-INPUT"===m.nodeName&&m.querySelector("textarea")._mIData.lyteMIList.classList.add(d);var y=u.length;if(y>0)var f=e.filter((function(e){for(var t=!1,o=0;o<y;o++){if(u[o].full_name&&u[o].full_name===e.full_name){t=!0;break}if(u[o].name&&u[o].name===e.name){t=!0;break}}return!t}));(h=Lyte.Component.render(c,{lyteDom:_,mentions:y>0?f:e,textboxSelector:s,bindingClass:d,triggerChar:p,mentionText:t,features:a,dropdownClass:v},"."+d)).setData("mentionedMentions",u),cruxMentionUtil.mentionedMentions=g,$L(m.parentElement.querySelector("."+d)).addClass("lyteMIDisplayBlock"),h.setAttribute("id","cruxMention"),h.setAttribute("class",d)}else if(m){var g=h.getData("mentionedMentions"),x=g.length;if(!((f=e.filter((function(e){for(var t=!1,o=0;o<x;o++){if(g[o].full_name&&g[o].full_name===e.full_name){t=!0;break}if(g[o].name&&g[o].name===e.name){t=!0;break}}return!t}))).length>0))return _.mIManager.inputBuffer=[],!1;h.setData({mentions:f,textboxSelector:s,triggerChar:p,mentionText:t}),h.querySelector(".mentionBody").setAttribute("style","display: block"),$L(m.parentElement.querySelector("."+d)).addClass("lyteMIDisplayBlock")}}})}}),Lyte.Component.register("crux-user-view",{_template:'<template tag-name="crux-user-view"> <crux-user-lookup cx-prop-wrapper-class="{{cxPropWrapperClass}}" cx-prop-view-width="{{cxPropViewWidth}}" cx-prop-max-width="{{cxPropMaxWidth}}" cx-prop-max-height="{{cxPropMaxHeight}}" cx-prop-custom-request="{{cxPropCustomRequest}}" cx-prop-allow-multiple="{{cxPropAllowMultiple}}" cx-prop-query-params="{{cxPropQueryParams}}" cx-prop-header-yield="{{cxPropHeaderYield}}" cx-prop-footer-yield="{{cxPropFooterYield}}" cx-prop-header="{{cxPropHeader}}" cx-prop-network-data="{{cxPropNetworkData}}" cx-prop-forced-fetch="{{cxPropForcedFetch}}" cx-prop-criteria="{{cxPropCriteria}}" cx-prop-search-criteria="{{cxPropSearchCriteria}}" cx-prop-header-name="{{cxPropHeaderName}}" cx-prop-type="view" cx-prop-per-page="{{cxPropPerPage}}" cx-prop-exclude="{{cxPropExclude}}" cx-prop-module-name="{{cxPropModuleName}}" cx-prop-filter-yield="{{cxPropFilterYield}}" cx-prop-filter-options="{{cxPropFilterOptions}}" cx-prop-selected-filter-option="{{cxPropSelectedFilterOption}}" cx-prop-filter-user-value="{{cxPropFilterUserValue}}" cx-prop-filter-system-value="{{cxPropFilterSystemValue}}" cx-prop-searchable="{{cxPropSearchable}}" cx-prop-filterable="{{cxPropFilterable}}" cx-prop-records="{{cxPropRecords}}" cx-prop-min-lenghth="{{cxPropMinLength}}" on-body-before-show="{{method(\'beforeView\')}}" set-search-criteria="{{method(\'searchCriterias\')}}" on-body-show="{{method(\'view\')}}" get-criteria="{{method(\'criteria\')}}" on-before-lookup-close="{{method(\'beforeExit\')}}" on-lookup-close="{{method(\'exit\')}}" on-filter-option-selected="{{method(\'changeFilter\')}}" on-custom-request="{{method(\'makeCustomReq\')}}" cx-prop-no-user-avilable-msg="{{cxPropNoUserAvilableMsg}}"> <template is="if" value="{{cxPropFilterYield}}"><template case="true"> <template is="registerYield" yield-name="userDropdownInner"> <lyte-yield yield-name="userDropdownInner"></lyte-yield> </template> </template></template> <template is="if" value="{{cxPropHeaderYield}}"><template case="true"> <template is="registerYield" yield-name="userHeaderYield"> <lyte-yield yield-name="userHeaderYield"></lyte-yield> </template> </template></template> <template is="if" value="{{cxPropFooterYield}}"><template case="true"> <template is="registerYield" yield-name="userFooterYield"> <lyte-yield yield-name="userHeaderYield"></lyte-yield> </template> </template></template> <template is="registerYield" yield-name="headerDetail"> <template is="if" value="{{currentHeader.yield}}"><template case="true"> <lyte-yield yield-name="{{currentHeader.systemValue}}" cell-index="{{cellIndex}}" cell-value="{{cellValue}}"> </lyte-yield> </template></template> </template> </crux-user-lookup> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"registerYield",position:[1],dynamicNodes:[{type:"insertYield",position:[1]}]}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"registerYield",position:[1],dynamicNodes:[{type:"insertYield",position:[1]}]}]}},default:{}},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"registerYield",position:[1],dynamicNodes:[{type:"insertYield",position:[1]}]}]}},default:{}},{type:"registerYield",position:[1,7],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[1]}],_observedAttributes:["cxPropAllowMultiple","cxPropCustomRequest","cxPropMaxHeight","cxPropMaxWidth","cxPropViewWidth","cxPropQueryParams","cxPropForcedFetch","cxPropShow","cxPropCriteria","cxPropSearchCriteria","cxPropTableHeaders","cxPropDisplayTableHeader","cxPropHeader","cxPropPerPage","cxPropExclude","cxPropModuleName","cxPropNetworkData","cxPropHeaderName","cxPropHeaderYield","cxPropFooterYield","cxPropFilterYield","cxPropFilterOptions","cxPropSelectedFilterOption","cxPropFilterUserValue","cxPropFilterSystemValue","cxPropSearchable","cxPropFilterable","cxPropRecords","cxPropMinLength","cxPropWrapperClass","cxPropNetworkData","cxPropNoUserAvilableMsg"],showToggle:function(){this.getData("cxPropShow")&&this.$node.querySelector("crux-user-lookup").cxProp("show",!0)}.observes("cxPropShow"),data:function(){return{cxPropAllowMultiple:Lyte.attr("boolean",{default:!1}),cxPropCustomRequest:Lyte.attr("boolean",{default:!1}),cxPropMaxHeight:Lyte.attr("string",{default:"60%"}),cxPropMaxWidth:Lyte.attr("string",{default:"100%"}),cxPropViewWidth:Lyte.attr("string",{default:"40%"}),cxPropQueryParams:Lyte.attr("object",{default:{}}),cxPropForcedFetch:Lyte.attr("boolean",{default:!1}),cxPropShow:Lyte.attr("boolean",{default:!1}),cxPropCriteria:Lyte.attr("string",{default:""}),cxPropSearchCriteria:Lyte.attr("string",{default:""}),cxPropTableHeaders:Lyte.attr("array",{default:["full_name","role"]}),cxPropDisplayTableHeader:Lyte.attr("array",{default:["User Name","Role"]}),cxPropHeader:Lyte.attr("array",{default:[{systemValue:"full_name",displayValue:_cruxUtils.getI18n("crm.zti.label.user"),yield:!1},{systemValue:"role",displayValue:_cruxUtils.getI18n("cob.role"),yield:!1}]}),cxPropPerPage:Lyte.attr("number",{default:200}),cxPropExclude:Lyte.attr("array",{default:[]}),cxPropModuleName:Lyte.attr("string",{default:"user"}),cxPropNetworkData:Lyte.attr("object",{default:{cxPropModuleName:"user",cxPropCacheQuery:!0,cxPropDataCache:!1}}),cxPropHeaderName:Lyte.attr("string",{default:"Users In - General Shift"}),cxPropHeaderYield:Lyte.attr("boolean",{default:!1}),cxPropFooterYield:Lyte.attr("boolean",{default:!1}),cxPropFilterYield:Lyte.attr("boolean",{default:!1}),cxPropFilterOptions:Lyte.attr("array",{default:[]}),cxPropSelectedFilterOption:Lyte.attr("string"),cxPropFilterUserValue:Lyte.attr("string",{default:""}),cxPropFilterSystemValue:Lyte.attr("string",{default:""}),cxPropSearchable:Lyte.attr("boolean",{default:!0}),cxPropFilterable:Lyte.attr("boolean",{default:!0}),cxPropRecords:Lyte.attr("number",{default:20}),cxPropMinLength:Lyte.attr("number",{default:2}),cxPropWrapperClass:Lyte.attr("string",{default:""}),cxPropNetworkData:Lyte.attr("object",{default:{cxPropModuleName:"user",cxPropCacheQuery:!0,cxPropDataCache:!1}}),cxPropNoUserAvilableMsg:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.security.group.users.empty")})}},methods:{makeCustomReq:function(e,t,o,a,r){if(this.getMethods("onCustomUserViewRequest"))return this.executeMethod("onCustomUserViewRequest",e,t,o,a,r)},searchCriterias:function(e,t){if(this.getMethods("setSearchCriteria"))return this.executeMethod("setSearchCriteria",e);var o={};if("user"==this.getData("cxPropNetworkData").cxPropModuleName){if(a=t?"((first_name:starts_with:"+e+")or(last_name:starts_with:"+e+")or(email:starts_with:"+e+")or(full_name:starts_with:"+e+"))":"((last_name:starts_with:"+e+")or(email:starts_with:"+e+")or(full_name:starts_with:"+e+"))",null!=this.getData("cxPropSearchCriteria")&&""!=this.getData("cxPropSearchCriteria"))var a="("+a+"and"+this.getData("cxPropSearchCriteria")+")";o={criteria:a}}return o},criteria:function(){if(this.getMethods("formCriteria"))return this.executeMethod("formCriteria")},beforeView:function(){if(this.getMethods("onBeforeView"))return this.executeMethod("onBeforeView")},view:function(){this.getMethods("onView")&&this.executeMethod("onView")},beforeExit:function(){if(this.getMethods("onBeforeExit"))return this.executeMethod("onBeforeExit")},exit:function(){this.getMethods("onExit")&&this.executeMethod("onExit"),this.$node.cxProp("show",!1)},changeFilter:function(e,t,o){if(this.getMethods("onFilterSelection"))return this.executeMethod("onFilterSelection",e,t,o)}}}),Lyte.Component.register("crux-combo-box",{_template:'<template tag-name="crux-combo-box"> <lyte-alert lt-prop-wrapper-class="sampleAlert" lt-prop-yield="true" lt-prop="{&quot;buttons&quot; : [{&quot;type&quot;:&quot;accept&quot;,&quot;text&quot;:&quot;Delete&quot;,&quot;appearance&quot;:&quot;failure&quot;},{&quot;type&quot;:&quot;reject&quot;,&quot;text&quot;:&quot;Cancel&quot;,&quot;appearance&quot;:&quot;default&quot;}]}" lt-prop-show="{{deleteAlertShow}}" on-accept="{{method(\'clearData\')}}"> <template is="registerYield" yield-name="alert"> <lyte-alert-content> Changes made have not been saved. Do you want to proceed ? </lyte-alert-content> </template> </lyte-alert> <lyte-modal lt-prop-allow-multiple="{{cxPropAllowMultiple}}" lt-prop-offset="{&quot;top&quot;:&quot;0px&quot;,&quot;left&quot;:&quot;center&quot;}" lt-prop-width="1090px" lt-prop-show-close-button="false" on-before-show="{{method(\'beforComboBoxOpen\')}}" on-show="{{method(\'onComboxBoxOpen\')}}" on-before-close="{{method(\'BeforeComboBoxClose\')}}" on-close="{{method(\'onComboBoxClosing\')}}" lt-prop-wrapper-class="cxBoxModal {{if(cxPropNeedRecipient,\'cxComboAdditionalRecipientPresent\',\'\')}} {{if(expHandlers(cxPropHeaderMsg,\'!\'),\'cxComboboxWithoutHeader\',\'\')}}"> <template is="registerYield" yield-name="modal"> <lyte-modal-header> <template is="if" value="{{expHandlers(cxPropHeaderYield,\'!\')}}"><template case="true"> <span class="comboxBoxHeader" data-zcqa="combo_box_header_msg">{{cxPropHeaderMsg}}</span> <span data-zcqa="combo_box_close" class="comboboxCloseIcon lyteModalClose" onclick="{{action(\'cancelData\')}}"></span> </template><template case="false"> <lyte-yield yield-name="comboBoxHeaderYield"></lyte-yield> </template></template> </lyte-modal-header> <lyte-modal-content class="cxComboBoxContent"> <div class="clearFix combo-box-content"> <div class="user-selection-part fL"> <div class="user-selection-head f14px col111 proximas">{{cruxGetI18n(\'crm.label.available\')}}</div> <div class="user-selection-content mT5"> <div class="dropdown-search-wrapper bbd1"> <div class="user-selection-option"> <lyte-dropdown class="cxComboBoxFilterDD" data-zcqa="combo_box_type" lt-prop-yield="true" lt-prop-tabindex="1" lt-prop-selected="{{setSelectedFilterOption}}" on-option-selected="{{method(\'SelectedFilter\')}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box> <lyte-drop-body> <template is="if" value="{{expHandlers(cxPropDropdownYield,\'!\')}}"><template case="true"> <template is="for" items="{{cxPropFilterOptions}}" item="item" index="index"> <lyte-drop-item data-zcqa="combo_box_type_{{item[cxPropFilterSystemValue]}}" data-value="{{item[cxPropFilterSystemValue]}}">{{item[cxPropFilterUserValue]}}</lyte-drop-item> </template> </template><template case="false"> <lyte-yield yield-name="comboBoxDropdown"></lyte-yield> </template></template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </div> <div class="user-search"> <lyte-input class="w100per cxComboBoxSearch" lt-prop-class="cxComboBoxSearchInput" data-zcqa="combo_box_search" lt-prop-disabled="{{isSearchDisabled}}" lt-prop-appearance="box" lt-prop-type="search" lt-prop-value="{{lbind(cxPropInputValue)}}" lt-prop-placeholder="{{cxPropInputPlaceholder}}" oninput="{{action(\'searchKeyup\',event)}}"></lyte-input> <span data-zcqa="combo_box_search_clear" style="{{if(cxPropInputValue,if(searchLoading,\'display: none\',\'display: block\'),\'display: none\')}}" class="clear-search" onclick="{{action(\'clearInputField\')}}"></span> <span class="search-loader" style="{{if(cxPropInputValue,if(searchLoading,\'display: block\',\'display: none\'),\'display: none\')}}"></span> </div> </div> <div class="user-lists-container-wrapper"> <div class="clearFix user-lists-container" onscroll="{{action(\'tableScroll\',event)}}"> <div class="search-loader filter-switching-loader" style="{{if(filterChange,\'display:block\',\'display:none\')}};"></div> <div class="{{currentFilterValue.model_name}}-lists"> <ul class="p0 m0 f14px" style="{{if(filterChange,\'display:none\',\'\')}};"> <template is="for" items="{{displayContainerData}}" item="item" index="index"> <li data-zcqa="combo-box_list_{{item[currentFilterValue.nameSelector]}}" class="user-list" onclick="{{action(\'addToList\',event,index)}}"> <div class="user-detail"> <template is="if" value="{{expHandlers(currentFilterValue.imageSelector,\'!=\',undefined)}}"><template case="true"> <div class="dIB vam user-image mR5"> <template is="if" value="{{expHandlers(expHandlers(expHandlers(item[currentFilterValue.imageSelector],\'==\',undefined),\'||\',expHandlers(item[currentFilterValue.imageSelector],\'==\',null)),\'||\',expHandlers(item[currentFilterValue.imageSelector].length,\'==\',0))}}"><template case="true"> <span class="combo-box-nophoto"></span> </template><template case="false"> <img class="cxComboBoxImg" src="{{item[currentFilterValue.imageSelector]}}"> </template></template> </div> </template></template> <div class="dIB vam {{if(ifEquals(currentFilterValue.imageSelector,undefined),\'\',\'user-desc\')}}"> <template is="if" value="{{expHandlers(currentFilterValue.nameSelector,\'!=\',undefined)}}"><template case="true"> <span class="dB elipse_toE comboBoxMW250" onmouseover="{{action(\'checkForToolTip\',this,item[currentFilterValue.nameSelector])}}">{{item[currentFilterValue.nameSelector]}}</span> </template></template> <template is="if" value="{{expHandlers(currentFilterValue.descriptionSelector,\'!=\',undefined)}}"><template case="true"> <span class="dB mT3 color_5 elipse_toE comboBoxMW250" onmouseover="{{action(\'checkForToolTip\',this,item[currentFilterValue.descriptionSelector])}}">{{item[currentFilterValue.descriptionSelector]}}</span> </template></template> </div> </div> <div class="user-add-option"> <lyte-button lt-prop-appearance="primary" lt-prop-class="cxComboBoxAddBtn"> <template is="registerYield" yield-name="text"> {{cruxGetI18n(\'crm.button.add\')}} </template> </lyte-button> </div> </li> </template><template is="if" value="{{expHandlers(displayContainerData.length,\'==\',0)}}"><template case="true"> <li class="cxComboBoxEmptyMessage">{{currentFilterValue.cxPropEmptyDataMsg}}</li> </template></template> </ul> <div class="search-loader mAuto" style="{{if(scrollLoading,\'display:block\',\'display:none\')}};"> </div> </div> </div> </div> </div> </div> <div class="user-selected-part fL"> <div class="cxComboUserSelectedHeaderContentWrap"> <div class="user-selected-head mL15 f14px col111 proximas">{{cruxGetI18n(\'crm.label.selected\')}}</div> <template is="if" value="{{cxPropTotalRecipientCount.needed}}"><template case="true"> <div class="cxComboboxTotalRecipientCount f14px col222">{{cxPropTotalRecipientCount.count}} / {{cxPropTotalRecipientCount.total}} {{cruxGetI18n(\'crm.workflow.select.recipients\')}}</div> </template></template> </div> <div class="user-selected-content mT5"> <div class="no-results-found {{if(ifEquals(totalSelectedItemsCount,0),\'no-user-selected-div\',\'emptySelected\')}}"> {{cxPropEmptySelectedMsg}} </div> <div class="selected-user-list-container f14px"> <lyte-accordion data-zcqa="combo_box_selected_type" lt-prop-exclusive="false" lt-prop-dynamic="true" on-before-close="{{method(\'preventClose\')}}"> <template is="registerYield" yield-name="yield"> <template is="for" items="{{localOptionModels}}" item="item" index="index"><template is="if" value="{{expHandlers(item.selectedItems.length,\'!=\',0)}}"><template case="true"> <lyte-accordion-item data-zcqa="combo_box_selected_type_{{item.name}}" class="lyteAccordionActive selected-user-list-section {{if(ifEquals(subtract(localOptionModels.length,1),index),\'selected-user-list-last-section\',\'\')}}"> <lyte-accordion-header class="proximas font13 p0 op5_op1_parent"> <div class="dIB vam selected-user-type-detail"> <span class="dIB vam user-type color_5 ttUpper">{{item.name}}</span> <span class="seperator dIB vam">-</span> <span class="selected-user-count dIB vam col111">{{item.selectedItems.length}}</span> </div> <lyte-icon class="lyteAccordionArrow op5_op1_child"></lyte-icon> </lyte-accordion-header> <lyte-accordion-body> <ul class="p0 m0 selected-user-ul"> <template is="for" items="{{item.selectedItems}}" item="value" index="position"> <li data-zcqa="combo-box_selected_list_{{value.name}}" class="selected-user-list"> <template is="if" value="{{expHandlers(expHandlers(expHandlers(item.imageSelector,\'!=\',undefined),\'&amp;&amp;\',expHandlers(item.imageSelector,\'!=\',null)),\'&amp;&amp;\',expHandlers(item.imageSelector.length,\'!=\',0))}}"><template case="true"> <template is="if" value="{{expHandlers(expHandlers(expHandlers(value.image,\'==\',undefined),\'||\',expHandlers(value.image,\'==\',null)),\'||\',expHandlers(value.image.length,\'==\',0))}}"><template case="true"> <span class="combo-box-nophoto "></span> </template><template case="false"> <span class="dIB vam selected-user-img"><img class="cxComboBoxImg" src="{{value.image}}"></span> </template></template> </template></template> <span class="elipse_toE selected-user-name dIB vam" onmouseover="{{action(\'checkForToolTip\',this,value.name)}}">{{value.name}}</span> <span data-zcqa="combo-box_selected_remove_{{item[currentFilterValue.nameSelector]}}" class="close-selected-wrap cP op5_op1_parent" onclick="{{action(\'removeFromList\',event,index,position)}}"> <span class="svgIcons close-selected-user-icon dIB vam op5_op1_child"></span> </span> </li> </template> </ul> </lyte-accordion-body> </lyte-accordion-item> </template></template></template> </template> </lyte-accordion> </div> </div> </div> </div> </lyte-modal-content> <lyte-modal-footer class="{{if(cxPropFooterYield,\'\',\'right cxComboBoxFooter\')}}"> <div class="cxComboRecipientWrapper"> <template is="if" value="{{expHandlers(showAddRecipient,\'||\',expHandlers(cxPropSelectedTags.length,\'>\',0))}}"><template case="true"> <div class="cxComboRecipientWrap alignLeft"> <div class="mB15"> <span class="dIB vam">{{cruxGetI18n(\'crm.workflow.alert.additional.recipients\')}}</span> <template is="if" value="{{expHandlers(cxPropSelectedTags.length,\'>=\',1)}}"><template case="true"> <span class="seperator dIB vam">-</span> <span class="selected-user-count dIB vam col111">{{cxPropSelectedTags.length}}</span> </template></template> <template is="if" value="{{expHandlers(showAddRecipient,\'!\')}}"><template case="true"> <span class="cxComboAddRecipient mL10 cP dIB vam" onclick="{{action(\'showAddRecipient\')}}">Add</span> </template><template case="false"> <span class="dIB vam cxComboRecipientPlaceholder">{{cruxGetI18n(\'crm.workflow.alert.type.otherEmails\')}}</span> </template></template> </div> <template is="if" value="{{showAddRecipient}}"><template case="true"> <template is="if" value="{{expHandlers(cxPropRecipient.tags.length,\'>=\',1)}}"><template case="true"> <crux-tag id="tagComp" cx-prop-allow-dropdown="false" cx-prop-tags="{{cxPropRecipient.tags}}" on-add-tag="{{method(\'validateTag\')}}" on-before-add-tag="{{method(\'onBeforeTag\')}}" on-remove-tag="{{method(\'removeTagFromList\')}}" cx-prop-input-placeholder="{{cruxGetI18n(\'crm.inv.label.add.emails\')}}" cx-prop-comma-seperation="true" cx-prop-max-tag-length="{{cxPropTagLengthLimit}}" onkeydown="{{action(\'checkForLimit\',event)}}" on-error="{{method(&quot;showAlertMessage&quot;)}}" cx-prop-color-tags="false"></crux-tag> </template><template case="false"> <crux-tag id="tagComp" cx-prop-input-placeholder="{{cruxGetI18n(\'crm.inv.label.add.emails\')}}" cx-prop-allow-dropdown="false" on-before-add-tag="{{method(\'onBeforeTag\')}}" on-add-tag="{{method(\'validateTag\')}}" on-remove-tag="{{method(\'removeTagFromList\')}}" cx-prop-comma-seperation="true" cx-prop-max-tag-length="{{cxPropTagLengthLimit}}" onkeydown="{{action(&quot;checkForLimit&quot;,event)}}" on-error="{{method(&quot;showAlertMessage&quot;)}}" cx-prop-color-tags="false"></crux-tag> </template></template> </template><template case="false"> <ul class="p0 m0 selected-user-ul"> <template is="for" items="{{cxPropRecipient.tags}}" item="tag" index="position"> <li data-zcqa="combo-box_selected_list_{{value.name}}" class="selected-user-list"> <span class="elipse_toE selected-user-name dIB vam" onmouseover="{{action(\'checkForToolTip\',this,tag.name)}}">{{tag.name}}</span> <span data-zcqa="combo-box_close_icon" class="close-selected-wrap cP op5_op1_parent" onclick="{{action(\'removeFromList\',event,index,position,\'Recipient\')}}"> <span class="svgIcons close-selected-user-icon dIB vam op5_op1_child"></span> </span> </li> </template> </ul> </template></template> </div> </template></template> </div> <template is="if" value="{{expHandlers(expHandlers(cxPropNeedRecipient,\'&amp;&amp;\',expHandlers(expHandlers(cxPropRecipient.tags,\'&amp;&amp;\',expHandlers(cxPropRecipient.tags.length,\'===\',0)),\'||\',expHandlers(cxPropRecipient.tags,\'!\'))),\'&amp;&amp;\',expHandlers(showAddRecipient,\'!\'))}}"><template case="true"> <lyte-button data-zcqa="combo_box_add_recipient" onclick="{{action(\'showAddRecipient\',param)}}" lt-prop-class="outlineprimary"> <template is="registerYield" yield-name="text">{{cruxGetI18n("crm.recipient.add.recipient")}}</template> </lyte-button> </template></template> <template is="if" value="{{expHandlers(cxPropFooterYield,\'!\')}}"><template case="true"> <lyte-button class="mlAuto" onclick="{{action(\'cancelData\')}}" data-zcqa="combo_box_cancel"> <template is="registerYield" yield-name="text">{{cruxGetI18n(\'crm.button.cancel\')}}</template> </lyte-button> <lyte-button data-zcqa="combo_box_save" lt-prop-id="cruxComboBoxSaveButton" lt-prop-disabled="true" lt-prop-appearance="primary" onclick="{{action(\'saveData\')}}"> <template is="registerYield" yield-name="text">{{cruxGetI18n(\'crm.button.save\')}}</template> </lyte-button> </template><template case="false"> <lyte-yield yield-name="comboBoxFooterYield"></lyte-yield> </template></template> </lyte-modal-footer> </template> </lyte-modal> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"attr",position:[3]}]},false:{dynamicNodes:[{type:"insertYield",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1]},{type:"text",position:[3,1,1,1,0]},{type:"attr",position:[3,1,1,3,1,1,1]},{type:"registerYield",position:[3,1,1,3,1,1,1,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]}]},false:{dynamicNodes:[{type:"insertYield",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3,1,1,3,1,1,1]},{type:"attr",position:[3,1,1,3,1,3,1]},{type:"componentDynamic",position:[3,1,1,3,1,3,1]},{type:"attr",position:[3,1,1,3,1,3,3],attr:{style:{name:"style",helperInfo:{name:"if",args:["cxPropInputValue",{type:"helper",value:{name:"if",args:["searchLoading","'display: none'","'display: block'"]}},"'display: none'"]}}}},{type:"attr",position:[3,1,1,3,1,3,5],attr:{style:{name:"style",helperInfo:{name:"if",args:["cxPropInputValue",{type:"helper",value:{name:"if",args:["searchLoading","'display: block'","'display: none'"]}},"'display: none'"]}}}},{type:"attr",position:[3,1,1,3,3,1]},{type:"attr",position:[3,1,1,3,3,1,1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["''",{type:"helper",value:{name:"if",args:["filterChange","'display:block'","'display:none'"]}},"';'"]}}}},{type:"attr",position:[3,1,1,3,3,1,3]},{type:"attr",position:[3,1,1,3,3,1,3,1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["''",{type:"helper",value:{name:"if",args:["filterChange","'display:none'","''"]}},"';'"]}}}},{type:"attr",position:[3,1,1,3,3,1,3,1,1]},{type:"for",position:[3,1,1,3,3,1,3,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,1,3]},{type:"attr",position:[1,1,3,1]},{type:"if",position:[1,1,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,1,3,3]},{type:"if",position:[1,1,3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"registerYield",position:[1,3,1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1,3,1]}]},{type:"attr",position:[3,1,1,3,3,1,3,1,2]},{type:"if",position:[3,1,1,3,3,1,3,1,2],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3,1,1,3,3,1,3,3],attr:{style:{name:"style",helperInfo:{name:"concat",args:["''",{type:"helper",value:{name:"if",args:["scrollLoading","'display:block'","'display:none'"]}},"';'"]}}}},{type:"text",position:[3,1,3,1,1,0]},{type:"attr",position:[3,1,3,1,3]},{type:"if",position:[3,1,3,1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"text",position:[1,2]},{type:"text",position:[1,4]}]}},default:{}},{type:"attr",position:[3,1,3,3,1]},{type:"text",position:[3,1,3,3,1,1]},{type:"attr",position:[3,1,3,3,3,1]},{type:"registerYield",position:[3,1,3,3,3,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,1,1,0]},{type:"text",position:[1,1,1,5,0]},{type:"componentDynamic",position:[1,1,3]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3,1,1]},{type:"for",position:[1,3,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[1,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"text",position:[1,3,0]},{type:"attr",position:[1,5]}]},{type:"componentDynamic",position:[1,3]},{type:"componentDynamic",position:[1]}]}},default:{}}]}]},{type:"componentDynamic",position:[3,1,3,3,3,1]},{type:"componentDynamic",position:[3]},{type:"attr",position:[5]},{type:"attr",position:[5,1,1]},{type:"if",position:[5,1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,1,0]},{type:"attr",position:[1,1,3]},{type:"if",position:[1,1,3],cases:{true:{dynamicNodes:[{type:"text",position:[3,0]}]}},default:{}},{type:"attr",position:[1,1,5]},{type:"if",position:[1,1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"attr",position:[1,3]}]}]}},default:{}}]}},default:{}},{type:"attr",position:[5,3]},{type:"if",position:[5,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[5,5]},{type:"if",position:[5,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[0]}]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"text",position:[0]}]},{type:"componentDynamic",position:[3]}]},false:{dynamicNodes:[{type:"insertYield",position:[1]}]}},default:{}},{type:"componentDynamic",position:[5]}]},{type:"componentDynamic",position:[3]}],_observedAttributes:["currentlyExcludedArray","cxPropFooterYield","cxPropHeaderYield","cxPropInputPlaceholder","preventSetValues","saveClosing","initialSelected","totalList","totalListPosition","preventFutherRequest","stopScrolling","preventShowCalling","setScrolling","cxPropDropdownYield","cxPropQueryParams","isSearch","clearField","searchLoading","scrollLoading","filterChange","render","splitRecords","cxPropSelectedPerPage","cxPropSelected","localSelected","displayContainerData","localOptionModels","defaultOptionModels","localClose","totalSelectedItemsCount","perPageValue","pageNoValue","searchNonPaginationData","cxPropEmptySelectedMsg","cxPropEmptyDataMsg","cxPropMaxLimit","cxPropMaxLimitMsg","alertMessage","cxPropPrimaryKey","cxPropNetworkData","systemData","localData","cxPropExclude","cxPropRecords","cxPropPerPage","cxPropInputValue","cxPropMinLength","currentPos","pageNo","noMoreRecords","cxPropCustomRequest","cxPropFilterUserValue","cxPropFilterSystemValue","cxPropSelectedFilterOption","setSelectedFilterOption","currentFilterValue","cxPropFilterOptions","cxPropHeaderMsg","cxPropNoResultMsg","cxPropShow","cxPropIdSelector","cxPropNameSelector","cxPropImageSelector","cxPropDescriptionSelector","cxPropSearchAction","cxPropOptionModels","cxPropInputValue","selectedItems","selectedOption","cxPropDropboxFooterYield","cxPropStyle","calledWithIn","cxPropDeletedList","observerDelList","cxPropNewSelectedList","cxPropAllowMultiple","cxPropCustomPagination","cxPropNoMoreData","preventSetOfNoMoreData","cxPropDisableSearch","isSearchDisabled","cxPropRecipient","showAddRecipient","localRecipient","cxPropSelectedTags","showAlertMessage","messageType","deleteAlertShow","cxPropNeedRecipient","cxPropTagLimit","messageBoxType","cxPropMaxLimitDuration","cxPropTagLengthLimit","cxPropTotalRecipientCount"],data:function(){return{currentlyExcludedArray:Lyte.attr("array",{default:[]}),cxPropFooterYield:Lyte.attr("boolean",{default:!1}),cxPropHeaderYield:Lyte.attr("boolean",{default:!1}),cxPropInputPlaceholder:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.globalsearch.search.title")}),preventSetValues:Lyte.attr("boolean",{default:!1}),saveClosing:Lyte.attr("boolean",{default:!1}),initialSelected:Lyte.attr("array",{default:[]}),totalList:Lyte.attr("array",{default:[]}),totalListPosition:Lyte.attr("array",{default:[]}),preventFutherRequest:Lyte.attr("boolean",{default:!1}),stopScrolling:Lyte.attr("boolean",{default:!1}),preventShowCalling:Lyte.attr("boolean",{default:!1}),setScrolling:Lyte.attr("boolean",{default:!1}),cxPropDropdownYield:Lyte.attr("boolean",{default:!1}),cxPropQueryParams:Lyte.attr("object",{default:{}}),isSearch:Lyte.attr("boolean",{default:!1}),clearField:Lyte.attr("boolean",{default:!1}),searchLoading:Lyte.attr("boolean",{default:!1}),scrollLoading:Lyte.attr("boolean",{default:!1}),filterChange:Lyte.attr("boolean",{default:!1}),render:Lyte.attr("boolean",{default:!0}),splitRecords:Lyte.attr("number",{default:0}),cxPropSelectedPerPage:Lyte.attr("number",{default:100}),cxPropSelected:Lyte.attr("array",{default:[]}),localSelected:Lyte.attr("array",{default:[]}),displayContainerData:Lyte.attr("array",{default:[]}),localOptionModels:Lyte.attr("array",{default:[]}),defaultOptionModels:Lyte.attr("array"),localClose:Lyte.attr("boolean",{default:!1}),totalSelectedItemsCount:Lyte.attr("number",{default:0}),perPageValue:Lyte.attr("number"),pageNoValue:Lyte.attr("number"),searchNonPaginationData:Lyte.attr("array",{default:[]}),cxPropEmptySelectedMsg:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.template.listview.search.no.results")}),cxPropEmptyDataMsg:Lyte.attr("string",{default:""}),cxPropMaxLimit:Lyte.attr("number",{default:100}),cxPropMaxLimitMsg:Lyte.attr("string",{default:""}),alertMessage:Lyte.attr("string",{default:""}),cxPropPrimaryKey:Lyte.attr("string",{default:""}),cxPropNetworkData:Lyte.attr("object",{default:{cxPropModuleName:"",cxPropCacheQuery:!0,cxPropDataCache:!1}}),systemData:Lyte.attr("array",{default:[]}),localData:Lyte.attr("array",{default:[]}),cxPropExclude:Lyte.attr("array",{default:[]}),cxPropRecords:Lyte.attr("number",{default:20}),cxPropPerPage:Lyte.attr("number",{default:200}),cxPropInputValue:Lyte.attr("string",{default:""}),cxPropMinLength:Lyte.attr("number",{default:2}),currentPos:Lyte.attr("number",{default:0}),pageNo:Lyte.attr("number",{default:1}),noMoreRecords:Lyte.attr("boolean",{default:!0}),cxPropCustomRequest:Lyte.attr("boolean",{default:!1}),cxPropFilterUserValue:Lyte.attr("string",{default:"name"}),cxPropFilterSystemValue:Lyte.attr("string",{default:"prefix"}),cxPropSelectedFilterOption:Lyte.attr("string",{default:""}),setSelectedFilterOption:Lyte.attr("string",{default:""}),currentFilterValue:Lyte.attr("object",{default:{}}),cxPropFilterOptions:Lyte.attr("array",{default:[]}),cxPropHeaderMsg:Lyte.attr("string",{default:""}),cxPropNoResultMsg:Lyte.attr("string",{default:"No Results Found"}),cxPropShow:Lyte.attr("boolean",{default:!1}),cxPropIdSelector:Lyte.attr("string"),cxPropNameSelector:Lyte.attr("string"),cxPropImageSelector:Lyte.attr("string"),cxPropDescriptionSelector:Lyte.attr("string"),cxPropSearchAction:Lyte.attr("boolean",{default:!1}),cxPropOptionModels:Lyte.attr("array"),cxPropInputValue:Lyte.attr("string",{default:""}),selectedItems:Lyte.attr("array",{default:[]}),selectedOption:Lyte.attr("string",{default:"0"}),cxPropDropboxFooterYield:Lyte.attr("boolean",{default:!1}),cxPropStyle:Lyte.attr("string"),calledWithIn:Lyte.attr("boolean",{default:!1}),cxPropDeletedList:Lyte.attr("array",{default:[]}),observerDelList:Lyte.attr("array",{default:[]}),cxPropNewSelectedList:Lyte.attr("array",{default:[]}),cxPropAllowMultiple:Lyte.attr("boolean",{default:!1}),cxPropCustomPagination:Lyte.attr("boolean",{default:!1}),cxPropNoMoreData:Lyte.attr("boolean",{default:!1}),preventSetOfNoMoreData:Lyte.attr("boolean",{default:!1}),cxPropDisableSearch:Lyte.attr("boolean",{default:!1}),isSearchDisabled:Lyte.attr("boolean"),cxPropRecipient:Lyte.attr("object",{default:{}}),showAddRecipient:Lyte.attr("boolean",{default:!1}),localRecipient:Lyte.attr("array",{default:[]}),cxPropSelectedTags:Lyte.attr("array",{default:[]}),showAlertMessage:Lyte.attr("boolean",{default:!1}),messageType:Lyte.attr("string",{default:""}),deleteAlertShow:Lyte.attr("boolean",{default:!1}),cxPropNeedRecipient:Lyte.attr("boolean",{default:!1}),cxPropTagLimit:Lyte.attr("number",{default:15}),messageBoxType:Lyte.attr("string",{default:"info"}),cxPropMaxLimitDuration:Lyte.attr("string",{default:"2000"}),cxPropTagLengthLimit:Lyte.attr("number",{default:10}),cxPropTotalRecipientCount:Lyte.attr("object",{default:{count:0,total:50,needed:!1}})}},didDestroy:function(){for(var e=this.getData("cxPropOptionModels"),t=0;t<e.length;t++)1==e[t].pagination?store.clearCachedQuery(e[t].model_name,this.queryParams.call(this)):e[t].pagination||e[t].cxPropOptions||store.unloadAll(e[t].model_name);delete this.bodydrop},showToogle:function(){this.getData("preventShowCalling")?this.setData("preventShowCalling",!1):this.getData("cxPropShow")?this.$node.querySelector("lyte-modal").ltProp("show",!0):this.$node.querySelector("lyte-modal").ltProp("show",!1)}.observes("cxPropShow").on("didConnect"),setNoMoreData:function(){this.getData("preventSetOfNoMoreData")?this.setData("preventSetOfNoMoreData",!1):this.getData("cxPropNoMoreData")?this.setData("noMoreRecords",!1):this.setData("noMoreRecords",!0)}.observes("cxPropNoMoreData"),recipientObserve:function(){this.setData("cxPropRecipient",this.getData("cxPropRecipient")),this.setData("cxPropSelectedTags",[]),this.setData("cxPropInitialtags",[]),this.assignDatas()}.observes("cxPropRecipient"),preSelectedHandeling:function(){for(var e,t=[],o=!1,a=this.getData("cxPropSelected")?this.getData("cxPropSelected"):[],r=0;r<this.getData("localOptionModels").length;r++){this.setData("splitRecords",0);for(var i=[],s=[],l=0;l<a.length;l++)if(a[l].prefix==this.getData("localOptionModels")[r].prefix)if(null!=this.getData("localOptionModels")[r].cxPropOptions){for(var n=0;n<this.getData("localOptionModels")[r].cxPropOptions.length;n++)if(this.getData("localOptionModels")[r].cxPropOptions[n].id==a[l].id){var p=this.getData("localOptionModels")[r];Lyte.arrayUtils(s,"push",{type:p.model_name,name:p.cxPropOptions[n][p.nameSelector],id:p.cxPropOptions[n][p.idSelector],prefix:p.prefix,image:p.cxPropOptions[n][p.imageSelector]})}}else null!=a[l].id&&null!=a[l].name&&(null!=this.getData("localOptionModels")[r].imageSelector&&null!=a[l].image||null==this.getData("localOptionModels")[r].imageSelector)?Lyte.arrayUtils(s,"push",a[l]):Lyte.arrayUtils(i,"push",a[l].id);for(Lyte.arrayUtils(this.getData("localOptionModels")[r].selectedItems,"concat",s),this.setData("totalSelectedItemsCount",this.getData("totalSelectedItemsCount")+s.length);this.getData("splitRecords")<i.length;){var c=i.slice(this.getData("splitRecords"),this.getData("splitRecords")+this.getData("cxPropSelectedPerPage"));this.setData("splitRecords",this.getData("splitRecords")+this.getData("cxPropSelectedPerPage")),t.push(c),e=r,o=!0}o&&(this.getData("totalList").push(t),this.getData("totalListPosition").push(e),t=[],o=!1)}this.requestData.call(this)},customReqFunc:function(e,t,o){if(this.getMethods("onCustomRequest")){if(this.getData("currentFilterValue").pagination)var a=this.executeMethod("onCustomRequest",e,t,this.getData("isSearch"),this.getData("cxPropInputValue"),this.getData("currentFilterValue"));else a=this.executeMethod("onCustomRequest",e,t,this.getData("currentFilterValue"));return a}},requestData:function(){for(var e=!0,t=0;t<this.getData("localOptionModels").length;t++)this.getData("localOptionModels")[t].prefix==this.getData("cxPropSelectedFilterOption")&&null!=this.getData("localOptionModels")[t].cxPropOptions&&(this.setData("localData",this.getData("localOptionModels")[t].cxPropOptions),0==this.getData("localOptionModels")[t].cxPropOptions.length&&(e=!1));var o,a=[],r=this.getData("totalList"),i=this.getData("totalListPosition");if(null==this.getData("currentFilterValue").cxPropOptions||0!=r.length){if(e){o=1,this.setData("preventSetValues",!0),a=[this.constructArray.call(this,"comboBox",!1)];for(var s=0;s<r.length;s++)for(var l=0;l<r[s].length;l++){var n={ids:r[s][l].join(",")},p=this.getData("localOptionModels")[i[s]].selectedQueryParams;if(Object.keys(p).length)for(var c in p)n[c]=p[c];a.push(store.findAll(this.getData("localOptionModels")[i[s]].model_name,n,!1,!1))}}else{o=0;for(s=0;s<r.length;s++){n={ids:r[s].join(",")},p=this.getData("localOptionModels")[i[s]].selectedQueryParams;if(Object.keys(p).length)for(var c in p)n[c]=p[c];a.push(store.findAll(this.getData("localOptionModels")[i[s]].model_name,n,!1,!1))}}Lyte.resolvePromises(a).then(function(e){for(var t,a=0,r=this.getData("totalList"),i=this.getData("totalListPosition"),s=0;s<r.length;s++){t=[];for(var l=0;l<r[s].length;l++)e[l+o+a][this.getData("localOptionModels")[i[s]].model_name]&&(t=t.concat(e[l+o+a][this.getData("localOptionModels")[i[s]].model_name]));a+=r[s].length;for(var n=[],p=0;p<t.length;p++)Lyte.arrayUtils(this.getData("localOptionModels")[i[s]].selectedItems,"push",{type:this.getData("localOptionModels")[i[s]].model_name,name:t[p][this.getData("localOptionModels")[i[s]].nameSelector],id:t[p][this.getData("localOptionModels")[i[s]].idSelector],prefix:this.getData("localOptionModels")[i[s]].prefix,image:t[p][this.getData("localOptionModels")[i[s]].imageSelector]}),this.getData("currentFilterValue").prefix==this.getData("localOptionModels")[i[s]].prefix&&n.push(t[p][this.getData("localOptionModels")[i[s]].idSelector]);this.setData("totalSelectedItemsCount",this.getData("totalSelectedItemsCount")+this.getData("localOptionModels")[i[s]].selectedItems.length)}this.resetDisplayArray(this.getData("currentFilterValue")),this.bodydrop.querySelector("lyte-dropdown").ltProp("disabled",!1);for(var c=[],d=this.getData("localOptionModels"),u=d.length,h=0;h<u;h++){var m=d[h].selectedItems.length,y=[];for(l=0;l<m;l++)y.push(d[h].selectedItems[l]);c.push({prefix:d[h].prefix,selectedItems:y})}this.setData("observerDelList",c)}.bind(this))}else e?(this.constructArray.call(this,"comboBox",!1),this.bodydrop.querySelector("lyte-dropdown").ltProp("disabled",!1)):this.bodydrop.querySelector("lyte-dropdown").ltProp("disabled",!1)},resetDisplayArray:function(e){this.setData("preventSetValues",!1);var t=this.getData("systemData"),o=e.selectedItems,a=[];for(i=0;i<t.length;i++)for(Lyte.arrayUtils(a,"push",t[i]),j=0;j<o.length;j++)t[i][e.idSelector]==o[j][e.idSelector]&&Lyte.arrayUtils(a,"pop");this.setData("displayContainerData",a),$L.fastdom.mutate((function(){0!=t.length&&$L.fastdom.measure((function(){(this.getData("noMoreRecords")||this.getData("systemData").length<this.getData("localData").length)&&this.checkEndOfSelection()}),this)}),this)},assignDatas:function(){var e=this.getData("cxPropRecipient");if(e.key){for(var t=[],o=0;o<e.tags.length;o++)t.push(e.tags[o].name),Lyte.arrayUtils(this.getData("cxPropSelectedTags"),"push",e.tags[o]);this.setData("initialTags",t),this.setData("localRecipient",Object.assign([],t))}},init:function(){for(var e=this.getData("cxPropOptionModels"),t=0;t<e.length;t++)e[t].pagination||e[t].cxPropOptions||store.unloadAll(e[t].model_name);this.assignDatas()},didConnect:function(){this.setData("perPageValue",this.getData("cxPropPerPage")),this.setData("pageNoValue",this.getData("pageNo"))},comboBoxOpen:function(){this.getData("cxPropDisableSearch")&&this.setData("isSearchDisabled",!0);for(var e=[],t={},o=[],a=this.getData("cxPropOptionModels"),r=0;r<a.length;r++)o[r]={prefix:a[r].prefix,name:a[r].name};this.setData("cxPropFilterOptions",o),""==this.getData("cxPropSelectedFilterOption")&&this.setData("cxPropSelectedFilterOption",this.getData("cxPropOptionModels")[0].prefix),this.setData("setSelectedFilterOption",this.getData("cxPropSelectedFilterOption").slice());for(r=0;r<a.length;r++){var i={};Lyte.Component.set(i,"model_name",a[r].model_name),Lyte.Component.set(i,"pagination",a[r].pagination),Lyte.Component.set(i,"name",a[r].name),Lyte.Component.set(i,"prefix",a[r].prefix),Lyte.Component.set(i,"cxPropEmptyDataMsg",a[r].cxPropEmptyDataMsg),Lyte.Component.set(i,"nameSelector",a[r].nameSelector),null==a[r].disableSearch?Lyte.Component.set(i,"disableSearch",!1):Lyte.Component.set(i,"disableSearch",a[r].disableSearch),null==a[r].customPagination?Lyte.Component.set(i,"customPagination",!1):Lyte.Component.set(i,"customPagination",a[r].customPagination),null==a[r].idSelector?(this.setData("cxPropPrimaryKey",store.getPrimaryKey(a[r].model_name)),Lyte.Component.set(i,"idSelector",this.getData("cxPropPrimaryKey"))):Lyte.Component.set(i,"idSelector",a[r].idSelector),null!=a[r].descriptionSelector&&Lyte.Component.set(i,"descriptionSelector",a[r].descriptionSelector),null!=a[r].imageSelector&&Lyte.Component.set(i,"imageSelector",a[r].imageSelector),null!=a[r].cxPropQueryParams&&Lyte.Component.set(i,"cxPropQueryParams",a[r].cxPropQueryParams),null!=a[r].cxPropExclude&&Lyte.Component.set(i,"cxPropExclude",a[r].cxPropExclude),null!=a[r].cxPropOptions&&Lyte.Component.set(i,"cxPropOptions",a[r].cxPropOptions),null!=a[r].cxPropCustomRequest?Lyte.Component.set(i,"cxPropCustomRequest",a[r].cxPropCustomRequest):Lyte.Component.set(i,"cxPropCustomRequest",!1),null!=a[r].selectedQueryParams?Lyte.Component.set(i,"selectedQueryParams",a[r].selectedQueryParams):Lyte.Component.set(i,"selectedQueryParams",{}),null!=a[r].maxLimitMessage?Lyte.Component.set(i,"maxLimitMessage",a[r].maxLimitMessage):Lyte.Component.set(i,"maxLimitMessage",""),e.push(i),a[r].prefix==this.getData("cxPropSelectedFilterOption")&&(t=i)}this.setData("localOptionModels",e),this.setData("currentFilterValue",t),this.getData("currentFilterValue").cxPropCustomRequest?this.setData("cxPropCustomRequest",!0):this.setData("cxPropCustomRequest",!1),this.getData("currentFilterValue").customPagination?this.setData("cxPropCustomPagination",!0):this.setData("cxPropCustomPagination",!1),this.getData("cxPropDisableSearch")||this.getData("currentFilterValue").disableSearch?this.setData("isSearchDisabled",!0):this.setData("isSearchDisabled",!1);var s=this.getData("cxPropNetworkData");null!=this.getData("currentFilterValue").cxPropExclude&&this.setData("cxPropExclude",this.getData("currentFilterValue").cxPropExclude),s.cxPropModuleName=this.getData("currentFilterValue").model_name,this.getData("currentFilterValue").pagination||this.getData("currentFilterValue").cxPropOptions||(s.cxPropDataCache=!0),this.setData("cxPropPrimaryKey",this.getData("currentFilterValue").idSelector),this.setData("cxPropNetworkData",s),$L(".user-lists-container").scroll({showOn:"hover"}),$L(".selected-user-list-container").scroll({showOn:"hover"}),this.setData("filterChange",!0);for(r=0;r<this.getData("localOptionModels").length;r++)null==this.getData("localOptionModels")[r].selectedItems&&Lyte.Component.set(this.getData("localOptionModels")[r],"selectedItems",[]);this.bodydrop.querySelector("lyte-dropdown").ltProp("disabled",!0);var l=this.getData("cxPropSelected");if(this.setData("initialSelected",l.slice()),this.getData("localRecipient").length>0){this.setData("cxPropRecipient.tags",[]);for(r=0;r<this.getData("localRecipient").length;r++)Lyte.arrayUtils(this.getData("cxPropRecipient.tags"),"push",{name:this.getData("localRecipient")[r]})}if(this.preSelectedHandeling(),null!=this.getData("currentFilterValue").cxPropOptions){var n;t=this.getData("currentFilterValue");n=this.getData("currentlyExcludedArray").length,this.getData("systemData").length+n==this.getData("localData").length&&this.setData("noMoreRecords",!1),this.setData("filterChange",!1),this.setData("searchNonPaginationData",this.getData("localData")),this.setValues()}setTimeout(function(){this.bodydrop.querySelector("lyte-accordion").component.getAllHeights()}.bind(this),500)},errorOnSearch:function(){this.setData("systemData",[]),this.setData("searchLoading",!1),this.setValues()},setValues:function(e){var t,o,a=this.getData("currentFilterValue"),r=this.getData("localOptionModels"),i=this.getData("systemData"),s=[];for(t=0;t<r.length&&r[t].prefix!=a.prefix;t++);if(0==this.getData("currentFilterValue").pagination){var l;this.getData("currentFilterValue");l=this.getData("currentlyExcludedArray").length,this.getData("systemData").length+l==this.getData("localData").length&&this.setData("noMoreRecords",!1)}var n=r[t].selectedItems;for(t=0;t<i.length;t++)for(Lyte.arrayUtils(s,"push",i[t]),o=0;o<n.length;o++)i[t][a.idSelector]==n[o][a.idSelector]&&Lyte.arrayUtils(s,"pop");this.setData("displayContainerData",s),$L.fastdom.mutate((function(){0!=i.length&&$L.fastdom.measure((function(){(this.getData("noMoreRecords")||this.getData("systemData").length<this.getData("localData").length)&&this.checkEndOfSelection()}),this)}),this)},loadMoreData:function(){if(this.getData("currentFilterValue").customPagination&&this.getMethods("afterRequest"))this.executeMethod("afterRequest",arguments[0]);if(this.setData("preventFutherRequest",!1),0==this.getData("currentFilterValue").pagination){this.getData("currentFilterValue");var e=0;e=this.getData("currentlyExcludedArray").length,this.getData("systemData").length+e==this.getData("localData").length&&this.setData("noMoreRecords",!1)}for(var t=0;t<this.getData("localOptionModels").length;t++)this.getData("localOptionModels")[t].prefix==this.getData("currentFilterValue").prefix&&this.setData("searchNonPaginationData",this.getData("localData"));this.getData("preventSetValues")?(this.setData("filterChange",!1),this.setData("searchLoading",!1),this.setData("scrollLoading",!1)):(this.setValues(),this.setData("filterChange",!1),this.setData("searchLoading",!1),this.setData("scrollLoading",!1))},setCriteria:function(){if(!this.getData("isSearch")){var e={};if(this.getData("currentFilterValue").pagination){o=this.getData("currentFilterValue").cxPropQueryParams;for(var t in o)e[t]=o[t];if(0==this.getData("cxPropPerPage")&&this.setData("cxPropPerPage",this.getData("perPageValue")),0==this.getData("pageNo")&&this.setData("pageNo",this.getData("pageNoValue")),this.getMethods("setQueryParams"))null==(i=this.executeMethod("setQueryParams",e,this.getData("currentFilterValue"),!1))&&null==i||(e=i)}else{var o=this.getData("currentFilterValue").cxPropQueryParams;for(var t in o)e[t]=o[t];if(this.getMethods("setQueryParams"))null==(i=this.executeMethod("setQueryParams",e,this.getData("currentFilterValue"),!1))&&null==i||(e=i);this.setData("cxPropPerPage",0),this.setData("pageNo",0)}return e}if(1==this.getData("currentFilterValue").pagination){var a=this.escapeString.call(this,this.getData("cxPropInputValue"));e={};if(this.getMethods("setSearchCriteria"))var r=this.executeMethod("setSearchCriteria",a,this.getData("currentFilterValue"));e={criteria:r};var i;o=this.getData("currentFilterValue").cxPropQueryParams;for(var t in o)e[t]=o[t];if(this.getMethods("setQueryParams"))null==(i=this.executeMethod("setQueryParams",e,this.getData("currentFilterValue"),!0))&&null==i||(e=i);return e}},endKeyUpSearch:function(){this.getMethods("onClearSearch")&&this.executeMethod("onClearSearch")},performKeyUpSearch:function(e,t){this.getMethods("onSearch")&&this.executeMethod("onSearch",this.getData("currentFilterValue"),e,t)},filterObserver:function(e){this.getData("currentFilterValue").cxPropCustomRequest?this.setData("cxPropCustomRequest",!0):this.setData("cxPropCustomRequest",!1),this.getData("currentFilterValue").customPagination?this.setData("cxPropCustomPagination",!0):this.setData("cxPropCustomPagination",!1),this.getData("cxPropDisableSearch")||this.getData("currentFilterValue").disableSearch?this.setData("isSearchDisabled",!0):this.setData("isSearchDisabled",!1),this.setData("currentlyExcludedArray",[]),this.setData("scrollLoading",!1),this.setData("filterChange",!0);var t=this.getData("cxPropNetworkData");t.cxPropModuleName=e,t.cxPropCacheQuery=!0,this.getData("currentFilterValue").pagination||this.getData("currentFilterValue").cxPropOptions?t.cxPropDataCache=!1:t.cxPropDataCache=!0,this.setData("cxPropNetworkData",t),this.setData("displayContainerData",[]);var o=this.bodydrop.querySelector(".user-lists-container");null!=o&&(this.setData("setScrolling",!0),o.scrollTop=0),this.setData("cxPropInputValue",""),this.setData("searchLoading",!1),this.setData("isSearch",!1),this.setData("systemData",[]),this.setData("localData",[]),this.setData("currentPos",0),this.setData("pageNo",1),this.setData("noMoreRecords",!0),this.setData("preventSetOfNoMoreData",!0),this.getData("cxPropNoMoreData")||this.setData("preventSetOfNoMoreData",!1),this.setData("cxPropNoMoreData",!1);var a=!0;if(0==this.getData("currentFilterValue").pagination)for(var r=0;r<this.getData("localOptionModels").length;r++)if(this.getData("localOptionModels")[r].prefix==this.getData("currentFilterValue").prefix&&null!=this.getData("localOptionModels")[r].cxPropOptions){this.setData("localData",this.getData("localOptionModels")[r].cxPropOptions),this.setData("filterChange",!1),0==this.getData("localOptionModels")[r].cxPropOptions.length&&(a=!1);break}a&&this.constructArray.call(this,"combobox",!1);for(r=0;r<this.getData("localOptionModels").length;r++)if(this.getData("localOptionModels")[r].prefix==this.getData("currentFilterValue").prefix&&null!=this.getData("localOptionModels")[r].cxPropOptions){var i;this.getData("currentFilterValue");i=this.getData("currentlyExcludedArray").length,this.getData("systemData").length+i==this.getData("localData").length&&this.setData("noMoreRecords",!1),this.setData("searchNonPaginationData",this.getData("localData")),this.setValues()}},comboBoxClose:function(){this.setData("isSearchDisabled",!1),this.getData("cxPropFooterYield")||this.bodydrop.querySelector("#cruxComboBoxSaveButton").parentElement.ltProp("Disabled",!0),this.getData("showAddRecipient")&&this.setData("showAddRecipient",!1),this.setData("currentlyExcludedArray",[]),this.setData("saveClosing",!1),this.setData("totalList",[]),this.setData("totalListPosition",[]);var e=this.bodydrop.querySelector(".selected-user-list-container"),t=this.bodydrop.querySelector(".user-lists-container");null!=e&&(this.setData("setScrolling",!0),e.scrollTop=0),null!=t&&(this.setData("setScrolling",!0),t.scrollTop=0),this.setData("preventShowCalling",!1),this.setData("setScrolling",!1),this.setData("cxPropInputValue",""),this.setData("isSearch",!1),this.setData("displayContainerData",[]);for(var o=this.getData("localOptionModels"),a=0;a<o.length;a++)Lyte.arrayUtils(o[a].selectedItems,"removeAt",0,o[a].selectedItems.length);this.setData("totalSelectedItemsCount",0),this.setData("localOptionModels",o),this.setData("localOptionModels",[]),this.setData("cxPropRecipient.tags",this.getData("initialTags")),this.setData("localClose",!1);var r=this.getData("cxPropNetworkData");r.cxPropModuleName=this.getData("currentFilterValue").model_name,this.setData("cxPropNetworkData",r),this.setData("systemData",[]),this.setData("localData",[]),this.setData("currentPos",0),this.setData("pageNo",1),this.setData("noMoreRecords",!0),this.setData("preventSetOfNoMoreData",!0),this.setData("cxPropNoMoreData",!1),this.bodydrop.querySelector("lyte-dropdown").ltProp("selected",this.getData("currentFilterValue").prefix)},checkForPrevention:function(){var e;e=this.getData("localData"),this.getData("currentPos")>=e.length&&this.getData("noMoreRecords")&&this.setData("preventFutherRequest",!0)},checkEndOfSelection:function(){if(this.getData("displayContainerData").length<2){var e=this.getData("systemData").length;((e+=this.getData("currentlyExcludedArray").length)<this.getData("localData").length||e>=this.getData("localData").length&&this.getData("noMoreRecords"))&&(this.getData("preventFutherRequest")||(this.checkForPrevention(),this.constructArray.call(this,"comboBox",!1)),e!=this.getData("systemData").length&&e!=this.getData("cxPropPerPage")&&(this.getData("noMoreRecords")||e<this.getData("localData").length)&&this.setValues())}else{var t=this.getData("displayContainerData").length-2;if(this.bodydrop.querySelector(".user-lists-container").querySelector("ul").querySelectorAll("li")[t].getBoundingClientRect().bottom<this.bodydrop.querySelector(".user-lists-container").getBoundingClientRect().bottom){e=this.getData("systemData").length;((e+=this.getData("currentlyExcludedArray").length)<this.getData("localData").length||e>=this.getData("localData").length&&this.getData("noMoreRecords"))&&(this.getData("preventFutherRequest")||(this.checkForPrevention(),this.constructArray.call(this,"comboBox",!1)),e!=this.getData("systemData").length&&e!=this.getData("cxPropPerPage")&&(this.getData("noMoreRecords")||e<this.getData("localData").length)&&this.setValues())}}},methods:{showAlertMessage:function(e,t){5!==t.errorCode||$L("#cruxCustomMessage")[0]||(event.preventDefault(),this.setData("messageBoxType","info"),this.setData("cxPropMaxLimitMsg",_cruxUtils.getI18n("crm.message.limit.exceed",this.getData("cxPropTagLengthLimit"),_cruxUtils.getI18n("crm.workflow.select.recipients"))),this.cxPropMaxLimitMessageBox())},onBeforeTag:function(){return this.getData("cxPropSelectedTags").length!==this.getData("cxPropTagLimit")},SelectedFilter:function(e,t,o,a){var r=this.getData("currentFilterValue");if(t!=this.getData("currentFilterValue").prefix){for(var i=this.getData("localOptionModels"),s=0;s<i.length;s++)if(i[s].prefix==t){this.setData("currentFilterValue",i[s]);break}null!=this.getData("currentFilterValue").cxPropExclude&&this.setData("cxPropExclude",this.getData("currentFilterValue").cxPropExclude),this.setData("cxPropPrimaryKey",this.getData("currentFilterValue").idSelector),this.getMethods("onFilterChange")&&this.executeMethod("onFilterChange",r,this.getData("currentFilterValue")),this.filterObserver.call(this,i[s].model_name)}},beforComboBoxOpen:function(){if(this.bodydrop=this.$node.querySelector("lyte-modal").component.childComp,this.getMethods("onComboBoxBeforeShow"))return this.executeMethod("onComboBoxBeforeShow",this.$node)},onComboxBoxOpen:function(){this.comboBoxOpen.call(this),this.getMethods("onComboBoxShow")&&this.executeMethod("onComboBoxShow",this.$node)},BeforeComboBoxClose:function(){var e;if(this.getMethods("onBeforeComboBoxClose")&&(e=this.executeMethod("onBeforeComboBoxClose",this.$node)),0==e)return this.getData("cxPropShow")||(this.setData("preventShowCalling",!0),this.setData("cxPropShow",!0)),this.getData("localClose")&&this.setData("localClose",!1),!1;if(!this.getData("cxPropFooterYield")&&!this.getData("saveClosing")){Lyte.arrayUtils(this.getData("cxPropSelected"),"removeAt",0,this.getData("cxPropSelected").length);for(var t=0;t<this.getData("initialSelected").length;t++)Lyte.arrayUtils(this.getData("cxPropSelected"),"push",this.getData("initialSelected")[t])}for(var o=this.getData("localOptionModels"),a=0;a<o.length;a++)if(o[a].prefix==this.getData("cxPropSelectedFilterOption")){this.setData("currentFilterValue",o[a]);break}this.getData("cxPropShow")&&this.$node.cxProp("show",!1)},onComboBoxClosing:function(){this.comboBoxClose(),this.getMethods("onComboBoxClose")&&this.executeMethod("onComboBoxClose",this.$node)},validateTag:function(e){for(var t=new XRegExp(/^[\p{L}\p{M}\p{N}_]([\p{L}\p{M}\p{N}!#$%&'*+-/=?^_`{|}~.]*)@(?=.{4,256}$)(([\p{L}\p{N}\p{M}]+)(([-_]*[\p{L}\p{M}\p{N}])*)[.])+[\p{L}\p{M}]{2,22}$/.source,"i"),o=$L("crux-tag")[0].component.data.cxPropTags,a=o.length,r=this.getData("localOptionModels"),i=!0,s=0;s<r.length;s++)r[s].selectedItems.length;if(e.match(",")){tagsArray=e.split(",");for(s=0;s<tagsArray.length;s++)XRegExp.test(tagsArray[s].trim(),t)?Lyte.arrayUtils(this.getData("cxPropSelectedTags"),"push",{name:tagsArray[s]}):(o[a-1].class="cxComboBoxErrorRecipient",i=!1)}else XRegExp.test(e.trim(),t)?Lyte.arrayUtils(this.getData("cxPropSelectedTags"),"push",{name:e}):(o[a-1].class="cxComboBoxErrorRecipient",i=!1);this.bodydrop.querySelector("#cruxComboBoxSaveButton").parentElement.ltProp("Disabled",!1),$L("#tagComp").find("lyte-drop-button").scrollTop(100),this.getMethods("onAddTag")&&this.executeMethod("onAddTag",e,i)},closePopup:function(){this.setData("deleteAlertShow",!1)},preventClose:function(e,t,o){$L(".cxComboBoxErrorRecipient");if("addRecipient"===e.target.className)return t.querySelector("crux-tag")&&!t.querySelector("crux-tag")||setTimeout((function(){t.querySelector("crux-tag").querySelector("input").focus()}),100),!1},removeTagFromList:function(e){for(var t=this.getData("cxPropSelectedTags"),o=!1,a=0;a<t.length;a++){if(t[a].name===e){Lyte.arrayUtils(this.getData("cxPropSelectedTags"),"removeAt",a,1),o=!0;break}o=!1}this.bodydrop.querySelector("#cruxComboBoxSaveButton").parentElement.ltProp("Disabled",!1),this.getMethods("onRemoveTag")&&this.executeMethod("onRemoveTag",e,o)}},actions:{checkForLimit:function(e){this.getData("cxPropSelectedTags").length===this.getData("cxPropTagLimit")&&(e.preventDefault(),this.setData("messageBoxType","info"),this.setData("cxPropMaxLimitMsg",_cruxUtils.getI18n("crux.comboBox.max.limit",this.getData("cxPropTagLimit"),_cruxUtils.getI18n("crm.workflow.select.recipients"))),this.cxPropMaxLimitMessageBox())},checkForToolTip:function(e,t){e.scrollWidth>e.offsetWidth?e.setAttribute("lt-prop-title",t):null!=e.getAttribute("lt-prop-title")&&e.removeAttribute("lt-prop-title")},addToList:function(e,t){for(var o=!1,a=this.getData("currentFilterValue"),r=this.getData("cxPropMaxLimit"),i=0;i<this.getData("localOptionModels").length;i++)this.getData("localOptionModels")[i].prefix==this.getData("currentFilterValue").prefix&&this.getData("localOptionModels")[i].selectedItems.length==r&&(o=!0,a.maxLimitMessage?this.setData("cxPropMaxLimitMsg",a.maxLimitMessage):this.setData("cxPropMaxLimitMsg",_cruxUtils.getI18n("crux.comboBox.max.limit",this.getData("cxPropMaxLimit"),this.getData("currentFilterValue").name)),this.cxPropMaxLimitMessageBox());if(0==o){var s=!0;if(this.getMethods("onAdd")){for(i=0;i<this.getData("localOptionModels").length&&this.getData("localOptionModels")[i].prefix!=this.getData("currentFilterValue").prefix;i++);null!=(s=this.executeMethod("onAdd",this.getData("displayContainerData")[t],this.getData("localOptionModels")[i].selectedItems,this.getData("localOptionModels"),this.$node,this.getData("currentFilterValue")))&&null!=s||(s=!0)}if(s){for(var l=(p=this.getData("cxPropDeletedList")).length,n=0;n<l;n++)if(this.getData("currentFilterValue").prefix==p[n].prefix&&this.getData("displayContainerData")[t][this.getData("currentFilterValue").idSelector]==p[n][this.getData("currentFilterValue").idSelector]){Lyte.arrayUtils(this.getData("cxPropDeletedList"),"removeAt",n,1);break}for(var p,c=!1,d=(l=(p=this.getData("observerDelList")).length,0);d<l;d++)if(this.getData("currentFilterValue").prefix==p[d].prefix){for(var u=p[d].selectedItems,h=u.length,m=0;m<h;m++)if(this.getData("displayContainerData")[t][this.getData("currentFilterValue").idSelector]==u[m][this.getData("currentFilterValue").idSelector]){c=!0;break}break}this.getData("cxPropFooterYield")||this.bodydrop.querySelector("#cruxComboBoxSaveButton").parentElement.ltProp("Disabled",!1),this.setData("totalSelectedItemsCount",this.getData("totalSelectedItemsCount")+1);var y=this.getData("displayContainerData")[t];Lyte.arrayUtils(this.getData("displayContainerData"),"removeAt",t,1);var f=this.getData("currentFilterValue");for(i=0;i<this.getData("localOptionModels").length;i++)this.getData("localOptionModels")[i].prefix==f.prefix&&(Lyte.arrayUtils(this.getData("localOptionModels")[i].selectedItems,"push",{type:f.model_name,name:y[f.nameSelector],id:y[f.idSelector],prefix:f.prefix,image:y[f.imageSelector]}),Lyte.arrayUtils(this.getData("cxPropSelected"),"push",{type:f.model_name,name:y[f.nameSelector],id:y[f.idSelector],prefix:f.prefix,image:y[f.imageSelector]}));if(!c){var g=this.getData("cxPropSelected");Lyte.arrayUtils(this.getData("cxPropNewSelectedList"),"push",g[g.length-1])}this.checkEndOfSelection(),this.bodydrop.querySelector("lyte-accordion").component.getAllHeights();for(var v=this.bodydrop.querySelector("lyte-accordion").querySelectorAll("lyte-accordion-item"),x=!1,P=0;P<v.length;P++)if(v[P].querySelector(".user-type").textContent.toLowerCase()==this.getData("currentFilterValue").name.toLowerCase()){x=!0;break}x&&!v[P].classList.contains("lyteAccordionActive")&&$L.fastdom.measure((function(){v[P].click()}))}}},removeFromList:function(e,t,o,a){if("Recipient"===a){var r=this.getData("cxPropRecipient").tags;Lyte.arrayUtils(r,"removeAt",o,1),Lyte.arrayUtils(this.getData("cxPropSelectedTags"),"removeAt",o,1),this.bodydrop.querySelector("#cruxComboBoxSaveButton").parentElement.ltProp("Disabled",!1),this.setData("cxPropTotalRecipientCount.count",this.getData("cxPropTotalRecipientCount.count")-1)}else{var i=!0;if(this.getMethods("onRemove")&&(null!=(i=this.executeMethod("onRemove",this.getData("localOptionModels")[t].selectedItems[o],this.getData("localOptionModels")[t].selectedItems,this.getData("localOptionModels"),this.$node,this.getData("currentFilterValue")))&&null!=i||(i=!0)),i){for(var s=(d=this.getData("observerDelList")).length,l=0;l<s;l++)if(this.getData("localOptionModels")[t].prefix==d[l].prefix){for(var n=d[l].selectedItems,p=n.length,c=0;c<p;c++)if(this.getData("localOptionModels")[t].selectedItems[o][this.getData("currentFilterValue").idSelector]==n[c][this.getData("currentFilterValue").idSelector]){Lyte.arrayUtils(this.getData("cxPropDeletedList"),"push",n[c]);break}break}var d;for(s=(d=this.getData("cxPropNewSelectedList")).length,l=0;l<s;l++)if(this.getData("localOptionModels")[t].prefix==d[l].prefix&&this.getData("localOptionModels")[t].selectedItems[o][this.getData("currentFilterValue").idSelector]==d[l][this.getData("currentFilterValue").idSelector]){Lyte.arrayUtils(this.getData("cxPropNewSelectedList"),"removeAt",l,1);break}this.getData("cxPropFooterYield")||this.bodydrop.querySelector("#cruxComboBoxSaveButton").parentElement.ltProp("Disabled",!1),this.setData("totalSelectedItemsCount",this.getData("totalSelectedItemsCount")-1);for(var u=this.getData("localOptionModels"),h=0;h<this.getData("cxPropSelected").length;h++)if(u[t].selectedItems[o].id==this.getData("cxPropSelected")[h].id){Lyte.arrayUtils(this.getData("cxPropSelected"),"removeAt",h,1);break}if(Lyte.arrayUtils(u[t].selectedItems,"removeAt",o,1),this.getData("currentFilterValue").prefix==u[t].prefix){var m,y,f=this.getData("currentFilterValue"),g=this.getData("systemData"),v=[],x=u[t].selectedItems;for(m=0;m<g.length;m++)for(Lyte.arrayUtils(v,"push",g[m]),y=0;y<x.length;y++)g[m][f.idSelector]==x[y][f.idSelector]&&Lyte.arrayUtils(v,"pop");this.setData("localOptionModels",u),this.setData("displayContainerData",v)}}this.bodydrop.querySelector("lyte-accordion").component.getAllHeights()}},saveData:function(){this.setData("saveClosing",!0);for(var e=!0,t=[],o=this.getData("cxPropSelectedTags"),a=0;a<this.getData("localOptionModels").length;a++)Lyte.arrayUtils(t,"concat",this.getData("localOptionModels")[a].selectedItems);if($L("crux-tag")[0])var r=$L("crux-tag")[0],i=r.component.data.cxPropTags;if(this.getMethods("onBeforeSave")&&(e=this.executeMethod("onBeforeSave",t,o,this.$node)),null==e||e){if(this.setData("localRecipient",[]),i&&i.length>0){setTimeout((function(){$L(r).find("input").focus()}),100);for(a=0;a<i.length;a++){if("cxComboBoxErrorRecipient"===i[a].class)return this.setData("messageBoxType","error"),this.setData("cxPropMaxLimitMsg",_cruxUtils.getI18n("crm.recipient.invalid.email")),void this.cxPropMaxLimitMessageBox();Lyte.arrayUtils(this.getData("localRecipient"),"push",i[a].name)}}else for(var s=0;s<o.length;s++)Lyte.arrayUtils(this.getData("localRecipient"),"push",o[s].name);if(this.setData("cxPropRecipient.tags",o),this.$node.cxProp("show",!1),this.getMethods("onSave"))return this.executeMethod("onSave",t,o,this.getData("cxPropSelectedTags"),this.$node)}else this.setData("saveClosing",!1)},cancelData:function(){this.setData("localClose",!0),this.$node.cxProp("show",!1)},tableScroll:function(e){this.getData("setScrolling")?this.setData("setScrolling",!1):this.getData("cxPropShow")&&(clearTimeout(this._timeout1),this._timeout1=setTimeout(function(){if(!this.getData("preventFutherRequest")){var t=this.getData("systemData").length;t+=this.getData("currentlyExcludedArray").length,0==this.getData("currentFilterValue").pagination&&t!=this.getData("localData").length?this.getData("isSearch")&&t>=this.getData("localData").length?(this.setData("scrollLoading",!1),this.setData("noMoreRecords",!1)):(this.bodyScroll.call(this,"comboBox",e),t!=this.getData("systemData").length&&(this.getData("noMoreRecords")||t<this.getData("localData").length)&&this.setValues()):this.getData("currentFilterValue").pagination?(this.bodyScroll.call(this,"comboBox",e),t!=this.getData("systemData").length&&t!=this.getData("cxPropPerPage")&&(this.getData("noMoreRecords")||t<this.getData("localData").length)&&this.setValues()):0==this.getData("currentFilterValue").pagination&&t==this.getData("localData").length&&(this.setData("scrollLoading",!1),this.setData("noMoreRecords",!1))}}.bind(this),100))},searchKeyup:function(e){var t=this.bodydrop.querySelector(".user-lists-container");1==this.getData("currentFilterValue").pagination?this.keyup.call(this,"comboBox",t,e):(clearTimeout(this._timeout2),this._timeout2=setTimeout(function(){var e=[],o=this.getData("cxPropInputValue"),a=this.getData("cxPropMinLength");if(o.length>=a){null!=t&&(this.setData("setScrolling",!0),t.scrollTop=0),this.setData("multipleBack",!1),this.setData("isSearch",!0);for(var r=0;r<this.getData("searchNonPaginationData").length;r++){var i=this.getData("searchNonPaginationData")[r][this.getData("currentFilterValue").nameSelector].toLowerCase(),s=o.toLowerCase(),l=i.trim(),n=s.trim();(" "+l).indexOf(" "+n)>=0&&Lyte.arrayUtils(e,"push",this.getData("searchNonPaginationData")[r])}this.setData("localData",e),this.setData("currentlyExcludedArray",[]),this.setData("currentPos",0),0!=this.getData("localData").length?this.constructArray.call(this,"comboBox",!1):this.setData("systemData",[]);this.getData("currentFilterValue");var p=0;p=this.getData("currentlyExcludedArray").length,this.getData("systemData").length+p==this.getData("localData").length&&this.setData("noMoreRecords",!1),this.setValues(),this.setData("filterChange",!1),this.setData("searchLoading",!1),this.setData("scrollLoading",!1)}if(0==this.getData("multipleBack")||null==this.getData("multipleBack"))if(null==this.getData("multipleBack")&&o.length<this.getData("cxPropMinLength"))this.setData("multipleBack",!0);else if(0==o.length){var c=!0;if(this.setData("isSearch",!1),this.setData("noMoreRecords",!0),this.setData("currentPos",0),this.setData("localData",[]),0!=this.getData("pageNo")&&this.setData("pageNo",1),null!=this.getData("currentFilterValue").cxPropOptions&&(this.setData("localData",this.getData("currentFilterValue").cxPropOptions),0==this.getData("currentFilterValue").cxPropOptions.length&&(c=!1)),c&&this.constructArray.call(this,"comboBox",!1),null!=this.getData("currentFilterValue").cxPropOptions){this.getData("currentFilterValue"),p=0;p=this.getData("currentlyExcludedArray").length,this.getData("systemData").length+p==this.getData("localData").length&&this.setData("noMoreRecords",!1),this.setValues()}this.setData("multipleBack",!0)}}.bind(this),300))},clearInputField:function(){this.setData("clearField",!0),this.setData("cxPropInputValue",""),this.getMethods("onClearSearch")&&this.executeMethod("onClearSearch"),this.filterObserver(this.getData("currentFilterValue").model_name)},selectRecord:function(){},showAddRecipient:function(e){this.setData("showAddRecipient",!0),setTimeout((function(){var e=$L("crux-tag")[0];$L(e).find("input");e.focus()}),100)},clearData:function(){if(this.getData("showAddRecipient")){var e=$L("crux-tag")[0],t=this.getData("initialTags");if(t&&t.length>0&&e){var o=e.component.data.cxPropTags;t.length!==o.length&&this.setData("deleteAlertShow",!0)}else e.cxProp("Tags",[]),this.setData("showAddRecipient",!1)}else this.setData("cxPropRecipient.tags",[]),this.setData("showAddRecipient",!1)}}},{mixins:["crux-user-utils"]}),Lyte.Component.register("crux-combo-box-dropitem",{_template:'<template tag-name="crux-combo-box-dropitem"> <div class="scrollingDiv{{cxPropName}}" onscroll="{{action(\'onScrollDiv\',event)}}" style="overflow : auto; height: 150px;"> <template is="if" value="{{showLoading}}"><template case="true"> <span class="loadingGifDiv"> <img src="//img.zohocdn.com/crm/CRMClient/images/crux-search-loader_829992d_.svg"> </span> </template><template case="false"> <template is="for" items="{{systemData}}" item="item" index="index"> <lyte-drop-item data-value="{{if(ifEquals(cxPropType,\'single\'),item[cxPropIdSelector],concat(cxPropPrefix,\':\',item[cxPropIdSelector]))}}" image="{{if(cxPropImageSelector,item[cxPropImageSelector],undefined)}}" name="{{item[cxPropNameSelector]}}"> <template is="if" value="{{cxPropImageSelector}}"><template case="true"> <template is="if" value="{{expHandlers(item[cxPropImageSelector],\'!\')}}"><template case="true"> <img src="//img.zohocdn.com/crm/CRMClient/images/nophoto_80ea3af_.png" class="socialimg" style="height:32px;width:32px;border-radius:3px;"> </template><template case="false"> <img src="{{item.image_link}}" class="socialimg" style="height:32px;width:32px;border-radius:3px;"> </template></template> </template></template> <template is="if" value="{{cxPropDescriptionSelector}}"><template case="true"> <div class="detail"> <div class="primaryDetail">{{item[cxPropNameSelector]}}</div> <div class="secondaryDetail">{{item[cxPropDescriptionSelector]}}</div> </div> </template><template case="false"> {{item[cxPropNameSelector]}} </template></template> </lyte-drop-item> </template><template is="if" value="{{expHandlers(expHandlers(expHandlers(systemData.length,\'==\',0),\'||\',showNoResult),\'||\',expHandlers(onShow,\'==\',0))}}"><template case="true"> <div class="showNoResultDiv">{{cruxGetI18n(\'None\')}}</div> </template></template> <template is="if" value="{{showScrollLoading}}"><template case="true"> <span class="loadingGifDiv"> <img src="//img.zohocdn.com/crm/CRMClient/images/crux-search-loader_829992d_.svg"> </span> </template></template></template></template> </div> <lyte-search class="lyteSearch{{cxPropName}}" lt-prop-query-selector="{&quot;scope&quot;:&quot;.scrollingDiv{{cxPropName}}&quot;,&quot;search&quot;:&quot;lyte-drop-item:not(.lyteDropdownActive&quot;}" on-search="{{method(\'showNoResult\')}}" style="display: none;"> </lyte-search> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]},{type:"text",position:[1,3,0]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1]}]},{type:"attr",position:[2]},{type:"if",position:[2],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[4]},{type:"if",position:[4],cases:{true:{dynamicNodes:[]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"componentDynamic",position:[3]}],_observedAttributes:["cxPropIdSelector","cxPropNameSelector","cxPropImageSelector","cxPropDescriptionSelector","cxPropRequest","cxPropPrefix","cxPropExclude","currentPos","localData","pageNo","noMoreRecord","cxPropRecord","systemData","cxPropModuleName","cxPropCacheQuery","cxPropDataCache","cxPropPerPage","isSearch","cxPropSearchCount","cxPropInputValue","cxPropMinLength","cxPropSearchAction","showNoResult","onShow","cxPropType","getRequest","cxPropOptions","cxPropName","showLoading","showScrollLoading","showSearchLoading","multipleClicks"],data:function(){return{cxPropIdSelector:Lyte.attr("string",{default:"id"}),cxPropNameSelector:Lyte.attr("string",{default:"name"}),cxPropImageSelector:Lyte.attr("string"),cxPropDescriptionSelector:Lyte.attr("string"),cxPropRequest:Lyte.attr("string"),cxPropPrefix:Lyte.attr("string"),cxPropExclude:Lyte.attr("array",{default:[]}),currentPos:Lyte.attr("number",{default:0}),localData:Lyte.attr("array",{default:[]}),pageNo:Lyte.attr("number",{default:1}),noMoreRecord:Lyte.attr("boolean",{default:!0}),cxPropRecord:Lyte.attr("number",{default:50}),systemData:Lyte.attr("array",{default:[]}),cxPropModuleName:Lyte.attr("string"),cxPropCacheQuery:Lyte.attr("boolean",{default:!0}),cxPropDataCache:Lyte.attr("boolean",{default:!0}),cxPropPerPage:Lyte.attr("number",{default:200}),isSearch:Lyte.attr("boolean",{default:!1}),cxPropSearchCount:Lyte.attr("number",{default:200}),cxPropInputValue:Lyte.attr("string",{default:""}),cxPropMinLength:Lyte.attr("number",{default:2}),cxPropSearchAction:Lyte.attr("boolean",{default:!1}),showNoResult:Lyte.attr("boolean",{default:!1}),onShow:Lyte.attr("number",{default:0}),cxPropType:Lyte.attr("string"),getRequest:Lyte.attr("boolean",{default:!0}),cxPropOptions:Lyte.attr("array"),cxPropName:Lyte.attr("string"),showLoading:Lyte.attr("boolean",{default:!0}),showScrollLoading:Lyte.attr("boolean",{default:!0}),showSearchLoading:Lyte.attr("boolean",{default:!0}),multipleClicks:Lyte.attr("boolean",{default:!1})}},init:function(){this.setData("cxPropModuleName",this.getData("cxPropRequest")),null==this.getData("cxPropIdSelector")&&this.setData("cxPropIdSelector","id"),null==this.getData("cxPropNameSelector")&&this.setData("cxPropNameSelector","name"),null==this.getData("cxPropSearchAction")&&this.setData("cxPropSearchAction",!1),null!=this.getData("cxPropOptions")&&(this.setData("getRequest",!1),this.setData("systemData",this.getData("cxPropOptions"))),this.getData("getRequest")||(this.setData("showLoading",!1),this.setData("showScrollLoading",!1),this.setData("showSearchLoading",!1))},didConnect:function(){},actions:{onScrollDiv:function(e){this.getData("getRequest")&&(this.setData("showScrollLoading",!0),this.bodyScroll.call(this,"sharingUsers",e))},onClickDropitem:function(){this.checkDropitem()},clearInputField:function(){this.setData("cxPropInputValue","")}},methods:{showNoResult:function(e){0==e.length?this.setData("showNoResult",!0):this.setData("showNoResult",!1)},onInputChange:function(e,t){this.updateInputValue(e.newValue)}},getItems:function(){this.setData("isSearch",!1),this.setData("cxPropInputValue",""),this.getData("getRequest")&&(this.setData("showLoading",!0),this.constructArray.call(this,"sharingUsers",!1)),this.checkDropitem()},setCriteria:function(){return this.getData("isSearch")?{criteria:"((first_name:starts_with:"+this.getData("cxPropInputValue")+")or(last_name:starts_with:"+this.getData("cxPropInputValue")+")or(email:starts_with:"+this.getData("cxPropInputValue")+"))"}:{}},updateInputValue:function(e){if(this.setData("cxPropInputValue",e),this.getData("cxPropSearchAction")){this.setData("showSearchLoading",!0);var t=this.$node.querySelector(".scrollingDiv"+this.getData("cxPropName"));this.keyup.call(this,"sharingUsers",t,null)}else{this.$node.querySelector(".lyteSearch"+this.getData("cxPropName")).setValue(this.getData("cxPropInputValue"))}},removeNone:function(){this.setData("showNoResult",!1)},systemDataObserver:function(){this.systemDataObserverFunction()}.observes("systemData.[]"),systemDataObserverFunction:function(){this.executeMethod("changeSelected"),this.checkDropitem()},checkDropitem:function(){this.setData("onShow",0);for(var e=this.$node.querySelector(".scrollingDiv"+this.getData("cxPropName")),t=0;t<e.childElementCount;t++)"LYTE-DROP-ITEM"!=e.children[t].tagName||e.children[t].classList.contains("lyteDropdownActive")||this.setData("onShow",this.getData("onShow")+1)},loadMoreData:function(){this.setData("showScrollLoading",!1),this.setData("showLoading",!1),this.setData("showSearchLoading",!1),this.checkDropitem(),this.systemDataObserverFunction()},sendSelectedData:function(){if(this.getData("cxPropSelected")&&this.getData("cxPropSelected").length>0){var e=this.getData("cxPropSelected"),t=[];if(this.getData("getRequest")){var o=e.join(","),a=this;return store.findAll(this.getData("cxPropRequest"),{ids:o}).then((function(e){for(var o=0;o<e.length;o++)t.push({name:e[o][a.getData("cxPropNameSelector")],id:e[o][a.getData("cxPropIdSelector")],prefix:a.getData("cxPropPrefix"),image:e[o][a.getData("cxPropImageSelector")]});return t}))}for(var r=0;r<this.getData("cxPropOptions").length;r++)for(var i=0;i<e.length;i++)if(this.getData("cxPropOptions")[r][this.getData("cxPropIdSelector")]==e[i]){t.push({name:this.getData("cxPropOptions")[r][this.getData("cxPropNameSelector")],id:this.getData("cxPropOptions")[r][this.getData("cxPropIdSelector")],prefix:this.getData("cxPropPrefix"),image:this.getData("cxPropOptions")[r][this.getData("cxPropImageSelector")]});break}return Promise.resolve(t)}return Promise.resolve(!1)},resetMixin:function(){this.getData("getRequest")&&(this.setData("multipleClicks",!1),this.setData("noMoreRecord",!0),this.setData("pageNo",1),this.setData("currentPos",0),this.setData("localData",[]),this.setData("systemData",[]))}},{mixins:["crux-user-utils"]}),Lyte.Mixin.register("crux-criteria-conditions",{initCruxConditions:function(e){var t={system:"equal",display:_cruxUtils.getI18n("is")},o={system:"not_equal",display:_cruxUtils.getI18n("isn't")},a={system:"contains",display:_cruxUtils.getI18n("contains")},r={system:"not_contains",display:_cruxUtils.getI18n("doesn't contain")},i={system:"starts_with",display:_cruxUtils.getI18n("starts with")},s={system:"ends_with",display:_cruxUtils.getI18n("ends with")},l={system:"Due in Days",display:_cruxUtils.getI18n("Due in Days")},n={display:_cruxUtils.getI18n("Today"),system:"${TODAY}"},p={system:"${YESTERDAY}",display:_cruxUtils.getI18n("Yesterday")},c={system:"${LASTWEEK}",display:_cruxUtils.getI18n("Last Week")},d={system:"${LASTMONTH}",display:_cruxUtils.getI18n("Last Month")},u={system:"${EMPTY}",display:_cruxUtils.getI18n("is empty")},h={system:"${NOTEMPTY}",display:_cruxUtils.getI18n("is not empty")},m={display:_cruxUtils.getI18n("between"),system:"between"},y={display:_cruxUtils.getI18n("not between"),system:"not_between"};"criteria"==(e=e||"criteria")?(this.textConditions=[{system:"None",display:_cruxUtils.getI18n("None")},t,o,a,r,i,s,u,h],this.dateConditions=[t,o,{system:"less_than",display:_cruxUtils.getI18n("is before")},{system:"greater_than",display:_cruxUtils.getI18n("is after")},m,y,n,{display:_cruxUtils.getI18n("Tommorow"),system:"${TOMORROW}"},{system:"${TOMORROWPLUS}",display:_cruxUtils.getI18n("Tommorow Onwards")},p,{system:"${YESTERDAYMINUS}",display:_cruxUtils.getI18n("Till Yesterday")},d,{system:"${THISMONTH}",display:_cruxUtils.getI18n("Current Month")},{system:"${NEXTMONTH}",display:_cruxUtils.getI18n("Next Month")},c,{system:"${THISWEEK}",display:_cruxUtils.getI18n("Current Week")},{system:"${NEXTWEEK}",display:_cruxUtils.getI18n("Next Week")},{system:"${THISYEAR}",display:_cruxUtils.getI18n("crm.thisyear")},{system:"${THISFY}",display:_cruxUtils.getI18n("Current FY")},{system:"${THISFQ}",display:_cruxUtils.getI18n("Current FQ")},{system:"${LASTYEAR}",display:_cruxUtils.getI18n("crm.prediction.analytics.filter.year")},{system:"${PREVFY}",display:_cruxUtils.getI18n("Previous FY")},{system:"${PREVFQ}",display:_cruxUtils.getI18n("Previous FQ")},{system:"${NEXTYEAR}",display:"Next Year"},{system:"${NEXTFY}",display:_cruxUtils.getI18n("Next FY")},{system:"${NEXTFQ}",display:_cruxUtils.getI18n("Next FQ")},{system:"Age in Days",display:_cruxUtils.getI18n("Age in Days")},l,u,h],this.ageInDaysConditions=[{system:"equal",display:"="},{system:"not_equal",display:"!="},{system:"less_than",display:"<"},{system:"less_equal",display:"<="},{system:"greater_than",display:">"},{system:"greater_equal",display:">="}],this.defaultConditions=[t,o],this.stageConditions=[{system:"None",display:_cruxUtils.getI18n("None")},t,o,{system:"${OPEN}",display:_cruxUtils.getI18n("is OPEN")},{system:"${CLOSEDWON}",display:_cruxUtils.getI18n("is WON")},{system:"${CLOSEDLOST}",display:_cruxUtils.getI18n("is LOST")},a,r,i,s,u,h],this.defWithEmptyConditions=[t,o,u,h]):"filter"==e&&(this.textConditions=[t,o,a,r,i,s,u,h],l={system:"Due in Days",display:_cruxUtils.getI18n("crm.zinvoice.dueIn")},this.dateConditions=[{system:"Age in Days",display:_cruxUtils.getI18n("crm.condition.in.last")},l,{system:"equal",display:_cruxUtils.getI18n("on")},{system:"less_than",display:_cruxUtils.getI18n("before")},{system:"greater_than",display:_cruxUtils.getI18n("crm.label.general.small.after")},{system:"between",display:_cruxUtils.getI18n("between")},n,p,{system:"${THISWEEK}",display:_cruxUtils.getI18n("crm.thisweek")},{system:"${THISMONTH}",display:_cruxUtils.getI18n("crm.label.this.month")},c,d,{system:"${THISYEAR}",display:_cruxUtils.getI18n("crm.thisyear")},{system:"${THISFY}",display:_cruxUtils.getI18n("Current FY")},{system:"${THISFQ}",display:_cruxUtils.getI18n("Current FQ")},{system:"${LASTYEAR}",display:_cruxUtils.getI18n("crm.prediction.analytics.filter.year")},{system:"${PREVFY}",display:_cruxUtils.getI18n("Previous FY")},{system:"${PREVFQ}",display:_cruxUtils.getI18n("Previous FQ")},{system:"${NEXTYEAR}",display:"Next Year"},{system:"${NEXTFY}",display:_cruxUtils.getI18n("Next FY")},{system:"${NEXTFQ}",display:_cruxUtils.getI18n("Next FQ")},u,h],this.defaultConditions=[t,{system:"not_equal",display:_cruxUtils.getI18n("crm.filter.is.not")}],this.stageConditions=[t,{system:"not_equal",display:_cruxUtils.getI18n("crm.filter.is.not")},{system:"${OPEN}",display:_cruxUtils.getI18n("is OPEN")},{system:"${CLOSEDWON}",display:_cruxUtils.getI18n("is WON")},{system:"${CLOSEDLOST}",display:_cruxUtils.getI18n("is LOST")},u,h],this.defWithEmptyConditions=[t,{system:"not_equal",display:_cruxUtils.getI18n("crm.filter.is.not")},u,h]),this.defEmptyConditions=[u,h],this.encryptNumberConditions=[{system:"equal",display:"="},{system:"not_equal",display:"!="},u,h],this.enc_textConditions=[t,o,u,h],this.booleanConditions=[t],this.numberConditions=[{system:"equal",display:"="},{system:"not_equal",display:"!="},{system:"less_than",display:"<"},{system:"less_equal",display:"<="},{system:"greater_than",display:">"},{system:"greater_equal",display:">="},m,y,u,h],this.numberWithOEmptyConditions=[{system:"equal",display:"="},{system:"not_equal",display:"!="},{system:"less_than",display:"<"},{system:"less_equal",display:"<="},{system:"greater_than",display:">"},{system:"greater_equal",display:">="},m,y],this.csConditions=[{system:"${Calls.Call Status.Scheduled}",display:_cruxUtils.getI18n("Scheduled")},{system:"${Calls.Call Status.Attended Dialled}",display:_cruxUtils.getI18n("Attended Dialled")},{system:"${Calls.Call Status.Unattended Dialled}",display:_cruxUtils.getI18n("Unattended Dialled")},{system:"${Calls.Call Status.Overdue}",display:_cruxUtils.getI18n("Overdue")},{system:"${Calls.Call Status.Cancelled}",display:_cruxUtils.getI18n("Cancelled")},{system:"${Calls.Call Status.Received}",display:_cruxUtils.getI18n("Received")},{system:"${Calls.Call Status.Missed}",display:_cruxUtils.getI18n("Missed")}]},restrictedColumnNames:function(e){if("criteria"==(e=e||"criteria"))return["COMMENTCONTENTS","PARTICIPANTID","ISCALLBILLABLE","CHECKINLONGITUDE","CHECKINLATITUDE","PUBLISHED","PRODUCTDETAILS","PREDICTIONSCORE","ACCOUNTCF501","ZCAMPAIGNID","ISCTICALL","BEST_TIME","ISDUPLICATE","ISAPPROVED","CONVERTEDDATE","SENDNOTIFICATION","REMINDAT"]},restrictedUITypes:function(e){if("criteria"==(e=e||"criteria"))return[66,999,3,123,1234,134,500,555,444,445,51,556,104]}}),Lyte.Mixin.register("crux-criteria-util",{validatePattern:function(e,t){var o=(e=e.replace(/#/g,"~")).match(/\(/gi);if(o)var a=o.length;var r=e.match(/\)/gi);if(r)var i=r.length;if(a!=i)return this.showAlert(_cruxUtils.getI18n("criteria.error.alert.brackets.count.mismatch")),this.setData("shownAlert",!0),!1;var s=e.replace(/(and|or)/g,"#").split(" ").join("").replace(/\n/g,"");if(-1!=s.indexOf("(#")||-1!=s.indexOf("#)"))return this.showAlert(_cruxUtils.getI18n("criteria.error.alert.brackets.invalid")),this.setData("shownAlert",!0),!1;if(-1!=s.indexOf("()"))return this.showAlert(_cruxUtils.getI18n("criteria.error.alert.brackets.invalid")),this.setData("shownAlert",!0),!1;var l=s.replace(/[()]/g,"#"),n=e.match(/[0-9]+/g);if(null!=n)for(var p=n.length,c=0;c<p;c++)if(n[c]!=c+1)return this.showAlert(_cruxUtils.getI18n("crm.criteria.number.notmatch.check",n[c])),this.setData("shownAlert",!0),!1;var d=l.replace(/[0-9]+/g,"#").replace(/#/g,"");if(d&&d.length>=1)return this.showAlert(_cruxUtils.getI18n("criteria.error.alert.other.params")),this.setData("shownAlert",!0),!1;var u=e.match(/(and|or)/gi)?e.match(/(and|or)/gi):[];return u&&t-1!==u.length?(this.showAlert(_cruxUtils.getI18n("criteria.error.alert.andor.rowcount.mismatch")),this.setData("shownAlert",!0),!1):t!=l.replace(/[0-9]+/g,"$").replace(/#/g,"").length?(this.showAlert(_cruxUtils.getI18n("criteria.error.alert.critnum.rowcount.mismatch")),this.setData("shownAlert",!0),!1):e=(e=this.addSpaceBetweenParanthesis(e)).replace(/\n/g,"")},addSpaceBetweenParanthesis:function(e){for(var t="",o=(e=e.replace(/\s/g,"")).length,a=0;a<o;a++){var r=e.charAt(a);"("==r||"d"==r||"r"==r||"D"==r||"R"==r?t=t+r+" ":")"==r||"a"==r||"o"==r||"O"==r||"A"==r?t=t+" "+r:t+=r}return t},patternChanging:function(e,t,o,a){if("add"==e)a="("+a+o[t-1]+t+")";else if("remove"==e){var r=0,i=t+" ";a=(a=(a=" "+a+" ").replace(/(and|or)/g,"#")).replace(/#/g,(function(e){return++r===(1!=t?t-1:t)?"":e}));var s=new RegExp(i,"g");a=a.replace(s,""),r=0,a=a.replace(/#/g,(function(e){return++r<=o.length?o[r]:e})),r=1,a=(a=(a=a.replace(/[0-9]/g,"#")).replace(/##/g,"#")).replace(/#/g,(function(e){return r<=a.match(/#/g).length?r++:e}))}else("mod"==e||"specified"==e)&&(a=a.replace(/(and|or)/g,"#"),r=0,a=a.replace(/#/g,(function(e){return++r<=o.length?o[r]:e})));for(a=a.replace(/ /g,"");a.match(/\(\)/g,"");)a=a.replace(/\(\)/g,"");return a=this.addSpaceBetweenParanthesis(a)},changeToDeveloper:function(e){return e.replace(new RegExp(/\S*([A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])/gu),function(e){return e==_cruxUtils.getI18n("and")?"and":e==_cruxUtils.getI18n("or")?"or":e}.bind(this))},changeToInternational:function(e){return e=this.addSpaceBetweenParanthesis(e),pattern=e.replace(/and|or/g,(function(e){return"and"==e?_cruxUtils.getI18n("and"):"or"==e?_cruxUtils.getI18n("or"):void 0})),pattern},getModuleFromCriteria:function(e){var t=e.field.api_name.split("."),o=t.shift();e.field.api_name=t.join(".");var a=this,r={api_name:"module",comparator:"equal"};return r.value=-1==o?{api_name:"-1",display_label:_cruxUtils.getI18n("None")}:this.data.moduleMapping.filter((function(e){return e[a.data.prefixArray.filter((function(e){return"module"==e.apiValue}))[0].systemValue]==o}))[0],[].concat(r).concat(e)},getCriteriaArray:function(e,t){return e.group_operator?e.group[0].field&&"Tag"==e.group[0].field.api_name&&e.group[1].field&&"Activity_Type"==e.group[1].field.api_name?[].concat(e.group[0]):(t.concat(this.getCriteriaArray(e.group[0],t)),t.concat(this.getCriteriaArray(e.group[1],t)),t):(t.push(e),t)},criteriaApiNameCheck:function(e,t){var o=!1;if(e&&t){var a=0;e.split("->").forEach((function(e){if(e.split(".").forEach((function(e){e!=t||a++})),a)return o=!0}))}return o},inorder:function(e,t){return null!==e&&(null!=e.left&&(t+="("),t=this.inorder(e.left,t),t+=e.value,t=this.inorder(e.right,t),null!=e.right&&(t+=")")),t},getModuleFromApiName:function(e,t){if(this.moduleApiMapping[e])return this.moduleApiMapping[e];var o=Object.keys(t).filter((function(o){return t[o].api_name==e}));try{this.moduleApiMapping[e]=o[0]}catch(t){this.moduleApiMapping[e]=void 0}return this.moduleApiMapping[e]},getModuleFromId:function(e,t){if(this.moduleIdMapping[e])return this.moduleIdMapping[e];var o=Object.keys(t).filter((function(o){return t[o].id==e}));try{this.moduleIdMapping[e]=o[0]}catch(t){this.moduleIdMapping[e]=void 0}return this.moduleIdMapping[e]}}),Lyte.Component.register("crux-criteria-editor",{_template:'<template tag-name="crux-criteria-editor"> <template is="if" value="{{expHandlers(cxPropType,\'==\',\'create\')}}"><template case="true"> <lyte-alert lt-prop-type="warning" id="patternWarning" lt-prop-wrapper-class="cxCommonAlertWrapper" lt-prop-top="0px" lt-prop-yield="true" lt-prop-show-close-button="false" lt-prop-button-position="center" lt-prop-buttons="{{alertButton}}" on-accept="{{method(\'alertClosed\')}}"> <template is="registerYield" yield-name="alert"> <lyte-alert-content class="aligncenter">{{unescape(alertMsg)}}</lyte-alert-content> </template> </lyte-alert> <div class="cxCriteriaWrapper"> <div id="criteriaDiv" class="cxCriteriaTable {{if(cxPropSpecifiedCondition,\'cxSpecified\')}}" total="{{totalCriteria}}"> <template is="for" items="{{arr}}" item="val" index="index"> <crux-criteria-editor-header class="criteriaRow criteriaCreateRow" id="criteriaEditorHeader{{cruxArithResult(index,\'+\',1)}}" prefix-array="{{cruxClone(cxPropPrefixArray)}}" module="{{cxPropModule}}" on-operator-change-call="{{method(\'onOperatorChangeCall\')}}" set-conditions="{{method(\'setConditions\')}}" get-fields-for-header="{{method(\'getFieldsForHeader\')}}" cx-prop-show-logged-in-user="{{cxPropShowLoggedInUser}}" criteria-array-object-update="{{method(\'criteriaArrayObjectUpdate\')}}" on-value-change-call="{{method(\'onValueChangeCall\')}}" on-field-change-call="{{method(\'onFieldChangeCall\')}}" criteria-number="{{rowNumberArray[index]}}" and-or-condition="{{patternArrDis[index]}}" criteria-index="{{cruxArithResult(index,\'+\',1)}}" show-add="{{if(ifEquals(arr.length,cruxArithResult(index,\'+\',1)),true,false)}}" show-remove="{{if(ifEquals(arr.length,1),false,true)}}" set-criteria-obj="{{unbound(if(setCriteriaObj[index],setCriteriaObj[index]))}}" set-field-for-criteria="{{method(\'setCriteriaObjectField\')}}" cx-prop-none-field="{{cxPropShowNoneCondition}}" module-list="{{moduleList}}" multiple-module="{{multipleModule}}" remove-pattern="{{cxPropRemovePattern}}" on-value-error="{{method(\'valueErrorCall\')}}" get-prefix-values="{{method(\'sendPrefixValues\')}}" get-prefix-array="{{method(\'sendPrefixArray\')}}" module-mapping="{{cxPropModuleMapping}}" module-record-mapping="{{cxPropModuleRecordMapping}}" dynamic-column="{{cxPropDynamicColumns}}" date-pattern="{{cxPropDatePattern}}" time-format="{{cxPropTimeFormat}}" criteria-format="{{cxPropCriteriaFormat}}" total-criteria="{{totalCriteria}}" cx-prop-boundary="{{cxPropBoundary}}" display-field="{{cxPropModuleDisplayFieldMapping}}" cx-prop-appearance="{{cxPropAppearance}}" text-max-length="{{cxPropTextMaxLimit}}" onfield-dropdown-open="{{method(\'onFieldDropdownOpenCall\')}}" oncondition-dropdown-open="{{method(\'onConditionDropdownOpenCall\')}}" oncondition-dropdown-hide="{{method(\'onConditionDropdownHideCall\')}}" onfield-dropdown-hide="{{method(\'onFieldDropdownHideCall\')}}" on-age-in-condition-change-call="{{method(\'onAgeInConditionChangeCall\')}}" currency-properties="{{cxPropCurrencyProperties}}" tab-index="{{cxPropTabIndex}}" cx-prop-show-all-fields="{{cxPropShowAllFields}}" time-zone="{{cxPropTimeZone}}" cx-prop-id="{{cxPropId}}" api-version="{{cxPropCriteriaVersion}}"></crux-criteria-editor-header> </template> </div> <template is="if" value="{{expHandlers(expHandlers(arr.length,\'>\',1),\'&amp;&amp;\',expHandlers(cxPropRemovePattern,\'!\'))}}"><template case="true"> <div class="criteria_new_pat_edtr cxCriteriaPtrnContEditMode" id="changePattern"> <div class="criteriaTd {{if(showEdit,\'editmodeLabel\',\'\')}}"> <span class="cxCriteriaPtrnLabel">{{cruxGetI18n("crm.label.criteria.pattern")}}</span> <template is="if" value="{{expHandlers(cxPropShowHelp,\'&amp;&amp;\',expHandlers(cxPropAppearance,\'==\',\'box\'))}}"><template case="true"> <span class="cxCriteriaInfoIcon" data-zcqa="criteria_patternhelp" lt-prop-title="{{cruxGetI18n(\'crm.label.context.help\')}}" lt-prop-tooltip-config="{&quot;position&quot;:&quot;bottom&quot;}" onclick="{{action(\'openHelp\')}}"></span> </template></template> </div> <template is="if" value="{{expHandlers(showEdit,\'!\')}}"><template case="true"> <div class="cxCriteriaEditorPatternValue criteriaTd editPatternLabel"> <span class="cxCriteriaPatternValue" data-zcqa="criteria_pattern">{{patternCriteria}}</span> <span class="cxCriteriaEditLink" data-zcqa="criteria_patternedit" onclick="{{action(\'openEditCriteria\',this)}}">{{cruxGetI18n("crm.label.edit.criteria.pattern")}}</span> <template is="if" value="{{expHandlers(cxPropShowHelp,\'&amp;&amp;\',expHandlers(cxPropAppearance,\'==\',\'flat\'))}}"><template case="true"> <span class="cxCriteriaInfoIcon" data-zcqa="criteria_patternhelp" lt-prop-title="{{cruxGetI18n(\'crm.label.context.help\')}}" lt-prop-tooltip-config="{&quot;position&quot;:&quot;bottom&quot;}" onclick="{{action(\'openHelp\')}}"></span> </template></template> </div> </template><template case="false"> <div class="cxCriteriaEditorPatternInput criteriaTd editPatternInput"> <lyte-input data-zcqa="criteria_pattern" lt-prop-text-area-resize="{}" lt-prop-type="textarea" class="criteriaPatternText {{if(ifEquals(cxPropAppearance,\'box\'),\'cxBoxInput cxTextarea\')}}" lt-prop-value="{{lbind(patternCriteria)}}" lt-prop-id="lyteInputCriteria" lt-prop-rows="5" lt-prop-cols="60" lt-prop-appearance="{{cxPropAppearance}}"></lyte-input> <div class="patternButtons"> <span class="cxCriteriaSaveLink" data-zcqa="criteria_patternsave" onclick="{{action(\'saveCriteriaPattern\')}}"> <span class="cxCriteriaFlatLink">{{cruxGetI18n("crm.button.save")}}</span> </span> <span class="cxCriteriaCancelLink" data-zcqa="criteria_patterncancel" onclick="{{action(\'closeEditCriteria\')}}"> <span class="cxCriteriaFlatLink">{{cruxGetI18n("crm.button.cancel")}}</span> </span> </div> </div> </template></template> </div></template></template> </div>  </template></template><template is="if" value="{{expHandlers(cxPropType,\'==\',\'view\')}}"><template case="true"> <template is="if" value="{{cxPropEmptyShowYield}}"><template case="true"> <lyte-yield yield-name="emptyCriteriaYield"></lyte-yield> </template><template case="false"> <div class="pwie"> <div id="criteriaDiv" class="cxCriteriaTable cxViewMode"> <template is="for" items="{{arr}}" item="val" index="index"> <crux-criteria-editor-view-header class="criteriaRow criteriaViewRow" id="criteriaEditorHeader{{cruxArithResult(index,\'+\',1)}}" prefix-array="{{cxPropPrefixArray}}" module="{{cxPropModule}}" set-field-for-criteria="{{method(\'setCriteriaObjectField\')}}" set-conditions="{{method(\'setConditions\')}}" criteria-index="{{cruxArithResult(index,\'+\',1)}}" and-or-condition="{{patternArrDis[index]}}" fields="{{cxPropFields}}" criteria="{{unbound(if(setCriteriaObj[index],setCriteriaObj[index]))}}" total-criteria="{{totalCriteria}}" module-mapping="{{cxPropModuleMapping}}" date-pattern="{{cxPropDatePattern}}" time-format="{{cxPropTimeFormat}}" currency-properties="{{cxPropCurrencyProperties}}" show-comparator="{{cxPropShowComparatorInView}}"></crux-criteria-editor-view-header> </template> </div> <template is="if" value="{{expHandlers(expHandlers(arr.length,\'>\',1),\'&amp;&amp;\',expHandlers(cxPropRemovePattern,\'!\'))}}"><template case="true"> <div class="criteria_new_pat_edtr cxCriteriaPtrnContViewMode viewmode" id="changePattern"> <div class="criteriaTd"> <span class="cxCriteriaPtrnLabel">{{cruxGetI18n("crm.label.criteria.pattern")}}:</span> </div> <div class="criteriaTd editPatternInput"> <span class="cxCriteriaPtrnLabel" data-zcqa="criteria_pattern">{{patternCriteria}}</span> </div> </div> </template></template> </div> </template></template> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1]},{type:"attr",position:[3,1,1]},{type:"for",position:[3,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,1,1,0]},{type:"attr",position:[1,1,3]},{type:"if",position:[1,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]},{type:"attr",position:[1,3]},{type:"text",position:[1,3,0]},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3,1]},{type:"text",position:[1,3,1,1,0]},{type:"attr",position:[1,3,3]},{type:"text",position:[1,3,3,1,0]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[2]},{type:"if",position:[2],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,1,0]},{type:"text",position:[1,3,1,0]}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["cxPropFields","totalCriteria","cxPropModule","arr","patternArr","pattern","showEdit","criteria","patternArrDis","bufferCriteria","shownAlert","criteriaArrayObject","cxPropSetCriteria","setCriteriaObj","moduleId","cxPropType","setCriteriaViewObj","getFields","cxPropMaxCount","cxPropRemovePattern","cxPropSpecifiedCondition","defaultCond","defaultCondition","defaultLabelCondition","internalFieldCall","cxPropShowLoggedInUser","cxPropEmptyShowYield","cxPropShowNoneCondition","patternCriteria","cxPropModuleDisplayFieldMapping","alertButton","preventUIType","preventColumnName","cxPropShowAllFields","cxPropShowHelp","cxPropHelpUrl","cxPropBoundary","cxPropAppearance","cxPropDropArray","cxPropPrefixArray","criteriaEditPattern","editPatternNode","cxPropDatePattern","cxPropModuleMapping","cxPropModuleRecordMapping","cxPropDynamicColumns","cxPropTimeFormat","cxPropTimeZone","cxPropCriteriaFormat","rowNumberArray","cxPropTextMaxLimit","cxPropDropBoxWidth","cxPropCurrencyProperties","cxPropTabIndex","cxPropShowComparatorInView","cxPropId","cxPropCriteriaVersion"],data:function(){return{cxPropFields:Lyte.attr("array"),totalCriteria:Lyte.attr("number",{default:1}),cxPropModule:Lyte.attr("string"),arr:Lyte.attr("array",{default:[]}),patternArr:Lyte.attr("array",{default:[" "]}),pattern:Lyte.attr("array",{default:[" "]}),showEdit:Lyte.attr("boolean",{default:!1}),criteria:Lyte.attr("string",{default:"1"}),patternArrDis:Lyte.attr("array",{default:[" "]}),bufferCriteria:Lyte.attr("string"),shownAlert:Lyte.attr("boolean",{default:!1}),criteriaArrayObject:Lyte.attr("array",{default:[]}),cxPropSetCriteria:Lyte.attr("object"),setCriteriaObj:Lyte.attr("array"),moduleId:Lyte.attr("string"),cxPropType:Lyte.attr("string",{default:"create"}),setCriteriaViewObj:Lyte.attr("array"),getFields:Lyte.attr("boolean",{default:!1}),cxPropMaxCount:Lyte.attr("number",{default:25}),cxPropRemovePattern:Lyte.attr("boolean",{default:!1}),cxPropSpecifiedCondition:Lyte.attr("string"),defaultCond:Lyte.attr("string",{default:"and"}),defaultCondition:Lyte.attr("string",{default:_cruxUtils.getI18n("and")}),defaultLabelCondition:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.label.and")}),internalFieldCall:Lyte.attr("boolean",{default:!1}),cxPropShowLoggedInUser:Lyte.attr("boolean",{default:!0}),cxPropEmptyShowYield:Lyte.attr("boolean",{default:!1}),cxPropShowNoneCondition:Lyte.attr("boolean",{default:!0}),patternCriteria:Lyte.attr("string",{default:"1"}),cxPropModuleDisplayFieldMapping:Lyte.attr("object"),alertButton:Lyte.attr("array",{default:[{type:"accept",text:_cruxUtils.getI18n("crm.mb.newversion.msg4"),appearance:"primary"}]}),preventUIType:Lyte.attr("array"),preventColumnName:Lyte.attr("array"),cxPropShowAllFields:Lyte.attr("boolean",{default:!1}),cxPropShowHelp:Lyte.attr("boolean",{default:!0}),cxPropHelpUrl:Lyte.attr("string"),cxPropBoundary:Lyte.attr("object",{default:{}}),cxPropAppearance:Lyte.attr("string",{default:"box"}),cxPropDropArray:Lyte.attr("array",{default:[]}),cxPropPrefixArray:Lyte.attr("array",{default:[]}),criteriaEditPattern:Lyte.attr("array",{default:[]}),editPatternNode:Lyte.attr("object"),cxPropDatePattern:Lyte.attr("string",{default:"undefined"!=typeof Crm?Crm.userDetails.DATE_PATTERN:"dd/mm/yyyy"}),cxPropModuleMapping:Lyte.attr("array"),cxPropModuleRecordMapping:Lyte.attr("object"),cxPropDynamicColumns:Lyte.attr("boolean"),cxPropTimeFormat:Lyte.attr("string",{default:"undefined"!=typeof Crm?Crm.userDetails.TIME_FORMAT:void 0}),cxPropTimeZone:Lyte.attr("string",{default:"undefined"!=typeof Crm?Crm.userDetails.TIME_ZONE:"+05.30"}),cxPropCriteriaFormat:Lyte.attr("string"),rowNumberArray:Lyte.attr("array",[1]),cxPropTextMaxLimit:Lyte.attr("number"),cxPropDropBoxWidth:Lyte.attr("string",{default:"min-button"}),cxPropCurrencyProperties:Lyte.attr("object",{default:"undefined"!=typeof Crm?{baseCurrency:Crm.userDetails.BASE_CURRENCY,currencyDetails:Crm.userDetails.CURRENCY_DETAILS,defaultRoundOff:Crm.userDetails.defaultRoundOff?Crm.userDetails.defaultRoundOff:2,defaultOrgCurrency:Crm.userDetails.defaultOrgCurrency}:{baseCurrency:"",currencyDetails:{},defaultRoundOff:2,defaultOrgCurrency:""}}),cxPropTabIndex:Lyte.attr("number",{default:0}),cxPropShowComparatorInView:Lyte.attr("boolean",{default:!1}),cxPropId:Lyte.attr("string",{default:"criteria"}),cxPropCriteriaVersion:Lyte.attr("string",{default:"query"})}},didConnect:function(){window.addEventListener("keydown",this.keydownFn,!0),this.getMethods("onRender")&&this.executeMethod("onRender")},didDestroy:function(){window.removeEventListener("keydown",this.keydownFn,!0)},keydownFn:function(e){var t=e.target.classList;32==e.keyCode&&(t.contains("cx_prefixDropdownLabel")||t.contains("cx_fieldDropdownLabel")||t.contains("cx_compDropdownLabel"))&&e.preventDefault()},onGetFieldsSucess:function(){this.setCriteria(this.getData("cxPropSetCriteria"))},filterAndSetFields:function(e){for(var t=e.length,o=0;o<t;o++){if("Data_Processing_Basis"==e[o].api_name&&this.data.cxPropModuleRecordMapping.Consents&&this.data.cxPropModuleRecordMapping.Consents.fields){var a=store.peekRecord("module",this.data.cxPropModuleRecordMapping.Consents.id).fields.filterBy({api_name:"Data_Processing_Basis"})[0];a&&Lyte.Component.set(e[o],{pick_list_values:a.pick_list_values})}if("Activities"==this.data.cxPropModule&&"Tag"==e[o].api_name&&e[o].sub_module&&(e[o].field_label=e[o].field_label+" ("+this.data.cxPropModuleRecordMapping[e[o].sub_module.api_name].plural_label+")",e[o].api_name=e[o].sub_module.api_name+"."+e[o].api_name),!this.data.cxPropShowAllFields)for(var r in this.preventField)if(this.preventField[r].indexOf(e[o][r])>-1){e.splice(o,1),o--,t--;break}}return e.sort((function(e,t){var o=e.field_label,a=t.field_label;return o.toLowerCase().localeCompare(a.toLowerCase())}))},setDatas:function(){this.data.cxPropPrefixArray&&this.data.cxPropPrefixArray.length>0?this.data.cxPropDropArray&&this.data.cxPropDropArray.length>0&&(this.showObject[this.data.cxPropPrefixArray[0].apiValue]=this.getData("cxPropDropArray"),this.setCriteria(this.getData("cxPropSetCriteria"))):this.data.cxPropFields?(this.setData("internalFieldCall",!0),this.setData("cxPropFields",this.filterAndSetFields(this.data.cxPropFields)),this.setCriteria(this.getData("cxPropSetCriteria"))):"view"==this.data.cxPropType&&this.setCriteria(this.getData("cxPropSetCriteria"))},init:function(){var e;for(var t in this.$node.getCriteria=function(){return this.component.getCriteria()},this.$node.resetCriteria=function(){return this.component.resetCriteria()},this.$node.setCriteriaConditions=function(e){for(var t in e)this.component[t+"Conditions"]=e[t]},this.$node.setPreventFieldsObject=function(e){for(var t in e)this.component.preventField[t]=e[t]},this.$node.setWidth=function(){console.warn("This function is deprecated. This function is no longer required to set the width for criteria editor in the modal")},"undefined"==typeof crmConstants||this.data.cxPropModuleDisplayFieldMapping||this.setData("cxPropModuleDisplayFieldMapping",crmConstants.moduleDisplayField),this.data.cxPropModuleRecordMapping||this.setData("cxPropModuleRecordMapping",moduleRecordMapping),this.setCriteriaFromComp=!1,this.newCriteria=!1,this.showValueError=!1,this.initCruxConditions("criteria"),this.getMethods("setCriteriaConditions")&&(e=this.executeMethod("setCriteriaConditions")),e)this[t+"Conditions"]=e[t];this.setData("preventColumnName",this.restrictedColumnNames()),this.setData("preventUIType",this.restrictedUITypes()),this.preventField={ui_type:this.data.preventUIType,column_name:this.data.preventColumnName,show_type:[17]},this.getMethods("preventFieldsObject")&&(this.preventField=this.executeMethod("preventFieldsObject",this.preventField)),this.getData("cxPropSpecifiedCondition")&&("and"==this.getData("cxPropSpecifiedCondition")?(this.setData("defaultCond","and"),this.setData("defaultCondition",_cruxUtils.getI18n("and")),this.setData("defaultLabelCondition",_cruxUtils.getI18n("crm.label.and"))):"or"==this.getData("cxPropSpecifiedCondition")&&(this.setData("defaultCond","or"),this.setData("defaultCondition",_cruxUtils.getI18n("or")),this.setData("defaultLabelCondition",_cruxUtils.getI18n("crm.label.or"))));var o="cxCriteriaFlatStyle";"box"===this.getData("cxPropAppearance")&&(o="cxCriteriaBoxStyle"),$L(this.$node).addClass(o),this.showObject={},this.setDatas(),this.internalRowObj=1},resetCriteria:function(){this.getData("cxPropSetCriteria")?(this.setData("arr",[]),this.setData("pattern",[" "]),this.setData("patternArrDis",[" "]),this.setData("patternArr",[" "]),this.setData("rowNumberArray",[1]),this.internalRowObj=1,this.setCriteria(this.getData("cxPropSetCriteria"))):this.setCriteria({}),this.setData("showEdit",!1)},savePattern:function(e){var t=e.split(" ").join("");return!!(t=this.validatePattern(t,this.data.totalCriteria))&&(this.setData("criteria",t),this.setData("patternCriteria",this.changeToInternational(t)),this.getData("cxPropSpecifiedCondition")&&this.criteriaOption("specified"),this.updateCriteriaRowsConditionBasedOnChangedPattern(this.getData("criteria")),t)},updateCriteriaRowsBasedOnChangedPattern:function(e){for(var t={},o=0;o<this.getData("totalCriteria");o++){var a=this.$node.getElementsByTagName("crux-criteria-editor-header")[o].component.getValue(!0);t[this.data.rowNumberArray[o]]=a}var r=e.match(/[0-9]+/g);r.forEach((function(e,t){r[t]=parseInt(e)})),this.setData("rowNumberArray",r);var i=[];for(o=0;o<r.length;o++)i[o]=t[r[o]-1],this.$node.getElementsByTagName("crux-criteria-editor-header")[o].component.setCriteria(t[r[o]])},updateCriteriaRowsConditionBasedOnChangedPattern:function(e){for(var t=[" "],o=e.match(/(and|or)/gi),a=[" "],r=[" "],i=o.length,s=0;s<i;s++)"or"==o[s]?(r.push("or"),t.push(_cruxUtils.getI18n("or")),a.push(_cruxUtils.getI18n("crm.label.or"))):"and"==o[s]&&(r.push("and"),t.push(_cruxUtils.getI18n("and")),a.push(_cruxUtils.getI18n("crm.label.and")));this.setData("pattern",r),this.setData("patternArr",t),this.setData("patternArrDis",a)},criteriaOption:function(e,t){var o=this.getData("pattern"),a=this.getData("criteria");if("add"==e)a="("+a+o[t-1]+t+")";else if("remove"==e){var r=0,i=(a=" "+a+" ",Lyte.arrayUtils(this.getData("rowNumberArray"),"removeAt",t-1)[0]);this.data.rowNumberArray.forEach(function(e,t){e>i&&Lyte.arrayUtils(this.data.rowNumberArray,"replaceAt",t,e-1)}.bind(this));var s=i+" ";a=(a=a.replace(/(and|or)/g,"#")).replace(/#/g,(function(e){return++r===(1!=t?t-1:t)?"":e}));var l=new RegExp(s,"g");a=a.replace(l,""),r=0,a=a.replace(/#/g,(function(e){return++r<=o.length?o[r]:e})),r=0,a=(a=(a=a.replace(/[0-9]/g,"#")).replace(/##/g,"#")).replace(/#/g,function(e){return r<=a.match(/#/g).length?this.data.rowNumberArray[r++]:e}.bind(this))}else("mod"==e||"specified"==e)&&(a=a.replace(/(and|or)/g,"#"),r=0,a=a.replace(/#/g,(function(e){return++r<=o.length?o[r]:e})));for(a=a.replace(/ /g,"");a.match(/\(\)/g,"");)a=a.replace(/\(\)/g,"");a=this.addSpaceBetweenParanthesis(a),this.setData("criteria",a),this.setData("patternCriteria",this.changeToInternational(a))},showAlert:function(e){var t=!0;if(this.getMethods("onBeforeErrorAlert")&&(t=this.executeMethod("onBeforeErrorAlert",e)),t){var o=this.$node.querySelector("#patternWarning");this.setData("alertMsg",e),o.ltProp("show",!0),this.getMethods("onErrorAlert")&&this.executeMethod("onErrorAlert",e)}},getCriteria:function(){if(this.getData("showEdit"))return!1;for(var e=[],t=[],o=this.$node.getElementsByTagName("crux-criteria-editor-header"),a=0,r=1;a<this.getData("totalCriteria");a++,r++){var i=o[a].component.getValue();if(0==i||null==i)return i;var s=i.fieldRecord;delete i.fieldRecord,this.getMethods("changeCriteriaObject")&&(i=this.executeMethod("changeCriteriaObject",i,a,s)),i.group_operator&&(t.push({condition1:r,condition2:r+1}),r++),e.push(i)}var l=this.getData("criteria");l=(l=(l=(l=l.replace(/ /g,"")).replace(/and/g,"+").replace(/or/g,"-")).replace(/[0-9]/g,"#")).replace(/##/g,"#");var n=[],p=[],c=[],d=0;for(a=0,r=0;a<l.length;a++)"("==l[a]?(n.push(l[a]),d=0):"+"==l[a]||"-"==l[a]?p.push(l[a]):")"==l[a]?c.length>1&&(n.pop(),(u=[]).push(c.pop()),u.push(c.pop()),u.reverse(),"+"==(h=p.pop())?h="and":"-"==h&&(h="or"),c.push({group_operator:h,group:u}),d=1):(c.push(e[r++]),d++),c.length>=2&&2==d&&((u=[]).push(c.pop()),u.push(c.pop()),u.reverse(),"+"==(h=p.pop())?h="and":"-"==h&&(h="or"),c.push({group_operator:h,group:u}),d=1);for(;0!=p.length;){var u,h;(u=[]).push(c.shift()),u.push(c.shift()),"+"==(h=p.shift())?h="and":"-"==h&&(h="or"),c.unshift({group_operator:h,group:u})}return c=c[0],this.setCriteriaFromComp=!0,this.setData("cxPropSetCriteria",c),this.setData("setCriteriaObj",e),t.length&&this.data.cxPropCriteriaFormat?{pattern:t,criteria:c}:c},inorder:function(e,t){return null!==e&&(null!=e.left&&(t+="("),t=this.inorder(e.left,t),t+=e.value,t=this.inorder(e.right,t),null!=e.right&&(t+=")")),t},setCriteria:function(e){if(this.setData("arr",[]),this.setData("rowNumberArray",[]),this.internalRowObj=void 0,this.getData("cxPropFields"),e&&Object.keys(e).length>0){var t=e.pattern?e.pattern:void 0,o=this.data.cxPropCriteriaFormat,a=0;this.setData("cxPropEmptyShowYield",!1);try{e=JSON.parse(JSON.stringify(e.criteria?e.criteria:e))}catch(t){e=e.criteria?e.criteria:e}var r=new function e(r,i,s){this.checkForSpecialCriteria=function(e){return o&&"quoteLineItem"==o&&s&&s.length+1==t[a].condition1-a&&!e.group[0].group_operator&&!e.group[1].group_operator?(a++,!1):!(e.group[0].field&&e.group[1].field&&e.group[0].field.api_name.match(/Tag/)&&"Activity_Type"==e.group[1].field.api_name)},r.group_operator&&this.checkForSpecialCriteria(r)?(this.left=new e(r.group[0],i,s),this.right=new e(r.group[1],i,s),this.value=r.group_operator.trim().toLowerCase(),i.push(r.group_operator)):(s.push(r),this.value=s.length,this.left=null,this.right=null),this.andOr=i,this.criteria=s}(e,[],[]);s=this.inorder(r,"");var i=s.match(/and|or/g)?s.match(/and|or/g):s.match(/AND|OR/g);this.setData("setCriteriaObj",r.criteria),this.setData("criteria",this.addSpaceBetweenParanthesis(s)),this.setData("patternCriteria",this.changeToInternational(s)),this.setData("totalCriteria",r.criteria.length)}else"view"==this.getData("cxPropType")&&this.setData("cxPropEmptyShowYield",!0),patternCriteria=["1",void 0,1],this.setData("criteria",patternCriteria[0]),this.setData("setCriteriaObj",patternCriteria[1]),this.setData("totalCriteria",patternCriteria[2]);if(null!=i)for(var l=i.length,n=0;n<l;n++)i[n]=i[n].replace(/"/g,""),"and"==i[n].trim().toLowerCase()?(Lyte.arrayUtils(this.getData("pattern"),"push","and"),Lyte.arrayUtils(this.getData("patternArrDis"),"push",_cruxUtils.getI18n("crm.label.and")),Lyte.arrayUtils(this.getData("patternArr"),"push",_cruxUtils.getI18n("and"))):"or"==i[n].trim().toLowerCase()&&(Lyte.arrayUtils(this.getData("pattern"),"push","or"),Lyte.arrayUtils(this.getData("patternArrDis"),"push",_cruxUtils.getI18n("crm.label.or")),Lyte.arrayUtils(this.getData("patternArr"),"push",_cruxUtils.getI18n("or")));for(0==this.getData("totalCriteria")&&this.setData({criteria:"1",setCriteriaObj:void 0,totalCriteria:1}),n=0;n<this.getData("totalCriteria");n++)Lyte.arrayUtils(this.getData("arr"),"push",n+1),Lyte.arrayUtils(this.getData("rowNumberArray"),"push",n+1);this.internalRowObj=this.data.totalCriteria},actions:{createNewCriteria:function(){var e=!0,t=this.getData("totalCriteria");this.getMethods("onBeforeAddCriteria")&&(e=this.executeMethod("onBeforeAddCriteria",t+1)),e&&(this.getData("showEdit")?this.showAlert(_cruxUtils.getI18n("crm.alert.label.savepattern")):t>=this.getData("cxPropMaxCount")?this.showAlert(_cruxUtils.getI18n("crm.criteria.max.rowcnt.exceeds")):(Lyte.arrayUtils(this.getData("pattern"),"push",this.getData("defaultCond")),Lyte.arrayUtils(this.getData("patternArrDis"),"push",this.getData("defaultLabelCondition")),t+=1,this.internalRowObj+=1,Lyte.arrayUtils(this.getData("patternArr"),"push",this.getData("defaultCondition")),Lyte.arrayUtils(this.getData("arr"),"push",t),Lyte.arrayUtils(this.getData("rowNumberArray"),"push",t),this.setData("totalCriteria",t),this.criteriaOption("add",t),this.getMethods("onAddCriteria")&&this.executeMethod("onAddCriteria",t),this.getMethods("onChange")&&this.executeMethod("onChange","New Criteria Added",t)))},removeCriteria:function(e){var t=!0,o=this.getData("totalCriteria");this.getMethods("onBeforeDeleteCriteria")&&(t=this.executeMethod("onBeforeDeleteCriteria",o)),t&&(this.getData("showEdit")?this.showAlert(_cruxUtils.getI18n("crm.alert.label.savepattern")):(o-=1,this.setData("totalCriteria",o),Lyte.arrayUtils(this.getData("patternArrDis"),"removeAt",1!=e?e-1:e),Lyte.arrayUtils(this.getData("patternArr"),"removeAt",1!=e?e-1:e),Lyte.arrayUtils(this.getData("pattern"),"removeAt",1!=e?e-1:e),Lyte.arrayUtils(this.getData("arr"),"removeAt",e-1),Lyte.arrayUtils(this.getData("criteriaArrayObject"),"removeAt",e),this.getData("setCriteriaObj")&&this.getData("setCriteriaObj")[1!=e?e-1:e]&&Lyte.arrayUtils(this.getData("setCriteriaObj"),"removeAt",1!=e?e-1:e),this.criteriaOption("remove",e),this.getMethods("onDeleteCriteria")&&this.executeMethod("onDeleteCriteria",o+1),this.getMethods("onChange")&&this.executeMethod("onChange","Criteria Deleted",o+1)))},openEditCriteria:function(e){var t=!0;if(this.getMethods("onBeforeEditPattern")&&(t=this.executeMethod("onBeforeEditPattern",this.getData("criteria"))),t){var o;if(this.setData("bufferCriteria",this.getData("criteria")),"box"==this.getData("cxPropAppearance")&&(o=$L(e).prev().height()),this.setData("showEdit",!0),"box"==this.getData("cxPropAppearance")){var a=$L(this.$node).find(".criteriaPatternText")[0];a.setData("ltPropHeight",o+15+"px"),a.focus()}this.getMethods("onEditPattern")&&this.executeMethod("onEditPattern",this.getData("criteria"))}},closeEditCriteria:function(){var e=this.getData("criteria");this.setData("criteria",this.getData("bufferCriteria")),this.setData("patternCriteria",this.changeToInternational(this.getData("criteria"))),this.setData("showEdit",!1),this.getMethods("onCancelPattern")&&this.executeMethod("onCancelPattern",e)},saveCriteriaPattern:function(){var e=!0;if(this.getMethods("onBeforeSavePattern")&&(e=this.executeMethod("onBeforeSavePattern",this.getData("criteria"))),e){var t=this.changeToDeveloper(this.getData("patternCriteria"));this.savePattern(t),this.getData("shownAlert")?this.setData("shownAlert",!1):(this.setData("showEdit",!1),this.getMethods("onSavePattern")&&this.executeMethod("onSavePattern",this.getData("criteria")),this.getMethods("onChange")&&this.executeMethod("onChange","Pattern Edited",this.getData("criteria")))}},openHelp:function(){this.data.cxPropHelpUrl?open(this.data.cxPropHelpUrl):Lyte.Component.registeredHelpers.getHelpUrl&&open(Lyte.Component.registeredHelpers.getHelpUrl("help.change.criteria.pattern"))},changeAndOr:function(e,t){var o,a,r=!0;this.getMethods("onBeforeConditionChange")&&(r=this.executeMethod("onBeforeConditionChange",t,e)),!r||this.getData("cxPropSpecifiedCondition")||this.getData("showEdit")||(e==_cruxUtils.getI18n("crm.label.or")?(pu="and",a=_cruxUtils.getI18n("crm.label.and"),o=_cruxUtils.getI18n("and")):e==_cruxUtils.getI18n("crm.label.and")&&(pu="or",o=_cruxUtils.getI18n("or"),a=_cruxUtils.getI18n("crm.label.or")),Lyte.arrayUtils(this.getData("pattern"),"replaceAt",t-1,pu),Lyte.arrayUtils(this.getData("patternArr"),"replaceAt",t-1,o),Lyte.arrayUtils(this.getData("patternArrDis"),"replaceAt",t-1,a),this.criteriaOption("mod",t),this.getMethods("onConditionChange")&&this.executeMethod("onConditionChange",t,e),this.getMethods("onChange")&&this.executeMethod("onChange","Group Operator Edited",t,e)),this.getData("showEdit")&&this.showAlert(_cruxUtils.getI18n("crm.alert.label.savepattern"))},alertEvent:function(e,t,o){t&&o&&this.getMethods("setPrefixError")?this.showAlert(this.executeMethod("setPrefixError",t,o)):this.showAlert(e)}},methods:{onFieldChangeCall:function(e,t,o){this.getMethods("onFieldChange")&&this.executeMethod("onFieldChange",e,t,o),this.getMethods("onChange")&&this.executeMethod("onChange","Field Edited",e,t,o)},onOperatorChangeCall:function(e,t,o){this.getMethods("onOperatorChange")&&this.executeMethod("onOperatorChange",e,t,o),this.getMethods("onChange")&&this.executeMethod("onChange","Comparator Edited",e,t,o)},onValueChangeCall:function(){this.getMethods("onValueChange")&&this.executeMethod("onValueChange",arguments[0],arguments[1]),this.getMethods("onChange")&&this.executeMethod("onChange","Value Edited",arguments[0],arguments[1])},onFieldDropdownOpenCall:function(e,t){this.getMethods("onFieldDropdownOpen")&&this.executeMethod("onFieldDropdownOpen",e,t)},onConditionDropdownOpenCall:function(e,t){this.getMethods("onConditionDropdownOpen")&&this.executeMethod("onConditionDropdownOpen",e,t)},onFieldDropdownHideCall:function(e,t){this.getMethods("onFieldDropdownHide")&&this.executeMethod("onFieldDropdownHide",e,t)},onConditionDropdownHideCall:function(e,t){this.getMethods("onConditionDropdownHide")&&this.executeMethod("onConditionDropdownHide",e,t)},onAgeInConditionChangeCall:function(e,t,o){this.getMethods("onAgeInConditionChange")&&this.executeMethod("onAgeInConditionChange",e,t,o),this.getMethods("onChange")&&this.executeMethod("onChange","Age In Condition Changed",e,t,o)},criteriaArrayObjectUpdate:function(e,t){var o=this.getData("criteriaArrayObject");o[t]=e,this.setData("criteriaArrayObject",o)},setConditions:function(e,t,o){"picklist"!=e&&"multiselectpicklist"!=e&&"user"!=e||null!=this[e+"Conditions"]&&0!=this[e+"Conditions"].length||(e="user"==e?"defWithEmpty":"text");var a="noneConditions"!=(e+="Conditions")?this[e]:[{system:"None",display:_cruxUtils.getI18n("None")}];if(this.getMethods("setFieldBasedComparator")&&o&&(a=this.executeMethod("setFieldBasedComparator",o,a)),t)for(var r=0;r<a.length;r++)if(a[r].system==t){var i=[];return i.push(a[r]),i}return a},getFieldsForHeader:function(e,t,o,a){return o?this.getDropdownData(-1,o,a):e?this.getData("cxPropFields")[0]:this.getMethods("onBeforeFieldDropdown")?this.executeMethod("onBeforeFieldDropdown",this.getData("cxPropFields"),t):this.getData("cxPropFields")},valueErrorCall:function(){this.showValueError=!0,this.setData("rowValueError",arguments[0]),this.showAlert(arguments[1])},alertClosed:function(){this.showValueError&&(this.$node.querySelector("#criteriaEditorHeader"+this.getData("rowValueError")+" #elementComponent input")?this.$node.querySelector("#criteriaEditorHeader"+this.getData("rowValueError")+" #elementComponent input").focus():this.$node.querySelector("#criteriaEditorHeader"+this.getData("rowValueError")+" #elementComponent lyte-dropdown")&&this.$node.querySelector("#criteriaEditorHeader"+this.getData("rowValueError")+" #elementComponent lyte-dropdown").focus(),this.showValueError=!1)},sendPrefixValues:function(e,t,o,a){return this.getMethods("onChange")&&a&&this.executeMethod("onChange","Prefix Dropdown Selected"),this.getDropdownData(e,t,o)},sendPrefixArray:function(e,t,o){return this.executeMethod("getNextPrefixDrop",o[0])},setCriteriaObjectField:function(e){try{if(e.field instanceof Record)return}catch(e){}if(this.data.cxPropFields&&this.data.cxPropFields.length)try{e.field=this.data.cxPropFields.filter((function(t){if("Data_Processing_Basis"==t.api_name&&"Data_Processing_Basis_Details.Data_Processing_Basis"==e.field.api_name)return!0;if("lookup"==t.data_type&&!e.field.multiFields){if(e.field.data_type){if("lookup"==e.field.data_type){if(t.api_name==e.field.api_name.substr(0,e.field.api_name.lastIndexOf(".")))return!0;if((t.api_name.match(/role/)||t.api_name.match(/profile/))&&t.api_name==e.field.api_name)return!0;if(t.api_name==e.field.api_name&&("What_Id"==t.api_name||"What_Id.name"==t.api_name))return!0}}else{if(t.api_name==e.field.api_name&&("What_Id"==t.api_name||"What_Id.name"==t.api_name))return!0;if(t.api_name==e.field.api_name.split(".")[0])return!0}return!1}return t.api_name==e.field.api_name||t.id==e.field.id&&"Tag"==e.field.api_name}))[0]}catch(e){console.warn("cxPropFields does not contain the selected criteria field")}else e.field.data_type&&"lookup"==e.field.data_type&&(e.field.api_name=e.field.api_name.substr(0,e.field.api_name.lastIndexOf(".")))}},getDropdownData:function(e,t,o){if(0==e)return this.showObject[this.data.cxPropPrefixArray[0].apiValue];var a=o[1],r=o[0];if(null==this.showObject[a]||!this.showObject[a]instanceof Promise){var i=this.executeMethod("getDropData",r,this.showObject[a]?this.showObject[a]:null);return i instanceof Promise?(this.showObject[a]=i,i.then(function(t){return this.showObject[a]=-1==e?this.filterAndSetFields(t):t,this.showObject[a]}.bind(this),function(){return this.getMethods("onError")&&this.executeMethod("onError"),"Error"}.bind(this))):(1==i||(-1==e&&Array.isArray(i)?this.showObject[a]=this.filterAndSetFields(i):this.showObject[a]=i),this.showObject[a])}return this.showObject[a]},fieldObserver:function(){this.getData("internalFieldCall")?this.setData("internalFieldCall",!1):(this.setData("getFields",!1),this.setData("criteriaArrayObject",[]),this.newCriteria||this.setData("cxPropSetCriteria",{}),this.newCriteria=!1,this.setDatas())}.observes("cxPropFields.[]"),setCriteriaObserver:function(){this.setCriteriaFromComp||(this.newCriteria=!0,this.setData("arr",[]),this.setData("pattern",[" "]),this.setData("patternArrDis",[" "]),this.setData("patternArr",[" "]),this.setData("rowNumberArray",[1]),this.internalRowObj=1,this.setDatas()),this.setCriteriaFromComp=!1}.observes("cxPropSetCriteria"),moduleObserver:function(){this.setData("cxPropFields",[])}.observes("cxPropModule"),typeObserver:function(){null==this.getData("cxPropSetCriteria")||this.getData("cxPropSetCriteria")&&0==Object.keys(this.getData("cxPropSetCriteria")).length?this.setData("cxPropEmptyShowYield",!0):this.setData("cxPropEmptyShowYield",!1)}.observes("cxPropType"),prefixArrayObserver:function(){this.data.cxPropDynamicColumns||this.setDatas()}.observes("cxPropPrefixArray.[]"),dropArrayObserver:function(){this.setDatas()}.observes("cxPropDropArray.[]"),observeAppearance:function(){var e="cxCriteriaFlatStyle";"box"===this.getData("cxPropAppearance")&&(e="cxCriteriaBoxStyle"),$L(this.$node).addClass(e)}.observes("cxPropAppearance")},{mixins:["crux-criteria-conditions","crux-criteria-util"]}),Lyte.Component.registerHelper("getClassForEditPattern",(function(e){return"("==e||")"==e?"prevent":isNaN(parseInt(e))?"blue prevent":"cxCritPtnNum"})),Lyte.Component.register("crux-criteria-editor-header",{_template:'<template tag-name="crux-criteria-editor-header"> <div class="criteriaTd criteriaNumber"> <div class="cxCriteriaNumWrap"> <template is="if" value="{{ifNotEquals(criteriaIndex,1)}}"><template case="true"> <div class="cxCriteriaAndOr"> <lyte-input class="cxCriteriaAndOrLyteInput" lt-prop-class="cxCriteriaAndOrInput" lt-prop-readonly="true" lt-prop-value="{{andOrCondition}}" data-zcqa="criteria_cond_{{criteriaIndex}}" onclick="{{action(\'changeAndOr\')}}"></lyte-input> </div> </template></template> <input type="text" data-zcqa="criteria_patternnum_{{criteriaIndex}}" id="patternNum" class="cxCriteriaPatternNum patterNum" value="{{criteriaNumber}}" readonly=""> </div> </div> <template is="for" items="{{prefixArray}}" item="item" index="index"> <div class="criteriaTd"> <div class="cxCriteriaDropdown pR {{if(item.dropdownOpen,&quot;cxCriteriaDropdownOpen&quot;,&quot;&quot;)}} {{if(item.dropdownOpen,if(item.dropdownOpenUp,&quot;cxCriteriaDropdownOpenUp&quot;,&quot;cxCriteriaDropdownOpenDown&quot;))}} {{if(item.showValue,&quot;&quot;,&quot;cxCriteriaDropdownDisabled&quot;)}}"> <div class="cx_prefixDropdownLabel prefix_{{item.apiValue}} {{if(item.showValue,\'\',\'lyteDropdown-disabled\')}}" data-zcqa="criteria_{{item.apiValue}}_{{criteriaIndex}}" onclick="{{action(\'showPrefixDropdown\',index)}}" onkeydown="{{action(\'keyUpDropdown\',this,event)}}" tabindex="{{tabIndex}}"> <lyte-text class="lyteMarginRight lyteDropdownLabel" lt-prop-value="{{selectedArray[index].value[item.displayValue]}}"></lyte-text> <lyte-icon class="dropdown"></lyte-icon> </div> <template is="if" value="{{item.showDropdown}}"><template case="true"> <lyte-dropdown lt-prop-freeze="false" class="cxCriteriaPrefixOrigDropdown cx_PrefixDropdown{{item.apiValue}}" lt-prop-yield="true" lt-prop-tabindex="{{undefinedData}}" on-option-selected="{{method(\'changePrefixOption\',index)}}" lt-prop-selected="{{selectedArray[index].value[item.systemValue]}}" on-before-show="{{method(\'onPrefixDropdownBeforeShow\',index)}}" on-show="{{method(\'onPrefixDropdownShow\',index)}}" on-hide="{{method(\'onDropdownHide\')}}" on-before-hide="{{method(\'prefixBeforeHide\',index)}}" lt-prop-prevent-parent-scroll="true"> <template is="registerYield" yield-name="yield"> <lyte-drop-button class="cx_empty_dropbtn"></lyte-drop-button> <lyte-drop-box class="cxDropbox criteriaDropbox"> <template is="if" value="{{expHandlers(showArray[item.apiValue],\'&amp;&amp;\',expHandlers(showArray[item.apiValue].length,\'>\',9))}}"><template case="true"> <lyte-drop-header> <lyte-search id="prefixSearchBox" class="w100per prefixSearchStyle{{criteriaIndex}}{{item.apiValue}}" lt-prop-query-selector="{&quot;scope&quot;:&quot;lyte-drop-box:not(.lyteDropdownHidden) .lytePrefixDropbody{{criteriaIndex}}{{item.apiValue}}&quot;,&quot;search&quot;:&quot;lyte-drop-item:not(.prevent)&quot;, &quot;target&quot; : &quot;lyte-drop-item:not(.prevent)&quot;}" on-search="{{method(&quot;onPrefixSearch&quot;,index)}}" lt-prop-appearance="flat" lt-prop-maxlength="{{undefinedData}}" lt-prop-trim="true" lt-prop-close-icon="true"> </lyte-search> </lyte-drop-header> </template></template> <lyte-drop-body class="lytePrefixDropbody{{criteriaIndex}}{{item.apiValue}}"> <template is="if" value="{{expHandlers(showArray[item.apiValue],\'==\',\'Loading\')}}"><template case="true"> <div class="loadingGifDiv aligncenter"> <img class="loadingGif" src="//img.zohocdn.com/crm/CRMClient/images/crux-search-loader_829992d_.svg"> </div> </template><template case="false"> <template is="if" value="{{expHandlers(item.cxPropDisableNone,\'!\')}}"><template case="true"> <lyte-drop-item class="selector{{criteriaIndex}}" data-zcqa="criteria{{item.apiValue}}drop_none" data-value="-1" id="-1" index="-1" value="none"> {{cruxGetI18n(\'None\')}} </lyte-drop-item> </template></template> <template is="for" items="{{showArray[item.apiValue]}}" item="value" index="indexi"> <template is="if" value="{{expHandlers(expHandlers(value.unused,\'!\'),\'&amp;&amp;\',expHandlers(value.type,\'!=\',\'unused\'))}}"><template case="true"> <lyte-drop-item class="selector{{criteriaIndex}}{{item.systemValue}}" data-value="{{value[item.systemValue]}}" data-zcqa="criteria_fielddrop_{{value[item.systemValue]}}_{{criteriaIndex}}" index="{{indexi}}"> {{value[item.displayValue]}} </lyte-drop-item> </template></template> </template> <template is="if" value="{{item.emptyOptionsShow}}"><template case="true"> <div class="cxDropdownNoResult" data-value="prevent">{{cruxGetI18n("crm.label.no.options.found")}}</div> </template></template> </template></template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </template></template> </div> </div> </template> <template is="if" value="{{showFieldsCriteria}}"><template case="true"> <div class="criteriaTd"> <div class="cxCriteriaDropdown {{if(fieldDropdownOpen,&quot;cxCriteriaDropdownOpen&quot;,&quot;&quot;)}} {{if(fieldDropdownOpen,if(fieldDropdownUp,&quot;cxCriteriaDropdownOpenUp&quot;,&quot;cxCriteriaDropdownOpenDown&quot;))}} {{if(showField,&quot;&quot;,&quot;cxCriteriaDropdownDisabled&quot;)}}"> <div class="cx_fieldDropdownLabel {{if(showField,\'\',\'lyteDropdown-disabled\')}}" data-zcqa="criteria_field_{{criteriaIndex}}" onclick="{{action(\'showFieldsDropdown\',event)}}" onkeyup="{{action(\'keyUpDropdown\',this,event)}}" tabindex="{{tabIndex}}"> <lyte-text class="lyteMarginRight lyteDropdownLabel" lt-prop-value="{{selectedField.field_label}}"></lyte-text> <lyte-icon class="dropdown"></lyte-icon> </div> <template is="if" value="{{showFieldsDropdown}}"><template case="true"> <lyte-dropdown lt-prop-freeze="false" class="cx_fieldsDropdown" lt-prop-yield="true" lt-prop-tabindex="{{undefinedData}}" on-option-selected="{{method(\'changeField\')}}" lt-prop-selected="{{selectedField.id}}" on-before-show="{{method(\'onFieldDropdownBeforeShow\')}}" on-show="{{method(\'onFieldDropdownShow\')}}" lt-prop-is-open="{{lbind(fieldDrodownOpen)}}" on-before-hide="{{method(\'fieldBeforeHide\')}}" on-hide="{{method(\'onDropdownHide\')}}" lt-prop-prevent-parent-scroll="true"> <template is="registerYield" yield-name="yield"> <lyte-drop-button class="cx_empty_dropbtn"></lyte-drop-button> <lyte-drop-box class="cxDropbox criteriaDropbox"> <template is="if" value="{{expHandlers(fields.length,\'>\',9)}}"><template case="true"> <lyte-drop-header> <lyte-search id="fieldSearchBox" class="w100per fieldSearchStyle{{criteriaIndex}}" lt-prop-query-selector="{&quot;scope&quot;:&quot;lyte-drop-box:not(.lyteDropdownHidden) .lyteFieldsDropbody{{criteriaIndex}}&quot;,&quot;search&quot;:&quot;lyte-drop-item:not(.prevent)&quot;, &quot;target&quot; : &quot;lyte-drop-item:not(.prevent)&quot;}" on-search="{{method(&quot;onFieldSearch&quot;)}}" lt-prop-appearance="flat" lt-prop-maxlength="{{undefinedData}}" lt-prop-trim="true" lt-prop-close-icon="true"> </lyte-search> </lyte-drop-header> </template></template> <lyte-drop-body class="lyteFieldsDropbody{{criteriaIndex}}"> <template is="if" value="{{showFieldsLoading}}"><template case="true"> <div class="loadingGifDiv aligncenter"> <img class="loadingGif" src="//img.zohocdn.com/crm/CRMClient/images/crux-search-loader_829992d_.svg"> </div> </template><template case="false"> <template is="if" value="{{cxPropNoneField}}"><template case="true"> <lyte-drop-item class="selector{{criteriaIndex}}" data-zcqa="criteriafielddrop_none" data-value="-1" id="-1" index="-1" value="none"> {{cruxGetI18n(\'None\')}} </lyte-drop-item> </template></template> <template is="for" items="{{fields}}" item="item" index="index"> <template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(item.unused,\'!\'),\'&amp;&amp;\',item.visible),\'&amp;&amp;\',expHandlers(item.type,\'!=\',\'unused\')),\'||\',cxPropShowAllFields)}}"><template case="true"> <lyte-drop-item class="selector{{criteriaIndex}}" data-value="{{item.id}}" data-zcqa="criteria_fielddrop_{{item.api_name}}_{{criteriaIndex}}" id="{{item.data_type}}" index="{{index}}" value="{{item.api_name}}"> {{item.field_label}} </lyte-drop-item> </template></template> </template> <template is="if" value="{{emptyFieldShow}}"><template case="true"> <div class="cxDropdownNoResult" data-value="prevent">{{cruxGetI18n("crm.label.no.options.found")}}</div> </template></template> </template></template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </template></template> </div> </div> <div class="criteriaTd"> <div class="cxCriteriaDropdown {{if(condDropdownOpen,&quot;cxCriteriaDropdownOpen&quot;,&quot;&quot;)}} {{if(condDropdownOpen,if(condDropdownUp,&quot;cxCriteriaDropdownOpenUp&quot;,&quot;cxCriteriaDropdownOpenDown&quot;))}} {{if(showComparator,&quot;cxCriteriaDropdownDisabled&quot;,&quot;&quot;)}}" id="conditionDiv"> <div class="cx_compDropdownLabel {{if(showComparator,\'lyteDropdown-disabled\',\'\')}}" data-zcqa="criteria_comp_{{criteriaIndex}}" onclick="{{action(\'showComparatorDropdown\')}}" onkeyup="{{action(\'keyUpDropdown\',this,event)}}" tabindex="{{tabIndex}}"> <lyte-text class="lyteMarginRight lyteDropdownLabel" lt-prop-value="{{selectedComparator.display}}"></lyte-text> <lyte-icon class="dropdown"></lyte-icon> </div> <template is="if" value="{{showComparatorDropdown}}"><template case="true"> <lyte-dropdown lt-prop-freeze="false" class="cx_compDropdown" lt-prop-yield="true" lt-prop-tabindex="{{undefinedData}}" id="comparator" lt-prop-selected="{{selectedComparator.system}}" on-option-selected="{{method(\'changeCondition\')}}" on-before-show="{{method(\'onConditionDropdownBeforeShow\')}}" on-show="{{method(\'onConditionDropdownShow\')}}" lt-prop-is-open="{{lbind(condDropdownOpen)}}" on-before-hide="{{method(\'conditionBeforeHide\')}}" on-hide="{{method(\'onDropdownHide\')}}" lt-prop-prevent-parent-scroll="true"> <template is="registerYield" yield-name="yield" lt-prop-prevent-parent-scroll="true"> <lyte-drop-button class="cx_empty_dropbtn"></lyte-drop-button> <lyte-drop-box class="cxDropbox criteriaDropbox"> <template is="if" value="{{expHandlers(condArray.length,\'>\',9)}}"><template case="true"> <lyte-drop-header> <lyte-search id="conditionSearchBox" class="w100per conditionSearchStyle{{criteriaIndex}}" lt-prop-query-selector="{&quot;scope&quot;:&quot;lyte-drop-box:not(.lyteDropdownHidden) .lyteConditionDropbody{{criteriaIndex}}&quot;,&quot;search&quot;:&quot;lyte-drop-item:not(.prevent)&quot;, &quot;target&quot; : &quot;lyte-drop-item:not(.prevent)&quot;}" on-search="{{method(&quot;onConditionSearch&quot;)}}" lt-prop-maxlength="{{undefinedData}}" lt-prop-trim="true" lt-prop-close-icon="true"> </lyte-search> </lyte-drop-header> </template></template> <lyte-drop-body class="lyteConditionDropbody{{criteriaIndex}}"> <template is="for" items="{{condArray}}" item="item" index="index"> <lyte-drop-item data-zcqa="criteria_compdrop_{{item.system}}_{{criteriaIndex}}" data-value="{{item.system}}" index="{{index}}"> {{item.display}} </lyte-drop-item> </template> <template is="if" value="{{emptyConditionShow}}"><template case="true"> <div class="cxDropdownNoResult" data-value="prevent">{{cruxGetI18n("crm.label.no.options.found")}}</div> </template></template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </template></template> </div> </div> <div class="criteriaTd cxElementDiv"> <div id="searchval_div" class="cxCriteriaValueCol"> <template is="if" value="{{noneCondition}}"><template case="true"> <lyte-input lt-prop-appearance="{{cxPropAppearance}}" class="disabledText {{if(ifEquals(cxPropAppearance,\'box\'),\'cxBoxInput\',\'\')}}" lt-prop-type="text" lt-prop-disabled="true" lt-prop-value="{{disableText}}"> </lyte-input> </template><template case="false"><template is="if" value="{{ageInDaysCond}}"><template case="true"> <div class="cxFlex cxCriteriaAgeInDays"> <div class="ageInDaysComp dIB vab"> <lyte-dropdown data-zcqa="criteria_age_{{criteriaIndex}}" on-option-selected="{{method(\'changeAgeInDaysCondition\')}}" class="{{if(ifEquals(cxPropAppearance,\'flat\'),\'cxFlatDropdown\',\'cxBoxDropdown\')}} {{cxPropClass}}" lt-prop-selected="{{selectedAgeInDays.system}}" lt-prop-yield="true" lt-prop-tabindex="{{tabIndex}}" id="ageindayscondition" lt-prop-prevent-parent-scroll="true"> <template is="registerYield" yield-name="yield"> <lyte-drop-box class="cxDropbox"> <lyte-drop-body> <template is="for" items="{{ageindays}}" item="item" index="index"> <lyte-drop-item data-zcqa="criteria_agedrop_{{item.system}}_{{criteriaIndex}}" data-value="{{item.system}}" index="{{index}}">{{item.display}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </div> <div class="ageInDaysVal dIB vab"> <crux-number-component id="ageValueInput" cx-prop-from="criteria" cx-prop-data-zcqa="criteria_number_{{criteriaIndex}}" cx-prop-maxlength="4" on-value-change="{{method(\'changeValue\')}}" cx-prop-allow-negative-value="false" cx-prop-value="{{value[0]}}" cx-prop-field="{{selectedField}}" on-error="{{method(\'valueError\')}}" cx-prop-appearance="{{cxPropAppearance}}" class="{{if(ifEquals(cxPropAppearance,\'box\'),\'cxBoxInput\',\'cxFlatInput\')}}" cx-prop-decimal-allowed="false"></crux-number-component> </div> </div> </template><template case="false"><template is="if" value="{{betweenCond}}"><template case="true"> <div class="cxFlex cxCriteriaBetweenCase"> <template is="component" id="betweenComponent1" class="cxCriteriaBetween1" component-name="crux-{{elementsCond}}-component" on-value-change="{{method(\'changeValue\')}}" cx-prop-from="criteria" cx-prop-data-zcqa="criteria_from_{{elementsCond}}_{{criteriaIndex}}" cx-prop-field="{{selectedField}}" cx-prop-placeholder="{{cruxGetI18n(\'crm.label.from\')}}" cx-prop-value="{{value[0]}}" cx-prop-maxlength="{{maxLen}}" on-error="{{method(\'valueError\')}}" cx-prop-appearance="{{if(ifEquals(cxPropAppearance,\'box\'),\'box\',\'flat\')}}" cx-prop-currency-code="{{currencyProperties.baseCurrency}}" cx-prop-currency-details="{{currencyProperties.currencyDetails}}" cx-prop-default-round-off="{{currencyProperties.defaultRoundOff}}" cx-prop-default-org-currency="{{currencyProperties.defaultOrgCurrency}}" cx-prop-date-pattern="{{datePattern}}" cx-prop-time-zone="{{timeZone}}" cx-prop-time-format="{{timeFormat}}" cx-prop-tab-index="{{tabIndex}}"></template> <template is="component" id="betweenComponent2" class="cxCriteriaBetween2" component-name="crux-{{elementsCond}}-component" cx-prop-data-zcqa="criteria_to_{{elementsCond}}_{{criteriaIndex}}" cx-prop-maxlength="{{maxLen}}" on-value-change="{{method(\'changeValue\')}}" cx-prop-from="criteria" cx-prop-field="{{selectedField}}" cx-prop-value="{{value[1]}}" cx-prop-placeholder="{{cruxGetI18n(\'crm.label.to\')}}" on-error="{{method(\'valueError\')}}" cx-prop-appearance="{{if(ifEquals(cxPropAppearance,\'box\'),\'box\',\'flat\')}}" cx-prop-currency-code="{{currencyProperties.baseCurrency}}" cx-prop-currency-details="{{currencyProperties.currencyDetails}}" cx-prop-default-round-off="{{currencyProperties.defaultRoundOff}}" cx-prop-default-org-currency="{{currencyProperties.defaultOrgCurrency}}" cx-prop-date-pattern="{{datePattern}}" cx-prop-time-zone="{{timeZone}}" cx-prop-tab-index="{{tabIndex}}" cx-prop-time-format="{{timeFormat}}"></template> </div> </template><template case="false"> <template is="component" id="elementComponent" component-name="crux-{{elementsCond}}-component" class="cxCriteriaElementComponent" cx-prop-from="criteria" cx-prop-placeholder="{{if(ifEquals(selectedField.ui_type,\'80\'),cruxGetI18n(\'crm.label.type.minutes\'))}}" cx-prop-maxlength="{{maxLen}}" cx-prop-module="{{module}}" cx-prop-data-zcqa="criteria_{{elementsCond}}_{{criteriaIndex}}" cx-prop-type="{{selectedField.cxPropType}}" cx-prop-disable-extra-value="{{selectedField.cxPropDisableExtraValue}}" cx-prop-do-not-skip-first-value="{{selectedField.cxPropDoNotSkipFirstValue}}" on-value-change="{{method(\'changeValue\')}}" cx-prop-field="{{selectedField}}" cx-prop-login-user="{{cxPropShowLoggedInUser}}" on-error="{{method(\'valueError\')}}" cx-prop-value="{{value[0]}}" cx-prop-boundary="{{cxPropBoundary}}" cx-prop-appearance="{{cxPropAppearance}}" cx-prop-id="criteria_{{elementsCond}}_{{criteriaIndex}}_{{cxPropId}}" cx-prop-currency-code="{{currencyProperties.baseCurrency}}" cx-prop-currency-details="{{currencyProperties.currencyDetails}}" cx-prop-default-round-off="{{currencyProperties.defaultRoundOff}}" cx-prop-default-org-currency="{{currencyProperties.defaultOrgCurrency}}" cx-prop-date-pattern="{{datePattern}}" cx-prop-time-zone="{{timeZone}}" cx-prop-tab-index="{{tabIndex}}" cx-prop-time-format="{{timeFormat}}" cx-prop-max-count="50"></template> </template></template></template></template></template></template> </div> </div> </template><template case="false"> <div class="criteriaTd"></div> </template></template> <div class="criteriaTd cxAddRemoveTd"> <div class="cxCriteriaAddRemove"> <template is="if" value="{{showRemove}}"><template case="true"> <a id="check1" data_zcqa="criteria_remove_{{criteriaIndex}}" class="cxCriteriaRemoveIcon" onclick="{{action(\'removeCriteria\')}}"></a> </template></template><template is="if" value="{{showAdd}}"><template case="true"> <a id="addRow" data_zcqa="criteria_add_{{criteriaIndex}}" class="cxCriteriaAddIcon" onclick="{{action(\'createNewCriteria\')}}"></a> </template></template> </div> </div> </template>',_dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]}]}},default:{}},{type:"attr",position:[1,1,3]},{type:"attr",position:[3]},{type:"for",position:[3],dynamicNodes:[{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"attr",position:[1,1,1,1]},{type:"componentDynamic",position:[1,1,1,1]},{type:"componentDynamic",position:[1,1,1,3]},{type:"attr",position:[1,1,3]},{type:"if",position:[1,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3,3]},{type:"attr",position:[3,3,1]},{type:"if",position:[3,3,1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3]},{type:"for",position:[3],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[3,3]},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"attr",position:[1,1,1,1]},{type:"componentDynamic",position:[1,1,1,1]},{type:"componentDynamic",position:[1,1,1,3]},{type:"attr",position:[1,1,3]},{type:"if",position:[1,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3,3]},{type:"attr",position:[3,3,1]},{type:"if",position:[3,3,1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3]},{type:"for",position:[3],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[3,3]},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3,1]},{type:"attr",position:[3,1,1]},{type:"attr",position:[3,1,1,1]},{type:"componentDynamic",position:[3,1,1,1]},{type:"componentDynamic",position:[3,1,1,3]},{type:"attr",position:[3,1,3]},{type:"if",position:[3,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3,3]},{type:"attr",position:[3,3,1]},{type:"for",position:[3,3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"attr",position:[3,3,3]},{type:"if",position:[3,3,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"componentDynamic",position:[3,3]},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[5,1,1]},{type:"if",position:[5,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"registerYield",position:[1,1,1,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1,1]},{type:"attr",position:[1,3,1]},{type:"componentDynamic",position:[1,3,1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"component",position:[1,1],dynamicNodes:[]},{type:"attr",position:[1,3]},{type:"component",position:[1,3],dynamicNodes:[]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"component",position:[1],dynamicNodes:[]}]}},default:{}}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[]}},default:{}},{type:"attr",position:[7,1,1]},{type:"if",position:[7,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[7,1,2]},{type:"if",position:[7,1,2],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}],_observedAttributes:["module","fields","ageindays","criteria","showAdd","showRemove","selectCond","formCond","criteriaIndex","andOrCondition","selectUser","ageInDays","dueInDays","nocCondition","users","dropdowndata","pickList","lookup","criteriaObject","setCriteriaObj","tags","layout","emptyFieldShow","emptyPicklistShow","searchValue","showEmpty","condArray","dataType","callModule","lookupField","betweenCond","elementsCond","noneCondition","ageInDaysCond","disableText","displayField","showComparator","selectedAgeInDays","showFieldsDropdown","cxPropShowLoggedInUser","gotFields","gotComparator","cxPropNoneField","showFieldInTitle","numberFieldException","unusedField","textMaxLength","maxLen","cxPropShowAllFields","cxPropBoundary","cxPropAppearance","prefixArray","selectedArray","showArray","showExtraColumn","showField","showFieldsCriteria","dynamicColumn","criteriaNumber","moduleMapping","moduleRecordMapping","disabledListDropdown","boxButtonWidth","undefinedData","currencyProperties","tabIndex","datePattern","timeFormat","timeZone","cxPropId"],data:function(){return{module:Lyte.attr("string"),fields:Lyte.attr("array",{default:[]}),ageindays:Lyte.attr("array"),criteria:Lyte.attr("number"),showAdd:Lyte.attr("boolean"),showRemove:Lyte.attr("boolean"),selectCond:Lyte.attr("string"),formCond:Lyte.attr("string"),criteriaIndex:Lyte.attr("number"),andOrCondition:Lyte.attr("string"),ageindays:Lyte.attr("array"),selectUser:Lyte.attr("boolean",{default:!1}),ageInDays:Lyte.attr("boolean",{default:!1}),dueInDays:Lyte.attr("boolean",{default:!1}),nocCondition:Lyte.attr("boolean",{default:!1}),users:Lyte.attr("array"),dropdowndata:Lyte.attr("array"),pickList:Lyte.attr("boolean"),lookup:Lyte.attr("boolean"),criteriaObject:Lyte.attr("object"),setCriteriaObj:Lyte.attr("object"),tags:Lyte.attr("array"),layout:Lyte.attr("array"),emptyFieldShow:Lyte.attr("boolean",{default:!1}),emptyPicklistShow:Lyte.attr("boolean",{default:!1}),searchValue:Lyte.attr("string"),showEmpty:Lyte.attr("boolean",{default:!1}),condArray:Lyte.attr("array"),dataType:Lyte.attr("string",{default:""}),callModule:Lyte.attr("string",{default:""}),lookupField:Lyte.attr("string",{default:""}),betweenCond:Lyte.attr("boolean",{default:!1}),elementsCond:Lyte.attr("string"),noneCondition:Lyte.attr("boolean",{default:!0}),ageInDaysCond:Lyte.attr("boolean",{default:!1}),disableText:Lyte.attr("string"),displayField:Lyte.attr("object"),showComparator:Lyte.attr("boolean",{default:!0}),selectedAgeInDays:Lyte.attr("object"),showFieldsDropdown:Lyte.attr("boolean",{default:!1}),cxPropShowLoggedInUser:Lyte.attr("boolean"),gotFields:Lyte.attr("boolean",{default:!1}),gotComparator:Lyte.attr("boolean",{default:!1}),cxPropNoneField:Lyte.attr("boolean"),showFieldInTitle:Lyte.attr("boolean",{default:!1}),numberFieldException:Lyte.attr("array",{default:["Solution_Number","Invoice_Number","SO_Number","Quote_Number","Case_Number"]}),unusedField:Lyte.attr("object"),textMaxLength:Lyte.attr("number"),maxLen:Lyte.attr("number"),cxPropShowAllFields:Lyte.attr("boolean"),cxPropBoundary:Lyte.attr("object",{default:{}}),cxPropAppearance:Lyte.attr("string",{default:"flat"}),prefixArray:Lyte.attr("array",{default:[]}),selectedArray:Lyte.attr("array",{default:[]}),showArray:Lyte.attr("object",{default:{}}),showExtraColumn:Lyte.attr("boolean",{default:[]}),showField:Lyte.attr("boolean",{default:!0}),showFieldsCriteria:Lyte.attr("boolean",{default:!0}),dynamicColumn:Lyte.attr("boolean"),textMaxLength:Lyte.attr("number"),criteriaNumber:Lyte.attr("string"),moduleMapping:Lyte.attr("array"),moduleRecordMapping:Lyte.attr("object"),disabledListDropdown:Lyte.attr("array",{default:["prevent"]}),boxButtonWidth:Lyte.attr("string"),undefinedData:Lyte.attr("object"),currencyProperties:Lyte.attr("object"),tabIndex:Lyte.attr("number"),datePattern:Lyte.attr("string"),timeFormat:Lyte.attr("string"),timeZone:Lyte.attr("string"),cxPropId:Lyte.attr("string")}},init:function(){if(this.moduleApiMapping={},this.moduleIdMapping={},this.hideDropdowns(0),this.data.prefixArray.length>=1&&this.setData("showField",!1),this.getData("setCriteriaObj")&&0!=Object.keys(this.getData("setCriteriaObj")).length)this.setCriteria(this.getData("setCriteriaObj"));else if(this.getData("cxPropNoneField")||0!=this.data.prefixArray.length){if(this.data.prefixArray.length>0)for(var e=0;e<this.data.prefixArray.length;e++){var t=this.getData("prefixArray")[e],o={};if(0==e&&t.cxPropDisableNone){var a=this.executeMethod("getPrefixValues",0,this.getData("selectedArray"),this.getDeveloperArg(-1,this.data.selectedArray));Lyte.Component.set(this.getData("showArray"),t.apiValue,a),o[t.systemValue]=a[0][t.systemValue],o[t.displayValue]=a[0][t.displayValue]}else o[t.systemValue]="-1",o[t.displayValue]=_cruxUtils.getI18n("None");var r={api_name:t.apiValue,comparator:"equal",value:o};Lyte.arrayUtils(this.data.selectedArray,"push",r)}this.data.prefixArray&&this.data.prefixArray.length>0&&this.data.prefixArray[0].cxPropDisableNone&&this.getData("showArray")[this.data.prefixArray[0].apiValue]&&("module"==(t=this.getData("prefixArray")[0]).apiValue&&this.setData("module",this.getData("showArray")[t.apiValue][0].lookup?this.getModuleFromApiName(this.getData("showArray")[t.apiValue][0].lookup.module.api_name,this.data.moduleRecordMapping):this.getData("showArray")[t.apiValue][0].module_name?this.getData("showArray")[t.apiValue][0].module_name:this.getData("showArray")[t.apiValue][0][t.systemValue]),r={api_name:t.apiValue,comparator:"equal",value:this.getData("showArray")[t.apiValue][0]},this.executeMethod("getPrefixValues",this.getData("prefixArray")[1]?1:-1,this.getData("selectedArray"),this.getDeveloperArg(0,this.data.selectedArray)),this.changePrefixFunction(0)),this.setData("selectedField",{api_name:"None",data_type:"none",field_label:_cruxUtils.getI18n("None"),id:"-1"}),this.changeFieldFunction(!0)}else{var i=this.executeMethod("getFieldsForHeader",!0);Lyte.arrayUtils(this.getData("fields"),"push",i),this.setData("selectedField",i),this.changeFieldFunction(!0)}this.data.dynamicColumn&&this.setData("showFieldsCriteria",!1)},hideDropdowns:function(e){for(var t=this.data.prefixArray?this.data.prefixArray.length:0,o=0;o<t;o++)o<=e?Lyte.Component.set(this.getData("prefixArray")[o],"showValue",!0):Lyte.Component.set(this.getData("prefixArray")[o],"showValue",!1);this.setData("selectedField",{api_name:"None",data_type:"none",field_label:_cruxUtils.getI18n("None"),id:"-1"}),this.setData("selectedComparator",{system:"None",display:_cruxUtils.getI18n("None")}),this.setData("showEmpty",!1),this.setData("selectUser",!1),this.setData("pickList",!1),this.setData("lookup",!1),this.setData("betweenCond",!1),this.setData("ageInDaysCond",!1),this.setData("noneCondition",!0),this.setData("value",void 0),this.setData("fcomp",void 0),this.getData("prefixArray")&&this.getData("prefixArray").length==e?this.setData("showField",!0):this.setData("showField",!1),this.setData("showComparator",!0)},getValue:function(e){this._skipVal=e;var t=this.$node.querySelector("#searchval_div"),o=this.getData("fvalue");if(this.getData("ageInDaysCond")){var a=t.querySelector("crux-number-component");if(!a.component.validate()&&!e)return!1;var r=a.component.getValue();this.getData("ageInDays")?o="${AGEINDAYS}+"+r:this.getData("dueInDays")?o="${DUEINDAYS}+"+r:this.data.nocCondition&&(o="${NOC"+r+"}")}else if(this.getData("betweenCond")){if(!(t.querySelector("#betweenComponent1").component.validate()&&t.querySelector("#betweenComponent2").component.validate()||e))return!1;var i=t.querySelector("#betweenComponent1").component.getValue(),s=t.querySelector("#betweenComponent2").component.getValue();o=[i,s]}else if(!this.getData("noneCondition")){if(!t.querySelector("#elementComponent").component.validate()&&!e)return!1;if(o=t.querySelector("#elementComponent").component.getValue(),(o=Array.isArray(o)&&1==o.length?o[0]:o)&&"string"==typeof o&&(o=o.trim()),"text"==this.data.selectCond&&Array.isArray(o)){for(var l=[],n=0;n<o.length;n++)""!=o[n].trim()&&l.push(o[n].trim());if(0==l.length)return this.executeMethod("onValueError",this.getData("criteriaIndex"),_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(this.getData("selectedField").field_label))),!1;o=l}if(137==this.data.selectedField.ui_type){if(l=[],Array.isArray(o))for(n=0;n<o.length;n++){var p;(p=Object.values(moduleRecordMapping).filter((function(e){return e.plural_label==o[n]})))[0]?l.push(p[0].api_name):l.push(o[n])}else(p=Object.values(moduleRecordMapping).filter((function(e){return e.plural_label==o})))[0]?l.push(p[0].api_name):l.push(o);if(o=l,l=[],Array.isArray(o))for(n=0;n<o.length;n++){var c={api_name:o[n].trim()};l[n]=c}else c={api_name:o.trim()},l[0]=c;o=l}if(this.data.selectedField.api_name.match(/Activity_Type/)&&"Activities"==this.data.module)if(Array.isArray(o)){for(l=[],n=0;n<o.length;n++)l.push(Object.values(moduleRecordMapping).filter((function(e){return e.plural_label==o[n]}))[0].api_name);o=l}else o=Object.values(moduleRecordMapping).filter((function(e){return e.plural_label==o}))[0].api_name}var d={};field=Object.assign({},this.getData("selectedField")),d.field={},d.field.api_name=this.modifyApiName(field.api_name,field),d.field=Object.assign(d.field,{id:field.id,field_label:field.field_label,data_type:field.data_type}),"formula"==d.field.data_type&&(d.field.formula=field.formula),field.decimal_place&&(d.field.decimal_place=field.decimal_place),field.separator&&(d.field.separator=field.separator),d.comparator=this.getData("ageInDaysCond")?this.getData("selectedAgeInDays").system:this.getData("fcomp")?this.getData("fcomp"):this.getData("selectedComparator").system,d.value=o,d.fieldRecord=this.getData("selectedField");var u=e||this.checkValuesCondition(d);if(u){if(d.field.api_name.match(/Tag/)&&this.getData("selectedField").module&&"Activities"==this.getData("selectedField").module[0].module_name){var h=[];h.push({comparator:d.comparator,field:{api_name:"Tag",id:d.field.id},value:d.value}),h.push({comparator:"equal",field:{api_name:"Activity_Type"},value:d.field.api_name.split(".")[0]}),d={group_operator:"AND",group:h}}if(this.data.prefixArray.length>=1)if("quoteLineItem"==this.criteriaFormat){var m={},y=this.data.selectedArray[1].value[this.data.prefixArray[1].systemValue];m.field={api_name:this.data.selectedArray[0].value[this.data.prefixArray[0].systemValue]+"->"+y+"."+this.data.displayField[y][0]},m.comparator="equal",m.value=this.data.selectedArray[2].value[this.data.prefixArray[2].displayValue],d=this.joinCriteria(m,d)}else{var f=this.data.prefixArray.filter((function(e){return"module"==e.apiValue}))[0];if(f&&d.field){var g=this.data.prefixArray.indexOf(f);d.field.api_name=this.data.selectedArray[g].value[this.data.prefixArray[g].systemValue]+"."+d.field.api_name}for(n=this.data.prefixArray.length-1;n>=0;n--)"module"!=this.data.prefixArray[n].apiValue&&(d=this.joinCriteria(this.selectedArray[n],d))}return d}return u},modifyApiName:function(e,t){if(["Activities","Calls","Events","Tasks"].indexOf(this.data.module)>-1){if(e.endsWith("What_Id")||t.api_name.endsWith("What_Id.name"))return e;if("criteria"==this.data.apiVersion&&(e.endsWith("Who_Id")||t.api_name.endsWith("Who_Id.name")))return e}else if("Data_Processing_Basis"==e)return"Data_Processing_Basis_Details.Data_Processing_Basis";return"lookup"==t.data_type&&t.lookup.module?this.getData("displayField")[this.getModuleFromId(t.lookup.module.id,this.data.moduleRecordMapping)]?e+"."+this.getData("displayField")[this.getModuleFromId(t.lookup.module.id,this.data.moduleRecordMapping)][0]:e+".Name":e},checkValuesCondition:function(e){var t=e.field;if(this.data.selectedArray&&this.data.selectedArray.length&&-1==this.data.selectedArray[0].value[this.data.prefixArray[0].systemValue])return 1!=this.data.criteriaIndex||this.data.totalCriteria>1?(this.throwEvent("alertEvent",this.data.prefixArray[0].cxPropErrorMsg,this.data.prefixArray[0],this.data.criteriaIndex),!1):void 0;if(""==t.api_name||"None"==t.api_name||null==t.api_name){if(this.data.prefixArray&&0==this.data.prefixArray.length&&1==this.data.criteriaIndex&&1==this.data.totalCriteria)return;return this.throwEvent("alertEvent",_cruxUtils.getI18n("crm.criteria.fieldlabel.valid.check",this.data.criteriaIndex)),!1}if(""==e.comparator||"None"==e.comparator||null===e.comparator)return this.throwEvent("alertEvent",_cruxUtils.getI18n("crm.criteria.condition.valid.check",$ESAPI.encoder().encodeForHTML(t.field_label))),!1;if(""===e.value||null==e.value)return this.throwEvent("alertEvent",_cruxUtils.getI18n("crm.field.valid.check",$ESAPI.encoder().encodeForHTML(t.field_label))),!1;if(e.comparator.match(/between/)){var o=e.field.data_type;if("formula"==o&&(o=e.field.formula.return_type),"datetime"==o||"date"==o){if(e.value[0]>e.value[1])return this.throwEvent("alertEvent",_cruxUtils.getI18n("crm.custom.field.less.than.equalto",_cruxUtils.getI18n("workflow.option.webhookFailure.fromDate"),_cruxUtils.getI18n("workflow.option.webhookFailure.toDate"))),!1}else if(parseInt(e.value[0])>=parseInt(e.value[1]))return this.throwEvent("alertEvent",_cruxUtils.getI18n("crm.custom.field.less.than.to")),!1}return!0},joinCriteria:function(e,t){var o={group_operator:"and",group:[]};return o.group[0]=e,o.group[1]=t,o},setCriteria:function(e){this.setData("showEmpty",!1),this.setData("selectUser",!1),this.setData("pickList",!1),this.setData("lookup",!1),this.setData("betweenCond",!1),this.setData("ageInDaysCond",!1),this.setData("noneCondition",!0),this.setData("value",void 0),this.setData("fcomp",void 0);var t=[];if(null==e.field?t=this.getCriteriaArray(e,[]):t.push(e),this.data.prefixArray.length>0&&t.length<2){var o=this.getModuleFromCriteria(t[t.length-1]);this.setData("module",o[0].value.lookup?this.getModuleFromApiName(o[0].value.lookup.module.api_name,this.data.moduleRecordMapping):o[0].value.module_name?o[0].value.module_name:this.getModuleFromApiName(o[0].value.api_name,this.data.moduleRecordMapping)),t.splice(t.length-1,1),t=t.concat(o)}var a,r=this.data.criteriaFormat;if("quoteLineItem"==r&&t[0].field&&t[0].field.api_name.match("->")&&1==t.length?r="quoteLineItem5":a=t.pop(),"quoteLineItem"==r||"quoteLineItem5"==r?this.setData("selectedArray",this.parseCriteriaArray(t)):this.setData("selectedArray",t),"quoteLineItem5"!=r){this.executeMethod("setFieldForCriteria",a),Lyte.arrayUtils(this.getData("fields"),"push",a.field),this.setData("selectedField",a.field);var i,s=!1;"formula"==a.field.data_type&&(s=!0);var l=a.comparator,n=a.value,p=[];if("string"==typeof n&&n.match(/\{/)&&("datetime"==this.getData("selectedField").data_type||"date"==this.getData("selectedField").data_type||s||n.match("NOC")||"${EMPTY}"==n||"${OPEN}"==n||"${CLOSEDWON}"==n||"${CLOSEDLOST}"==n||"${NOTEMPTY}"==n||this.getData("selectedField").api_name.match(/Call_Status/))&&(n.match("DUEINDAYS")?(i=l.split("!")[0],l="Due in Days",n=n.replace(/\D/g,"")):n.match("AGEINDAYS")?(i=l.split("!")[0],l="Age in Days",n=n.replace(/\D/g,"")):n.match("NOC")?(i=l.split("!")[0],l="Number of Characters",n=n.replace(/\D/g,"")):l="equal"!=l&&"contains"!=l||"${EMPTY}"!=n?"${EMPTY}"==n||"${NOTEMPTY}"==n?"${NOTEMPTY}":n:"${EMPTY}"),this.changeFieldFunction(void 0,l),this.setData("showField",!0),this.getData("pickList")){if("string"==typeof n&&(n=n.split(",")),137==this.data.selectedField.ui_type){var c=[];if(Array.isArray(n))for(var d=0;d<n.length;d++)n[d].api_name?c[d]=n[d].api_name:c[d]=n[d];else n.api_name?c[0]=n.api_name:c[0]=n;if(n=c,c=[],Array.isArray(n))for(d=0;d<n.length;d++){var u;(u=Object.values(moduleRecordMapping).filter((function(e){return e.api_name==n[d]})))[0]?c.push(u[0].plural_label):c.push(n[d])}else(u=Object.values(moduleRecordMapping).filter((function(e){return e.api_name==n})))[0]?c.push(u[0].plural_label):c.push(n);n=c}if(this.data.selectedField.api_name.match(/Activity_Type/)&&"Activities"==this.data.module)if(Array.isArray(n)){for(c=[],d=0;d<n.length;d++)c.push(moduleRecordMapping[n[d]].plural_label);n=c}else n=moduleRecordMapping[n].plural_label;p[0]=n}else if(this.getData("selectUser"))p[0]={users:n};else if("tag"==this.getData("elementsCond"))p[0]=[].concat(n);else if("layout"==this.getData("elementsCond"))p[0]={layouts:n};else if(i){for(d=0;d<this.getData("ageindays").length;d++)this.getData("ageindays")[d].system==i&&this.setData("selectedAgeInDays",this.getData("ageindays")[d]);p[0]=n}else this.getData("betweenCond")?p=n:"text"==this.getData("elementsCond")&&"object"==typeof n?p[0]=n&&n.join(","):"role"!=this.data.elementsCond||Array.isArray(n)?this.getData("noneCondition")||(p[0]=n):p[0]=[].concat(n);this.setData("value",p)}},changeConditionFunction:function(){this.setData("noneCondition",!0),this.getData("selectCond");var e,t,o=null;if("None"==(e=(t=this.getData("selectedComparator")).system))this.setData("disableText","");else if("${EMPTY}"==e)this.setData("noneCondition",!0),this.setData("disableText","${EMPTY}"),e="equal",o="${EMPTY}";else if("${NOTEMPTY}"==e)this.setData("noneCondition",!0),this.setData("disableText","${NOTEMPTY}"),e="not_equal",o="${EMPTY}";else if("between"==e||"not_between"==e)this.setData("noneCondition",!1),this.setData("betweenCond",!0);else if(e.match("{")){this.setData("noneCondition",!0);var a="Call_Status"==this.data.selectedField.api_name?t.display:t.system;"${OPEN}"==a?a="${"+_cruxUtils.getI18n("crm.potential.all.open")+"}":"${CLOSEDWON}"==a?a="${"+_cruxUtils.getI18n("crm.potential.all.won")+"}":"${CLOSEDLOST}"==a&&(a="${"+_cruxUtils.getI18n("crm.potential.all.lost")+"}"),this.setData("disableText",a),e="equal",o=t.system}else"Age in Days"==e?(this.setData("noneCondition",!1),this.setData("ageindays",this.executeMethod("setConditions","ageInDays")),this.setData("selectedAgeInDays",this.getData("ageindays")[0]),this.setData("ageInDaysCond",!0),this.setData("ageInDays",!0)):"Due in Days"==e?(this.setData("noneCondition",!1),this.setData("ageindays",this.executeMethod("setConditions","ageInDays")),this.setData("selectedAgeInDays",this.getData("ageindays")[0]),this.setData("ageInDaysCond",!0),this.setData("dueInDays",!0)):"Number of Characters"==e?(this.setData("noneCondition",!1),this.setData("ageindays",this.executeMethod("setConditions","ageInDays")),this.setData("selectedAgeInDays",this.getData("ageindays")[0]),this.setData("ageInDaysCond",!0),this.setData("nocCondition",!0)):this.setData("noneCondition",!1);this.setData("fcomp",e),this.setData("fvalue",o)},changeFieldFunction:function(e,t){this.data.selectedField&&this.data.selectedField.module&&this.data.selectedField.module.length>0&&this.setData("module","Activities"==this.data.selectedField.module[0].module_name&&this.data.selectedField.api_name.match(/Tag/)?this.data.selectedField.sub_module.api_name:this.data.selectedField.module[0].module_name);var o=this.getData("selectedField").data_type,a=this.getData("selectedField").api_name;"formula"==o&&(o=this.getData("selectedField").formula.return_type),this.setData("maxLen",void 0);var r="default",i="text";switch(o){case"none":r="none",i="none";break;case"text":case"email":case"phone":case"website":case"textarea":case"autonumber":r="text",i="text",this.setData("maxLen",this.data.textMaxLength);break;case"multiselectpicklist":i="text",r="multiselectpicklist";break;case"currency":case"double":case"integer":case"bigint":r="number",i="number",this.setData("maxLen",19);break;case"datetime":r="date",i="date-time";break;case"date":r="date",i="date";break;case"boolean":r="boolean",i="boolean";break;case"ownerlookup":case"userlookup":r="user",i="user",this.setData("selectUser",!0);break;case"picklist":this.setData("pickList",!0),r="picklist",i="picklist",this.setData("maxLen",500);break;case"lookup":r="text",i="text",this.setData("maxLen",this.data.textMaxLength)}if(this.getData("numberFieldException").indexOf(this.getData("selectedField").api_name)>-1)r="number",i="number",this.setData("maxLen",19);else if(this.criteriaApiNameCheck(a,"Tag"))r="defWithEmpty",i="tag";else if(this.criteriaApiNameCheck(a,"Layout"))r="default",i="layout";else if(this.criteriaApiNameCheck(a,"Wizard"))r="default",i="layout";else if("lookup"==o&&(this.criteriaApiNameCheck(a,"role")||this.criteriaApiNameCheck(a,"Role")))r="default",i="role";else if(this.criteriaApiNameCheck(a,"profile"))this.setData("pickList",!1),r="default",i="role";else if(!this.criteriaApiNameCheck(a,"Call_Status")||"Activities"!=this.data.module&&"Calls"!=this.data.module)if(a.match(/Activity_Type/)&&"Activities"==this.data.module){r="default",i="picklist",this.setData("pickList",!0);var s=[{display_value:this.data.moduleRecordMapping.Tasks.plural_label,actual_value:this.data.moduleRecordMapping.Tasks.api_name},{display_value:this.data.moduleRecordMapping.Calls.plural_label,actual_value:this.data.moduleRecordMapping.Calls.api_name},{display_value:this.data.moduleRecordMapping.Events.plural_label,actual_value:this.data.moduleRecordMapping.Events.api_name}];this.data.selectedField.pick_list_values=s,this.data.selectedField.cxPropDisableExtraValue=!0}else"APPOINTMENTSTATUS"==this.getData("selectedField").column_name||"SERVICESTATUS"==this.getData("selectedField").column_name?r="default":!this.criteriaApiNameCheck(a,"Stage")||"Potentials"!=this.data.module&&"Deals"!=this.data.module||(r="stage");else r="cs";80==this.getData("selectedField").ui_type?r="numberWithOEmpty":137==this.getData("selectedField").ui_type?(this.setData("pickList",!0),r="picklist",i="picklist",this.setData("maxLen",500)):"Data_Source"==this.data.selectedField.api_name&&"picklist"==r&&(r="default"),this.getData("selectedField").crypt&&(r="number"==r&&"currency"!=this.getData("selectedField").data_type?"encryptNumber":"defEmpty"),this.setData("selectCond",r),this.setData("elementsCond",i),"none"==r?this.setData("showComparator",!0):this.setData("showComparator",!1),e?(this.setData("condArray",this.executeMethod("setConditions",r,void 0,this.data.selectedField)),this.setData("gotComparator",!0)):this.setData("condArray",this.executeMethod("setConditions",r,t,this.data.selectedField)),this.setData("selectedComparator",this.getData("condArray")[0]),this.changeConditionFunction()},changePrefixFunction:function(e){if(this.data.dynamicColumn){this.setData("showFieldsCriteria",!1);var t=this.executeMethod("getPrefixArray",e+1,this.getData("selectedArray"),this.getDeveloperArg(e,this.data.selectedArray));if(Lyte.arrayUtils(this.data.selectedArray,"splice",e+1,this.data.selectedArray.length-1),Lyte.arrayUtils(this.data.prefixArray,"splice",e+1,this.data.prefixArray.length-1),!t.endCriteria)if(t.showFields)this.setData("showFieldsCriteria",!0);else{this.criteriaFormat=t.criteriaFormat,Lyte.arrayUtils(this.data.prefixArray,"push",t);var o={};o.api_name=t.apiValue,o.comparator="equal",o.value={},o.value[t.systemValue]="-1",o.value[t.displayValue]="None",Lyte.arrayUtils(this.data.selectedArray,"push",o)}}this.hideDropdowns(e+1)},methods:{changeField:function(e,t,o,a){if(null!=t){var r=this.getData("fields")[a.getAttribute("index")];if(r&&this.data.selectedField.id==r.id)return;this.setData("noneCondition",!0),this.setData("showEmpty",!1),this.setData("selectUser",!1),this.setData("pickList",!1),this.setData("lookup",!1),this.setData("betweenCond",!1),this.setData("ageInDaysCond",!1),this.setData("value",void 0),this.setData("fcomp",void 0),this.getData("fields"),this.setData("selectedField",-1==t?{api_name:"None",data_type:"none",field_label:_cruxUtils.getI18n("None"),id:"-1"}:r),this.changeFieldFunction(!0),this.executeMethod("onFieldChangeCall",this.getData("criteriaIndex"),a.innerText,this.data.selectedField)}else this.executeMethod("onFieldChangeCall",this.getData("criteriaIndex"),a.innerText,{api_name:"None",data_type:"none",field_label:_cruxUtils.getI18n("None"),id:"-1"});try{o.$node.parentElement.querySelector(".cx_fieldDropdownLabel").focus()}catch(e){}},changeCondition:function(e,t,o,a){if(null!=t){var r=this.getData("condArray")[a.getAttribute("index")];if(this.data.selectedComparator==r)return;this.setData("noneCondition",!1),this.setData("betweenCond",!1),this.setData("ageInDaysCond",!1),this.setData("ageInDays",!1),this.setData("dueInDays",!1),this.setData("nocCondition",!1),this.setData("value",void 0),this.setData("fcomp",void 0),this.setData("selectedComparator",r),this.changeConditionFunction(),this.executeMethod("onOperatorChangeCall",this.getData("criteriaIndex"),a.innerText,this.data.selectedComparator)}else this.executeMethod("onOperatorChangeCall",this.getData("criteriaIndex"),a.innerText,this.data.selectedComparator);try{o.$node.parentElement.querySelector(".cx_compDropdownLabel").focus()}catch(e){}},changeValue:function(){this.executeMethod("onValueChangeCall",this.getData("criteriaIndex"),arguments[0])},onFieldSearch:function(e){var t=this.$node.querySelector(".cx_fieldsDropdown");t.ltProp("disabledList",[]),0==e.length?this.setData("emptyFieldShow",!0):this.setData("emptyFieldShow",!1),t.ltProp("disabledList",this.data.disabledListDropdown)},onConditionSearch:function(e){var t=this.$node.querySelector(".cx_compDropdown");t.ltProp("disabledList",[]),0==e.length?this.setData("emptyConditionShow",!0):this.setData("emptyConditionShow",!1),t.ltProp("disabledList",this.data.disabledListDropdown)},onPrefixSearch:function(e,t,o){var a=o.closest("lyte-drop-box").origindd;a.ltProp("disabledList",[]),0==t.length?Lyte.objectUtils(this.data.prefixArray[e],"add","emptyOptionsShow",!0):Lyte.objectUtils(this.data.prefixArray[e],"add","emptyOptionsShow",!1),a.ltProp("disabledList",this.data.disabledListDropdown)},onFieldDropdownShow:function(e,t){this.focusSearch(t),setTimeout(function(){this.setData("fieldDropdownUp",t.childComp.classList.contains("lyteDropdownUp"));try{this.moveIntoView(t.childComp.querySelector(".lyteDropdownSelection"),t.childComp)}catch(e){}}.bind(this),10),this.setData("fieldDropdownOpen",!0),this.executeMethod("onfieldDropdownOpen",t,this.data.criteriaIndex)},onConditionDropdownShow:function(e,t){this.focusSearch(t),setTimeout(function(){this.setData("condDropdownUp",t.childComp.classList.contains("lyteDropdownUp"))}.bind(this),10),this.setData("condDropdownOpen",!0),this.executeMethod("onconditionDropdownOpen",t,this.data.criteriaIndex)},fieldBeforeHide:function(e,t){this.setData("fieldDropdownOpen",!1),this.executeMethod("onfieldDropdownHide",t,this.data.criteriaIndex)},conditionBeforeHide:function(e,t){this.setData("condDropdownOpen",!1),this.executeMethod("onconditionDropdownHide",t,this.data.criteriaIndex)},onDropdownHide:function(e,t){t.$node.parentElement.contains(e.target)&&e.stopImmediatePropagation()},changeAgeInDaysCondition:function(e,t,o,a){this.setData("selectedAgeInDays",this.getData("ageindays")[a.getAttribute("index")]),this.executeMethod("onAgeInConditionChangeCall",this.getData("criteriaIndex"),a.innerText,this.getData("ageindays")[a.getAttribute("index")])},onFieldDropdownBeforeShow:function(e,t){var o=t.$node.ltProp("selected"),a=this,r=this.executeMethod("getFieldsForHeader",void 0,this.getData("criteriaIndex"),this.getData("prefixArray").length>0?this.getData("selectedArray"):void 0,this.getData("prefixArray").length>0?this.getDeveloperArg(this.getData("prefixArray").length-1,this.getData("selectedArray")):void 0);if(r instanceof Promise)this.setData("showFieldsLoading",!0),r.then((function(e){a.setData("fields",e),a.setData("showFieldsLoading",!1),a.focusSearch(t),t.$node.ltProp("selected",""),t.$node.ltProp("selected",o);try{this.moveIntoView(t.childComp.querySelector(".lyteDropdownSelection"),t.childComp)}catch(e){}}));else{if(!r)return!1;this.setData("fields",r)}t.$node.ltProp("selected",""),t.$node.ltProp("selected",o)},onConditionDropdownBeforeShow:function(e,t){this.getData("gotComparator")||this.setData("condArray",this.executeMethod("setConditions",this.getData("selectCond"),void 0,this.data.selectedField));var o=t.$node.ltProp("selected");t.$node.ltProp("selected",""),t.$node.ltProp("selected",o)},valueError:function(){return this._skipVal||this.executeMethod("onValueError",this.getData("criteriaIndex"),arguments[0]),!1},onPrefixDropdownBeforeShow:function(e,t,o){var a=o.$node.ltProp("selected"),r=this;(t=this.executeMethod("getPrefixValues",e,this.getData("selectedArray"),this.getDeveloperArg(e-1,this.data.selectedArray)))instanceof Promise?(Lyte.Component.set(this.getData("showArray"),this.getData("prefixArray")[e].apiValue,"Loading"),t.then((function(t){Lyte.Component.set(r.getData("showArray"),r.getData("prefixArray")[e].apiValue,t)}))):t.showRecords?(Lyte.Component.set(this.getData("showArray"),this.getData("prefixArray")[e].apiValue,"Loading"),store.findAll(this.data.moduleRecordMapping[t.module].id).then((function(t){Lyte.Component.set(r.getData("showArray"),r.getData("prefixArray")[e].apiValue,t)}))):Lyte.Component.set(this.getData("showArray"),this.getData("prefixArray")[e].apiValue,t),o.$node.ltProp("selected",""),o.$node.ltProp("selected",a)},onPrefixDropdownShow:function(e,t,o){this.focusSearch(o),setTimeout(function(){Lyte.Component.set(this.getData("prefixArray")[e],"dropdownOpenUp",o.childComp.classList.contains("lyteDropdownUp"))}.bind(this),10),Lyte.Component.set(this.getData("prefixArray")[e],"dropdownOpen",!0)},prefixBeforeHide:function(e){Lyte.Component.set(this.getData("prefixArray")[e],"dropdownOpen",!1)},changePrefixOption:function(e,t,o,a,r){var i=this.getData("prefixArray")[e],s=this;if("module"==i.apiValue&&-1!=o&&this.setData("module",this.getData("showArray")[i.apiValue][r.getAttribute("index")].lookup?this.getModuleFromApiName(s.getData("showArray")[i.apiValue][r.getAttribute("index")].lookup.module.api_name,this.data.moduleRecordMapping):this.getData("showArray")[i.apiValue][r.getAttribute("index")].module_name?this.getData("showArray")[i.apiValue][r.getAttribute("index")].module_name:this.getData("showArray")[i.apiValue][r.getAttribute("index")][i.systemValue]),-1!=o){var l={api_name:i.apiValue,comparator:"equal",value:this.getData("showArray")[i.apiValue][arguments[4].getAttribute("index")]};this.getData("selectedArray")[e]?Lyte.arrayUtils(this.getData("selectedArray"),"replaceAt",e,l):Lyte.arrayUtils(this.getData("selectedArray"),"insertAt",e,l),this.changePrefixFunction(e)}else{var n={};n[i.systemValue]="-1",n[i.displayValue]=_cruxUtils.getI18n("None"),l={api_name:i.apiValue,comparator:"equal",value:n},this.getData("selectedArray")[e]?Lyte.arrayUtils(this.getData("selectedArray"),"replaceAt",e,l):Lyte.arrayUtils(this.getData("selectedArray"),"insertAt",e,l),this.hideDropdowns(e)}this.executeMethod("getPrefixValues",this.getData("prefixArray")[e+1]?e+1:-1,this.getData("selectedArray"),this.getDeveloperArg(e,this.data.selectedArray),!0);try{a.$node.parentElement.querySelector(".cx_prefixDropdownLabel").focus()}catch(e){}}},actions:{createNewCriteria:function(){this.throwEvent("createNewCriteria")},removeCriteria:function(){this.throwEvent("removeCriteria",this.getData("criteriaIndex"))},changeAndOr:function(){this.throwEvent("changeAndOr",this.getData("andOrCondition"),this.getData("criteriaIndex"))},showFieldsDropdown:function(){this.setData("showFieldsDropdown",!0),this.$node.querySelector(".cx_fieldsDropdown").toggle()},showComparatorDropdown:function(){this.setData("showComparatorDropdown",!0),this.$node.querySelector(".cx_compDropdown").toggle()},showPrefixDropdown:function(e){Lyte.Component.set(this.getData("prefixArray")[e],"showDropdown",!0),this.$node.querySelector(".cx_PrefixDropdown"+this.getData("prefixArray")[e].apiValue).toggle()},keyUpDropdown:function(e,t){32==t.keyCode&&(t.stopImmediatePropagation(),e.classList.contains("lyteDropdown-disabled")||e.click())}},getDeveloperArg:function(e,t){for(var o={},a="",r=0;r<=e;r++)o[t[r].api_name]=t[r].value,a=a+t[r].value[this.data.prefixArray[r].systemValue]+".";return[o,a]},focusSearch:function(e){var t=e.childComp.querySelector("lyte-search");t&&(t.setValue(""),t.querySelector("input").focus())},moveIntoView:function(e,t){t=t.querySelector("lyte-drop-body"),containerScrollTop=t.scrollTop,elementTop=e.offsetTop,containerHeight=t.offsetHeight,elementTop<=containerScrollTop?t.scrollTop=elementTop-containerHeight/2:elementTop>=containerScrollTop+containerHeight&&(t.scrollTop=elementTop+e.offsetHeight-containerHeight/2)},selectedFieldObbserver:function(){var e=this.$node.querySelector(".cx_fieldDropdownLabel span");e&&this.setData("showFieldInTitle",e.scrollWidth>e.offsetWidth)}.observes("selectedField.field_label"),prefixArrayObserver:function(){this.data.dynamicColumn||this.hideDropdowns(0)}.observes("prefixArray.[]")},{mixins:["crux-criteria-util"]}),Lyte.Component.register("crux-criteria-editor-view-header",{_template:'<template tag-name="crux-criteria-editor-view-header"> <div class="criteriaTd"> <span class="color_3 pR10 cxCriteriaViewIndexSpan" data-zcqa="criteria_view_patternnum_{{criteriaIndex}}">{{criteriaIndex}}</span> </div> <template is="if" value="{{showComparator}}"><template case="true"> <div class="criteriaTd"> <template is="if" value="{{expHandlers(totalCriteria,\'>\',1)}}"><template case="true"> <span class="alignleft andOrConditionView dIB" data-zcqa="criteria_view_cond_{{criteriaIndex}}">{{andOrCondition}}</span> </template></template> </div> </template></template> <div class="criteriaTd cxCriteriaViewDataColumn"> <template is="for" items="{{prefixArray}}" item="item" index="index"> <span class="colorSpan" data-zcqa="criteria_view_{{item.apiValue}}_{{criteriaIndex}}">{{selectedArray[index].value[item.displayValue]}}</span> <span class="mLR5">.</span> </template> <span class="colorSpan" data-zcqa="criteria_view_field_{{criteriaIndex}}">{{field}}</span> <span class="mLR5" data-zcqa="criteria_view_comp_{{criteriaIndex}}">{{captialize(condition)}}</span> <span class="colorSpan {{if(currencyClass,\'cxCriteriaViewCurrencyValue\')}} {{if(setClassForValue,\'cxCriteriaViewNumberField\')}}" data-zcqa="criteria_view_value_{{criteriaIndex}}">{{value}}</span> </div> </template>',_dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[5,1]},{type:"for",position:[5,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]},{type:"attr",position:[5,3]},{type:"text",position:[5,3,0]},{type:"attr",position:[5,5]},{type:"text",position:[5,5,0]},{type:"attr",position:[5,7]},{type:"text",position:[5,7,0]}],_observedAttributes:["criteria","field","condition","value","andOrCondition","module","criteriaIndex","fields","selectedField","selectedCondition","pickList","selectUser","lookup","callModule","lookupField","tagComponent","layoutComponent","totalCriteria","numberFieldException","moduleMapping","currencyProperties","currencyClass","showComparator"],data:function(){return{criteria:Lyte.attr("object"),field:Lyte.attr("string"),condition:Lyte.attr("string"),value:Lyte.attr("string"),andOrCondition:Lyte.attr("string"),module:Lyte.attr("string"),criteriaIndex:Lyte.attr("string"),fields:Lyte.attr("array"),selectedField:Lyte.attr("object"),selectedCondition:Lyte.attr("array"),pickList:Lyte.attr("boolean",{default:!1}),selectUser:Lyte.attr("boolean",{default:!1}),lookup:Lyte.attr("boolean",{default:!1}),callModule:Lyte.attr("boolean",{default:!1}),lookupField:Lyte.attr("boolean",{default:!1}),tagComponent:Lyte.attr("boolean",{default:!1}),layoutComponent:Lyte.attr("boolean",{default:!1}),totalCriteria:Lyte.attr("number"),numberFieldException:Lyte.attr("array",{default:["SOLUTIONNUMBER","INVOICENUMBER","SONUMBER","QUOTENUMBER","CASENUMBER"]}),moduleMapping:Lyte.attr("array"),currencyProperties:Lyte.attr("object"),currencyClass:Lyte.attr("boolean",{default:!1}),showComparator:Lyte.attr("boolean")}},init:function(){this.onGetCriteria()},onGetCriteria:function(){this.getData("criteria")&&Object.keys(this.getData("criteria")).length>0&&this.setViewCriteriaObj(this.getData("criteria"))},setViewCriteriaObj:function(e){var t=[];if(null==e.field?t=this.getCriteriaArray(e,[]):t.push(e),this.data.prefixArray.length>0){var o=this.getModuleFromCriteria(t[t.length-1]);t.splice(t.length-1,1),t=t.concat(o)}var a,r,i,s=t.pop();this.executeMethod("setFieldForCriteria",s),this.setData("selectedArray",t);var l=s.comparator,n=s.value;switch(this.setData("selectUser",!1),this.setData("pickList",!1),this.setData("tagComponent",!1),this.setData("layoutComponent",!1),this.setData("selectedField",s.field),a=s.field.api_name,"formula"==(r=s.field.data_type)&&(r=this.getData("selectedField").formula.return_type),select="default",r){case"none":select="none";break;case"text":case"email":case"phone":case"website":case"textarea":case"autonumber":select="text";break;case"multiselectpicklist":select="multiselectpicklist";break;case"currency":case"double":case"integer":case"bigint":case"decimal":select="number";break;case"datetime":select="date-time";break;case"date":select="date";break;case"boolean":select="boolean";break;case"ownerlookup":case"userlookup":select="user",this.setData("selectUser",!0);break;case"picklist":this.setData("pickList",!0),select="picklist",this.setData("selectedFieldPicklist",this.getData("selectedField").pick_list_values);break;case"lookup":select="text"}if(this.getData("numberFieldException").indexOf(this.getData("selectedField").api_name)>-1?(select="number",elementsCond="number"):Lyte.registeredMixins["crux-criteria-util"].criteriaApiNameCheck(a,"Tag")&&(this.setData("tagComponent",!0),select="defWithEmpty",this.setData("showEmpty",!0)),Lyte.registeredMixins["crux-criteria-util"].criteriaApiNameCheck(a,"Layout")?(this.setData("layoutComponent",!0),select="default",this.setData("showEmpty",!0)):Lyte.registeredMixins["crux-criteria-util"].criteriaApiNameCheck(a,"Wizard")?(select="default",this.setData("layoutComponent",!0),this.setData("showEmpty",!0)):Lyte.registeredMixins["crux-criteria-util"].criteriaApiNameCheck(a,"role")||Lyte.registeredMixins["crux-criteria-util"].criteriaApiNameCheck(a,"Role")?(select="default",this.setData("layoutComponent",!0)):Lyte.registeredMixins["crux-criteria-util"].criteriaApiNameCheck(a,"profile")?(select="default",this.setData("pickList",!1),this.setData("layoutComponent",!0)):!Lyte.registeredMixins["crux-criteria-util"].criteriaApiNameCheck(a,"Call_Status")||"Activities"!=this.data.selectedField.module[0].module_name&&"Calls"!=this.data.selectedField.module[0].module_name?a.match(/Activity_Type/)&&"Activities"==this.data.module?(select="default",this.setData("pickList",!0)):"APPOINTMENTSTATUS"==this.getData("selectedField").column_name||"SERVICESTATUS"==this.getData("selectedField").column_name?select="default":a.match(/Stage/)&&(select="stage"):select="cs",this.setData("selectedCondition",this.executeMethod("setConditions","date-time"==select?"date":select)),"string"==typeof n&&(n.match(/AGEIN/g)||n.match(/DUEIN/g)||n.match("NOC"))){i=l;for(var p=this.executeMethod("setConditions","ageInDays"),c=0;c<p.length;c++)if(p[c].system==i){i=p[c].display;break}n.match(/DUEIN/g)?l="Due in Days":n.match(/AGEIN/g)?l="Age in Days":n.match("NOC")&&(l="Number of Characters"),n=i+" "+(n=n.replace(/\D/g,"")),select=""}var d=l;for("string"!=typeof n||"${EMPTY}"!=n&&"${NOTEMPTY}"!=n&&"${OPEN}"!=n&&"${CLOSEDWON}"!=n&&"${CLOSEDLOST}"!=n||(l="equal"==l&&"${EMPTY}"==n?"${EMPTY}":"${EMPTY}"==n||"${NOTEMPTY}"==n?"${NOTEMPTY}":n,n="",select="",r="",this.setData("selectUser",!1),this.setData("pickList",!1),this.setData("lookup",!1),this.setData("tagComponent",!1),this.setData("layoutComponent",!1)),c=0;c<this.getData("selectedCondition").length;c++)if(l==this.getData("selectedCondition")[c].system){l=this.getData("selectedCondition")[c].display;break}if("string"==typeof n&&n.match(/{/)){for("cs"==select&&(l=_cruxUtils.getI18n("is")),c=0;c<this.getData("selectedCondition").length;c++)if(n==this.getData("selectedCondition")[c].system){n=this.getData("selectedCondition")[c].display;break}select=""}if(d.match(/between/)&&("date-time"==select?n=this.getDateTime(n[0])+" - "+this.getDateTime(n[1]):"date"==select?n=this.getDate(n[0])+" - "+this.getDate(n[1]):(s.field.separator&&"undefined"!=typeof Search&&(this.setData("setClassForValue",!0),n[0]=Search.formatNumber(n[0]),n[1]=Search.formatNumber(n[1])),"currency"==r&&this.data.currencyProperties.baseCurrency&&this.data.currencyProperties.baseCurrency.length>0?(this.setData("currencyClass",!0),n=this.data.currencyProperties.baseCurrency+"  "+n[0]+" - "+this.data.currencyProperties.baseCurrency+"  "+n[1],r=""):n=n[0]+" - "+n[1]),select=""),"date-time"==select)if("string"==typeof n&&n.match(/{/)){for(c=0;c<this.getData("selectedCondition").length;c++)if(n==this.getData("selectedCondition")[c].system){n=this.getData("selectedCondition")[c].display;break}}else n=this.getDateTime(n);if("date"==select)if("string"==typeof n&&n.match(/{/)){for(c=0;c<this.getData("selectedCondition").length;c++)if(n==this.getData("selectedCondition")[c].system){n=this.getData("selectedCondition")[c].display;break}}else n=this.getDate(n);if("boolean"==select&&(n=0==n?_cruxUtils.getI18n("crm.label.notSelected"):_cruxUtils.getI18n("crm.label.selected")),this.getData("pickList")||"multiselectpicklist"==select){if(137==this.data.selectedField.ui_type){var u=[];if(Array.isArray(n))for(c=0;c<n.length;c++)n[c].api_name?u[c]=n[c].api_name:u[c]=n[c];else n.api_name?u[0]=n.api_name:u[0]=n;if(n=u,u=[],Array.isArray(n))for(c=0;c<n.length;c++){var h;(h=Object.values(moduleRecordMapping).filter((function(e){return e.api_name==n[c]})))[0]?u.push(h[0].plural_label):u.push(n[c])}else(h=Object.values(moduleRecordMapping).filter((function(e){return e.api_name==n})))[0]?u.push(h[0].plural_label):u.push(n);n=u}if(a.match(/Activity_Type/)&&"Activities"==this.data.module)if(Array.isArray(n)){for(u=[],c=0;c<n.length;c++)u.push(moduleRecordMapping[n[c]].plural_label);n=u}else n=moduleRecordMapping[n].plural_label;"string"!=typeof n&&(n=n.join(", "))}if(this.getData("selectUser")){var m=[];if(n.hasOwnProperty("name"))"${CURRENTUSER}"==n.name?m[0]=_cruxUtils.getI18n("current.logged.in.user"):m[0]=n.name;else for(c=0;c<n.length;c++)"${CURRENTUSER}"==n[c].name?m.push(_cruxUtils.getI18n("current.logged.in.user")):m.push(n[c].name);n=m.join(", ")}if(this.getData("tagComponent")){if(m=[],n.hasOwnProperty("id"))m[0]=n.name;else for(c=0;c<n.length;c++)m.push(n[c].name);n=m.join(", ")}if(this.getData("layoutComponent")){if(m=[],n.hasOwnProperty("id"))m[0]=n.name;else for(c=0;c<n.length;c++)m.push(n[c].name);n=m.join(", ")}"text"==select&&"object"==typeof n&&(n=n.join(", ")),"number"==select&&s.field.separator&&"undefined"!=typeof Search&&(this.setData("setClassForValue",!0),n=Search.formatNumber(n)),"currency"==r&&this.data.currencyProperties.baseCurrency&&this.data.currencyProperties.baseCurrency.length>0&&(this.setData("currencyClass",!0),n=this.data.currencyProperties.baseCurrency+"  "+n),this.setData("field",s.field.field_label),this.setData("condition",l),this.setData("value",n)},observeCriteria:function(){this.onGetCriteria()}.observes("criteria"),getDateTime:function(e){var t=(e=e.replace(/[+-]\d{2}:\d{2}/,"")).split("-"),o=new Date(t[0],t[1]-1,t[2].split("T")[0]),a=(e=e.split("T"))[1].split(":");o.setHours(a[0]),o.setMinutes(a[1]),this.setData("cxPropDatePattern",this.data.datePattern),this.setData("cxPropTimeFormatInput",this.data.timeFormat.indexOf("a")>0?"12":"24");var r=this.getDateTimeInUserFormat(o),i=r.slice(0,3);return r.replace(i,_cruxUtils.getI18n(i))},getDate:function(e){e=e.replace(/[+-]\d{2}:\d{2}/,""),this.setData("cxPropDatePattern",this.data.datePattern);var t=this.getDateInUserDatePattern(e),o=t.slice(0,3);return t.replace(o,_cruxUtils.getI18n(o))}},{mixins:["crux-criteria-util","crux-element-validation"]}),Lyte.Component.register("crux-criteria-pattern",{_template:'<template tag-name="crux-criteria-pattern"> <span class="cxGroupPattern"> <span class="cxPatternBrakets prevent">(</span> <template is="if" value="{{cruxHasProperty(patternNode,\'group_operator\')}}"><template case="true"> <template is="if" value="{{cruxHasProperty(patternNode.group[0],\'group_operator\')}}"><template case="true"> <crux-criteria-pattern class="prevent" pattern-node="{{patternNode.group[0]}}" pattern-array="{{patternArray}}"></crux-criteria-pattern> </template><template case="false"> <span class="cxCritPtnNum" data-value="{{patternNode.group[0]}}">{{getNodeValue(patternArray,patternNode.group[0])}}</span> </template></template> <span class="cP criteriaCondition" onclick="{{action(\'changePatternCondition\')}}">{{cruxGetI18n(patternNode.group_operator)}}</span> <template is="if" value="{{cruxHasProperty(patternNode.group[1],\'group_operator\')}}"><template case="true"> <crux-criteria-pattern class="prevent" pattern-node="{{patternNode.group[1]}}" pattern-array="{{patternArray}}"></crux-criteria-pattern> </template><template case="false"> <span class="cxCritPtnNum" data-value="{{patternNode.group[1]}}">{{getNodeValue(patternArray,patternNode.group[1])}}</span> </template></template> </template></template> <span class="cxPatternBrakets prevent">)</span> </span> </template>',_dynamicNodes:[{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3]},{type:"text",position:[3,0]},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}}]}},default:{}}],_observedAttributes:["patternNode","patternArray"],data:function(){return{patternNode:Lyte.attr("object"),patternArray:Lyte.attr("array")}},actions:{changePatternCondition:function(){Lyte.Component.set(this.data.patternNode,"group_operator","or"==this.data.patternNode.group_operator?"and":"or")}}}),Lyte.Component.register("crux-pattern-editor",{_template:'<template tag-name="crux-pattern-editor"> <crux-criteria-pattern class="prevent" pattern-node="{{editPatternNode}}" pattern-array="{{cxPropPatternArray}}"></crux-criteria-pattern> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}],_observedAttributes:["cxPropPattern","cxPropPatternArray","editPatternNode"],data:function(){return{cxPropPattern:Lyte.attr("string"),cxPropPatternArray:Lyte.attr("array"),editPatternNode:Lyte.attr("object")}},init:function(){this.$node.getPattern=function(){return this.component.getPattern()},this.$node.clearPattern=function(){return this.component.data.bufferPattern},this.setData("bufferPattern",this.data.cxPropPattern);var e=this.formCriteriaTree(this.data.cxPropPattern);this.setData("editPatternNode",e)},didConnect:function(){this.sortableEditPattern()},formCriteriaTree:function(e){e=(e=(e=(e=e.replace(/ /g,"")).replace(/and/g,"+").replace(/or/g,"-")).replace(/[0-9]/g,"#")).replace(/##/g,"#");for(var t=[],o=[],a=[],r=0,i=0,s=1;i<e.length;i++)"("==e[i]?(t.push(e[i]),r=0):"+"==e[i]||"-"==e[i]?o.push(e[i]):")"==e[i]?a.length>1&&(t.pop(),(l=[]).push(a.pop()),l.push(a.pop()),l.reverse(),"+"==(n=o.pop())?n="and":"-"==n&&(n="or"),a.push({group_operator:n,group:l}),r=1):(a.push(s++),r++),2==a.length&&2==r&&((l=[]).push(a.pop()),l.push(a.pop()),l.reverse(),"+"==(n=o.pop())?n="and":"-"==n&&(n="or"),a.push({group_operator:n,group:l}),r=1);for(;0!=o.length;){var l,n;(l=[]).push(a.shift()),l.push(a.shift()),"+"==(n=o.shift())?n="and":"-"==n&&(n="or"),a.unshift({group_operator:n,group:l})}return a[0]},getPattern:function(e){var t=e||JSON.parse(JSON.stringify(this.data.editPatternNode)),o=this,a=new function e(t,o){t.group_operator?(this.left=new e(t.group[0],o),this.right=new e(t.group[1],o),this.value=t.group_operator.trim().toLowerCase()):(o.push(parseInt(t)),this.value=parseInt(t),this.left=null,this.right=null),this.criteria=o}(t,[]),r=this.addSpaceBetweenParanthesis(this.inorder(a,""));return o.data.cxPropPatternArray&&(r=r.replace(/\d{1,2}/g,(function(e){return o.data.cxPropPatternArray[e-1]}))),r},sortableEditPattern:function(){var e=this;$L(".cxGroupPattern",this.$node).sortable({connectedWith:".cxGroupPattern",restrict:".prevent",onBeforeDrop:function(t,o,a,r,i,s,l){if($L(e.$node).find(".criteriaHide").removeClass("criteriaHide"),o.classList.contains("cxCritPtnNum")){var n=t.getAttribute("data-value"),p=o.getAttribute("data-value"),c=e.removeCriteriaFromTree(e.data.editPatternNode,n),d=e.addCriteriaToTree(c,p,n);e.setData("editPatternNode",d),e.sortableEditPattern()}else o.classList.contains("criteriaCondition")?(n=t.getAttribute("data-value"),p=o.parentElement.parentElement.component.data.patternNode,c=e.removeCriteriaFromTree(e.data.editPatternNode,n),d=e.addCriteriaToTree(c,p,n),e.setData("editPatternNode",d),e.sortableEditPattern()):t.classList.remove("wrongPlace");return t.classList.remove("cxCursorGrab"),$L(e.$node).find(".cxCritSortBottomElem").removeClass("cxCritSortBottomElem"),!1},onSelect:function(e,t){return!(e.classList.contains("prevent")||e.classList.contains("criteriaCondition"))},onDragStart:function(e,t){e.classList.add("cxCursorGrab"),e.previousElementSibling.classList.contains("criteriaCondition")?e.previousElementSibling.classList.add("criteriaHide"):"TEMPLATE"==e.nextElementSibling.nodeName?e.nextElementSibling.nextElementSibling.classList.add("criteriaHide"):e.nextElementSibling.classList.add("criteriaHide")},onDrag:function(t,o){var a=e.$node.querySelector(".cxCritSortBottomElem");e.$node.querySelector("lyte-hovercard"),Lyte.deepCopyObject(e.data.editPatternNode),o?o.classList.contains("cxCritPtnNum")?(a!=o&&(o.classList.add("cxCritSortBottomElem"),a&&a.classList.remove("cxCritSortBottomElem")),t.classList.remove("wrongPlace")):o.classList.contains("criteriaCondition")?(a!=o.parentElement&&(o.parentElement.classList.add("cxCritSortBottomElem"),a&&a.classList.remove("cxCritSortBottomElem")),t.classList.remove("wrongPlace")):(a&&a.classList.remove("cxCritSortBottomElem"),t.classList.add("wrongPlace")):(a&&a.classList.remove("cxCritSortBottomElem"),t.classList.add("wrongPlace"))}})},removeCriteriaFromTree:function(e,t){if(e.group_operator){if(e.group[0].group_operator&&e.group[0]!=t)Lyte.arrayUtils(e.group,"replaceAt",0,this.removeCriteriaFromTree(e.group[0],t));else if(e.group[0]==t)return e.group[1];if(e.group[1].group_operator&&e.group[1]!=t)Lyte.arrayUtils(e.group,"replaceAt",1,this.removeCriteriaFromTree(e.group[1],t));else if(e.group[1]==t)return e.group[0]}return e},addCriteriaToTree:function(e,t,o){if(e.group_operator&&JSON.stringify(e)!=JSON.stringify(t)){if(e.group[0].group_operator&&e.group[0]!=t)Lyte.arrayUtils(e.group,"replaceAt",0,this.addCriteriaToTree(e.group[0],t,o));else if(e.group[0]==t){var a=[];o>t?(a[0]=t,a[1]=o):(a[1]=t,a[0]=o),Lyte.arrayUtils(e.group,"replaceAt",0,{group_operator:"and",group:a})}e.group[1].group_operator&&e.group[1]!=t?Lyte.arrayUtils(e.group,"replaceAt",1,this.addCriteriaToTree(e.group[1],t,o)):e.group[1]==t&&(a=[],o>t?(a[0]=t,a[1]=o):(a[1]=t,a[0]=o),Lyte.arrayUtils(e.group,"replaceAt",1,{group_operator:"and",group:a}))}else JSON.stringify(e),JSON.stringify(t),e={},(a=[])[0]=t,a[1]=o,Lyte.Component.set(e,"group_operator","and"),Lyte.Component.set(e,"group",a);return e}},{mixins:["crux-criteria-util"]}),Lyte.Component.registerHelper("getNodeValue",(function(e,t){return t?e?e[t-1]:t:""})),Lyte.Component.register("lyte-progressbar",{_template:'<template tag-name="lyte-progressbar"> <template is="if" value="{{lyteUiIfEquals(ltPropType,\'circle\')}}"><template case="true"> <div class="lyteProgressBar lyteCircle" style="{{lyteUiConcat(\'width:\',lyteUiSetWH(ltPropRadius),\'px; height:\',lyteUiSetWH(ltPropRadius),\'px;\')}}"> <div class="lyteCircleType"> <svg class="svgValueEle" width="{{lyteUiSetWH(ltPropRadius)}}" height="{{lyteUiSetWH(ltPropRadius)}}"> <circle style="{{lyteUiConcat(\'transition:\',\'stroke-dashoffset \',duration,\' \',timingfn,\';\')}}" cx="{{ltPropRadius}}" cy="{{ltPropRadius}}" r="{{lyteUiSetRadius(ltPropRadius,ltPropStroke)}}" fill="none" stroke="#DCE0E3" stroke-width="{{ltPropStroke}}"></circle> <circle style="{{lyteUiConcat(\'transition:\',\'stroke-dashoffset \',duration,\' \',timingfn,\';\')}}" cx="{{ltPropRadius}}" cy="{{ltPropRadius}}" r="{{lyteUiSetRadius(ltPropRadius,ltPropStroke)}}" fill="none" stroke="{{ltPropBackground}}" stroke-width="{{ltPropStroke}}" stroke-dasharray="{{lyteUiSetDashArray(ltPropRadius,ltPropStroke)}}" stroke-dashoffset="{{lyteUiSetOffset(ltPropRadius,ltPropStroke,percentage)}}"></circle> </svg> <template is="if" value="{{ltPropShowPercentage}}"><template case="true"> <svg width="{{lyteUiSetWH(ltPropRadius)}}" height="{{lyteUiSetWH(ltPropRadius)}}" style="transform:{{lyteUiTextTransform(ltPropRadius)}}" viewBox="{{lyteUiConcat(\'0 \',\'0 \',lyteUiSetWH(ltPropRadius),\' \',lyteUiSetWH(ltPropRadius))}}" fill="{{if(ltPropLabelColor,ltPropLabelColor,\'#333\')}}"> <text font-size="{{if(ltPropFontSize,ltPropFontSize,\'1.5rem\')}}" text-anchor="middle" dy=".2em" x="50%" y="50%"> {{lyteUiProgressbarLabel(ltPropLabel,percentageDisplay,ltPropPercentage)}} </text> </svg> </template></template> </div> </div> </template><template case="false"><template is="if" value="{{lyteUiIfEquals(ltPropType,\'stacked\')}}"><template case="true"> <div class="{{lyteUiConcat(\'lyteProgressBar\',\' lyteHorizontal\',\' lyteStacked\')}} " style="{{lyteUiConcat(\'width:\',ltPropWidth,\';height:\',ltPropHeight)}}"> <template is="for" items="{{chunks}}" item="item" index="index"> <span class="lyteProgressStatusStack" style="{{lyteUiConcat(\'width: \',\'0% ;\',\'transition: \',\'width \',duration,\' \',timingfn,\';\',\'background:\',lyteUiGetStackValue(ltPropStack,index,\'color\'),\';\')}}"> <template is="if" value="{{lyteUiGetStackValue(ltPropStack,index,\'animated\')}}"><template case="true"> <span class="ltPropProgressAnimated progressMovingObj"></span> </template></template> <template is="if" value="{{ltPropShowPercentage}}"><template case="true"> <span case="true" class="lyteProgressPercentageStack" style="{{lyteUiConcat(\'line-height:\',ltPropHeight,\'; font-size: \',if(ltPropFontSize,ltPropFontSize,\'12px\'),\'; color: \',if(lyteUiGetStackValue(ltPropStack,index,\'labelColor\'),lyteUiGetStackValue(ltPropStack,index,\'labelColor\'),\'#fff\'),\';\')}}"> {{lyteUiProgressbarLabel(lyteUiGetStackValue(ltPropStack,index,\'label\'),\'\')}} </span> </template></template> </span> </template> </div> </template><template case="false"><template is="if" value="{{lyteUiIfEquals(ltPropType,\'vertical\')}}"><template case="true"> <div class="lyteProgressBar lyteVertical" style="{{lyteUiConcat(\'width:\',ltPropWidth,\';height:\',ltPropHeight)}}"> <span class="{{lyteUiConcat(\'lyteProgressStatusVertical \',ltPropDirection)}}" style="{{lyteUiConcat(\'height: \',percentage,\'% ;\',\'transition:\',\'height \',duration,\' \',timingfn,\';\',\'background: \',ltPropBackground,\';\',\'display: block\')}}"> <template is="if" value="{{ltPropShowPercentage}}"><template case="true"> <span case="true" class="lyteProgressPercentage" style="{{lyteUiConcat(\'line-height:\',ltPropHeight,\'; font-size: \',if(ltPropFontSize,ltPropFontSize,\'12px\'),\'; color: \',if(ltPropLabelColor,ltPropLabelColor,\'#fff\'),\';\')}}"> {{lyteUiProgressbarLabel(ltPropLabel,percentageDisplay,ltPropPercentage)}} </span> </template></template> </span> </div> </template><template case="false"> <div class="{{lyteUiConcat(\'lyteProgressBar\',\' lyteHorizontal\',if(ltPropIndeterminate,\' lyteIndeterminate\',\'\'))}} " style="{{lyteUiConcat(\'width:\',ltPropWidth,\';height:\',ltPropHeight)}}"> <template is="if" value="{{expHandlers(expHandlers(ltPropAnimated,\'!\'),\'&amp;&amp;\',ltPropIndeterminate)}}"><template case="true"> <span class="inc" style="{{lyteUiConcat(\'position: absolute; height: 100%; background: \',ltPropProgressFillColor)}}"></span> <span class="dec" style="{{lyteUiConcat(\'position: absolute; height: 100%; background: \',ltPropProgressFillColor)}}"></span> </template><template case="false"> <span class="lyteProgressStatus" style="{{lyteUiConcat(\'width: \',percentage,\'% ;\',\'transition: \',\'width \',duration,\' \',timingfn,\';\',\'background:\',ltPropBackground)}}"> <template is="if" value="{{ltPropAnimated}}"><template case="true"> <span class="ltPropProgressAnimated progressMovingObj"></span> </template></template> <template is="if" value="{{expHandlers(expHandlers(ltPropIndeterminate,\'!\'),\'&amp;&amp;\',ltPropShowPercentage)}}"><template case="true"> <span case="true" class="lyteProgressPercentage" style="{{lyteUiConcat(\'line-height:\',ltPropHeight,\'; font-size: \',if(ltPropFontSize,ltPropFontSize,\'12px\'),\'; color: \',if(ltPropLabelColor,ltPropLabelColor,\'#fff\'),\';\')}}"> {{lyteUiProgressbarLabel(ltPropLabel,percentageDisplay,ltPropPercentage)}} </span> </template></template> </span> </template></template> </div> </template></template></template></template></template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"lyteUiConcat",args:["'width:'",{type:"helper",value:{name:"lyteUiSetWH",args:["ltPropRadius"]}},"'px; height:'",{type:"helper",value:{name:"lyteUiSetWH",args:["ltPropRadius"]}},"'px;'"]}}}},{type:"attr",position:[1,1,1]},{type:"attr",position:[1,1,1,1],attr:{style:{name:"style",helperInfo:{name:"lyteUiConcat",args:["'transition:'","'stroke-dashoffset '","duration","' '","timingfn","';'"]}}}},{type:"attr",position:[1,1,1,3],attr:{style:{name:"style",helperInfo:{name:"lyteUiConcat",args:["'transition:'","'stroke-dashoffset '","duration","' '","timingfn","';'"]}}}},{type:"attr",position:[1,1,3]},{type:"if",position:[1,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["'transform:'",{type:"helper",value:{name:"lyteUiTextTransform",args:["ltPropRadius"]}}]}}}},{type:"attr",position:[1,1]},{type:"text",position:[1,1,1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"lyteUiConcat",args:["'width:'","ltPropWidth","';height:'","ltPropHeight"]}}}},{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"lyteUiConcat",args:["'width: '","'0% ;'","'transition: '","'width '","duration","' '","timingfn","';'","'background:'",{type:"helper",value:{name:"lyteUiGetStackValue",args:["ltPropStack","index","'color'"]}},"';'"]}}}},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"lyteUiConcat",args:["'line-height:'","ltPropHeight","'; font-size: '",{type:"helper",value:{name:"if",args:["ltPropFontSize","ltPropFontSize","'12px'"]}},"'; color: '",{type:"helper",value:{name:"if",args:[{type:"helper",value:{name:"lyteUiGetStackValue",args:["ltPropStack","index","'labelColor'"]}},{type:"helper",value:{name:"lyteUiGetStackValue",args:["ltPropStack","index","'labelColor'"]}},"'#fff'"]}},"';'"]}}}},{type:"text",position:[1,1]}]}},default:{}}]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"lyteUiConcat",args:["'width:'","ltPropWidth","';height:'","ltPropHeight"]}}}},{type:"attr",position:[1,1],attr:{style:{name:"style",helperInfo:{name:"lyteUiConcat",args:["'height: '","percentage","'% ;'","'transition:'","'height '","duration","' '","timingfn","';'","'background: '","ltPropBackground","';'","'display: block'"]}}}},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"lyteUiConcat",args:["'line-height:'","ltPropHeight","'; font-size: '",{type:"helper",value:{name:"if",args:["ltPropFontSize","ltPropFontSize","'12px'"]}},"'; color: '",{type:"helper",value:{name:"if",args:["ltPropLabelColor","ltPropLabelColor","'#fff'"]}},"';'"]}}}},{type:"text",position:[1,1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"lyteUiConcat",args:["'width:'","ltPropWidth","';height:'","ltPropHeight"]}}}},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"lyteUiConcat",args:["'position: absolute; height: 100%; background: '","ltPropProgressFillColor"]}}}},{type:"attr",position:[3],attr:{style:{name:"style",helperInfo:{name:"lyteUiConcat",args:["'position: absolute; height: 100%; background: '","ltPropProgressFillColor"]}}}}]},false:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"lyteUiConcat",args:["'width: '","percentage","'% ;'","'transition: '","'width '","duration","' '","timingfn","';'","'background:'","ltPropBackground"]}}}},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"lyteUiConcat",args:["'line-height:'","ltPropHeight","'; font-size: '",{type:"helper",value:{name:"if",args:["ltPropFontSize","ltPropFontSize","'12px'"]}},"'; color: '",{type:"helper",value:{name:"if",args:["ltPropLabelColor","ltPropLabelColor","'#fff'"]}},"';'"]}}}},{type:"text",position:[1,1]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["ltPropType","ltPropProgressFillColor","ltPropCompletedFillColor","ltPropWidth","ltPropHeight","ltPropRadius","ltPropStroke","ltPropValueCopy","ltPropAnimated","ltPropShowPercentage","ltPropProgressProperty","ltPropLabel","ltPropFontSize","ltPropLabelColor","ltPropIndeterminate","ltPropStack","ltPropDirection","ltPropPercentage","percentage","duration","timingfn","percentageDisplay","checkIndeterminate","chunks","prevValues"],init:function(){this.getData("ltPropWidth")||this.setData("ltPropWidth","vertical"==this.getData("ltPropType")?"20px":"100%"),this.getData("ltPropHeight")||this.setData("ltPropHeight","vertical"==this.getData("ltPropType")?"200px":"12px")},didConnect:function(){this.getData("ltPropIndeterminate")?this.setData("checkIndeterminate",this.getData("checkIndeterminate")+1):("stacked"==this.getData("ltPropType")&&(this.stackId=[]),$L.fastdom.mutate(this.setBackground.bind(this)))},setChunks:function(){if("stacked"==this.getData("ltPropType")){var e=this.getData("chunks"),t=this.getData("ltPropStack"),o=this.getData("prevValues");if(e.length!=t.length){e=[];for(var a=0;a<t.length;a++)e.push(a);if(this.setData("chunks",e),0==o.length)for(a=0;a<t.length;a++)o.push(0);else if(o.length>t.length)o.splice(t.length);else if(o<t.length)for(a=o.length;a<t.length;a++)o.push(0);this.setData("prevValues",o)}}}.observes("ltPropStack.[]").on("init"),data:function(){return{ltPropType:Lyte.attr("string",{default:"bar"}),ltPropProgressFillColor:Lyte.attr("string",{default:"#42a2eb"}),ltPropCompletedFillColor:Lyte.attr("string",{default:"#3fbd5f"}),ltPropWidth:Lyte.attr("string"),ltPropHeight:Lyte.attr("string"),ltPropRadius:Lyte.attr("string",{default:"50"}),ltPropStroke:Lyte.attr("string",{default:"5"}),ltPropValueCopy:Lyte.attr("string",{default:"0"}),ltPropAnimated:Lyte.attr("boolean",{default:!0}),ltPropShowPercentage:Lyte.attr("boolean",{default:!0}),ltPropProgressProperty:Lyte.attr("object",{default:{value:"0",duration:"0s"}}),ltPropLabel:Lyte.attr("string"),ltPropFontSize:Lyte.attr("string"),ltPropLabelColor:Lyte.attr("string"),ltPropIndeterminate:Lyte.attr("boolean",{default:!1}),ltPropStack:Lyte.attr("array",{default:[]}),ltPropDirection:Lyte.attr("string",{default:"up"}),ltPropPercentage:Lyte.attr("boolean",{default:!0}),percentage:Lyte.attr("string",{default:"0"}),duration:Lyte.attr("string",{default:"2s"}),timingfn:Lyte.attr("string",{default:"linear"}),percentageDisplay:Lyte.attr("string",{default:"0"}),checkIndeterminate:Lyte.attr("number",{default:0}),chunks:Lyte.attr("array",{default:[]}),prevValues:Lyte.attr("array",{default:[]})}},didDestroy:function(){this.sid&&(window.clearTimeout(this.sid),this.sid=!1),this.iId&&(window.clearInterval(this.iId),this.iId=!1),this.stackId&&this.stackId.forEach((function(e,t){e&&(window.clearTimeout(this.sid),e=!1)}))},observeIndeterminate:function(){"bar"==this.getData("ltPropType")&&this.getData("ltPropIndeterminate")&&this.getData("ltPropAnimated")&&(this.setData("ltPropBackground",this.getData("ltPropProgressFillColor")),this.setData("duration","0s"),this.setData("percentage","100"))}.observes("ltPropIndeterminate","checkIndeterminate"),percentageChange:function(e){this.getData("ltPropIndeterminate")||this.setBackground()}.observes("ltPropProgressProperty","ltPropStack.[]","ltPropProgressProperty.value"),setBackground:function(){var e=parseFloat(this.getData("ltPropProgressProperty").value),t=this.getData("ltPropProgressProperty").duration?this.getData("ltPropProgressProperty").duration:this.getData("duration");if(this.getData("ltPropProgressProperty").timingfn&&this.setData("timingfn",this.getData("ltPropProgressProperty").timingfn),"circle"===this.getData("ltPropType"))if(parseInt(e)>=100){this.setData("duration",t),this.setData("ltPropBackground",this.getData("ltPropProgressFillColor")),this.setData("percentage","100"),t=1e3*parseFloat(t);var o=this;this.sid&&(window.clearTimeout(this.sid),this.sid=!1),this.sid=setTimeout((function(){o.sid=!1,o.node?(o.$node.querySelector(".lyteProgressBar").classList.add("lyteProgressCompleted"),o.setData("ltPropBackground",o.getData("ltPropCompletedFillColor"))):clearTimeout(o.sid)}),t)}else this.sid&&(clearTimeout(this.sid),this.sid=!1),this.$node.querySelector(".lyteProgressBar").classList.remove("lyteProgressCompleted"),this.setData("ltPropBackground",this.getData("ltPropProgressFillColor")),this.setData("duration",t),this.setData("percentage",e+"");else{if("stacked"===this.getData("ltPropType")){var a=this.getData("ltPropStack"),r=this.$node.querySelectorAll(".lyteProgressStatusStack"),i=this.getData("prevValues"),s=0;this.setData("duration",t);for(var l=0;l<a.length;l++){if(e=parseFloat(a[l].value),r[l].style.width=e+"%",a[l].animated){var n=r[l].querySelector(".ltPropProgressAnimated");n.classList.add("progressMovingObj"),n.style.transition="left "+t+" linear, width "+t+" linear",n.style.left=s+"%",n.style.width=e+"%"}if(s+=e,a[l].label)r[l].querySelector(".lyteProgressPercentageStack").innerHTML=a[l].label;else{dur=parseFloat(a[l].duration||t),this.stackId[l]&&(clearInterval(this.stackId[l]),this.stackId[l]=!1);var p=i[l]||0,c=(o=this,{ind:l,value:e,ele:r[l].querySelector(".lyteProgressPercentageStack"),p:p,stack:a[l]});if(0==dur)i[l]=e,this.getData("ltPropShowPercentage")&&(c.ele.textContent=e+(this.getData("ltPropPercentage")?"%":""));else if(p>e){var d=p-e;c.margin=d/(1e3*dur)*100,this.stackId[l]=setInterval(this.changePercentageDisplay,100,"dec",c,this)}else if(p<e){d=e-p;c.margin=d/(1e3*dur)*100,this.stackId[l]=setInterval(this.changePercentageDisplay,100,"inc",c,this)}}}return}if("vertical"===this.getData("ltPropType"))if(parseInt(e)>=100){this.setData("duration",t),this.setData("ltPropBackground",this.getData("ltPropProgressFillColor")),this.setData("percentage","100"),t=1e3*parseFloat(t);o=this;this.sid&&(window.clearTimeout(this.sid),this.sid=!1),this.sid=setTimeout((function(){o.sid=!1,o.$node.querySelector(".lyteProgressBar").classList.add("lyteProgressCompleted"),o.setData("ltPropBackground",o.getData("ltPropCompletedFillColor"))}),t)}else this.sid&&(clearTimeout(this.sid),this.sid=!1),this.$node.querySelector(".lyteProgressBar").classList.remove("lyteProgressCompleted"),this.setData("ltPropBackground",this.getData("ltPropProgressFillColor")),this.setData("duration",t),this.setData("percentage",e+"");else if(parseInt(e)>=100){this.setData("duration",t),this.setData("ltPropBackground",this.getData("ltPropProgressFillColor")),this.setData("percentage","100"),t=1e3*parseFloat(t);o=this;this.sid&&(window.clearTimeout(this.sid),this.sid=!1),this.sid=setTimeout((function(){o.sid=!1,o.$node.querySelector(".lyteProgressBar").classList.add("lyteProgressCompleted"),o.setData("ltPropBackground",o.getData("ltPropCompletedFillColor")),o.getData("ltPropAnimated")&&o.$node.querySelector(".lyteProgressBar .ltPropProgressAnimated").classList.remove("progressMovingObj")}),t)}else this.sid&&(clearTimeout(this.sid),this.sid=!1),this.$node.querySelector(".lyteProgressBar").classList.remove("lyteProgressCompleted"),this.setData("ltPropBackground",this.getData("ltPropProgressFillColor")),this.getData("ltPropAnimated")&&this.$node.querySelector(".lyteProgressBar .ltPropProgressAnimated").classList.add("progressMovingObj"),this.setData("duration",t),this.setData("percentage",e+"")}this.iId&&(clearInterval(this.iId),this.iId=!1);p=parseFloat(this.getData("percentageDisplay")),o=this;if(0==parseInt(this.getData("duration")))this.setData("percentageDisplay",e+"");else if(p>e){var u=(d=p-e)/(1e3*parseInt(this.getData("duration")))*100;this.iId=setInterval((function(){if(p-=u,!o.$node)return clearInterval(o.iId),void(o.iId=!1);o.setData("percentageDisplay",Math.max(parseFloat(p.toFixed(2)),e)+""),parseFloat(p)==e&&(clearInterval(o.iId),o.iId=!1)}),100)}else if(p<e){u=(d=e-p)/(1e3*parseInt(this.getData("duration")))*100;this.iId=setInterval((function(){if(p+=u,!o.$node)return clearInterval(o.iId),void(o.iId=!1);o.setData("percentageDisplay",Math.min(parseFloat(p.toFixed(2)),e)+""),parseFloat(p)>=e&&(clearInterval(o.iId),o.iId=!1)}),100)}},changePercentageDisplay:function(e,t,o){if("inc"==e?t.p+=t.margin:t.p-=t.margin,!o.$node)return clearInterval(o.stackId[t.ind]),void(o.stackId[t.ind]=!1);var a="inc"==e?Math.min(parseFloat(t.p.toFixed(2)),t.value):Math.max(parseFloat(t.p.toFixed(2)),t.value);o.getData("ltPropShowPercentage")&&(t.ele.textContent=a+(o.getData("ltPropPercentage")?"%":"")),("inc"==e&&parseFloat(a)>=t.value||"dec"==e&&parseFloat(a)==t.value)&&(clearInterval(o.stackId[t.ind]),Lyte.arrayUtils(o.getData("prevValues"),"replaceAt",t.ind,t.value),o.stackId[t.ind]=!1)},setCircleStroke:function(e,t){var o=e.getAttribute("stroke-dasharray")*(1-parseInt(t)/100);e.setAttribute("stroke-dashoffset",o)},actions:{}}),Lyte.Component.register("crux-lookupfilter-component",{_template:'<template tag-name="crux-lookupfilter-component"> <template is="if" value="{{cxPropShowFilter}}"><template case="true"> <template is="for" items="{{cxPropDisplayFields}}" item="field" index="index"> <template is="if" value="{{expHandlers(field.yield,\'===\',true)}}"><template case="true"> <lyte-th resize="{{field.cxPropResize}}" fixed="{{field.fixed}}" lt-prop-width="{{field.width}}" style="{{field.style}}" class="{{field.cxPropClass}}" data-zcqa="{{field[cxPropZcqaSelector]}}"> <template is="if" value="{{expHandlers(filterAtfirst,\'&amp;&amp;\',expHandlers(index,\'===\',0))}}"><template case="true"> <div class="mT20 cxLookupFilterButtonWrap"> <a class="cxLookupApplyFilter cP dIB vam proxima {{if(expHandlers(cxPropDisableFilter,\'&amp;&amp;\',expHandlers(enableFilter,\'!\')),\'disabled\',\'\')}}" onclick="{{action(\'onClickApply\',event)}}">{{cruxGetI18n(\'crm.button.apply.filter\')}}</a> <template is="if" value="{{cxPropShowClear}}"><template case="true"> <a class="cxLookupClearFilter color_6 cP dIB vam mL10 proxima" onclick="{{action(\'clearFilter\',event)}}">{{cruxGetI18n(\'crm.title.clear.name\')}}</a> </template></template> </div> </template></template> </lyte-th> </template><template case="false"> <lyte-th class="cxLookupFieldList"> <div class="cxLookupCriteriaFilter"> <template is="if" value="{{cxPropComparator}}"><template case="true"> <template is="if" value="{{cxPropContent[field.ui_type]}}"><template case="true"> <lyte-dropdown class="w150 cxLookupFilterscomparator cxBoxDropdown" data-zcqa="{{if(field.cxPropFilterZcqa,expHandlers(\'comparator_\',\'+\',field.cxPropFilterZcqa),expHandlers(\'comparator_\',\'+\',index))}}" lt-prop-tabindex="1" lt-prop-options="{{cxPropContent[field.ui_type]}}" lt-prop-user-value="name" lt-prop-system-value="api_val" on-option-selected="{{method(\'queryBuild\',expHandlers(index,\'-\',firstIndex),this)}}" on-show="{{method(\'lookupFilterDropdownOpened\')}}"> </lyte-dropdown> </template><template case="false"> <lyte-dropdown class="w150 cxLookupFilterscomparator cxBoxDropdown" data-zcqa="{{if(field.cxPropFilterZcqa,expHandlers(\'comparator_\',\'+\',field.cxPropFilterZcqa),expHandlers(\'comparator_\',\'+\',index))}}" lt-prop-tabindex="1" lt-prop-options="{{cxPropContent[0]}}" lt-prop-user-value="name" lt-prop-system-value="api_val" on-option-selected="{{method(\'queryBuild\',expHandlers(index,\'-\',firstIndex),this)}}" on-show="{{method(\'lookupFilterDropdownOpened\')}}"> </lyte-dropdown> </template></template> </template></template> <div class="w150 cxCriteriaInputSection mT20"> <template is="if" value="{{reRender}}"><template case="true"> <template is="if" value="{{field.noOverride}}"><template case="true"> <template is="component" id="cruxElem{{index}}" component-name="crux-{{field.cxTypeMapping}}-component" data-zcqa="{{if(field.cxPropFilterZcqa,field.cxPropFilterZcqa,expHandlers(\'filter_\',\'+\',index))}}" cx-prop-module="{{cxPropModuleName}}" cx-prop-class="cxLookupFiltersInput preventWheel {{field.filterClass}}" cx-prop-from="filter" cx-prop-field="{{field}}" cx-prop-appearance="box" cx-prop-ignore-empty-value="true" cx-prop-time-zone="" model-req="{{field.modelReq}}" on-value-change="{{method(\'queryBuildComp\',expHandlers(index,\'-\',firstIndex),this)}}" on-before-add="{{method(\'onBeforeAdd\',field.cxTypeMapping)}}" onkeyup="{{action(\'filterSetValue\',field.cxTypeMapping,event)}}" cx-prop="{{field.filterProperties}}" max-user-drop-limit-err="{{method(\'userCompMaxLimitErr\',field.maxLimit)}}"></template> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(field.cxTypeMapping,\'===\',\'lookup\'),\'||\',expHandlers(field.cxTypeMapping,\'===\',\'text\')),\'||\',expHandlers(field.cxTypeMapping,\'===\',\'email\')),\'||\',expHandlers(field.cxTypeMapping,\'===\',\'twitter\')),\'||\',expHandlers(field.cxTypeMapping,\'===\',\'phone\')),\'||\',expHandlers(field.cxTypeMapping,\'===\',\'text-area\')),\'||\',expHandlers(field.cxTypeMapping,\'===\',\'website\')),\'||\',expHandlers(field.cxTypeMapping,\'===\',\'multi-picklist\')),\'||\',expHandlers(field.ui_type,\'===\',\'100\'))}}"><template case="true"> <template is="component" id="cruxElem{{index}}" component-name="crux-text-component" data-zcqa="{{if(field.cxPropFilterZcqa,field.cxPropFilterZcqa,expHandlers(\'filter_\',\'+\',index))}}" cx-prop-module="{{cxPropModuleName}}" cx-prop-class="cxLookupFiltersInput preventWheel {{field.filterClass}}" cx-prop-appearance="box" cx-prop-direction="vertical" cx-prop-from="filter" cx-prop-field="{{field}}" cx-prop-ignore-empty-value="true" cx-prop-type="single" onkeyup="{{action(&quot;filterSetValue&quot;,&quot;text&quot;,event)}}" on-value-change="{{method(\'queryBuildComp\',expHandlers(index,\'-\',firstIndex),this)}}" cx-prop="{{field.filterProperties}}"></template> </template><template case="false"><template is="if" value="{{expHandlers(field.cxTypeMapping,\'===\',\'tag\')}}"><template case="true"> <template is="component" id="cruxElem{{index}}" component-name="crux-tag-component" data-zcqa="{{if(field.cxPropFilterZcqa,field.cxPropFilterZcqa,expHandlers(\'filter_\',\'+\',index))}}" cx-prop-appearance="box" cx-prop-module="{{cxPropModuleName}}" cx-prop-class="cxLookupFiltersInput preventWheel {{field.filterClass}}" cx-prop-from="filter" cx-prop-field="{{field}}" cx-prop-ignore-empty-value="true" onkeyup="{{action(&quot;filterSetValue&quot;,event)}}" on-value-change="{{method(\'queryBuildComp\',expHandlers(index,\'-\',firstIndex),this)}}" cx-prop="{{field.filterProperties}}"></template> </template><template case="false"> <template is="component" id="cruxElem{{index}}" component-name="{{if(ifEquals(field.cxTypeMapping,\'date-time\'),\'crux-date-component\',expHandlers(expHandlers(\'crux-\',\'+\',field.cxTypeMapping),\'+\',\'-component\'))}}" data-zcqa="{{if(field.cxPropFilterZcqa,field.cxPropFilterZcqa,expHandlers(\'filter_\',\'+\',index))}}" cx-prop-module="{{cxPropModuleName}}" cx-prop-class="cxLookupFiltersInput preventWheel {{field.filterClass}}" cx-prop-from="filter" cx-prop-field="{{field}}" cx-prop-appearance="box" cx-prop-ignore-empty-value="true" model-req="{{field.modelReq}}" cx-prop-time-zone="" on-value-change="{{method(\'queryBuildComp\',expHandlers(index,\'-\',firstIndex),this)}}" on-before-add="{{method(\'onBeforeAdd\',field.cxTypeMapping)}}" onkeyup="{{action(\'filterSetValue\',field.cxTypeMapping,event)}}" cx-prop="{{field.filterProperties}}" max-user-drop-limit-err="{{method(\'userCompMaxLimitErr\',field.maxLimit)}}"></template> <template is="if" value="{{expHandlers(isBetween,\'&amp;&amp;\',isBetweenArr[index])}}"><template case="true"> <p>and</p> <template is="component" id="between" component-name="{{if(ifEquals(field.cxTypeMapping,\'date-time\'),\'crux-date-component\',expHandlers(expHandlers(\'crux-\',\'+\',field.cxTypeMapping),\'+\',\'-component\'))}}" data-zcqa="{{if(field.cxPropFilterZcqa,field.cxPropFilterZcqa,expHandlers(\'filter_\',\'+\',index))}}" cx-prop-module="{{cxPropModuleName}}" cx-prop-class="cxLookupFiltersInput preventWheel {{field.filterClass}}" cx-prop-appearance="box" cx-prop-ignore-empty-value="true" cx-prop-time-zone="" cx-prop-from="filter" cx-prop-field="{{field}}" on-value-change="{{method(\'queryBuildComp\',expHandlers(index,\'-\',firstIndex),this)}}" onkeyup="{{action(\'filterSetValue\',field.cxTypeMapping,event)}}" cx-prop="{{field.filterProperties}}"></template> </template></template> </template></template></template></template></template></template> </template></template> </div> </div> <template is="if" value="{{expHandlers(expHandlers(filterAtfirst,\'!\'),\'&amp;&amp;\',expHandlers(index,\'===\',firstIndex))}}"><template case="true"> <div class="mT20 cxLookupFilterButtonWrap"> <a data-zcqa="{{applyZcqa}}" class="cxLookupApplyFilter cP dIB vam proxima {{if(expHandlers(cxPropDisableFilter,\'&amp;&amp;\',expHandlers(enableFilter,\'!\')),\'disabled eventNone\',\'\')}}" onclick="{{action(\'onClickApply\',event)}}">{{cruxGetI18n(\'crm.button.apply.filter\')}}</a> <template is="if" value="{{cxPropShowClear}}"><template case="true"> <a data-zcqa="{{clearZcqa}}" class="cxLookupClearFilter color_6 cP dIB vam mL10 proxima" onclick="{{action(\'clearFilter\',event)}}">{{cruxGetI18n(\'crm.title.clear.name\')}}</a> </template></template> </div> </template></template> </lyte-th> </template></template> </template> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"field.style"}}},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,1,3,1]},{type:"if",position:[1,1,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"component",position:[1],dynamicNodes:[]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"component",position:[1],dynamicNodes:[]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"component",position:[1],dynamicNodes:[]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"component",position:[1],dynamicNodes:[]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[3]},{type:"component",position:[3],dynamicNodes:[]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}}]}]}},default:{}}],_observedAttributes:["module","cxPropModuleName","cxPropShowFilter","currentQuery","cxPropHeaderFields","cxPropDisplayFields","cxPropContent","cxPropNoValidation","cxPropComparator","cxPropDefaultComparator","cxPropDatatypeComparator","cxPropPlaceHolder","cxPropDisableFilter","enableFilter","filterQuery","cxPropShowClear","getBackfilter","firstIndex","reRender","isBetween","filterAtfirst","clearZcqa","applyZcqa","head","isBetweenArr"],data:function(){return{module:Lyte.attr("object",{default:{}}),cxPropModuleName:Lyte.attr("string",{default:""}),cxPropShowFilter:Lyte.attr("boolean",{default:!1}),currentQuery:Lyte.attr("object",{default:{}}),cxPropHeaderFields:Lyte.attr("array",{default:[],hideAttr:!0}),cxPropDisplayFields:Lyte.attr("array",{default:[],hideAttr:!0}),cxPropContent:Lyte.attr("object",{default:{786:[{name:_cruxUtils.getI18n("is"),api_val:"equal"},{name:_cruxUtils.getI18n("isn't"),api_val:"not_equal"},{name:_cruxUtils.getI18n("is after"),api_val:"greater_than"},{name:_cruxUtils.getI18n("is before"),api_val:"less_than"},{name:_cruxUtils.getI18n("between"),api_val:"between"},{name:_cruxUtils.getI18n("is empty"),api_val:"empty"},{name:_cruxUtils.getI18n("is not empty"),api_val:"notempty"}],200:[{name:_cruxUtils.getI18n("is"),api_val:"equal"},{name:_cruxUtils.getI18n("isn't"),api_val:"not_equal"},{name:_cruxUtils.getI18n("is after"),api_val:"greater_than"},{name:_cruxUtils.getI18n("is before"),api_val:"less_than"},{name:_cruxUtils.getI18n("between"),api_val:"between"},{name:_cruxUtils.getI18n("is empty"),api_val:"empty"},{name:_cruxUtils.getI18n("is not empty"),api_val:"notempty"}],24:[{name:_cruxUtils.getI18n("is"),api_val:"equal"},{name:_cruxUtils.getI18n("isn't"),api_val:"not_equal"},{name:_cruxUtils.getI18n("is after"),api_val:"greater_than"},{name:_cruxUtils.getI18n("is before"),api_val:"less_than"},{name:_cruxUtils.getI18n("between"),api_val:"between"},{name:_cruxUtils.getI18n("is empty"),api_val:"empty"},{name:_cruxUtils.getI18n("is not empty"),api_val:"notempty"}],333:[{name:_cruxUtils.getI18n("is"),api_val:"equal"},{name:_cruxUtils.getI18n("isn't"),api_val:"not_equal"},{name:_cruxUtils.getI18n("is after"),api_val:"greater_than"},{name:_cruxUtils.getI18n("is before"),api_val:"less_than"},{name:_cruxUtils.getI18n("between"),api_val:"between"},{name:_cruxUtils.getI18n("is empty"),api_val:"empty"},{name:_cruxUtils.getI18n("is not empty"),api_val:"notempty"}],14:[{name:_cruxUtils.getI18n("is"),api_val:"equal"},{name:_cruxUtils.getI18n("isn't"),api_val:"not_equal"},{name:_cruxUtils.getI18n("is after"),api_val:"greater_than"},{name:_cruxUtils.getI18n("is before"),api_val:"less_than"},{name:_cruxUtils.getI18n("between"),api_val:"between"},{name:_cruxUtils.getI18n("is empty"),api_val:"empty"},{name:_cruxUtils.getI18n("is not empty"),api_val:"notempty"}],209:[{name:_cruxUtils.getI18n("is"),api_val:"equal"},{name:_cruxUtils.getI18n("isn't"),api_val:"not_equal"},{name:_cruxUtils.getI18n("is empty"),api_val:"empty"},{name:_cruxUtils.getI18n("is not empty"),api_val:"notempty"}],35:[{name:_cruxUtils.getI18n("is"),api_val:"equal"},{name:_cruxUtils.getI18n("isn't"),api_val:"not_equal"},{name:_cruxUtils.getI18n("is empty"),api_val:"empty"},{name:_cruxUtils.getI18n("is not empty"),api_val:"notempty"}],52:[{name:"=",api_val:"equal"},{name:"!=",api_val:"not_equal"},{name:">",api_val:"greater_than"},{name:">=",api_val:"greater_equal"},{name:"<",api_val:"less_than"},{name:"<=",api_val:"less_equal"},{name:_cruxUtils.getI18n("between"),api_val:"between"},{name:_cruxUtils.getI18n("is empty"),api_val:"empty"},{name:_cruxUtils.getI18n("is not empty"),api_val:"notempty"}],32:[{name:"=",api_val:"equal"},{name:"!=",api_val:"not_equal"},{name:">",api_val:"greater_than"},{name:">=",api_val:"greater_equal"},{name:"<",api_val:"less_than"},{name:"<=",api_val:"less_equal"},{name:_cruxUtils.getI18n("between"),api_val:"between"},{name:_cruxUtils.getI18n("is empty"),api_val:"empty"},{name:_cruxUtils.getI18n("is not empty"),api_val:"notempty"}],36:[{name:"=",api_val:"equal"},{name:"!=",api_val:"not_equal"},{name:">",api_val:"greater_than"},{name:">=",api_val:"greater_equal"},{name:"<",api_val:"less_than"},{name:"<=",api_val:"less_equal"},{name:_cruxUtils.getI18n("between"),api_val:"between"},{name:_cruxUtils.getI18n("is empty"),api_val:"empty"},{name:_cruxUtils.getI18n("is not empty"),api_val:"notempty"}],2:[{name:_cruxUtils.getI18n("is"),api_val:"equal"},{name:_cruxUtils.getI18n("isn't"),api_val:"not_equal"}],26:[{name:_cruxUtils.getI18n("is"),api_val:"equal"},{name:_cruxUtils.getI18n("isn't"),api_val:"not_equal"}],8:[{name:_cruxUtils.getI18n("is"),api_val:"equal"},{name:_cruxUtils.getI18n("isn't"),api_val:"not_equal"}],20:[{name:_cruxUtils.getI18n("is"),api_val:"equal"},{name:_cruxUtils.getI18n("isn't"),api_val:"not_equal"}],300:[{name:_cruxUtils.getI18n("is"),api_val:"equal"}],301:[{name:_cruxUtils.getI18n("is"),api_val:"equal"}],0:[{name:_cruxUtils.getI18n("starts with"),api_val:"starts_with"},{name:_cruxUtils.getI18n("contains"),api_val:"contains"},{name:_cruxUtils.getI18n("doesn't contain"),api_val:"not_contains"},{name:_cruxUtils.getI18n("is"),api_val:"equal"},{name:_cruxUtils.getI18n("isn't"),api_val:"not_equal"},{name:_cruxUtils.getI18n("is empty"),api_val:"empty"},{name:_cruxUtils.getI18n("is not empty"),api_val:"notempty"}]}}),cxPropNoValidation:Lyte.attr("boolean",{default:!1}),cxPropComparator:Lyte.attr("boolean",{default:!0}),cxPropDefaultComparator:Lyte.attr("object",{default:{starts_with:[0]}}),cxPropDatatypeComparator:Lyte.attr("object",{default:{}}),cxPropPlaceHolder:Lyte.attr("object",{default:{}}),cxPropDisableFilter:Lyte.attr("boolean",{default:!1}),enableFilter:Lyte.attr("boolean",{default:!1}),filterQuery:Lyte.attr("array",{default:[]}),cxPropShowClear:Lyte.attr("boolean",{default:!1}),getBackfilter:Lyte.attr("array",{default:[]}),firstIndex:Lyte.attr("number",{default:0}),reRender:Lyte.attr("boolean",{default:!0}),isBetween:Lyte.attr("boolean",{default:!1}),filterAtfirst:Lyte.attr("boolean",{default:!1}),clearZcqa:Lyte.attr("string",{default:"clear_filter"}),applyZcqa:Lyte.attr("string",{default:"apply_filter"}),head:Lyte.attr("object",{default:{Leads:["Full_Name","Last_Name"],Activities:["Subject"],Accounts:["Account_Name"],Contacts:["Full_Name"],Deals:["Deal_Name"],Potentials:["Deal_Name"],Campaigns:["Campaign_Name"],Cases:["Subject"],Solutions:["Solution_Title"],Products:["Product_Name"],Vendors:["Vendor_Name"],PriceBooks:["Price_Book_Name"],Quotes:["Subject"],SalesOrders:["Subject"],PurchaseOrders:["Subject"],Invoices:["Subject"],Visits:["Visited_Page"]}}),isBetweenArr:Lyte.attr("array",{default:[]})}},showFilter:function(e){e.newValue?this.initialSetup():this.setData({isBetween:!1,isBetweenArr:[],addSearch:!1,filterQuery:[],currentQuery:[]})}.observes("cxPropShowFilter"),didConnect:function(){this.initialSetup()},initialSetup:function(){this.getMethods("setLookupFilterConditions")&&(a=this.executeMethod("setLookupFilterConditions",this),this.setData("cxPropContent",Object.assign(this.data.cxPropContent,a))),this.displayChanged()},displayChanged:function(){for(var e=this.getData("cxPropDisplayFields").slice(),t=this.getData("cxPropPlaceHolder"),o=0,a=e.length;o<a;o++)if(e[o].id){this.setData({firstIndex:o,cxPropHeaderFields:e.slice(o)});break}for(o=0,a=(e=this.getData("cxPropHeaderFields")).length;o<a;o++){var r={};t[e[o].ui_type]?r.placeholder=t[e[o].ui_type]:t[e[o].cxTypeMapping]&&(r.placeholder=t[e[o].cxTypeMapping]),e[o].cxPropType&&(r.type=e[o].cxPropType),e[o].maxLimit&&(r.maxLimit=e[o].maxLimit),e[o].maxLength&&(r.maxlength=e[o].maxLength),void 0!==e[o].disableExtraValue&&(r.disableExtraValue=e[o].disableExtraValue),void 0!==e[o].cxPropDecimalAllowed&&(r.decimalAllowed=e[o].cxPropDecimalAllowed),void 0!==e[o].freeze&&(r.freeze=e[o].freeze),e[o].maxValue&&(r.maxvalue=e[o].maxValue),"boolean"===e[o].cxTypeMapping&&(r.noneSelected=!0),e[o].filterProperties=JSON.stringify(r)}this.setData("cxPropHeaderFields",e),this.displayFilter()},fieldChanged:function(){this.displayChanged()}.observes("cxPropDisplayFields"),methods:{queryBuild:function(e,t,o,a){var r,i=this.getData("cxPropHeaderFields"),s=this.getData("head"),l=JSON.parse(JSON.stringify(this.getData("filterQuery"))),n=this.getData("isBetweenArr").slice(),p=l[e]?l[e]:{},c=i[e].cxTypeMapping;if("lookup"===c||"text"===c||"email"===c||"multi-picklist"===c||"twitter"===c||"phone"===c||"text-area"===c||"website"===c||"100"===i[e].ui_type?c="text":"date-time"===c&&(c="date"),"lookup"===i[e].data_type||"lookup"===i[e].cxTypeMapping){var d="object"==typeof i[e].lookup.module?i[e].lookup.module.api_name:i[e].lookup.module;r=i[e].api_name+"."+s[d][0]}else r=i[e].api_name;var u=t.parentElement.querySelectorAll("crux-"+c+"-component");if("empty"===a||"notempty"===a){p.field={api_name:r,id:i[e].id},p.comparator="equal",n[e]=!1,this.setData({isBetweenArr:n,cxPropHeaderFields:i}),p.value="notempty"===a?"${NOTEMPTY}":"${EMPTY}",p.empty=!0;for(var h=u.length,m=0;m<h;m++){(D=u[m].querySelector("input"))&&(D.disabled=!0,D.value="")}}else if("between"===a){p.field={api_name:r,id:i[e].id},p.comparator=a,n[e]=!0;var y=this;for(h=u.length,m=0;m<h;m++){var f=u[m];if("datetime"===i[e].data_type||"date-time"===i[e].cxTypeMapping){var g=y.getDate(f.component.getValue());p.value=g?y.getISODateStartTime(f.component.getValue()):f.component.getValue()}else if("date"===i[e].data_type||"date"===i[e].cxTypeMapping){g=y.getDate(f.component.getValue());p.value=g||f.component.getValue()}else p.value=f.component.getValue();(D=f.querySelector("input"))&&(D.disabled=!1)}this.setData({isBetweenArr:n,isBetween:!0,cxPropHeaderFields:i}),this.displayFilter(e)}else{var v;if(p.field={api_name:r,id:i[e].id},"datetime"===i[e].data_type||"date-time"===i[e].cxTypeMapping)if("equal"===a?(p.comparator="between",v=!0):"not_equal"===a?(p.comparator="not_between",v=!0):p.comparator=a,v&&p.value){var x="string"!=typeof(x=u[0].component.getValue())?x[0]:x,P=[];g=this.getDate(x);P[0]=g?this.getISODateStartTime(x):x,P[1]=g?this.getISODateEndTime(x):x,p.value=P}else{var b=u[0].component.getValue();g=this.getDate(b);p.value="greater_than"===a?Array.isArray(b)&&b.length?b[0]:g?this.getISODateStartTime(b):b:"less_than"===a?Array.isArray(b)&&b.length?b[1]:g?this.getISODateEndTime(b):b:"string"!=typeof b&&p.value?p.value[0]:g?this.getISODateStartTime(b):b}else if("date"===i[e].data_type||"date"===i[e].cxTypeMapping){p.comparator=a;g=this.getDate(u[0].component.getValue());p.value=g||u[0].component.getValue()}else p.comparator=a;"${EMPTY}"!==p.value&&"${NOTEMPTY}"!==p.value||(p.value=""),n[e]=!1,this.setData({isBetweenArr:n,cxPropHeaderFields:i}),p.value="date"===i[e].cxTypeMapping||"date-time"===i[e].cxTypeMapping?p.value:u[0].component.getValue();for(h=u.length,m=0;m<h;m++){var D;(D=u[m].querySelector("input"))&&(D.disabled=!1)}}l[e]=p,this.dispFilterApply=!1,this.setData("filterQuery",l),this.getData("cxPropDisableFilter")&&this.setData("enableFilter",!0)},queryBuildComp:function(e,t,o,a){var r,i=JSON.parse(JSON.stringify(this.getData("filterQuery"))),s=i[e]?i[e]:{},l=this.getData("cxPropComparator"),n=this.getData("cxPropContent"),p=this.getData("cxPropHeaderFields"),c=this.getData("isBetweenArr");if(!i[e]){if(r="lookup"===p[e].data_type||"lookup"===p[e].cxTypeMapping?p[e].api_name+"."+{Leads:["Full_Name","Last_Name"],Activities:["Subject"],Accounts:["Account_Name"],Contacts:["Full_Name"],Deals:["Deal_Name"],Potentials:["Deal_Name"],Campaigns:["Campaign_Name"],Cases:["Subject"],Solutions:["Solution_Title"],Products:["Product_Name"],Vendors:["Vendor_Name"],PriceBooks:["Price_Book_Name"],Quotes:["Subject"],SalesOrders:["Subject"],PurchaseOrders:["Subject"],Invoices:["Subject"],Visits:["Visited_Page"]}[p[e].lookup.module.api_name][0]:p[e].api_name,l)if(n[p[e].ui_type])var d=n[p[e].ui_type][0].api_val;else d=n[0][0].api_val;s.field={api_name:r,id:p[e].id},s.comparator=d}if(!l){var u=this.getData("cxPropDatatypeComparator"),h=Object.keys(u),m=h.length;if(m)for(var y=0;y<m;y++){var f="formula"===p[e].data_type?p[e].formula.return_type:p[e].data_type;if(u[h[y]].indexOf(f)>-1){d=h[y];break}}else{var g=this.getData("cxPropDefaultComparator");m=(h=Object.keys(g)).length;for(y=0;y<m;y++)if(g[h[y]].indexOf(p[e].ui_type)>-1){d=h[y];break}}s.comparator=d}if(c[e]){var v=(t=this.$node.querySelectorAll(".cxCriteriaInputSection")[e]).firstElementChild.tagName,x=t.querySelectorAll(v),P=[];if("datetime"===p[e].data_type||"date-time"===p[e].cxTypeMapping){var b=this.getDate(x[1].component.getValue());P[1]=b?this.getISODateEndTime(x[1].component.getValue()):x[1].component.getValue(),b=this.getDate(x[0].component.getValue()),P[0]=b?this.getISODateStartTime(x[0].component.getValue()):x[0].component.getValue()}else if("date"===p[e].data_type||"date"===p[e].cxTypeMapping){b=this.getDate(x[1].component.getValue());P[1]=b||x[1].component.getValue(),b=this.getDate(x[0].component.getValue()),P[0]=b||x[0].component.getValue()}else P[1]=x[1].component.getValue(),P[0]=x[0].component.getValue();s.value=P}else if("date"===p[e].data_type||"date"===p[e].cxTypeMapping){b=this.getDate(t.component.getValue());s.value=b||(o||b)}else if("datetime"===p[e].data_type||"date-time"===p[e].cxTypeMapping){if(b=this.getDate(t.component.getValue()))if("equal"===s.comparator||"not_equal"===s.comparator||"between"===s.comparator)"equal"===s.comparator?s.comparator="between":"not_equal"===s.comparator&&(s.comparator="not_between"),(P=[])[0]=this.getISODateStartTime(o),P[1]=this.getISODateEndTime(o),s.value=P;else"less_than"===s.comparator?s.value=this.getISODateEndTime(o):s.value=this.getISODateStartTime(o);else s.value=o}else"boolean"===p[e].data_type||"boolean"===p[e].cxTypeMapping?s.value=-1===o?void 0:o?"true":"false":s.value=o;i[e]=s,this.dispFilterApply=!1,this.setData("filterQuery",i),this.getData("cxPropDisableFilter")&&this.setData("enableFilter",!0)},lookupFilterDropdownOpened:function(e,t){$L(t.childComp).addClass("cxDropbox")},onBeforeAdd:function(e,t,o){return"picklist"!==e&&"user"!==e||!this.getMethods("picklistAdd")||this.executeMethod("picklistAdd",e,t,o)},userCompMaxLimitErr:function(e){_cruxUtils.showCustomMessage({params:{ltPropType:"error",ltPropMessage:_cruxUtils.getI18n("crux.comboBox.max.limit",e,_cruxUtils.getI18n("crm.label.users")),ltPropDuration:"2000",ltPropShow:!0}})}},actions:{filterSetValue:function(e,t){if(13===t.keyCode&&this.getMethods("applyFilter")){if("text"!==e&&"number"!==e&&"phone"!==e&&"date"!==e&&"twitter"!==e&&"phone"!==e&&"website"!==e&&"email"!==e&&"text-area"!==e)return;if(!this.getData("cxPropNoValidation"))var o=this.validate();this.getData("cxPropDisableFilter")&&this.setData("enableFilter",!1),this.executeMethod("applyFilter",this,t,o)}},clearFilter:function(){this.clearFilter()},onClickApply:function(e,t){if(this.getMethods("applyFilter")){if(!this.getData("cxPropNoValidation"))var o=this.validate();this.getData("cxPropDisableFilter")&&this.setData("enableFilter",!1),this.executeMethod("applyFilter",this,t,o)}}},clearFilter:function(){this.getMethods("clearFilter")&&this.executeMethod("clearFilter",this,event),this.getData("cxPropDisableFilter")&&this.setData("enableFilter",!1);for(var e=this.$node.querySelectorAll(".cxCriteriaInputSection"),t=e.length,o=0,a=this.getData("cxPropHeaderFields"),r=this.getData("cxPropContent"),i=this.getData("filterQuery");o<t;o++)if(i[o]){if(this.setData({isBetweenArr:[],isBetween:!1}),this.getData("cxPropComparator")){var s=e[o].parentElement.firstElementChild;if(r[a[o].ui_type])var l=r[a[o].ui_type][0].api_val;else l=r[0][0].api_val;s.ltProp("selected",l)}this.setData("reRender",!1),this.setData("reRender",!0)}this.displayFilter(),this.setData("filterQuery",[])},getFilterQuery:function(){var e=this.getData("filterQuery"),t=[],o={},a=0,r=this.getData("cxPropComparator");return e.forEach((function(e){e&&e.field&&(e.comparator||!r)&&e.value&&(e.value="string"==typeof e.value?e.value.trim(" "):e.value,(Array.isArray(e.value)&&e.value.length||!Array.isArray(e.value)&&(e.value||e.empty))&&("object"==typeof e.value&&(e.value=e.value&&e.value.id?e.value.id:e.value,null===e.value&&(e.value="")),delete e.empty,t[a]=e,a++))})),t.length>=1?1===t.length?o=t[0]:(o.group_operator="AND",o.group=t):o={},this.setData("currentQuery",o),o},elemsValidate:function(){for(var e=this.$node.querySelectorAll(".cxCriteriaInputSection"),t=!0,o=e?e.length:0,a=this.getFilter(),r=0;r<o;r++)for(var i=e[r].firstElementChild.tagName,s=e[r].querySelectorAll(i),l=s.length,n=0;n<l;n++){var p=s[n].component.getValue();if(p=Array.isArray(p)?p.length:p,a[r]&&p&&!(t=s[n].component.validate()))return t}return t},getFilter:function(){return this.getData("filterQuery").slice()},validate:function(){return!(!this.elemsValidate()||!this.betweenValidate())},betweenValidate:function(){var e,t,o=this.getData("filterQuery"),a=this.getData("cxPropHeaderFields"),r={field:"",bool:!0},i=this;return o.forEach((function(o,s){if(null!=o&&"between"===o.comparator&&"string"!=typeof o.value&&o.value[1]&&("date-time"==a[s].cxTypeMapping||"date"==a[s].cxTypeMapping?(e=new Date(o.value[0]),t=new Date(o.value[1])):(e=o.value[0],t=o.value[1]),e>t)){r.field=a[s],r.bool=!1;var l=i.$node.querySelector("#cruxElem"+s);if(l)var n=l.querySelector("input");if("datetime"==r.field.data_type||"date"==r.field.data_type)var p=_cruxUtils.getI18n("crm.custom.field.less.than.equalto",["'"+_cruxUtils.getI18n("workflow.option.webhookFailure.fromDate")+"'","'"+_cruxUtils.getI18n("workflow.option.webhookFailure.toDate")+"'"]);else p=_cruxUtils.getI18n("crm.custom.field.less.than.to1");return l&&l.component&&l.component.showAlert(p,n),!1}})),r},displayFilter:function(e){var t=this.$node.querySelectorAll(".cxCriteriaInputSection"),o=this.getData("getBackfilter"),a=[],r=o.length,i=t?t.length:0,s=void 0!==e?e:0,l=this.getData("cxPropHeaderFields"),n=[];i=void 0!==e?e+1:i;for(var p=this.getData("cxPropComparator"),c=0;c<r;c++)a[c]=o[c].id;for(;s<i;s++){var d=this.getData("isBetweenArr").slice();e&&(d[e]=!0);var u=a.length?a.indexOf(l[s].id):-1;o[u]&&"between"===o[u].comparator&&!p&&(d[s]=!0),this.setData("isBetweenArr",d);var h=t[s].querySelector("lyte-dropdown");if(h&&h.classList.add("cxBoxDropdown"),-1!==u){var m=t[s].querySelectorAll(t[s].firstElementChild.tagName);if(p)t[s].parentElement.firstElementChild.ltProp("selected",o[u].comparator);for(var y=m.length,f=0;f<y;f++){var g=m[f];if("empty"===o[u].comparator||"notempty"===o[u].comparator)for(var v=g.querySelectorAll("input"),x=v.length,P=0;P<x;P++)v[P].disabled=!0;else if("CRUX-USER-COMPONENT"===g.tagName){var b=o[u].value[f];g.component.setData("cxPropValue",{users:b})}else"CRUX-DATE-COMPONENT"===g.tagName?g.querySelector("lyte-input").ltProp("value",o[u].value[f]):"CRUX-PICKLIST-COMPONENT"===g.tagName?(g.cxProp("value",o[u].value[f]),g.cxProp("displayValue",o[u].value[f])):g.cxProp("value",o[u].value[f])}n[s]=o[u].filterQuery}}this.setData("filterQuery",n),this.setData("getBackfilter",[])},getBackupFilter:function(e){for(var t=this.$node,o=e.length,a=this.getData("filterQuery"),r=this.getData("cxPropComparator"),i=t.querySelectorAll(".cxLookupFilterscomparator"),s=t.querySelectorAll(".cxCriteriaInputSection"),l=s.length,n=[],p=this.getData("cxPropHeaderFields"),c=[],d=0;d<o;d++)c[d]=e[d].id;d=0;for(var u=0;d<l;d++)if(a[d]&&-1!==c.indexOf(p[d].id)){var h=s[d]?s[d].querySelectorAll(s[d].firstElementChild.tagName):null,m=[],y=i[d];h.forEach((function(e,t){"CRUX-DATE-COMPONENT"===e.tagName?m[t]=e.querySelector("lyte-input").ltProp("value"):m[t]=e.component.getValue()})),n[u]={filterQuery:a[d],value:m,id:p[d].id},"${NOTEMPTY}"===a[d].value?n[u].comparator="notempty":"${EMPTY}"===a[d].value?n[u].comparator="empty":"between"===a[d].comparator||"not_between"===a[d].comparator?n[u].comparator=y&&r?y.ltProp("selected"):a[d].comparator:n[u].comparator=a[d].comparator,u++}return this.setData("getBackfilter",n),n},getDate:function(e){var t=-1!=["dd.mm.yyyy.","yyyy. mm. dd","yyyy.mm.dd","yyyy'年'mm'月'dd'日'"].indexOf(Crm.userDetails.DATE_PATTERN.toLowerCase()),o=this.convertUsrtoDefaultDatePattern(e,t);function a(e){return e<10?"0"+e:e}return o?o.getFullYear()+"-"+a(o.getMonth()+1)+"-"+a(o.getDate()):""}},{mixins:["crux-filter-utils","crux-element-validation"]}),Lyte.Component.register("crux-table-component",{_template:'<template tag-name="crux-table-component"> <template is="if" value="{{cxPropExpress}}"><template case="true"> <lyte-expresstable lt-prop-content="{{content}}" lt-prop-height="{{cxPropHeight}}" lt-prop-header-label-key="field_label" lt-prop-header="{{header}}" lt-prop-fixed-table-scroll="true" lt-prop-yield="true" id="{{cxPropTableId}}" lt-prop-dual-resize="{{cxPropDualResize}}" onscroll="{{action(\'scroll\',event)}}" lt-prop-scrollbar-option="{&quot;showOn&quot; : &quot;{{cxPropShowScrollOn}}&quot;, &quot;containerClass&quot; : &quot;scrollbarClass&quot;}" on-resize-select="{{method(\'resizeSelect\')}}" on-resize-end="{{method(\'resizeEnd\')}}" class="pR {{cxPropTableClass}}" before-set-fix-table-column-width="{{method(\'beforeSetFixTableColumnWidth\')}}" after-set-fix-table-column-width="{{method(\'afterSetFixTableColumnWidth\')}}" lt-prop-prevent-content-observer="true" lt-prop-prevent-width="{{cxPropPreventWidth}}" lt-prop-sticky-table="{{cxPropStickyTable}}"> <template is="registerYield" yield-name="headerYield" class="tablecomponent1 tableBdrCollapse tablecomponent"> <lyte-exptable-tr id="{{cxPropHeaderRowId}}"> <template is="for" items="{{ltPropTableHeader}}" item="field" index="index"> <template is="if" value="{{field.cxCheckbox}}"><template case="true"> <lyte-exptable-th resize="{{cxPropResizeCheckbox}}" fixed="{{cxPropFixCheckbox}}"> <lyte-checkbox></lyte-checkbox> </lyte-exptable-th> </template><template case="false"><template is="if" value="{{expHandlers(field.yield,\'==\',true)}}"><template case="true"> <lyte-exptable-th resize="{{field.cxPropResize}}" fixed="{{field.fixed}}" lt-prop-width="{{field.width}}" style="{{field.style}}" class="{{field.cxPropClass}} cxPropTh{{index}}" data-zcqa="{{field[cxPropZcqaSelector]}}" onmouseover="{{action(\'hoverOnTh\',index,true)}}" onmouseout="{{action(\'hoverOnTh\',index)}}"> <lyte-yield yield-name="header-{{field.yieldName}}"></lyte-yield> </lyte-exptable-th> </template><template case="false"> <lyte-exptable-th resize="{{field.cxPropResize}}" class="{{cxPropColumnCellClass}} {{field.cxPropClass}} cxSortQuery cxPropTh{{index}}" id="{{field[cxPropHeaderIdSelector]}}" fixed="{{field.fixed}}" lt-prop-width="{{field.width}}" style="{{field.style}}" data-zcqa="{{field[cxPropZcqaSelector]}}" onmouseover="{{action(\'hoverOnTh\',index,true)}}" onmouseout="{{action(\'hoverOnTh\',index)}}"> <lyte-text class="{{if(cxPropEnableSort,\'cP\',\'\')}} cxTableHeadingElem" lt-prop-tooltip-config="{{stringify(cxPropHeaderTooltipConfig)}}" lt-prop-value="{{field[cxPropLabelSelector]}}" onclick="{{action(\'sort\',field)}}" lt-prop-tooltip-class="{{cxPropHeaderTooltipClass}}"></lyte-text> <template is="if" value="{{expHandlers(expHandlers(cxPropNewListView,\'&amp;&amp;\',cxPropIsAlphaSearchShown),\'&amp;&amp;\',cxPropModuleDisplayField[cxPropModule])}}"><template case="true"> <template is="if" value="{{cruxContains(cxPropModuleDisplayField[cxPropModule],field.api_name,cxPropModuleDisplayField[cxPropModule].length)}}"><template case="true"> <span><lyte-yield yield-name="header-alpha-search" field-name="{{field.api_name}}"></lyte-yield></span> </template></template></template></template> <template is="if" value="{{expHandlers(expHandlers(field.api_name,\'==\',cxPropSortedColumn),\'||\',expHandlers(field.id,\'==\',cxPropSortedColumn))}}"><template case="true"> <span id="sorted_column_{{field.id}}" title="{{field.field_label}}" class="sort_{{cxPropSortedOrder}} svgIconsImg" data-param="{&quot;fieldid&quot;:&quot;{{field.id}}&quot;}"></span> </template><template case="false"> <template is="if" value="{{expHandlers(cxPropNewListView,\'!\')}}"><template case="true"> <span class="cx_sortIconPlaceholder dIB mL5 vam"></span> </template></template></template></template> </lyte-exptable-th> </template></template></template></template> </template> </lyte-exptable-tr> </template> <template is="registerYield" yield-name="contentYield" class="tableBdrCollapse tablecomponent2" id="{{cxPropBodyId}}"> <template is="if" value="{{cxPropContent.length}}"><template case="true"><template is="if" value="{{showLoadingUp}}"><template case="true"> <lyte-exptable-tr class="cxTableEmptyRow cxTableUpRow"> <template is="for" items="{{ltPropTableHeader}}" item="field" index="index"> <lyte-exptable-td class="{{cxPropColumnCellClass}} {{field.cxPropClass}}" style="{{field.style}}"> <div class="content-animated-line zcrm-contentloading" style="height: 10px;"> </div> </lyte-exptable-td> </template> </lyte-exptable-tr> </template></template><template is="for" items="{{content}}" item="row" index="contentIndex" unbound="{{cxPropDataBind}}"> <lyte-exptable-tr id="{{row.id}}" onclick="{{action(\'onRowClick\',row,event)}}" onmouseover="{{action(\'onMouseOver\',row.id,this)}}" onmouseout="{{action(\'onMouseOut\',row.id,this)}}" style="{{if(cruxContains(cxPropSelectedRows,row.id,cxPropSelectedRows.length),cxPropSelectedRowStyle)}}" data-zcqa="{{if(cxPropZcqaWithId,concat(cxPropZcqaWithId,row.id),cxPropRowZcqa)}}" class="{{if(cruxContains(cxPropSelectedRows,row.id,cxPropSelectedRows.length),cxPropSelectedRowClass)}} {{if(row.hideRecord,\'cruxHideRow\',\'\')}} {{row.cxPropClass}}"> <template is="for" items="{{ltPropTableHeader}}" item="field" index="index" unbound="{{cxPropDataBind}}"> <template is="if" value="{{field.cxCheckbox}}"><template case="true"> <lyte-exptable-td fixed="{{cxPropFixCheckbox}}"><lyte-checkbox></lyte-checkbox></lyte-exptable-td> </template><template case="false"><template is="if" value="{{expHandlers(field.yield,\'||\',field.yieldName)}}"><template case="true"> <lyte-exptable-td style="{{field.style}}" fixed="{{field.fixed}}" width="{{field.width}}" class="{{field.cxPropClass}} {{cxPropColumnCellClass}}"> <lyte-yield yield-name="body-{{field.yieldName}}" record-obj="{{row}}" field-obj="{{field}}" index-val="{{contentIndex}}"></lyte-yield> </lyte-exptable-td> </template><template case="false"> <lyte-exptable-td class="{{cxPropColumnCellClass}} {{field.cxPropClass}} {{if(ifEquals(field.cxTypeMapping,\'multi-picklist\'),\'wspaceNor mW100\',\'\')}}" style="{{field.style}}"> <template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(field.cxTypeMapping,\'==\',&quot;tag&quot;),\'&amp;&amp;\',expHandlers(row[field.api_name].length,\'!=\',0)),\'||\',expHandlers(expHandlers(field.cxTypeMapping,\'==\',&quot;user&quot;),\'&amp;&amp;\',row[field.api_name])),\'||\',expHandlers(field.cxTypeMapping,\'==\',&quot;number&quot;)),\'||\',expHandlers(expHandlers(field.cxTypeMapping,\'==\',&quot;picklist&quot;),\'&amp;&amp;\',field.enable_colour_code))}}"><template case="true"> <template is="component" component-name="crux-{{field.cxTypeMapping}}-component" cx-prop-value="{{row[field.api_name]}}" cx-prop-field="{{field}}" cx-prop-iso-code="{{row.Currency}}" cx-prop-exchange-rate="{{row.Exchange_Rate}}" cx-prop-exchange-rate-finance="{{row.ExchangeRate}}" cx-prop-home-currency="{{row.$home_converted_currency[field.api_name]}}" on-show-more-tags="{{method(\'tagsShowMore\')}}" cx-prop-formatted-currency="{{row.$formatted_currency[field.api_name]}}" cx-prop-clip-mode="{{cxPropClipMode}}" cx-prop-width="{{field.tagWidth}}" cx-prop-tooltip="{{if(field.cxPropTooltip,field.cxPropTooltip,if(cxPropTooltip,cxPropTooltip,\'\'))}}" cx-prop-tooltip-props="{{cxPropTooltipProps}}" cx-prop-show-business-card="{{cxPropShowBusinessCard}}" cx-prop-masking-properties="{{field.cxPropMaskingProperties}}" cx-prop-is-color-code-enabled="{{field.enable_colour_code}}"></template> </template><template case="false"> {{unescape(getCruxTableValue(field,row,cxPropModule,cxPropTooltip,cxPropTooltipProps))}} </template></template> </lyte-exptable-td> </template></template></template></template> </template> </lyte-exptable-tr> </template> <template is="if" value="{{showLoadingDown}}"><template case="true"> <lyte-exptable-tr class="cxTableEmptyRow cxTableDownRow dN"> <template is="for" items="{{ltPropTableHeader}}" item="field" index="index"> <lyte-exptable-td class="{{cxPropColumnCellClass}} {{field.cxPropClass}}" style="{{field.style}}"> <div class="cxListViewLazyLoad"> <div class="cxListViewLazyLoadRunner"></div> </div> </lyte-exptable-td> </template> </lyte-exptable-tr> </template></template> </template><template case="false"> <lyte-exptable-tr class="cxTableEmptyRow"> <template is="for" items="{{ltPropTableHeader}}" item="field" index="index"> <lyte-exptable-td class="{{cxPropColumnCellClass}} {{field.cxPropClass}}" style="{{field.style}}"> <template is="if" value="{{cxPropShowLoading}}"><template case="true"> <div class="cxListViewLazyLoad"> <div class="cxListViewLazyLoadRunner"></div> </div> </template></template> </lyte-exptable-td> </template> </lyte-exptable-tr> </template></template> </template> </lyte-expresstable> </template><template case="false"><template is="if" value="{{expHandlers(content.length,\'||\',expHandlers(cxPropHideHeaderOnNoContent,\'!\'))}}"><template case="true"> <lyte-table lt-prop-yield="true" id="{{cxPropTableId}}" lt-prop-dual-resize="{{cxPropDualResize}}" style="height : {{cxPropHeight}}; position: relative;" onscroll="{{action(\'scroll\',event)}}" lt-prop-scrollbar-option="{&quot;showOn&quot; : &quot;{{cxPropShowScrollOn}}&quot;, &quot;containerClass&quot; : &quot;scrollbarClass&quot;}" on-resize-end="{{method(\'resizeEnd\')}}" class="{{cxPropTableClass}}"> <template is="registerYield" yield-name="yield"> <lyte-table-structure class="cruxTableStructure"> <template is="if" value="{{expHandlers(expHandlers(cxPropHideHeaderOnNoContent,\'&amp;&amp;\',expHandlers(content.length,\'!\')),\'!\')}}"><template case="true"> <lyte-thead class="tablecomponent1 tablecomponent"> <lyte-tr id="{{cxPropHeaderRowId}}"> <template is="for" items="{{header}}" item="field" index="index"> <template is="if" value="{{expHandlers(field.yield,\'==\',true)}}"><template case="true"> <lyte-th resize="{{field.cxPropResize}}" fixed="{{field.fixed}}" lt-prop-width="{{field.width}}" style="{{field.style}}" class="{{field.cxPropClass}}" data-zcqa="{{field[cxPropZcqaSelector]}}"> <lyte-yield yield-name="header-{{field.yieldName}}"></lyte-yield> </lyte-th> </template><template case="false"> <lyte-th resize="{{field.cxPropResize}}" class="{{cxPropColumnCellClass}} {{field.cxPropClass}} {{if(cruxAnd(field.sortable,cxPropEnableFieldSort),\'cP\',\'\')}}" id="{{field[cxPropHeaderIdSelector]}}" onclick="{{action(\'sort\',field)}}" fixed="{{field.fixed}}" lt-prop-width="{{field.width}}" style="{{field.style}}" data-zcqa="{{field[cxPropZcqaSelector]}}"> <lyte-text lt-prop-value="{{field[cxPropLabelSelector]}}"></lyte-text> <template is="if" value="{{expHandlers(cxPropIsAlphaSearchShown,\'&amp;&amp;\',cxPropModuleDisplayField[cxPropModule])}}"><template case="true"><template is="if" value="{{cruxContains(cxPropModuleDisplayField[cxPropModule],field.api_name)}}"><template case="true"> <span><lyte-yield yield-name="header-alpha-search" field-name="{{field.api_name}}"></lyte-yield></span> </template></template></template></template> <template is="if" value="{{expHandlers(field.api_name,\'==\',cxPropSortedColumn)}}"><template case="true"> <span id="sorted_column_{{field.id}}" title="{{field.field_label}}" class="sort_{{cxPropSortedOrder}} svgIconsImg" data-param="{&quot;fieldid&quot;:&quot;{{field.id}}&quot;}"></span> </template></template> </lyte-th> </template></template> </template> </lyte-tr> <lyte-yield yield-name="row-1" class="lyteRowCopy" style="display: table-row;background: #f2f2f2;"></lyte-yield> <template is="if" value="{{cxPropFilterComponent}}"><template case="true"> <template is="component" component-name="{{cxPropFilterComponent}}" cx-prop-show-filter="{{cxPropShowFilter}}" cx-prop-display-fields="{{header}}" apply-filter="{{method(\'applyFilter\')}}" cx-prop-module-name="{{cxPropModule}}" cx-prop-show-clear="{{cxPropFilterShowClear}}" clear-filter="{{method(\'clearFilter\')}}" set-lookup-filter-conditions="{{method(\'setLookupFilterConditionsCall\')}}" style="display: table-row;background: #f2f2f2;" class="lyteRowCopy"></template> </template></template> </lyte-thead> </template></template> <lyte-tbody class="tablecomponent2" id="{{cxPropBodyId}}"> <template is="if" value="{{content.length}}"><template case="true"> <template is="for" items="{{content}}" item="row" index="contentIndex" unbound="{{cxPropDataBind}}"> <lyte-tr id="{{row.id}}" onclick="{{action(\'onRowClick\',row,event)}}" onmouseover="{{action(\'onMouseOver\',row.id,this)}}" onmouseleave="{{action(\'onMouseOut\',row.id,this)}}" style="{{if(cruxContains(cxPropSelectedRows,row.id,cxPropSelectedRows.length),cxPropSelectedRowStyle)}}" data-zcqa="{{if(cxPropZcqaWithId,concat(cxPropZcqaWithId,row.id),cxPropRowZcqa)}}" class="{{if(cruxContains(cxPropSelectedRows,row.id,cxPropSelectedRows.length),cxPropSelectedRowClass)}} {{row.cxPropClass}}"> <template is="for" items="{{header}}" item="field" index="index" unbound="{{cxPropDataBind}}"> <template is="if" value="{{expHandlers(field.yield,\'||\',field.yieldName)}}"><template case="true"> <lyte-td style="{{field.style}}" fixed="{{field.fixed}}" lt-prop-width="{{field.width}}" class="{{field.cxPropClass}} {{cxPropColumnCellClass}}" data-zcqa="{{if(cxPropTableId,concat(\'value_\',cxPropTableId,\'_\',field.field_label),concat(\'value_\',field.field_label))}}"> <lyte-yield yield-name="body-{{field.yieldName}}" record-obj="{{row}}" field-obj="{{field}}" index-val="{{contentIndex}}"></lyte-yield> </lyte-td> </template><template case="false"> <lyte-td class="{{cxPropColumnCellClass}} {{field.cxPropClass}} {{if(ifEquals(field.cxTypeMapping,\'multi-picklist\'),\'wspaceNor mW100\',\'\')}}" style="{{field.style}}" data-zcqa="{{if(cxPropTableId,concat(\'value_\',cxPropTableId,\'_\',field.field_label),concat(\'value_\',field.field_label))}}"> <template is="if" value="{{expHandlers(expHandlers(expHandlers(row[field.api_name],\'||\',expHandlers(field.cxTypeMapping,\'==\',&quot;number&quot;)),\'||\',expHandlers(expHandlers(field.cxTypeMapping,\'==\',&quot;text&quot;),\'&amp;&amp;\',expHandlers(row[field.api_name],\'==\',false))),\'||\',expHandlers(row[field.api_name].length,\'!=\',0))}}"><template case="true"><template is="if" value="{{expHandlers(expHandlers(expHandlers(field.cxTypeMapping,\'==\',&quot;text&quot;),\'||\',expHandlers(field.cxTypeMapping,\'==\',&quot;multi-picklist&quot;)),\'||\',expHandlers(expHandlers(field.cxTypeMapping,\'==\',&quot;picklist&quot;),\'&amp;&amp;\',expHandlers(field.enable_colour_code,\'!\')))}}"><template case="true"> {{row[field.api_name]}} </template><template case="false"><template is="if" value="{{expHandlers(field.cxTypeMapping,\'==\',&quot;phone&quot;)}}"><template case="true"> <crux-phone-component cx-prop-value="{{row[field.api_name]}}" cx-prop-field="{{field}}" cx-prop-call-allowed="{{if(row.Data_Processing_Basis_Details,row.Data_Processing_Basis_Details.Contact_Through_Phone,true)}}" cx-prop-entity-id="{{row.id}}" cx-prop-entity-name="{{row[moduleRecordMapping[cxPropModule].display_field.api_name]}}" cx-prop-module="{{cxPropModule}}"></crux-phone-component> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(field.cxTypeMapping,\'==\',&quot;number&quot;),\'||\',expHandlers(field.cxTypeMapping,\'==\',&quot;picklist&quot;))}}"><template case="true"> <template is="component" component-name="crux-{{field.cxTypeMapping}}-component" cx-prop-value="{{row[field.api_name]}}" cx-prop-field="{{field}}" cx-prop-iso-code="{{row.Currency}}" cx-prop-exchange-rate="{{if(row.ExchangeRate,row.ExchangeRate,row.Exchange_Rate)}}" cx-prop-is-color-code-enabled="{{field.enable_colour_code}}"></template> </template><template case="false"><template is="if" value="{{expHandlers(field.cxTypeMapping,\'==\',&quot;allday&quot;)}}"><template case="true"> <template is="if" value="{{row.All_day}}"><template case="true"> <crux-date-component cx-prop-value="{{row[field.api_name]}}"></crux-date-component> </template><template case="false"> <crux-date-time-component cx-prop-value="{{row[field.api_name]}}"></crux-date-time-component> </template></template> </template><template case="false"> <template is="component" component-name="crux-{{field.cxTypeMapping}}-component" cx-prop-maxcharacter="{{cxPropMaxcharacter}}" cx-prop-value="{{row[field.api_name]}}" data-zcqa="{{if(ifEquals(cxTypeMapping,\'lookup\'),cxPropRowZcqa)}}" cx-prop-tooltip="{{if(field.cxPropTooltip,field.cxPropTooltip,if(cxPropTooltip,cxPropTooltip,\'\'))}}" cx-prop-width="{{field.tagWidth}}" cx-prop-show-business-card="{{cxPropShowBusinessCard}}"></template> </template></template></template></template></template></template></template></template></template></template> </lyte-td> </template></template> </template> </lyte-tr> </template> </template><template case="false"><template is="if" value="{{cxPropShowLoading}}"><template case="true"> <lyte-tr class="cxTableEmptyRow"> <template is="for" items="{{header}}" item="field" index="index"> <lyte-td class="{{cxPropColumnCellClass}} {{field.cxPropClass}}" style="{{field.style}}"> <template is="if" value="{{cxPropShowLoading}}"><template case="true"> <div class="cxListViewLazyLoad"> <div class="cxListViewLazyLoadRunner"></div> </div> </template></template> </lyte-td> </template> </lyte-tr> </template></template></template></template> </lyte-tbody> </lyte-table-structure> </template> </lyte-table> </template></template></template></template> <template is="if" value="{{expHandlers(expHandlers(cxPropContent.length,\'!\'),\'&amp;&amp;\',expHandlers(cxPropShowLoading,\'!\'))}}"><template case="true"> <div class="{{if(cxPropNoContentClass,cxPropNoContentClass,\'cxTableCompNoResults p30 aligncenter col777\')}}" data-zcqa="{{cxPropNoRecordsZcqa}}">{{cxPropNoRecordsMessage}}</div> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"field.style"}}},{type:"attr",position:[1,1]},{type:"insertYield",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"field.style"}}},{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,0]},{type:"insertYield",position:[1,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]},{type:"componentDynamic",position:[1]}]},{type:"attr",position:[1,3]},{type:"registerYield",position:[1,3],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"field.style"}}},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"if",args:[{type:"helper",value:{name:"cruxContains",args:["cxPropSelectedRows","row.id","cxPropSelectedRows.length"]}},"cxPropSelectedRowStyle"]}}}},{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1,0]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"field.style"}}},{type:"attr",position:[1,1]},{type:"insertYield",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"field.style"}}},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"component",position:[1],dynamicNodes:[]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]},{type:"componentDynamic",position:[1]}]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"field.style"}}},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"field.style"}}},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[]}},default:{}},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["'height : '","cxPropHeight","'; position: relative;'"]}}}},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"field.style"}}},{type:"attr",position:[1,1]},{type:"insertYield",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"field.style"}}},{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1,0]},{type:"insertYield",position:[1,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[1,1]},{type:"insertYield",position:[1,3]},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"component",position:[1],dynamicNodes:[]}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"attr",position:[1,3,1]},{type:"if",position:[1,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"if",args:[{type:"helper",value:{name:"cruxContains",args:["cxPropSelectedRows","row.id","cxPropSelectedRows.length"]}},"cxPropSelectedRowStyle"]}}}},{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"field.style"}}},{type:"attr",position:[1,1]},{type:"insertYield",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"field.style"}}},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"component",position:[1],dynamicNodes:[]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"component",position:[1],dynamicNodes:[]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"field.style"}}},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[]}},default:{}},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1,3]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}}],_observedAttributes:["cxPropExpress","cxPropHeader","cxPropContent","cxPropYieldForPrefix","cxPropYieldForSuffix","cxPropLabelSelector","cxPropHeaderRowId","cxPropFilterComponent","cxPropShowFilter","cxPropFilterShowClear","cxPropDualResize","cxPropHideHeaderOnNoContent","cxPropTableId","cxPropSortColumns","cxPropSortedColumn","cxPropSortedOrder","cxPropBodyId","cxPropNoRecordsMessage","cxPropNoRecordsZcqa","cxPropColumnCellClass","cxPropSelectedRows","cxPropSelectedRowStyle","cxPropFieldTypeMapping","cxPropFieldTypeMappingSelector","header","headerFields","cxPropHeight","content","cxPropEnableBodyScroll","cxPropZcqaSelector","cxPropRowZcqa","cxPropModule","nextRender","new","cxPropDisplayRowNumber","cxPropTableClass","cxPropPrefixYields","lyteUnbound","cxPropSuffixYields","cxPropDataBind","cxPropHeaderIdSelector","cxPropSelectedRowClass","showLoadingDown","showLoadingUp","cxPropHeaderYield","beingSorted","options","cxPropShowSortDropdown","cxPropMaxcharacter","cxPropCheckboxPosition","cxPropResizeCheckbox","cxPropFixCheckbox","cxPropModuleDisplayField","cxPropNewListView","cxPropIsAlphaSearchShown","cxPropPreventWidth","cxPropClipMode","cxPropStickyTable","cxPropTooltip","cxPropTooltipProps","beingResized","cxPropHeaderTooltipConfig","cxPropHeaderTooltipClass","cxPropShowScrollOn","telephonyEnabled","zpbEnabled","cxPropEnableSort","cxPropNoContentClass","cxPropEnableFieldSort","cxPropZcqaWithId","cxPropShowBusinessCard","cxPropShowLoading"],data:function(){return{cxPropExpress:Lyte.attr("boolean",{default:!1}),cxPropHeader:Lyte.attr("array"),cxPropContent:Lyte.attr("array",{default:[]}),cxPropYieldForPrefix:Lyte.attr("boolean",{default:!1}),cxPropYieldForSuffix:Lyte.attr("boolean",{default:!1}),cxPropLabelSelector:Lyte.attr("string",{default:"field_label"}),cxPropHeaderRowId:Lyte.attr("string"),cxPropFilterComponent:Lyte.attr("string",{default:""}),cxPropShowFilter:Lyte.attr("boolean",{default:!1}),cxPropFilterShowClear:Lyte.attr("boolean",{default:!1}),cxPropDualResize:Lyte.attr("boolean",{default:!1}),cxPropHideHeaderOnNoContent:Lyte.attr("boolean",{default:!1}),cxPropTableId:Lyte.attr("string"),cxPropSortColumns:Lyte.attr("boolean"),cxPropSortedColumn:Lyte.attr("string"),cxPropSortedOrder:Lyte.attr("string"),cxPropBodyId:Lyte.attr("string"),cxPropNoRecordsMessage:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.no.data.found")}),cxPropNoRecordsZcqa:Lyte.attr("string"),cxPropColumnCellClass:Lyte.attr("string"),cxPropSelectedRows:Lyte.attr("array",{default:[]}),cxPropSelectedRowStyle:Lyte.attr("string"),cxPropFieldTypeMapping:Lyte.attr("object",{default:{}}),cxPropFieldTypeMappingSelector:Lyte.attr("string",{default:"ui_type"}),header:Lyte.attr("array"),headerFields:Lyte.attr("array"),cxPropHeight:Lyte.attr("string"),content:Lyte.attr("array",{default:[]}),cxPropEnableBodyScroll:Lyte.attr("boolean",{default:!0}),cxPropZcqaSelector:Lyte.attr("string",{default:"field_label"}),cxPropRowZcqa:Lyte.attr("string"),cxPropModule:Lyte.attr("string"),nextRender:Lyte.attr("number",{default:5}),new:Lyte.attr("boolean",{default:!1}),cxPropDisplayRowNumber:Lyte.attr("number",{default:1}),cxPropTableClass:Lyte.attr("string",{default:""}),cxPropPrefixYields:Lyte.attr("array",{default:[]}),lyteUnbound:Lyte.attr("boolean",{default:!1}),cxPropSuffixYields:Lyte.attr("array",{default:[]}),cxPropDataBind:Lyte.attr("string",{default:"false"}),cxPropHeaderIdSelector:Lyte.attr("string",{default:"id"}),cxPropSelectedRowClass:Lyte.attr("string"),showLoadingDown:Lyte.attr("boolean",{default:!1}),showLoadingUp:Lyte.attr("boolean",{default:!1}),cxPropHeaderYield:Lyte.attr("object"),beingSorted:Lyte.attr("string"),options:Lyte.attr("array"),cxPropShowSortDropdown:Lyte.attr("boolean",{default:!0}),cxPropMaxcharacter:Lyte.attr("number",{default:0}),cxPropCheckboxPosition:Lyte.attr("number",{default:-1}),cxPropResizeCheckbox:Lyte.attr("boolean",{default:!1}),cxPropFixCheckbox:Lyte.attr("string",{default:"enable"}),cxPropModuleDisplayField:Lyte.attr("object",{default:{}}),cxPropNewListView:Lyte.attr("boolean",{default:!1}),cxPropIsAlphaSearchShown:Lyte.attr("boolean",{default:!1}),cxPropPreventWidth:Lyte.attr("boolean",{default:!1}),cxPropClipMode:Lyte.attr("boolean",{default:!1}),cxPropStickyTable:Lyte.attr("boolean"),cxPropTooltip:Lyte.attr("boolean",{default:!1}),cxPropTooltipProps:Lyte.attr("object"),beingResized:Lyte.attr("boolean",{default:!1}),cxPropHeaderTooltipConfig:Lyte.attr("object",{default:{position:"bottom"}}),cxPropHeaderTooltipClass:Lyte.attr("string"),cxPropShowScrollOn:Lyte.attr("string",{default:"scroll"}),telephonyEnabled:Lyte.attr("boolean",{default:"undefined"!=typeof Crm&&Crm.userDetails.TELEPHONY_ENABLED}),zpbEnabled:Lyte.attr("boolean",{default:"undefined"!=typeof Crm&&Crm.userDetails.ZPBENABLED}),cxPropEnableSort:Lyte.attr("boolean",{default:!0}),cxPropNoContentClass:Lyte.attr("string"),cxPropEnableFieldSort:Lyte.attr("boolean",{default:!0}),cxPropZcqaWithId:Lyte.attr("string"),cxPropShowBusinessCard:Lyte.attr("boolean",{default:!0}),cxPropShowLoading:Lyte.attr("boolean",{default:!1})}},isSelected:function(){return 0==window.getSelection().isCollapsed},actions:{sort:function(e){if(this.isSelected())return!1;clearTimeout(this.sortTimer);var t=event;this.sortTimer=setTimeout(function(){if(this.beingResized)return clearTimeout(this.sortTimer),!1;this.getData("cxPropShowSortDropdown")?1==this.getData("cxPropSortColumns")&&this.throwEvent("on-sort",e,t):this.triggerSortClick(e,event)}.bind(this),100)},onRowClick:function(e,t){if(this.isSelected()||t.target.classList.contains("cruxPreventClick"))return!1;this.throwEvent("on-body-row-click",e,t)},onMouseOver:function(e,t){this.throwEvent("on-mouse-over",e,t)},onMouseOut:function(e,t){this.throwEvent("on-mouse-out",e,t)},scroll:function(e){var t=e.target;if(!this.getData("beingResized"))if(this.getMethods("onScroll")&&this.executeMethod("onScroll"),this.getData("new"))this.fetchNextDataNew(t);else if(this.moreContent&&t.scrollHeight-300<=Math.ceil(t.offsetHeight)+Math.ceil(t.scrollTop)){this.scrollTop=t.scrollTop,this.moreContent=!1;var o=this.getData("cxPropContent").slice(this.rendered,this.getData("nextRender")+this.rendered);o&&o.length?(Lyte.arrayUtils(this.getData("content"),"push",o),this.rendered+=o.length,this.moreContent=!0,this.scrollTable()):this.getMethods("onScrollFetchMoreRecords")&&this.executeMethod("onScrollFetchMoreRecords",this.rendered).then(function(e){e&&e.length?(Lyte.arrayUtils(this.getData("content"),"push",e),this.rendered+=e.length,this.moreContent=!0,this.scrollTable()):this.moreContent=!1}.bind(this))}},getOnMouseDown:function(e){"LYTE-TABLEHEAD-RESIZE"===e.target.tagName&&$L(e.target).closest("lyte-th").addClass("resizeStart")},hoverOnTh:function(e,t){var o=this.$node.querySelector(".cxPropTh"+(e-1));o&&(t?o.classList.add("nLThHover"):o.classList.remove("nLThHover"))},phoneClick:function(e,t){Lyte.registeredMixins["crux-element-validation"].phoneClick(e[t.api_name],e.id,this.data.cxPropModule,e[moduleRecordMapping[this.data.cxPropModule].display_field.api_name])},phoneMouseOver:function(e){Lyte.registeredMixins["crux-element-validation"].phoneMouseOver(e)},phoneMouseOut:function(e){Lyte.registeredMixins["crux-element-validation"].phoneMouseOut(e)},stopEvent:function(){event.preventDefault()}},didConnect:function(){this.pos&&!this.data.cxPropExpress&&(this.$node.querySelector(".lyteTableScroll").scrollTop=this.$node.querySelectorAll("lyte-tr")[this.pos].offsetTop),this.getData("cxPropEnableBodyScroll")&&(this.boundEvent=this.resize.bind(this),window.addEventListener("resize",this.boundEvent,!0))},observeFields:function(){this.data.cxPropHeader||(this.data.cxPropHeader=[]);for(var e=this.data.cxPropHeader.slice(0),t=this.data.cxPropFieldTypeMapping,o=this.data.cxPropFieldTypeMappingSelector,a={currency:"number",text:"text",boolean:"boolean",datetime:"date-time",date:"date",double:"number"},r=0;r<e.length;r++)116==e[r].ui_type||117==e[r].ui_type?e[r].cxTypeMapping=a[e[r].formula.return_type]:118==e[r].ui_type?e[r].cxTypeMapping=a[e[r].dataparam.return_type]:"Solution_Number"!=e[r].api_name&&"Quote_Number"!=e[r].api_name&&t[e[r][o]]&&"Invoice_Number"!=e[r].api_name&&"Case_Number"!=e[r].api_name&&"SO_Number"!=e[r].api_name?333!=e[r].ui_type&&14!=e[r].ui_type&&786!=e[r].ui_type||"Activities"!=this.getData("cxPropModule")?e[r].cxTypeMapping=t[e[r][o]]:e[r].cxTypeMapping="allday":e[r].cxTypeMapping="text";if(1==this.data.cxPropYieldForPrefix||1==this.data.cxPropYieldForSuffix)if(this.getData("cxPropHeaderYield")){var i=this.getData("cxPropHeaderYield").prefix?this.getData("cxPropHeaderYield").prefix:[];for(r=0;r<i.length;r++)e.splice(r,0,{yield:!0,fixed:i[r].fixed,width:i[r].width,yieldName:"prefix-"+(r+1),style:i[r].style,cxPropClass:i[r].class});var s=this.getData("cxPropHeaderYield").suffix?this.getData("cxPropHeaderYield").suffix:[];for(r=0;r<s.length;r++)e.push({yield:!0,fixed:s[r].fixed,width:s[r].width,yieldName:"suffix-"+(r+1),style:s[r].style,cxPropClass:s[r].class})}else if(this.data.cxPropPrefixYields&&this.data.cxPropPrefixYields.length>0||this.data.cxPropSuffixYields&&this.data.cxPropSuffixYields.length>0){for(i=this.data.cxPropPrefixYields,r=0;r<i.length;r++)e.splice(r,0,{yield:!0,fixed:i[r].fixed,width:i[r].width,yieldName:"prefix-"+(r+1),style:i[r].style,cxPropClass:i[r].class});for(s=this.data.cxPropSuffixYields,r=0;r<s.length;r++)e.push({yield:!0,fixed:s[r].fixed,width:s[r].width,yieldName:"suffix-"+(r+1),style:s[r].style,cxPropClass:s[r].class})}else{var l=1,n=this.$node.querySelector("template[yield-name='header-prefix-"+l+"']"),p=this.$node.querySelector("template[yield-name='header-suffix-"+l+"']");if(n||p)for(var c=0,d=1;n||p;)n&&(e.splice(c,0,{yield:!0,fixed:n.getAttribute("cx-prop-fixed"),width:n.getAttribute("cx-prop-width"),yieldName:"prefix-"+(c+1),style:n.getAttribute("cx-prop-style")}),c++),p&&(e.push({yield:!0,fixed:p.getAttribute("cx-prop-fixed"),width:p.getAttribute("cx-prop-width"),yieldName:"suffix-"+d,style:p.getAttribute("cx-prop-style")}),d++),l++,n=this.$node.querySelector("template[yield-name='header-prefix-"+l+"']"),p=this.$node.querySelector("template[yield-name='header-suffix-"+l+"']")}this.data.cxPropCheckboxPosition>-1&&e.splice(this.data.cxPropCheckboxPosition,0,{cxCheckbox:!0,fixed:"enable"}),this.setData("header",e);var u=e.slice(0);this.setData("headerFields",u)}.observes("cxPropHeader","cxPropPrefixYields","cxPropSuffixYields","cxPropHeaderYield").on("init"),minHeightOfRow:45,validateDisplayRowNumber:function(){(null==this.data.cxPropDisplayRowNumber||isNaN(this.getData("cxPropDisplayRowNumber")))&&this.setData("cxPropDisplayRowNumber",1)}.observes("cxPropDisplayRowNumber").on("init"),observeContent:function(){if(this.obj&&clearInterval(this.obj.interval),this.obju&&clearInterval(this.obju.interval),this.clearValues(),this.obj=void 0,this.obju=void 0,this.data.cxPropContent||(this.data.cxPropContent=[]),1==this.data.cxPropEnableBodyScroll){this.maxRenderCount=Math.ceil(window.innerHeight/this.minHeightOfRow);var e=this.data.cxPropContent.length/2;if(e>=50&&(e=50),e>=this.maxRenderCount&&(this.maxRenderCount=Math.ceil(e),this.setData("showLoadingDown",!0)),this.data.new){this.upContent=!0,this.downContent=!0,this.startIndex=this.data.cxPropDisplayRowNumber>=this.data.cxPropContent.length-5?this.data.cxPropDisplayRowNumber-this.maxRenderCount:this.data.cxPropDisplayRowNumber-5,this.startIndex<=0&&(this.startIndex=0,this.upContent=!1),0!=this.startIndex&&this.setData("showLoadingUp",!0),this.endIndex=this.startIndex+this.maxRenderCount,this.endIndex>=this.data.cxPropContent.length?this.setData("showLoadingDown",!1):this.setData("showLoadingDown",!0),this.pos=this.data.cxPropDisplayRowNumber-this.startIndex;for(var t=this.data.cxPropContent.slice(this.startIndex,this.endIndex),o=0;o<t.length;o++)delete t[o].hideRecord;this.setData("content",t),this.endIndex=this.endIndex-1,1==this.getData("showLoadingUp")&&$L.fastdom.mutate(function(){for(var e=this.$node.querySelector(".lyteExpTableOrigTableInnerWrap").clientWidth,t=this.$node.querySelectorAll(".cxTableLoadingDiv"),o=0;o<t.length;o++)t[o].style.width=e+"px";var a=this.getData("cxPropContent").slice(0,this.startIndex);a&&a.length&&(this.countDown=0,this.intervalDown=setInterval(function(){for(var e=0;e<2;e++)if(a[this.countDown])a[this.countDown].hideRecord=!0,Lyte.arrayUtils(this.getData("content"),"insertAt",this.countDown,a[this.countDown]),this.countDown++;else{clearInterval(this.intervalDown);for(var t=document.querySelectorAll(".cruxHideRow"),o=0;o<t.length;o++)t[o].classList.remove("cruxHideRow");this.$node.querySelector("lyte-expresstable").contentObserver(),this.setData("showLoadingUp",!1),this.getMethods("onScrollSetLatestEntityPosition")&&this.executeMethod("onScrollSetLatestEntityPosition"),this.getMethods("onScrollRecordsHaveBeenRendered")&&this.executeMethod("onScrollRecordsHaveBeenRendered")}}.bind(this),10))}.bind(this))}else this.rendered=0,this.moreContent=!0,this.data.cxPropContent.length>this.maxRenderCount?(this.setData("content",this.data.cxPropContent.slice(0,this.maxRenderCount)),this.rendered=this.maxRenderCount):(this.setData("content",this.data.cxPropContent),this.rendered=this.data.cxPropContent.length)}else this.setData("content",this.data.cxPropContent),this.moreContent=!1,$L(".lyteTableScroll",this.$node)&&$L(".lyteTableScroll",this.$node).resetScrollbar();this.$node.querySelector(".lyteTableScroll")&&(this.$node.querySelector(".lyteTableScroll").scrollLeft=0,this.$node.querySelector(".lyteTableScroll").scrollTop=0)}.observes("cxPropContent").on("init"),resize:function(e){clearTimeout(this.timeout);var t=this;this.timeout=setTimeout((function(){var e=Math.ceil(window.innerHeight/t.minHeightOfRow);t.getData("new")?e>t.maxRenderCount&&(t.maxRenderCount=e,t.fetchNextDataNew(document.querySelector(".lyteTableScroll"))):t.moreContent&&e>t.rendered&&t.getData("cxPropContent")&&(Lyte.arrayUtils(t.getData("content"),"push",t.getData("cxPropContent").slice(t.rendered,e)),t.maxRenderCount=t.rendered=e)}),300)},didDestroy:function(){window.removeEventListener("resize",this.boundEvent,!0),this.obj&&clearInterval(this.obj.interval),this.obju&&clearInterval(this.obju.interval),clearInterval(this.intervalUp),clearInterval(this.intervalDown),this.obj=void 0,this.obju=void 0,document.getElementById("cxTableSortMenu")&&document.getElementById("cxTableSortMenu").remove()},scrollTable:function(e,t){if(!this.getData("cxPropExpress")){var o=this.$node.querySelector("lyte-table");delete o._scrolldiv._alive,t?o.scrollTable(e,t):o.scrollTable()}},fetchNextData:function(e){var t=this.scrollTop;if(this.scrollTop=e.scrollTop,!this.disableScroll){if(this.downContent&&!this.waitDown&&e.scrollTop>document.querySelector(".lyteExpTableRowGroup").offsetHeight-500){this.downContent=!1;var o,a=this.endIndex+1,r=this.endIndex+this.maxRenderCount,i=this.getData("cxPropContent").slice(a,r),s=this;if(i&&i.length)this.obj?(o=this.obj,Lyte.arrayUtils(o.moreArr,"push",i)):(o=this.obj={},this.upContent?o.startIndex=this.endIndex-this.startIndex+1:o.startIndex=this.endIndex+1,o.moreArr=i,o.count=0,o.interval=setInterval((function(){for(var e=0;e<2;e++)o.moreArr[o.count]?Lyte.arrayUtils(s.getData("content"),"push",o.moreArr[o.count++]):(clearInterval(o.interval),s.waitDown=!1,s.obj=void 0)}),10)),this.endIndex+=i.length,this.downContent=!0,this.setData("showLoadingDown",!1);else this.getMethods("onScrollFetchMoreRecords")?this.executeMethod("onScrollFetchMoreRecords",this.endIndex).then(function(e){e&&e.length&&(Lyte.arrayUtils(this.getData("content"),"push",e),this.endIndex+=e.length,this.downContent=!0,this.scrollTable(),this.setData("showLoadingDown",!1))}.bind(this)):this.setData("showLoadingDown",!1)}if(this.upContent&&!this.waitUp&&e.scrollTop<t){if(this.upContent=!1,0==(r=this.startIndex))return;if(this.startIndex=r-this.maxRenderCount,this.startIndex<0&&(this.startIndex=0),(i=this.getData("cxPropContent").slice(this.startIndex,r))&&i.length){var l;if(this.obju)l=this.obju,Lyte.arrayUtils(l.moreArr,"insertAt",0,i);else{(l=this.obju={}).moreArr=i,l.count=0;s=this;l.interval=setInterval((function(){for(var e=l.moreArr.length,t=0;t<2;t++){var o=e-1-l.count;if(l.count++,!l.moreArr[o]){clearInterval(l.interval),s.obju=void 0,s.waitUp=!1;break}Lyte.arrayUtils(s.getData("content"),"insertAt",0,l.moreArr[o])}}),10)}this.upContent=!0}this.setData("showLoadingUp",!1)}}},fetchNextDataNew:function(e){if(this.downContent&&e.scrollTop>this.$node.querySelector(".lyteExpOriginalTable .lyteExpTableRowGroup").offsetHeight-this.$node.querySelector(".lyteExpTableOrigTableInnerWrap").offsetHeight-100){this.downContent=!1;var t,o=this.endIndex+1,a=this.endIndex+this.maxRenderCount+1,r=!1;a+50<=this.getData("cxPropContent").length?(t=this.getData("cxPropContent").slice(o,a),r=!0):t=this.getData("cxPropContent").slice(o),t&&t.length?(this.countUp=0,this.$node.querySelector(".lyteExpTableOrigTableInnerWrap .cxTableDownRow")&&this.$node.querySelector(".lyteExpTableOrigTableInnerWrap .cxTableDownRow").classList.remove("dN"),this.intervalUp=setInterval(function(){for(var e=0;e<2;e++)if(t[this.countUp].hideRecord=!0,Lyte.arrayUtils(this.getData("content"),"push",t[this.countUp++]),!t[this.countUp]){clearInterval(this.intervalUp);for(var o=document.querySelectorAll(".cruxHideRow"),a=0;a<o.length;a++)o[a].classList.remove("cruxHideRow");r||this.getMethods("onScrollFetchMoreRecords")?(this.downContent=!0,this.endIndex=this.endIndex+this.maxRenderCount,this.$node.querySelector(".lyteExpTableOrigTableInnerWrap .cxTableDownRow")&&this.$node.querySelector(".lyteExpTableOrigTableInnerWrap .cxTableDownRow").classList.add("dN")):this.setData("showLoadingDown",!1),this.$node.querySelector("lyte-expresstable").contentObserver(),this.getMethods("onScrollRecordsHaveBeenRendered")&&this.executeMethod("onScrollRecordsHaveBeenRendered");break}}.bind(this),10)):this.getMethods("onScrollFetchMoreRecords")?this.executeMethod("onScrollFetchMoreRecords",this.endIndex).then(function(e){e&&e.length&&(Lyte.arrayUtils(this.getData("content"),"push",e),this.endIndex+=e.length,this.downContent=!0,this.scrollTable(),this.setData("showLoadingDown",!1))}.bind(this)):this.setData("showLoadingDown",!1)}},methods:{resizeSelect:function(e,t,o){this.setData("beingResized",!0),this.getMethods("onResizeSelect")&&this.executeMethod("onResizeSelect",e,t,o)},resizeEnd:function(e,t,o){this.beingResized=!0,this.setData("beingResized",!1),setTimeout(function(){this.beingResized=!1}.bind(this),200),$L(e).removeClass("resizeStart"),this.getMethods("onResizeEnd")&&this.executeMethod("onResizeEnd",e,t,o)},applyFilter:function(e,t,o){this.getMethods("applyFilter")&&this.executeMethod("applyFilter",e,t,o)},setLookupFilterConditionsCall:function(e){return this.getMethods("setLookupFilterConditions")?this.executeMethod("setLookupFilterConditions",e):{}},tagsShowMore:function(){this.getMethods("onShowMoreTags")&&this.executeMethod("onShowMoreTags")},sortClick:function(e,t,o,a){this.sortClick(e,t,o,a)},beforeSetFixTableColumnWidth:function(e){this.getMethods("onBeforeSetFixTableColumnWidth")&&this.executeMethod("onBeforeSetFixTableColumnWidth",e)},afterSetFixTableColumnWidth:function(e){this.getMethods("onAfterSetFixTableColumnWidth")&&this.executeMethod("onAfterSetFixTableColumnWidth",e)}},clearValues:function(){clearInterval(this.intervalUp),clearTimeout(this.intervalDown),this.setData({showLoadingUp:!1,showLoadingDown:!1})},performSort:function(e){if(!e.cxPropPreventSort){var t=["asc","desc"];e.cxPropSortOptions?t=e.cxPropSortOptions:this.getMethods("onSort")&&this.getData("cxPropSortedColumn")&&(this.getData("cxPropSortedColumn")==e.api_name||this.getData("cxPropSortedColumn")==e.id)&&(t="asc"==this.getData("cxPropSortedOrder")?["desc","unsort"]:["asc","unsort"]);for(var o={asc:"crm.column.sort.asc",desc:"crm.column.sort.desc",unsort:"crm.column.unsort"},a=0;a<t.length;a++)t[a]={label:_cruxUtils.getI18n(o[t[a]]),value:t[a]};this.setData("options",t),this.setData("beingSorted",e.api_name)}},sortClick:function(e,t,o,a){var r=this;if(r.setData("cxPropSortedColumn",r.getData("beingSorted")),r.setData("cxPropSortedOrder",e),this.getMethods("onSort"))this.executeMethod("onSort",this.getData("cxPropSortedColumn"),e,t,o,a);else{var i=this.getData("beingSorted"),s=this.getData("cxPropContent").slice(0);"asc"==e?s.sort((function(e,t){return null==e[i]||""==e[i]?1:null==t[i]||""==t[i]?-1:e[i].localeCompare(t[i])})):"desc"==e&&s.sort((function(e,t){return null==e[i]||""==e[i]?-1:null==t[i]||""==t[i]?1:e[i].localeCompare(t[i])})),this.setData("cxPropContent",s)}},triggerSortClick:function(e,t){var o="asc";!this.getData("cxPropSortedOrder")||this.getData("cxPropSortedColumn")!=e.api_name&&this.getData("cxPropSortedColumn")!=e.id||(o="asc"==this.getData("cxPropSortedOrder")?"desc":"asc"),this.setData("beingSorted",e.api_name),this.sortClick(o,t)}}),Lyte.Component.registerHelper("getCruxTableValue",(function(e,t,o,a,r){var i=t[e.api_name];if((!i||0==i.length)&&"number"!=e.cxTypeMapping)return"";switch(e.cxPropMaskingProperties&&(i=Lyte.Component.registeredHelpers.cruxMaskValue(i,e.cxPropMaskingProperties)),e.cxTypeMapping){case"phone":if(e.cxPropMaskingProperties)return i;var s=!0;if(t.Data_Processing_Basis_Details&&(s=t.Data_Processing_Basis_Details.Contact_Through_Phone),0==s||e.private&&e.private.restricted)return"<div class='phoneRtl' style='min-width : 100%;'>"+$ESAPI.encoder().encodeForHTML(i)+"</div>";if("undefined"!=typeof Crm&&Crm.userDetails.TELEPHONY_ENABLED)return"<div class='phoneRtl cruxPreventClick cxPhoneViewOutbound'>"+$ESAPI.encoder().encodeForHTML(i)+"<span class='cxCalliconOuter' onclick='Lyte.registeredMixins[\"crux-element-validation\"].phoneClick(\""+$ESAPI.encoder().encodeForJavaScript(i)+'", "'+t.id+'", "'+o+'","'+$ESAPI.encoder().encodeForJavaScript(t[moduleRecordMapping[o].display_field.api_name])+"\");'><i class='cxCallIcon cruxPreventClick'></i><span id='calllabel1' class='cruxPreventClick cxPhoneViewCallLabel'>"+_cruxUtils.getI18n("Call")+"</span></span></div>";if("undefined"!=typeof Crm&&Crm.userDetails.ZPBENABLED){var l="asyncFn(crmCallsNew.getClick2CallPromise,'"+t.id+"','"+o+"','"+t[moduleRecordMapping[o].display_field.api_name]+"')";return"<div class='phoneRtl cxPhoneViewZPBEnabled cruxPreventClick'>"+$ESAPI.encoder().encodeForHTML(i)+"<span class='cxPhoneViewZPBEnabledIconWrap'><zpb-phone number='"+$ESAPI.encoder().encodeForHTMLAttribute(i)+"' module='"+o+"' recordid='"+t.id+"' callbackparamfn="+$ESAPI.encoder().encodeForHTMLAttribute(l)+"></zpb-phone></span></div>"}return"<div onmouseover='Lyte.registeredMixins[\"crux-element-validation\"].phoneMouseOver(this);' onmouseout='Lyte.registeredMixins[\"crux-element-validation\"].phoneMouseOut(this);' class='phoneRtl cruxPreventClick' style='min-width : 100%;'><zpb-phone phoneno='"+$ESAPI.encoder().encodeForHTMLAttribute(i)+'\' callbackparam=\'{"module":"'+o+'", "searchid":"'+t.id+"\"}'>"+$ESAPI.encoder().encodeForHTML(i)+"</zpb-phone><a style='visibility : hidden;' class='pH2 phoneRtl' title='"+_cruxUtils.getI18n("crm.phoneNo.Link.Title")+"' href='skype:"+$ESAPI.encoder().encodeForHTMLAttribute(i)+"?call' onclick='sE();'></a></div>";case"allday":case"date":case"date-time":return(t.All_day||"date"==e.cxTypeMapping)&&i.indexOf(":")>-1&&(i=i.substring(0,i.split(":")[0].lastIndexOf(" "))),a?"<lyte-text class='newDTField' lt-prop-tooltip-config= "+JSON.stringify(r.config)+" lt-prop-tooltip-class= '"+r.class+"' lt-prop-value='"+i+"'></lyte-text>":"<span>"+i+"</span>";case"boolean":return"<span class="+(1==i?"criteria-yes":"")+"></span>";case"email":return e.cxPropMaskingProperties?i:a?"<a class='cxEmailViewLink cruxPreventClick' href='mailto:"+$ESAPI.encoder().encodeForHTMLAttribute(i)+"'> <lyte-text lt-prop-tooltip-config='"+JSON.stringify(r.config)+"' lt-prop-tooltip-class='"+r.class+"' lt-prop-value='"+$ESAPI.encoder().encodeForHTML(i)+"'></lyte-text></a>":"<a class='cxEmailViewLink cruxPreventClick' href='mailto:"+$ESAPI.encoder().encodeForHTMLAttribute(i)+"'>"+$ESAPI.encoder().encodeForHTML(i)+"</a>";case"layout":return a?"<lyte-text lt-prop-tooltip-config='"+JSON.stringify(r.config)+"' lt-prop-tooltip-class='"+r.class+"' lt-prop-value='"+$ESAPI.encoder().encodeForHTML(i.name)+"'></lyte-text>":$ESAPI.encoder().encodeForHTML(i.name);case"number":var n=!1;("currency"==e.data_type||"formula"==e.data_type&&"currency"==e.formula.return_type)&&(n=!0);var p=e.data_type;return("formula"==p||e.formula&&e.formula.return_type)&&(p="currency"==e.formula.return_type?"currency":"number"),i&&(i=Lyte.registeredMixins["crux-element-validation"].getNumberValueForView(i,p,t.Currency,e.ui_type,Crm.userDetails.CURRENCY_DETAILS,Crm.userDetails.defaultRoundOff?Crm.userDetails.defaultRoundOff:2,Crm.userDetails.BASE_CURRENCY)),"<div class="+(n?"numberDivCurrencyView":"numberDivNumberView")+">"+i+"</div>";case"text-area":return a?"<div class='pR'><pre style='word-wrap : break-word; white-space : pre-wrap; min-width : 200px;' class='proxima'>"+$ESAPI.encoder().encodeForHTML(i)+"</pre><span id='showMoreDesc' class='showMoreAddedEvents'></span></div>":"<pre style='word-wrap : break-word; white-space : pre-wrap; min-width : 200px; max-width : 500px;' class='proxima'>"+$ESAPI.encoder().encodeForHTML(i)+"</pre>";case"twitter":return e.cxPropMaskingProperties?i:a?"<a data-zcqa='dummy' class='link cruxPreventClick' href='"+RebrandLinkUtil.getProperty("TW_URL")+"/"+$ESAPI.encoder().encodeForURL(i)+"' target='_blank'> <lyte-text lt-prop-tooltip-config='"+JSON.stringify(r.config)+"' lt-prop-tooltip-class='"+r.class+"' lt-prop-value='"+$ESAPI.encoder().encodeForHTML(i)+"'></lyte-text></a>":"<a data-zcqa='dummy' class='link cruxPreventClick' href='"+RebrandLinkUtil.getProperty("TW_URL")+"/"+$ESAPI.encoder().encodeForURL(i)+"' target='_blank'>"+$ESAPI.encoder().encodeForHTML(i)+"</a>";case"website":var c="",d="http";return i&&""!==i&&0!=i.indexOf(d)&&0!=i.indexOf("https")?c="http://"+i:i&&(c=i),e.cxPropMaskingProperties?i:a?"<a class='link cruxPreventClick' href='"+$ESAPI.encoder().encodeForHTMLAttribute(c)+"' target='_blank'> <lyte-text lt-prop-tooltip-config='"+JSON.stringify(r.config)+"' lt-prop-tooltip-class='"+r.class+"' lt-prop-value='"+$ESAPI.encoder().encodeForHTML(i)+"'></lyte-text></a>":"<a class='link cruxPreventClick' href='"+$ESAPI.encoder().encodeForHTMLAttribute(c)+"' target='_blank'>"+$ESAPI.encoder().encodeForHTML(i)+"</a>";default:return a?"<lyte-text lt-prop-tooltip-config='"+JSON.stringify(r.config)+"' lt-prop-tooltip-class='"+r.class+"' lt-prop-value='"+$ESAPI.encoder().encodeForHTML(i.toString())+"'></lyte-text>":$ESAPI.encoder().encodeForHTML(i.toString())}})),Lyte.Component.registerHelper("cruxGetDateValue",(function(e,t){return e.All_day||"date"==t.cxTypeMapping&&e[t.api_name].indexOf(":")>-1?e[t.api_name].substring(0,e[t.api_name].split(":")[0].lastIndexOf(" ")):e[t.api_name]})),Lyte.Component.registerHelper("cruxGetWebsiteHref",(function(e){var t="http";return e&&""!=e&&0!=e.indexOf(t)&&0!=e.indexOf("https")?"http://"+e:e||""})),Lyte.Component.register("crux-column-list",{_template:'<template tag-name="crux-column-list"> <lyte-menu-body> <template is="if" value="{{expHandlers(cxPropHideSearch,\'!\')}}"><template case="true"> <div class="columnListComp cxColListSearchWrap"> <lyte-search lt-prop-placeholder="{{cruxGetI18n(\'crm.globalsearch.search.title\')}}" lt-prop-query-selector="{&quot;scope&quot; : &quot;.lyteBodyPosition.{{cxPropId}}&quot;, &quot;target&quot; : &quot;lyte-menu-item.lyteMenuItem.{{cxPropId}}&quot;, &quot;search&quot; : &quot;lyte-menu-item.lyteMenuItem.{{cxPropId}}&quot;}" on-search="{{method(\'searchColumnList\')}}" class="columnListSearchIcon dB" lt-prop-class="{{focusClass}}" id="cruxColumnSearch" lt-prop-trim="true" lt-prop-appearance="{{cxPropSearchAppearance}}"></lyte-search> <span class="searchCloseCOpen cxColListSearchClearWrap dN" data-zcqa="lv_column_search_clear" onclick="{{action(\'clearSearch\')}}"> <span class="cxColListSearchClearIcon"></span> </span> </div> </template></template> <div class="divTopBorder lyteBodyPosition {{cxPropId}} {{if(onlyOneMandatory,\'cxColListOnlyOneMandatoryChecked\')}} cxToScrollTop"> <template is="for" items="{{items}}" item="item" index="index" unbound="{{cxPropDataBind}}"><template is="if" value="{{item[cxPropDisplayLabel]}}"><template case="true"> <lyte-menu-item class="lyteMenuItem {{cxPropId}} {{if(item[cxPropMandatory],\'cxColListMandatoryItem\')}} {{if(cruxOr(cruxAnd(negate(item.selected),cxPropDisableSortForUnselectedFields),cxPropDisableSortable),\'cxPropDisableSort\')}} {{item.cxPropClass}} {{if(cruxAnd(cxPropPreventSortableOnMandatoryFields,item[cxPropMandatory]),\'restrict\')}}" data-zcqa="{{if(cxPropDragZcqaPrefix,concat(cxPropDragZcqaPrefix,item.column_name),\'\')}}"> <template is="if" value="{{cxPropFieldYield}}"><template case="true"> <lyte-checkbox lt-prop-tabindex="-1" data-value="{{item[cxPropUniqueNameSelector]}}" index="{{index}}" lt-prop-id="{{item.id}}_{{item[cxPropUniqueNameSelector]}}" lt-prop-type="default" lt-prop-checked="{{if(item.selected,true,false)}}" lt-prop-label="{{item[cxPropDisplayLabel]}}" on-checked="{{method(\'checkedCheckbox\',item)}}" on-unchecked="{{method(\'unCheckedCheckbox\',item)}}" lt-prop-label-class="{{if(item[cxPropMandatory],\'cxColumnMandatory\')}}" on-before-unchecked="{{method(\'beforeUnChecked\',item)}}" on-before-checked="{{method(\'beforeChecked\',item)}}" lt-prop-disabled="{{if(cruxOr(cruxAnd(disable,negate(item.selected)),item.cxPropDisabled),true,false)}}" class="{{if(item.selected,\'cxColListCheckedElem\')}}" lt-prop-yield="{{cxPropFieldYield}}" data-zcqa="{{if(cxPropZcqaPrefix,concat(cxPropZcqaPrefix,item.column_name),\'\')}}"> <template is="registerYield" yield-name="yield"> <lyte-yield yield-name="fieldYield" field-obj="{{item}}"></lyte-yield> </template> </lyte-checkbox> </template><template case="false"> <lyte-checkbox lt-prop-tabindex="-1" data-value="{{item[cxPropUniqueNameSelector]}}" index="{{index}}" lt-prop-id="{{item.id}}_{{item[cxPropUniqueNameSelector]}}" lt-prop-type="default" lt-prop-checked="{{if(item.selected,true,false)}}" lt-prop-label="{{item[cxPropDisplayLabel]}}" on-checked="{{method(\'checkedCheckbox\',item)}}" on-unchecked="{{method(\'unCheckedCheckbox\',item)}}" lt-prop-label-class="{{if(item[cxPropMandatory],\'cxColumnMandatory\')}}" on-before-unchecked="{{method(\'beforeUnChecked\',item)}}" on-before-checked="{{method(\'beforeChecked\',item)}}" lt-prop-disabled="{{if(cruxOr(cruxAnd(disable,negate(item.selected)),item.cxPropDisabled),true,false)}}" class="{{if(item.selected,\'cxColListCheckedElem\')}}" lt-prop-yield="{{cxPropFieldYield}}" data-zcqa="{{if(cxPropZcqaPrefix,concat(cxPropZcqaPrefix,item.column_name),\'\')}}"></lyte-checkbox> </template></template> <span class="dragIcon dIB alignright vam fR svgIcons"></span> </lyte-menu-item> </template><template case="false"> <div class="dN"></div> </template></template></template> <template is="if" value="{{showNoResult}}"><template case="true"> <div class="cxColListNoResult">{{cruxGetI18n(\'crm.label.no.results.match\')}}</div> </template></template> </div> </lyte-menu-body> </template>',_dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]}]}},default:{}},{type:"attr",position:[1,3]},{type:"attr",position:[1,3,1]},{type:"for",position:[1,3,1],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[]}},default:{}}]},{type:"attr",position:[1,3,3]},{type:"if",position:[1,3,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"componentDynamic",position:[1]}],_observedAttributes:["focusClass","cxPropFields","cxPropSelectedFields","showNoResult","cxPropDisplayLabel","cxPropMandatory","cxPropId","cxPropMaxSelectColumn","disable","cxPropDisableSortForUnselectedFields","cxPropDataBind","items","onlyOneMandatory","cxPropFieldYield","cxPropDisableSortable","cxPropHideSearch","cxPropPreventSortableOnMandatoryFields","cxPropSearchAppearance","cxPropUniqueNameSelector","cxPropZcqaPrefix","cxPropDragZcqaPrefix"],init:function(){var e=_lyteUiUtils.isAndroid.constructor==Boolean?_lyteUiUtils.isAndroid:_lyteUiUtils.isAndroid(),t=_lyteUiUtils.isIos.constructor==Boolean?_lyteUiUtils.isIos:_lyteUiUtils.isIos();this._isMobile=e||t,this.$node.toggleField=function(e){this.querySelector("[data-value='"+e+"']").click()}},data:function(){return{focusClass:Lyte.attr("string",{default:""}),cxPropFields:Lyte.attr("array"),cxPropSelectedFields:Lyte.attr("array",{default:[]}),showNoResult:Lyte.attr("boolean",{default:!1}),cxPropDisplayLabel:Lyte.attr("string",{default:"field_label"}),cxPropMandatory:Lyte.attr("string",{default:"mandatory"}),cxPropId:Lyte.attr("string"),cxPropMaxSelectColumn:Lyte.attr("number"),disable:Lyte.attr("boolean",{default:!1}),cxPropDisableSortForUnselectedFields:Lyte.attr("boolean",{default:!1}),cxPropDataBind:Lyte.attr("string",{default:"false"}),items:Lyte.attr("array"),onlyOneMandatory:Lyte.attr("boolean",{default:!0}),cxPropFieldYield:Lyte.attr("boolean",{default:!1}),cxPropDisableSortable:Lyte.attr("boolean",{default:!1}),cxPropHideSearch:Lyte.attr("boolean",{default:!1}),cxPropPreventSortableOnMandatoryFields:Lyte.attr("boolean",{default:!1}),cxPropSearchAppearance:Lyte.attr("string",{default:"box"}),cxPropUniqueNameSelector:Lyte.attr("string",{default:"api_name"}),cxPropZcqaPrefix:Lyte.attr("string"),cxPropDragZcqaPrefix:Lyte.attr("string")}},selectedCount:function(){for(var e=this.getData("items"),t=0,o=0;o<e.length;o++)e[o]&&e[o].selected&&t++;return t},actions:{clearSearch:function(){this.$node.querySelector("#cruxColumnSearch").setValue(""),$L(".searchCloseCOpen").addClass("dN").removeClass("dF"),this.$node.querySelector("#cruxColumnSearch").focus()}},methods:{checkedCheckbox:function(e,t){var o=t.closest("lyte-menu-item"),a=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend","animationend"];a.forEach((function(r){o.addEventListener(r,(function r(i){if(!i.currentTarget.dataset.triggered){i.currentTarget.dataset.triggered=!0;var s=p.$node.querySelectorAll("lyte-menu-item:not(#dummy)"),l=p.selectedCount(),n=Array.prototype.slice.call(s).indexOf(o),c=n<l?n:l;e.selected=!0;var d=Lyte.arrayUtils(p.getData("items"),"removeAt",n,1)[0];Lyte.arrayUtils(p.getData("items"),"insertAt",c,d);var u=$L("input",p._searchInput)[0];if(p._searchInput&&p._searchInput.setValue(u.value),o.style.transition="",o.style.transform="",o.style.background="#fff",o.style.zIndex="",a.forEach((function(e){o.removeEventListener(e,r)})),p.sortableMenu(),p.getMethods("onCheckBoxChecked")){var h=p.getSelectedFields();p.executeMethod("onCheckBoxChecked",h,p.$node.querySelector("[lt-prop-id='"+t.id+"']").parentElement,p.data.items,c)}p.getData("cxPropMaxSelectColumn")&&p.$node.querySelectorAll("lyte-checkbox input:checked").length==p.getData("cxPropMaxSelectColumn")&&p.setData("disable",!0)}}))}));var r=this.selectedCount(),i=this.$node.querySelectorAll("lyte-menu-item:not(#dummy)"),s=Array.prototype.slice.call(i).indexOf(o),l=s<r?s:r,n=(s-l-this.getHiddenCount(i,s,l))*o.getBoundingClientRect().height;o.style.transition="0.3s all ease",o.style.transform="translateY(-"+n+"px)",o.style.background="#ebebeb",o.style.zIndex="1";var p=this},unCheckedCheckbox:function(e,t){var o=t.closest("lyte-menu-item"),a=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];a.forEach((function(r){o.addEventListener(r,(function r(i){if(!i.currentTarget.dataset.triggered){i.currentTarget.dataset.triggered=!0;var s=c.$node.querySelectorAll("lyte-menu-item:not(#dummy)"),l=c.selectedCount()-1,n=Array.prototype.slice.call(s).indexOf(o),p=l<n?n:l;e.selected=!1;var d=Lyte.arrayUtils(c.getData("items"),"removeAt",n,1)[0];Lyte.arrayUtils(c.getData("items"),"insertAt",p,d);var u=$L("input",c._searchInput)[0];if(c._searchInput&&c._searchInput.setValue(u.value),o.style.transition="",o.style.transform="",o.style.background="#fff",o.style.zIndex="",a.forEach((function(e){o.removeEventListener(e,r)})),c.sortableMenu(),c.getMethods("onCheckBoxUnChecked")){var h=c.getSelectedFields();c.executeMethod("onCheckBoxUnChecked",h,c.$node.querySelector("[lt-prop-id='"+t.id+"']").parentElement,c.data.items,p)}c.setData("disable",!1)}}))}));var r=this.$node.querySelectorAll("lyte-checkbox input:not(:checked)"),i=this.selectedCount()-1,s=(r[0].closest("lyte-checkbox").getData("index"),this.$node.querySelectorAll("lyte-menu-item:not(#dummy)")),l=Array.prototype.slice.call(s).indexOf(o),n=i<l?l:i,p=(n-l-this.getHiddenCount(s,l,n))*o.getBoundingClientRect().height;o.style.transition="0.3s all ease",o.style.transform="translateY("+p+"px)",o.style.background="#ebebeb",o.style.zIndex="1";var c=this},beforeUnChecked:function(e,t){return this._prevent?(delete this._prevent,!1):!this.getMethods("onBeforeUnchecked")||this.executeMethod("onBeforeUnchecked",e,t.closest("lyte-menu-item"))},beforeChecked:function(e,t){return this._prevent?(delete this._prevent,!1):!this.getMethods("onBeforeChecked")||this.executeMethod("onBeforeChecked",e,t.closest("lyte-menu-item"))},searchColumnList:function(e,t,o,a){if(this.setData("showNoResult",0==e.length),a.length?$L(".searchCloseCOpen").addClass("dF").removeClass("dN"):$L(".searchCloseCOpen").addClass("dN").removeClass("dF"),this.$node.querySelector(".cxToScrollTop").scrollTop=0,this.getMethods("onSearch"))return this.executeMethod("onSearch",e)}},didConnect:function(){this.sortableMenu(),this._searchInput=this.$node.getElementsByTagName("lyte-search")[0],this.getMethods("onRender")&&this.executeMethod("onRender",this.$node)},getItem:function(e){var t={};return Object.keys(e).forEach((function(o){t[o]={},t[o]=e[o]})),t},getHiddenCount:function(e,t,o){for(var a=Math.min(t,o),r=Math.max(t,o),i=0,s=a;s<r;++s)e[s].classList.contains("lyteSearchHidden")&&i++;return i},setItemArray:function(e){for(var t=this.getData("cxPropFields"),o=e?[]:this.getData("cxPropSelectedFields").slice(0),a=this,r=o.map((function(e){return e[a.data.cxPropUniqueNameSelector]})),i=t.map((function(e){return e[a.data.cxPropUniqueNameSelector]})),s=[],l=0,n=0;n<r.length;n++){(u=i.indexOf(r[n]))>-1&&(s[l++]=r[n])}var p=[],c=0;for(n=0;n<t.length;++n){(a=t[n])[this.getData("cxPropMandatory")]&&++c>1&&this.setData("onlyOneMandatory",!1);var d=this.getItem(a),u=s.indexOf(d[this.data.cxPropUniqueNameSelector]);this.preventUIType.indexOf(d.ui_type)>-1||this.preventColumnName.indexOf(d.column_name)>-1||(u>-1?(d.selected=!0,p[u]=d):p[l++]=d)}this.setData({items:p})},sortableMenu:function(){if(this.data.cxPropDisableSortable||this._isMobile)return!1;var e=this.$node.querySelector(".divTopBorder"),t=this;$L(e).sortable({containment:"parent",cancel:"input",onSelect:function(e,t,o,a){var r=a.target;return"SPAN"!=r.tagName||!r.classList.contains("lyteCheckBoxDefault")},onDrag:function(e,t){this._prevent=!0}.bind(this),onBeforeDrop:function(e,o,a,r,i,s,l){var n=t.getData("items");if(delete t._prevent,t.getMethods("onBeforeDropItem"))return t.executeMethod("onBeforeDropItem",e,n[r],n[i])},onDrop:function(e,o,a,r,i,s){var l=Lyte.arrayUtils(t.getData("items"),"removeAt",r,1)[0];if(Lyte.arrayUtils(t.getData("items"),"insertAt",i,l),t.sortableMenu(),t.getMethods("onDropItem"))return t.executeMethod("onDropItem",e,l)},restrict:this.getData("cxPropDisableSortForUnselectedFields")?".restrict,.cxPropDisableSort,lyte-checkbox label>span":".restrict,lyte-checkbox label>span"})},getSelectedFields:function(e){for(var t=this.getData("items"),o={},a=0;a<t.length;a++)t[a]&&t[a].selected&&(o[t[a][this.data.cxPropUniqueNameSelector]]=t[a]);var r=this.$node.querySelectorAll("lyte-checkbox input:checked"),i=[];for(a=0;a<r.length;a++){var s=r[a].closest("lyte-checkbox").getAttribute("data-value");e?i.push(store.peekRecord(e,r[a].getAttribute("id").split("_")[0])):o[s]?i.push(o[s]):i.push(t.filter(function(e){return e[this.data.cxPropUniqueNameSelector]==s}.bind(this))[0])}return i},clearSelectedFields:function(e){this.getData("cxPropMaxSelectColumn")&&this.getData("cxPropSelectedFields").length>=this.getData("cxPropMaxSelectColumn")?this.setData("disable",!0):this.setData("disable",!1),this.setItemArray(e),this.sortableMenu()},selectedFieldsObs:function(){this.getData("cxPropMaxSelectColumn")&&this.getData("cxPropSelectedFields").length>=this.getData("cxPropMaxSelectColumn")?this.setData("disable",!0):this.setData("disable",!1),this.setItemArray();var e=this.$node.querySelector("lyte-search");e&&e.setValue(e.ltProp("value")),this.sortableMenu()}.observes("cxPropSelectedFields.[]"),preventUIType:[556,555,51,123,500,66,444,343,41,1234,445],preventColumnName:["KEYWORDID","ADID","GADCONFIGID","ADGROUPID","REMINDINVITEESAT","CONVERTEDDATE","PRODUCTDETAILS","ISAPPROVED","CONSENTID","SE_STATUS","PROCESSINGBASIS","COMMENTCONTENTS","ISCTICALL","PUBLISHED","CALLSTATUS","ISDUPLICATE","ZCAMPAIGNID","CONVERTED","ISLOCKED"],observeFields:function(){this.setItemArray(),this.getData("cxPropMaxSelectColumn")&&this.getData("cxPropSelectedFields").length==this.getData("cxPropMaxSelectColumn")&&(this.data.disable=!0)}.observes("cxPropFields").on("init")}),Lyte.Component.registerHelper("cruxOr",(function(){for(var e=0;e<arguments.length;e++)if(arguments[e])return!0;return!1})),Lyte.Component.register("crux-dropdown",{_template:'<template tag-name="crux-dropdown" onclick="{{action(\'showDropDown\')}}"> <template is="if" value="{{showFieldsDropdown}}"><template case="true"> <lyte-dropdown lt-prop-freeze="{{cxPropFreeze}}" class="cxBoxDropdown {{cxPropClass}} {{if(ifEquals(cxPropMandatory,true),\'mandatoryField \',\'\')}} {{if(isError,\'cxErrorBox\',\'\')}}" lt-prop-placeholder="{{cxPropPlaceholder}}" lt-prop-type="{{cxPropType}}" lt-prop-remove-multiple="{{\'cxPropRemoveMultiple\'}}" lt-prop-tabindex="{{cxPropTabindex}}" lt-prop-icon-class="{{cxPropIconClass}}" lt-prop-disabled="{{cxPropDisabled}}" lt-prop-selected="{{lbind(cxPropSelected)}}" lt-prop-display-value="{{cxPropDisplayValue}}" on-option-selected="{{method(\'optionSelect\')}}" on-show="{{method(\'dropBoxOpen\')}}" on-before-add="{{method(\'beforeAddDropItem\')}}" on-add="{{method(\'addDropItem\')}}" on-hide="{{method(\'hideDropbox\')}}" on-before-hide="{{method(\'beforeHideDropbox\')}}" on-before-show="{{method(\'beforeShow\')}}" on-before-remove="{{method(\'beforeRemoveDropItem\')}}" on-remove="{{method(\'removeDropItem\')}}" on-scroll="{{method(\'scrollDropBox\')}}" lt-prop-box-button-width="{{cxPropBoxButtonWidth}}" lt-prop-position="{{cxPropPosition}}" before-select="{{method(\'onBeforeSelect\')}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-button class="DropButtons" data-zcqa="{{cxPropZcqa}}"> <template is="if" value="{{cxPropDisplayValue}}"><template case="true"> <lyte-text class="lyteDropdownLabel lyteMarginRight" lt-prop-value="{{cxPropDisplayValue}}"> </lyte-text> <lyte-icon class="dropdown"></lyte-icon> </template><template case="false"> <template is="if" value="{{expHandlers(expHandlers(cxPropType,\'!=\',\'single\'),\'&amp;&amp;\',expHandlers(cxPropType,\'!=\',&quot;multi&quot;))}}"><template case="true"> <ul class="lyteMultipleSelect"> <template is="for" items="{{displayValue}}" item="item" index="index"> <li data-value="{{item[cxPropSystemValue]}}"> <lyte-text class="lyteDropdownVisible" lt-prop-value="{{item[cxPropUserValue]}}"> </lyte-text> <lyte-drop-remove class="lyteCloseIcon"></lyte-drop-remove> </li> </template> <template is="if" value="{{expHandlers(expHandlers(displayValue.length,\'<=\',0),\'&amp;&amp;\',expHandlers(cxPropType,\'==\',\'multiple\'))}}"><template case="true"> <span class="lyteDropPlaceholderNormal">{{cxPropPlaceholder}}</span> </template></template> <template is="if" value="{{expHandlers(cxPropType,\'==\',\'multisearch\')}}"><template case="true"> <li class="lyteMultiselectInput"> <lyte-input class="w100per" lt-prop-class="lyteInput" lt-prop-placeholder="{{cxPropSearchplaceholder}}"></lyte-input> </li> </template></template> </ul> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(cxPropType,\'==\',\'single\'),\'||\',expHandlers(cxPropType,\'==\',\'multi\'))}}"><template case="true"> <template is="if" value="{{expHandlers(selectValue,\'!\')}}"><template case="true"> <template is="if" value="{{expHandlers(cxPropPlaceholder,\'!\')}}"><template case="true"> <lyte-text class="lyteDropdownLabel lyteMarginRight" lt-prop-value="{{initialValue}}"> </lyte-text> </template><template case="false"> <span class="lyteDropPlaceholderNormal">{{cxPropPlaceholder}}</span> </template></template> </template><template case="false"><template is="if" value="{{expHandlers(cxPropDisplayValue,\'!\')}}"><template case="true"> <lyte-text class="lyteDropdownLabel lyteMarginRight" lt-prop-value="{{selectValue}}"> </lyte-text> </template></template></template></template> <lyte-icon class="dropdown"></lyte-icon> </template></template></template></template> </template></template> </lyte-drop-button> <lyte-drop-box class="cxDropbox"> <template is="if" value="{{expHandlers(expHandlers(expHandlers(optGroup,\'===\',true),\'&amp;&amp;\',expHandlers(optArr.length,\'>\',cxPropMaxsearch)),\'||\',expHandlers(expHandlers(expHandlers(cxPropOptions.length,\'>=\',cxPropMaxsearch),\'&amp;&amp;\',expHandlers(cxPropType,\'!=\',\'multisearch\')),\'&amp;&amp;\',expHandlers(optGroup,\'!==\',true)))}}"><template case="true"> <lyte-input data-zcqa="search_{{cxPropZcqa}}" lt-prop-type="search" class="w100per" lt-prop-placeholder="{{cxPropSearchplaceholder}}" on-value-change="{{method(\'onSearch\')}}" lt-prop-close-icon="true"></lyte-input> </template></template> <lyte-drop-body class="dropBody"> <template is="for" items="{{localData}}" item="value" index="index"> <template is="if" value="{{cxPropCheckKey(value)}}"><template case="true"> <lyte-drop-item class="{{if(expHandlers(cxPropIsDisabledValue(value[cxPropSystemValue]),\'===\',true),\'lyteDropdown-disabled\',\'\')}} {{if(expHandlers(value[\'isFirst\'],\'===\',true),\'lyteDropdownSelection\',\'\')}}" data-zcqa="{{if(value[cxPropOptionZcqa],value[cxPropOptionZcqa],value[cxPropSystemValue])}}" data-value="{{value[cxPropSystemValue]}}">{{value[cxPropUserValue]}}</lyte-drop-item> </template><template case="false"> <template is="if" value="{{expHandlers(cxPropKeyValue(value),\'===\',true)}}"><template case="true"> <lyte-drop-label>{{value}}</lyte-drop-label> </template><template case="false"> <template is="for" items="{{cxPropArrayValue(value)}}" item="names" index="index"> <lyte-drop-item data-value="{{names[cxPropSystemValue]}}" data-zcqa="{{if(value[cxPropOptionZcqa],value[cxPropOptionZcqa],value[cxPropSystemValue])}}">{{names[cxPropUserValue]}}</lyte-drop-item> </template> </template></template> </template></template> </template> <template is="if" value="{{noResult}}"><template case="true"> <div class="cxDropdownNoResult"> {{cxPropNoResultMessage}} </div> </template></template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </template><template case="false"> <div class="cxFakeDummyEventContainer {{if(ifEquals(cxPropDisabled,true),\'cxDropdownDisabled\',\'\')}} {{cxPropClass}} {{if(isError,\'cxErrorBox\',\'\')}}" onmouseover="{{action(\'showDropDown\')}}" tabindex="{{cxPropTabindex}}"> <div class="cxFakeDropButton {{if(ifEquals(cxPropMandatory,true),\'mandatoryField \',\'\')}}" data-zcqa="{{cxPropZcqa}}"> <template is="if" value="{{expHandlers(expHandlers(expHandlers(cxPropSelected,\'==\',undefined),\'||\',expHandlers(cxPropSelected,\'==\',&quot;&quot;)),\'||\',expHandlers(cxPropSelected,\'==\',\'[]\'))}}"><template case="true"> <template is="if" value="{{expHandlers(cxPropPlaceholder,\'==\',undefined)}}"><template case="true"> <lyte-text class="cxFakeDropdownLabel" lt-prop-value="{{initialValue}}"> </lyte-text> <lyte-icon class="dropdown"></lyte-icon> </template><template case="false"><template is="if" value="{{expHandlers(cxPropType,\'==\',\'multisearch\')}}"><template case="true"> <ul class="cxFakeMultipleSelect"> <li class="cxFakeMultipleSelectLi cxFakeMultipleSelectInput"> <input placeholder="{{cxPropSearchplaceholder}}"> </li> </ul> </template><template case="false"><template is="if" value="{{expHandlers(cxPropType,\'==\',\'multiple\')}}"><template case="true"> <div class="cxFakeDropPlaceholderNormal">{{cxPropPlaceholder}}</div> </template><template case="false"> <div class="cxFakeDropPlaceholderNormal">{{cxPropPlaceholder}}</div> <lyte-icon class="dropdown"></lyte-icon> </template></template></template></template></template></template> </template><template case="false"> <template is="if" value="{{expHandlers(expHandlers(cxPropType,\'==\',\'single\'),\'||\',expHandlers(cxPropType,\'==\',\'multi\'))}}"><template case="true"> <lyte-text class="cxFakeDropdownLabel" lt-prop-value="{{selectValue}}"> </lyte-text> <lyte-icon class="dropdown"></lyte-icon> </template></template> <template is="if" value="{{expHandlers(displayValue.length,\'>\',0)}}"><template case="true"> <ul class="cxFakeMultipleSelect"> <template is="for" items="{{displayValue}}" item="item" index="index"> <li class="cxFakeMultipleSelectLi"> <lyte-text class="cxFakeDropdownVisible" lt-prop-value="{{item[cxPropUserValue]}}"> </lyte-text> <lyte-drop-remove class="lyteCloseIcon"></lyte-drop-remove> </li> </template> <template is="if" value="{{expHandlers(cxPropType,\'==\',\'multisearch\')}}"><template case="true"> <li class="cxFakeMultipleSelectLi cxFakeMultipleSelectInput"> <input placeholder="{{cxPropSearchplaceholder}}"> </li> </template></template> </ul> </template></template> </template></template> </div> </div> </template></template> <template is="if" value="{{isError}}"><template case="true"> <crux-error-message data-zcqa="{{concat(cxPropErrorZcqaPrefix,cxPropErrorZcqa,cxPropErrorZcqaSuffix)}}" error-message="{{cxPropErrorMessage}}"></crux-error-message> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]},{type:"componentDynamic",position:[3]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1,3]}]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3,3,1]},{type:"for",position:[3,3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]}]}},default:{}}]}},default:{}}]},{type:"attr",position:[3,3,3]},{type:"if",position:[3,3,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]}]}},default:{}},{type:"componentDynamic",position:[3,3]},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]},{type:"componentDynamic",position:[3]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]},false:{dynamicNodes:[{type:"text",position:[1,0]},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]},{type:"componentDynamic",position:[3]}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1,3]}]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}],_templateAttributes:{type:"attr",position:[]},_observedAttributes:["cxPropOptions","localData","cxPropLimit","cxPropSearchplaceholder","cxPropPlaceholder","noResult","cxPropType","cxPropMaxsearch","cxPropUserValue","cxPropSystemValue","cxPropRemoveMultiple","cxPropTabindex","cxPropIconClass","cxPropDisabled","cxPropSelected","cxPropDisabledList","cxPropDisplayValue","cxPropClass","displayValue","selectValue","initialValue","cxPropZcqa","showFieldsDropdown","cxPropMandatory","optArr","optGroup","cxPropBoxButtonWidth","cxPropNoResultMessage","cxPropErrorMessage","isError","cxPropErrorZcqaPrefix","cxPropPosition","cxPropErrorZcqa","cxPropErrorZcqaSuffix","cxPropOptionZcqa","cxPropFreeze"],data:function(){return{cxPropOptions:Lyte.attr("array",{default:[]}),localData:Lyte.attr("array",{default:[]}),cxPropLimit:Lyte.attr("number",{default:50}),cxPropSearchplaceholder:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.globalsearch.search.title")}),cxPropPlaceholder:Lyte.attr("string"),noResult:Lyte.attr("boolean",{default:!1}),cxPropType:Lyte.attr("string",{default:"single"}),cxPropMaxsearch:Lyte.attr("number",{default:10}),cxPropUserValue:Lyte.attr("string",{default:"name"}),cxPropSystemValue:Lyte.attr("string",{default:"value"}),cxPropRemoveMultiple:Lyte.attr("boolean",{default:!1}),cxPropTabindex:Lyte.attr("number",{default:0}),cxPropIconClass:Lyte.attr("string",{default:"dropdown"}),cxPropDisabled:Lyte.attr("boolean",{default:!1}),cxPropSelected:Lyte.attr("string"),cxPropDisabledList:Lyte.attr("array",{default:[]}),cxPropDisplayValue:Lyte.attr("string"),cxPropClass:Lyte.attr("string",{default:""}),displayValue:Lyte.attr("array",{default:[]}),selectValue:Lyte.attr("string"),initialValue:Lyte.attr("string"),cxPropZcqa:Lyte.attr("string"),showFieldsDropdown:Lyte.attr("boolean",{default:!1}),cxPropMandatory:Lyte.attr("boolean",{default:!1}),optArr:Lyte.attr("array",{default:[]}),optGroup:Lyte.attr("boolean",{default:!1}),cxPropBoxButtonWidth:Lyte.attr("string",{default:"min-button"}),cxPropNoResultMessage:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.label.no.results.match")}),cxPropErrorMessage:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.orchestration.error.selectvalue")}),isError:Lyte.attr("boolean",{default:!1}),cxPropErrorZcqaPrefix:Lyte.attr("string"),cxPropPosition:Lyte.attr("string",{default:"down"}),cxPropErrorZcqa:Lyte.attr("string"),cxPropErrorZcqaSuffix:Lyte.attr("string"),cxPropOptionZcqa:Lyte.attr("string"),cxPropFreeze:Lyte.attr("boolean",{default:!1})}},focus:function(){this.$node.querySelector("lyte-dropdown")?this.$node.querySelector("lyte-dropdown").querySelector(".lyteDummyEventContainer").focus():this.$node.querySelector(".cxFakeDummyEventContainer").focus()},optTotalCount:function(e,t){var o=[],a=this.getData("cxPropUserValue");if("multi"==this.getData("cxPropType"))for(var r=0;r<e.length;r++)if(null!=e[r][a])o.push(e[r]);else{var i=Object.keys(e[r])[0];o.push(i);for(var s=0;s<e[r][i].length;s++)o.push(e[r][i][s])}else for(r=0;r<e.length;r++){i=Object.keys(e[r])[0];o.push(i);for(s=0;s<e[r][i].length;s++)o.push(e[r][i][s])}if(this.setData("optGroup",!0),"search"!=t){var l=this.getData("cxPropLimit");t=this.getData("cxPropType");this.setData("optArr",o),o.length<l?this.calculateDropItems(0,o.length):this.calculateDropItems(0,l)}else this.setData("localData",o)},scrollBox:function(e,t){var o=e.target,a=this.getData("optGroup");clearTimeout(this.timeout1),this.timeout1=setTimeout(function(){var e;e="multisearch"!=this.getData("cxPropType")?t.childComp.querySelector("lyte-input"):t.$node.querySelector("lyte-input"),o.scrollHeight<=Math.ceil(o.offsetHeight)+Math.ceil(o.scrollTop)&&(e&&0==e.getData("ltPropValue").length||null==e)&&(1==a?this.renderScroll("opt"):this.renderScroll("single"))}.bind(this),10)},renderScroll:function(e){var t,o=this.getData("currentPos");if(o!=(t="opt"!=e?this.getData("cxPropOptions").length:this.getData("optArr").length)){var a,r=this.getData("cxPropLimit");a=t-o<r?t-o:r,this.calculateDropItems(o,a)}},resetValues:function(){var e=this.getData("cxPropSelected"),t=this.getData("cxPropDisplayValue"),o=this.getData("cxPropDisabledList");this.setData("preventSelectedObs",!0),e&&(this.setData("cxPropSelected",""),this.setData("cxPropSelected",e),this.setData("cxPropDisplayValue",""),this.setData("cxPropDisplayValue",t)),this.$node.querySelector("lyte-dropdown")&&(this.$node.querySelector("lyte-dropdown").component.setData("ltPropDisabledList",[]),this.$node.querySelector("lyte-dropdown").component.setData("ltPropDisabledList",o))},calculateDropItems:function(e,t){var o=this.getData("cxPropSelected"),a=this.getData("optGroup"),r=this.getData("cxPropLimit"),i=this.getData("cxPropSystemValue"),s=this.getData("cxPropType"),l=[],n=0;t=e+t,null!=o&&o.match(/]/)?(o=JSON.parse(o)).constructor==Object&&(o=o[0]):o=[];if(!0!==a){var p=this.getData("cxPropOptions");if("single"===s||"multi"===s){!0;for(var c=e;c<t;c++)n<r&&l.push(p[c]),n++}else{!1;for(c=e;c<t;c++)n<r&&!o.contains(p[c][i])&&l.push(p[c]),n++}}else for(var d=this.getData("optArr"),u=e;u<t;u++)null!=d[u]&&n<r&&("string"!=typeof d[u]?n++:t++,l.push(d[u]));0==e?this.setData("localData",l):this.setData("localData",this.getData("localData").concat(l)),this.resetValues(),this.setData("currentPos",t)},checkSelectedValue:function(e,t,o,a,r,i,s,l){if(this.setData("preventSelectedObs",!0),"single"!=s&&"multi"!==s){for(var n=JSON.parse(r),p=[],c=[],d=[],u=0;u<n.length;u++)for(var h=0;h<e.length;h++)if(n[u]==e[h][o]){c.push(e[h]),p.push(e[h][o]),d.push(e[h][t]);break}this.setData("cxPropSelected",""),this.setData("cxPropSelected",p),this.setData("displayValue",c)}else if(l)for(u=0;u<e.length;u++){m=Object.keys(e[u])[0];for(h=0;h<e[u][m].length;h++){if(e[u][m][h][o]){if(e[u][m][h][o]==r){this.setData("cxPropSelected",""),this.setData("cxPropSelected",e[u][m][h][o]),this.setData("selectValue",e[u][m][h][t]);break}}else if(e[u][o]===r){this.setData("cxPropSelected",""),this.setData("cxPropSelected",e[u][o]),this.setData("selectValue",e[u][t]);break}}}else if("single"===s){for(u=0;u<e.length;u++)if(e[u][o]==r){this.setData("cxPropSelected",""),this.setData("selectValue",e[u][t]),this.setData("cxPropSelected",e[u][o]);break}}else for(u=0;u<e.length;u++){if(void 0!==e[u][o]&&e[u][o]==r){this.setData("cxPropSelected",""),this.setData("selectValue",e[u][t]),this.setData("cxPropSelected",e[u][o]);break}if(void 0===e[u][o]){var m=Object.keys(e[u])[0];for(h=0;h<e[u][m].length;h++)if(e[u][m][h][o]==r){this.setData("cxPropSelected",""),this.setData("selectValue",e[u][m][h][t]),this.setData("cxPropSelected",e[u][m][h][o]);break}}}},setSelectedData:function(){var e=this.getData("cxPropOptions"),t=this.getData("cxPropUserValue"),o=this.getData("cxPropSystemValue"),a=this.getData("cxPropDisplayValue"),r=this.getData("cxPropSelected"),i=this.getData("cxPropPlaceholder"),s=this.getData("cxPropType"),l=this.getData("optGroup");if(this.setData("preventSelectedObs",!0),null==r||""==r||a)null!=i&&""!=i||null!=a&&""!=a?"undefined"!==a&&""!==a&&void 0!==a&&this.setData("selectValue",a):null!=e&&"undefined"!=e&&(!0===s?void 0!==e[0][t]?(this.setData("initialValue",e[0][t]),this.setData("cxPropSelected",e[0][o])):(this.setData("initialValue",e[0][Object.keys(e[0])[0]][0][t]),this.setData("cxPropSelected",e[0][Object.keys(e[0])[0]][0][o])):(this.setData("initialValue",e[0][t]),this.setData("cxPropSelected",e[0][o])));else try{var n=JSON.parse(r);n.constructor==Object?(this.setData("selectValue",n[t]),this.setData("cxPropSelected",n[o])):this.checkSelectedValue(e,t,o,a,r,i,s,l)}catch(n){this.checkSelectedValue(e,t,o,a,r,i,s,l)}},validate:function(){var e=this.getData("cxPropSelected");this.getData("cxPropMandatory")&&!e&&this.setData("isError",!0)},init:function(){var e=this.getData("cxPropOptions"),t=this.getData("cxPropLimit"),o=this.getData("cxPropType"),a=this;this.$node.focus=function(){return this.component.focus()},a.setSelectedData(),e.length>0&&(null==e[0][a.getData("cxPropUserValue")]||"multi"===o?(a.setData("optGroup",!0),a.optTotalCount(e,"init")):e.length>t?a.calculateDropItems(0,t):a.calculateDropItems(0,e.length),a.setSelectedData()),this.getData("cxPropDisabled")&&this.setData("cxPropTabindex",-1),$L("crux-dropdown").keydown((function(e){32!==e.originalEvent.keyCode||a.getData("showFieldsDropdown")?32===e.originalEvent.keyCode&&a.getData("showFieldsDropdown")?e.target._callee.open():40===e.originalEvent.keyCode&&this.scrollBox():(a.setData("showFieldsDropdown",!0),"CRUX-DROPDOWN"===e.target._callee.nodeName?e.target._callee.querySelector("lyte-dropdown").open():e.target._callee.open())}))},errorObserver:function(){""!==this.getData("cxPropErrorMessage")?this.setData("isError",!0):this.setData("isError",!1)}.observes("cxPropErrorMessage"),arrObserver:function(){this.setData("preventSelectedObs",!1);var e=this.getData("cxPropType"),t=this.getData("cxPropOptions"),o=this.getData("cxPropSystemValue"),a=[],r=this.getData("cxPropSelected");if(this.getData("cxPropOptions").length>0){if(null==(t=this.getData("cxPropOptions"))[0][this.getData("cxPropUserValue")]||"multi"===e){if(this.setData("optGroup",!0),this.optTotalCount(t,"init"),this.setData("optGroup",!0),this.optTotalCount(t,"init"),r)for(var i=0;i<t.length;i++)if(null!=t[i][o])0===a.length&&(a=$L.search(t[i],o,r));else for(var s in t[i])if(0===a.length){a=$L.search(t[i][s],o,r)}}else if("single"===e){a=$L.search(t,o,r);var l=this.getData("cxPropLimit");a.length>0&&!this.getData("cxPropDisplayValue")&&this.setData("selectValue",a[0][this.getData("cxPropUserValue")]),t.length>l?this.calculateDropItems(0,l):this.calculateDropItems(0,t.length)}if(a.length<1&&!this.getData("cxPropPlaceholder"))if(t[0][o])this.setData("cxPropSelected",t[0][o]),this.setData("selectValue",t[0][this.getData("cxPropUserValue")]);else{s=Object.keys(t[0]);this.setData("cxPropSelected",t[0][s][0][o]),this.setData("selectValue",t[0][s][0][this.getData("cxPropUserValue")])}}}.observes("cxPropOptions.[]"),displayObserver:function(){this.setData("cxPropDisplayValue",this.getData("cxPropDisplayValue"))}.observes("cxPropDisplayValue"),selectObserver:function(e){if(!this.getData("preventSelectedObs"))if(""!=e.newValue){if(this.getData("cxPropOptions").length>0&&"multiple"!==this.getData("cxPropType")){var t=this.getData("cxPropOptions"),o=this.getData("cxPropSystemValue"),a=this.getData("cxPropUserValue");if("single"!==this.getData("cxPropType"))this.setSelectedData();else if(this.getData("optGroup")){var r;for(s=0;s<t.length;s++){r=Object.keys(t[s])[0];for(var i=0;i<t[s][r].length;i++){if(t[s][r][i][o]){if(t[s][r][i][o]==e.newValue){this.setData("cxPropSelected",t[s][r][i][o]),this.setData("selectValue",t[s][r][i][a]);break}}else if(t[s][o]===e.newValue){this.setData("cxPropSelected",t[s][o]),this.setData("selectValue",t[s][a]);break}}}}else if(!this.getData("cxPropDisplayValue"))if(""!==e.newValue)for(var s=0;s<t.length;s++)t[s][o]===e.newValue&&(this.setData("selectValue",t[s][a]),this.setData("selectedValueIndex",s));else this.getData("cxPropPlaceholder")?this.setData("selectValue",""):(this.setData("selectValue",t[0][a]),this.setData("selectedValueIndex",0))}}else"multiple"===this.getData("cxPropType")||"multisearch"===this.getData("cxPropType")?this.setData("displayValue",[]):this.setData("selectValue","")}.observes("cxPropSelected"),actions:{showDropDown:function(){this.setData("showFieldsDropdown",!0)}},methods:{dropBoxOpen:function(e,t){var o=this.getData("cxPropOptions");this.setData("cxPropOptions",[]),this.setData("cxPropOptions",o),setTimeout((function(){var e=t.childComp.querySelector("lyte-input");e&&e.focus()}),100),$L(t.childComp.lastElementChild).scrollTop(0),this.getMethods("onShow")&&this.executeMethod("onShow",e,t)},optionSelect:function(e,t,o,a){this.setData("selectValue",a.innerText),this.setData("cxPropSelected",t),this.getMethods("onOptionSelect")&&this.executeMethod("onOptionSelect",e,t,o,a)},onBeforeSelect:function(e,t,o,a){this.getMethods("beforeSelect")&&this.executeMethod("beforeSelect",e,t,o,a)},hideDropbox:function(e,t){this.setData("preventSelectedObs",!1);var o=t.childComp?t.childComp.querySelector("lyte-input"):void 0;o&&o.ltProp("value",""),this.getMethods("onHide")&&this.executeMethod("onHide",e,t),this.getData("noResult")&&this.setData("noResult",!1)},beforeHideDropbox:function(e,t){if(this.getMethods("onBeforeHide"))return this.executeMethod("onBeforeHide",e,t)},addDropItem:function(e,t,o,a,r){var i,s=this.getData("cxPropType"),l=this.getData("cxPropOptions"),n=this.getData("cxPropSystemValue");if("multisearch"==s?i=this.$node.querySelector(".lyteInput"):"multiple"==s&&(i=a.childComp.querySelector("lyte-input")),i&&(i.focus(),i.ltProp("value","")),this.getData("cxPropSelected")&&this.getData("cxPropSelected").length>0)var p=JSON.parse(this.getData("cxPropSelected"));else p=[];for(var c=this.getData("displayValue"),d=0;d<l.length;d++)if(t==l[d][n]){c.push(l[d]),p.contains(t)||p.push(l[d][n]);break}this.setData("cxPropSelected",""),this.setData("cxPropSelected",JSON.stringify(p)),this.setData("displayValue",[]),this.setData("displayValue",c),this.getMethods("onAdd")&&this.executeMethod("onAdd",e,t,o,a,r)},beforeAddDropItem:function(e,t,o,a,r){this.getMethods("onBeforeAdd")&&this.executeMethod("onBeforeAdd",e,t,o,a,r)},removeDropItem:function(e,t,o,a,r,i){this.getData("displayValue");var s=[],l=[];if(this.getData("cxPropSelected")&&this.getData("cxPropSelected").length>0){for(var n=JSON.parse(this.getData("cxPropSelected")),p=0;p<n.length;p++)t[0]!=n[p]&&(s.push($L.search(this.getData("cxPropOptions"),this.getData("cxPropSystemValue"),n[p],"equals")[0]),l.push(n[p]));this.setData("displayValue",s),this.setData("cxPropSelected",JSON.stringify(l))}else this.setData("displayValue",s),this.setData("cxPropSelected","");$L.search(this.getData("localData"),this.getData("cxPropSystemValue"),t[0],"equals")[0]||Lyte.arrayUtils(this.getData("localData"),"push",$L.search(this.getData("cxPropOptions"),this.getData("cxPropSystemValue"),t[0],"equals")[0]),this.getMethods("onRemove")&&this.executeMethod("onRemove",e,t,a,r,i)},beforeRemoveDropItem:function(e,t,o,a,r,i){this.getMethods("onBeforeRemove")&&this.executeMethod("onBeforeRemove",e,t,a,r,i)},scrollDropBox:function(e,t){this.scrollBox(e,t)},beforeShow:function(e,t){var o=this.getData("cxPropType");if(("single"===o||"multi"===o)&&this.getData("cxPropOptions").length<1&&this.setData("noResult",!0),this.getMethods("onBeforeShow"))return this.executeMethod("onBeforeShow",e,t)},onSearch:function(e,t){var o=e.newValue.replace(/^\s+/g,""),a=this.getData("cxPropOptions"),r=this.getData("cxPropUserValue"),i=this.getData("cxPropType"),s=[],l=[];if(o.length>0){if(void 0!==a[0][r]&&o.length>0&&"multi"!=i)l=$L.search(a,r,o,"includes",{caseSensitive:!1}),this.setData("localData",l);else if(o.length>0)a.forEach((function(e){if(null!=e[r]){var t=$L.search(e,r,o,"includes",{caseSensitive:!1});t.length>0&&s.push(t[0])}else for(var a in e){var i={};i[a]=$L.search(e[a],r,o,"includes",{caseSensitive:!1}),i[a].length>0&&s.push(i)}})),this.optTotalCount(s,"search");else if(0==o.length){var n=this.getData("optGroup"),p=this.getData("cxPropLimit");1!=n?a.length>p?this.calculateDropItems(0,p):this.calculateDropItems(0,a.length):this.optTotalCount(a,"empty")}0!=o.length&&0==s.length&&0===l.length?this.setData("noResult",!0):this.setData("noResult",!1),this.getData("localData").length>0&&(-1==this.getData("localData")[0].id?this.getData("localData")[1].isFirst=!0:this.getData("localData")[0].isFirst=!0);var c=this.getData("localData");this.setData("localData",[]),this.setData("localData",c),this.resetValues()}else this.setData("noResult",!1),this.data.localData.length&&(-1==this.getData("localData")[0].id?this.getData("localData")[1].isFirst=!1:this.getData("localData")[0].isFirst=!1),this.getData("optGroup")?(this.optTotalCount(a,"search"),this.setSelectedData()):a.length>p?this.calculateDropItems(0,p):this.calculateDropItems(0,a.length),this.setData("currentPos",this.getData("cxPropLimit"))}}}),Lyte.Component.registerHelper("cxPropArrayValue",(function(e){return e[Object.keys(e)[0]]})),Lyte.Component.registerHelper("cxPropCheckKey",(function(e){return e.hasOwnProperty(this.getData("cxPropUserValue"))})),Lyte.Component.registerHelper("cxPropKeyValue",(function(e){if("object"!=typeof e)return!0})),Lyte.Component.registerHelper("cxPropIsDisabledValue",(function(e){return this.getData("cxPropDisabledList").includes(e)})),Lyte.Mixin.register("crux-element-validation",{isValidDate:function(e,t){if(!e)return!1;t=(t=(t=t||this.getData("cxPropDatePattern")).toUpperCase()).replace(/'/g,""),e=e.replace(/'/g,"");try{return $L.moment(e,t,{i18n:!0}).validate()}catch(e){return!1}},isEmoji:function(e){return!!/([\uD800-\uDBFF][\uDC00-\uDFFF])/i.test(e)},SplitWord:function(e){e=e.split(",");for(var t,o,a=[],r=0;r<e.length;r++)-1!=(o=e[r].indexOf("\\"))&&e[r].length-2==o?(t=e[r].slice(0,e[r].length-2)+","+e[r+1],Lyte.arrayUtils(a,"push",t),r+=1):""!=e[r]&&Lyte.arrayUtils(a,"push",e[r]);return 1==a.length?a[0]:a},dateValidate:function(e){var t=this.isValidDate(e.value.trim(),this.getData("cxPropDatePattern"));if(!t){var o=this.getData("cxPropField"),a=(o.errorFieldLabel?o.errorFieldLabel:o.field_label).replace(/_____/g,")").replace(/____/g,"(").replace(/___/g,"."),r=_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(a));this.showAlert(r,e),e.setAttribute("autocomplete","off")}return t},patternValidate:function(e,t,o,a){!this.isValidDate(o.value,this.getData("cxPropDatePattern"))&&this.$node.querySelector("lyte-input").calendarDiv&&this.$node.querySelector("lyte-input").calendarDiv.querySelector("lyte-calendar").revertToToday()},showAlertMsg:function(e){var t=document.getElementById("cruxElementAlert");t||(t=Lyte.Component.render("lyte-alert",{id:"cruxElementAlert",ltPropShowCloseButton:!1,ltPropButtonPosition:"center",ltPropButtons:[{type:"accept",text:_cruxUtils.getI18n("crm.mb.newversion.msg4"),appearance:"primary"}],ltPropContentAlign:"center"},"body"));var o=document.createElement("span");o.innerHTML=e,t.ltProp({secondaryMessage:o.innerText,top:"0px"}),t.ltProp("show",!0);var a=this;t.setMethods({onClose:function(){a&&a.$node.querySelector("lyte-input")?a.$node.querySelector("lyte-input").focus():a&&a.$node.querySelector("lyte-number")&&a.$node.querySelector("lyte-number").focus()}.bind(this)})},showAlert:function(e,t){if(this.getMethods("onError")&&!this.executeMethod("onError",e,this))return!1;t&&t.focus(),this.showAlertMsg(e)},showMsgBox:function(e,t,o){if(this.getMethods("onError")&&!this.executeMethod("onError",e,this))return!1;var a=document.getElementById("lyteMsgBox");o||(o={}),o.ltPropType=t,o.ltPropMessage=e,o.id="lyteMsgBox",a&&a.ltProp("show",!1),(a=Lyte.Component.render("lyte-messagebox",o,"body")).setMethods("onClose",(function(e){document.body.removeChild(e.$node)})),a.ltProp("show",!0)},getDateInUserDatePattern:function(e,t){return t=(t=t||this.getData("cxPropDatePattern")).toUpperCase(),$L.moment(e).format(t)},getTimeInUserFormat:function(e,t){var o=e.getHours(),a=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),r="";if("12"==(t=t||this.getData("cxPropTimeFormatInput"))){var i="PM";o>12?r=(o-=12)<10?"0"+o:o:0==o?(r="12",i="AM"):(r=o,o<10&&(r="0"+r),12!=o&&(i="AM")),r+=":"+a+" "+_cruxUtils.getI18n(i)}else o<10&&o.toString().length<2&&(o="0"+o),r=o+":"+a;return r},getDateObject:function(e,t,o){o=(o=o?o.toUpperCase():this.getData("cxPropDatePattern").toUpperCase()).replace(/'/g,"");var a=$L.moment(e,o,{i18n:!0}).getDObj();if(!a)return"";if(t){var r=t.match(/(\d{1,2}):(\d{1,2})/),i=(t=t.replace(_cruxUtils.getI18n("AM"),"AM").replace(_cruxUtils.getI18n("PM"),"PM")).match(/([A,P]M)/);if(t=t.split(":"),i){var s=this.convertTimeTo24HoursFormat(parseInt(r[0]),i[1]);a.setHours(s)}else a.setHours(t[0]);a.setMinutes(t[1].split(" ")[0])}return a},convertTimeTo24HoursFormat:function(e,t){return"am"==(t=t.toLowerCase())?0==e?12:12==e?0:e:"pm"==t?12==e?e:e+12:t==_cruxUtils.getI18n("AM")||_cruxUtils.getI18n("am")==t?0==e?12:12==e?0:e:t==_cruxUtils.getI18n("PM")||_cruxUtils.getI18n("pm")==t?12==e?e:e+12:void 0},isValidInteger:function(e){return""==e||!(isNaN(e)||-1!=e.indexOf(".")||!/^-?\d+(,(\d)+)*$/.test(e))},isValidDecimal:function(e){if(""==e)return!0;var t=/^-?(\d+)?(\.){0,1}(\d+)*$/.exec(e);return!!t&&(null!=t[1]||null!=t[3])},decimalLengthCheck:function(e,t){if(""==e)return!0;var o=/^-?(\d+)?(\.){0,1}(\d+)*$/.exec(e);if(!o)return!1;var a=o[3];return t=t||this.getData("cxPropField"),!(a&&a.length>t.decimal_place)},convertCurrencyValue:function(e,t,o,a,r,i,s,l,n,p){var c=this.getNumberWithCommas(parseFloat(t),",",".");o=o||this.getData("cxPropDefaultRoundOff");var d=parseFloat(t),u=(parseInt(d+"")+"").length,h=null!=p?p:Number(parseFloat(t).toPrecision(u+o)).toFixed(o);if(n=0!=n,(a=a||this.getData("cxPropCurrencyDetails"))[r=r||this.getData("cxPropCurrencyCode")]&&e){o=parseInt(a[r].decimals);var m,y=parseInt(a[e].decimals);m=s?t*s:i?t/parseFloat(i)+"":t/parseFloat(a[e].er)+"";var f=a[e].format.split("|"),g=a[r].format.split("|"),v=null!=p?p:this.getNumberWithCommas(parseFloat(t).toFixed(y),f[0],f[1]);if(c=n?a[e].symbol+" ":"",e==r||0==v)c+=v;else if(l)c=c+v+" ("+a[r].symbol+" "+this.getNumberWithCommas(l,g[0],g[1])+")";else{var x=parseFloat(m).toPrecision((parseInt(m)+"").length+o);c=c+v+" ("+a[r].symbol+" "+this.getNumberWithCommas(parseFloat(x).toFixed(o),g[0],g[1])+")"}}else this.getData("cxPropDefaultOrgCurrency")?(f=this.getData("cxPropDefaultOrgCurrency")&&"object"==typeof this.getData("cxPropDefaultOrgCurrency")&&this.getData("cxPropDefaultOrgCurrency").format?this.getData("cxPropDefaultOrgCurrency").format.split("|"):[",","."],c=n?this.getData("cxPropDefaultOrgCurrency")+" ":"",c+=this.getNumberWithCommas(h,f[0],f[1])):a&&r&&a[r]&&(f=a[r].format.split("|"),c=n?a[r].symbol+" ":"",c+=this.getNumberWithCommas(h,f[0],f[1]));return c},getNumberWithCommas:function(e,t,o){t=t||",",o=o||".";var a=e.toString().split(".");return a[0]=a[0].replace(/\B(?=(\d{3})+(?!\d))/g,t),a.join(o)},isValidPhoneNo:function(e,t){if(!this.validateLength(e,t))return!1;var o=e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/[;,](?!.)/,"")).replace(/\s{2,}/g," ")).replace(/\s-/g,"-")).replace(/-\s/g,"-")).replace(/\s\./g,".")).replace(/\.\s/g,".")).replace(/\s;/g,";")).replace(/;\s/g,";")).replace(/\s,/g,",")).replace(/,\s/g,",")).replace(/\(\s/g,"(")).replace(/\s\)/g,")");if(t=(o=o.replace(/\)(?![\s;,\-\/])/g,") ")).length,""==o)return!1;for(var a=o[0],r=1;r<t;r++)"("==o[r]&&" "!=o[r-1]?a=a+" "+o[r]:a+=o[r];return a=(a=a.replace(/^\s+/,"")).replace(/\s+$/,""),!!/^([\+]?)(?![\.-])((?=([\.\/-]?[ ]?[\da-zA-Z]+))\3+|([ ]?\((?![\.-])(?=[ \.-]?[\da-zA-Z]+)([ \.-]?[\da-zA-Z]+)+\)(?!\.)([ -][\da-zA-Z]+)?)+)+((([,]+)?[;]?([\*#]+)?[\da-zA-Z]+)+)?[#;]?$/.test(e=a)},isValidTwitter:function(e){return""==e||e.trim().length<=50&&e.trim().length>0&&/^[a-zA-Z0-9_]*$/.test(e)},isValidWebUrl:function(e){return""==e||new RegExp('^(http:\\/\\/www.|https:\\/\\/www.|ftp:\\/\\/www.|www.|http:\\/\\/|https:\\/\\/|ftp:\\/\\/|){1}[^\0- "-\'*-,.-/:-@[-^`{}-]+(\\.[^\0- "$-,.-/<->@[-^`{}-]+)+(/[^\0- "(-)<>^{}-}]*)*$').test(e)},getNumberValueForView:function(e,t,o,a,r,i,s,l,n,p,c,d,u){if("currency"==t||39==a||36==a||77==a){if(r=r||this.getData("cxPropCurrencyDetails"),o&&r){for(var h in r)if(r[h].symbol==o){o=h;break}}else o=void 0;e=this.convertCurrencyValue(o,e,i,r,s,l,n,p,c,d)}else 38!=a&&34!=a&&40!=a&&"double"==t&&e%1==0&&(e=e/1+".0");return u&&"undefined"!=typeof Search&&Search.formatNumber?Search.formatNumber(e):e.toString()},validateNumberField:function(e,t,o){return e&&""!=e.trim()?o&&e.length>o?(this.getMethods("onError")?this.executeMethod("onError",this.errorCodes.ERR04,this):this.setData("cxPropErrorMessage",_cruxUtils.getI18n("crm.field.length.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(t.field_label))),!1):"integer"==t.data_type||"bigint"==t.data_type?((a=this.isValidInteger(e))||(this.getMethods("onError")?this.executeMethod("onError",this.errorCodes.ERR02,this):this.setData("cxPropErrorMessage",_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(t.field_label)))),a):((a=this.isValidDecimal(e))?(a=this.decimalLengthCheck(e,t))||(this.getMethods("onError")?this.executeMethod("onError",this.errorCodes.ERR03,this):this.setData("cxPropErrorMessage",_cruxUtils.getI18n("crm.field.valid.decimal.check2",Lyte.Component.registeredHelpers.cruxEncodeHTML(t.field_label),t.decimal_place))):this.getMethods("onError")?this.executeMethod("onError",this.errorCodes.ERR02,this):this.setData("cxPropErrorMessage",_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(t.field_label))),a):this.validateMandatory(!0);var a},validatePhoneNumber:function(e,t){if(!t||""==t.trim())return this.validateMandatory(!0)?t?(this.getMethods("onError")?this.executeMethod("onError",this.errorCodes.ERR02,this):this.setData("cxPropErrorMessage",_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(e.field_label))),this.$node.querySelector("lyte-input")&&this.$node.querySelector("lyte-input").focus(),!1):(this.setData("cxPropErrorMessage",""),!0):(this.$node.querySelector("lyte-input")&&this.$node.querySelector("lyte-input").focus(),!1);var o;if(this.data&&this.data.cxPropEnableCountryCode&&t.startsWith("+"))try{o=ZlibPhoneNumber.isValidNumber(phoneNumber)}catch(e){murphy.error(e),o=!1}else o=this.isValidPhoneNo(t);return o?this.setData("cxPropErrorMessage",""):(this.getMethods("onError")?this.executeMethod("onError",this.errorCodes.ERR02,this):this.setData("cxPropErrorMessage",_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(e.field_label))),this.$node.querySelector("lyte-input")&&this.$node.querySelector("lyte-input").focus()),o},errorCodes:{ERR01:"value_empty",ERR02:"value_invalid",ERR03:"decimal_check",ERR04:"maxlength_check"},validateLength:function(e,t){return!((t=t||this.data.cxPropMaxlength)&&e.length>t&&(this.getMethods("onError")?this.executeMethod("onError",this.errorCodes.ERR04,this):this.setData("cxPropErrorMessage",_cruxUtils.getI18n("crm.field.length.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(this.getData("cxPropField").field_label))),this.$node&&this.$node.querySelector("lyte-input")&&this.$node.querySelector("lyte-input").focus(),1))},validateText:function(e,t,o,a){return this.validateMandatory(!t||""==t.trim(),void 0,e,a)?!(t&&!this.validateLength(t,o)||(this.setData("cxPropErrorMessage",""),0)):(this.$node&&this.$node.querySelector("lyte-input")&&this.$node.querySelector("lyte-input").focus(),!1)},phoneClick:function(e,t,o,a){event.preventDefault(),"undefined"!=typeof ctiApiNotifier&&ctiApiNotifier.click2Call(e,Crm.userDetails.ZGID,Crm.userDetails.USER_ID,t,"",o,a),event.stopPropagation()},phoneMouseOver:function(e){e.querySelector("a")&&(e.querySelector("a").style.visibility="visible")},phoneMouseOut:function(e){e.querySelector("a")&&(e.querySelector("a").style.visibility="hidden")},stopPropagation:function(){return event.stopPropagation(),!1},toPrecision:function(e,t){var o=(e=e.toString()).split("."),a=o[0],r=a.length;o.length<2&&(o[1]="");for(var i=r,s=0;i<t;i++,s++)0==s&&(a+="."),o[1][s]?a+=o[1][s]:a+="0";return a},getDateObjectFromString:function(e,t,o){if(!e)return new Date;if(!e.getMonth){t||e.indexOf(":")>-1&&(o=o||Crm.userDetails.TIME_FORMAT,(e.indexOf("AM")>1||e.indexOf("PM")>1)&&(o=o.replace("a","A")),t+=" "+o);var a=$L.moment(e.trim(),t.toUpperCase().trim()).getDObj();return a||(a=new Date),a}return e},checkBrackets:function(e){var t=[];for(var o in e)if("("==e[o])t.push(e[o]);else if(")"==e[o]){if(!t.length)return!1;t.pop()}return!t.length},checkCorrectInputEle:function(e){for(var t=e.split(""),o=["(",")"],a=0;a<t.length;a++){var r=t[a];if(-1!=o.indexOf(r)){var i=a+1,s=/\d/,l=a-1;if("("==r){if(null!=t[l]&&(s.test(t[l])||")"==t[l]||"."==t[l]))return!1;if(null!=t[i]&&-1!=["/","*"].indexOf(t[i]))return!1}else if(")"==r){if(null!=t[i]&&(s.test(t[i])||"."==t[i]||"("==t[l]))return!1;if(null!=t[l]&&(-1!=["+","-","*","/"].indexOf(t[l])||"."==t[l]))return!1}}}return!0},clearLeadingZero:function(e){for(var t,o=/[\d\.]+/gm;null!==(t=o.exec(e));)-1==(t=t.toString()).indexOf(".")&&null!=t.match(/(^0{1,}(?!($|\.)))/g)&&(e=e.replace(t,t.replace(/(^0{1,}(?!($|\.)))/g,"")));return e},checkDotCorrectInput:function(e){for(var t=e.split(/[+\-*/,]+/),o=t.length,a=0;a<o;a++)if(t[a].split(".").length>2)return!1;return!0},getDateTimeInUserFormat:function(e,t,o,a){return this.getDateInUserDatePattern(e)+" "+this.getTimeInUserFormat(e,t,a)},showHideInfoTooltip:function(e){var t;e?((t=$L(e)).addClass("cxCurrentHovercard"),t.next()[0].ltProp("show",!0)):(t=this.$node.querySelector(".cxCurrentHovercard"),$L(t).removeClass("cxCurrentHovercard"))},validateMandatory:function(e,t,o,a){return o=o||this.data.cxPropField,!((a=a||this.data.cxPropLayout)&&o[a]?o[a].required:o.required)||!e||(void 0!==t?t():this.getMethods("onError")?this.executeMethod("onError",this.errorCodes.ERR01,this):this.setData("cxPropErrorMessage",_cruxUtils.getI18n("crm.field.empty.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(this.getData("cxPropField").field_label))),!1)}}),Lyte.Component.register("crux-boolean-component",{_template:'<template tag-name="crux-boolean-component"><template is="if" value="{{lyteViewPort}}"><template case="true"><dummy-port-element></dummy-port-element> <div id="cruxLoadingElem" class="cxLoadOnViewElement"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxLoadOnViewLabel"> {{cxPropField[cxPropFieldKey]}} <div class="cxLoadOnViewLoader"></div> </div> </template></template> <div class="cxLoadOnViewValue"> {{cxPropValue}} <div class="cxLoadOnViewLoader"></div> </div> </div> <dummy-port-element></dummy-port-element></template><template case="false"> <template is="switch" value="{{cxPropFrom}}"><template case="view"> <template is="if" value="{{cxPropValue}}"><template case="true"> <span id="{{cxPropId}}" class="criteria-yes"></span> </template><template case="false"><template is="if" value="{{cxPropEmptyValue}}"><template case="true">{{cxPropEmptyValue}}</template></template></template></template> </template><template case="criteria"></template><template case="filter"> <lyte-dropdown on-option-selected="{{method(\'onOptionSelected\')}}" lt-prop-yield="true" lt-prop-tabindex="1" lt-prop-selected="{{value}}" class="{{if(ifEquals(cxPropAppearance,\'flat\'),\'cxFlatDropdown\',\'cxBoxDropdown\')}} {{cxPropClass}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-button data-zcqa="{{cxPropZcqa}}"> <span class="lyteMarginRight cruxBoolColor">{{selectedLabel}}</span> <lyte-icon class="dropdown"></lyte-icon> </lyte-drop-button> <lyte-drop-box class="cxDropbox"> <lyte-drop-body> <template is="for" items="{{cxPropConditions}}" item="item" index="index"> <lyte-drop-item data-value="{{item.value}}" class="criteria-option {{if(ifEquals(value,item.value),\'criteria-option-selected\')}} {{if(ifEquals(cxPropFrom,\'criteria\'),\'criteria-option-from\')}}" data-zcqa="{{concat(cxPropField.field_label,\'_\',item.label)}}">{{item.label}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </template><template case="create"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxElementLabel {{cxPropLabelClass}}"> {{cxPropField[cxPropFieldKey]}} <template is="if" value="{{cxPropInfoTooltip}}"><template case="true"> <span class="dIB vam cxInfoIcon" onmouseenter="{{action(\'showInfoTooltip\',this)}}"></span> <lyte-hovercard lt-prop-placement="topLeft" lt-prop-keep-alive="true" lt-prop-popover-wrapper-class="cxElementsHovercard" lt-prop-origin-elem=".cxCurrentHovercard" on-hovercard-hide="{{method(\'hideInfoTooltip\')}}"> <template is="registerYield" yield-name="hoverCardYield"> <lyte-hovercard-content class="cxElementsHoverCardContent"> {{cxPropInfoTooltip}} </lyte-hovercard-content> </template> </lyte-hovercard> </template></template> </div> </template></template> <div class="cxElementValue {{if(cxPropDisabled,\'cxElementDisabled\',\'\')}}"> <lyte-checkbox lt-prop-name="{{cxPropName}}" id="{{cxPropId}}" lt-prop-title="{{cxPropTooltip}}" lt-prop-tooltip-config="{{cxPropTooltipConfig}}" lt-prop-checked="{{lbind(cxPropValue)}}" lt-prop-type="default" lt-prop-disabled="{{cxPropDisabled}}" on-changed="{{method(\'onChange\')}}" onclick="{{action(\'onClicked\')}}" class="{{cxPropClass}} {{if(isError,\'cxErrorBox\')}} {{if(cxPropField.required,\'mandatoryField\',\'\')}}" data-zcqa="{{cxPropZcqa}}" lt-prop-tooltip-class="{{cxPropTooltipClass}}" lt-prop-tooltip-style="font-size : 11px; margin: 10px;" lt-prop-tabindex="{{cxPropTabIndex}}" lt-prop-aria="{{cxPropAria}}" lt-prop-aria-attributes="{{cxPropAriaAttributes}}" lt-prop-class="{{cxPropInputClass}}"></lyte-checkbox> <template is="if" value="{{isError}}"><template case="true"> <crux-error-message error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-field="{{cxPropField}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}"> <template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}" cx-field="{{cxPropField}}"></lyte-yield></template> </crux-error-message> </template></template> </div> </template></template> </template></template></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]},{type:"attr",position:[2,1]},{type:"if",position:[2,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]}]}},default:{}},{type:"text",position:[2,3,1]},{type:"componentDynamic",position:[4]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{view:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}}]}},default:{}}]},criteria:{dynamicNodes:[],additional:{next:"filter"}},filter:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,3]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1,1]},{type:"for",position:[3,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3,1]},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[1]}]},create:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"componentDynamic",position:[3,1]},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["lyteViewPort","cxPropFrom","cxPropField","cxPropFieldKey","cxPropValue","cxPropConditions","selectedLabel","cxPropDisabled","cxPropZcqa","cxPropValue","cxPropErrorMessage","cxPropType","cxPropId","cxPropName","cxPropClearErrorMessage","cxPropLabelClass","cxPropReadonly","cxPropClass","lyteUnbound","cxPropEmptyValue","cxPropTooltip","cxPropErrorYield","cxPropInfoTooltip","cxPropAppearance","cxPropAria","cxPropAriaAttributes","isError","cxPropTooltipConfig","cxPropTooltipClass","cxPropErrorZcqaPrefix","cxPropErrorZcqaSuffix","cxPropErrorClass","cxPropInputClass","cxPropErrorSpanClass"],data:function(){return{lyteViewPort:Lyte.attr("boolean",{default:!1}),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropField:Lyte.attr("object",{default:{}}),cxPropFieldKey:Lyte.attr("string",{default:""}),cxPropValue:Lyte.attr("boolean"),cxPropConditions:Lyte.attr("array",{default:[{value:"1",label:_cruxUtils.getI18n("crm.label.selected")},{value:"0",label:_cruxUtils.getI18n("crm.label.notSelected")}]}),selectedLabel:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.select")}),cxPropDisabled:Lyte.attr("boolean",{default:!1}),cxPropZcqa:Lyte.attr("string"),cxPropValue:Lyte.attr("boolean"),cxPropErrorMessage:Lyte.attr("string",{default:""}),cxPropType:Lyte.attr("string"),cxPropId:Lyte.attr("string",{default:""}),cxPropName:Lyte.attr("string",{default:""}),cxPropClearErrorMessage:Lyte.attr("boolean",{default:!0}),cxPropLabelClass:Lyte.attr("string",{default:""}),cxPropReadonly:Lyte.attr("boolean",{default:!1}),cxPropClass:Lyte.attr("string",{default:""}),lyteUnbound:Lyte.attr("boolean",{default:!1}),cxPropEmptyValue:Lyte.attr("string",{default:""}),cxPropTooltip:Lyte.attr("string",{default:""}),cxPropErrorYield:Lyte.attr("boolean",{default:!1}),cxPropInfoTooltip:Lyte.attr("string",{default:""}),cxPropAppearance:Lyte.attr("string",{default:"flat"}),cxPropAria:Lyte.attr("boolean",{default:!1}),cxPropAriaAttributes:Lyte.attr("object",{default:{}}),isError:Lyte.attr("boolean",{default:!1}),cxPropTooltipConfig:Lyte.attr("string",{default:'{"position": "followcursor", "appearance": "box"}'}),cxPropTooltipClass:Lyte.attr("string",{default:"cxtooltip"}),cxPropErrorZcqaPrefix:Lyte.attr("string",{default:""}),cxPropErrorZcqaSuffix:Lyte.attr("string",{default:"Error"}),cxPropErrorClass:Lyte.attr("string"),cxPropInputClass:Lyte.attr("string",{default:""}),cxPropErrorSpanClass:Lyte.attr("string")}},actions:{onClicked:function(){this.getMethods("onClicked")&&this.executeMethod("onClicked")},showInfoTooltip:function(e){this.showHideInfoTooltip(e)}},methods:{onOptionSelected:function(e,t){this.setData("value",t),this.prevent=!0,this.setData("cxPropValue","1"==t),this.setSelectedLabel(),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue())},onChange:function(){this.data.cxPropClearErrorMessage&&this.setData("cxPropErrorMessage",""),this.getMethods("onValueChange")&&(this.setData("cxPropValue",this.$node.querySelector("lyte-checkbox").ltProp("checked")),this.executeMethod("onValueChange",this.getData("cxPropValue")))},hideInfoTooltip:function(){this.showHideInfoTooltip()}},init:function(){var e=this.data.cxPropFrom;"criteria"!=e&&"filter"!=e||null!=this.data.cxPropType||this.data.cxPropNoneSelected?(Lyte.arrayUtils(this.data.cxPropConditions,"unshift",[{value:"-1",label:_cruxUtils.getI18n("crm.select")}]),this.data.value="-1"):(null==this.data.cxPropValue?(this.data.value="1",this.data.cxPropValue=!0):this.data.value=this.data.cxPropValue?"1":"0",this.setSelectedLabel()),this.getData("cxPropDisabled")&&!this.data.cxPropTooltip&&this.setData("cxPropTooltip",_cruxUtils.getI18n("crm.lable.read.only"))},getValue:function(){return"-1"==this.data.value&&"create"!=this.data.cxPropFrom?-1:!!this.data.cxPropValue&&this.data.cxPropValue},validate:function(){if("create"==this.data.cxPropFrom){var e=this.validateMandatory(!this.data.cxPropValue);return e&&this.setData("cxPropErrorMessage",""),e}return!0},setSelectedLabelObs:function(){this.prevent||(this.setData("value",1==this.data.cxPropValue?"1":"0"),delete this.prevent,this.setSelectedLabel())}.observes("cxPropValue"),setSelectedLabel:function(){for(var e=this.data.value,t=this.data.cxPropConditions,o=0;o<t.length;o++)if(t[o].value==e){this.setData("selectedLabel",t[o].label);break}},observeErrorMessage:function(){this.setData("isError",""!=this.data.cxPropErrorMessage)}.observes("cxPropErrorMessage"),observeMandatory:function(){this.$node.querySelector("lyte-checkbox")&&"create"==this.getData("cxPropFrom")&&(this.getData("cxPropField").required?this.$node.querySelector("lyte-checkbox").classList.add("mandatoryField"):this.$node.querySelector("lyte-checkbox").classList.remove("mandatoryField"))}.observes("cxPropField.required").on("didConnect"),observeIsError:function(){"create"==this.getData("cxPropFrom")&&(this.getData("isError")?this.$node.querySelector("lyte-checkbox").classList.add("cxErrorBox"):this.$node.querySelector("lyte-checkbox").classList.remove("cxErrorBox"))}.observes("isError","lyteViewPort").on("didConnect")},{mixins:["crux-element-validation"]}),Lyte.Component.register("crux-date-component",{_template:'<template tag-name="crux-date-component"><template is="if" value="{{lyteViewPort}}"><template case="true"><dummy-port-element></dummy-port-element> <div id="cruxLoadingElem" class="cxLoadOnViewElement"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxLoadOnViewLabel"> {{cxPropField[cxPropFieldKey]}} <div class="cxLoadOnViewLoader"></div> </div> </template></template> <div class="cxLoadOnViewValue"> {{cxPropValue}} <div class="cxLoadOnViewLoader"></div> </div> </div> <dummy-port-element></dummy-port-element></template><template case="false"> <template is="switch" value="{{cxPropFrom}}"><template case="view"><span id="{{cxPropId}}" class="cxElementViewValue"><template is="if" value="{{cxPropValue}}"><template case="true">{{cxPropValue}}</template><template case="false"><template is="if" value="{{cxPropEmptyValue}}"><template case="true">{{cxPropEmptyValue}}</template></template></template></template></span></template><template case="criteria"> <lyte-input lt-prop-name="{{cxPropName}}" id="{{cxPropId}}" lt-prop-boundary="{{cxPropBoundary}}" class="{{cxPropClass}} w100per {{if(ifEquals(cxPropAppearance,\'box\'),\'cxBoxInput\',\'cxFlatInput\')}}" lt-prop-type="date" lt-prop-id="searchValue" lt-prop-calendar-class="cxCriteriaCalendar" lt-prop-placeholder="{{cxPropDatePattern}}" lt-prop-format="{{format}}" on-navigate="{{method(\'navigation\')}}" lt-prop-bind-to-body="false" lt-prop-start-week-day="{{cxPropStartWeekDay}}" lt-prop-current-date="{{cxPropValue}}" lt-prop-yield="true" on-date-change="{{method(\'onDateChange\')}}" data-zcqa="{{cxPropZcqa}}" lt-prop-min-date="{{cxPropMinDate}}" on-calendar-open="{{method(\'onCalendarOpenComp\')}}" lt-prop-appearance="{{cxPropAppearance}}" on-before-calendar-close="{{method(\'cruxOnBeforeCalendarClose\')}}" on-calendar-close="{{method(\'cruxOnCalendarClose\')}}" lt-prop-header-type="{{cxPropHeaderType}}" lt-prop-auto-update="false" lt-prop-calendar-properties="{&quot;i18n&quot; : true}" lt-prop-wrapper-class="{{cxPropWrapperClass}}"> <template is="if" value="{{cxPropYield}}"><template case="true"> <template is="yield" yield-name="footer"><lyte-yield yield-name="footer"></lyte-yield></template> </template></template> </lyte-input> </template><template case="filter"> <lyte-input class="lyteInputBox cxBoxInput {{cxPropClass}}" lt-prop-appearance="box" lt-prop-name="{{cxPropName}}" id="{{cxPropId}}" lt-prop-calendar-class="smartFilterCal" lt-prop-boundary="{{cxPropBoundary}}" lt-prop-type="date" lt-prop-id="searchValue" on-navigate="{{method(\'navigation\')}}" lt-prop-placeholder="{{cxPropPlaceholder}}" lt-prop-format="{{format}}" lt-prop-class="cxFilterDateClass {{cxPropInputClass}}" lt-prop-start-week-day="{{cxPropStartWeekDay}}" lt-prop-current-date="{{value}}" data-zcqa="{{cxPropZcqa}}" on-date-change="{{method(\'onDateChange\')}}" cx-prop-login-user-required="true" on-calendar-open="{{method(\'onCalendarOpenComp\')}}" on-before-calendar-close="{{method(\'cruxOnBeforeCalendarClose\')}}" on-calendar-close="{{method(\'cruxOnCalendarClose\')}}" lt-prop-header-type="{{cxPropHeaderType}}" lt-prop-auto-update="true" onkeyup="{{action(\'onKeyUpCloseCalendar\')}}"></lyte-input> </template><template case="create"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxElementLabel {{cxPropLabelClass}}"> {{cxPropField[cxPropFieldKey]}} <template is="if" value="{{cxPropInfoTooltip}}"><template case="true"> <span class="dIB vam cxInfoIcon" onmouseenter="{{action(\'showInfoTooltip\',this)}}"></span> <lyte-hovercard lt-prop-placement="topLeft" lt-prop-keep-alive="true" lt-prop-popover-wrapper-class="cxElementsHovercard" lt-prop-origin-elem=".cxCurrentHovercard" on-hovercard-hide="{{method(\'hideInfoTooltip\')}}"> <template is="registerYield" yield-name="hoverCardYield"> <lyte-hovercard-content class="cxElementsHoverCardContent"> {{cxPropInfoTooltip}} </lyte-hovercard-content> </template> </lyte-hovercard> </template></template> </div> </template></template> <div class="cxElementValue {{if(cxPropDisabled,\'cxElementDisabled\',\'\')}}"> <lyte-input lt-prop-name="{{cxPropName}}" id="{{cxPropId}}" lt-prop-title="{{cxPropTooltip}}" lt-prop-tooltip-config="{{cxPropTooltipConfig}}" lt-prop-tooltip-style="margin: 10px; font-size : 11px;" lt-prop-type="date" on-navigate="{{method(\'navigation\')}}" lt-prop-placeholder="{{cxPropPlaceholder}}" lt-prop-format="{{format}}" lt-prop-start-week-day="{{cxPropStartWeekDay}}" lt-prop-current-date="{{cxPropValue}}" data-zcqa="{{cxPropZcqa}}" on-date-change="{{method(\'onDateChange\')}}" lt-prop-disabled="{{cxPropDisabled}}" lt-prop-readonly="{{cxPropReadonly}}" class="w100per {{if(ifEquals(cxPropAppearance,\'box\'),\'cxBoxInput\',\'cxFlatInput\')}}" lt-prop-appearance="{{cxPropAppearance}}" lt-prop-autofocus="{{cxPropAutofocus}}" lt-prop-tab-index="{{cxPropTabIndex}}" lt-prop-maxlength="{{cxPropMaxlength}}" lt-prop-min-date="{{cxPropMinDate}}" lt-prop-calendar-class="{{cxPropCalendarClaYouss}}" on-calendar-open="{{method(\'onCalendarOpenComp\')}}" lt-prop-dropdown-freeze="{{cxPropFreeze}}" lt-prop-scope="{{cxPropScope}}" lt-prop-dropdown-properties="{{cxPropDropdownProperties}}" lt-prop-max-date="{{cxPropMaxDate}}" on-before-calendar-close="{{method(\'cruxOnBeforeCalendarClose\')}}" lt-prop-aria="{{cxPropAria}}" lt-prop-aria-attributes="{{cxPropAriaAttributes}}" on-calendar-close="{{method(\'cruxOnCalendarClose\')}}" on-before-open="{{method(\'beforeOpen\')}}" lt-prop-tooltip-class="{{cxPropTooltipClass}}" lt-prop-autocomplete="{{cxPropAutocomplete}}" lt-prop-header-type="{{cxPropHeaderType}}" lt-prop-auto-update="false" lt-prop-bind-to-body="false" lt-prop-calendar-properties="{{cxPropCalendarProperties}}" onkeyup="{{action(\'removeErrorMessage\')}}" lt-prop-wrapper-class="{{cxPropWrapperClass}}" lt-prop-class="{{cxPropInputClass}}"></lyte-input> <template is="if" value="{{isError}}"><template case="true"> <crux-error-message error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-field="{{cxPropField}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}"> <template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}" cx-field="{{cxPropField}}"></lyte-yield></template> </crux-error-message> </template></template> </div> </template></template> </template></template></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]},{type:"attr",position:[2,1]},{type:"if",position:[2,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]}]}},default:{}},{type:"text",position:[2,3,1]},{type:"componentDynamic",position:[4]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{view:{dynamicNodes:[{type:"attr",position:[0]},{type:"attr",position:[0,0]},{type:"if",position:[0,0],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}}]}},default:{}}]},criteria:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"registerYield",position:[1],dynamicNodes:[{type:"insertYield",position:[0]}]}]}},default:{}},{type:"componentDynamic",position:[1]}]},filter:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},create:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"componentDynamic",position:[3,1]},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["lyteViewPort","cxPropValue","cxPropFrom","cxPropDatePattern","cxPropStartWeekDay","format","cxPropField","cxPropFieldKey","cxPropEmptyValue","cxPropZcqa","cxPropYield","cxPropDisabled","cxPropReadonly","cxPropClass","cxPropPlaceholder","isError","cxPropAppearance","cxPropErrorMessage","cxPropIgnoreEmptyValue","cxPropId","cxPropName","cxPropClearErrorMessage","cxPropBoundary","cxPropErrorYield","cxPropMinDate","lyteUnbound","cxPropTabIndex","cxPropDirection","cxPropLabelClass","cxPropTooltip","value","cxPropCalendarClass","cxPropInfoTooltip","cxPropAutocomplete","cxPropDateInUserPattern","cxPropFreeze","cxPropScope","cxPropMaxDate","cxPropDropdownProperties","cxPropAria","cxPropAriaAttributes","cxPropTooltipConfig","cxPropTooltipClass","cxPropHeaderType","cxPropErrorZcqaPrefix","cxPropErrorZcqaSuffix","cxPropCalendarProperties","cxPropErrorClass","cxPropWrapperClass","cxPropInputClass","cxPropErrorSpanClass"],data:function(){return{lyteViewPort:Lyte.attr("boolean",{default:!1}),cxPropValue:Lyte.attr("string"),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropDatePattern:Lyte.attr("string",{default:"undefined"!=typeof Crm?Crm.userDetails.DATE_PATTERN:"dd/mm/yyyy"}),cxPropStartWeekDay:Lyte.attr("number",{default:"undefined"!=typeof Crm&&Crm.calPreferences&&null!=Crm.calPreferences.WEEKSTARTSON?Crm.calPreferences.WEEKSTARTSON:1}),format:Lyte.attr("string"),cxPropField:Lyte.attr("object",{default:{}}),cxPropFieldKey:Lyte.attr("string",{default:""}),cxPropEmptyValue:Lyte.attr("string",{default:""}),cxPropZcqa:Lyte.attr("string"),cxPropYield:Lyte.attr("boolean",{default:!1}),cxPropDisabled:Lyte.attr("boolean",{default:!1}),cxPropReadonly:Lyte.attr("boolean",{default:!1}),cxPropClass:Lyte.attr("string",{default:""}),cxPropPlaceholder:Lyte.attr("string"),isError:Lyte.attr("boolean",{default:!1}),cxPropAppearance:Lyte.attr("string",{default:"flat"}),cxPropErrorMessage:Lyte.attr("string",{default:""}),cxPropIgnoreEmptyValue:Lyte.attr("boolean",{default:!1}),cxPropId:Lyte.attr("string",{default:""}),cxPropName:Lyte.attr("string",{default:""}),cxPropClearErrorMessage:Lyte.attr("boolean",{default:!0}),cxPropBoundary:Lyte.attr("object",{default:{}}),cxPropErrorYield:Lyte.attr("boolean",{default:!1}),cxPropMinDate:Lyte.attr("string",{default:""}),lyteUnbound:Lyte.attr("boolean",{default:!1}),cxPropTabIndex:Lyte.attr("string"),cxPropDirection:Lyte.attr("string",{default:"vertical"}),cxPropLabelClass:Lyte.attr("string",{default:""}),cxPropTooltip:Lyte.attr("string",{default:""}),value:Lyte.attr("string"),cxPropCalendarClass:Lyte.attr("string"),cxPropInfoTooltip:Lyte.attr("string",{default:""}),cxPropAutocomplete:Lyte.attr("string",{default:"on"}),cxPropDateInUserPattern:Lyte.attr("boolean"),cxPropFreeze:Lyte.attr("boolean",{default:!1}),cxPropScope:Lyte.attr("string"),cxPropMaxDate:Lyte.attr("string"),cxPropDropdownProperties:Lyte.attr("object",{default:{preventScroll:"body"}}),cxPropAria:Lyte.attr("boolean",{default:!1}),cxPropAriaAttributes:Lyte.attr("object",{default:{}}),cxPropTooltipConfig:Lyte.attr("string",{default:'{"position": "followcursor", "appearance": "box"}'}),cxPropTooltipClass:Lyte.attr("string"),cxPropHeaderType:Lyte.attr("string",{default:"dropdown"}),cxPropErrorZcqaPrefix:Lyte.attr("string",{default:""}),cxPropErrorZcqaSuffix:Lyte.attr("string",{default:"Error"}),cxPropCalendarProperties:Lyte.attr("string",{default:"{}"}),cxPropErrorClass:Lyte.attr("string"),cxPropWrapperClass:Lyte.attr("string"),cxPropInputClass:Lyte.attr("string",{default:""}),cxPropErrorSpanClass:Lyte.attr("string")}},getValue:function(){if(this.$node.querySelector("#cruxLoadingElem"))return this.data.cxPropValue;var e=this.$node.querySelector("input").value;if("criteria"==this.getData("cxPropFrom")){var t=this.getDateObject(e.trim());if(t){for(var o=t.getFullYear()+"-";o.length<5;)o="0"+o;return(o+=(t.getMonth()+1<10?"0":"")+(t.getMonth()+1)+"-")+(t.getDate()<10?"0":"")+t.getDate()}return""}return e},validate:function(){var e=this.$node.querySelector("input"),t=e?e.value:void 0;t&&""==t.trim()&&(t="");var o=this.getData("cxPropField");if("create"==this.getData("cxPropFrom")){var a=!0;return t?(a=this.isValidDate(t))||(this.getMethods("onError")?this.executeMethod("onError",this.errorCodes.ERR02,this):this.setData("cxPropErrorMessage",_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(o.field_label)))):a=this.validateMandatory(!0),1==a?this.setData("cxPropErrorMessage",""):(this.focusFromHere=!0,this.$node.querySelector("lyte-input")&&this.$node.querySelector("lyte-input").focus()),a}return!(""!=t||!this.getData("cxPropIgnoreEmptyValue"))||this.dateValidate(e)},actions:{showInfoTooltip:function(e){this.showHideInfoTooltip(e)},onKeyUpCloseCalendar:function(){event&&13==event.keyCode&&this.$node.querySelector("lyte-input").blur()},removeErrorMessage:function(){this.data.cxPropClearErrorMessage&&this.setData("cxPropErrorMessage","")}},init:function(){if(this.setData("cxPropDatePattern",this.getData("cxPropDatePattern").replace(/'/g,"")),this.data.format=this.getData("cxPropDatePattern").toUpperCase(),this.getData("cxPropPlaceholder")||this.setData("cxPropPlaceholder",this.getData("format")),"view"==this.data.cxPropFrom){var e=this.data.cxPropValue;e&&-1!=e.indexOf(":")&&(this.data.cxPropValue=e.substring(0,e.split(":")[0].lastIndexOf(" ")))}else this.getData("cxPropDisabled")&&!this.data.cxPropTooltip&&this.setData("cxPropTooltip",_cruxUtils.getI18n("crm.lable.read.only"));this.$node.focus=this.focus.bind(this)},observeValue:function(){if(this._prevent)delete this._prevent;else if("view"!=this.data.cxPropFrom){if(this.data.cxPropValue){this._prevent=!0;var e=this.data.cxPropValue;e=e.replace(/[+-]\d{2}:\d{2}/,"");var t=/^(.*)T/.exec(e);t&&(e=t[1]),this.data.cxPropDateInUserPattern?this.setData("cxPropValue",this.getDateInUserDatePattern(this.getDateObjectFromString(e,this.data.cxPropDatePattern))):this.setData("cxPropValue",this.getDateInUserDatePattern(this.getDateObjectFromString(e,"YYYY-MM-DD"))),this._prevent=!1}"filter"==this.getData("cxPropFrom")&&this.setData("value",this.getData("cxPropValue"))}else"view"==this.data.cxPropFrom&&this.data.cxPropValue&&0==this.data.cxPropDateInUserPattern&&(this.setData("cxPropValue",this.getDateInUserDatePattern(this.getDateObjectFromString(this.data.cxPropValue,"YYYY-MM-DD"))),this.data.cxPropDateInUserPattern=!0)}.observes("cxPropValue","cxPropFrom").on("init"),methods:{onDateChange:function(){var e=this.$node.querySelector("input").value;e.indexOf("'")>-1&&(this.$node.querySelector("input").value=e.replace(/'/g,"")),this.getData("cxPropClearErrorMessage")&&this.setData("cxPropErrorMessage",""),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue()),"criteria"!=this.data.cxPropFrom&&this.isValidDate(this.$node.querySelector("input").value,this.data.cxPropDatePattern)&&(this._prevent=!0,this.setData("cxPropValue",this.getValue()))},navigation:function(){arguments[0]&&arguments[0].target&&arguments[0].target.parentElement.classList.contains("lyteCalCurrentDate")&&(this.setData("selectedDate",this.getDateInUserDatePattern(new Date)),this.$node.querySelector("lyte-input").blur(),arguments[3].$node.querySelector(".lyteCalToday").click())},onCalendarOpenComp:function(){this.getMethods("onCalendarOpen")&&this.executeMethod("onCalendarOpen")},hideInfoTooltip:function(){this.showHideInfoTooltip()},cruxOnBeforeCalendarClose:function(e,t){this.getMethods("onBeforeCalendarClose")&&this.executeMethod("onBeforeCalendarClose",e,t)},cruxOnCalendarClose:function(e,t){this.patternValidate(void 0,"",this.$node.querySelector("input"),!0),this.$node.querySelector("lyte-input").calendarDiv&&this.$node.querySelector("lyte-input").calendarDiv.querySelector("lyte-calendar").revertToSelected(),this.getMethods("onCalendarClose")&&this.executeMethod("onCalendarClose",e,t)},beforeOpen:function(){if(this.focusFromHere)return delete this.focusFromHere,!1}},observeErrorMessage:function(){this.setData("isError",""!=this.getData("cxPropErrorMessage"))}.observes("cxPropErrorMessage").on("init"),observeMandatory:function(){this.$node.querySelector("lyte-input")&&"create"==this.getData("cxPropFrom")&&(this.getData("cxPropField").required?this.$node.querySelector("lyte-input").classList.add("mandatoryField"):this.$node.querySelector("lyte-input").classList.remove("mandatoryField"))}.observes("cxPropField.required","lyteViewPort").on("didConnect"),observeIsError:function(){this.$node.querySelector("lyte-input")&&"create"==this.getData("cxPropFrom")&&(1==this.data.isError?this.$node.querySelector("lyte-input").classList.add("cruxErrorField","cxErrorBox"):this.$node.querySelector("lyte-input").classList.remove("cruxErrorField","cxErrorBox"))}.observes("isError","lyteViewPort").on("didConnect"),focus:function(){this.$node.querySelector("lyte-input")&&this.$node.querySelector("lyte-input").focus()},observeValue2:function(){this.setData("cxPropErrorMessage","")}.observes("cxPropValue"),observeClass:function(e){if("create"==this.data.cxPropFrom){var t=$L("lyte-input",this.$node);if(!t.length)return;e&&e.oldValue&&t.removeClass(e.oldValue),this.data.cxPropClass&&t.addClass(this.data.cxPropClass)}}.observes("cxPropClass","lyteViewPort").on("didConnect")},{mixins:["crux-element-validation"]}),Lyte.Component.register("crux-date-time-component",{_template:'<template tag-name="crux-date-time-component"><template is="if" value="{{lyteViewPort}}"><template case="true"><dummy-port-element></dummy-port-element> <div id="cruxLoadingElem" class="cxLoadOnViewElement"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxLoadOnViewLabel"> {{cxPropField[cxPropFieldKey]}} <div class="cxLoadOnViewLoader"></div> </div> </template></template> <div class="cxLoadOnViewValue"> {{cxPropValue}} <div class="cxLoadOnViewLoader"></div> </div> </div> <dummy-port-element></dummy-port-element></template><template case="false"> <template is="switch" value="{{cxPropFrom}}"><template case="view"> <span id="{{cxPropId}}" class="cxElementViewValue">{{displayValue}}</span> </template><template case="filter"></template><template case="criteria"> <div class="cxDateTimeWrapper"> <lyte-input lt-prop-type="datetime" lt-prop-appearance="{{cxPropAppearance}}" class="cxBoxInput w100per" lt-prop-name="{{cxPropName}}" id="{{cxPropId}}" lt-prop-id="searchValue" lt-prop-placeholder="{{cxPropDatePattern}}" lt-prop-current-date="{{selectedDate}}" lt-prop-start-week-day="{{cxPropStartWeekDay}}" on-navigate="{{method(\'navigation\')}}" lt-prop-yield="{{cxPropYield}}" on-date-change="{{method(\'onDateChange\')}}" lt-prop-format="{{format}}" data-zcqa="{{cxPropZcqa}}" lt-prop-min-date="{{cxPropMinDate}}" lt-prop-minute-interval="30" lt-prop-dropdown="true" lt-prop-direction="{{cxPropDirection}}" lt-prop-time-format="{{cxPropTimeFormatInput}}" lt-prop-default-time="{{startTime}}" lt-prop-start-time="{{calendarStartTime}}" on-time-change="{{method(\'onTimeChange\')}}" ondragstart="return false;" ondrop="return false;" lt-prop-show-interval="{{cxPropShowInterval}}" on-calendar-open="{{method(\'onCalendarOpenComp\')}}" lt-prop-boundary="{{cxPropBoundary}}" on-before-calendar-close="{{method(\'cruxOnBeforeCalendarClose\')}}" on-calendar-close="{{method(\'cruxOnCalendarClose\')}}" lt-prop-header-type="{{cxPropHeaderType}}" lt-prop-calendar-properties="{&quot;i18n&quot; : true}" lt-prop-wrapper-class="{{cxPropWrapperClass}}" lt-prop-class="{{cxPropInputClass}}" lt-prop-bind-to-body="false"> <template is="if" value="{{cxPropYield}}"><template case="true"> <template is="yield" yield-name="footer"><lyte-yield yield-name="footer"></lyte-yield></template> </template></template> </lyte-input> </div> </template><template case="create"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxElementLabel {{cxPropLabelClass}}"> {{cxPropField[cxPropFieldKey]}} <template is="if" value="{{cxPropInfoTooltip}}"><template case="true"> <span class="dIB vam cxInfoIcon" onmouseenter="{{action(\'showInfoTooltip\',this)}}"></span> <lyte-hovercard lt-prop-placement="topLeft" lt-prop-keep-alive="true" lt-prop-popover-wrapper-class="cxElementsHovercard" lt-prop-origin-elem=".cxCurrentHovercard" on-hovercard-hide="{{method(\'hideInfoTooltip\')}}"> <template is="registerYield" yield-name="hoverCardYield"> <lyte-hovercard-content class="cxElementsHoverCardContent"> {{cxPropInfoTooltip}} </lyte-hovercard-content> </template> </lyte-hovercard> </template></template> </div> </template></template> <div class="cxElementValue {{cxPropWrapperClass}} {{if(cxPropDisabled,\'cxElementDisabled\',\'\')}}"> <div class="{{cxPropWrapperClass}}"> <lyte-input lt-prop-name="{{cxPropDateFieldName}}" id="{{cxPropDateFieldId}}" lt-prop-title="{{cxPropTooltip}}" lt-prop-tooltip-config="{{cxPropTooltipConfig}}" lt-prop-tooltip-style="margin: 10px; font-size : 11px;" lt-prop-type="datetime" lt-prop-appearance="{{cxPropAppearance}}" class="cxBoxInput w100per" on-navigate="{{method(\'navigation\')}}" lt-prop-current-date="{{selectedDate}}" lt-prop-start-week-day="{{cxPropStartWeekDay}}" lt-prop-yield="{{cxPropYield}}" on-date-change="{{method(\'onDateChange\')}}" data-zcqa="{{cxPropZcqa}}" lt-prop-autofocus="{{cxPropAutofocus}}" lt-prop-tab-index="{{cxPropTabIndex}}" lt-prop-disabled="{{cxPropDisabled}}" lt-prop-calendar-class="{{cxPropCalendarClass}}" lt-prop-min-date="{{cxPropMinDate}}" lt-prop-minute-interval="30" lt-prop-dropdown="true" lt-prop-direction="{{cxPropDirection}}" lt-prop-time-format="{{cxPropTimeFormatInput}}" lt-prop-default-time="{{startTime}}" lt-prop-start-time="{{calendarStartTime}}" on-time-change="{{method(\'onTimeChange\')}}" ondragstart="return false;" ondrop="return false;" lt-prop-end-time="{{cxPropEndTime}}" lt-prop-format="{{format}}" lt-prop-show-interval="{{cxPropShowInterval}}" on-before-open="{{method(\'onBeforeOpen\')}}" lt-prop-dropdown-disabled="{{cxPropDisabled}}" lt-prop-placeholder="{{cxPropPlaceholder}}" on-calendar-open="{{method(\'onCalendarOpenComp\')}}" lt-prop-dropdown-freeze="{{cxPropFreeze}}" lt-prop-scope="{{cxPropScope}}" lt-prop-dropdown-properties="{&quot;preventScroll&quot;:&quot;body&quot;}" lt-prop-max-date="{{cxPropMaxDate}}" on-before-calendar-close="{{method(\'cruxOnBeforeCalendarClose\')}}" lt-prop-aria="{{cxPropAria}}" lt-prop-aria-attributes="{{cxPropAriaAttributes}}" on-calendar-close="{{method(\'cruxOnCalendarClose\')}}" lt-prop-common-placeholder="{{cxPropCommonPlaceholder}}" lt-prop-tooltip-class="{{cxPropTooltipClass}}" lt-prop-autocomplete="{{cxPropAutocomplete}}" lt-prop-header-type="{{cxPropHeaderType}}" lt-prop-bind-to-body="false" lt-prop-show-today="{{cxPropShowToday}}" onkeyup="{{action(\'removeErrorMessage\')}}" lt-prop-wrapper-class="{{cxPropWrapperClass}}" lt-prop-class="{{cxPropInputClass}}"> <template is="if" value="{{cxPropYield}}"><template case="true"><template is="yield" yield-name="footer"><lyte-yield yield-name="footer"></lyte-yield></template></template></template> </lyte-input> <template is="if" value="{{isError}}"><template case="true"> <crux-error-message error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-field="{{cxPropField}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}"> <template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}" cx-field="{{cxPropField}}"></lyte-yield></template> </crux-error-message> </template></template> </div> </div> </template></template> </template></template></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]},{type:"attr",position:[2,1]},{type:"if",position:[2,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]}]}},default:{}},{type:"text",position:[2,3,1]},{type:"componentDynamic",position:[4]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{view:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]},filter:{dynamicNodes:[],additional:{next:"criteria"}},criteria:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"registerYield",position:[1],dynamicNodes:[{type:"insertYield",position:[0]}]}]}},default:{}},{type:"componentDynamic",position:[1,1]}]},create:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"attr",position:[3,1,1]},{type:"attr",position:[3,1,1,1]},{type:"if",position:[3,1,1,1],cases:{true:{dynamicNodes:[{type:"registerYield",position:[0],dynamicNodes:[{type:"insertYield",position:[0]}]}]}},default:{}},{type:"componentDynamic",position:[3,1,1]},{type:"attr",position:[3,1,3]},{type:"if",position:[3,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["lyteViewPort","cxPropValue","cxPropFrom","cxPropField","cxPropFieldKey","cxPropDatePattern","cxPropTimeFormat","cxPropStartWeekDay","format","cxPropEmptyValue","selectedDate","startTime","cxPropYield","isError","cxPropTimeZone","cxPropAppearance","cxPropErrorMessage","calendarStartTime","cxPropDateFieldId","cxPropDateFieldName","cxPropTimeFieldId","cxPropTimeFieldName","cxPropClearErrorMessage","cxPropTimeFormatInput","cxPropId","cxPropName","cxPropDirection","cxPropLabelClass","cxPropEndTime","cxPropCalendarClass","cxPropMinDate","cxPropReadonly","cxPropStartTime","cxPropDefaultTime","cxPropDisabled","cxPropTabIndex","cxPropZcqa","cxPropClass","cxPropShowInterval","lyteUnbound","cxPropWrapperClass","cxPropTooltip","cxPropPlaceholder","cxPropErrorYield","cxPropInfoTooltip","cxPropFreeze","cxPropScope","cxPropMaxDate","cxPropDropdownProperties","cxPropDatetimeInUserPattern","cxPropBoundary","cxPropAria","cxPropAriaAttributes","cxPropCommonPlaceholder","cxPropTooltipConfig","cxPropTooltipClass","cxPropAutocomplete","cxPropHeaderType","displayValue","cxPropErrorZcqaPrefix","cxPropErrorZcqaSuffix","cxPropShowToday","cxPropErrorClass","cxPropInputClass","cxPropErrorSpanClass"],data:function(){return{lyteViewPort:Lyte.attr("boolean",{default:!1}),cxPropValue:Lyte.attr("string"),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropField:Lyte.attr("object",{default:{}}),cxPropFieldKey:Lyte.attr("string",{default:""}),cxPropDatePattern:Lyte.attr("string",{default:"undefined"!=typeof Crm?Crm.userDetails.DATE_PATTERN:"dd/mm/yyyy"}),cxPropTimeFormat:Lyte.attr("string"),cxPropStartWeekDay:Lyte.attr("number",{default:"undefined"!=typeof Crm&&Crm.calPreferences&&null!=Crm.calPreferences.WEEKSTARTSON?Crm.calPreferences.WEEKSTARTSON:1}),format:Lyte.attr("string"),cxPropEmptyValue:Lyte.attr("string",{default:""}),selectedDate:Lyte.attr("string"),startTime:Lyte.attr("string"),cxPropYield:Lyte.attr("boolean",{default:!1}),isError:Lyte.attr("boolean",{default:!1}),cxPropTimeZone:Lyte.attr("string",{default:"undefined"!=typeof Crm?Crm.userDetails.TIME_ZONE:"+05.30"}),cxPropAppearance:Lyte.attr("string",{default:"box"}),cxPropErrorMessage:Lyte.attr("string",{default:""}),calendarStartTime:Lyte.attr("string"),cxPropDateFieldId:Lyte.attr("string",{default:""}),cxPropDateFieldName:Lyte.attr("string",{default:""}),cxPropTimeFieldId:Lyte.attr("string",{default:""}),cxPropTimeFieldName:Lyte.attr("string",{default:""}),cxPropClearErrorMessage:Lyte.attr("boolean",{default:!0}),cxPropTimeFormatInput:Lyte.attr("string"),cxPropId:Lyte.attr("string",{default:""}),cxPropName:Lyte.attr("string",{default:""}),cxPropDirection:Lyte.attr("string",{default:"vertical"}),cxPropLabelClass:Lyte.attr("string",{default:""}),cxPropEndTime:Lyte.attr("string"),cxPropCalendarClass:Lyte.attr("string"),cxPropMinDate:Lyte.attr("string",{default:""}),cxPropReadonly:Lyte.attr("boolean",{default:!1}),cxPropStartTime:Lyte.attr("string"),cxPropDefaultTime:Lyte.attr("string"),cxPropDisabled:Lyte.attr("boolean",{default:!1}),cxPropTabIndex:Lyte.attr("string"),cxPropZcqa:Lyte.attr("string"),cxPropClass:Lyte.attr("string",{default:""}),cxPropShowInterval:Lyte.attr("boolean",{default:!1}),lyteUnbound:Lyte.attr("boolean",{default:!1}),cxPropWrapperClass:Lyte.attr("string"),cxPropTooltip:Lyte.attr("string",{default:""}),cxPropPlaceholder:Lyte.attr("string"),cxPropErrorYield:Lyte.attr("boolean",{default:!1}),cxPropInfoTooltip:Lyte.attr("string",{default:""}),cxPropFreeze:Lyte.attr("boolean",{default:!1}),cxPropScope:Lyte.attr("string"),cxPropMaxDate:Lyte.attr("string"),cxPropDropdownProperties:Lyte.attr("object",{default:{preventScroll:"body"}}),cxPropDatetimeInUserPattern:Lyte.attr("boolean"),cxPropBoundary:Lyte.attr("object",{default:{}}),cxPropAria:Lyte.attr("boolean",{default:!1}),cxPropAriaAttributes:Lyte.attr("object",{default:{}}),cxPropCommonPlaceholder:Lyte.attr("string"),cxPropTooltipConfig:Lyte.attr("string",{default:'{"position": "followcursor", "appearance": "box"}'}),cxPropTooltipClass:Lyte.attr("string"),cxPropAutocomplete:Lyte.attr("string",{default:"on"}),cxPropHeaderType:Lyte.attr("string",{default:"dropdown"}),displayValue:Lyte.attr("string"),cxPropErrorZcqaPrefix:Lyte.attr("string",{default:""}),cxPropErrorZcqaSuffix:Lyte.attr("string",{default:"Error"}),cxPropShowToday:Lyte.attr("boolean",{default:!0}),cxPropErrorClass:Lyte.attr("string"),cxPropWrapperClass:Lyte.attr("string"),cxPropInputClass:Lyte.attr("string"),cxPropErrorSpanClass:Lyte.attr("string")}},init:function(){this.setData("cxPropDatePattern",this.getData("cxPropDatePattern").replace(/'/g,"")),this.setData("format",this.getData("cxPropDatePattern").toUpperCase()),this.getData("cxPropPlaceholder")||this.setData("cxPropPlaceholder",this.getData("format")),this.getData("cxPropDisabled")&&!this.data.cxPropTooltip&&this.setData("cxPropTooltip",_cruxUtils.getI18n("crm.lable.read.only"))},getValue:function(e){if(this.$node.querySelector("#cruxLoadingElem"))return this.data.cxPropValue;var t=this.$node.querySelectorAll("input");if(""!=t[0].value.trim()){if(e&&e.userFormat)return t[0].value+" "+t[1].value;var o=this.getDateObject(t[0].value.trim(),t[1].value);if(!o)return"";function a(e){return e<10?"0"+e:e}for(var r=this.getData("cxPropTimeZone"),i=o.getFullYear().toString();i.length<4;)i="0"+i;var s=i+"-"+a(o.getMonth()+1)+"-"+a(o.getDate())+"T"+a(o.getHours())+":"+a(o.getMinutes())+":"+a(o.getSeconds());return"create"!=this.data.cxPropFrom&&(s+=r.replace(".",":")),s}return""},validate:function(){var e=this.$node.querySelectorAll("input"),t=this.data.cxPropField;if("create"==this.data.cxPropFrom){if(null==e||0==e.length||!e[0].value||!e[0].value.trim())return this.validateMandatory(!0)?(this.setData("cxPropErrorMessage",""),!0):(this.focusFromHere=!0,this.$node.querySelector("lyte-input")&&this.$node.querySelector("lyte-input").focus(),!1);var o=this.isValidDate(e[0].value);return o?this.setData("cxPropErrorMessage",""):(this.getMethods("onError")?this.executeMethod("onError",this.errorCodes.ERR02,this):this.setData("cxPropErrorMessage",_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(t.field_label))),this.focusFromHere=!0,this.$node.querySelector("lyte-input")&&this.$node.querySelector("lyte-input").focus()),o}return this.dateValidate(e[0])},methods:{onDateChange:function(){this.$node.querySelector("input").value=this.$node.querySelector("input").value.replace(/'/g,""),this.data.cxPropClearErrorMessage&&this.setData("cxPropErrorMessage",""),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue(),"date")},onTimeChange:function(){this.getData("cxPropClearErrorMessage")&&this.setData("cxPropErrorMessage",""),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue(),"time")},navigation:function(){arguments[0]&&arguments[0].target&&arguments[0].target.parentElement.classList.contains("lyteCalCurrentDate")&&(this.setData("selectedDate",this.getDateInUserDatePattern(new Date)),this.$node.querySelector("lyte-input").blur(),arguments[3].$node.querySelector(".lyteCalToday").click())},onBeforeOpen:function(){if(this.focusFromHere)return delete this.focusFromHere,!1;this.getMethods("onBeforeCalendarOpen")&&this.executeMethod("onBeforeCalendarOpen")},onCalendarOpenComp:function(){this.getMethods("onCalendarOpen")&&this.executeMethod("onCalendarOpen")},hideInfoTooltip:function(){this.showHideInfoTooltip()},cruxOnBeforeCalendarClose:function(e,t){this.getMethods("onBeforeCalendarClose")&&this.executeMethod("onBeforeCalendarClose",e,t)},cruxOnCalendarClose:function(e,t){this.patternValidate(void 0,"",this.$node.querySelector("input"),!0),this.$node.querySelector("lyte-input").calendarDiv&&this.$node.querySelector("lyte-input").calendarDiv.querySelector("lyte-calendar").revertToSelected(),this.getMethods("onCalendarClose")&&this.executeMethod("onCalendarClose",e,t)}},observeErrorMessage:function(){this.setData("isError",""!=this.getData("cxPropErrorMessage"))}.observes("cxPropErrorMessage").on("init"),obeserveCxPropValue:function(){var e=this.getData("cxPropTimeFormat");e||(e="undefined"!=typeof Crm?Crm.userDetails.TIME_FORMAT:"HH:mm",this.setData("cxPropTimeFormat",e));var t="24";if(e.indexOf("a")>-1?(t="12",this.setData({cxPropTimeFormatInput:"12",calendarStartTime:"12:00 AM"})):this.setData({cxPropTimeFormatInput:"24",calendarStartTime:"00:00"}),this.timeFormat=t,"view"!=this.getData("cxPropFrom")){if(this.getData("cxPropStartTime")&&this.setData("calendarStartTime",this.getData("cxPropStartTime")),this.getData("cxPropValue"))if(p=(p=this.getData("cxPropValue")).replace(/[+-]\d{2}:\d{2}/,""),this.data.cxPropDatetimeInUserPattern){var o=6;"hh:mm a"==this.data.cxPropTimeFormat&&(o+=3);var a=p.substring(0,p.length-o);this.setData("selectedDate",a),this.setData("startTime",p.substring(p.length-o+1))}else{var r=p.split("-");a=new Date(r[0],r[1]-1,r[2].split("T")[0]),(c=(p=p.split("T"))[1]?p[1].split(":"):"")&&(a.setHours(c[0]),a.setMinutes(c[1])),this.setData("selectedDate",this.getDateInUserDatePattern(a)),this.setData("startTime",this.getTimeInUserFormat(a))}else if(this.setData("selectedDate",""),this.getData("cxPropDefaultTime"))this.setData("startTime",this.getData("cxPropDefaultTime"));else if(!this.getData("cxPropStartTime"))if("create"!=this.data.cxPropFrom)this.setData("startTime","01:00"+("12"==t?" "+_cruxUtils.getI18n("AM"):""));else{var i,s=(c=new Date).getHours(),l=c.getMinutes().toString(),n=s>11?_cruxUtils.getI18n("PM"):_cruxUtils.getI18n("AM");1==l.length&&(l="0"+l),"12"==t?(12!=s&&1==(s=(s%12).toString()).length&&(s="0"+s),i=s+":00 "+n):(s<10&&(s="0"+s),i=s+":00"),this.setData("startTime",i)}}else if(this.data.cxPropValue)if(0==this.data.cxPropDatetimeInUserPattern){var p,c;r=this.data.cxPropValue.split("-"),a=new Date(r[0],r[1]-1,r[2].split("T")[0]),(c=(p=this.data.cxPropValue.split("T"))[1]?p[1].split(":"):"")&&(a.setHours(c[0]),a.setMinutes(c[1])),this.setData("displayValue",this.getDateInUserDatePattern(a)+" "+this.getTimeInUserFormat(a,this.data.timeFormat))}else this.setData("displayValue",this.data.cxPropValue);else this.getData("cxPropEmptyValue")&&this.setData("displayValue",this.getData("cxPropEmptyValue"))}.observes("cxPropValue","cxPropFrom").on("init"),observeIsError:function(){"create"==this.getData("cxPropFrom")&&this.$node.querySelector("lyte-input")&&(this.getData("isError")?this.$node.querySelector("lyte-input").classList.add("cxErrorBox"):this.$node.querySelector("lyte-input").classList.remove("cxErrorBox"))}.observes("isError","lyteViewPort").on("didConnect"),observeMandatory:function(){this.$node.querySelector("lyte-input")&&"create"==this.getData("cxPropFrom")&&(this.getData("cxPropField").required?this.$node.querySelector("lyte-input").classList.add("mandatoryField"):this.$node.querySelector("lyte-input").classList.remove("mandatoryField"))}.observes("cxPropField.required","lyteViewPort").on("didConnect"),actions:{preventInvalidTime:function(){this.paste()},showInfoTooltip:function(e){this.showHideInfoTooltip(e)},removeErrorMessage:function(){this.data.cxPropClearErrorMessage&&this.setData("cxPropErrorMessage","")}},observesdidConnect:function(){if("create"==this.getData("cxPropFrom")&&this.$node.querySelectorAll("input")[1]){var e=this;this.$node.querySelectorAll("input")[1].onpaste=function(){e.paste()}}this.$node.focus=this.focus.bind(this)}.observes("lyteViewPort").on("didConnect"),paste:function(){var e=event.clipboardData.getData("text"),t=(e=e.split(":"))[0],o=e[1],a=/^\d{1,2}$/,r="AM";if(!a.test(t)||!a.test(o)||""==t||t>23||""==o||o>59||null==t||null==o)event.preventDefault();else{var i=!1;12==this.timeFormat&&t>12&&(t-=12,i=!0,r="PM"),1==t.length&&(t="0"+t,i=!0),1==o.length&&(o="0"+o,i=!0),i&&(this.setData("startTime",24==this.timeFormat?t+":"+o:t+":"+o+" "+r),event.preventDefault())}},observeStartTime:function(){this.setData("calendarStartTime",this.getData("cxPropStartTime"))}.observes("cxPropStartTime"),focus:function(){this.$node.querySelector("lyte-input")&&this.$node.querySelector("lyte-input").focus()},observeClass:function(e){if("create"==this.data.cxPropFrom){var t=$L("lyte-input",this.$node);if(!t.length)return;e&&e.oldValue&&t.removeClass(e.oldValue),this.data.cxPropClass&&t.addClass(this.data.cxPropClass)}}.observes("cxPropClass","lyteViewPort").on("didConnect")},{mixins:["crux-element-validation"]}),Lyte.Component.register("crux-email-component",{_template:'<template tag-name="crux-email-component"><template is="if" value="{{lyteViewPort}}"><template case="true"><dummy-port-element></dummy-port-element> <div id="cruxLoadingElem" class="cxLoadOnViewElement"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxLoadOnViewLabel"> {{cxPropField[cxPropFieldKey]}} <div class="cxLoadOnViewLoader"></div> </div> </template></template> <div class="cxLoadOnViewValue"> <div>{{cxPropValue}}</div> <div class="cxLoadOnViewLoader"></div> </div> </div> <dummy-port-element></dummy-port-element></template><template case="false"> <template is="switch" value="{{cxPropFrom}}"><template case="create"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxElementLabel {{cxPropLabelClass}}"> {{cxPropField[cxPropFieldKey]}} <template is="if" value="{{cxPropInfoTooltip}}"><template case="true"> <span class="dIB vam cxInfoIcon" onmouseenter="{{action(\'showInfoTooltip\',this)}}"></span> <lyte-hovercard lt-prop-placement="topLeft" lt-prop-keep-alive="true" lt-prop-popover-wrapper-class="cxElementsHovercard" lt-prop-origin-elem=".cxCurrentHovercard" on-hovercard-hide="{{method(\'hideInfoTooltip\')}}"> <template is="registerYield" yield-name="hoverCardYield"> <lyte-hovercard-content class="cxElementsHoverCardContent"> {{cxPropInfoTooltip}} </lyte-hovercard-content> </template> </lyte-hovercard> </template></template> </div> </template></template> <div class="cxElementValue {{if(cxPropDisabled,\'cxElementDisabled\',\'\')}}"> <lyte-input lt-prop-name="{{cxPropName}}" id="{{cxPropId}}" lt-prop-title="{{cxPropTooltip}}" lt-prop-tooltip-config="{{cxPropTooltipConfig}}" lt-prop-tooltip-style="margin: 10px; font-size : 11px;" lt-prop-class="cxBorderBottom {{cxPropInputClass}}" class="w100per {{if(ifEquals(cxPropAppearance,\'box\'),\'cxBoxInput\',\'cxFlatInput\')}}" lt-prop-type="text" lt-prop-value="{{lbind(cxPropValue)}}" lt-prop-maxlength="{{cxPropMaxlength}}" lt-prop-direction="{{cxPropDirection}}" lt-prop-disabled="{{cxPropDisabled}}" lt-prop-readonly="{{cxPropReadonly}}" lt-prop-placeholder="{{cxPropPlaceholder}}" on-value-change="{{method(\'onChange\')}}" lt-prop-appearance="{{cxPropAppearance}}" data-zcqa="{{cxPropZcqa}}" lt-prop-tab-index="{{cxPropTabIndex}}" lt-prop-autofocus="{{cxPropAutofocus}}" lt-prop-aria="{{cxPropAria}}" lt-prop-aria-attributes="{{cxPropAriaAttributes}}" lt-prop-auto-update="{{cxPropEnableLbind}}" lt-prop-tooltip-class="{{cxPropTooltipClass}}" lt-prop-wrapper-class="{{cxPropWrapperClass}}"></lyte-input> <template is="if" value="{{isError}}"><template case="true"> <crux-error-message error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-field="{{cxPropField}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}"> <template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}" cx-field="{{cxPropField}}"></lyte-yield></template> </crux-error-message> </template></template> </div> </template><template case="view"> <template is="if" value="{{cxPropValue}}"><template case="true"> <template is="if" value="{{cxPropMaskingProperties}}"><template case="true">{{cruxMaskValue(cxPropValue,cxPropMaskingProperties)}} </template><template case="false"> <template is="if" value="{{cxPropViewClipLabel}}"><template case="true"> <a class="cxEmailViewLink cxElementViewValue cxElementViewClipLabel" href="mailto:{{cxPropValue}}" id="{{cxPropId}}" onclick="{{action(\'stopP\')}}"> <lyte-text lt-prop-value="{{cxPropValue}}"></lyte-text> </a> </template><template case="false"> <a class="cxEmailViewLink cxElementViewValue cxElementViewWrapLabel" href="mailto:{{cxPropValue}}" id="{{cxPropId}}" onclick="{{action(\'stopP\')}}">{{cxPropValue}}</a> </template></template> </template></template> </template><template case="false"><template is="if" value="{{cxPropEmptyValue}}"><template case="true">{{cxPropEmptyValue}}</template></template></template></template> </template></template> </template></template></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]},{type:"attr",position:[2,1]},{type:"if",position:[2,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]}]}},default:{}},{type:"text",position:[2,3,1,0]},{type:"componentDynamic",position:[4]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{create:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"componentDynamic",position:[3,1]},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]},view:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["lyteViewPort","cxPropValue","cxPropEmptyValue","cxPropFrom","cxPropDisabled","cxPropReadonly","cxPropPlaceholder","isError","cxPropAppearance","cxPropErrorMessage","cxPropField","cxPropFieldKey","cxPropId","cxPropName","cxPropClearErrorMessage","cxPropDirection","cxPropLabelClass","cxPropErrorYield","cxPropTabIndex","cxPropZcqa","lyteUnbound","cxPropClass","cxPropIconClass","cxPropTooltip","cxPropMaxlength","cxPropInfoTooltip","cxPropAutocomplete","cxPropMaskingProperties","cxPropViewClipLabel","cxPropEnableLbind","cxPropTooltipConfig","cxPropTooltipClass","cxPropErrorZcqaPrefix","cxPropErrorZcqaSuffix","cxPropErrorClass","cxPropWrapperClass","cxPropInputClass","cxPropErrorSpanClass"],data:function(){return{lyteViewPort:Lyte.attr("boolean",{default:!1}),cxPropValue:Lyte.attr("string"),cxPropEmptyValue:Lyte.attr("string",{default:""}),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropDisabled:Lyte.attr("boolean"),cxPropReadonly:Lyte.attr("boolean"),cxPropPlaceholder:Lyte.attr("string"),isError:Lyte.attr("boolean",{default:!1}),cxPropAppearance:Lyte.attr("string",{default:"flat"}),cxPropErrorMessage:Lyte.attr("string",{default:""}),cxPropField:Lyte.attr("object",{default:{}}),cxPropFieldKey:Lyte.attr("string",{default:""}),cxPropId:Lyte.attr("string",{default:""}),cxPropName:Lyte.attr("string",{default:""}),cxPropClearErrorMessage:Lyte.attr("boolean",{default:!0}),cxPropDirection:Lyte.attr("string",{default:"vertical"}),cxPropLabelClass:Lyte.attr("string",{default:""}),cxPropErrorYield:Lyte.attr("boolean",{default:!1}),cxPropTabIndex:Lyte.attr("string"),cxPropZcqa:Lyte.attr("string"),lyteUnbound:Lyte.attr("boolean",{default:!1}),cxPropClass:Lyte.attr("string",{default:""}),cxPropIconClass:Lyte.attr("string",{default:"cxEditIcon"}),cxPropTooltip:Lyte.attr("string",{default:""}),cxPropMaxlength:Lyte.attr("number"),cxPropInfoTooltip:Lyte.attr("string",{default:""}),cxPropAutocomplete:Lyte.attr("string",{default:"on"}),cxPropMaskingProperties:Lyte.attr("object"),cxPropViewClipLabel:Lyte.attr("boolean",{default:!1}),cxPropEnableLbind:Lyte.attr("boolean",{default:!0}),cxPropTooltipConfig:Lyte.attr("string",{default:'{"position": "followcursor", "appearance": "box"}'}),cxPropTooltipClass:Lyte.attr("string"),cxPropErrorZcqaPrefix:Lyte.attr("string",{default:""}),cxPropErrorZcqaSuffix:Lyte.attr("string",{default:"Error"}),cxPropErrorClass:Lyte.attr("string"),cxPropWrapperClass:Lyte.attr("string"),cxPropInputClass:Lyte.attr("string",{default:""}),cxPropErrorSpanClass:Lyte.attr("string")}},getValue:function(){return"string"==typeof this.data.cxPropValue?this.getData("cxPropValue").trim():this.getData("cxPropValue")},validate:function(){var e=this.getValue(),t=this.data.cxPropField;if(!e)return this.validateMandatory(!0)?(this.setData("cxPropErrorMessage",""),!0):(this.$node.querySelector("lyte-input")&&this.$node.querySelector("lyte-input").focus(),!1);if(!this.validateLength(e))return!1;var o=!1;if("undefined"==typeof XRegExp)o=(a=/^[A-Za-z0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF_]([A-Za-z0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF!#$%&'*+-/=?^_`{|}~.]*)@(?=.{4,256}$)(([A-Za-z0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)(([-_]*[A-Za-z0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*)[.])+[A-Za-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,22}$/).test(e);else{var a=/^[\p{L}\p{M}\p{N}_]([\p{L}\p{M}\p{N}!#$%&'*+-/=?^_`{|}~.]*)@(?=.{4,256}$)(([\p{L}\p{N}\p{M}]+)(([-_]*[\p{L}\p{M}\p{N}])*)[.])+[\p{L}\p{M}]{2,22}$/,r=new XRegExp(a.source,"i");o=XRegExp.test(e.trim(),r)}return o?this.setData("cxPropErrorMessage",""):this.getMethods("onError")?this.executeMethod("onError",this.errorCodes.ERR02,this):this.setData("cxPropErrorMessage",_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(t.field_label))),o},methods:{onChange:function(){this.data.cxPropClearErrorMessage&&this.setData("cxPropErrorMessage",""),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getData("cxPropValue"))},hideInfoTooltip:function(){this.showHideInfoTooltip()}},observeErrorMessage:function(){this.setData("isError",""!=this.data.cxPropErrorMessage)}.observes("cxPropErrorMessage").on("init"),actions:{stopP:function(){event.stopPropagation()},showInfoTooltip:function(e){this.showHideInfoTooltip(e)}},observeIsError:function(){"create"==this.getData("cxPropFrom")&&this.$node.querySelector("lyte-input")&&(this.getData("isError")?this.$node.querySelector("lyte-input").classList.add("cxErrorBox"):this.$node.querySelector("lyte-input")&&this.$node.querySelector("lyte-input").classList.remove("cxErrorBox"))}.observes("isError","lyteViewPort").on("didConnect"),observeMandatory:function(){this.$node.querySelector("lyte-input")&&"create"==this.getData("cxPropFrom")&&(this.getData("cxPropField").required?this.$node.querySelector("lyte-input").classList.add("mandatoryField"):this.$node.querySelector("lyte-input").classList.remove("mandatoryField"))}.observes("cxPropField.required","lyteViewPort").on("didConnect"),init:function(){this.getData("cxPropDisabled")&&!this.data.cxPropTooltip&&this.setData("cxPropTooltip",_cruxUtils.getI18n("crm.lable.read.only"))},observeClass:function(e){if("create"==this.data.cxPropFrom){var t=$L("lyte-input",this.$node);if(!t.length)return;e&&e.oldValue&&t.removeClass(e.oldValue),this.data.cxPropClass&&t.addClass(this.data.cxPropClass)}}.observes("cxPropClass","lyteViewPort").on("didConnect")},{mixins:["crux-element-validation"]}),Lyte.Component.register("crux-layout-component",{_template:'<template tag-name="crux-layout-component"><template is="if" value="{{lyteViewPort}}"><template case="true"><dummy-port-element></dummy-port-element> <div id="cruxLoadingElem" class="cxLoadOnViewElement"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxLoadOnViewLabel"> {{cxPropField[cxPropFieldKey]}} <div class="cxLoadOnViewLoader"></div> </div> </template></template> <div class="cxLoadOnViewValue"> {{cxPropValue}} <div class="cxLoadOnViewLoader"></div> </div> </div> <dummy-port-element></dummy-port-element></template><template case="false"> <template is="switch" value="{{cxPropFrom}}"><template case="view"> <template is="if" value="{{cxPropValue}}"><template case="true"><template is="if" value="{{cxPropMaskingProperties}}"><template case="true">{{cruxMaskValue(cxPropValue.name,cxPropMaskingProperties)}}</template><template case="false">{{cxPropValue.name}}</template></template> </template><template case="false"><template is="if" value="{{cxPropEmptyValue}}"><template case="true">{{cxPropEmptyValue}}</template></template></template></template> </template><template case="filter"></template><template case="criteria"></template><template case="create"> <lyte-dropdown id="{{cxPropId}}" lt-prop-boundary="{{cxPropBoundary}}" lt-prop-yield="true" lt-prop-type="{{cxPropType}}" lt-prop-tabindex="1" on-add="{{method(\'addToList\')}}" on-remove="{{method(\'removeFromList\')}}" lt-prop-disabled-list="{{disabledList}}" lt-prop-selected="{{selectedIds}}" on-option-selected="{{method(\'selectLayout\')}}" on-before-show="{{method(\'onBeforeLayoutDropdown\')}}" on-hide="{{method(\'closeDropdown\')}}" class="{{if(ifEquals(cxPropAppearance,\'flat\'),\'cxFlatDropdown\',\'cxBoxDropdown\')}}" on-before-hide="{{method(\'beforeHide\')}}" lt-prop-display-value="{{displayValue}}"> <template is="registerYield" yield-name="yield"> <template is="if" value="{{expHandlers(cxPropType,\'!=\',&quot;single&quot;)}}"><template case="true"> <lyte-drop-button data-zcqa="{{cxPropZcqa}}"> <ul class="lyteMultipleSelect"> <template is="for" items="{{value}}" item="layout" index="index"> <li data-value="{{layout.id}}"> <span class="lyteDropdownVisible" onmouseenter="{{action(\'setToolTip\',this)}}">{{layout.name}}</span> <lyte-drop-remove class="lyteCloseIcon"></lyte-drop-remove> </li> </template> <li class="lyteMultiselectInput"> <lyte-search class="w100per" lt-prop-type="text" lt-prop-query-selector="{&quot;scope&quot;:&quot;.{{searchScope}}&quot;, &quot;target&quot;:&quot;.cruxlayoutList&quot;, &quot;search&quot;:&quot;.cruxlayoutList:not(.lyteDropdownActive)&quot;}" on-search="{{method(\'showNoResult\')}}" id="search_layout" lt-prop-placeholder="{{placeholder}}" onclick="{{action(\'searchBoxClicked\')}}" on-focus="{{method(\'onSearchBoxFocused\')}}" onkeydown="{{action(\'preventDefault\',this,event)}}" lt-prop-trim="true" lt-prop-component="dropdown"></lyte-search> </li> </ul> </lyte-drop-button> </template></template> <lyte-drop-box class="cxDropbox"> <lyte-drop-body class="{{searchScope}}"> <template is="if" value="{{showLoading}}"><template case="true"> <div class="cxLayoutLoaderWrap aligncenter"> <span class="cxElementsLoaderBg cxLayoutLoaderIcon"></span> </div> </template><template case="false"><template is="for" items="{{layout}}" item="lay" index="index"><template is="if" value="{{expHandlers(modelReq,\'==\',\'wizard\')}}"><template case="true"> <lyte-drop-item class="picklist_values cruxlayoutList" data-value="{{lay.id}}" data-zcqa="{{concat(cxPropField.field_label,\'_\',lay.name)}}" selected="{{if(cruxContains(selectedIds,lay.id),true,false)}}">{{lay.name}}</lyte-drop-item> </template><template case="false"> <lyte-drop-item class="picklist_values cruxlayoutList" data-value="{{lay.id}}" data-zcqa="{{concat(cxPropField.field_label,\'_\',lay.name)}}" selected="{{if(cruxContains(selectedIds,lay.id),true,false)}}">{{lay.name}}</lyte-drop-item> </template></template></template></template></template> <template is="if" value="{{expHandlers(layoutLength,\'!\')}}"><template case="true"> <div class="lyteDropdown-disabled cxDropdownNoResult">{{cruxGetI18n(\'crm.label.no.options.found\')}}</div> </template></template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </template></template> </template></template></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]},{type:"attr",position:[2,1]},{type:"if",position:[2,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]}]}},default:{}},{type:"text",position:[2,3,1]},{type:"componentDynamic",position:[4]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{view:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]},false:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}}]}},default:{}}]},filter:{dynamicNodes:[],additional:{next:"criteria"}},criteria:{dynamicNodes:[],additional:{next:"create"}},create:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,3]}]},{type:"attr",position:[1,1,3,1]},{type:"componentDynamic",position:[1,1,3,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3,1]},{type:"attr",position:[3,1,1]},{type:"if",position:[3,1,1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"for",position:[0],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]}},default:{}}]}]}},default:{}},{type:"attr",position:[3,1,3]},{type:"if",position:[3,1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"componentDynamic",position:[3,1]},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}],_observedAttributes:["lyteViewPort","cxPropValue","cxPropFrom","cxPropModule","layout","value","layoutLength","disabledList","cxPropEmptyValue","selectedIds","cxPropField","cxPropFieldKey","cxPropZcqa","placeholder","cxPropType","cxPropIgnoreEmptyValue","showLoading","moduleId","cxPropAppearance","cxPropBoundary","lyteUnbound","cxPropId","modelReq","cxPropClass","searchScope","cxPropMaskingProperties","cxPropDontShowDisabledLayouts","displayValue","cxPropLayouts","cxPropPlaceholder"],data:function(){return{lyteViewPort:Lyte.attr("boolean",{default:!1}),cxPropValue:Lyte.attr("object"),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropModule:Lyte.attr("string"),layout:Lyte.attr("array"),value:Lyte.attr("array",{default:[]}),layoutLength:Lyte.attr("boolean",{default:!0}),disabledList:Lyte.attr("array",{default:["cruxDisabled"]}),cxPropEmptyValue:Lyte.attr("string",{default:""}),selectedIds:Lyte.attr("array",{default:[]}),cxPropField:Lyte.attr("object",{default:{}}),cxPropFieldKey:Lyte.attr("string",{default:""}),cxPropZcqa:Lyte.attr("string"),placeholder:Lyte.attr("string",{default:_cruxUtils.getI18n("None")}),cxPropType:Lyte.attr("string",{default:"multisearch"}),cxPropIgnoreEmptyValue:Lyte.attr("boolean",{default:!1}),showLoading:Lyte.attr("boolean",{default:!0}),moduleId:Lyte.attr("string"),cxPropAppearance:Lyte.attr("string",{default:"flat"}),cxPropBoundary:Lyte.attr("object",{default:{}}),lyteUnbound:Lyte.attr("boolean",{default:!1}),cxPropId:Lyte.attr("string",{default:""}),modelReq:Lyte.attr("string"),cxPropClass:Lyte.attr("string"),searchScope:Lyte.attr("string",{default:"parentscope_"}),cxPropMaskingProperties:Lyte.attr("object"),cxPropDontShowDisabledLayouts:Lyte.attr("boolean",{default:!1}),displayValue:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.select")}),cxPropLayouts:Lyte.attr("array"),cxPropPlaceholder:Lyte.attr("string")}},init:function(){var e=this.data.cxPropFrom;if("criteria"==e||"filter"==e||"create"==e){"undefined"!=typeof moduleRecordMapping?this.data.moduleId=moduleRecordMapping[this.data.cxPropModule].id:this.data.moduleId=this.data.cxPropModule,this.data.modelReq||(this.data.modelReq=this.data.cxPropField&&this.data.cxPropField.api_name.match("Layout")?"layout":"wizard");var t=this.data.searchScope;t+=this.data.modelReq,this.getData("cxPropId")&&(t=t+"_"+this.data.cxPropId),this.setData("searchScope",t),this.data.cxPropType||this.setData("cxPropType","multisearch")}},methods:{addToList:function(e,t,o){Lyte.arrayUtils(this.data.value,"push",this.data.layout.filter((function(e){return e.id==t}))[0]),Lyte.arrayUtils(this.data.selectedIds,"push",t),$L("."+this.getData("searchScope")+" lyte-drop-item").length==JSON.parse(o).length&&this.setData("layoutLength",!1),this.setData("placeholder",this.data.cxPropPlaceholder?this.data.cxPropPlaceholder:"filter"==this.data.cxPropFrom?_cruxUtils.getI18n("crm.label.filter.typehere"):""),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue()),""!=this.$node.querySelector("lyte-search").ltProp("value")&&(this.adding=!0,this.$node.querySelector("lyte-search").setValue("")),this.preventClose=!0},removeFromList:function(e,t){for(var o=this.data.value,a=0;a<o.length;a++)if(o[a].id==t){Lyte.arrayUtils(this.data.value,"removeAt",a),Lyte.arrayUtils(this.data.selectedIds,"removeAt",a);break}0==this.data.value.length&&this.setData("placeholder",this.data.cxPropPlaceholder?this.data.cxPropPlaceholder:"filter"==this.data.cxPropFrom?_cruxUtils.getI18n("crm.label.filter.typehere"):_cruxUtils.getI18n("None")),this.setData("layoutLength",!0),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue()),this.$node.querySelector("lyte-dropdown")&&this.$node.querySelector("lyte-dropdown").open()},showNoResult:function(e){this.data.showLoading||(this.$node.querySelector("lyte-dropdown").component.childComp.classList.contains("lyteDropdownHidden")&&this.$node.querySelector("lyte-dropdown").toggle(),this.adding?this.adding=!1:(e=e.filter((e=>!e.classList.contains("lyteDropdownActive"))),this.setData("layoutLength",0!=e.length)))},selectLayout:function(e,t){this.setData("value",[{id:t}]),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue()),this.setData("selectedIds",[t])},onBeforeLayoutDropdown:function(){if(this.getMethods("onBeforeShow")&&this.executeMethod("onBeforeShow",arguments[0],arguments[1]),this.data.cxPropLayouts&&(this.setData("layout",this.data.cxPropLayouts),this.setData("showLoading",!1),"single"!=this.data.cxPropType?this.$node.querySelector("lyte-dropdown").setData("ltPropSelected",this.getData("selectedIds")):this.$node.querySelector("lyte-dropdown").ltProp("selected",this.data.selectedIds[0])),null==this.data.layout){this.getData("moduleId");var e=this,t=this.data.cxPropModule&&moduleRecordMapping?moduleRecordMapping[this.data.cxPropModule].api_name:this.data.cxPropModule;store.findAll(this.data.modelReq,{module:t},!0).then((function(t){"single"!=e.data.cxPropType||"create"==e.data.cxPropFrom||null!=t[0]&&"cruxLayoutSelect"==t[0].id||t.splice(0,0,{name:_cruxUtils.getI18n("crm.select"),id:"cruxLayoutSelect"});for(var o=[],a=!1,r=t.length,i="undefined"!=typeof Crm?store.peekRecord("user",Crm.userDetails.USER_ID):{},s=0;s<r;s++)a=e.checkProfilePermission(t[s].profiles,i.profile),"territory"==e.data.modelReq&&null==t[s].parent_id||a&&(0==e.data.cxPropDontShowDisabledLayouts||1==e.data.cxPropDontShowDisabledLayouts&&-1!=t[s].status)&&(o.push(t[s]),a=!1);e.setData("layout",o),(0==o.length||o.length==e.getData("value").length)&&e.setData("layoutLength",!1),e.setData("showLoading",!1),e.$node.querySelector("lyte-dropdown").setData("ltPropSelected",e.getData("selectedIds")),e.$node.querySelector("lyte-search input")&&e.$node.querySelector("lyte-search input").value&&e.$node.querySelector("lyte-search").setValue(e.$node.querySelector("lyte-search input").value)}),(function(t){e.setData({layout:[],layoutLength:!1,showLoading:!1})}))}else"single"!=this.data.cxPropType&&this.setData("layoutLength",!(this.data.layout.length==this.data.value.length))},closeDropdown:function(){this.$node.querySelector("lyte-search")&&""!=this.$node.querySelector("lyte-search").ltProp("value")&&(this.$node.querySelector("lyte-search").setValue(""),this.$node.querySelector("lyte-dropdown").close())},beforeHide:function(e){if(this.preventClose&&(this.preventClose=!1,e&&"scroll"==e.type))return!1},onSearchBoxFocused:function(e,t){var o=this.$node.querySelector("lyte-dropdown");"criteria"!=this.data.cxPropFrom||o.ltProp("isOpen")||o.open()}},checkProfilePermission:function(e,t){if(!e||!t)return!0;for(var o=0,a=e.length;o<a;o++)if(e[o].id==t.id)return!0;return!1},getValue:function(){for(var e=this.data.value,t=[],o=0;o<e.length;o++)t.push({id:e[o].id,name:e[o].name});return"single"==this.data.cxPropType?t[0]:t},validate:function(){return!(0==this.data.value.length&&!this.data.cxPropIgnoreEmptyValue&&(this.showAlert(_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(this.data.cxPropField.field_label))),1))},observeValue:function(){if("view"!=this.data.cxPropFrom&&this.data.cxPropValue){var e;e=this.data.cxPropValue.layouts.hasOwnProperty("id")?[].concat(this.data.cxPropValue.layouts):this.data.cxPropValue.layouts;for(var t=[],o=!0,a=0;a<e.length;a++)e[a].selected=!0,e[a].name||(o=!1),t.push(e[a].id);if(o)this.data.layoutLength,this.setData({value:e,selectedIds:t}),"single"==this.data.cxPropType&&this.setData("displayValue",e[0].name),this.setData("placeholder",this.data.cxPropPlaceholder?this.data.cxPropPlaceholder:"filter"==this.data.cxPropFrom?_cruxUtils.getI18n("crm.label.filter.typehere"):"");else{var r=this.data.cxPropModule&&"filter"===this.data.cxPropFrom&&moduleRecordMapping?moduleRecordMapping[this.data.cxPropModule].api_name:this.data.cxPropModule,i=this;store.findAll(this.data.modelReq,{module:r},!0).then((function(o){for(var a=e.length,r=0;r<a;r++){var s=store.peekRecord(i.data.modelReq,e[r].id);s?e[r].name=s.name:(e.splice(r,1),t.splice(r,1),r--,a--)}i.data.layoutLength,i.setData({value:e,selectedIds:t}),i.setData("placeholder",this.data.cxPropPlaceholder?this.data.cxPropPlaceholder:"filter"==i.data.cxPropFrom?_cruxUtils.getI18n("crm.label.filter.typehere"):"")}),(function(){for(var o=e.length,a=0;a<o;a++)e[a].name||(e.splice(a,1),t.splice(a,1),o--,a--);i.data.layoutLength,i.setData({value:e,selectedIds:t}),i.setData("placeholder",this.data.cxPropPlaceholder?this.data.cxPropPlaceholder:"filter"==i.data.cxPropFrom?_cruxUtils.getI18n("crm.label.filter.typehere"):"")}))}}}.observes("cxPropValue").on("init"),actions:{searchBoxClicked:function(){if(1==this.$node.querySelector("lyte-dropdown").ltProp("isOpen"))return this.$node.querySelector("lyte-search").querySelector("input").value&&this.$node.querySelector("lyte-search").setValue(""),!1},preventDefault:function(e,t){13==t.keyCode&&t.preventDefault()},setToolTip:function(e){e.offsetWidth<e.scrollWidth?e.setAttribute("title",e.textContent):e.setAttribute("title","")}}},{mixins:["crux-element-validation"]}),Lyte.Mixin.register("crux-lookup-mixin",{lookupInit:function(e,t,o,a,r){var i=this,s=[this.executeMethod("fetchModuleData",t)];if(this.data.cxPropRelatedId){var l=[{id:this.data.cxPropRelatedId,name:_cruxUtils.getI18n("crm.related.contact.account",this.data.module.plural_label,this.data.cxPropRelatedName)},{id:"2",name:_cruxUtils.getI18n("crm.allcontact.show",this.data.module.plural_label)}];this.setData("headerOptions",l),this.setData("selectedHeaderValue",this.data.cxPropRelatedId),s.push(this.executeMethod("fetchModuleData",this.data.cxPropRelatedModuleId))}Lyte.resolvePromises(s).then((function(t){var s=t[0];e.setData("module",s),i.setModuleData(e,s,o,r,a)}))},setModuleData:function(e,t,o,a,r){e.setData("moduleName",t.module_name);var i=t.display_field.api_name;e.setData("displayField",i),o?e.getRecs():e.beforeShowFunc(r,a,!0)},constructSearchFilter:function(e,t){var o={comparator:"contains",field:{api_name:e},value:t};if(("Products"==this.data.modulenameUicomp||"Products"==this.data.moduleName)&&this.data.module.fields){var a=this.data.module.fields.filterBy({api_name:"Product_Code"});a.length&&a[0].visible&&(o={group_operator:"or",group:[o,{comparator:"contains",field:{api_name:"Product_Code"},value:t}]})}if(this.data.header)for(var r=0;r<this.data.header.length;r++)if(this.data.header[r].api_name!=e)switch(this.data.header[r].cxTypeMapping){case"email":case"phone":o={group_operator:"or",group:[o,{comparator:"contains",field:{api_name:this.data.header[r].api_name},value:t}]}}return JSON.stringify(o)}}),Lyte.Component.register("crux-lookup-component",{_template:'<template tag-name="crux-lookup-component"><template is="if" value="{{lyteViewPort}}"><template case="true"><dummy-port-element></dummy-port-element> <div id="cruxLoadingElem" class="cxLoadOnViewElement"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxLoadOnViewLabel"> {{cxPropField[cxPropFieldKey]}} <div class="cxLoadOnViewLoader"></div> </div> </template></template> <div class="cxLoadOnViewValue"> {{cxPropValue}} <div class="cxLoadOnViewLoader"></div> </div> </div> <dummy-port-element></dummy-port-element></template><template case="false"> <template is="switch" value="{{cxPropFrom}}"><template case="view"> <template is="if" value="{{showEmptyValue}}"><template case="true"> {{cxPropEmptyValue}} </template><template case="false"> <template is="if" value="{{cxPropMaskingProperties}}"><template case="true">{{cruxMaskValue(lookupValue,cxPropMaskingProperties)}} </template><template case="false"> <link-to data-zcqa="{{cxPropZcqa}}" lt-prop-route="{{cxPropRouteName}}" lt-prop-dp="{{cxPropDynamicParams}}" lt-prop-qp="{{cxPropQueryParams}}" lt-prop-id="{{cxPropId}}" lt-prop-td="{{cxPropTransitionData}}" lt-prop-class="link" lt-prop-target="{{cxPropTarget}}" onmouseover="{{action(\'showLookupBC\',true)}}" onmouseout="{{action(\'showLookupBC\')}}"><template is="if" value="{{expHandlers(expHandlers(cxPropIconClass,\'&amp;&amp;\',lookupValue),\'&amp;&amp;\',expHandlers(cxPropHideIconForView,\'!\'))}}"><template case="true"><div class="{{cxPropIconClass}}"></div></template></template><lyte-text lt-prop-value="{{lookupValue}}" lt-prop-tooltip-config="{{cxPropTooltipConfig}}"></lyte-text></link-to> </template></template> </template></template> </template><template case="create"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxElementLabel {{cxPropLabelClass}}"> {{cxPropField[cxPropFieldKey]}} <template is="if" value="{{cxPropInfoTooltip}}"><template case="true"> <span class="dIB vam cxInfoIcon" onmouseenter="{{action(\'showInfoTooltip\',this)}}"></span> <lyte-hovercard lt-prop-placement="topLeft" lt-prop-keep-alive="true" lt-prop-popover-wrapper-class="cxElementsHovercard" lt-prop-origin-elem=".cxCurrentHovercard" on-hovercard-hide="{{method(\'hideInfoTooltip\')}}"> <template is="registerYield" yield-name="hoverCardYield"> <lyte-hovercard-content class="cxElementsHoverCardContent"> {{cxPropInfoTooltip}} </lyte-hovercard-content> </template> </lyte-hovercard> </template></template> </div> </template></template> <div class="cxElementValue {{if(cruxAnd(cxPropDisabled,expHandlers(cxPropReadonly,\'!\')),\'cxElementDisabled\',\'\')}}"> <div class="cxLookupComponent cxBoxWithRightIcon"> <div class="cxBoxLeftContent"> <template is="if" value="{{cxPropAutocomplete}}"><template case="true"> <lyte-autocomplete lt-prop-dropdown-class="cxLookupDropbox cxDropbox" lt-prop-title="{{tooltip}}" lt-prop-tooltip-config="{{cxPropTooltipConfig}}" lt-prop-tooltip-class="{{cxPropTooltipClass}}" lt-prop-prevent-inside-click="true" data-zcqa="{{cxPropZcqa}}" lt-prop-value="{{lookupSingle}}" on-select="{{method(\'autoComp\')}}" lt-prop-dropdown-height="250px" lt-prop-yield="true" lt-prop-appearance="{{cxPropAppearance}}" lt-prop-highlight="false" lt-prop-min-length="0" lt-prop-value-set="true" on-scroll="{{method(\'scrollRecord\')}}" lt-prop-autofocus="{{cxPropAutofocus}}" on-before-show="{{method(\'beforeShow\')}}" lt-prop-tab-index="{{cxPropTabIndex}}" lt-prop-disabled="{{cxPropDisabled}}" lt-prop-readonly="{{cxPropReadonly}}" lt-prop-placeholder="{{cxPropPlaceholder}}" id="{{cxPropId}}" class="{{cxPropClass}} {{if(isError,\'cxErrorBox\')}}" lt-prop-maxlength="{{cxPropMaxlength}}" lt-prop-error-class="noErrClass" on-focus="{{method(\'autoFocus\')}}" lt-prop-external-search="true" on-ext-search="{{method(\'beforeSearch\')}}" on-blur="{{method(\'onBlurInput\')}}" after-render="{{method(\'afterRenderAutocomplete\')}}" lt-prop-aria="{{cxPropAria}}" lt-prop-aria-attributes="{{cxPropAriaAttributes}}" on-hide="{{method(\'onHideDropdown\')}}" lt-prop-id="{{cxPropInputId}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box> <lyte-drop-body class="{{if(visible,\'cxVisibleLookup\')}}"> <template is="if" value="{{expHandlers(initComp,\'&amp;&amp;\',expHandlers(ften.length,\'>\',0))}}"><template case="true"><template is="for" items="{{ften}}" item="val" index="index"> <lyte-drop-item data-value="{{val.id}}" class="lookupSearchLi" data-zcqa="{{val[displayField]}}" onmouseenter="{{action(\'showHideIcon1\',true,val)}}" onmouseleave="{{action(\'showHideIcon1\',false,val)}}"> <lyte-autocomplete-label> <lyte-text class="cxLookupDropboxLabel" lt-prop-value="{{val[displayField]}}"></lyte-text> <template is="if" value="{{cxPropShowHideTooltip}}"><template case="true"> <span class="cxLookupInfoIcon {{if(val.cxPropShowIcon,\'cruxLookupPopover\')}}" onmouseenter="{{action(\'infoPop\',this,val,event)}}" onmouseleave="{{action(\'infoPop\',this,val,event)}}" style="{{if(val.cxPropShowIcon,\'visibility: visible;\',\'visibility: hidden\')}}"></span> </template></template> </lyte-autocomplete-label> </lyte-drop-item> </template></template><template case="false"><template is="if" value="{{expHandlers(initComp,\'&amp;&amp;\',expHandlers(expHandlers(ften,\'!\'),\'||\',expHandlers(ften.length,\'===\',0)))}}"><template case="true"> <template is="if" value="{{searchPerformed}}"><template case="true"> <div class="cxDropdownNoResult">{{cruxGetI18n(\'crm.template.listview.search.no.results\')}}</div> </template><template case="false"> <div class="cxDropdownNoResult">{{cruxGetI18n(\'crm.krp.no.records.found\',module.singular_label)}}</div> </template></template> </template></template></template></template> </lyte-drop-body> <template is="if" value="{{cxPropFooterYield}}"><template case="true"><lyte-drop-footer><lyte-yield yield-name="footer"></lyte-yield></lyte-drop-footer></template></template> </lyte-drop-box> </template> </lyte-autocomplete> </template><template case="false"><template is="if" value="{{cxPropDisabled}}"><template case="true"> <lyte-input class="cxLookupCompDisabledInput" lt-prop-appearance="{{cxPropAppearance}}" data-zcqa="{{cxPropZcqa}}" lt-prop-value="{{lookupSingle}}" lt-prop-disabled="true"></lyte-input> </template><template case="false"> <lyte-input class="cxLookupCompReadonlyInput" lt-prop-appearance="{{cxPropAppearance}}" data-zcqa="{{cxPropZcqa}}" lt-prop-value="{{lookupSingle}}" lt-prop-readonly="true" onclick="{{action(\'showLookup\',event)}}" lt-prop-id="{{cxPropInputId}}"></lyte-input> </template></template></template></template> <template is="if" value="{{showLoading}}"><template case="true"> <div class="cxBoxSpinWrapper cxFlexCenter"> <span class="cxElementsLoaderBg" id="Crm_{{cxPropModule}}_{{cxPropField.column_name}}_loadimg"></span> </div> </template><template case="false"><template is="if" value="{{expHandlers(cxPropAutocomplete,\'&amp;&amp;\',expHandlers(cxPropShowCloseIcon,\'||\',expHandlers(expHandlers(cxPropShowCloseIcon,\'!\'),\'&amp;&amp;\',lookupSingle)))}}"><template case="true"> <div class="cxBoxCloseIconWrap cxFlexCenter"> <div id="Crm_lookup_img_Crm_{{cxPropModule}}_{{cxPropField.column_name}}" class="cxBoxCloseIcon cP {{cxPropClearIconClass}}" onclick="{{action(\'clearlookupField\')}}" data-zcqa="lookup_Crm_{{cxPropModule}}_{{cxPropField.column_name}}_close"></div> </div> </template></template></template></template> </div> <div class="cxLookupIcon cxBoxRightIcon cxFlexCenter cP" onclick="{{action(\'showLookup\',event)}}" data-zcqa="{{if(cxPropImgZcqa,cxPropImgZcqa,concat(\'lookup_\',cxPropZcqa))}}"> <div class="{{cxPropIconClass}}" data-label="Crm_{{cxPropModule}}_{{cxPropField.column_name}}" id="Crm_{{cxPropModule}}_{{cxPropField.column_name}}_img" tabindex="{{cxPropField.tab_index}}" lt-prop-title="{{cxPropIconTooltip}}"></div> </div> <template is="if" value="{{renderLookup}}"><template case="true"><template is="if" value="{{cxPropAdvanceSearchEnabled}}"><template case="true"> <crux-lookup-filter-modal cx-prop-field-of-lookup-val="{{cxPropFieldOfLookupVal}}" cx-prop-parent-module="{{cxPropParentModule}}" cx-prop-default-criteria="{{cxPropDefaultCriteria}}" module="{{lbind(module)}}" show="{{show}}" disp-init="{{dispInit}}" fetch-module-data="{{method(\'fetchModule\')}}" fetch-records="{{method(\'fetchRecordsData\')}}" mod-id="{{modId}}" display-field="{{lbind(displayField)}}" is-single="{{isSingle}}" record="{{lbind(record)}}" selected-single="{{selectedSingle.id}}" selected-single-record="{{lbind(selectedSingle)}}" lookup-single="{{lbind(lookupSingle)}}" module-name="{{lbind(moduleName)}}" on-value-change="{{method(\'triggerOnValueChange\')}}" cx-prop-value="{{cxPropValue}}" render-lookup="{{lbind(renderLookup)}}" fields-obj="{{moduledataUicomp}}" cx-prop-create-yield="{{cxPropCreateYield}}" temp-close="{{lbind(tempClose)}}" id-index="{{idIndex}}" cx-prop-related-id="{{cxPropRelatedId}}" cx-prop-related-module-id="{{cxPropRelatedModuleId}}" cx-prop-related-name="{{cxPropRelatedName}}" cx-prop-dont-show-related-dropdown="{{cxPropDontShowRelatedDropdown}}" cx-prop-field="{{moduledataUicomp}}"> <template is="yield" yield-name="createYield"><lyte-yield yield-name="createYield"></lyte-yield></template> </crux-lookup-filter-modal> </template><template case="false"> <crux-lookup-modal fetch-records-on-enter="{{cxPropFetchRecordsOnEnter}}" module-data="{{moduleData}}" moduledata-uicomp="{{moduledataUicomp}}" api-name="{{apiName}}" query-param-object="{{lbind(queryParamObject)}}" related-field-comp="{{lbind(relatedFieldComp)}}" advanced-search="{{Crm.userDetails.isLookupAdvancedSearchEnabled}}" column-list="{{Crm.userDetails.isLookupAdvancedSearchEnabled}}" related-to="{{lbind(relatedTo)}}" record="{{lbind(record)}}" mod-id="{{modId}}" disp-init="{{dispInit}}" rendered-page="{{lbind(renderedPage)}}" selected-single="{{selectedSingle.id}}" selected-single-record="{{lbind(selectedSingle)}}" display-field="{{lbind(displayField)}}" is-single="{{isSingle}}" field-mapping="{{uiTypeMapping}}" lookup-single="{{lbind(lookupSingle)}}" module-name="{{lbind(moduleName)}}" module="{{lbind(module)}}" per-page="10" show="{{show}}" rep-record="{{lbind(repRecord)}}" fld-id="{{fldId}}" relations="{{lbind(relations)}}" fetch-module-data="{{method(\'fetchModule\')}}" cx-prop-value="{{cxPropValue}}" fetch-records="{{method(\'fetchRecordsData\')}}" cx-prop-field="{{moduledataUicomp}}" on-create-new="{{method(\'createNew\')}}" cx-prop-related-to="{{cxPropRelatedTo}}" on-value-change="{{method(\'triggerOnValueChange\')}}" cx-prop-create-yield="{{cxPropCreateYield}}" cx-prop-header="{{cxPropHeader}}" meta-more-records="{{cxPropMetaMoreRecords}}" cx-prop-fields="{{cxPropFields}}" cx-prop-related-id="{{cxPropRelatedId}}" cx-prop-related-module-id="{{cxPropRelatedModuleId}}" cx-prop-related-name="{{cxPropRelatedName}}" cx-prop-meta-more-records="{{cxPropMetaMoreRecords}}" cx-prop-dont-show-related-dropdown="{{cxPropDontShowRelatedDropdown}}"> <template is="yield" yield-name="createYield"><lyte-yield yield-name="createYield"></lyte-yield></template> </crux-lookup-modal> </template></template></template></template> </div> <template is="if" value="{{isError}}"><template case="true"> <crux-error-message error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-field="{{cxPropField}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}"> <template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}" cx-field="{{cxPropField}}"></lyte-yield></template> </crux-error-message> </template></template> </div> </template></template> </template></template></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]},{type:"attr",position:[2,1]},{type:"if",position:[2,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]}]}},default:{}},{type:"text",position:[2,3,1]},{type:"componentDynamic",position:[4]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{view:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,0]},{type:"if",position:[1,0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}},{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]},create:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"attr",position:[3,1,1,1]},{type:"if",position:[3,1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"for",position:[0],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"componentDynamic",position:[1,1,1]},{type:"attr",position:[1,1,3]},{type:"if",position:[1,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"if",args:["val.cxPropShowIcon","'visibility: visible;'","'visibility: hidden'"]}}}}]}},default:{}},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]},false:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"insertYield",position:[0,0]},{type:"componentDynamic",position:[0]}]}},default:{}},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[3,1,1,3]},{type:"if",position:[3,1,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]}]}},default:{}}]}},default:{}},{type:"attr",position:[3,1,3]},{type:"attr",position:[3,1,3,1]},{type:"attr",position:[3,1,5]},{type:"if",position:[3,1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["lyteViewPort","cxPropDefaultCriteria","cxPropFieldOfLookupVal","cxPropParentModule","cxPropModule","cxPropValue","cxPropRouteName","cxPropZcqa","cxPropDynamicParams","cxPropQueryParams","cxPropTransitionData","cxPropIconClass","cxPropId","cxPropFrom","cxPropEmptyValue","lookupSingle","cxPropAutofocus","cxPropTabIndex","cxPropDisabled","cxPropPlaceholder","cxPropReadonly","cxPropToggle","cxPropField","cxPropFieldKey","cxPropLabelClass","cxPropAdvanceSearchEnabled","lookupCreateRecord","initComp","ften","records","apiName","cxPropClass","cxPropMaxlength","displayField","modulenameUicomp","columnName","renderLookup","moduleData","moduledataUicomp","queryParamObject","relatedFieldComp","relatedTo","record","modId","dispInit","renderedPage","selectedSingle","isSingle","uiTypeMapping","moduleName","show","repRecord","fldId","relations","module","value","cxPropTarget","cxPropCreateYield","cxPropRelatedTo","lyteUnbound","cxPropAutocomplete","cxPropFetchRecordsOnEnter","cxPropAppearance","isError","cxPropErrorMessage","cxPropShowHideTooltip","cxPropClearErrorMessage","cxPropTooltip","cxPropImagePath","cxPropMetaMoreRecords","cxPropIconTooltip","showEmptyValue","cxPropErrorYield","cxPropHeader","cxPropFields","visible","cxPropInfoTooltip","cxPropImgZcqa","lookupValue","cxPropShowBc","lookupId","cxPropFooterYield","cxPropRecordImageSrc","cxPropAria","cxPropAriaAttributes","cxPropPopoverWrapperClass","cxPropMaskingProperties","tooltip","cxPropRelatedId","cxPropRelatedModuleId","cxPropRelatedName","cxPropShowCloseIcon","cxPropTooltipConfig","cxPropTooltipClass","cxPropHideIconForView","cxPropDontShowRelatedDropdown","cxPropErrorZcqaPrefix","cxPropErrorZcqaSuffix","searchPerformed","cxPropErrorClass","cxPropInputId","showLoading","cxPropErrorSpanClass","cxPropClearIconClass"],data:function(){return{lyteViewPort:Lyte.attr("boolean",{default:!1}),cxPropDefaultCriteria:Lyte.attr("array",{default:[]}),cxPropFieldOfLookupVal:Lyte.attr("array",{default:[]}),cxPropParentModule:Lyte.attr("string",{default:""}),cxPropModule:Lyte.attr("string"),cxPropValue:Lyte.attr("string"),cxPropRouteName:Lyte.attr("string"),cxPropZcqa:Lyte.attr("string"),cxPropDynamicParams:Lyte.attr("string"),cxPropQueryParams:Lyte.attr("string"),cxPropTransitionData:Lyte.attr("string"),cxPropIconClass:Lyte.attr("string"),cxPropId:Lyte.attr("string",{default:""}),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropEmptyValue:Lyte.attr("string",{default:""}),lookupSingle:Lyte.attr("string",{default:"",hideAttr:!0}),cxPropAutofocus:Lyte.attr("boolean"),cxPropTabIndex:Lyte.attr("string"),cxPropDisabled:Lyte.attr("boolean",{default:!1}),cxPropPlaceholder:Lyte.attr("string"),cxPropReadonly:Lyte.attr("boolean",{default:!1}),cxPropToggle:Lyte.attr("boolean",{default:!1}),cxPropField:Lyte.attr("object",{default:{},hideAttr:!0}),cxPropFieldKey:Lyte.attr("string",{default:""}),cxPropLabelClass:Lyte.attr("string",{default:""}),cxPropAdvanceSearchEnabled:Lyte.attr("boolean",{default:"undefined"!=typeof Crm&&Crm.userDetails.isLookupAdvancedSearchEnabled}),lookupCreateRecord:Lyte.attr("object",{default:{}}),initComp:Lyte.attr("boolean",{default:!1}),ften:Lyte.attr("array",[]),records:Lyte.attr("array",{default:[]}),apiName:Lyte.attr("string"),cxPropClass:Lyte.attr("string",{default:""}),cxPropMaxlength:Lyte.attr("number"),displayField:Lyte.attr("string",{default:"",hideAttr:!0}),modulenameUicomp:Lyte.attr("string"),columnName:Lyte.attr("string"),renderLookup:Lyte.attr("boolean",{default:!1}),moduleData:Lyte.attr("object"),moduledataUicomp:Lyte.attr("object"),queryParamObject:Lyte.attr("object",{default:{}}),relatedFieldComp:Lyte.attr("array",{default:[]}),relatedTo:Lyte.attr("object",{default:{}}),record:Lyte.attr("array",{default:[]}),modId:Lyte.attr("string",{default:""}),dispInit:Lyte.attr("boolean",{default:!1}),renderedPage:Lyte.attr("number",{default:1}),selectedSingle:Lyte.attr("object",{default:{}}),isSingle:Lyte.attr("boolean"),uiTypeMapping:Lyte.attr("object",{default:"undefined"!=typeof crmConstants&&crmConstants.defaultUiTypeToCruxMapping?crmConstants.defaultUiTypeToCruxMapping:{}}),moduleName:Lyte.attr("string",{default:""}),show:Lyte.attr("boolean",{default:!1}),repRecord:Lyte.attr("array",{default:[]}),fldId:Lyte.attr("string"),relations:Lyte.attr("array",{default:[]}),module:Lyte.attr("object",{default:{}}),value:Lyte.attr("object",{default:{}}),cxPropTarget:Lyte.attr("string",{default:"_self"}),cxPropCreateYield:Lyte.attr("boolean"),cxPropRelatedTo:Lyte.attr("object"),lyteUnbound:Lyte.attr("boolean",{default:!1}),cxPropAutocomplete:Lyte.attr("boolean",{default:!0}),cxPropFetchRecordsOnEnter:Lyte.attr("boolean",{default:!1}),cxPropAppearance:Lyte.attr("string",{default:"box"}),isError:Lyte.attr("boolean",{default:!1}),cxPropErrorMessage:Lyte.attr("string",{default:""}),cxPropShowHideTooltip:Lyte.attr("boolean",{default:!0}),cxPropClearErrorMessage:Lyte.attr("boolean",{default:!0}),cxPropTooltip:Lyte.attr("string",{default:""}),cxPropImagePath:Lyte.attr("string",{default:"//img.zohocdn.com/crm/CRMClient/images"}),cxPropMetaMoreRecords:Lyte.attr("string",{default:"more_records"}),cxPropIconTooltip:Lyte.attr("string"),showEmptyValue:Lyte.attr("boolean",{default:!1}),cxPropErrorYield:Lyte.attr("boolean",{default:!1}),cxPropHeader:Lyte.attr("string"),cxPropFields:Lyte.attr("array"),visible:Lyte.attr("boolean",{default:!1}),cxPropInfoTooltip:Lyte.attr("string",{default:""}),cxPropImgZcqa:Lyte.attr("string"),lookupValue:Lyte.attr("string"),cxPropShowBc:Lyte.attr("boolean",{default:!1}),lookupId:Lyte.attr("string"),cxPropFooterYield:Lyte.attr("boolean",{default:!1}),cxPropRecordImageSrc:Lyte.attr("string"),cxPropAria:Lyte.attr("boolean",{default:!1}),cxPropAriaAttributes:Lyte.attr("object",{default:{}}),cxPropPopoverWrapperClass:Lyte.attr("string",{default:""}),cxPropMaskingProperties:Lyte.attr("object"),tooltip:Lyte.attr("string"),cxPropRelatedId:Lyte.attr("string"),cxPropRelatedModuleId:Lyte.attr("string"),cxPropRelatedName:Lyte.attr("string"),cxPropShowCloseIcon:Lyte.attr("boolean",{default:!1}),cxPropTooltipConfig:Lyte.attr("string",{default:'{"position": "bottom"}'}),cxPropTooltipClass:Lyte.attr("string",{default:"cxTooltip"}),cxPropHideIconForView:Lyte.attr("boolean",{default:!1}),cxPropDontShowRelatedDropdown:Lyte.attr("boolean",{default:!1}),cxPropErrorZcqaPrefix:Lyte.attr("string",{default:""}),cxPropErrorZcqaSuffix:Lyte.attr("string",{default:"Error"}),searchPerformed:Lyte.attr("boolean",{default:!1}),cxPropErrorClass:Lyte.attr("string"),cxPropInputId:Lyte.attr("string",{default:"inputId"}),showLoading:Lyte.attr("boolean",{default:!1}),cxPropErrorSpanClass:Lyte.attr("string"),cxPropClearIconClass:Lyte.attr("string")}},init:function(){this.lookupModalName=this.getData("cxPropAdvanceSearchEnabled")?"crux-lookup-filter-modal":"crux-lookup-modal"},lookupModalName:void 0,methods:{autoComp:function(e){this.selection=!0,this.data.cxPropClearErrorMessage&&this.setData("cxPropErrorMessage","");for(var t,o=this.getData("ften"),a=this.getData("displayField"),r=o.length,i=0;i<r;i++)if(o[i].id===e){this.setData("selectedSingle",o[i]),this.setData("ften",o[i]),t="Full_Name"===a?o[i].First_Name?o[i].First_Name+" "+o[i].Last_Name:o[i].Last_Name:o[i][a],this.setData("lookupSingle",t),this.setData("cxPropValue",{id:o[i].id,name:t}),this.data.cxPropClearErrorMessage&&this.setData("cxPropErrorMessage",""),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getData("cxPropValue"));break}},beforeSearch:function(e,t,o){o.type&&(e=e.trim(),this.setData("showLoading",!0),["Backspace","Meta"].indexOf(o.key)>-1&&this.search&&(this.search=!1),this.getData("record"),""==e?(this.setData("selectedSingle",{}),this.setData("lookupSingle",""),this.setData("selectedSingleId",""),this.setData("cxPropValue",""),this.$node.querySelector("lyte-autocomplete").ltProp("selected",""),this.setData("cxPropShowCloseIcon",!1)):this.setData("cxPropShowCloseIcon",!0),this.search?this.setData("showLoading",!1):this.onSearchFun(e,void 0,t.getData("ltPropSelected")))},scrollRecord:function(){if(!this.noMoreScroll){var e=this.getData("ften"),t=this.getData("queryParamObject"),o=event.target&&"LYTE-DROP-BODY"===event.target.tagName?event.target:null;t.page=Math.ceil(e.length/10),t.per_page=10,this.scrollRequest(this,t,o,e,!1)}},beforeShow:function(e,t){return this.setData("visible",!0),this.setData("showLoading",!0),this.initFromField=!0,new Promise(function(o,a){this._initRes=o,this._initRej=a,this.lookupInit(this,this.getData("moduledataUicomp").lookup.module.id,!1,e,t)}.bind(this))},autoFocus:function(e,t){var o=$L(t).find("lyte-dropdown")[0].component.getDropBox(),a=$L(this.$node).width();o.style.width=a+"px",this.$node.querySelector(".cxLookupComponent").classList.add("cxBoxDropdownOpened")},fetchModule:function(e){return this.executeMethod("fetchModuleData",e)},fetchRecordsData:function(e,t){var o=this;return this.executeMethod("fetchRecords",e,t).then((function(e){return e}),(function(e){return o.setData("renderLookup",!1),e}))},createNew:function(){this.executeMethod("onCreateNew")},triggerOnValueChange:function(e){e.name=e.name?e.name:e.displayName,this.setData("cxPropValue",e),$(this.$node.querySelector("input")).effect("highlight",{},1e3),this.getData("cxPropClearErrorMessage")&&this.setData("cxPropErrorMessage",""),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",e)},onBlurInput:function(e,t){return this.$node.querySelector(".cxLookupComponent").classList.remove("cxBoxDropdownOpened"),setTimeout(function(){this.selection&&this.getData("cxPropClearErrorMessage")&&this.setData("cxPropErrorMessage",""),""==t.querySelector("input").value&&(this.setData("cxPropValue",void 0),this.setData({selectedSingle:{},lookupSingle:void 0}),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getData("cxPropValue"))),this.selection=!1}.bind(this),100),!0},afterRenderAutocomplete:function(){this.$node.querySelector("lyte-input")&&"box"==this.getData("cxPropAppearance")&&this.$node.querySelector("lyte-input").classList.add("cxBoxInput")},hideInfoTooltip:function(){this.showHideInfoTooltip()},onHideDropdown:function(){this.setData("visible",!1)}},actions:{infoPop:function(e,t,o){var a=document.getElementById("cruxLookupPopover");"mouseenter"==o.type?(this.entered=!0,a||(a=Lyte.Component.render("crux-lookup-popup",{id:"cruxLookupPopover",fieldMapping:this.getData("uiTypeMapping"),cxPropPopoverWrapperClass:this.data.cxPropPopoverWrapperClass},"body")),a.setData({show:!0,module:this.getData("module"),data:t})):(this.entered=!1,a.setData("show",!1))},clearlookupField:function(){this.setData("selectedSingle",{}),this.setData("lookupSingle",""),this.$node.querySelector("lyte-autocomplete").ltProp("value",""),this.setData("selectedSingleId",""),this.setData("cxPropValue",""),this.$node.querySelector("lyte-autocomplete").ltProp("selected","");var e=this.getData("lookupCreateRecord");this.setData("ften",this.getData("record")),e&&e.module&&(e.createNew=!1,this.setData("lookupCreateRecord",e)),this.getMethods("onClear")&&this.executeMethod("onClear"),this.$node.querySelector("lyte-autocomplete lyte-input").focus(),this.setData("cxPropShowCloseIcon",!1),this.data.value=void 0},showLookup:function(e){this.getData("cxPropDisabled")||(this.getMethods("onShowLookup")?this.executeMethod("onShowLookup",e):this.showLookupFunc(this)),e&&e.stopPropagation()},showHideIcon1:function(e,t){this.entered||Lyte.objectUtils(t,"add","cxPropShowIcon",e)},showInfoTooltip:function(e){this.showHideInfoTooltip(e)},showLookupBC:function(e){if(this.data.cxPropShowBc){var t=document.querySelector("crux-lookup-view-popup");clearTimeout(this.popoverTimeout),e?(this.$node.classList.add("cxLookupBc"),t?t.setData({show:!0,field:this.data.cxPropField,entityId:this.data.id,cxPropTypeMapping:this.data.uiTypeMapping,cxPropRecordImageSrc:this.data.cxPropRecordImageSrc}):Lyte.Component.render("crux-lookup-view-popup",{show:!0,field:this.data.cxPropField,entityId:this.data.lookupId,cxPropTypeMapping:this.data.uiTypeMapping,cxPropRecordImageSrc:this.data.cxPropRecordImageSrc},".cxLookupBc")):t&&(this.popoverTimeout=setTimeout(function(){t.setData("show",!1),this.$node.classList.remove("cxLookupBc")}.bind(this),200))}}},ftenToRecord:function(){this.initial||(this.setData("ften",this.getData("record")),this.initial=!0),this.getData("cxPropMetaMoreRecords")&&this.getData("record").$&&(0==this.getData("record").$[this.getData("cxPropMetaMoreRecords")]||this.getData("record").$.meta&&0==this.getData("record").$.meta[this.getData("cxPropMetaMoreRecords")])?this.noMoreScroll=!0:this.noMoreScroll=!1}.observes("record"),ftenTorepRecord:function(){this.noMoreScroll=!1}.observes("repRecord"),saveAndAssocRec:function(){this.$node.classList.remove("currentLookupModal"),this.saveNewRecord(this)}.observes("save","newCreatedid"),observeSelectedId:function(){var e=this.getData("moduledataUicomp"),t=this,o=this.getData("selectedSingleId"),a=this.getData("module"),r=this.getData("newLookupcreated");if(e.selectedId=o,e.lookupSingle=this.getData("lookupSingle"),this.setData("moduledataUicomp",e),r){var i=e.lookup.module.id;i&&(a.id||e.module.id===i?(a.id||e.module.id===i)&&(t.setData({module:e.module[0],moduleName:e.module[0].module_name,displayField:e.module[0].display_field.api_name}),t.setSelectedId(i,o)):store.findRecord("module",i).then((function(e){t.setData({module:e[0],moduleName:e[0].module_name,displayField:e[0].display_field.api_name}),t.setSelectedId(i,o)})))}}.observes("selectedSingleId"),singleValueSet:function(){var e=this.getData("moduledataUicomp");this.getData("relatedFieldComp"),e.selectedId=this.getData("selectedSingle").id,e.lookupSingle=this.getData("lookupSingle"),this.setData("moduledataUicomp",e)}.observes("selectedSingle"),beforeShowFunc:function(e,t,o,a){var r=this,i=t.$node._callee.ltProp("value");if(!i){var s={page:1,per_page:10};return this.executeMethod("fetchRecords",this.data.module.id,Object.assign({},s)).then((function(e){e=e&&e.length?e:[],r.setData({record:e,ften:e,queryParamObject:s}),r.setData("showLoading",!1),r.setData("initComp",!0),r._initRes&&r._initRes(),a&&a()}),(function(){r.initFromField=!1,r.setData("showLoading",!1),r._initRej&&r._initRej()}))}this.setData("initComp",!0),this.onSearchFun(i,a,t.data.ltPropSelected||this.data.value?this.data.value.id:"")},showLookupFunc:function(e,t){"undefined"!=typeof commonUtils&&commonUtils.showHideLoadingDiv&&commonUtils.showHideLoadingDiv(!0),t||this.getData("renderLookup")?(e.setData("show",!1),(e=t?e:this.$node.querySelector(this.lookupModalName).component).data.isSingle&&(e.records=[],e.lookupInit(e,e.getData("modId"),!0))):("lookup"===e.getData("moduledataUicomp").data_type?e.setData("isSingle",!0):e.setData("isSingle",!1),e.setData("renderLookup",!0),e.setData("dispInit",!0))},onSearchFun:function(e,t,o){var a=this.getData("displayField"),r={},i=this;r.filters=this.constructSearchFilter(a,e),r.page=1,r.per_page=10,a?this.executeMethod("fetchRecords",this.getData("modId"),Object.assign({},r)).then((function(a){i.setData("searchPerformed",!0),a=a||[],i.setData({ften:a,queryParamObject:r}),i.getData("cxPropMetaMoreRecords")&&i.getData("record").$&&(0==i.getData("record").$[i.getData("cxPropMetaMoreRecords")]||i.getData("record").$.meta&&0==i.getData("record").$.meta[i.getData("cxPropMetaMoreRecords")])?i.noMoreScroll=!0:i.noMoreScroll=!1,t&&t(),i._initRes&&i._initRes(),i.setData("showLoading",!1),i.$node.querySelector("lyte-dropdown").open();var s=i.$node.querySelector("input").value;s!=e&&i.$node.querySelector("lyte-autocomplete").setValue(s),i.$node.querySelector("lyte-dropdown").component.childComp&&i.$node.querySelector("lyte-dropdown").component.childComp.querySelector("[data-value='"+o+"']")&&i.$node.querySelector("lyte-dropdown").component.childComp.querySelector("[data-value='"+o+"']").setAttribute("selected",!0)}),(function(){i.setData("showLoading",!1)})):this.lookupInit(this,this.getData("moduledataUicomp").lookup.module.id,!1,void 0,this)},scrollRequest:function(e,t,o,a,r){if(!e.scrl&&o.scrollTop+o.offsetHeight>=o.scrollHeight-10){if(t.page+=1,t.per_page=10,e.scrl=!0,r){var i=e.$node.querySelector("#modalElem").component.childComp.querySelector(".lookupFetchLoad");i&&(i.style.display="block")}var s=e.data.module.id;this.executeMethod("fetchRecords",s,Object.assign({},t)).then((function(o){if(o){a=a.concat(o),e.setData("record",a),r?Lyte.arrayUtils(e.data.displayArray,"push",o):Lyte.arrayUtils(e.data.ften,"push",o),e.setData("queryParamObject",t),o={};var s=e.data.value?e.data.value.id:"";e.$node.querySelector("lyte-dropdown").component.childComp&&e.$node.querySelector("lyte-dropdown").component.childComp.querySelector("[data-value='"+s+"']")&&e.$node.querySelector("lyte-dropdown").component.childComp.querySelector("[data-value='"+s+"']").setAttribute("selected",!0)}else e.noMoreScroll=!0;setTimeout((function(){e.scrl=!1}),20),r&&i&&(i.style.display="none")}))}},didDestroy:function(){var e=document.getElementById("cruxLookupPopover");e&&e.remove()},getValue:function(){var e=this.getData("cxPropValue"),t=this.getData("value");if(t&&t.id){var o=this.$node.querySelector("lyte-input #"+this.data.cxPropInputId);return o&&o.value&&o.value.trim()==t.name?e:void 0}return e},validate:function(){var e=this.validateMandatory(null==this.$node.querySelector("input")||0==this.$node.querySelector("input").length||""==this.$node.querySelector("input").value||""==this.$node.querySelector("input").value.trim());return e&&(e=this.validateMandatory(!this.getValue(),function(){this.getMethods("onError")?this.executeMethod("onError",this.errorCodes.ERR02,this):this.setData("cxPropErrorMessage",_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(this.getData("cxPropField").field_label)))}.bind(this))),e||(this.setData("cxPropValue",this.getValue()),this.$node.querySelector("lyte-autocomplete")&&this.$node.querySelector("lyte-autocomplete").focus()),e},observeErrorMessage:function(){this.setData("isError",""!=this.getData("cxPropErrorMessage"))}.observes("cxPropErrorMessage").on("init"),observeValue:function(){if("view"==this.getData("cxPropFrom")){var e=this.data.cxPropValue;if(e){try{e=JSON.parse(e),this.setData({lookupValue:e.name,lookupId:e.id}),this.setData("showEmptyValue",!1)}catch(t){this.setData("lookupValue",e)}"string"!=typeof e&&"object"!=typeof e&&(e=e.toString(),this.setData("lookupValue",e))}else this.getData("cxPropEmptyValue")&&this.setData("showEmptyValue",!0)}if("create"==this.getData("cxPropFrom")&&this.getData("cxPropValue"))try{this.setData("value",JSON.parse(this.getData("cxPropValue"))),this.setData("lookupSingle",this.getData("value").name)}catch(e){this.setData("value",this.data.cxPropValue),this.setData("lookupSingle",this.data.value.name)}}.observes("cxPropValue","cxPropFrom").on("init"),refresh:function(e){if("crux-lookup-filter-modal"!==this.lookupModalName){var t=this.$node.querySelector(this.lookupModalName);if(t){t=t.component;var o={page:1,per_page:10};this.executeMethod("fetchRecords",this.getData("module").id,Object.assign({},o)).then(function(a){a=a&&a.length?a:[],e&&e.cxPropValue&&(this.setData({cxPropValue:e.cxPropValue,value:JSON.parse(e.cxPropValue),lookupSingle:JSON.parse(e.cxPropValue).name}),t.setData({lookupSingle:JSON.parse(e.cxPropValue).name,selectedSingle:JSON.parse(e.cxPropValue).id})),t.setData({record:a,queryParamObject:o}),a.length<10?t.setNavigator(a.length):t.setNavigator(a.length,!0),t.rendHome()}.bind(this))}}else this.setData("renderLookup",!0)},observeMandatory:function(){this.$node.querySelector("lyte-input")&&(this.getData("cxPropField").required?this.$node.querySelector(".cxLookupComponent").classList.add("mandatoryField"):this.$node.querySelector(".cxLookupComponent").classList.remove("mandatoryField"))}.observes("cxPropField.required"),observesdidConnect:function(){if("create"==this.getData("cxPropFrom")&&this.$node.classList.add("dB"),"create"==this.getData("cxPropFrom")&&this.$node.querySelector(".cxLookupComponent")&&(this.getData("cxPropField").required?this.$node.querySelector(".cxLookupComponent").classList.add("mandatoryField"):this.$node.querySelector(".cxLookupComponent").classList.remove("mandatoryField")),this.getData("cxPropToggle")){var e=this.$node.querySelector("lyte-autocomplete");e&&e.toggle()}}.observes("lyteViewPort").on("didConnect"),close:function(){this.$node.querySelector(this.lookupModalName).component.close()},observeIsError:function(){if("create"==this.getData("cxPropFrom")&&this.$node.querySelector("lyte-input")){var e=$L(this.$node),t=(e.find("lyte-input"),e.find(".cxBoxWithRightIcon")),o=e.find("crux-error-message");this.getData("isError")?(t.addClass("cxErrorBoxWithRightIcon"),o.hasClass("cxErrorMsgMultiLines")&&t.addClass("cxErrorMsgMultiLinesBoxInside")):(t.removeClass("cxErrorBoxWithRightIcon"),t.removeClass("cxErrorMsgMultiLinesBoxInside"))}}.observes("isError").on("didConnect"),observeFrom:function(){if("create"==this.getData("cxPropFrom")){this.setData("modulenameUicomp",this.data.cxPropModule);var e=this.getData("cxPropField");this.setData({columnName:e.column_name,moduledataUicomp:e,apiName:e.api_name}),"lookup"==e.data_type&&(this.getData("cxPropModule")==e.lookup.module.api_name&&"undefined"!=typeof moduleRecordMapping&&this.setData("module",moduleRecordMapping[this.data.cxPropModule]),this.setData({modId:e.lookup.module.id,isSingle:!0})),this.$node.refresh=function(e){return this.component.refresh(e)},this.$node.close=function(){return this.component.close()},this.getData("cxPropDisabled")&&!this.data.cxPropTooltip&&this.setData("cxPropTooltip",_cruxUtils.getI18n("crm.lable.read.only"))}}.observes("cxPropFrom").on("init"),observeName:function(){"create"!=this.data.cxPropFrom||this.data.cxPropTooltip||(this.$node.querySelector("input")&&this.$node.querySelector("input").scrollWidth>this.$node.querySelector("input").offsetWidth?this.setData("tooltip",this.data.lookupSingle):this.setData("tooltip",""))}.observes("lookupSingle").on("didConnect"),observeTooltip:function(){this.setData("tooltip",this.data.cxPropTooltip)}.observes("cxPropTooltip").on("init"),ele:".cxLookupComponent"},{mixins:["crux-lookup-mixin","crux-element-validation"]}),Lyte.Component.register("crux-number-component",{_template:'<template tag-name="crux-number-component"><template is="if" value="{{lyteViewPort}}"><template case="true"><dummy-port-element></dummy-port-element> <div id="cruxLoadingElem" class="cxLoadOnViewElement"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxLoadOnViewLabel"> {{cxPropField[cxPropFieldKey]}} <div class="cxLoadOnViewLoader"></div> </div> </template></template> <div class="cxLoadOnViewValue"> {{cxPropValue}} <div class="cxLoadOnViewLoader"></div> </div> </div> <dummy-port-element></dummy-port-element></template><template case="false"> <template is="switch" value="{{cxPropFrom}}"><template case="create"> <template is="if" value="{{expHandlers(expHandlers(cxPropFrom,\'===\',&quot;create&quot;),\'&amp;&amp;\',cxPropField[cxPropFieldKey])}}"><template case="true"> <div class="cxElementLabel {{cxPropLabelClass}}"> {{cxPropField[cxPropFieldKey]}} <template is="if" value="{{cxPropInfoTooltip}}"><template case="true"> <span class="dIB vam cxInfoIcon" onmouseenter="{{action(\'showInfoTooltip\',this)}}"></span> <lyte-hovercard lt-prop-placement="topLeft" lt-prop-keep-alive="true" lt-prop-popover-wrapper-class="cxElementsHovercard" lt-prop-origin-elem=".cxCurrentHovercard" on-hovercard-hide="{{method(\'hideInfoTooltip\')}}"> <template is="registerYield" yield-name="hoverCardYield"> <lyte-hovercard-content class="cxElementsHoverCardContent"> {{cxPropInfoTooltip}} </lyte-hovercard-content> </template> </lyte-hovercard> </template></template> </div> </template></template> <template is="if" value="{{cxPropShowCalculator}}"><template case="true"> <div class="cxElementValue {{if(cxPropDisabled,\'cxElementDisabled\',\'\')}} pR"> <div class="cxBoxWithRightIcon"> <div class="cxBoxLeftContent"> <lyte-input lt-prop-name="{{cxPropName}}" id="{{cxPropId}}" lt-prop-title="{{cxPropTooltip}}" lt-prop-tooltip-config="{{cxPropTooltipConfig}}" lt-prop-tooltip-style="margin: 10px; font-size : 11px;" lt-prop-type="text" onpaste="{{action(\'onPaste\')}}" class="{{if(ifEquals(cxPropAppearance,\'box\'),\'cxBoxInput\',\'cxFlatInput\')}}" lt-prop-class="cxBoxNumberCompInput {{cxPropInputClass}}" lt-prop-value="{{lbind(cxPropValue)}}" lt-prop-direction="horizontal" lt-prop-placeholder="{{cxPropPlaceholder}}" lt-prop-disabled="{{cxPropDisabled}}" lt-prop-readonly="{{cxPropReadonly}}" lt-prop-maxlength="{{maxlength}}" on-value-change="{{method(\'onChange\')}}" lt-prop-appearance="{{cxPropAppearance}}" onkeydown="{{action(\'checkLength\',this,event)}}" data-zcqa="{{cxPropZcqa}}" lt-prop-autofocus="{{cxPropAutofocus}}" lt-prop-tab-index="{{cxPropTabIndex}}" lt-prop-label="{{if(cruxAnd(ifEquals(cxPropFrom,\'criteria\'),cxPropCurrencyCode,currencyTypeField),cxPropCurrencyCode,if(cruxAnd(ifEquals(cxPropFrom,\'create\'),currencySymbol),currencySymbol))}}" onfocus="{{action(\'onFocusInput\')}}" onfocusout="{{action(\'onFocusInput\',true)}}" lt-prop-auto-update="{{cxPropEnableLbind}}" lt-prop-aria="{{cxPropAria}}" lt-prop-aria-attributes="{{cxPropAriaAttributes}}" onkeypress="{{action(\'checkLengthOnUp\')}}" lt-prop-tooltip-class="{{cxPropTooltipClass}}" lt-prop-wrapper-class="{{cxPropWrapperClass}}"> </lyte-input> </div> <template is="if" value="{{expHandlers(cxPropDisabled,\'!\')}}"><template case="true"> <div class="cxBoxRightIcon cxFlexCenter" onclick="{{action(\'showCalculatorInfo\',event)}}"> <div class="cxCalculatorIcon cP {{if(onFocus,\'cxPropFocus\',\'\')}} {{cxPropIconClass}}"></div> </div> </template></template> </div> <template is="if" value="{{isError}}"><template case="true"> <crux-error-message error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-field="{{cxPropField}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}"> <template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}" cx-field="{{cxPropField}}"></lyte-yield></template> </crux-error-message> </template></template> </div> <template is="if" value="{{showResult.show}}"><template case="true"> <lyte-popover id="cxCalcultorResultPopover" lt-prop-origin-elem=".cxCalcultorResult" lt-prop-height="auto" lt-prop-duration="400" lt-prop-content-padding="" lt-prop-show="{{lbind(showResult.show)}}" lt-prop-type="box" lt-prop-freeze="false" lt-prop-show-close-button="false" lt-prop-close-on-escape="false" lt-prop-placement="bottomLeft" lt-prop-wrapper-class="cxNumberCalcPopup"> <template is="registerYield" yield-name="popover"> <lyte-popover-content class="cxNumResPopContent" data-zcqa="newCalcVal_Crm_{{cxPropModule}}_{{cxPropField.column_name}}"> = {{showResult.value}} </lyte-popover-content> </template> </lyte-popover> </template></template> <lyte-popover lt-prop-origin-elem=".cxCalculatorIcon.cxPropFocus" lt-prop-freeze="false" lt-prop-show-close-button="false" lt-prop-placement="bottomRight" lt-prop-content-padding="" lt-prop-wrapper-class="cxNumberCalcPopup cxNumInfoPop" lt-prop-scrollable="true" id="popoveranuja" on-close="{{method(\'popoverClosed\')}}"> <template is="registerYield" yield-name="popover"> <lyte-popover-content class="cxNumInfoPopContent {{if(showResult.infoDetails,\'\',\'cxNumDefaultInfo\')}}" onclick="{{action(\'hidePopover\')}}"> <template is="if" value="{{showResult.infoDetails}}"><template case="true"> <div class="cxNumInfoExpr cP">{{showResult.infoDetails}}</div> </template><template case="false"> {{unescape(cruxGetI18n(\'crm.createfield.calcinfo.new\'))}} </template></template> </lyte-popover-content> </template> </lyte-popover> </template><template case="false"> <div class="cxElementValue {{if(cxPropDisabled,\'cxElementDisabled\',\'\')}} pR"> <lyte-input lt-prop-name="{{cxPropName}}" id="{{cxPropId}}" lt-prop-title="{{cxPropTooltip}}" lt-prop-tooltip-config="{{cxPropTooltipConfig}}" lt-prop-tooltip-style="margin: 10px;" lt-prop-type="text" onpaste="{{method(\'onPaste\')}}" class="{{if(ifEquals(cxPropAppearance,\'box\'),\'cxBoxInput\',\'cxFlatInput\')}} w100per" lt-prop-class="f15 {{cxPropInputClass}}" lt-prop-value="{{lbind(cxPropValue)}}" lt-prop-direction="{{cxPropDirection}}" lt-prop-placeholder="{{cxPropPlaceholder}}" lt-prop-disabled="{{cxPropDisabled}}" lt-prop-readonly="{{cxPropReadonly}}" lt-prop-maxlength="{{maxlength}}" on-value-change="{{method(\'onChange\')}}" lt-prop-appearance="{{cxPropAppearance}}" onkeydown="{{action(\'checkLength\',this,event)}}" data-zcqa="{{cxPropZcqa}}" lt-prop-autofocus="{{cxPropAutofocus}}" lt-prop-tab-index="{{cxPropTabIndex}}" lt-prop-label="{{if(cruxAnd(ifEquals(cxPropFrom,\'criteria\'),cxPropCurrencyCode,currencyTypeField),cxPropCurrencyCode,if(cruxAnd(ifEquals(cxPropFrom,\'create\'),currencySymbol),currencySymbol))}}" lt-prop-auto-update="{{cxPropEnableLbind}}" lt-prop-aria="{{cxPropAria}}" lt-prop-aria-attributes="{{cxPropAriaAttributes}}" onkeypress="{{action(\'checkLengthOnUp\')}}" lt-prop-tooltip-class="{{cxPropTooltipClass}}" lt-prop-wrapper-class="{{cxPropWrapperClass}}"></lyte-input> <template is="if" value="{{isError}}"><template case="true"> <crux-error-message error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-field="{{cxPropField}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}"> <template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}" cx-field="{{cxPropField}}"></lyte-yield></template> </crux-error-message> </template></template> </div> </template></template> </template><template case="filter"></template><template case="criteria"> <lyte-number lt-prop-increment="{{if(cxPropStep,true,false)}}" lt-prop-step="{{cxPropStep}}" lt-prop-name="{{cxPropName}}" lt-prop-wheel="false" id="{{cxPropId}}" lt-prop-validate-on-empty="false" on-before-paste="{{method(\'onPaste\')}}" lt-prop-value="{{cxPropValue}}" lt-prop-appearance="{{if(ifEquals(cxPropAppearance,\'box\'),\'box\',\'flat\')}}" class="{{if(ifEquals(cxPropAppearance,\'box\'),\'lyteInputBox cxBoxInput\',\'lyteInput cxFlatInput\')}} {{if(ifEquals(cxPropFrom,\'criteria\'),\'w100per\')}}" data-zcqa="{{cxPropZcqa}}" lt-prop-direction="{{if(ifEquals(cxPropFrom,\'criteria\'),\'horizontal\')}}" lt-prop-placeholder="{{cxPropPlaceholder}}" on-value-change="{{method(\'onChange\')}}" lt-prop-maxlength="{{cxPropMaxlength}}" onkeydown="{{action(\'checkLength\',this,event)}}" lt-prop-max="{{cxPropMaxvalue}}" lt-prop-min="{{cxPropMinvalue}}" on-before-max-min-validation="{{method(\'onBeforeMaxMinValidation\')}}" lt-prop-label="{{if(and(ifEquals(cxPropFrom,\'criteria\'),cxPropCurrencyCode,currencyTypeField),cxPropCurrencyCode)}}" lt-prop-disabled="{{cxPropDisabled}}"></lyte-number> </template><template case="view"> <div id="{{cxPropId}}" data-zcqa="{{cxPropZcqa}}" class="{{if(currencyTypeField,\'numberDivCurrencyView\',\'numberDivNumberView\')}}"> <template is="if" value="{{cxPropTooltip}}"><template case="true"> <lyte-text lt-prop-tooltip-class="{{if(cxPropTooltipProps.class,cxPropTooltipProps.class,\'\')}}" lt-prop-tooltip-config="{{if(cxPropTooltipProps.config,cxPropTooltipProps.config)}}" lt-prop-value="{{value}}"></lyte-text> </template><template case="false"> {{value}} </template></template> </div> </template></template> </template></template></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]},{type:"attr",position:[2,1]},{type:"if",position:[2,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]}]}},default:{}},{type:"text",position:[2,3,1]},{type:"componentDynamic",position:[4]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{create:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1,1]},{type:"componentDynamic",position:[1,1,1,1]},{type:"attr",position:[1,1,3]},{type:"if",position:[1,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[5]},{type:"registerYield",position:[5,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[5]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]},filter:{dynamicNodes:[],additional:{next:"criteria"}},criteria:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},view:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["lyteViewPort","cxPropFrom","cxPropId","cxPropName","cxPropValue","cxPropEmptyValue","value","cxPropPlaceholder","cxPropDisabled","cxPropReadonly","cxPropMaxlength","cxPropMaxvalue","cxPropMinvalue","cxPropIsoCode","cxPropZcqa","cxPropClass","isError","cxPropIgnoreEmptyValue","cxPropCurrencyCode","currencySymbol","cxPropCurrencyDetails","cxPropDefaultRoundOff","cxPropDefaultOrgCurrency","cxPropAppearance","cxPropErrorMessage","viewClass","cxPropDecimalAllowed","currencyTypeField","cxPropField","cxPropFieldKey","cxPropClearErrorMessage","cxPropDirection","cxPropLabelClass","cxPropAllowNegativeValue","lyteUnbound","cxPropTabIndex","cxPropTooltip","allowNegative","cxPropExchangeRate","cxPropErrorYield","cxPropExchangeRateFinance","cxPropHomeCurrency","cxPropDisplayCurrency","cxPropFormattedCurrency","cxPropShowCalculator","showResult","cxPropInfoTooltip","result","onFocus","cxPropTooltipProps","cxPropStep","cxPropEnableLbind","cxPropAria","cxPropAriaAttributes","maxlength","cxPropTooltipConfig","cxPropTooltipClass","cxPropErrorZcqaPrefix","cxPropErrorZcqaSuffix","cxPropErrorClass","cxPropWrapperClass","cxPropInputClass","cxPropErrorSpanClass","cxPropIconClass"],data:function(){return{lyteViewPort:Lyte.attr("boolean",{default:!1}),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropId:Lyte.attr("string",{default:""}),cxPropName:Lyte.attr("string",{default:""}),cxPropValue:Lyte.attr("string"),cxPropEmptyValue:Lyte.attr("string",{default:""}),value:Lyte.attr("string"),cxPropPlaceholder:Lyte.attr("string"),cxPropDisabled:Lyte.attr("boolean",{default:!1}),cxPropReadonly:Lyte.attr("boolean",{default:!1}),cxPropMaxlength:Lyte.attr("number"),cxPropMaxvalue:Lyte.attr("number",{default:9e18}),cxPropMinvalue:Lyte.attr("number"),cxPropIsoCode:Lyte.attr("string"),cxPropZcqa:Lyte.attr("string"),cxPropClass:Lyte.attr("string",{default:""}),isError:Lyte.attr("boolean",{default:!1}),cxPropIgnoreEmptyValue:Lyte.attr("boolean",{default:!1}),cxPropCurrencyCode:Lyte.attr("string",{default:""}),currencySymbol:Lyte.attr("string"),cxPropCurrencyDetails:Lyte.attr("object",{default:"undefined"!=typeof Crm?Crm.userDetails.CURRENCY_DETAILS:{}}),cxPropDefaultRoundOff:Lyte.attr("number",{default:"undefined"!=typeof Crm&&Crm.userDetails.defaultRoundOff?Crm.userDetails.defaultRoundOff:2}),cxPropDefaultOrgCurrency:Lyte.attr("string",{default:"undefined"!=typeof Crm?Crm.userDetails.defaultOrgCurrency:""}),cxPropAppearance:Lyte.attr("string",{default:"flat"}),cxPropErrorMessage:Lyte.attr("string",{default:""}),viewClass:Lyte.attr("string",{default:"numberDivNumberView"}),cxPropDecimalAllowed:Lyte.attr("boolean",{default:!0}),currencyTypeField:Lyte.attr("boolean",{default:!1}),cxPropField:Lyte.attr("object",{default:{}}),cxPropFieldKey:Lyte.attr("string",{default:""}),cxPropClearErrorMessage:Lyte.attr("boolean",{default:!0}),cxPropDirection:Lyte.attr("string",{default:"horizontal"}),cxPropLabelClass:Lyte.attr("string",{default:""}),cxPropAllowNegativeValue:Lyte.attr("boolean",{default:!0}),lyteUnbound:Lyte.attr("boolean",{default:!1}),cxPropTabIndex:Lyte.attr("string"),cxPropTooltip:Lyte.attr("string",{default:""}),allowNegative:Lyte.attr("boolean",{default:!0}),cxPropExchangeRate:Lyte.attr("number"),cxPropErrorYield:Lyte.attr("boolean",{default:!1}),cxPropExchangeRateFinance:Lyte.attr("number"),cxPropHomeCurrency:Lyte.attr("string"),cxPropDisplayCurrency:Lyte.attr("boolean",{default:!0}),cxPropFormattedCurrency:Lyte.attr("string"),cxPropShowCalculator:Lyte.attr("boolean",{default:!1}),showResult:Lyte.attr("object",{default:{show:!1}}),cxPropInfoTooltip:Lyte.attr("string",{default:""}),result:Lyte.attr("string"),onFocus:Lyte.attr("boolean",{default:!1}),cxPropTooltip:Lyte.attr("boolean",{default:!1}),cxPropTooltipProps:Lyte.attr("object"),cxPropStep:Lyte.attr("number"),cxPropEnableLbind:Lyte.attr("boolean",{default:!0}),cxPropAria:Lyte.attr("boolean",{default:!1}),cxPropAriaAttributes:Lyte.attr("object",{default:{}}),maxlength:Lyte.attr("number"),cxPropTooltipConfig:Lyte.attr("string",{default:'{"position": "followcursor", "appearance": "box"}'}),cxPropTooltipClass:Lyte.attr("string"),cxPropErrorZcqaPrefix:Lyte.attr("string",{default:""}),cxPropErrorZcqaSuffix:Lyte.attr("string",{default:"Error"}),cxPropErrorClass:Lyte.attr("string"),cxPropWrapperClass:Lyte.attr("string"),cxPropInputClass:Lyte.attr("string",{default:""}),cxPropErrorSpanClass:Lyte.attr("string"),cxPropIconClass:Lyte.attr("string")}},getValue:function(){if(this.$node.querySelector("#cruxLoadingElem"))return this.data.cxPropValue;if(this.$node.querySelector("input")){var e=this.$node.querySelector("input").value.trim();return e&&"."==e[0]&&(e="0"+e),e}return""},validate:function(){var e=this.getValue(),t=this.getData("cxPropField");if(this.setData("cxPropErrorMessage",""),"create"==this.getData("cxPropFrom")){var o=this.validateNumberField(e,t,this.data.maxlength);return 0==o&&this.$node.querySelector("lyte-input")&&this.$node.querySelector("lyte-input").focus(),o}if(!(e&&!isNaN(parseInt(e))||this.data.cxPropIgnoreEmptyValue))return this.showAlert(_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(t.field_label))),this.$node.querySelector("input").focus(),!1;if(!this.getData("cxPropAllowNegativeValue")&&(-1!=e.indexOf("-")||-1!=e.indexOf("+"))||!this.data.cxPropDecimalAllowed&&-1!=e.indexOf("."))return this.showAlert(I18n.getMsg("crm.mb.field.common.splc")),this.$node.querySelector("input").focus(),!1;if("autonumber"==t.data_type||"bigint"==t.data_type){if(e.indexOf(".")>-1)return this.showAlert(_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(t.field_label))),this.$node.querySelector("input").focus(),!1}else{var a;if("integer"!=t.data_type)return(a=this.isValidDecimal(e))?(a=this.decimalLengthCheck(e))||(this.showAlert(_cruxUtils.getI18n("crm.field.valid.decimal.check2",Lyte.Component.registeredHelpers.cruxEncodeHTML(t.field_label),t.decimal_place)),this.$node.querySelector("input").focus()):this.showAlert(_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(t.field_label))),a;if("criteria"==this.data.cxPropFrom)return(a=this.isValidDecimal(e))&&(a=this.decimalLengthCheck(e,{decimal_place:this.data.cxPropField.decimal_place?this.data.cxPropField.decimal_place:2})),a||this.showAlert(_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(t.field_label))),a}return!0},init:function(){if(this.getData("cxPropMaxlength")||this.setData("cxPropMaxlength",19),""==this.data.cxPropCurrencyCode){var e="undefined"!=typeof Crm?Crm.userDetails.BASE_CURRENCY:"";"create"==this.data.cxPropFrom&&"undefined"!=typeof Crm&&void 0!==Crm.userDetails.PREFERRED_CURRENCY&&(e=Crm.userDetails.PREFERRED_CURRENCY),this.setData("cxPropCurrencyCode",e)}-1!==["filter","criteria","create"].indexOf(this.getData("cxPropFrom"))&&(("formula"==this.getData("cxPropField").data_type?-1!==["double","currency","bigint","integer"].indexOf(this.getData("cxPropField").formula.return_type):-1!==["double","currency","bigint","integer"].indexOf(this.getData("cxPropField").data_type))||this.data.cxPropField.history_tracking||this.data.cxPropField.allowNegativeValue||this.setData("cxPropAllowNegativeValue",!1),this.getData("cxPropDisabled")&&!this.data.cxPropTooltip&&this.setData("cxPropTooltip",_cruxUtils.getI18n("crm.lable.read.only")))},methods:{onChange:function(e,t){this.getData("cxPropClearErrorMessage")&&this.setData("cxPropErrorMessage",""),"criteria"!=this.data.cxPropFrom&&"filter"!=this.data.cxPropFrom||e.newValue&&19==e.newValue.length&&parseInt(e.newValue)>=this.data.cxPropMaxvalue&&(this.showMsgBox(I18n.getMsg("sentiment.criteria.wrongcriteria","9000000000000000000"),"error"),this.$node.querySelector("lyte-number").ltProp("value","9000000000000000000")),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue(),this.$node)},onBeforeMaxMinValidation:function(e,t,o){return"max"==e&&this.showMsgBox(I18n.getMsg("sentiment.criteria.wrongcriteria",this.data.cxPropMaxvalue),"error"),o&&19==o.length&&parseInt(o)>=this.data.cxPropMaxvalue?"9000000000000000000":o},onPaste:function(e,t,o){return"criteria"!=this.getData("cxPropFrom")&&(0==this.data.cxPropAllowNegativeValue?o.replace("-",""):void 0)},popoverClosed:function(){this.setData("onFocus",!1)},hideInfoTooltip:function(){this.showHideInfoTooltip()}},actions:{checkLength:function(e,t){-1==[38,40,69,187].indexOf(t.keyCode)||this.getData("cxPropShowCalculator")||t.preventDefault(),this.getData("cxPropDecimalAllowed")||-1==[187,190,110].indexOf(t.keyCode)||t.preventDefault(),(!this.getData("cxPropAllowNegativeValue")||this.data.cxPropMinvalue>=0)&&(173!=t.keyCode&&189!=t.keyCode||t.preventDefault())},showCalculatorInfo:function(){var e=void 0;this.getData("showResult").formula&&(e=this.getData("showResult").formula.trim()+" = "+this.getData("showResult").value),Lyte.objectUtils(this.getData("showResult"),"add","infoDetails",e),this.setData("onFocus",!0),this.$node.querySelector("#popoveranuja").setData("ltPropShow",!0)},hidePopover:function(){this.getData("showResult").formula&&(this.$node.querySelector("input").value=this.getData("showResult").formula,this.$node.querySelector("input").focus()),this.setData("onFocus",!1),this.$node.querySelector("#popoveranuja").setData("ltPropShow",!1),Lyte.objectUtils(this.getData("showResult"),"add","show",!0)},onPaste:function(){return this.actions.checkLengthOnUp(event.clipboardData.getData("Text")),!1},onFocusInput:function(e){e?this.$node.querySelector(".cxBoxWithRightIcon").classList.remove("cxBoxInputFocused"):this.$node.querySelector(".cxBoxWithRightIcon").classList.add("cxBoxInputFocused")},showInfoTooltip:function(e){this.showHideInfoTooltip(e)},checkLengthOnUp:function(e){if(this.data.cxPropDecimalAllowed&&this.data.cxPropMaxlength&&"integer"!=this.data.cxPropField.data_type){var t=e||this.$node.querySelector("input").value;t.indexOf(".")>-1||event&&46==event.keyCode&&-1==t.indexOf(".")?this.setData("maxlength",this.data.cxPropMaxlength+1):this.setData("maxlength",this.data.cxPropMaxlength)}}},observeErrorMessage:function(){this.setData("isError",""!=this.getData("cxPropErrorMessage"))}.observes("cxPropErrorMessage").on("init"),observeCurrencyCode:function(){var e=this.getData("cxPropField");if(this.data.cxPropDisplayCurrency&&("currency"==e.data_type||39==e.ui_type||36==e.ui_type||77==e.ui_type||"formula"==e.data_type&&"currency"==e.formula.return_type))if(this.setData("currencyTypeField",!0),this.getData("cxPropCurrencyCode")){var t=this.getData("cxPropCurrencyDetails");for(var o in t)if(o==this.getData("cxPropCurrencyCode")){this.setData("currencySymbol",t[o].symbol);break}}else"undefined"!=typeof Crm&&Crm.userDetails&&Crm.userDetails.DEFAULT_ORG_CURRENCY?this.setData("currencySymbol",Crm.userDetails.DEFAULT_ORG_CURRENCY.symbol):"undefined"!=typeof Crm&&Crm.userDetails&&Crm.userDetails.defaultOrgCurrency&&this.setData("currencySymbol",Crm.userDetails.defaultOrgCurrency)}.observes("cxPropCurrencyCode","cxPropField","cxPropField.data_type").on("init"),observeValue:function(){if("view"==this.getData("cxPropFrom"))if(!this.getData("cxPropValue")&&this.getData("cxPropEmptyValue"))this.setData("value",this.getData("cxPropEmptyValue"));else{var e=this.getData("cxPropValue");if(e&&"null"!=e&&"undefined"!=e){var t=this.getData("cxPropField"),o=t.data_type;("formula"==o||t.formula&&t.formula.return_type||t.dataparam&&t.dataparam.return_type)&&(o=t.formula&&"currency"==t.formula.return_type||t.dataparam&&"currency"==t.dataparam.return_type?"currency":"number"),this.setData("value",this.getNumberValueForView(e,o,this.getData("cxPropIsoCode"),t.ui_type,void 0,void 0,void 0,this.getData("cxPropExchangeRate"),this.getData("cxPropExchangeRateFinance"),this.getData("cxPropHomeCurrency"),this.getData("cxPropDisplayCurrency"),this.getData("cxPropFormattedCurrency"),t.separator))}else this.setData("value","")}else this.data.cxPropValue&&!this.operationPerformed&&(this.data.showResult.value=this.data.cxPropValue)}.observes("cxPropValue","cxPropFormattedCurrency","cxPropFrom").on("init"),observeIsError:function(){if("create"==this.getData("cxPropFrom")&&this.$node.querySelector("lyte-input")){var e=$L(this.$node);if(this.getData("cxPropShowCalculator")){var t=e.find(".cxBoxWithRightIcon");this.getData("isError")?t.addClass("cxErrorBoxWithRightIcon"):t.removeClass("cxErrorBoxWithRightIcon")}else{var o=e.find("lyte-input");this.getData("isError")?o.addClass("cxErrorBox"):o.removeClass("cxErrorBox")}}}.observes("isError","lyteViewPort").on("didConnect"),observeMandatory:function(){this.$node.querySelector("lyte-input")&&"create"==this.getData("cxPropFrom")&&(this.getData("cxPropField").required?this.$node.querySelector("lyte-input").classList.add("mandatoryField"):this.$node.querySelector("lyte-input").classList.remove("mandatoryField"))}.observes("cxPropField.required","lyteViewPort").on("didConnect"),observeCurrencyTypeField:function(){if(this.getData("currencyTypeField")&&"box"===this.getData("cxPropAppearance")&&("create"===this.getData("cxPropFrom")||"criteria"===this.getData("cxPropFrom"))&&(this.data.cxPropCurrencyCode||!this.data.cxPropCurrencyCode&&"create"==this.data.cxPropFrom)){var e=$L(this.$node),t=e.find("lyte-input");if(t.length>0)t.addClass("cxBoxInputInsideLabel");else{var o=e.find("lyte-number");o.length>0&&o.addClass("cxBoxInputInsideLabel")}}}.observes("currencyTypeField","lyteViewPort","cxPropFrom").on("didConnect"),obseredidConnect:function(){if("create"==this.getData("cxPropFrom")&&this.getData("cxPropShowCalculator")){var e=this;e.bindEvent=e.calculate.bind(e),["keyup","keypress","blur"].forEach((function(t){e.$node.query("input")&&e.$node.query("input").addEventListener(t,e.bindEvent)}))}}.observes("lyteViewPort").on("didConnect"),calculate:function(e){var t=this.$node.querySelector("input");if(this.operationPerformed=!0,"keypress"==e.type){var o=e.which?e.which:e.keyCode;if(!([43,45,42,47,13,40,41,46,8,9].indexOf(o)>-1||o>=48&&o<=57))return e.preventDefault(),!1;if(13==o)return Lyte.objectUtils(this.getData("showResult"),"add","show",!1),this.$node.querySelector("lyte-input").classList.remove("cxCalcultorResult"),t.blur(),e.preventDefault(),!1}else if("keyup"==e.type){var a=t.value;if(-1==a.indexOf(",")&&""!=a&&!a.match(/[a-z]/i)){/^(\+|\*|\/)/.test(a)&&(a=a.substr(1));var r="";if(/^((?!([+\-*/.]{2,})).)*$/.test(a)&&1==Lyte.registeredMixins["crux-element-validation"].checkBrackets(a)&&-1==a.indexOf("()")&&Lyte.registeredMixins["crux-element-validation"].checkCorrectInputEle(a)&&Lyte.registeredMixins["crux-element-validation"].checkDotCorrectInput(a)){var i=a.length-1,s=this.data.cxPropField&&this.data.cxPropField.decimal_place?this.data.cxPropField.decimal_place:2;(-1==["+","-","*","/","."].indexOf(a[i])||"."!=(a=a.slice(0,-1)))&&(a=Lyte.registeredMixins["crux-element-validation"].clearLeadingZero(a),null!=(r=new Function("return "+a)())&&r%1!=0&&(r=Number(Math.round(r+"e"+s)+"e-"+s)))}}null!=r&&""!==r?1==/[+\-*/(]/.test(a)&&"+"!=a&&""!=a?(this.setData("showResult",{show:!0,value:r,formula:a}),this.$node.querySelector("lyte-input").classList.add("cxCalcultorResult")):this.setData("showResult",{show:!1,formula:a,value:r}):(Lyte.objectUtils(this.getData("showResult"),"add","show",!1),Lyte.objectUtils(this.getData("showResult"),"add","formula",void 0),""==a&&Lyte.objectUtils(this.data.showResult,"add","value",""),this.$node.querySelector("lyte-input").classList.remove("cxCalcultorResult"))}else if("blur"==e.type){null!=this.getData("showResult").value&&this.setData("cxPropValue",this.getData("showResult").value);var l=this.$node.querySelector("#cxCalcultorResultPopover");l&&l.ltProp("show",!1)}},didDestroy:function(){if("create"==this.getData("cxPropFrom")&&this.getData("cxPropShowCalculator")){var e=this;e.$node.query("input")&&["keyup","keypress","blur"].forEach((function(t){e.$node.query("input").removeEventListener(t,e.bindEvent)}))}},observeFrom:function(){this.getData("cxPropMaxlength")||("criteria"==this.getData("cxPropFrom")||"filter"==this.getData("cxPropFrom")?this.setData("cxPropMaxlength",19):this.setData("cxPropMaxlength",void 0))}.observes("cxPropFrom").on("init"),observeMaxlength:function(){var e=this.data.cxPropMaxlength;this.data.cxPropValue&&this.data.cxPropValue.indexOf(".")>-1&&e++,this.setData("maxlength",e)}.observes("cxPropMaxlength").on("init"),observeClass:function(e){if("view"!=this.data.cxPropFrom){var t=$L("lyte-number",this.$node);if(t.length||(t=$L("lyte-input",this.$node)),!t.length)return;e&&e.oldValue&&t.removeClass(e.oldValue),this.data.cxPropClass&&t.addClass(this.data.cxPropClass)}}.observes("cxPropClass","lyteViewPort").on("didConnect")},{mixins:["crux-element-validation"]}),Lyte.Component.register("crux-phone-component",{_template:'<template tag-name="crux-phone-component"><template is="if" value="{{lyteViewPort}}"><template case="true"><dummy-port-element></dummy-port-element> <div id="cruxLoadingElem" class="cxLoadOnViewElement"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxLoadOnViewLabel"> {{cxPropField[cxPropFieldKey]}} <div class="cxLoadOnViewLoader"></div> </div> </template></template> <div class="cxLoadOnViewValue"> {{cxPropValue}} <div class="cxLoadOnViewLoader"></div> </div> </div> <dummy-port-element></dummy-port-element></template><template case="false"> <template is="switch" value="{{cxPropFrom}}"><template case="view"> <template is="if" value="{{cxPropValue}}"><template case="true"> <template is="if" value="{{cxPropMaskingProperties}}"><template case="true">{{cruxMaskValue(cxPropValue,cxPropMaskingProperties)}} </template><template case="false"> <template is="if" value="{{expHandlers(expHandlers(cxPropCallAllowed,\'==\',false),\'||\',cxPropField.private.restricted)}}"><template case="true"> <div class="phoneRtl"> <span class="cxPhoneViewValue lvPhFld">{{cxPropDisplayValue}}</span> </div> </template><template case="false"><template is="if" value="{{outbound}}"><template case="true"> <div class="phoneRtl cxPhoneViewOutbound"> <span class="cxPhoneViewValue lvPhFld">{{cxPropDisplayValue}}</span> <span class="cxCalliconOuter" onclick="{{action(\'onClick\')}}"> <span class="cxCallIcon"></span> <span id="calllabel1" class="cxPhoneViewCallLabel">{{cruxGetI18n(\'Call\')}}</span> </span> </div> </template><template case="false"><template is="if" value="{{zpbEnabled}}"><template case="true"> <div class="phoneRtl cxPhoneViewZPBEnabled"> <span class="cxPhoneViewValue lvPhFld">{{cxPropDisplayValue}}</span> <span class="cxPhoneViewZPBEnabledIconWrap phoneRtlA"> <zpb-phone number="{{cxPropDisplayValue}}" module="{{cxPropModule}}" recordid="{{cxPropEntityId}}" callbackparamfn="asyncFn(crmCallsNew.getClick2CallPromise, \'{{cxPropEntityId}}\', \'{{cxPropModule}}\', \'{{cxPropEntityName}}\')"></zpb-phone> </span> </div> </template><template case="false"> <div onmouseover="{{action(\'onMouseOver\')}}" onmouseout="{{action(\'onMouseOut\')}}" class="phoneRtl"> <zpb-phone phoneno="{{cxPropValue}}" callbackparam="{&quot;module&quot;:&quot;{{module}}&quot;, &quot;searchid&quot;:&quot;{{entityId}}&quot;}"><span class="cxPhoneViewValue lvPhFld">{{cxPropDisplayValue}}</span></zpb-phone> <a class="pH2 phoneRtl vH" title="{{cruxGetI18n(\'crm.phoneNo.Link.Title\')}}" href="skype:{{cxPropValue}}?call" onclick="sE();"></a> </div> </template></template></template></template></template></template> </template></template> </template><template case="false"><template is="if" value="{{cxPropEmptyValue}}"><template case="true">{{cxPropEmptyValue}}</template></template></template></template> </template><template case="create"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxElementLabel {{cxPropLabelClass}}"> {{cxPropField[cxPropFieldKey]}} <template is="if" value="{{cxPropInfoTooltip}}"><template case="true"> <span class="dIB vam cxInfoIcon" onmouseenter="{{action(\'showInfoTooltip\',this)}}"></span> <lyte-hovercard lt-prop-placement="topLeft" lt-prop-keep-alive="true" lt-prop-popover-wrapper-class="cxElementsHovercard" lt-prop-origin-elem=".cxCurrentHovercard" on-hovercard-hide="{{method(\'hideInfoTooltip\')}}"> <template is="registerYield" yield-name="hoverCardYield"> <lyte-hovercard-content class="cxElementsHoverCardContent"> {{cxPropInfoTooltip}} </lyte-hovercard-content> </template> </lyte-hovercard> </template></template> </div> </template></template> <div class="cxElementValue {{if(cxPropDisabled,\'cxElementDisabled\',\'\')}}"> <div class="{{if(cxPropEnableCountryCode,\'cxDropdownInputGroup\',\'\')}}"> <template is="if" value="{{cxPropEnableCountryCode}}"><template case="true"> <crux-dropdown on-option-select="{{method(\'onCCSelectChange\')}}" cx-prop-options="{{countryList}}" cx-prop-system-value="actual_value" cx-prop-user-value="display_value" cx-prop-display-value="{{selectedCode}}" on-show="{{method(\'onBeforeOpen\')}}" cx-prop-selected="{{selectedCode}}" on-hide="{{method(\'setFocusClass\',false)}}" cx-prop-icon-class="{{cxPropDropdownIconClass}}"></crux-dropdown> </template></template> <lyte-input lt-prop-name="{{cxPropName}}" id="{{cxPropId}}" lt-prop-title="{{cxPropTooltip}}" lt-prop-tooltip-config="{{cxPropTooltipConfig}}" lt-prop-tooltip-style="margin: 10px; font-size : 11px;" class="w100per {{if(ifEquals(cxPropAppearance,\'box\'),\'cxBoxInput\',\'cxFlatInput\')}}" lt-prop-class="cxBorderBottom {{cxPropInputClass}}" lt-prop-type="text" lt-prop-value="{{lbind(cxPropValue)}}" lt-prop-placeholder="{{cxPropPlaceholder}}" lt-prop-maxlength="{{cxPropMaxlength}}" lt-prop-direction="{{cxPropDirection}}" lt-prop-disabled="{{cxPropDisabled}}" lt-prop-readonly="{{cxPropReadonly}}" on-value-change="{{method(\'onChange\')}}" lt-prop-appearance="{{cxPropAppearance}}" data-zcqa="{{cxPropZcqa}}" lt-prop-tab-index="{{cxPropTabIndex}}" lt-prop-autofocus="{{cxPropAutofocus}}" lt-prop-autocomplete="{{cxPropAutocomplete}}" lt-prop-auto-update="{{cxPropEnableLbind}}" lt-prop-aria="{{cxPropAria}}" lt-prop-aria-attributes="{{cxPropAriaAttributes}}" lt-prop-tooltip-class="{{cxPropTooltipClass}}" onkeypress="{{action(\'onKeyPress\',event)}}" onkeyup="{{action(\'onKeyUp\',event)}}" onpaste="{{action(\'onInputValuePaste\',event)}}" on-focus="{{method(\'setFocusClass\',true)}}" on-blur="{{method(\'setFocusClass\',false)}}" lt-prop-wrapper-class="{{cxPropWrapperClass}}"></lyte-input> </div> <template is="if" value="{{isError}}"><template case="true"> <crux-error-message error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-field="{{cxPropField}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}"> <template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}" cx-field="{{cxPropField}}"></lyte-yield></template> </crux-error-message> </template></template> </div> </template></template> </template></template></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]},{type:"attr",position:[2,1]},{type:"if",position:[2,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]}]}},default:{}},{type:"text",position:[2,3,1]},{type:"componentDynamic",position:[4]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{view:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]},{type:"attr",position:[1,3]},{type:"text",position:[1,3,3,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]},{type:"attr",position:[1,3,1]},{type:"componentDynamic",position:[1,3,1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,0,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}}]}},default:{}}]},create:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"attr",position:[3,1,1]},{type:"if",position:[3,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3,1,3]},{type:"componentDynamic",position:[3,1,3]},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["lyteViewPort","cxPropValue","cxPropFrom","cxPropDisplayValue","outbound","cxPropField","cxPropCallAllowed","cxPropEmptyValue","cxPropPlaceholder","cxPropMaxlength","cxPropDisabled","cxPropReadonly","zpbEnabled","cxPropEntityId","cxPropEntityName","cxPropModule","isError","cxPropAppearance","cxPropErrorMessage","cxPropFieldKey","cxPropId","cxPropName","cxPropClearErrorMessage","cxPropDirection","cxPropLabelClass","cxPropTabIndex","cxPropZcqa","lyteUnbound","cxPropClass","cxPropTooltip","cxPropErrorYield","cxPropInfoTooltip","cxPropAutocomplete","cxPropEnableLbind","cxPropAria","cxPropAriaAttributes","cxPropMaskingProperties","cxPropTooltipConfig","cxPropTooltipClass","cxPropErrorZcqaPrefix","cxPropErrorZcqaSuffix","cxPropEnableCountryCode","cxPropUserLocale","countryISOCodeVsName","countryList","selectedCode","cxPropErrorClass","cxPropWrapperClass","cxPropInputClass","cxPropErrorSpanClass","cxPropDropdownIconClass"],data:function(){return{lyteViewPort:Lyte.attr("boolean",{default:!1}),cxPropValue:Lyte.attr("string"),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropDisplayValue:Lyte.attr("string"),outbound:Lyte.attr("boolean",{default:!1}),cxPropField:Lyte.attr("object",{default:{}}),cxPropCallAllowed:Lyte.attr("boolean",{default:!0}),cxPropEmptyValue:Lyte.attr("string",{default:""}),cxPropPlaceholder:Lyte.attr("string"),cxPropMaxlength:Lyte.attr("number"),cxPropDisabled:Lyte.attr("boolean",{default:!1}),cxPropReadonly:Lyte.attr("boolean",{default:!1}),zpbEnabled:Lyte.attr("boolean",{default:"undefined"!=typeof Crm&&Crm.userDetails.ZPBENABLED}),cxPropEntityId:Lyte.attr("string"),cxPropEntityName:Lyte.attr("string"),cxPropModule:Lyte.attr("string"),isError:Lyte.attr("boolean",{default:!1}),cxPropAppearance:Lyte.attr("string",{default:"flat"}),cxPropErrorMessage:Lyte.attr("string",{default:""}),cxPropFieldKey:Lyte.attr("string",{default:""}),cxPropId:Lyte.attr("string",{default:""}),cxPropName:Lyte.attr("string",{default:""}),cxPropClearErrorMessage:Lyte.attr("boolean",{default:!0}),cxPropDirection:Lyte.attr("string",{default:"vertical"}),cxPropLabelClass:Lyte.attr("string",{default:""}),cxPropClearErrorMessage:Lyte.attr("boolean",{default:!0}),cxPropTabIndex:Lyte.attr("string"),cxPropZcqa:Lyte.attr("string"),lyteUnbound:Lyte.attr("boolean",{default:!1}),cxPropClass:Lyte.attr("string",{default:""}),cxPropTooltip:Lyte.attr("string",{default:""}),cxPropErrorYield:Lyte.attr("boolean",{default:!1}),cxPropInfoTooltip:Lyte.attr("string",{default:""}),cxPropAutocomplete:Lyte.attr("string",{default:"on"}),cxPropEnableLbind:Lyte.attr("boolean",{default:!0}),cxPropAria:Lyte.attr("boolean",{default:!1}),cxPropAriaAttributes:Lyte.attr("object",{default:{}}),cxPropMaskingProperties:Lyte.attr("object"),cxPropTooltipConfig:Lyte.attr("string",{default:'{"position": "followcursor", "appearance": "box"}'}),cxPropTooltipClass:Lyte.attr("string"),cxPropErrorZcqaPrefix:Lyte.attr("string",{default:""}),cxPropErrorZcqaSuffix:Lyte.attr("string",{default:"Error"}),cxPropEnableCountryCode:Lyte.attr("boolean",{default:!1}),cxPropUserLocale:Lyte.attr("string",{default:"undefined"!=typeof Crm?Crm.userDetails.COUNTRY_LOCALE:""}),countryISOCodeVsName:Lyte.attr("object",{default:"undefined"!=typeof Crm?Crm.userDetails.countryISOCodeVsName:{}}),countryList:Lyte.attr("array",{default:[]}),selectedCode:Lyte.attr("string"),cxPropErrorClass:Lyte.attr("string"),cxPropWrapperClass:Lyte.attr("string"),cxPropInputClass:Lyte.attr("string",{default:""}),cxPropErrorSpanClass:Lyte.attr("string"),cxPropDropdownIconClass:Lyte.attr("string")}},actions:{onMouseOver:function(){var e=this.$node;e.querySelector("a")&&(e.querySelector("a").style.visibility="visible")},onMouseOut:function(){var e=this.$node;e.querySelector("a")&&(e.querySelector("a").style.visibility="hidden")},onClick:function(){this.phoneClick(this.getData("cxPropValue"),this.getData("cxPropEntityId"),this.getData("cxPropModule"),this.getData("cxPropEntityName"))},showInfoTooltip:function(e){this.showHideInfoTooltip(e)},onKeyPress:function(e){if(this.data.cxPropEnableCountryCode&&this.isBlockedChar(e))return e.preventDefault(),!1},onKeyUp:function(e){this.data.cxPropEnableCountryCode&&this.autoPopCountryCode(this.$node,$L(e.target))},onInputValuePaste:function(e){this.data.cxPropEnableCountryCode&&setTimeout(function(){this.removeBlockedChars($L(e.target)),this.autoPopCountryCode(this.$node,$L(e.target))}.bind(this))}},getValue:function(){var e="string"==typeof this.data.cxPropValue?this.getData("cxPropValue").trim():this.getData("cxPropValue");if("create"==this.data.cxPropFrom&&this.data.cxPropEnableCountryCode&&e){var t=this.$node.querySelector("crux-dropdown").getData("cxPropSelected");t&&"-None-"!=t&&t!=I18n.getMsg("-None-")&&"--"!=t&&(e=t.trim()+e)}return e},validate:function(){return this.validatePhoneNumber(this.getData("cxPropField"),this.data.cxPropEnableCountryCode?this.getValue():this.data.cxPropValue)},methods:{onChange:function(){this.getData("cxPropClearErrorMessage")&&this.setData("cxPropErrorMessage",""),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getData("cxPropValue"))},zpbCallBackFn:function(){return'asyncFn(crmCallsNew.getClick2CallPromise,"'+this.getData("cxPropEntityId")+'","'+this.getData("cxPropModule")+'","'+this.getData("cxPropEntityName")+'")'},hideInfoTooltip:function(){this.showHideInfoTooltip()},onCCSelectChange:function(e,t){this.setData("selectedCode",t),setTimeout(function(){this.$node.querySelector("input").focus()}.bind(this),0)},onBeforeOpen:function(){if(this.$node.querySelector(".cxDropdownInputGroup").classList.add("cxDropdownInputGroupFocused"),!this.selectOnce){var e=this.$node.querySelector("crux-dropdown"),t=this.data.selectedCode;e.cxProp("selected",t),setTimeout((function(){e.cxProp("displayValue",t)})),this.selectOnce=!0}this.$node.querySelector("lyte-dropdown").component.childComp.querySelector("input").focus()},setFocusClass:function(e){this.data.cxPropEnableCountryCode&&(e?this.data.cxPropDisabled?this.$node.querySelector(".cxDropdownInputGroup").classList.add("cxDropdownInputGroupDisabled"):this.$node.querySelector(".cxDropdownInputGroup").classList.add("cxDropdownInputGroupFocused"):this.data.cxPropDisabled?this.$node.querySelector(".cxDropdownInputGroup").classList.remove("cxDropdownInputGroupDisabled"):this.$node.querySelector(".cxDropdownInputGroup").classList.remove("cxDropdownInputGroupFocused"))}},observeErrorMessage:function(){this.setData("isError",""!=this.getData("cxPropErrorMessage"))}.observes("cxPropErrorMessage").on("init"),observeIsError:function(){"create"==this.getData("cxPropFrom")&&this.$node.querySelector("lyte-input")&&(this.getData("isError")?this.data.cxPropEnableCountryCode?this.$node.querySelector(".cxDropdownInputGroup").classList.add("cxGroupErrorBox"):this.$node.querySelector("lyte-input").classList.add("cxErrorBox"):this.data.cxPropEnableCountryCode?this.$node.querySelector(".cxDropdownInputGroup").classList.remove("cxGroupErrorBox"):this.$node.querySelector("lyte-input").classList.remove("cxErrorBox"))}.observes("isError","lyteViewPort").on("didConnect"),observeMandatory:function(){this.$node.querySelector("lyte-input")&&"create"==this.getData("cxPropFrom")&&(this.getData("cxPropField").required?this.data.cxPropEnableCountryCode?this.$node.querySelector(".cxDropdownInputGroup").classList.add("cxGroupMandatoryField"):this.$node.querySelector("lyte-input").classList.add("mandatoryField"):this.data.cxPropEnableCountryCode?this.$node.querySelector(".cxDropdownInputGroup").classList.remove("cxGroupMandatoryField"):this.$node.querySelector("lyte-input").classList.remove("mandatoryField"))}.observes("cxPropField.required","lyteViewPort").on("didConnect"),observeValue:function(){var e=this.getData("cxPropValue");"view"==this.getData("cxPropFrom")&&e&&(this.setData("cxPropDisplayValue",e),this.setData("outbound","undefined"!=typeof Crm&&Crm.userDetails.TELEPHONY_ENABLED))}.observes("cxPropValue","cxPropFrom").on("init"),init:function(){var e;this.getData("cxPropDisabled")&&!this.data.cxPropTooltip&&this.setData("cxPropTooltip",_cruxUtils.getI18n("crm.lable.read.only")),this.data.cxPropEnableCountryCode&&(this.data.cxPropValue||!this.data.cxPropUserLocale||this.data.cxPropDisabled||(e=this.data.cxPropUserLocale.split("_")[1]),this.appendPhoneNoCountryCodeOptions(e),this.autoPopCountryCode(this.$node,$L(this.$node.querySelector("input")),this.data.cxPropValue),this.selectOnce=!1)},autoPopCountryCode:function(e,t,o){var a=o||t.val().trim();if(a.startsWith("+")){var r=a.length,i=a,s=!1,l=this.getRegionCodeForNumber(a);l&&(s=this.selectCountryByPCC(e,l))&&(i=a.substring(("+"+ZlibPhoneNumber.getCountryCodeForRegion(l)).length,r));for(var n=2;r>=n&&!s;)i=a.substring(n,r),s=this.selectCountryByPCC(e,a.substring(0,n),a),4!=n||s||(i=a.substring(1,r),s=!0),n++;s&&this.setData("cxPropValue",i)}else{var p=this.data.cxPropValue;p&&p.startsWith("+")&&this.isValidPNumber(p)&&this.selectCountryByPCC(e,this.getRegionCodeForNumber(p))}},isBlockedChar:function(e){var t=String.fromCharCode(e.which),o=$L(e.target).val();return!("+"===t&&validationUtils.isEmpty(o)||e.metaKey||e.ctrlKey||e.which>=65&&e.which<=90||e.which>=97&&e.which<=122||-1!=="0123456789().,-;".indexOf(t)||32===e.which||13===e.which)},removeBlockedChars:function(e){var t=e.val(),o=t.replace(/[^0-9A-Za-z().,-;]/g,"");t.startsWith("+")&&(o="+"+o),e.val(o)},getRegionCodeForNumber:function(e){try{return ZlibPhoneNumber.getRegionCodeForNumber(e)}catch(e){murphy.error(e)}return null},selectCountryByPCC:function(e,t,o){t=t||"";var a=e.querySelector("crux-dropdown");if(a&&a.getData("cxPropSelected")==t)return!0;this.getRegionCodeForNumber(o);var r=this.opList.indexOf(t);return r>-1&&this.opList[r]==t&&(this.setData("selectedCode",t),!0)},isValidPNumber:function(e){try{return ZlibPhoneNumber.isValidNumber(e)}catch(e){murphy.error(e)}return!1},getCCSortedByName:function(){var e=this.data.countryISOCodeVsName,t=[],o=ZlibPhoneNumber.getSupportedCountries();for(var a in e)e.hasOwnProperty(a)&&-1!==o.indexOf(a)&&t.push(e[a]);t=t.sort();var r=[];return Object.keys(e).forEach((function(a){var i=t.indexOf(e[a]);i>=0&&-1!==o.indexOf(a)&&(r[i]=a)})),r},appendPhoneNoCountryCodeOptions:function(e){for(var t=this.getCCSortedByName(),o=[{actual_value:"-None-",display_value:_cruxUtils.getI18n("None")}],a=t.length,r=[],i=0;i<a;i++){var s=t[i],l="+"+ZlibPhoneNumber.getCountryCodeForRegion(s),n=this.data.countryISOCodeVsName[s]+" "+l;r.push(l),o.push({actual_value:l,display_value:n}),s==e&&this.setData("selectedCode",l)}this.setData("countryList",o),this.opList=r},getPlainPhoneNo:function(e){var t=e.length,o="";if(t<0)return o;if(!/^\d+(,(\d)+)*(\.\d{1,2})*$/.test(e))if(14===t){if(e.startsWith("(")&&e.indexOf("-")&&e.indexOf(")")&&e.indexOf(" ")){o=e;var a=e.indexOf(")"),r=e.indexOf(" "),i=e.indexOf("-");return 4===a&&5===r&&9===i&&10===(e=(e=(e=(e=e.replace(" ","")).replace("(","")).replace(")","")).replace("-","")).length?e.replace(" ","").replace("(","").replace(")","").replace("-","").length<10?o:e:o}}else if(12===t){if(-1!==e.indexOf(" "))return e;if(e.startsWith("(")&&e.indexOf(")")&&e.indexOf("-")){o=e;var s=e.indexOf(")"),l=e.indexOf("-");return 6===s&&7===l&&9===(e=(e=(e=e.replace("-","")).replace("(","")).replace(")","")).length?e.replace("-","").replace("(","").replace(")","").length<9?o:e:o}}return e},observeClass:function(e){if("create"==this.data.cxPropFrom){var t=$L("lyte-input",this.$node);if(!t.length)return;e&&e.oldValue&&t.removeClass(e.oldValue),this.data.cxPropClass&&t.addClass(this.data.cxPropClass)}}.observes("cxPropClass","lyteViewPort").on("didConnect")},{mixins:["crux-element-validation"]}),Lyte.Component.register("crux-picklist-component",{_template:'<template tag-name="crux-picklist-component"><template is="if" value="{{lyteViewPort}}"><template case="true"><dummy-port-element></dummy-port-element> <div id="cruxLoadingElem" class="cxLoadOnViewElement"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxLoadOnViewLabel"> {{cxPropField[cxPropFieldKey]}} <div class="cxLoadOnViewLoader"></div> </div> </template></template> <div class="cxLoadOnViewValue"> {{cxPropValue}} <div class="cxLoadOnViewLoader"></div> </div> </div> <dummy-port-element></dummy-port-element></template><template case="false"> <template is="switch" value="{{cxPropFrom}}"><template case="filter"></template><template case="criteria"></template><template case="create"> <template is="if" value="{{expHandlers(expHandlers(cxPropFrom,\'===\',&quot;create&quot;),\'&amp;&amp;\',cxPropField[cxPropFieldKey])}}"><template case="true"> <div class="cxElementLabel {{cxPropLabelClass}}"> {{cxPropField[cxPropFieldKey]}} <template is="if" value="{{cxPropInfoTooltip}}"><template case="true"> <span class="dIB vam cxInfoIcon" onmouseenter="{{action(\'showInfoTooltip\',this)}}"></span> <lyte-hovercard lt-prop-placement="topLeft" lt-prop-keep-alive="true" lt-prop-popover-wrapper-class="cxElementsHovercard" lt-prop-origin-elem=".cxCurrentHovercard" on-hovercard-hide="{{method(\'hideInfoTooltip\')}}"> <template is="registerYield" yield-name="hoverCardYield"> <lyte-hovercard-content class="cxElementsHoverCardContent"> {{cxPropInfoTooltip}} </lyte-hovercard-content> </template> </lyte-hovercard> </template></template> </div> </template></template> <div class="cxElementValue {{if(cxPropDisabled,\'cxElementDisabled\',\'\')}} {{pkColorEnabledClass}}"> <template is="if" value="{{cxPropIsColorCodeEnabled}}"><template case="true"> <span class="dIB activitesColor" id="selectColorComponent_{{cxPropField.id}}" data-zcqa="{{concat(cxPropField.field_label,\'_selectedColor\')}}" style="background:{{propDefaultColorCode}}"></span> </template></template> <lyte-dropdown id="{{cxPropId}}" lt-prop-title="{{tooltip}}" lt-prop-tooltip-config="{&quot;position&quot;: &quot;followcursor&quot;, &quot;appearance&quot;: &quot;box&quot;}" lt-prop-tooltip-style="margin: 10px; font-size : 11px;" lt-prop-boundary="{{cxPropBoundary}}" lt-prop-disabled-list="[&quot;cruxDisabled&quot;]" lt-prop-yield="true" lt-prop-type="{{cxPropType}}" lt-prop-tabindex="{{cxPropTabIndex}}" on-add="{{method(\'addToList\',cxPropField)}}" on-remove="{{method(\'removeFromList\',cxPropField)}}" lt-prop-selected="{{cxPropValue}}" lt-prop-disabled="{{cxPropDisabled}}" lt-prop-display-value="{{cxPropDisplayValue}}" on-option-selected="{{method(\'selectOption\')}}" lt-prop-placeholder="{{placeholder}}" lt-prop-search-delay="{{cxPropSearchDelay}}" on-before-show="{{method(\'openDropdown\')}}" on-hide="{{method(\'closeDropdown\')}}" lt-prop-readonly="{{cxPropReadonly}}" class="{{if(ifEquals(cxPropAppearance,\'flat\'),\'cxFlatDropdown\',\'cxBoxDropdown\')}} {{cxPropClass}}" lt-prop-no-result="" on-show="{{method(\'onDropdownOpen\')}}" lt-prop-freeze="{{cxPropFreeze}}" on-before-hide="{{method(\'beforeHide\')}}" data-zcqa="{{cxPropDropdownZcqa}}" lt-prop-scope="{{cxPropScope}}" lt-prop-aria="{{cxPropAria}}" lt-prop-aria-attributes="{{cxPropAriaAttributes}}" lt-prop-icon-class="{{cxPropDropdownIconClass}}"> <template is="registerYield" yield-name="yield"> <template is="if" value="{{expHandlers(cxPropType,\'!=\',&quot;single&quot;)}}"><template case="true"> <lyte-drop-button data-zcqa="{{if(cxPropDropdownZcqa,\'\',cxPropZcqa)}}"> <ul class="lyteMultipleSelect"> <template is="for" items="{{displayValue}}" item="item" index="index"> <li data-value="{{item}}"> <span class="lyteDropdownVisible" onmouseenter="{{action(\'setToolTip\',this)}}">{{unescape(cruxReplaceSpace(cruxEncodeHTML(item)))}}</span> <lyte-drop-remove class="lyteCloseIcon"></lyte-drop-remove> </li> </template> <li class="lyteMultiselectInput"> <lyte-search class="w100per" lt-prop-update-delay="{{cxPropUpdateDelay}}" lt-prop-search-delay="{{cxPropSearchDelay}}" lt-prop-type="text" lt-prop-query-selector="{&quot;scope&quot;:&quot;{{concat(&quot;.parentscope_&quot;,cxPropId,&quot;_&quot;,cruxReplace(cruxReplace(cxPropField.api_name,&quot;->&quot;,&quot;_&quot;),&quot;[/.]&quot;,&quot;_&quot;))}}&quot;, &quot;target&quot;:&quot;.picklist_values:not(.lyteDropdownActive)&quot;, &quot;search&quot;:&quot;lyte-drop-item.picklist_values:not(.lyteDropdownActive)&quot;}" lt-prop-maxlength="{{cxPropMaxlength}}" on-search="{{method(\'showNoResult\',cxPropField)}}" id="{{concat(&quot;search_&quot;,cxPropId,&quot;_&quot;,cruxReplace(cruxReplace(cxPropField.api_name,&quot;->&quot;,&quot;_&quot;),&quot;[/.]&quot;,&quot;_&quot;))}}" lt-prop-placeholder="{{if(displayValue.length,\'\',placeholder)}}" onclick="{{action(\'searchBoxClicked\')}}" on-focus="{{method(\'onSearchBoxFocused\')}}" onkeydown="{{action(\'preventDefault\',this,event)}}" lt-prop-trim="true"></lyte-search> </li> </ul> </lyte-drop-button> </template><template case="false"><template is="if" value="{{cxPropPicklistButtonYield}}"><template case="true"> <lyte-drop-button> <lyte-yield yield-name="picklistButtonYield"></lyte-yield> </lyte-drop-button> </template></template></template></template> <lyte-drop-box class="cxDropbox {{if(cxPropIsColorCodeEnabled,\'colorEnabledPKDropBox\',\'\')}}"> <template is="if" value="{{expHandlers(expHandlers(cxPropType,\'==\',&quot;single&quot;),\'&amp;&amp;\',showSearchBox)}}"><template case="true"> <lyte-drop-header> <lyte-search class="w100per" lt-prop-query-selector="{&quot;scope&quot;:&quot;{{concat(&quot;.parentscope_&quot;,cxPropId,&quot;_&quot;,cruxReplace(cruxReplace(cxPropField.api_name,&quot;->&quot;,&quot;_&quot;),&quot;[/.]&quot;,&quot;_&quot;))}}&quot;, &quot;target&quot;:&quot;.picklist_values&quot;, &quot;search&quot;:&quot;lyte-drop-item.picklist_values&quot;}" lt-prop-maxlength="120" id="{{concat(\'searchsingle_\',cxPropId,\'_\',cxPropField.api_name)}}" on-search="{{method(\'singleSearch\')}}" lt-prop-trim="true"></lyte-search> </lyte-drop-header> </template></template> <lyte-drop-body id="{{cxPropField.api_name}}" class="{{concat(&quot;parentscope_&quot;,cxPropId,&quot;_&quot;,cruxReplace(cruxReplace(cxPropField.api_name,&quot;->&quot;,&quot;_&quot;),&quot;[/.]&quot;,&quot;_&quot;))}}"> <template is="if" value="{{showLoading}}"><template case="true"> <div class="loadingGifDiv aligncenter"> <img class="loadingGif" src="//img.zohocdn.com/crm/CRMClient/images/crux-search-loader_829992d_.svg"> </div> </template><template case="false"> <template is="for" items="{{pickListValues}}" item="item" index="indeval"> <template is="if" value="{{item.cxPropSelected}}"><template case="true"> <lyte-drop-item class="picklist_values {{if(item.extra,\'lyteDropdownSelection\',\'\')}} {{if(cruxAnd(ifEquals(cxPropIsColorCodeEnabled,\'true\'),ifEquals(item.actual_value,\'-None-\')),\'colorEnabledSelect2None\',\'\')}} {{if(item.cxDisableSelect,\'cxDropboxNoneItem\',\'\')}}" data-value="{{item[cxPropUserValue]}}" data-extra="{{item.extra}}" data-zcqa="{{concat(cxPropField.field_label,\'_\',item[cxPropZcqaSelector])}}" selected="true"> <template is="if" value="{{cxPropPicklistYield}}"><template case="true"> <lyte-yield yield-name="picklistYield" item-obj="{{item}}"></lyte-yield> </template><template case="false"> <template is="if" value="{{cxPropIsColorCodeEnabled}}"><template case="true"> <span class="dIB activitesColor" style="background:{{item.colour_code}}" data-zcqa="{{concat(cxPropField.field_label,\'_option_\',item[cxPropZcqaSelector])}}"> </span> </template></template> {{item[cxPropUserValue]}} </template></template> </lyte-drop-item> </template><template case="false"> <lyte-drop-item class="picklist_values {{if(item.extra,\'lyteDropdownSelection\',\'\')}} {{if(cruxAnd(ifEquals(cxPropIsColorCodeEnabled,\'true\'),ifEquals(item.actual_value,\'-None-\')),\'colorEnabledSelect2None\',\'\')}} {{if(item.cxDisableSelect,\'cxDropboxNoneItem\',\'\')}}" data-value="{{item[cxPropUserValue]}}" data-extra="{{item.extra}}" data-zcqa="{{concat(cxPropField.field_label,\'_\',item[cxPropZcqaSelector])}}"> <template is="if" value="{{cxPropPicklistYield}}"><template case="true"> <lyte-yield yield-name="picklistYield" item-obj="{{item}}"></lyte-yield> </template><template case="false"> <template is="if" value="{{cxPropIsColorCodeEnabled}}"><template case="true"> <span class="dIB activitesColor" style="background:{{item.colour_code}}" data-zcqa="{{concat(cxPropField.field_label,\'_option_\',item[cxPropZcqaSelector])}}"> </span> </template></template> {{item[cxPropUserValue]}} </template></template> </lyte-drop-item> </template></template> </template> <template is="if" value="{{showNoOption}}"><template case="true"><div class="cxDropdownNoResult" data-value="cruxDisabled">{{cruxGetI18n(\'crm.label.no.options.found\')}}</div></template></template> </template></template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> <template is="if" value="{{isError}}"><template case="true"> <crux-error-message error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-field="{{cxPropField}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}"> <template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}" cx-field="{{cxPropField}}"></lyte-yield></template> </crux-error-message> </template></template> </div> </template><template case="view"> <template is="if" value="{{cxPropIsColorCodeEnabled}}"><template case="true"> <span class="{{pkColorEnabledClass}}" data-zcqa="{{concat(\'colorcodespan_\',cxPropField.field_label,\'_\',viewValue)}}" style="{{propColorStyleObj}}"><lyte-text lt-prop-value="{{viewValue}}" lt-prop-tooltip-config="{&quot;showdelay&quot; : 600 }" lt-prop-tooltip-class="lvTooltipClass"></lyte-text></span> </template><template case="false"> <lyte-text lt-prop-value="{{viewValue}}" lt-prop-tooltip-config="{&quot;showdelay&quot; : 600 }" lt-prop-tooltip-class="lvTooltipClass"></lyte-text> </template></template> </template></template> </template></template></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]},{type:"attr",position:[2,1]},{type:"if",position:[2,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]}]}},default:{}},{type:"text",position:[2,3,1]},{type:"componentDynamic",position:[4]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{filter:{dynamicNodes:[],additional:{next:"criteria"}},criteria:{dynamicNodes:[],additional:{next:"create"}},create:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["'background:'","propDefaultColorCode"]}}}}]}},default:{}},{type:"attr",position:[3,3]},{type:"registerYield",position:[3,3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,3]}]},{type:"attr",position:[1,1,3,1]},{type:"componentDynamic",position:[1,1,3,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3,3]},{type:"attr",position:[3,3,1]},{type:"if",position:[3,3,1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["'background:'","item.colour_code"]}}}}]}},default:{}},{type:"text",position:[3]}]}},default:{}},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["'background:'","item.colour_code"]}}}}]}},default:{}},{type:"text",position:[3]}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"text",position:[0,0]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[3,3]},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[3,3]},{type:"attr",position:[3,5]},{type:"if",position:[3,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]},view:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"propColorStyleObj"}}},{type:"attr",position:[1,0]},{type:"componentDynamic",position:[1,0]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["lyteViewPort","cxPropFrom","cxPropField","cxPropValue","displayValue","pickListValues","origLen","showNoOption","disabledList","cxPropEmptyValue","placeholder","cxPropDisabled","cxPropOpenDropdown","cxPropDisplayValue","cxPropType","cxPropZcqa","cxPropErrorMessage","cxPropDisableExtraValue","cxPropFieldKey","cxPropId","cxPropDisableExtraValue","cxPropClearErrorMessage","cxPropDoNotSkipFirstValue","cxPropAppearance","cxPropBoundary","cxPropDirection","cxPropLabelClass","showSearchBox","cxPropIsColorCodeEnabled","propDefaultColorCode","propColorStyleObj","pkColorEnabledClass","cxPropId","cxPropPlaceholder","cxPropTabIndex","cxPropClass","cxPropLayout","cxPropTooltip","cxPropPicklistYield","cxPropPicklistButtonYield","isError","cxPropErrorYield","cxPropUserValue","cxPropSystemValue","cxPropPicklistValues","cxPropInfoTooltip","cxPropZcqaSelector","cxPropFreeze","cxPropDropdownZcqa","cxPropScope","cxPropSearchDelay","cxPropAria","cxPropAriaAttributes","cxPropModule","cxPropMaskingProperties","cxPropTooltipConfig","cxPropTooltipClass","viewValue","cxPropErrorZcqaPrefix","cxPropErrorZcqaSuffix","lyteUnbound","cxPropMaxlength","cxPropUpdateDelay","cxPropErrorClass","tooltip","cxPropErrorSpanClass","cxPropDropdownIconClass","cxPropMaxCount"],data:function(){return{lyteViewPort:Lyte.attr("boolean",{default:!1}),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropField:Lyte.attr("object",{default:{}}),cxPropValue:Lyte.attr("string"),displayValue:Lyte.attr("array",{default:[]}),pickListValues:Lyte.attr("array"),origLen:Lyte.attr("number"),showNoOption:Lyte.attr("boolean",{default:!1}),disabledList:Lyte.attr("array",{default:["cruxDisabled"]}),cxPropEmptyValue:Lyte.attr("string",{default:""}),placeholder:Lyte.attr("string",{default:_cruxUtils.getI18n("None")}),cxPropDisabled:Lyte.attr("boolean",{default:!1}),cxPropOpenDropdown:Lyte.attr("boolean",{default:!1}),cxPropDisplayValue:Lyte.attr("string"),cxPropType:Lyte.attr("string"),cxPropZcqa:Lyte.attr("string"),cxPropErrorMessage:Lyte.attr("string",{default:""}),cxPropDisableExtraValue:Lyte.attr("boolean",{default:!1}),cxPropFieldKey:Lyte.attr("string",{default:""}),cxPropId:Lyte.attr("string",{default:""}),cxPropDisableExtraValue:Lyte.attr("boolean",{default:!1}),cxPropClearErrorMessage:Lyte.attr("boolean",{default:!0}),cxPropDoNotSkipFirstValue:Lyte.attr("boolean",{default:!1}),cxPropAppearance:Lyte.attr("string",{default:"flat"}),cxPropBoundary:Lyte.attr("object",{default:{}}),cxPropDirection:Lyte.attr("string",{default:"vertical"}),cxPropLabelClass:Lyte.attr("string",{default:""}),showSearchBox:Lyte.attr("boolean",{default:!1}),cxPropIsColorCodeEnabled:Lyte.attr("boolean",{default:!1}),propDefaultColorCode:Lyte.attr("string",{default:""}),propColorStyleObj:Lyte.attr("string",{default:""}),pkColorEnabledClass:Lyte.attr("string",{default:""}),cxPropId:Lyte.attr("string",{default:""}),cxPropPlaceholder:Lyte.attr("string",{default:""}),cxPropTabIndex:Lyte.attr("string",{default:"0"}),cxPropClass:Lyte.attr("string",{default:""}),cxPropLayout:Lyte.attr("string"),cxPropTooltip:Lyte.attr("string",{default:""}),cxPropPicklistYield:Lyte.attr("boolean",{default:!1}),cxPropPicklistButtonYield:Lyte.attr("boolean",{default:!1}),isError:Lyte.attr("boolean",{default:!1}),cxPropErrorYield:Lyte.attr("boolean",{default:!1}),cxPropUserValue:Lyte.attr("string",{default:"display_value"}),cxPropSystemValue:Lyte.attr("string",{default:"actual_value"}),cxPropPicklistValues:Lyte.attr("array"),cxPropInfoTooltip:Lyte.attr("string",{default:""}),cxPropZcqaSelector:Lyte.attr("string"),cxPropFreeze:Lyte.attr("boolean",{default:!1}),cxPropDropdownZcqa:Lyte.attr("string"),cxPropScope:Lyte.attr("string"),cxPropSearchDelay:Lyte.attr("number"),cxPropAria:Lyte.attr("boolean",{default:!1}),cxPropAriaAttributes:Lyte.attr("object",{default:{}}),cxPropModule:Lyte.attr("string"),cxPropMaskingProperties:Lyte.attr("object"),cxPropTooltipConfig:Lyte.attr("string"),cxPropTooltipClass:Lyte.attr("string"),viewValue:Lyte.attr("string"),cxPropErrorZcqaPrefix:Lyte.attr("string",{default:""}),cxPropErrorZcqaSuffix:Lyte.attr("string",{default:"Error"}),lyteUnbound:Lyte.attr("boolean",{default:!1}),cxPropMaxlength:Lyte.attr("number",{default:120}),cxPropUpdateDelay:Lyte.attr("number"),cxPropErrorClass:Lyte.attr("string"),tooltip:Lyte.attr("string"),cxPropErrorSpanClass:Lyte.attr("string"),cxPropDropdownIconClass:Lyte.attr("string",{default:"dropdown"}),cxPropMaxCount:Lyte.attr("number")}},methods:{onDropdownOpen:function(){this.getMethods("onShow")&&this.executeMethod("onShow",arguments[0],arguments[1]),this.$node.querySelector("lyte-dropdown").component.childComp&&this.$node.querySelector("lyte-dropdown").component.childComp.querySelector("input")&&this.$node.querySelector("lyte-dropdown").component.childComp.querySelector("input").focus()},showNoResult:function(e,t){if(this.closing,this.closing)this.closing=!1;else if(this.$node.querySelector("lyte-dropdown").component.childComp&&this.$node.querySelector("lyte-dropdown").component.childComp.classList.contains("lyteDropdownHidden")){if("input"==arguments[3].type)return;this.$node.querySelector("lyte-dropdown").toggle()}var o=arguments[2].querySelector("input").value;if(!(""==o.trim()&&(!this.adding&&this.getData("pickListValues")&&this.getData("pickListValues")[0]&&this.getData("pickListValues")[0].extra&&Lyte.arrayUtils(this.getData("pickListValues"),"shift"),this.adding=!1,this.setData("showNoOption",0==this.origLen),o.length>0))&&""!=o)if(0==this.getData("cxPropDisableExtraValue")){var a=o,r=o.toLowerCase().trim();if(r=r.replace(/\s+/g," "),1!=this.extraVals[r]){this.getData("pickListValues")&&this.getData("pickListValues")[0]&&this.getData("pickListValues")[0].extra&&Lyte.arrayUtils(this.getData("pickListValues"),"shift"),this.$node.querySelector("lyte-dropdown").component.childComp&&this.$node.querySelector("lyte-dropdown").component.childComp.querySelector(".lyteDropdownSelection")&&this.$node.querySelector("lyte-dropdown").component.childComp.querySelector(".lyteDropdownSelection").classList.remove("lyteDropdownSelection");var i={extra:"true"};i[this.getData("cxPropUserValue")]=a.replace(/\s+/g," "),i[this.getData("cxPropSystemValue")]=a.replace(/\s+/g," "),Lyte.arrayUtils(this.getData("pickListValues"),"unshift",[i]),this.setData("showNoOption",!1)}else{this.getData("pickListValues")&&this.getData("pickListValues")[0]&&this.getData("pickListValues")[0].extra&&Lyte.arrayUtils(this.getData("pickListValues"),"shift");var s=t.some((function(e){return"true"!=e.getAttribute("selected")&&"true"!=e.getAttribute("data-extra")}));s?0!=t.length&&this.setData("showNoOption",!1):this.setData("showNoOption",!0)}}else 0==t.length?this.setData("showNoOption",!0):this.setData("showNoOption",!1)},addToList:function(e,t,o){var a=this.getData("pickListValues");if(this.isEmoji(o))return this.$node.querySelector("lyte-dropdown").toggle(),this.showAlert(_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(e.field_label))),!1;if(null!=this.data.cxPropMaxCount&&this.getData("displayValue").length>=this.data.cxPropMaxCount){var r=this.$node.querySelector("lyte-dropdown");return(s=JSON.parse(r.ltProp("selected"))).pop(),r.ltProp("selected",JSON.stringify(s)),r.toggle(),this.showAlert(_cruxUtils.getI18n("crm.alert.maximum.text.values.contains",this.data.cxPropMaxCount)),!1}if(this.getMethods("onBeforeAdd")){var i=t.srcElement?"true"==t.srcElement.getAttribute("data-extra"):!!t.target&&"true"==t.target.getAttribute("data-extra");if(0==this.executeMethod("onBeforeAdd",o,this.getValue(),i)){if(!i){var s;(s=JSON.parse(this.$node.querySelector("lyte-dropdown").ltProp("selected"))).pop();var l=this.$node.querySelector("lyte-dropdown");l.ltProp("selected",JSON.stringify(s)),l.component.childComp.querySelector(".lyteDropdownSelection").classList.remove("lyteDropdownSelection"),t.target.classList.add("lyteDropdownSelection")}return!1}}for(var n=!1,p="create"==this.data.cxPropFrom,c=-1,d=0;d<a.length;d++){if(a[d][this.getData("cxPropUserValue")]==o){c>-1?Lyte.arrayUtils(this.getData("displayValue"),"insertAt",c+1,a[d][this.getData("cxPropUserValue")]):Lyte.arrayUtils(this.getData("displayValue"),"unshift",a[d][this.getData("cxPropUserValue")]),this.extraVals[o.toLowerCase()]=!0,"true"==a[d].extra?Lyte.arrayUtils(this.getData("pickListValues"),"shift"):(this.origLen=this.origLen-1,document.querySelector("[data-extra='true']")&&Lyte.arrayUtils(this.getData("pickListValues"),"shift")),this.setData("showNoOption",0==this.origLen),n=!0;break}p&&this.data.displayValue.length&&this.data.displayValue.indexOf(a[d][this.getData("cxPropUserValue")])>-1&&(c=this.data.displayValue.indexOf(a[d][this.getData("cxPropUserValue")]))}n||(Lyte.arrayUtils(this.getData("displayValue"),"push",o),this.extraVals[o.toLowerCase()]=!0,this.setData("showNoOption",0==this.origLen)),this.setData("placeholder",this.data.cxPropPlaceholder?this.data.cxPropPlaceholder:"filter"==this.data.cxPropFrom?_cruxUtils.getI18n("crm.label.filter.typehere"):"");var u="#search_";this.getData("cxPropId")&&(u+=this.getData("cxPropId")),u+="_"+e.api_name.replace(new RegExp("->","g"),"_").replace(new RegExp("[/.]","g"),"_"),this.adding=!0,this.$node.querySelector(u).setValue(""),this.data.cxPropClearErrorMessage&&this.setData("cxPropErrorMessage",""),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue()),this.$node.querySelector("lyte-dropdown").classList.remove("lyteDropNoOptSelected"),this.preventClose=!0},removeFromList:function(e,t,o){for(var a=this.getData("displayValue"),r=!1,i=0;i<a.length;i++)if(a[i]==o){var s=Lyte.arrayUtils(this.getData("displayValue"),"removeAt",i),l="#search_";this.getData("cxPropId")&&(l+=this.getData("cxPropId")),l+="_"+e.api_name.replace(new RegExp("->","g"),"_").replace(new RegExp("[/.]","g"),"_"),this.$node.querySelector(l).setValue("");for(var n=0;null!=this.getData("pickListValues")&&n<this.getData("pickListValues").length;n++)if(this.getData("pickListValues")[n][this.getData("cxPropUserValue")]==s[0]){"true"!=this.getData("pickListValues")[n].extra&&(this.origLen=this.origLen+1,r=!0);break}break}r||(this.extraVals[o.toLowerCase()]=!1),0==a.length&&this.setData("placeholder",this.data.cxPropPlaceholder?this.data.cxPropPlaceholder:"filter"==this.data.cxPropFrom?_cruxUtils.getI18n("crm.label.filter.typehere"):""),this.data.cxPropClearErrorMessage&&this.setData("cxPropErrorMessage",""),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue()),0==this.getData("displayValue").length&&this.$node.querySelector("lyte-dropdown").classList.add("lyteDropNoOptSelected"),this.setData("showNoOption",0==this.origLen),null==this.$node.querySelector("lyte-dropdown").component.childComp&&this.$node.querySelector("lyte-dropdown lyte-drop-button").click()},selectOption:function(e,t){if("create"==this.data.cxPropFrom&&"single"==this.data.cxPropType&&"-None-"==t?this.$node.querySelector("lyte-dropdown").classList.add("cxNoneSelected"):this.$node.querySelector("lyte-dropdown").classList.remove("cxNoneSelected"),this.setData("cxPropValue",t),this.getMethods("onOptionSelected"))return this.executeMethod("onOptionSelected",e,t);this.getData("cxPropClearErrorMessage")&&this.setData("cxPropErrorMessage",""),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getData("cxPropValue"))},openDropdown:function(e,t){var o;if(this.getMethods("onBeforeShow")&&this.executeMethod("onBeforeShow",e,t,this),null==(o=this.getData("cxPropPicklistValues")?this.getData("cxPropPicklistValues"):137==this.data.cxPropField.ui_type?this.data.cxPropLayout?this.data.cxPropField[this.data.cxPropLayout].allowed_modules:this.data.cxPropField.allowed_modules:this.getData("cxPropLayout")?this.getData("cxPropField")[this.getData("cxPropLayout")].pick_list_values:this.getData("cxPropField").pick_list_values)||0==o.length){this.setData("showLoading",!0);var a="undefined"!=typeof moduleRecordMapping?moduleRecordMapping[this.data.cxPropModule].api_name:this.data.cxPropModule;store.findRecord("field",this.data.cxPropField.id,{module:a},!0).then(function(e){this.setData("cxPropField",e[0]),this.openDropdownFn(),this.setData("showLoading",!1)}.bind(this))}else this.openDropdownFn()},closeDropdown:function(e,t){var o=this.$node.querySelector("lyte-search");this.closing=!0,(o=o||this.$node.querySelector("lyte-dropdown").component.childComp.querySelector("lyte-search"))&&o.setValue(""),this.getMethods("onHide")&&this.executeMethod("onHide",e,t)},singleSearch:function(e){this.setData("showNoOption",0==e.length)},beforeHide:function(e){if(this.preventClose&&(this.preventClose=!1,e&&"scroll"==e.type))return!1},hideInfoTooltip:function(){var e=this.$node.querySelector(".cxCurrentHovercard");$L(e).removeClass("cxCurrentHovercard")},onSearchBoxFocused:function(e,t){var o=this.$node.querySelector("lyte-dropdown");"criteria"!=this.data.cxPropFrom||o.ltProp("isOpen")||o.open()}},openDropdownFn:function(){if(null==this.getData("pickListValues")){var e;this.getData("cxPropPicklistValues")?e=this.getData("cxPropPicklistValues"):137==this.data.cxPropField.ui_type?(e=this.data.cxPropLayout?this.data.cxPropField[this.data.cxPropLayout].allowed_modules:this.data.cxPropField.allowed_modules,this.setData("cxPropUserValue","plural_label")):e=this.getData("cxPropLayout")?this.getData("cxPropField")[this.getData("cxPropLayout")].pick_list_values:this.getData("cxPropField").pick_list_values,e.length>=10&&this.setData("showSearchBox",!0);var t=(e=e.filter((function(e){return"unused"!=e.type}))).map(function(e){return e[this.getData("cxPropUserValue")]}.bind(this)),o=t.slice(0);"create"!=this.getData("cxPropFrom")&&"Campaigns"!=this.getData("cxPropField").api_name&&-1==["Deal_Stage","Activity_Type","Data_Processing_Basis","Data_Processing_Basis_Details","Stage","Campaigns"].indexOf(this.getData("cxPropField").api_name)&&t.sort();for(var a=[],r=0,i=0,s=[],l=this.getData("displayValue");r<t.length;r++)if(-1===t[r].indexOf("-None-")||"create"==this.getData("cxPropFrom")){var n=e[o.indexOf(t[r])];s.indexOf(n[this.data.cxPropUserValue])<0&&(l&&l.indexOf(n[this.getData("cxPropUserValue")])>-1?(i+=1,n.cxPropSelected=!0):delete n.cxPropSelected,this.extraVals[n[this.getData("cxPropUserValue")].toLowerCase()]=!0,a.push(n),s.push(n[this.data.cxPropUserValue]))}this.setData("pickListValues",a),this.origLen=a.length-i,i==a.length&&"single"!=this.getData("cxPropType")&&this.setData("showNoOption",!0)}},validate:function(){var e,t=this.getData("cxPropField"),o=this.getValue();if("create"==this.getData("cxPropFrom"))return!!this.validateMandatory(!o||0==o.length||"-None-"==o)&&(this.setData("cxPropErrorMessage",""),!0);if(!o||0==o.length)return this.showAlert(_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(t.field_label))),!1;var a=o.length;for(e=0;e<a;e++)if(o[e].replace(/^\s+/g,"").replace(/\s+$/g,"").indexOf("*")>-1)return this.showAlert(_cruxUtils.getI18n("crm.alert.character.not.allowed","*")),!1;return!0},getValue:function(e){var t=this.getData("displayValue");if("single"==this.getData("cxPropType"))return e==this.getData("cxPropSystemValue")&&(s=(r=(o=this.data.cxPropPicklistValues?this.data.cxPropPicklistValues:this.getData("cxPropLayout")?this.getData("cxPropField")[this.getData("cxPropLayout")].pick_list_values:this.getData("cxPropField").pick_list_values).map(function(e){return e[this.getData("cxPropUserValue")]}.bind(this))).indexOf(this.getData("cxPropValue")))>-1?o[s][this.getData("cxPropSystemValue")]:this.getData("cxPropValue");if(e==this.getData("cxPropSystemValue")){for(var o,a=[],r=(o=this.getData("cxPropLayout")?this.getData("cxPropField")[this.getData("cxPropLayout")].pick_list_values:this.getData("cxPropField").pick_list_values).map(function(e){return e[this.getData("cxPropUserValue")]}.bind(this)),i=0;i<t.length;i++){var s;(s=r.indexOf(t[i]))>-1&&a.push(o[s][this.getData("cxPropSystemValue")])}return a}return t},setColorCodeDatas:function(){var e,t=this.getData("cxPropFrom");this.getData("cxPropPicklistValues")?e=this.getData("cxPropPicklistValues"):this.getData("cxPropLayout")?e=this.getData("cxPropField")[this.getData("cxPropLayout")].pick_list_values:this.getData("cxPropField").pick_list_values&&(e=this.getData("cxPropField").pick_list_values);var o=this.getData("cxPropValue"),a=null,r=null;if(null!=o&&(a=(r=e.filter((function(e){return e.display_value==o||e.display_label==o}))).length>=1?r[0].colour_code:"#ffffff",this.setData("propDefaultColorCode",a)),"view"==t)if(null!=o&&"-None-"!==o){var i="black";if(a&&""!==a&&0===a.indexOf("#")){var s=a.substring(1);(299*parseInt(s.substr(0,2),16)+587*parseInt(s.substr(2,2),16)+114*parseInt(s.substr(4,2),16))/1e3<155&&(i="white")}var l="background-color:"+a+";color:"+i;"#ffffff"===a&&(l+=";border: 1px solid #C9C9C9"),this.setData("propColorStyleObj",l),this.setData("pkColorEnabledClass","colorAppliedPicklist")}else this.setData("propColorStyleObj",""),this.setData("pkColorEnabledClass","colorAppliedPicklist colorAppliedPKNone");else"create"==t&&(null==this.getData("cxPropValue")||""==this.getData("cxPropValue")||r&&r.length>=1&&"-None-"==r[0].actual_value?this.setData("pkColorEnabledClass","colorEnabledPicklist colorEnabledPKNone"):this.setData("pkColorEnabledClass","colorEnabledPicklist"))},observeField:function(){if("view"!=this.getData("cxPropFrom")&&this.getData("cxPropValue")){var e=this.getData("cxPropValue");if("single"==this.getData("cxPropType"))this.setData("cxPropDisplayValue",e),this.setData("displayValue",[e]);else{-1==e.indexOf("[")?(this.setData("cxPropValue",'["'+e+'"]'),e=[e]):e=JSON.parse(e);var t=e.length?[e[0]]:[],o=e.length?[e[0].toLowerCase().trim()]:[],a=0,r=[];this.data.pickListValues&&(r=this.data.pickListValues.map((function(e){return e.display_value})));for(var i=0;i<e.length;i++)i>0&&-1==o.indexOf(e[i].toLowerCase().trim())&&(t.push(e[i]),o.push(e[i].toLowerCase().trim())),r.indexOf(e[i])>-1&&a++;this.setData("displayValue",t),r.length&&(this.origLen=r.length-a),this.setData("showNoOption",0==this.origLen),"create"==this.getData("cxPropFrom")||this.getData("cxPropPlaceholder")?0==t.length?this.setData("placeholder",this.getData("cxPropPlaceholder")?this.getData("cxPropPlaceholder"):_cruxUtils.getI18n("None")):this.setData("placeholder",""):this.setData("placeholder",_cruxUtils.getI18n("crm.label.filter.typehere"))}}null!=this.getData("cxPropValue")&&""!=this.getData("cxPropValue")||this.setData("displayValue",[]),"view"==this.data.cxPropFrom&&(this.data.cxPropValue?this.data.cxPropMaskingProperties?this.setData("viewValue",Lyte.Component.registeredHelpers.cruxMaskValue(this.data.cxPropValue,this.data.cxPropMaskingProperties)):"single"!=this.data.cxPropType&&-1!=this.data.cxPropValue.indexOf("[")&&this.testParse()?this.setData("viewValue",JSON.parse(this.data.cxPropValue).join("; ")):this.setData("viewValue",this.data.cxPropValue):this.data.cxPropEmptyValue&&this.setData("viewValue",this.data.cxPropEmptyValue)),!this.getData("cxPropIsColorCodeEnabled")||"create"!==this.data.cxPropFrom&&"view"!==this.data.cxPropFrom||this.setColorCodeDatas()}.observes("cxPropValue","cxPropMaskingProperties","cxPropFrom").on("init"),testParse:function(e){try{return JSON.parse(e),!0}catch(e){return!1}},init:function(){var e=this.getData("cxPropFrom");if("filter"==e&&null==this.getData("cxPropMaxCount")&&this.setData("cxPropMaxCount",50),"view"==e){if(999==this.getData("cxPropField").ui_type){var t=JSON.parse(this.getData("cxPropValue"));this.data.cxPropValue=t.join(", ")}}else"create"!=e||this.getData("cxPropType")?this.getData("cxPropType")&&"multiple"!=this.getData("cxPropType")||(this.data.cxPropType="multisearch"):this.data.cxPropType="single";this.getData("cxPropPlaceholder")&&(this.data.placeholder=this.getData("cxPropPlaceholder")),"create"==e&&(this.setData("cxPropDisableExtraValue",!0),"single"==this.data.cxPropType&&!this.data.cxPropPlaceholder&&this.data.cxPropField.pick_list_values&&this.data.cxPropField.pick_list_values[0]&&"-None-"==this.data.cxPropField.pick_list_values[0].actual_value&&(this.data.placeholder=this.data.cxPropField.pick_list_values[0].display_value)),this.getData("cxPropZcqaSelector")||this.setData("cxPropZcqaSelector",this.getData("cxPropUserValue")),this.getData("cxPropIsColorCodeEnabled")&&this.setColorCodeDatas(),this.extraVals={}},observeErrorMessage:function(){this.setData("isError",""!=this.getData("cxPropErrorMessage"))}.observes("cxPropErrorMessage").on("init"),actions:{searchBoxClicked:function(){return(!this.getMethods("onSearchBoxClick")||0!=this.executeMethod("onSearchBoxClick",this.$node.querySelector("lyte-input")))&&(1==this.$node.querySelector("lyte-dropdown").ltProp("isOpen")?(this.$node.querySelector("lyte-search").querySelector("input").value&&this.$node.querySelector("lyte-search").setValue(""),!1):void 0)},preventDefault:function(e,t){13==t.keyCode&&t.preventDefault()},setToolTip:function(e){e.offsetWidth<e.scrollWidth?e.setAttribute("lt-prop-title",e.textContent):e.setAttribute("lt-prop-title","")},showInfoTooltip:function(e){this.showHideInfoTooltip(e)}},extraVals:{},observesdidConnect:function(){"view"!=this.getData("cxPropFrom")&&(this.$node.toggle=function(){this.querySelector("lyte-dropdown").toggle()}),"create"==this.data.cxPropFrom&&"single"==this.data.cxPropType&&this.$node.querySelector("lyte-dropdown")&&("-None-"==this.getData("cxPropValue")?this.$node.querySelector("lyte-dropdown").classList.add("cxNoneSelected"):this.$node.querySelector("lyte-dropdown").classList.remove("cxNoneSelected"))}.observes("lyteViewPort").on("didConnect"),observeMandatory:function(){this.$node.querySelector("lyte-dropdown")&&"create"==this.getData("cxPropFrom")&&(this.getData("cxPropField").required?this.$node.querySelector("lyte-dropdown").classList.add("mandatoryField"):this.$node.querySelector("lyte-dropdown").classList.remove("mandatoryField"))}.observes("cxPropField.required","lyteViewPort").on("didConnect"),observePicklistValues:function(e){e.insertedItems&&!e.insertedItems[0].extra&&this.origLen++}.observes("pickListValues.[]"),observeZcqa:function(){"create"==this.getData("cxPropFrom")&&"single"==this.getData("cxPropType")&&this.$node.querySelector("lyte-drop-button")&&!this.getData("cxPropDropdownZcqa")&&this.$node.querySelector("lyte-drop-button").setAttribute("data-zcqa",this.getData("cxPropZcqa"))}.observes("cxPropZcqa","lyteViewPort").on("didConnect"),observePicklistValues_1:function(){this.setData("pickListValues",void 0)}.observes("cxPropPicklistValues","cxPropField.pick_list_values"),openDropdownObserver:function(){this.getData("cxPropOpenDropdown")&&setTimeout(function(){this.$node.querySelector("lyte-dropdown").open()}.bind(this),100)}.observes("cxPropOpenDropdown"),observeField_new:function(){this.$node.querySelector(".cxDropbox")&&this.$node.querySelector(".cxDropbox").classList.add("search"+this.getData("cxPropField").column_name),"create"!=this.data.cxPropFrom||"single"!=this.data.cxPropType||this.getData("cxPropValue")||this.getData("cxPropPlaceholder")||this.data.cxPropField.pick_list_values&&this.data.cxPropField.pick_list_values[0]&&"-None-"!=this.data.cxPropField.pick_list_values[0].actual_value&&(this.setData("cxPropDisplayValue",this.data.cxPropField.pick_list_values[0].display_value),this.setData("cxPropValue",this.data.cxPropField.pick_list_values[0].display_value))}.observes("cxPropField","lyteViewPort").on("didConnect"),observeField_new:function(){this.$node.querySelector("lyte-dropdown")&&(this.data.isError?this.$node.querySelector("lyte-dropdown").classList.add("cxErrorBox"):this.$node.querySelector("lyte-dropdown").classList.remove("cxErrorBox"))}.observes("isError","lyteViewPort").on("didConnect"),observePlaceholder:function(){this.setData("placeholder",this.getData("cxPropPlaceholder"))}.observes("cxPropPlaceholder"),observeDisabled:function(){"create"==this.data.cxPropFrom&&this.setData("tooltip",this.data.cxPropTooltip?this.data.cxPropTooltip:this.data.cxPropDisabled?_cruxUtils.getI18n("crm.lable.read.only"):"")}.observes("cxPropDisabled").on("init")},{mixins:["crux-element-validation"]}),Lyte.Component.register("crux-tag-component",{_template:'<template tag-name="crux-tag-component"><template is="if" value="{{lyteViewPort}}"><template case="true"><dummy-port-element></dummy-port-element> <div id="cruxLoadingElem" class="cxLoadOnViewElement"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxLoadOnViewLabel"> {{cxPropField[cxPropFieldKey]}} <div class="cxLoadOnViewLoader"></div> </div> </template></template> <div class="cxLoadOnViewValue"> {{cxPropValue}} <div class="cxLoadOnViewLoader"></div> </div> </div> <dummy-port-element></dummy-port-element></template><template case="false"> <template is="switch" value="{{cxPropFrom}}"><template case="view"><template is="if" value="{{cxPropValue}}"><template case="true"> <ul id="{{cxPropId}}" class="listview_taglists w230 m0"> <template is="for" items="{{listValues}}" item="val" index="index"> <li style="{{if(val.hide,\'display: none;\',\'\')}}" lt-prop-title="{{if(val.showTooltip,val.name,if(cruxAnd(cxPropTooltip,ifNotEquals(cxPropTooltip,\'true\')),cxPropTooltip,\'\'))}}" lt-prop-tooltip-config="{{tooltipConfig}}" lt-prop-tooltip-class="lvTooltipClass" class="tagElementList f13 cxAddedTags dIB {{concat(\'cxTag\',cruxGetTagColorIndex(val.color_code))}}"><span class="{{if(val.showTooltip,\'cruxTagTitle\',\'\')}}" style="{{if(val.showTooltip,concat(\'width : \',val.showTooltipWidth),\'\')}}">{{val.name}}</span></li> </template> <li class="moreTagOption dIB vam p0 mB7 mR3 f15 col666" style="display:{{if(checkComparison(showMore,0,\'>\'),\'\',\'none\')}}"> <span class="disable eventNone">{{cruxGetI18n(\'and\')}}</span> <span class="moreCount cP uline1" onclick="{{action(\'showMoreTags\')}}"> {{showMore}} {{cruxGetI18n(\'crm.label.More\')}}</span> </li> </ul> </template></template></template><template case="filter"></template><template case="criteria"> <lyte-dropdown id="{{cxPropId}}" lt-prop-boundary="{{cxPropBoundary}}" lt-prop-yield="true" lt-prop-type="multisearch" lt-prop-tabindex="1" on-add="{{method(\'addToList\')}}" on-remove="{{method(\'removeFromList\')}}" on-before-show="{{method(\'openDropdown\')}}" lt-prop-selected="{{lbind(selectedIds)}}" on-hide="{{method(\'closeDropdown\')}}" class="{{if(ifEquals(cxPropAppearance,\'flat\'),\'cxFlatDropdown\',\'cxBoxDropdown\')}} " on-before-hide="{{method(\'beforeHide\')}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-button data-zcqa="{{cxPropZcqa}}"> <ul class="lyteMultipleSelect"> <template is="for" items="{{cxPropValue}}" item="tag" index="index"> <li data-value="{{tag.id}}"> <span class="lyteDropdownVisible" onmouseenter="{{action(\'setToolTip\',this)}}">{{tag.name}}</span> <lyte-drop-remove class="lyteCloseIcon"></lyte-drop-remove> </li> </template> <li class="lyteMultiselectInput"> <lyte-search class="w100per" lt-prop-type="text" lt-prop-query-selector="{&quot;scope&quot;:&quot;.parentscope_{{cxPropId}}_{{cruxReplace(cruxReplace(cxPropField.api_name,&quot;->&quot;,&quot;_&quot;),&quot;[/.]&quot;,&quot;_&quot;)}}&quot;, &quot;target&quot;:&quot;.cruxTagList&quot;, &quot;search&quot;:&quot;lyte-drop-item&quot;}" on-search="{{method(\'showNoResult\')}}" id="search_Tag" lt-prop-placeholder="{{placeholder}}" on-focus="{{method(\'onSearchBoxFocused\')}}" on-blur="{{method(\'onSearchBoxBlured\')}}" onclick="{{action(\'searchBoxClicked\')}}" onkeydown="{{action(\'preventDefault\',this,event)}}"></lyte-search> </li> </ul> </lyte-drop-button> <lyte-drop-box class="cxDropbox"> <lyte-drop-body class="parentscope_{{cxPropId}}_{{cruxReplace(cruxReplace(cxPropField.api_name,&quot;->&quot;,&quot;_&quot;),&quot;[/.]&quot;,&quot;_&quot;)}}"> <template is="for" items="{{tags}}" item="tag" index="ind"> <lyte-drop-item class="picklist_values cruxTagList" data-value="{{tag.id}}" data-zcqa="{{concat(cxPropField[cxPropFieldKey],\'_\',tag.name)}}"> <span>{{tag.name}}</span> </lyte-drop-item> </template> <template is="if" value="{{expHandlers(tagsLength,\'!\')}}"><template case="true"> <div class="cxDropdownNoResult picklist_values lyteDropdown-disabled" style="padding : 6px 25px !important;">{{cruxGetI18n(\'crm.label.no.options.found\')}}</div> </template></template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </template></template> </template></template></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]},{type:"attr",position:[2,1]},{type:"if",position:[2,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]}]}},default:{}},{type:"text",position:[2,3,1]},{type:"componentDynamic",position:[4]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{view:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"if",args:["val.hide","'display: none;'","''"]}}}},{type:"attr",position:[1,0],attr:{style:{name:"style",helperInfo:{name:"if",args:["val.showTooltip",{type:"helper",value:{name:"concat",args:["'width : '","val.showTooltipWidth"]}},"''"]}}}},{type:"text",position:[1,0,0]}]},{type:"attr",position:[1,3],attr:{style:{name:"style",helperInfo:{name:"concat",args:["'display:'",{type:"helper",value:{name:"if",args:[{type:"helper",value:{name:"checkComparison",args:["showMore",0,"'>'"]}},"''","'none'"]}}]}}}},{type:"text",position:[1,3,1,0]},{type:"attr",position:[1,3,3]},{type:"text",position:[1,3,3,1]},{type:"text",position:[1,3,3,3]}]}},default:{}}]},filter:{dynamicNodes:[],additional:{next:"criteria"}},criteria:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,3]}]},{type:"attr",position:[1,1,3,1]},{type:"componentDynamic",position:[1,1,3,1]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1]},{type:"attr",position:[3,1,1]},{type:"for",position:[3,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1]}]},{type:"attr",position:[3,1,3]},{type:"if",position:[3,1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"componentDynamic",position:[3,1]},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}],_observedAttributes:["lyteViewPort","cxPropValue","cxPropFrom","cxPropModule","tags","value","tagsLength","disabledList","selectedIds","cxPropZcqa","placeholder","cxPropIgnoreEmptyValue","cxPropField","cxPropFieldKey","showMore","valueObj","valueObj","listValues","cxPropAppearance","cxPropBoundary","cxPropId","lyteUnbound","cxPropClass","cxPropClipMode","cxPropWidth","cxPropTooltip","tooltipConfig"],data:function(){return{lyteViewPort:Lyte.attr("boolean",{default:!1}),cxPropValue:Lyte.attr("array",{default:[]}),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropModule:Lyte.attr("string"),tags:Lyte.attr("array"),value:Lyte.attr("array",{default:[]}),tagsLength:Lyte.attr("boolean",{default:!0}),disabledList:Lyte.attr("array",{default:["cruxDisabled"]}),selectedIds:Lyte.attr("array",{default:[]}),cxPropZcqa:Lyte.attr("string"),placeholder:Lyte.attr("string",{default:_cruxUtils.getI18n("None")}),cxPropIgnoreEmptyValue:Lyte.attr("boolean",{default:!1}),cxPropField:Lyte.attr("object",{default:{}}),cxPropFieldKey:Lyte.attr("string",{default:""}),showMore:Lyte.attr("number",{default:0}),valueObj:Lyte.attr("array",{default:[]}),valueObj:Lyte.attr("array",{default:[]}),listValues:Lyte.attr("array",{default:[]}),cxPropAppearance:Lyte.attr("string",{default:"flat"}),cxPropBoundary:Lyte.attr("object",{default:{}}),cxPropId:Lyte.attr("string",{default:""}),lyteUnbound:Lyte.attr("boolean",{default:!1}),cxPropClass:Lyte.attr("string",{default:""}),cxPropClipMode:Lyte.attr("boolean",{default:!1}),cxPropWidth:Lyte.attr("string",{default:"230px"}),cxPropTooltip:Lyte.attr("string"),tooltipConfig:Lyte.attr("object",{default:{appearance:"box"}})}},init:function(){this.data.placeholder="filter"==this.data.cxPropFrom?_cruxUtils.getI18n("crm.label.filter.typehere"):"",this.$node.resize=this.resize.bind(this),this.preventToggle=!1},methods:{addToList:function(e,t,o){var a=this.data.tags,r=a.filter((function(e){return e.id==t}))[0];Lyte.arrayUtils(this.data.cxPropValue,"push",{id:r.id,name:r.name,color_code:r.color_code}),(a.length==JSON.parse(o).length||this.$node.querySelector("lyte-dropdown").component.childComp.querySelectorAll(".lyteDropdownActive").length>1&&this.$node.querySelector("lyte-search").ltProp("value"))&&this.setData("tagsLength",!1),this.setData("placeholder","filter"==this.data.cxPropFrom?_cruxUtils.getI18n("crm.label.filter.typehere"):""),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue()),this.$node.querySelector("lyte-search").setValue(""),this.preventClose=!0},removeFromList:function(e,t){for(var o,a=this.data.cxPropValue,r=0;r<a.length;r++)if(a[r].id==t){o=r;break}Lyte.arrayUtils(this.data.cxPropValue,"removeAt",o,1),this.setData("tagsLength",!0),0==a.length&&this.setData("placeholder",_cruxUtils.getI18n("None")),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue())},showNoResult:function(e){this.preventToggle?this.preventToggle=!1:(null==this.$node.querySelector("lyte-dropdown").component.childComp||this.$node.querySelector("lyte-dropdown").component.childComp.classList.contains("lyteDropdownHidden"))&&this.$node.querySelector("lyte-dropdown").toggle();for(var t=0;t<e.length;t++)if(!e[t].classList.contains("lyteDropdownActive"))return void this.setData("tagsLength",!0);this.setData("tagsLength",!1)},openDropdown:function(){if(this.getMethods("onBeforeShow")&&this.executeMethod("onBeforeShow",arguments[0],arguments[1]),null==this.data.tags){if(this.requestFired)return!1;var e="undefined"!=typeof moduleRecordMapping?moduleRecordMapping[this.data.cxPropModule].api_name:this.data.cxPropModule;return this.requestFired=!0,store.findAll("tag",{module:e,fromPage:"view"},!0).then(function(t){this.requestFired=!1,this.setData("tags",store.peekAll("tag").filterBy({module_name:e}).sortBy("name")),this.setSelected(),this.$node.querySelector("lyte-dropdown").open()}.bind(this)),!1}},closeDropdown:function(){""!=this.$node.querySelector("lyte-search").ltProp("value")&&(this.preventToggle=!0,this.$node.querySelector("lyte-search").setValue(""),this.$node.querySelector("lyte-search").blur())},beforeHide:function(e){if(this.preventClose&&(this.preventClose=!1,e&&"scroll"==e.type))return!1},onSearchBoxFocused:function(e,t){var o=this.$node.querySelector("lyte-dropdown");"criteria"!=this.data.cxPropFrom||o.ltProp("isOpen")||o.open()},onSearchBoxBlured:function(e,t){var o=this.$node.querySelector("lyte-dropdown");"criteria"==this.data.cxPropFrom&&o.ltProp("isOpen")&&setTimeout((()=>{this.preventClose?this.preventClose=!1:o.close()}),300)}},getValue:function(){return this.data.cxPropValue},validate:function(){return!!(null!=this.data.cxPropValue&&0!=this.data.cxPropValue.length||this.data.cxPropIgnoreEmptyValue)||(this.showAlert(_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(this.data.cxPropField.field_label))),!1)},actions:{searchBoxClicked:function(){if(1==this.$node.querySelector("lyte-dropdown").ltProp("isOpen"))return this.$node.querySelector("lyte-search").querySelector("input").value&&this.$node.querySelector("lyte-search").setValue(""),!1},showMoreTags:function(){this.getData("cxPropClipMode")?this.mouseOverFn():this.clickFn()},preventDefault:function(e,t){13==t.keyCode&&t.preventDefault()},setToolTip:function(e){e.offsetWidth<e.scrollWidth?e.setAttribute("title",e.textContent):e.setAttribute("title","")},hideMoreTags:function(){this.hideTags()}},setSelected:function(){var e=this.getData("tags");if(null!=e){this.getData("cxPropValue")||this.setData("cxPropValue",[]);var t=this.getData("cxPropValue").map((function(e){return e.id}));this.setData("selectedIds",t),0!=e.length&&e.length!=t.length||this.setData("tagsLength",!1),this.$node.querySelector("lyte-dropdown").ltProp("selected",t)}},hideCount:0,findRowAndCallFixHeight:function(e){var t=document.querySelector("lyte-expresstable");if(t){for(;e&&"LYTE-EXPTABLE-TR"!=e.nodeName;)e=e.parentElement;e&&t.fixRowHeight(e)}},observeValue:function(){"view"==this.data.cxPropFrom&&this.data.cxPropValue&&this.setValueFn()}.observes("cxPropValue").on("init"),observeValue1:function(){if("view"==this.data.cxPropFrom&&this.getData("cxPropValue"))if(this.getData("cxPropValue")&&this.getData("cxPropClipMode")){document.documentMode||/Edge/.test(navigator.userAgent);var e=0,t=0,o=-1;document.createElement("canvas"),this.windowOuterWidth=window.outerWidth;var a=this.getData("cxPropWidth");a=a.split("px")[0],a-=105;var r=document.createElement("li");r.classList.add("tagElementList","f13","dIB","cxAddedTags"),document.body.appendChild(r);for(var i=0;i<this.getData("cxPropValue").length;i++){r.innerText=this.getData("cxPropValue")[i].name;var s=r.offsetWidth;if((e+=s+15)>a){if(1==t||this.getData("cxPropClipMode")){o=i;break}e=s+17,t=1}}r.remove();var l=0;for(this.hiddenElem=o,i=o;i>-1&&i<this.getData("cxPropValue").length;i++)this.getData("cxPropValue")[i].hide=!0,l++;this.setData("listValues",this.getData("cxPropValue")),this.remainingValues=this.getData("cxPropValue").slice(o),l>0&&this.setData("showMore",l)}else this.getData("cxPropValue")&&!this.getData("cxPropClipMode")&&this.setData("listValues",this.getData("cxPropValue"))},hideTags:function(){var e=this;clearTimeout(this.hideTimeout),this.hideTimeout=setTimeout((function(){var t=document.getElementById("cxTagPopover");t&&t.remove(),e.$node.querySelector("ul").classList.remove("cxPropOnFocusTag")}),100)},resize:function(e){this.setValueFn(e)},resize1:function(e){var t=null!=e.cxPropClipMode?e.cxPropClipMode:this.getData("cxPropClipMode");if(this.getData("cxPropValue")&&t){document.documentMode||/Edge/.test(navigator.userAgent);var o=0,a=0,r=-1;document.createElement("canvas"),this.windowOuterWidth=window.outerWidth;var i=(e=e||{}).cxPropWidth?e.cxPropWidth:"230px";this.setData("cxPropWidth",i),i=i.split("px")[0],i-=105,(d=document.createElement("li")).classList.add("tagElementList","f13","dIB","cxAddedTags"),document.body.appendChild(d);for(var s=0;s<this.getData("cxPropValue").length&&t;s++){d.innerText=this.getData("cxPropValue")[s].name;var l=d.offsetWidth;if((o+=l+15)>i){if(1==a||t){r=s;break}o=l+17,a=1}}d.remove();var n=r,p=this.$node.querySelectorAll("li");if(this.hiddenElem<r&&this.hiddenElem>0||r<0)for(n<0&&(n=this.getData("cxPropValue").length),s=this.hiddenElem;s<n&&this.hiddenElem>=0;s++)p[s].style.display="";else for(s=r;s<this.getData("cxPropValue").length;s++)p[s].style.display="none";var c=this.$node.querySelector(".uline1");r<0?this.$node.querySelector(".moreTagOption")&&(this.$node.querySelector(".moreTagOption").style.display="none"):(this.$node.querySelector(".moreTagOption")&&(this.$node.querySelector(".moreTagOption").style.display=""),c&&(c.innerText=" "+(this.getData("cxPropValue").length-r)+" "+_cruxUtils.getI18n("crm.label.More"))),t?(this.remainingValues=this.getData("cxPropValue").slice(r),c&&(c.removeAttribute("click"),c.addEventListener("mouseover",this.mouseOverEvent),c.addEventListener("mouseleave",this.mouseLeaveEvent),c.removeEventListener("click",this.clickEvent))):c&&(c.removeAttribute("mouseover"),c.removeAttribute("mouseleave"),c.removeEventListener("mouseover",this.mouseOverEvent),c.removeEventListener("mouseleave",this.mouseLeaveEvent),c.addEventListener("click",this.clickEvent)),this.hiddenElem=r}else if(this.data.cxPropValue&&!t){var d=this.$node.querySelectorAll("li");for(s=0;s<d.length;s++)d[s].style.display="";var u=this.$node.querySelector(".moreTagOption");u&&(u.style.display="none")}},mouseOverFn:function(){var e=document.getElementById("cxTagPopover"),t=this.$node.querySelector("ul");t.classList.contains("cxPropOnFocusTag")||(clearTimeout(this.newTimer),this.newTimer=setTimeout(function(){t.classList.add("cxPropOnFocusTag"),e?(e.setData("remainingValues",this.remainingValues),e.querySelector("lyte-popover").setData("ltPropShow",!0)):Lyte.Component.render("crux-tag-popover",{remainingValues:this.remainingValues,id:"cxTagPopover"},"body")}.bind(this),20))},didConnect:function(){this.mouseOverEvent=this.mouseOverFn.bind(this),this.mouseLeaveEvent=this.hideTags.bind(this),this.clickEvent=this.clickFn.bind(this)},clickFn:function(){for(var e=this.$node.querySelectorAll(".tagElementList"),t=this.hideCount;t<e.length;t++)e[t].style.display="";this.$node.querySelector(".moreTagOption").style.display="none",this.findRowAndCallFixHeight(this.$node),this.getMethods("onShowMoreTags")&&this.executeMethod("onShowMoreTags"),this.hiddenElem=this.getData("cxPropValue").length,event.stopPropagation()},setValueFn:function(e){var t=0,o=!1;e&&(o=!0,this.setData("cxPropClipMode",null!=e.cxPropClipMode?e.cxPropClipMode:this.data.cxPropClipMode),this.setData("cxPropWidth",e.cxPropWidth?e.cxPropWidth:this.data.cxPropWidth));var a,r,i=[];o?r=this.$node.querySelectorAll(".tagElementList"):((a=document.createElement("li")).classList.add("tagElementList","f12","bR2","dIB","bdr1px","pL20"),document.body.appendChild(a));var s=0,l=!1,n=this.data.cxPropWidth;try{n=n.split("px")[0]}catch(e){n=230}this.data.cxPropClipMode&&1!=this.data.cxPropValue.length?n-=130:n-=60;for(var p=0,c=0;c<this.data.cxPropValue.length;c++){var d;l?(this.data.cxPropValue[c].hide=!0,o&&(r[c].style.display="none"),t++,i.push(this.data.cxPropValue[c])):(delete this.data.cxPropValue[c].hide,delete this.data.cxPropValue[c].showTooltip,delete this.data.cxPropValue[c].showTooltipWidth,o?(r[c].style.display="",r[c].querySelector("span").style.width="",r[c].setAttribute("lt-prop-title",""),r[c].querySelector("span").classList.remove("cruxTagTitle"),d=r[c].offsetWidth,d+=21):(a.innerText=this.data.cxPropValue[c].name,d=a.offsetWidth+15),(s+=d)+20>n?(this.data.cxPropClipMode?l=!0:s=0,this.data.cxPropClipMode&&c>0&&c==this.data.cxPropValue.length-1&&(n+=60),this.data.cxPropValue[c].showTooltip=!0,n-p<d-20&&(this.data.cxPropValue[c].showTooltipWidth=n-p-7+"px"),o&&n-p<d-20&&(r[c].setAttribute("lt-prop-title",r[c].innerText),r[c].querySelector("span").style.width=n-p-7+"px",r[c].querySelector("span").classList.add("cruxTagTitle")),p=0):p+=d)}o||a.remove(),this.setData("showMore",t),this.setData("listValues",this.data.cxPropValue),o&&(t>0?(this.$node.querySelector(".moreTagOption").style.display="",this.$node.querySelector(".uline1").innerText=" "+t+" "+_cruxUtils.getI18n("crm.label.More")):this.$node.querySelector(".moreTagOption").style.display="none"),this.remainingValues=i}},{mixins:["crux-element-validation"]}),Lyte.Component.register("crux-text-area-component",{_template:'<template tag-name="crux-text-area-component"><template is="if" value="{{lyteViewPort}}"><template case="true"><dummy-port-element></dummy-port-element> <div id="cruxLoadingElem" class="cxLoadOnViewElement"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxLoadOnViewLabel"> {{cxPropField[cxPropFieldKey]}} <div class="cxLoadOnViewLoader"></div> </div> </template></template> <div class="cxLoadOnViewValue"> {{cxPropValue}} <div class="cxLoadOnViewLoader"></div> </div> </div> <dummy-port-element></dummy-port-element></template><template case="false"> <template is="switch" value="{{cxPropFrom}}"><template case="view"><template is="if" value="{{cxPropValue}}"><template case="true"><pre id="{{cxPropId}}" class="proxima cxTextareaViewMode"><template is="for" items="{{displayArray}}" item="item" index="index"><template is="if" value="{{item.unescape}}"><template case="true">{{unescape(item.value)}}</template><template case="false">{{item}}</template></template></template><template is="if" value="{{showMore}}"><template case="true">... <a href="#" onclick="{{action(\'toggleShow\',false)}}" class="cxTextareaShowMore">{{cxPropShowMore}}</a></template><template case="false"><template is="if" value="{{showLess}}"><template case="true"> <a href="#" onclick="{{action(\'toggleShow\',true)}}" class="cxTextareaShowMore">{{cxPropShowLess}}</a></template></template></template></template></pre></template><template case="false"><template is="if" value="{{cxPropEmptyValue}}"><template case="true">{{cxPropEmptyValue}}</template></template></template></template></template><template case="create"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxElementLabel {{cxPropLabelClass}}"> {{cxPropField[cxPropFieldKey]}} <template is="if" value="{{cxPropInfoTooltip}}"><template case="true"> <span class="dIB vam cxInfoIcon" onmouseenter="{{action(\'showInfoTooltip\',this)}}"></span> <lyte-hovercard lt-prop-placement="topLeft" lt-prop-keep-alive="true" lt-prop-popover-wrapper-class="cxElementsHovercard" lt-prop-origin-elem=".cxCurrentHovercard" on-hovercard-hide="{{method(\'hideInfoTooltip\')}}"> <template is="registerYield" yield-name="hoverCardYield"> <lyte-hovercard-content class="cxElementsHoverCardContent"> {{cxPropInfoTooltip}} </lyte-hovercard-content> </template> </lyte-hovercard> </template></template> </div> </template></template> <div class="cxElementValue {{if(cxPropDisabled,\'cxElementDisabled\',\'\')}}"> <lyte-input lt-prop-name="{{cxPropName}}" id="{{cxPropId}}" lt-prop-title="{{cxPropTooltip}}" lt-prop-tooltip-config="{{cxPropTooltipConfig}}" lt-prop-tooltip-style="margin: 10px; font-size : 11px;" class="w100per {{if(ifEquals(cxPropAppearance,\'box\'),\'cxBoxInput\',\'cxFlatInput\')}} cxTextarea" lt-prop-type="textarea" lt-prop-disabled="{{cxPropDisabled}}" lt-prop-placeholder="{{cxPropPlaceholder}}" lt-prop-readonly="{{cxPropReadonly}}" lt-prop-value="{{lbind(cxPropValue)}}" lt-prop-maxlength="{{cxPropMaxlength}}" on-value-change="{{method(\'onChange\')}}" lt-prop-appearance="{{cxPropAppearance}}" data-zcqa="{{cxPropZcqa}}" lt-prop-autofocus="{{cxPropAutofocus}}" lt-prop-tab-index="{{cxPropTabIndex}}" lt-prop-text-area-resize="{{cxPropTextAreaResize}}" lt-prop-style="{{cxPropStyle}}" lt-prop-vertical="true" lt-prop-auto-update="{{cxPropEnableLbind}}" lt-prop-aria="{{cxPropAria}}" lt-prop-aria-attributes="{{cxPropAriaAttributes}}" lt-prop-tooltip-class="{{cxPropTooltipClass}}" lt-prop-update-delay="{{cxPropUpdateDelay}}" on-resize-end="{{method(\'onResizeEnd\')}}" onclick="{{action(\'onClickTextarea\')}}" onkeyup="{{action(\'onKeyup\')}}" lt-prop-wrapper-class="{{cxPropWrapperClass}}" lt-prop-class="{{cxPropInputClass}}"></lyte-input> <template is="if" value="{{isError}}"><template case="true"> <crux-error-message error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-field="{{cxPropField}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}"> <template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}" cx-field="{{cxPropField}}"></lyte-yield></template> </crux-error-message> </template></template> </div> </template></template> </template></template></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]},{type:"attr",position:[2,1]},{type:"if",position:[2,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]}]}},default:{}},{type:"text",position:[2,3,1]},{type:"componentDynamic",position:[4]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{view:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"attr",position:[0,0]},{type:"for",position:[0,0],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]},false:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}}]},{type:"attr",position:[0,1]},{type:"if",position:[0,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}}]}},default:{}}]},create:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"componentDynamic",position:[3,1]},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["lyteViewPort","cxPropValue","cxPropEmptyValue","cxPropFrom","cxPropDisabled","cxPropPlaceholder","cxPropClass","cxPropMaxlength","cxPropReadonly","cxPropZcqa","cxPropAppearance","cxPropErrorMessage","cxPropMaxcharacter","displayValue","showMore","showLess","cxPropField","cxPropFieldKey","cxPropId","cxPropName","showLess","cxPropClearErrorMessage","cxPropMaxHeight","cxPropDirection","cxPropLabelClass","lyteUnbound","cxPropTabIndex","cxPropTextAreaResize","cxPropStyle","cxPropTooltip","isError","cxPropErrorYield","cxPropInfoTooltip","cxPropExpandTextArea","cxPropEnableLbind","cxPropAria","cxPropAriaAttributes","cxPropTooltipConfig","cxPropTooltipClass","cxPropUpdateDelay","cxPropPreventCollapse","cxPropErrorZcqaPrefix","cxPropErrorZcqaSuffix","cxPropHighlightUrl","cxPropShowMore","cxPropShowLess","cxPropErrorClass","displayArray","cxPropWrapperClass","cxPropInputClass","cxPropErrorSpanClass"],data:function(){return{lyteViewPort:Lyte.attr("boolean",{default:!1}),cxPropValue:Lyte.attr("string"),cxPropEmptyValue:Lyte.attr("string",{default:""}),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropDisabled:Lyte.attr("boolean",{default:!1}),cxPropPlaceholder:Lyte.attr("string"),cxPropClass:Lyte.attr("string",{default:""}),cxPropMaxlength:Lyte.attr("number"),cxPropReadonly:Lyte.attr("boolean",{default:!1}),cxPropZcqa:Lyte.attr("string"),cxPropAppearance:Lyte.attr("string",{default:"flat"}),cxPropErrorMessage:Lyte.attr("string",{default:""}),cxPropMaxcharacter:Lyte.attr("number",{default:0}),displayValue:Lyte.attr("string"),showMore:Lyte.attr("boolean",{default:!1}),showLess:Lyte.attr("boolean",{default:!1}),cxPropField:Lyte.attr("object",{default:{}}),cxPropFieldKey:Lyte.attr("string",{default:""}),cxPropId:Lyte.attr("string",{default:""}),cxPropName:Lyte.attr("string",{default:""}),showLess:Lyte.attr("boolean",{default:!1}),cxPropClearErrorMessage:Lyte.attr("boolean",{default:!0}),cxPropMaxHeight:Lyte.attr("number",{default:354}),cxPropDirection:Lyte.attr("string",{default:"vertical"}),cxPropLabelClass:Lyte.attr("string",{default:""}),lyteUnbound:Lyte.attr("boolean",{default:!1}),cxPropTabIndex:Lyte.attr("string"),cxPropTextAreaResize:Lyte.attr("object",{default:{horizontal:!1,vertical:!0}}),cxPropStyle:Lyte.attr("string"),cxPropTooltip:Lyte.attr("string",{default:""}),isError:Lyte.attr("boolean",{default:!1}),cxPropErrorYield:Lyte.attr("boolean",{default:!1}),cxPropInfoTooltip:Lyte.attr("string",{default:""}),cxPropExpandTextArea:Lyte.attr("boolean",{default:!0}),cxPropEnableLbind:Lyte.attr("boolean",{default:!0}),cxPropAria:Lyte.attr("boolean",{default:!1}),cxPropAriaAttributes:Lyte.attr("object",{default:{}}),cxPropTooltipConfig:Lyte.attr("string",{default:'{"position": "followcursor", "appearance": "box"}'}),cxPropTooltipClass:Lyte.attr("string"),cxPropUpdateDelay:Lyte.attr("number",{default:250}),cxPropPreventCollapse:Lyte.attr("boolean",{default:!1}),cxPropErrorZcqaPrefix:Lyte.attr("string",{default:""}),cxPropErrorZcqaSuffix:Lyte.attr("string",{default:"Error"}),cxPropHighlightUrl:Lyte.attr("boolean",{default:!1}),cxPropShowMore:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.wf.summary.label.ShowInstantActions")}),cxPropShowLess:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.wf.summary.label.HideInstantActions")}),cxPropErrorClass:Lyte.attr("string"),displayArray:Lyte.attr("array"),cxPropWrapperClass:Lyte.attr("string"),cxPropInputClass:Lyte.attr("string"),cxPropErrorSpanClass:Lyte.attr("string")}},getValue:function(){return this.$node.querySelector("#cruxLoadingElem")?this.data.cxPropValue:this.$node.querySelector("textarea").value},validate:function(){return this.getData("cxPropField"),this.getData("cxPropValue")&&this.data.cxPropValue.trim()||this.validateMandatory(!0)?!(this.getData("cxPropValue")&&!this.validateLength(this.getData("cxPropValue"))||(this.setData("cxPropErrorMessage",""),0)):(this.$node.querySelector("lyte-input").focus(),!1)},methods:{onChange:function(){this.getData("cxPropClearErrorMessage")&&this.setData("cxPropErrorMessage",""),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getData("cxPropValue"))},hideInfoTooltip:function(){this.showHideInfoTooltip()},onResizeEnd:function(){this.resized=!0}},observeErrorMessage:function(){this.setData("isError",""!=this.getData("cxPropErrorMessage"))}.observes("cxPropErrorMessage").on("init"),actions:{toggleShow:function(e){this.setData({displayArray:e?this.splitText(this.data.cxPropValue.substring(0,this.data.cxPropMaxcharacter)):this.splitText(this.data.cxPropValue),showMore:e,showLess:!e}),e&&(this.getMethods("onShowMore")?this.executeMethod("onShowMore",this):this.$node.querySelector("a").scrollIntoView()),event.preventDefault()},showInfoTooltip:function(e){this.showHideInfoTooltip(e)},onClickTextarea:function(){this.increaseHeight()},onKeyup:function(){(event&&"Tab"!=event.key||!event)&&this.increaseHeight()}},expandTextarea:function(e,t){var o=this.getValue();if(!this.resized||!o){this.resized=!1;var a,r=document.createElement("span");r.innerText=o,document.body.appendChild(r),0==r.offsetHeight&&e&&"focus"==e.type?a=54:0==r.offsetHeight&&e&&"focusout"==e.type?a=34:t||(a=r.offsetHeight/18*18+54);var i=this.getData("cxPropMaxHeight"),s=a>=i?i:a,l=this.$node.querySelector("textarea"),n=getComputedStyle(l),p=s+(parseInt(n.paddingTop)+parseInt(n.paddingBottom))+(parseInt(n.borderBottomWidth)+parseInt(n.borderTopWidth));e&&"focusout"==e.type?this.$node.classList.remove("cxBigTextarea"):this.$node.classList.add("cxBigTextarea"),setTimeout(function(){this.$node.querySelector("lyte-input").style.height=p+2+"px",l.style.height=p+"px"}.bind(this),60),document.body.removeChild(r)}},observeValue:function(){if("view"==this.getData("cxPropFrom"))if(this.setData("showLess",!1),this.getData("cxPropValue")){var e=this.getData("cxPropValue"),t=this.getData("cxPropMaxcharacter");0!=t&&e.length>t?(this.setData("displayArray",this.splitText(this.data.cxPropValue.substring(0,t))),this.setData("showMore",!0)):(this.setData("displayArray",this.splitText(this.data.cxPropValue)),this.setData("showMore",!1))}else this.setData("showMore",!1);else"create"==this.data.cxPropFrom&&this.data.cxPropDisabled&&(this.resized=!0)}.observes("cxPropValue","cxPropFrom").on("init"),observeIsError:function(){"create"==this.getData("cxPropFrom")&&this.$node.querySelector("lyte-input")&&(this.getData("isError")?this.$node.querySelector("lyte-input").classList.add("cxErrorBox"):this.$node.querySelector("lyte-input").classList.remove("cxErrorBox"))}.observes("isError","lyteViewPort").on("didConnect"),observeMandatory:function(){this.$node.querySelector("lyte-input")&&"create"==this.getData("cxPropFrom")&&(this.getData("cxPropField").required?this.$node.querySelector("lyte-input").classList.add("mandatoryField"):this.$node.querySelector("lyte-input").classList.remove("mandatoryField"))}.observes("cxPropField.required","lyteViewPort").on("didConnect"),init:function(){this.getData("cxPropDisabled")&&!this.data.cxPropTooltip&&this.setData("cxPropTooltip",_cruxUtils.getI18n("crm.lable.read.only")),this.resized=!1},increaseHeight:function(){this.resized||(this.$node.querySelector("textarea").style.height="71px",this.$node.querySelector("textarea").addEventListener("transitionend",function e(){this.$node.querySelector("lyte-input").style.height="73px",this.$node.querySelector("textarea").removeEventListener("transitionend",e)}.bind(this)))},observeFrom:function(){"create"==this.data.cxPropFrom&&this.data.cxPropValue&&this.increaseHeight()}.observes("cxPropFrom","lyteViewPort").on("didConnect"),highlighUrlInText:function(e){return this.data.cxPropHighlightUrl?e?e.replace(/((https?|ftp)(:|&#x3a;)(\/\/|&#x2f;&#x2f;))((www\.){0,1}[a-zA-Z0-9-_]+(\.[a-z0-9]+)+)((:|&#x3a;)[0-9]*(\.[a-z0-9]+)*)*(((\/|&#x2f;)[^\s]*)*)|www\.([a-zA-Z0-9-_]+(\.[a-z0-9]+)+)((:|&#x3a;)[0-9]*(\.[a-z0-9]+)*)*(((\/|&#x2f;)[^\s]*)*)/g,(function(e){var t="";return-1===e.indexOf("http")&&-1===e.indexOf("ftp")&&(t="//"),'<a class="link" rel="noopener noreferrer" href="'+t+$ESAPI.encoder().encodeForHTMLAttribute(e)+'" target="_blank">'+$ESAPI.encoder().encodeForHTML(e)+"</a>"})):"":e},observeClass:function(e){if("create"==this.data.cxPropFrom){var t=$L("lyte-input",this.$node);if(!t.length)return;e&&e.oldValue&&t.removeClass(e.oldValue),this.data.cxPropClass&&t.addClass(this.data.cxPropClass)}}.observes("cxPropClass","lyteViewPort").on("didConnect"),getATag:function(e){var t="";return-1===e.indexOf("http")&&-1===e.indexOf("ftp")&&(t="//"),'<a class="link" rel="noopener noreferrer" href="'+t+$ESAPI.encoder().encodeForHTMLAttribute(e)+'" target="_blank">'+$ESAPI.encoder().encodeForHTML(e)+"</a>"},splitText:function(e){if(!this.data.cxPropHighlightUrl||!e)return[e];var t=/((https?|ftp)(:|&#x3a;)(\/\/|&#x2f;&#x2f;))((www\.){0,1}[a-zA-Z0-9-_]+(\.[a-z0-9]+)+)((:|&#x3a;)[0-9]*(\.[a-z0-9]+)*)*(((\/|&#x2f;)[^\s]*)*)|www\.([a-zA-Z0-9-_]+(\.[a-z0-9]+)+)((:|&#x3a;)[0-9]*(\.[a-z0-9]+)*)*(((\/|&#x2f;)[^\s]*)*)/g,o=e.match(t);if(!o)return[e];var a=e.replace(t,"crux-text-area-component-url");a=a.split("crux-text-area-component-url");for(var r=1,i=0;r<a.length;r+=2,i++)a.splice(r,0,{unescape:!0,value:this.getATag(o[i])});return a}},{mixins:["crux-element-validation"]}),Lyte.Component.register("crux-text-component",{_template:'<template tag-name="crux-text-component"><template is="if" value="{{lyteViewPort}}"><template case="true"><dummy-port-element></dummy-port-element> <div id="cruxLoadingElem" class="cxLoadOnViewElement"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxLoadOnViewLabel"> {{cxPropField[cxPropFieldKey]}} <div class="cxLoadOnViewLoader"></div> </div> </template></template> <div class="cxLoadOnViewValue"> {{cxPropValue}} <div class="cxLoadOnViewLoader"></div> </div> </div> <dummy-port-element></dummy-port-element></template><template case="false"> <template is="switch" value="{{cxPropFrom}}"><template case="view"> <template is="if" value="{{expHandlers(cxPropValue,\'!\')}}"><template case="true"><template is="if" value="{{cxPropEmptyValue}}"><template case="true">{{cxPropEmptyValue}}</template></template></template><template case="false"><template is="if" value="{{cxPropMaskingProperties}}"><template case="true">{{cruxMaskValue(cxPropValue,cxPropMaskingProperties)}}</template><template case="false">{{cxPropValue}}</template></template></template></template> </template><template case="criteria"></template><template case="filter"></template><template case="create"> <template is="if" value="{{expHandlers(expHandlers(cxPropFrom,\'===\',&quot;create&quot;),\'&amp;&amp;\',cxPropField[cxPropFieldKey])}}"><template case="true"> <div class="cxElementLabel {{cxPropLabelClass}}"> {{cxPropField[cxPropFieldKey]}} <template is="if" value="{{cxPropInfoTooltip}}"><template case="true"> <span class="dIB vam cxInfoIcon" onmouseenter="{{action(\'showInfoTooltip\',this)}}"></span> <lyte-hovercard lt-prop-placement="topLeft" lt-prop-keep-alive="true" lt-prop-popover-wrapper-class="cxElementsHovercard" lt-prop-origin-elem=".cxCurrentHovercard" on-hovercard-hide="{{method(\'hideInfoTooltip\')}}"> <template is="registerYield" yield-name="hoverCardYield"> <lyte-hovercard-content class="cxElementsHoverCardContent"> {{cxPropInfoTooltip}} </lyte-hovercard-content> </template> </lyte-hovercard> </template></template> </div> </template></template> <div class="cxElementValue {{if(cxPropDisabled,\'cxElementDisabled\',\'\')}}"> <template is="if" value="{{cxPropAutocompleteOptions.enable}}"><template case="true"> <div class="cxLookupComponent cxBoxWithRightIcon"> <div class="cxBoxLeftContent"> <lyte-autocomplete lt-prop-external-search="{{cxPropAutocompleteOptions.externalSearch}}" lt-prop-content="{{records}}" lt-prop-yield="{{cxPropAutocompleteOptions.yield}}" lt-prop-dropdown-height="250px" lt-prop-dropdown-class="cxLookupDropbox cxDropbox" lt-prop-min-length="{{cxPropAutocompleteOptions.minLength}}" on-ext-search="{{method(\'onExtSearchAutoComp\')}}" on-search="{{method(\'onSearchAutoComp\')}}" on-select="{{method(\'onSelectAutoComp\')}}" on-scroll="{{method(\'onScrollAutoComp\')}}" on-before-show="{{method(\'onBeforeOpenAutoComp\')}}" on-blur="{{method(\'onBlurAutoComp\')}}" lt-prop-appearance="{{cxPropAppearance}}" lt-prop-maxlength="{{cxPropMaxlength}}" after-render="{{method(\'afterRenderAutocomplete\')}}" lt-prop-method="{{cxPropAutocompleteOptions.method}}" lt-prop-label="name" lt-prop-value="{{cxPropValue}}" lt-prop-class="{{cxPropInputClass}}"> <template is="yield" yield-name="yield"> <lyte-drop-box> <lyte-drop-body class="cxVisibleLookup" style="{{if(ifEquals(records.length,0),\'display: none\',\'\')}}"> <template is="for" items="{{records}}" item="val" index="index"> <lyte-drop-item data-value="{{val[cxPropAutocompleteOptions.idField]}}" onmouseenter="{{action(\'showHideIcon1\',true,val)}}" onmouseleave="{{action(\'showHideIcon1\',false,val)}}"> <lyte-autocomplete-label> <span class="cxLookupDropboxLabel">{{val[cxPropAutocompleteOptions.displayField]}}</span> <span class="cxLookupInfoIcon {{if(val.cxPropShowIcon,\'cruxLookupPopover\')}}" onmouseenter="{{action(\'infoPop\',this,val,event)}}" onmouseleave="{{action(\'infoPop\',this,val,event)}}" style="{{if(val.cxPropShowIcon,\'visibility: visible;\',\'visibility: hidden\')}}"></span> </lyte-autocomplete-label> </lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-autocomplete> <div class="cxBoxSpinWrapper cxFlexCenter"> <span class="cxElementsLoaderBg" style="display: none;"></span> </div> </div> </div> </template><template case="false"> <lyte-input lt-prop-name="{{cxPropName}}" id="{{cxPropId}}" lt-prop-update-delay="{{defaultUndefined}}" lt-prop-title="{{cxPropTooltip}}" lt-prop-tooltip-config="{{cxPropTooltipConfig}}" lt-prop-tooltip-style="margin: 10px; font-size : 11px;" lt-prop-class="cxBorderBottom {{cxPropInputClass}}" class="w100per {{if(ifEquals(cxPropAppearance,\'box\'),\'cxBoxInput\',\'cxFlatInput\')}}" lt-prop-direction="{{cxPropDirection}}" lt-prop-wrapper-style="{{cxPropWrapperStyle}}" lt-prop-type="text" lt-prop-value="{{lbind(cxPropValue)}}" lt-prop-placeholder="{{cxPropPlaceholder}}" lt-prop-maxlength="{{cxPropMaxlength}}" lt-prop-disabled="{{cxPropDisabled}}" lt-prop-readonly="{{cxPropReadonly}}" data-zcqa="{{cxPropZcqa}}" on-value-change="{{method(\'inputValueChange\')}}" lt-prop-appearance="{{cxPropAppearance}}" lt-prop-tab-index="{{cxPropTabIndex}}" lt-prop-autofocus="{{cxPropAutofocus}}" lt-prop-autocomplete="{{cxPropAutocomplete}}" lt-prop-auto-update="{{cxPropEnableLbind}}" lt-prop-aria="{{cxPropAria}}" lt-prop-aria-attributes="{{cxPropAriaAttributes}}" lt-prop-tooltip-class="{{cxPropTooltipClass}}" lt-prop-wrapper-class="{{cxPropWrapperClass}}"></lyte-input> </template></template> <template is="if" value="{{isError}}"><template case="true"> <crux-error-message error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-field="{{cxPropField}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}"> <template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}" cx-field="{{cxPropField}}"></lyte-yield></template> </crux-error-message> </template></template> </div> </template></template> </template></template></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]},{type:"attr",position:[2,1]},{type:"if",position:[2,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]}]}},default:{}},{type:"text",position:[2,3,1]},{type:"componentDynamic",position:[4]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{view:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]},false:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}}]}},default:{}}]},criteria:{dynamicNodes:[],additional:{next:"filter"}},filter:{dynamicNodes:[],additional:{next:"create"}},create:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"registerYield",position:[1,1,1,1],dynamicNodes:[{type:"attr",position:[1,1],attr:{style:{name:"style",helperInfo:{name:"if",args:[{type:"helper",value:{name:"ifEquals",args:["records.length",0]}},"'display: none'","''"]}}}},{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,1,0]},{type:"attr",position:[1,1,3],attr:{style:{name:"style",helperInfo:{name:"if",args:["val.cxPropShowIcon","'visibility: visible;'","'visibility: hidden'"]}}}},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1,1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["lyteViewPort","cxPropValue","cxPropFrom","cxPropPlaceholder","cxPropField","cxPropMaxlength","cxPropDisabled","cxPropReadonly","cxPropWrapperStyle","cxPropClass","cxPropZcqa","cxPropIgnoreEmptyValue","cxPropAppearance","cxPropErrorMessage","cxPropDirection","cxPropFieldKey","cxPropId","cxPropName","cxPropClearErrorMessage","isError","cxPropTabIndex","lyteUnbound","cxPropLabelClass","cxPropEmptyValue","cxPropTooltip","defaultUndefined","cxPropErrorYield","cxPropInfoTooltip","cxPropAutocomplete","cxPropEnableLbind","cxPropAria","cxPropAriaAttributes","cxPropMaskingProperties","cxPropTooltipConfig","cxPropTooltipClass","cxPropImagePath","records","cxPropAutocompleteOptions","cxPropErrorZcqaPrefix","cxPropErrorZcqaSuffix","cxPropErrorClass","cxPropWrapperClass","cxPropInputClass","cxPropErrorSpanClass"],data:function(){return{lyteViewPort:Lyte.attr("boolean",{default:!1}),cxPropValue:Lyte.attr("string"),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropPlaceholder:Lyte.attr("string"),cxPropField:Lyte.attr("object",{default:{}}),cxPropMaxlength:Lyte.attr("number"),cxPropDisabled:Lyte.attr("boolean",{default:!1}),cxPropReadonly:Lyte.attr("boolean",{default:!1}),cxPropWrapperStyle:Lyte.attr("string"),cxPropClass:Lyte.attr("string",{default:""}),cxPropZcqa:Lyte.attr("string"),cxPropIgnoreEmptyValue:Lyte.attr("boolean",{default:!1}),cxPropAppearance:Lyte.attr("string",{default:"flat"}),cxPropErrorMessage:Lyte.attr("string",{default:""}),cxPropDirection:Lyte.attr("string",{default:"vertical"}),cxPropFieldKey:Lyte.attr("string",{default:""}),cxPropId:Lyte.attr("string",{default:""}),cxPropName:Lyte.attr("string",{default:""}),cxPropClearErrorMessage:Lyte.attr("boolean",{default:!0}),isError:Lyte.attr("boolean",{default:!1}),cxPropTabIndex:Lyte.attr("string"),lyteUnbound:Lyte.attr("boolean",{default:!1}),cxPropLabelClass:Lyte.attr("string",{default:""}),cxPropEmptyValue:Lyte.attr("string",{default:""}),cxPropTooltip:Lyte.attr("string",{default:""}),defaultUndefined:Lyte.attr("string"),cxPropErrorYield:Lyte.attr("boolean",{default:!1}),cxPropInfoTooltip:Lyte.attr("string",{default:""}),cxPropAutocomplete:Lyte.attr("string",{default:"on"}),cxPropEnableLbind:Lyte.attr("boolean",{default:!0}),cxPropAria:Lyte.attr("boolean",{default:!1}),cxPropAriaAttributes:Lyte.attr("object",{default:{}}),cxPropMaskingProperties:Lyte.attr("object"),cxPropTooltipConfig:Lyte.attr("string",{default:'{"position": "followcursor", "appearance": "box"}'}),cxPropTooltipClass:Lyte.attr("string"),cxPropImagePath:Lyte.attr("string",{default:"//img.zohocdn.com/crm/CRMClient/images"}),records:Lyte.attr("array"),cxPropAutocompleteOptions:Lyte.attr("object",{default:{},hideAttr:!0}),cxPropErrorZcqaPrefix:Lyte.attr("string",{default:""}),cxPropErrorZcqaSuffix:Lyte.attr("string",{default:"Error"}),cxPropErrorClass:Lyte.attr("string"),cxPropWrapperClass:Lyte.attr("string"),cxPropInputClass:Lyte.attr("string",{default:""}),cxPropErrorSpanClass:Lyte.attr("string")}},validate:function(){var e=this.getData("cxPropValue"),t=this.getData("cxPropField");return"create"==this.getData("cxPropFrom")?this.validateText(t,e):"filter"!=this.getData("cxPropFrom")||(e&&""!=e.trim()||this.getData("cxPropIgnoreEmptyValue"))&&!this.isEmoji(e)?"criteria"!=this.getData("cxPropFrom")||e&&""!=e.trim()?!(e&&e.replace(/^\s+/g,"").replace(/\s+$/g,"").indexOf("*")>-1&&(this.showAlert(_cruxUtils.getI18n("crm.alert.character.not.allowed","*")),this.$node.querySelector("input").focus(),1)):(this.showAlert(_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(t.field_label))),!1):(this.showAlert(_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(t.field_label))),this.$node.querySelector("input").focus(),!1)},getValue:function(){if(("criteria"==this.getData("cxPropFrom")||"filter"==this.getData("cxPropFrom"))&&this.getData("cxPropValue")){var e=this.getData("cxPropValue");return this.SplitWord(e)}return"create"==this.data.cxPropFrom&&this.data.cxPropAutocompleteOptions.enable&&this.$node.querySelector("lyte-autocomplete")?this.$node.querySelector("lyte-autocomplete").ltProp("value"):"string"==typeof this.data.cxPropValue?this.getData("cxPropValue").trim():this.getData("cxPropValue")},methods:{inputValueChange:function(e){this.getData("cxPropClearErrorMessage")&&this.setData("cxPropErrorMessage",""),e.newValue&&e.newValue.split(",").length>this.maxValuesForTextCond&&(this.showAlert(_cruxUtils.getI18n("crm.alert.maximum.text.values.contains",this.maxValuesForTextCond)),this.setData("cxPropValue",e.oldValue)),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue())},hideInfoTooltip:function(){this.showHideInfoTooltip()},onExtSearchAutoComp:function(e,t,o){this.pageIndex=1,this.searchText=e.trim(),this.scrollEnd=!1,this.onscroll=!1,this.makeRequest()},onSearchAutoComp:function(e){if(this.data.cxPropAutocompleteOptions.externalSearch)return!1;0==e.length&&this.$node.querySelector("lyte-autocomplete").toggle()},onSelectAutoComp:function(e,t,o){if(this.getData("cxPropClearErrorMessage")&&this.setData("cxPropErrorMessage",""),this.data.cxPropAutocompleteOptions.yield){for(var a=0;a<this.data.records.length;a++)if(this.data.records[a][this.data.cxPropAutocompleteOptions.idField]==e){this.setData("cxPropValue",this.data.records[a][this.data.cxPropAutocompleteOptions.displayField]),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.data.records[a]);break}}else this.setData("cxPropValue",e.name),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",e)},onScrollAutoComp:function(e){if(!this.scrollEnd&&this.data.cxPropAutocompleteOptions.externalSearch){var t=e.target;t.scrollHeight<=Math.ceil(t.offsetHeight)+Math.ceil(t.scrollTop)&&(this.pageIndex++,this.onscroll=!0,this.makeRequest())}},onBeforeOpenAutoComp:function(){if(null==this.data.records||0==this.data.records.length)return!1},onBlurAutoComp:function(){this.setData("cxPropValue",this.$node.querySelector("input").value),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.$node.querySelector("input").value)},afterRenderAutocomplete:function(){if(this.$node.querySelector("lyte-input")){if("box"==this.getData("cxPropAppearance")&&this.$node.querySelector("lyte-input").classList.add("cxBoxInput"),!this.data.cxPropAutocompleteOptions.yield){if(this.data.cxPropAutocompleteOptions.content.length&&!this.data.cxPropAutocompleteOptions.content[0].name)for(var e=0;e<this.data.cxPropAutocompleteOptions.content.length;e++)this.data.cxPropAutocompleteOptions.content[e]={name:this.data.cxPropAutocompleteOptions.content[e]};this.setData("records",this.data.cxPropAutocompleteOptions.content)}this.data.cxPropAutocompleteOptions.method||Lyte.objectUtils(this.data.cxPropAutocompleteOptions,"add","method","contains")}}},actions:{showInfoTooltip:function(e){this.showHideInfoTooltip(e)},infoPop:function(e,t,o){var a=document.getElementById("cruxLookupPopover");"mouseenter"==o.type?(this.entered=!0,a||(a=Lyte.Component.render("crux-lookup-popup",{id:"cruxLookupPopover",fieldMapping:this.data.cxPropAutocompleteOptions.fieldMapping},"body")),a.setData({show:!0,module:moduleRecordMapping[this.data.cxPropAutocompleteOptions.module],data:t})):(this.entered=!1,a.setData("show",!1))},showHideIcon1:function(e,t){this.entered||Lyte.objectUtils(t,"add","cxPropShowIcon",e)}},observeErrorMessage:function(){this.setData("isError",""!=this.getData("cxPropErrorMessage"))}.observes("cxPropErrorMessage").on("init"),maxValuesForTextCond:50,observeIsError:function(){"create"==this.getData("cxPropFrom")&&this.$node.querySelector("lyte-input")&&(this.getData("isError")?this.$node.querySelector("lyte-input").classList.add("cxErrorBox"):this.$node.querySelector("lyte-input")&&this.$node.querySelector("lyte-input").classList.remove("cxErrorBox"))}.observes("isError","lyteViewPort").on("didConnect"),observeMandatory:function(){this.$node.querySelector("lyte-input")&&"create"==this.getData("cxPropFrom")&&(this.data.cxPropAutocompleteOptions.enable?this.getData("cxPropField").required?this.$node.querySelector(".cxLookupComponent").classList.add("mandatoryField"):this.$node.querySelector(".cxLookupComponent").classList.remove("mandatoryField"):this.getData("cxPropField").required?this.$node.querySelector("lyte-input").classList.add("mandatoryField"):this.$node.querySelector("lyte-input").classList.remove("mandatoryField"))}.observes("cxPropField.required","lyteViewPort").on("didConnect"),init:function(){this.getData("cxPropDisabled")&&!this.data.cxPropTooltip&&this.setData("cxPropTooltip",_cruxUtils.getI18n("crm.lable.read.only")),"create"!=this.data.cxPropFrom&&(this.data.cxPropAutocomplete="off")},makeRequest:function(){var e=this.$node.querySelector(".cxElementsLoaderBg");e.style.display="",this.executeMethod("fetchData",this.searchText,this.pageIndex,this.data.cxPropField).then(function(t){t&&0!=t.length||(this.scrollEnd=!0,this.onscroll||this.setData("records",[]),t=[]),this.onscroll?Lyte.arrayUtils(this.data.records,"push",t):this.setData("records",t),e.style.display="none",this.data.cxPropValue&&this.$node.querySelector("lyte-dropdown").component.childComp&&this.$node.querySelector("lyte-dropdown").component.childComp.querySelector("[data-value='"+this.data.cxPropValue+"']")&&this.$node.querySelector("lyte-dropdown").component.childComp.querySelector("[data-value='"+this.data.cxPropValue+"']").setAttribute("selected",!0)}.bind(this),(function(){e.style.display="none"}))},ele:"lyte-input",observeClass:function(e){if("create"==this.data.cxPropFrom){var t=$L("lyte-input",this.$node);if(!t.length)return;e&&e.oldValue&&t.removeClass(e.oldValue),this.data.cxPropClass&&t.addClass(this.data.cxPropClass)}}.observes("cxPropClass","lyteViewPort").on("didConnect")},{mixins:["crux-element-validation","crux-filter-utils"]}),Lyte.Component.register("crux-role-component",{_template:'<template tag-name="crux-role-component"> <lyte-dropdown on-before-show="{{method(\'onBeforeShow\')}}" on-scroll="{{method(&quot;onBodyScroll&quot;)}}" lt-prop-yield="true" on-add="{{method(\'addToList\')}}" lt-prop-selected="{{dropdownSelected}}" on-remove="{{method(\'removeFromList\')}}" lt-prop-type="multisearch" lt-prop-tabindex="14" class="{{if(ifEquals(cxPropAppearance,\'flat\'),\'cxFlatDropdown\',\'cxBoxDropdown\')}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-button class="lyteMultipleSelect"> <template is="for" items="{{renderItems}}" item="selitem" index="indeval"> <li data-value="{{selitem.id}}"> <lyte-text class="lyteDropdownVisible" lt-prop-value="{{selitem.name}}"></lyte-text> <lyte-drop-remove class="lyteCloseIcon"></lyte-drop-remove> </li> </template> <li class="lyteMultiselectInput"> <lyte-search class="w100per" lt-prop-type="text" lt-prop-query-selector="{&quot;scope&quot;:&quot;.cxRoleDropBody{{cxPropId}}&quot;, &quot;target&quot;:&quot;lyte-drop-item:not([selected=\\&quot;true\\&quot;])&quot;, &quot;search&quot;:&quot;lyte-drop-item:not([selected=\\&quot;true\\&quot;])&quot;}" on-search="{{method(\'showNoResult\')}}"></lyte-search> </li> <template is="if" value="{{expHandlers(cxPropRequestModel,\'==\',\'role\')}}"><template case="true"> <span id="openRoleModal" class="cx_roleLookupIcon cx_roleIconPos" onclick="{{action(\'openRoleModal\')}}"></span> </template></template> </lyte-drop-button> <lyte-drop-box class="cxDropbox"> <lyte-drop-body class="cxRoleDropBody{{cxPropId}}"> <template is="if" value="{{showLoading}}"><template case="true"> <div class="cxRoleLoaderWrap aligncenter"> <span class="cxElementsLoaderBg cxRoleLoaderIcon"></span> </div> </template><template case="false"><template is="for" items="{{systemData}}" item="item" index="indeval"> <lyte-drop-item data-value="{{item.id}}" selected="{{if(cruxContains(selectedIds,item.id,selectedIds.length),true,false)}}"> {{item.name}} </lyte-drop-item> </template> <template is="if" value="{{expHandlers(noResult,\'||\',expHandlers(systemData.length,\'==\',renderItems.length))}}"><template case="true"> <div class="cxDropdownNoResult">{{cruxGetI18n(\'crm.label.no.options.found\')}}</div> </template></template> </template></template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> <lyte-modal lt-prop-offset="{&quot;top&quot;:&quot;0&quot;}" lt-prop-width="600px" lt-prop-wrapper-class="cxBoxModal cxRoleModalWrapper" on-close="{{method(\'onClose\')}}"> <template is="registerYield" yield-name="modal"> <lyte-modal-header>{{cruxGetI18n(\'crm.security.roles.list\')}}</lyte-modal-header> <lyte-modal-content> {{cruxGetI18n(\'crm.security.roles.lookup.info\')}} <lyte-tree lt-prop-data="{{modalContent}}" lt-prop-open-class="open" lt-prop-close-class="close"> <template is="registerYield" yield-name="content"> <lyte-tree-content lt-prop-title="{{if(cruxContains(selectedIds,listValue.id,selectedIds.length),cruxGetI18n(\'crm.role.already.selected\'),\'\')}}"> <lyte-tree-icon lyte-custom-icon="true"> <div class="collapseBox"> <div class="arrow"></div> </div> </lyte-tree-icon> <p class="treeValue {{if(cruxContains(selectedIds,listValue.id,selectedIds.length),\'pEvents\',\'\')}}" onclick="{{action(\'onSelectRole\',listValue.id)}}">{{listValue.name}}</p> </lyte-tree-content> </template> </lyte-tree> </lyte-modal-content> <lyte-modal-footer> <lyte-button onclick="{{action(\'closeModal\')}}" data-zcqa="cx_Role_Cancel"> <template is="registerYield" yield-name="text"> {{cruxGetI18n(\'crm.button.cancel\')}} </template> </lyte-button> </lyte-modal-footer> </template> </lyte-modal> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1,3]}]},{type:"attr",position:[1,3,1]},{type:"componentDynamic",position:[1,3,1]},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1]},{type:"attr",position:[3,1,1]},{type:"if",position:[3,1,1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"for",position:[0],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"attr",position:[2]},{type:"if",position:[2],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[3,1]},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]},{type:"text",position:[3,1]},{type:"attr",position:[3,3]},{type:"registerYield",position:[3,3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"text",position:[1,3,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3,3]},{type:"componentDynamic",position:[3]},{type:"attr",position:[5,1]},{type:"registerYield",position:[5,1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[5,1]},{type:"componentDynamic",position:[5]}]},{type:"componentDynamic",position:[3]}],_observedAttributes:["systemData","renderItems","cxPropValue","showLoading","noResult","cxPropId","cxPropAppearance","cxPropRequestModel","selectedIds","dropdownSelected"],data:function(){return{systemData:Lyte.attr("array",{default:[]}),renderItems:Lyte.attr("array",{default:[]}),cxPropValue:Lyte.attr("array"),showLoading:Lyte.attr("boolean",{default:!0}),noResult:Lyte.attr("boolean",{default:!1}),cxPropId:Lyte.attr("string",{default:""}),cxPropAppearance:Lyte.attr("string",{default:"flat"}),cxPropRequestModel:Lyte.attr("string",{default:"role"}),selectedIds:Lyte.attr("array",{default:[]}),dropdownSelected:Lyte.attr("string")}},methods:{addToList:function(e,t,o){this.$node.querySelector("lyte-search").setValue("");for(var a=this.getData("systemData"),r=0;r<a.length;r++)if(a[r].id==t){Lyte.arrayUtils(this.getData("renderItems"),"push",a[r]),Lyte.arrayUtils(this.data.selectedIds,"push",a[r].id);break}this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue()),this.setData("dropdownSelected",JSON.stringify(this.data.selectedIds))},removeFromList:function(e,t,o){this.$node.querySelector("lyte-search").setValue("");for(var a=0;a<this.getData("renderItems").length;a++)this.getData("renderItems")[a].id==t&&(Lyte.arrayUtils(this.getData("renderItems"),"removeAt",a,1),Lyte.arrayUtils(this.data.selectedIds,"removeAt",a,1));this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue()),this.setData("dropdownSelected",JSON.stringify(this.data.selectedIds))},onBeforeShow:function(){var e=this;if(this.getData("dataFetched")||store.findAll(this.data.cxPropRequestModel,!0,!0).then((function(t){e.setData("systemData",t),e.setData("dataFetched",!0),e.setData("showLoading",!1)})),"openRoleModal"==event.target.getAttribute("id"))return!1},showNoResult:function(e,t,o,a){this.setData("noResult",""!=a&&0==e.length)},onClose:function(e){e.setData("ltPropBindToBody",!1)}},actions:{openRoleModal:function(){this.$node.querySelector("lyte-dropdown").ltProp("show")&&this.$node.querySelector("lyte-dropdown").toggle(),this.$node.querySelector("lyte-modal").ltProp("show",!0)},onSelectRole:function(e){for(var t=0,o=0;o<this.getData("renderItems").length;o++)this.getData("renderItems")[o].id==e&&(t=1);0==t&&(Lyte.arrayUtils(this.getData("renderItems"),"push",store.peekRecord(this.data.cxPropRequestModel,e)),Lyte.arrayUtils(this.data.selectedIds,"push",e)),this.$node.querySelector("lyte-modal").ltProp("show",!1),this.setData("dropdownSelected",JSON.stringify(this.data.selectedIds))},closeModal:function(){this.$node.querySelector("lyte-modal").ltProp("show",!1)}},getValue:function(){for(var e=[],t=0;t<this.getData("renderItems").length;t++)e.push({id:this.getData("renderItems")[t].id,name:this.getData("renderItems")[t].name});return e},validate:function(){return 0!=this.getData("renderItems").length||(this.showAlert(_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(this.data.cxPropField.field_label))),!1)},setValue:function(){this.setData("selectedIds",[]),this.setData("renderItems",[]);for(var e=0;e<this.data.cxPropValue.length;e++)store.peekRecord(this.data.cxPropRequestModel,this.data.cxPropValue[e].id)&&(Lyte.arrayUtils(this.data.renderItems,"push",this.data.cxPropValue[e]),Lyte.arrayUtils(this.data.selectedIds,"push",this.data.cxPropValue[e].id))},observesValue:function(){this.data.cxPropField&&this.data.cxPropField.api_name.match(/profile/)?this.setData("cxPropRequestModel","profile"):this.setData("cxPropRequestModel","role");var e=this;this.getData("cxPropValue")&&(this.getData("dataFetched")?this.setValue():store.findAll(this.data.cxPropRequestModel,!0,!0).then((function(t){e.setData("systemData",t),e.setData("dataFetched",!0),e.setData("showLoading",!1),e.setValue()})))}.observes("cxPropValue.[]").on("init"),observesSystemData:function(){this.setData("modalContent",store.peekAll(this.data.cxPropRequestModel).filter((function(e){return"CEO"==e.name})))}.observes("systemData.[]")},{mixins:["crux-element-validation"]}),Lyte.Component.register("crux-twitter-component",{_template:'<template tag-name="crux-twitter-component"><template is="if" value="{{lyteViewPort}}"><template case="true"><dummy-port-element></dummy-port-element> <div id="cruxLoadingElem" class="cxLoadOnViewElement"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxLoadOnViewLabel"> {{cxPropField[cxPropFieldKey]}} <div class="cxLoadOnViewLoader"></div> </div> </template></template> <div class="cxLoadOnViewValue"> {{cxPropValue}} <div class="cxLoadOnViewLoader"></div> </div> </div> <dummy-port-element></dummy-port-element></template><template case="false"> <template is="switch" value="{{cxPropFrom}}"><template case="view"><template is="if" value="{{cxPropValue}}"><template case="true"> <template is="if" value="{{cxPropMaskingProperties}}"><template case="true">{{cruxMaskValue(cxPropValue,cxPropMaskingProperties)}} </template><template case="false"> <a id="{{cxPropId}}" data-zcqa="dummy" class="link" href="{{cruxRebrandProperty(\'TW_URL\')}}/{{cruxEncodeURL(cxPropValue)}}" target="_blank" onclick="{{action(\'stopPropagation\')}}">{{cruxEncodeHTML(cxPropValue)}}</a> </template></template> </template><template case="false"><template is="if" value="{{cxPropEmptyValue}}"><template case="true"> {{cxPropEmptyValue}} </template></template></template></template></template><template case="create"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxElementLabel {{cxPropLabelClass}}"> {{cxPropField[cxPropFieldKey]}} <template is="if" value="{{cxPropInfoTooltip}}"><template case="true"> <span class="dIB vam cxInfoIcon" onmouseenter="{{action(\'showInfoTooltip\',this)}}"></span> <lyte-hovercard lt-prop-placement="topLeft" lt-prop-keep-alive="true" lt-prop-popover-wrapper-class="cxElementsHovercard" lt-prop-origin-elem=".cxCurrentHovercard" on-hovercard-hide="{{method(\'hideInfoTooltip\')}}"> <template is="registerYield" yield-name="hoverCardYield"> <lyte-hovercard-content class="cxElementsHoverCardContent"> {{cxPropInfoTooltip}} </lyte-hovercard-content> </template> </lyte-hovercard> </template></template> </div> </template></template> <div class="cxElementValue cxTwitterInputWrapper {{if(cxPropDisabled,\'cxElementDisabled\',\'\')}}"> <lyte-input lt-prop-name="{{cxPropName}}" id="{{cxPropId}}" lt-prop-title="{{cxPropTooltip}}" lt-prop-tooltip-config="{{cxPropTooltipConfig}}" lt-prop-tooltip-style="margin: 10px; font-size : 11px;" class="w100per {{if(ifEquals(cxPropAppearance,\'box\'),\'cxBoxInput cxBoxInputInsideLabel\',\'cxFlatInput\')}}" lt-prop-type="text" lt-prop-value="{{lbind(cxPropValue)}}" lt-prop-placeholder="{{cxPropPlaceholder}}" lt-prop-maxlength="{{cxPropMaxlength}}" lt-prop-direction="horizontal" lt-prop-disabled="{{cxPropDisabled}}" lt-prop-readonly="{{cxPropReadonly}}" data-zcqa="{{cxPropZcqa}}" on-value-change="{{method(\'onChange\')}}" lt-prop-appearance="{{cxPropAppearance}}" lt-prop-tab-index="{{cxPropTabIndex}}" lt-prop-label="@" lt-prop-autocomplete="{{cxPropAutocomplete}}" lt-prop-auto-update="{{cxPropEnableLbind}}" lt-prop-aria="{{cxPropAria}}" lt-prop-aria-attributes="{{cxPropAriaAttributes}}" lt-prop-tooltip-class="{{cxPropTooltipClass}}" lt-prop-wrapper-class="{{cxPropWrapperClass}}" lt-prop-class="{{cxPropInputClass}}"></lyte-input> <template is="if" value="{{isError}}"><template case="true"> <crux-error-message error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-field="{{cxPropField}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}"><template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}" cx-field="{{cxPropField}}"></lyte-yield></template></crux-error-message> </template></template> </div> </template></template> </template></template></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]},{type:"attr",position:[2,1]},{type:"if",position:[2,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]}]}},default:{}},{type:"text",position:[2,3,1]},{type:"componentDynamic",position:[4]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{view:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]}},default:{}}]},create:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"componentDynamic",position:[3,1]},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,0],dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["lyteViewPort","cxPropValue","cxPropTwitterUrl","value","cxPropEmptyValue","cxPropFrom","cxPropPlaceholder","cxPropField","cxPropMaxlength","cxPropDisabled","cxPropReadonly","cxPropZcqa","isError","cxPropAppearance","cxPropErrorMessage","cxPropFieldKey","cxPropId","cxPropName","cxPropClearErrorMessage","cxPropDirection","cxPropLabelClass","cxPropErrorYield","cxPropTabIndex","lyteUnbound","cxPropClass","cxPropTooltip","cxPropInfoTooltip","cxPropAutocomplete","cxPropEnableLbind","cxPropAria","cxPropAriaAttributes","cxPropMaskingProperties","cxPropTooltipConfig","cxPropTooltipClass","cxPropErrorZcqaPrefix","cxPropErrorZcqaSuffix","cxPropErrorClass","cxPropWrapperClass","cxPropInputClass","cxPropErrorSpanClass"],data:function(){return{lyteViewPort:Lyte.attr("boolean",{default:!1}),cxPropValue:Lyte.attr("string"),cxPropTwitterUrl:Lyte.attr("string"),value:Lyte.attr("object"),cxPropEmptyValue:Lyte.attr("string",{default:""}),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropPlaceholder:Lyte.attr("string"),cxPropField:Lyte.attr("object",{default:{}}),cxPropMaxlength:Lyte.attr("number"),cxPropDisabled:Lyte.attr("boolean",{default:!1}),cxPropReadonly:Lyte.attr("boolean",{default:!1}),cxPropZcqa:Lyte.attr("string"),isError:Lyte.attr("boolean",{default:!1}),cxPropAppearance:Lyte.attr("string",{default:"flat"}),cxPropErrorMessage:Lyte.attr("string",{default:""}),cxPropFieldKey:Lyte.attr("string",{default:""}),cxPropId:Lyte.attr("string",{default:""}),cxPropName:Lyte.attr("string",{default:""}),cxPropClearErrorMessage:Lyte.attr("boolean",{default:!0}),cxPropDirection:Lyte.attr("string",{default:"vertical"}),cxPropLabelClass:Lyte.attr("string",{default:""}),cxPropErrorYield:Lyte.attr("boolean",{default:!1}),cxPropTabIndex:Lyte.attr("string"),lyteUnbound:Lyte.attr("boolean",{default:!1}),cxPropClass:Lyte.attr("string",{default:""}),cxPropTooltip:Lyte.attr("string",{default:""}),cxPropInfoTooltip:Lyte.attr("string",{default:""}),cxPropAutocomplete:Lyte.attr("string",{default:"on"}),cxPropEnableLbind:Lyte.attr("boolean",{default:!0}),cxPropAria:Lyte.attr("boolean",{default:!1}),cxPropAriaAttributes:Lyte.attr("object",{default:{}}),cxPropMaskingProperties:Lyte.attr("object"),cxPropTooltipConfig:Lyte.attr("string",{default:'{"position": "followcursor", "appearance": "box"}'}),cxPropTooltipClass:Lyte.attr("string"),cxPropErrorZcqaPrefix:Lyte.attr("string",{default:""}),cxPropErrorZcqaSuffix:Lyte.attr("string",{default:"Error"}),cxPropErrorClass:Lyte.attr("string"),cxPropWrapperClass:Lyte.attr("string"),cxPropInputClass:Lyte.attr("string"),cxPropErrorSpanClass:Lyte.attr("string")}},actions:{stopPropagation:function(){event.stopPropagation()},showInfoTooltip:function(e){this.showHideInfoTooltip(e)}},getValue:function(){return this.getData("cxPropValue")},validate:function(){var e=this.getData("cxPropField"),t=this.getData("cxPropValue");if(!t||!t.trim())return this.validateMandatory(!0)?(this.setData("cxPropErrorMessage",""),!0):(this.$node.querySelector("lyte-input")&&this.$node.querySelector("lyte-input").focus(),!1);if(t&&!this.validateLength(t))return!1;var o=this.isValidTwitter(t);return o?this.setData("cxPropErrorMessage",""):(this.getMethods("onError")?this.executeMethod("onError",this.errorCodes.ERR02,this):this.setData("cxPropErrorMessage",_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(e.field_label))),this.$node.querySelector("lyte-input")&&this.$node.querySelector("lyte-input").focus()),o},methods:{onChange:function(){this.getData("cxPropClearErrorMessage")&&this.setData("cxPropErrorMessage",""),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getData("cxPropValue"))},hideInfoTooltip:function(){this.showHideInfoTooltip()}},observeErrorMessage:function(){this.setData("isError",""!=this.getData("cxPropErrorMessage"))}.observes("cxPropErrorMessage").on("init"),observeIsError:function(){"create"==this.getData("cxPropFrom")&&this.$node.querySelector("lyte-input")&&(this.getData("isError")?this.$node.querySelector("lyte-input").classList.add("cxErrorBox"):this.$node.querySelector("lyte-input").classList.remove("cxErrorBox"))}.observes("isError","lyteViewPort").on("didConnect"),observeMandatory:function(){this.$node.querySelector("lyte-input")&&"create"==this.getData("cxPropFrom")&&(this.getData("cxPropField").required?this.$node.querySelector("lyte-input").classList.add("mandatoryField"):this.$node.querySelector("lyte-input").classList.remove("mandatoryField"))}.observes("cxPropField.required","lyteViewPort").on("didConnect"),init:function(){this.getData("cxPropDisabled")&&!this.data.cxPropTooltip&&this.setData("cxPropTooltip",_cruxUtils.getI18n("crm.lable.read.only"))},observeClass:function(e){if("create"==this.data.cxPropFrom){var t=$L("lyte-input",this.$node);if(!t.length)return;e&&e.oldValue&&t.removeClass(e.oldValue),this.data.cxPropClass&&t.addClass(this.data.cxPropClass)}}.observes("cxPropClass","lyteViewPort").on("didConnect")},{mixins:["crux-element-validation"]}),Lyte.Component.register("crux-user-component",{_template:'<template tag-name="crux-user-component"><template is="if" value="{{lyteViewPort}}"><template case="true"><dummy-port-element></dummy-port-element> <div id="cruxLoadingElem" class="cxLoadOnViewElement"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxLoadOnViewLabel"> {{cxPropField[cxPropFieldKey]}} <div class="cxLoadOnViewLoader"></div> </div> </template></template> <div class="cxLoadOnViewValue"> {{cxPropValue}} <div class="cxLoadOnViewLoader"></div> </div> </div> <dummy-port-element></dummy-port-element></template><template case="false"> <template is="switch" value="{{cxPropFrom}}"><template case="view"> <template is="if" value="{{cxPropValue}}"><template case="true"> <template is="if" value="{{cxPropMaskingProperties}}"><template case="true">{{cruxMaskValue(name,cxPropMaskingProperties)}} </template><template case="false"> <span class="lv_data_user cxViewUserValue vam dIB" onmouseover="{{action(\'showBCard\')}}" onmouseout="{{action(\'hideBCard\')}}" style="width: 100%"><lyte-text lt-prop-value="{{name}}" lt-prop-show="false"></lyte-text></span> </template></template> </template><template case="false">{{cxPropEmptyValue}}</template></template> </template><template case="criteria"></template><template case="filter"> <crux-user-dropdown cx-prop-class="{{cxPropClass}}" cx-prop-boundary="{{cxPropBoundary}}" cx-prop-type="{{cxPropType}}" cx-prop-searchable="true" cx-prop-selected-users="{{selectedUsers}}" cx-prop-no-user-label="{{if(ifEquals(cxPropType,\'multiple\'),if(cxPropPlaceholder,cxPropPlaceholder,cruxGetI18n(\'crm.label.select.user\')),\'\')}}" cx-prop-placeholder="{{if(ifEquals(cxPropType,\'single\'),if(cxPropPlaceholder,cxPropPlaceholder,cruxGetI18n(\'crm.label.select.user\')),\'\')}}" cx-prop-selected="{{selectedIds}}" cx-prop-zcqa="{{cxPropZcqa}}" on-user-add="{{method(\'onChange\',\'add\')}}" on-user-remove="{{method(\'onChange\',\'remove\')}}" cx-prop-login-user-required="{{cxPropLoginUser}}" cx-prop-filter-options="{{userFilter}}" cx-prop-selected-user="{{selectedUser}}" on-user-selected="{{method(\'onChange\',\'select\')}}" cx-prop-filter-selected="{{cxPropFilterSelected}}" cx-prop-filter-user-value="category" cx-prop-filter-system-value="id" cx-prop-appearance="{{cxPropAppearance}}" cx-prop-query-param="{{criteria}}" cx-prop-max-limit="{{cxPropMaxLimit}}" cx-prop-freeze="{{cxPropFreeze}}" on-user-before-show="{{method(\'beforeShowHandling\')}}" on-user-drop-limit-err="{{method(\'onUserDropLimitErr\')}}"></crux-user-dropdown> </template><template case="create"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxFieldLabel {{cxPropLabelClass}}"> {{cxPropField[cxPropFieldKey]}} <template is="if" value="{{cxPropInfoTooltip}}"><template case="true"> <span class="dIB vam cxInfoIcon" onmouseenter="{{action(\'showInfoTooltip\',this)}}"></span> <lyte-hovercard lt-prop-placement="topLeft" lt-prop-keep-alive="true" lt-prop-popover-wrapper-class="cxElementsHovercard" lt-prop-origin-elem=".cxCurrentHovercard" on-hovercard-hide="{{method(\'hideInfoTooltip\')}}"> <template is="registerYield" yield-name="hoverCardYield"> <lyte-hovercard-content class="cxElementsHoverCardContent"> {{cxPropInfoTooltip}} </lyte-hovercard-content> </template> </lyte-hovercard> </template></template> </div> </template></template> <div class="cxElementValue {{if(cxPropDisabled,\'cxElementDisabled\',\'\')}}"> <div class="cxUserComponent cxBoxWithRightIcon cxBoxContainsDropdown {{if(cxPropShowCloseIcon,\'cxUserCompWithClearIcon\')}}"> <div class="cxBoxLeftContent"> <crux-user-dropdown id="{{cxPropId}}" lt-prop-title="{{cxPropTooltip}}" lt-prop-tooltip-config="{{cxPropTooltipConfig}}" lt-prop-tooltip-style="margin: 10px;" cx-prop-type="{{cxPropType}}" cx-prop-searchable="true" cx-prop-selected-users="{{selectedUsers}}" cx-prop-no-user-label="{{cxPropNoUserLabel}}" cx-prop-placeholder="{{cxPropPlaceholder}}" cx-prop-selected="{{selectedIds}}" cx-prop-zcqa="{{cxPropZcqa}}" on-user-add="{{method(\'addcruxuserMultiple\')}}" on-user-remove="{{method(\'removecruxuserMultiple\')}}" cx-prop-login-user-required="{{cxPropLoginUser}}" cx-prop-selected-user="{{selectedUser}}" on-user-selected="{{method(\'onChange\',\'select\')}}" cx-prop-disabled="{{cxPropDisabled}}" cx-prop-tabindex="{{cxPropTabIndex}}" cx-prop-criteria="{{userCriteria}}" cx-prop-search-criteria="{{cxPropUserSearchCriteria}}" cx-prop-filter-options="{{cxPropFilterOptions}}" cx-prop-filter-user-value="category" cx-prop-filter-system-value="id" cx-prop-filterable="{{cxPropFilterable}}" on-user-show="{{method(\'createUserDropdownShow\')}}" cx-prop-filter-selected="{{cxPropFilterSelected}}" class="{{cxPropClass}} {{if(isError,\'cxErrorBox\')}} {{if(expHandlers(cxPropValue,\'&amp;&amp;\',cxPropValue.name),\'cxUserCompValueSelected\')}}" cx-prop-exclude="{{cxPropExclude}}" lt-prop-aria="{{cxPropAria}}" lt-prop-aria-attributes="{{cxPropAriaAttributes}}" cx-prop-max-limit="{{cxPropMaxLimit}}" lt-prop-tooltip-class="{{cxPropTooltipClass}}" cx-prop-query-param="{{criteria}}" cx-prop-freeze="{{cxPropFreeze}}"></crux-user-dropdown> <crux-user-lookup class="{{cxPropClass}}" style="display: none;" cx-prop-criteria="{{userCriteria}}" cx-prop-search-criteria="{{cxPropUserSearchCriteria}}" cx-prop-filterable="{{cxPropFilterable}}" cx-prop-filter-options="{{cxPropFilterOptions}}" on-assign="{{method(\'onLookupSelected\')}}" cx-prop-selected-id="{{selectedUserString}}" cx-prop-type="{{cxPropType}}" cx-prop-selected-ids="{{selectedUsersString}}" cx-prop-exclude="{{cxPropExclude}}" lt-prop-aria="{{cxPropAria}}" lt-prop-aria-attributes="{{cxPropAriaAttributes}}" cx-prop-max-limit="{{cxPropMaxLimit}}" cx-prop-filter-system-value="{{cxPropFilterSystemValue}}" cx-prop-filter-user-value="{{cxPropFilterUserValue}}" cx-prop-query-params="{{criteria}}" on-custom-request="method(\'customRequest\')" cx-prop-custom-request="{{cxPropCustomRequest}}"></crux-user-lookup> <template is="if" value="{{expHandlers(expHandlers(cxPropValue,\'&amp;&amp;\',cxPropValue.name),\'&amp;&amp;\',cxPropShowCloseIcon)}}"><template case="true"> <div class="cxBoxCloseIconWrap cxFlexCenter"> <div class="cxBoxCloseIcon cP {{cxPropClearIconClass}}" onclick="{{action(\'clearSelection\')}}"></div> </div> </template></template> </div> <div class="cxBoxRightIcon cxFlexCenter" data-zcqa="{{if(cxPropImgZcqa,cxPropImgZcqa,concat(\'img_lookup_\',cxPropZcqa))}}" onclick="{{action(\'showcruxuserLookup\')}}"> <div class="cxUserCompIcon {{if(cxPropDisabled,\'\',\'cP\')}} {{cxPropIconClass}}"></div> </div> </div> <template is="if" value="{{isError}}"><template case="true"> <crux-error-message error-message="{{cxPropErrorMessage}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-field="{{cxPropField}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" cx-prop-error-yield="{{cxPropErrorYield}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}"> <template is="registerYield" yield-name="errorYield"> <lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}" cx-field="{{cxPropField}}"></lyte-yield></template> </crux-error-message> </template></template> </div> </template></template> </template></template></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]},{type:"attr",position:[2,1]},{type:"if",position:[2,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]}]}},default:{}},{type:"text",position:[2,3,1]},{type:"componentDynamic",position:[4]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{view:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,0]},{type:"componentDynamic",position:[1,0]}]}},default:{}}]},false:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}}]},criteria:{dynamicNodes:[],additional:{next:"filter"}},filter:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},create:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"attr",position:[3,1,1,1]},{type:"componentDynamic",position:[3,1,1,1]},{type:"attr",position:[3,1,1,3]},{type:"componentDynamic",position:[3,1,1,3]},{type:"attr",position:[3,1,1,5]},{type:"if",position:[3,1,1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]}]}},default:{}},{type:"attr",position:[3,1,3]},{type:"attr",position:[3,1,3,1]},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["lyteViewPort","cxPropValue","cxPropIdSelector","cxPropNameSelector","cxPropFrom","cxPropEmptyValue","selectedUsers","selectedIds","cxPropZcqa","cxPropLoginUser","cxPropType","cxPropContactServerUrl","cxPropErrorMessage","filterOptions","cxPropIsBusinessCard","userFilter","cxPropField","cxPropFieldKey","selectedUser","cxPropId","userCriteria","cxPropUserSearchCriteria","cxPropFilterOptions","cxPropClearErrorMessage","cxPropFilterable","cxPropLabelClass","cxPropBoundary","userCriteria","cxPropDisableOnHoverForView","selectedUserString","selectedUsersString","cxPropTabIndex","lyteUnbound","cxPropClass","cxPropTooltip","isError","cxPropAppearance","cxPropErrorYield","cxPropInfoTooltip","cxPropPlaceholder","cxPropExclude","cxPropShowCloseIcon","cxPropImgZcqa","criteria","cxPropAria","cxPropAriaAttributes","cxPropMaxLimit","cxPropFilterSystemValue","cxPropFilterUserValue","cxPropShowBusCard","cxPropNoUserLabel","cxPropMaskingProperties","cxPropOpenDropdown","cxPropTooltipConfig","cxPropTooltipClass","cxPropDisabled","cxPropShowTooltip","cxPropShowBusinessCard","cxPropErrorZcqaPrefix","cxPropErrorZcqaSuffix","cxPropQueryParam","cxPropFilterSelected","cxPropReturnFullObjectOnGet","cxPropCustomRequest","cxPropErrorClass","cxPropFreeze","cxPropErrorSpanClass","cxPropClearIconClass","cxPropIconClass"],data:function(){return{lyteViewPort:Lyte.attr("boolean",{default:!1}),cxPropValue:Lyte.attr("object"),cxPropIdSelector:Lyte.attr("string",{default:"id"}),cxPropNameSelector:Lyte.attr("string",{default:"name"}),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropEmptyValue:Lyte.attr("string",{default:""}),selectedUsers:Lyte.attr("array",{default:[]}),selectedIds:Lyte.attr("string"),cxPropZcqa:Lyte.attr("string"),cxPropLoginUser:Lyte.attr("boolean",{default:!1}),cxPropType:Lyte.attr("string"),cxPropContactServerUrl:Lyte.attr("string",{default:"undefined"!=typeof crmConstants?crmConstants.contactsPhotoURL:""}),cxPropErrorMessage:Lyte.attr("string",{default:""}),filterOptions:Lyte.attr("array",{default:[{id:"ActiveUsers",category:"Active"}]}),cxPropIsBusinessCard:Lyte.attr("boolean"),userFilter:Lyte.attr("array",{default:[{id:"AllUsers",category:_cruxUtils.getI18n("crm.globalsearch.option.all")},{id:"ActiveUsers",category:_cruxUtils.getI18n("webform.status.Active")},{id:"DeactiveUsers",category:_cruxUtils.getI18n("Inactive")},{id:"NotConfirmedUsers",category:_cruxUtils.getI18n("crm.user.component.unconfirmed")}]}),cxPropField:Lyte.attr("object",{default:{}}),cxPropFieldKey:Lyte.attr("string",{default:""}),selectedUser:Lyte.attr("object",{default:{}}),cxPropId:Lyte.attr("string",{default:""}),userCriteria:Lyte.attr("string"),cxPropUserSearchCriteria:Lyte.attr("string"),cxPropFilterOptions:Lyte.attr("array",{default:[]}),cxPropClearErrorMessage:Lyte.attr("boolean",{default:!0}),cxPropFilterable:Lyte.attr("boolean",{default:!0}),cxPropLabelClass:Lyte.attr("string",{default:""}),cxPropBoundary:Lyte.attr("object",{default:{}}),userCriteria:Lyte.attr("string",{default:""}),cxPropDisableOnHoverForView:Lyte.attr("boolean",{default:!1}),selectedUserString:Lyte.attr("string",{default:""}),selectedUsersString:Lyte.attr("array",{default:[]}),cxPropTabIndex:Lyte.attr("string"),lyteUnbound:Lyte.attr("boolean",{default:!1}),cxPropClass:Lyte.attr("string",{default:""}),cxPropTooltip:Lyte.attr("string",{default:""}),isError:Lyte.attr("boolean",{default:!1}),cxPropAppearance:Lyte.attr("string",{default:"flat"}),cxPropErrorYield:Lyte.attr("boolean",{default:!1}),cxPropInfoTooltip:Lyte.attr("string",{default:""}),cxPropPlaceholder:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.label.select.user")}),cxPropExclude:Lyte.attr("array",{default:[]}),cxPropShowCloseIcon:Lyte.attr("boolean",{default:!1}),cxPropImgZcqa:Lyte.attr("string"),criteria:Lyte.attr("object",{default:{}}),cxPropAria:Lyte.attr("boolean",{default:!1}),cxPropAriaAttributes:Lyte.attr("object",{default:{}}),cxPropMaxLimit:Lyte.attr("number",{default:500}),cxPropFilterSystemValue:Lyte.attr("string",{default:"id"}),cxPropFilterUserValue:Lyte.attr("string",{default:"category"}),cxPropShowBusCard:Lyte.attr("boolean"),cxPropNoUserLabel:Lyte.attr("string"),cxPropMaskingProperties:Lyte.attr("object"),cxPropOpenDropdown:Lyte.attr("boolean",{default:!1}),cxPropTooltipConfig:Lyte.attr("string",{default:'{"position": "followcursor", "appearance": "box"}'}),cxPropTooltipClass:Lyte.attr("string"),cxPropDisabled:Lyte.attr("boolean",{default:!1}),cxPropShowTooltip:Lyte.attr("boolean",{default:!0}),cxPropShowBusinessCard:Lyte.attr("boolean",{default:!0}),cxPropErrorZcqaPrefix:Lyte.attr("string",{default:""}),cxPropErrorZcqaSuffix:Lyte.attr("string",{default:"Error"}),cxPropQueryParam:Lyte.attr("object",{default:{}}),cxPropFilterSelected:Lyte.attr("string",{default:"ActiveUsers"}),cxPropReturnFullObjectOnGet:Lyte.attr("boolean",{default:!1}),cxPropCustomRequest:Lyte.attr("boolean",{default:!1}),cxPropErrorClass:Lyte.attr("string"),cxPropFreeze:Lyte.attr("boolean",{default:!1}),cxPropErrorSpanClass:Lyte.attr("string"),cxPropClearIconClass:Lyte.attr("string"),cxPropIconClass:Lyte.attr("string",{default:"dropdown"})}},init:function(){var e=this.data.cxPropQueryParam;"create"!=this.getData("cxPropFrom")&&"view"!=this.data.cxPropFrom&&(this.data.cxPropType||(this.data.cxPropType="multiple"),this.getData("cxPropField")&&20==this.getData("cxPropField").ui_type?e.include_lite_users=!0:-1!=["filter","criteria"].indexOf(this.getData("cxPropFrom"))&&"undefined"!=typeof Crm&&Crm.userDetails&&Crm.userDetails.LITE&&Crm.userDetails.LITE.IS_LITE_USER&&this.setData("cxPropLoginUser",!1),"filter"===this.getData("cxPropFrom")&&Lyte.arrayUtils(this.getData("userFilter"),"push",{id:"DeletedUsers",category:_cruxUtils.getI18n("DeletedUser")})),this.setData("criteria",e)},actions:{showBCard:function(){if(!(this.multiUsers||"undefined"!=typeof Crm&&Crm.userDetails.CLIENT_ACCOUNT)||this.data.cxPropShowBusCard){var e=this.getData("cxPropValue");if(e&&this.data.cxPropShowBusinessCard){var t=e[this.getData("cxPropIdSelector")],o=document.getElementById("popoverTooltip");o||((o=document.createElement("crux-user-tooltip")).setAttribute("id","popoverTooltip"),this.$node.append(o)),o.setData({userId:t,usermetaInfo:e}),o.component.show(this.$node.querySelector("span"),!this.getData("cxPropIsBusinessCard"))}}},hideBCard:function(){if(!this.multiUsers){var e=document.getElementById("popoverTooltip");e&&e.component.hide()}},showcruxuserLookup:function(){if(this.data.cxPropDisabled)return!1;var e=this.$node.querySelector("crux-user-lookup");e&&e.component.setData("cxPropShow",!0)},clearSelection:function(){this.setData("userRecord",{}),this.setData("cxPropValue",{}),this.$node.querySelector("crux-user-dropdown").setData("cxPropSelected",""),this.$node.querySelector("lyte-dropdown").setData("ltPropDisplayValue","None"),this.getMethods("onClear")&&this.executeMethod("onClear")},showInfoTooltip:function(e){this.showHideInfoTooltip(e)}},getValue:function(){if(this.$node.querySelector("#cruxLoadingElem"))return this.data.cxPropValue&&this.data.cxPropValue.users?this.data.cxPropValue.users:this.data.cxPropValue;var e=this.$node.querySelector("crux-user-dropdown").cxProp("selectedUsers");return e&&e.length||"create"==this.data.cxPropFrom&&"multiple"==this.data.cxPropType?this.getValueToRet(e,!0):this.getValueToRet(this.$node.querySelector("crux-user-dropdown").cxProp("selectedUser"),!0)},valueObserver:function(){if("view"!=this.getData("cxPropFrom")){if(this.getData("cxPropValue"))if(this.getData("cxPropValue").hasOwnProperty("name"))"${CURRENTUSER}"==this.getData("cxPropValue").name?this.setData("selectedUser",{id:"${CURRENTUSER}",full_name:_cruxUtils.getI18n("current.logged.in.user")}):this.setData("selectedUser",Object.assign({full_name:this.data.cxPropValue.name},this.getValueToRet(this.data.cxPropValue)));else if(this.getData("cxPropValue").users&&this.getData("cxPropValue").users.hasOwnProperty("name"))"${CURRENTUSER}"==this.getData("cxPropValue").users.name?this.setData("selectedUsers",[{id:"${CURRENTUSER}",full_name:_cruxUtils.getI18n("current.logged.in.user")}]):this.setData("selectedUsers",[{id:this.getData("cxPropValue").users.id,full_name:this.getData("cxPropValue").users.name}]);else if(this.getData("cxPropValue").users){var e=[],t=!0,o=[];n=(n=store.peekRecord("field",this.data.cxPropField.id))||this.data.cxPropField;for(var a=0;a<this.getData("cxPropValue").users.length;a++)n&&this.data.cxPropValue.users[a][n.multiuserlookup?n.multiuserlookup.connectedlookup_apiname:n.api_name]?e.push({id:this.data.cxPropValue.users[a][n.multiuserlookup?n.multiuserlookup.connectedlookup_apiname:n.api_name].id,full_name:this.data.cxPropValue.users[a][n.multiuserlookup?n.multiuserlookup.connectedlookup_apiname:n.api_name].name}):this.getData("cxPropValue").users[a].name||"${CURRENTUSER}"==this.getData("cxPropValue").users[a].id||(t=!1,o.push(this.getData("cxPropValue").users[a].id)),"${CURRENTUSER}"==this.getData("cxPropValue").users[a].name||"${CURRENTUSER}"==this.getData("cxPropValue").users[a].id?e.push({id:"${CURRENTUSER}",full_name:_cruxUtils.getI18n("current.logged.in.user")}):this.getData("cxPropValue").users[a].name&&e.push({id:this.getData("cxPropValue").users[a].id,full_name:this.getData("cxPropValue").users[a].name});if(t)this.setData("selectedUsers",e);else{var r=this;store.findAll("user",{ids:o.join(",")}).then((function(){for(var t=0;t<r.getData("cxPropValue").users.length;t++)if("${CURRENTUSER}"!=r.getData("cxPropValue").users[t].id){var o=store.peekRecord("user",r.getData("cxPropValue").users[t].id);e.push({id:o.id,full_name:o.full_name})}r.setData("selectedUsers",e)}),(function(){r.setData("selectedUsers",e)}))}}else this.setData("selectedUser",{});if("create"==this.data.cxPropFrom){if(null==this.getData("cxPropType")&&(this.data.cxPropType="single"),this.getData("cxPropField")&&8==this.getData("cxPropField").ui_type){var i=this.getData("cxPropField").module[0]?this.getData("cxPropField").module[0].profiles:this.getData("cxPropField").module.profiles;if(i){var s=[],l=[];for(a=0;a<i.length;a++)s.push(i[a].id),l.push(i[a].name);this.setData("userCriteria",JSON.stringify([{comparator:"in",field:"profile.id",value:s}])),this.data.cxPropUserSearchCriteria?this.setData("cxPropUserSearchCriteria","("+this.data.cxPropUserSearchCriteria+"and(profile:in:"+l.join()+"))"):this.setData("cxPropUserSearchCriteria","(profile:in:"+l.join()+")")}}this.getData("cxPropDisabled")&&!this.data.cxPropTooltip&&this.setData("cxPropTooltip",_cruxUtils.getI18n("crm.lable.read.only"))}}else if(this.getData("cxPropValue"))if((e=this.getData("cxPropValue")).hasOwnProperty("id")||e.name&&"${CURRENTUSER}"==e.name)"${CURRENTUSER}"==e.name?(this.multiUsers=!0,this.setData("name",_cruxUtils.getI18n("current.logged.in.user"))):this.setData({id:e[this.getData("cxPropIdSelector")],name:e[this.getData("cxPropNameSelector")]});else{this.multiUsers=!0,e=e.users;var n,p=[];for(n=(n=store.peekRecord("field",this.data.cxPropField.id))||this.data.cxPropField,a=0;a<e.length;a++)p.push(e[a][n.multiuserlookup?n.multiuserlookup.connectedlookup_apiname:n.api_name][this.getData("cxPropNameSelector")]);this.setData("name",p.join(","))}}.observes("cxPropValue","cxPropFrom").on("init"),validate:function(){var e=this.getData("cxPropField");return"create"==this.getData("cxPropFrom")?this.validateMandatory(null==this.$node.querySelector("crux-user-dropdown")||0==this.$node.querySelector("crux-user-dropdown").length||0==Object.keys(this.$node.querySelector("crux-user-dropdown").cxProp("selectedUser")).length)?(this.setData("cxPropErrorMessage",""),!0):(this.setData("cxPropErrorMessage",_cruxUtils.getI18n("crm.field.empty.check",e.field_label)),!1):!this.$node.querySelector("crux-user-dropdown").cxProp("selectedUsers")||0!=this.$node.querySelector("crux-user-dropdown").cxProp("selectedUsers").length||"single"==this.data.cxPropType||(this.showAlert(_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(e.field_label))),!1)},methods:{onChange:function(e,t,o,a){var r;this.getData("cxPropClearErrorMessage")&&this.setData("cxPropErrorMessage",""),r="single"==this.getData("cxPropType")?this.getValueToRet(o):this.getValueToRet(a),this.setData("cxPropValue",r),this.getMethods("onValueChange")&&("create"==this.getData("cxPropFrom")?this.executeMethod("onValueChange",r,e):this.executeMethod("onValueChange",r))},createUserDropdownShow:function(e,t){$L(t.$node).closest(".cxUserComponent").addClass("cxBoxDropdownOpened")},onLookupSelected:function(e){this.getData("cxPropClearErrorMessage")&&this.setData("cxPropErrorMessage","");var t=this.getData("cxPropField");if(null!=t&&445==t.ui_type||"single"!=this.getData("cxPropType"))this.setData("selectedUsers",e);else{var o=this.$node.querySelector("crux-user-lookup");o&&o.setData("cxPropSelectedId",e.id);var a=this.$node.querySelector("crux-user-dropdown");a&&a.setData("cxPropSelectedUser",e),this.setData("userRecord",e)}this.setData("cxPropValue",this.getValue()),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue(),"add")},addcruxuserMultiple:function(e,t,o){this.getData("cxPropClearErrorMessage")&&this.setData("cxPropErrorMessage",""),this.setData("selectedUsers",o),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue(),"add")},removecruxuserMultiple:function(e,t,o){this.getData("cxPropClearErrorMessage")&&this.setData("cxPropErrorMessage",""),this.setData("selectedUsers",o),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue(),"remove")},hideInfoTooltip:function(){this.showHideInfoTooltip()},customRequest:function(){if(this.getMethods("onCustomRequest"))return this.executeMethod("onCustomRequest",...arguments)},beforeShowHandling:function(){this.getMethods("onBeforeShow")&&this.executeMethod("onBeforeShow",arguments[0],arguments[1])},onUserDropLimitErr:function(){this.getMethods("maxUserDropLimitErr")&&this.executeMethod("maxUserDropLimitErr")}},observeErrorMessage:function(){this.setData("isError",""!=this.getData("cxPropErrorMessage"));var e=$L(this.$node).find(".cxBoxWithRightIcon");this.getData("isError")?e.addClass("cxErrorBoxWithRightIcon"):e.removeClass("cxErrorBoxWithRightIcon")}.observes("cxPropErrorMessage"),getValueToRet:function(e,t){if(Array.isArray(e)){for(var o=[],a=0;a<e.length;a++)"${CURRENTUSER}"==e[a].id?o.push({name:e[a].id}):o.push({id:e[a].id,name:e[a].full_name});return o}return"${CURRENTUSER}"==e.id?{name:e.id}:e.id?this.data.cxPropReturnFullObjectOnGet?Object.assign(e,{name:e.full_name}):{id:e.id,name:e.full_name}:void 0},binduserLookup_multiple:function(e,t){var o=this.$node.querySelector("crux-user-dropdown");if(o){var a=o.component.getData("cxPropSelectedUsers"),r=[];if(a.forEach((function(e){r.push(e.id)})),"add"==t)r.push(e.id);else{var i=r.indexOf(e.id);Lyte.arrayUtils(r,"removeAt",i,1)}r&&this.setData("userRecordids",r)}},observeSelectedUser:function(){var e=this.getData("selectedUser");if(0==Object.keys(e).length)if(this.getData("selectedUsers")&&this.getData("selectedUsers").length>0){var t=this.getData("selectedUsers").map((function(e){return e.id}));this.setData("selectedUsersString",t)}else this.setData("selectedUserString",""),this.setData("selectedUsersString",[]);else this.setData("selectedUserString",e.id)}.observes("selectedUser","selectedUsers").on("init"),observeMandatory:function(){this.$node.querySelector(".cxUserComponent")&&"create"==this.getData("cxPropFrom")&&(this.getData("cxPropField").required?this.$node.querySelector(".cxUserComponent").classList.add("mandatoryField"):this.$node.querySelector(".cxUserComponent").classList.remove("mandatoryField"))}.observes("cxPropField.required","lyteViewPort").on("didConnect"),openDropdownObserver:function(){this.getData("cxPropOpenDropdown")&&setTimeout(function(){this.$node.querySelector("lyte-dropdown").open()}.bind(this),100)}.observes("cxPropOpenDropdown").on("didConnect"),didConnect:function(){if("create"==this.data.cxPropFrom&&document.body.addEventListener("click",this.removeFocus.bind(this)),this.$node.querySelector("crux-user-dropdown")&&this.data.cxPropCustomRequest){var e=this;this.$node.querySelector("crux-user-dropdown").setMethods({onCustomUserRequest:function(){e.executeMethod("onCustomRequest",...arguments)}})}},removeFocus:function(){var e=this.$node?this.$node.querySelector(".cxUserComponent"):null;e&&!e.querySelector("lyte-dropdown").getData("ltPropIsOpen")&&e.classList.remove("cxBoxDropdownOpened")},didDestroy:function(){"create"==this.data.cxPropFrom&&document.body.removeEventListener("click",this.removeFocus.bind(this))}},{mixins:["crux-element-validation"]}),Lyte.Component.register("crux-user-tooltip",{_template:'<template tag-name="crux-user-tooltip"> <lyte-popover lt-prop-origin-elem="{{originElem}}" lt-prop-show-close-button="false" lt-prop-freeze="false" lt-prop-scrollable="false" lt-prop-wrapper-class="cxInfoPopover" lt-prop-type="{{toolTipType}}" on-before-show="{{method(\'showPopover\')}}" lt-prop-duration="0" lt-prop-show="{{show}}" lt-prop-max-width="500px" lt-prop-content-padding="15px 10px" lt-prop-placement="{{placement}}"> <template is="registerYield" yield-name="popover"> <lyte-popover-content class="cxUserbcpopup"> <div class="crm-font-regular"> <template is="if" value="{{expHandlers(userData.status,\'===\',\'deleted\')}}"><template case="true"> <div class="p10 pT2 pB15 cxRedCol f14">{{cruxGetI18n(\'crm.user.deleted\')}}</div> </template></template> <template is="if" value="{{expHandlers(userData.status,\'===\',\'closed\')}}"><template case="true"> <div class="p10 pT2 pB15 cxRedCol f14">{{cruxGetI18n(\'crm.account.closed\')}}</div> </template></template> <div class="cxUpSpace"> <div class="tcell vat pT2"> <img class="cxUpSize vam" src="{{getCruxUsrImgUrlByZuid(userData.zuid)}}"> </div> <div class="tcell pL10 vam"> <div class="{{if(clientUser,\'\',\'cP\')}} dIB f15 mB2 color_2 wB" data-zcqa="cxUserName" onclick="{{action(\'openUserPage\')}}">{{userData.full_name}}</div> <template is="if" value="{{expHandlers(userData.role,\'&amp;&amp;\',userData.profile)}}"><template case="true"> <div class="f12 color_5 wB" data-zcqa="cxUserProf">{{userData.role.name}}, {{userData.profile.name}}</div> </template></template> </div> </div> <div class="cxUserbcInfo f13"> <template is="if" value="{{userData.email}}"><template case="true"> <div class="pT5 pB5"> <div class="w20 tcell aligncenter"> <span class="dIB cxEmailIcon vam"></span> </div> <span class="tcell pL10 wB" data-zcqa="cxUserMail"> <a class="cxMailLnk color_2" href="mailto:{{userData.email}}">{{userData.email}}</a> </span> </div> </template></template><template is="if" value="{{userData.phone}}"><template case="true"> <div class="pT5 pB5"> <div class="w20 tcell aligncenter vam pT2"> <span class="dIB cxPhoneIcon"></span> </div> <span class="tcell pL10 color_2 vam wB">{{userData.phone}}</span> </div> </template></template><template is="if" value="{{userData.mobile}}"><template case="true"> <div class="pT5 pB5"> <div class="w20 tcell aligncenter"> <span class="dIB cxMobileIcon vam"></span> </div> <span class="tcell pL10 color_2 vam wB">{{userData.mobile}}</span> </div> </template></template> </div> <template is="if" value="{{expHandlers(expHandlers(isChatEnabled,\'&amp;&amp;\',expHandlers(isCurrentUser,\'!\')),\'&amp;&amp;\',userData.zuid)}}"><template case="true"> <div class="cxDashBorder m10"></div> <div id="actionLayer" class="clearFix mL10"> <div class="cxBcActionIcons" lt-prop-title="{{cruxGetI18n(\'crm.start.chat\')}}" lt-prop-tooltip-config="{&quot;position&quot;:&quot;top&quot;}" onclick="{{action(\'chat\')}}" data-zcqa="cxUserChat"> <span class="cxBcChatIcon dIB"></span> </div> <div class="cxBcActionIcons" lt-prop-title="{{cruxGetI18n(\'crm.start.call\')}}" lt-prop-tooltip-config="{&quot;position&quot;:&quot;top&quot;}" onclick="{{action(\'call\')}}" data-zcqa="cxUserAudioCall"> <span class="cxBcCallIcon dIB"></span> </div> <div class="cxBcActionIcons" lt-prop-title="{{cruxGetI18n(\'crm.start.video.call\')}}" lt-prop-tooltip-config="{&quot;position&quot;:&quot;top&quot;}" onclick="{{action(\'videoCall\')}}" data-zcqa="cxUserVideoCall"> <span class="cxVideoCallIcon dIB"></span> </div> </div> </template></template> </div> </lyte-popover-content> </template> </lyte-popover> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,1,3]},{type:"if",position:[1,1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,1,5,1,1]},{type:"attr",position:[1,1,5,3,1]},{type:"text",position:[1,1,5,3,1,0]},{type:"attr",position:[1,1,5,3,3]},{type:"if",position:[1,1,5,3,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"text",position:[1,2]}]}},default:{}},{type:"attr",position:[1,1,7,1]},{type:"if",position:[1,1,7,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,3,1]},{type:"text",position:[1,3,1,0]}]}},default:{}},{type:"attr",position:[1,1,7,2]},{type:"if",position:[1,1,7,2],cases:{true:{dynamicNodes:[{type:"text",position:[1,3,0]}]}},default:{}},{type:"attr",position:[1,1,7,3]},{type:"if",position:[1,1,7,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,3,0]}]}},default:{}},{type:"attr",position:[1,1,9]},{type:"if",position:[1,1,9],cases:{true:{dynamicNodes:[{type:"attr",position:[3,1]},{type:"attr",position:[3,3]},{type:"attr",position:[3,5]}]}},default:{}},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}],_observedAttributes:["originElem","originelemRef","toolTipType","show","userId","userData","usermetaInfo","isCurrentUser","isChatEnabled","inPopover"],data:function(){return{originElem:Lyte.attr("string"),originelemRef:Lyte.attr("string"),toolTipType:Lyte.attr("string"),show:Lyte.attr("boolean",{default:!1}),userId:Lyte.attr("string"),userData:Lyte.attr("object"),usermetaInfo:Lyte.attr("object",{default:{}}),isCurrentUser:Lyte.attr("boolean",{default:!1}),isChatEnabled:Lyte.attr("boolean",{default:!1}),inPopover:Lyte.attr("boolean",{default:!1})}},methods:{showPopover:function(){var e=this,t=this.getData("userId"),o=store.peekRecord("user",t);if(null==o)return store.findRecord("user",t,{},!1,!0,{tempApiVersion:"V2.1"}).then(function(o){if(!o||o&&!Object.keys(o).length){var a=e.getData("usermetaInfo");a&&a.name?(a.full_name=a.name,delete a.name):(a={}).full_name="PORTAL USER",a.id=t,a.client_user=!0,store.pushPayload("user",a)}this.setData("show",!0)}.bind(this)),this.setData("show",!1),!1;this.setData("isChatEnabled","undefined"!=typeof crmConstants&&crmConstants.isCliqEnabled),this.setData("isCurrentUser","undefined"!=typeof Crm&&t==Crm.userDetails.USER_ID),this.setData("userData",o),this.setData("clientUser",o.client_user)}},actions:{openUserPage:function(){this.getData("clientuser")||"undefined"!=typeof Crm&&Crm.userDetails.CLIENT_ACCOUNT||Crm.getCrmBasePath()&&-1!=Crm.getCrmBasePath().indexOf("crm")&&window.open(Crm.getCrmBasePath()+"/settings/users/"+this.getData("userId"),"_blank")},chat:function(){WebMessanger.chat(this.getData("userData").zuid)},call:function(){WebMessanger.startAudioCall(this.getData("userData").zuid)},videoCall:function(){WebMessanger.startVideoCall(this.getData("userData").zuid)}},show:function(e,t){if(clearTimeout(this.hideTimeout),e.isSameNode(this.getData("originElemRef"))||this.setData("show",!1),this.setOriginElem(e),this.setData("originElem",".userBcOrigin"),t){var o=e.getBoundingClientRect().x,a=window._lyteUiUtils&&window._lyteUiUtils.getRTL()?["right","left"]:["left","right"];t=a[0],(o-350<=0||o+e.offsetWidth+350<window.innerWidth)&&(t=a[1]),this.setData("placement",t),this.setData("toolTipType","callout")}else this.setData("toolTipType","box"),this.setData("placement",void 0);var r=this;this.hideTimeout=setTimeout((function(){if(r.setData("show",!0),!r.getData("listenersAdded")){var e=document.querySelector(".cxInfoPopover .lytePopover");e.addEventListener("mouseleave",r._leaveFunc),e.addEventListener("mouseenter",r._enterFunc),r.setData("listenersAdded",!0)}}),300)},hide:function(){var e=this;clearTimeout(this.hideTimeout),this.hideTimeout=setTimeout((function(){e.removeOriginElem(),e.setData("show",!1)}),300)},setOriginElem:function(e){this.removeOriginElem(),e.classList.add("userBcOrigin"),this.setData("originElemRef",e)},removeOriginElem:function(){for(var e=document.getElementsByClassName("userBcOrigin"),t=e.length,o=0;o<t;o++)e[0].classList.remove("userBcOrigin");this.setData("originElemRef",void 0)},_leaveFunc:function(){var e=document.getElementsByTagName("crux-user-tooltip")[0].component;e.setData("inPopover",!1),e.hide()},_enterFunc:function(){var e=document.getElementsByTagName("crux-user-tooltip")[0].component;clearTimeout(e.hideTimeout),e.setData("inPopover",!0),e.setData("show",!0)}}),Lyte.Component.registerHelper("getCruxUsrImgUrlByZuid",(function(e){return"undefined"!=typeof RebrandLinkUtil?"//"+RebrandLinkUtil.getProperty("CONTACTS_URL")+"/file?ID="+e+"&fs=thumb":""})),Lyte.Component.register("crux-website-component",{_template:'<template tag-name="crux-website-component"><template is="if" value="{{lyteViewPort}}"><template case="true"><dummy-port-element></dummy-port-element> <div id="cruxLoadingElem" class="cxLoadOnViewElement"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxLoadOnViewLabel"> {{cxPropField[cxPropFieldKey]}} <div class="cxLoadOnViewLoader"></div> </div> </template></template> <div class="cxLoadOnViewValue"> {{cxPropValue}} <div class="cxLoadOnViewLoader"></div> </div> </div> <dummy-port-element></dummy-port-element></template><template case="false"> <template is="switch" value="{{cxPropFrom}}"><template case="view"> <template is="if" value="{{cxPropValue}}"><template case="true"> <template is="if" value="{{cxPropMaskingProperties}}"><template case="true">{{cruxMaskValue(cxPropValue,cxPropMaskingProperties)}} </template><template case="false"><a class="link" href="{{href}}" target="_blank" onclick="{{action(\'stopPropagation\')}}">{{cxPropValue}}</a></template></template> </template><template case="false"><template is="if" value="{{cxPropEmptyValue}}"><template case="true">{{cxPropEmptyValue}}</template></template></template></template></template><template case="create"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxElementLabel {{cxPropLabelClass}}"> {{cxPropField[cxPropFieldKey]}} <template is="if" value="{{cxPropInfoTooltip}}"><template case="true"> <span class="dIB vam cxInfoIcon" onmouseenter="{{action(\'showInfoTooltip\',this)}}"></span> <lyte-hovercard lt-prop-placement="topLeft" lt-prop-keep-alive="true" lt-prop-popover-wrapper-class="cxElementsHovercard" lt-prop-origin-elem=".cxCurrentHovercard" on-hovercard-hide="{{method(\'hideInfoTooltip\')}}"> <template is="registerYield" yield-name="hoverCardYield"> <lyte-hovercard-content class="cxElementsHoverCardContent"> {{cxPropInfoTooltip}} </lyte-hovercard-content> </template> </lyte-hovercard> </template></template> </div> </template></template> <div class="cxElementValue {{if(cxPropDisabled,\'cxElementDisabled\',\'\')}}"> <lyte-input lt-prop-name="{{cxPropName}}" id="{{cxPropId}}" lt-prop-title="{{cxPropTooltip}}" lt-prop-tooltip-config="{{cxPropTooltipConfig}}" lt-prop-tooltip-style="margin: 10px; font-size : 11px;" lt-prop-class="cxBorderBottom {{cxPropInputClass}}" class="w100per {{if(ifEquals(cxPropAppearance,\'box\'),\'cxBoxInput\',\'cxFlatInput\')}}" lt-prop-type="text" lt-prop-value="{{lbind(cxPropValue)}}" lt-prop-maxlength="{{cxPropMaxlength}}" lt-prop-direction="{{cxPropDirection}}" lt-prop-placeholder="{{cxPropPlaceholder}}" lt-prop-disabled="{{cxPropDisabled}}" lt-prop-readonly="{{cxPropReadonly}}" on-value-change="{{method(\'onChange\')}}" lt-prop-appearance="{{cxPropAppearance}}" data-zcqa="{{cxPropZcqa}}" lt-prop-tab-index="{{cxPropTabIndex}}" lt-prop-autofocus="{{cxPropAutofocus}}" lt-prop-autocomplete="{{cxPropAutocomplete}}" lt-prop-auto-update="{{cxPropEnableLbind}}" lt-prop-aria="{{cxPropAria}}" lt-prop-aria-attributes="{{cxPropAriaAttributes}}" lt-prop-tooltip-class="{{cxPropTooltipClass}}" lt-prop-wrapper-class="{{cxPropWrapperClass}}"></lyte-input> <template is="if" value="{{isError}}"><template case="true"> <crux-error-message error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-field="{{cxPropField}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}"> <template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}" cx-field="{{cxPropField}}"></lyte-yield></template> </crux-error-message> </template></template> </div> </template></template> </template></template></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]},{type:"attr",position:[2,1]},{type:"if",position:[2,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]}]}},default:{}},{type:"text",position:[2,3,1]},{type:"componentDynamic",position:[4]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{view:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"text",position:[0,0]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}}]}},default:{}}]},create:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"componentDynamic",position:[3,1]},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["lyteViewPort","cxPropValue","cxPropEmptyValue","cxPropFrom","cxPropLabel","cxPropMaximumLength","cxPropPlaceholder","cxPropDisabled","cxPropReadonly","isError","cxPropAppearance","cxPropErrorMessage","cxPropField","cxPropFieldKey","cxPropId","cxPropName","cxPropClearErrorMessage","cxPropDirection","cxPropTabIndex","cxPropZcqa","cxPropClass","lyteUnbound","cxPropLabelClass","href","cxPropTooltip","cxPropMaxlength","cxPropErrorYield","cxPropInfoTooltip","cxPropAutocomplete","cxPropEnableLbind","cxPropAria","cxPropAriaAttributes","cxPropMaskingProperties","cxPropTooltipConfig","cxPropTooltipClass","cxPropErrorZcqaPrefix","cxPropErrorZcqaSuffix","cxPropErrorClass","cxPropWrapperClass","cxPropInputClass","cxPropErrorSpanClass"],data:function(){return{lyteViewPort:Lyte.attr("boolean",{default:!1}),cxPropValue:Lyte.attr("string"),cxPropEmptyValue:Lyte.attr("string",{default:""}),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropLabel:Lyte.attr("string"),cxPropMaximumLength:Lyte.attr("number"),cxPropPlaceholder:Lyte.attr("string"),cxPropDisabled:Lyte.attr("boolean"),cxPropReadonly:Lyte.attr("boolean"),isError:Lyte.attr("boolean",{default:!1}),cxPropAppearance:Lyte.attr("string",{default:"flat"}),cxPropErrorMessage:Lyte.attr("string",{default:""}),cxPropField:Lyte.attr("object",{default:{}}),cxPropFieldKey:Lyte.attr("string",{default:""}),cxPropId:Lyte.attr("string",{default:""}),cxPropName:Lyte.attr("string",{default:""}),cxPropClearErrorMessage:Lyte.attr("boolean",{default:!0}),cxPropDirection:Lyte.attr("string",{default:"vertical"}),cxPropTabIndex:Lyte.attr("string"),cxPropZcqa:Lyte.attr("string"),cxPropClass:Lyte.attr("string",{default:""}),lyteUnbound:Lyte.attr("boolean",{default:!1}),cxPropLabelClass:Lyte.attr("string",{default:""}),href:Lyte.attr("string"),cxPropTooltip:Lyte.attr("string",{default:""}),cxPropMaxlength:Lyte.attr("number"),cxPropErrorYield:Lyte.attr("boolean",{default:!1}),cxPropInfoTooltip:Lyte.attr("string",{default:""}),cxPropAutocomplete:Lyte.attr("string",{default:"on"}),cxPropEnableLbind:Lyte.attr("boolean",{default:!0}),cxPropAria:Lyte.attr("boolean",{default:!1}),cxPropAriaAttributes:Lyte.attr("object",{default:{}}),cxPropMaskingProperties:Lyte.attr("object"),cxPropTooltipConfig:Lyte.attr("string",{default:'{"position": "followcursor", "appearance": "box"}'}),cxPropTooltipClass:Lyte.attr("string"),cxPropErrorZcqaPrefix:Lyte.attr("string",{default:""}),cxPropErrorZcqaSuffix:Lyte.attr("string",{default:"Error"}),cxPropErrorClass:Lyte.attr("string"),cxPropWrapperClass:Lyte.attr("string"),cxPropInputClass:Lyte.attr("string",{default:""}),cxPropErrorSpanClass:Lyte.attr("string")}},init:function(){var e=this.getData("cxPropValue");e&&""!==e&&0!=e.indexOf("http")&&0!=e.indexOf("https")?this.data.href="http://"+e:e&&(this.data.href=e),this.getData("cxPropDisabled")&&!this.data.cxPropTooltip&&this.setData("cxPropTooltip",_cruxUtils.getI18n("crm.lable.read.only"))},getValue:function(){return"string"==typeof this.data.cxPropValue?this.getData("cxPropValue").trim():this.getData("cxPropValue")},validate:function(){var e=this.getData("cxPropField"),t="string"==typeof this.data.cxPropValue?this.getData("cxPropValue").trim():this.getData("cxPropValue");if(!t||!t.trim())return this.validateMandatory(!0)?(this.setData("cxPropErrorMessage",""),!0):(this.$node.querySelector("lyte-input")&&this.$node.querySelector("lyte-input").focus(),!1);if(t&&!this.validateLength(t))return!1;var o=this.isValidWebUrl(t);return o?this.setData("cxPropErrorMessage",""):(this.getMethods("onError")?this.executeMethod("onError",this.errorCodes.ERR02,this):this.setData("cxPropErrorMessage",_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(e.field_label))),this.$node.querySelector("lyte-input")&&this.$node.querySelector("lyte-input").focus()),o},methods:{onChange:function(){this.getData("cxPropClearErrorMessage")&&this.setData("cxPropErrorMessage",""),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getData("cxPropValue"))},hideInfoTooltip:function(){this.showHideInfoTooltip()}},observeErrorMessage:function(){this.setData("isError",""!=this.getData("cxPropErrorMessage"))}.observes("cxPropErrorMessage").on("init"),actions:{stopPropagation:function(){event.stopPropagation()},showInfoTooltip:function(e){this.showHideInfoTooltip(e)}},observeIsError:function(){"create"==this.getData("cxPropFrom")&&this.$node.querySelector("lyte-input")&&(this.getData("isError")?this.$node.querySelector("lyte-input").classList.add("cxErrorBox"):this.$node.querySelector("lyte-input").classList.remove("cxErrorBox"))}.observes("isError","lyteViewPort").on("didConnect"),observeMandatory:function(){this.$node.querySelector("lyte-input")&&"create"==this.getData("cxPropFrom")&&(this.getData("cxPropField").required?this.$node.querySelector("lyte-input").classList.add("mandatoryField"):this.$node.querySelector("lyte-input").classList.remove("mandatoryField"))}.observes("cxPropField.required","lyteViewPort").on("didConnect"),observeClass:function(e){if("create"==this.data.cxPropFrom){var t=$L("lyte-input",this.$node);if(!t.length)return;e&&e.oldValue&&t.removeClass(e.oldValue),this.data.cxPropClass&&t.addClass(this.data.cxPropClass)}}.observes("cxPropClass","lyteViewPort").on("didConnect")},{mixins:["crux-element-validation"]}),Lyte.Component.register("crux-image-component",{_template:'<template tag-name="crux-image-component"><template is="if" value="{{lyteViewPort}}"><template case="true"><dummy-port-element></dummy-port-element> <div id="cruxLoadingElem"></div> <dummy-port-element></dummy-port-element></template><template case="false"> <template is="switch" value="{{cxPropFrom}}"><template case="create"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <span class="cxFieldLabel {{cxPropLabelClass}}"> {{cxPropField[cxPropFieldKey]}} <template is="if" value="{{cxPropInfoTooltip}}"><template case="true"> <span class="dIB vam cxInfoIcon" onmouseenter="{{action(\'showInfoTooltip\',this)}}"></span> <lyte-hovercard lt-prop-placement="topLeft" lt-prop-keep-alive="true" lt-prop-popover-wrapper-class="cxElementsHovercard" lt-prop-origin-elem=".cxCurrentHovercard" on-hovercard-hide="{{method(\'hideInfoTooltip\')}}"> <template is="registerYield" yield-name="hoverCardYield"> <lyte-hovercard-content class="cxElementsHoverCardContent"> {{cxPropInfoTooltip}} </lyte-hovercard-content> </template> </lyte-hovercard> </template></template> </span> </template></template> <img src="{{if(cxPropValue,cxPropValue,concat(imgLoc,&quot;/cx_user_profile_7567da3_.svg&quot;))}}" class="{{cxPropClass}}"></template></template> </template></template></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]},{type:"componentDynamic",position:[4]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{create:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]}]}},default:{}}]}},default:{}}],_observedAttributes:["lyteViewPort","cxPropFrom","cxPropDisabled","cxPropClass","cxPropValue","imgLoc","cxPropId","cxPropField","cxPropFieldKey","cxPropLabelClass","cxPropInfoTooltip"],data:function(){return{lyteViewPort:Lyte.attr("boolean",{default:!1}),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropDisabled:Lyte.attr("boolean",{default:!1}),cxPropClass:Lyte.attr("string",{default:""}),cxPropValue:Lyte.attr("string"),imgLoc:Lyte.attr("string",{default:"dist/components/images"}),cxPropId:Lyte.attr("string",{default:""}),cxPropField:Lyte.attr("object",{default:{}}),cxPropFieldKey:Lyte.attr("string",{default:""}),cxPropLabelClass:Lyte.attr("string",{default:""}),cxPropInfoTooltip:Lyte.attr("string",{default:""})}},init:function(){"undefined"!=typeof crmConstants&&(this.data.imgLoc=crmConstants.fp_imagesStaticPathForLyte)},methods:{hideInfoTooltip:function(){this.showHideInfoTooltip()}},actions:{showInfoTooltip:function(e){this.showHideInfoTooltip(e)}}}),Lyte.Component.register("crux-error-message",{_template:'<template tag-name="crux-error-message"> <template is="if" value="{{cxPropErrorYield}}"><template case="true"> <lyte-yield yield-name="errorYield" error-message="{{errorMessage}}" cx-field="{{cxPropField}}" data-zcqa="{{concat(cxPropErrorZcqaPrefix,cxPropField.api_name,cxPropErrorZcqaSuffix)}}"></lyte-yield> </template><template case="false"> <span id="{{cxPropId}}" class="cruxErrMsg cruxErrorMsgDesc {{cxPropErrorSpanClass}}" data-zcqa="{{concat(cxPropErrorZcqaPrefix,cxPropField.api_name,cxPropErrorZcqaSuffix)}}">{{unescape(errorMessage)}}</span> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}}],_observedAttributes:["errorMessage","cxPropId","cxPropErrorYield","cxPropField","cxPropErrorZcqaPrefix","cxPropErrorZcqaSuffix","cxPropErrorSpanClass"],data:function(){return{errorMessage:Lyte.attr("string"),cxPropId:Lyte.attr("string",{default:""}),cxPropErrorYield:Lyte.attr("boolean",{default:!1}),cxPropField:Lyte.attr("object"),cxPropErrorZcqaPrefix:Lyte.attr("string",{default:""}),cxPropErrorZcqaSuffix:Lyte.attr("string",{default:"Error"}),cxPropErrorSpanClass:Lyte.attr("string")}},observeMessage:function(){var e=this.$node,t=e.querySelector("span");this.data.errorMessage&&!this.data.cxPropErrorYield&&t.scrollWidth>e.offsetWidth&&$L(e).addClass("cxErrorMsgMultiLines")}.observes("errorMessage").on("didConnect")}),Lyte.Component.register("crux-lookup-popup",{_template:'<template tag-name="crux-lookup-popup"> <lyte-popover lt-prop-wrapper-class="cxLookupPopoverWrapper {{cxPropPopoverWrapperClass}}" lt-prop-show-close-button="false" lt-prop-show="{{show}}" lt-prop-freeze="false" lt-prop-type="callout" lt-prop-bind-to-body="true" lt-prop-content-padding="0px" lt-prop-origin-elem=".cxVisibleLookup .cruxLookupPopover" lt-prop-duration="{{undefinedValue}}" on-close="{{method(\'closePopver\')}}"> <template is="registerYield" yield-name="popover"> <lyte-popover-content> <div class="popElemTable"> <lyte-table lt-prop-yield="true" lt-prop-width="100%" lt-prop-height="100%" lt-prop-border="false"> <template is="registerYield" yield-name="yield"> <lyte-table-structure> <lyte-tbody> <template is="for" items="{{bcFields}}" item="field" index="index"> <lyte-tr> <lyte-td class="cxLookupPopTd">{{field.field_label}}</lyte-td> <lyte-td class="cxLookupPopTd"> <template is="if" value="{{data[field.api_name]}}"><template case="true"> <template is="if" value="{{data[field.api_name].name}}"><template case="true"> {{data[field.api_name].name}} </template><template case="false"><template is="if" value="{{expHandlers(field.data_type,\'==\',&quot;autonumber&quot;)}}"><template case="true"> {{data[field.api_name]}} </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(fieldMapping[field.ui_type],\'&amp;&amp;\',expHandlers(fieldMapping[field.ui_type],\'!=\',&quot;text&quot;)),\'&amp;&amp;\',expHandlers(fieldMapping[field.ui_type],\'!=\',&quot;email&quot;))}}"><template case="true"> <template is="component" component-name="crux-{{fieldMapping[field.ui_type]}}-component" cx-prop-value="{{data[field.api_name]}}"></template> </template><template case="false"> {{data[field.api_name]}} </template></template></template></template></template></template> </template><template case="false">-</template></template> </lyte-td> </lyte-tr> </template> </lyte-tbody> </lyte-table-structure> </template> </lyte-table> </div> </lyte-popover-content> </template> </lyte-popover> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"registerYield",position:[1,1,1,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3,1]},{type:"if",position:[1,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"component",position:[1],dynamicNodes:[]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[]}},default:{}},{type:"componentDynamic",position:[1,3]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}],_observedAttributes:["show","module","bcFields","fieldMapping","undefinedValue","cxPropPopoverWrapperClass"],data:function(){return{show:Lyte.attr("boolean",{default:!1}),module:Lyte.attr("object"),bcFields:Lyte.attr("array"),fieldMapping:Lyte.attr("object"),undefinedValue:Lyte.attr("number",{default:void 0}),cxPropPopoverWrapperClass:Lyte.attr("string",{default:""})}},observeModule:function(e){if(e&&"change"==e.type&&e.oldValue&&e.newValue.api_name!=e.oldValue.api_name&&this.setData("bcFields",void 0),this.getData("module")&&!this.data.bcFields){for(var t=this.getData("module").business_card_fields,o=[],a=1;a<t.length;a++){var r=store.peekRecord("field",t[a].id);r&&"ISCALLBILLABLE"!=r.column_name&&o.push(r)}this.setData("bcFields",o)}}.observes("module").on("init"),methods:{closePopver:function(){setTimeout(function(){this.$node.querySelector("lyte-popover").setData("ltPropBindToBody",!1)}.bind(this),1)}}}),Lyte.Component.register("crux-lookup-modal",{_template:'<template tag-name="crux-lookup-modal"> <lyte-modal id="modalElem" lt-prop-wrapper-class="cxLookupModal LookupModal cxBoxModal" lt-prop-show="{{lbind(show)}}" lt-prop-offset="{&quot;top&quot; : &quot;0&quot;, &quot;left&quot; : &quot;center&quot;}" lt-prop="{&quot;allowMultiple&quot; : &quot;true&quot;, &quot;width&quot; : &quot;80%&quot;, &quot;left&quot; : &quot;5%&quot;}" on-before-close="{{method(\'closeModal\')}}" on-before-show="{{method(\'openModal\')}}"> <template is="registerYield" yield-name="modal"> <lyte-modal-header> <template is="if" value="{{expHandlers(cxPropHeader,\'!\')}}"><template case="true">{{cruxGetI18n(\'crm.lookup.chooserecord\',module.singular_label)}}</template><template case="false">{{cxPropHeader}}</template></template> </lyte-modal-header> <lyte-modal-content> <div class="cxLookupModalbuttonLayer mT5 mB25"> <template is="if" value="{{cxPropRelatedId}}"><template case="true"> <template is="if" value="{{cxPropDontShowRelatedDropdown}}"><template case="true"> <div class="pL30"><span>{{headerOptions[0].name}}</span></div> </template><template case="false"> <div class="pL30 mR20 cxLookupModalRelatedDDWrap"> <span>{{cruxGetI18n("crm.button.mass.show")}}</span> <lyte-dropdown lt-prop-options="{{headerOptions}}" lt-prop-user-value="name" lt-prop-system-value="id" lt-prop-selected="{{lbind(selectedHeaderValue)}}" on-option-selected="{{method(\'setHeaderOption\')}}" class="pL10 oA"></lyte-dropdown></div> </template></template> </template></template> <lyte-input class="cxBoxInput cxLookupSearch cxBoxLeftPosSearch" lt-prop-id="filterbox" data-zcqa="lookupSearch" lt-prop-appearance="box" lt-prop-type="search" lt-prop-placeholder="{{cruxGetI18n(\'crm.globalsearch.search.title\')}}" onkeyup="{{action(\'searchSetValue\', event,, this)}}" after-render="{{method(\'associateSearchClick\')}}"></lyte-input> <template is="if" value="{{cxPropCreateYield}}"><template case="true"> <lyte-yield yield-name="createYield" class="cxMlAuto"></lyte-yield> </template></template> </div> <crux-table-component cx-prop-hide-header-on-no-content="{{cxPropHideHeaderOnNoContent}}" class="modalCruxtable cxTable" cx-prop-column-cell-class="lookupCriteriaLabelWrap1" cx-prop-header="{{header}}" cx-prop-row-zcqa="detailView" cx-prop-content="{{record}}" cx-prop-yield-for-prefix="true" cx-prop-sort-columns="true" cx-prop-no-records-message="{{cruxGetI18n(\'crm.module.empty.message\',module.plural_label)}}" on-sort="{{action(\'sort\')}}" cx-prop-sorted-column="{{sortedColumn}}" cx-prop-sorted-order="{{queryParamObject.sort_order}}" cx-prop-enable-body-scroll="false" cx-prop-field-type-mapping="{{fieldMapping}}" cx-prop-header-yield="{{headerYields}}" cx-prop-show-tooltip="false" cx-prop-no-content-class="aligncenter f14 norec" cx-prop-module="{{moduleName}}"> <template is="yield" yield-name="header-prefix-1"></template> <template is="yield" yield-name="body-prefix-1"> <lyte-radiobutton lt-prop-type="primary" lt-prop-name="record" lt-prop-value="{{recordObj.id}}" lt-prop-checked="{{ifEquals(recordObj.id,selectedSingle)}}" on-checked="{{method(\'selectSingle\',recordObj.id)}}" onclick="{{action(\'radioButtonClicked\',recordObj.id)}}"></lyte-radiobutton> </template> <template is="yield" yield-name="body-aTag"> <template is="if" value="{{recordObj[fieldObj.api_name]}}"><template case="true"> <span class="cP link1" onclick="{{action(\'selectSingle\',recordObj.id)}}"><template is="if" value="{{recordObj[fieldObj.api_name].name}}"><template case="true">{{recordObj[fieldObj.api_name].name}}</template><template case="false">{{recordObj[fieldObj.api_name]}}</template></template></span> </template></template> </template> <template is="yield" yield-name="body-phone"> {{recordObj[fieldObj.api_name]}} </template> <template is="yield" yield-name="body-lookup">{{recordObj[fieldObj.api_name].name}}</template> </crux-table-component> </lyte-modal-content> <lyte-modal-footer data-zcqa="mxnfooter"> <div class="cxLookupModalbuttonLayer"> <template is="if" value="{{lookupSingle}}"><template case="true"> <div class="cxSelectedSingle"> {{cruxGetI18n("crm.record.selected",module.singular_label)}}: {{lookupSingle}} </div> </template></template> <template is="if" value="{{record.length}}"><template case="true"> <div class="cxMlAuto" data-zcqa="mxnnavigationlookup"> <lyte-navigator id="navigator" lt-prop-more-records="true" lt-prop-show-only-icon="true" lt-prop-value="0" lt-prop-per-page="{{perPage}}" on-next="{{method(\'rendNext\')}}" on-previous="{{method(\'rendPrev\')}}"></lyte-navigator> </div> </template></template> </div> </lyte-modal-footer> </template> </lyte-modal> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]},false:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1,1]},{type:"if",position:[3,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0,0]}]},false:{dynamicNodes:[{type:"text",position:[1,1,0]},{type:"attr",position:[1,3]},{type:"componentDynamic",position:[1,3]}]}},default:{}}]}},default:{}},{type:"attr",position:[3,1,3]},{type:"componentDynamic",position:[3,1,3]},{type:"attr",position:[3,1,5]},{type:"if",position:[3,1,5],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]}},default:{}},{type:"attr",position:[3,3]},{type:"registerYield",position:[3,3,1],dynamicNodes:[]},{type:"registerYield",position:[3,3,3],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"registerYield",position:[3,3,5],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,0]},{type:"if",position:[1,0],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]},false:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}}]}},default:{}}]},{type:"registerYield",position:[3,3,7],dynamicNodes:[{type:"text",position:[1]}]},{type:"registerYield",position:[3,3,9],dynamicNodes:[{type:"text",position:[0]}]},{type:"componentDynamic",position:[3,3]},{type:"componentDynamic",position:[3]},{type:"attr",position:[5,1,1]},{type:"if",position:[5,1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]},{type:"text",position:[1,3]}]}},default:{}},{type:"attr",position:[5,1,3]},{type:"if",position:[5,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]}]}},default:{}},{type:"componentDynamic",position:[5]}]},{type:"componentDynamic",position:[1]}],_observedAttributes:["module","header","sortedColumn","queryParamObject","selectedSingle","lookupSingle","perPage","modId","relations","moduleName","displayField","record","show","next","currentPage","value","cxPropHideHeaderOnNoContent","cxPropCreateYield","fetchRecordsOnEnter","cxPropHeader","metaMoreRecords","cxPropFields","headerYields","cxPropRelatedId","headerOptions","selectedHeaderValue","cxPropRelatedModuleId","cxPropRelatedName","cxPropMetaMoreRecords","cxPropDontShowRelatedDropdown"],data:function(){return{module:Lyte.attr("object",{default:{}}),header:Lyte.attr("array",{default:[]}),sortedColumn:Lyte.attr("string"),queryParamObject:Lyte.attr("object",{default:{}}),selectedSingle:Lyte.attr("string",{default:""}),lookupSingle:Lyte.attr("string",{default:""}),perPage:Lyte.attr("number",{default:10}),modId:Lyte.attr("string",{default:""}),relations:Lyte.attr("array",{default:[]}),moduleName:Lyte.attr("string",{default:""}),displayField:Lyte.attr("string",{default:""}),record:Lyte.attr("array",{default:[]}),show:Lyte.attr("boolean",{default:!1}),next:Lyte.attr("array",{default:[0,10]}),currentPage:Lyte.attr("number",{default:0}),perPage:Lyte.attr("number",{default:10}),value:Lyte.attr("object"),cxPropHideHeaderOnNoContent:Lyte.attr("boolean",{default:!0}),cxPropCreateYield:Lyte.attr("boolean",{default:!1}),fetchRecordsOnEnter:Lyte.attr("boolean",{default:!1}),cxPropHeader:Lyte.attr("string"),metaMoreRecords:Lyte.attr("string"),cxPropFields:Lyte.attr("array"),headerYields:Lyte.attr("object"),cxPropRelatedId:Lyte.attr("string"),headerOptions:Lyte.attr("array"),selectedHeaderValue:Lyte.attr("string"),cxPropRelatedModuleId:Lyte.attr("string"),cxPropRelatedName:Lyte.attr("string"),cxPropMetaMoreRecords:Lyte.attr("string"),cxPropDontShowRelatedDropdown:Lyte.attr("boolean",{default:!1})}},init:function(){this.records=[],this.lookupInit(this,this.getData("modId"),!0),this.setData("headerYields",{prefix:[{fixed:"enable",class:"cxLookupWidthOnePerc"}]})},getRecs:function(){var e=this.getData("module"),t=e.fields,o=!1;this.getData("cxPropFields")?(o=!0,t=this.getData("cxPropFields")):e.custom_view&&e.custom_view.fields&&(o=!0,t=e.custom_view.fields);for(var a=function(e,t){return e.filter((function(e){return e.id==t}))[0]},r=0;r<t.length;r++)if(o&&(t[r]=a(e.fields,t[r].id)),t[r]){if(t[r].id==e.display_field.id||"Full_Name"==e.display_field.api_name&&"LASTNAME"==t[r].column_name||"POTENTIAL_NAME"==t[r].column_name||"POTENTIALID"==t[r].column_name){if(t[r].yieldName="aTag",!o)break}else"lookup"==t[r].data_type?t[r].yieldName="lookup":"phone"==t[r].data_type&&(t[r].yieldName="phone");t[r].sortable||(t[r].cxPropClass="cursorDefault")}else t.splice(r,1),r--;this.setData("header",t);var i=this,s={page:1,per_page:10};this.data.selectedHeaderValue&&("2"!=this.data.selectedHeaderValue?(s.relatedId=this.data.selectedHeaderValue,s.relationId=this.getRelationId()):(delete s.relatedId,delete s.relationId)),this.executeMethod("fetchRecords",this.getData("modId"),s).then((function(e){e=e&&e.length?e:[],i.setData("record",e),i.setData("queryParamObject",Object.assign({},s)),i.setData("show",!0);var t=!(e.length<10);i.data.cxPropMetaMoreRecords&&e.$&&(t=!(0==e.$[i.data.cxPropMetaMoreRecords]||e.$.meta&&0==e.$.meta[i.data.cxPropMetaMoreRecords])),i.setSelected(e),i.setNavigator(e.length,t,!0),"undefined"!=typeof commonUtils&&commonUtils.showHideLoadingDiv&&commonUtils.showHideLoadingDiv()}),(function(){}))},methods:{openModal:function(){var e=this.$node.querySelector("#modalElem").component.childComp;if(e){var t=e.querySelector(".lyteModalClose");t&&(t.dataZcqa="lookup_closeIcon")}this.setData("sortedColumn","")},closeModal:function(){this.setData("queryParamObject",{})},selectSingle:function(e,t,o,a){"script"!=a&&this.selectTheSingle(e)},rendNext:function(e,t){this.rendPage("next",e,t)},rendPrev:function(e,t){this.rendPage("prev",e,t)},associateSearchClick:function(e){var t=e.querySelector(".searchIcon"),o=this;t.onclick=function(){var t=e.querySelector("input");o.actions.searchSetValue.call(o,void 0,void 0,void 0,t.value,!0)}},setHeaderOption:function(){this.records=[],this.rendPage("change")}},actions:{searchSetValue:function(e,t,o,a,r){if(!(this.getData("fetchRecordsOnEnter")&&(!e||13!=e.keyCode)||e&&27==e.keyCode)||r){clearTimeout(this.searchTimeout);var i=this;this.searchTimeout=setTimeout((function(){var t=(a=(a=a||(e?e.target.value:""))?a.trim():a)?{comparator:"contains",field:{api_name:i.getData("displayField")},value:a}:{},o=i.getData("queryParamObject");t.comparator&&(o.filters=i.constructSearchFilter(i.getData("displayField"),a)),o.page=1,o.per_page=10,o.sort_order||(delete o.sort_order,delete o.sort_by),i.setData("queryParamObject",o),i.data.selectedHeaderValue&&("2"!=i.data.selectedHeaderValue?(o.relatedId=i.data.selectedHeaderValue,o.relationId=i.getRelationId()):(delete o.relatedId,delete o.relationId));var r=i.getData("modId");a?i.executeMethod("fetchRecords",r,Object.assign({},o)).then((function(e){e=e||[],i.noMoreScroll=!1,i.setData("record",e);var t=!0;i.data.cxPropMetaMoreRecords&&e.$&&(t=!(0==e.$[i.data.cxPropMetaMoreRecords]||e.$.meta&&0==e.$.meta[i.data.cxPropMetaMoreRecords])),i.setSelected(e),i.setNavigator(e.length,t,!0),"undefined"!=typeof commonUtils&&commonUtils.showHideLoadingDiv&&commonUtils.showHideLoadingDiv(),i.$node.querySelector("lyte-modal").component.actualModalDiv.querySelector("lyte-input").ltProp("value")!=a&&i.$node.querySelector("lyte-modal").component.actualModalDiv.querySelector("lyte-input").ltProp("value",a)})):(delete o.filters,i.executeMethod("fetchRecords",r,Object.assign({},o)).then((function(e){e=e||[],i.setData("record",e);var t=!0;i.data.cxPropMetaMoreRecords&&e.$&&(t=!(0==e.$[i.data.cxPropMetaMoreRecords]||e.$.meta&&0==e.$.meta[i.data.cxPropMetaMoreRecords])),i.setSelected(e),i.setNavigator(e.length,t,!0),"undefined"!=typeof commonUtils&&commonUtils.showHideLoadingDiv&&commonUtils.showHideLoadingDiv(),i.$node.querySelector("lyte-modal").component.actualModalDiv.querySelector("lyte-input").ltProp("value","")})))}),300)}},sort:function(e){if(e.sortable){var t=this.getData("record");if(3!=e.ui_type&&999!=e.ui_type&&208!=e.ui_type&&110!=e.ui_type&&1e3!=e.ui_type&&209!=e.ui_type||"Visits"==this.getData("module").module_name&&"SEID"==e.column_name&&t.length){var o=JSON.parse(JSON.stringify(this.getData("queryParamObject")));e.curSort=null==e.curSort||"desc"==e.curSort?"asc":"desc",o.sort_order=e.curSort,o.sort_by=e.api_name,o.page=1,o.per_page=10,this.setData("queryParamObject",o);var a=this;this.records=[],this.data.selectedHeaderValue&&("2"!=this.data.selectedHeaderValue?(o.relatedId=this.data.selectedHeaderValue,o.relationId=this.getRelationId()):(delete o.relatedId,delete o.relationId)),this.executeMethod("fetchRecords",this.getData("modId"),Object.assign({},o)).then((function(t){t=t&&t.length?t:[],a.setData("record",t),a.noMoreScroll=!1,a.setSelected(t);var o=!(t.length<10);a.data.cxPropMetaMoreRecords&&t.$&&(o=!(0==t.$[a.data.cxPropMetaMoreRecords]||t.$.meta&&0==t.$.meta[a.data.cxPropMetaMoreRecords])),a.setNavigator(t.length,o,!0),a.setData("sortedColumn",e.api_name),"undefined"!=typeof commonUtils&&commonUtils.showHideLoadingDiv&&commonUtils.showHideLoadingDiv()}))}}},selectSingle:function(e){this.selectTheSingle(e)},radioButtonClicked:function(e){this.getData("selectedSingle")==e&&this.close()}},setNavigator:function(e,t,o){var a=this.$node.querySelector("#modalElem").component.childComp,r=a?a.querySelector("#navigator"):"";if(r){if(r.ltProp("moreRecords",!!t),this.records&&this.records.length){var i=0;this.records.forEach((function(e){return i+=e&&e.length?e.length:0})),e=i||e}r.ltProp("records",t?"":e),o&&r.ltProp("value",0)}},rendHome:function(e){this.rendPage("home",e),this.next=!1;var t=this.$node.querySelector("#modalElem").component.childComp;t&&(t=t.querySelectorAll("#navigator")[0])&&t.ltProp("value",0)},setSelected:function(e){var t=this.getData("selectedSingle");if(t){this.bool=!0;for(var o=this.$node.querySelector("#modalElem").component.childComp,a=o?o.querySelectorAll("lyte-radiobutton"):[],r=0;r<a.length;r++){if(a[r].ltProp("value")==t){e=this.getData("record").filter((function(e){return e.id==t}))[0],a[r].ltProp("checked",!0);var i,s=this.getData("displayField");if(!e)return;i="Full_Name"==s?e.First_Name?e.First_Name+" "+e.Last_Name:e.Last_Name:e[s],this.setData("lookupSingle",i);break}1==a[r].ltProp("checked")&&a[r].ltProp("checked",!1)}this.bool=!1}},selectTheSingle:function(e){for(var t,o=this.getData("record"),a=this.getData("displayField"),r=0;r<o.length;r++)if(e==o[r].id){t="Full_Name"==a?o[r].First_Name?o[r].First_Name+" "+o[r].Last_Name:o[r].Last_Name:o[r][a],this.setData({lookupSingle:t,selectedSingle:e});break}this.bool||(this.close(),this.getMethods("onSelect")&&this.executeMethod("onSelect"),this.getMethods("onValueChange")&&(this.setData("cxPropValue",{id:this.getData("selectedSingle"),name:this.getData("lookupSingle")}),this.executeMethod("onValueChange",JSON.stringify(this.getData("cxPropValue")))))},close:function(){this.setData("show",!1)},setNext:function(e,t,o,a,r,i){"next"==e?(t[o+2]=a,o+=1):"prev"==e?o-=1:(t=[0,a],o=0),this.setData({next:t,currentPage:o,currPage:o}),r=r||0,i&&i.ltProp("value",r)},rendPage:function(e,t,o){var a,r=this.getData("next"),i=this.getData("currentPage"),s=this.getData("queryParamObject"),l=s.page?s.page:0;"home"==e||"change"==e?a=0:"prev"==e?(a=r[i-1],s.page=l-1):(a=r[i+1],s.page=l+1);for(var n=this.getData("record"),p=this.getData("perPage"),c=[],d=0;a<n.length&&d<p&&n[a];a++,d++)c[d]=n[a];if("home"!=e){if(s.per_page=10,!this.next){this.next=!0;var u=this;n=[],this.data.selectedHeaderValue&&("2"!=this.data.selectedHeaderValue?(s.relatedId=this.data.selectedHeaderValue,s.relationId=this.getRelationId()):(delete s.relatedId,delete s.relationId)),this.executeMethod("fetchRecords",this.getData("modId"),Object.assign({},s)).then((function(l){if(l&&(n=n.concat(l)),n.length){for(u.setData("queryParamObject",s),u.setData("record",n),u.setData("show",!0);a<n.length&&d<p;a++,d++)c[d]=n[a];u.setSelected(c);var h=!(n.length<10);u.data.cxPropMetaMoreRecords&&l.$&&(h=!(0==l.$[u.data.cxPropMetaMoreRecords]||l.$.meta&&0==l.$.meta[u.data.cxPropMetaMoreRecords])),u.setNavigator(n.length,h),u.setNext(e,r,i,a,t,o)}else"change"!=e&&_cruxUtils.showCustomAlert({params:{ltPropContentAlign:"center",ltPropSecondaryMessage:I18n.getMsg("crm.label.no.more.records"),ltPropButtons:[{type:"accept",text:_cruxUtils.getI18n("crm.mb.newversion.msg4"),appearance:"primary"}]}});u.next=!1,"undefined"!=typeof commonUtils&&commonUtils.showHideLoadingDiv&&commonUtils.showHideLoadingDiv()}))}}else(c.length||!c.length&&"next"!=e)&&(this.setNext(e,r,i,a,t,o),this.setData("show",!0),this.setSelected(c))},observeShow:function(){1==this.getData("show")&&this.$node.querySelector("lyte-modal").component.actualModalDiv.querySelector("lyte-input").ltProp("value","")}.observes("show"),observeRecords:function(){if(this.getData("queryParamObject").filters)this.records=[];else{var e=this.getData("queryParamObject").page?this.getData("queryParamObject").page:1;this.records[e]=this.getData("record")}}.observes("record"),records:[],observeValue:function(){if(this.getData("cxPropValue"))try{this.setData("value",JSON.parse(this.getData("cxPropValue"))),this.setData("selectedSingle",this.getData("value").id)}catch(e){this.setData("value",this.data.cxPropValue),this.setData("selectedSingle",this.data.value.id)}}.observes("cxPropValue").on("init"),observeAccountId:function(){if(this.data.cxPropRelatedId){idModuleMapping[this.data.cxPropRelatedModuleId];var e=[{id:this.data.cxPropRelatedId,name:_cruxUtils.getI18n("crm.related.contact.account",this.data.module.plural_label,this.data.cxPropRelatedName)},{id:"2",name:_cruxUtils.getI18n("crm.allcontact.show",this.data.module.plural_label)}];this.setData("headerOptions",e),this.setData("selectedHeaderValue",this.data.cxPropRelatedId),store.peekRecord("module",this.data.cxPropRelatedModuleId)||store.findRecord("module",this.data.cxPropRelatedModuleId)}}.observes("cxPropRelatedId").on("init"),getRelationId:function(){for(var e="",t=store.peekRecord("module",this.data.cxPropRelatedModuleId).related_lists,o=0;o<t.length;o++)if(t[o].api_name==this.data.module.api_name){e=t[o].id;break}return e}},{mixins:["crux-lookup-mixin"]}),Lyte.Component.register("crux-lookup-filter-modal",{_template:'<template tag-name="crux-lookup-filter-modal"> <lyte-modal id="modalElem" lt-prop-wrapper-class="cxLookupModal LookupModal cxBoxModal lookupListTable" lt-prop-show="{{lbind(show)}}" lt-prop-show-close-button="false" lt-prop-bind-to-body="{{ltPropBindToBody}}" lt-prop-offset="{&quot;top&quot; : &quot;0&quot;, &quot;left&quot; : &quot;center&quot;}" lt-prop="{&quot;allowMultiple&quot; : &quot;true&quot;, &quot;width&quot; : &quot;80%&quot;, &quot;left&quot; : &quot;5%&quot;}" on-before-close="{{method(&quot;closeModal&quot;)}}"> <template is="registerYield" yield-name="modal"> <div class="componentWrapper"> <crux-lookup-filter-view field-of-lookup-val="{{cxPropFieldOfLookupVal}}" parent-module="{{cxPropParentModule}}" default-criteria="{{cxPropDefaultCriteria}}" id="lookup_view_{{idIndex}}" module="{{lbind(module)}}" show="{{lbind(show)}}" disp-init="{{dispInit}}" on-data-loaded="{{method(\'onDataLoaded\')}}" mod-id="{{modId}}" is-single="{{isSingle}}" cx-prop-header="{{cxPropHeader}}" display-field="{{lbind(displayField)}}" record="{{lbind(record)}}" selected-single="{{selectedSingle.id}}" selected-single-record="{{lbind(selectedSingle)}}" lookup-single="{{lbind(lookupSingle)}}" module-name="{{lbind(moduleName)}}" on-value-change="{{method(\'onValueChange\')}}" cx-prop-value="{{cxPropValue}}" render-lookup="{{lbind(renderLookup)}}" fields-obj="{{fieldsObj}}" cx-prop-create-yield="{{cxPropCreateYield}}" temp-close="{{lbind(tempClose)}}" disable-related-to="{{cxPropDontShowRelatedDropdown}}" related-record-data="{{relatedRecordData}}" cx-prop-field="{{cxPropField}}"> <template is="yield" yield-name="createYield"><lyte-yield yield-name="createYield"></lyte-yield></template> </crux-lookup-filter-view> </div> </template> </lyte-modal> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"registerYield",position:[1,1,1],dynamicNodes:[{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1,1]}]},{type:"componentDynamic",position:[1]}],_observedAttributes:["cxPropDefaultCriteria","cxPropFieldOfLookupVal","cxPropParentModule","tempClose","fieldsObj","renderLookup","module","cxPropHeader","cxPropCreateYield","lookupSingle","sortedColumn","modId","show","cxPropHideHeaderOnNoContent","header","ltPropBindToBody","headerYields","relatedRecordData","cxPropDontShowRelatedDropdown"],data:function(){return{cxPropDefaultCriteria:Lyte.attr("array",{default:[]}),cxPropFieldOfLookupVal:Lyte.attr("array",{default:[]}),cxPropParentModule:Lyte.attr("string",{default:""}),tempClose:Lyte.attr("boolean",{default:!1}),fieldsObj:Lyte.attr("object",{default:{}}),renderLookup:Lyte.attr("boolean",{default:!1}),module:Lyte.attr("object",{default:{}}),cxPropHeader:Lyte.attr("string"),cxPropCreateYield:Lyte.attr("boolean",{default:!1}),lookupSingle:Lyte.attr("string",{default:""}),sortedColumn:Lyte.attr("string"),modId:Lyte.attr("string",{default:""}),show:Lyte.attr("boolean",{default:!1}),cxPropHideHeaderOnNoContent:Lyte.attr("boolean",{default:!0}),header:Lyte.attr("array",{default:[]}),ltPropBindToBody:Lyte.attr("boolean",{default:!1}),headerYields:Lyte.attr("object"),relatedRecordData:Lyte.attr("array",{default:[]}),cxPropDontShowRelatedDropdown:Lyte.attr("boolean",{default:!1})}},init:function(){this.setData("headerYields",{prefix:[{fixed:"enable",class:"cxLookupWidthOnePerc"}]}),this.setData("ltPropBindToBody",!0)},didConnect:function(){this.data.cxPropRelatedId&&this.setRelatedDropDown(this.data.cxPropRelatedId,this.data.cxPropRelatedName,this.data.cxPropRelatedModuleId)},close:function(){this.setData("show",!1)},lookupInit:function(e,t,o,a,r){var i=this.$node.querySelector("crux-lookup-filter-view");i.lookupInit(i,elem.getData("modId"),!0,r)},openModalAfterQuickCreate:function(e){e.getRecs()},setRelatedDropDown(e,t,o){var a,r=[];switch(store.peekRecord("module",o).api_name){case"Accounts":a="Account_Name";break;case"Vendors":a="Vendor_Name";break;case"Contacts":a="Contact_Name"}r.push({apiName:a,id:e,name:_cruxUtils.getI18n("crm.related.contact.account",store.peekRecord("module",this.data.modId).plural_label,this.data.cxPropRelatedName)}),this.data.cxPropDontShowRelatedDropdown||r.push({id:"all",name:I18n.getMsg("crm.label.show")+" "+I18n.getMsg("crm.allcontact.show",store.peekRecord("module",this.data.modId).plural_label)}),this.setData("relatedRecordData",r)},methods:{onDataLoaded:function(){this.setData("show",!0)},closeModal:function(){this.setData({show:!1,renderLookup:!1})}}}),Lyte.Component.register("crux-lookup-filter-view",{_template:'<template tag-name="crux-lookup-filter-view"> <div class="f22 crm-font-bold fs pL20 pR20 pB10 clearAfterB"> <h4 class="dIB m0"><template is="if" value="{{expHandlers(cxPropHeader,\'!\')}}"><template case="true">{{cruxGetI18n(\'crm.lookup.chooserecord\',module.singular_label)}}</template><template case="false">{{cxPropHeader}}</template></template></h4> <template is="if" value="{{customCloseNeeded}}"><template case="true"> <div class="fR" data-zcqa="lookup_closeIcon" onclick="{{action(\'closeModal\')}}"> <span class="newPopupCloseIcon ico-close-small2 cP op08 dIB"></span> </div> </template></template> </div> <div class="alignright dF pB15 pL20 pR20 clearAfterB moduleRelatedDropdown"> <lyte-dropdown lt-prop-yield="true" lt-prop-selected="{{lbind(selectedRelatedRecordIndex)}}" data-zcqa="relatedRecord" lt-prop-disabled="{{disableRelatedTo}}" lt-prop-freeze="false" lt-prop-tabindex="1" class="dIB relatedDropdownLookup crmBoxDropdown" on-option-selected="{{method(\'showRelatedRecords\')}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box class="crmBoxDropbox"> <lyte-drop-body> <template is="for" items="{{relatedRecordData}}" item="relatedRecord" index="relatedRecordIndex"> <lyte-drop-item class="w300" data-zcqa="relatedRecord_{{relatedRecordIndex}}" data-value="{{relatedRecordIndex}}">{{relatedRecord.name}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> <lyte-input class="lookupsearch dIB crmBoxInput" lt-prop-id="filterbox" data-zcqa="lookupSearch" lt-prop-focus="true" lt-prop-appearance="box" lt-prop-type="search" lt-prop-value="{{lbind(searchBarAttr.searchValue)}}" lt-prop-placeholder="{{searchBarAttr.displayMsg}}" lt-prop-maxlength="200" lt-prop-autocomplete="off" on-value-change="{{method(\'searchBarSearch\')}}"></lyte-input> <template is="if" value="{{cxPropCreateYield}}"><template case="true"> <lyte-yield yield-name="createYield" class="cxMlAuto"></lyte-yield> </template></template> </div> <div class="pR"> <span class="dIB advanceFilter" data-zcqa="lookupAdvanceFilterIcon" lt-prop-title="{{if(showFilter,cruxGetI18n(\'crm.button.clear.filter\'),cruxGetI18n(\'crm.button.show.filter\'))}}" onclick="{{action(\'filterAction\',this)}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;default&quot;}"></span> </div> <lyte-popover lt-prop-origin-elem="#coloumnSelectOrg" lt-prop-class="columnCustomizeWrap" lt-prop-wrapper-class="columnCustomizeWrap" lt-prop-animation="zoom" lt-prop-bind-to-body="false" lt-prop-show="{{showColList}}" lt-prop-header-padding="0px" lt-prop-content-padding="0px" lt-prop-footer-padding="0px" lt-prop-freeze="false" lt-prop-type="box" lt-prop-placement="bottomLeft" lt-prop-scrollable="false" lt-prop-show-close-button="false" lt-prop-close-on-body-click="true" on-close="{{method(&quot;closeColumnList&quot;)}}" on-show="{{method(&quot;setScrollableHeight&quot;)}}"> <template is="registerYield" yield-name="popover"> <lyte-popover-content class="lookupColumnCustomize"> <crux-column-list cx-prop-disable-sort-for-unselected-fields="true" cx-prop-selected-fields="{{header}}" class="lookupColumnCustComp" id="cruxColumnList" cx-prop-mandatory="mandatoryColumn" cx-prop-max-select-column="10" cx-prop-fields="{{availableFields}}" on-before-unchecked="{{method(\'uncheckColumn\')}}" on-search="{{method(\'OnColumnListSearch\')}}" cx-prop-zcqa-prefix="listView_" cx-prop-drag-zcqa-prefix="listViewDrag_"> </crux-column-list> </lyte-popover-content> <lyte-popover-footer class="lookupColumnCustButtons"> <div class="columnListBtn aligncenter pT15"> <template is="if" value="{{showColListFooter}}"><template case="true"> <lyte-button data-zcqa="columnListSaveButton" lt-prop-appearance="primary" class="mR10" onclick="{{action(\'closeColumnList\',\'SAVE\')}}"> <template is="registerYield" yield-name="text">{{getI18n(\'Save\')}}</template> </lyte-button> <lyte-button data-zcqa="columnListCancelButton" lt-prop-class="mR0" onclick="{{action(\'closeColumnList\',\'CANCEL\')}}"> <template is="registerYield" yield-name="text">{{getI18n(\'Cancel\')}}</template> </lyte-button> </template></template> </div> </lyte-popover-footer> </template> </lyte-popover> <div class="lookupFieldList "> <lyte-menu lt-prop-yield="true" lt-prop-show="{{showSortableOptions}}" lt-prop-event="click" id="sortOrderMenu" on-menu-click="{{method(\'sortColumnsInLookup\')}}" on-close="{{method(\'sortColumnsClose\')}}" lt-prop-query=".sortableTarget"> <template is="registerYield" yield-name="yield"> <lyte-menu-body> {{log(availableSort)}} <template is="for" items="{{availableSort}}" item="item" index="index"> <lyte-menu-item class="pL10 lookupSortItem" data-zcqa="sort_column_{{index}}" data-value="{{item}}"> <lyte-menu-label> <span class="dIB svgIconsImg sort_{{toLowerCase(item)}} mR5"></span> {{item}} </lyte-menu-label> </lyte-menu-item> </template> </lyte-menu-body> </template> </lyte-menu> <crux-table-component cx-prop-show-scroll-on="hover" cx-prop-zcqa-selector="field_label" cx-prop-module="{{moduleName}}" cx-prop-clip-mode="false" cx-prop-hide-header-on-no-content="false" class="entityLookupTable {{if(bigLookupTable,\'bigLookupTable\',\'\')}}" cx-prop-column-cell-class="lookupCriteriaLabelWrap1" cx-prop-header="{{header}}" cx-prop-show-business-card="false" cx-prop-row-zcqa="detailView" cx-prop-content="{{record}}" cx-prop-yield-for-prefix="true" cx-prop-sort-columns="true" cx-prop-table-class="lookupLyteTable" cx-prop-no-records-message="{{cruxGetI18n(\'crm.module.empty.message\',module.plural_label)}}" cx-prop-enable-body-scroll="false" cx-prop-show-tooltip="false" cx-prop-no-content-class="aligncenter f14 norec" cx-prop-field-type-mapping="{{uiTypeMapping}}" cx-prop-show-filter="{{showFilter}}" set-lookup-filter-conditions="{{method(\'setLookupFilterConditions\')}}" cx-prop-filter-component="crux-lookupfilter-component" apply-filter="{{method(\'applyFilter\')}}" clear-filter="{{method(\'clearFilter\')}}" header-fields="{{header}}" on-sort="{{action(\'sortColumn\')}}" cx-prop-sorted-column="{{sortedColumn}}" cx-prop-sorted-order="{{sortDetails.sort_order}}"> <template is="registerYield" yield-name="body-aTag"> <span class="link1 cP" onclick="{{action(&quot;selectSingle&quot;,recordObj.id)}}">{{recordObj[fieldObj.api_name]}}</span> </template> <template is="yield" yield-name="header-prefix-1" cx-prop-fixed="enable"> <div class="lookupCriteriaLabelCol {{if(clientAccount,\'cD\',\'\')}}"> <span class="dIB coloumnSelect cP {{if(clientAccount,\'vH eventNone\',\'\')}}" data-zcqa="lookupColumnSelectIcon" id="coloumnSelectOrg" onclick="{{action(\'showColumnList\',event)}}" lt-prop-title="{{cruxGetI18n(\'crm.label.addColumn\')}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;followcursor&quot;}"></span> <div class="lookupCriteriaFilter mT10 w100per mL_20 dN"></div> </div> </template> <template is="yield" yield-name="body-prefix-1"> <lyte-radiobutton lt-prop-type="primary" lt-prop-name="record" data-zcqa="radioButon_{{recordObj.id}}" lt-prop-value="{{recordObj.id}}" lt-prop-checked="{{ifEquals(recordObj.id,selectedSingle)}}" onclick="{{action(\'selectSingle\',recordObj.id)}}"></lyte-radiobutton> </template> <template is="yield" yield-name="body-lookup">{{recordObj[fieldObj.api_name].name}}</template> <template is="yield" yield-name="body-territory"> <template is="for" items="{{recordObj[fieldObj.api_name]}}" item="item" index="index"> {{item.Name}} </template> </template> </crux-table-component> </div> <div class="cxLookupModalbuttonLayer pT20 pR20 pL20 pR {{if(scrollableTable,\'moreRecordsTable\',\'\')}}"> <template is="if" value="{{expHandlers(lookupSingle,\'&amp;&amp;\',selectedSingle)}}"><template case="true"> <div class="cxSelectedSingle"> {{cruxGetI18n("crm.record.selected",module.singular_label)}}: {{lookupSingle}} </div> </template></template> <template is="if" value="{{record.length}}"><template case="true"> <div class="cxMlAuto lookupPageNavigation" data-zcqa="lookupNavigation"> <lyte-navigator id="navigator" lt-prop-more-records="{{hasMoreRecords}}" lt-prop-show-only-icon="true" lt-prop-value="{{navigatedRec}}" lt-prop-records="{{navigatorRecordLen}}" lt-prop-per-page="{{perPage}}" on-next="{{method(\'rendNext\')}}" on-previous="{{method(\'rendPrev\')}}"></lyte-navigator> </div> </template></template> </div> </template>',_dynamicNodes:[{type:"attr",position:[1,1,0]},{type:"if",position:[1,1,0],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]},false:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[3,1]},{type:"registerYield",position:[3,1,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3,1]},{type:"attr",position:[3,3]},{type:"componentDynamic",position:[3,3]},{type:"attr",position:[3,5]},{type:"if",position:[3,5],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]}},default:{}},{type:"attr",position:[5,1]},{type:"attr",position:[7]},{type:"registerYield",position:[7,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1,1]},{type:"if",position:[3,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[0]}]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"text",position:[0]}]},{type:"componentDynamic",position:[3]}]}},default:{}},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[7]},{type:"attr",position:[9,1]},{type:"registerYield",position:[9,1,1],dynamicNodes:[{type:"text",position:[1,1]},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"text",position:[1,1,3]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[9,1]},{type:"attr",position:[9,3]},{type:"registerYield",position:[9,3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]},{type:"registerYield",position:[9,3,3],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]}]},{type:"registerYield",position:[9,3,5],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"registerYield",position:[9,3,7],dynamicNodes:[{type:"text",position:[0]}]},{type:"registerYield",position:[9,3,9],dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"text",position:[1]}]}]},{type:"componentDynamic",position:[9,3]},{type:"attr",position:[11]},{type:"attr",position:[11,1]},{type:"if",position:[11,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]},{type:"text",position:[1,3]}]}},default:{}},{type:"attr",position:[11,3]},{type:"if",position:[11,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]}]}},default:{}}],_observedAttributes:["cxPropDefaultFields","cxPropAllFieldsNeeded","cxPropField","cxPropFrom","showSortableOptions","requiredFieldsForApi","availableFields","availableSort","renderLookupView","searchDoMode","fieldOfLookupVal","currentSelectedRecord","defaultCriteria","searchBarCriteria","targetElement","relatedRecordCriteria","flushView","bigLookupTable","selectedRelatedRecordIndex","relatedRecordData","tempClose","fieldsObj","renderLookup","displayField","selectedSingle","sortDetails","criteria","searchBarAttr","showFilter","customCloseNeeded","scrollableTable","selectedFields","currentSelectedFields","module","moduleName","header","cxPropHeader","cxPropCreateYield","lookupSingle","record","sortedColumn","cxPropHideHeaderOnNoContent","modId","comparator","next","navigatedRec","currentPage","tableScrollHeight","perPage","navigatorRecordLen","value","hasMoreRecords","uiTypeMapping","lookupViewRestrictedColumns","lookupViewRestrictedModuleVsColumn","appointmentHiddenFields","tasksHiddenFields","servicesHiddenFields","formulaReturnTypeComparators","lookupUitypeComparator","lookupDatatypeComparator"],data:function(){return{cxPropDefaultFields:Lyte.attr("object",{default:{}}),cxPropAllFieldsNeeded:Lyte.attr("boolean",{default:!1}),cxPropField:Lyte.attr("object",{default:{}}),cxPropFrom:Lyte.attr("string",{default:""}),showSortableOptions:Lyte.attr("boolean",{default:!1}),requiredFieldsForApi:Lyte.attr("array",{default:[]}),availableFields:Lyte.attr("array",{default:[]}),availableSort:Lyte.attr("array",{default:[]}),renderLookupView:Lyte.attr("boolean",{default:!1}),searchDoMode:Lyte.attr("boolean",{default:!1}),fieldOfLookupVal:Lyte.attr("array",{default:[]}),currentSelectedRecord:Lyte.attr("object",{default:{}}),defaultCriteria:Lyte.attr("array",{default:[]}),searchBarCriteria:Lyte.attr("string",{default:""}),targetElement:Lyte.attr("string",{default:""}),relatedRecordCriteria:Lyte.attr("string",{default:""}),flushView:Lyte.attr("boolean",{default:!1}),bigLookupTable:Lyte.attr("boolean",{default:!1}),selectedRelatedRecordIndex:Lyte.attr("number",{default:0}),relatedRecordData:Lyte.attr("array",{default:[]}),tempClose:Lyte.attr("boolean",{default:!1}),fieldsObj:Lyte.attr("object",{default:{}}),renderLookup:Lyte.attr("boolean",{default:!1}),displayField:Lyte.attr("string",{default:""}),selectedSingle:Lyte.attr("string",{default:""}),sortDetails:Lyte.attr("object",{default:{}}),criteria:Lyte.attr("string",{default:""}),searchBarAttr:Lyte.attr("object",{default:{}}),showFilter:Lyte.attr("boolean",{default:!1}),customCloseNeeded:Lyte.attr("boolean",{default:!0}),scrollableTable:Lyte.attr("boolean",{default:!1}),selectedFields:Lyte.attr("object",{default:{}}),currentSelectedFields:Lyte.attr("object",{default:{}}),module:Lyte.attr("object",{default:{}}),moduleName:Lyte.attr("string",{default:""}),header:Lyte.attr("array",{default:[]}),cxPropHeader:Lyte.attr("string"),cxPropCreateYield:Lyte.attr("boolean",{default:!1}),lookupSingle:Lyte.attr("string",{default:""}),record:Lyte.attr("array",{default:[]}),sortedColumn:Lyte.attr("string"),cxPropHideHeaderOnNoContent:Lyte.attr("boolean",{default:!0}),modId:Lyte.attr("string",{default:""}),comparator:Lyte.attr("boolean",{default:!1}),next:Lyte.attr("array",{default:[0,10]}),navigatedRec:Lyte.attr("number",{default:0}),currentPage:Lyte.attr("number",{default:1}),tableScrollHeight:Lyte.attr("number",{default:200}),perPage:Lyte.attr("number",{default:10}),navigatorRecordLen:Lyte.attr("number",{default:0}),value:Lyte.attr("object"),hasMoreRecords:Lyte.attr("boolean",{default:!1}),uiTypeMapping:Lyte.attr("object",{default:"undefined"!=typeof crmConstants&&crmConstants.defaultUiTypeToCruxMapping?crmConstants.defaultUiTypeToCruxMapping:{}}),lookupViewRestrictedColumns:Lyte.attr("array",{default:["CURRENCYISOCODE","SCORE","POSITIVE_SCORE","NEGATIVE_SCORE","TP_SCORE","TP_POSITIVE_SCORE","TP_NEGATIVE_SCORE","LEADSCORE"]}),lookupViewRestrictedModuleVsColumn:Lyte.attr("object",{default:{Leads:["QUALIFICATIONDURATION"],Products:["ACTIVE"]}}),appointmentHiddenFields:Lyte.attr("array",{default:["RESCHEDULEDFROM","REMINDER","ENDTIME"]}),tasksHiddenFields:Lyte.attr("array",{default:["REMINDAT","SENDNOTIFICATION"]}),servicesHiddenFields:Lyte.attr("array",{default:["AVAILABLE_DATES","AVAILABLE_DAYS","UNAVAILABLE_TILL","STARTING_DATE","CLOSING_DATE","JOBSHEETLAYOUT","APPOINTMENTFOR","SEID","APPOINTMENTLOCATION","APPOINTMENTID","APPOINTMENTADDRESS","APPOINTMENTDATEANDTIME","RESCHEDULEDFROM","SERVICEID","RESCHEDULEDTO","RESCHEDULEDREASON","RESCHEDULEDNOTE","CANCELLATIONREASON","CANCELLATIONNOTE","SERVICEAVAILABILITY","AVAILABLE_CUSTOM_TIMING","UNAVAILABLE_FROM"]}),formulaReturnTypeComparators:Lyte.attr("object",{default:{boolean:"equals",currency:"equals",double:"equals",text:"starts_with",datetime:"between",date:"equals"}}),lookupUitypeComparator:Lyte.attr("object",{default:{starts_with:[CrmField.UITYPES.SINGLE_LINE,CrmField.UITYPES.SKYPE_FIELD,CrmField.UITYPES.TEXT_FIELD,CrmField.UITYPES.TWITTER,CrmField.UITYPES.FIRST_NAME,CrmField.UITYPES.LAST_NAME,CrmField.UITYPES.TASK_SUBJECT,CrmField.UITYPES.MULTI_LINE_CF,CrmField.UITYPES.TEXT_AREA,CrmField.UITYPES.WEBSITE,CrmField.UITYPES.EMAIL,CrmField.UITYPES.ACCOUNT_NAME_LOOKUP,CrmField.UITYPES.CAMPAIGN_NAME_LOOKUP,CrmField.UITYPES.PRODUCT_NAME_LOOKUP,CrmField.UITYPES.CONTACT_LOOKUP,CrmField.UITYPES.VENDOR_NAME_LOOKUP,CrmField.UITYPES.POTENTIAL_ID,CrmField.UITYPES.SALESORDER_ID,CrmField.UITYPES.CONTACT_ID,CrmField.UITYPES.QUOTE_ID,CrmField.UITYPES.ROLE_NAME,CrmField.UITYPES.LOOK_UP_ENTITY,CrmField.UITYPES.MULTISELECT_LOOK_UP,CrmField.UITYPES.PHONE],equals:[CrmField.UITYPES.SERVICE_DURATION,CrmField.UITYPES.DATE,CrmField.UITYPES.DATE_LONG,CrmField.UITYPES.NUMERIC_FIELD,CrmField.UITYPES.LONG_INTEGER,CrmField.UITYPES.CURRENCY,CrmField.UITYPES.AGGREGATE_FIELD,CrmField.UITYPES.PERCENT,CrmField.UITYPES.DECIMAL,CrmField.UITYPES.BIG_DECIMAL,CrmField.UITYPES.RECORD_CURRENCY,98,CrmField.UITYPES.BOOLEAN_DEF,CrmField.UITYPES.BOOLEAN_DEF_NOT,CrmField.UITYPES.AUTONUMBER],in:[CrmField.UITYPES.PRODUCT_HANDLER,CrmField.UITYPES.GLOBAL_TAX,999,CrmField.UITYPES.STAGE,CrmField.UITYPES.USERLOOKUP,CrmField.UITYPES.TAGS,CrmField.UITYPES.MULTI_PICK_LIST,CrmField.UITYPES.PICK_LIST,CrmField.UITYPES.OWNER,CrmField.UITYPES.CREATED_BY,CrmField.UITYPES.WIZARD,CrmField.UITYPES.LAYOUT],between:[CrmField.UITYPES.DATE_TIME1,CrmField.UITYPES.CREATED_TIME,CrmField.UITYPES.DATETIME,CrmField.UITYPES.DATE_TIME2,CrmField.UITYPES.DATE_TIME_LONG]}}),lookupDatatypeComparator:Lyte.attr("object",{default:{starts_with:["text","textarea","phone","email","website","lookup"],equals:["boolean","currency","double","date","integer","bigint","autonumber"],in:["ownerlookup","picklist","userlookup","multiuserlookup","multiselectpicklist"],between:["datetime"],formula:["formula"]}})}},init:function(){var e=Object.assign(this.data.uiTypeMapping,{999:"layout",96:"picklist",80:"number",21:"text",22:"text",25:"text"});this.setData("uiTypeMapping",e),this.lookupInit(this,this.getData("modId"),!0),this.lookupTableHeightCalc()},methods:{OnColumnListSearch:function(e){this.setData("showColListFooter",!!e.length)},setScrollableHeight:function(){var e=renderingUtils.windowHeight/2;$L(".lookupColumnCustComp .lyteSortableParent").css("max-height",e),$L("crux-column-list .divTopBorder").scrollTop(0),$L("crux-column-list lyte-search")[0].setValue("")},associateSearchClick:function(e){var t=e.querySelector(".searchIcon"),o=this;t.onclick=function(){var t=e.querySelector("input");o.actions.searchSetValue.call(o,void 0,void 0,void 0,t.value,!0)}},fetchModuleData:function(e){return store.findRecord("module",e,{include:"custom_view,business_card_fields,lookup_field_properties"}).then((function(e){return"Contacts"!==e[0].api_name&&"Leads"!==e[0].api_name||(store.peekRecord("field",e[0].display_field.id).field_label="Contacts"===e[0].api_name?I18n.getMsg("Contact Name",e[0].singular_label):I18n.getMsg("Lead Name",e[0].singular_label)),e[0]}))},uncheckColumn:function(e){if(e.display_field||"aTag"===e.yieldName)return!1},setLookupFilterConditions:function(e){var t=this.getData("lookupDatatypeComparator"),o={picklist:I18n.getMsg("crm.select"),user:I18n.getMsg("crm.options.none"),80:_cruxUtils.getI18n("crm.label.type.minutes")};e.setData({cxPropNoValidation:!0,cxPropShowClear:!0,cxPropDisableFilter:!0,filterAtfirst:!1,cxPropComparator:!1,cxPropDatatypeComparator:t,cxPropPlaceHolder:o,cxPropCurrency:Crm.userDetails.BASE_CURRENCY}),e.setMethods("picklistAdd",this.pickListValidator)},clearFilter:function(){this.getData("criteria")&&!this.fromSearchBar&&(this.setData({criteria:"",currentPage:1,navigatedRec:0}),this.validateSearchValue()&&this.renderPage())},applyFilter:function(e){var t,o=e.$node.component.getFilterQuery();if(this.filterValueIds=[],o&&o.group_operator){var a=o.group?o.group.length:0;t=a?"(":"";for(var r=0;r<a;r++){if(n=store.peekRecord("field",o.group[r].field.id),o.group[r].field.api_name.includes(".")&&(o.group[r].field.api_name=n.api_name),[999,208,207,209].includes(n.ui_type)&&(o.group[r].comparator="in"),0===o.group[r].value.indexOf(".")&&(["double","integer","currency"].includes(n.data_type)||["double","integer","currency"].includes(n.formula.return_type))&&(o.group[r].value="0"+o.group[r].value),!this.validateSearchValue(o.group[r].value,n.field_label,"formula"===n.data_type?n.formula.return_type:n.data_type,n))return void(this.filterValueIds=[]);if("object"==typeof o.group[r].value&&"object"==typeof o.group[r].value[0]){var i=[];if(209===n.ui_type)for(var s of o.group[r].value)s.name&&i.push(s.name);else for(var s of o.group[r].value)s.id&&i.push(s.id)}else if(96===n.ui_type)for(var l of(i=[],o.group[r].value))i.push(n.pick_list_values.find((e=>e.display_value==l)).id);else"datetime"!==n.data_type&&("formula"!==n.data_type||"datetime"!==n.formula.return_type)||o.group[r].value.toString().includes("+")||(o.group[r].value[0]+=Crm.userDetails.TIME_ZONE.replace(".",":"),o.group[r].value[1]+=Crm.userDetails.TIME_ZONE.replace(".",":"));i=(i=i&&i.length?i:o.group[r].value).toString().replace(/[(]/g,"\\(").replace(/[)]/g,"\\)"),t+="("+o.group[r].field.api_name+":"+("equal"===o.group[r].comparator?"equals":o.group[r].comparator)+":"+i+")",i="",t+=r<a-1?"and":")",this.filterValueIds.push(o.group[r].field.id)}}else if(o&&o.field){var n=store.peekRecord("field",o.field.id);if(o.field.api_name.includes(".")&&(o.field.api_name=n.api_name),[999,208,207,209].includes(n.ui_type)&&(o.comparator="in"),0===o.value.indexOf(".")&&(["double","integer","currency"].includes(n.data_type)||["double","integer","currency"].includes(n.formula.return_type))&&(o.value="0"+o.value),!this.validateSearchValue(o.value,n.field_label,"formula"===n.data_type?n.formula.return_type:n.data_type,n))return void(this.filterValueIds=[]);if("object"==typeof o.value&&"object"==typeof o.value[0])if(i=[],209===n.ui_type)for(var s of o.value)s.name&&i.push(s.name);else for(var r of o.value)r.id&&i.push(r.id);else if(96===n.ui_type)for(var l of(i=[],o.value))i.push(n.pick_list_values.find((e=>e.display_value==l)).id);else"datetime"!==n.data_type&&("formula"!==n.data_type||"datetime"!==n.formula.return_type)||o.value.toString().includes("+")||(o.value[0]+=Crm.userDetails.TIME_ZONE.replace(".",":"),o.value[1]+=Crm.userDetails.TIME_ZONE.replace(".",":"));i=(i=i&&i.length?i:o.value).toString().replace(/[(]/g,"\\(").replace(/[)]/g,"\\)"),t="("+o.field.api_name+":"+("equal"===o.comparator?"equals":o.comparator)+":"+i+")",this.filterValueIds.push(o.field.id)}t&&t.length?(this.setData({criteria:t,currentPage:1,navigatedRec:0}),this.fetchFilteredRecords()):(this.setData({criteria:"",currentPage:1,navigatedRec:0}),this.renderPage())},rendNext:function(e){this.renderPage("next",e)},rendPrev:function(e){this.renderPage("prev",e)},searchBarSearch:function(){clearTimeout(this._timeout),this._timeout=setTimeout(function(){var e=this.data.searchBarAttr.searchValue?this.data.searchBarAttr.searchValue.trim():"";this.errorLabel=void 0;var t=this.data.header.find((e=>e.api_name===this.data.searchBarAttr.apiName)).field_label;if(!this.validateSearchValue(e,t))return this.errorLabel=t,!1;if(this.data.searchBarAttr&&e){e=e.replace(/[(]/g,"\\(").replace(/[)]/g,"\\)");var o="("+this.data.searchBarAttr.apiName+":starts_with:"+e+")";this.isProductCodeAvailable&&this.isProductCodeAvailable.api_name&&(o="("+o+"or("+this.isProductCodeAvailable.api_name+":starts_with:"+e+"))"),this.setData({searchBarCriteria:o,currentPage:1,navigatedRec:0}),this.fetchFilteredRecords()}else 0===e.length&&(this.setData({searchBarCriteria:"",currentPage:1,navigatedRec:0}),this.renderPage())}.bind(this),500)},sortColumnsInLookup:function(e){if(e===I18n.getMsg("crm.column.unsort"))this.setData({sortDetails:{},sortedColumn:"",currentPage:1,navigatedRec:0});else{var t=e===I18n.getMsg("crm.column.sort.desc")?"desc":"asc";this.setData("sortDetails",{sort_order:t,sort_by:this.currentSelectedSortColumn.api_name}),this.setData({sortedColumn:this.currentSelectedSortColumn.api_name,currentPage:1,navigatedRec:0})}delete this.currentSelectedSortColumn,this.renderPage()},sortColumnsClose:function(){$L(".sortableColumn").removeClass("sortableColumn"),this.setData({showSortableOptions:!1,availableSort:[]})},selectSingle:function(e,t){this.selectTheSingle(e,t)},showRelatedRecords:function(){this.showRelatedRecords()},closeColumnList:function(){this.saveColumn||$L("crux-column-list")[0].component.clearSelectedFields(),this.saveColumn=!1,this.closeColumnList()}},actions:{showColumnList:function(){this.setData("showColList",!0)},closeColumnList:function(e){"SAVE"===e?(this.saveColumn=!0,this.putModuleData(this.getData("modId"))):"CANCEL"===e&&(this.saveColumn=!1),this.closeColumnList()},filterAction:function(e){this.getData("showFilter")?(this.setData({criteria:"",currentPage:1,navigatedRec:0}),this.renderPage(),this.setData("showFilter",!1),$L(e).removeClass("lookupFilterOpen")):(this.setData("showFilter",!0),this.$node.querySelector("lyte-table").scrollTable(),$L(e).addClass("lookupFilterOpen"))},sortColumn:function(e){if(this.currentSelectedSortColumn=e,e.sortable&&e.api_name){$L(".sortableTarget").removeClass("sortableTarget");var t=document.getElementById(e.id).children[0];$L(t).addClass("sortableTarget");var o=[I18n.getMsg("crm.column.sort.asc"),I18n.getMsg("crm.column.sort.desc")];if(e.api_name===this.getData("sortDetails").sort_by&&this.getData("sortDetails").sort_order){var a=[];a.push("asc"===this.getData("sortDetails").sort_order?I18n.getMsg("crm.column.sort.desc"):I18n.getMsg("crm.column.sort.asc")),a.push(I18n.getMsg("crm.column.unsort")),this.setData("availableSort",a)}else this.setData("availableSort",o);this.setData("showSortableOptions",!0)}},selectSingle:function(e,t){this.selectTheSingle(e,t)},closeModal:function(){this.close()}},isBigLookupTable:function(){var e=this.getData("header").length;$(".lookupFieldList"),e>6?this.setData("bigLookupTable",!0):this.setData("bigLookupTable",!1)},getRecs:function(){var e=Lyte.deepCopyObject(this.getData("module")),t=e.fields,o=t.length,a=this.data.relatedRecordData.length,r="",i=[];if(a&&"Campaigns"!=e.api_name){i=[];for(var s=0;s<a;s++)this.data.relatedRecordData[s].apiName&&!i.includes(this.data.relatedRecordData[s].apiName)&&i.push(this.data.relatedRecordData[s].apiName)}if(this.getData("parentModule")){var l,n=store.peekRecord("module",moduleRecordMapping[this.data.parentModule].id,void 0,void 0,void 0,{getFields:!0});for(l=(n=n&&n.fields?n.fields:"").length,s=0;s<l;s++)n[s].association_details&&Lyte.arrayUtils(this.data.fieldOfLookupVal,"push",n[s].association_details)}for(s=0;s<o;s++)if(17===t[s].show_type||0===t[s].show_type&&"FULLNAME"!==t[s].column_name||!t[s].filterable&&"DESCRIPTION"!==t[s].column_name&&"SHAREDTO"!==t[s].column_name&&"zohoshowtime__Total_Revenue"!==t[s].api_name||!t[s].searchable||t[s].virtual_field||null!==t[s].crypt||!t[s].visible||!t[s].available_in_user_layout||("Cases"===e.module_name||"Solutions"===e.module_name)&&"ADDCOMMENT"===t[s].column_name||"Tasks"===e.module_name&&this.data.tasksHiddenFields.indexOf(t[s].column_name)>-1||"Appointments"===e.module_name&&this.data.appointmentHiddenFields.indexOf(t[s].column_name)>-1||"Services"===e.module_name&&this.data.servicesHiddenFields.indexOf(t[s].column_name)>-1||e.module_name.startsWith("Orchestration")&&"SMOWNERID"===t[s].column_name||"DealHistory"===e.module_name&&"LASTACTIVITYTIME"===t[s].column_name)t.splice(s,1),s--,o--;else{if("Services"===e.module_name&&a&&"Status"===t[s].api_name&&t[s].pick_list_values.length)for(var p=0;p<a;p++)switch(p){case 0:this.data.relatedRecordData[p].id="multi",this.data.relatedRecordData[p].criteria="(("+this.data.relatedRecordData[p].apiName+":equals:"+t[s].pick_list_values[0].id+")or("+this.data.relatedRecordData[p].apiName+":equals:"+t[s].pick_list_values[1].id+"))";break;case 1:this.data.relatedRecordData[p].id="all";break;case 2:this.data.relatedRecordData[p].id=t[s].pick_list_values[0].id;break;case 3:this.data.relatedRecordData[p].id=t[s].pick_list_values[1].id;break;case 4:this.data.relatedRecordData[p].id=t[s].pick_list_values[2].id}if(this.data.defaultCriteria.length)for(var c of this.data.defaultCriteria)(c.api_name==t[s].api_name||c.parentCriteria)&&(r=r.length?r+"and":r,r+="("+c.api_name+":"+c.comparator+":"+c.value+")",this.data.defaultCriteria.splice(this.data.defaultCriteria.indexOf(c),1));if(a&&i.length){var d=i.indexOf(t[s].api_name);d>-1&&i.splice(d,1)}t[s].cxPropFilterZcqa="lookupFiltersInput_"+t[s].api_name}if(this.data.defaultCriteria=r||"",function(e){var t=this.getData("lookupViewRestrictedColumns"),o=this.getData("moduleName"),a=this.getData("lookupViewRestrictedModuleVsColumn");let r=e.length;for(var i=0;i<r;i++)(t.contains(e[i].column_name)||o in a&&a[o].contains(e[i].column_name)||13===e[i].show_type&&["Segment_Label","Recency","Frequency","Monetary"].includes(e[i].api_name))&&(e.splice(i,1),i--,r--)}.bind(this)(e.fields),this.setData("availableFields",e.fields),this.lookupFilterQueryHandling(),this.overRideFieldsForTable(),a&&i.length)for(s=0;s<a;s++)this.data.relatedRecordData[s].apiName&&i.includes(this.data.relatedRecordData[s].apiName)&&(Lyte.arrayUtils(this.getData("relatedRecordData"),"splice",s,1),s--,a--);1===a&&"all"===this.data.relatedRecordData[0].id&&(this.data.relatedRecordData="");var u=$(".relatedDropdownLookup");this.data.relatedRecordData.length?(this.setData("selectedRelatedRecordIndex","0"),u.attr("lt-prop-selected","1"),u.attr("lt-prop-selected","0"),this.showRelatedRecords(),u.show()):(u.hide(),this.renderPage())},renderPage:function(e,t){if(this.getData("criteria")||this.getData("relatedRecordCriteria")||this.getData("searchBarCriteria")||this.getData("defaultCriteria"))this.fetchFilteredRecords(e,t);else{var o=this.getData("currentPage");"next"===e?o++:"prev"===e&&o--;var a={page:o,per_page:this.getData("perPage"),fields:this.getData("requiredFieldsForApi"),approved:"both",approval_state:"approved,approval_process_pending,approval_process_rejected"};Object.keys(this.getData("sortDetails")).length>1&&Object.assign(a,{sort_order:this.getData("sortDetails").sort_order,sort_by:this.getData("sortDetails").sort_by}),Object.keys(this.lookupFilterQueryDetails).length&&this.lookupFilterQueryDetails.query_id&&(a.query_id=this.lookupFilterQueryDetails.query_id),"undefined"!=typeof commonUtils&&commonUtils.showHideLoadingDiv&&commonUtils.showHideLoadingDiv(!0),this.relatedListMode?this.fetchRelatedListRecords(moduleRecordMapping.Contacts.id,this.selectedRecord,this.getData("moduleName"),a).then(function(o){var a=o.data,r=!(!a||!o.meta.more_records)&&o.meta.more_records;this.updateNavigators(a,r,e,t)}.bind(this)):this.fetchRecords(this.getData("modId"),a).then(function(o){var a=o&&o.length;o=a?o:[];var r=!!a&&o.$.meta.more_records;this.updateNavigators(o,r,e,t)}.bind(this),(function(){"undefined"!=typeof commonUtils&&commonUtils.showHideLoadingDiv&&commonUtils.showHideLoadingDiv(!1)}))}},putModuleData:function(e){var t=this.$node.querySelector("lyte-popover").component.childComp.querySelector("CRUX-COLUMN-LIST"),o=store.peekRecord("module",e),a=t.component.getSelectedFields(),r=o.lookup_field_properties.fields;this.data.currentSelectedFields=a;var i={},s=[],l={},n=function(e){for(var t=e.length,o=[],a=0;a<t;a++)l={sequence_number:a+1,api_name:e[a].api_name,id:e[a].id},o.push(l);return o};if(s=n(a),this.getData("selectedFields").length||(this.data.selectedFields=n(o.lookup_field_properties.fields)),JSON.stringify(s)!==JSON.stringify(this.getData("selectedFields"))){for(var p=r.length,c=function(e,t){return e.filter((function(e){return e.id===t}))[0]},d=0;d<p;d++)c(a,r[d].id)||(l={_delete:!0,api_name:r[d].api_name,id:r[d].id},s.push(l));this.fieldsToBeDeleted&&this.fieldsToBeDeleted.length&&(s=s.concat(this.fieldsToBeDeleted)),i.fields=s,o.$.set("lookup_field_properties",i),"undefined"!=typeof commonUtils&&commonUtils.showHideLoadingDiv&&commonUtils.showHideLoadingDiv(!0),o.$.save().then(function(){store.unloadAll(e),this.data.selectedFields=o.lookup_field_properties.fields,this.data.selectedFields.splice(this.getData("currentSelectedFields").length),o.lookup_field_properties.fields=this.getData("currentSelectedFields"),this.fieldsToBeDeleted=[],this.overRideFieldsForTable(),this.getData("showFilter")&&(this.setData({showFilter:!1,criteria:"",currentPage:1,navigatedRec:0}),$L(".lookupFilterOpen").removeClass("lookupFilterOpen")),this.renderPage()}.bind(this),function(){t.component.clearSelectedFields();var e=t.component.getSelectedFields();o.lookup_field_properties.fields=e,this.data.selectedFields={},"undefined"!=typeof commonUtils&&commonUtils.showHideLoadingDiv&&commonUtils.showHideLoadingDiv(!1),renderingUtils.displayPermissionDenied()}.bind(this))}},fetchRecords:function(e,t,o,a,r){return new Promise((function(i,s){store.findAll(e,t,o,a,r).then((function(e){i(e)}),(function(e){var t=JSON.parse(e.response);"NO_PERMISSION"===t.code?renderingUtils.displayPermissionDenied():"INVALID_QUERY"!==t.code&&"INVALID_DATA"!==t.code||(commonUtils.showHideLoadingDiv(!1),crmui.showMsgBand("error",I18n.getMsg("crm.lookup.advance.error.msg"),5e3)),s()}))}))},fetchRelatedListRecords:function(e,t,o,a){return new Promise((function(r,i){store.triggerAction(e,"fetchrelatedList",{entityid:t,relapiname:o},a).then((function(t){t.data=t.data?t.data:[],t.data=t.data?store.pushPayload(e,t.data):[],r(t)}),(function(e){"NO_PERMISSION"===JSON.parse(e.response).code&&renderingUtils.displayPermissionDenied(),i()}))}))},fetchFilteredRecords:function(e,t){var o=this.getData("criteria"),a=this.getData("currentPage"),r={type:"Search",from:"Lookup"};"next"===e?a++:"prev"===e&&a--;var i={page:a,per_page:this.getData("perPage"),fields:this.getData("requiredFieldsForApi"),approved:"both",approval_state:"approved,approval_process_pending,approval_process_rejected"};o&&o.length&&(r.criteria=o),this.getData("relatedRecordCriteria")&&this.getData("relatedRecordCriteria").length&&(r.criteria=r.criteria?r.criteria+"and"+this.getData("relatedRecordCriteria"):this.getData("relatedRecordCriteria")),this.getData("searchBarCriteria")&&this.getData("searchBarCriteria").length&&(r.criteria=r.criteria?r.criteria+"and"+this.getData("searchBarCriteria"):this.getData("searchBarCriteria")),this.getData("defaultCriteria")&&this.getData("defaultCriteria").length&&(r.criteria=r.criteria?r.criteria+"and"+this.getData("defaultCriteria"):this.getData("defaultCriteria")),Object.keys(this.getData("sortDetails")).length>1&&Object.assign(i,{sort_order:this.getData("sortDetails").sort_order,sort_by:this.getData("sortDetails").sort_by}),Object.keys(this.lookupFilterQueryDetails).length&&this.lookupFilterQueryDetails.query_id&&(i.query_id=this.lookupFilterQueryDetails.query_id),"undefined"!=typeof commonUtils&&commonUtils.showHideLoadingDiv&&commonUtils.showHideLoadingDiv(!0),this.relatedListMode?this.searchUsingDO(r.criteria,i,e,t):this.fetchRecords(this.getData("modId"),i,!1,void 0,r).then(function(o){var a=o&&o.length;o=a?o:[];var r=!!a&&o.$.meta.more_records;this.updateNavigators(o,r,e,t)}.bind(this),(function(){"undefined"!=typeof commonUtils&&commonUtils.showHideLoadingDiv&&commonUtils.showHideLoadingDiv(!1)}))},selectTheSingle:function(e){var t,o=this.getData("record"),a=this.getData("displayField");let r=o.length;for(var i=0;i<r;i++)if(e===o[i].id){t="Full_Name"===a?o[i][a]?o[i][a]:o[i].First_Name?o[i].First_Name+" "+o[i].Last_Name:o[i].Last_Name:o[i][a],this.setData({lookupSingle:t,selectedSingle:e,currentSelectedRecord:o[i]}),this.data.currentSelectedRecord.displayName=t;break}this.bool||(this.setData("renderLookup",!1),this.close(),this.getMethods("onSelect")&&this.executeMethod("onSelect"),this.getMethods("onValueChange")&&(this.setData("cxPropValue",{id:this.getData("selectedSingle"),name:this.getData("lookupSingle")}),this.executeMethod("onValueChange",this.getData("currentSelectedRecord"))))},close:function(){store.peekRecord("module",this.data.modId).lookup_field_properties=void 0,this.setData("show",!1)},updateNavigators:function(e,t,o,a){this.setData({record:e,hasMoreRecords:t}),"next"===o?(this.setData("currentPage",this.getData("currentPage")+1),this.setData("navigatedRec",a),this.setData("navigatorRecordLen",t?this.getData("navigatorRecordLen")+this.getData("perPage"):this.getData("navigatorRecordLen")+e.length-1)):"prev"===o&&(this.setData("currentPage",this.getData("currentPage")-1),this.setData("navigatedRec",a),this.setData("navigatorRecordLen",t?this.getData("currentPage")*this.getData("perPage")+1:this.getData("perPage")*(this.getData("currentPage")-1)+recs.length)),1!==this.getData("currentPage")||"false"!==t&&t?1===this.getData("currentPage")&&t&&this.setData("navigatorRecordLen",this.getData("perPage")+1):this.setData("navigatorRecordLen",e.length),this.getData("currentPage")>=100&&this.setData({hasMoreRecords:!1,navigatorRecordLen:e.length}),"undefined"!=typeof commonUtils&&commonUtils.showHideLoadingDiv&&commonUtils.showHideLoadingDiv(!1),this.executeMethod("onDataLoaded")},searchUsingDO:function(e,t,o,a){var r=this.getData("lookupUrlForCampaign"),i=e?"searchcriteria=":"",s=t.page,l=t.sort_order?"sort_"+t.sort_order:void 0,n=t.sort_by;r+="&luceneSearch=true&isFromFilterView=true",s&&(r+="&FROM_INDEX="+(s*this.data.perPage-9)+"&TO_INDEX="+s*this.data.perPage),l&&n&&(r+="&sortColumnString="+n+"&sortOrderString="+l),$L("#navigateBack, #navigateForward").addClass("pEvents"),i+=e?encodeURIComponent(e):"",$.ajax({url:r,type:"POST",data:i,success:function(e){if("error"===e.status)crmui.showMsgBand("error",I18n.getMsg("crm.lookup.advance.error.msg"),5e3);else{e.body=e.body?e.body:[],e.body=e.body?store.pushPayload(this.data.modId,e.body):[],this.setData("record",e.body),this.setData("hasMoreRecords",!!e.hasMoreRecords&&e.hasMoreRecords),this.executeMethod("onDataLoaded");var t=e.body?e.body:[],r=!!e.hasMoreRecords&&e.hasMoreRecords;this.updateNavigators(t,r,o,a)}$L("#navigateBack, #navigateForward").removeClass("pEvents"),$L(".entityLookupTable .lyteTableScroll").resetScrollbar()}.bind(this),error:function(e){commonUtils.showHideLoadingDiv(!1),401===e.status&&(renderingUtils.displayPermissionDenied(),$("crm-entity-lookup")[0].component.setData("ltPropShow",!1)),$L("#navigateBack, #navigateForward").removeClass("pEvents")}})},validateSearchValue:function(e,t,o,a){if(this.errorLabel)return _cruxUtils.showCustomAlert({params:{ltPropSecondaryMessage:I18n.getValueForFields("crm.field.valid.check",this.errorLabel),ltPropWrapperClass:"lookupErrorMsg"}}),!1;if("string"==typeof e&&/[\uD800-\uDBFF][\uDC00-\uDFFF]+$/gi.test(e)){if(0===(e=e.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/gi,"")).trim().length)return _cruxUtils.showCustomAlert({params:{ltPropSecondaryMessage:I18n.getValueForFields("crm.field.valid.check",t),ltPropWrapperClass:"lookupErrorMsg"}}),!1}else"string"==typeof e&&e.length&&(e=e.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/gi,"").trim());return"date"===o&&!Utils.isValidDate("YYYY-MM-DD",e)||"datetime"===o&&!Utils.compareDateandTime(e[0],e[1])||"string"==typeof e&&/^[`~!@#$%^&*()\-_=+\\|\][{}'";:/?.,><]+$/.test(e)&&"date"!==o&&"datetime"!==o&&"picklist"!==o&&"double"!==o&&"currency"!==o?(_cruxUtils.showCustomAlert({params:{ltPropSecondaryMessage:I18n.getValueForFields("crm.field.valid.check",t),ltPropWrapperClass:"lookupErrorMsg"}}),!1):(this.errorLabel=void 0,!0)},showRelatedRecords:function(){this.relatedListMode=!1;var e=this.getData("relatedRecordData")[this.data.selectedRelatedRecordIndex];if(this.setData({searchDoMode:!1,currentPage:1,navigatedRec:0}),"multi"===e.id&&e.criteria)this.setData("relatedRecordCriteria",e.criteria);else if(this.data.lookupUrlForCampaign&&this.getData("lookupUrlForCampaign").length&&"all"!==e.id)this.relatedListMode=!0,this.selectedRecord=e.id;else if(e.id&&"all"!==e.id){var t="("+e.apiName+":equals:"+e.id+")";this.setData("relatedRecordCriteria",t)}else this.getData("criteria")?this.setData({relatedRecordCriteria:""}):this.setData({relatedRecordCriteria:"",criteria:""});this.renderPage()},closeColumnList:function(){this.setData("showColList",!1),this.isBigLookupTable()},pickListValidator:function(e,t,o){return!(o.length>19&&(crmui.showMsgBand("error",_cruxUtils.getI18n("crm.las.error.picklist.maxlimit"),3e3),1))},lookupTableHeightCalc:function(){var e=renderingUtils.windowHeight/100*70-30;setTimeout((function(){$L(".lookupLyteTable").css("max-height",e)}),200),setTimeout(function(){$L(".lookupLyteTable .cruxTableStructure").height()>=e?this.setData("scrollableTable",!0):this.setData("scrollableTable",!1)}.bind(this),1e3)},overRideFieldsForTable:function(){var e,t=this.getData("module"),o=!1;this.getData("cxPropFields")?(o=!0,e=this.getData("cxPropFields")):t.lookup_field_properties&&t.lookup_field_properties.fields&&(o=!0,e=t.lookup_field_properties.fields);var a=function(e,t){return e.filter((function(e){return e.id===t}))[0]};let r=e.length;this.fieldsToBeDeleted=[];for(var i=0;i<r;i++){if(o){var s=a(this.data.availableFields,e[i].id);s||this.fieldsToBeDeleted.push({_delete:!0,api_name:e[i].api_name,id:e[i].id}),e[i]=s}if(e[i]){if(e[i].id===t.display_field.id||"POTENTIAL_NAME"===e[i].column_name||"POTENTIALID"===e[i].column_name){if(e[i].yieldName="aTag",e[i].mandatoryColumn="true",e[i].id===t.display_field.id&&e[i].field_label){e[i].display_field=!0;var l={displayMsg:I18n.getMsg("crm.lookup.searchby.placeholder",e[i].field_label),apiName:e[i].api_name};if("Products"===this.data.module.api_name){for(var n of this.data.availableFields)if("Product_Code"===n.api_name&&(n.profiles&&n.profiles[0]&&"hidden"!==n.profiles[0].permission_type||n.visible)){this.isProductCodeAvailable=n;break}this.isProductCodeAvailable&&(l.displayMsg+=" / "+this.isProductCodeAvailable.field_label)}this.data.searchBarAttr.displayMsg!==l.displayMsg&&this.setData("searchBarAttr",l)}if(!o)break}"lookup"===e[i].data_type?e[i].yieldName="lookup":999===e[i].ui_type?e[i].yieldName="territory":"integer"!==e[i].data_type&&"bigint"!==e[i].data_type||(e[i].cxPropDecimalAllowed=!1),e[i].sortable||(e[i].cxPropClass="cursorDefault"),this.getData("lookupUitypeComparator").in.includes(e[i].ui_type)?(e[i].freeze=!0,8!==e[i].ui_type&&221!==e[i].ui_type&&20!==e[i].ui_type&&55!==e[i].ui_type&&e[i].ui_type!==CrmField.UITYPES.LAYOUT&&e[i].ui_type!==CrmField.UITYPES.WIZARD&&(e[i].noOverride=!0),e[i].ui_type===CrmField.UITYPES.LAYOUT||e[i].ui_type===CrmField.UITYPES.WIZARD||999===e[i].ui_type?e[i].type="multisearch":e[i].type="multiple",999===e[i].ui_type&&(e[i].cxTypeMapping="layout",e[i].modelReq="territory"),e[i].filterClass="preventWheel",e[i].maxLimit="20",e[i].disableExtraValue=!0):this.getData("lookupUitypeComparator").starts_with.includes(e[i].ui_type)?e[i].maxLength=200:this.getData("lookupUitypeComparator").equals.includes(e[i].ui_type)&&(e[i].maxLength=20),209===e[i].ui_type&&(e[i].tagWidth="90px")}else e.splice(i,1),i--,r--}this.setData("header",e),setTimeout(function(){this.isBigLookupTable()}.bind(this),210)},rollBackFilterComponent:function(){var e=this.$node.querySelector("crux-lookupfilter-component");if(e&&this.getData("showFilter")&&this.filterValueIds){for(var t,o=(e=e.component).getBackupFilter(this.data.header),a=o.length,r=0;r<a;r++)this.filterValueIds.includes(o[r].id)||(o.splice(r,1),r--,a--,t=!0);t&&(e.setData("getBackfilter",o),this.fromSearchBar=!0,e.$node.querySelector(".cxLookupClearFilter").click(),this.fromSearchBar=!1,e.displayFilter())}},lookupFilterQueryHandling(){var e=this.data.cxPropField;this.lookupFilterQueryDetails={},e&&e.lookup&&e.lookup.query_details&&(this.lookupFilterQueryDetails=e.lookup.query_details)},observeValue:function(){if(this.getData("cxPropValue"))try{this.setData("value",JSON.parse(this.getData("cxPropValue"))),this.setData("selectedSingle",this.getData("value").id)}catch(e){this.setData("value",this.data.cxPropValue),this.setData("selectedSingle",this.data.value.id)}}.observes("cxPropValue").on("init"),observeFieldsForApi:function(){this.setData("requiredFieldsForApi",[]);var e=this.getData("header");for(var t of(this.getData("cxPropAllFieldsNeeded")&&(e=this.getData("module").fields),e))this.data.requiredFieldsForApi.push(t.api_name);var o=this.getData("cxPropDefaultFields")&&this.getData("cxPropDefaultFields").api_names?this.getData("cxPropDefaultFields").api_names:[],a=this.getData("cxPropDefaultFields")&&this.getData("cxPropDefaultFields").id?this.getData("cxPropDefaultFields").id:[];if(Object.keys(a))for(var r of a){var i=store.peekRecord("field",r);i&&i.api_name&&(o.includes(i.api_name)||o.push(i.api_name))}if(Object.keys(o))for(var s of o)this.data.requiredFieldsForApi.includes(s)||this.data.requiredFieldsForApi.push(s);var l=this.getData("lookupFieldId")?this.getData("lookupFieldId"):this.data.cxPropField&&this.data.cxPropField.id?this.data.cxPropField.id:"";if(l){for(var n of this.data.fieldOfLookupVal)n.lookup_field.id==l&&(this.data.requiredFieldsForApi.includes(n.related_field.api_name)||this.data.requiredFieldsForApi.push(n.related_field.api_name));this.data.requiredFieldsForApi.includes("Currency")||this.data.requiredFieldsForApi.push("Currency")}}.observes("header"),flushDataofComponent:function(){delete this.relatedListMode,delete this.selectedRecord,this.setData({record:[],selectedRelatedRecordIndex:0,relatedRecordData:[],criteria:"",relatedRecordCriteria:"",searchBarCriteria:"",ltPropBindToBody:!1,selectedSingle:"",lookupUrlForCampaign:"",flushView:!1,fieldOfLookupVal:[],lookupSingle:""})}.observes("flushView")},{mixins:["crux-lookup-mixin"]}),Lyte.Component.register("crux-grouper-radio-component",{_template:'<template tag-name="crux-grouper-radio-component"><template is="if" value="{{lyteViewPort}}"><template case="true"><dummy-port-element></dummy-port-element> <div id="cruxLoadingElem"></div> <dummy-port-element></dummy-port-element></template><template case="false"> <template is="switch" value="{{cxPropFrom}}"><template case="view">{{cxPropValue}}</template><template case="create"> <template is="if" value="{{expHandlers(expHandlers(cxPropFrom,\'===\',&quot;create&quot;),\'&amp;&amp;\',cxPropField[cxPropFieldKey])}}"><template case="true"> <div class="cxElementLabel {{cxPropFieldLabelClass}}"> {{cxPropField[cxPropFieldKey]}} <template is="if" value="{{cxPropInfoTooltip}}"><template case="true"> <span class="dIB vam cxInfoIcon" onmouseenter="{{action(\'showInfoTooltip\',this)}}"></span> <lyte-hovercard lt-prop-placement="topLeft" lt-prop-keep-alive="true" lt-prop-popover-wrapper-class="cxElementsHovercard" lt-prop-origin-elem=".cxCurrentHovercard" on-hovercard-hide="{{method(\'hideInfoTooltip\')}}"> <template is="registerYield" yield-name="hoverCardYield"> <lyte-hovercard-content class="cxElementsHoverCardContent"> {{cxPropInfoTooltip}} </lyte-hovercard-content> </template> </lyte-hovercard> </template></template> </div> </template></template> <div class="cxElementValue {{if(ifEquals(cxPropDirection,\'vertical\'),\'cxGrouperVertical\',\'cxGrouperHorizontal\')}}"> <template is="for" items="{{cxPropOptions}}" item="item" index="index"> <lyte-radiobutton lt-prop-type="{{cxPropType}}" id="{{cxPropId}}" lt-prop-class="{{cxPropClass}}" class="radio_button" lt-prop-title="{{cxPropTooltip}}" lt-prop-tooltip-config="{&quot;position&quot;: &quot;followcursor&quot;, &quot;appearance&quot;: &quot;box&quot;}" lt-prop-tooltip-style="margin: 10px;" lt-prop-name="{{cxPropName}}" lt-prop-fire-on-init="{{cxPropFireOnInit}}" lt-prop-value="{{item[cxPropDisplayValue]}}" lt-prop-label="{{item[cxPropDisplayValue]}}" lt-prop-label-class="{{cxPropLabelClass}}" lt-prop-disabled="{{cxPropDisabled}}" data-zcqa="{{cxPropZcqa}}_{{item[cxPropDisplayValue]}}" on-changed="{{method(\'onRadioValueChanged\',item[cxPropDisplayValue])}}" on-before-checked="{{method(\'beforeCheckedRadio\',item[cxPropDisplayValue])}}" on-checked="{{method(\'onCheckedRadio\',item[cxPropDisplayValue])}}" on-before-unchecked="{{method(\'beforeUnchecked\',item[cxPropDisplayValue])}}" on-unchecked="{{method(\'onUncheckedRadio\',item[cxPropDisplayValue])}}"></lyte-radiobutton> </template><template is="if" value="{{isError}}"><template case="true"> <crux-error-message error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" class="{{cxPropErrorClass}}"> <template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield"></lyte-yield></template> </crux-error-message> </template></template> </div> </template></template> </template></template></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]},{type:"componentDynamic",position:[4]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{view:{dynamicNodes:[{type:"text",position:[0]}]},create:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"for",position:[3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"attr",position:[3,2]},{type:"if",position:[3,2],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["lyteViewPort","cxPropValue","cxPropFrom","cxPropField","cxPropOptions","cxPropDisabled","cxPropFieldKey","cxPropZcqa","cxPropId","cxPropName","cxPropType","cxPropErrorMessage","cxPropClass","cxPropLabelClass","cxPropFieldLabelClass","cxPropDisplayValue","selectedValue","isError","cxPropClearErrorMessage","cxPropErrorYield","cxPropEmptyValue","cxPropDirection","cxPropInfoTooltip","cxPropTooltip","selected","cxPropErrorClass"],data:function(){return{lyteViewPort:Lyte.attr("boolean",{default:!1}),cxPropValue:Lyte.attr("string"),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropField:Lyte.attr("object",{default:{}}),cxPropOptions:Lyte.attr("array"),cxPropDisabled:Lyte.attr("boolean",{default:!1}),cxPropFieldKey:Lyte.attr("string",{default:""}),cxPropZcqa:Lyte.attr("string",{default:""}),cxPropId:Lyte.attr("string",{default:""}),cxPropName:Lyte.attr("string",{default:""}),cxPropType:Lyte.attr("string",{default:"default"}),cxPropErrorMessage:Lyte.attr("string"),cxPropClass:Lyte.attr("string"),cxPropLabelClass:Lyte.attr("string"),cxPropFieldLabelClass:Lyte.attr("string",{default:""}),cxPropDisplayValue:Lyte.attr("string",{default:"display_label"}),selectedValue:Lyte.attr("string"),isError:Lyte.attr("boolean",{default:!1}),cxPropClearErrorMessage:Lyte.attr("boolean",{default:!0}),cxPropErrorYield:Lyte.attr("boolean",{default:!1}),cxPropEmptyValue:Lyte.attr("string"),cxPropDirection:Lyte.attr("string",{default:"horizontal"}),cxPropInfoTooltip:Lyte.attr("string",{default:""}),cxPropTooltip:Lyte.attr("string",{default:""}),selected:Lyte.attr("string"),cxPropErrorClass:Lyte.attr("string")}},init:function(){var e=this.getData("cxPropFrom");"view"==e&&!this.getData("cxPropValue")&&this.getData("cxPropEmptyValue")?this.setData("cxPropValue",this.getData("cxPropEmptyValue")):"create"===e&&this.getData("cxPropDisabled")&&this.setData("cxPropTooltip",_cruxUtils.getI18n("crm.lable.read.only"))},getValue:function(){return this.getData("selected")},validate:function(){return!(!this.getData("selected")&&this.getData("cxPropField").required&&(this.getMethods("onError")?this.executeMethod("onError",this.errorCodes.ERR01,this):(this.getData("cxPropErrorMessage")||this.setData("cxPropErrorMessage",_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(_this.getData("cxPropField").field_label))),this.setData("isError",!0)),1))},obsValue:function(){var e=this.getData("cxPropValue");if(e&&"create"===this.getData("cxPropFrom")){var t=this.$node.getElementsByClassName("radio_button");if(t[0])for(var o=0;o<t.length;o++)t[o].getAttribute("lt-prop-value")===e&&t[o].setAttribute("lt-prop-checked",!0)}}.observes("cxPropValue","lyteViewPort").on("didConnect"),actions:{showInfoTooltip:function(e){this.showHideInfoTooltip(e)}},methods:{onRadioValueChanged:function(e,t,o){this.getMethods("onChanged")&&this.executeMethod("onChanged",e,t,o)},beforeCheckedRadio:function(e,t,o){this.getMethods("onBeforeChecked")&&this.executeMethod("onBeforeChecked",e,t,o)},onCheckedRadio:function(e,t,o){this.setData("selected",e),this.getData("cxPropClearErrorMessage")&&this.setData("isError",!1),this.getMethods("onChecked")&&this.executeMethod("onChecked",e,t,o)},beforeUnchecked:function(e,t,o){this.getMethods("onBeforeUnchecked")&&this.executeMethod("onBeforeUnchecked",e,t,o)},onUncheckedRadio:function(e,t,o){this.getMethods("onUnchecked")&&this.executeMethod("onUnchecked",e,t,o)},hideInfoTooltip:function(){this.showHideInfoTooltip()}}},{mixins:["crux-element-validation"]}),Lyte.Component.register("crux-grouper-checkbox-component",{_template:'<template tag-name="crux-grouper-checkbox-component"><template is="if" value="{{lyteViewPort}}"><template case="true"><dummy-port-element></dummy-port-element> <div id="cruxLoadingElem"></div> <dummy-port-element></dummy-port-element></template><template case="false"> <template is="switch" value="{{cxPropFrom}}"><template case="view">{{cxPropValue}}</template><template case="create"> <template is="if" value="{{expHandlers(expHandlers(cxPropFrom,\'===\',&quot;create&quot;),\'&amp;&amp;\',cxPropField[cxPropFieldKey])}}"><template case="true"> <div class="cxElementLabel {{cxPropFieldLabelClass}}"> {{cxPropField[cxPropFieldKey]}} <template is="if" value="{{cxPropInfoTooltip}}"><template case="true"> <span class="dIB vam cxInfoIcon" onmouseenter="{{action(\'showInfoTooltip\',this)}}"></span> <lyte-hovercard lt-prop-placement="topLeft" lt-prop-keep-alive="true" lt-prop-popover-wrapper-class="cxElementsHovercard" lt-prop-origin-elem=".cxCurrentHovercard" on-hovercard-hide="{{method(\'hideInfoTooltip\')}}"> <template is="registerYield" yield-name="hoverCardYield"> <lyte-hovercard-content class="cxElementsHoverCardContent"> {{cxPropInfoTooltip}} </lyte-hovercard-content> </template> </lyte-hovercard> </template></template> </div> </template></template> <div class="cxElementValue {{if(ifEquals(cxPropDirection,\'vertical\'),\'cxGrouperVertical\',\'cxGrouperHorizontal\')}}"> <template is="for" items="{{cxPropOptions}}" item="item" index="index"> <lyte-checkbox lt-prop-type="{{cxPropType}}" id="{{cxPropId}}" lt-prop-read-only="{{cxPropReadOnly}}" class="checkbox_input" lt-prop-class="{{cxPropClass}}" lt-prop-title="{{cxPropTooltip}}" lt-prop-tooltip-config="{&quot;position&quot;: &quot;followcursor&quot;, &quot;appearance&quot;: &quot;box&quot;}" lt-prop-tooltip-style="margin: 10px;" lt-prop-name="{{cxPropName}}" lt-prop-value="{{item[cxPropDisplayValue]}}" lt-prop-label="{{item[cxPropDisplayValue]}}" lt-prop-label-class="{{cxPropLabelClass}}" lt-prop-disabled="{{cxPropDisabled}}" data-zcqa="{{cxPropZcqa}}_{{item[cxPropDisplayValue]}}" on-changed="{{method(\'onCheckboxValueChanged\',item[cxPropDisplayValue])}}" on-before-checked="{{method(\'beforeCheckedCheckbox\',item[cxPropDisplayValue])}}" on-checked="{{method(\'onCheckedCheckbox\',item[cxPropDisplayValue])}}" on-before-unchecked="{{method(\'beforeUnchecked\',item[cxPropDisplayValue])}}" on-unchecked="{{method(\'onUncheckedCheckbox\',item[cxPropDisplayValue])}}"></lyte-checkbox> </template><template is="if" value="{{isError}}"><template case="true"> <crux-error-message error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" class="{{cxPropErrorClass}}"> <template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield"></lyte-yield></template> </crux-error-message> </template></template> </div> </template></template> </template></template></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]},{type:"componentDynamic",position:[4]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{view:{dynamicNodes:[{type:"text",position:[0]}]},create:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"for",position:[3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"attr",position:[3,2]},{type:"if",position:[3,2],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["lyteViewPort","cxPropValue","cxPropFrom","cxPropField","cxPropOptions","cxPropDisabled","cxPropFieldKey","cxPropZcqa","cxPropId","cxPropName","cxPropType","cxPropErrorMessage","cxPropClass","cxPropLabelClass","cxPropFieldLabelClass","cxPropDisplayValue","selectedValue","isError","cxPropClearErrorMessage","cxPropErrorYield","cxPropEmptyValue","cxPropDirection","cxPropInfoTooltip","cxPropTooltip","cxPropReadOnly","selected","cxPropErrorClass"],data:function(){return{lyteViewPort:Lyte.attr("boolean",{default:!1}),cxPropValue:Lyte.attr("string"),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropField:Lyte.attr("object",{default:{}}),cxPropOptions:Lyte.attr("array"),cxPropDisabled:Lyte.attr("boolean",{default:!1}),cxPropFieldKey:Lyte.attr("string",{default:""}),cxPropZcqa:Lyte.attr("string",{default:""}),cxPropId:Lyte.attr("string",{default:""}),cxPropName:Lyte.attr("string",{default:""}),cxPropType:Lyte.attr("string",{default:"default"}),cxPropErrorMessage:Lyte.attr("string"),cxPropClass:Lyte.attr("string"),cxPropLabelClass:Lyte.attr("string"),cxPropFieldLabelClass:Lyte.attr("string",{default:""}),cxPropDisplayValue:Lyte.attr("string",{default:"display_label"}),selectedValue:Lyte.attr("string"),isError:Lyte.attr("boolean",{default:!1}),cxPropClearErrorMessage:Lyte.attr("boolean",{default:!0}),cxPropErrorYield:Lyte.attr("boolean",{default:!1}),cxPropEmptyValue:Lyte.attr("string",{default:""}),cxPropDirection:Lyte.attr("string",{default:"horizontal"}),cxPropInfoTooltip:Lyte.attr("string",{default:""}),cxPropTooltip:Lyte.attr("string",{default:""}),cxPropReadOnly:Lyte.attr("boolean",{default:!1}),selected:Lyte.attr("string"),cxPropErrorClass:Lyte.attr("string")}},init:function(){var e=this.getData("cxPropFrom");"view"==(e=this.getData("cxPropFrom"))&&!this.getData("cxPropValue")&&this.getData("cxPropEmptyValue")?this.setData("cxPropValue",this.getData("cxPropEmptyValue")):"create"===e&&(this.getData("cxPropDisabled")||this.getData("cxPropReadOnly"))&&this.setData("cxPropTooltip",_cruxUtils.getI18n("crm.lable.read.only"))},getValue:function(){return this.getData("selected")},validate:function(){return!(!this.getData("selected")&&this.getData("cxPropField").required&&(this.getMethods("onError")?this.executeMethod("onError",this.errorCodes.ERR01,this):(this.getData("cxPropErrorMessage")||this.setData("cxPropErrorMessage",_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(_this.getData("cxPropField").field_label))),this.setData("isError",!0)),1))},obsValue:function(){var e=this.getData("cxPropValue");if(e&&"create"===this.getData("cxPropFrom")){var t=this.$node.getElementsByClassName("checkbox_input");if(t[0])for(var o=0;o<t.length;o++)t[o].getAttribute("lt-prop-value")===e&&t[o].setAttribute("lt-prop-checked",!0)}}.observes("cxPropValue","lyteViewPort").on("didConnect"),actions:{showInfoTooltip:function(e){this.showHideInfoTooltip(e)}},methods:{onCheckboxValueChanged:function(e,t,o){this.getMethods("onValueChange")&&this.executeMethod("onValueChange",e,t,o)},beforeCheckedCheckbox:function(e,t,o){this.getMethods("onBeforeChecked")&&this.executeMethod("onBeforeChecked",e,t,o)},onCheckedCheckbox:function(e,t,o){this.setData("selected",e),this.getData("cxPropClearErrorMessage")&&this.setData("isError",!1),this.getMethods("onChecked")&&this.executeMethod("onChecked",e,t,o)},beforeUnchecked:function(e,t,o){this.getMethods("onBeforeUnchecked")&&this.executeMethod("onBeforeUnchecked",e,t,o)},onUncheckedCheckbox:function(e,t,o){this.getMethods("onUnchecked")&&this.executeMethod("onUnchecked",e,t,o)},hideInfoTooltip:function(){this.showHideInfoTooltip()}}},{mixins:["crux-element-validation"]}),Lyte.Component.register("crux-tag-popover",{_template:'<template tag-name="crux-tag-popover"> <lyte-popover lt-prop-origin-elem=".cxPropOnFocusTag .moreTagOption" class="moreTagOptionPopover" lt-prop-freeze="false" lt-prop-show-close-button="false" lt-prop-show="true" lt-prop-type="box" lt-prop-max-width="200" lt-prop-width="200" lt-prop-wrapper-class="nLvTagsMoreOptionhandle" lt-prop-duration="{{durationUndefined}}" on-close="{{method(\'closePopover\')}}"> <template is="registerYield" yield-name="popover"> <lyte-popover-content class="tagPopoverLab"> <div> <ul class="listview_taglists m0 dIB"> <template is="for" items="{{remainingValues}}" item="val" index="index"> <li class="pL0"> <span class="tagElementList f13 dIB cxAddedTags {{concat(\'cxTag\',cruxGetTagColorIndex(val.color_code))}}">{{val.name}}</span> </li> </template> </ul> </div> </lyte-popover-content> </template> </lyte-popover> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1,1,1]},{type:"for",position:[1,1,1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]}]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}],_observedAttributes:["durationUndefined"],data:function(){return{durationUndefined:Lyte.attr("number",{default:void 0})}},actions:{showMoreTags:function(){clearTimeout(this.getData("cxParent").hideTimeout)},hideMoreTags:function(){this.getData("cxParent").hideTags()}},methods:{closePopover:function(){setTimeout((function(){document.querySelector(".cxPropOnFocusTag").classList.remove("cxPropOnFocusTag")}),10)}}}),Lyte.Component.register("crux-lookup-view-popup",{_template:'<template tag-name="crux-lookup-view-popup"> <lyte-popover lt-prop-show="{{showPopover}}" lt-prop-freeze="false" lt-prop-show-close-button="false" lt-prop-origin-elem=".cxLookupBc" lt-prop-position="right" lt-prop-duration="{{undefinedNumber}}" lt-prop-content-padding="15px"> <template is="yield" yield-name="popover"> <lyte-popover-content> <div onmouseover="{{action(\'mouseOver\',true)}}" onmouseout="{{action(\'mouseOver\')}}"> <div class="cxLookupViewTopSection"> <template is="if" value="{{record.Record_Image}}"><template case="true"> <div id="imgContainer" class="emptyLCPhoto mR10 dIB vam" style="background-position: 0px 0px;"> <img src="{{cxPropRecordImageSrc}}"> </div> </template><template case="false"> <div id="imgContainer" class="cxLookupViewLetterCircle">{{cruxLookupGetFirstChar(record,fields[0].api_name,module)}}</div> </template></template> <div class="cxLookupViewTopContentWrap"> <div class="cxLookupViewTopHeading"> <template is="component" component-name="crux-{{fields[0].cxTypeMapping}}-component" cx-prop-value="{{cruxGetValue(record,fields[0].api_name)}}"></template> </div> <template is="if" value="{{expHandlers(fields[1].businesscard_supported,\'!\')}}"><template case="true"> <span class="cxLookupViewTopDesc"> <template is="if" value="{{expHandlers(fields[2].businesscard_supported,\'!\')}}"><template case="true"> <template is="component" component-name="crux-{{fields[1].cxTypeMapping}}-component" cx-prop-value="{{cruxGetValue(record,fields[1].api_name)}}"></template> - <template is="component" component-name="crux-{{fields[2].cxTypeMapping}}-component" cx-prop-value="{{cruxGetValue(record,fields[2].api_name)}}"></template> </template><template case="false"> <template is="component" component-name="crux-{{fields[1].cxTypeMapping}}-component" cx-prop-value="{{cruxGetValue(record,fields[1].api_name)}}"></template> </template></template> </span> </template></template> </div> </div> <div> <div class="cxDivTable cxLookupExtraDetailsTbl"> <template is="for" items="{{fields}}" item="field" index="index"> <template is="if" value="{{expHandlers(index,\'!=\',0)}}"><template case="true"> <template is="if" value="{{expHandlers(field.businesscard_supported,\'&amp;&amp;\',expHandlers(field.column_name,\'!=\',&quot;ISCALLBILLABLE&quot;))}}"><template case="true"> <div class="cxDivTr"> <div class="cxDivTd cxLookupViewLabel"> {{field.field_label}} </div> <div class="cxDivTd cxLookupViewValue"> <span class="dIB"> <template is="if" value="{{expHandlers(record[field.api_name],\'&amp;&amp;\',record[field.api_name].name)}}"><template case="true"> {{record[field.api_name].name}} </template><template case="false"> <template is="component" component-name="crux-{{field.cxTypeMapping}}-component" cx-prop-value="{{cruxGetValue(record,field.api_name)}}"></template> </template></template> </span> </div> </div> </template></template> </template></template> </template> </div> </div> </div> </lyte-popover-content> </template> </lyte-popover> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1,1]},{type:"if",position:[1,1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]}]},false:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,1,1,3,1,1]},{type:"component",position:[1,1,1,3,1,1],dynamicNodes:[]},{type:"attr",position:[1,1,1,3,3]},{type:"if",position:[1,1,1,3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"component",position:[1],dynamicNodes:[]},{type:"attr",position:[3]},{type:"component",position:[3],dynamicNodes:[]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"component",position:[1],dynamicNodes:[]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,1,3,1,1]},{type:"for",position:[1,1,3,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,1]},{type:"attr",position:[1,3,1,1]},{type:"if",position:[1,3,1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"component",position:[1],dynamicNodes:[]}]}},default:{}}]}},default:{}}]}},default:{}}]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}],_observedAttributes:["show","entityId","fields","record","cxPropBasePath","module","showPopover","cxPropTypeMapping","cxPropRecordImageSrc","undefinedNumber"],data:function(){return{show:Lyte.attr("boolean",{default:!1}),entityId:Lyte.attr("string"),fields:Lyte.attr("array"),record:Lyte.attr("object"),cxPropBasePath:Lyte.attr("string",{default:"undefined"!=typeof Crm&&Crm.getBasePath?Crm.getBasePath():""}),module:Lyte.attr("string"),showPopover:Lyte.attr("boolean",{default:!1}),cxPropTypeMapping:Lyte.attr("object"),cxPropRecordImageSrc:Lyte.attr("string"),undefinedNumber:Lyte.attr("number",{default:void 0})}},observeShow:function(){if(1==this.data.show)if(this.data.entityId!=this._id){this._id=this.data.entityId;var e=this,t="undefined"!=typeof moduleApiMapping?moduleApiMapping:{};this.setData("module",t[this.data.field.lookup.module.api_name]),store.findRecord(e.data.field.lookup.module.id,e.data.entityId,{approved:"both",apply_fields:"business_card",include:"fields",fields:"Record_Image"}).then((function(t){for(var o=t.$.meta.fields,a=0;a<o.length;a++)e.data.cxPropTypeMapping&&e.data.cxPropTypeMapping[o[a].ui_type]?o[a].cxTypeMapping=e.data.cxPropTypeMapping[o[a].ui_type]:o[a].cxTypeMapping="text";e.setData("record",t[0]),e.setData("fields",o),!e.data.cxPropRecordImageSrc&&t[0].Record_Image&&e.setData("cxPropRecordImageSrc",e.data.cxPropBasePath+"/EntityImageAttach.do?action_module="+module.module_name+"&entityId="+t[0].id+"&actionName=readImage&fileId="+t[0].Record_Image),e.setData("showPopover",!0)}))}else this.setData("showPopover",!0);else this.setData("showPopover",!1)}.observes("show").on("init"),actions:{mouseOver:function(e){e?(clearTimeout(this.popoverTimeout),clearTimeout(this.$node.closest("crux-lookup-component").component.popoverTimeout)):(clearTimeout(this.popoverTimeout),this.popoverTimeout=setTimeout(function(){this.setData("show",!1),this.$node.closest("crux-lookup-component").classList.remove("cxLookupBc")}.bind(this),100))}}}),Lyte.Component.registerHelper("cruxLookupGetFirstChar",(function(e,t,o){var a=e[t];return"Leads"!=o&&"Contacts"!=o||(e.First_Name?a=e.First_Name:e.Last_Name&&(a=e.Last_Name)),a.charAt(0)})),Lyte.Component.registerHelper("cruxGetValue",(function(e,t){return e&&t?e[t]:""})),Lyte.Component.register("crux-permission-denied-alert",{_template:'<template tag-name="crux-permission-denied-alert" class="crux-permission-denied-alert"> <lyte-alert data-zcqa="crm_error_page" lt-prop-buttons="{{cxPropButtons}}" lt-prop-button-position="{{cxPropButtonPosition}}" lt-prop-show="{{lbind(cxPropShow)}}" lt-prop-top="{{cxPropTop}}" lt-prop-wrapper-class="cxPermissionDeniedAlert" lt-prop-yield="true" lt-prop-show-close-button="false" on-accept="{{method(&quot;onAcceptAlert&quot;)}}" on-reject="{{method(&quot;onRejectAlert&quot;)}}" on-show="{{method(&quot;onShowAlert&quot;)}}" on-close="{{method(&quot;onCloseAlert&quot;)}}"> <template is="registerYield" yield-name="alert"> <template is="if" value="{{cxPropIcon}}"><template case="true"> <lyte-alert-header class="cxPermDenyWithIcon"> <span class="cxPermissionDeniedIcon dIB vam"></span> {{unescape(cxPropTitle)}} </lyte-alert-header> <lyte-alert-content class="cxPermDenyWithIcon">{{unescape(cxPropReason)}}</lyte-alert-content> <template is="if" value="{{cxPropFooterYield}}"><template case="true"> <lyte-alert-footer> <lyte-yield yield-name="footerYield"></lyte-yield> </lyte-alert-footer> </template></template> </template><template case="false"> <lyte-alert-header> {{unescape(cxPropTitle)}} </lyte-alert-header> <lyte-alert-content> {{unescape(cxPropReason)}}</lyte-alert-content> <template is="if" value="{{cxPropFooterYield}}"><template case="true"> <lyte-alert-footer> <lyte-yield yield-name="footerYield"></lyte-yield> </lyte-alert-footer> </template></template> </template></template> </template> </lyte-alert> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1,3]},{type:"componentDynamic",position:[1]},{type:"text",position:[3,0]},{type:"componentDynamic",position:[3]},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]},{type:"text",position:[3,1]},{type:"componentDynamic",position:[3]},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]},{type:"componentDynamic",position:[1]}],_observedAttributes:["cxPropReason","cxPropTitle","cxPropShow","cxPropIcon","cxPropButtonText","cxPropButtons","cxPropButtonPosition","cxPropTop","cxPropFooterYield"],data:function(){return{cxPropReason:Lyte.attr("string"),cxPropTitle:Lyte.attr("string"),cxPropShow:Lyte.attr("boolean"),cxPropIcon:Lyte.attr("boolean",{default:!0}),cxPropButtonText:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.button.ok")}),cxPropButtons:Lyte.attr("array"),cxPropButtonPosition:Lyte.attr("string",{default:"right"}),cxPropTop:Lyte.attr("string",{default:"0px"}),cxPropFooterYield:Lyte.attr("boolean",{default:!1})}},init:function(){this.data.cxPropButtons||this.setData("cxPropButtons",[{type:"accept",text:this.data.cxPropButtonText,appearance:"default"}])},methods:{onAcceptAlert:function(){this.setData("cxPropShow",!1),this.getMethods("onAccept")&&this.executeMethod("onAccept")},onShowAlert:function(){var e=this.getData("cxPropReason"),t=this.getData("cxPropTitle");e?(e=e.trim().replace(/\s+/g," "),this.setData("cxPropReason",e)):this.setData("cxPropReason",_cruxUtils.getI18n("crm.security.error")),t?(t=t.trim().replace(/\s+/g," "),this.setData("cxPropTitle",t)):this.setData("cxPropTitle",_cruxUtils.getI18n("crm.label.creator.noPermission"));var o=$L(".cxPermissionDeniedAlert lyte-button")[0];o&&o.setAttribute("data-zcqa","crm_permission_error"),this.getMethods("onShow")&&this.executeMethod("onShow")},onCloseAlert:function(){this.getMethods("onClose")&&this.executeMethod("onClose")},onRejectAlert:function(){this.getMethods("onReject")&&this.executeMethod("onReject")}}});
;var speedBenchmarkEnd = +new Date();