Lyte.Component.register("crm-prediction-detail-page",{_template:'<template tag-name="crm-prediction-detail-page"> <template is="if" value="{{expHandlers(prediction.length,\'>\',0)}}"><template case="true"> <div id="crm-prediction-detail-page"> <template is="if" value="{{isnotcanvas}}"><template case="true"> <div class="dIPredictionlabel crm-font-bold dIB mB5 w100p">{{getI18n("crm.predictions.feature.label")}} </div> </template></template> <template is="for" items="{{prediction}}" item="predi" index="index"> <template is="if" value="{{ifEquals(isNewView,true)}}"><template case="true"> <div class="predictionResultParent"> <div class="dIImmediateBestTimeMin dIBestHoverColor predfieldUI crm-font-regular w100p dIB ">{{predi.label}}</div> <div class="w100p dIB"> <div class="dIB crm-font-bold vam mB5 predValuesUI w100p"> <div class="dIB vam mR5"> <template is="if" value="{{predi.uitype}}"><template case="true"> {{getDateTime(predi.value,predi.uitype)}} </template><template case="false"> {{predi.value}} </template></template> </div> <template is="if" value="{{predi.score}}"><template case="true"> <div class="dIB preScoreTrend vam mR5"> <span class="crm-font-regular dIB vam" data-zcqa="predictionScoreInfo">{{getI18n("Score")}} {{predi.score}}</span> </div> </template></template> <span class="dIB ditrending{{predi.trend}}LabelIn vam zcrm_svgIcons"></span> </div> <div class="pregetFactsLink crm-font-regular mT5 cP dIB" data-zcqa="reasoningLink" id="getTheFactsDiv{{predi.id}}" onclick="{{action(\'getFacts\',this,predi.id)}}">{{getI18n("crm.label.setup.banner.label")}}</div> </div> </div> </template><template case="false"> <div class="fL cB"> <span lt-prop-title="{{predi.name}}" data-zcqa="predictionNameInfo" class="fL ico-info-filled svgIcons cP mT4 mR5"></span> <span class="dIImmediateBestTimeMin dIBestHoverColor crm-font-regular col333 cP reasoningSubTitleText fL">{{predi.label}} <template is="if" value="{{predi.uitype}}"><template case="true"> <b class="mL2">{{getDateTime(predi.value,predi.uitype)}}</b> </template><template case="false"> <b class="mL2">{{predi.value}}</b> </template></template> <template is="if" value="{{predi.score}}"><template case="true"> <div class="dIB scoreAndTrend mL5"> <span class="crm-font-semibold dIB predicScr vam" data-zcqa="predictionScoreInfo" lt-prop-title="{{getI18n(&quot;crm.prediction.score.label&quot;)}}">{{predi.score}}</span> </div> </template></template> <span class="dIB ditrending{{predi.trend}}LabelIn vam zcrm_svgIcons"></span> </span> </div> </template></template> </template> <div class="fL cB" style="display:none"> <span id="oldPredictionDetails"> </span> </div> </div> </template></template> <template is="if" value="{{ifEquals(isNewView,true)}}"><template case="true"> <lyte-popover lt-prop-show="{{lbind(predorginShow)}}" lt-prop-scrollable="true" lt-prop-origin-elem="#{{predorginElem}}" lt-prop-wrapper-class="prediction_findfactors" lt-prop-content-padding="0px 0px" id="prediction_findfactors" lt-prop-freeze="false" lt-prop-width="287px" lt-prop-close-on-body-click="true" lt-prop-show-close-button="false"> <template is="registerYield" yield-name="popover"> <lyte-popover-content> <div class="predictionHeader pT15 pB10 pL25 pR25 w100p"> <div data-zcqa="predictionName_reason" class="crm-font-regular col333 reasoningTitleText reasTextTitName">{{name}}</div> </div> <div class="predictiondropContainer pL25 pR25 pT25 pB20 w100p"> <template is="if" value="{{expHandlers(if_gt_len(positive,0),\'||\',if_gt_len(negative,0))}}"><template case="true"> <template is="if" value="{{if_gt_len(positive,0)}}"><template case="true"> <div class="predictionHeadingDrop mB15"><span class=" mR5 vam ico-smiley-happy-small-green dIB svgIcons"></span> <span data-zcqa="positive_reason" class="vam mL1 crm-font-semibold reasoningSubTitleText reasoningSubColor">{{getI18n("crm.prediction.reason.positive")}}</span></div> <ul class="p0 m0 mB20"> <template is="for" items="{{positive}}" item="factor" index="index"> <li class="pL20 mB10 crm-font-regular reasoningSubTitleText reasoningSubColor posListGreen mL5 breakWord"> {{factor.field.field_label}}<template is="if" value="{{expHandlers(factor.comparator,\'===\',&quot;less_than&quot;)}}"><template case="true"> {{getI18n("crm.label.is")}} {{getI18n("crm.condition.less")}} </template><template case="false"><template is="if" value="{{expHandlers(factor.comparator,\'===\',&quot;greater_than&quot;)}}"><template case="true"> {{getI18n("crm.label.is")}} {{getI18n("crm.condition.greater")}} </template><template case="false"><template is="if" value="{{expHandlers(factor.comparator,\'===\',&quot;equal&quot;)}}"><template case="true"> {{getI18n("crm.label.is")}} </template><template case="false"> {{getI18n("between")}} </template></template></template></template></template></template><template is="if" value="{{expHandlers(factor.values,\'!=\',&quot;&quot;)}}"><template case="true"><template is="if" value="{{expHandlers(factor.comparator,\'===\',&quot;between&quot;)}}"><template case="true">{{factor.values[0]}} to {{factor.values[1]}}</template><template case="false">{{factor.values}}</template></template></template><template case="false">{{getI18n("crm.condition.a.value.empty")}}</template></template> </li> </template> </ul> </template></template> <template is="if" value="{{if_gt_len(negative,0)}}"><template case="true"> <div class="predictionHeadingDrop mB15"><span class=" mR5 vam ico-smiley-sad-small-red dIB svgIcons"></span> <span data-zcqa="negative_reason" class="vam crm-font-semibold reasoningSubTitleText reasoningSubColor mL1">{{getI18n("crm.prediction.reason.negative")}}</span></div> <ul class="p0 m0"> <template is="for" items="{{negative}}" item="factor" index="index"> <li class="pL20 mB10 crm-font-regular negListRed reasoningSubColor reasoningSubTitleText mL5 breakWord"> {{factor.field.field_label}}<template is="if" value="{{expHandlers(factor.comparator,\'===\',&quot;less_than&quot;)}}"><template case="true"> {{getI18n("crm.label.is")}} {{getI18n("crm.condition.less")}} </template><template case="false"><template is="if" value="{{expHandlers(factor.comparator,\'===\',&quot;greater_than&quot;)}}"><template case="true"> {{getI18n("crm.label.is")}} {{getI18n("crm.condition.greater")}} </template><template case="false"><template is="if" value="{{expHandlers(factor.comparator,\'===\',&quot;equal&quot;)}}"><template case="true"> {{getI18n("crm.label.is")}} </template><template case="false"> {{getI18n("between")}} </template></template></template></template></template></template><template is="if" value="{{expHandlers(factor.values,\'!=\',&quot;&quot;)}}"><template case="true"><template is="if" value="{{expHandlers(factor.comparator,\'===\',&quot;between&quot;)}}"><template case="true">{{factor.values[0]}} to {{factor.values[1]}}</template><template case="false">{{factor.values}}</template></template></template><template case="false">{{getI18n("crm.condition.a.value.empty")}}</template></template> </li> </template> </ul> </template></template> </template><template case="false"> <div class="crm-font-regular reasoningNoFacts reasoningSubTitleText">{{getI18n("crm.prediction.reason.none")}}</div> </template></template> </div> </lyte-popover-content> </template> </lyte-popover> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]},{type:"attr",position:[1,3,1,1,1]},{type:"if",position:[1,3,1,1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}},{type:"attr",position:[1,3,1,3]},{type:"if",position:[1,3,1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]},{type:"text",position:[1,1,2]}]}},default:{}},{type:"attr",position:[1,3,1,5]},{type:"attr",position:[1,3,3]},{type:"text",position:[1,3,3,0]}]},false:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,3,0]},{type:"attr",position:[1,3,2]},{type:"if",position:[1,3,2],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]},false:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,3,4]},{type:"if",position:[1,3,4],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]}]}},default:{}},{type:"attr",position:[1,3,6]}]}},default:{}}]}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[1,1,1,0]},{type:"attr",position:[1,3,1]},{type:"if",position:[1,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1,2,0]},{type:"attr",position:[3,1]},{type:"for",position:[3,1],dynamicNodes:[{type:"text",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1]},{type:"text",position:[3]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1]},{type:"text",position:[3]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[1,4]},{type:"if",position:[1,4],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[0]},{type:"text",position:[2]}]},false:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}}]},false:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}}]}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"text",position:[1,2,0]},{type:"attr",position:[3,1]},{type:"for",position:[3,1],dynamicNodes:[{type:"text",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1]},{type:"text",position:[3]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1]},{type:"text",position:[3]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[1,4]},{type:"if",position:[1,4],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[0]},{type:"text",position:[2]}]},false:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}}]},false:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}}]}]}},default:{}}]},false:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}],_observedAttributes:["prediction","isnotcanvas","positive","negative","isNewView","name","predorginElem","predorginShow"],data:function(){return{prediction:Lyte.attr("array"),isnotcanvas:Lyte.attr("boolean",{default:!0}),positive:Lyte.attr("array",{default:[]}),negative:Lyte.attr("array",{default:[]}),isNewView:Lyte.attr("boolean",{default:!1}),name:Lyte.attr("string"),predorginElem:Lyte.attr("string"),predorginShow:Lyte.attr("boolean")}},actions:{getFacts:function(e,t){var a,i=this;this.getData("prediction").filter((function(e){e.id===t&&(a=e.name)})),this.setData("name",a);var o=this.getData("isnotcanvas")?null:this.$node.parentElement.getData(),s=this.getData("isnotcanvas")?returnJson.tabId:moduleRecordMapping[o.module].id,p=store.peekRecord("module",s),n=this.getData("isnotcanvas")?returnJson[p.module_name].entityid:o.record.id;commonUtils.showHideLoadingDiv(!0),store.findRecord("dummy",t,{},void 0,!1,{url:"crm/v2.2/__internal/"+p.api_name+"/"+n+"/actions/prediction_reasoning?prediction_id="+t+"&include_inner_details=positive_facts.reasoning_fields.field.field_label,negative_facts.reasoning_fields.field.field_label"}).then((function(e){void 0!==e.reasoning?(Crm.client_tracking("Zia Reasoning",{Operation:"Factors Available"}),i.setData("positive",e.reasoning.positive_facts.reasoning_fields),i.setData("negative",e.reasoning.negative_facts.reasoning_fields)):Crm.client_tracking("Zia Reasoning",{Operation:"Factors Not Available"}),i.setData("predorginElem","getTheFactsDiv"+t),i.setData("predorginShow",!0),commonUtils.showHideLoadingDiv(!1)}),(function(){Crm.client_tracking("Zia Reasoning",{Operation:"Factors Not Available"}),i.setData("predorginElem","getTheFactsDiv"+t),i.setData("predorginShow",!0),commonUtils.showHideLoadingDiv(!1)}))}}});
