var SalesNavigator={loadSalesNavigator:function(){var n=$('[ddname="LINKEDIN_SALES_NAVIGATOR_PERSONALITY"]');if(n.length>0){var t=renderingUtils.windowHeight,e=n.offset().top,a=$("#linked_in_container");e>0&&e<t&&(1==a.children().length&&"true"!==a.attr("load")||crmConstants.reloadSalesNavigator)&&(a.attr("load","true"),(returnJson.Leads||returnJson.Contacts||returnJson.Potentials||returnJson.Accounts)&&SalesNavigator.loadSalesNavigatorRelatedList())}},loadSalesNavigatorRelatedList:function(){var n=Crm.getCrmBasePath()+"/SalesNavigator.do",t={action:"get_widgets"};if(returnJson.Leads||returnJson.Contacts?(t.entity_id=returnJson.relListLabelsJson.entityid,returnJson.Leads&&returnJson.entityMapJson.COMPANY&&returnJson.entityMapJson.COMPANY.defaultvalue&&""!=returnJson.entityMapJson.COMPANY.defaultvalue?t.company=!0:returnJson.Contacts&&returnJson.entityMapJson.ACCOUNTID&&returnJson.entityMapJson.ACCOUNTID.defaultvalue&&""!=returnJson.entityMapJson.ACCOUNTID.defaultvalue&&(t.account_id=returnJson.entityMapJson.ACCOUNTID.defaultid),returnJson.Leads?t.module="Leads":returnJson.Contacts&&(t.module="Contacts")):returnJson.Accounts?(t.account_id=returnJson.relListLabelsJson.entityid,t.module="Accounts"):returnJson.Potentials&&(returnJson.entityMapJson.CONTACTID&&returnJson.entityMapJson.CONTACTID.defaultvalue&&""!=returnJson.entityMapJson.CONTACTID.defaultvalue&&(t.entity_id=returnJson.entityMapJson.CONTACTID.defaultid),returnJson.entityMapJson.ACCOUNTID&&returnJson.entityMapJson.ACCOUNTID.defaultvalue&&""!=returnJson.entityMapJson.ACCOUNTID.defaultvalue&&(t.account_id=returnJson.entityMapJson.ACCOUNTID.defaultid),t.module="Contacts"),t.entity_id||t.account_id){(new crmRequestPool).initiate({action:n,data:t,success:function(n){n=JSON.parse(n);var t=$("#linked_in_container"),e="https://www.linkedin.com/sales/widget/",a="",o="";if(delete crmConstants.reloadSalesNavigator,n.entity_linkedin_id)if(a=e+"profile-matching/?from=crm&apiKey=750hg7mkzhryiz&profile=lead&crmSourceType=ZOHO&crmOrganizationId="+Crm.userDetails.ZGID+"&crmRecordId="+n.entity_linkedin_id+"&version=2.0.0&modules=TopCard2,Icebreakers,GetIntroduced,RelatedLeads",returnJson.Leads||returnJson.Contacts)a+="&firstName="+encodeURIComponent(returnJson.entityMapJson.LASTNAME.nameInfo.firstname)+"&lastName="+encodeURIComponent(returnJson.entityMapJson.LASTNAME.nameInfo.lastname),(returnJson.Leads||returnJson.Contacts)&&(returnJson.entityMapJson.EMAIL&&""!=returnJson.entityMapJson.EMAIL.defaultvalue&&"null"!=returnJson.entityMapJson.EMAIL.defaultvalue?a+="&email="+encodeURIComponent(returnJson.entityMapJson.EMAIL.defaultvalue):returnJson.entityMapJson.ADDN_EMAIL&&""!=returnJson.entityMapJson.ADDN_EMAIL.defaultvalue&&"null"!=returnJson.entityMapJson.ADDN_EMAIL.defaultvalue&&(a+="&email="+encodeURIComponent(returnJson.entityMapJson.ADDN_EMAIL.defaultvalue))),returnJson.Leads&&returnJson.entityMapJson.COMPANY&&""!=returnJson.entityMapJson.COMPANY.defaultvalue?a+="&companyName="+encodeURIComponent(returnJson.entityMapJson.COMPANY.defaultvalue):returnJson.Contacts&&returnJson.entityMapJson.ACCOUNTID&&returnJson.entityMapJson.ACCOUNTID.defaultvalue&&(a+="&companyName="+encodeURIComponent(returnJson.entityMapJson.ACCOUNTID.defaultvalue));else if(returnJson.Potentials&&returnJson.entityMapJson.CONTACTID&&""!=returnJson.entityMapJson.CONTACTID.defaultvalue){var r=returnJson.entityMapJson.CONTACTID.defaultvalue.trim();1==r.split(" ").length?a+="&firstName="+encodeURIComponent(r.split(" ")[0]):2==r.split(" ").length&&(a+="&firstName="+encodeURIComponent(r.split(" ")[0])+"&lastName="+encodeURIComponent(r.split(" ")[1])),returnJson.entityMapJson.CONTACTID.priEmail&&""!=returnJson.entityMapJson.CONTACTID.priEmail&&"null"!=returnJson.entityMapJson.CONTACTID.priEmail?a+="&email="+encodeURIComponent(returnJson.entityMapJson.CONTACTID.priEmail):returnJson.entityMapJson.CONTACTID.EntEmail&&""!=returnJson.entityMapJson.CONTACTID.EntEmail&&"null"!=returnJson.entityMapJson.CONTACTID.EntEmail&&(a+="&email="+encodeURIComponent(returnJson.entityMapJson.CONTACTID.EntEmail)),returnJson.entityMapJson.ACCOUNTID&&returnJson.entityMapJson.ACCOUNTID.defaultvalue&&(a+="&companyName="+encodeURIComponent(returnJson.entityMapJson.ACCOUNTID.defaultvalue))}if(n.account_linkedin_id&&(o=e+"company-matching/?from=crm&apiKey=750hg7mkzhryiz&profile=account&crmSourceType=ZOHO&crmOrganizationId="+Crm.userDetails.ZGID+"&crmRecordId="+n.account_linkedin_id+"&version=2.0.0&modules=TopCard,RecommendedLeads,Connections,News",returnJson.Leads&&returnJson.entityMapJson.COMPANY&&""!=returnJson.entityMapJson.COMPANY.defaultvalue?o+="&name="+encodeURIComponent(returnJson.entityMapJson.COMPANY.defaultvalue):returnJson.Contacts&&returnJson.entityMapJson.ACCOUNTID&&returnJson.entityMapJson.ACCOUNTID.defaultvalue?o+="&name="+encodeURIComponent(returnJson.entityMapJson.ACCOUNTID.defaultvalue):returnJson.Accounts?o+="&name="+encodeURIComponent(returnJson.Accounts.entityName):returnJson.Potentials&&(o+="&name="+encodeURIComponent(returnJson.entityMapJson.ACCOUNTID.defaultvalue))),n.entity_linkedin_id&&n.account_linkedin_id){var s=745;(i=Math.ceil(t.outerWidth()/2)-20)>639&&(i=639),t.css("height","800px"),returnJson.Leads?(n.entity_title=moduleRecordMapping.Leads.singular_label,n.account_title=I18n.getMsg("Company")):(returnJson.Contacts||returnJson.Potentials)&&(n.entity_title=moduleRecordMapping.Contacts.singular_label,n.account_title=moduleRecordMapping.Accounts.singular_label),n.width=i,n.height=s,n.entity_url=a,n.account_url=o,t.html(Handlebars.templates.SalesNavigatorWidget(n))}else if(n.entity_linkedin_id||n.account_linkedin_id){s=590;var i=Math.floor(t.outerWidth());n.width=i,n.height=s,t.css("height","640px"),n.entity_linkedin_id?(returnJson.Leads?n.entity_title=moduleRecordMapping.Leads.singular_label:(returnJson.Contacts||returnJson.Potentials)&&(n.entity_title=moduleRecordMapping.Contacts.singular_label),n.entity_url=a,t.html(Handlebars.templates.SalesNavigatorWidget(n))):n.account_linkedin_id&&(n.account_title=moduleRecordMapping.Accounts.singular_label,n.account_url=o,t.html(Handlebars.templates.SalesNavigatorWidget(n)))}}})}else{var e=$('[ddname="LINKEDIN_SALES_NAVIGATOR_PERSONALITY"]').attr("ddid");$("#"+e).html('<table border="0" width="100%" cellspacing="0" cellpadding="0" align="center" class="norec"><tbody><tr><td valign="center"><div class="pR30 italic fontsmooth">'+I18n.getMsg("crm.social.lable.noDataFound")+"</div></td></tr></tbody></table>")}}};