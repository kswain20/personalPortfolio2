Lyte.Component.register("crm-circuits-rl-body",{_template:'<template tag-name="crm-circuits-rl-body"> <lyte-event-listener event-name="cirRLBody_reloadData" on-fire="{{action(\'reloadData\')}}" class="clearAfterB"> <lyte-event-listener event-name="cirRLBody_closeActionPop" on-fire="{{action(\'close_action_pop\')}}" class="clearAfterB"> <lyte-event-listener event-name="cirRLBody_reloadRLOperations" on-fire="{{action(\'reloadRLOperations\')}}" class="clearAfterB"> <lyte-event-listener event-name="cirRLBody_setIsAccountEnabled" on-fire="{{action(\'setIsAccountEnabled\')}}" class="clearAfterB"> <template is="if" value="{{expHandlers(status,\'==\',0)}}"><template case="true"> <table class="norec w95per"> <tbody><tr> <td data-zcqa="relatedList_noRec" class="aligncenter"><img class="h20" src="//img.zohocdn.com/crm/CRMClient/images/moreloading1_81c3cbe_.gif" alt="moreloading1"></td> </tr> </tbody></table> </template><template case="false"><template is="if" value="{{expHandlers(status,\'==\',500)}}"><template case="true"> <table class="norec m0 w100p"> <tbody><tr> <td data-zcqa="relatedList_errorMsg">{{resp_data.message}}</td> </tr> </tbody></table> </template><template case="false"><template is="if" value="{{expHandlers(status,\'==\',204)}}"><template case="true"> <table class="norec m0 w100p"> <tbody><tr> <td data-zcqa="relatedList_errorMsg">{{resp_data.message}}</td> </tr> </tbody></table> </template><template case="false"> <lyte-table lt-prop-yield="true" class="{{if(array_contains(lowWidthModule,module),\'cir_taskTableWidth\',\'w100p\')}} dIB mB15" after-render="{{method(\'setTableWidth\')}}"> <template is="registerYield" yield-name="yield"> <lyte-table-structure> <lyte-thead> <lyte-tr> <lyte-th class="pL20" data-zcqa="relatedList_Header">{{getI18n(\'crm.circuits.rl.header.circuit.name\')}}</lyte-th> <lyte-th data-zcqa="relatedList_Header">{{getI18n(\'crm.workflow.scheduler.start.time\')}}</lyte-th> <lyte-th data-zcqa="relatedList_Header">{{getI18n(\'crm.workflow.scheduler.end.time\')}}</lyte-th> <lyte-th data-zcqa="relatedList_Header">{{getI18n(\'crm.events.duration\')}}</lyte-th> <lyte-th data-zcqa="relatedList_Header">{{getI18n(\'crm.transition.current.state\')}}</lyte-th> <lyte-th data-zcqa="relatedList_Header">{{getI18n(\'crm.circuits.rl.header.smownerid\')}}</lyte-th> <template is="if" value="{{isCircuitsAccessible}}"><template case="true"> <lyte-th data-zcqa="relatedList_Header">{{getI18n(\'crm.circuits.rl.header.execution\')}}</lyte-th> </template></template> <lyte-th data-zcqa="relatedList_Header">{{getI18n(\'crm.circuits.rl.header.triggered.from\')}}</lyte-th> <lyte-th data-zcqa="relatedList_Header">{{getI18n(\'crm.cal.status\')}}</lyte-th> <template is="if" value="{{isCircuitsAccessible}}"><template case="true"> <lyte-th></lyte-th> <lyte-th></lyte-th> </template></template> </lyte-tr> </lyte-thead> <lyte-tbody> <template is="for" items="{{resp_data.Circuit_Executions}}" item="data" index="index"> <lyte-tr> <lyte-td class="pL20" data-zcqa="relatedList_Values"><div lt-prop-title="{{data.circuit_name}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;top&quot;}" class="ellipsistext w90">{{data.circuit_name}}</div></lyte-td> <lyte-td data-zcqa="relatedList_Values">{{getTimeValueinUsrFormat(data.start_time,null)}}</lyte-td> <lyte-td data-zcqa="relatedList_Values">{{getTimeValueinUsrFormat(data.end_time,null)}}</lyte-td> <lyte-td data-zcqa="relatedList_Values"><template is="if" value="{{expHandlers(data.duration,\'!=\',null)}}"><template case="true">{{data.duration}}</template><template case="false">-</template></template></lyte-td> <lyte-td data-zcqa="relatedList_Values"><template is="if" value="{{expHandlers(data.present_state,\'!=\',null)}}"><template case="true"><div lt-prop-title="{{data.present_state}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;top&quot;}" class="ellipsistext w90">{{data.present_state}}</div></template><template case="false">-</template></template></lyte-td> <lyte-td data-zcqa="relatedList_Values"><div lt-prop-title="{{data.triggered_by.name}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;top&quot;}" class="ellipsistext w110">{{data.triggered_by.name}}</div></lyte-td> <template is="if" value="{{isCircuitsAccessible}}"><template case="true"> <lyte-td><span class="cP link1 w110 dIB" data-zcqa="cirRLBody_viewExec" onclick="{{action(\'showCircuitExecution\',data.execution_url,data.circuit_name)}}">{{getI18n(\'crm.circuits.rl.view.execution\')}}</span></lyte-td> </template></template> <lyte-td data-zcqa="relatedList_Values"><template is="if" value="{{checkComparison(data.trigger_action_name,null,&quot;!=&quot;)}}"><template case="true"> <template is="if" value="{{checkComparison(data.triggered_from,null,&quot;!=&quot;)}}"><template case="true"> <div class="w180 ellipsistext" lt-prop-title="{{data.trigger_action_name}}({{getCircuitsI18nValue(data.triggered_from)}})" lt-prop-tooltip-config="{&quot;position&quot; : &quot;top&quot;}">{{data.trigger_action_name}}({{getCircuitsI18nValue(data.triggered_from)}})</div> </template><template case="false"> <div class="w180 ellipsistext" lt-prop-title="{{data.circuit_name}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;top&quot;}">{{data.trigger_action_name}}(-)</div> </template></template> </template><template case="false">-</template></template> </lyte-td> <lyte-td data-zcqa="relatedList_Values" class="{{if(ifEquals(data.status,\'success\'),\'clrGreen\',\'\')}} {{if(ifEquals(data.status,\'failed\'),\'redText\',\'\')}} {{if(ifEquals(data.status,\'running\'),\'blueTxt\',\'\')}} {{if(ifEquals(data.status,\'abort_in_progress\'),\'redText\',\'\')}}">{{getCircuitsI18nValue(capitalize(data.status))}}</lyte-td> <template is="if" value="{{isCircuitsAccessible}}"><template case="true"> <template is="if" value="{{expHandlers(data.status,\'==\',&quot;running&quot;)}}"><template case="true"> <template is="if" value="{{expHandlers(data.circuit_status,\'==\',&quot;deleted&quot;)}}"><template case="true"> <lyte-td class="cP p10"><span id="makeAbortExecution" lt-prop-title="{{getI18n(\'crm.circuits.does.not.exist\')}}" data-zcqa="cirRLBody_abortCir" class="cir_abortButColor disabled">{{getI18n(\'crm.circuits.action.abort\')}}</span></lyte-td> </template><template case="false"><template is="if" value="{{expHandlers(data.circuit_status,\'==\',&quot;inactive&quot;)}}"><template case="true"> <lyte-td class="cP p10"><span id="makeAbortExecution" lt-prop-title="{{getI18n(\'crm.circuits.disabled.action\')}}" data-zcqa="cirRLBody_abortCir" class="cir_abortButColor disabled">{{getI18n(\'crm.circuits.action.abort\')}}</span></lyte-td> </template><template case="false"><template is="if" value="{{expHandlers(isAccountEnabled,\'!\')}}"><template case="true"> <template is="if" value="{{isAdmin}}"><template case="true"> <lyte-td class="cP p10"><span id="makeAbortExecution" lt-prop-title="{{getI18n(\'crm.circuits.acc.freeze.admin\',brandName)}}" data-zcqa="cirRLBody_abortCir" class="cir_abortButColor disabled">{{getI18n(\'crm.circuits.action.abort\')}}</span></lyte-td> </template><template case="false"> <lyte-td class="cP p10"><span id="makeAbortExecution" lt-prop-title="{{getI18n(\'crm.circuits.acc.freeze.nonadmin\',brandName)}}" data-zcqa="cirRLBody_abortCir" class="cir_abortButColor disabled">{{getI18n(\'crm.circuits.action.abort\')}}</span></lyte-td> </template></template> </template><template case="false"> <lyte-td class="cP p10"><span id="makeAbortExecution" class="cir_abortButColor" data-zcqa="cirRLBody_abortCir" onclick="{{action(\'makeActionShow\',\'abort\',data.id,data.circuit_id,this)}}">{{getI18n(\'crm.circuits.action.abort\')}}</span></lyte-td> </template></template></template></template></template></template> <lyte-td></lyte-td> </template><template case="false"><template is="if" value="{{expHandlers(data.status,\'==\',&quot;failed&quot;)}}"><template case="true"> <template is="if" value="{{expHandlers(data.circuit_status,\'==\',&quot;deleted&quot;)}}"><template case="true"> <lyte-td class="cP p10"><span id="makeRetryExecution" lt-prop-title="{{getI18n(\'crm.circuits.does.not.exist\')}}" data-zcqa="cirRLBody_retryCir" class="cir_newCirButColor disabled">{{getI18n(\'crm.circuits.action.retry\')}}</span></lyte-td> <lyte-td class="cP p10"><span id="makeReRunExecution" lt-prop-title="{{getI18n(\'crm.circuits.does.not.exist\')}}" data-zcqa="cirRLBody_rerunCir" class="cir_newCirButColor disabled">{{getI18n(\'crm.circuits.action.rerun\')}}</span></lyte-td> </template><template case="false"><template is="if" value="{{expHandlers(data.circuit_status,\'==\',&quot;inactive&quot;)}}"><template case="true"> <lyte-td class="cP p10"><span id="makeRetryExecution" lt-prop-title="{{getI18n(\'crm.circuits.disabled.action\')}}" data-zcqa="cirRLBody_retryCir" class="cir_newCirButColor disabled">{{getI18n(\'crm.circuits.action.retry\')}}</span></lyte-td> <lyte-td class="cP p10"><span id="makeReRunExecution" lt-prop-title="{{getI18n(\'crm.circuits.disabled.action\')}}" data-zcqa="cirRLBody_rerunCir" class="cir_newCirButColor disabled">{{getI18n(\'crm.circuits.action.rerun\')}}</span></lyte-td> </template><template case="false"><template is="if" value="{{expHandlers(isAccountEnabled,\'!\')}}"><template case="true"> <template is="if" value="{{isAdmin}}"><template case="true"> <lyte-td class="cP p10"><span id="makeRetryExecution" lt-prop-title="{{getI18n(\'crm.circuits.acc.freeze.admin\',brandName)}}" data-zcqa="cirRLBody_retryCir" class="cir_newCirButColor disabled">{{getI18n(\'crm.circuits.action.retry\')}}</span></lyte-td> <lyte-td class="cP p10"><span id="makeReRunExecution" lt-prop-title="{{getI18n(\'crm.circuits.acc.freeze.admin\',brandName)}}" data-zcqa="cirRLBody_rerunCir" class="cir_newCirButColor disabled">{{getI18n(\'crm.circuits.action.rerun\')}}</span></lyte-td> </template><template case="false"> <lyte-td class="cP p10"><span id="makeRetryExecution" lt-prop-title="{{getI18n(\'crm.circuits.acc.freeze.nonadmin\',brandName)}}" data-zcqa="cirRLBody_retryCir" class="cir_newCirButColor disabled">{{getI18n(\'crm.circuits.action.retry\')}}</span></lyte-td> <lyte-td class="cP p10"><span id="makeReRunExecution" lt-prop-title="{{getI18n(\'crm.circuits.acc.freeze.nonadmin\',brandName)}}" data-zcqa="cirRLBody_rerunCir" class="cir_newCirButColor disabled">{{getI18n(\'crm.circuits.action.rerun\')}}</span></lyte-td> </template></template> </template><template case="false"> <lyte-td class="cP p10"><span id="makeRetryExecution" class="cir_newCirButColor" data-zcqa="cirRLBody_retryCir" onclick="{{action(\'makeActionShow\',\'retry\',data.id,data.circuit_id,this)}}">{{getI18n(\'crm.circuits.action.retry\')}}</span></lyte-td> <lyte-td class="cP p10"><span id="makeRerunExecution" class="cir_newCirButColor" data-zcqa="cirRLBody_rerunCir" onclick="{{action(\'makeActionShow\',\'rerun\',data.id,data.circuit_id,this)}}">{{getI18n(\'crm.circuits.action.rerun\')}}</span></lyte-td> </template></template></template></template></template></template> </template><template case="false"> <lyte-td></lyte-td> <lyte-td></lyte-td> </template></template></template></template> </template></template> </lyte-tr> </template> </lyte-tbody> </lyte-table-structure> </template> </lyte-table> <template is="if" value="{{showNavigation}}"><template case="true"> <div class="clearAfterB"><lyte-navigator class="fR pR15 pB15" on-next="{{method(\'nextRecords\')}}" on-previous="{{method(\'prevRecords\')}}" lt-prop-middle-text="{{getI18n(&quot;crm.label.lowercase.to&quot;)}}" lt-prop-yeild="false" lt-prop-value="{{fromIndex}}" lt-prop-perpage="10" lt-prop-more-records="{{showNextNav}}" data-zcqa="cirRLBody_navCirRec" lt-prop-records="{{toIndex}}"> </lyte-navigator></div> </template></template> </template></template></template></template></template></template> <lyte-popover id="circuitActionPop" lt-prop-origin-elem=".currentCircuitAction" lt-prop-show-close-button="false" lt-prop-close-on-escape="false" lt-prop-close-on-body-click="false" lt-prop-bind-to-body="{{lbind(bindToBodyNeeded)}}" lt-prop-show="{{lbind(showActionPop)}}"> <template is="registerYield" yield-name="popover"> <lyte-popover-header> <template is="if" value="{{ifEquals(actionName,\'retry\')}}"><template case="true"> {{getI18n(\'crm.circuits.execution.title\',\'crm.circuits.action.retry\')}} </template><template case="false"><template is="if" value="{{ifEquals(actionName,\'rerun\')}}"><template case="true"> {{getI18n(\'crm.circuits.execution.title\',\'crm.circuits.action.rerun\')}} </template><template case="false"><template is="if" value="{{ifEquals(actionName,\'abort\')}}"><template case="true"> {{getI18n(\'crm.circuits.execution.title\',\'crm.circuits.action.abort\')}} </template></template></template></template></template></template> </lyte-popover-header> <template is="if" value="{{ifNotEquals(actionName,\'abort\')}}"><template case="true"> <lyte-popover-content> <div class="f14 dB"> <template is="if" value="{{ifEquals(actionName,\'retry\')}}"><template case="true"> {{getI18n(\'crm.circuits.retry.desc\')}} </template><template case="false"><template is="if" value="{{ifEquals(actionName,\'rerun\')}}"><template case="true"> {{getI18n(\'crm.circuits.rerun.desc\')}} </template></template></template></template> </div> </lyte-popover-content> </template></template> <lyte-popover-footer class="right noBdr"> <lyte-button onclick="{{action(\'close_action_pop\',\'circuitActionPop\')}}" data-zcqa="cirRLBody_cancelAction"> <template is="registerYield" yield-name="text">{{getI18n(\'crm.customlink.cancel\')}}</template> </lyte-button> <lyte-button lt-prop-appearance="{{if(ifEquals(actionName,&quot;abort&quot;),&quot;failure&quot;,&quot;primary&quot;)}}" data-zcqa="cirRLBody_performAction" onclick="{{action(\'performAction\',actionName)}}"> <template is="registerYield" yield-name="text"> <template is="if" value="{{ifEquals(actionName,\'retry\')}}"><template case="true"> {{getI18n(\'crm.circuits.action.retry\')}} </template><template case="false"><template is="if" value="{{ifEquals(actionName,\'rerun\')}}"><template case="true"> {{getI18n(\'crm.circuits.action.rerun\')}} </template><template case="false"><template is="if" value="{{ifEquals(actionName,\'abort\')}}"><template case="true"> {{getI18n(\'crm.circuits.execution.title\',\'crm.circuits.action.abort\')}} </template></template></template></template></template></template> </template> </lyte-button> </lyte-popover-footer> </template> </lyte-popover> </lyte-event-listener></lyte-event-listener></lyte-event-listener></lyte-event-listener></template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"attr",position:[1,1,1,1]},{type:"attr",position:[1,1,1,1,1]},{type:"if",position:[1,1,1,1,1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0,1,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0,1,0]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[1,1,1,1,0]},{type:"componentDynamic",position:[1,1,1,1]},{type:"text",position:[1,1,1,3,0]},{type:"componentDynamic",position:[1,1,1,3]},{type:"text",position:[1,1,1,5,0]},{type:"componentDynamic",position:[1,1,1,5]},{type:"text",position:[1,1,1,7,0]},{type:"componentDynamic",position:[1,1,1,7]},{type:"text",position:[1,1,1,9,0]},{type:"componentDynamic",position:[1,1,1,9]},{type:"text",position:[1,1,1,11,0]},{type:"componentDynamic",position:[1,1,1,11]},{type:"attr",position:[1,1,1,13]},{type:"if",position:[1,1,1,13],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"text",position:[1,1,1,15,0]},{type:"componentDynamic",position:[1,1,1,15]},{type:"text",position:[1,1,1,17,0]},{type:"componentDynamic",position:[1,1,1,17]},{type:"attr",position:[1,1,1,19]},{type:"if",position:[1,1,1,19],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1]},{type:"componentDynamic",position:[3]}]}},default:{}},{type:"componentDynamic",position:[1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3,1]},{type:"for",position:[1,3,1],dynamicNodes:[{type:"attr",position:[1,1,0]},{type:"text",position:[1,1,0,0]},{type:"componentDynamic",position:[1,1]},{type:"text",position:[1,3,0]},{type:"componentDynamic",position:[1,3]},{type:"text",position:[1,5,0]},{type:"componentDynamic",position:[1,5]},{type:"attr",position:[1,7,0]},{type:"if",position:[1,7,0],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]},false:{dynamicNodes:[]}},default:{}},{type:"componentDynamic",position:[1,7]},{type:"attr",position:[1,9,0]},{type:"if",position:[1,9,0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"text",position:[0,0]}]},false:{dynamicNodes:[]}},default:{}},{type:"componentDynamic",position:[1,9]},{type:"attr",position:[1,11,0]},{type:"text",position:[1,11,0,0]},{type:"componentDynamic",position:[1,11]},{type:"attr",position:[1,13]},{type:"if",position:[1,13],cases:{true:{dynamicNodes:[{type:"attr",position:[1,0]},{type:"text",position:[1,0,0]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,15,0]},{type:"if",position:[1,15,0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"text",position:[1,2]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}}]},false:{dynamicNodes:[]}},default:{}},{type:"componentDynamic",position:[1,15]},{type:"attr",position:[1,17]},{type:"text",position:[1,17,0]},{type:"componentDynamic",position:[1,17]},{type:"attr",position:[1,19]},{type:"if",position:[1,19],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,0]},{type:"text",position:[1,0,0]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1,0]},{type:"text",position:[1,0,0]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,0]},{type:"text",position:[1,0,0]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1,0]},{type:"text",position:[1,0,0]},{type:"componentDynamic",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1,0]},{type:"text",position:[1,0,0]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[3]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,0]},{type:"text",position:[1,0,0]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,0]},{type:"text",position:[3,0,0]},{type:"componentDynamic",position:[3]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1,0]},{type:"text",position:[1,0,0]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,0]},{type:"text",position:[3,0,0]},{type:"componentDynamic",position:[3]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,0]},{type:"text",position:[1,0,0]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,0]},{type:"text",position:[3,0,0]},{type:"componentDynamic",position:[3]}]},false:{dynamicNodes:[{type:"attr",position:[1,0]},{type:"text",position:[1,0,0]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,0]},{type:"text",position:[3,0,0]},{type:"componentDynamic",position:[3]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1,0]},{type:"text",position:[1,0,0]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,0]},{type:"text",position:[3,0,0]},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"componentDynamic",position:[1]},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,3]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,0]},{type:"componentDynamic",position:[1,0]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[1,1,1,1,3]},{type:"registerYield",position:[1,1,1,1,3,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[5,1]},{type:"registerYield",position:[5,1,1],dynamicNodes:[{type:"text",position:[0]}]},{type:"componentDynamic",position:[5,1]},{type:"attr",position:[5,3]},{type:"registerYield",position:[5,3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}]},{type:"componentDynamic",position:[5,3]},{type:"componentDynamic",position:[5]}]},{type:"componentDynamic",position:[1,1,1,1,3]},{type:"componentDynamic",position:[1,1,1,1]},{type:"componentDynamic",position:[1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}],_observedAttributes:["related_list_id","module","lowWidthModule","entity_id","recordList","fromIndex","toIndex","start","page","range","execution_type","showNavigation","showNextNav","dataList","status","storedData","executionId","isAdmin","isAccountEnabled","circuitId","isCircuitsAccessible","brandName","componentRenderDtl","bindToBodyNeeded","showActionPop","hasMoreData"],data:function(){return{related_list_id:Lyte.attr("string"),module:Lyte.attr("string"),lowWidthModule:Lyte.attr("array",{default:["Calls","Tasks","Events"]}),entity_id:Lyte.attr("string"),recordList:Lyte.attr("array",{default:[]}),fromIndex:Lyte.attr("number",{default:0}),toIndex:Lyte.attr("number",{default:10}),start:Lyte.attr("number",{default:0}),page:Lyte.attr("number",{default:1}),range:Lyte.attr("number",{default:100}),execution_type:Lyte.attr("string",{default:"all"}),showNavigation:Lyte.attr("boolean",{default:!1}),showNextNav:Lyte.attr("boolean",{default:!1}),dataList:Lyte.attr("array",{default:[]}),status:Lyte.attr("number",{default:0}),storedData:Lyte.attr("number",{default:0}),executionId:Lyte.attr("string",{default:""}),isAdmin:Lyte.attr("boolean",{default:Crm.userDetails.IS_ADMIN_ROLE}),isAccountEnabled:Lyte.attr("boolean",{default:!0}),circuitId:Lyte.attr("string",{default:""}),isCircuitsAccessible:Lyte.attr("boolean",{default:!1}),brandName:Lyte.attr("string",{default:Crm.brandName}),componentRenderDtl:Lyte.attr("object",{default:{}}),bindToBodyNeeded:Lyte.attr("boolean",{default:!1}),showActionPop:Lyte.attr("boolean",{default:!1}),hasMoreData:Lyte.attr("boolean",{default:!1})}},didConnect:function(){Lyte.injectResources([networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("circuits")],crmConstants.jsStaticPath)],void 0,(function(){Lyte.triggerEvent("cirRLBody_reloadData")}))},actions:{showCircuitExecution:function(t,e){var a=this;if(t){commonUtils.showHideLoadingDiv(!0);var i=networkUtils.returnDependencyFiles(["crm-circuits-preview-display.js"],crmConstants.jsStaticPathForLyte);i=i.concat(networkUtils.returnDependencyFiles(["crm-circuits-preview-display.css"],crmConstants.cssStaticPathForLyte)),Crm.userDetails.RTL_ENABLED&&(i=i.concat(networkUtils.returnDependencyFiles(["crm-circuits-rtl.css"],crmConstants.cssStaticPathForLyte))),i=(i=i.concat(networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("circuits")],crmConstants.jsStaticPath))).concat(networkUtils.returnDependencyFiles(["crm-circuits-common.js"],crmConstants.jsStaticPathForLyte)),Lyte.injectResources(i,void 0,(function(){var i=a.getData("componentRenderDtl");if(!i.hasOwnProperty("circuitsPreview")){var o=$("crm-circuits-preview");0!==o.length&&o.remove(),Lyte.Component.render("crm-circuits-preview",void 0,"#show"),i.circuitsPreview=!0,a.setData("componentRenderDtl",i)}Lyte.triggerEvent("cirPrev_set_data",{preview_url:t,circuit_name:e,action:"execution"}),Lyte.triggerEvent("cirPrev_show_preview_pop",!0),commonUtils.showHideLoadingDiv(!1)}),t,e)}else this.executeMethod("errorHandling",{})},makeActionShow:function(t,e,a,i){$L(".currentCircuitAction").removeClass("currentCircuitAction"),$L(i).addClass("currentCircuitAction"),this.setData("circuitId",a),this.setData("executionId",e),this.setData("actionName",t),this.setData("showActionPop",!0)},close_action_pop:function(){this.setData("bindToBodyNeeded",!1),this.setData("showActionPop",!1)},performAction:function(t){var e=this;commonUtils.showHideLoadingDiv(!0);var a=[{circuit_id:this.data.circuitId,execution_id:this.data.executionId,action:t}];Lyte.triggerEvent("cirRLBody_closeActionPop"),store.triggerAction("circuits","circuit_action",{request_type:"POST",payLoad:a}).then((function(){"abort"===t?crmui.showMsgBand("success",I18n.getMsg("crm.circuits.abort.initiated"),"4000"):crmui.showMsgBand("success",I18n.getMsg("crm.circuits.trigger.success"),"4000"),Lyte.triggerEvent("cirRlLabel_reloadCircuits"),commonUtils.showHideLoadingDiv(!1)}),(function(a){e.executeMethod("errorHandling",a.response,void 0,[t]),commonUtils.showHideLoadingDiv(!1)}),t)},reloadData:function(){this.executeMethod("reloadRelatedList")},close_action_pop:function(){this.setData("bindToBodyNeeded",!1),this.setData("showActionPop",!1)},reloadRLOperations:function(){this.setData({storedData:0,dataList:[],fromIndex:0,toIndex:10})},setIsAccountEnabled:function(t){this.setData("isAccountEnabled",t)}},methods:{setTableWidth:function(){if(this.getData("lowWidthModule").contains(this.getData("module"))){var t=$L("#rightPanel"),e=window.innerWidth-(300+(t.is(":visible")?t.width():0)+40);$L(".cir_taskTableWidth").width(e)}},reloadRelatedList:function(t,e){var a=this;a.setData("status",0),Crm.userDetails.hasOwnProperty("Circuits")&&Crm.userDetails.Circuits.hasOwnProperty("isCurrentPortalActive")&&a.setData("isAccountEnabled",Crm.userDetails.Circuits.isCurrentPortalActive),!!a.hasOwnProperty("resp_data")&&(!!a.getData("resp_data").hasOwnProperty("Circuit_Executions")&&(!!Array.isArray(a.getData("resp_data").Circuit_Executions)&&!!a.getData("resp_data").Circuit_Executions.length))||Lyte.triggerEvent("cirRlLabel_refreshIcon",{refreshStatus:!0});var i=null!=moduleRecordMapping[a.getData("module")]?moduleRecordMapping[a.getData("module")].api_name:a.getData("module");store.triggerAction("circuits","circuit_rl",{request_type:"GET"},{search_key:a.getData("entity_id"),page:a.getData("page"),per_page:a.getData("range"),type:"api",status:a.getData("execution_type"),module:i}).then((function(i){var o=0,s=!!a.hasOwnProperty("resp_data")&&(!!a.getData("resp_data").hasOwnProperty("Circuit_Executions")&&(!!Array.isArray(a.getData("resp_data").Circuit_Executions)&&!!a.getData("resp_data").Circuit_Executions.length));if(i.hasOwnProperty("Circuit_Executions")&&i.Circuit_Executions.length>0){a.setData("isCircuitsAccessible",i.Circuit_Executions[0].hasOwnProperty("execution_url"));var r=i.Circuit_Executions.length;a.setData("hasMoreData",i.info?i.info.more_records:i.meta.more_records),a.setData("storedData",a.getData("storedData")+i.Circuit_Executions.length),a.setData("status",200);var n=$L("#circuitExecCount");n.length&&(n.text(i.info.countt),n.removeClass("hide"));var c=a.getData("dataList"),l=i.Circuit_Executions.slice();Lyte.arrayUtils(c,"concat",l),a.setData("dataList",c),r<=10&&!i.hasNext?(Lyte.triggerEvent("cirRlLabel_setRlCount",{count:r}),o=r):(Lyte.triggerEvent("cirRlLabel_setRlCount",{count:"10+"}),o="10+"),t&&e?a.executeMethod(t,e):r<=10&&!i.hasNext?a.setData("showNavigation",!1):(i.Circuit_Executions=Lyte.arrayUtils(i.Circuit_Executions,"removeAt",0,10),a.setData("showNavigation",!0),a.setData("showNextNav",!0),a.setData("totalRows",r))}else a.setData("hasMoreData",!1),t&&e?a.executeMethod(t,e):(a.setData("storedData",0),a.setData("status",204),i.message=I18n.getMsg("crm.circuits.circuit.execution.notfound"));t&&e||(s||(0!=o?$("#newleft_"+a.getData("related_list_id")).find("span.numCountn").addClass("numCountVal").text(o):$("#newleft_"+a.getData("related_list_id")).find("span.numCountn").removeClass("numCountVal").text(" ")),a.setData("resp_data",i)),Lyte.triggerEvent("cirRlLabel_refreshIcon",{refreshStatus:!1})}),(function(t){a.setData("status",500),Lyte.triggerEvent("cirRlLabel_refreshIcon",{refreshStatus:!1});var e={};try{switch(JSON.parse(t.response).code){case"NO_PERMISSION":e.message=I18n.getMsg("crm.label.cf.error.authorization");break;case"USER_NOT_CONFIRMED":e.message=I18n.getMsg("crm.label.widgets.error.email.unconfirmed");break;case"FEATURE_NOT_AVAILABLE":e.message=I18n.getMsg("crm.setup.attribution.FEATURE_NOT_SUPPORTED");break;default:e.message=I18n.getMsg("crm.circuits.rldata.error")}}catch(t){e.message=I18n.getMsg("crm.circuits.rldata.error")}a.setData("resp_data",e)}))},nextRecords:function(t){var e=this,a=e.getData("dataList").slice(),i=a.length;if(t>=i&&e.getData("hasMoreData"))e.setData("start",t),e.setData("page",t/e.getData("range")+1),e.executeMethod("reloadRelatedList","nextRecords",t);else{var o=t,s=t+10,r=!(i<=s&&!e.getData("hasMoreData"));s=i<=s?i:s;for(var n=[],c=o;c<s;c++)n.push(a[c]);s!==i||e.getData("hasMoreData")||(r=!1),e.setData("showNextNav",r),e.setData("fromIndex",o),e.setData("toIndex",s);var l=e.getData("resp_data");Lyte.objectUtils(l,"delete","Circuit_Executions"),Lyte.objectUtils(l,"add","Circuit_Executions",n.slice())}},prevRecords:function(t){var e=this,a=t,i=t+10,o=e.getData("dataList").slice(),s=o.length,r=[],n=!(s<=i);i=n?i:s;for(var c=a;c<i;c++){if(s<c){n=!1;break}r.push(o[c])}e.setData("showNextNav",n),e.setData("fromIndex",a),e.setData("toIndex",i+1);var l=e.getData("resp_data");Lyte.objectUtils(l,"delete","Circuit_Executions"),Lyte.objectUtils(l,"add","Circuit_Executions",r.slice())}}},{mixins:["crm-circuits-mixin"]}),Lyte.Component.register("crm-circuits-rl",{_template:'<template tag-name="crm-circuits-rl"> <crm-circuits-rl-label type="{{type}}" entity_id="{{entity_id}}" module="{{module}}" related_list_id="{{related_list_id}}" display_label="{{display_label}}"></crm-circuits-rl-label> <crm-circuits-rl-body rendered_from="non_canvas" entity_id="{{entity_id}}" module="{{module}}" related_list_id="{{related_list_id}}"></crm-circuits-rl-body> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"componentDynamic",position:[3]}],_observedAttributes:["module","entity_id","related_list_id","type","display_label"],data:function(){return{module:Lyte.attr("string"),entity_id:Lyte.attr("string"),related_list_id:Lyte.attr("string"),type:Lyte.attr("string"),display_label:Lyte.attr("string")}}},{mixins:["crm-circuits-mixin"]});
